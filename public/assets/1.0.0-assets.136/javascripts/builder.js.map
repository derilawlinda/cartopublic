{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./lib/assets/javascripts/builder/app-notifications.js","webpack:///./lib/assets/javascripts/builder/cartocss-notifications.js","webpack:///./lib/assets/javascripts/builder/components/apply-button/apply-button-view.js","webpack:///./lib/assets/javascripts/builder/components/apply-button/apply-button.tpl","webpack:///./lib/assets/javascripts/builder/components/background-importer/background-import-item-view.js","webpack:///./lib/assets/javascripts/builder/components/background-importer/background-import-limit.tpl","webpack:///./lib/assets/javascripts/builder/components/background-importer/background-importer.js","webpack:///./lib/assets/javascripts/builder/components/background-importer/delegated-import-views/failed.js","webpack:///./lib/assets/javascripts/builder/components/background-importer/delegated-import-views/failed.tpl","webpack:///./lib/assets/javascripts/builder/components/background-importer/delegated-import-views/loading.js","webpack:///./lib/assets/javascripts/builder/components/background-importer/delegated-import-views/loading.tpl","webpack:///./lib/assets/javascripts/builder/components/background-importer/delegated-import-views/success.js","webpack:///./lib/assets/javascripts/builder/components/background-importer/delegated-import-views/success.tpl","webpack:///./lib/assets/javascripts/builder/components/background-importer/delegated-import-views/warnings.js","webpack:///./lib/assets/javascripts/builder/components/background-importer/delegated-import-views/warnings.tpl","webpack:///./lib/assets/javascripts/builder/components/background-importer/error-details.tpl","webpack:///./lib/assets/javascripts/builder/components/background-importer/twitter-import-details.tpl","webpack:///./lib/assets/javascripts/builder/components/background-importer/upgrade-errors.tpl","webpack:///./lib/assets/javascripts/builder/components/background-importer/warning-partial-import-details.tpl","webpack:///./lib/assets/javascripts/builder/components/background-importer/warning-too-many-files-details.tpl","webpack:///./lib/assets/javascripts/builder/components/background-importer/warning-too-many-rows-connector-details.tpl","webpack:///./lib/assets/javascripts/builder/components/code-mirror/code-mirror-bullet.tpl","webpack:///./lib/assets/javascripts/builder/components/code-mirror/code-mirror-error.tpl","webpack:///./lib/assets/javascripts/builder/components/code-mirror/code-mirror-warning.tpl","webpack:///./lib/assets/javascripts/builder/components/code-mirror/code-mirror.tpl","webpack:///./lib/assets/javascripts/builder/components/color-picker/color-picker-template.tpl","webpack:///./lib/assets/javascripts/builder/components/color-picker/template.tpl","webpack:///./lib/assets/javascripts/builder/components/context-menu-factory-view.js","webpack:///./lib/assets/javascripts/builder/components/context-menu-factory.tpl","webpack:///./lib/assets/javascripts/builder/components/custom-carousel/custom-carousel-item.tpl","webpack:///./lib/assets/javascripts/builder/components/custom-carousel/custom-carousel.tpl","webpack:///./lib/assets/javascripts/builder/components/custom-list/column-list/column-list-quantification-method-item.tpl","webpack:///./lib/assets/javascripts/builder/components/custom-list/column-list/column-list-view.tpl","webpack:///./lib/assets/javascripts/builder/components/custom-list/custom-list-action.tpl","webpack:///./lib/assets/javascripts/builder/components/custom-list/custom-list-add.tpl","webpack:///./lib/assets/javascripts/builder/components/custom-list/custom-list-empty.tpl","webpack:///./lib/assets/javascripts/builder/components/custom-list/custom-list-header.tpl","webpack:///./lib/assets/javascripts/builder/components/custom-list/custom-list-item-with-checkbox.tpl","webpack:///./lib/assets/javascripts/builder/components/custom-list/custom-list-item.tpl","webpack:///./lib/assets/javascripts/builder/components/custom-list/custom-list-search.tpl","webpack:///./lib/assets/javascripts/builder/components/custom-list/custom-list.tpl","webpack:///./lib/assets/javascripts/builder/components/date-picker-range/date-picker-range-form.tpl","webpack:///./lib/assets/javascripts/builder/components/date-picker-range/date-picker-range.tpl","webpack:///./lib/assets/javascripts/builder/components/date-picker/date-picker-view.js","webpack:///./lib/assets/javascripts/builder/components/date-picker/date-picker.tpl","webpack:///./lib/assets/javascripts/builder/components/date-picker/edit-field-model.js","webpack:///./lib/assets/javascripts/builder/components/error/error.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/data-observatory-measurements/data-observatory-measurement-item.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/data-observatory-measurements/data-observatory-measurements.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/data-observatory-measurements/filter-list-item.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/data-observatory-measurements/filter-list-view.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/data-observatory-measurements/list-view-states.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/data-observatory-measurements/measurement-list-item.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/data-observatory-measurements/measurements-count.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/data-observatory-measurements/measurements-list.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/data-observatory-measurements/measurements-search.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/datetime/datetime.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/enabler-editor/enabler-editor.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/enabler/enabler-reversed.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/enabler/enabler.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/fill-color/inputs/input-color-by-value.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/fill-color/inputs/input-color-fixed.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/fill-color/inputs/input-image.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/fill/fill-tab-pane.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/lazy-select/lazy-list-view-states.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/lazy-select/lazy-list.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/lazy-select/lazy-search.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/lazy-select/lazy-select-item.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/lazy-select/lazy-select.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/node-dataset/node-dataset-item.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/node-dataset/node-dataset-selected.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/number/number.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/operators/operators-list-count.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/operators/operators-list.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/operators/operators.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/radio/radio.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/select/select-item.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/select/select-layer-item.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/select/select-layer-list-item-view.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/select/select-layer-list-item.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/select/select-list-view-states.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/select/select.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/size/size-by-value-content-view.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/size/size-by-value-view.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/slider/slider.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/taglist/taglist.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/toggle/toggle.tpl","webpack:///./lib/assets/javascripts/builder/components/form-components/field.tpl","webpack:///./lib/assets/javascripts/builder/components/icon/templates sync nonrecursive \\.tpl$","webpack:///./lib/assets/javascripts/builder/components/icon/templates/add-feature-line.tpl","webpack:///./lib/assets/javascripts/builder/components/icon/templates/add-feature-point.tpl","webpack:///./lib/assets/javascripts/builder/components/icon/templates/add-feature-polygon.tpl","webpack:///./lib/assets/javascripts/builder/components/icon/templates/plus.tpl","webpack:///./lib/assets/javascripts/builder/components/icon/templates/warning.tpl","webpack:///./lib/assets/javascripts/builder/components/infobox/infobox-button.tpl","webpack:///./lib/assets/javascripts/builder/components/infobox/infobox-collection.js","webpack:///./lib/assets/javascripts/builder/components/infobox/infobox-factory.js","webpack:///./lib/assets/javascripts/builder/components/infobox/infobox-item-model.js","webpack:///./lib/assets/javascripts/builder/components/infobox/infobox-item-view.js","webpack:///./lib/assets/javascripts/builder/components/infobox/infobox-model.js","webpack:///./lib/assets/javascripts/builder/components/infobox/infobox-quota.tpl","webpack:///./lib/assets/javascripts/builder/components/infobox/infobox.tpl","webpack:///./lib/assets/javascripts/builder/components/input-color/assets-picker/asset-header-view.tpl","webpack:///./lib/assets/javascripts/builder/components/input-color/assets-picker/asset-item-view.tpl","webpack:///./lib/assets/javascripts/builder/components/input-color/assets-picker/assets-view.tpl","webpack:///./lib/assets/javascripts/builder/components/input-color/assets-picker/input-asset-picker-header.tpl","webpack:///./lib/assets/javascripts/builder/components/input-color/assets-picker/input-asset-picker-view.tpl","webpack:///./lib/assets/javascripts/builder/components/input-color/assets-picker/organization-assets-list-view.tpl","webpack:///./lib/assets/javascripts/builder/components/input-color/assets-picker/static-asset-item-view.tpl","webpack:///./lib/assets/javascripts/builder/components/input-color/assets-picker/tab-pane-template.tpl","webpack:///./lib/assets/javascripts/builder/components/input-color/assets-picker/upload-assets-error.tpl","webpack:///./lib/assets/javascripts/builder/components/input-color/assets-picker/upload-assets-tab.tpl","webpack:///./lib/assets/javascripts/builder/components/input-color/assets-picker/user-assets-list-view.tpl","webpack:///./lib/assets/javascripts/builder/components/input-color/input-color-file-carousel.tpl","webpack:///./lib/assets/javascripts/builder/components/input-color/input-color-file-view.tpl","webpack:///./lib/assets/javascripts/builder/components/input-color/input-color-picker/input-color-picker-header.tpl","webpack:///./lib/assets/javascripts/builder/components/input-color/input-color-picker/input-color-picker-view.tpl","webpack:///./lib/assets/javascripts/builder/components/input-color/input-color.tpl","webpack:///./lib/assets/javascripts/builder/components/input-color/input-qualitative-ramps/categories-list/list-item-view/categories-list-item.tpl","webpack:///./lib/assets/javascripts/builder/components/input-color/input-qualitative-ramps/categories-list/list-view/input-color-categories-list-view.tpl","webpack:///./lib/assets/javascripts/builder/components/input-color/input-qualitative-ramps/color-ramps-list/list-item-view/color-ramps-list-item.tpl","webpack:///./lib/assets/javascripts/builder/components/input-color/input-qualitative-ramps/color-ramps-list/list-view/color-ramp-custom-item.tpl","webpack:///./lib/assets/javascripts/builder/components/input-color/input-qualitative-ramps/color-ramps-list/list-view/color-ramps-list-view.tpl","webpack:///./lib/assets/javascripts/builder/components/input-color/input-qualitative-ramps/main-view.tpl","webpack:///./lib/assets/javascripts/builder/components/input-color/input-quantitative-ramps/custom-ramp-template.tpl","webpack:///./lib/assets/javascripts/builder/components/input-color/input-quantitative-ramps/input-ramp-content-view.tpl","webpack:///./lib/assets/javascripts/builder/components/input-color/input-quantitative-ramps/input-ramp-list-item-template.tpl","webpack:///./lib/assets/javascripts/builder/components/input-fill/input-fill.tpl","webpack:///./lib/assets/javascripts/builder/components/input-number/input-number-value-content-view.tpl","webpack:///./lib/assets/javascripts/builder/components/input-number/input-number.tpl","webpack:///./lib/assets/javascripts/builder/components/loading/loading.tpl","webpack:///./lib/assets/javascripts/builder/components/loading/quote.tpl","webpack:///./lib/assets/javascripts/builder/components/local-storage/local-storage.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-analysis/add-analyses.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-analysis/add-analysis-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-analysis/analyses-types.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-analysis/analysis-category-pane-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-analysis/analysis-category-pane.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-analysis/analysis-category.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-analysis/analysis-option-models/analysis-option-model.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-analysis/analysis-option-models/deprecated-sql-function-option-model.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-analysis/analysis-option-models/generated-analysis-option-model.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-analysis/analysis-option-models/merge-analysis-option-model.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-analysis/analysis-option-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-analysis/analysis-option.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-analysis/analysis-options-collection.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-analysis/analysis-options.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-analysis/analysis-view-pane.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-analysis/animation-templates/aoi.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-analysis/animation-templates/centroid.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-analysis/animation-templates/closest.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-analysis/animation-templates/connect-with-lines.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-analysis/animation-templates/data-observatory-measure.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-analysis/animation-templates/filter-by-column-value.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-analysis/animation-templates/filter-by-layer.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-analysis/animation-templates/filter-by-polygon.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-analysis/animation-templates/georeference.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-analysis/animation-templates/group-points.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-analysis/animation-templates/intersect.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-analysis/animation-templates/join-two-columns.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-analysis/animation-templates/kmeans.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-analysis/animation-templates/outliers.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-analysis/animation-templates/predict-trends.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-analysis/animation-templates/sampling.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-analysis/tab-pane-button-template.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-analysis/tab-pane-template.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-basemap/add-basemap-model.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-basemap/add-basemap-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-basemap/add-basemap.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-basemap/mapbox/enter-url.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-basemap/mapbox/mapbox-model.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-basemap/mapbox/mapbox-to-tile-layer-factory.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-basemap/mapbox/mapbox-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-basemap/nasa/nasa-model.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-basemap/nasa/nasa-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-basemap/nasa/nasa.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-basemap/tabs-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-basemap/tabs.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-basemap/tilejson/enter-url.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-basemap/tilejson/tilejson-layer-model.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-basemap/tilejson/tilejson-model.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-basemap/tilejson/tilejson-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-basemap/wms/enter-url.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-basemap/wms/select-layer-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-basemap/wms/select-layer.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-basemap/wms/wms-layer-model.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-basemap/wms/wms-layer-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-basemap/wms/wms-layer.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-basemap/wms/wms-layers-collection.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-basemap/wms/wms-layers-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-basemap/wms/wms-model.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-basemap/wms/wms-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-basemap/xyz/enter-url.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-basemap/xyz/xyz-model.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-basemap/xyz/xyz-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/add-layer-model.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/add-layer-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/add-layer.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/datasets/dataset-item.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/datasets/datasets-error.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/datasets/datasets-loader.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/datasets/datasets-no-result.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/datasets/no-datasets.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/datasets/remote-dataset-item.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/fallbacks/import-arcgis-fallback.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/fallbacks/import-box-fallback.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/fallbacks/import-mailchimp-fallback.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/fallbacks/import-salesforce-fallback.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/fallbacks/import-twitter-fallback.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-arcgis/import-arcgis-form.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-arcgis/import-arcgis-header.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-data/import-data-form.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-data/import-data-header.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-data/import-data.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-mailchimp/import-data-header-mailchimp.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-selected-dataset.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-service/import-service-header.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-service/import-service-list-item.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-service/import-service-list.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-service/import-service-loader.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-service/import-service.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-tab.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-twitter/credits-info.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-twitter/import-twitter.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-twitter/twitter-categories/twitter-category.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/imports.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/navigation.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/footer/footer-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/footer/footer.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/footer/guessing-toggler.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/footer/privacy-toggler.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-widgets/add-widgets-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-widgets/add-widgets.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-widgets/body-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-widgets/category/category-fake.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-widgets/category/category-option-model.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-widgets/category/category-option-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-widgets/category/category-option.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-widgets/category/category-options-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-widgets/create-tuples-items.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-widgets/formula/formula-fake.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-widgets/formula/formula-option-model.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-widgets/formula/formula-option-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-widgets/formula/formula-option.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-widgets/formula/formula-options-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-widgets/histogram/histogram-fake.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-widgets/histogram/histogram-option-model.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-widgets/histogram/histogram-option-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-widgets/histogram/histogram-option.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-widgets/histogram/histogram-options-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-widgets/layer-selector-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-widgets/select.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-widgets/tab-pane-button-template.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-widgets/tab-pane-template.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-widgets/tablestats.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-widgets/time-series/time-series-none-option-model.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-widgets/time-series/time-series-none-option-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-widgets/time-series/time-series-none-option.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-widgets/time-series/time-series-option-model.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-widgets/time-series/time-series-option-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-widgets/time-series/time-series-option.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/add-widgets/time-series/time-series-options-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-widgets/widget-option-model.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-widgets/widgets-types.js","webpack:///./lib/assets/javascripts/builder/components/modals/editor-visualization-warning/editor-visualization-warning-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/editor-visualization-warning/editor-visualization-warning.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/export-data/modal-export-data-format.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/export-data/modal-export-data.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/map-metadata/footer/footer.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/map-metadata/form/form.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/map-metadata/map-metadata-error.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/map-metadata/map-metadata.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/modal.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/privacy-warning/privacy-warning.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/publish/publish-button.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/publish/publish.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/publish/publish/icon-embed.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/publish/publish/icon-link.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/publish/publish/publish.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/publish/publish/share-item.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/publish/share-with.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/publish/share/share-permission.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/publish/share/share.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/publish/share/user.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/publish/share/users-group.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/publish/tab-pane-submenu.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/publish/upgrade.tpl","webpack:///./lib/assets/javascripts/builder/components/modals/remove-layer/delete-layer-confirmation-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/sync-options/sync-options-modal.tpl","webpack:///./lib/assets/javascripts/builder/components/mosaic-form-view.js","webpack:///./lib/assets/javascripts/builder/components/mosaic/mosaic-collection.js","webpack:///./lib/assets/javascripts/builder/components/mosaic/mosaic-item-model.js","webpack:///./lib/assets/javascripts/builder/components/mosaic/mosaic-item-view.js","webpack:///./lib/assets/javascripts/builder/components/mosaic/mosaic-item.tpl","webpack:///./lib/assets/javascripts/builder/components/mosaic/mosaic-thumbnail.tpl","webpack:///./lib/assets/javascripts/builder/components/mosaic/mosaic-view.js","webpack:///./lib/assets/javascripts/builder/components/mosaic/mosaic.tpl","webpack:///./lib/assets/javascripts/builder/components/no-results/no-results.tpl","webpack:///./lib/assets/javascripts/builder/components/notifier/notifier-action.tpl","webpack:///./lib/assets/javascripts/builder/components/notifier/notifier-close.tpl","webpack:///./lib/assets/javascripts/builder/components/notifier/notifier-item.tpl","webpack:///./lib/assets/javascripts/builder/components/notifier/notifier.tpl","webpack:///./lib/assets/javascripts/builder/components/onboardings/analysis/analyses/aggregate-intersection.tpl","webpack:///./lib/assets/javascripts/builder/components/onboardings/analysis/analyses/area-of-influence.tpl","webpack:///./lib/assets/javascripts/builder/components/onboardings/analysis/analyses/centroid.tpl","webpack:///./lib/assets/javascripts/builder/components/onboardings/analysis/analyses/closest.tpl","webpack:///./lib/assets/javascripts/builder/components/onboardings/analysis/analyses/connect-with-lines.tpl","webpack:///./lib/assets/javascripts/builder/components/onboardings/analysis/analyses/data-observatory-measure.tpl","webpack:///./lib/assets/javascripts/builder/components/onboardings/analysis/analyses/data-observatory-multiple-measure.tpl","webpack:///./lib/assets/javascripts/builder/components/onboardings/analysis/analyses/filter-by-node-column.tpl","webpack:///./lib/assets/javascripts/builder/components/onboardings/analysis/analyses/filter.tpl","webpack:///./lib/assets/javascripts/builder/components/onboardings/analysis/analyses/georeference.tpl","webpack:///./lib/assets/javascripts/builder/components/onboardings/analysis/analyses/group-points.tpl","webpack:///./lib/assets/javascripts/builder/components/onboardings/analysis/analyses/intersection.tpl","webpack:///./lib/assets/javascripts/builder/components/onboardings/analysis/analyses/kmeans.tpl","webpack:///./lib/assets/javascripts/builder/components/onboardings/analysis/analyses/merge.tpl","webpack:///./lib/assets/javascripts/builder/components/onboardings/analysis/analyses/moran.tpl","webpack:///./lib/assets/javascripts/builder/components/onboardings/analysis/analyses/sampling.tpl","webpack:///./lib/assets/javascripts/builder/components/onboardings/analysis/analyses/spatial-markov-trend.tpl","webpack:///./lib/assets/javascripts/builder/components/onboardings/analysis/analysis-launcher.js","webpack:///./lib/assets/javascripts/builder/components/onboardings/analysis/analysis-view.js","webpack:///./lib/assets/javascripts/builder/components/onboardings/analysis/analysis-view.tpl","webpack:///./lib/assets/javascripts/builder/components/onboardings/builder/builder-view.js","webpack:///./lib/assets/javascripts/builder/components/onboardings/builder/builder-view.tpl","webpack:///./lib/assets/javascripts/builder/components/onboardings/builder/launcher.js","webpack:///./lib/assets/javascripts/builder/components/onboardings/generic/generic-onboarding-launcher.js","webpack:///./lib/assets/javascripts/builder/components/onboardings/generic/generic-onboarding-view.js","webpack:///./lib/assets/javascripts/builder/components/onboardings/layers/analysis-onboarding/analysis-onboarding-view.js","webpack:///./lib/assets/javascripts/builder/components/onboardings/layers/analysis-onboarding/analysis-onboarding.tpl","webpack:///./lib/assets/javascripts/builder/components/onboardings/layers/data-onboarding/data-onboarding-view.js","webpack:///./lib/assets/javascripts/builder/components/onboardings/layers/data-onboarding/data-onboarding.tpl","webpack:///./lib/assets/javascripts/builder/components/onboardings/layers/style-onboarding/style-onboarding-view.js","webpack:///./lib/assets/javascripts/builder/components/onboardings/layers/style-onboarding/style-onboarding.tpl","webpack:///./lib/assets/javascripts/builder/components/onboardings/layers/style-onboarding/style-points-onboarding.tpl","webpack:///./lib/assets/javascripts/builder/components/onboardings/onboarding-view-model.js","webpack:///./lib/assets/javascripts/builder/components/onboardings/onboarding-view.js","webpack:///./lib/assets/javascripts/builder/components/onboardings/onboarding.tpl","webpack:///./lib/assets/javascripts/builder/components/onboardings/onboardings-service-model.js","webpack:///./lib/assets/javascripts/builder/components/pagination-search/pagination-search.tpl","webpack:///./lib/assets/javascripts/builder/components/pagination-search/pagination.tpl","webpack:///./lib/assets/javascripts/builder/components/pagination/pagination.tpl","webpack:///./lib/assets/javascripts/builder/components/privacy-dropdown/password-dialog.tpl","webpack:///./lib/assets/javascripts/builder/components/privacy-dropdown/privacy-cta.tpl","webpack:///./lib/assets/javascripts/builder/components/privacy-dropdown/privacy-dropdown.tpl","webpack:///./lib/assets/javascripts/builder/components/privacy-dropdown/tab-pane.tpl","webpack:///./lib/assets/javascripts/builder/components/scroll/scroll.tpl","webpack:///./lib/assets/javascripts/builder/components/tab-pane/create-editor-menu-tab-pane.js","webpack:///./lib/assets/javascripts/builder/components/tab-pane/create-template-tab-pane.js","webpack:///./lib/assets/javascripts/builder/components/tab-pane/create-text-labels-tab-pane-routed.js","webpack:///./lib/assets/javascripts/builder/components/tab-pane/tab-pane-color.tpl","webpack:///./lib/assets/javascripts/builder/components/tab-pane/tab-pane-file.tpl","webpack:///./lib/assets/javascripts/builder/components/tab-pane/tab-pane-icon-view.js","webpack:///./lib/assets/javascripts/builder/components/tab-pane/tab-pane-icon.tpl","webpack:///./lib/assets/javascripts/builder/components/tab-pane/tab-pane-item-view-routed.js","webpack:///./lib/assets/javascripts/builder/components/tab-pane/tab-pane-label.tpl","webpack:///./lib/assets/javascripts/builder/components/tab-pane/tab-pane-radio-label.tpl","webpack:///./lib/assets/javascripts/builder/components/tab-pane/tab-pane-template-view.js","webpack:///./lib/assets/javascripts/builder/components/tab-pane/tab-pane-view-routed.js","webpack:///./lib/assets/javascripts/builder/components/tab-pane/tab-pane.tpl","webpack:///./lib/assets/javascripts/builder/components/table/body/modals-templates/remove-table-row.tpl","webpack:///./lib/assets/javascripts/builder/components/table/body/table-body-cell.tpl","webpack:///./lib/assets/javascripts/builder/components/table/body/table-body.tpl","webpack:///./lib/assets/javascripts/builder/components/table/body/table-no-rows.tpl","webpack:///./lib/assets/javascripts/builder/components/table/editors/types/editor-boolean.tpl","webpack:///./lib/assets/javascripts/builder/components/table/head/modals-templates/change-table-column-type.tpl","webpack:///./lib/assets/javascripts/builder/components/table/head/modals-templates/remove-table-column.tpl","webpack:///./lib/assets/javascripts/builder/components/table/head/modals-templates/rename-table-column.tpl","webpack:///./lib/assets/javascripts/builder/components/table/head/table-head-item.tpl","webpack:///./lib/assets/javascripts/builder/components/table/head/table-head-options-item.tpl","webpack:///./lib/assets/javascripts/builder/components/table/head/table-head.tpl","webpack:///./lib/assets/javascripts/builder/components/table/paginator/table-paginator-loader.tpl","webpack:///./lib/assets/javascripts/builder/components/table/paginator/table-paginator.tpl","webpack:///./lib/assets/javascripts/builder/components/toggler/toggler.tpl","webpack:///./lib/assets/javascripts/builder/components/undo-redo/undo-redo.tpl","webpack:///./lib/assets/javascripts/builder/components/view-options/panel-with-options.tpl","webpack:///./lib/assets/javascripts/builder/data/analyses.js","webpack:///./lib/assets/javascripts/builder/data/analysis-definition-model.js","webpack:///./lib/assets/javascripts/builder/data/analysis-definition-nodes-collection.js","webpack:///./lib/assets/javascripts/builder/data/analysis-definitions-collection.js","webpack:///./lib/assets/javascripts/builder/data/background-importer/background-importer-imports-collection.js","webpack:///./lib/assets/javascripts/builder/data/background-importer/background-polling-model.js","webpack:///./lib/assets/javascripts/builder/data/basemap-providers-and-categories.js","webpack:///./lib/assets/javascripts/builder/data/column-row-data.js","webpack:///./lib/assets/javascripts/builder/data/data-observatory/boundaries-collection.js","webpack:///./lib/assets/javascripts/builder/data/data-observatory/column-name.js","webpack:///./lib/assets/javascripts/builder/data/data-observatory/measurement-model.js","webpack:///./lib/assets/javascripts/builder/data/data-observatory/normalize-collection.js","webpack:///./lib/assets/javascripts/builder/data/data-observatory/regions-collection.js","webpack:///./lib/assets/javascripts/builder/data/data-observatory/timespan-collection.js","webpack:///./lib/assets/javascripts/builder/data/editor-background-polling-model.js","webpack:///./lib/assets/javascripts/builder/data/export-map-definition-model.js","webpack:///./lib/assets/javascripts/builder/data/feature-definition-model.js","webpack:///./lib/assets/javascripts/builder/data/layer-content-model.js","webpack:///./lib/assets/javascripts/builder/data/layer-definitions-collection.js","webpack:///./lib/assets/javascripts/builder/data/layer-letters.js","webpack:///./lib/assets/javascripts/builder/data/legends/legend-base-definition-model.js","webpack:///./lib/assets/javascripts/builder/data/legends/legend-bubble-definition-model.js","webpack:///./lib/assets/javascripts/builder/data/legends/legend-category-definition-model.js","webpack:///./lib/assets/javascripts/builder/data/legends/legend-choropleth-definition-model.js","webpack:///./lib/assets/javascripts/builder/data/legends/legend-custom-choropleth-definition-model.js","webpack:///./lib/assets/javascripts/builder/data/legends/legend-custom-definition-model.js","webpack:///./lib/assets/javascripts/builder/data/legends/legend-definitions-collection.js","webpack:///./lib/assets/javascripts/builder/data/legends/legend-torque-definition-model.js","webpack:///./lib/assets/javascripts/builder/data/legends/legends-state.js","webpack:///./lib/assets/javascripts/builder/data/map-definition-model.js","webpack:///./lib/assets/javascripts/builder/data/map-settings.js","webpack:///./lib/assets/javascripts/builder/data/overlays-definition-collection.js","webpack:///./lib/assets/javascripts/builder/data/state-definition-model.js","webpack:///./lib/assets/javascripts/builder/data/tables-collection.js","webpack:///./lib/assets/javascripts/builder/data/timezones.js","webpack:///./lib/assets/javascripts/builder/data/user-actions.js","webpack:///./lib/assets/javascripts/builder/data/user-notifications.js","webpack:///./lib/assets/javascripts/builder/data/widget-definition-model.js","webpack:///./lib/assets/javascripts/builder/data/widget-definitions-collection.js","webpack:///./lib/assets/javascripts/builder/data/wms-service.js","webpack:///./lib/assets/javascripts/builder/deep-insights-integration/analyses-integration.js","webpack:///./lib/assets/javascripts/builder/deep-insights-integration/deep-insights-helpers.js","webpack:///./lib/assets/javascripts/builder/deep-insights-integration/edit-feature-overlay.js","webpack:///./lib/assets/javascripts/builder/deep-insights-integration/edit-geometry.tpl","webpack:///./lib/assets/javascripts/builder/deep-insights-integration/features-integration.js","webpack:///./lib/assets/javascripts/builder/deep-insights-integration/layers-integration.js","webpack:///./lib/assets/javascripts/builder/deep-insights-integration/legend-manager.js","webpack:///./lib/assets/javascripts/builder/deep-insights-integration/legends-integration.js","webpack:///./lib/assets/javascripts/builder/deep-insights-integration/link-layer-infowindow.js","webpack:///./lib/assets/javascripts/builder/deep-insights-integration/link-layer-tooltip.js","webpack:///./lib/assets/javascripts/builder/deep-insights-integration/map-integration.js","webpack:///./lib/assets/javascripts/builder/deep-insights-integration/overlays-integration.js","webpack:///./lib/assets/javascripts/builder/deep-insights-integration/start-edition-confirmation.tpl","webpack:///./lib/assets/javascripts/builder/deep-insights-integration/widgets-integration.js","webpack:///./lib/assets/javascripts/builder/deep-insights-integrations.js","webpack:///./lib/assets/javascripts/builder/editor.js","webpack:///./lib/assets/javascripts/builder/editor/components/modals/export-map/export-map-confirmation.tpl","webpack:///./lib/assets/javascripts/builder/editor/components/modals/export-map/export-map-download.tpl","webpack:///./lib/assets/javascripts/builder/editor/components/modals/export-map/modal-export-map-view.js","webpack:///./lib/assets/javascripts/builder/editor/delete-map-confirmation.tpl","webpack:///./lib/assets/javascripts/builder/editor/editor-header.js","webpack:///./lib/assets/javascripts/builder/editor/editor-header.tpl","webpack:///./lib/assets/javascripts/builder/editor/editor-hints/css-hints.js","webpack:///./lib/assets/javascripts/builder/editor/editor-map-view.js","webpack:///./lib/assets/javascripts/builder/editor/editor-pane-icon.tpl","webpack:///./lib/assets/javascripts/builder/editor/editor-pane.js","webpack:///./lib/assets/javascripts/builder/editor/editor-pane.tpl","webpack:///./lib/assets/javascripts/builder/editor/editor-settings-pane.js","webpack:///./lib/assets/javascripts/builder/editor/editor-settings-view.js","webpack:///./lib/assets/javascripts/builder/editor/editor-tab-pane.tpl","webpack:///./lib/assets/javascripts/builder/editor/editor-view.js","webpack:///./lib/assets/javascripts/builder/editor/export-image-pane/export-image-form-model.js","webpack:///./lib/assets/javascripts/builder/editor/export-image-pane/export-image-form-view.js","webpack:///./lib/assets/javascripts/builder/editor/export-image-pane/export-image-form.tpl","webpack:///./lib/assets/javascripts/builder/editor/export-image-pane/export-image-pane.js","webpack:///./lib/assets/javascripts/builder/editor/export-image-pane/export-image-pane.tpl","webpack:///./lib/assets/javascripts/builder/editor/export-image-pane/export-image-widget.js","webpack:///./lib/assets/javascripts/builder/editor/export-image-pane/export-image-widget.tpl","webpack:///./lib/assets/javascripts/builder/editor/export-image-pane/footer/footer-view.js","webpack:///./lib/assets/javascripts/builder/editor/export-image-pane/footer/footer.tpl","webpack:///./lib/assets/javascripts/builder/editor/feedback/feedback-button-view.js","webpack:///./lib/assets/javascripts/builder/editor/feedback/feedback-button.tpl","webpack:///./lib/assets/javascripts/builder/editor/inline-editor.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/analysis-views/analyses-tooltip-error.js","webpack:///./lib/assets/javascripts/builder/editor/layers/analysis-views/analysis-notifications.js","webpack:///./lib/assets/javascripts/builder/editor/layers/analysis-views/composite-layer-analysis-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/analysis-views/composite-layer-analysis-view.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/analysis-views/default-layer-analysis-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/analysis-views/default-layer-analysis-view.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/analysis-views/ref-layer-analysis-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/analysis-views/ref-layer-analysis-view.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/analysis-views/source-layer-analysis-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/analysis-views/source-layer-analysis-view.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/basemap-content-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/basemap-content-views/basemap-carousel.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/basemap-content-views/basemap-categories-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/basemap-content-views/basemap-categories.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/basemap-content-views/basemap-form-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/basemap-content-views/basemap-form-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/basemap-content-views/basemap-form.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/basemap-content-views/basemap-header-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/basemap-content-views/basemap-header.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/basemap-content-views/basemap-icons/basemap-carto.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/basemap-content-views/basemap-icons/basemap-color.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/basemap-content-views/basemap-icons/basemap-custom.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/basemap-content-views/basemap-icons/basemap-gmaps.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/basemap-content-views/basemap-icons/basemap-here.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/basemap-content-views/basemap-icons/basemap-mapbox.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/basemap-content-views/basemap-icons/basemap-nasa.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/basemap-content-views/basemap-icons/basemap-stamen.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/basemap-content-views/basemap-icons/basemap-tilejson.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/basemap-content-views/basemap-icons/basemap-wms.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/basemap-content-views/basemap-inner-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/basemap-content-views/basemap-inner.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/basemap-content-views/basemap-model-factory.js","webpack:///./lib/assets/javascripts/builder/editor/layers/basemap-content-views/basemap-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/basemap-content-views/basemap-mosaic-add-item-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/basemap-content-views/basemap-mosaic-form-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/basemap-content-views/basemap-mosaic-item-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/basemap-content-views/basemap-mosaic-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/basemap-content-views/basemap-mosaic-remove-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/basemap-content-views/basemap-mosaic-remove.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/basemap-content-views/basemap-mosaic-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/basemap-content-views/basemap-mosaic.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/basemap-content-views/basemap-select-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/basemap-content-views/basemap-select.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/basemap-content-views/basemaps-collection.js","webpack:///./lib/assets/javascripts/builder/editor/layers/basemap-content.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/change-view-buttons.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/delete-layer-confirmation.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/edit-feature-content-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/edit-feature-content-views/delete-feature-confirmation.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/edit-feature-content-views/edit-feature-action-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/edit-feature-content-views/edit-feature-action.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/edit-feature-content-views/edit-feature-attributes-form-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/edit-feature-content-views/edit-feature-attributes-form-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/edit-feature-content-views/edit-feature-attributes-form.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/edit-feature-content-views/edit-feature-control-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/edit-feature-content-views/edit-feature-control.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/edit-feature-content-views/edit-feature-geometry-form-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/edit-feature-content-views/edit-feature-geometry-form-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/edit-feature-content-views/edit-feature-geometry-form.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/edit-feature-content-views/edit-feature-geometry-point-form-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/edit-feature-content-views/edit-feature-header-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/edit-feature-content-views/edit-feature-header.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/edit-feature-content-views/edit-feature-inner-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/edit-feature-content.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/edit-overlay.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/inline-editor.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-analyses-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-analysis-draggable-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-analysis-draggable.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-analysis-view-factory.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analyses-content-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analyses-placeholder.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analyses-quota/analyses-quota-enough.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analyses-quota/analyses-quota-estimation-input.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analyses-quota/analyses-quota-info.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analyses-quota/analyses-quota-options.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analyses-quota/analyses-quota-presenter.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analyses-quota/analyses-quota-provider.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analyses-service.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analyses-sql-error.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analyses-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analyses-workflow-item-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analyses-workflow-item.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analyses-workflow-list-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analyses-workflow-list.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analyses-workflow-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-buttons-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-buttons.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-controls-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/aggregate-intersection-form-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/aggregate-intersection-form.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/area-of-influence-buffer.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/area-of-influence-form-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/area-of-influence-form.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/area-of-influence-trade-area.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/area-of-influence-types.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/available-functions.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/base-analysis-form-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/centroid-form-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/centroid-form.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/closest-form-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/closest-form.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/connect-with-lines-form-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/connect-with-lines-types.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/connect-with-lines.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/connect-with-lines/line-sequential.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/connect-with-lines/line-source-to-target.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/connect-with-lines/line-to-single-point.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/data-observatory-measure-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/data-observatory-measure.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/data-observatory-multiple-measure-list-item.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/data-observatory-multiple-measure-list.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/data-observatory-multiple-measure-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/data-observatory-multiple-measure.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/data-observatory-multiple-nested-measure-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/data-observatory-multiple-region-list-item.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/deprecated-sql-function-form-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/deprecated-sql-function.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/fallback-form-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/filter-by-node-column.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/filter-by-node-column.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/filter-category-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/filter-form-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/filter-form.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/filter-intersection-form-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/filter-intersection-form.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/filter-range-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/filter-types.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/georeference-admin-region-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/georeference-city-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/georeference-country-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/georeference-form-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/georeference-form.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/georeference-ip-address-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/georeference-long-lat-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/georeference-placeholder.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/georeference-postal-code-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/georeference-street-address-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/georeference-types.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/group-points-form-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/group-points-types.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/group-points.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/group-points/bounding-box.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/group-points/bounding-circle.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/group-points/concave-hull.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/group-points/convex-hull.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/kmeans-form-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/kmeans-form.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/merge-form-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/merge-form.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/moran-form-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/moran-form.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/sampling-form-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/sampling-form.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/spatial-markov-trend-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/spatial-markov-trend.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-models/unknown-type-form-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-form-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-forms-collection.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-quota-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/analysis-source-options-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/column-data.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/column-options.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/data-observatory-metadata.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/more-info-link.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/analyses/panel-with-options.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/data/code-mirror-error.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/data/create-tuples-items.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/data/data-columns-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/data/data-content-error.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/data/data-content-nogeometry.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/data/data-content-not-ready.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/data/data-content-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/data/data-sql-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/data/data-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/data/stat-category.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/data/stat-formula.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/data/stat-histogram.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/data/stat-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/data/stat.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/data/widgets-types.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/infowindow/code-mirror-error.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/infowindow/infowindow-base-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/infowindow/infowindow-carousel.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/infowindow/infowindow-click-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/infowindow/infowindow-content-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/infowindow/infowindow-description-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/infowindow/infowindow-description.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/infowindow/infowindow-field-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/infowindow/infowindow-field.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/infowindow/infowindow-fields-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/infowindow/infowindow-fields.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/infowindow/infowindow-form-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/infowindow/infowindow-form-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/infowindow/infowindow-form.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/infowindow/infowindow-hover-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/infowindow/infowindow-html-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/infowindow/infowindow-icons/infowindow-color.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/infowindow/infowindow-icons/infowindow-dark.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/infowindow/infowindow-icons/infowindow-image.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/infowindow/infowindow-icons/infowindow-light.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/infowindow/infowindow-icons/infowindow-none.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/infowindow/infowindow-items-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/infowindow/infowindow-items.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/infowindow/infowindow-select-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/infowindow/infowindow-select.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/infowindow/infowindows-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/infowindow/popups-placeholder.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/infowindow/tooltip-icons/tooltip-dark.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/infowindow/tooltip-icons/tooltip-light.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/infowindow/tooltip-icons/tooltip-none.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/carousel-icons/bubble.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/carousel-icons/category.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/carousel-icons/custom.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/carousel-icons/gradient.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/carousel-icons/none.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/code-mirror-error.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/color/legend-color-types.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/color/legend-color-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/color/legend-custom-template.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/form/legend-base-definition-form-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/form/legend-bubble-definition-form-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/form/legend-category-definition-form-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/form/legend-choropleth-definition-form-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/form/legend-color-helper.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/form/legend-color-range.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/form/legend-custom-choropleth-definition-form-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/form/legend-custom-definition-form-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/form/legend-list-item.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/form/legend-list.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/form/legend-nested-category-definition-form-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/form/legend-torque-definition-form-model.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/legend-base-type-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/legend-buffer.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/legend-content-sql-error.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/legend-content-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/legend-content.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/legend-editor-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/legend-factory.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/legend-form-types.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/legend-properties-form.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/legend-properties-form.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/legend-types.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/legend-validations.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/legends-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/size/legend-size-types.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/legend/size/legend-size-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-header-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-header.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-tab-message.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-tab-pane.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-view-factory.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-views/background-image-layer-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-views/base-layer-view-base.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-views/base-tiled-layer-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-views/data-layer-fetching.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-views/data-layer-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-views/data-layer.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-views/errored-data-layer-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-views/geometry-lines.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-views/geometry-none.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-views/geometry-points.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-views/geometry-polygons.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-views/google-maps-base-layer-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-views/image-thumbnail-layer.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-views/inline-editor.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-views/labels-layer-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-views/plain-color-layer-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-views/plain-color-layer.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/layers-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layers.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/notification-error-message-handler.js","webpack:///./lib/assets/javascripts/builder/editor/layers/operations/remove-layer.js","webpack:///./lib/assets/javascripts/builder/editor/layers/operations/rename-layer.js","webpack:///./lib/assets/javascripts/builder/editor/layers/panel-loading-template.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/publish-button.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/share-button-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/sql-error-action.tpl","webpack:///./lib/assets/javascripts/builder/editor/layers/sync-info/sync-info-view.js","webpack:///./lib/assets/javascripts/builder/editor/layers/sync-info/sync-info.tpl","webpack:///./lib/assets/javascripts/builder/editor/map-operations/remove-map.js","webpack:///./lib/assets/javascripts/builder/editor/map-operations/rename-map.js","webpack:///./lib/assets/javascripts/builder/editor/map-operations/zoom-to-data.js","webpack:///./lib/assets/javascripts/builder/editor/settings/preview/enabler.tpl","webpack:///./lib/assets/javascripts/builder/editor/settings/preview/options-not-ready.tpl","webpack:///./lib/assets/javascripts/builder/editor/settings/preview/preview-options-item-view.js","webpack:///./lib/assets/javascripts/builder/editor/settings/preview/preview-options-view.js","webpack:///./lib/assets/javascripts/builder/editor/settings/preview/preview-options.tpl","webpack:///./lib/assets/javascripts/builder/editor/settings/preview/preview-view.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-cartocss-view.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-content-sql-error.tpl","webpack:///./lib/assets/javascripts/builder/editor/style/style-content-view.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-converter.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form-types.tpl","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/none-form-message.tpl","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-aggregation-form/style-aggregation-form-view.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-aggregation-form/style-aggregation-form.tpl","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-aggregation-form/style-aggregation-properties-form-model.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-form-components-dictionary.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-form-default-model.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-form-dictionary/aggregation-dataset.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-form-dictionary/aggregation-size.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-form-dictionary/aggregation-value.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-form-dictionary/animated-attribute.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-form-dictionary/animated-duration.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-form-dictionary/animated-overlap.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-form-dictionary/animated-resolution.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-form-dictionary/animated-steps.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-form-dictionary/animated-trails.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-form-dictionary/blending.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-form-dictionary/fill-color.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-form-dictionary/fill-size.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-form-dictionary/hidden.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-form-dictionary/labels-attribute.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-form-dictionary/labels-fill-color.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-form-dictionary/labels-fill-size.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-form-dictionary/labels-font.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-form-dictionary/labels-halo-color.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-form-dictionary/labels-halo-size.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-form-dictionary/labels-offset.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-form-dictionary/labels-overlap.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-form-dictionary/labels-placement.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-form-dictionary/stroke-color.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-form-dictionary/stroke-size.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-form-dictionary/style.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-form-helpers.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-form-view.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-properties-form/style-animated-properties-form-model.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-properties-form/style-animated-properties-form-view.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-properties-form/style-labels-properties-form-model.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-properties-form/style-labels-properties-form-view.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-properties-form/style-properties-form-view.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-properties-form/style-properties-form.tpl","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-properties-form/style-shape-properties-form-model.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-properties-form/style-shape-properties-form-view.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-properties-form/style-unanimatable-view.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-form/style-properties-form/style-unanimatable.tpl","webpack:///./lib/assets/javascripts/builder/editor/style/style-icons/animated.tpl","webpack:///./lib/assets/javascripts/builder/editor/style/style-icons/heatmap.tpl","webpack:///./lib/assets/javascripts/builder/editor/style/style-icons/hexabins.tpl","webpack:///./lib/assets/javascripts/builder/editor/style/style-icons/points.tpl","webpack:///./lib/assets/javascripts/builder/editor/style/style-icons/regions.tpl","webpack:///./lib/assets/javascripts/builder/editor/style/style-icons/squares.tpl","webpack:///./lib/assets/javascripts/builder/editor/style/style-manager.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-view.js","webpack:///./lib/assets/javascripts/builder/editor/tab-pane-submenu.tpl","webpack:///./lib/assets/javascripts/builder/editor/widgets/delete-widget-confirmation.tpl","webpack:///./lib/assets/javascripts/builder/editor/widgets/inline-editor.tpl","webpack:///./lib/assets/javascripts/builder/editor/widgets/time-series-query-model.js","webpack:///./lib/assets/javascripts/builder/editor/widgets/widget-icon-category.tpl","webpack:///./lib/assets/javascripts/builder/editor/widgets/widget-icon-formula.tpl","webpack:///./lib/assets/javascripts/builder/editor/widgets/widget-icon-histogram.tpl","webpack:///./lib/assets/javascripts/builder/editor/widgets/widget-icon-layer-category.tpl","webpack:///./lib/assets/javascripts/builder/editor/widgets/widget-icon-layer-formula.tpl","webpack:///./lib/assets/javascripts/builder/editor/widgets/widget-icon-layer-histogram.tpl","webpack:///./lib/assets/javascripts/builder/editor/widgets/widget-icon-layer-timeSeries.tpl","webpack:///./lib/assets/javascripts/builder/editor/widgets/widget-icon-timeSeries.tpl","webpack:///./lib/assets/javascripts/builder/editor/widgets/widget-view.js","webpack:///./lib/assets/javascripts/builder/editor/widgets/widget-view.tpl","webpack:///./lib/assets/javascripts/builder/editor/widgets/widgets-content-error.tpl","webpack:///./lib/assets/javascripts/builder/editor/widgets/widgets-content-not-ready.tpl","webpack:///./lib/assets/javascripts/builder/editor/widgets/widgets-form/inline-editor.tpl","webpack:///./lib/assets/javascripts/builder/editor/widgets/widgets-form/schema/widgets-form-base-schema-model.js","webpack:///./lib/assets/javascripts/builder/editor/widgets/widgets-form/schema/widgets-form-category-schema-model.js","webpack:///./lib/assets/javascripts/builder/editor/widgets/widgets-form/schema/widgets-form-formula-schema-model.js","webpack:///./lib/assets/javascripts/builder/editor/widgets/widgets-form/schema/widgets-form-histogram-schema-model.js","webpack:///./lib/assets/javascripts/builder/editor/widgets/widgets-form/schema/widgets-form-time-series-schema-model.js","webpack:///./lib/assets/javascripts/builder/editor/widgets/widgets-form/widget-header.js","webpack:///./lib/assets/javascripts/builder/editor/widgets/widgets-form/widget-header.tpl","webpack:///./lib/assets/javascripts/builder/editor/widgets/widgets-form/widgets-form-column-options-factory.js","webpack:///./lib/assets/javascripts/builder/editor/widgets/widgets-form/widgets-form-content-view.js","webpack:///./lib/assets/javascripts/builder/editor/widgets/widgets-form/widgets-form-factory.js","webpack:///./lib/assets/javascripts/builder/editor/widgets/widgets-form/widgets-form-fields-view.js","webpack:///./lib/assets/javascripts/builder/editor/widgets/widgets-form/widgets-form-fields.tpl","webpack:///./lib/assets/javascripts/builder/editor/widgets/widgets-form/widgets-form-types.tpl","webpack:///./lib/assets/javascripts/builder/editor/widgets/widgets-form/widgets-form-view.js","webpack:///./lib/assets/javascripts/builder/editor/widgets/widgets-placeholder.tpl","webpack:///./lib/assets/javascripts/builder/editor/widgets/widgets-service.js","webpack:///./lib/assets/javascripts/builder/editor/widgets/widgets-view.js","webpack:///./lib/assets/javascripts/builder/editor/widgets/widgets-view.tpl","webpack:///./lib/assets/javascripts/builder/helpers/errorTracking.js","webpack:///./lib/assets/javascripts/builder/helpers/ga-pusher.js","webpack:///./lib/assets/javascripts/builder/helpers/locale.js","webpack:///./lib/assets/javascripts/builder/helpers/parser-css.js","webpack:///./lib/assets/javascripts/builder/helpers/reset-style-per-node.js","webpack:///./lib/assets/javascripts/builder/helpers/style.js","webpack:///./lib/assets/javascripts/builder/helpers/styles-without-autostyle.js","webpack:///./lib/assets/javascripts/builder/map-mode-model.js","webpack:///./lib/assets/javascripts/builder/mustache-templates/infowindows/infowindow_color.jst.mustache","webpack:///./lib/assets/javascripts/builder/mustache-templates/infowindows/infowindow_dark.jst.mustache","webpack:///./lib/assets/javascripts/builder/mustache-templates/infowindows/infowindow_header_with_image.jst.mustache","webpack:///./lib/assets/javascripts/builder/mustache-templates/infowindows/infowindow_light.jst.mustache","webpack:///./lib/assets/javascripts/builder/mustache-templates/infowindows/infowindow_none.tpl","webpack:///./lib/assets/javascripts/builder/mustache-templates/infowindows_custom/infowindow_color.jst.mustache","webpack:///./lib/assets/javascripts/builder/mustache-templates/infowindows_custom/infowindow_dark.jst.mustache","webpack:///./lib/assets/javascripts/builder/mustache-templates/infowindows_custom/infowindow_header_with_image.jst.mustache","webpack:///./lib/assets/javascripts/builder/mustache-templates/infowindows_custom/infowindow_light.jst.mustache","webpack:///./lib/assets/javascripts/builder/mustache-templates/tooltips/tooltip_dark.jst.mustache","webpack:///./lib/assets/javascripts/builder/mustache-templates/tooltips/tooltip_light.jst.mustache","webpack:///./lib/assets/javascripts/builder/mustache-templates/tooltips_custom/tooltip_dark.jst.mustache","webpack:///./lib/assets/javascripts/builder/mustache-templates/tooltips_custom/tooltip_light.jst.mustache","webpack:///./lib/assets/javascripts/builder/node-geometry-tracker.js","webpack:///./lib/assets/javascripts/builder/routes/handle-analyses-route.js","webpack:///./lib/assets/javascripts/builder/routes/handle-modals-route.js","webpack:///./lib/assets/javascripts/builder/routes/handle-widget-route.js","webpack:///./lib/assets/javascripts/builder/routes/populate-route.js","webpack:///./lib/assets/javascripts/builder/routes/router.js","webpack:///./lib/assets/javascripts/builder/value-objects/distance-converter.js","webpack:///./lib/assets/javascripts/builder/vis-notifications.js","webpack:///./lib/assets/javascripts/builder/widgets-notifications.js","webpack:///./lib/assets/javascripts/deep-insights/dashboard-menu-view.tpl","webpack:///./lib/assets/javascripts/deep-insights/dashboard-sidebar.tpl","webpack:///./lib/assets/javascripts/deep-insights/dashboard.tpl","webpack:///./lib/assets/javascripts/deep-insights/widgets/category/content-template.tpl","webpack:///./lib/assets/javascripts/deep-insights/widgets/category/list/item/item-clickable-template.tpl","webpack:///./lib/assets/javascripts/deep-insights/widgets/category/list/item/item-unclickable-template.tpl","webpack:///./lib/assets/javascripts/deep-insights/widgets/category/list/item/search-item-clickable-template.tpl","webpack:///./lib/assets/javascripts/deep-insights/widgets/category/list/items-placeholder-template.tpl","webpack:///./lib/assets/javascripts/deep-insights/widgets/category/list/search-items-no-results-template.tpl","webpack:///./lib/assets/javascripts/deep-insights/widgets/category/options/options-template.tpl","webpack:///./lib/assets/javascripts/deep-insights/widgets/category/paginator/pagination-template.tpl","webpack:///./lib/assets/javascripts/deep-insights/widgets/category/paginator/paginator-template.tpl","webpack:///./lib/assets/javascripts/deep-insights/widgets/category/paginator/search-paginator-template.tpl","webpack:///./lib/assets/javascripts/deep-insights/widgets/category/stats/cats-template.tpl","webpack:///./lib/assets/javascripts/deep-insights/widgets/category/stats/stats-template.tpl","webpack:///./lib/assets/javascripts/deep-insights/widgets/category/title/search-title-template.tpl","webpack:///./lib/assets/javascripts/deep-insights/widgets/dropdown/template.tpl","webpack:///./lib/assets/javascripts/deep-insights/widgets/formula/animation-template.tpl","webpack:///./lib/assets/javascripts/deep-insights/widgets/formula/placeholder.tpl","webpack:///./lib/assets/javascripts/deep-insights/widgets/formula/template.tpl","webpack:///./lib/assets/javascripts/deep-insights/widgets/histogram/animation-template.tpl","webpack:///./lib/assets/javascripts/deep-insights/widgets/histogram/content.tpl","webpack:///./lib/assets/javascripts/deep-insights/widgets/histogram/histogram-title-template.tpl","webpack:///./lib/assets/javascripts/deep-insights/widgets/histogram/placeholder.tpl","webpack:///./lib/assets/javascripts/deep-insights/widgets/time-series/animation-template.tpl","webpack:///./lib/assets/javascripts/deep-insights/widgets/time-series/content.tpl","webpack:///./lib/assets/javascripts/deep-insights/widgets/time-series/placeholder.tpl","webpack:///./lib/assets/javascripts/deep-insights/widgets/time-series/time-series-header.tpl","webpack:///./lib/assets/javascripts/deep-insights/widgets/time-series/torque-controls.tpl","webpack:///./lib/assets/javascripts/deep-insights/widgets/time-series/torque-header-view.tpl","webpack:///./lib/assets/javascripts/deep-insights/widgets/time-series/torque-template.tpl","webpack:///./lib/assets/javascripts/deep-insights/widgets/time-series/torque-time-info.tpl","webpack:///./lib/assets/javascripts/deep-insights/widgets/widget-error-button-template.tpl","webpack:///./lib/assets/javascripts/deep-insights/widgets/widget-error-text-template.tpl","webpack:///./node_modules/camshaft-reference/versions sync ^\\.\\/.*\\/reference\\.json$","webpack:///./node_modules/internal-carto.js/src/geo/ui/attribution/attribution-template.tpl","webpack:///./node_modules/internal-carto.js/src/geo/ui/default-infowindow-template.tpl","webpack:///./node_modules/internal-carto.js/src/geo/ui/legends/base/legend-title.tpl","webpack:///./node_modules/internal-carto.js/src/geo/ui/legends/bubble/legend-template.tpl","webpack:///./node_modules/internal-carto.js/src/geo/ui/legends/bubble/placeholder-template.tpl","webpack:///./node_modules/internal-carto.js/src/geo/ui/legends/categories/legend-template.tpl","webpack:///./node_modules/internal-carto.js/src/geo/ui/legends/categories/placeholder-template.tpl","webpack:///./node_modules/internal-carto.js/src/geo/ui/legends/choropleth/legend-template.tpl","webpack:///./node_modules/internal-carto.js/src/geo/ui/legends/choropleth/placeholder-template.tpl","webpack:///./node_modules/internal-carto.js/src/geo/ui/legends/custom-choropleth/legend-template.tpl","webpack:///./node_modules/internal-carto.js/src/geo/ui/legends/custom/legend-template.tpl","webpack:///./node_modules/internal-carto.js/src/geo/ui/legends/layer-legends-template.tpl","webpack:///./node_modules/internal-carto.js/src/geo/ui/legends/legends-view.tpl","webpack:///./node_modules/internal-carto.js/src/geo/ui/logo.tpl","webpack:///./node_modules/internal-carto.js/src/geo/ui/overlays-container.tpl","webpack:///./node_modules/internal-carto.js/src/geo/ui/search/search_infowindow_template.tpl","webpack:///./node_modules/internal-carto.js/src/geo/ui/search/search_template.tpl","webpack:///./node_modules/internal-carto.js/src/geo/ui/tiles/tiles-template.tpl","webpack:///./node_modules/internal-carto.js/src/geo/ui/zoom/zoom-template.tpl","webpack:///./node_modules/internal-carto.js/src/ui/common/fullscreen/fullscreen-template.tpl","webpack:///./node_modules/mapnik-reference sync","webpack:///./node_modules/moment/locale sync ^\\.\\/.*$","webpack:///fs (ignored)","webpack:///vertx (ignored)"],"names":["Backbone","require","AppNotificationsCollection","Collection","extend","model","attrs","opts","Model","findById","id","findWhere","findByType","type","AppNotifications","initialized","collection","init","mutedTypes","off","__ENV__","getByType","hasOwnProperty","getCollection","getNotification","get","addNotification","notification","add","removeNotification","remove","removeByType","muteByType","unmuteByType","module","exports","_","Notifier","NOTIFICATION_ERROR_TEMPLATE","template","NOTIFICATION_PREFIX","CartoCSSNotifications","track","view","_notificationId","cid","showSuccessNotification","notificationAttrs","status","info","_t","closable","delay","DEFAULT_DELAY","_addOrUpdateNotification","showErrorNotification","errors","body","title","error","_transformErrors","map","err","message","join","notificationId","_getNotification","set","_addNotification","CoreView","checkAndBuildOpts","REQUIRED_OPTS","events","initialize","_initBinds","render","$el","html","disabled","_isDisabled","listenTo","_overlayModel","_onClick","_onApplyClick","UploadConfig","ErrorDetailsView","WarningsDetailsView","TwitterImportDetailsDialog","DELEGATIONS","loading","warning","success","userModel","Error","configModel","modals","importModel","_userModel","_configModel","_modals","_importModel","_showSuccessDetailsButton","showSuccessDetailsButton","_notification","on","updateNotification","clean","_closeHandler","_actionHandler","add_related_model","trigger","pause","action","_showImportError","_showImportStats","_showImportDataset","_showImportWarnings","_getStatus","failed","hasFailed","completed","hasCompleted","warnings","getWarnings","_getInfo","upload","imp","d","name","state","progress","service","step","tables_created_count","value","length","filename","service_name","table_name","display_name","item_queue_id","Math","max","uploadStates","indexOf","toFixed","delegated","call","dataset","window","location","self","create","modalModel","getError","ImportItemView","ImportLimitItemView","ImportsModel","BackgroundImporter","options","_importers","prototype","pollingModel","_createVis","createVis","_model","addView","removeView","enable","startPollings","disable","stopPollings","removeImport","removeImportItem","destroy","_addImport","_addDataset","m","importItemView","_removeImport","_addImportsItem","_onDroppedFile","files","create_vis","uploadData","canAddImport","_removeLimitItem","_addLimitItem","addImportItem","_importLimit","Events","stopListening","manager","importer","getAction","getButton","getClosable","data","_status","button","update","showDetails","_showDetails","ContextMenuView","CustomListCollection","TipsyTooltipView","className","_initContextMenu","_menuItems","clearSubViews","_initViews","tooltip","el","gravity","items","_onContextMenuSelect","menuItem","_showContextMenu","position","triggerElementID","$","attr","menuItems","_resetContextMenuItems","_menuView","isContextMenuVisible","_hasContextMenu","_hideContextMenu","show","selected","getSelectedItem","silent","_onToggleContextMenuClicked","event","preventDefault","stopPropagation","x","pageX","y","pageY","getContextMenu","moment","flat","date","current","calendars","starts","_setDefaultDate","append","readOnly","undelegateEvents","document","bind","_onDocumentClick","_destroyBinds","unbind","utc","Date","getTimezoneOffset","today","utcOffset","format","_$calendar","_$dropdown","_hideCalendar","ev","killEvent","_destroyCalendar","hide","_showCalendar","DatePicker","attributes","onChange","formatted","text","onRender","valueOf","now","DatePickerHide","_toggleCalendar","closeCalendar","e","target","closest","defaults","attribute","validationError","_validate","valid","apply","arguments","validate","val","pattern","test","isValid","tagName","empty","typeLabel","isSelected","isDestructive","layerName","nodeTitle","color","layer_id","isSourceType","getValue","_onMouseLeave","removeClass","_onMouseEnter","addClass","InfoboxModel","reset","models","_defaultSelected","_onSelectedChange","first","where","_isModel","changedModel","each","getState","getSelected","setSelected","selectedModel","mdl","InfoboxView","createInfo","undefined","createWithAction","klass","label","createLoading","createQuota","templateButton","templateQuota","INFOBOX_TYPE","alert","code","default","_title","_body","_loading","_isClosable","_klass","quota","_quota","_actionLabel","_actionType","_actionDisabled","_type","hasQuota","isEmpty","isLoading","hasButtons","isClosable","closeLabel","setElement","quotaPer","usedQuota","totalQuota","isNaN","progressState","quotaMessage","_onActionClick","_onCloseClick","INFOBOX_DEFAULT_STATE","storage","storageName","version","mainStorageKey","key","getKey","isSupported","storageKey","localStorage","delete","AnalysisOptionsCollection","analysisOptions","AnalysisViewPane","renderLoading","DataServicesApiCheck","_analysisDefinitionNodeModel","_layerDefinitionModel","getAnalysisDefinitionNodeModel","_queryGeometryModel","queryGeometryModel","_analysisOptions","_analysisOptionsCollection","_dataservicesApiHealth","_isFetchingGeometry","fetch","_initOptions","dsApiNeedsCheck","needsCheck","_renderLoadingView","_renderStackView","_modalModel","analysisOptionsCollection","layerDefinitionModel","modelsAttrs","reduce","Object","keys","memo","category","categoryDef","analyses","forEach","push","nodeAttrs","AnalysisCategoryView","createTabPaneItem","optionsCollection","createContentView","analysisType","ScrollView","AnalysisCategoryPane","_analysisType","categoryTitle","simpleGeometryType","AnalysisOptionView","_html","_renderOption","analysisOptionModel","belongsTo","simpleGeometryTypeInput","_$list","camshaftReference","nodeIds","type_group","desc","link","_nodeAttrs","acceptsGeometryTypeAsInput","isValidInputGeometryForType","getValidInputGeometries","getValidInputGeometriesForType","getFormAttrs","layerDefModel","letter","sourceId","source","next","AnalysisOptionModel","primary_source","_removeSourceIfThereAreMultipleSources","params","paramsForType","sourceCount","primary_source_name","left_source","Analyses","_simpleGeometryTypeInput","props","pick","enabled","_acceptsInputGeometry","_disabledDesc","analysisItem","getAnalysisByType","animationTemplate","genericType","toggleClass","linkClicked","hasClass","requiredInputGeometries","_getRequiredInputGeometries","omit","GeneratedAnalysisOptionModel","latestCamshaftReference","getVersion","categories","create_clean","getAnalysesByModalCategory","data_transformation","analyze_predict","alsoGenerateFromCamshaftReference","featureEnabled","implementedAnalyses","concat","analysis","last","versions","compact","filter","contains","isAnalysisValidByType","JSON","stringify","createTemplateTabPane","tabPaneButtonTemplate","tabPaneTemplate","analysesTypes","Router","_toggleAddButton","_generateTabPaneItems","tabPaneOptions","tabPaneItemOptions","klassName","tabPaneTemplateOptions","_tabPane","_tabPaneItems","_$body","goToTabItem","tabItemName","tabItem","availableTypes","unique","unshift","_onAddAnalysis","selectedOptionModel","find","_isSelected","analysisFormAttrs","goToAnalysisNode","any","XYZModel","mosaicThumbnail","MapboxModel","WMSModel","TileJSONModel","NASAModel","tabs","contentPane","currentTab","layerDefinitionsCollection","basemapsCollection","customBaselayersCollection","_layerDefinitionsCollection","_basemapsCollection","_customBaselayersCollection","_currentTab","_initTabs","activeTabModel","canSaveBasemap","_layerToSave","saveBasemap","customBaselayerModel","getAttributes","hasAlreadyAddedLayer","updateSelected","updateCategory","_onBasemapSaved","save","mdlAttrs","order","urlTemplate","maxZoom","minZoom","attribution","tms","imgURL","layerAttrs","setBaseLayer","tabModel","TabPaneView","TabPaneCollection","ViewFactory","ErrorView","TabsView","TypeError","createModel","_createModel","_onChangeContentView","context","paneModel","_tabPaneCollection","_submitButtom","_modalFooter","submitButton","modalFooter","_disableModalFooter","createByHTML","tabPaneView","ok","MapboxView","MapboxToTileLayerFactory","currentView","lastErrorMsg","layer","createView","_submitButton","userLayers","isCustomCategory","customLayer","validateInputs","url","mf","createTileLayer","tileLayer","errorMsg","CustomBaselayerModel","_MAPBOX","https","base","callbacks","_lowerXYZ","subdomains","mapbox_id","_getMapBoxMapID","replace","floor","random","match","_fixHTTPS","image","_newTileLayer","tiles","Image","onload","onerror","_errorToMsg","src","base_url","tile_url","json_url","errorTimeout","setTimeout","ajax","clearTimeout","minzoom","maxzoom","isArray","size","_generateClassName","reg1","reg2","loc","protocol","i","substr","enterUrl","_onClickBinded","_onClickOK","_bindSubmitButton","_updateOkBtn","_onKeyUp","_hasValues","_urlVal","_onKeyDown","_unBindSubmitButton","NASAView","TYPES","day","limit","night","layerType","yesterday","subtract","_onChange","dateStr","DatePickerView","EditFieldModel","dateFormat","dateModel","_disableOkBtn","_renderDatePicker","datepicker","_$datePicker","_onChangeToNight","_onChangeToDay","class","scrollView","_createTabContentView","_currentTabView","_onClickTab","newTileLayer","_isFetched","_urlTemplate","_name","bounding_boxes","setUrl","TileJSONView","TileJSONLayerModel","tileJSONLayerModel","_tileJSONLayerModel","_lastURL","_debouncedUpdate","debounce","_update","_onKeydown","_onPaste","_indicateIsValidating","_urlWithHTTP","_updateError","msg","indicate","str","WMSLayersView","searchQuery","layersFound","getLayers","layersAvailableCount","wmsListView","_onClickBack","_wmsService","saveLayerURL","srs","matrix_sets","sync","method","toLowerCase","dataType","wmsService","canSave","createProxiedLayerOrCustomBaselayerModel","_shouldBeProxied","_createProxiedLayer","_newCustomBaselayerModel","supportedMatrixSets","proxiedBaselayerModel","_newProxiedBaselayerModel","_setCustomBaselayerModel","_byCustomURL","_xyzURLTemplate","getProxyTilesURL","_generateCustomBaselayerModel","proxy","_onClickAdd","WMSLayerModel","parse","r","layers","getFetchLayersURL","WMSLayerView","_renderedLayers","WMSView","WMSLayersCollection","WMSService","layersFetched","wmsLayersCollection","_onLayerStateChange","fetchLayers","difference","pluck","regExp","RegExp","newState","SelectLayerView","focus","_showCleanSearchButton","_hideCleanSearchButton","_onChangeSearchQuery","enterPressed","keyCode","ui","ENTER","_submitSearch","_onCleanSearchClick","XYZView","_lastCallSeq","_setTMSCheckbox","urlErrorMsg","thisCallSeq","validateTemplateURL","_changeTMS","_setTMS","$checkbox","toggle","UploadModel","VisualizationFetchModel","TablesCollection","TableModel","MetricsTracker","MetricsTypes","IMPORT","DATASETS","SCRATCH","IMPORT_FILE","IMPORT_TWITTER","listing","collectionFetched","activeImportPane","_initModels","_fetchCollection","_uploadModel","_selectedDatasetsCollection","_tablesCollection","_visualizationFetchModel","content_type","library","showLibrary","getTablesCollection","getSelectedDatasetsCollection","getVisualizationFetchModel","getUploadModel","canSelect","showDatasets","setActiveImportPane","canFinish","_atImportPane","isValidToUpload","_atDatasetsPane","finish","_pollingModel","toJSON","at","remote_visualization_id","_addNewLayer","getTableModel","getImportState","showGuessingToggler","showPrivacyToggler","hiddenDueToDeprecation","_atTwitterImportPane","hasOwnTwitterCredentials","hasToBeShowed","_atScratchPane","createFromScratch","tableModel","req","resp","responseText","wasSelected","sameModel","types","isSearching","locked","q","page","tags","tag","shared","only_liked","liked","_onCollectionChange","_userActions","createLayerFromTable","updateTableCount","CREATED_LAYER","FooterView","NavigationView","ListingView","_guessingModel","guessing","_privacyModel","privacy","canCreatePrivateDatasets","_navigationView","routerModel","tablesCollection","privacyModel","guessingModel","errorCode","_footerView","paneModelName","GuessingTogglerView","PrivacyTogglerView","guessingTogglerView","privacyTogglerView","prepend","_finish","uploadModel","setPrivacy","setGuessing","createTuplesItems","widgetsTypes","BodyView","TableStats","ENTER_KEY_CODE","userActions","widgetDefinitionsCollection","analysisDefinitionNodesCollection","_widgetDefinitionsCollection","_analysisDefinitionNodesCollection","_optionsCollection","tableStats","analysisDefinitionNode","querySchemaModel","_onQuerySchemaChange","_updateContinueButtonState","_hasFetchedAllQuerySchemas","_renderBodyView","_disableBinds","which","_onContinue","all","selectedOptionModels","_saveSelectedWidgets","then","widgets","goToEditWidget","updateWidgetsOrder","catch","saveWidgetOptionsPromises","saveWidgetOption","Promise","_createOptionsModels","tuplesItems","widgetType","createOptionModels","stats","tabPaneItem","WidgetOptionModel","WidgetDefinitionModel","CATEGORY_TYPE","columnName","styleModel","isAllowed","canApplyAutoStyle","analysisDefinitionNodeModel","column","aggregation_column","aggregation","style","widget_style","definition","getDefaultWidgetStyle","auto_style","allowed","custom","addWidget","LayerSelectorView","categoryFake","_renderLayerSelector","_drawGraph","_onSelect","graphFor","graph","freqs","getCategory","width","height","children","getNullsPercentage","getPercentageInTopCategories","css","CategoryOptionView","chain","_isCategory","BLACKLISTED_COLUMNS","nodeDefModel","l","isOwnerOfAnalysisNode","isDone","columnsCollection","tuples","columnModel","FORMULA_TYPE","operation","formulaFake","isNumber","toString","FormulaOptionView","_isFormula","HISTOGRAM_TYPE","bins","histogramFake","getHistogram","HistogramOptionView","_isHistogram","CustomListItemView","itemListTemplate","selectedItemTemplate","_stateModel","highlighted","_unbindEvents","_bindEvents","_toggleHover","_buildOptions","_selectView","Form","editors","Select","schema","showSearch","customListItemView","mouseOverAction","_onMouseOver","mouseOutAction","_onMouseOut","setValue","$widget","item","index","getTableName","getName","short_title","getColor","CDB","user","api_key","username","tables","queue","tableName","callback","_getPgStats","ColumnGraph","table","getSchemaName","sql","SQL","sql_api_template","execute","rows_per_page","done","rows","count","reltuples","bounds","_reformatToJSON","histogram_bounds","avgs","p","c","binsize","sum","average","min","mostCommon","most_common_vals","trues","trueIndex","falseIndex","most_common_freqs","attname","mostcommon","nulls","null_frac","avg","_processQueue","sqlData","split","some","n","parseInt","normalize","topx","slice","getTrues","_generateHistogram","_generateCategory","getMin","getMax","getAverage","getCount","getSum","canvas","createElement","getContext","proportion","spacing","begin","end","greenPosition","lineCap","strokeStyle","lineWidth","beginPath","moveTo","lineTo","stroke","histogram","_getHistogramFromFreqs","_getHistogramFromBounds","bin","barSeparation","barWidth","bar","barHeight","fillStyle","fillRect","sort","a","b","Array","parseFloat","scaleBin","boundProportion","binMin","binMax","proportionForFirstBin","proportionForLastBin","remaining","range","binIndex","array","values","scale","v","_isTimesSeries","wait","TIME_SERIES_TYPE","layerId","attrsSave","widget_style_definition","successReplaceHandler","errorHandler","createUpdatingNotification","existingModel","TimeSeriesOptionView","TimeSeriesNoneOptionView","_isTimeSeries","ViewClass","has","layer_index","_selectedItem","CategoryOptionModel","CategoryOptionsView","HistogramOptionModel","HistogramOptionsView","FormulaOptionModel","FormulaOptionsView","TimeSeriesOptionModel","TimeSeriesNoneOptionModel","TimeSeriesOptionsView","CARTODB_ID","existingDefModel","columnType","noneOptionModel","VisDefinitionModel","errorParser","VIS_VERSION","visDefinitionModel","_visDefinitionModel","_goToDashboard","_onOpen","_renderLoading","_renderError","_onDuplicate","newVisModel","source_visualization_id","visModel","_redirectToBuilder","builderURL","redirect","renderOption","mapName","titleText","errorMessage","errorView","_onCancel","ConfirmationView","ExportView","ExportMapModel","templateConfirmation","removeLayer","loadingTitle","_hasLoading","_loadingTitle","_layerModel","layerVisName","affectedItemsMessages","_getAffectedItemsMessages","_getAffectedItemsByLayer","layerModel","widgetsOwnedByLayer","getNumberOfAnalyses","getAllDependentLayers","affectedItems","affectedTemplateMessages","smart_count","_exportMap","exportMapModel","visualization_id","renderOpts","_runAction","MosaicView","_disabled","selectedItem","selectedName","_onChangeHighlighted","mosaic","getHighlighted","MosaicModel","MosaicCollection","MosaicItemView","_renderList","_createItem","LocalStorage","AnalysisOnboardingView","BASE_STORAGE_KEY","launcher","onboardings","editorModel","launch","_getGenericAnalysisType","onboardingTemplate","_typeDef","_onChangeEditorModelEdition","_editorModel","_close","isEditing","_forget","_onStyle","typeDef","GAPusher","BUILDER_KEY","LEFT_KEY_CODE","RIGHT_KEY_CODE","_keyDown","_onChangeStep","_changeEdition","_prev","_currentStep","_next","_onClickNext","previous","eventName","hitType","eventCategory","eventAction","eventLabel","_onboardingNotification","setKey","BuilderOnboardingView","_onboardings","onboardingNotification","GenericOnboardingLauncher","launcherOpts","viewOpts","_view","_notificationKey","_viewOpts","notificationKey","launchOpts","extendedViewOptions","_selector","_defaultBodyPos","top","left","_modifier","_template","_numberOfSteps","prev","fadeOut","fadeIn","_setMiddlePad","padding","$window","$top","$middle","$bottom","vh","vw","isSelector","isString","outerWidth","outerHeight","offset","appliedPadding","_buildPadding","right","bottom","topHeight","middleHeight","bottomHeight","result","_calculatePadding","isFinite","OnboardingView","AnalysesService","extendEvents","numberOfSteps","modifier","_onAddAnalysisClicked","addAnalysis","featurePosition","_getFeatureEditionPosition","$switch","$featureEdition","leftOffset","Number","MAX_VALUE","topOffset","rightOffset","MIN_VALUE","bottomOffset","defaultTemplate","pointsTemplate","steps","_geom","_setStepOne","_setStepTwo","_highlightOptionsBar","$noGeom","aggregationInfo","_getAggregationPositionAndPadding","_highlightStyleProperties","$aggregationTypes","$aggregationOptions","bottomPadding","getContentClasses","isHidden","args","CLOSE_DELAY_MS","_onShowChange","_onDestroy","_onCustomEvent","_onClose","_delayDueToAnimation","customEventName","invoke","_subviews","fn","OnboardingViewModel","DESTROYED_ONBOARDING_EVENT","contentClasses","isFunction","_onboardingView","_newOnboardingView","appendChild","onDestroyOnce","once","viewModel","_handleBodyClass","_destroyOnEsc","listenToOnce","onboardingView","destroyOnEsc","addEventListener","removeEventListener","bodyClass","classList","TabPaneViewRouted","IconView","paneItems","tabPaneItemIconOptions","paneItem","check","route","icon","onClick","createButtonView","cdb","TemplateView","core","View","LabelView","tabPaneItemLabelOptions","selectedChild","Template","TabPaneItemView","_onButtonClicked","TabPaneViewItemRouted","_initialRoute","onRouteChange","getRouteModel","_setInitialRoute","_renderTabPaneItemView","tabPaneItemView","_tabPaneItemOptions","routeModel","_renderTabPaneContentView","selectedView","currentRoute","getCurrentRoute","routeName","tabName","parsed","handleRoute","replaceWithRoot","isDisabledTab","newRoute","replaceState","AreaOfInfluenceFormModel","AggregateIntersectionFormModel","FilterIntersectionFormModel","FallbackFormModel","UnknownTypeFormModel","MergeAnalysisOptionModel","DeprecatedSQLFunctionOptionModel","DAO_TYPES","MAP","FormModel","modalTitle","modalDesc","modalCategory","modalLink","animationParams","checkIfEnabled","checkIfDataObservatoryIsEnabled","dataservicesApiHealth","doApiData","getService","assignedQuota","softLimit","hideDataObservatory","name_of_the_layer","checkIfInternalGeocodingIsEnabled","dummy","checkIfExternalGeocodingIsEnabled","isPolygon","ModalModel","checkIfRoutingIsEnabled","percentage","dataServiceEnabled","isDataServicesReady","definitionByType","measurement","measurementType","clone","isReady","_isAnalysisValidByType","DATA_OBSERVATORY_OLD","findFormModelByType","isDummy","hasType","obj","syncAbort","USER_SAVED","nodesCollection","analysis_definition","merge","node_id","getNodeDefinitionModel","containsNode","other","AnalysisDefinitionNodeSourceModel","AnalysisDefinitionNodeModel","SQLUtils","TableNameUtils","_relatedTableData","relatedTableData","_onQueryObjectsUpdated","addRelatedTableData","tableData","t","isSameTableName","createSourceNode","query","getDefaultSQL","getUsername","_fetchQueryObjectsIfOnTop","_isNodeOnTop","fetchQueryObjects","currentPos","_getTopNodeIndex","nodeOnTop","_getNodeOnTop","AnalysisDefinitionModel","vizId","_vizId","baseUrl","findAnalysisThatContainsNode","findAnalysisForLayer","layerLetter","newAnalysisForNode","saveAnalysisForLayer","analysisDefModel","POLL_TIMER","urlVersion","imports","destroyCheck","importsModel","canImport","importQuota","getMaxConcurrentImports","total","finished","pollCheck","pollTimer","setInterval","clearInterval","failedItems","ImportsCollection","POLLINGS_TIMER","importsPolling","importsCollection","_onImportsStateChange","getTotalFailedItems","getTotalImports","getTotalPollings","PROVIDER_LEAFLET","PROVIDER_GOOGLE_MAPS","CATEGORY_GOOGLE_MAPS","LAYER_TYPE_GOOGLE_MAPS","LAYER_TYPE_TILED","getProvider","getLayerType","isGoogleMapsCategory","queryTemplate","MAX_ROW_COUNT","_query","_rowData","_SQL","_onQueryDone","resultCount","extra_params","getRows","rowDataCount","reject","isNull","BaseCollection","BaseModel","FILTER_CLIPPED_GEOMS_IF_EXISTS","ORDER_CLAUSE_GEOMS","COMMON_DATA_QUERY","BOUNDARIES_QUERY_PLAIN","BOUNDARIES_QUERY_NORMALIZE","BOUNDARIES_QUERY_TIMESPAN","BOUNDARIES_QUERY_NORMALIZE_TIMESPAN","o","geom_id","geom_name","rank","getLabels","getValues","getPreSelectedBoundaryValue","boundary","shift","buildQuery","denom_id","timespan","errorParse","OBS_META_QUERY","ColumnName","_querySchemaModel","_nodeDefModel","isFetching","buildQueryOptions","metadata","numer_id","_success","_error","deferred","Deferred","queryOptions","sqlQuery","resolve","promise","MEASUREMENT_ATTRIBUTES","MEASUREMENT_BY_ID","area","_onFetchSuccess","_clear","numer_name","description","numer_description","numer_type","aggregate","numer_aggregate","numer_tags","isObject","license","NORMALIZE_QUERY_WITH_MEASUREMENT","denom_name","REGIONS_QUERY","region_id","region_name","renderOptions","measurements","num_measurements","stateModel","isFetched","TIMESPAN_QUERY_WITH_NORMALIZE","TIMESPAN_QUERY_WITHOUT_NORMALIZE","timespan_id","timespan_name","selectFirstAsDefault","BackgroundPollingModel","importedVis","onTableFetched","always","urlRoot","requestExport","_requestExportSuccessHandler","cancelExport","_interrupt","_pollPID","_checkState","_errorHandler","_finishExport","QueryRowModel","TYPES_POINT","TYPES_LINE","TYPES_POLYGON","GEOJSON_TO_FEATURE_TYPE","Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","convertGeoJSONTypeToFeatureType","the_geom","geoJSON","geometryType","featureType","FeatureDefinitionModel","_featureType","_firstNode","_getAnalysisDefinitionNodeModel","_changesHistory","_tableNodeModel","isNew","_bindChangeEvent","isPoint","_isType","isLine","_getType","isEditable","analysisDefinitionModel","isReadOnly","_getPermissionModel","getPermissionModel","hasAnalyses","isCustomQueryApplied","isEqual","featureDefinition","getLayerId","getLayerDefinition","_cleanChangesHistory","_unbindChangeEvent","changed","hasBeenChangedAfterLastSaved","getFeatureType","_getQueryRowModel","columns","getColumnNamesFromSchema","queryRowModel","cartodb_id","_queryRowModel","permissionModel","STATES","CONTEXTS","LayerContentModel","initial","_setState","_queryRowsCollection","statusModel","_getState","isErrored","errored","fetched","fetching","isInitial","unavailable","hasRepeatedErrors","isInFinalStatus","LayerDefinitionModel","layerLetters","layerColors","layerTypesAndKinds","generateLabelsLayerName","_mapId","resetByLayersData","layersData","initialLetters","_sanitizeLabels","comparator","isKindDataLayer","kind","_takenLetters","getColorForLetter","getUnqualifiedName","userName","user_name","qualifyTableName","isInsideOrg","getQualifiedTableName","getDefaultSQLFromTableName","parseAttrs","nextLetter","findAnalysisDefinitionNodeModel","findOwnerOfAnalysisNode","findPrimaryParentLayerToAnalysisNode","exclude","owner","layerHeadNode","primarySourceOfLastOwnNode","linkedListBySameLetter","getPrimarySource","isThereAnyGeometryData","dataLayers","_getDataLayers","allQueryGeometryModels","_getAllQueryGeometryModels","queryGeometryModelsValuePromises","hasValueAsync","hasGeomValues","loadAllQueryGeometryModels","promises","isDataLayer","canFetch","when","isThereAnyTorqueLayer","isTorqueType","isThereAnyCartoDBLayer","isCartoDBType","anyContainsNode","isDataLayerOnTop","lyrModel","getTopDataLayerIndex","layerOnTop","getLayerOnTop","hasLabels","getNumberOfDataLayers","select","isTypeDataLayer","otherLetters","valuesFromAddedModels","valuesFromModelsNotYetAdded","_byId","union","troubled","isTiledType","newBaseLayerAttrs","isBaseLayerAdded","newBaseLayerHasLabels","labels","labelsLayerOptions","baseLayerOptions","labelsLayer","getLabelsLayer","_updateLabelsLayer","_addLabelsLayer","_destroyLabelsLayer","getBaseLayer","_updateBaseLayer","_createBaseLayer","basemapAttrs","baseLayerDefinitionModel","matchesAttrs","currentBaseLayer","newAttrs","identity","optionsAttribute","labelsLayerAttrs","dataLayer","letters","String","fromCharCode","charCodeAt","LegendsState","postHTMLSnippet","preHTMLSnippet","conf","customState","pre_html","post_html","getStyles","getType","setAttributes","hasCustomHtml","LegendBaseDefModel","LegendColorHelper","DEFAULT_BUBBLES_COLOR","fillColor","topLabel","bottomLabel","top_label","bottom_label","_inheritStyleColor","fill","fixed","getBubbles","prefix","suffix","leftLabel","rightLabel","left_label","right_label","colors","_inheritStyleColors","StyleHelper","getStyleCategories","CategoryModel","BubbleModel","ChoroplethModel","CustomChoroplethModel","CustomModel","TorqueModel","LEGEND_MODEL_TYPE","resetByData","vizJSON","_isDataLayer","_findLayerDefinitionModel","legends","legend","Klass","flatten","findByLayerDefModel","legendDefModel","findByLayerDefModelAndType","findByLayerDefModelAndTypes","legendsMetadata","CUSTOM_ATTRIBUTES","instance","State","legendType","onLayerAdded","onLayerRemoved","layersDefinitionCollection","legendsDefinitionCollection","getInstance","OWN_ATTRS","EMBED_ATTRS","basemapProvidersAndCategories","drag","keyboard","cartodb_logo","layer_selector","dashboard_menu","scrollwheel","provider","_onBaseLayerChanged","baseLayer","newProvider","user_id","setMapViewSize","_mapViewSize","getMapViewSize","setStaticImageURLTemplate","staticImageURLTemplate","_staticImageURLTemplate","getStaticImageURLTemplate","setImageExportMetadata","_imageExportMetadata","getImageExportMetadata","setConverters","converters","converter","overlaysCollection","mapDefModel","overlays","canRemoveLogo","remove_logo","setting","related","enabler","hidden","visId","_visId","hasFetched","removeOverlay","overlay","createOverlay","_createFullScreenOverlay","_createLayerSelectorOverlay","_createSearchOverlay","_createZoomOverlay","_createLogoOverlay","display","stateURL","json","updateState","setBounds","getZoom","zoom","getCenter","center","DEFAULT_FETCH_OPTIONS","per_page","exclude_shared","exclude_raster","modelId","_stats","getTotalStat","getDefaultParam","param","res","visualizations","dt","geometry_types","rows_counted","row_count","table_size","table_type","SimpleStyleDefaults","resetStylePerNode","TABLE_ORIGIN","analysisDefinitionsCollection","createDefaultCartoDBAttrs","oldLayerStyle","interactivity","tile_style","getDefaultCartoCSSForType","cartocss","style_version","visible","style_properties","sql_wrap","infowindow","deleteOrphanedAnalyses","toArray","restoreWidgetsFromLayer","affectedWidgets","callbackOptions","restoringError","onWidgetFinished","after","_resetStylePerNode","forceStyleUpdate","resetQueryReady","saveAnalysis","analysisFormModel","updateNodeDefinition","MODIFIED_ANALYSIS","natural_id","createNodeDefinition","createAnalysisNode","CREATED_ANALYSIS","saveAnalysisSourceQuery","widgetOptionModel","goToWidget","saveWidget","widgetDefModel","widgetLayerId","deleteAnalysisNode","nodeId","canBeDeletedByUser","primarySourceNode","oldNodeStyle","getStyleHistoryForLayer","ignoreSchemaChange","DELETED_ANALYSIS","ownerName","getOwnerName","tableGeometry","getGeometryType","layerOnTopPos","hasTorque","newLetter","properties","generateAttributes","origin","newLayerModel","createLayerForAnalysisNode","fromLayerLetter","cfg","userMaxLayers","max_layers","newPosition","tableNameAlias","movementType","affectedWidgetAttrsBySourceChange","onNewLayerSaved","forceResetStyles","DRAGGED_NODE","prevLayer","hasPrimarySource","prevOrder","prevLetter","renamedNodeId","renamedNodeDefModel","prevLayerNodeIds","ownedPrimaryAnalysisNodes","affectedWidgetsBySourceChange","widgetSourceId","avoidNotification","containsAnalysisDefinition","table_name_alias","from_layer_id","from_letter","newLayerDefModel","fail","linkedNodesList","moveNode","oldNode","newId","changeLetter","newNode","newLayerHeadNode","rest","ownerLayer","FS","log","moveLayer","from","to","movingLayer","saveAnalysisPromises","deleteLayer","layerToDelete","parentLayer","toDestroy","widget","newParentLinkedNodesList","idSequence","firstSequence","sequence","lastNode","prevId","moveNodeToParentLayer","node","oldNodeId","changeSourceIds","maybeUpdateSource","newParentLayerNode","aDefModel","saveLayer","saveDefaultOptions","shouldPreserveAutoStyle","UserNotifications","notifications","CartoColor","ATTRS_AT_TOP_LEVEL","STYLE_PROPERTIES","DEFAULT_WIDGET_COLOR","TIME_SERIES_WIDGET_COLOR","DEFAULT_WIDGET_STYLE","opacity","DEFAULT_RAMP_SIZE","getDefaultCategoriesByRange","widgetDomain","sync_on_bbox_change","auto_style_allowed","widget_color_changed","response","autoStyle","autoStyleDefinition","quantification","domain","auto_style_definition","columnTypeInSource","getColumnType","column_type","changeType","resetableAttrs","resetableAttrsForTypeMap","unset","attrsForNewType","attrsForThisType","otherNodeDefModel","widgetColor","defaultWidgetStyle","getDefaultAutoStyle","defaultWidgetCategories","defaultWidgetRampSize","widgetRamp","ramp","widgetCategories","Prism","widgetRange","widgetQuantification","isUndefined","mapId","_bindLayerStyleChanges","_attrsForThisTypeMap","formula","_onLayerStyleChanged","isNowAllowed","willBeAllowed","widgetModel","ORDER_NUMBER_TO_APPEAR_ON_TOP","numberOfWidgets","widgetDefinitionModel","saveAsync","updatedWidgets","newType","isThereTimeSeries","timeSeries","animated","isThereOtherWidgets","_getNextOrder","lastItemByOrder","schemaModel","PROXY_URL","PROXY_TILES","METHOD_TO_URL","SUPPORTED_MATRIX_SETS","_wms_url","generateURL","parser","href","search","hasCapabilities","hasService","encodeURIComponent","isWMTS","createOpts","matrixSets","intersection","AnalysisOnboardingLauncher","AnalysisNotifications","queryRowsCollection","_invalidateMap","_onAnalysisDefinitionNodeAdded","_onAnalysisDefinitionNodeChanged","_onAnalysisDefinitionNodeIdChanged","_onAnalysisDefinitionNodeRemoved","_analysisDefinitionsCollection","_onAnalysisDefinitionAdded","_onAnalysisDefinitionSync","_analyseDefinition","analyseDefinitionNode","_hasUpdatedOnlyNodeAnalysisStatus","_hasUpdatedOnlyNodeAnalysisId","_diDashboardHelpers","getAnalysisByNodeId","skipOptions","analyse","_tryToSetupDefinitionNodesSync","hasChanged","_tryToSetupDefinitionNodeSync","isCachedAnalysis","_isCachedAnalysis","__syncSetup","layerDefinition","__initialization","updateAnalysisQuerySchema","ready","invalidateMap","diDashboardHelpers","deepInsightsDashboard","_deepInsightsDashboard","visMap","getMap","getDashboard","moveCartoDBLayer","reloadMap","reload","forceResize","_dashboard","vis","analysisDefinition","findNodeById","getLayer","getLayerById","getWidget","getWidgets","getOverlays","templateEditGeometry","EditFeatureOverlay","MAX_VERTEXES","mapModeModel","_map","_mapModeModel","_onEditButtonClicked","_position","_isEditable","_isAggregated","_hasAnalyses","_isCustomQueryApplied","_isReadOnly","_disabledTooltip","delegateEvents","disabledLayerType","_featureDefinition","hasAggregatedStyles","setPosition","setFeatureDefinition","getFeatureDefinition","_getGeomCount","geojson","coordinates","pol1","pol2","j","_confirmStopEdition","runAction","_startEdition","isEditingFeatureMode","enterViewingMode","enterEditingFeatureMode","editFeature","goToDefaultRoute","mapModel","_onMapModeChanged","_onFeatureOut","_onFeatureClicked","_onFeatureError","_editFeatureOverlay","featureId","feature","isFeatureBeingEdited","editingFeatureDefinitionModel","geometry","isViewingMode","stopDrawingGeometry","stopEditingGeometry","isDrawingFeatureMode","drawPoint","drawPolyline","drawPolygon","editGeometry","_bindGeometryToFeatureDefinition","setCoordinatesFromGeoJSON","isComplete","toGeoJSON","LegendManager","linkLayerInfowindow","linkLayerTooltip","NotificationErrorMessageHandler","LAYER_TYPE_TO_LAYER_CREATE_METHOD","CARTODBJS_TO_CARTODB_ATTRIBUTE_MAPPINGS","BLACKLISTED_LAYER_DEFINITION_ATTRS","LayersIntegration","_visMap","_linkLayerErrors","_onLayerDefinitionAdded","_onLayerDefinitionSynced","_onLayerDefinitionChanged","_onLayerDefinitionRemoved","_onLayerDefinitionMoved","_resetStylesIfNoneApplied","_createLayer","_adaptAttrsToCDBjs","_legendDefinitionsCollection","createMethodName","layerPosition","_setLayerError","cdbError","mainErrorMessage","extractError","subtype","line","start","_tryUpdateLayerPosition","builderPosition","cdbLayer","cdbPosition","indexChanges","changedAttributes","attrsNames","onlySourceChanged","setSource","animatedLayerDefinitionModel","baseLayerDefinition","newBaseLayerType","newMapProvider","mapProviderChanged","previousBaseLayerType","previousMapProvider","handleLayersSilently","cdbjsLayer","labelsLayerDefinition","cdbjsTopLayer","cdbjsHasLabelsLayer","changedAttrs","nodeModel","isAnalysisNode","hasNoneStyles","simpleGeom","applyDefaultStyles","setDefaultPropertiesByType","cdbAttrs","cdbjsAttr","cdbAttr","LegendFactory","LegendTypes","_createLegendForAnimation","removeLegend","CATEGORY","CHOROPLETH","CUSTOM_CHOROPLETH","createLegend","TORQUE","_createLegendForHeatmap","getHeatmapColors","_createCategoryLegend","isAutoStyleApplied","_createChoroplethLegend","_createColorLegend","isAnimation","isHeatmap","usesCategory","attributeTypeIsString","attribute_type","attributeTypeIsBoolean","_updateSizeLegend","hasBubbleLegend","BUBBLE","_updateColorLegend","colorLegendTypes","hasSomeLegend","hasLegend","hasCustomLegend","CUSTOM","getSize","isEnabledType","onStyleChange","hasChangedCartocss","_onLegendDefinitionAdded","_onLegendDefinitionChanged","_onLegendDefinitionRemoved","infowindowNoneTemplate","layerDef","infowindowModel","updateInfowindow","isEmptyTemplate","fields","subtitle","tooltipModel","setTemplate","VisNotifications","_vis","_mapDefinitionModel","_onMinMaxZoomChanged","_onScrollWheelChanged","_onLegendsChanged","_onLayerSelectorChanged","saveStateDefinition","_saveStateDefinition","onStateChanged","_stateDefinitionModel","_onBoundsSet","_setMapViewSize","_onEditorSettingsChanged","_onEditionChanged","_visReload","_visErrorChange","_getVisMetadata","setMapConverters","currentZoom","settings","layerSelector","pixelToLatLng","latLngToPixel","settingsView","imageExportMetadata","mapType","getStaticImageURL","recordChange","_overlayDefinitionsCollection","_onOverlayDefinitionAdded","_onOverlayDefinitionRemoved","WidgetsService","WidgetsNotifications","getStylesWithoutAutostyles","WIDGET_STYLE_PARAMS","_getStylesWithoutAutostyles","_onWidgetDefinitionAdded","_onWidgetDefinitionSynced","_onWidgetDefinitionChanged","_onWidgetDefinitionDestroyed","_invalidateSize","_setSelectedWidget","invalidateSize","show_source","show_stats","show_options","_bindWidgetChanges","_createWidgetModel","_onWidgetAutoStyleColorChanged","isAutoStyle","autoStyleInfo","getAutoStyle","setPropertiesFromAutoStyle","widgetId","_onWidgetAutoStyleChanged","onLayerChange","dontResetStyles","cancelAutoStyle","stylesWithoutAutostyles","cartocss_custom","autoStyleId","resetPropertiesFromAutoStyle","_onWidgetCustomAutoStyleColorChanged","_formatWidgetAttrs","colorChanged","_unbindWidgetChanges","selectedWidgetId","_onEditWidget","editWidget","_onRemoveWidget","removeWidget","infix","toUpperCase","methodName","formattedAttrs","thereIsWidgetStyleChange","manageTimeSeriesForTorque","recreateWidget","currentTimeseries","newLayer","persistName","_createTimeseries","animatedChanged","previousAnimated","attributeChanged","typeChanged","animatedAttribute","previousType","_getTimeseriesDefinition","_lastType","_removeTimeseries","_lastTSAnimateChange","def","persist","baseAttrs","WidgetsIntegration","AnalysesIntegration","MapIntegration","LegendsIntegration","OverlaysIntegration","FeaturesIntegration","DIDashboardHelpers","legendDefinitionsCollection","overlayDefinitionsCollection","editFeatureOverlay","mapDefinitionModel","stateDefinitionModel","ACTIVE_LOCALE","Locale","Polyglot","polyglot","locale","phrases","deepInsights","ConfigModel","EditorMapView","MapDefinitionModel","AnalysisDefinitionNodesCollection","AnalysisDefinitionsCollection","LayerDefinitionsCollection","WidgetDefinitionsCollection","createEditorMenuTabPane","editorPaneTemplate","editorPaneIconItemTemplate","ModalsServiceModel","OnboardingsServiceModel","BuilderOnboardingLauncher","viewFactory","UserModel","EditorModel","UserActions","ImporterManager","StyleManager","DeepInsightsIntegrations","FeedbackButtonView","SettingsOptions","SettingsView","OverlaysCollection","MapcapsCollection","PrivacyCollection","CreatePrivacyOptions","UserGroupFetcher","LegendDefinitionsCollection","EditorVisualizationWarningView","MapModeModel","NodeGeometryTracker","handleAnalysesRoute","handleModalsRoute","handleWidgetRoute","ForbiddenAction","NetworkResponseInterceptor","addURLPattern","addErrorInterceptor","stateJSON","userData","frontendConfig","visualizationData","analysesData","builderNotifications","mapcapsData","overlaysData","basemaps","acl","stateDefModel","map_id","related_tables","userId","privacyOptions","privacyCollection","mapcapsCollection","backgroundPollingModel","mapCreation","createDashboard","apiKey","no_cdn","renderMenu","show_empty_infowindow_fields","showLimitErrors","interactiveFeatures","layerSelectorEnabled","dashboard","trackJs","console","dashboardView","getView","styleManager","addCustomOverlay","deepInsightsIntegrations","escapeOptionsDisabled","keepOpenOnRouteChange","settingsCollection","rootLocation","exec","pathname","history","pushState","hashChange","root","editorTabPaneView","goToLayerList","goToSettings","avatar_url","setSelectedTabPaneByName","bindRouteEvents","editorTabPane","feedbackView","__backboneAgent","handleBackbone","templateExportMapConfirmation","templateExportMapDownload","_exportMapModel","_renderCompleteView","_renderFailureView","_renderConfirmationView","w","open","charAt","_renderOpts","_onConfirm","_download","EditMetadataView","removeMap","renameMap","InlineEditorView","templateInlineEditor","CreationModalView","ShareWith","ContextMenuFactory","PrivacyDropdown","_changeStyle","_privacyCollection","searchByPrivacy","published","_mapcapsCollection","fromNow","cssClass","avatar","_inlineEditor","onEdit","_renameMap","shareWith","separationClass","clickPrivacyAction","_onClickPrivacy","_onRenameMap","_duplicateMap","_canDuplicate","_editMetadata","_exportImage","destructive","_confirmDeleteLayer","_contextMenuFactory","privacyDropdown","isOwner","isIndividualUser","hasRemainingPublicMaps","newName","_onRenameSuccess","onError","_onRenameError","edit","errorTitle","onSuccess","_onSuccessDestroyMap","_onErrorDestroyMap","visID","modal","onRemoveMap","oldName","_getTitle","keywords","EditorView","StackLayoutView","BasemapContentView","LayerContentView","EditFeatureContentView","WidgetsFormContentView","stackViewCollection","createStackView","stackLayoutModel","selectedTabItem","mapStackLayoutModel","_settingsCollection","_routeModel","viewType","_basemaps","analysisPayload","_analysis","stackLayoutPrevStep","isValidGeometry","hasChanges","isValidAttributes","_stackLayoutView","notifierView","_setServices","setStackLayoutView","_handleRoute","goToStep","goToWidgetList","isFeatureNew","goToPreviousRoute","createTextLabelsTabPaneRouted","Header","EditorTabPaneTemplate","EditorWidgetsView","LayersView","PanelWithOptionsView","ShareButtonView","PublishView","Infobox","InfoboxCollection","zoomToData","LAYERS_TAB_NAME","WIDGETS_TAB_NAME","MAX_LAYERS_REACHED","ORIGIN_TABLE","_zoomToData","_getDataLayerCount","_getMaxCount","infoboxStates","_getMaxLayerInfoBoxForCurrentUser","_getUnknownErrorInfobox","_getLimitInfobox","_infoboxModel","infoboxCollection","tabPaneTabs","_getTranslatedLayersLabel","_selectedTabItem","infoboxModel","scrollViewInstance","showMaxLayerError","_infoboxState","onNotificationCloseAction","_updateScrollWhenExist","createActionView","onClickAction","_share","_mapStackLayoutModel","header","_onRemoveMap","_onExportImage","_mapTabPaneView","_updatedModel","_onLayerAdd","_onLayerCountChange","_getMaxLayerTitle","infoboxOpts","baseState","isHosted","maxLayers","onAction","isOrgAdmin","upgradeContactEmail","onClose","layersModel","getTabPaneCollection","hasLimitError","hasUnknownError","hasInteractivityError","maxCount","breadcrumbsEnabled","changeStyleMenu","_setUpdateFromCreation","_setUpdateFromMapcap","mapcaps","created_at","_getMapcaps","updateFromCreation","updateFromMapcap","mapcapsURL","OptionsView","_infoboxCollection","_overlaysCollection","publishView","_isOwner","EditorSettingsPane","ExportImagePane","_generateStackLayoutView","_createEditorSettingsView","_createExportImageView","canvasClassName","EditorPane","_createEditorView","DIMENSION_LIMIT","OPTIONS","_generateSchema","_setSchema","validators","_validateDimension","showSlider","editorAttrs","placeholder","formValues","numericValue","setErrors","shouldTrigger","_validationErrors","canExport","_removeFormView","_renderForm","_formView","_formModel","_updateChanges","_updateSchema","commit","ExportImageFormView","ExportImageFormModel","ExportImageWidget","Utils","browser","DEFAULT_EXPORT_FORMAT","DEFAULT_EXPORT_WIDTH","DEFAULT_EXPORT_HEIGHT","CARTO_ATTRIBUTION","ATTRIBUTION_WIDTH","ATTRIBUTION_HEIGHT","NOTIFICATION_ID","LOGO_PATH","GMAPS_DIMENSION_LIMIT","GMAPS_DIMENSION_LIMIT_PREMIUM","MIMETYPES","_canvasModel","_$map","_canvasClassName","ceil","_exportImageFormModel","hasGoogleBasemap","_hasGoogleMapsBasemap","_isLogoActive","logoSetting","isLogoActive","_addErrorNotification","_getMapName","_createWidget","_createForm","_createDisclaimer","_createFooter","_exportImageFormView","formModel","canvasModel","infoboxSstates","_infoboxView","_exportImageWidget","mapViewClass","dashboardCanvasClass","_getStaticMapURL","imageMapMetadata","lat","lng","_removeNotification","logo","_loadLogo","basemap","_loadGMapBasemap","_onLoadImage","_downloadImage","_loadAttribution","_onFail","stopLoader","browserInfo","imageFormat","fileName","msToBlob","navigator","msSaveBlob","Blob","dataUri","toDataURL","download","click","removeChild","_basemap","setAttribute","ctx","naturalWidth","naturalHeight","drawImage","_drawLogo","_drawAttribution","_logo","_attribution","attributionWidth","_getDimensionString","_getCenterString","_parseAttribution","stripHTML","visMetadata","dimension","measureText","font","fillText","logoUrl","_getImageFromUrl","apiUrl","_validGMapDimension","_goStepBack","_stackLayoutModel","prevStep","TRACK_CONTEXT_CLASS","_$dashBoardCanvas","_dashboardCanvasClass","_setupCanvas","_updateHelpers","_updateCoordinates","_onChangeMap","_resize","_onResizeWindow","_updateCanvasCoordinates","_onEnter","_onLeave","resizable","resize","_onResize","handles","containment","draggable","stop","_setupTracks","canvasWidth","canvasHeight","_calcCenter","helper","LOADING","_isLoading","isDisabled","blur","analysisNode","element","triggerSelector","selector","_showTooltip","_destroyTooltip","extractErrorFromAnalysisNode","_createTooltip","showTipsy","hideTipsy","destroyTipsy","STATUS_READY","STATUS_PENDING","STATUS_RUNNING","STATUS_WAITING","STATUS_FAILED","_addStatusChangedNotification","_onErrorChanged","_addRemovedNotification","_layerDefModel","_addAnalysisWaitingNotification","_addAnalysisRunningNotification","_addAnalysisReadyNotification","_addAnalysisFailedNotification","autoclosable","SourceLayerAnalysisView","DefaultLayerAnalysisView","_renderOwnNode","_renderSecondaryNode","getSecondarySource","showId","_isOwnedByOtherLayer","AnalysisTooltip","_analysisNode","_analysisTooltip","bgColor","_bgColor","hasError","analysisNodeId","sourceTooltip","$layer","$title","isSync","syncData","syncModel","getSyncModel","runAt","ranAt","customQueryApplied","syncTooltipTitle","syncTooltip","sqlTooltip","mouseEnterAction","mouseLeaveAction","CarouselCollection","BasemapHeaderView","BasemapModelFactory","BasemapsCollection","BasemapInnerView","BASEMAP_ICONS","gmaps","carto","stamen","mapbox","here","wms","tilejson","nasa","_baseLayer","_basemapModelFactory","_initCollections","userLayersMdl","_onAddBasemap","_onChangingBaseLayer","_onBaseLayerFailed","_renderHeader","_updateSelectedCategory","_renderContent","basemapModel","categoryBasemaps","createBasemapModel","customBaseLayerDefinitionModel","_categoriesCollection","getCategories","_getBaseLayerCategory","_getTemplateForCategory","categoryName","newCategory","_onChangeSelectedCategory","getDefaultCategory","hasCustomBaseLayer","_contentView","categoriesCollection","_headerView","CarouselFormView","_renderCarousel","DEBOUNCE_TIME","_updatePlainBasemap","plainBasemap","isAlreadySelected","hidePanes","disableOpacity","BasemapFormModel","_generateForms","DEFAULT_NAME","_getName","BasemapCategoriesView","BasemapSelectView","_renderSelect","_renderCategories","_categoriesView","selectedCategoryVal","getSelectedValue","BasemapModel","DEFAULT_SUBDOMAIN","DEFAULT_X_POSITION","DEFAULT_Y_POSISTION","DEFAULT_ZOOM","createLeafletBasemapModel","assetsBaseURL","currentValue","imageURL","lowerXYZ","getSubdomain","createGoogleMapsBasemapModel","generateValue","baseType","baseName","createCustomBasemapModel","customBaseLayerAttrs","createColorBasemapModel","CATEGORY_CARTODB","CATEGORY_STAMEN","CATEGORY_HERE","CATEGORY_GMAPS","CATEGORY_CUSTOM","CATEGORY_NASA","CATEGORY_TILEJSON","CATEGORY_MAPBOX","CATEGORY_WMS","CATEGORY_COLOR","CREATE_METHODS","basemapCategory","createMethod","AddBasemapView","AddBasemapModel","mosaicModel","_mosaicModel","addBasemapModel","BasemapMosaicView","BasemapMosaicModel","MosaicFormView","BasemapMosaicRemoveView","DEFAULT_IMG","_getImageURL","basemapMosaicRemoveView","_getSubdomain","highlightedAdd","_deleteBaselayer","MosaicItemModel","BasemapMosaicItemView","MosaicAddItemView","_createAddItem","BasemapFormView","BasemapMosaicFormView","_initCollection","_selectedCategoryVal","_renderCustomMosaic","_renderMosaic","_filteredBasemapsCollection","findByCategory","_changeBasemap","getByValue","defaultCategory","uniq","newSelected","getThumbnailImage","EditFeatureActionView","EditFeatureControlView","EditFeatureHeaderView","VisTableModel","EditFeatureInnerView","EditFeatureGeometryFormModel","EditFeatureGeometryPointFormModel","EditFeatureAttributesFormModel","StyleConstants","StylesFactory","GEOMETRY_TYPE","_featureModel","_tableName","_url","edition","_getTable","_checkNewLayerGeometryTypeDefinition","_updateForms","_onDestroyFeature","_onDestroyFeatureSuccess","_onDestroyFeatureFailed","_onAddFeature","_onSaveFeature","_onSaveFeatureSuccess","_onSaveFeatureFailed","_addRow","_renderInfo","_updateGeometry","_attributesFormModel","_geometryFormModel","backAction","cleanAndGoBack","featureModel","_sourceNode","geometryFormModel","attributesFormModel","createControlView","_onUpdateFeature","goToStyleTab","_needReloadVis","currentGeometryType","layerGeometryTypeHasBeenDefined","defaultStyle","Type","SIMPLE","getDefaultStyleAttrsByType","hasGeom","resetFetch","_rowsCollection","getColorAttribute","getSizeAttribute","_getSourceNode","_visTableModel","getUnquotedName","datasetURL","primarySource","_destroyContextOverlay","_canSave","_onSaveClicked","_saveFeature","ColumnRowData","DialogConstants","FIELDTYPE_TO_FORMTYPE","string","boolean","number","_getInputType","columnRowData","_getSupportedColumnType","supportedColumnType","fieldType","_columnsCollection","dialogMode","Mode","FLOAT","defaultValue","allowFreeTextInput","collectionData","_onChangeSchema","isFormatted","_COORDINATES_OPTIONS","min_lat","max_lat","min_lng","max_lng","_formatCoordinate","coordinate","_isValidCoordinate","_getLatitude","pos","_getLongitude","_validateGeom","validation","helpers","GeoJSONHelper","getPolylineLatLngsFromGeoJSONCoords","getPolygonLatLngsFromGeoJSONCoords","latitude","longitude","latError","lngError","hasCopyButton","_validateForm","editor","getCoordinatesFromGeoJSON","_onLatLngChange","newGeoJSON","_toGeoJSON","currentGeoJSON","geoJSONCoordinates","latitudeFromGeoJSON","longitudeFromGeoJSON","_validateLatitude","_validateLongitude","breadcrumbLabel","_isNew","_confirmDeleteFeature","_destroyFeature","EditFeatureGeometryFormView","EditFeatureAttributesFormView","_editFeatureGeometryFormView","_editFeatureAttributesFormView","LayerAnalysisDraggableView","sortableSelector","layerAnalysisViewFactory","_layerAnalysisViewFactory","_renderNode","_createNodeView","_attachDraggableToNodeView","nodeView","draggableView","getNextLetter","$nodeViewElement","appendTo","connectToSortable","cursor","axis","cursorAt","_createHelper","zIndex","nextBgColor","RefLayerAnalysisView","CompositeLayerAnalysisView","LayerAnalysisViewFactory","sourcesCount","sourceIds","TabPaneTemplate","LayerHeaderView","AnalysisSourceOptionsModel","AnalysisFormsCollection","TableManager","changeViewButtons","editOverlay","DataView","LayerContentAnalysesView","StyleView","InfowindowsView","LegendsView","Toggler","fetchAllQueryObjects","TABS","popups","DISABLED_TABS","ROUTER_ADD_GEOMETRY","point","polygon","_getQuerySchemaModel","_getQueryGeometryModel","_getQueryRowsCollection","_initViewState","_onClickNewGeometry","_togglerModel","active","_isContextTable","setLayerId","_updateViewState","_destroyTable","_renderHeaderView","_renderLayerTabPaneView","_initTable","_renderContextButtons","_viewState","isLayerEmpty","canBeGeoreferenced","isLayerDone","_setViewState","_onTogglerChanged","_layerTabPaneView","goToDataTab","analysisFailed","layerContentModel","goToAnalysisTab","analysisSourceOptionsModel","analysisFormsCollection","resetByLayerDefinition","generateGeoreferenceAnalysis","selectedNodeId","nodeSource","addHead","lastAnalysisNode","styleView","goToPopupsTab","goToLegendsTab","_quitEditing","tableNodeModel","layerHeaderView","setViewStateFn","_fetchAllQueryObjects","_tableView","_destroyContextButtons","isVisible","isThereAnimatedTimeSeries","togglerView","_addContextButtonsTooltips","disabledButtonTooltip","tooltips","$target","addGeometry","OVERLAY_FADE_MS","editOverlayText","_newFeatureDefinitionModel","enterDrawingFeatureMode","_onClickFixSQL","getTabPane","getSelectedTabPaneName","emptyPromise","isEmptyAsync","geoReferencePromise","analysisPlaceholderTemplate","analysisSQLErrorTemplate","AnalysisFormView","AnalysesWorkflowView","AnalysisControlsView","actionErrorTemplate","AnalysesQuotaInfo","utils","_selectedNodeId","_quotaInfo","_isErrored","_toggleOverlay","_layerContentModel","_analysisFormsCollection","_renderTooltip","_getFormModel","_renderScrollableListView","_renderControlsView","plusIcon","replaceLastSpaceWithNbsp","_onLayerDefSourceChanged","_onAnalysisFormsCollectionSync","_setDefaultSelectedNodeId","createListView","quotaInfo","_getQuerySchemaModelForEstimation","deleteAnalysisModel","_deleteAnalysisModel","removeUselessModels","clearNotAppliedAnalysis","ENOUGH_QUOTA_QUERY","errorCallback","successCallback","cdb_enough_quota","ESTIMATION_QUOTA_QUERY","estimationQuery","parseResponse","SERVICE_QUOTA_QUERY","QuotaInfo","_state","_ready","unity","input","routingAnalysisQuota","api","needsQuota","transform","dataObservatoryQuota","ANALYSES_WITH_QUOTA_MAP","requiresQuota","transformInput","getAnalysisName","getServiceName","getUserDataName","AnalysesQuotaOptions","CONTACT_LINK_TEMPLATE","getOwnerEmail","_organizationModel","getEmail","isSaas","insideOrganization","ownerOrganization","isOrgOwner","email","getMessage","notAssignedQuota","getNoCreditMessage","mail","contact","make","blockPrice","formatNumber","estimation","formattedEstimation","blockSize","hardLimit","creditsLeft","enoughQuota","credits","QUOTA_DEFAULTS","apiData","block_size","block_price","AddAnalysisView","_notAppliedAnalysis","_layerId","stackLayoutView","saveNotAppliedAnalysis","persisted","getNotAppliedAnalysis","panelTemplate","AnalysesContentView","OnboardingLauncher","ONBOARDING_KEY","analysisId","_isLayerHidden","_onboardingLauncher","_getQueryAndCheckState","_launchOnboarding","_showHiddenLayer","_resetDeletingAnalysis","_deleteAnalysis","panelWithOptionsView","overlayModel","toggleVisible","deleteNode","linkTemplate","tooltipMessage","_tooltipMessage","helpURL","linkContent","_analysisName","_tooltip","_onNodeClick","AnalysesWorkflowItemView","_renderWorkflowItem","AnalysesWorkflowListView","_renderAnalysesView","InfoboxFactory","AnalysesQuotaPresenter","AnalysesQuotaProvider","AnalysesQuotaEstimation","AnalysesQuotaEnough","AnalysisButtonsView","AnalysisQuotaView","_buttonsView","_viewModel","isNewAnalysis","_fetchQuotaIfNeeded","_onFormModelChanged","_isAnalysisDone","_hasChanges","_createButtonsView","_createQuotaView","_setTrackingClass","_bindAnalysisNodeStatusChanges","isAnalysisDone","_fetchQuota","_buildQuotaViewInfo","labelSave","labelDelete","isDelete","disableDelete","_canDelete","quotaData","payload","checkEnoughQuota","enoughQuotaPromise","buildPayload","canRunAnalysis","estimationState","estimationPromise","enoughQuotaState","dsReady","states","dataInfobox","_saveAnalysis","canDeleteNode","_onDeleteClicked","_isLastAnalysisNodeSelected","BaseAnalysisFormModel","ColumnOptions","AGGREGATE_FORMAT_FIELDS_NAMES","aggregate_column","aggregate_function","operator","_columnOptions","_analysisSourceOptionsModel","_onChangeAggregate","_onChangeTarget","_fetchColumns","_formatAttrs","formAttrs","customFormattedFormAttrs","getTemplate","getTemplateData","dataFields","hasTarget","_filterSchemaFieldsByType","_primarySourceSchemaItem","_getSourceOptionsForSource","sourceAttrName","_isSourceDisabled","filterByType","createSourceNodeUnlessExisting","setNode","setDataset","_isPrimarySource","_isFetchingOptions","DistanceConverter","DEFAULT_DISTANCE","parametersDataFields","radius","toDistance","distance","dissolved","isolines","formatAttrs","toMeters","AREA_OF_INFLUENCE_TYPES","TYPE_TO_META_MAP","_onTypeChanged","_onDistanceChanged","_onKindChanged","clear","isAnalysisTypeEnabled","_analyses","canChangeToType","_canChangeToType","helpMessage","help","_distanceLabel","_radiusInterval","time","_timeInterval","isValidAsInputForType","_replaceAttrs","_fitParamToRange","paramName","_getSourceOption","sourceNodeDefModel","_getSourceNodeDefModel","sourceNames","sourceName","customLabel","setFormValidationErrors","_formValidationErrors","_updateNodeDefinition","requiredSimpleGeometryType","ignorePrimarySource","includeSourceNode","currentSource","getSelectOptions","onlyNodes","FORMAT_FIELD_NAMES","PARAMETERS_DATA_FIELDS","aggregate_value","category_column","weight","weight_column","_onChangeCategory","_updateAggregation","_onChangeWeight","_getFormatFieldNames","MAX_RESPONSES","responses","_resetColumnOptions","_onSourceOptionsFetched","_onColumnsFetched","showLabel","CONNECT_WITH_LINES","order_type","target_column","_hasSecondGeometry","_targetColumnOptions","group","parametersDataSchema","source_column","_getColumnOptions","_getColumnOptionsForTarget","target_source_column","_getTargetSourceColumnOptions","_isTargetColumnDisabled","destination_longitude","destination_latitude","reversed","order_column","attrType","attrExists","customValue","sortBy","columnOptions","DataObservartoryMetadata","doMetadata","_fetchDOMetadata","final_column","sanitizeString","setGeometryType","_areaChanged","_measurementChanged","_setSegment","segments","_normalizeSegment","s","segment","areas","f","templateList","templateItem","NestedMeasurement","DataObservatoryRegions","itemRegionListTemplate","DENOMINATORS_BLACKLIST","EMPTY_AREA","regions","ATTRIBUTES","numerators","column_names","denominators","normalizations","timespans","numerator_timespans","geom_ids","numerator","segment_name","column_name","boundaries","normalization","hasArea","_getNumerators","columnNames","_getColumnNames","normalizers","_getDenominators","_getNormalization","_getTimespan","_getBoundaries","region","_validRegion","_validateMatchSegmentsColumnNames","_isCollectionValid","_areUniqueMeasurements","allFilled","every","uniques","_getRegionOptions","matches","searchPlaceholder","forcePlaceholder","itemType","listTemplate","itemTemplate","maxItems","notAddItemByDefault","DataObservatoryNormalize","DataObservatoryTimespan","DataObservatoryBoundaries","MeasurementModel","DataObservatoryColumnName","wrap","braces","fetchOptions","_fetchMeasurement","_syncMeasurement","_fetchNormalize","_syncNormalize","_fetchTimespan","_syncTimespan","_fetchBoundaries","_syncBoundaries","_fetchNewColumn","_columnNameSuccess","_regionChanged","_initialBoundaryValue","_normalizeChanged","_timestampChanged","_cleanColumnName","_setNormalization","_form","_getUserSelection","areaAllowed","hasInitialBoundaryValue","_getColumnNameOptions","obs_getmeta","suggestedName","suggested_name","denom","numer_timespan","_getNormalizeOptions","_getInitialBoundaryValue","normalizeOptions","noMeasurement","measurementModel","disabledPlaceholder","availableFunctionsQuery","_functionsInfo","_fetchAvailableFunctions","_onFetchStatusChanged","_onFunctionSelected","_serializeFunctionArgs","selectedFunction","_getSelectedFunction","hasSecondaryNode","_buildSchema","function_name","_parseFunctionOptions","_getSelectFunctionAttrs","secondary_source","_addParamToSchema","initialValue","functionName","_parseFunctionsMetadata","responseJSON","_capitalizeFunctionName","fn_name","has_secondary_node","params_names","params_types","depExtRegex","fetchStatus","ARRAY_SPLIT_COMBO","trim","isRequired","optional","fieldDef","_filterColumnOptions","_onFilterSourceChange","hasFilterSource","filter_source","filter_column","_validateFilterColumn","filterColumnValue","columnValue","filterColumn","findColumn","filterColumnType","PARAMS_FOR_IS_EQUAL","filterDataFields","accept","_isFromBooleanKind","accept_reject","isFromIsEqualToKind","_isFromIsEqualToKind","isFromBooleanKind","getParameters","ColumnData","FILTER_TYPES","FILTER_RANGE_KINDS","LESS_GREATER_KINDS","_columnData","_getSelectedColumnType","_columnRowData","_storeHistogramStats","histogram_stats","_getInputOptions","requiredValidators","_getKindOptions","greater_than_or_equal","_getMinOrEqualLabel","less_than_or_equal","_getMaxOrEqualLabel","greater_than","_getMinLabel","less_than","_getMaxLabel","_isBoolean","_generateHistogramStats","_getSourceColumns","sourceColumns","parameters","_setType","getKind","_getColumnType","PARAMETERS_FOR_KIND","DEFAULT_PARAMETERS","fieldAttrs","admin_region_column","country","validatorFor","country_column","city_column","admin_region","GEOREFERENCE_TYPES","GEOREFERENCE_PLACEHOLDER","hasPlaceholder","_getFieldValidator","_getFieldAttrs","city","postal_code_column","ip_address","street_address_template","tokens","_getColumnHints","street_address_column","postal_code_country","fieldName","latitudde","keyAttr","PARAMETERS_FOR_CONTEXT","state_column","_wrapInBraces","fragments","ANALYSES_TYPES","target_percentage","allow_holes","target_percent","clusters","MERGE_FIELDS","join_operator","source_geometry","right_source_columns","source_geometry_selector","right_source","_leftColumnOptions","_rightColumnOptions","_onChangeRightSource","_fetchLeftColumns","_fetchRightColumns","_getFormFieldNames","left_source_columns","hasLeftAndRightSourceColumns","schemaFields","_getSourcesSelector","_validateRightSourceColumn","leftColumnValue","left_source_column","rightColumnValue","right_source_column","leftColumn","leftColumnType","rightColumn","rightColumnType","_getRightSource","_getSourceOptionsForSourceId","searchFn","nodeOptions","leftSourceId","changedSourceId","significance","neighbours","permutations","w_type","numerator_column","denominator_column","DEFAULT_PERCENT","percent","sampling","time_columns","CHECK_FORM_VALIDATION_TOO","_showHistogramStats","trackingClass","templateData","_onChangeAnalysisFormView","formId","formValue","_showAnalysisFormErrors","formValidationErrors","_drawHistogram","readizableNumber","notAppliedAnalysis","attrsList","_walkAnalysisChain","removed","useless","visitorFn","queueAsync","nodes_options","_fetchTables","_createOptionsFromNodes","awaitAll","requiredSimpleGeometryTypes","_isValidGeometry","_getTablesSelectOptions","defer","cb","show_liked","show_table_size_and_row_count","show_permission","show_synchronization","show_uses_builder_features","load_totals","_appendNodeOption","onStatusChange","geom","belongsToLayer","queryBooleanTemplate","tableQueryTemplate","columnsFetched","_fetch","getQueryForGeometryType","_geometryType","sub","subsection","cols","f1","subsectionName","_analysisDefinitionNode","_tableStats","createColumnCollection","_generateGraphs","stat","_locateWidget","findWidget","getColumnsWithWidgetAndGraph","getColumnsWithWidget","getColumnsWithGraph","getColumnsWithoutGraph","StatView","dataNotReadyTemplate","dataErrorTemplate","dataNoGeometryTemplate","layerTabMessageTemplate","addFeaturePointIcon","addFeatureLineIcon","addFeaturePolygonIcon","isDataFiltered","_columnsModel","_handleStats","_handleWidget","_showError","_showFilteredData","_showGeocodeMessage","_showNoGeometryData","_renderStats","_showLoading","pointIcon","lineIcon","polygonIcon","_columnsReady","_addWidget","_destroyWidget","_saveWidget","newWidgetModel","_normalizeTimeSeriesColumn","lastModel","withWidgetAndGraph","withWidget","withGraph","withoutGraph","_renderColumns","statModel","hasGeomPromise","isDataFilteredPromise","CodeMirrorView","ErrorTemplate","FactoryHints","SQLHints","_onQueryChanged","codeMirrorView","updateHints","hints","_codemirrorModel","mode","tips","errorTemplate","_triggerCodeSaved","_updateEditorContent","setContent","_onApplyEvent","DatasetBaseView","DataContentView","DataSQLView","UndoButtons","DataColumnsModel","SQLNotifications","LocaleHelper","getNotificationMessage","linkify","_nodeModel","_parseSQL","_internalParseSQL","_afterAlterDataSuccess","_configPanes","_initData","_applyButtonStatusModel","hasTimeSeries","hasAnimatedTimeSeries","_hasFetchedQuerySchema","_onQuerySchemaStatusChange","_redirectIfErrors","_showErrors","content","_onChangeEdition","_onChangeDisabled","_sqlModel","_runQuery","showNotification","saveSQL","errorSQL","_forceErrors","showEditorError","complete","_saveSQL","_checkClearButton","APPLIED_SQL","USED_ADVANCED_MODE","mode_type","_isQueryAlreadyApplied","getUndoHistory","_updateVisNotification","_defaultSQL","getDefaultQuery","originalQuery","_hasAnalysisApplied","_collectionPane","checked","columnsModel","codemirrorModel","onApplyEvent","isAnalysis","trackModel","clearModel","_clearSQLModel","applyStatusModel","applyButton","clearButton","onApplyClick","onClearClick","_clearSQL","_confirmReadOnly","createContentKey","readonly","savingOptions","templateCategory","templateHistogram","templateFormula","_statModel","_renderTemplate","_showHistogram","_showCategory","_showFormula","_onEdit","formatDecimalPositions","numOfTrues","isNumeric","InfoWindowHTMLView","InfowindowContentView","ApplyButtonView","_initTemplates","isCustomTemplate","_getTemplateContent","hasTemplate","isDisableable","_cancelHTML","_setContent","html_value","_saveInfowindowHTML","_getErrors","_clearErrors","saveFields","template_name","_parseErrors","compile","alternative_names","field","alternative_name","tmpl","templates","_templates","setDefault","customTemplate","InfowindowBaseView","infowindowIcon","InfowindowSelectView","InfowindowItemsView","_renderItems","_updateEditor","selectView","templatesCollection","_templatesCollection","_itemsView","hasValidTemplate","_checkValidTemplate","namesCount","_namesCount","totalFields","selectedFields","fieldCount","allSelected","noneSelected","_toggle","layerInfowindowModel","_layerInfowindowModel","fieldTitle","getAlternativeName","containsField","_updateTitle","_updateSelected","_onBlur","_stripHTML","setAlternativeName","isBlank","_isBlank","setFieldProperty","$0","$1","getFieldProperty","alternativeName","addField","removeField","FieldView","InfowindowDescriptionView","_sortedFields","_renderDescription","_destroySortable","_renderFields","_initSortable","_renderSelectAll","_storeSortedFields","_fieldsDescriptionView","manageAll","selectedAll","_allFieldsSelected","_selectAll","_unselectAll","names","_addField","sortFields","_toggleSelectAll","clearFields","sortable","_onSortableFinish","forcePlaceholderSize","_getSortedColumnNames","pos_a","getFieldPos","pos_b","filteredColumns","SYSTEM_COLUMNS","renderField","headerColor","InfowindowFormModel","InfowindowFieldsView","_hasValidTemplate","_infowindowFieldsView","InfowindowFormView","_onColorChange","_setTemplate","_setNoneTemplate","noneTemplate","_infowindowFormView","InfowindowClickView","TooltipView","createTextLabelsTabPane","popupPlaceholderTemplate","_renderFilteredData","_isNotAggregatedType","_hasColumns","_renderPlaceholder","_setViewValues","_layerTooltipModel","_updateSelectedChild","clickTemplate","hoverTemplate","selectedTab","isAggregatedType","selectedChildTxt","styleHelper","NONE","tooltipTranslationKey","legendIcon","isStyleCompatible","hasStringAttribute","hasBooleanAttribute","hasAttribute","attributeTypeIsUndef","attributeTypeIsNotString","LegendTypeBaseView","legendTypes","legendDefinitionModel","_titlePlaceholder","_initialColor","buildSwatch","_unquote","simpleColor","collectionColor","images","unquoteColor","rotateCollection","COLORS","getNextColor","getColors","setColors","NestedCategory","_initialItems","LegendColors","defaultFill","imageEnabled","_setOptions","LegendContentView","LegendEditorView","LegendDefinitionModel","htmlTemplate","PLACEHOLDER","HTML_TEMPLATE","_legendDefinitionModel","_getUserLegend","_getEditorContent","_isToggleDisable","_getReadOnlyContent","preSnippet","postSnippet","_getCustomContent","_handleEditorContent","expertMode","_areLegendsDisabled","_onChangeState","_deleteCustomHtmlLegend","_enableLegends","_saveLegendHTML","parts","part","sanitize","_updateLegend","newLegendDefModel","updateLegend","isCustom","LEGEND_TYPES_PER_ATTRIBUTE","LegendBuffer","running","_cleanQueue","_run","_removePrevious","_findSameType","removeLegends","includes","legendsLeft","include","findLegend","FormView","CustomFormModel","CategoryFormModel","BubbleFormModel","ChoroplethFormModel","CustomChoroplethFormModel","TorqueFormModel","bubble","choropleth","custom_choropleth","torque","_onDebouncedChange","_createFormModel","_carouselCollection","_legendTypes","_onCarouselChange","_updateToggle","_unBindFormModel","_pickAttrs","_bindFormModel","_updateLegendModel","_getDefaultAttributes","enableLegend","disableLegend","_removeForm","_addForm","_isCustom","_markReadOnly","markReadOnly","Validations","Buffer","legendBuffer","getLegendsCollection","removeAllLegend","hasMigratedLegend","LEGEND_TYPES","noOp","getStyleAttrs","validateColorRange","validateSizeRange","validateRangeAndDomain","validations","LegendColorView","LegendSizeView","LegendSizeTypes","sqlErrorTemplate","_getColorTabPaneOptions","_getSizeTabPaneOptions","_isStyleCompatible","isCompatible","SyncInfoView","renameLayer","DeleteLayerConfirmationView","ModalExportDataView","getSourceNode","nodeHasTradeArea","nodeHasSQLFunction","_sourceNodeModel","_getNodeModel","_topQueryGeometryModel","_initVisTableModel","_onSourceChanged","isTableSource","alias","_showOrHideZoomVisibility","_setViewStateValues","_addSyncInfo","_renameLayer","centerTooltip","_getZoom","toggleMenuTooltip","_getToggleMenu","warningIcon","emptyLayerTooltip","_createSyncInfo","_syncInfoView","_syncModel","_destroySyncInfo","editing","_getText","_getInlineEditor","_getLink","_getBack","_layerHidden","_exportLayer","deleteLayerConfirmationView","canHideColumns","fromView","_onSaveSuccess","_onSaveError","_onZoomClicked","isEmptyPromise","canBeGeoreferencedPromise","BaseTiledLayerView","PlainColorLayerView","BackgroundImageLayerView","GoogleMapsBaseLayerView","DataLayerView","ErroredDataLayerView","LabelsLayerView","LayerAnalysesView","LayerViewFactory","createLayerView","layerViewOptions","newAnalysesView","_newAnalysesView","LayerViewClass","_getLayerViewClass","_isTiledBaseLayer","_isPlainColorBaseLayer","_isBackgroundImageBaseLayer","_isGoogleMapsBaseLayer","isLabelsLayer","_isBaseLayer","isPlainType","isGMapsBase","isBasemapLayer","_sortableSelector","BaseLayerViewBase","_getCompiledTemplate","_getImageFileName","fileNameWithParameters","_onEditBasemap","goToBaseMap","fetchingTemplate","geometryNoneTemplate","geometryPointsTemplate","geometryLinesTemplate","geometryPolygonsTemplate","_styleModel","_queryRowsStatus","fetchQueryRowsIfRequired","isAnimated","isTorque","_isTorque","_hasError","isCollapsed","_isCollapsed","numberOfAnalyses","needsGeocoding","brokenLayer","queryGeometryHasGeom","isFetchingRows","isTorqueLayer","geometryTemplate","_getGeometryTemplate","_onEditLayer","_isHidden","torqueTooltip","georeferenceTooltip","_toggleClickEventsOnCapturePhase","analysesView","errorTooltip","toggleTooltip","_onQueryRowsStatusChanged","_onClickTitle","_onAnalysisNodeClicked","currentTarget","outerHTML","_onClickSource","_onToggleCollapsedLayer","toggleCollapse","_onToggleLayerClicked","_getContextMenuOptions","_centerMap","_disableEventsOnCapturePhase","evt","addOrRemove","_isFetchingRows","queryRowsStatus","georeferencePromise","isLayerEmptyPromise","defaultLayerAnalysisView","BROKEN_NODE_LAYER_COLOR","$nodeAnalysisItem","_reloadApplication","imageName","AddLayerView","AddLayerModel","SORTABLE_SELECTOR","SORTABLE_ITEMS_SELECTOR","BASEMAPS_SELECTOR","_layerViewFactory","_updateAddButtonState","_createNotification","reverse","_addLayerView","_tooltipTitle","_addLayer","addLayerModel","LAYER_ADDED_NOTIFICATION","_onNotificationClose","_onNotificationCloseAction","tolerance","forceHelperSize","_onSortableUpdate","_disableAddButton","_enableAddButton","$draggedLayerElement","numberOfLayers","numberOfBasemaps","_showMaxLayerError","Messages","SAMPLE_LINK_TEMPLATE","getBodyAttributes","errorType","bodyAttrs","sample","extractedError","matched","messages","errorMessageType","replaceWith","removeNewLines","escapeHTML","_clickHandler","_onClickAction","SyncOptionsModalView","canSyncNow","fromExternalSource","_tableModel","_openSyncOptions","TITLE_SUFIX","ongoingQuery","queryLauncher","getBounds","enablerTemplate","_enablerView","Enabler","inputId","OptionsItemView","templateNotReady","_onChangeOptions","handler","property","_overlayHandler","_mapHandler","_renderSetting","_renderOptions","CSSHints","addons","StyleFormView","styleSQLErrorTemplate","EXTRA_STYLE_PROPERTIES","EXTRA_LABELS_STYLE_PROPERTIES","_buildAggregationCarouselCollection","getStyleTypes","iconTemplate","_onSelectAggregation","_onAutoStyleChanged","_onStyleChanged","_onStyleLabelChanged","_checkEditorModel","hasGeometry","alreadyTorqueLayer","styleType","HEATMAP","ANIMATION","_freezeTorgeAggregation","_moveTorqueLayerToTop","_setDefaultProperties","silently","AGGREGATED_GEOMETRIES","previous_agg_type","agg_type","_unsetExtraStyleProperties","MODIFIED_STYLE_FORM","InputQualitativeRamps","CONFIG","GENERIC_STYLE","DEFAULT_HEATMAP_COLORS","_null","makeCartoCSS","k","makeColorRamp","isTorqueCategory","static","parsedDomain","makeWidthRamp","pointSize","blending","animatedType","pointFill","animationType","markerFillOpacity","hasImagesSelected","markerFill","getFalsyCategory","DEFAULT_CATEGORY","_isInvalidCategory","filesUrls","categoryNames","urlFormat","polygonFill","pointStroke","polygonStroke","isValidAttribute","pointAnimated","duration","isCategory","resolution","overlap","_labels","hexToRGBA","halo","placement","imageFilters","cartocssFactory","trails","heatmapConversion","styleConversion","animation","heatmap","renderBlock","block","isTypeTorque","isCategoryType","styleDef","generateCartoCSS","isAnimatable","omittedStyleAttrs","baseWidth","baseOpacity","aggToSQL","agg","regionTableMap","level","hexabins","mapContext","z","squares","aggr_dataset","hasOthers","MAX_VALUES","categoryCount","_normalizeValue","categoryPos","SQLFactory","generateSQL","AggregatedFactory","simple","generateStyle","cartoCSS","conversion","geometryMapping","configure","StyleShapeFormModel","_aggrFormModel","_aggrFormView","StyleFormDefaultModel","_FORM_NAME","StyleFormAggregationDataset","StyleFormAggregationSize","StyleFormAggregationValue","StyleFormAnimatedAttribute","StyleFormAnimatedDuration","StyleFormAnimatedOverlap","StyleFormAnimatedResolution","StyleFormAnimatedSteps","StyleFormAnimatedTrails","StyleFormBlending","StyleFormFillColor","StyleFormFillSize","StyleFormLabelsAttribute","StyleFormLabelsFillSize","StyleFormLabelsFillColor","StyleFormLabelsFont","StyleFormLabelsHaloSize","StyleFormLabelsHaloColor","StyleFormLabelsOffset","StyleFormLabelsOverlap","StyleFormLabelsPlacement","StyleFormStrokeSize","StyleFormStrokeColor","StyleFormStyle","StyleFormHidden","generate","StyleFormComponents","_isTorqueCategory","formName","formComponent","StyleFormDictionaryHelpers","getSchemaColumns","filterFunction","generateSelectWithSchemaColumns","componentName","generateSelectByStyleType","blendingOptions","_getBlendingOptions","_generateBlendingOptions","option","Blending","FillConstants","NO_PANES_CLASS","hideTabs","hideNumericColumns","removeByValueCategory","categorizeColumns","geometryName","getOptionsByStyleType","_getStyleType","REGIONS","HEXABINS","SQUARES","_setColor","_setEditorAttributesForHeatmaps","_setEditorAttributesForPoints","_setEditorAttributesForAnimation","fieldClass","POLYGON","Panes","FIXED","hasGeometryOf","_setImage","Tabs","BINS","QUANTIFICATION","tooltipColor","_checkForParams","optionsForStyle","_buildFillSize","_buildSize","_buildFillSizeAttrs","_hideByValuePaneIfNeeded","sizeAttrs","Size","DEFAULT","_setDefaultRangeIfNeeded","customOptions","defaultRange","BY_VALUE","FONTS_LIST","PLACEMENTS","strokeParams","_generateLineStrokeColor","_generateSimpleStrokeColor","queryStatus","_buildLineStrokeSize","_buildSimpleStrokeSize","_buildLineStrokeSizeAttrs","_buildSimpleStrokeSizeAttrs","optionsArray","AGG_VALUE","AGG_VALUE_DENSITY","generateSimpleStroke","generateLineStroke","StylePropertiesFormView","StyleAggregationFormView","noneFormMessage","_renderNoneMessage","_initFormViews","aggregationFormView","propertiesFormView","columnAnimatable","colModel","animatedData","StyleAnimatedFormModel","_animatedFormModel","_genAnimatedFormView","_animatedFormView","FILL_PROPERTIES","HALO_PROPERTIES","fillSize","haloSize","haloColor","_updatePartialProperties","_setProperties","propertyName","StyleLabelsFormModel","_labelsFormModel","_enablerModel","_initLabelsEnablerView","isAnimatedEnabled","isAnimatedVisible","_setLabelsFormView","isEnabled","_updateFormModel","_genLabelsFormView","_removeLabelsFormView","_labelsFormView","StyleLabelsPropertiesFormView","StyleAnimatedPropertiesFormView","StyleShapePropertiesFormView","StyleNotAnimatableView","stepNumber","simpleGeometry","animatedFormView","shapeFormView","labelsFormView","_isUnanimatable","STROKE_PROPERTIES","strokeSize","strokeColor","getAggregationTypes","_getUpdatedPartialProperties","CHANGED_DEFAULT_GEOMETRY","setFill","_shapeFormModel","_shapeFormView","_getDescTemplate","linkHTML","StyleGenerator","_generate","_bind","_unbind","_bindAll","stylesChanged","generated","previousCartoCSSCustom","StyleContentView","StyleCartoCSSView","ParserCSS","_cartocssModel","cartocssModel","_appendMapsAPIError","launchOnboarding","_onCartocssChanged","_onUndoRedo","_clearCustomStyles","_cancelClearStyles","_applyTorqueAggregation","_cancelTorqueAggregation","newErrors","hasErrors","_saveCartoCSS","parseError","APPLIED_CARTOCSS","_onSaveComplete","applyLastState","torqueLayer","freezeTorgeAggregation","QUERY_TEMPLATE","STATUS","unfetched","DEFAULT_MAX_BUCKETS","buckets","_queryData","_onQuerySchemaStatusChanged","_onQuerySuccess","_onQueryError","row","_calculateBuckets","_calculateDecadesDiff","startYear","year","endYear","startDecade","endDecade","BUCKET_INCREMENT","diff","incrementedBuckets","bucket","increment","getFilteredBuckets","getPreferredBucket","sortedBuckets","widgetIconTemplateMap","sourceColor","sourceType","_renameWidget","_onRenameWidget","_confirmDeleteWidget","_addAllStyleSchemaAttributes","customType","styleAttrs","changeWidgetDefinitionModel","_prepareAttributesForWidgetDefinition","WidgetsFormBaseSchema","updateSchema","getFields","_columnOptionsFactory","helpMsg","unavailableColumnsHelpMessage","aggregationOptions","areColumnsUnavailable","aggregationColumn","columnOptionsFactory","_updateAggregate","_isNumberType","NUMBER_TYPE","TimeSeriesQueryModel","timezones","timezone","_timeSeriesQueryModel","_onColumnChanged","_isNumberOrDateType","sortedTimezoneOptions","_getSortedTimezoneOptions","_isDateType","tz","widgetTitle","F","currentVal","columnFilter","WidgetsFormView","WidgetHeaderView","_widgetDefinitionModel","_goBack","fallback","WidgetsFormColumnOptionsFactory","dataMap","labelTranslationKey","Class","checkIfValid","createWidgetFormModel","getDataTypes","WidgetFormFactory","widgetOptions","_widgetFormModel","_debounceSaveWidget","_onFormChange","_widgetFormView","styleFields","validateForm","previousAutoStyleDefinition","WidgetsFormFieldsView","loadingTemplate","_shouldFetchQuery","_renderFormAndValidate","shouldFetch","filteredDataTypes","_getFilteredDataTypes","carouselCollection","makeItBig","containsTimeSeries","modelCollection","deleteWidgetConfirmationTemplate","widgetName","_modalView","EditorWidgetView","widgetPlaceholderTemplate","widgetsErrorTemplate","widgetsNotReadyTemplate","AddWidgetsView","_onAllQueryGeometryLoaded","anyGeometryData","_addWidgetItem","_addTooltip","_renderPlusIcon","_isReady","anyGeometry","disableSelection","modelCid","ga","LINK_TEMPLATE","needLink","path","curr","ERROR_REGEX","CartoParser","parse_env","ruleset","RESERVED_VARIABLES","validation_data","frames","Parser","extractErrorLine","defs","tree","Reference","setData","default_reference","latest","existing","mapDef","symbolizers","definitions","toList","elements","splice","cartocss_reference","rules","_checkValidType","inheritDefinitions","sortStyles","toXML","constructor","_checkValidColor","expectedArguments","rgb","hsl","rgba","hsla","parsedErrors","matchedError","_colorsFromRule","rule","searchRecursiveByType","Color","_varsFromRule","Field","_extract","extractVariables","columnList","filter_key","filters","colorsUsed","opt","rgbToHex","colorsUsedForLegend","getDefaultRules","imageFillRule","variablesUsed","rulesMap","attachment","getRuleByName","ruleName","_rulesByName","CHANGE_READY","onQueryGeometryAndSchemaReady","CHANGE_STATUS","saveDefaultStylesIfStillRelevant","applyStylesAndSave","styleTypeApplied","haveDifferentSchema","hasDifferentSchemaThan","getColumnsUsedForStyle","getColorsFromRange","isAutoStyleActive","previousCartoCSS","VIEWING_MODE","DRAWING_FEATURE_MODE","EDITING_FEATURE_MODE","MapMode","_isMode","_onNodeGeometryChange","matchArg","haystack","argMatch","argName","argValue","findArg","optionalMatch","optionalArg","cleanRoute","optionalArgName","fragment","populateRoute","ROUTE_LAYERS","ROUTE_WIDGETS","ROUTE_SETTINGS","BASE_LAYER_ROUTE","ROUTE_WIDGET","ROUTE_BASEMAP","ROUTE_LAYER_DATA_TAB","ROUTE_LAYER_ANALYSES_TAB","ROUTE_LAYER_STYLE_TAB","ROUTE_LAYER_POPUPS_TAB","ROUTE_LAYER_LEGENDS_TAB","ROUTE_MODAL","ROUTE_ADD_POINT","ROUTE_ADD_LINE","ROUTE_ADD_POLYGON","EDIT_FEATURE","ROUTES","previousRoute","UNSTORABLE_ROUTES","generateRoute","appRouter","_routeToRegExp","_onChangeRoute","_handleModalsRoute","_handleAnalysesRoute","_handleWidgetRoute","getRouter","goBack","back","navigate","getPath","saveCurrentRoute","canBeSaved","regex","addPoint","_addFeature","addLine","addPolygon","metersPerDistance","meters","NOTIFICATION_TEMPLATE","ERROR_NOTIFICATION_TEMPLATE","_toggleVisErrorNotification","_showVisErrorNotification","_hideVisErrorNotification","_getNotificationAttrs","_period","ADD_NOTIFICATION_ID","NOTIFICATION_STATUS","updating","added","replaced","widgetsCollection","_showAddNotification","_showReplaceNotification","_showRemoveNotification","_showErrorNotification","_showLoadingNotification","_showUpdatingNotification","_isAbortion","statusText"],"mappings":";AAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAQ,oBAAoB;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yBAAiB,4BAA4B;AAC7C;AACA;AACA,0BAAkB,2BAA2B;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAgB,uBAAuB;AACvC;;;AAGA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACtJA,IAAIA,WAAWC,mBAAOA,CAAC,qDAAR,CAAf;;AAEA,IAAIC,6BAA6BF,SAASG,UAAT,CAAoBC,MAApB,CAA2B;AAC1DC,SAAO,eAAUC,KAAV,EAAiBC,IAAjB,EAAuB;AAC5B,WAAO,IAAIP,SAASQ,KAAb,CAAmBF,KAAnB,EAA0BC,IAA1B,CAAP;AACD,GAHyD;;AAK1DE,YAAU,kBAAUC,EAAV,EAAc;AACtB,WAAO,KAAKC,SAAL,CAAe,EAAED,IAAIA,EAAN,EAAf,CAAP;AACD,GAPyD;;AAS1DE,cAAY,oBAAUC,IAAV,EAAgB;AAC1B,WAAO,KAAKF,SAAL,CAAe,EAAEE,MAAMA,IAAR,EAAf,CAAP;AACD;AAXyD,CAA3B,CAAjC;;AAcA,IAAIC,mBAAoB,YAAY;AAClC,MAAIC,cAAc,KAAlB,CADkC,CACT;AACzB,MAAIC,aAAa,IAAId,0BAAJ,EAAjB;;AAEA,WAASe,KAAT,CAAeV,IAAf,EAAqB;AACnBQ,kBAAc,IAAd;AACD;;AAED,SAAO;AACLE,UAAM,cAAUV,IAAV,EAAgB;AACpBU,YAAKV,IAAL;AACA;AACA,WAAKW,UAAL,GAAkB,EAAlB;AACD,KALI;;AAOL;AACAC,SAAK,eAAY;AACf,UAAIC,KAAJ,EAAwB,EAGvB;AACF,KAbI;;AAeLC,eAAW,mBAAUR,IAAV,EAAgB;AACzB,UAAI,KAAKK,UAAL,CAAgBI,cAAhB,CAA+BT,IAA/B,CAAJ,EAA0C;AACxC,eAAO,IAAP;AACD;;AAED,aAAOG,WAAWJ,UAAX,CAAsBC,IAAtB,CAAP;AACD,KArBI;;AAuBLU,mBAAe,yBAAY;AACzB,aAAOP,UAAP;AACD,KAzBI;;AA2BLQ,qBAAiB,yBAAUnB,KAAV,EAAiB;AAChC,aAAOW,WAAWS,GAAX,CAAepB,KAAf,CAAP;AACD,KA7BI;;AA+BLqB,qBAAiB,yBAAUpB,KAAV,EAAiB;AAChC,UAAIqB,eAAe,KAAKN,SAAL,CAAef,MAAMO,IAArB,CAAnB;AACA,aAAOc,gBAAgBX,WAAWY,GAAX,CAAetB,KAAf,CAAvB;AACD,KAlCI;;AAoCLuB,wBAAoB,4BAAUxB,KAAV,EAAiB;AACnC,UAAIsB,eAAe,KAAKH,eAAL,CAAqBnB,KAArB,CAAnB;AACA,aAAOW,WAAWc,MAAX,CAAkBH,YAAlB,CAAP;AACD,KAvCI;;AAyCLI,kBAAc,sBAAUlB,IAAV,EAAgB;AAC5B,UAAIR,QAAQ,KAAKgB,SAAL,CAAeR,IAAf,CAAZ;AACA,aAAO,KAAKgB,kBAAL,CAAwBxB,KAAxB,CAAP;AACD,KA5CI;;AA8CL2B,gBAAY,oBAAUnB,IAAV,EAAgB;AAC1B,WAAKK,UAAL,CAAgBL,IAAhB,IAAwB,IAAxB;AACD,KAhDI;;AAkDLoB,kBAAc,sBAAUpB,IAAV,EAAgB;AAC5B,aAAO,KAAKK,UAAL,CAAgBL,IAAhB,CAAP;AACD;AApDI,GAAP;AAsDD,CA9DsB,EAAvB;;AAgEAqB,OAAOC,OAAP,GAAiBrB,gBAAjB,C;;;;;;;;;;;;;;AChFA,IAAIsB,IAAInC,mBAAOA,CAAC,2DAAR,CAAR;AACA,IAAIoC,WAAWpC,mBAAOA,CAAC,8GAAR,CAAf;;AAEA,IAAIqC,8BAA8BF,EAAEG,QAAF,CAAW,oDAAX,CAAlC;AACA,IAAIC,sBAAsB,wBAA1B;;AAEA,IAAIC,wBAAwB;AAC1BC,SAAO,eAAUC,IAAV,EAAgB;AACrB;AACA;AACA,SAAKC,eAAL,GAAuBJ,sBAAsBG,KAAKE,GAAlD;AACD,GALyB;;AAO1BC,2BAAyB,mCAAY;AACnC,QAAIC,oBAAoB;AACtBC,cAAQ,SADc;AAEtBC,YAAMC,GAAG,gCAAH,CAFgB;AAGtBC,gBAAU,IAHY;AAItBC,aAAOf,SAASgB;AAJM,KAAxB;;AAOA,SAAKC,wBAAL,CAA8B,KAAKV,eAAnC,EAAoDG,iBAApD;AACD,GAhByB;;AAkB1BQ,yBAAuB,+BAAUC,MAAV,EAAkB;AACvC,QAAIT,oBAAoB;AACtBC,cAAQ,OADc;AAEtBC,YAAMC,GAAG,mCAAH,EAAwC;AAC5CO,cAAMnB,4BAA4B;AAChCoB,iBAAOR,GAAG,oCAAH;AADyB,SAA5B,CADsC;AAI5CS,eAAO,KAAKC,gBAAL,CAAsBJ,MAAtB;AAJqC,OAAxC,CAFgB;AAQtBL,gBAAU,IARY;AAStBC,aAAOf,SAASgB;AATM,KAAxB;;AAYA,SAAKC,wBAAL,CAA8B,KAAKV,eAAnC,EAAoDG,iBAApD;AACD,GAhCyB;;AAkC1Ba,oBAAkB,0BAAUJ,MAAV,EAAkB;AAClC,WAAOpB,EAAEyB,GAAF,CAAML,MAAN,EAAc,UAAUM,GAAV,EAAe;AAClC,aAAOA,IAAIC,OAAX;AACD,KAFM,EAEJ,IAFI,EAEEC,IAFF,CAEO,IAFP,CAAP;AAGD,GAtCyB;;AAwC1BV,4BAA0B,kCAAUW,cAAV,EAA0BlB,iBAA1B,EAA6C;AACrE,QAAIpB,eAAe,KAAKuC,gBAAL,CAAsBD,cAAtB,CAAnB;AACA,QAAItC,YAAJ,EAAkB;AAChBA,mBAAawC,GAAb,CAAiBpB,iBAAjB;AACD,KAFD,MAEO;AACL,WAAKqB,gBAAL,CAAsBH,cAAtB,EAAsClB,iBAAtC;AACD;AACF,GA/CyB;;AAiD1BqB,oBAAkB,0BAAUH,cAAV,EAA0BlB,iBAA1B,EAA6C;AAC7DA,wBAAoBX,EAAEhC,MAAF,CAAS;AAC3BM,UAAIuD;AADuB,KAAT,EAEjBlB,iBAFiB,CAApB;AAGAV,aAASX,eAAT,CAAyBqB,iBAAzB;AACD,GAtDyB;;AAwD1BmB,oBAAkB,0BAAUD,cAAV,EAA0B;AAC1C,WAAO5B,SAASb,eAAT,CAAyByC,cAAzB,CAAP;AACD;AA1DyB,CAA5B;;AA6DA/B,OAAOC,OAAP,GAAiBM,qBAAjB,C;;;;;;;;;;;;;;ACnEA,IAAI4B,WAAWpE,mBAAOA,CAAC,iFAAR,CAAf;AACA,IAAIsC,WAAWtC,mBAAOA,CAAC,qGAAR,CAAf;AACA,IAAIqE,oBAAoBrE,mBAAOA,CAAC,gGAAR,CAAxB;;AAEA,IAAIsE,gBAAgB,CAClB,cADkB,EAElB,cAFkB,CAApB;;AAKArC,OAAOC,OAAP,GAAiBkC,SAASjE,MAAT,CAAgB;AAC/BoE,UAAQ;AACN,uBAAmB;AADb,GADuB;;AAK/BC,cAAY,oBAAUlE,IAAV,EAAgB;AAC1B+D,sBAAkB/D,IAAlB,EAAwBgE,aAAxB,EAAuC,IAAvC;;AAEA,SAAKG,UAAL;AACD,GAT8B;;AAW/BC,UAAQ,kBAAY;AAClB,SAAKC,GAAL,CAASC,IAAT,CAActC,SAAS;AACrBuC,gBAAU,KAAKC,WAAL;AADW,KAAT,CAAd;;AAIA,WAAO,IAAP;AACD,GAjB8B;;AAmB/BL,cAAY,sBAAY;AACtB,SAAKM,QAAL,CAAc,KAAKC,aAAnB,EAAkC,gBAAlC,EAAoD,KAAKN,MAAzD;AACD,GArB8B;;AAuB/BI,eAAa,uBAAY;AACvB,WAAO,KAAKE,aAAL,CAAmBxD,GAAnB,CAAuB,SAAvB,CAAP;AACD,GAzB8B;;AA2B/ByD,YAAU,oBAAY;AACpB,QAAI,KAAKH,WAAL,EAAJ,EAAwB;;AAExB,SAAKI,aAAL;AACD;AA/B8B,CAAhB,CAAjB,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;;;;ACbA,IAAId,WAAWpE,mBAAOA,CAAC,iFAAR,CAAf;AACA,IAAIoC,WAAWpC,mBAAOA,CAAC,8GAAR,CAAf;AACA,IAAImF,eAAenF,mBAAOA,CAAC,8FAAR,CAAnB;AACA,IAAIoF,mBAAmBpF,mBAAOA,CAAC,mHAAR,CAAvB;AACA,IAAIqF,sBAAsBrF,mBAAOA,CAAC,yHAAR,CAA1B;AACA,IAAIsF,6BAA6BtF,mBAAOA,CAAC,qIAAR,CAAjC;;AAEA;;;;;AAKA,IAAIuF,cAAc;AAChBC,WAASxF,mBAAOA,CAAC,2IAAR,CADO;AAEhB0D,SAAO1D,mBAAOA,CAAC,yIAAR,CAFS;AAGhByF,WAASzF,mBAAOA,CAAC,6IAAR,CAHO;AAIhB0F,WAAS1F,mBAAOA,CAAC,2IAAR;AAJO,CAAlB;;AAOAiC,OAAOC,OAAP,GAAiBkC,SAASjE,MAAT,CAAgB;AAC/BqE,cAAY,oBAAUlE,IAAV,EAAgB;AAC1B,QAAI,CAACA,KAAKqF,SAAV,EAAqB,MAAM,IAAIC,KAAJ,CAAU,uBAAV,CAAN;AACrB,QAAI,CAACtF,KAAKuF,WAAV,EAAuB,MAAM,IAAID,KAAJ,CAAU,yBAAV,CAAN;AACvB,QAAI,CAACtF,KAAKwF,MAAV,EAAkB,MAAM,IAAIF,KAAJ,CAAU,oBAAV,CAAN;AAClB,QAAI,CAACtF,KAAKyF,WAAV,EAAuB,MAAM,IAAIH,KAAJ,CAAU,yBAAV,CAAN;;AAEvB,SAAKI,UAAL,GAAkB1F,KAAKqF,SAAvB;AACA,SAAKM,YAAL,GAAoB3F,KAAKuF,WAAzB;AACA,SAAKK,OAAL,GAAe5F,KAAKwF,MAApB;AACA,SAAKK,YAAL,GAAoB7F,KAAKyF,WAAzB;AACA,SAAKK,yBAAL,GAAiC9F,KAAK+F,wBAAtC;;AAEA,SAAKC,aAAL,GAAqBlE,SAASX,eAAT,CAAyB,EAAzB,CAArB;;AAEA,SAAKgD,UAAL;AACD,GAhB8B;;AAkB/BA,cAAY,sBAAY;AACtB,SAAK0B,YAAL,CAAkBI,EAAlB,CAAqB,QAArB,EAA+B,KAAKC,kBAApC,EAAwD,IAAxD;AACA,SAAKL,YAAL,CAAkBI,EAAlB,CAAqB,QAArB,EAA+B,KAAKE,KAApC,EAA2C,IAA3C;AACA,SAAKH,aAAL,CAAmBC,EAAnB,CAAsB,oBAAtB,EAA4C,KAAKG,aAAjD,EAAgE,IAAhE;AACA,SAAKJ,aAAL,CAAmBC,EAAnB,CAAsB,qBAAtB,EAA6C,KAAKI,cAAlD,EAAkE,IAAlE;AACA,SAAKC,iBAAL,CAAuB,KAAKT,YAA5B;AACA,SAAKS,iBAAL,CAAuB,KAAKN,aAA5B;AACD,GAzB8B;;AA2B/BI,iBAAe,yBAAY;AACzB,SAAKG,OAAL,CAAa,QAAb,EAAuB,KAAKV,YAA5B,EAA0C,IAA1C;AACA,SAAKA,YAAL,CAAkBW,KAAlB;AACA,SAAKL,KAAL;AACD,GA/B8B;;AAiC/BE,kBAAgB,wBAAUI,MAAV,EAAkB;AAChC,QAAIA,WAAW,aAAf,EAA8B;AAC5B,WAAKC,gBAAL;AACD,KAFD,MAEO,IAAID,WAAW,YAAf,EAA6B;AAClC,WAAKE,gBAAL;AACD,KAFM,MAEA,IAAIF,WAAW,YAAf,EAA6B;AAClC,WAAKG,kBAAL;AACD,KAFM,MAEA,IAAIH,WAAW,eAAf,EAAgC;AACrC,WAAKI,mBAAL;AACD;AACF,GA3C8B;;AA6C/BC,cAAY,sBAAY;AACtB,QAAIrE,SAAS,SAAb;AACA,QAAIsE,SAAS,KAAKlB,YAAL,CAAkBmB,SAAlB,EAAb;AACA,QAAIC,YAAY,KAAKpB,YAAL,CAAkBqB,YAAlB,EAAhB;AACA,QAAIC,WAAW,KAAKtB,YAAL,CAAkBuB,WAAlB,EAAf;;AAEA,QAAIL,MAAJ,EAAY;AACVtE,eAAS,OAAT;AACD,KAFD,MAEO,IAAIwE,aAAa,CAACE,QAAlB,EAA4B;AACjC1E,eAAS,SAAT;AACD,KAFM,MAEA,IAAIwE,aAAaE,QAAjB,EAA2B;AAChC1E,eAAS,SAAT;AACD;;AAED,WAAOA,MAAP;AACD,GA5D8B;;AA8D/B4E,YAAU,oBAAY;AACpB,QAAIC,SAAS,KAAKzB,YAAL,CAAkB3E,GAAlB,CAAsB,QAAtB,CAAb;AACA,QAAIqG,MAAM,KAAK1B,YAAL,CAAkB3E,GAAlB,CAAsB,QAAtB,CAAV;;AAEA,QAAIsG,IAAI;AACNC,YAAM,EADA;AAENC,aAAO,KAAK7B,YAAL,CAAkB3E,GAAlB,CAAsB,OAAtB,CAFD;AAGNyG,gBAAU,EAHJ;AAINC,eAAS,EAJH;AAKNC,YAAM,KAAKhC,YAAL,CAAkB3E,GAAlB,CAAsB,MAAtB,CALA;AAMN6F,cAAQ,KAAKlB,YAAL,CAAkBmB,SAAlB,EANF;AAONC,iBAAW,KAAKpB,YAAL,CAAkBqB,YAAlB,EAPL;AAQNC,gBAAU,KAAKtB,YAAL,CAAkBuB,WAAlB,EARJ;AASNrB,gCAA0B,KAAKD,yBATzB;AAUNgC,4BAAsBP,IAAIO;AAVpB,KAAR;;AAaA;AACA,QAAIR,OAAOhH,IAAX,EAAiB;AACf,UAAIgH,OAAOhH,IAAP,KAAgB,MAApB,EAA4B;AAC1B,YAAIgH,OAAOS,KAAP,CAAaC,MAAb,GAAsB,CAA1B,EAA6B;AAC3BR,YAAEC,IAAF,GAASH,OAAOS,KAAP,CAAaC,MAAb,GAAsB,QAA/B;AACD,SAFD,MAEO;AACLR,YAAEC,IAAF,GAASH,OAAOS,KAAP,CAAaN,IAAtB;AACD;AACF;AACD,UAAIH,OAAOhH,IAAP,KAAgB,KAAhB,IAAyBgH,OAAOhH,IAAP,KAAgB,QAA7C,EAAuD;AACrDkH,UAAEC,IAAF,GAASH,OAAOS,KAAhB;AACD;AACD,UAAIT,OAAOhH,IAAP,KAAgB,SAApB,EAA+B;AAC7BkH,UAAEC,IAAF,GAASH,OAAOS,KAAP,IAAgBT,OAAOS,KAAP,CAAaE,QAA7B,IAAyC,EAAlD;AACD;AACD,UAAIX,OAAOY,YAAP,KAAwB,gBAA5B,EAA8C;AAC5CV,UAAEC,IAAF,GAAS,gBAAT;AACD;AACD,UAAIH,OAAOhH,IAAP,KAAgB,KAApB,EAA2B;AACzBkH,UAAEC,IAAF,GAAS,KAAT;AACD;AACD,UAAIH,OAAOhH,IAAP,KAAgB,aAApB,EAAmC;AACjCkH,UAAEC,IAAF,GAASH,OAAOa,UAAP,IAAqBb,OAAOS,KAArC;AACD;AACF,KAvBD,MAuBO;AACLP,QAAEC,IAAF,GAASF,IAAIa,YAAJ,IAAoBb,IAAIc,aAAxB,IAAyC,QAAlD;AACD;;AAED;AACAb,MAAEI,OAAF,GAAYN,OAAOY,YAAnB;;AAEA;AACA,QAAI,KAAKrC,YAAL,CAAkB3E,GAAlB,CAAsB,MAAtB,MAAkC,QAAtC,EAAgD;AAC9CsG,QAAEG,QAAF,GAAa,KAAK9B,YAAL,CAAkB3E,GAAlB,CAAsB,QAAtB,EAAgCyG,QAA7C;AACD,KAFD,MAEO;AACLH,QAAEG,QAAF,GAAaW,KAAKC,GAAL,CAAS,CAAT,EAAa1D,aAAa2D,YAAb,CAA0BC,OAA1B,CAAkCjB,EAAEE,KAApC,IAA6C7C,aAAa2D,YAAb,CAA0BR,MAAxE,GAAkF,GAA9F,CAAb;AACD;;AAEDR,MAAEG,QAAF,GAAaH,EAAEG,QAAF,CAAWe,OAAX,CAAmB,CAAnB,CAAb;;AAEA,WAAOlB,CAAP;AACD,GAxH8B;;AA0H/BtB,sBAAoB,8BAAY;AAC9B,QAAIzD,SAAS,KAAKqE,UAAL,EAAb;AACA,QAAI6B,YAAY1D,YAAYxC,MAAZ,CAAhB;AACAkG,cAAUC,IAAV,CAAe,IAAf,EAAqB,KAAK/C,YAA1B,EAAwC,KAAKG,aAA7C,EAA4DvD,MAA5D,EAAoE,KAAK4E,QAAL,EAApE,EAAqF,KAAKvB,yBAA1F;AACD,GA9H8B;;AAgI/Bc,sBAAoB,8BAAY;AAC9B,QAAIiC,UAAU,KAAKhD,YAAL,CAAkB3E,GAAlB,CAAsB,QAAtB,EAAgCiH,UAA9C;AACAW,WAAOC,QAAP,GAAkB,KAAKpD,YAAL,CAAkBzE,GAAlB,CAAsB,UAAtB,IAAoC,WAApC,GAAkD2H,OAApE;AACD,GAnI8B;;AAqI/BlC,oBAAkB,4BAAY;AAC5B,QAAIqC,OAAO,IAAX;AACA,SAAKpD,OAAL,CAAaqD,MAAb,CAAoB,UAAUC,UAAV,EAAsB;AACxC,aAAO,IAAIlE,0BAAJ,CAA+B;AACpCkE,oBAAYA,UADwB;AAEpC7D,mBAAW2D,KAAKtD,UAFoB;AAGpC5F,eAAOkJ,KAAKnD;AAHwB,OAA/B,CAAP;AAKD,KAND;AAOD,GA9I8B;;AAgJ/Ba,oBAAkB,4BAAY;AAC5B,QAAIsC,OAAO,IAAX;AACA,SAAKpD,OAAL,CAAaqD,MAAb,CAAoB,UAAUC,UAAV,EAAsB;AACxC,aAAO,IAAIpE,gBAAJ,CAAqB;AAC1BS,qBAAayD,KAAKrD,YADQ;AAE1BuD,oBAAYA,UAFc;AAG1B9F,eAAO4F,KAAKnD,YAAL,CAAkBsD,QAAlB,EAHmB;AAI1B9D,mBAAW2D,KAAKtD;AAJU,OAArB,CAAP;AAMD,KAPD;AAQD,GA1J8B;;AA4J/BmB,uBAAqB,+BAAY;AAC/B,QAAImC,OAAO,IAAX;AACA,SAAKpD,OAAL,CAAaqD,MAAb,CAAoB,UAAUC,UAAV,EAAsB;AACxC,aAAO,IAAInE,mBAAJ,CAAwB;AAC7BmE,oBAAYA,UADiB;AAE7B/B,kBAAU6B,KAAKnD,YAAL,CAAkBuB,WAAlB,EAFmB;AAG7B/B,mBAAW2D,KAAKtD;AAHa,OAAxB,CAAP;AAKD,KAND;AAOD;AArK8B,CAAhB,CAAjB,C;;;;;;;;;;;ACnBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;;AAEA,qBAAqB;AACrB;AACA,yEAAyE,yBAAyB;AAClG;AACA,EAAE,OAAO;AACT;AACA,4EAA4E,2BAA2B;AACvG;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;;;;ACpBA,IAAIjG,WAAWC,mBAAOA,CAAC,qDAAR,CAAf;AACA,IAAImC,IAAInC,mBAAOA,CAAC,2DAAR,CAAR;AACA,IAAI0J,iBAAiB1J,mBAAOA,CAAC,qIAAR,CAArB;AACA,IAAI2J,sBAAsB3J,mBAAOA,CAAC,uIAAR,CAA1B;AACA,IAAI4J,eAAe5J,mBAAOA,CAAC,kIAAR,CAAnB;;AAEA;;;;;;;;AAQA,IAAI6J,qBAAqB,SAArBA,kBAAqB,CAAUC,OAAV,EAAmB;AAC1C,OAAKA,OAAL,GAAeA,WAAW,EAA1B;AACA,OAAKC,UAAL,GAAkB,EAAlB;AACA,OAAKvF,UAAL,CAAgB,KAAKsF,OAArB;AACD,CAJD;;AAMAD,mBAAmBG,SAAnB,GAA+B;AAC7BxF,cAAY,oBAAUlE,IAAV,EAAgB;AAC1B,QAAI,CAACA,KAAKqF,SAAV,EAAqB,MAAM,IAAIC,KAAJ,CAAU,uBAAV,CAAN;AACrB,QAAI,CAACtF,KAAKuF,WAAV,EAAuB,MAAM,IAAID,KAAJ,CAAU,yBAAV,CAAN;AACvB,QAAI,CAACtF,KAAKwF,MAAV,EAAkB,MAAM,IAAIF,KAAJ,CAAU,oBAAV,CAAN;AAClB,QAAI,CAACtF,KAAK2J,YAAV,EAAwB,MAAM,IAAIrE,KAAJ,CAAU,0BAAV,CAAN;;AAExB,SAAKI,UAAL,GAAkB1F,KAAKqF,SAAvB;AACA,SAAKM,YAAL,GAAoB3F,KAAKuF,WAAzB;AACA,SAAKqE,UAAL,GAAkB5J,KAAK6J,SAAvB;AACA,SAAKjE,OAAL,GAAe5F,KAAKwF,MAApB;AACA,SAAKsE,MAAL,GAAc9J,KAAK2J,YAAnB;;AAEA,SAAKxF,UAAL;AACD,GAd4B;;AAgB7B4F,WAAS,iBAAU3H,IAAV,EAAgB;AACvB,SAAKqH,UAAL,CAAgBrH,KAAKE,GAArB,IAA4BF,IAA5B;AACD,GAlB4B;;AAoB7B4H,cAAY,oBAAU5H,IAAV,EAAgB;AAC1B,WAAO,KAAKqH,UAAL,CAAgBrH,KAAKE,GAArB,CAAP;AACD,GAtB4B;;AAwB7B2H,UAAQ,kBAAY;AAClB,SAAKH,MAAL,CAAYI,aAAZ;AACD,GA1B4B;;AA4B7BC,WAAS,mBAAY;AACnB,SAAKL,MAAL,CAAYM,YAAZ;AACD,GA9B4B;;AAgC7BC,gBAAc,sBAAUvK,KAAV,EAAiB;AAC7B,SAAKgK,MAAL,CAAYQ,gBAAZ,CAA6BxK,KAA7B;AACD,GAlC4B;;AAoC7ByK,WAAS,mBAAY;AACnB,SAAKT,MAAL,CAAYlJ,GAAZ,CAAgB,IAAhB,EAAsB,IAAtB,EAA4B,IAA5B;AACD,GAtC4B;;AAwC7BuD,cAAY,sBAAY;AACtB,SAAK2F,MAAL,CAAY7D,EAAZ,CAAe,aAAf,EAA8B,KAAKuE,UAAnC,EAA+C,IAA/C;AACA,SAAKV,MAAL,CAAY7D,EAAZ,CAAe,oBAAf,EAAqC,KAAKwE,WAA1C,EAAuD,IAAvD;AACD,GA3C4B;;AA6C7BD,cAAY,oBAAUE,CAAV,EAAa;AACvB,QAAIC,iBAAiB,IAAIvB,cAAJ,CAAmB;AACtC7D,mBAAa,KAAKI,YADoB;AAEtCI,gCAA0B,KAAK+D,MAAL,CAAY5I,GAAZ,CAAgB,0BAAhB,CAFY;AAGtCsE,cAAQ,KAAKI,OAHyB;AAItCH,mBAAaiF,CAJyB;AAKtCrF,iBAAW,KAAKK;AALsB,KAAnB,CAArB;;AAQAiF,mBAAe1E,EAAf,CAAkB,QAAlB,EAA4B,KAAK2E,aAAjC,EAAgD,IAAhD;AACA,SAAKb,OAAL,CAAaY,cAAb;AACA,SAAKV,MAAL;AACD,GAzD4B;;AA2D7BQ,eAAa,qBAAUjD,CAAV,EAAa;AACxB,QAAIA,CAAJ,EAAO;AACL,WAAKqD,eAAL,CAAqBrD,CAArB;AACD;AACF,GA/D4B;;AAiE7BsD,kBAAgB,wBAAUC,KAAV,EAAiB;AAC/B,QAAIA,KAAJ,EAAW;AACT,WAAKF,eAAL,CAAqB;AACnBvK,cAAM,MADa;AAEnByH,eAAOgD,KAFY;AAGnBC,oBAAY,KAAKpB;AAHE,OAArB;AAKD;AACF,GAzE4B;;AA2E7BiB,mBAAiB,yBAAUI,UAAV,EAAsB;AACrC,QAAI,KAAKnB,MAAL,CAAYoB,YAAZ,EAAJ,EAAgC;AAC9B,WAAKC,gBAAL;AACD,KAFD,MAEO;AACL,WAAKC,aAAL;AACA,aAAO,KAAP;AACD;;AAED,QAAI7D,MAAM,IAAI+B,YAAJ,CAAiB,EAAjB,EAAqB;AAC7BhC,cAAQ2D,UADqB;AAE7B5F,iBAAW,KAAKK,UAFa;AAG7BH,mBAAa,KAAKI;AAHW,KAArB,CAAV;;AAMA,SAAKmE,MAAL,CAAYuB,aAAZ,CAA0B9D,GAA1B;AACD,GA1F4B;;AA4F7B6D,iBAAe,yBAAY;AACzB,QAAI,CAAC,KAAKE,YAAV,EAAwB;AACtB,UAAIlJ,OAAO,IAAIiH,mBAAJ,CAAwB;AACjC9D,qBAAa,KAAKI,YADe;AAEjCN,mBAAW,KAAKK;AAFiB,OAAxB,CAAX;;AAKA,WAAKqE,OAAL,CAAa3H,IAAb;AACA,WAAKkJ,YAAL,GAAoBlJ,IAApB;AACD;AACF,GAtG4B;;AAwG7B+I,oBAAkB,4BAAY;AAC5B,QAAI/I,OAAO,KAAKkJ,YAAhB;AACA,QAAIlJ,IAAJ,EAAU;AACRA,WAAK+D,KAAL;AACA,WAAK6D,UAAL,CAAgB5H,IAAhB;AACA,aAAO,KAAKkJ,YAAZ;AACD;AACF,GA/G4B;;AAiH7BV,iBAAe,uBAAU9K,KAAV,EAAiBsC,IAAjB,EAAuB;AACpC,SAAK0H,MAAL,CAAYQ,gBAAZ,CAA6BxK,KAA7B;AACA,SAAKkK,UAAL,CAAgB5H,IAAhB;AACD;AApH4B,CAA/B;;AAuHA;AACAP,EAAEhC,MAAF,CAAS0J,mBAAmBG,SAA5B,EAAuCjK,SAAS8L,MAAhD,EAAwD;AACtDhK,UAAQ,kBAAY;AAClB,SAAKiK,aAAL;AACD;AAHqD,CAAxD;;AAMA,IAAIC,UAAW,YAAY;AACzB,MAAIjL,cAAc,KAAlB;AACA,MAAIkL,QAAJ;;AAEA,SAAO;AACLhL,UAAM,cAAUV,IAAV,EAAgB;AACpB,UAAI,CAACQ,WAAL,EAAkB;AAChBkL,mBAAW,IAAInC,kBAAJ,CAAuBvJ,IAAvB,CAAX;AACD;AACD,aAAO0L,QAAP;AACD;AANI,GAAP;AAQD,CAZa,EAAd;;AAcA/J,OAAOC,OAAP,GAAiB6J,OAAjB,C;;;;;;;;;;;;;;AChKA,IAAIzJ,WAAWtC,mBAAOA,CAAC,uHAAR,CAAf;;AAEA,SAASiM,SAAT,GAAsB;AACpB,SAAO,aAAP;AACD;;AAED,SAASC,SAAT,GAAsB;AACpB,SAAOjJ,GAAG,8DAAH,CAAP;AACD;;AAED,SAASkJ,WAAT,GAAwB;AACtB,SAAO,IAAP;AACD;;AAED,SAAS3F,kBAAT,CAA6BxD,IAA7B,EAAmC;AACjC,MAAIoJ,OAAO;AACTpJ,UAAMA,IADG;AAETD,YAAQsJ,OAFC;AAGTnJ,cAAUiJ,aAHD;AAITG,YAAQJ,WAJC;AAKTnF,YAAQkF;AALC,GAAX;;AAQA3F,gBAAciG,MAAd,CAAqBH,IAArB;AACD;;AAED,IAAI9F,aAAJ;AACA,IAAI+F,OAAJ;;AAEApK,OAAOC,OAAP,GAAiB,UAAU9B,KAAV,EAAiBsB,YAAjB,EAA+BqB,MAA/B,EAAuCC,IAAvC,EAA6CwJ,WAA7C,EAA0D;AACzElG,kBAAgB5E,YAAhB;AACA2K,YAAUtJ,MAAV;AACAyD,qBAAmBlE,SAASU,IAAT,CAAnB;AACD,CAJD,C;;;;;;;;;;;AC7BA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,0FAA0F,aAAa;AACvG;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,C;;;;;;;;;;;;;;ACpBA,IAAIV,WAAWtC,mBAAOA,CAAC,yHAAR,CAAf;;AAEA,SAASiM,SAAT,GAAsB;AACpB,SAAO,KAAP;AACD;;AAED,SAASC,SAAT,GAAsB;AACpB,SAAO,KAAP;AACD;;AAED,SAASC,WAAT,GAAwB;AACtB,MAAInE,QAAQoC,OAAO5I,GAAP,CAAW,OAAX,CAAZ;AACA,MAAI2G,OAAOiC,OAAO5I,GAAP,CAAW,MAAX,CAAX;AACA,SAAOwG,UAAU,WAAV,IAAyBG,SAAS,QAAzC;AACD;;AAED,SAAS3B,kBAAT,CAA6BxD,IAA7B,EAAmC;AACjC,MAAIoJ,OAAO;AACTpJ,UAAMA,IADG;AAETD,YAAQsJ,OAFC;AAGTnJ,cAAUiJ,aAHD;AAITG,YAAQJ,WAJC;AAKTnF,YAAQkF;AALC,GAAX;;AAQA3F,gBAAciG,MAAd,CAAqBH,IAArB;AACD;;AAED,IAAIhC,MAAJ;AACA,IAAI9D,aAAJ;AACA,IAAI+F,OAAJ;;AAEApK,OAAOC,OAAP,GAAiB,UAAU9B,KAAV,EAAiBsB,YAAjB,EAA+BqB,MAA/B,EAAuCC,IAAvC,EAA6CwJ,WAA7C,EAA0D;AACzEpC,WAAShK,KAAT;AACAkG,kBAAgB5E,YAAhB;AACA2K,YAAUtJ,MAAV;AACAyD,qBAAmBlE,SAASU,IAAT,CAAnB;AACD,CALD,C;;;;;;;;;;;AChCA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,C;;;;;;;;;;;;;;ACxBA,IAAIV,WAAWtC,mBAAOA,CAAC,yHAAR,CAAf;;AAEA,SAASiM,SAAT,GAAsB;AACpB,MAAI/D,UAAUkC,OAAO5I,GAAP,CAAW,QAAX,EAAqBgH,YAAnC;AACA,MAAIJ,uBAAuBgC,OAAO5I,GAAP,CAAW,QAAX,EAAqB4G,oBAAhD;;AAEA,MAAIqE,YAAJ,EAAkB;AAChB,QAAIvE,WAAWA,YAAY,gBAA3B,EAA6C;AAC3C,aAAO,YAAP;AACD,KAFD,MAEO,IAAIE,yBAAyB,CAA7B,EAAgC;AACrC,aAAO,YAAP;AACD;AACF;;AAED,SAAO,KAAP;AACD;;AAED,SAAS8D,SAAT,GAAsB;AACpB,MAAIhE,UAAUkC,OAAO5I,GAAP,CAAW,QAAX,EAAqBgH,YAAnC;AACA,MAAIJ,uBAAuBgC,OAAO5I,GAAP,CAAW,QAAX,EAAqB4G,oBAAhD;;AAEA,MAAIqE,YAAJ,EAAkB;AAChB,QAAIvE,WAAWA,YAAY,gBAA3B,EAA6C;AAC3C,aAAOjF,GAAG,8DAAH,CAAP;AACD,KAFD,MAEO,IAAImF,yBAAyB,CAA7B,EAAgC;AACrC,aAAOnF,GAAG,8DAAH,CAAP;AACD;AACF;;AAED,SAAO,KAAP;AACD;;AAED,SAASkJ,WAAT,GAAwB;AACtB,SAAO,IAAP;AACD;;AAED,SAAS3F,kBAAT,CAA6BxD,IAA7B,EAAmC;AACjC,MAAIoJ,OAAO;AACTpJ,UAAMA,IADG;AAETD,YAAQsJ,OAFC;AAGTnJ,cAAUiJ,aAHD;AAITG,YAAQJ,WAJC;AAKTnF,YAAQkF;AALC,GAAX;;AAQA3F,gBAAciG,MAAd,CAAqBH,IAArB;AACD;;AAED,IAAIhC,MAAJ;AACA,IAAI9D,aAAJ;AACA,IAAI+F,OAAJ;AACA,IAAII,YAAJ;;AAEAxK,OAAOC,OAAP,GAAiB,UAAU9B,KAAV,EAAiBsB,YAAjB,EAA+BqB,MAA/B,EAAuCC,IAAvC,EAA6CwJ,WAA7C,EAA0D;AACzEpC,WAAShK,KAAT;AACAkG,kBAAgB5E,YAAhB;AACA2K,YAAUtJ,MAAV;AACA0J,iBAAeD,WAAf;AACAhG,qBAAmBlE,SAASU,IAAT,CAAnB;AACD,CAND,C;;;;;;;;;;;ACrDA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;;;;ACtBA,IAAIV,WAAWtC,mBAAOA,CAAC,2HAAR,CAAf;;AAEA,SAASiM,SAAT,GAAsB;AACpB,SAAO,eAAP;AACD;;AAED,SAASC,SAAT,GAAsB;AACpB,SAAOjJ,GAAG,8DAAH,CAAP;AACD;;AAED,SAASkJ,WAAT,GAAwB;AACtB,SAAO,IAAP;AACD;;AAED,SAAS3F,kBAAT,CAA6BxD,IAA7B,EAAmC;AACjC,MAAIoJ,OAAO;AACTpJ,UAAMA,IADG;AAETD,YAAQsJ,OAFC;AAGTnJ,cAAUiJ,aAHD;AAITG,YAAQJ,WAJC;AAKTnF,YAAQkF;AALC,GAAX;;AAQA3F,gBAAciG,MAAd,CAAqBH,IAArB;AACD;;AAED,IAAI9F,aAAJ;AACA,IAAI+F,OAAJ;;AAEApK,OAAOC,OAAP,GAAiB,UAAU9B,KAAV,EAAiBsB,YAAjB,EAA+BqB,MAA/B,EAAuCC,IAAvC,EAA6CwJ,WAA7C,EAA0D;AACzElG,kBAAgB5E,YAAhB;AACA2K,YAAUtJ,MAAV;AACAyD,qBAAmBlE,SAASU,IAAT,CAAnB;AACD,CAJD,C;;;;;;;;;;;AC7BA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA,C;;;;;;;;;;;ACpBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,EAAE;AACF;AACA,mBAAmB;AACnB;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA,EAAE;AACF;AACA,wBAAwB;AACxB;AACA,iFAAiF,oCAAoC;AACrH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA,YAAY;AACZ;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;AChEA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA,wFAAwF,sGAAsG;AAC9L;AACA,EAAE;AACF;AACA,sBAAsB;AACtB;AACA,kFAAkF,2CAA2C;AAC7H;AACA,EAAE,OAAO;AACT;AACA,kFAAkF,2CAA2C;AAC7H;AACA,EAAE;AACF;AACA,8CAA8C;AAC9C;AACA,kFAAkF,mFAAmF;AACrK;AACA,EAAE,OAAO;AACT;AACA,4BAA4B;AAC5B;AACA,+EAA+E,qDAAqD;AACpI;AACA,EAAE,OAAO;AACT;AACA,8EAA8E,qDAAqD;AACnI;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACpDA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,sDAAsD,WAAW;AACjE;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;AC5BA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,uFAAuF,+BAA+B;AACtH;AACA,0BAA0B;AAC1B;AACA,oFAAoF,yCAAyC;AAC7H;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;A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AClB;AACA,EAAE;AACF;AACA,qBAAqB;AACrB;AACA,EAAE,uBAAuB;AACzB;AACA,EAAE,OAAO;AACT;AACA,EAAE;AACF;AACA;AACA;AACA,kBAAkB;AAClB;AACA,EAAE;AACF;AACA,kBAAkB;AAClB;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;AClCA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA,EAAE;AACF;AACA,qBAAqB;AACrB;AACA,EAAE,uBAAuB;AACzB;AACA,EAAE,OAAO;AACT;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;AC1BA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACbA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,gBAAgB;AAChB;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,iBAAiB;AACnE;AACA,iDAAiD,iBAAiB;AAClE;AACA;AACA;AACA,kDAAkD,iBAAiB;AACnE;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;;;;AC5CA,IAAI3J,WAAWpE,mBAAOA,CAAC,iFAAR,CAAf;AACA,IAAImC,IAAInC,mBAAOA,CAAC,2DAAR,CAAR;AACA,IAAIgP,SAAShP,mBAAOA,CAAC,+CAAR,CAAb;AACA,IAAI2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A,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACbA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;;AAEA,oDAAoD;AACpD;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;ACpBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA,EAAE;AACF;AACA,cAAc;AACd;AACA,EAAE;AACF;AACA,cAAc;AACd;AACA,EAAE;AACF;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;AClCA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA,EAAE;AACF;AACA;AACA;AACA,kBAAkB;AAClB;AACA,EAAE;AACF;AACA,kBAAkB;AAClB;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;AC5BA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACXA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;;AAEA,6BAA6B;AAC7B;AACA,EAAE,+BAA+B;AACjC;AACA;AACA;AACA,GAAG;AACH;AACA,EAAE;;;AAGF;AACA;AACA,C;;;;;;;;;;;ACpBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACpBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACXA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACbA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,cAAc;AACd;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;AChBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA,EAAE;AACF;AACA,iBAAiB;AACjB;AACA,EAAE;AACF;AACA;AACA;AACA,YAAY;AACZ;AACA,EAAE;AACF;AACA,YAAY;AACZ;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACpCA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,eAAe;AACf;AACA,EAAE;AACF;AACA,gBAAgB;AAChB;AACA,EAAE;AACF;AACA,YAAY;AACZ;AACA,EAAE;AACF;AACA,YAAY;AACZ;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;AC9BA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,eAAe;AACf;AACA,EAAE;AACF;AACA,gBAAgB;AAChB;AACA,EAAE;AACF;AACA,YAAY;AACZ;AACA,EAAE;AACF;AACA,YAAY;AACZ;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;AC9BA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,YAAY;AACZ;AACA,EAAE;AACF;AACA,YAAY;AACZ;AACA;AACA;AACA,EAAE;AACF;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;AChCA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,YAAY;AACZ;AACA,EAAE;AACF;AACA,YAAY;AACZ;AACA;AACA;AACA,EAAE;AACF;AACA,aAAa;AACb;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;AC9BA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;;AAEA,gCAAgC;AAChC;AACA,YAAY;AACZ;AACA,EAAE;AACF;AACA,YAAY;AACZ;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA,gCAAgC;AAChC;AACA,YAAY;AACZ;AACA,EAAE;AACF;AACA,YAAY;AACZ;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;ACxCA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;;AAEA,6BAA6B;AAC7B;AACA,EAAE,+BAA+B;AACjC;AACA;AACA;AACA,GAAG;AACH;AACA,EAAE,+BAA+B;AACjC;AACA;AACA;AACA,GAAG;AACH;AACA,EAAE;;;AAGF;AACA;AACA,C;;;;;;;;;;;AC1BA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACXA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;;AAEA,oDAAoD;AACpD;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;ACpBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA,EAAE;AACF;AACA,cAAc;AACd;AACA,EAAE;AACF;AACA,cAAc;AACd;AACA,EAAE;AACF;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;AClCA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA,qDAAqD;AACrD;AACA;AACA,EAAE;AACF;AACA;AACA,qBAAqB;AACrB;AACA;AACA,EAAE;AACF,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;ACpCA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;;AAEA,oDAAoD;AACpD;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA,qDAAqD;AACrD;AACA;AACA,EAAE;AACF;AACA;AACA,qBAAqB;AACrB;AACA;AACA,EAAE;AACF,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;AC1CA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;;AAEA,iBAAiB;AACjB;AACA,EAAE;AACF;AACA,mBAAmB;AACnB;AACA,EAAE;AACF;AACA,kBAAkB;AAClB;AACA,EAAE;AACF;AACA,YAAY;AACZ;AACA,EAAE;AACF;AACA,kBAAkB;AAClB;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;ACxCA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACXA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,4BAA4B;AAC5B;AACA,EAAE;AACF;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,EAAE;AACF;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,EAAE;AACF;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,EAAE;AACF;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACxCA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,gBAAgB;AAChB;AACA,EAAE;AACF;AACA,aAAa;AACb;AACA,EAAE;AACF;AACA,YAAY;AACZ;AACA,EAAE;AACF;AACA,YAAY;AACZ;AACA;AACA;AACA,EAAE;AACF;AACA,iEAAiE,mBAAmB;AACpF;;AAEA;AACA;AACA,C;;;;;;;;;;;AC9BA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;;AAEA,sCAAsC;AACtC;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,EAAE,0BAA0B;AAC5B;AAC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AAc;AACd;AACA,EAAE;AACF;AACA,cAAc;AACd;AACA,EAAE;AACF;AACA,YAAY;AACZ;AACA,EAAE;AACF;AACA,YAAY;AACZ;AACA;AACA;AACA,EAAE;AACF;AACA,iBAAiB;AACjB;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA,yBAAyB;AACzB;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;AClDA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,oBAAoB;AAChF;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACjBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,uBAAuB;AACvB;AACA,EAAE;AACF;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;ACtBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACtBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;;AAEA,sCAAsC;AACtC;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,EAAE,KAAK;AACP;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA,EAAE,EAAE;AACJ;;AAEA;AACA;AACA,C;;;;;;;;;;;AChDA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,WAAW;AACX;AACA;AACA,EAAE;AACF;AACA,aAAa;AACb;AACA,iBAAiB;AACjB;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,EAAE;AACF;AACA,YAAY;AACZ;AACA,EAAE;AACF;AACA,YAAY;AACZ;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,EAAE;AACF;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8F;;;;;;;;;;;AC3BA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,gBAAgB;AAChB;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;;;;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B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACfA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,EAAE;AACF;AACA;AACA;AACA,gBAAgB;AAChB;AACA,EAAE;AACF;AACA,kBAAkB;AAClB;AACA,gBAAgB;AAChB;AACA,EAAE;AACF;AACA,kBAAkB;AAClB;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;ACxCA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA,mBAAmB;AACnB;AACA;AACA;AACA,EAAE,8BAA8B;AAChC;AACA;AACA;AACA,EAAE;AACF;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;ACxCA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,uBAAuB;AACvB;AACA,EAAE,OAAO;AACT;AACA,EAAE;AACF;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;AChCA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,0QAA0Q,6BAA6B,YAAY;;AAEnT;AACA;AACA,C;;;;;;;;;;;ACxBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA,EAAE;AACF,oBAAoB;AACpB;AACA,aAAa;AACb;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;AC1BA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;;AAEA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;ACxBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACfA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACvBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACbA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA,EAAE;AACF,aAAa;AACb;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF,EAAE,EAAE;AACJ;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACxCA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;;AAEA,sBAAsB;AACtB;AACA,YAAY;AACZ;AACA,EAAE;AACF;AACA,YAAY;AACZ;AACA;AACA;AACA,EAAE;AACF;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA,EAAE,EAAE;AACJ;AACA,EAAE,OAAO;AACT;AACA,YAAY;AACZ;AACA,EAAE;AACF;AACA,YAAY;AACZ;AACA;AACA;AACA,EAAE;AACF;AACA,wBAAwB;AACxB;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA,4CAA4C;AAC5C;AACA,YAAY;AACZ;AACA,EAAE;AACF;AACA,YAAY;AACZ;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA,sFAAsF;AACtF;AACA,YAAY;AACZ;AACA,EAAE;AACF;AACA,YAAY;AACZ;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;ACpFA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA,EAAE;AACF;AACA;A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AAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACjBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAA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AArB;AACD;AACF;AApI8B,CAAhB,CAAjB,C;;;;;;;;;;;AC1BA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACbA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA,EAAE,qCAAqC;AACvC;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA,EAAE;AACF;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,qEAAqE,wBAAwB;AAC7F;AACA,EAAE;AACF;AACA,mBAAmB;AACnB;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,qBAAqB;AACrB;AACA,0DAA0D,OAAO,OAAO;AACxE;AACA;AACA;AACA;AACA;AACA,mBAAmB;;AAEnB,EAAE;AACF;AACA,EAAE;AACF;AACA,iCAAiC;AACjC;AACA,gEAAgE,uCAAuC;AACvG;AACA,EAAE;AACF;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;AClHA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACbA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACbA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA,cAAc;AACd;AACA,EAAE,mBAAmB;AACrB;AACA,EAAE,oBAAoB;AACtB;AACA,EAAE,OAAO;AACT;AACA,EAAE;AACF;AACA,wDAAwD;AACxD;AACA;AACA;AACA,EAAE;AACF;AACA,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,0EAA0E;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,4DAA4D;AAC5D;AACA,mEAAmE,aAAa;AAChF;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;AC1DA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA,6JAA6J;AAC7J;AACA,2GAA2G;AAC3G;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,C;;;;;;;;;;;ACrBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA,EAAE;AACF;AACA,gBAAgB;AAChB;AACA;AACA;AACA,qEAAqE,wBAAwB;AAC7F;AACA,EAAE;AACF;AACA,mBAAmB;AACnB;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,qBAAqB;AACrB;AACA,0DAA0D,OAAO,OAAO;AACxE;AACA;AACA;AACA;AACA;AACA,mBAAmB;;AAEnB,EAAE;AACF;AACA,EAAE;AACF;AACA,iCAAiC;AACjC;AACA,gEAAgE,uCAAuC;AACvG;AACA,EAAE;AACF;AACA,EAAE,OAAO;AACT;AACA;AA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OAAO;AACT;AACA,uEAAuE,qBAAqB;AAC5F;AACA,EAAE;AACF;AACA,yBAAyB;AACzB;AACA,EAAE;AACF;AACA,wBAAwB;AACxB;AACA,qEAAqE,qBAAqB;AAC1F;AACA,EAAE;AACF;AACA,yBAAyB;AACzB;AACA,sEAAsE,qBAAqB;AAC3F;AACA,EAAE;AACF;AACA,yBAAyB;AACzB;AACA,sEAAsE,qBAAqB;AAC3F;AACA,EAAE;AACF;AACA,yBAAyB;AACzB;AACA,sEAAsE,qBAAqB;AAC3F;AACA,EAAE;AACF;AACA,8BAA8B;AAC9B;AACA,2EAA2E,qBAAqB;AAChG;AACA,EAAE;AACF;AACA,4BAA4B;AAC5B;AACA,yEAAyE,qBAAqB;AAC9F;AACA,EAAE;AACF;AACA,4BAA4B;AAC5B;AACA,EAAE;AACF;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;ACpEA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA,4EAA4E,yBAAyB;AACrG;AACA,iBAAiB;AACjB;AACA,0EAA0E,WAAW;AACrF;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;ACtEA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;;AAEA,yBAAyB;AACzB;AACA,4BAA4B;AAC5B;AACA,oCAAoC;AACpC;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE,OAAO;AACT;AACA,4EAA4E,eAAe;AAC3F;AACA,EAAE;AACF;AACA,yBAAyB;AACzB;AACA,EAAE;AACF;AACA,wBAAwB;AACxB;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA,yBAAyB;AACzB;AACA,2EAA2E,eAAe;AAC1F;AACA,EAAE;AACF;AACA,yBAAyB;AACzB;AACA;AACA;AACA,EAAE;AACF;AACA,yBAAyB;AACzB;AACA;AACA;AACA,EAAE;AACF;AACA,8BAA8B;AAC9B;AACA,gFAAgF,eAAe;AAC/F;AACA,EAAE;AACF;AACA,4BAA4B;AAC5B;AACA,kBAAkB;AAClB;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA,oCAAoC;AACpC;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA,yCAAyC;AACzC;AACA,EAAE;AACF;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;AC7GA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACjBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,gBAAgB;AAChB;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;AC1BA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA,EAAE,8BAA8B;AAChC;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;ACtBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACbA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;;AAEA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,EAAE,yCAAyC;AAC3C;AACA;AACA;AACA,GAAG;AACH;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA,GAAG;AACH;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;ACjCA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACvBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACxBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACfA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA,sBAAsB;A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C1B;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA,0BAA0B;AAC1B;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;AC1BA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACjBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,EAAE;AACF;AACA,mBAAmB;AACnB;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;AC9BA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,EAAE;AACF;AACA,gBAAgB;AAChB;AACA,EAAE;AACF;AACA,gBAAgB;AAChB;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;AC1BA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;AClBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;AC1CA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;;AAEA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;AChCA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA,EAAE;AACF;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,aAAa;AACb;AACA,EAAE;AACF;AACA,mBAAmB;AACnB;AACA;AACA;AACA,EAAE;AACF;AACA,+BAA+B;AAC/B;AACA,6BAA6B;AAC7B;AACA,EAAE;AACF;AACA,6BAA6B;AAC7B;AACA,EAAE;AACF;AACA,sBAAsB;AACtB;AACA,EAAE;AACF;AACA;AACA;AACA,EAAE;AACF;AACA,4BAA4B;AAC5B;AACA,EAAE;AACF;AACA,qBAAqB;AACrB;AACA,EAAE;AACF;AACA,4BAA4B;AAC5B;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACtEA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACbA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB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;;;;ACjBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA,EAAE;AACF;AACA,uBAAuB;AACvB;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;AChCA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACjBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACjBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACnBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA,EAAE,EAAE;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACxBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACXA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACbA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACjBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,yDAAyD,4CAA4C;AACrG;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;AC1BA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACjBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,kDAAkD,qBAAqB;AACvE;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACfA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACfA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACvBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,qDAAqD,yCAAyC;AAC9F;;AAEA;AACA;AACA,C;;;;;;;;;;;ACbA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;;;;ACvBA,IAAIwmC,eAAelpC,mBAAOA,CAAC,kIAAR,CAAnB;AACA,IAAImpC,yBAAyBnpC,mBAAOA,CAAC,gJAAR,CAA7B;AACA,IAAImc,WAAWnc,mBAAOA,CAAC,gFAAR,CAAf;;AAEA,IAAIopC,mBAAmB,YAAvB;;AAEA,IAAIC,WAA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hB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;ACpBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,OAAO;AACT,4JAA4J;AAC5J,EAAE;AACF;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;AC9BA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,OAAO;AACT,4JAA4J;AAC5J,EAAE;AACF;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;AChCA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACbA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACfA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA,EAAE,OAAO;AACT;AACA,EAAE;AACF;AACA,iBAAiB;AACjB;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;AC1BA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B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AAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;AC9BA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA,uDAAuD,aAAa;AACpE;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA,EAAE;AACF;AACA,kBAAkB;AAClB;AACA,sDAAsD,aAAa;AACnE;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA,OAAO;AACP;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;AChCA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,wBAAwB;AACxB;AACA,EAAE;AACF;AACA,yBAAyB;AACzB;AACA,EAAE;AACF;AACA,wBAAwB;AACxB;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;ACtBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA,uDAAuD,2CAA2C;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACjBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA,mDAAmD,mBAAmB;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACjBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACvBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;AC5BA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;;AAEA,uBAAuB;AACvB;AACA;AACA;AACA,qCAAqC;AACrC;AACA,EAAE;AACF;AACA,sCAAsC;AACtC;AACA,EAAE;AACF;AACA,sCAAsC;AACtC;AACA,EAAE;AACF;AACA,qCAAqC;AACrC;AACA,EAAE;AACF;AACA,EAAE,6BAA6B;AAC/B;AACA;AACA;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA,qBAAqB;AACrB;AACA,EAAE,OAAO;AACT;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;AClDA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,uBAAuB;AACvB;AACA,EAAE;AACF;AACA,uBAAuB;AACvB;AACA,EAAE,OAAO;AACT;AACA,EAAE;AACF;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,uBAAuB;AACvB;AACA,EAAE;AACF;AACA,uBAAuB;AACvB;AACA,EAAE,OAAO;AACT;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;AC1CA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,gBAAgB;AAChB;AACA,EAAE;AACF;AACA;AACA;AACA,gBAAgB;AAChB;AACA,EAAE;AACF;AACA,eAAe;AACf;AA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hB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;AC7BA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;AC3BA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACXA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;;AAEA,uBAAuB;AACvB;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA,gBAAgB;AAChB;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA,oBAAoB;AACpB;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,oBAAoB;AACpB;AACA,EAAE;AACF;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;AC1CA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACbA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACbA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACXA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;;AAEA,uBAAuB;AACvB;AACA,uBAAuB;AACvB;AACA;AACA;AACA,EAAE,OAAO;AACT,sBAAsB;AACtB,EAAE;AACF;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;AC5BA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;;AAEA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA,EAAE;AACF;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,kBAAkB;AAClB;AACA;AACA,EAAE;AACF;AACA;AACA,qBAAqB;AACrB;AACA;AACA,EAAE;AACF,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;AC1DA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,yBAAyB;AACzB;AACA,iBAAiB;AACjB;AACA,EAAE,OAAO;AACT;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA,2BAA2B;AAC3B;AACA,sBAAsB;AACtB;AACA,EAAE,OAAO;AACT;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA,gCAAgC;AAChC;AACA,kBAAkB;AAClB;AACA,EAAE,OAAO;AACT;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA,oBAAoB;AACpB;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;AC5CA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACfA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA,EAAE;AACF;AACA;AACA,qBAAqB;AACrB;AACA;AACA,EAAE;AACF,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,iBAAiB;AACjB;AACA;AACA;AACA,EAAE;AACF;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE,OAAO;AACT;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;AC9DA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACbA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,EAAE;AACF;AACA;AACA,qBAAqB;AACrB;AACA;AACA,EAAE;AACF,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,iBAAiB;AACjB;AACA,iBAAiB;AACjB;AACA,EAAE;AACF;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;ACtCA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;ACxBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,gBAAgB,QAAQ,OAAO;AAC/B;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;AChBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACbA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,EAAE;AACF;AACA;AACA,qBAAqB;AACrB;AACA;AACA,EAAE;AACF,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;AC9BA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,sBAAsB;AACtB;AACA,EAAE,OAAO;AACT;AACA,EAAE;AACF;AACA,sBAAsB;AACtB;AACA,EAAE;AACF;AACA,sBAAsB;AACtB;AACA,EAAE;AACF;AACA,gBAAgB,QAAQ,OAAO;AAC/B;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;AC9BA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,uBAAuB;AACvB;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;ACxBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,gBAAgB;AAChB;AACA,EAAE;AACF;AACA,gBAAgB;AAChB;AACA,EAAE;AACF;AACA,eAAe;AACf;AACA,CAAC,OAAO;AACR;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;ACxBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,EAAE;AACF;AACA;AACA,qBAAqB;AACrB;AACA;AACA,EAAE;AACF,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;AC9BA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACXA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACXA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA,EAAE,QAAQ;AACV;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8G;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7DA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACXA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,iDAAiD;AACjD;AACA,EAAE;AACF;AACA,sBAAsB;AACtB;AACA,0CAA0C;AAC1C;AACA,mBAAmB;AACnB;AACA;AACA;AACA,EAAE;AACF;AACA,mBAAmB;AACnB;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;AClCA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACpBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,2CAA2C;AAC3C;AACA,EAAE;AACF;AACA,6BAA6B;AAC7B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,EAAE;AACF;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH,4BAA4B,oCAAoC;AAChE;AACA,EAAE;AACF;AACA,iCAAiC;AACjC,oIAAoI;AACpI;AACA;AACA,EAAE;AACF;AACA,wBAAwB;AACxB;AACA,uBAAuB;AACvB;AACA,EAAE;AACF;AACA;AACA,GAAG;AACH;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;AC5DA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;;AAEA,2CAA2C;AAC3C;AACA,2BAA2B;AAC3B;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA,EAAE,gCAAgC;AAClC,yEAAyE;AACzE;AACA,EAAE;AACF,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;AClCA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,uBAAuB;AACvB;AACA,EAAE;AACF,2BAA2B;AAC3B,uBAAuB;AACvB;AACA;AACA,EAAE;AACF,UAAU;AACV,wBAAwB;AACxB,2GAA2G;AAC3G;AACA,GAAG;AACH;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;ACzDA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,OAAO;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF,kEAAkE;AAClE,uBAAuB;AACvB;AACA;AACA,EAAE;AACF,UAAU;;AAEV;AACA;AACA,C;;;;;;;;;;;ACzCA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;;AAEA,iCAAiC;AACjC;AACA,sBAAsB;AACtB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,EAAE,2BAA2B;AAC7B,yEAAyE;AACzE;AACA,EAAE;AACF,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;AClCA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA,kBAAkB;AAClB;AACA;AACA,yBAAyB;AACzB;AACA,sBAAsB;AACtB;AACA,EAAE,OAAO;AACT;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA;AACA,mBAAmB;AACnB;AACA,EAAE;AACF;;AAEA;AACA;AACA,C;;;;;;;;;;;AC1BA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACXA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACXA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACTA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA,uCAAuC,WAAW;AAClD;AACA;AACA,0E;;;;;;;;;;;;;;;;;;;;;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5PA,e;;;;;;;;;;;ACAA,e","file":"1.0.0-assets.136/javascripts/builder.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"builder\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([\"./lib/assets/javascripts/builder/editor.js\",\"common_vendor\",\"common\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","var Backbone = require('backbone');\n\nvar AppNotificationsCollection = Backbone.Collection.extend({\n  model: function (attrs, opts) {\n    return new Backbone.Model(attrs, opts);\n  },\n\n  findById: function (id) {\n    return this.findWhere({ id: id });\n  },\n\n  findByType: function (type) {\n    return this.findWhere({ type: type });\n  }\n});\n\nvar AppNotifications = (function () {\n  var initialized = false; // eslint-disable-line\n  var collection = new AppNotificationsCollection();\n\n  function init (opts) {\n    initialized = true;\n  }\n\n  return {\n    init: function (opts) {\n      init(opts);\n      // Types that won't be returned even if present in the collection\n      this.mutedTypes = {};\n    },\n\n    // For testing porposes only\n    off: function () {\n      if (__ENV__ === 'test') {\n        collection.reset();\n        initialized = false;\n      }\n    },\n\n    getByType: function (type) {\n      if (this.mutedTypes.hasOwnProperty(type)) {\n        return null;\n      }\n\n      return collection.findByType(type);\n    },\n\n    getCollection: function () {\n      return collection;\n    },\n\n    getNotification: function (model) {\n      return collection.get(model);\n    },\n\n    addNotification: function (attrs) {\n      var notification = this.getByType(attrs.type);\n      return notification || collection.add(attrs);\n    },\n\n    removeNotification: function (model) {\n      var notification = this.getNotification(model);\n      return collection.remove(notification);\n    },\n\n    removeByType: function (type) {\n      var model = this.getByType(type);\n      return this.removeNotification(model);\n    },\n\n    muteByType: function (type) {\n      this.mutedTypes[type] = true;\n    },\n\n    unmuteByType: function (type) {\n      delete this.mutedTypes[type];\n    }\n  };\n})();\n\nmodule.exports = AppNotifications;\n","var _ = require('underscore');\nvar Notifier = require('builder/components/notifier/notifier');\n\nvar NOTIFICATION_ERROR_TEMPLATE = _.template(\"<span class='u-errorTextColor'><%- title %></span>\");\nvar NOTIFICATION_PREFIX = 'cartocss-notification-';\n\nvar CartoCSSNotifications = {\n  track: function (view) {\n    // In order to not bloat the notification center we will create\n    // only one notification, and update it along the way\n    this._notificationId = NOTIFICATION_PREFIX + view.cid;\n  },\n\n  showSuccessNotification: function () {\n    var notificationAttrs = {\n      status: 'success',\n      info: _t('notifications.cartocss.success'),\n      closable: true,\n      delay: Notifier.DEFAULT_DELAY\n    };\n\n    this._addOrUpdateNotification(this._notificationId, notificationAttrs);\n  },\n\n  showErrorNotification: function (errors) {\n    var notificationAttrs = {\n      status: 'error',\n      info: _t('notifications.cartocss.error.body', {\n        body: NOTIFICATION_ERROR_TEMPLATE({\n          title: _t('notifications.cartocss.error.title')\n        }),\n        error: this._transformErrors(errors)\n      }),\n      closable: true,\n      delay: Notifier.DEFAULT_DELAY\n    };\n\n    this._addOrUpdateNotification(this._notificationId, notificationAttrs);\n  },\n\n  _transformErrors: function (errors) {\n    return _.map(errors, function (err) {\n      return err.message;\n    }, this).join('. ');\n  },\n\n  _addOrUpdateNotification: function (notificationId, notificationAttrs) {\n    var notification = this._getNotification(notificationId);\n    if (notification) {\n      notification.set(notificationAttrs);\n    } else {\n      this._addNotification(notificationId, notificationAttrs);\n    }\n  },\n\n  _addNotification: function (notificationId, notificationAttrs) {\n    notificationAttrs = _.extend({\n      id: notificationId\n    }, notificationAttrs);\n    Notifier.addNotification(notificationAttrs);\n  },\n\n  _getNotification: function (notificationId) {\n    return Notifier.getNotification(notificationId);\n  }\n};\n\nmodule.exports = CartoCSSNotifications;\n","var CoreView = require('backbone/core-view');\nvar template = require('./apply-button.tpl');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'onApplyClick',\n  'overlayModel'\n];\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-apply': '_onClick'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.$el.html(template({\n      disabled: this._isDisabled()\n    }));\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._overlayModel, 'change:visible', this.render);\n  },\n\n  _isDisabled: function () {\n    return this._overlayModel.get('visible');\n  },\n\n  _onClick: function () {\n    if (this._isDisabled()) return;\n\n    this._onApplyClick();\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<button class=\"u-lSpace--xl CDB-Button CDB-Button--primary ' +\n__e( disabled ? 'is-disabled' : '' ) +\n' js-apply\">\\n  <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-small\">' +\n__e( _t(\"editor.infowindow.apply\") ) +\n'</span>\\n</button>\\n';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar Notifier = require('builder/components/notifier/notifier');\nvar UploadConfig = require('builder/config/upload-config');\nvar ErrorDetailsView = require('./error-details-view');\nvar WarningsDetailsView = require('./warnings-details-view');\nvar TwitterImportDetailsDialog = require('./twitter-import-details-view');\n\n/**\n *  Import item within background importer\n *\n */\n\nvar DELEGATIONS = {\n  loading: require('./delegated-import-views/loading'),\n  error: require('./delegated-import-views/failed'),\n  warning: require('./delegated-import-views/warnings'),\n  success: require('./delegated-import-views/success')\n};\n\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    if (!opts.userModel) throw new Error('userModel is required');\n    if (!opts.configModel) throw new Error('configModel is required');\n    if (!opts.modals) throw new Error('modals is required');\n    if (!opts.importModel) throw new Error('importModel is required');\n\n    this._userModel = opts.userModel;\n    this._configModel = opts.configModel;\n    this._modals = opts.modals;\n    this._importModel = opts.importModel;\n    this._showSuccessDetailsButton = opts.showSuccessDetailsButton;\n\n    this._notification = Notifier.addNotification({});\n\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this._importModel.on('change', this.updateNotification, this);\n    this._importModel.on('remove', this.clean, this);\n    this._notification.on('notification:close', this._closeHandler, this);\n    this._notification.on('notification:action', this._actionHandler, this);\n    this.add_related_model(this._importModel);\n    this.add_related_model(this._notification);\n  },\n\n  _closeHandler: function () {\n    this.trigger('remove', this._importModel, this);\n    this._importModel.pause();\n    this.clean();\n  },\n\n  _actionHandler: function (action) {\n    if (action === 'show_errors') {\n      this._showImportError();\n    } else if (action === 'show_stats') {\n      this._showImportStats();\n    } else if (action === 'show_table') {\n      this._showImportDataset();\n    } else if (action === 'show_warnings') {\n      this._showImportWarnings();\n    }\n  },\n\n  _getStatus: function () {\n    var status = 'loading';\n    var failed = this._importModel.hasFailed();\n    var completed = this._importModel.hasCompleted();\n    var warnings = this._importModel.getWarnings();\n\n    if (failed) {\n      status = 'error';\n    } else if (completed && !warnings) {\n      status = 'success';\n    } else if (completed && warnings) {\n      status = 'warning';\n    }\n\n    return status;\n  },\n\n  _getInfo: function () {\n    var upload = this._importModel.get('upload');\n    var imp = this._importModel.get('import');\n\n    var d = {\n      name: '',\n      state: this._importModel.get('state'),\n      progress: '',\n      service: '',\n      step: this._importModel.get('step'),\n      failed: this._importModel.hasFailed(),\n      completed: this._importModel.hasCompleted(),\n      warnings: this._importModel.getWarnings(),\n      showSuccessDetailsButton: this._showSuccessDetailsButton,\n      tables_created_count: imp.tables_created_count\n    };\n\n    // Name\n    if (upload.type) {\n      if (upload.type === 'file') {\n        if (upload.value.length > 1) {\n          d.name = upload.value.length + ' files';\n        } else {\n          d.name = upload.value.name;\n        }\n      }\n      if (upload.type === 'url' || upload.type === 'remote') {\n        d.name = upload.value;\n      }\n      if (upload.type === 'service') {\n        d.name = upload.value && upload.value.filename || '';\n      }\n      if (upload.service_name === 'twitter_search') {\n        d.name = 'Twitter import';\n      }\n      if (upload.type === 'sql') {\n        d.name = 'SQL';\n      }\n      if (upload.type === 'duplication') {\n        d.name = upload.table_name || upload.value;\n      }\n    } else {\n      d.name = imp.display_name || imp.item_queue_id || 'import';\n    }\n\n    // Service\n    d.service = upload.service_name;\n\n    // Progress\n    if (this._importModel.get('step') === 'upload') {\n      d.progress = this._importModel.get('upload').progress;\n    } else {\n      d.progress = Math.max(0, (UploadConfig.uploadStates.indexOf(d.state) / UploadConfig.uploadStates.length) * 100);\n    }\n\n    d.progress = d.progress.toFixed(0);\n\n    return d;\n  },\n\n  updateNotification: function () {\n    var status = this._getStatus();\n    var delegated = DELEGATIONS[status];\n    delegated.call(this, this._importModel, this._notification, status, this._getInfo(), this._showSuccessDetailsButton);\n  },\n\n  _showImportDataset: function () {\n    var dataset = this._importModel.get('import').table_name;\n    window.location = this._configModel.get('base_url') + '/dataset/' + dataset;\n  },\n\n  _showImportStats: function () {\n    var self = this;\n    this._modals.create(function (modalModel) {\n      return new TwitterImportDetailsDialog({\n        modalModel: modalModel,\n        userModel: self._userModel,\n        model: self._importModel\n      });\n    });\n  },\n\n  _showImportError: function () {\n    var self = this;\n    this._modals.create(function (modalModel) {\n      return new ErrorDetailsView({\n        configModel: self._configModel,\n        modalModel: modalModel,\n        error: self._importModel.getError(),\n        userModel: self._userModel\n      });\n    });\n  },\n\n  _showImportWarnings: function () {\n    var self = this;\n    this._modals.create(function (modalModel) {\n      return new WarningsDetailsView({\n        modalModel: modalModel,\n        warnings: self._importModel.getWarnings(),\n        userModel: self._userModel\n      });\n    });\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n\n if (isUpgradeable) { ;\n__p += '\\n' +\n__e( _t('components.background-importer.background-import-limit.hurry', { upgradeUrl: upgradeUrl }) ) +\n'\\n';\n } else { ;\n__p += '\\n' +\n__e( _t('components.background-importer.background-import-limit.one-file', { importQuota: importQuota }) ) +\n'\\n';\n } ;\n__p += '\\n';\n\n}\nreturn __p\n}","var Backbone = require('backbone');\nvar _ = require('underscore');\nvar ImportItemView = require('./background-import-item-view');\nvar ImportLimitItemView = require('./background-import-limit-view');\nvar ImportsModel = require('builder/data/background-importer/imports-model');\n\n/**\n *  Background polling manager\n *\n *  It will pool all polling operations (imports) that happens\n *  in the Builder\n *\n */\n\nvar BackgroundImporter = function (options) {\n  this.options = options || {};\n  this._importers = {};\n  this.initialize(this.options);\n};\n\nBackgroundImporter.prototype = {\n  initialize: function (opts) {\n    if (!opts.userModel) throw new Error('userModel is required');\n    if (!opts.configModel) throw new Error('configModel is required');\n    if (!opts.modals) throw new Error('modals is required');\n    if (!opts.pollingModel) throw new Error('pollingModel is required');\n\n    this._userModel = opts.userModel;\n    this._configModel = opts.configModel;\n    this._createVis = opts.createVis;\n    this._modals = opts.modals;\n    this._model = opts.pollingModel;\n\n    this._initBinds();\n  },\n\n  addView: function (view) {\n    this._importers[view.cid] = view;\n  },\n\n  removeView: function (view) {\n    delete this._importers[view.cid];\n  },\n\n  enable: function () {\n    this._model.startPollings();\n  },\n\n  disable: function () {\n    this._model.stopPollings();\n  },\n\n  removeImport: function (model) {\n    this._model.removeImportItem(model);\n  },\n\n  destroy: function () {\n    this._model.off(null, null, this);\n  },\n\n  _initBinds: function () {\n    this._model.on('importAdded', this._addImport, this);\n    this._model.on('importByUploadData', this._addDataset, this);\n  },\n\n  _addImport: function (m) {\n    var importItemView = new ImportItemView({\n      configModel: this._configModel,\n      showSuccessDetailsButton: this._model.get('showSuccessDetailsButton'),\n      modals: this._modals,\n      importModel: m,\n      userModel: this._userModel\n    });\n\n    importItemView.on('remove', this._removeImport, this);\n    this.addView(importItemView);\n    this.enable();\n  },\n\n  _addDataset: function (d) {\n    if (d) {\n      this._addImportsItem(d);\n    }\n  },\n\n  _onDroppedFile: function (files) {\n    if (files) {\n      this._addImportsItem({\n        type: 'file',\n        value: files,\n        create_vis: this._createVis\n      });\n    }\n  },\n\n  _addImportsItem: function (uploadData) {\n    if (this._model.canAddImport()) {\n      this._removeLimitItem();\n    } else {\n      this._addLimitItem();\n      return false;\n    }\n\n    var imp = new ImportsModel({}, {\n      upload: uploadData,\n      userModel: this._userModel,\n      configModel: this._configModel\n    });\n\n    this._model.addImportItem(imp);\n  },\n\n  _addLimitItem: function () {\n    if (!this._importLimit) {\n      var view = new ImportLimitItemView({\n        configModel: this._configModel,\n        userModel: this._userModel\n      });\n\n      this.addView(view);\n      this._importLimit = view;\n    }\n  },\n\n  _removeLimitItem: function () {\n    var view = this._importLimit;\n    if (view) {\n      view.clean();\n      this.removeView(view);\n      delete this._importLimit;\n    }\n  },\n\n  _removeImport: function (model, view) {\n    this._model.removeImportItem(model);\n    this.removeView(view);\n  }\n};\n\n// Supporting default Backbone events like on, off, trigger, listenTo etc\n_.extend(BackgroundImporter.prototype, Backbone.Events, {\n  remove: function () {\n    this.stopListening();\n  }\n});\n\nvar manager = (function () {\n  var initialized = false;\n  var importer;\n\n  return {\n    init: function (opts) {\n      if (!initialized) {\n        importer = new BackgroundImporter(opts);\n      }\n      return importer;\n    }\n  };\n})();\n\nmodule.exports = manager;\n","var template = require('./failed.tpl');\n\nfunction getAction () {\n  return 'show_errors';\n}\n\nfunction getButton () {\n  return _t('components.background-importer.background-importer-item.show');\n}\n\nfunction getClosable () {\n  return true;\n}\n\nfunction updateNotification (info) {\n  var data = {\n    info: info,\n    status: _status,\n    closable: getClosable(),\n    button: getButton(),\n    action: getAction()\n  };\n\n  _notification.update(data);\n}\n\nvar _notification;\nvar _status;\n\nmodule.exports = function (model, notification, status, info, showDetails) {\n  _notification = notification;\n  _status = status;\n  updateNotification(template(info));\n};\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p +=\n((__t = ( _t('components.background-importer.background-importer-item.error-connecting', { name: name }) )) == null ? '' : __t) +\n' ';\n if (service) { ;\n__p += ' ' +\n__e( _t('components.background-importer.background-importer-item.from') ) +\n' ' +\n__e( service ) +\n' ';\n } ;\n\n\n}\nreturn __p\n}","var template = require('./loading.tpl');\n\nfunction getAction () {\n  return false;\n}\n\nfunction getButton () {\n  return false;\n}\n\nfunction getClosable () {\n  var state = _model.get('state');\n  var step = _model.get('step');\n  return state === 'uploading' && step === 'upload';\n}\n\nfunction updateNotification (info) {\n  var data = {\n    info: info,\n    status: _status,\n    closable: getClosable(),\n    button: getButton(),\n    action: getAction()\n  };\n\n  _notification.update(data);\n}\n\nvar _model;\nvar _notification;\nvar _status;\n\nmodule.exports = function (model, notification, status, info, showDetails) {\n  _model = model;\n  _notification = notification;\n  _status = status;\n  updateNotification(template(info));\n};\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<span class=\\'CDB-Text is-semibold\\'>' +\n__e( progress ) +\n'% ' +\n__e( state ) +\n'</span> ' +\n__e( name ) +\n' ';\n if (service && service != \"twitter_search\") { ;\n__p += ' ' +\n__e( _t('components.background-importer.background-importer-item.from') ) +\n' ' +\n__e( service ) +\n' ';\n } ;\n\n\n}\nreturn __p\n}","var template = require('./success.tpl');\n\nfunction getAction () {\n  var service = _model.get('upload').service_name;\n  var tables_created_count = _model.get('import').tables_created_count;\n\n  if (_showDetails) {\n    if (service && service === 'twitter_search') {\n      return 'show_stats';\n    } else if (tables_created_count === 1) {\n      return 'show_table';\n    }\n  }\n\n  return false;\n}\n\nfunction getButton () {\n  var service = _model.get('upload').service_name;\n  var tables_created_count = _model.get('import').tables_created_count;\n\n  if (_showDetails) {\n    if (service && service === 'twitter_search') {\n      return _t('components.background-importer.background-importer-item.show');\n    } else if (tables_created_count === 1) {\n      return _t('components.background-importer.background-importer-item.show');\n    }\n  }\n\n  return false;\n}\n\nfunction getClosable () {\n  return true;\n}\n\nfunction updateNotification (info) {\n  var data = {\n    info: info,\n    status: _status,\n    closable: getClosable(),\n    button: getButton(),\n    action: getAction()\n  };\n\n  _notification.update(data);\n}\n\nvar _model;\nvar _notification;\nvar _status;\nvar _showDetails;\n\nmodule.exports = function (model, notification, status, info, showDetails) {\n  _model = model;\n  _notification = notification;\n  _status = status;\n  _showDetails = showDetails;\n  updateNotification(template(info));\n};\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p +=\n__e( name ) +\n' ';\n if (service && service != \"twitter_search\") { ;\n__p += ' ' +\n__e( _t('components.background-importer.background-importer-item.from') ) +\n' ' +\n__e( service ) +\n' ';\n } ;\n__p += ' <span class=\\'CDB-Text is-semibold\\'>' +\n__e( _t('components.background-importer.background-importer-item.completed') ) +\n'</span>';\n\n}\nreturn __p\n}","var template = require('./warnings.tpl');\n\nfunction getAction () {\n  return 'show_warnings';\n}\n\nfunction getButton () {\n  return _t('components.background-importer.background-importer-item.show');\n}\n\nfunction getClosable () {\n  return true;\n}\n\nfunction updateNotification (info) {\n  var data = {\n    info: info,\n    status: _status,\n    closable: getClosable(),\n    button: getButton(),\n    action: getAction()\n  };\n\n  _notification.update(data);\n}\n\nvar _notification;\nvar _status;\n\nmodule.exports = function (model, notification, status, info, showDetails) {\n  _notification = notification;\n  _status = status;\n  updateNotification(template(info));\n};\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<span class=\\'CDB-Text is-semibold\\'>Some warnings</span> were produced for ' +\n__e( name ) +\n' ';\n if (service) { ;\n__p += ' ' +\n__e( _t('components.background-importer.background-importer-item.from') ) +\n' ' +\n__e( service ) +\n' ';\n } ;\n\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"Dialog-header\">\\n  <div class=\"Dialog-headerIcon Dialog-headerIcon--negative u-flex u-alignCenter u-justifyCenter\">\\n    <i class=\"CDB-IconFont CDB-IconFont-cloud\"></i>\\n  </div>\\n  <h2 class=\"CDB-Text CDB-Size-large u-bSpace u-errorTextColor\">\\n    ' +\n__e( title ) +\n' ';\n if (errorCode) { ;\n__p += '(' +\n__e( errorCode ) +\n')';\n } ;\n__p += '\\n  </h2>\\n  <h3 class=\"CDB-Text CDB-Size-medium u-secondaryTextColor\">\\n    ';\n if (itemQueueId) { ;\n__p += '\\n    ' +\n__e( _t('components.background-importer.error-details.dont-panic') ) +\n'\\n    ';\n } else { ;\n__p += '\\n    ' +\n__e( _t('components.background-importer.error-details.check-errors') ) +\n'\\n    ';\n } ;\n__p += '\\n  </h3>\\n</div>\\n\\n<div class=\"Dialog-body ErrorDetails-body\">\\n  <ul class=\"Modal-containerList\">\\n    ';\n if (httpResponseCode) { ;\n__p += '\\n      <li class=\"ErrorDetails-item\">\\n        <div class=\"ErrorDetails-itemStep CDB-Text CDB-Size-medium is-semibold u-flex u-alignCenter u-justifyCenter\">1</div>\\n        <div class=\"ErrorDetails-itemText\">\\n          <p class=\"CDB-Text CDB-Size-medium\">\\n            ' +\n((__t = ( _t('components.background-importer.error-details.remote-server-code', { httpResponseCode: httpResponseCode}) )) == null ? '' : __t) +\n' ' +\n__e( httpResponseCodeMessage ) +\n'\\n          </p>\\n        </div>\\n      </li>\\n      <li class=\"ErrorDetails-item\">\\n        <div class=\"ErrorDetails-itemStep CDB-Text CDB-Size-medium is-semibold u-flex u-alignCenter u-justifyCenter\">2</div>\\n        <div class=\"ErrorDetails-itemText\">\\n          <p class=\"CDB-Text CDB-Size-medium\">\\n            ' +\n__e( _t('components.background-importer.error-details.check-url') ) +\n':<br/>\\n          </p>\\n          <span class=\\'CDB-Text CDB-Size-medium ErrorDetails-itemTextStrong\\'><a href=\"' +\n__e( originalUrl ) +\n'\">' +\n__e( originalUrl ) +\n'</a></span>\\n        </div>\\n      </li>\\n    ';\n } else { ;\n__p += '\\n      <li class=\"ErrorDetails-item\">\\n        <div class=\"ErrorDetails-itemStep CDB-Text CDB-Size-medium is-semibold u-flex u-alignCenter u-justifyCenter\">1</div>\\n        <div class=\"ErrorDetails-itemText\">\\n          <p class=\"CDB-Text CDB-Size-medium\">\\n            ';\n if (text) { ;\n__p += '\\n            ' +\n((__t = ( cdb.core.sanitize.html(text) )) == null ? '' : __t) +\n'\\n            ';\n } else { ;\n__p += '\\n            ' +\n__e( _t('components.background-importer.error-details.unknown-error') ) +\n'\\n            ';\n } ;\n__p += '\\n          </p>\\n        </div>\\n      </li>\\n    ';\n } ;\n__p += '\\n    ';\n if (itemQueueId) { ;\n__p += '\\n      <li class=\"ErrorDetails-item\">\\n        <div class=\"ErrorDetails-itemStep CDB-Text CDB-Size-medium is-semibold u-flex u-alignCenter u-justifyCenter\">!</div>\\n        <div class=\"ErrorDetails-itemText\">\\n          <p class=\"CDB-Text CDB-Size-medium\">\\n            ' +\n((__t = ( _t('components.background-importer.error-details.send-us-the-error-code') )) == null ? '' : __t) +\n':<br/>\\n          </p>\\n          <span class=\"CDB-Text CDB-Size-medium ErrorDetails-itemTextStrong\">' +\n__e( itemQueueId ) +\n'</span>\\n        </div>\\n      </li>\\n    ';\n } ;\n__p += '\\n  </ul>\\n</div>\\n\\n\\n<div class=\"Dialog-footer--simple u-inner\">\\n  <button class=\"CDB-Button CDB-Button--error u-tSpace--m js-close\">\\n    <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n      ' +\n__e( _t('components.background-importer.error-details.close') ) +\n'\\n    </span>\\n  </button>\\n</div>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"Dialog-header\">\\n  <div class=\"Dialog-headerIcon Dialog-headerIcon--twitter u-flex u-alignCenter u-justifyCenter\">\\n    <i class=\"CDB-IconFont CDB-IconFont-twitter\"></i>\\n  </div>\\n  <h2 class=\"CDB-Text CDB-Size-large u-bSpace Dialog-headerIcon--twitter\">\\n    ' +\n__e( _t('components.background-importer.twitter-import-details.twitter-import-title') ) +\n'\\n  </h2>\\n  <h3 class=\"CDB-Text CDB-Size-medium u-altTextColor\">\\n    ';\n if (datasetTotalRows === 0) { ;\n__p += '\\n      ' +\n__e( _t('components.background-importer.twitter-import-details.errors.no-results') ) +\n'\\n    ';\n } else { ;\n__p += '\\n      ' +\n((__t = ( _t('components.background-importer.twitter-import-details.new-type-created', { datasetTotalRowsFormatted: datasetTotalRowsFormatted, tweetPlural: datasetTotalRows != 1 ? 's' : '' }) )) == null ? '' : __t) +\n'\\n    ';\n } ;\n__p += '\\n  </h3>\\n</div>\\n\\n<div class=\"Dialog-body ErrorDetails-body\">\\n  <ul class=\"Modal-containerList\">\\n    <li class=\"ErrorDetails-item\">\\n      <div class=\"ErrorDetails-itemIcon ErrorDetails-itemIcon--success CDB-Size-big u-flex u-alignCenter u-justifyCenter u-rSpace--xl\">\\n        <i class=\"CDB-IconFont CDB-IconFont-dollar\"></i>\\n      </div>\\n      <div class=\"ErrorDetails-itemText\">\\n        <p class=\"CDB-Text CDB-Size-large u-secondaryTextColor\">\\n          ';\n if (tweetsCost > 0) { ;\n__p += '\\n            ' +\n__e( _t('components.background-importer.twitter-import-details.tweet-cost.paid', { tweetsCostFormatted: tweetsCostFormatted }) ) +\n'\\n          ';\n } else { ;\n__p += '\\n            ' +\n__e( _t('components.background-importer.twitter-import-details.tweet-cost.free', { tweetsCostFormatted: tweetsCostFormatted }) ) +\n'\\n          ';\n } ;\n__p += '\\n        </p>\\n        <p class=\"CDB-Text CDB-Size-medium u-altTextColor\">\\n          ';\n if (tweetsCost > 0 || availableTweets <= 0) { ;\n__p += '\\n            ' +\n__e( _t('components.background-importer.twitter-import-details.no-more-credits', { blockPriceFormatted: blockPriceFormatted, blockSizeFormatted: blockSizeFormatted }) ) +\n'\\n          ';\n } else { ;\n__p += '\\n            ';\n if (availableTweets != 1) { ;\n__p += '\\n              ' +\n__e( _t('components.background-importer.twitter-import-details.credits-left', { availableTweetsFormatted: availableTweetsFormatted }) ) +\n'\\n            ';\n } else { ;\n__p += '\\n              ' +\n__e( _t('components.background-importer.twitter-import-details.credit-left', { availableTweetsFormatted: availableTweetsFormatted }) ) +\n'\\n            ';\n } ;\n__p += '\\n          ';\n } ;\n__p += '\\n        </p>\\n      </div>\\n    </li>\\n  </ul>\\n</div>\\n\\n<div class=\"Dialog-footer--simple u-inner\">\\n  <button class=\"CDB-Button CDB-Button--primary u-tSpace--m\">\\n    <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase js-close\">\\n      ' +\n__e( _t('components.background-importer.error-details.close') ) +\n'\\n    </span>\\n  </button>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"Dialog-header\">\\n  <div class=\"Dialog-headerIcon Dialog-headerIcon--negative u-flex u-alignCenter u-justifyCenter\">\\n    <i class=\"CDB-IconFont CDB-IconFont-barometer\"></i>\\n  </div>\\n  <h2 class=\"CDB-Text CDB-Size-large u-bSpace u-errorTextColor\">\\n    ' +\n__e( _t('components.background-importer.upgrade-errors.' + errorCode + '.title') ) +\n'\\n  </h2>\\n  <h3 class=\"CDB-Text CDB-Size-medium u-secondaryTextColor\">\\n    ' +\n__e( _t('components.background-importer.upgrade-errors.' + errorCode + '.description') ) +\n'\\n  </h3>\\n</div>\\n\\n<div class=\"Dialog-body ErrorDetails-body\">\\n  <ul class=\"Modal-containerList\">\\n    <li class=\"ErrorDetails-item\">\\n      <div class=\"ErrorDetails-itemIcon ErrorDetails-itemIcon--success CDB-Size-big u-flex u-alignCenter u-justifyCenter u-rSpace--xl\">\\n        <i class=\"CDB-IconFont CDB-IconFont-rocket\"></i>\\n      </div>\\n      <div class=\"ErrorDetails-itemText\">\\n        <p class=\"CDB-Text CDB-Size-medium\">\\n          ' +\n__e( _t('components.background-importer.upgrade-errors.' + errorCode + '.info') ) +\n'\\n          ';\n if (showTrial) { ;\n__p += '\\n            <br/>\\n            <a href=\"' +\n((__t = ( upgradeUrl )) == null ? '' : __t) +\n'\">' +\n__e( _t('components.background-importer.free-trial', { days: 14 }) ) +\n'</a>\\n          ';\n } ;\n__p += '\\n        </p>\\n      </div>\\n    </li>\\n  </ul>\\n</div>\\n\\n<div class=\"Dialog-footer--simple u-inner\">\\n  <a href=\"' +\n__e( upgradeUrl ) +\n'\" class=\"CDB-Button CDB-Button--primary u-tSpace--m\">\\n    <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n      ' +\n__e( _t('components.background-importer.upgrade-errors.upgrade') ) +\n'\\n    </span>\\n  </a>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"Dialog-header ErrorDetails-header\">\\n  <div class=\"Dialog-headerIcon Dialog-headerIcon--alert\">\\n    <i class=\"CDB-IconFont CDB-IconFont-cloud\"></i>\\n  </div>\\n  <p class=\"Dialog-headerTitle--warning\">\\n    ' +\n__e( _t('components.background-importer.partial-import-details.unable-to-import-as-layers') ) +\n'\\n  </p>\\n  <p class=\"Dialog-headerText\">\\n    ' +\n__e( _t('components.background-importer.partial-import-details.find-connected-datasets') ) +\n'</br>\\n    ' +\n__e( _t('components.background-importer.partial-import-details.upgrade-your-account', { userMaxLayers: userMaxLayers }) ) +\n'</br>\\n  </p>\\n</div>\\n';\n if (maxTablesPerImport) { ;\n__p += '\\n  <div class=\"Dialog-body ErrorDetails-body\">\\n    <ul class=\"ErrorDetails-list\">\\n      <li class=\"ErrorDetails-item\">\\n        <div class=\"ErrorDetails-itemStep\">!</div>\\n        <div class=\"ErrorDetails-itemText\">\\n          ' +\n__e( _t('components.background-importer.partial-import-details.too-many-datasets', { maxTablesPerImport: maxTablesPerImport }) ) +\n'</br>\\n        </div>\\n      </li>\\n    </ul>\\n  </div>\\n';\n } ;\n__p += '\\n<div class=\"Dialog-footer ErrorDetails-footer\">\\n  <button class=\"Button Button--secondary ErrorDetails-footerButton js-close\">\\n    <span>' +\n__e( _t('components.background-importer.partial-import-details.continue-btn') ) +\n'</span>\\n  </button>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"Dialog-header ErrorDetails-header\">\\n  <div class=\"Dialog-headerIcon Dialog-headerIcon--alert\">\\n    <i class=\"CDB-IconFont CDB-IconFont-cloud\"></i>\\n  </div>\\n  <p class=\"Dialog-headerTitle--warning\">\\n    ' +\n__e( _t('components.background-importer.warnings-details.unable-to-import-datasets') ) +\n'\\n  </p>\\n  <p class=\"Dialog-headerText\">\\n    ' +\n__e( _t('components.background-importer.warnings-details.no-more-datasets', { maxTablesPerImport: maxTablesPerImport}) ) +\n'<br />\\n    ' +\n__e( _t('components.background-importer.warnings-details.find-connected-datasets') ) +\n'\\n  </p>\\n</div>\\n<div class=\"Dialog-footer ErrorDetails-footer\">\\n  <button class=\"Button Button--secondary ErrorDetails-footerButton u-upperCase js-close\">\\n    <span>' +\n__e( _t('components.background-importer.warnings-details.continue-btn') ) +\n'</span>\\n  </button>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"Dialog-header ErrorDetails-header\">\\n  <div class=\"Dialog-headerIcon Dialog-headerIcon--alert\">\\n    <i class=\"CDB-IconFont CDB-IconFont-cloud\"></i>\\n  </div>\\n  <p class=\"Dialog-headerTitle--warning\">\\n    ' +\n__e( _t('components.background-importer.connector-warning-details.too-many-rows') ) +\n'\\n  </p>\\n  <p class=\"Dialog-headerText\">\\n    ' +\n__e( _t('components.background-importer.connector-warning-details.unable-to-import-all-rows', { maxRowsPerConnectorImport: maxRowsPerConnectorImport}) ) +\n'<br />\\n  </p>\\n</div>\\n<div class=\"Dialog-footer ErrorDetails-footer\">\\n  <button class=\"Button Button--secondary ErrorDetails-footerButton u-upperCase js-close\">\\n    <span>' +\n__e( _t('components.background-importer.connector-warning-details.continue-btn') ) +\n'</span>\\n  </button>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<i class=\"CodeMirror-bullet\"></i>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<ul class=\"CodeMirror-error\">\\n  <li class=\"CodeMirror-errorMessage u-lSpace--xl u-rSpace--xl\">\\n    ' +\n__e( _t('components.codemirror.syntax-error') ) +\n'. ' +\n__e( _t('components.codemirror.line') ) +\n' ' +\n__e( line ) +\n': <span>' +\n__e( message ) +\n'</span>\\n  </li>\\n</ul>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"CodeMirror-warning CDB-Text CDB-Size-medium u-flex u-lSpace--xl u-warningTextColor\">\\n  <div class=\"CodeMirror-warning-icon__wrapper\">\\n    <svg class=\"CodeMirror-warning-icon\" width=\"100%\" viewBox=\"0 0 500 500\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n      <title>icon-font-114-Warning</title>\\n      <defs></defs>\\n      <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\\n      <g id=\"Artboard-1\" transform=\"translate(-9001.000000, -11000.000000)\" fill-rule=\"nonzero\" fill=\"#FEB100\">\\n        <g id=\"icon-font-114-Warning\" transform=\"translate(9001.000000, 11000.000000)\">\\n        <path d=\"M47.3618699,443.171714 C40.4022689,456.721101 41.0006423,457.65748 56.75075,457.65748 L441.243856,457.65748 C456.985511,457.65748 457.59007,456.716689 450.632737,443.171714 L248.997303,50.6152213 L47.3618699,443.171714 Z M210.115762,31.2931921 C231.589444,-10.5131174 266.489496,-10.3489299 287.878844,31.2931921 L489.747111,424.302981 C511.220794,466.109288 489.302388,500 441.243856,500 L56.75075,500 C8.48945932,500 -13.1418536,465.945101 8.24749422,424.302981 L210.115762,31.2931921 Z M222.781864,372.97244 L222.781864,415.31496 L266.474263,415.31496 L266.474263,372.97244 L222.781864,372.97244 Z M222.781864,203.602361 L222.781864,330.62992 L266.474263,330.62992 L266.474263,203.602361 L222.781864,203.602361 Z\" id=\"Combined-Shape\"></path>\\n        </g>\\n      </g>\\n      </g>\\n    </svg>\\n  </div>\\n  <div>' +\n((__t = ( _t('editor.data.code-mirror.quota-data-services-warning') )) == null ? '' : __t) +\n' ' +\n((__t = ( _t('editor.data.code-mirror.quota-data-services-warning-link') )) == null ? '' : __t) +\n'</div>\\n</div>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"CodeMirror-editor\">\\n  <textarea class=\"js-editor\">' +\n__e( content ) +\n'</textarea>\\n</div>\\n\\n<div class=\"js-warning\"></div>\\n\\n';\n if (tips) { ;\n__p += '\\n<div class=\"CodeMirror-console js-console\">\\n  ' +\n__e( tips ) +\n'\\n  <div class=\"js-console-error\"></div>\\n</div>\\n';\n } ;\n__p += '\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"colorpicker dropdown-menu\">\\n  <div class=\"colorpicker-saturation\">\\n    <i><b></b></i>\\n  </div>\\n  <div class=\"colorpicker-hue\">\\n    <i class=\"ColorPicker-ball\"></i>\\n  </div>\\n  <div class=\"colorpicker-alpha js-alpha\">\\n    <i class=\"ColorPicker-ball\"></i>\\n  </div>\\n  <div class=\"ColorPicker-colorWrapper\">\\n    <div class=\"ColorPicker-color colorpicker-color js-color\"></div>\\n  </div>\\n</div>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"Editor-boxModalContent\">\\n  <div class=\"ColorPicker-pickerWrapper js-colorPicker\"></div>\\n  <div class=\"ColorPicker-inputs\">\\n    <div class=\"ColorPicker-inputWrapper CDB-Text\">\\n      <input type=\"text\" class=\"CDB-Text CDB-InputText ColorPicker-input is-color js-hex\" value=\"' +\n__e( hex ) +\n'\"/>\\n      <span class=\"ColorPicker-inputLabel u-upperCase\">HEX</span>\\n    </div>\\n    <div class=\"ColorPicker-inputWrapper CDB-Text\">\\n      <input type=\"text\" class=\"CDB-Text CDB-InputText ColorPicker-input js-inputColor js-r\" value=\"' +\n__e( r ) +\n'\"/>\\n      <span class=\"ColorPicker-inputLabel u-upperCase\">R</span>\\n    </div>\\n    <div class=\"ColorPicker-inputWrapper CDB-Text\">\\n      <input type=\"text\" class=\"CDB-Text CDB-InputText ColorPicker-input js-inputColor js-g\" value=\"' +\n__e( g ) +\n'\" />\\n      <span class=\"ColorPicker-inputLabel u-upperCase\">G</span>\\n    </div>\\n    <div class=\"ColorPicker-inputWrapper CDB-Text\">\\n      <input type=\"text\" class=\"CDB-Text CDB-InputText ColorPicker-input js-inputColor js-b\" value=\"' +\n__e( b ) +\n'\" />\\n      <span class=\"ColorPicker-inputLabel u-upperCase\">B</span>\\n    </div>\\n    <div class=\"ColorPicker-inputWrapper CDB-Text\">\\n      <input type=\"text\" class=\"CDB-Text CDB-InputText ColorPicker-input js-a';\n if (opacityDisabled) { ;\n__p += ' is-disabled';\n } ;\n__p += '\" value=\"' +\n__e( opacity ) +\n'\" ';\n if (opacityDisabled) { ;\n__p += 'disabled';\n } ;\n__p += ' />\\n      <span class=\"ColorPicker-inputLabel u-upperCase\">A</span>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar ContextMenuView = require('./context-menu/context-menu-view');\nvar CustomListCollection = require('./custom-list/custom-list-collection');\nvar template = require('./context-menu-factory.tpl');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar TipsyTooltipView = require('./tipsy-tooltip-view');\n\nvar REQUIRED_OPTS = [\n  'menuItems'\n];\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-toggle-menu': '_onToggleContextMenuClicked'\n  },\n\n  className: 'CDB-Shape',\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this.template = opts.template || template;\n    this._initContextMenu(this._menuItems);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(this.template());\n\n    this._initViews();\n\n    return this;\n  },\n\n  _initViews: function () {\n    var tooltip = new TipsyTooltipView({\n      el: this.$el,\n      title: function () {\n        return _t('more-options');\n      },\n      gravity: 'w'\n    });\n\n    this.addView(tooltip);\n  },\n\n  _initContextMenu: function (items) {\n    this._menuItems = new CustomListCollection(items);\n    this._menuItems.on('change:selected', this._onContextMenuSelect, this);\n    this.add_related_model(this._menuItems);\n  },\n\n  _onContextMenuSelect: function (menuItem) {\n    var action = menuItem.get('action');\n    action && action.call(this);\n  },\n\n  _showContextMenu: function (position) {\n    var triggerElementID = 'context-menu-trigger-' + this.cid;\n    this.$('.js-toggle-menu').attr('id', triggerElementID);\n\n    var menuItems = this._menuItems;\n    this._resetContextMenuItems();\n    this._menuView = new ContextMenuView({\n      collection: menuItems,\n      triggerElementID: triggerElementID,\n      position: position\n    });\n\n    this._menuView.model.on('change:visible', function (model, isContextMenuVisible) {\n      if (this._hasContextMenu() && !isContextMenuVisible) {\n        this._hideContextMenu();\n      }\n    }, this);\n\n    this._menuView.show();\n    this.addView(this._menuView);\n  },\n\n  _resetContextMenuItems: function () {\n    var selected = this._menuItems.getSelectedItem();\n    selected && selected.set({selected: false}, {silent: true});\n  },\n\n  _hasContextMenu: function () {\n    return this._menuView != null;\n  },\n\n  _hideContextMenu: function () {\n    this.removeView(this._menuView);\n    this._menuView.clean();\n    delete this._menuView;\n  },\n\n  _onToggleContextMenuClicked: function (event) {\n    event.preventDefault();\n    event.stopPropagation();\n    if (this._hasContextMenu()) {\n      this._hideContextMenu();\n    } else {\n      this._showContextMenu({\n        x: event.pageX,\n        y: event.pageY\n      });\n    }\n  },\n\n  getContextMenu: function () {\n    return this._menuView;\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<button class=\"CDB-Shape-threePoints is-blue is-small js-toggle-menu\">\\n  <div class=\"CDB-Shape-threePointsItem\"></div>\\n  <div class=\"CDB-Shape-threePointsItem\"></div>\\n  <div class=\"CDB-Shape-threePointsItem\"></div>\\n</button>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<button';\n if (className) { ;\n__p += ' class=\"' +\n__e( className ) +\n'\"';\n } ;\n__p += '>\\n  ' +\n((__t = ( template )) == null ? '' : __t) +\n'\\n</button>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"Carousel-shadow Carousel-shadow--left js-leftShadow\"></div>\\n<div class=\"Carousel-shadow Carousel-shadow--right is-visible js-rightShadow\"></div>\\n<ul class=\"Carousel-list js-list\"></ul>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"CDB-ListDecoration-itemLink u-flex u-justifySpace u-alignCenter u-actionTextColor ';\n if (isSelected) { ;\n__p += ' is-selected ';\n } ;\n__p += '\">\\n  ' +\n__e( _t('form-components.editors.fill.quantification.methods.' + name) ) +\n'\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n\n if (headerTitle) { ;\n__p += '\\n  <div class=\"CDB-Box-modalHeader\">\\n    <ul class=\"CDB-Box-modalHeaderItem CDB-Box-modalHeaderItem--block CDB-Box-modalHeaderItem--paddingHorizontal\">\\n      <li class=\"CDB-ListDecoration-item CDB-ListDecoration-itemPadding--vertical CDB-Text CDB-Size-medium u-secondaryTextColor\">\\n        <button class=\"u-actionTextColor js-back u-rSpace\">\\n          <i class=\"CDB-IconFont CDB-IconFont-arrowPrev Size-large\"></i>\\n        </button>\\n        ' +\n__e( headerTitle) +\n'\\n      </li>\\n    </ul>\\n  </div>\\n  ';\n } ;\n__p += '\\n    <div class=\"js-content\"></div>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p +=\n__e( label );\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"CDB-ListDecoration-item CustomList-item js-listItem\">\\n  <button type=\"button\" class=\"CDB-ListDecoration-itemLink CustomList--full js-add-custom-value u-ellipsis\" data-val=\"' +\n__e( query ) +\n'\" title=\"' +\n__e( query ) +\n'\">\\n    <p class=\"CDB-Text CDB-FontSize-small u-altTextColor\">' +\n__e( _t('components.custom-list.add-custom-result') ) +\n'</p>\\n    “' +\n__e( query ) +\n'”\\n  </button>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"CustomList-message\">\\n  <p class=\"CustomList-messageText CDB-Text CDB-Size-medium u-secondaryTextColor\">\\n    ';\n if (query && query.length) { ;\n__p += '\\n      ' +\n__e( _t('components.custom-list.no-results', { typeLabel: typeLabel, query: query }) ) +\n'\\n    ';\n } else { ;\n__p += '\\n      ' +\n__e( _t('components.custom-list.no-items', { typeLabel: typeLabel }) ) +\n'\\n    ';\n } ;\n__p += '\\n  </p>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"CDB-Box-modalHeader\">\\n  <div class=\"CDB-Box-modalHeaderItem js-header u-alignCenter u-justifySpace\">\\n    <div class=\"u-flex js-actions\"></div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<button type=\"button\" class=\"CDB-ListDecoration-itemLink u-ellipsis\\n  ';\n if (isSelected) { ;\n__p += ' is-selected ';\n } ;\n__p += '\\n  ';\n if (isDestructive) { ;\n__p += '\\n  u-errorTextColor\\n  ';\n } else if (isDisabled) { ;\n__p += '\\n  u-hintTextColor\\n  ';\n } else { ;\n__p += '\\n  u-actionTextColor\\n  ';\n } ;\n__p += '\\n  \" title=\"' +\n__e( name ) +\n'\">\\n\\n  <div class=\"u-iBlock u-rSpace\">\\n    <input class=\"CDB-Checkbox js-input\" type=\"checkbox\" name=\"\" value=\"\" ';\n if (isSelected) { ;\n__p += 'checked';\n } ;\n__p += ' ';\n if (isDisabled) { ;\n__p += 'disabled';\n } ;\n__p += ' />\\n    <span class=\"u-iBlock CDB-Checkbox-face\"></span>\\n  </div>\\n  ' +\n__e( name ) +\n'\\n</button>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<button type=\"button\" class=\"CDB-ListDecoration-itemLink u-ellipsis\\n    ';\n if (isSelected) { ;\n__p += ' is-selected ';\n } ;\n__p += '\\n    ';\n if (isDestructive) { ;\n__p += '\\n      u-errorTextColor\\n    ';\n } else if (isDisabled) { ;\n__p += '\\n      u-hintTextColor\\n    ';\n } else { ;\n__p += '\\n      u-actionTextColor\\n    ';\n } ;\n__p += '\\n  \" title=\"' +\n__e( name ) +\n'\">\\n  ' +\n__e( name ) +\n'\\n</button>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"u-flex\">\\n  <input type=\"text\" name=\"text\" autocomplete=\"off\" value=\"' +\n__e( query ) +\n'\" placeholder=\"' +\n__e( searchPlaceholder ) +\n'\" class=\"CDB-InputTextPlain CDB-Text js-search\">\\n  <button type=\"button\" class=\"u-lSpace--xl u-transparent js-clear\">\\n    <div class=\"CDB-Shape\">\\n      <div class=\"CDB-Shape-close is-blue is-large\"></div>\\n    </div>\\n  </button>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<ul class=\"CustomList-list js-list\"></ul>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<form class=\"DatePicker-timers\">\\n  <div class=\"DatePicker-timersField u-rSpace--xl\">\\n    <div class=\"DatePicker-timersInput\" data-fields=\"fromHour\"></div>\\n  </div>\\n  <div class=\"DatePicker-timersField u-rSpace--xl\">\\n    <div class=\"DatePicker-timersInput\" data-fields=\"fromMin\"></div>\\n  </div>\\n  <div class=\"DatePicker-timersField DatePicker-timersField--spaced u-rSpace--xl\">\\n    <div class=\"DatePicker-timersInput\" data-fields=\"toHour\"></div>\\n  </div>\\n  <div class=\"DatePicker-timersField\">\\n    <div class=\"DatePicker-timersInput\" data-fields=\"toMin\"></div>\\n  </div>\\n</form>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<button ';\n if (disabled) { ;\n__p += 'disabled=\"disabled\"';\n } ;\n__p += '  class=\"DatePicker-dates js-dates has-icon CDB-Text CDB-Size-medium ' +\n__e( disabled ? 'is-disabled' : '' ) +\n'\">\\n  ' +\n__e( _t('components.datepicker.from') ) +\n' <strong>' +\n__e( fromDate ) +\n' ' +\n__e( pad(fromHour,2) ) +\n':' +\n__e( pad(fromMin,2) ) +\n'</strong> ' +\n__e( _t('components.datepicker.to') ) +\n' <strong>' +\n__e( toDate ) +\n' ' +\n__e( pad(toHour,2) ) +\n':' +\n__e( pad(toMin,2) ) +\n'</strong>\\n  <i class=\"CDB-IconFont CDB-IconFont-calendar DatePicker-datesIcon\"></i>\\n</button>\\n<div class=\"DatePicker-dropdown CDB-Text\">\\n  <div class=\"DatePicker-calendar\"></div>\\n  <div class=\"DatePicker-timers js-timers\"></div>\\n  <div class=\"DatePicker-shortcuts\">\\n    <p class=\"DatePicker-shortcutsText\">\\n      ' +\n__e( _t('components.datepicker.get-last') ) +\n' <button type=\"button\" class=\"Button--link js-fourHours\">' +\n__e( _t('components.datepicker.hours-pluralize', { smart_count: 4 }) ) +\n'</button>,\\n      <button type=\"button\" class=\"Button--link js-oneDay\">' +\n__e( _t('components.datepicker.days-pluralize', { smart_count: 1 }) ) +\n'</button> ' +\n__e( _t('components.datepicker.or') ) +\n'\\n      <button type=\"button\" class=\"Button--link js-oneWeek\">' +\n__e( _t('components.datepicker.weeks-pluralize', { smart_count: 1 }) ) +\n'</button>\\n    </p>\\n    <p class=\"DatePicker-shortcutsText\">' +\n__e( _t('components.datepicker.gmt-convertion') ) +\n'</p>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar moment = require('moment');\nvar $ = require('jquery');\nrequire('builder/components/form-components/index');\nrequire('datepicker');\nvar template = require('./date-picker.tpl');\n\n/**\n * Custom picer for a dates range.\n */\nmodule.exports = CoreView.extend({\n\n  className: 'DatePicker',\n\n  options: {\n    flat: true,\n    date: '2008-07-31',\n    current: '2008-07-31',\n    calendars: 1,\n    starts: 1\n  },\n\n  events: {\n    'click .js-dates': '_toggleCalendar'\n  },\n\n  initialize: function (opts) {\n    this.template = opts.template || template;\n    this._initBinds();\n    this._setDefaultDate();\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this.$el.append(this.template({\n      readOnly: this.model.get('readOnly'),\n      date: this.options.date\n    }));\n\n    if (this.model.get('readOnly')) {\n      this.undelegateEvents();\n    }\n\n    return this;\n  },\n\n  _initBinds: function () {\n    $(document).bind('click', this._onDocumentClick.bind(this));\n  },\n\n  _destroyBinds: function () {\n    $(document).unbind('click', this._onDocumentClick.bind(this));\n  },\n\n  _setDefaultDate: function () {\n    var utc = new Date().getTimezoneOffset();\n    var today = moment(new Date()).utcOffset(utc).format('YYYY-MM-DD');\n    this.options.date = this.model.get('value') && moment(this.model.get('value')).format('YYYY-MM-DD') || today;\n    this.options.current = this.options.date;\n  },\n\n  _$calendar: function () {\n    return this.$('.js-calendar');\n  },\n\n  _$dropdown: function () {\n    return this.$('.js-DatePicker-simpleDropdown');\n  },\n\n  _hideCalendar: function (ev) {\n    if (ev) {\n      this.killEvent(ev);\n    }\n    this.model.set('visible', false);\n    this._destroyCalendar();\n    this._$dropdown().hide();\n  },\n\n  _showCalendar: function () {\n    this.model.set('visible', true);\n\n    this._$calendar().DatePicker(\n      _.extend(this.options, this.model.attributes, {\n        onChange: function (formatted, date) {\n          this.model.set('value', formatted);\n          this.$('.js-date-str').text(formatted);\n          this._hideCalendar();\n        }.bind(this),\n        onRender: function (d) { // Disable future dates and dates\n          var date = d.valueOf();\n          var now = new Date();\n\n          return (date > now) ? { disabled: true } : '';\n        }\n      })\n    );\n\n    this._$dropdown().show();\n  },\n\n  _destroyCalendar: function () {\n    if (this.$('.DatePicker').length > 0) {\n      this._$calendar() && this._$calendar().DatePickerHide();\n    }\n  },\n\n  _toggleCalendar: function (ev) {\n    if (ev) {\n      this.killEvent(ev);\n    }\n\n    this.model.get('visible') ? this._hideCalendar() : this._showCalendar();\n  },\n\n  closeCalendar: function () {\n    this._hideCalendar();\n  },\n\n  _onDocumentClick: function (e) {\n    var $el = $(e.target);\n\n    if ($el.closest('.DatePicker').length === 0) {\n      this._hideCalendar();\n    }\n  },\n\n  clean: function () {\n    this._destroyBinds();\n    this._hideCalendar();\n    CoreView.prototype.clean.call(this);\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<button class=\"js-dates DatePicker-dates DatePicker-dates--singleDate js-DatePicker-dates has-icon ';\n if (readOnly) { ;\n__p += ' is-disabled ';\n } ;\n__p += '\">\\n  <strong class=\"js-date-str\">' +\n__e( date ) +\n'</strong>\\n  <i class=\"CDB-IconFont CDB-IconFont-calendar DatePicker-datesIcon\"></i>\\n</button>\\n<div class=\"DatePicker-simpleDropdown datepickerHidden js-DatePicker-simpleDropdown\">\\n  <div class=\"js-calendar DatePicker-calendar DatePicker-calendar--simple\"></div>\\n</div>\\n';\n\n}\nreturn __p\n}","var Backbone = require('backbone');\nvar moment = require('moment');\n\n/**\n *  Default model for each field model\n *\n */\n\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    attribute: '',\n    value: '',\n    type: 'string',\n    readOnly: false\n  },\n\n  initialize: function () {\n    // Validation control variable\n    this.validationError = '';\n    this.bind('valid', function () {\n      this.validationError = '';\n    }, this);\n    this.bind('error', function (m, error) {\n      this.validationError = error;\n    });\n  },\n\n  _validate: function (attrs, options) {\n    var valid = Backbone.Model.prototype._validate.apply(this, arguments);\n    if (valid) {\n      this.trigger('valid');\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  validate: function (attrs) {\n    if (!attrs) return;\n\n    var val = attrs.value;\n    var type = attrs.type;\n\n    if (attrs.type === 'number') {\n      var pattern = /^(\\+|-)?(?:[0-9]+|[0-9]*\\.[0-9]+)$/;\n      if (val && !pattern.test(val)) {\n        return 'Invalid number';\n      }\n    }\n\n    if (type === 'boolean') {\n      if (val !== null && val !== true && val !== false) {\n        return 'Invalid boolean';\n      }\n    }\n\n    if (type === 'date') {\n      if (val && !moment(val).isValid()) {\n        return 'Invalid date';\n      }\n    }\n  },\n\n  getError: function () {\n    return this.validationError;\n  },\n\n  isValid: function () {\n    if (!this.validate) {\n      return true;\n    }\n    return !this.validate(this.attributes) && this.validationError === '';\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"LayoutIcon LayoutIcon--negative\">\\n  <i class=\"CDB-IconFont CDB-IconFont-cockroach\"></i>\\n</div>\\n<h3 class=\"CDB-Text CDB-Size-large u-mainTextColor u-errorTextColor u-bSpace--m u-tSpace-xl\">' +\n__e( title ) +\n'</h3>\\n<p class=\"CDB-Text CDB-Size-medium u-altTextColor\">' +\n((__t = ( desc )) == null ? '' : __t) +\n'</p>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n\n if (typeof isLoading != 'undefined' && isLoading) { ;\n__p += '\\n  <div class=\"u-flex\">\\n    <div class=\"CDB-LoaderIcon CDB-LoaderIcon--small is-dark\">\\n      <svg class=\"CDB-LoaderIcon-spinner\" viewBox=\"0 0 50 50\">\\n        <circle class=\"CDB-LoaderIcon-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"></circle>\\n      </svg>\\n    </div>\\n    <span class=\"u-lSpace u-secondaryTextColor\">' +\n__e( _t('components.backbone-forms.select.loading') ) +\n'</span>\\n  </div>\\n';\n } else { ;\n__p += '\\n  ' +\n__e( label ) +\n'\\n';\n } ;\n__p += '\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"CDB-InputText CDB-Text is-cursor js-button u-ellipsis\\n  ';\n if (isDisabled) { ;\n__p += ' is-disabled ';\n } ;\n__p += '\\n  ';\n if (!label) { ;\n__p += ' is-empty ';\n } ;\n__p += '\\n  ';\n if (isNull) { ;\n__p += ' is-empty ';\n } ;\n__p += '\"\\n  tabindex=\"0\"\\n  title=\"' +\n__e( title ) +\n'\">\\n  ';\n if (isLoading) { ;\n__p += '\\n    <div class=\"CDB-LoaderIcon CDB-LoaderIcon--small is-dark u-iBlock\">\\n      <svg class=\"CDB-LoaderIcon-spinner\" viewBox=\"0 0 50 50\">\\n        <circle class=\"CDB-LoaderIcon-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"></circle>\\n      </svg>\\n    </div>\\n    <span class=\"u-lSpace u-secondaryTextColor\">' +\n__e( _t('components.backbone-forms.select.loading') ) +\n'</span>\\n  ';\n } else { ;\n__p += '\\n    ' +\n__e( label ) +\n'\\n  ';\n } ;\n__p += '\\n</div>\\n\\n<div class=\"js-license CDB-Text CDB-FontSize-small u-altTextColor u-tSpace u-bSpace u-isHidden u-flex\">\\n  <a href=\"https://cartodb.github.io/bigmetadata/licenses.html\" target=\"_blank\">\\n    <span class=\"u-tSpace u-bSpace DataObservatory-license\"></span>\\n  </a>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<button type=\"button\" class=\"CDB-ListDecoration-itemLink u-actionTextColor\\n  ';\n if (isSelected) { ;\n__p += ' is-selected ';\n } ;\n__p += '\\n  \" title=\"' +\n((__t = ( name )) == null ? '' : __t) +\n'\">\\n  <div class=\"u-flex\">\\n    <div class=\"u-iBlock u-rSpace--m\">\\n      <input class=\"CDB-Checkbox js-input\" type=\"checkbox\" name=\"\" value=\"\" ';\n if (isSelected) { ;\n__p += 'checked';\n } ;\n__p += ' ';\n if (isDisabled) { ;\n__p += 'disabled';\n } ;\n__p += ' />\\n      <span class=\"u-iBlock CDB-Checkbox-face\"></span>\\n    </div>\\n    <div>\\n      <div class=\"u-bSpace\">' +\n((__t = ( name )) == null ? '' : __t) +\n'</div>\\n      <div class=\"CDB-Size-small u-altTextColor\">' +\n__e( description ) +\n'</div>\\n    </div>\\n  </div>\\n</button>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"CDB-Box-modalHeader\">\\n  <ul class=\"CDB-Box-modalHeaderItem CDB-Box-modalHeaderItem--block CDB-Box-modalHeaderItem--paddingHorizontal\">\\n    <li class=\"CDB-ListDecoration-item CDB-ListDecoration-itemPadding--vertical CDB-Text CDB-Size-medium u-secondaryTextColor\">\\n      <button class=\"u-actionTextColor js-back u-rSpace\">\\n        <i class=\"CDB-IconFont CDB-IconFont-arrowPrev Size-large\"></i>\\n      </button>\\n      ' +\n__e( headerTitle) +\n'\\n    </li>\\n  </ul>\\n</div>\\n<div class=\"js-content\"></div>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n\n if (status === 'fetching') { ;\n__p += '\\n  <div class=\"InputColorCategory-loader js-loader\">\\n    <div class=\"CDB-LoaderIcon is-dark\">\\n      <svg class=\"CDB-LoaderIcon-spinner\" viewBox=\"0 0 50 50\">\\n        <circle class=\"CDB-LoaderIcon-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"></circle>\\n      </svg>\\n    </div>\\n  </div>\\n';\n } else if (status === 'error') { ;\n__p += '\\n  <div class=\"u-flex u-alignCenter u-justifyCenter CDB-Text CDB-Size-medium u-bSpace--m u-tSpace--m u-errorTextColor\">' +\n__e( _t('components.backbone-forms.data-observatory.dropdown.error', {\n    type: type\n  }) ) +\n'</div>\\n';\n } ;\n\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<button type=\"button\" class=\"CDB-ListDecoration-itemLink u-actionTextColor\\n    ';\n if (isSelected) { ;\n__p += ' is-selected ';\n } ;\n__p += '\\n  \" title=\"' +\n__e( name ) +\n'\">\\n  <div class=\"u-bSpace\">' +\n__e( name ) +\n'</div>\\n  <div class=\"CDB-Size-small u-altTextColor DataObservatory-description\">' +\n__e( description ) +\n'</div>\\n</button>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"DataObservatory-count CDB-Text CDB-Size-small Color-ThirdBackground\">\\n    ' +\n__e( items ) +\n'\\n</div>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"js-search\"></div>\\n<div class=\"js-count\"></div>\\n<div class=\"js-list\"></div>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"CDB-Box-modalHeaderItem\">\\n  <div  class=\"u-flex u-grow\">\\n    <div class=\"u-flex u-grow\">\\n      <input type=\"text\" name=\"text\" autocomplete=\"off\" placeholder=\"' +\n__e( _t('analyses.data-observatory-measure.search-by-name') ) +\n'\" class=\"CDB-InputTextPlain CDB-Text js-input-search\">\\n    </div>\\n\\n    <div>\\n      <button class=\"CDB-Text CDB-Size-medium u-actionTextColor js-filters u-rSpace--m\">' +\n__e( label ) +\n'</button>\\n    </div>\\n  </div>\\n</div>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<button type=\"button\" class=\"CDB-InputText\\n  ';\n if (!value) { ;\n__p += ' is-empty ';\n } ;\n__p += '\\n  u-txt-left js-input\">' +\n__e( value ? value : 'null' ) +\n'</button>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"u-flex Editor-checkerInput CDB-Text CDB-Size-medium u-rSpace--xl\">\\n  <input class=\"CDB-Checkbox js-check\" type=\"checkbox\" id=\"' +\n__e( id ) +\n'\" name=\"\" value=\"\" ';\n if (isDisabled) { ;\n__p += 'disabled';\n } ;\n__p += ' ';\n if (isChecked) { ;\n__p += 'checked';\n } ;\n__p += '>\\n  <span class=\"CDB-Checkbox-face u-rSpace--m\"></span>\\n  <label class=\"CDB-Text CDB-Size-small u-ellipsis u-upperCase is-semibold u-flex u-alignCenter Editor-formLabel\" for=\"' +\n__e( id ) +\n'\">\\n    <span class=\"u-ellipsis ';\n if (help) { ;\n__p += ' js-help is-underlined';\n } ;\n__p += '\" ';\n if (help) { ;\n__p += ' data-tooltip=\"' +\n__e( help ) +\n'\"';\n } ;\n__p += '  title=\"' +\n__e( label ) +\n'\">' +\n__e( label ) +\n'</span>\\n  </label>\\n</div>\\n<div class=\"Editor-checkerComponent js-editor\"></div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<label class=\"CDB-Legend u-upperCase CDB-Text is-semibold CDB-Size-small\">\\n  <div class=\"u-flex u-alignCenter\">\\n    <div class=\"u-iBlock u-rSpace--m\">\\n      <input class=\"CDB-Checkbox js-input\" type=\"checkbox\" name=\"\" value=\"\" ';\n if (checked) { ;\n__p += 'checked';\n } ;\n__p += ' ';\n if (disabled) { ;\n__p += 'disabled';\n } ;\n__p += '>\\n      <span class=\"u-iBlock CDB-Checkbox-face\"></span>\\n    </div>\\n    <span class=\"';\n if (help) { ;\n__p += ' js-help is-underlined';\n } ;\n__p += '\" ';\n if (help) { ;\n__p += ' data-tooltip=\"' +\n__e( help ) +\n'\"';\n } ;\n__p += ' >' +\n__e( label ) +\n'</span>\\n  </div>\\n</label>\\n<div class=\"Editor-checkerComponent js-editor\"></div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<label class=\"CDB-Legend u-upperCase CDB-Text is-semibold CDB-Size-small\">\\n  <div class=\"u-flex u-alignCenter\">\\n    <div class=\"u-iBlock u-rSpace--m\">\\n      <input class=\"CDB-Checkbox js-input\" type=\"checkbox\" name=\"\" value=\"\" ';\n if (checked) { ;\n__p += 'checked';\n } ;\n__p += ' ';\n if (disabled) { ;\n__p += 'disabled';\n } ;\n__p += '>\\n      <span class=\"u-iBlock CDB-Checkbox-face\"></span>\\n    </div>\\n    <span class=\"';\n if (help) { ;\n__p += ' js-help is-underlined';\n } ;\n__p += '\" ';\n if (help) { ;\n__p += ' data-tooltip=\"' +\n__e( help ) +\n'\"';\n } ;\n__p += ' >' +\n__e( title ) +\n'</span>\\n  </div>\\n</label>\\n<div class=\"CDB-Text CDB-Size-medium Editor-formInput js-editor\"></div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<button type=\"button\" class=\"Editor-fillContainer Editor-fillContainer--ByValue ';\n if (help) { ;\n__p += 'js-help';\n } ;\n__p += '\" ';\n if (help) { ;\n__p += ' data-tooltip=\"' +\n__e( help ) +\n'\"';\n } ;\n__p += '>\\n  ';\n if (_.isArray(value)) { ;\n__p += '\\n    <span class=\"Editor-fillContainer--Column u-ellipsis\">\\n      ' +\n__e( attribute ) +\n'\\n    </span>\\n    <span class=\"Editor-fillContainer--ColorBarContainer ColorBarContainer\">\\n      <span class=\"ColorBar ColorBar-gradient\" style=\"' +\n__e( colorBar ) +\n'\"></span>\\n    </span>\\n  ';\n } else { ;\n__p += '\\n    <span class=\"u-altTextColor\">' +\n__e( _t('form-components.editors.style.select-by-column') ) +\n'</span>\\n  ';\n } ;\n__p += '\\n</button>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<button type=\"button\" class=\"Editor-fillContainer u-altTextColor ';\n if (help) { ;\n__p += 'js-help';\n } ;\n__p += '\" ';\n if (help) { ;\n__p += ' data-tooltip=\"' +\n__e( help ) +\n'\"';\n } ;\n__p += '>\\n  ';\n if (value) { ;\n__p += '\\n  <ul class=\"ColorBarContainer\">\\n    <li class=\"ColorBar\" style=\"background-color: ' +\n__e( value ) +\n'\"></li>\\n  </ul>\\n  ';\n } else { ;\n__p += '\\n      ' +\n__e( _t('form-components.editors.fill.input-color.select-color') ) +\n'\\n  ';\n };\n__p += '\\n</button>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n\n if (image && !isCustomMarker) { ;\n__p += '\\n<button type=\"button\" class=\"Editor-fillImage ';\n if (help) { ;\n__p += ' js-help';\n } ;\n__p += '\" ';\n if (help) { ;\n__p += ' data-tooltip=\"' +\n__e( help ) +\n'\"';\n } ;\n__p += '>\\n  <div class=\"IconContainer js-image-container\"></div>\\n</button>\\n';\n } ;\n__p += '\\n\\n';\n if (!image || isCustomMarker) { ;\n__p += '\\n<button type=\"button\" class=\"Editor-fillImage ';\n if (help) { ;\n__p += ' js-help';\n } ;\n__p += '\" ';\n if (help) { ;\n__p += ' data-tooltip=\"' +\n__e( help ) +\n'\"';\n } ;\n__p += '>\\n  <div class=\\'CDB-Text CDB-FontSize-small u-altTextColor is-semibold u-upperCase\\'>' +\n((__t = ( _t('form-components.editors.fill.input-color.img') )) == null ? '' : __t) +\n'</div>\\n</button>\\n';\n } ;\n__p += '\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"Editor-boxModalHeader\">\\n  <nav class=\"CDB-NavMenu\">\\n    <ul class=\"CDB-NavMenu-Inner CDB-NavMenu-inner--no-margin CDB-NavMenu-inner--is-dropdown CDB-Text is-semibold CDB-Size-medium js-menu\"></ul>\\n  </nav>\\n</div>\\n<div class=\"js-content\"></div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n\n if (status === 'fetching') { ;\n__p += '\\n  <div class=\"InputColorCategory-loader js-loader\">\\n    <div class=\"CDB-LoaderIcon is-dark\">\\n      <svg class=\"CDB-LoaderIcon-spinner\" viewBox=\"0 0 50 50\">\\n        <circle class=\"CDB-LoaderIcon-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"></circle>\\n      </svg>\\n    </div>\\n  </div>\\n';\n } else if (status === 'error') { ;\n__p += '\\n  <div class=\"u-flex u-alignCenter u-justifyCenter CDB-Text CDB-Size-medium u-bSpace--m u-tSpace--m u-errorTextColor\">' +\n__e( _t('components.backbone-forms.data-observatory.dropdown.error', {\n    type: type\n  }) ) +\n'</div>\\n';\n } else if (status === 'empty') { ;\n__p += '\\n  <div class=\"u-flex u-alignCenter u-justifyCenter CDB-Text CDB-Size-medium u-bSpace--m u-tSpace--m\">' +\n__e( _t('components.backbone-forms.lazy-select.empty', {\n    type: type\n  }) ) +\n'</div>\\n';\n } ;\n\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"js-search\"></div>\\n<div class=\"js-list\"></div>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"CDB-Box-modalHeaderItem\">\\n  <div  class=\"u-flex u-grow\">\\n    <div class=\"u-flex u-grow\">\\n      <input type=\"text\" name=\"text\" autocomplete=\"off\" placeholder=\"' +\n__e( _t('components.backbone-forms.lazy-select.search') ) +\n'\" class=\"CDB-InputTextPlain CDB-Text js-input-search\">\\n    </div>\\n  </div>\\n</div>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n\n if (typeof isLoading != 'undefined' && isLoading) { ;\n__p += '\\n  <div class=\"u-flex\">\\n    <div class=\"CDB-LoaderIcon CDB-LoaderIcon--small is-dark\">\\n      <svg class=\"CDB-LoaderIcon-spinner\" viewBox=\"0 0 50 50\">\\n        <circle class=\"CDB-LoaderIcon-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"></circle>\\n      </svg>\\n    </div>\\n    <span class=\"u-lSpace u-secondaryTextColor\">' +\n__e( _t('components.backbone-forms.select.loading') ) +\n'</span>\\n  </div>\\n';\n } else { ;\n__p += '\\n  ' +\n__e( label ) +\n'\\n';\n } ;\n__p += '\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"CDB-InputText CDB-Text is-cursor js-button u-ellipsis\\n  ';\n if (isDisabled) { ;\n__p += ' is-disabled ';\n } ;\n__p += '\\n  ';\n if (!label) { ;\n__p += ' is-empty ';\n } ;\n__p += '\\n  ';\n if (isNull) { ;\n__p += ' is-empty ';\n } ;\n__p += '\"\\n  tabindex=\"0\"\\n  title=\"' +\n__e( title ) +\n'\">\\n    ';\n if (isEmpty && isNull) { ;\n__p += '\\n      ' +\n__e( _t('components.backbone-forms.select.empty') ) +\n'\\n    ';\n } else { ;\n__p += '\\n      ' +\n__e( label ) +\n'\\n    ';\n } ;\n__p += '\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<button type=\"button\" class=\"CDB-ListDecoration-itemLink u-ellipsis u-actionTextColor\" title=\"' +\n__e( val ) +\n'\">\\n  ';\n if (typeof type != 'undefined' && type === 'node') { ;\n__p += '\\n    <div class=\"u-flex u-alignCenter\">\\n      <span class=\"CDB-Text CDB-Size-small is-semibold u-bSpace--s u-upperCase\" style=\"color: ' +\n__e( color ) +\n';\">\\n        ' +\n__e( val ) +\n'\\n      </span>\\n\\n      ';\n if (!isSourceType) { ;\n__p += '\\n        <span class=\"CDB-Text CDB-Size-small u-lSpace--s u-flex\" style=\"color: ' +\n__e( color ) +\n';\">\\n          <i class=\"CDB-IconFont CDB-Size-small CDB-IconFont-ray\"></i>\\n        </span>\\n      ';\n } ;\n__p += '\\n\\n      <span class=\"CDB-Text CDB-Size-medium u-lSpace\">\\n        ' +\n((__t = ( nodeTitle )) == null ? '' : __t) +\n'\\n      </span>\\n\\n      <span class=\"CDB-Text CDB-Size-medium u-altTextColor u-ellipsis u-lSpace\" title=\"' +\n((__t = ( layerName )) == null ? '' : __t) +\n'\">\\n        ' +\n((__t = ( layerName )) == null ? '' : __t) +\n'\\n      </span>\\n    </div>\\n  ';\n } else { ;\n__p += '\\n    ' +\n__e( val ) +\n'\\n  ';\n } ;\n__p += '\\n</button>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n\n if (typeof isLoading != 'undefined' && isLoading) { ;\n__p += '\\n  <div class=\"u-flex\">\\n    <div class=\"CDB-LoaderIcon CDB-LoaderIcon--small is-dark\">\\n      <svg class=\"CDB-LoaderIcon-spinner\" viewBox=\"0 0 50 50\">\\n        <circle class=\"CDB-LoaderIcon-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"></circle>\\n      </svg>\\n    </div>\\n    <span class=\"u-lSpace u-secondaryTextColor\">' +\n__e( _t('components.backbone-forms.select.loading') ) +\n'</span>\\n  </div>\\n';\n } else { ;\n__p += '\\n  ';\n if (typeof type != 'undefined' && type === 'node') { ;\n__p += '\\n    <div class=\"u-flex u-alignCenter\">\\n      <span class=\"CDB-Text CDB-Size-small is-semibold u-bSpace--s u-upperCase\" style=\"color: ' +\n__e( color ) +\n';\">\\n        ' +\n__e( val ) +\n'\\n      </span>\\n\\n      ';\n if (!isSourceType) { ;\n__p += '\\n        <span class=\"CDB-Text CDB-Size-small u-lSpace--s u-flex\" style=\"color: ' +\n__e( color ) +\n';\">\\n          <i class=\"CDB-IconFont CDB-Size-small CDB-IconFont-ray\"></i>\\n        </span>\\n      ';\n } ;\n__p += '\\n\\n      <span class=\"CDB-Text CDB-Size-medium u-lSpace\">\\n        ' +\n((__t = ( nodeTitle )) == null ? '' : __t) +\n'\\n      </span>\\n\\n      <span class=\"CDB-Text CDB-Size-medium u-altTextColor u-ellipsis u-lSpace\" title=\"' +\n((__t = ( layerName )) == null ? '' : __t) +\n'\">\\n        ' +\n((__t = ( layerName )) == null ? '' : __t) +\n'\\n      </span>\\n    </div>\\n  ';\n } else { ;\n__p += '\\n    ' +\n__e( label ) +\n'\\n  ';\n } ;\n__p += '\\n';\n } ;\n__p += '\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n\n if (hasSlider) { ;\n__p += '\\n  <li class=\"CDB-OptionInput-item CDB-OptionInput-item--noSeparator\">\\n    <div class=\"UISlider js-slider\"></div>\\n  </li>\\n';\n } ;\n__p += '\\n<li class=\"CDB-OptionInput-item\">\\n  <input type=\"text\" class=\"CDB-InputText ';\n if (isFormatted) { ;\n__p += 'is-number';\n } ;\n__p += ' ';\n if (isDisabled) { ;\n__p += 'is-disabled';\n } ;\n__p += ' js-input ';\n if (help) { ;\n__p += ' js-help';\n } ;\n__p += '\" ';\n if (isDisabled) { ;\n__p += 'readonly';\n } ;\n__p += ' value=\"' +\n__e( value ) +\n'\" placeholder=\"' +\n__e( placeholder ) +\n'\" ';\n if (help) { ;\n__p += ' data-tooltip=\"' +\n__e( help ) +\n'\"';\n } ;\n__p += ' />\\n</li>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<p class=\"CDB-Text CDB-Size-medium u-altTextColor Editor-dropDownInfoText\">\\n  ' +\n__e( _t('components.backbone-forms.operators.count-message') ) +\n'\\n</p>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<ul class=\"Editor-dropdownCalculations CDB-Text is-semibold\">\\n  <li class=\"Editor-dropdownCalculationsElement CDB-Fieldset\">\\n    <input class=\"CDB-Radio\" type=\"radio\" name=\"operator\" value=\"count\" ';\n if (operator === 'count') { ;\n__p += 'checked';\n } ;\n__p += '>\\n    <span class=\"u-iBlock CDB-Radio-face\"></span>\\n    <label class=\"u-iBlock u-lSpace\">' +\n__e( _t('operators.count') ) +\n'</label>\\n  </li>\\n  <li class=\"Editor-dropdownCalculationsElement CDB-Fieldset\">\\n    <input class=\"CDB-Radio\" type=\"radio\" name=\"operator\" value=\"sum\" ';\n if (operator === 'sum') { ;\n__p += 'checked';\n } ;\n__p += '>\\n    <span class=\"u-iBlock CDB-Radio-face\"></span>\\n    <label class=\"u-iBlock u-lSpace\">' +\n__e( _t('operators.sum') ) +\n'</label>\\n  </li>\\n  <li class=\"Editor-dropdownCalculationsElement CDB-Fieldset\">\\n    <input class=\"CDB-Radio\" type=\"radio\" name=\"operator\" value=\"avg\" ';\n if (operator === 'avg') { ;\n__p += 'checked';\n } ;\n__p += '>\\n    <span class=\"u-iBlock CDB-Radio-face\"></span>\\n    <label class=\"u-iBlock u-lSpace\">' +\n__e( _t('operators.avg') ) +\n'</label>\\n  </li>\\n  <li class=\"Editor-dropdownCalculationsElement CDB-Fieldset\">\\n    <input class=\"CDB-Radio\" type=\"radio\" name=\"operator\" value=\"max\" ';\n if (operator === 'max') { ;\n__p += 'checked';\n } ;\n__p += '>\\n    <span class=\"u-iBlock CDB-Radio-face\"></span>\\n    <label class=\"u-iBlock u-lSpace\">' +\n__e( _t('operators.max') ) +\n'</label>\\n  </li>\\n  <li class=\"Editor-dropdownCalculationsElement CDB-Fieldset\">\\n    <input class=\"CDB-Radio\" type=\"radio\" name=\"operator\" value=\"min\" ';\n if (operator === 'min') { ;\n__p += 'checked';\n } ;\n__p += '>\\n    <span class=\"u-iBlock CDB-Radio-face\"></span>\\n    <label class=\"u-iBlock u-lSpace\">' +\n__e( _t('operators.min') ) +\n'</label>\\n  </li>\\n</ul>\\n<div class=\"js-list\"></div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"CDB-InputText CDB-Text is-cursor js-button u-ellipsis\\n  ';\n if (disabled) { ;\n__p += ' is-disabled ';\n } ;\n__p += '\\n  ';\n if (!name) { ;\n__p += ' is-empty ';\n } ;\n__p += '\\n  ';\n if (help) { ;\n__p += ' js-help';\n } ;\n__p += '\"\\n  ';\n if (help) { ;\n__p += ' data-tooltip=\"' +\n__e( help ) +\n'\"';\n } ;\n__p += '\\n  tabindex=\"0\">\\n  ' +\n__e( name || _t('components.backbone-forms.select.placeholder', { keyAttr: keyAttr }) ) +\n'\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n\n _.each(items, function(item, index) { ;\n__p += '\\n  <li class=\"u-flex u-alignCenter ' +\n__e( (index === (items.length - 1)) ? '' : 'u-rSpace--xl' ) +\n'\">\\n    <input type=\"radio\" class=\"CDB-Radio u-iBlock';\n if (item.className) { ;\n__p += ' ' +\n__e( item.className ) +\n' ';\n } ;\n__p += '\"\\n    name=\"' +\n__e( item.name ) +\n'\" value=\"' +\n__e( item.value ) +\n'\" id=\"' +\n__e( item.id ) +\n'-' +\n__e( index ) +\n'\"\\n        ';\n if (item.selected) { ;\n__p += '\\n          checked=\"checked\"\\n        ';\n } else if (item.disabled) { ;\n__p += '\\n          disabled=\"disabled\"\\n        ';\n } ;\n__p += '\\n      />\\n    <span class=\"u-rSpace CDB-Radio-face\"></span>\\n      ';\n if (item.help) { ;\n__p += '\\n        <span class=\"js-help is-underlined u-lSpace\" data-tooltip=\"' +\n__e( item.help ) +\n'\">\\n      ';\n } ;\n__p += '\\n      <label for=\"' +\n__e( item.id ) +\n'-' +\n__e( index ) +\n'\">' +\n__e( item.label ) +\n'</label>\\n      ';\n if (item.help) { ;\n__p += '\\n        </span>\\n      ';\n } ;\n__p += '\\n  </li>\\n';\n }); ;\n__p += '\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n\n if (typeof isLoading != 'undefined' && isLoading) { ;\n__p += '\\n  <div class=\"u-flex\">\\n    <div class=\"CDB-LoaderIcon CDB-LoaderIcon--small is-dark\">\\n      <svg class=\"CDB-LoaderIcon-spinner\" viewBox=\"0 0 50 50\">\\n        <circle class=\"CDB-LoaderIcon-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"></circle>\\n      </svg>\\n    </div>\\n    <span class=\"u-lSpace u-secondaryTextColor\">' +\n__e( _t('components.backbone-forms.select.loading') ) +\n'</span>\\n  </div>\\n';\n } else { ;\n__p += '\\n  ' +\n__e( label ) +\n'\\n';\n } ;\n__p += '\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<button type=\"button\" class=\"CDB-ListDecoration-itemLink\\n  ';\n if (isSelected) { ;\n__p += ' is-selected ';\n } ;\n__p += ' ';\n if (isDestructive) { ;\n__p += '  u-alertTextColor ';\n } else { ;\n__p += ' u-actionTextColor ';\n } ;\n__p += '\"\\n  title=\"' +\n__e( nodeTitle ) +\n' - ' +\n__e( layerName ) +\n'\">\\n  <div class=\"u-flex u-alignCenter\">\\n    <span class=\"CDB-Text CDB-Size-small is-semibold u-bSpace--s u-upperCase\" style=\"color: ' +\n__e( color ) +\n';\">\\n      ' +\n__e( layer_id ) +\n'\\n    </span>\\n\\n    ';\n if (!isSourceType) { ;\n__p += '\\n      <span class=\"CDB-Text CDB-Size-small u-lSpace--s u-flex\" style=\"color: ' +\n__e( color ) +\n';\">\\n        <i class=\"CDB-IconFont CDB-Size-small CDB-IconFont-ray\"></i>\\n      </span>\\n    ';\n } ;\n__p += '\\n\\n    <span class=\"CDB-Text CDB-Size-medium u-lSpace u-ellipsLongText\">\\n      ' +\n((__t = ( nodeTitle )) == null ? '' : __t) +\n'\\n    </span>\\n\\n    <span class=\"CDB-Text CDB-Size-medium u-altTextColor u-ellipsis u-lSpace\" title=\"' +\n((__t = ( layerName )) == null ? '' : __t) +\n'\">\\n      ' +\n((__t = ( layerName )) == null ? '' : __t) +\n'\\n    </span>\\n  </div>\\n</button>\\n';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\n\nmodule.exports = CoreView.extend({\n\n  options: {\n    template: require('./select-layer-list-item.tpl')\n  },\n\n  className: 'CDB-ListDecoration-item CustomList-item js-listItem',\n  tagName: 'li',\n\n  events: {\n    'mouseenter': '_onMouseEnter',\n    'mouseleave': '_onMouseLeave',\n    'click': '_onClick'\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    this.$el.append(\n      this.options.template(\n        _.extend({\n          typeLabel: this.options.typeLabel,\n          isSelected: this.model.get('selected'),\n          isDestructive: this.model.get('destructive'),\n          layerName: this.model.get('layerName'),\n          nodeTitle: this.model.get('nodeTitle'),\n          color: this.model.get('color'),\n          layer_id: this.model.get('layer_id'),\n          isSourceType: this.model.get('isSourceType')\n        })\n      )\n    );\n\n    this.$el.attr('data-val', this.model.getValue());\n\n    return this;\n  },\n\n  _onMouseLeave: function () {\n    this.$el.removeClass('is-highlighted');\n  },\n\n  _onMouseEnter: function () {\n    this.$el.addClass('is-highlighted');\n  },\n\n  _onClick: function (e) {\n    e.stopPropagation();\n    this.model.set('selected', true);\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"u-flex u-alignCenter\">\\n  <span class=\"CDB-Text CDB-Size-small is-semibold u-bSpace--s u-upperCase\" style=\"color: ' +\n__e( color ) +\n';\">\\n    ' +\n__e( layer_id ) +\n'\\n  </span>\\n\\n  ';\n if (!isSourceType) { ;\n__p += '\\n    <span class=\"CDB-Text CDB-Size-small u-lSpace--s u-flex\" style=\"color: ' +\n__e( color ) +\n';\">\\n      <i class=\"CDB-IconFont CDB-Size-small CDB-IconFont-ray\"></i>\\n    </span>\\n  ';\n } ;\n__p += '\\n\\n  <span class=\"CDB-Text CDB-Size-medium u-lSpace\">\\n    ' +\n((__t = ( nodeTitle )) == null ? '' : __t) +\n'\\n  </span>\\n\\n  <span class=\"CDB-Text CDB-Size-medium u-altTextColor u-ellipsis u-lSpace\" title=\"' +\n((__t = ( layerName )) == null ? '' : __t) +\n'\">\\n    ' +\n((__t = ( layerName )) == null ? '' : __t) +\n'\\n  </span>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n\n if (status === 'fetching') { ;\n__p += '\\n  <div class=\"InputColorCategory-loader CDB-Box-modal InputColorCategory-loader\">\\n    <div class=\"CDB-LoaderIcon is-dark\">\\n      <svg class=\"CDB-LoaderIcon-spinner\" viewBox=\"0 0 50 50\">\\n        <circle class=\"CDB-LoaderIcon-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"></circle>\\n      </svg>\\n    </div>\\n  </div>\\n';\n } else if (status === 'error') { ;\n__p += '\\n  <div class=\"u-flex u-alignCenter u-justifyCenter CDB-Text CDB-Size-medium u-bSpace--m u-tSpace--m u-errorTextColor\">' +\n__e( _t('components.backbone-forms.select.error', {\n    type: type\n  }) ) +\n'</div>\\n';\n } ;\n\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"CDB-InputText CDB-Text is-cursor js-button u-ellipsis\\n  ';\n if (isDisabled) { ;\n__p += ' is-disabled ';\n } ;\n__p += '\\n  ';\n if (!label) { ;\n__p += ' is-empty ';\n } ;\n__p += '\\n  ';\n if (isNull) { ;\n__p += ' is-empty ';\n } ;\n__p += '\\n  ';\n if (help) { ;\n__p += ' js-help';\n } ;\n__p += '\"\\n  ';\n if (help) { ;\n__p += ' data-tooltip=\"' +\n__e( help ) +\n'\"';\n } ;\n__p += '\\n  tabindex=\"0\">\\n  ';\n if (isLoading) { ;\n__p += '\\n    <div class=\"CDB-LoaderIcon CDB-LoaderIcon--small is-dark\">\\n      <svg class=\"CDB-LoaderIcon-spinner\" viewBox=\"0 0 50 50\">\\n        <circle class=\"CDB-LoaderIcon-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"></circle>\\n      </svg>\\n      <span class=\"u-lSpace u-secondaryTextColor\">' +\n__e( _t('components.backbone-forms.select.loading') ) +\n'</span>\\n    </div>\\n  ';\n } else { ;\n__p += '\\n    ';\n if (isEmpty && isNull) { ;\n__p += '\\n      ' +\n__e( _t('components.backbone-forms.select.empty') ) +\n'\\n    ';\n } else { ;\n__p += '\\n      ' +\n__e( label ) +\n'\\n    ';\n } ;\n__p += '\\n  ';\n } ;\n__p += '\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"CDB-Box-modalHeader\">\\n  <ul class=\"CDB-Box-modalHeaderItem CDB-Box-modalHeaderItem--block CDB-Box-modalHeaderItem--paddingHorizontal\">\\n    <li class=\"InputColor-modalHeader CDB-ListDecoration-item CDB-ListDecoration-itemPadding--vertical CDB-Text CDB-Size-medium u-secondaryTextColor\">\\n      <div class=\"u-flex u-alignStart u-ellipsis\">\\n        <button class=\"u-rSpace u-actionTextColor js-back\">\\n          <i class=\"CDB-IconFont CDB-IconFont-arrowPrev Size-large\"></i>\\n        </button>\\n        <div class=\"u-ellipsis test-attribute\">\\n          ' +\n__e( attribute ) +\n'\\n        </div>\\n      </div>\\n    </li>\\n    <li class=\"CDB-ListDecoration-item CDB-ListDecoration-itemPadding--vertical CDB-Text CDB-Size-medium u-secondaryTextColor\">\\n      <ul class=\"u-flex u-justifySpace\">\\n        <li class=\"u-flex test-bins\">\\n          ' +\n__e( bins ) +\n' ' +\n__e( _t('form-components.editors.fill.input-ramp.buckets', { smart_count: bins }) ) +\n'\\n          <button class=\"CDB-Shape u-lSpace js-bins\">\\n            <div class=\"CDB-Shape-threePoints is-horizontal is-blue is-small\">\\n              <div class=\"CDB-Shape-threePointsItem\"></div>\\n              <div class=\"CDB-Shape-threePointsItem\"></div>\\n              <div class=\"CDB-Shape-threePointsItem\"></div>\\n            </div>\\n          </button>\\n        </li>\\n        <li class=\"u-flex test-quantification\">\\n          ' +\n__e( _t('form-components.editors.fill.quantification.methods.' + quantification) ) +\n'\\n          <button class=\"CDB-Shape u-lSpace js-quantification\">\\n            <div class=\"CDB-Shape-threePoints is-horizontal is-blue is-small\">\\n              <div class=\"CDB-Shape-threePointsItem\"></div>\\n              <div class=\"CDB-Shape-threePointsItem\"></div>\\n              <div class=\"CDB-Shape-threePointsItem\"></div>\\n            </div>\\n          </button>\\n        </li>\\n      </ul>\\n    </li>\\n  </ul>\\n</div>\\n<div class=\"js-content\"></div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"CDB-InputText CDB-Text is-cursor js-button u-ellipsis ';\n if (!columnSelected) { ;\n__p += ' u-altTextColor ';\n } ;\n__p += '\" tabindex=\"0\">\\n    <ul class=\"Form-StyleByValue--column CDB-OptionInput-container CDB-OptionInput-container--border\">\\n        <li class=\"u-ellipsis by-column-name\">\\n            ' +\n__e( label ) +\n'\\n        </li>\\n    ';\n if (rangeSelected) { ;\n__p += '\\n        <li class=\"by-column-range\">\\n            ' +\n__e( range ) +\n'\\n        </li>\\n    ';\n } ;\n__p += '\\n    </ul>\\n</div>\\n\\n\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<input\\n  class=\"js-slider\"\\n  type=\"range\"\\n  min=\"' +\n__e( min ) +\n'\"\\n  max=\"' +\n__e( max ) +\n'\"\\n  data-orientation=\"' +\n__e( orientation ) +\n'\"\\n  ';\n if (disabled) { ;\n__p += '\\n    disabled=\"true\"\\n  ';\n } ;\n__p += '\\n  value=\"' +\n__e( value ) +\n'\"\\n>\\n<div class=\"rangeslider-ticks js-ticks\"></div>\\n<div class=\"rangeslider-label CDB-Text CDB-Size-medium js-label\"></div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<ul class=\"Form-tagsList js-tagsList\"></ul>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n\n _.each(items, function(item, index) { ;\n__p += '\\n  ';\n if (item.selected) { ;\n__p += '\\n    <li class=\"u-tSpace\">\\n      <input type=\"radio\" class=\"Editor-toggleRadio\" name=\"' +\n((__t = ( item.name )) == null ? '' : __t) +\n'\" value=\"' +\n__e( item.value ) +\n'\" id=\"' +\n((__t = ( item.id )) == null ? '' : __t) +\n'\" checked=\"checked\" />\\n      ';\n if (item.help) { ;\n__p += '<p class=\"Editor-toggleHelp CDB-Text CDB-Size-small u-altTextColor\">' +\n((__t = ( item.help )) == null ? '' : __t) +\n'</p>';\n } ;\n__p += '\\n    </li>\\n  ';\n } else { ;\n__p += '\\n    <li class=\"u-tSpace u-txt-right\">\\n      <input type=\"radio\" name=\"' +\n((__t = ( item.name )) == null ? '' : __t) +\n'\" value=\"' +\n__e( item.value ) +\n'\" id=\"' +\n((__t = ( item.id )) == null ? '' : __t) +\n'\" />\\n      <label class=\"u-upperCase u-actionTextColor CDB-Text is-semibold CDB-Size-small u-iBlock\" for=\"' +\n((__t = ( item.id )) == null ? '' : __t) +\n'\">';\n if (item.labelHTML){ ;\n__p +=\n((__t = ( item.labelHTML )) == null ? '' : __t);\n }else{ ;\n__p +=\n__e( item.label );\n } ;\n__p += '</label>\\n    </li>\\n  ';\n } ;\n__p += '\\n';\n }); ;\n__p += '\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"CDB-Text Editor-formInner';\n if (type){ ;\n__p += ' Editor-formInner--' +\n__e( type );\n } ;\n__p += '\">\\n  ';\n if (title) { ;\n__p += '\\n    <label class=\"CDB-Legend ';\n if (editorType){ ;\n__p += ' CDB-Legend--' +\n__e( editorType );\n } ;\n__p += ' u-upperCase CDB-Text is-semibold CDB-Size-small u-rSpace--m\" for=\"' +\n__e( editorId ) +\n'\" title=\"' +\n__e( title ) +\n'\">\\n      <div class=\"u-ellipsis ';\n if (help) { ;\n__p += 'Editor-formHelp';\n } ;\n__p += '\">\\n        <span class=\"';\n if (help) { ;\n__p += ' js-help is-underlined';\n } ;\n__p += '\" ';\n if (help) { ;\n__p += ' data-tooltip=\"' +\n__e( help ) +\n'\"';\n } ;\n__p += ' >' +\n__e( title ) +\n'</span>\\n      </div>\\n    </label>\\n  ';\n } ;\n__p += '\\n  <div class=\"Editor-formInput u-flex u-alignCenter\" data-editor>\\n    ';\n if (isCopyButtonEnabled) { ;\n__p += '\\n      <button type=\"button\" class=\"Share-copy CDB-Button CDB-Button--small js-copy\" data-clipboard-target=\"#' +\n__e( editorId ) +\n'\">\\n        <span class=\"CDB-Button-Text CDB-Text CDB-Size-small u-actionTextColor\">' +\n__e( _t('components.backbone-forms.copy-button') ) +\n'</span>\\n      </button>\\n    ';\n } ;\n__p += '\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var map = {\n\t\"./add-feature-line.tpl\": \"./lib/assets/javascripts/builder/components/icon/templates/add-feature-line.tpl\",\n\t\"./add-feature-point.tpl\": \"./lib/assets/javascripts/builder/components/icon/templates/add-feature-point.tpl\",\n\t\"./add-feature-polygon.tpl\": \"./lib/assets/javascripts/builder/components/icon/templates/add-feature-polygon.tpl\",\n\t\"./plus.tpl\": \"./lib/assets/javascripts/builder/components/icon/templates/plus.tpl\",\n\t\"./warning.tpl\": \"./lib/assets/javascripts/builder/components/icon/templates/warning.tpl\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./lib/assets/javascripts/builder/components/icon/templates sync \\\\.tpl$\";","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"16px\" height=\"16px\" viewBox=\"0 0 16 16\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n    <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\\n        <g id=\"Lines\" fill=\"#1785FB\">\\n            <path d=\"M11.6198875,4.92329838 L4.92351677,11.6196692 C4.97280083,11.7390295 5,11.8705079 5,12.0093689 L5,13.9906311 C5,14.5480902 4.55664682,15 3.9906311,15 L2.0093689,15 C1.45190985,15 1,14.5566468 1,13.9906311 L1,12.0093689 C1,11.4519098 1.44335318,11 2.0093689,11 L3.9906311,11 C4.12868508,11 4.26026573,11.0271908 4.38011246,11.0767016 L11.0764832,4.38033084 C11.0271992,4.26097047 11,4.12949214 11,3.9906311 L11,2.0093689 C11,1.45190985 11.4433532,1 12.0093689,1 L13.9906311,1 C14.5480902,1 15,1.44335318 15,2.0093689 L15,3.9906311 C15,4.54809015 14.5566468,5 13.9906311,5 L12.0093689,5 C11.8713149,5 11.7397343,4.97280922 11.6198875,4.92329838 Z M3,3 L3,0 L4,0 L4,3 L7,3 L7,4 L4,4 L4,7 L3,7 L3,4 L0,4 L0,3 L3,3 Z M12,2.0093689 L12,3.9906311 C12,4.00008791 11.9999116,4 12.0093689,4 L13.9906311,4 C14.0000879,4 14,4.00008843 14,3.9906311 L14,2.0093689 C14,1.99991209 14.0000884,2 13.9906311,2 L12.0093689,2 C11.9999121,2 12,1.99991157 12,2.0093689 Z M2,12.0093689 L2,13.9906311 C2,14.0000879 1.99991157,14 2.0093689,14 L3.9906311,14 C4.00008791,14 4,14.0000884 4,13.9906311 L4,12.0093689 C4,11.9999121 4.00008843,12 3.9906311,12 L2.0093689,12 C1.99991209,12 2,11.9999116 2,12.0093689 Z\"></path>\\n        </g>\\n    </g>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"16px\" height=\"16px\" viewBox=\"0 0 16 16\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n  <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\\n      <g id=\"Points\" fill=\"#1785FB\">\\n          <path d=\"M3,3 L3,0 L4,0 L4,3 L7,3 L7,4 L4,4 L4,7 L3,7 L3,4 L0,4 L0,3 L3,3 Z M12,2.0093689 L12,3.9906311 C12,4.00008791 11.9999116,4 12.0093689,4 L13.9906311,4 C14.0000879,4 14,4.00008843 14,3.9906311 L14,2.0093689 C14,1.99991209 14.0000884,2 13.9906311,2 L12.0093689,2 C11.9999121,2 12,1.99991157 12,2.0093689 Z M11,2.0093689 C11,1.45190985 11.4433532,1 12.0093689,1 L13.9906311,1 C14.5480902,1 15,1.44335318 15,2.0093689 L15,3.9906311 C15,4.54809015 14.5566468,5 13.9906311,5 L12.0093689,5 C11.4519098,5 11,4.55664682 11,3.9906311 L11,2.0093689 Z M12,12.0093689 L12,13.9906311 C12,14.0000879 11.9999116,14 12.0093689,14 L13.9906311,14 C14.0000879,14 14,14.0000884 14,13.9906311 L14,12.0093689 C14,11.9999121 14.0000884,12 13.9906311,12 L12.0093689,12 C11.9999121,12 12,11.9999116 12,12.0093689 Z M11,12.0093689 C11,11.4519098 11.4433532,11 12.0093689,11 L13.9906311,11 C14.5480902,11 15,11.4433532 15,12.0093689 L15,13.9906311 C15,14.5480902 14.5566468,15 13.9906311,15 L12.0093689,15 C11.4519098,15 11,14.5566468 11,13.9906311 L11,12.0093689 Z M2,12.0093689 L2,13.9906311 C2,14.0000879 1.99991157,14 2.0093689,14 L3.9906311,14 C4.00008791,14 4,14.0000884 4,13.9906311 L4,12.0093689 C4,11.9999121 4.00008843,12 3.9906311,12 L2.0093689,12 C1.99991209,12 2,11.9999116 2,12.0093689 Z M1,12.0093689 C1,11.4519098 1.44335318,11 2.0093689,11 L3.9906311,11 C4.54809015,11 5,11.4433532 5,12.0093689 L5,13.9906311 C5,14.5480902 4.55664682,15 3.9906311,15 L2.0093689,15 C1.45190985,15 1,14.5566468 1,13.9906311 L1,12.0093689 Z\"></path>\\n      </g>\\n  </g>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"16px\" height=\"16px\" viewBox=\"0 0 16 16\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n    <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\\n        <g id=\"Polygons\" fill=\"#1785FB\">\\n            <path d=\"M13.9906311,5 L14,5 L14,11 L13.9906311,11 C14.5480902,11 15,11.4433532 15,12.0093689 L15,13.9906311 C15,14.5480902 14.5566468,15 13.9906311,15 L12.0093689,15 C11.4519098,15 11,14.5566468 11,13.9906311 L11,14 L5,14 L5,13.9906311 C5,14.5480902 4.55664682,15 3.9906311,15 L2.0093689,15 C1.45190985,15 1,14.5566468 1,13.9906311 L1,12.0093689 C1,11.4519098 1.44335318,11 2.0093689,11 L3.9906311,11 C4.12868508,11 4.26026573,11.0271908 4.38011246,11.0767016 L11.0764832,4.38033084 C11.0271992,4.26097047 11,4.12949214 11,3.9906311 L11,2.0093689 C11,1.45190985 11.4433532,1 12.0093689,1 L13.9906311,1 C14.5480902,1 15,1.44335318 15,2.0093689 L15,3.9906311 C15,4.54809015 14.5566468,5 13.9906311,5 Z M13,5 L12.0093689,5 C11.8713149,5 11.7397343,4.97280922 11.6198875,4.92329838 L4.92351677,11.6196692 C4.97280083,11.7390295 5,11.8705079 5,12.0093689 L5,13 L11,13 L11,12.0093689 C11,11.4519098 11.4433532,11 12.0093689,11 L13,11 L13,5 Z M3,3 L3,0 L4,0 L4,3 L7,3 L7,4 L4,4 L4,7 L3,7 L3,4 L0,4 L0,3 L3,3 Z M12,2.0093689 L12,3.9906311 C12,4.00008791 11.9999116,4 12.0093689,4 L13.9906311,4 C14.0000879,4 14,4.00008843 14,3.9906311 L14,2.0093689 C14,1.99991209 14.0000884,2 13.9906311,2 L12.0093689,2 C11.9999121,2 12,1.99991157 12,2.0093689 Z M2,12.0093689 L2,13.9906311 C2,14.0000879 1.99991157,14 2.0093689,14 L3.9906311,14 C4.00008791,14 4,14.0000884 4,13.9906311 L4,12.0093689 C4,11.9999121 4.00008843,12 3.9906311,12 L2.0093689,12 C1.99991209,12 2,11.9999116 2,12.0093689 Z M12,12.0093689 L12,13.9906311 C12,14.0000879 11.9999116,14 12.0093689,14 L13.9906311,14 C14.0000879,14 14,14.0000884 14,13.9906311 L14,12.0093689 C14,11.9999121 14.0000884,12 13.9906311,12 L12.0093689,12 C11.9999121,12 12,11.9999116 12,12.0093689 Z\"></path>\\n        </g>\\n    </g>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"12px\" height=\"12px\" viewBox=\"0 0 16 16\" xmlns=\"http://www.w3.org/2000/svg\">\\n  <path fill=\"#1785FB\" d=\"M8,8 L8,1 L9,1 L9,8 L16,8 L16,9 L9,9 L9,16 L8,16 L8,9 L1,9 L1,8 L8,8 Z\" />\\n</svg>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"100%\" viewBox=\"0 0 500 500\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n    <title>icon-font_114_Warning</title>\\n    <defs></defs>\\n    <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\\n    <g id=\"Artboard-1\" transform=\"translate(-9001.000000, -11000.000000)\" fill-rule=\"nonzero\" fill=\"#FEB100\">\\n        <g id=\"icon-font_114_Warning\" transform=\"translate(9001.000000, 11000.000000)\">\\n        <path d=\"M47.3618699,443.171714 C40.4022689,456.721101 41.0006423,457.65748 56.75075,457.65748 L441.243856,457.65748 C456.985511,457.65748 457.59007,456.716689 450.632737,443.171714 L248.997303,50.6152213 L47.3618699,443.171714 Z M210.115762,31.2931921 C231.589444,-10.5131174 266.489496,-10.3489299 287.878844,31.2931921 L489.747111,424.302981 C511.220794,466.109288 489.302388,500 441.243856,500 L56.75075,500 C8.48945932,500 -13.1418536,465.945101 8.24749422,424.302981 L210.115762,31.2931921 Z M222.781864,372.97244 L222.781864,415.31496 L266.474263,415.31496 L266.474263,372.97244 L222.781864,372.97244 Z M222.781864,203.602361 L222.781864,330.62992 L266.474263,330.62992 L266.474263,203.602361 L222.781864,203.602361 Z\" id=\"Combined-Shape\"></path>\\n        </g>\\n    </g>\\n    </g>\\n</svg>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<button class=\"CDB-Button CDB-Button--secondary CDB-Button--medium ';\n if (disabled) { ;\n__p += 'is-disabled';\n } ;\n__p += ' js-' +\n__e( action ) +\n' js-action\">\\n  <span class=\"CDB-Button-Text CDB-Text is-semibold u-upperCase CDB-Size-small\">' +\n((__t = ( label )) == null ? '' : __t) +\n'</span>\\n</button>\\n';\n\n}\nreturn __p\n}","var Backbone = require('backbone');\nvar InfoboxModel = require('./infobox-item-model');\nvar _ = require('underscore');\n\n/*\n *  Infobox states collection\n */\n\nmodule.exports = Backbone.Collection.extend({\n  model: InfoboxModel,\n\n  initialize: function () {\n    this._initBinds();\n  },\n\n  reset: function (models, options) {\n    this._defaultSelected(models);\n    Backbone.Collection.prototype.reset.call(this, models, options);\n  },\n\n  _initBinds: function () {\n    this.on('change:selected', this._onSelectedChange, this);\n    this.on('reset', this._defaultSelected, this);\n  },\n\n  _defaultSelected: function (models) {\n    var selected = _.first(_.where(models, {selected: true}));\n    if (!selected) {\n      selected = _.first(models);\n      if (this._isModel(selected)) {\n        selected.set({selected: true}, {silent: true});\n      } else {\n        selected.selected = true;\n      }\n    }\n  },\n\n  _onSelectedChange: function (changedModel, isSelected) {\n    if (isSelected) {\n      this.each(function (m) {\n        if (m.cid !== changedModel.cid) {\n          m.set({selected: false}, {silent: true});\n        }\n      });\n    }\n  },\n\n  getState: function (state) {\n    return _.first(this.where({state: state}));\n  },\n\n  getSelected: function () {\n    var selected;\n    selected = _.first(this.where({selected: true}));\n    return selected;\n  },\n\n  setSelected: function (state) {\n    var selectedModel;\n\n    this.each(function (mdl) {\n      if (mdl.get('state') === state) {\n        mdl.set({selected: true}, {silent: true});\n        selectedModel = mdl;\n      } else {\n        mdl.set({selected: false}, {silent: true});\n      }\n    });\n\n    return selectedModel;\n  }\n\n});\n","var InfoboxView = require('./infobox-item-view');\n\nmodule.exports = {\n  // Infobox with no buttons, only message\n  createInfo: function (opts) {\n    var closable = opts.closable === undefined ? true : opts.closable;\n    return new InfoboxView({\n      type: opts.type || 'default',\n      title: opts.title,\n      body: opts.body,\n      closable: closable\n    });\n  },\n\n  createWithAction: function (opts) {\n    var closable = opts.closable === undefined ? true : opts.closable;\n    var options = {\n      type: opts.type || 'default',\n      title: opts.title,\n      body: opts.body,\n      closable: closable,\n      klass: opts.className\n    };\n\n    if (opts.action) {\n      options.action = {\n        label: opts.action.label,\n        type: opts.action.type\n      };\n    }\n\n    return new InfoboxView(options);\n  },\n\n  createLoading: function (opts) {\n    return new InfoboxView({\n      type: opts.type || 'default',\n      title: opts.title || '',\n      body: opts.body,\n      loading: true\n    });\n  },\n\n  createQuota: function (opts) {\n    if (opts.closable === undefined) {\n      opts.closable = true;\n    }\n\n    return new InfoboxView(opts);\n  }\n};\n","var Backbone = require('backbone');\n\n/*\n *  Infobox item model\n *\n */\n\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    selected: false\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar template = require('./infobox.tpl');\nvar templateButton = require('./infobox-button.tpl');\nvar templateQuota = require('./infobox-quota.tpl');\n\nvar INFOBOX_TYPE = {\n  error: 'is-error',\n  alert: 'is-alert',\n  code: 'is-dark',\n  success: 'is-success',\n  default: ''\n};\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-action': '_onActionClick',\n    'click .js-close': '_onCloseClick'\n  },\n\n  initialize: function (opts) {\n    if (opts.title === undefined) throw new Error('Title is required');\n    if (opts.body === undefined) throw new Error('Body is required');\n\n    this._title = opts.title;\n    this._body = opts.body;\n    this._loading = opts.loading;\n    this._isClosable = opts.closable;\n    this._klass = opts.klass;\n\n    if (opts.quota) {\n      this._quota = opts.quota;\n    }\n\n    if (opts.action) {\n      this._actionLabel = opts.action.label;\n      this._actionType = opts.action.type;\n      this._actionDisabled = opts.action.disabled;\n    }\n\n    this._type = INFOBOX_TYPE[opts.type || 'default'];\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n    return this;\n  },\n\n  _initViews: function () {\n    var hasQuota = !_.isEmpty(this._quota);\n    var isLoading = this._loading;\n\n    var view = template({\n      className: this._klass,\n      title: this._title,\n      body: this._body,\n      type: this._type,\n      isLoading: isLoading,\n      hasQuota: hasQuota,\n      hasButtons: this._actionLabel || this._isClosable,\n      isClosable: this._isClosable,\n      closeLabel: _t('editor.messages.common.cancel')\n    });\n\n    this.setElement(view);\n\n    if (this._actionLabel) {\n      this.$('.js-actionPosition').html(\n        templateButton({\n          action: 'action',\n          label: this._actionLabel,\n          type: this._actionType,\n          disabled: this._actionDisabled\n        })\n      );\n    }\n\n    if (hasQuota) {\n      var quota = this._quota;\n      var quotaPer = ((quota.usedQuota / quota.totalQuota) * 100);\n      if (isNaN(quotaPer)) {\n        quotaPer = 100;\n      }\n      var progressState = 'fine';\n      if (quotaPer > 75 && quotaPer < 90) {\n        progressState = 'alert';\n      } else if (quotaPer >= 90) {\n        progressState = 'caution';\n      }\n\n      this.$('.js-quota').html(templateQuota({\n        quotaMessage: quota.quotaMessage || '',\n        progressState: progressState,\n        quotaPer: quotaPer\n      }));\n    }\n  },\n\n  _onActionClick: function (e) {\n    this.trigger('action:main');\n  },\n\n  _onCloseClick: function (e) {\n    this.trigger('action:close');\n  }\n});\n","var Backbone = require('backbone');\nvar INFOBOX_DEFAULT_STATE = '';\n\n/**\n * View model of a infobox\n *\n */\n\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    state: INFOBOX_DEFAULT_STATE\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<label class=\"CDB-Text CDB-Size CDB-Size-small u-secondaryTextColor\">' +\n__e( quotaMessage ) +\n'</label>\\n<div class=\"Infobox-quotaBar Progress u-tSpace\">\\n  <div class=\"Infobox-quotaBarProgress Progress-bar Progress-bar--' +\n__e( progressState ) +\n'\"\\n    style=\"width: ' +\n__e( quotaPer ) +\n'%\"\\n  ></div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"Infobox ' +\n__e( type ) +\n' ' +\n__e( className ) +\n'\">\\n  <div class=\"u-flex u-justifySpace u-bSpace--m\">\\n    <h2 class=\"Infobox-title CDB-Text is-semibold CDB-Size-small u-upperCase u-bSpace--m u-rSpace--m\">' +\n__e( title ) +\n'</h2>\\n\\n\\n  </div>\\n\\n  <div class=\"CDB-Text CDB-Size-medium u-bSpace--xl u-flex\">\\n    ';\n if (isLoading) { ;\n__p += '\\n      <div class=\"CDB-LoaderIcon is-dark u-rSpace--m\">\\n        <svg class=\"CDB-LoaderIcon-spinner\" viewBox=\"0 0 50 50\">\\n          <circle class=\"CDB-LoaderIcon-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"></circle>\\n        </svg>\\n      </div>\\n    ';\n } ;\n__p += '\\n    <div>\\n      ' +\n((__t = ( body )) == null ? '' : __t) +\n'\\n    </div>\\n  </div>\\n\\n  <div class=\"u-flex u-justifySpace u-alignCenter\">\\n    ';\n if (hasQuota) { ;\n__p += '\\n      <div class=\"Infobox-quota js-quota\"></div>\\n    ';\n } ;\n__p += '\\n    ';\n if (hasButtons) { ;\n__p += '\\n      <ul class=\"Infobox-buttons ';\n if (hasQuota) { ;\n__p += 'Infobox-buttons--quota';\n } ;\n__p += '\">\\n        ';\n if (isClosable) { ;\n__p += '\\n          <li class=\"Infobox-button\">\\n            <button class=\"Infobox-buttonLink CDB-Text is-semibold CDB-Size-small u-upperCase js-close\">\\n              ' +\n((__t = ( closeLabel )) == null ? '' : __t) +\n'\\n            </button>\\n          </li>\\n        ';\n } ;\n__p += '\\n        <li class=\"Infobox-button Infobox-button--right js-actionPosition\"></li>\\n      </ul>\\n    ';\n } ;\n__p += '\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<ul>\\n  <li class=\"CDB-NavSubmenu-item\">\\n    <h2 class=\"CDB-Text CDB-Size-medium u-altTextColor\">' +\n__e( title ) +\n'</h2>\\n  </li>\\n  ';\n if (editable && assetsCount > 0) { ;\n__p += '\\n    ';\n if (allSelected) { ;\n__p += '\\n      <li class=\"CDB-NavSubmenu-item\">\\n        <button class=\"CDB-NavSubmenu-itemLink CDB-Text CDB-Size-medium u-actionTextColor js-deselect-all\">' +\n__e( _t('components.modals.assets-picker.deselect-all') ) +\n'</button>\\n      </li>\\n      ';\n } else if (selectedCount > 0) { ;\n__p += '\\n      <li class=\"CDB-NavSubmenu-item\">\\n        <button class=\"CDB-NavSubmenu-itemLink CDB-Text CDB-Size-medium u-actionTextColor js-select-all\">' +\n__e( _t('components.modals.assets-picker.select-all') ) +\n'</button>\\n      </li>\\n    ';\n } ;\n__p += '\\n\\n    ';\n if (selectedCount > 0) { ;\n__p += '\\n      <li class=\"CDB-NavSubmenu-item\">\\n          ';\n if (selectedCount > 1) { ;\n__p += '\\n        <button class=\"CDB-NavSubmenu-itemLink CDB-Text CDB-Size-medium u-errorTextColor js-remove\">' +\n__e( _t('components.modals.assets-picker.delete-images') ) +\n'</button>\\n        ';\n } else { ;\n__p += '\\n        <button class=\"CDB-NavSubmenu-itemLink CDB-Text CDB-Size-medium u-errorTextColor js-remove\">' +\n__e( _t('components.modals.assets-picker.delete-image') ) +\n'</button>\\n        ';\n } ;\n__p += '\\n      </li>\\n    ';\n } ;\n__p += '\\n  ';\n } ;\n__p += '\\n</ul>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"AssetItem-label CDB-Text CDB-Size-big ';\n if (type === 'icon') { ;\n__p += 'u-mainTextColor';\n } else { ;\n__p += 'u-actionTextColor';\n } ;\n__p += ' u-upperCase js-asset\" title=\"' +\n__e( name ) +\n'\">\\n  ';\n if (type === 'icon' || type === 'file') { ;\n__p += '\\n    <img height=\"' +\n__e( height ) +\n'\" src=\"' +\n__e( public_url ) +\n'\" alt=\"' +\n__e( name ) +\n'\" />\\n  ';\n } else { ;\n__p += '\\n    ' +\n__e( name ) +\n'\\n  ';\n } ;\n__p += '\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"Modal\">\\n  <div class=\"Modal-header\">\\n    <div class=\"Modal-headerContainer\">\\n      <h2 class=\"CDB-Text CDB-Size-huge is-light u-bSpace\">' +\n__e( _t('components.modals.add-asset.modal-title') ) +\n'</h2>\\n      <h3 class=\"CDB-Text CDB-Size-medium u-altTextColor\"><button class=\"u-actionTextColor js-upload\">' +\n__e( _t('components.modals.add-asset.upload-asset') ) +\n'</button> ' +\n__e( _t('components.modals.add-asset.modal-desc') ) +\n'</h3>\\n    </div>\\n  </div>\\n\\n  <div class=\"Modal-container js-body\"></div>\\n\\n  <div class=\"Modal-footer\">\\n    <div class=\"Modal-footerContainer u-flex u-justifySpace\">\\n      <div class=\"CDB-Text CDB-Size-medium js-disclaimer\">\\n        ';\n if (disclaimer) { ;\n__p += '\\n        ' +\n((__t = ( disclaimer )) == null ? '' : __t) +\n'\\n        ';\n } ;\n__p += '\\n      </div>\\n\\n      <button class=\"CDB-Button CDB-Button--primary is-disabled js-add\">\\n        <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">' +\n__e( _t('components.modals.add-asset.set-image') ) +\n'</span>\\n      </button>\\n    </div>\\n  </div>\\n</div>\\n\\n<form accept-charset=\"UTF-8\" enctype=\"multipart/form-data\" method=\"post\">\\n  <input type=\"file\" accept=\"image/jpeg,image/jpg,image/gif,image/png,image/svg+xml\" class=\"js-fileInput\" style=\"position: absolute; clip: rect(0px 0px 0px 0px); opacity: 0;\" multiple=\"multiple\">\\n</form>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"CDB-Box-modalHeader\">\\n  <ul class=\"CDB-Box-modalHeaderItem CDB-Box-modalHeaderItem--block CDB-Box-modalHeaderItem--paddingHorizontal\">\\n    <li class=\"CDB-ListDecoration-item CDB-ListDecoration-itemDisplay--flex CDB-Text CDB-Size-medium u-secondaryTextColor\">\\n      <div class=\"CDB-ListDecoration-secondaryContainer\">\\n        <button class=\"u-rSpace u-actionTextColor js-back\" type=\"button\">\\n          <i class=\"CDB-IconFont CDB-IconFont-arrowPrev Size-large\"></i>\\n        </button>\\n      </div>\\n\\n      <div class=\"CDB-ListDecoration-secondaryContainer CDB-ListDecoration-title u-rSpace--m\">\\n        <span class=\"label u-ellipsis js-label\">' +\n__e( label ) +\n'</span>\\n      </div>\\n\\n      <div class=\\'CDB-ListDecoration-secondaryContainer\\'>\\n        <nav class=\\'CDB-NavMenu\\'>\\n          <ul class=\\'CDB-NavMenu-Inner CDB-NavMenu-inner--no-margin js-menu\\'>\\n            <li class=\\'CDB-NavMenu-item\\'>\\n              <div class=\\'CDB-NavMenu-link CDB-ListDecoration-rampNav-item\\'>\\n                <button class=\"ColorBar ColorBar--disableHighlight CDB-ListDecoration-rampItemBar u-rSpace--xl js-colorPicker\" style=\"background-color: ' +\n((__t = ( color )) == null ? '' : __t) +\n';\" type=\"button\"></button>\\n              </div>\\n            </li>\\n\\n            ';\n if (imageEnabled) { ;\n__p += '\\n              <li class=\\'CDB-NavMenu-item is-selected\\'>\\n                <div class=\\'CDB-NavMenu-link CDB-ListDecoration-rampNav-item\\'>\\n                  ';\n if (image) { ;\n__p += '\\n                    <div class=\\'CDB-ListDecoration-rampImg js-image-container\\'></div>\\n                  ';\n } else { ;\n__p += '\\n                    <span class=\"CDB-ListDecoration-rampImg CDB-Text js-assetPicker\">' +\n((__t = ( _t('form-components.editors.fill.input-color.img') )) == null ? '' : __t) +\n'</span>\\n                  ';\n } ;\n__p += '\\n                </div>\\n              </li>\\n            ';\n } ;\n__p += '\\n          </ul>\\n        </nav>\\n      </div>\\n    </li>\\n  </ul>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"js-header\"></div>\\n<div class=\"js-content\"></div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<ul class=\"AssetsList js-assets\"></ul>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n\n if (type === 'icon') { ;\n__p += '\\n<div class=\"AssetItem-icon js-asset\"><img height=\"24\" src=\"' +\n__e( public_url ) +\n'\" alt=\"' +\n__e( name ) +\n'\" crossOrigin=\"anonymous\" /></div>\\n';\n } else { ;\n__p += '\\n<div class=\"AssetItem-label CDB-Text CDB-Size-small u-altTextColor u-upperCase js-asset\" title=\"' +\n__e( name ) +\n'\">\\n  ' +\n__e( name ) +\n'\\n</div>\\n';\n } ;\n__p += '\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"Modal-navigation\">\\n  <ul class=\"Modal-navigationInner CDB-Text is-semibold CDB-Size-medium js-menu\"></ul>\\n</div>\\n<div class=\"Tab-paneContent Publish-modalContent Modal-inner Modal-inner--with-navigation js-content\">\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"LayoutIcon LayoutIcon--negative\">\\n  <i class=\"CDB-IconFont CDB-IconFont-cockroach\"></i>\\n</div>\\n<h3 class=\"CDB-Text CDB-Size-large u-mainTextColor u-errorTextColor u-bSpace--m u-tSpace-xl\">' +\n__e( title ) +\n'</h3>\\n<p class=\"CDB-Text CDB-Size-medium u-altTextColor\">' +\n((__t = ( desc )) == null ? '' : __t) +\n'</p>\\n\\n<button class=\"CDB-Button CDB-Button--primary u-tSpace-xl js-back\">\\n  <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">' +\n__e( _t('components.modals.assets-picker.go-back') ) +\n'</span>\\n</button>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"ImportPanel-header\">\\n  <h3 class=\"CDB-Text CDB-Size-large u-mainTextColor u-secondaryTextColor u-bSpace--m\">\\n    ' +\n__e( _t('components.modals.assets-picker.upload-file-url') ) +\n'\\n  </h3>\\n  <p class=\"CDB-Text CDB-Size-medium u-altTextColor\">\\n    ' +\n__e( _t('components.modals.assets-picker.upload-desc') ) +\n'\\n  </p>\\n</div>\\n<div class=\"Form-row Form-row--centered\">\\n  <div class=\"Form-rowData Form-rowData--med Form-rowData--noMargin js-dropzone\">\\n    <div class=\"Form-upload\">\\n      <label class=\"Form-fileLabel js-fileLabel CDB-Text CDB-Size-medium\">' +\n__e( _t('components.modals.assets-picker.drag-and-drop') ) +\n'</label>\\n      <label class=\"Form-fileLabel Form-fileLabel--error CDB-Text CDB-Size-small js-fileError\"></label>\\n      <div class=\"Form-file\">\\n        <span class=\"CDB-Button CDB-Button--primary Form-fileButton CDB-Button-Text CDB-Text is-semibold CDB-Size-small u-upperCase js-upload\">\\n          ' +\n__e( _t('components.modals.assets-picker.browse') ) +\n'\\n        </span>\\n      </div>\\n    </div>\\n  </div>\\n  <span class=\"u-lSpace--xl u-rSpace--xl u-flex u-alignCenter CDB-Text CDB-Size-medium u-altTextColor\">' +\n__e( _t('components.modals.assets-picker.or') ) +\n'</span>\\n  <div class=\"Form-rowData Form-rowData--noMargin Form-rowData--med\">\\n    <input type=\"text\" class=\"Form-input Form-input--med has-submit js-url CDB-Text CDB-Size-medium\" value=\"\" placeholder=\"https://carto.com/markers/pin.png\" />\\n    <button type=\"submit\" class=\"CDB-Text CDB-Size-small Form-inputSubmit u-upperCase u-actionTextColor Form-inputSubmit js-submit\">\\n      <span>' +\n__e( _t('components.modals.assets-picker.submit') ) +\n'</span>\\n    </button>\\n    <div class=\"Form-inputError CDB-Text js-url-error\">' +\n__e( _t('components.modals.assets-picker.incorrect-url') ) +\n'</div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<nav class=\"CDB-NavMenu u-bSpace--m u-inner js-nav\"></nav>\\n<ul class=\"AssetsList js-assets\"></ul>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"js-selector\"></div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"Editor-boxModalContent js-assets\">\\n  <h2 class=\"CDB-Text CDB-Size-small u-bSpace--m u-upperCase\">\\n    ' +\n__e( _t('form-components.editors.fill.image.recently-title') ) +\n'\\n  </h2>\\n</div>\\n<div class=\"CustomRamp-list\">\\n  <div class=\"CustomList-item CustomList-item--add\">\\n    <button class=\"CDB-ListDecoration-itemLink CDB-Text CDB-Size-medium u-actionTextColor js-show-collection\" type=\"button\">\\n      ' +\n__e( _t('form-components.editors.fill.image.show-all') ) +\n'\\n    </button>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"CDB-Box-modalHeader\">\\n  <ul class=\"CDB-Box-modalHeaderItem CDB-Box-modalHeaderItem CDB-Box-modalHeaderItem--paddingHorizontal\">\\n    <li class=\"CDB-ListDecoration-item CDB-ListDecoration-itemDisplay--flex CDB-Text CDB-Size-medium u-secondaryTextColor u-ellipsis\">\\n      <div class=\"CDB-ListDecoration-secondaryContainer\">\\n        <button class=\"u-rSpace u-actionTextColor js-back\" type=\"button\">\\n          <i class=\"CDB-IconFont CDB-IconFont-arrowPrev Size-large\"></i>\\n        </button>\\n      </div>\\n\\n      <div class=\"CDB-ListDecoration-secondaryContainer CDB-ListDecoration-title u-rSpace--m\">\\n        <span class=\"label u-ellipsis js-label\">\\n          ' +\n__e( label ) +\n'\\n        </span>\\n      </div>\\n\\n      ';\n if (isCategorized && imageEnabled) { ;\n__p += '\\n        <div class=\\'CDB-ListDecoration-secondaryContainer\\'>\\n          <nav class=\\'CDB-NavMenu\\'>\\n            <ul class=\\'CDB-NavMenu-Inner CDB-NavMenu-inner--no-margin js-menu\\'>\\n              <li class=\\'CDB-NavMenu-item is-selected\\'>\\n                <div class=\\'CDB-NavMenu-link CDB-ListDecoration-rampNav-item\\'>\\n                  <button class=\\'ColorBar ColorBar--disableHighlight CDB-ListDecoration-rampItemBar u-rSpace--xl js-colorPicker\\' type=\"button\"\\n                    style=\"background-color: ' +\n((__t = ( color )) == null ? '' : __t) +\n';\"></button>\\n                </div>\\n              </li>\\n              <li class=\\'CDB-NavMenu-item\\'>\\n                <div class=\\'CDB-NavMenu-link CDB-ListDecoration-rampNav-item\\'>\\n                  ';\n if (image) { ;\n__p += '\\n                    <button class=\"CDB-ListDecoration-rampImg js-image-container\" type=\"button\"></button>\\n                    ';\n } else { ;\n__p += '\\n                      <button class=\"CDB-ListDecoration-rampImg CDB-Text u-actionTextColor js-assetPicker\" type=\"button\">\\n                        ' +\n((__t = ( _t('form-components.editors.fill.input-color.img') )) == null ? '' : __t) +\n'\\n                      </button>\\n                      ';\n } ;\n__p += '\\n                </div>\\n              </li>\\n            </ul>\\n          </nav>\\n        </div>\\n        ';\n } ;\n__p += '\\n    </li>\\n  </ul>\\n</div>\\n\\n<div class=\"CDB-Box-modalHeader\">\\n  <ul class=\"CDB-Box-modalHeaderItem CDB-Box-modalHeaderItem--block CDB-Box-modalHeaderItem--paddingHorizontal\">\\n    <li class=\"CDB-ListDecoration-item CDB-ListDecoration-itemPadding--vertical CDB-Text CDB-Size-medium u-secondaryTextColor\">\\n      <ul class=\"ColorBarContainer ColorBarContainer--rampEditing\">\\n        ';\n _.each(ramp, function (color, i) { ;\n__p += '\\n          <li class=\"ColorBar ColorBar--spaceless ColorBar--clickable is-link js-color' +\n__e( i === index ? ' is-selected' : '' ) +\n'\" data-label=\"' +\n__e( color.title ) +\n'\"\\n            data-color=\"' +\n__e( color.color ) +\n'\" style=\"background-color: ' +\n__e( color.color ) +\n';\"></li>\\n          ';\n }); ;\n__p += '\\n      </ul>\\n      <div class=\"OpacityEditor\">\\n        <div class=\"OpacityEditor-slider js-slider\"></div>\\n        <div class=\"OpacityEditor-inputWrapper\">\\n          <input type=\"text\" class=\"CDB-InputText ColorPicker-input js-a\" value=\"' +\n__e( opacity ) +\n'\">\\n        </div>\\n      </div>\\n    </li>\\n  </ul>\\n</div>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"js-header\"></div>\\n<div class=\"js-content\"></div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n\n if (showCategories) { ;\n__p += '\\n  <ul class=\"ColorsBar ';\n if (help) { ;\n__p += ' js-help';\n } ;\n__p += '\" ';\n if (help) { ;\n__p += ' data-tooltip=\"' +\n__e( help ) +\n'\"';\n } ;\n__p += '>\\n    ';\n _.each(value, function (color) { ;\n__p += '\\n      <li class=\"ColorBar ' +\n__e( categoryImagesPresent ? 'ColorBar--spaceSmall' : 'ColorBar--spaceMedium' ) +\n'\" style=\"background-color: ' +\n__e( color ) +\n'\"></li>\\n    ';\n }); ;\n__p += '\\n  </ul>\\n';\n } else { ;\n__p += '\\n  <button type=\"button\" class=\"Editor-fillContainer ';\n if (help) { ;\n__p += ' js-help';\n } ;\n__p += '\" ';\n if (help) { ;\n__p += ' data-tooltip=\"' +\n__e( help ) +\n'\"';\n } ;\n__p += '>\\n    <ul class=\"ColorBarContainer\">\\n      ';\n if (_.isArray(value)) { ;\n__p += '\\n        <li class=\"ColorBar ColorBar-gradient\" style=\"background: linear-gradient(90deg,' +\n__e( value.join(',') ) +\n')\"></li>\\n      ';\n } else { ;\n__p += '\\n        <li class=\"ColorBar\" style=\"background-color: ' +\n__e( value ) +\n'\"></li>\\n      ';\n } ;\n__p += '\\n    </ul>\\n  </button>\\n';\n } ;\n__p += '\\n\\n';\n if (imageURL && kind !== 'custom-marker') { ;\n__p += '\\n<button type=\"button\" class=\"Editor-fillImage ';\n if (help) { ;\n__p += ' js-help';\n } ;\n__p += '\" ';\n if (help) { ;\n__p += ' data-tooltip=\"' +\n__e( help ) +\n'\"';\n } ;\n__p += '>\\n  <div class=\"js-image-container\"></div>\\n</button>\\n';\n } ;\n__p += '\\n\\n';\n if ((!imageURL && categoryImagesPresent) || (imageURL && kind === 'custom-marker')) { ;\n__p += '\\n<button type=\"button\" class=\"Editor-fillImage ';\n if (help) { ;\n__p += ' js-help';\n } ;\n__p += '\" ';\n if (help) { ;\n__p += ' data-tooltip=\"' +\n__e( help ) +\n'\"';\n } ;\n__p += '>\\n  <div class=\\'Editor-categoryImagesTag CDB-Text CDB-FontSize-small u-altTextColor is-semibold u-upperCase\\'>' +\n((__t = ( _t('form-components.editors.fill.input-color.img') )) == null ? '' : __t) +\n'</div>\\n</button>\\n';\n } ;\n__p += '\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"CDB-ListDecoration-itemLink ';\n if (isSelected) { ;\n__p += ' is-selected ';\n } ;\n__p += '\">\\n  <div class=\"u-flex u-justifySpace u-alignCenter\">\\n    <span class=\"RampItem-text CDB-Text u-ellipsis u-actionTextColor\" title=\"' +\n__e( name ) +\n'\">' +\n__e( name ) +\n'</span>\\n\\n    <div class=\\'RampItem-secondaryContainer\\'>\\n      <div class=\"ColorBar ColorBar--disableHighlight RampItem-bar js-colorPicker\" style=\"background-color: ' +\n__e( val ) +\n';\"></div>\\n\\n      ';\n if (imageEnabled) { ;\n__p += '\\n        <div class=\\'RampItem-img\\'>\\n          ';\n if (image) { ;\n__p += '\\n            <div class=\\'js-image-container u-flex\\'></div>\\n          ';\n } else { ;\n__p += '\\n            <button class=\"CDB-Text u-actionTextColor js-assetPicker\">' +\n((__t = ( _t('form-components.editors.fill.input-color.img') )) == null ? '' : __t) +\n'</button>\\n          ';\n } ;\n__p += '\\n        </div>\\n      ';\n } ;\n__p += '\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"CDB-Box-modalHeader\">\\n  <ul class=\"CDB-Box-modalHeaderItem CDB-Box-modalHeaderItem--block CDB-Box-modalHeaderItem--paddingHorizontal\">\\n    <li class=\"CDB-ListDecoration-item CDB-ListDecoration-itemPadding--vertical CDB-Text CDB-Size-medium u-secondaryTextColor\">\\n      <ul class=\"u-flex u-justifySpace\">\\n        <li class=\"u-flex\">\\n          <button class=\"u-rSpace u-actionTextColor js-back\">\\n            <i class=\"CDB-IconFont CDB-IconFont-arrowPrev Size-large\"></i>\\n          </button>\\n          <span class=\"label\"> Color Schemes </span>\\n        </li>\\n      </ul>\\n    </li>\\n  </ul>\\n</div>\\n\\n<div class=\"CDB-Box-modalHeader\">\\n  <ul class=\"CDB-Box-modalHeaderItem CDB-Box-modalHeaderItem--block CDB-Box-modalHeaderItem--paddingHorizontal\">\\n    <li class=\"CDB-ListDecoration-item CDB-ListDecoration-itemPadding--vertical CDB-Text CDB-Size-medium u-secondaryTextColor u-flex u-alignCenter\">\\n      <ul class=\"ColorBarContainer\">\\n        ';\n _.each(range, function (color) { ;\n__p += '\\n          <li class=\"ColorBar ColorBar--spaceless ColorBar--clickable js-color\" style=\"background-color: ' +\n__e( color ) +\n';\"></li>\\n          ';\n }); ;\n__p += '\\n      </ul>\\n    </li>\\n  </ul>\\n</div>\\n<div class=\"js-content\"></div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"ColorBarWrapper--withInvertLink CDB-ListDecoration-itemLink CDB-ListDecoration-itemLink--double js-listItemLink ';\n if (isSelected) { ;\n__p += ' is-selected ';\n } ;\n__p += '\">\\n  <ul class=\"ColorBarContainer\">\\n    ';\n _.each(name, function (color) { ;\n__p += '\\n    <li class=\"ColorBar ColorBar--disableHighlight ColorBar--spaceless\" style=\"background-color: ' +\n__e( color ) +\n';\"></li>\\n    ';\n }); ;\n__p += '\\n  </ul>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<li class=\"CDB-ListDecoration-item CustomList-item CustomRamp js-customRampItem\">\\n  <div class=\"CustomRamp-listOptions CDB-ListDecoration-itemLink CDB-ListDecoration-itemLink--double js-customRamp js-listItemLink is-selected\">\\n    <ul class=\"ColorBarContainer\">\\n      ';\n _.each(customRamp, function (color) { ;\n__p += '\\n      <li class=\"ColorBar ColorBar--disableHighlight ColorBar--spaceless\" style=\"background-color: ' +\n__e( color ) +\n';\"></li>\\n      ';\n }); ;\n__p += '\\n    </ul>\\n  </div>\\n  <button class=\"CDB-ListDecoration-itemLink CustomRamp-clear js-clear\">\\n    <div class=\"CDB-Shape\">\\n      <div class=\"CDB-Shape-close is-blue is-large\"></div>\\n    </div>\\n  </button>\\n</li>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"js-rampsList\"></div>\\n\\n<!--  Custom Color Set -->\\n<div class=\"CDB-Text CDB-Size-medium CustomRamp-list CustomList-listWrapper\">\\n  <ul class=\"CustomList-list js-customList\">\\n    <li class=\"CDB-ListDecoration-item CustomList-item CustomList-item--add js-customize\">\\n      <button class=\"CDB-ListDecoration-itemLink js-listItemLink u-actionTextColor\">' +\n__e( _t('form-components.editors.fill.customize') ) +\n'</button>\\n    </li>\\n  </ul>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"CDB-Box-modalHeader js-prevStep\">\\n  <ul class=\"CDB-Box-modalHeaderItem CDB-Box-modalHeaderItem--block CDB-Box-modalHeaderItem--paddingHorizontal\">\\n    <li class=\"CDB-ListDecoration-item CDB-ListDecoration-itemPadding--vertical CDB-Text CDB-Size-medium u-secondaryTextColor\">\\n      <ul class=\"u-flex u-justifySpace\">\\n        <li class=\"u-flex\">\\n          <button class=\"u-rSpace u-actionTextColor js-back\">\\n            <i class=\"CDB-IconFont CDB-IconFont-arrowPrev Size-large\"></i>\\n          </button>\\n          <span class=\"label js-label\">' +\n__e( attribute ) +\n'</span>\\n        </li>\\n        ';\n if ((columnType !== 'number') && !hideQuantification) { ;\n__p += '\\n          <li class=\"u-flex\">\\n            ' +\n__e( _t('form-components.editors.fill.quantification.methods.' + quantification) ) +\n'\\n            <button class=\"CDB-Shape u-lSpace js-quantification\">\\n              <div class=\"CDB-Shape-threePoints is-horizontal ';\n if (columnType !== 'string') { ;\n__p += 'is-blue';\n } ;\n__p += ' is-small\">\\n                <div class=\"CDB-Shape-threePointsItem\"></div>\\n                <div class=\"CDB-Shape-threePointsItem\"></div>\\n                <div class=\"CDB-Shape-threePointsItem\"></div>\\n              </div>\\n            </button>\\n          </li>\\n        ';\n } ;\n__p += '\\n      </ul>\\n    </li>\\n  </ul>\\n</div>\\n\\n';\n if (status === 'loading') { ;\n__p += '\\n  <div class=\"InputColorCategory-loader js-loader\">\\n    <div class=\"CDB-LoaderIcon is-dark\">\\n      <svg class=\"CDB-LoaderIcon-spinner\" viewBox=\"0 0 50 50\">\\n        <circle class=\"CDB-LoaderIcon-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"></circle>\\n      </svg>\\n    </div>\\n  </div>\\n';\n } else if (status === 'error') { ;\n__p += '\\n  <div class=\"u-flex u-alignCenter u-justifyCenter CDB-Text CDB-Size-medium u-bSpace--m u-tSpace--m u-errorTextColor\">' +\n__e( _t('form-components.editors.fill.error') ) +\n'</div>\\n';\n } else { ;\n__p += '\\n\\n  <!-- Stack Layout View -->\\n  <div class=\"js-content\"></div>\\n\\n';\n } ;\n__p += '\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<li class=\"CDB-ListDecoration-item CustomList-item CustomRamp js-customRampItem\">\\n  <div class=\"CustomRamp-listOptions CDB-ListDecoration-itemLink CDB-ListDecoration-itemLink--double js-customRamp js-listItemLink is-selected\">\\n    <ul class=\"ColorBarContainer\">\\n      ';\n _.each(customRamp, function (color) { ;\n__p += '\\n      <li class=\"ColorBar ColorBar--spaceless\" style=\"background-color: ' +\n__e( color ) +\n';\"></li>\\n      ';\n }); ;\n__p += '\\n    </ul>\\n  </div>\\n  <button class=\"CDB-ListDecoration-itemLink CustomRamp-clear js-clear\">\\n    <div class=\"CDB-Shape\">\\n      <div class=\"CDB-Shape-close is-blue is-large\"></div>\\n    </div>\\n  </button>\\n</li>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"CDB-Box-modalHeader\">\\n  <ul class=\"CDB-Box-modalHeaderItem CDB-Box-modalHeaderItem--block CDB-Box-modalHeaderItem--paddingHorizontal\">\\n    <li class=\"InputColor-modalHeader CDB-ListDecoration-item CDB-ListDecoration-itemPadding--vertical CDB-Text CDB-Size-medium u-secondaryTextColor\">\\n      <div class=\"u-flex u-alignStart u-ellipsis\">\\n        <button class=\"u-rSpace u-actionTextColor js-back\">\\n          <i class=\"CDB-IconFont CDB-IconFont-arrowPrev Size-large\"></i>\\n        </button>\\n        <div class=\"u-ellipsis\">\\n          ' +\n__e( attribute ) +\n'\\n        </div>\\n      </div>\\n    </li>\\n    <li class=\"CDB-ListDecoration-item CDB-ListDecoration-itemPadding--vertical CDB-Text CDB-Size-medium u-secondaryTextColor\">\\n      <ul class=\"u-flex u-justifySpace\">\\n        <li class=\"u-flex\">\\n          ' +\n__e( bins ) +\n' ' +\n__e( _t('form-components.editors.fill.input-ramp.buckets', { smart_count: bins }) ) +\n'\\n          <button class=\"CDB-Shape u-lSpace js-bins\">\\n            <div class=\"CDB-Shape-threePoints is-horizontal is-blue is-small\">\\n              <div class=\"CDB-Shape-threePointsItem\"></div>\\n              <div class=\"CDB-Shape-threePointsItem\"></div>\\n              <div class=\"CDB-Shape-threePointsItem\"></div>\\n            </div>\\n          </button>\\n        </li>\\n        <li class=\"u-flex\">\\n          ' +\n__e( _t('form-components.editors.fill.quantification.methods.' + quantification) ) +\n'\\n          <button class=\"CDB-Shape u-lSpace js-quantification\">\\n            <div class=\"CDB-Shape-threePoints is-horizontal is-blue is-small\">\\n              <div class=\"CDB-Shape-threePointsItem\"></div>\\n              <div class=\"CDB-Shape-threePointsItem\"></div>\\n              <div class=\"CDB-Shape-threePointsItem\"></div>\\n            </div>\\n          </button>\\n        </li>\\n      </ul>\\n    </li>\\n  </ul>\\n</div>\\n<div class=\"js-content\"></div>\\n<div class=\"CDB-Text CDB-Size-medium CustomRamp-list CustomList-listWrapper\">\\n  <ul class=\"CustomList-list js-customList\">\\n    <li class=\"CDB-ListDecoration-item CustomList-item CustomList-item--add\">\\n      <button class=\"CDB-ListDecoration-itemLink js-listItemLink js-customize u-actionTextColor\">' +\n__e( _t('form-components.editors.fill.customize') ) +\n'</button>\\n    </li>\\n  </ul>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"ColorBarWrapper--withInvertLink CDB-ListDecoration-itemLink CDB-ListDecoration-itemLink--double js-listItemLink ';\n if (isSelected) { ;\n__p += ' is-selected ';\n } ;\n__p += '\">\\n  <ul class=\"ColorBarContainer\">\\n    ';\n _.each(name, function (color) { ;\n__p += '\\n    <li class=\"ColorBar ColorBar--spaceless\" style=\"background-color: ' +\n__e( color ) +\n';\"></li>\\n    ';\n }); ;\n__p += '\\n  </ul>\\n</div>\\n<button class=\"ColorBar-invertLink js-invert\" data-event=\"invert\"></button>\\n\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<ul class=\"CDB-OptionInput-container CDB-OptionInput-container--border js-content\"></ul>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"CDB-Box-modalHeader\">\\n  <ul class=\"CDB-Box-modalHeaderItem CDB-Box-modalHeaderItem--block CDB-Box-modalHeaderItem--paddingHorizontal\">\\n    <li class=\"InputColor-modalHeader CDB-ListDecoration-item CDB-ListDecoration-itemPadding--vertical CDB-Text CDB-Size-medium u-secondaryTextColor\">\\n      <div class=\"u-flex u-alignStart u-ellipsis\">\\n        <button class=\"u-rSpace u-actionTextColor js-back\">\\n          <i class=\"CDB-IconFont CDB-IconFont-arrowPrev Size-large\"></i>\\n        </button>\\n        <div class=\"u-ellipsis\">\\n          ' +\n__e( attribute ) +\n'\\n        </div>\\n      </div>\\n    </li>\\n    <li class=\"CDB-ListDecoration-item CDB-ListDecoration-itemPadding--vertical CDB-Text CDB-Size-medium u-secondaryTextColor\">\\n      <ul class=\"u-flex u-justifySpace\">\\n        <li class=\"u-flex\">\\n          ' +\n__e( bins ) +\n' ' +\n__e( _t('form-components.editors.fill.input-ramp.buckets', { smart_count: bins }) ) +\n'\\n          <button class=\"CDB-Shape u-lSpace js-bins\">\\n            <div class=\"CDB-Shape-threePoints is-horizontal is-blue is-small\">\\n              <div class=\"CDB-Shape-threePointsItem\"></div>\\n              <div class=\"CDB-Shape-threePointsItem\"></div>\\n              <div class=\"CDB-Shape-threePointsItem\"></div>\\n            </div>\\n          </button>\\n        </li>\\n        <li class=\"u-flex\">\\n          ' +\n__e( _t('form-components.editors.fill.quantification.methods.' + quantification) ) +\n'\\n          <button class=\"CDB-Shape u-lSpace js-quantification\">\\n            <div class=\"CDB-Shape-threePoints is-horizontal is-blue is-small\">\\n              <div class=\"CDB-Shape-threePointsItem\"></div>\\n              <div class=\"CDB-Shape-threePointsItem\"></div>\\n              <div class=\"CDB-Shape-threePointsItem\"></div>\\n            </div>\\n          </button>\\n        </li>\\n      </ul>\\n    </li>\\n  </ul>\\n</div>\\n<div class=\"js-content\"></div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<button type=\"button\" class=\"CDB-OptionInput-content js-value ';\n if (help) { ;\n__p += ' js-help';\n } ;\n__p += '\" ';\n if (help) { ;\n__p += ' data-tooltip=\"' +\n__e( help ) +\n'\"';\n } ;\n__p += '>' +\n__e( value ) +\n'</button>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"IntermediateInfo\">\\n  <div class=\"CDB-LoaderIcon CDB-LoaderIcon--big is-dark js-loader\">\\n    <svg class=\"CDB-LoaderIcon-spinner\" viewbox=\"0 0 50 50\">\\n      <circle class=\"CDB-LoaderIcon-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"/>\\n    </svg>\\n  </div>\\n  <h4 class=\"CDB-Text CDB-Size-large u-mainTextColor u-secondaryTextColor u-bSpace--m u-tSpace-xl\">' +\n__e( title ) +\n'</h4>\\n  <div class=\"CDB-Text CDB-Size-medium u-altTextColor\">' +\n((__t = ( descHTML )) == null ? '' : __t) +\n'</div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<p class=\"CDB-Text CDB-Size-medium u-altTextColor\">\\n  \"' +\n((__t = ( quote )) == null ? '' : __t) +\n'\"\\n</p>\\n';\n if (author) { ;\n__p += '\\n  <p class=\"CDB-Text CDB-Size-medium u-altTextColor u-tSpace\"><i>– ' +\n__e( author ) +\n'</i></p>\\n';\n } ;\n__p += '\\n';\n\n}\nreturn __p\n}","var storage = (function () {\n  var storageName = 'cdb';\n  var version = '0.1.0';\n  var mainStorageKey;\n  var initialized = false;\n  var userModel;\n\n  function init (key, opts) {\n    if (!key) {\n      throw new Error('key is required');\n    }\n\n    if (!userModel && !opts) {\n      throw new Error('userModel is required');\n    }\n\n    if (!userModel && opts && opts.userModel) {\n      userModel = opts.userModel;\n    }\n\n    mainStorageKey = key;\n    initialized = true;\n  }\n\n  function getKey (key) {\n    return [storageName, version, userModel.get('username'), mainStorageKey, key].join('.');\n  }\n\n  function isSupported () {\n    try {\n      return 'localStorage' in window && window['localStorage'] !== null;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  return {\n    init: function (key, opts) {\n      if (!isSupported()) throw new Error('localStorage not supported in your browser');\n      init(key, opts);\n    },\n\n    get: function (key) {\n      if (!initialized) {\n        init();\n      }\n      var storageKey = getKey(key);\n      return localStorage[storageKey];\n    },\n\n    set: function (key, value) {\n      if (!initialized) {\n        init();\n      }\n      var storageKey = getKey(key);\n      localStorage[storageKey] = value;\n    },\n\n    delete: function (key) {\n      if (!initialized) {\n        init();\n      }\n\n      var storageKey = getKey(key);\n      delete localStorage[storageKey];\n    }\n  };\n})();\n\nmodule.exports = storage;\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"Modal\">\\n  <div class=\"Modal-header\">\\n    <div class=\"Modal-headerContainer\">\\n      <h2 class=\"CDB-Text CDB-Size-huge is-light u-bSpace\">' +\n__e( _t('components.modals.add-analysis.modal-title') ) +\n'</h2>\\n      <h3 class=\"CDB-Text CDB-Size-medium u-secondaryTextColor\">' +\n__e( _t('components.modals.add-analysis.modal-desc') ) +\n'</h3>\\n    </div>\\n  </div>\\n  <div class=\"Modal-container Modal-container--analysis\">\\n    <div class=\"Modal-inner js-body\">\\n    </div>\\n  </div>\\n  <div class=\"Modal-footer\">\\n    <div class=\"Modal-footerContainer u-flex u-justifyEnd\">\\n      <button class=\"CDB-Button CDB-Button--primary CDB-Button--big is-disabled js-add\">\\n        <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">' +\n__e( _t('components.modals.add-analysis.add-btn') ) +\n'</span>\\n      </button>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar AnalysisOptionsCollection = require('./analysis-options-collection');\nvar analysisOptions = require('./analysis-options');\nvar AnalysisViewPane = require('./analysis-view-pane');\nvar renderLoading = require('builder/components/loading/render-loading');\nvar DataServicesApiCheck = require('builder/editor/layers/layer-content-views/analyses/analyses-quota/analyses-quota-info');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'modalModel',\n  'configModel',\n  'userModel',\n  'layerDefinitionModel'\n];\n\n/**\n * View to add a new analysis node.\n * Expected to be rendered in a modal.\n */\nmodule.exports = CoreView.extend({\n  className: 'Dialog-content Dialog-content--expanded',\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._analysisDefinitionNodeModel = this._layerDefinitionModel.getAnalysisDefinitionNodeModel();\n\n    this._queryGeometryModel = this._analysisDefinitionNodeModel.queryGeometryModel;\n    this.listenTo(this._queryGeometryModel, 'change', this.render);\n\n    this._analysisOptions = analysisOptions({\n      userModel: this._userModel,\n      configModel: this._configModel,\n      queryGeometryModel: this._queryGeometryModel\n    });\n    this._analysisOptionsCollection = new AnalysisOptionsCollection();\n\n    this._dataservicesApiHealth = DataServicesApiCheck.get();\n\n    if (!this._isFetchingGeometry()) {\n      this._queryGeometryModel.fetch();\n    }\n\n    this._initOptions();\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    var render = this.render.bind(this);\n    var dsApiNeedsCheck = this._dataservicesApiHealth.needsCheck();\n    if (dsApiNeedsCheck) {\n      this._dataservicesApiHealth.fetch({\n        success: render\n      });\n    }\n\n    if (this._isFetchingGeometry() || dsApiNeedsCheck) {\n      this._renderLoadingView();\n    } else {\n      this._renderStackView();\n    }\n\n    return this;\n  },\n\n  _renderLoadingView: function () {\n    this.$el.html(\n      renderLoading({\n        title: _t('components.modals.add-widgets.loading-title')\n      })\n    );\n  },\n\n  _renderStackView: function () {\n    var view = new AnalysisViewPane({\n      modalModel: this._modalModel,\n      analysisOptions: this._analysisOptions,\n      analysisOptionsCollection: this._analysisOptionsCollection,\n      layerDefinitionModel: this._layerDefinitionModel,\n      queryGeometryModel: this._queryGeometryModel\n    });\n\n    this.$el.html(view.render().$el);\n    this.addView(view);\n  },\n\n  _isFetchingGeometry: function () {\n    return this._queryGeometryModel.get('status') === 'fetching';\n  },\n\n  _initOptions: function () {\n    // Flatten the options hierarchy to a flat array structure that's easier to handle programmatically.\n    var modelsAttrs = _.reduce(Object.keys(this._analysisOptions), function (memo, category) {\n      var categoryDef = this._analysisOptions[category];\n      categoryDef.analyses.forEach(function (d) {\n        memo.push(_.extend({}, d, { category: category, type: d.nodeAttrs.type }));\n      });\n\n      return memo;\n    }, [], this);\n\n    this._analysisOptionsCollection.reset(modelsAttrs);\n  }\n});\n","var _ = require('underscore');\nvar AnalysisCategoryView = require('./analysis-category-pane-view');\n\nmodule.exports = function (analysisOptions) {\n  return [{\n    type: 'create_clean',\n    createTabPaneItem: function (optionsCollection, opts) {\n      return {\n        label: _t('analysis-category.create-clean'),\n        name: 'create_clean',\n        createContentView: function () {\n          return new AnalysisCategoryView(_.extend({\n            analysisOptions: analysisOptions,\n            analysisType: 'create_clean',\n            collection: optionsCollection\n          }, opts));\n        }\n      };\n    }\n  }, {\n    type: 'analyze_predict',\n    createTabPaneItem: function (optionsCollection, opts) {\n      return {\n        label: _t('analysis-category.analyze-predict'),\n        name: 'analyze_predict',\n        createContentView: function () {\n          return new AnalysisCategoryView(_.extend({\n            analysisOptions: analysisOptions,\n            analysisType: 'analyze_predict',\n            collection: optionsCollection\n          }, opts));\n        }\n      };\n    }\n  }, {\n    type: 'data_transformation',\n    createTabPaneItem: function (optionsCollection, opts) {\n      return {\n        label: _t('analysis-category.data-transformation'),\n        name: 'data_transformation',\n        createContentView: function () {\n          return new AnalysisCategoryView(_.extend({\n            analysisOptions: analysisOptions,\n            analysisType: 'data_transformation',\n            collection: optionsCollection\n          }, opts));\n        }\n      };\n    }\n  }];\n};\n","var CoreView = require('backbone/core-view');\nvar ScrollView = require('builder/components/scroll/scroll-view');\nvar AnalysisCategoryPane = require('./analysis-category-pane');\n\n/**\n * View to add a new analysis node.\n * Expected to be rendered in a modal.\n */\nmodule.exports = CoreView.extend({\n  className: 'Dialog-content Dialog-content--expanded',\n\n  initialize: function (opts) {\n    if (!opts.modalModel) throw new Error('modalModel is required');\n    if (!opts.analysisOptionsCollection) throw new Error('analysisOptionsCollection is required');\n    if (!opts.analysisType) throw new Error('analysisType is required');\n    if (!opts.analysisOptions) throw new Error('analysisOptions is required');\n    if (!opts.queryGeometryModel) throw new Error('queryGeometryModel is required');\n\n    this._modalModel = opts.modalModel;\n    this._queryGeometryModel = opts.queryGeometryModel;\n    this._analysisOptionsCollection = opts.analysisOptionsCollection;\n    this._analysisType = opts.analysisType;\n    this._analysisOptions = opts.analysisOptions;\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    var view = new ScrollView({\n      createContentView: function () {\n        return new AnalysisCategoryPane({\n          collection: this._analysisOptionsCollection,\n          title: this.options.categoryTitle || this.options.category,\n          category: this._analysisType === 'all' ? null : this._analysisType,\n          categoryTitle: this._analysisType === 'all' ? null : this._analysisOptions[this._analysisType].label,\n          simpleGeometryType: this._queryGeometryModel.get('simple_geom')\n        });\n      }.bind(this)\n    });\n\n    this.addView(view);\n    this.$el.append(view.render().el);\n\n    return this;\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar AnalysisOptionView = require('./analysis-option-view');\nvar template = require('./analysis-category.tpl');\n\n/**\n * View to render an individual analysis category and its analysis options\n */\nmodule.exports = CoreView.extend({\n\n  className: 'Modal-analysisContainer',\n\n  options: {\n    category: '',\n    categoryTitle: '',\n    simpleGeometryType: ''\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this.$el.html(this._html());\n    this.collection.each(this._renderOption, this);\n\n    return this;\n  },\n\n  _html: function () {\n    return template({\n      title: this.options.title\n    });\n  },\n\n  _renderOption: function (analysisOptionModel) {\n    if (this.options.category && !analysisOptionModel.belongsTo(this.options.category)) {\n      return;\n    }\n\n    var view = new AnalysisOptionView({\n      model: analysisOptionModel,\n      simpleGeometryTypeInput: this.options.simpleGeometryType\n    });\n\n    this.addView(view);\n    this._$list().append(view.render().el);\n  },\n\n  _$list: function () {\n    return this.$('.js-analyses-list');\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<ul class=\"ModalBlockList js-analyses-list\"></ul>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar camshaftReference = require('builder/data/camshaft-reference');\nvar nodeIds = require('builder/value-objects/analysis-node-ids');\n\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    title: '',\n    category: '',\n    selected: false,\n    type_group: '',\n    desc: '',\n    link: ''\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.nodeAttrs) throw new Error('nodeAttrs is required');\n\n    this._nodeAttrs = opts.nodeAttrs;\n  },\n\n  belongsTo: function (category) {\n    return this.get('category') === category;\n  },\n\n  acceptsGeometryTypeAsInput: function (simpleGeometryType) {\n    if (this.get('dummy') === true) return true;\n    return camshaftReference.isValidInputGeometryForType(simpleGeometryType, this._nodeAttrs.type);\n  },\n\n  getValidInputGeometries: function () {\n    return camshaftReference.getValidInputGeometriesForType(this._nodeAttrs.type);\n  },\n\n  getFormAttrs: function (layerDefModel) {\n    var letter = layerDefModel.get('letter');\n    var sourceId = layerDefModel.get('source');\n\n    return _.extend(\n      {\n        source: sourceId,\n        id: letter === nodeIds.letter(sourceId)\n          ? nodeIds.next(sourceId)\n          : letter + '1'\n      },\n      this._nodeAttrs\n    );\n  }\n\n});\n","var _ = require('underscore');\nvar AnalysisOptionModel = require('./analysis-option-model');\n\n/**\n * Custom model for deprecated SQL function type, to set correct primary source\n */\nmodule.exports = AnalysisOptionModel.extend({\n\n  /**\n   * @override {AnalysisOptionModel.getNodeAttrs}\n   */\n  getFormAttrs: function (layerDefModel) {\n    var attrs = AnalysisOptionModel.prototype.getFormAttrs.apply(this, arguments);\n    delete attrs.source;\n\n    _.extend(attrs, {\n      primary_source: layerDefModel.get('source')\n    });\n\n    return attrs;\n  }\n});\n","var _ = require('underscore');\nvar AnalysisOptionModel = require('./analysis-option-model');\nvar camshaftReference = require('builder/data/camshaft-reference');\n\n/**\n * Model to represent a generated analysis option.\n */\nmodule.exports = AnalysisOptionModel.extend({\n\n  /**\n   * @override {AnalysisOptionModel.getNodeAttrs}\n   */\n  getFormAttrs: function () {\n    var attrs = AnalysisOptionModel.prototype.getFormAttrs.apply(this, arguments);\n\n    this._removeSourceIfThereAreMultipleSources(attrs);\n\n    return attrs;\n  },\n\n  _removeSourceIfThereAreMultipleSources: function (attrs) {\n    var params = camshaftReference.paramsForType(attrs.type);\n    var sourceCount = _.reduce(Object.keys(params), function (memo, name) {\n      if (params[name].type === 'node') {\n        memo++;\n      }\n      return memo;\n    }, 0);\n\n    if (sourceCount > 1) {\n      delete attrs.source;\n    }\n  }\n\n});\n","var _ = require('underscore');\nvar AnalysisOptionModel = require('./analysis-option-model');\n\n/**\n * Custom model for merge type, to set correct primary source\n */\nmodule.exports = AnalysisOptionModel.extend({\n\n  /**\n   * @override {AnalysisOptionModel.getNodeAttrs}\n   */\n  getFormAttrs: function (layerDefModel) {\n    var attrs = AnalysisOptionModel.prototype.getFormAttrs.apply(this, arguments);\n    delete attrs.source;\n\n    _.extend(attrs, {\n      primary_source_name: 'left_source',\n      left_source: layerDefModel.get('source')\n    });\n\n    return attrs;\n  }\n\n});\n","var _ = require('underscore');\nvar $ = require('jquery');\nvar CoreView = require('backbone/core-view');\nvar template = require('./analysis-option.tpl');\nvar Analyses = require('builder/data/analyses');\n\n/**\n * View for an individual analysis option.\n */\nmodule.exports = CoreView.extend({\n\n  tagName: 'li',\n  className: 'ModalBlockList-item',\n\n  events: {\n    'mouseenter': '_onMouseEnter',\n    'mouseleave': '_onMouseLeave',\n    'click': '_onClick'\n  },\n\n  initialize: function (opts) {\n    this._simpleGeometryTypeInput = opts.simpleGeometryTypeInput; // might be undefined/null, so don't check\n\n    this.listenTo(this.model, 'change:selected', this.render);\n  },\n\n  render: function () {\n    var props = this.model.pick('title', 'type_group', 'desc', 'selected', 'link');\n\n    props.enabled = this._acceptsInputGeometry();\n\n    if (!props.enabled) {\n      props.desc = this._disabledDesc();\n    }\n\n    var analysisType = this.model.get('type');\n    var analysisItem = Analyses.getAnalysisByType(analysisType);\n    var animationTemplate = analysisItem && analysisItem.animationTemplate;\n    var genericType = '';\n\n    if (animationTemplate) {\n      genericType = analysisItem.genericType || analysisType;\n    }\n\n    this.$el.html(template(_.extend(props, { type: genericType })));\n\n    if (animationTemplate) {\n      this.$('.js-animation').append(animationTemplate);\n    }\n\n    this.$el.toggleClass('is-selected', this.model.get('selected'));\n    this.$el.toggleClass('is-disabled', !props.enabled);\n\n    return this;\n  },\n\n  _onMouseEnter: function () {\n    if (this._acceptsInputGeometry()) {\n      this.$('.js-animation').addClass('has-autoplay');\n    }\n  },\n\n  _onMouseLeave: function () {\n    if (this._acceptsInputGeometry()) {\n      this.$('.js-animation').removeClass('has-autoplay');\n    }\n  },\n\n  _onClick: function (event) {\n    var linkClicked = event && event.target && $(event.target).hasClass('js-more');\n    if (!linkClicked && this._acceptsInputGeometry()) {\n      this.model.set('selected', true);\n    }\n  },\n\n  _disabledDesc: function (desc) {\n    return _t('components.modals.add-analysis.disabled-option-desc', {\n      simpleGeometryType: this._simpleGeometryTypeInput || _t('components.modals.add-analysis.unknown-geometry-type'),\n      requiredInputGeometries: this._getRequiredInputGeometries()\n    });\n  },\n\n  _getRequiredInputGeometries: function () {\n    return _t('components.modals.add-analysis.geometry-types.' + this.model.getValidInputGeometries());\n  },\n\n  _acceptsInputGeometry: function () {\n    return this.model.acceptsGeometryTypeAsInput(this._simpleGeometryTypeInput);\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"Analysis-animation ';\n if (enabled) { ;\n__p += 'is-enabled';\n } ;\n__p += ' ';\n if (type) { ;\n__p += 'is-' +\n__e( type );\n } ;\n__p += ' js-animation u-flex u-alignCenter u-justifyCenter\"></div>\\n<div class=\"Analysis-info u-flex\">\\n  <div class=\"ModalBlockList-itemInput CDB-Size-large\">\\n    <input class=\"CDB-Radio\" type=\"radio\" value=\"true\"\\n        ';\n if (selected) { ;\n__p += 'checked=\"checked\"';\n } ;\n__p += '\\n        ';\n if (!enabled) { ;\n__p += 'disabled=\"disabled\"';\n } ;\n__p += '\\n      >\\n    <span class=\"u-iBlock CDB-Radio-face\"></span>\\n  </div>\\n  <div class=\"ModalBlockList-inner\">\\n    <div class=\"ModalBlockList-item-header u-bSpace\">\\n      <h2 class=\"ModalBlockList-item-headerTitle CDB-Text CDB-Size-large u-rSpace--m u-ellipsis\" title=\"' +\n__e( title ) +\n'\">\\n        ' +\n__e( title ) +\n'\\n      </h2>\\n    </div>\\n    <div class=\"ModalBlockList-item-body\">\\n      <p class=\"CDB-Text CDB-Size-small u-secondaryTextColor\">\\n        ' +\n__e( desc ) +\n'\\n      </p>\\n      ';\n if (link) { ;\n__p += '\\n      <a class=\"Analysis-link CDB-Text CDB-Size-small u-tSpace-xl u-actionTextColor u-upperCase js-more track-' +\n__e( type ) +\n'-modal-learn\" href=\"' +\n__e( link ) +\n'\" target=\"_blank\">\\n        ' +\n__e( _t('components.modals.add-analysis.more-info') ) +\n'\\n      </a>\\n      ';\n } ;\n__p += '\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar AnalysisOptionModel = require('./analysis-option-models/analysis-option-model');\n\nmodule.exports = Backbone.Collection.extend({\n\n  model: function (d, opts) {\n    var Model = d.Model || AnalysisOptionModel;\n\n    var attrs = _.omit(d, 'Model', 'nodeAttrs');\n\n    return new Model(attrs, {nodeAttrs: d.nodeAttrs});\n  },\n\n  initialize: function (models, opts) {\n    this.on('change:selected', this._onSelectedChange, this);\n  },\n\n  _onSelectedChange: function (changedModel, isSelected) {\n    if (isSelected) {\n      this.each(function (m) {\n        if (m !== changedModel) {\n          m.set('selected', false);\n        }\n      });\n    }\n  }\n});\n","var _ = require('underscore');\nvar GeneratedAnalysisOptionModel = require('./analysis-option-models/generated-analysis-option-model');\nvar camshaftReference = require('camshaft-reference');\nvar latestCamshaftReference = camshaftReference.getVersion('latest');\nvar Analyses = require('builder/data/analyses');\n\n/**\n * Analysis definitions, organized in buckets per top-level category\n *\n *  - {Obj} -> options (userModel, configModel, queryGeometryModel)\n */\nmodule.exports = function (options) {\n  var categories = {\n    create_clean: {\n      title: _t('analysis-category.create-clean'),\n      analyses: Analyses.getAnalysesByModalCategory('create_clean', options)\n    },\n    data_transformation: {\n      title: _t('analysis-category.data-transformation'),\n      analyses: Analyses.getAnalysesByModalCategory('data_transformation', options)\n    },\n    analyze_predict: {\n      title: _t('analysis-category.analyze-predict'),\n      analyses: Analyses.getAnalysesByModalCategory('analyze_predict', options)\n    }\n  };\n\n  var alsoGenerateFromCamshaftReference = options.userModel.featureEnabled('generate_analysis_options');\n\n  if (alsoGenerateFromCamshaftReference) {\n    var implementedAnalyses = _.reduce(Object.keys(categories), function (memo, category) {\n      return memo.concat(\n        categories[category].analyses.map(function (analysis) {\n          return analysis.nodeAttrs.type;\n        })\n      );\n    }, []);\n\n    categories['generated'] = {\n      title: 'Generated analyses by the Camshaft reference v' + _.last(camshaftReference.versions),\n      analyses: _.compact(\n        Object\n          .keys(latestCamshaftReference.analyses)\n          .filter(function (type) {\n            return type !== 'source' && !_.contains(implementedAnalyses, type);\n          })\n          .map(function (type) {\n            if (!Analyses.isAnalysisValidByType(type, options)) {\n              return false;\n            }\n\n            return {\n              Model: GeneratedAnalysisOptionModel,\n              nodeAttrs: {type: type},\n              title: type,\n              desc: JSON.stringify(latestCamshaftReference.analyses[type])\n            };\n          })\n      )\n    };\n  }\n\n  return categories;\n};\n","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar AnalysisCategoryView = require('./analysis-category-pane-view');\nvar createTemplateTabPane = require('builder/components/tab-pane/create-template-tab-pane');\nvar template = require('./add-analyses.tpl');\nvar tabPaneButtonTemplate = require('./tab-pane-button-template.tpl');\nvar tabPaneTemplate = require('./tab-pane-template.tpl');\nvar analysesTypes = require('./analyses-types');\nvar Router = require('builder/routes/router');\n\n/**\n * View to select the analysis to create.\n */\nmodule.exports = CoreView.extend({\n  className: 'Dialog-content Dialog-content--expanded',\n\n  events: {\n    'click .js-add': '_onAddAnalysis'\n  },\n\n  initialize: function (opts) {\n    if (!opts.modalModel) throw new Error('modalModel is required');\n    if (!opts.analysisOptionsCollection) throw new Error('analysisOptionsCollection is required');\n    if (!opts.analysisOptions) throw new Error('analysisOptions is required');\n    if (!opts.layerDefinitionModel) throw new Error('layerDefinitionModel is required');\n    if (!opts.queryGeometryModel) throw new Error('queryGeometryModel is required');\n\n    this._modalModel = opts.modalModel;\n    this._analysisOptions = opts.analysisOptions;\n    this._analysisOptionsCollection = opts.analysisOptionsCollection;\n    this._layerDefinitionModel = opts.layerDefinitionModel;\n    this._queryGeometryModel = opts.queryGeometryModel;\n\n    this.listenTo(this._analysisOptionsCollection, 'change:selected', this._toggleAddButton);\n    this._generateTabPaneItems();\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this.$el.html(template());\n\n    var options = {\n      tabPaneOptions: {\n        template: tabPaneTemplate,\n        tabPaneItemOptions: {\n          tagName: 'li',\n          klassName: 'CDB-NavMenu-item'\n        }\n      },\n      tabPaneTemplateOptions: {\n        tagName: 'button',\n        className: 'CDB-NavMenu-link u-upperCase',\n        template: tabPaneButtonTemplate\n      }\n    };\n\n    this._tabPane = createTemplateTabPane(this._tabPaneItems, options);\n    this.addView(this._tabPane);\n    this._$body().append(this._tabPane.render().el);\n    return this;\n  },\n\n  goToTabItem: function (tabItemName) {\n    var tabItem = _.first(this._tabPane.collection.where({ name: tabItemName }));\n    if (tabItem) {\n      tabItem.set('selected', true);\n      this._toggleAddButton(); // set the right state for the add button\n    }\n  },\n\n  _generateTabPaneItems: function () {\n    var availableTypes = _.unique(_.keys(this._analysisOptions));\n\n    this._tabPaneItems = _.map(analysesTypes(this._analysisOptions), function (d) {\n      if (_.contains(availableTypes, d.type)) {\n        return d.createTabPaneItem(this._analysisOptionsCollection, {\n          modalModel: this._modalModel,\n          analysisOptionsCollection: this._analysisOptionsCollection,\n          queryGeometryModel: this._queryGeometryModel\n        });\n      }\n    }.bind(this));\n\n    this._tabPaneItems.unshift({\n      label: _t('analysis-category.all'),\n      name: 'all',\n      createContentView: function () {\n        return new AnalysisCategoryView({\n          analysisType: 'all',\n          modalModel: this._modalModel,\n          analysisOptions: this._analysisOptions,\n          analysisOptionsCollection: this._analysisOptionsCollection,\n          queryGeometryModel: this._queryGeometryModel\n        });\n      }.bind(this)\n    });\n  },\n\n  _$body: function () {\n    return this.$('.js-body');\n  },\n\n  _onAddAnalysis: function () {\n    var selectedOptionModel = this._analysisOptionsCollection.find(this._isSelected);\n    var layerDefinitionModel = this._layerDefinitionModel;\n\n    if (selectedOptionModel) {\n      var analysisFormAttrs = selectedOptionModel.getFormAttrs(layerDefinitionModel);\n      this._modalModel.destroy(analysisFormAttrs);\n      Router.goToAnalysisNode(layerDefinitionModel.get('id'), analysisFormAttrs.id);\n    }\n  },\n\n  _toggleAddButton: function () {\n    this.$('.js-add').toggleClass('is-disabled', !this._analysisOptionsCollection.any(this._isSelected));\n  },\n\n  _isSelected: function (m) {\n    return !!m.get('selected');\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"308px\" height=\"98px\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n  <g fill=\"#9DE0AD\" fill-rule=\"evenodd\" transform=\"translate(50, 8)\">\\n    <circle class=\"aoi-area area01\" fill=\"#5A7E6D\" cx=\"20\" cy=\"36\" r=\"20\"></circle>\\n    <circle class=\"aoi-point area-point01\" cx=\"20\" cy=\"36\" r=\"4\"></circle>\\n    <circle class=\"aoi-area area02\" fill=\"#5A7E6D\" cx=\"56\" cy=\"28\" r=\"20\"></circle>\\n    <circle class=\"aoi-point area-point02\"  cx=\"56\" cy=\"28\" r=\"4\"></circle>\\n    <circle class=\"aoi-area area03\" fill=\"#5A7E6D\" cx=\"76\" cy=\"44\" r=\"20\"></circle>\\n    <circle class=\"aoi-point area-point03\" cx=\"76\" cy=\"44\" r=\"4\"></circle>\\n    <circle class=\"aoi-area area04\" fill=\"#5A7E6D\" cx=\"138\" cy=\"60\" r=\"20\"></circle>\\n    <circle class=\"aoi-point area-point04\" cx=\"138\" cy=\"60\" r=\"4\"></circle>\\n    <circle class=\"aoi-area area05\" fill=\"#5A7E6D\" cx=\"156\" cy=\"20\" r=\"20\"></circle>\\n    <circle class=\"aoi-point area-point05\" cx=\"156\" cy=\"20\" r=\"4\"></circle>\\n    <circle class=\"aoi-area area06\" fill=\"#5A7E6D\" cx=\"188\" cy=\"28\" r=\"20\"></circle>\\n    <circle class=\"aoi-point area-point06\" cx=\"188\" cy=\"28\" r=\"4\"></circle>\\n  </g>\\n</svg>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"148px\" height=\"141px\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n  <g fill=\"#636D72\" fill-rule=\"evenodd\">\\n    <circle class=\"Centroid-pointsHighlight\" fill=\"#9DE0AD\" cx=\"74\" cy=\"70\" r=\"4\"></circle>\\n    <circle class=\"Centroid-line\" fill=\"none\" stroke=\"#9DE0AD\" cx=\"74.5\" cy=\"70\" r=\"70\"></circle>\\n    <circle class=\"Centroid-points Centroid-points01\" cx=\"4\" cy=\"65\" r=\"4\"></circle>\\n    <circle class=\"Centroid-points Centroid-points02\" cx=\"34\" cy=\"85\" r=\"4\"></circle>\\n    <circle class=\"Centroid-points Centroid-points03\" cx=\"103\" cy=\"50\" r=\"4\"></circle>\\n    <circle class=\"Centroid-points Centroid-points04\" cx=\"83\" cy=\"40\" r=\"4\"></circle>\\n    <circle class=\"Centroid-points Centroid-points05\" cx=\"63\" cy=\"90\" r=\"4\"></circle>\\n    <circle class=\"Centroid-points Centroid-points06\" cx=\"144\" cy=\"65\" r=\"4\"></circle>\\n    <circle class=\"Centroid-points Centroid-points07\" cx=\"93\" cy=\"96\" r=\"4\"></circle>\\n    <circle class=\"Centroid-points Centroid-points08\" cx=\"44\" cy=\"55\" r=\"4\"></circle>\\n    <circle class=\"Centroid-points Centroid-points09\" cx=\"112\" cy=\"83\" r=\"4\"></circle>\\n    <circle class=\"Centroid-points Centroid-points10\" cx=\"24\" cy=\"45\" r=\"4\"></circle>\\n  </g>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"306\" height=\"98\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n  <g transform=\"translate(30, 16)\" fill=\"#636D72\">\\n\\n    <g>\\n      <path class=\"Line Line-01\" d=\"M109,32 L42,29\"></path>\\n      <path class=\"Line Line-02\" d=\"M109,32 L72,49\"></path>\\n      <path class=\"Line Line-03\" d=\"M109,32 L101,54\"></path>\\n      <path class=\"Line Line-04\" d=\"M109,32 L131,60\"></path>\\n      <path class=\"Line Line-05\" d=\"M109,32 L82,19\"></path>\\n      <path class=\"Line Line-06\" d=\"M109,32 L150,47\"></path>\\n      <path class=\"Line Line-07\" d=\"M109,32 L121,4\"></path>\\n      <path class=\"Line Line-08\" d=\"M109,32 L141,14\"></path>\\n      <path class=\"Line Line-09\" d=\"M109,32 L159,25\"></path>\\n    </g>\\n\\n    <circle class=\"Dot Dot--withColorChange Dot-01\" cx=\"42\" cy=\"29\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot--withColorChange Dot-02\" cx=\"72\" cy=\"49\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot--withColorChange Dot-03\" cx=\"101\" cy=\"54\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot--withColorChange Dot-04\" cx=\"131\" cy=\"60\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot--withColorChange Dot-05\" cx=\"82\" cy=\"19\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot--withColorChange Dot-06\" cx=\"150\" cy=\"47\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot--withColorChange Dot-07\" cx=\"141\" cy=\"14\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot--withColorChange Dot-08\" cx=\"121\" cy=\"4\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot--withColorChange Dot-09\" cx=\"159\" cy=\"25\" r=\"4\"></circle>\\n\\n    <circle class=\"Dot Dot--withFadeOut Dot-10\" cx=\"52\" cy=\"54\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot--withFadeOut Dot-11\" cx=\"4\" cy=\"54\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot--withFadeOut Dot-12\" cx=\"28\" cy=\"14\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot--withFadeOut Dot-13\" cx=\"188\" cy=\"6\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot--withFadeOut Dot-14\" cx=\"196\" cy=\"46\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot--withFadeOut Dot-15\" cx=\"228\" cy=\"26\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot--withFadeOut Dot-16\" cx=\"182\" cy=\"29\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot--withFadeOut Dot-17\" cx=\"62\" cy=\"9\" r=\"4\"></circle>\\n\\n    <circle class=\"Dot\" fill=\"white\" cx=\"109\" cy=\"32\" r=\"4\"></circle>\\n  </g>\\n</svg>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"148px\" height=\"64px\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n  <g stroke=\"none\" fill=\"#636D72\">\\n    <polyline class=\"Line\" stroke=\"#9DE0AD\" points=\"4.08007812 29.7382812 34.2617188 49.4335938 24.2285156 9.83007812 43.7246094 18.7578125 62.9414062 54.7128906 73.6425781 30.9160156 92.3808594 59.359375 83.328125 3.75585938 103.042969 14.6777344 111.734375 47.1640625 144.171875 28.3574219\"></polyline>\\n    <circle class=\"Dot Dot-01\" cx=\"4\" cy=\"29\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot-02\" cx=\"34\" cy=\"49\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot-03\" cx=\"24\" cy=\"9\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot-04\" cx=\"44\" cy=\"19\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot-05\" cx=\"63\" cy=\"54\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot-06\" cx=\"74\" cy=\"32\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot-07\" cx=\"93\" cy=\"60\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot-08\" cx=\"83\" cy=\"4\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot-09\" cx=\"103\" cy=\"14\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot-10\" cx=\"112\" cy=\"47\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot-11\" cx=\"144\" cy=\"29\" r=\"4\"></circle>\\n  </g>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"302px\" height=\"98px\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n  <defs>\\n    <rect id=\"path-1\" x=\"0\" y=\"0\" width=\"304\" height=\"96\"></rect>\\n    <rect id=\"path-3\" x=\"48\" y=\"0\" width=\"48\" height=\"64\"></rect>\\n    <mask id=\"mask-4\" x=\"0\" y=\"0\" width=\"48\" height=\"64\" fill=\"white\">\\n      <use xlink:href=\"#path-3\"></use>\\n    </mask>\\n    <rect id=\"path-5\" x=\"0\" y=\"31\" width=\"49\" height=\"33\"></rect>\\n    <mask id=\"mask-6\" x=\"0\" y=\"0\" width=\"49\" height=\"33\" fill=\"white\">\\n      <use xlink:href=\"#path-5\"></use>\\n    </mask>\\n    <rect id=\"path-7\" x=\"95\" y=\"0\" width=\"57\" height=\"24\"></rect>\\n    <mask id=\"mask-8\" x=\"0\" y=\"0\" width=\"57\" height=\"24\" fill=\"white\">\\n      <use xlink:href=\"#path-7\"></use>\\n    </mask>\\n    <rect id=\"path-9\" x=\"151\" y=\"8\" width=\"18\" height=\"16\"></rect>\\n    <mask id=\"mask-10\" x=\"0\" y=\"0\" width=\"18\" height=\"16\" fill=\"white\">\\n      <use xlink:href=\"#path-9\"></use>\\n    </mask>\\n    <rect id=\"path-11\" x=\"24\" y=\"16\" width=\"25\" height=\"16\"></rect>\\n    <mask id=\"mask-12\" x=\"0\" y=\"0\" width=\"25\" height=\"16\" fill=\"white\">\\n      <use xlink:href=\"#path-11\"></use>\\n    </mask>\\n    <rect id=\"path-13\" x=\"95\" y=\"23\" width=\"25\" height=\"25\"></rect>\\n    <mask id=\"mask-14\" x=\"0\" y=\"0\" width=\"25\" height=\"25\" fill=\"white\">\\n      <use xlink:href=\"#path-13\"></use>\\n    </mask>\\n    <rect id=\"path-15\" x=\"119\" y=\"23\" width=\"58\" height=\"33\"></rect>\\n    <mask id=\"mask-16\" maskContentUnits=\"userSpaceOnUse\" maskUnits=\"objectBoundingBox\" x=\"0\" y=\"0\" width=\"58\" height=\"33\" fill=\"white\">\\n      <use xlink:href=\"#path-15\"></use>\\n    </mask>\\n  </defs>\\n  <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\\n    <g>\\n      <g>\\n        <g>\\n          <mask id=\"mask-2\" fill=\"white\">\\n            <use xlink:href=\"#path-1\"></use>\\n          </mask>\\n          <use id=\"Rectangle-10\" xlink:href=\"#path-1\"></use>\\n        </g>\\n        <g transform=\"translate(64, 16)\" stroke=\"#282C2F\" stroke-width=\"2\" fill=\"#9DE0AD\">\\n          <use class=\"rect-01\" mask=\"url(#mask-4)\" fill-opacity=\"0.32\" xlink:href=\"#path-3\"></use>\\n          <use class=\"rect-02\" mask=\"url(#mask-6)\" fill-opacity=\"0.8\" xlink:href=\"#path-5\"></use>\\n          <use class=\"rect-03\" mask=\"url(#mask-8)\" fill-opacity=\"0.639999986\" xlink:href=\"#path-7\"></use>\\n          <use class=\"rect-04\" mask=\"url(#mask-10)\" fill-opacity=\"0.160000011\" xlink:href=\"#path-9\"></use>\\n          <use class=\"rect-05\" mask=\"url(#mask-12)\" fill-opacity=\"0.48\" xlink:href=\"#path-11\"></use>\\n          <use class=\"rect-06\" mask=\"url(#mask-14)\" xlink:href=\"#path-13\"></use>\\n          <use class=\"rect-07\" mask=\"url(#mask-16)\" fill-opacity=\"0.800000012\" xlink:href=\"#path-15\"></use>\\n        </g>\\n      </g>\\n    </g>\\n  </g>\\n</svg>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"306\" height=\"98\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n  <circle class=\"Dot\" cx=\"117\" cy=\"33\" r=\"4\"></circle>\\n  <circle class=\"Dot\" cx=\"91\" cy=\"57\" r=\"4\"></circle>\\n  <circle class=\"Dot--withSplash Dot--withSplash--01\" cx=\"91\" cy=\"57\" r=\"4\"></circle>\\n  <circle class=\"Dot\" cx=\"73\" cy=\"27\" r=\"4\"></circle>\\n  <circle class=\"Dot\" cx=\"223\" cy=\"39\" r=\"4\"></circle>\\n  <circle class=\"Dot--withSplash Dot--withSplash--02\" cx=\"223\" cy=\"39\" r=\"4\"></circle>\\n  <circle class=\"Dot\" cx=\"125\" cy=\"69\" r=\"4\"></circle>\\n  <circle class=\"Dot\" cx=\"64\" cy=\"65\" r=\"4\"></circle>\\n  <circle class=\"Dot\" cx=\"151\" cy=\"71\" r=\"4\"></circle>\\n  <circle class=\"Dot--withSplash Dot--withSplash--03\" cx=\"151\" cy=\"71\" r=\"4\"></circle>\\n  <circle class=\"Dot\" cx=\"205\" cy=\"75\" r=\"4\"></circle>\\n  <circle class=\"Dot\" cx=\"163\" cy=\"61\" r=\"4\"></circle>\\n  <circle class=\"Dot\" cx=\"133\" cy=\"43\" r=\"4\"></circle>\\n  <circle class=\"Dot\" cx=\"189\" cy=\"46\" r=\"4\"></circle>\\n  <circle class=\"Dot--withSplash Dot--withSplash--04\" cx=\"189\" cy=\"46\" r=\"4\"></circle>\\n  <circle class=\"Dot\" cx=\"242\" cy=\"45\" r=\"4\"></circle>\\n  <circle class=\"Dot\" cx=\"155\" cy=\"39\" r=\"4\"></circle>\\n  <circle class=\"Dot\" cx=\"195\" cy=\"23\" r=\"4\"></circle>\\n  <circle class=\"Dot--green Dot-01\" cx=\"91\" cy=\"57\" r=\"4\"></circle>\\n  <circle class=\"Dot--green Dot-02\" cx=\"223\" cy=\"39\" r=\"4\"></circle>\\n  <circle class=\"Dot--green Dot-03\" cx=\"151\" cy=\"71\" r=\"4\"></circle>\\n  <circle class=\"Dot--green Dot-04\" cx=\"189\" cy=\"46\" r=\"4\"></circle>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"304\" height=\"96\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n  <g fill=\"#636D72\" stroke=\"none\" stroke-width=\"1\">\\n    <g stroke=\"#FFFFFF\" stroke-linecap=\"square\">\\n      <path class=\"Line\" d=\"M174.5,58.5 L166.5,35.5\" id=\"Line\"></path>\\n      <path class=\"Line\" d=\"M174.5,58.5 L145.5,40.5\" id=\"Line\"></path>\\n      <path class=\"Line\" d=\"M128.5,29.5 L145.5,40.5\" id=\"Line\"></path>\\n      <path class=\"Line\" d=\"M128.5,29.5 L84.5,24.5\" id=\"Line\"></path>\\n      <path class=\"Line--withHighlight\" d=\"M174.5,58.5 L136.5,66.5\" id=\"Line\"></path>\\n      <path class=\"Line--withHighlight\" d=\"M103.5,53.5 L136.5,66.5\" id=\"Line\"></path>\\n      <path class=\"Line--withHighlight\" d=\"M76.5,61.5 L104.5,53.5\" id=\"Line\"></path>\\n      <path class=\"Line\" d=\"M174.5,58.5 L162.5,68.5\" id=\"Line\"></path>\\n      <path class=\"Line\" d=\"M174.5,58.5 L217.5,71.5\" id=\"Line\"></path>\\n      <path class=\"Line\" d=\"M235.5,35.5 L217.5,71.5\" id=\"Line\"></path>\\n      <path class=\"Line\" d=\"M235.5,35.5 L253.5,41.5\" id=\"Line\"></path>\\n      <path class=\"Line\" d=\"M202.5,42.5 L166.5,35.5\" id=\"Line\"></path>\\n      <path class=\"Line\" d=\"M202.5,42.5 L207.5,18.5\" id=\"Line\"></path>\\n      <path class=\"Line--withFade\" d=\"M174.5,58.5 L136.5,66.5\" id=\"Line\"></path>\\n      <path class=\"Line--withFade\" d=\"M103.5,53.5 L136.5,66.5\" id=\"Line\"></path>\\n      <path class=\"Line--withFade\" d=\"M76.5,61.5 L104.5,53.5\" id=\"Line\"></path>\\n    </g>\\n\\n    <circle class=\"Dot Dot-01\" cx=\"129\" cy=\"30\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot-02\" cx=\"85\" cy=\"24\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot-03\" cx=\"235\" cy=\"36\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot-04\" cx=\"163\" cy=\"68\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot-05\" cx=\"217\" cy=\"72\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot-06\" cx=\"145\" cy=\"40\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot-07\" cx=\"201\" cy=\"43\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot-08\" cx=\"254\" cy=\"42\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot-09\" cx=\"167\" cy=\"36\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot-10\" cx=\"207\" cy=\"20\" r=\"4\"></circle>\\n\\n    <circle class=\"Dot-11 Dot--withHighlight\" cx=\"103\" cy=\"54\" r=\"4\"></circle>\\n    <circle class=\"Dot-12 Dot--withHighlight\" cx=\"137\" cy=\"66\" r=\"4\"></circle>\\n    <circle class=\"Dot-13 Dot--withHighlight\" cx=\"76\" cy=\"62\" r=\"4\"></circle>\\n    <circle class=\"Dot-14 Dot--withHighlight\" cx=\"175\" cy=\"58\" r=\"4\"></circle>\\n  </g>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"306px\" height=\"98px\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n  <g fill=\"#636D72\" fill-rule=\"evenodd\" transform=\"translate(70, 15)\">\\n    <polygon fill=\"none\" class=\"Filter-line\" stroke=\"#9DE0AD\" points=\"73.703125 13.6435547 97.5439453 17.5722656 106.554688 42.9824219 92.5517578 55.5849609 63.3261719 53.5224609 54.0126953 15.3515625 59.0839844 11.4414062\"></polygon>\\n    <circle class=\"Filter-dotHighlight Filter-dotHighlight--01\" cx=\"95\" cy=\"20\" r=\"4\"></circle>\\n    <circle class=\"Filter-dotHighlight Filter-dotHighlight--06\" cx=\"73\" cy=\"24\" r=\"4\"></circle>\\n    <circle class=\"Filter-dotHighlight Filter-dotHighlight--02\" cx=\"103\" cy=\"42\" r=\"4\"></circle>\\n    <circle class=\"Filter-dotHighlight Filter-dotHighlight--03\" cx=\"91\" cy=\"52\" r=\"4\"></circle>\\n    <circle class=\"Filter-dotHighlight Filter-dotHighlight--05\" cx=\"57\" cy=\"14\" r=\"4\"></circle>\\n    <circle class=\"Filter-dotHighlight Filter-dotHighlight--04\" cx=\"65\" cy=\"50\" r=\"4\"></circle>\\n    <circle class=\"Filter-dot circle08\" cx=\"163\" cy=\"20\" r=\"4\"></circle>\\n    <circle class=\"Filter-dot circle07\" cx=\"31\" cy=\"38\" r=\"4\"></circle>\\n    <circle class=\"Filter-dot circle06\" cx=\"13\" cy=\"8\" r=\"4\"></circle>\\n    <circle class=\"Filter-dot circle05\" cx=\"4\" cy=\"46\" r=\"4\"></circle>\\n    <circle class=\"Filter-dot circle04\" cx=\"145\" cy=\"56\" r=\"4\"></circle>\\n    <circle class=\"Filter-dot circle03\" cx=\"129\" cy=\"27\" r=\"4\"></circle>\\n    <circle class=\"Filter-dot circle02\" cx=\"182\" cy=\"26\" r=\"4\"></circle>\\n    <circle class=\"Filter-dot circle01\" cx=\"135\" cy=\"4\" r=\"4\"></circle>\\n  </g>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"302px\" height=\"99px\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n  <g fill=\"#9DE0AD\" fill-rule=\"evenodd\">\\n    <path d=\"M0.5,41.5 L305.5,24.5\" class=\"Georeference-street00\" stroke=\"#282C2F\" stroke-width=\"8\" stroke-linecap=\"square\"></path>\\n    <path d=\"M134,0 L141,91\" class=\"Georeference-street01\" stroke=\"#282C2F\" stroke-width=\"8\" stroke-linecap=\"square\"></path>\\n    <path d=\"M258,0 L265,91\" class=\"Georeference-street02\" stroke=\"#282C2F\" stroke-width=\"8\" stroke-linecap=\"square\"></path>\\n    <text class=\"Georeference-point02-text\" font-family=\"Open Sans\" font-size=\"10\" font-weight=\"300\" fill=\"#FFFFFF\">\\n      <tspan x=\"63\" y=\"62\">-63.578373</tspan>\\n      <tspan x=\"63\" y=\"76\">44.642619</tspan>\\n    </text>\\n    <text class=\"Georeference-point01-text\" font-family=\"Open Sans\" font-size=\"10\" font-weight=\"300\" fill=\"#FFFFFF\">\\n      <tspan x=\"198\" y=\"54\">IP 214.80.33.47</tspan>\\n    </text>\\n    <circle class=\"Dot Dot-01\" fill=\"#9DE0AD\" cx=\"43\" cy=\"40\" r=\"8\"></circle>\\n    <circle class=\"Dot Dot-02\" fill=\"#9DE0AD\" cx=\"183\" cy=\"32\" r=\"8\"></circle>\\n  </g>\\n</svg>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"176\" height=\"64\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n  <g fill=\"#9DE0AD\">\\n    <polygon fill=\"none\" class=\"Group-line\" stroke=\"#9EE0AD\" points=\"88.4493047 0.0859375 175.58896 0.0859375 175.58896 23.2574383 135.581141 32.7431641 135.581141 54.9504597 117.092373 54.9504597 101.982508 63.6816406 59.4503976 63.6816406 44.9366094 55.6914063 1 55.6914063 1 24.8914834 44.6201536 24.8914834 56.9346563 0\"></polygon>\\n    <circle class=\"Group-point Group-point01\" cx=\"60\" cy=\"60\" r=\"4\"></circle>\\n    <circle class=\"Group-point Group-point02\" cx=\"100\" cy=\"4\" r=\"4\"></circle>\\n    <circle class=\"Group-point Group-point03\" cx=\"132\" cy=\"52\" r=\"4\"></circle>\\n    <circle class=\"Group-point Group-point04\" cx=\"116\" cy=\"52\" r=\"4\"></circle>\\n    <circle class=\"Group-point Group-point05\" cx=\"116\" cy=\"36\" r=\"4\"></circle>\\n    <circle class=\"Group-point Group-point06\" cx=\"116\" cy=\"20\" r=\"4\"></circle>\\n    <circle class=\"Group-point Group-point07\" cx=\"172\" cy=\"20\" r=\"4\"></circle>\\n    <circle class=\"Group-point Group-point08\" cx=\"172\" cy=\"4\" r=\"4\"></circle>\\n    <circle class=\"Group-point Group-point09\" cx=\"44\" cy=\"28\" r=\"4\"></circle>\\n    <circle class=\"Group-point Group-point10\" cx=\"4\" cy=\"28\" r=\"4\"></circle>\\n    <circle class=\"Group-point Group-point11\" cx=\"4\" cy=\"52\" r=\"4\"></circle>\\n    <circle class=\"Group-point Group-point12\" cx=\"44\" cy=\"52\" r=\"4\"></circle>\\n    <circle class=\"Group-point Group-point13\" cx=\"100\" cy=\"60\" r=\"4\"></circle>\\n    <circle class=\"Group-point Group-point14\" cx=\"132\" cy=\"36\" r=\"4\"></circle>\\n    <circle class=\"Group-point Group-point15\" cx=\"60\" cy=\"4\" r=\"4\"></circle>\\n  </g>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"308px\" height=\"98px\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n  <g fill=\"#636D72\" fill-rule=\"evenodd\" transform=\"translate(55, 15)\">\\n    <circle class=\"intersect intersect-layer\" fill=\"#5A7E6D\" stroke=\"#9DE0AD\" cx=\"101\" cy=\"32\" r=\"32\"></circle>\\n    <circle class=\"intersect intersect-circle1\" cx=\"57\" cy=\"14\" r=\"4\"></circle>\\n    <circle class=\"intersect intersect-circle2\" cx=\"31\" cy=\"38\" r=\"4\"></circle>\\n    <circle class=\"intersect intersect-circle3\" cx=\"13\" cy=\"8\" r=\"4\"></circle>\\n    <circle class=\"intersect intersect-circle4\" cx=\"163\" cy=\"20\" r=\"4\"></circle>\\n    <circle class=\"intersect intersect-circle5\" cx=\"65\" cy=\"50\" r=\"4\"></circle>\\n    <circle class=\"intersect intersect-circle6\" cx=\"4\" cy=\"46\" r=\"4\"></circle>\\n    <circle class=\"intersect intersect-circle1Highlight\" cx=\"91\" cy=\"52\" r=\"4\"></circle>\\n    <circle class=\"intersect intersect-circle7\" cx=\"145\" cy=\"56\" r=\"4\"></circle>\\n    <circle class=\"intersect intersect-circle2Highlight\" cx=\"103\" cy=\"42\" r=\"4\"></circle>\\n    <circle class=\"intersect intersect-circle3Highlight\"  cx=\"73\" cy=\"24\" r=\"4\"></circle>\\n    <circle class=\"intersect intersect-circle4Highlight\" cx=\"129\" cy=\"27\" r=\"4\"></circle>\\n    <circle class=\"intersect intersect-circle8\" cx=\"182\" cy=\"26\" r=\"4\"></circle>\\n    <circle class=\"intersect intersect-circle5Highlight\" cx=\"95\" cy=\"20\" r=\"4\"></circle>\\n    <circle class=\"intersect intersect-circle9\" cx=\"135\" cy=\"4\" r=\"4\"></circle>\\n  </g>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"185px\" height=\"64px\" viewBox=\"512 388 185 64\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n  <g id=\"Group\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(513.000000, 389.000000)\">\\n    <polygon class=\"Path Path-01\" stroke=\"#FFFFFF\" points=\"7.92876627e-08 47 22.7004054 47 22.7004054 62.1132254 0 62.1132254\"></polygon>\\n    <polygon class=\"Path Path-03\" stroke=\"#FFFFFF\" points=\"160 24 182.700012 24 182.700012 38.9848139 160 38.9848139\"></polygon>\\n    <polygon class=\"Path Path-02\" stroke=\"#FFFFFF\" points=\"87.7216797 0.278320312 110.836973 0.278320312 110.836973 24.2279707 87.8211856 24.2279707\"></polygon>\\n    <polygon class=\"Path Path-03Green\" stroke=\"#9DE0AD\" points=\"128 24 182.862039 24 182.862039 55.6141883 128.202651 55.6141883\"></polygon>\\n    <polygon class=\"Path Path-01Green\" stroke=\"#9DE0AD\" points=\"0.0502868199 31 47.7467919 31 47.7467919 62.177811 0 62.177811\"></polygon>\\n    <polygon class=\"Path Path-02Green\" stroke=\"#9DE0AD\" points=\"63.9970703 0.033203125 110.710209 0.033203125 110.710209 62.0109574 63.8597689 62.0109574\"></polygon>\\n    <circle class=\"Dot Dot-01\" fill=\"#FFFFFF\" cx=\"7\" cy=\"55\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot-02\" fill=\"#FFFFFF\" cx=\"99\" cy=\"11\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot-03\"  fill=\"#FFFFFF\" cx=\"171\" cy=\"31\" r=\"4\"></circle>\\n  </g>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"306\" height=\"98\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n  <g transform=\"translate(50, 20)\">\\n    <circle class=\"Dot Dot--01 Dot--gray\" cx=\"4\" cy=\"46\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot--02 Dot--gray\" cx=\"31\" cy=\"38\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot--03 Dot--gray\" cx=\"13\" cy=\"8\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot--04 Dot--green\" cx=\"57\" cy=\"14\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot--05 Dot--green\" cx=\"65\" cy=\"50\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot--06 Dot--green\" cx=\"91\" cy=\"52\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot--07 Dot--green\" cx=\"103\" cy=\"42\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot--08 Dot--green\" cx=\"73\" cy=\"24\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot--09 Dot--green\" cx=\"95\" cy=\"20\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot--10 Dot--darkGray\" cx=\"145\" cy=\"56\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot--11 Dot--darkGray\" cx=\"129\" cy=\"27\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot--12 Dot--darkGray\" cx=\"135\" cy=\"4\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot--13 Dot--white\" cx=\"163\" cy=\"20\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot--14 Dot--white\" cx=\"182\" cy=\"26\" r=\"4\"></circle>\\n  </g>\\n</svg>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<svg width=\"306px\" height=\"98px\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n  <g id=\"Mod-Analysis\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\\n    <g fill=\"#9DE0AD\">\\n      <text x=\"8\" y=\"19\" class=\"Text Text-LH\" font-family=\"OpenSans, Open Sans\" font-size=\"10\" font-weight=\"normal\">\\n        ' +\n__e( _t('components.modals.add-analysis.option-types.moran-cluster.low-high') ) +\n'\\n      </text>\\n      <text x=\"227\" y=\"19\" class=\"Text Text-HH\" font-family=\"OpenSans, Open Sans\" font-size=\"10\" font-weight=\"normal\">\\n        ' +\n__e( _t('components.modals.add-analysis.option-types.moran-cluster.high-high') ) +\n'\\n      </text>\\n      <text x=\"233\" y=\"85\" class=\"Text Text-HL\" font-family=\"OpenSans, Open Sans\" font-size=\"10\" font-weight=\"normal\">\\n        ' +\n__e( _t('components.modals.add-analysis.option-types.moran-cluster.high-low') ) +\n'\\n      </text>\\n      <text x=\"10\" y=\"85\" class=\"Text Text-LL\" font-family=\"OpenSans, Open Sans\" font-size=\"10\" font-weight=\"normal\">\\n        ' +\n__e( _t('components.modals.add-analysis.option-types.moran-cluster.low-low') ) +\n'\\n      </text>\\n    </g>\\n    <g fill=\"#FFF\">\\n      <circle class=\"Dot Dot-04\" fill-opacity=\"0.4\" cx=\"106\" cy=\"57\" r=\"4\"></circle>\\n      <circle class=\"Dot Dot-04\" fill-opacity=\"0.4\" cx=\"137\" cy=\"66\" r=\"4\"></circle>\\n      <circle class=\"Dot Dot-04\" fill-opacity=\"0.4\" cx=\"79\" cy=\"62\" r=\"4\"></circle>\\n      <circle class=\"Dot Dot-06\" fill-opacity=\"0.6\" cx=\"193\" cy=\"70\" r=\"4\"></circle>\\n      <circle class=\"Dot Dot-06\" fill-opacity=\"0.6\" cx=\"175\" cy=\"58\" r=\"4\"></circle>\\n      <circle class=\"Dot Dot-08\" fill-opacity=\"0.8\" cx=\"129\" cy=\"30\" r=\"4\"></circle>\\n      <circle class=\"Dot Dot-08\" fill-opacity=\"0.8\" cx=\"145\" cy=\"40\" r=\"4\"></circle>\\n      <circle class=\"Dot Dot-1\" cx=\"231\" cy=\"36\" r=\"4\"></circle>\\n      <circle class=\"Dot Dot-1\" cx=\"197\" cy=\"40\" r=\"4\"></circle>\\n      <circle class=\"Dot Dot-1\" cx=\"250\" cy=\"38\" r=\"4\"></circle>\\n      <circle class=\"Dot Dot-1\" cx=\"167\" cy=\"36\" r=\"4\"></circle>\\n      <circle class=\"Dot Dot-1\" cx=\"203\" cy=\"20\" r=\"4\"></circle>\\n    </g>\\n    <g stroke=\"#9DE0AD\">\\n      <path d=\"M0,49 L304,49\" class=\"Line Line-horizontal\" stroke-dasharray=\"2,3\"></path>\\n      <path d=\"M152,0 L152,98\" class=\"Line Line-vertical\" stroke-dasharray=\"2,3\"></path>\\n    </g>\\n  </g>\\n</svg>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '  <svg width=\"306px\" height=\"98px\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n    <g transform=\"translate(87, 22)\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" stroke-linecap=\"square\">\\n      <path class=\"Arrow-04\" d=\"M98.5,45.5 L97.5,40.5\" stroke=\"#9CE0AC\"></path>\\n      <path class=\"Arrow-04\" d=\"M98.5,45.5 L92.5,46.5\" stroke=\"#9CE0AC\"></path>\\n      <path class=\"Line-04\" d=\"M75.5,34.5 L98.5,45.5\" stroke=\"#9DE0AD\"></path>\\n\\n      <path class=\"Line-03\" d=\"M0.5,44.5 L3.5,39.5\" stroke=\"#9CE0AC\"></path>\\n      <path class=\"Line-03\" d=\"M0.5,44.5 L5.5,47.5\" stroke=\"#9CE0AC\"></path>\\n      <path class=\"Line-03\" d=\"M0.5,44.5 L55.5,32.5\" stroke=\"#9DE0AD\"></path>\\n\\n      <g transform=\"translate(75.000000, 1.000000)\">\\n        <path class=\"Arrow-01\" d=\"M31.5,8.5 L32.5,2.5\" stroke=\"#95D6A6\"></path>\\n        <path class=\"Arrow-01\" d=\"M26.5,0.5 L32.5,2.5\" stroke=\"#95D6A6\"></path>\\n        <path class=\"Line-01\" d=\"M0.5,18.5 L32.5,2.5\" stroke=\"#9DE0AD\"></path>\\n      </g>\\n\\n      <g transform=\"translate(19.000000, 0.000000)\" stroke=\"#979797\">\\n        <path class=\"Arrow-02\" d=\"M36.5,19.5 L35.5,14.5\"></path>\\n        <path class=\"Arrow-02\" d=\"M36.5,19.5 L31.5,21.5\"></path>\\n        <path class=\"Line-02\" d=\"M0.5,0.5 L36.5,19.5\"></path>\\n      </g>\\n    </g>\\n  </g>\\n  <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\\n    <g stroke=\"#636D72\">\\n      <path d=\"M0,49 L304,49\" class=\"Line Line-horizontal\" stroke-dasharray=\"2,3\"></path>\\n      <path d=\"M152,0 L152,98\" class=\"Line Line-vertical\" stroke-dasharray=\"2,3\"></path>\\n    </g>\\n  </g>\\n  <g transform=\"translate(72, 11)\">\\n    <circle class=\"Dot Dot--center\" cx=\"80\" cy=\"38\" r=\"4\" stroke=\"#9DE0AD\" fill=\"#2E3C43\"></circle>\\n    <circle class=\"Dot Dot-01\" fill=\"#9DE0AD\" cx=\"133\" cy=\"10\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot-02\" fill=\"#979EA1\" cx=\"24\" cy=\"4\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot-03\" fill=\"#9DE0AD\" cx=\"4\" cy=\"57\" r=\"4\"></circle>\\n    <circle class=\"Dot Dot-04\" fill=\"#9DE0AD\" cx=\"122\" cy=\"61\" r=\"4\"></circle>\\n  </g>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"306\" height=\"98\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n  <g transform=\"translate(30, 16)\" fill=\"#9DE0AD\">\\n    <circle class=\"Dot\" cx=\"42\" cy=\"29\" r=\"4\"></circle>\\n    <circle class=\"Dot--withFadeOut Dot-01\" cx=\"72\" cy=\"49\" r=\"4\"></circle>\\n    <circle class=\"Dot\" cx=\"52\" cy=\"54\" r=\"4\"></circle>\\n    <circle class=\"Dot--withFadeOut Dot-02\" cx=\"4\" cy=\"54\" r=\"4\"></circle>\\n    <circle class=\"Dot--withFadeOut Dot-03\" cx=\"28\" cy=\"14\" r=\"4\"></circle>\\n    <circle class=\"Dot\" cx=\"188\" cy=\"6\" r=\"4\"></circle>\\n    <circle class=\"Dot\" cx=\"196\" cy=\"46\" r=\"4\"></circle>\\n    <circle class=\"Dot--withFadeOut Dot-03\" cx=\"159\" cy=\"25\" r=\"4\"></circle>\\n    <circle class=\"Dot\" cx=\"228\" cy=\"26\" r=\"4\"></circle>\\n    <circle class=\"Dot\" cx=\"141\" cy=\"14\" r=\"4\"></circle>\\n    <circle class=\"Dot--withFadeOut Dot-04\" cx=\"121\" cy=\"4\" r=\"4\"></circle>\\n    <circle class=\"Dot\" cx=\"101\" cy=\"54\" r=\"4\"></circle>\\n    <circle class=\"Dot\" cx=\"182\" cy=\"29\" r=\"4\"></circle>\\n    <circle class=\"Dot--withFadeOut Dot-05\" cx=\"131\" cy=\"60\" r=\"4\"></circle>\\n    <circle class=\"Dot\" cx=\"82\" cy=\"19\" r=\"4\"></circle>\\n    <circle class=\"Dot\" cx=\"150\" cy=\"47\" r=\"4\"></circle>\\n    <circle class=\"Dot--withFadeOut Dot-06\" cx=\"62\" cy=\"9\" r=\"4\"></circle>\\n    <circle class=\"Dot\" cx=\"109\" cy=\"32\" r=\"4\"></circle>\\n  </g>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p +=\n__e( label ) +\n'\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"Modal-navigation\">\\n  <ul class=\"Modal-navigationInner CDB-Text is-semibold CDB-Size-medium js-menu\"></ul>\\n</div>\\n<div class=\"Modal-inner Modal-inner--with-navigation js-content\">\\n</div>\\n';\n\n}\nreturn __p\n}","var Backbone = require('backbone');\nvar XYZModel = require('./xyz/xyz-model');\nvar mosaicThumbnail = require('builder/components/mosaic/mosaic-thumbnail.tpl');\nvar MapboxModel = require('./mapbox/mapbox-model');\nvar WMSModel = require('./wms/wms-model');\nvar TileJSONModel = require('./tilejson/tilejson-model');\nvar NASAModel = require('./nasa/nasa-model');\n\n/**\n * Add basemap model\n */\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    tabs: undefined,\n    contentPane: 'tabs', // [tabs, loading, error]\n    currentTab: 'xyz' // [xyz, wms, nasa, mapbox, tilejson, nasa]\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.layerDefinitionsCollection) throw new Error('layerDefinitionsCollection is required');\n    if (!opts.basemapsCollection) throw new Error('basemapsCollection is required');\n    if (!opts.customBaselayersCollection) throw new Error('customBaselayersCollection is required');\n\n    this._layerDefinitionsCollection = opts.layerDefinitionsCollection;\n    this._basemapsCollection = opts.basemapsCollection;\n    this._customBaselayersCollection = opts.customBaselayersCollection;\n    this._currentTab = opts.currentTab;\n\n    this._initTabs();\n    this._initBinds();\n  },\n\n  activeTabModel: function () {\n    return this.get('tabs').findWhere({ name: this.get('currentTab') });\n  },\n\n  canSaveBasemap: function () {\n    return this.get('contentPane') === 'tabs' && this._layerToSave();\n  },\n\n  saveBasemap: function () {\n    var self = this;\n\n    this.set('contentPane', 'addingBasemap');\n\n    var customBaselayerModel = this._layerToSave();\n    var attrs = customBaselayerModel.getAttributes();\n\n    if (this.activeTabModel().hasAlreadyAddedLayer(this._customBaselayersCollection)) {\n      // update selected in basemaps collection\n      this._basemapsCollection.updateSelected(attrs.className);\n      // update category if needed in basemaps collection,\n      // this is the case for mapbox basemaps which were stored without category in the editor\n      this._basemapsCollection.updateCategory(attrs.className, attrs.category);\n\n      // update baselayer\n      this._onBasemapSaved(attrs);\n    } else {\n      // Add to customBaselayersCollection before saving, so save URL resolves to the expected endpoint\n      this._customBaselayersCollection.add(customBaselayerModel);\n\n      customBaselayerModel.save({}, {\n        success: function (mdl, mdlAttrs) {\n          var options = mdlAttrs.options;\n\n          var name = options.name ? options.name : 'Custom basemap ' + mdlAttrs.order;\n          var className = options.className;\n          var urlTemplate = options.urlTemplate;\n\n          // add in basemaps collection\n          self._basemapsCollection.add({\n            id: mdlAttrs.id,\n            urlTemplate: urlTemplate,\n            maxZoom: options.minZoom || 21,\n            minZoom: options.minZoom || 0,\n            name: name,\n            className: className,\n            attribution: options.attribution,\n            category: options.category,\n            tms: options.tms,\n            type: options.type,\n            val: className,\n            label: name,\n            template: function (imgURL) {\n              return mosaicThumbnail({\n                imgURL: imgURL\n              });\n            }\n          });\n\n          // update baselayer\n          self._onBasemapSaved(attrs);\n        },\n        error: function () {\n          // Cleanup, remove layer it could not be saved!\n          self._customBaselayersCollection.remove(customBaselayerModel);\n          self.set('contentPane', 'addBasemapFailed');\n        }\n      });\n    }\n  },\n\n  _onBasemapSaved: function (layerAttrs) {\n    // Update baseLayer\n    this._layerDefinitionsCollection.setBaseLayer(layerAttrs);\n\n    this.trigger('saveBasemapDone');\n  },\n\n  _initTabs: function () {\n    var tabs = new Backbone.Collection([\n      new XYZModel(),\n      new MapboxModel(),\n      new WMSModel(null, {\n        customBaselayersCollection: this._customBaselayersCollection\n      }),\n      new TileJSONModel(),\n      new NASAModel()\n    ]);\n    this.set({\n      tabs: tabs,\n      currentTab: this._currentTab || tabs.first().get('name')\n    });\n  },\n\n  _initBinds: function () {\n    this.get('tabs').each(function (tabModel) {\n      tabModel.bind('saveBasemap', this.saveBasemap, this);\n    }, this);\n  },\n\n  _layerToSave: function () {\n    return this.activeTabModel().get('layer');\n  }\n\n});\n","var CoreView = require('backbone/core-view');\nvar template = require('./add-basemap.tpl');\nvar TabPaneView = require('builder/components/tab-pane/tab-pane-view');\nvar TabPaneCollection = require('builder/components/tab-pane/tab-pane-collection');\nvar ViewFactory = require('builder/components/view-factory');\nvar renderLoading = require('builder/components/loading/render-loading');\nvar ErrorView = require('builder/components/error/error-view');\nvar _ = require('underscore');\nvar TabsView = require('./tabs-view');\n\n/**\n * Add basemap dialog\n */\nmodule.exports = CoreView.extend({\n\n  className: 'Dialog-content Dialog-content--expanded',\n\n  events: {\n    'click .js-ok': 'ok'\n  },\n\n  initialize: function (opts) {\n    if (!opts.modalModel) throw new TypeError('modalModel is required');\n    if (!opts.createModel) throw new TypeError('createModel is required');\n\n    this._modalModel = opts.modalModel;\n    this._createModel = opts.createModel;\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template());\n    this._initViews();\n  },\n\n  _initBinds: function () {\n    this._createModel.bind('saveBasemapDone', this._modalModel.destroy.bind(this._modalModel), this);\n    this._createModel.bind('change:contentPane', this._onChangeContentView, this);\n    this.add_related_model(this._createModel);\n  },\n\n  _onChangeContentView: function () {\n    var context = this._createModel.get('contentPane');\n    var paneModel = _.first(this._tabPaneCollection.where({ name: context }));\n    paneModel.set('selected', true);\n  },\n\n  _initViews: function () {\n    var self = this;\n\n    this._submitButtom = this.$('.js-ok');\n    this._modalFooter = this.$('.js-Modal-footer');\n\n    this._tabPaneCollection = new TabPaneCollection([\n      {\n        name: 'tabs',\n        selected: this._createModel.get('contentPane') === 'tabs',\n        createContentView: function () {\n          return new TabsView({\n            model: self._createModel,\n            submitButton: self._submitButtom,\n            modalFooter: self._modalFooter\n          });\n        }\n      }, {\n        name: 'addingBasemap',\n        selected: this._createModel.get('contentPane') === 'addingBasemap',\n        createContentView: function () {\n          self._disableModalFooter(true);\n\n          return ViewFactory.createByHTML(\n            renderLoading({\n              title: _t('components.modals.add-basemap.adding-basemap')\n            })\n          );\n        }\n      }, {\n        name: 'addBasemapFailed',\n        selected: this._createModel.get('contentPane') === 'addBasemapFailed',\n        createContentView: function () {\n          return new ErrorView({\n            title: _t('components.modals.add-basemap.add-basemap-error')\n          });\n        }\n      }\n    ]);\n\n    var tabPaneView = new TabPaneView({\n      collection: this._tabPaneCollection\n    });\n    this.addView(tabPaneView);\n    this.$('.js-content-container').append(tabPaneView.render().el);\n  },\n\n  _disableModalFooter: function (disable) {\n    this._modalFooter.toggleClass('is-disabled', disable);\n  },\n\n  ok: function () {\n    if (this._createModel.canSaveBasemap()) {\n      this._createModel.saveBasemap();\n    }\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"Modal\">\\n  <div class=\"Modal-header\">\\n    <div class=\"Modal-headerContainer\">\\n      <h2 class=\"CDB-Text CDB-Size-huge is-light u-mainTextColor u-bSpace\">' +\n__e( _t('components.modals.add-basemap.modal-title') ) +\n'</h2>\\n      <h3 class=\"CDB-Text CDB-Size-medium u-altTextColor\">' +\n__e( _t('components.modals.add-basemap.modal-desc') ) +\n'</h3>\\n    </div>\\n  </div>\\n  <div class=\"Modal-container\">\\n    <div class=\"Tab-pane js-content-container\">\\n    </div>\\n  </div>\\n  <div class=\"Modal-footer js-Modal-footer\">\\n    <div class=\"Modal-footerContainer u-flex u-justifyEnd\">\\n      <button class=\"CDB-Button CDB-Button--primary is-disabled js-ok ok\">\\n        <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">' +\n__e( _t('components.modals.add-basemap.add-btn') ) +\n'</span>\\n      </button>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"u-flex u-alignCenter Modal-basemapContainer\">\\n  <h3 class=\"CDB-Text CDB-Size-large u-mainTextColor Modal-titleBasemap\">' +\n__e( _t('components.modals.add-basemap.mapbox.insert') ) +\n'</h3>\\n  <div class=\"CDB-Text u-flex u-alignCenter \">\\n    <label class=\"Metadata-label Metadata-label--big CDB-Text CDB-Size-small is-semibold u-upperCase u-ellipsis\">' +\n__e( _t('components.modals.add-basemap.mapbox.enter') ) +\n'</label>\\n    <div class=\"Form-rowData Form-rowData--longer\">\\n      <input type=\"text\" class=\"CDB-InputText CDB-Text js-url\" value=\"' +\n__e( url ) +\n'\" placeholder=\"' +\n__e( _t('components.modals.add-basemap.xyz.eg') ) +\n' https://api.mapbox.com/styles/v1/username/basemap/tiles/256/{z}/{x}/{y}@2x?access_token=access_token\">\\n      <div class=\"XYZPanel-error CDB-InfoTooltip CDB-InfoTooltip--left is-error CDB-Text CDB-Size-medium CDB-InfoTooltip-text js-error ' +\n__e( lastErrorMsg ? 'is-visible' : '' ) +\n'\">' +\n__e( lastErrorMsg ) +\n'</div>\\n    </div>\\n  </div>\\n  <div class=\"u-flex\">\\n    <label class=\"Metadata-label Metadata-label--big CDB-Text CDB-Size-small is-semibold u-upperCase u-ellipsis\"></label>\\n    <div class=\"Form-rowData Form-rowData--noMinHeight Form-rowData--longer\">\\n      <p class=\"CDB-Text CDB-Size-small Form-rowInfoText--block u-altTextColor\">\\n        Learn how to get your Mapbox Style URL <a href=\"https://www.mapbox.com/help/carto/\" target=\"_blank\">here</a>\\n      </p>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var Backbone = require('backbone');\nvar _ = require('underscore');\nvar MapboxView = require('./mapbox-view');\nvar MapboxToTileLayerFactory = require('./mapbox-to-tile-layer-factory');\n\n/**\n * View model for Mapbox tab content.\n */\n\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    name: 'mapbox',\n    label: 'Mapbox',\n    currentView: 'enterURL', //, validatingInputs, valid\n    lastErrorMsg: '', // set if fails to save\n    layer: undefined // will be set when valid\n  },\n\n  createView: function (opts) {\n    if (!opts.submitButton) throw new Error('submitButton is required');\n    if (!opts.modalFooter) throw new Error('modalFooter is required');\n\n    this._submitButton = opts.submitButton;\n    this._modalFooter = opts.modalFooter;\n\n    this.set({\n      currentView: 'enterURL',\n      layer: undefined\n    });\n\n    return new MapboxView({\n      model: this,\n      submitButton: this._submitButton,\n      modalFooter: this._modalFooter\n    });\n  },\n\n  hasAlreadyAddedLayer: function (userLayers) {\n    var urlTemplate = this.get('layer').get('urlTemplate');\n    return _.any(userLayers.isCustomCategory(), function (customLayer) {\n      return customLayer.get('urlTemplate') === urlTemplate;\n    });\n  },\n\n  validateInputs: function (url) {\n    this.set({\n      currentView: 'validatingInputs',\n      url: url\n    });\n\n    var self = this;\n\n    var mf = new MapboxToTileLayerFactory({\n      url: url\n    });\n    mf.createTileLayer({\n      success: function (tileLayer) {\n        self.set('layer', tileLayer);\n        self.trigger('saveBasemap');\n      },\n      error: function (errorMsg) {\n        self.set({\n          currentView: 'enterURL',\n          lastErrorMsg: errorMsg\n        });\n      }\n    });\n  }\n\n});\n","/* global Image, location */\n\nvar $ = require('jquery');\nvar _ = require('underscore');\nvar Backbone = require('backbone');\nvar CustomBaselayerModel = require('builder/data/custom-baselayer-model');\n\n/**\n * Factory to create a CustomBaselayerModel from a given Integration URL for Mapbox.\n */\n\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    url: ''\n  },\n\n  _MAPBOX: {\n    version: 4,\n    https: 'https://dnv9my2eseobd.cloudfront.net',\n    base: 'https://a.tiles.mapbox.com/'\n  },\n\n  /**\n   * @param {Object} callbacks\n   *   success {Function} given a new TileLayer object\n   *   error {Function} given an error explanation\n   */\n  createTileLayer: function (callbacks) {\n    var val = this.get('url');\n    var url = this._lowerXYZ(val);\n    var type = 'json';\n    var subdomains = ['a', 'b', 'c'];\n    var mapbox_id;\n\n    // Detects the URL's type\n    if (url.indexOf('{x}') < 0 && url.indexOf('tiles.mapbox.com') !== -1) {\n      mapbox_id = this._getMapBoxMapID(url);\n      if (mapbox_id) {\n        type = 'mapbox_id';\n        url = mapbox_id;\n      }\n    } else if (url.indexOf('{x}') !== -1) {\n      type = 'xyz';\n      url = url.replace(/\\{s\\}/g, function () {\n        return subdomains[Math.floor(Math.random() * 3)];\n      })\n        .replace(/\\{x\\}/g, '0')\n        .replace(/\\{y\\}/g, '0')\n        .replace(/\\{z\\}/g, '0');\n    } else if (url && url.indexOf('http') < 0 && url.match(/(.*?)\\.(.*)/) != null && url.match(/(.*?)\\.(.*)/).length === 3) {\n      type = 'mapbox_id';\n      mapbox_id = val;\n    } else { // If not, check https\n      url = this._fixHTTPS(url);\n    }\n\n    var self = this;\n    var image;\n    if (type === 'mapbox') {\n      callbacks.success(this._newTileLayer({ tiles: [url] }));\n    } else if (type === 'xyz') {\n      image = new Image();\n      image.onload = function () {\n        callbacks.success(self._newTileLayer({\n          tiles: [self._lowerXYZ(val)]\n        }));\n      };\n      image.onerror = function () {\n        callbacks.error(self._errorToMsg());\n      };\n      image.src = url;\n    } else if (type === 'mapbox_id') {\n      var base_url = this._MAPBOX.base + 'v' + this._MAPBOX.version + '/' + mapbox_id;\n      var tile_url = base_url + '/{z}/{x}/{y}.png';\n      var json_url = base_url + '.json';\n\n      // JQuery has a faulty implementation of the getJSON method and doesn't return\n      // a 404, so we use a timeout. TODO: replace with CORS\n      var errorTimeout = setTimeout(function () {\n        callbacks.error(self._errorToMsg());\n      }, 5000);\n\n      $.ajax({\n        url: json_url,\n        success: function (data) {\n          clearTimeout(errorTimeout);\n          callbacks.success(self._newTileLayer({\n            tiles: [tile_url],\n            attribution: data.attribution,\n            minzoom: data.minzoom,\n            maxzoom: data.maxzoom,\n            name: data.name\n          }));\n        },\n        error: function (e) {\n          clearTimeout(errorTimeout);\n          callbacks.error(self._errorToMsg(e));\n        }\n      });\n    } else {\n      callbacks.error(this._errorToMsg());\n    }\n  },\n\n  _newTileLayer: function (data) {\n    // Check if the respond is an array\n    // In that case, get only the first\n    if (_.isArray(data) && _.size(data) > 0) {\n      data = _.first(data);\n    }\n\n    var url = data.tiles[0];\n    var attribution = data.attribution || null;\n\n    var layer = new CustomBaselayerModel({\n      urlTemplate: url,\n      attribution: attribution,\n      maxZoom: data.maxzoom || 21,\n      minZoom: data.minzoom || 0,\n      name: data.name || '',\n      category: 'Mapbox',\n      type: 'Tiled'\n    });\n    layer.set('className', layer._generateClassName(url));\n\n    return layer;\n  },\n\n  _errorToMsg: function (error) {\n    if (typeof error === 'object' || !error) {\n      if (error && error.status && error.status === 401) {\n        return _t('components.modals.add-basemap.mapbox.error');\n      } else {\n        return _t('components.modals.add-basemap.mapbox.invalid');\n      }\n    }\n\n    return error;\n  },\n\n  _lowerXYZ: function (url) {\n    return url.replace(/\\{S\\}/g, '{s}')\n      .replace(/\\{X\\}/g, '{x}')\n      .replace(/\\{Y\\}/g, '{y}')\n      .replace(/\\{Z\\}/g, '{z}');\n  },\n\n  // Extracts the Mapbox MapId from a Mapbox URL\n  _getMapBoxMapID: function (url) {\n    // http://d.tiles.mapbox.com/v3/{user}.{map}/3/4/3.png\n    // http://a.tiles.mapbox.com/v3/{user}.{map}/page.html\n    // http://a.tiles.mapbox.com/v4/{user}.{map}.*\n    var reg1 = /https?:\\/\\/[a-z]?\\.?tiles\\.mapbox.com\\/v(\\d)\\/([^\\/.]*)\\.([^\\/.]*)/;\n\n    // https://tiles.mapbox.com/{user}/edit/{map}?newmap&preset=Streets#3/0.00/-0.09\n    var reg2 = /https?:\\/\\/tiles\\.mapbox\\.com\\/(.*?)\\/edit\\/(.*?)(\\?|#)/;\n\n    var match = '';\n\n    // Check first expresion\n    match = url.match(reg1);\n\n    if (match && match[1] && match[2]) {\n      return match[2] + '.' + match[3];\n    }\n\n    // Check second expresion\n    match = url.match(reg2);\n\n    if (match && match[1] && match[2]) {\n      return match[1] + '.' + match[2];\n    }\n  },\n\n  /**\n   * return a https url if the current application is loaded from https\n   */\n  _fixHTTPS: function (url, loc) {\n    loc = loc || location;\n\n    // fix the url to https or http\n    if (url.indexOf('https') !== 0 && loc.protocol === 'https:') {\n      // search for mapping\n      var i = url.indexOf('mapbox.com');\n      if (i !== -1) {\n        return this._MAPBOX.https + url.substr(i + 'mapbox.com'.length);\n      }\n      return url.replace(/http/, 'https');\n    }\n    return url;\n  }\n\n});\n","var CoreView = require('backbone/core-view');\nvar ViewFactory = require('builder/components/view-factory');\nvar renderLoading = require('builder/components/loading/render-loading');\nvar enterUrl = require('./enter-url.tpl');\n\n/**\n * Represents the Mapbox tab content.\n */\n\nmodule.exports = CoreView.extend({\n\n  events: {\n    'keydown': '_onKeyDown',\n    'keyup': '_onKeyUp'\n  },\n\n  initialize: function (opts) {\n    if (!opts.submitButton) throw new Error('submitButton is required');\n    if (!opts.modalFooter) throw new Error('modalFooter is required');\n\n    this._submitButton = opts.submitButton;\n    this._modalFooter = opts.modalFooter;\n    this._onClickBinded = this._onClickOK.bind(this);\n\n    this._bindSubmitButton();\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    var view;\n\n    switch (this.model.get('currentView')) {\n      case 'validatingInputs':\n        this._disableModalFooter(true);\n\n        view = ViewFactory.createByHTML(\n          renderLoading({\n            title: _t('components.modals.add-basemap.validating')\n          })\n        );\n        break;\n      case 'enterURL':\n      default:\n        this._disableModalFooter(false);\n\n        view = ViewFactory.createByHTML(\n          enterUrl({\n            url: this.model.get('url'),\n            lastErrorMsg: this.model.get('lastErrorMsg')\n          })\n        );\n    }\n    this.addView(view);\n    this.$el.append(view.render().el);\n\n    this._updateOkBtn();\n    this._onKeyUp();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.bind('change', this.render, this);\n  },\n\n  _hasValues: function () {\n    return this._urlVal();\n  },\n\n  _urlVal: function () {\n    return this.$('.js-url').val();\n  },\n\n  _onClickOK: function (e) {\n    this.killEvent(e);\n\n    if (this._hasValues()) {\n      var url = this._urlVal();\n\n      this.model.validateInputs(url);\n    }\n  },\n\n  _disableModalFooter: function (disable) {\n    this._modalFooter.toggleClass('is-disabled', disable);\n  },\n\n  _updateOkBtn: function () {\n    this._submitButton.find('span').text(_t('components.modals.add-basemap.add-btn'));\n  },\n\n  _onKeyDown: function (e) {\n    e.stopPropagation();\n\n    this.$('.js-error').removeClass('is-visible');\n  },\n\n  _onKeyUp: function (e) {\n    e && e.stopPropagation();\n    this._submitButton.toggleClass('is-disabled', !this._hasValues());\n  },\n\n  _bindSubmitButton: function () {\n    this._submitButton.on('click', this._onClickBinded);\n  },\n\n  _unBindSubmitButton: function () {\n    this._submitButton.off('click', this._onClickBinded);\n  },\n\n  clean: function () {\n    this._unBindSubmitButton();\n    CoreView.prototype.clean.call(this);\n  }\n\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar moment = require('moment');\nvar NASAView = require('./nasa-view');\nvar CustomBaselayerModel = require('builder/data/custom-baselayer-model');\n\nvar TYPES = {\n  day: {\n    url: 'http://map1.vis.earthdata.nasa.gov/wmts-webmerc/MODIS_Terra_CorrectedReflectance_TrueColor/default/<%- date %>/GoogleMapsCompatible_Level9/{z}/{y}/{x}.jpeg',\n    limit: '2012-05-01',\n    default: '2012-05-01',\n    attribution: '<a href=\"http://earthdata.nasa.gov/gibs\" target=\"_blank\">NASA EOSDIS GIBS</a>',\n    name: 'NASA Terra',\n    maxZoom: 9,\n    minZoom: 1\n  },\n  night: {\n    url: 'http://map1.vis.earthdata.nasa.gov/wmts-webmerc/VIIRS_CityLights_2012/default/<%- date %>/GoogleMapsCompatible_Level8/{z}/{y}/{x}.jpeg',\n    limit: '2012-05-01',\n    default: '2012-05-02',\n    attribution: '<a href=\"http://earthdata.nasa.gov/gibs\" target=\"_blank\">NASA EOSDIS GIBS</a>',\n    name: 'NASA Earth at night',\n    maxZoom: 8,\n    minZoom: 1\n  }\n};\n\n/**\n * View model for NASA tab content.\n */\n\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    name: 'nasa',\n    label: 'NASA',\n    layer: undefined, // gets set on dayOrNight/date changes\n    layerType: 'day',\n    date: undefined, // for date picker\n    current: undefined,\n    format: 'Y-m-d' // YYYY-MM-DD\n  },\n\n  initialize: function () {\n    this._initBinds();\n  },\n\n  createView: function (opts) {\n    if (!opts.submitButton) throw new Error('submitButton is required');\n\n    this._submitButton = opts.submitButton;\n\n    var utc = new Date().getTimezoneOffset();\n    var today = moment(new Date()).utcOffset(utc).format('YYYY-MM-DD');\n    var yesterday = moment(new Date()).utcOffset(utc).subtract(1, 'days').format('YYYY-MM-DD');\n\n    this.set({\n      current: today,\n      date: yesterday\n    });\n\n    return new NASAView({\n      model: this,\n      submitButton: this._submitButton\n    });\n  },\n\n  hasAlreadyAddedLayer: function (userLayers) {\n    var urlTemplate = this.get('layer').get('urlTemplate');\n    return _.any(userLayers.isCustomCategory(), function (customLayer) {\n      return customLayer.get('urlTemplate') === urlTemplate;\n    });\n  },\n\n  _initBinds: function () {\n    this.bind('change:date change:layerType', this._onChange, this);\n  },\n\n  _onChange: function () {\n    var dateStr = this.get('date');\n    var layerType = this.get('layerType');\n\n    var url = _.template(TYPES[layerType].url)({\n      date: dateStr\n    });\n\n    var name = TYPES[layerType].name;\n\n    if (layerType === 'day') {\n      name = name + ' ' + dateStr;\n    }\n\n    var layer = new CustomBaselayerModel({\n      urlTemplate: url,\n      attribution: TYPES[layerType].attribution,\n      maxZoom: TYPES[layerType].maxZoom,\n      minZoom: TYPES[layerType].minZoom,\n      name: name,\n      category: 'NASA',\n      type: 'Tiled'\n    });\n    layer.set('className', layer._generateClassName(url));\n\n    this.set('layer', layer);\n  }\n\n});\n","var $ = require('jquery');\nvar moment = require('moment');\nvar CoreView = require('backbone/core-view');\nvar DatePickerView = require('builder/components/date-picker/date-picker-view');\nvar EditFieldModel = require('builder/components/date-picker/edit-field-model');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\nvar template = require('./nasa.tpl');\n\n/**\n * Represents the NASA tab content\n */\n\nmodule.exports = CoreView.extend({\n\n  options: {\n    dateFormat: 'YYYY-MM-DD'\n  },\n\n  events: {\n    'click .js-day': '_onChangeToDay',\n    'click .js-night': '_onChangeToNight'\n  },\n\n  initialize: function (opts) {\n    if (!opts.submitButton) throw new Error('submitButton is required');\n\n    this._submitButton = opts.submitButton;\n    this.dateModel = new EditFieldModel({\n      value: this.model.get('date'),\n      type: 'date'\n    });\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this._updateOkBtn();\n    this._disableOkBtn(false);\n\n    this.$el.html(\n      template({\n        layerType: this.model.get('layerType')\n      })\n    );\n\n    this._renderDatePicker();\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.bind('change:layerType', function () {\n      this.dateModel.set('readOnly', this.model.get('layerType') === 'night');\n      this.render();\n    }, this);\n    this.dateModel.bind('change:value', function () {\n      var date = moment(this.dateModel.get('value')).format(this.options.dateFormat);\n      this.model.set('date', date);\n    }, this);\n    this.add_related_model(this.dateModel);\n  },\n\n  _renderDatePicker: function () {\n    // Date picker\n    var datepicker = this.datepicker = new DatePickerView({\n      className: 'DatePicker DatePicker--withBorder',\n      model: this.dateModel\n    });\n    this._$datePicker().html(datepicker.render().el);\n    this.addView(datepicker);\n\n    // Disabled tooltip\n    if (this.dateModel.get('readOnly')) {\n      var tooltip = new TipsyTooltipView({\n        el: this._$datePicker(),\n        title: function (e) {\n          return $(this).attr('data-title');\n        }\n      });\n      this.addView(tooltip);\n    }\n  },\n\n  _onChangeToNight: function () {\n    this.model.set('layerType', 'night');\n  },\n\n  _onChangeToDay: function () {\n    this.model.set('layerType', 'day');\n  },\n\n  _$datePicker: function () {\n    return this.$('.js-datePicker');\n  },\n\n  _updateOkBtn: function () {\n    this._submitButton.find('span').text(_t('components.modals.add-basemap.add-btn'));\n  },\n\n  _disableOkBtn: function (disable) {\n    this._submitButton.toggleClass('is-disabled', disable);\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"u-flex u-alignCenter Modal-basemapContainer\">\\n  <h3 class=\"CDB-Text CDB-Size-large u-mainTextColor Modal-titleBasemap\">' +\n__e( _t('components.modals.add-basemap.nasa.select') ) +\n'</h3>\\n  <div class=\"CDB-Text u-flex u-alignCenter\">\\n    <div class=\"Form-rowData Form-rowData--short Form-rowData--alignLeft\">\\n      <div class=\"Form-rowData Form-rowData--full\">\\n        <div class=\"RadioButton js-day\">\\n          <button type=\"button\" class=\"RadioButton-input ';\n if (layerType === 'day') { ;\n__p += 'is-checked';\n } ;\n__p += '\"></button>\\n          <label class=\"Metadata-label Metadata-label--auto CDB-Text CDB-Size-small is-semibold u-upperCase u-ellipsis\" for=\"nasa-type-day\">' +\n__e( _t('components.modals.add-basemap.nasa.day') ) +\n'</label>\\n        </div>\\n      </div>\\n      <div class=\"Form-rowData Form-rowData--full\">\\n        <div class=\"RadioButton js-night\">\\n          <button type=\"button\" class=\"RadioButton-input ';\n if (layerType === 'night') { ;\n__p += 'is-checked';\n } ;\n__p += '\"/></button>\\n          <label class=\"Metadata-label Metadata-label--auto CDB-Text CDB-Size-small is-semibold u-upperCase u-ellipsis\" for=\"nasa-type-night\">' +\n__e( _t('components.modals.add-basemap.nasa.night') ) +\n'</label>\\n        </div>\\n      </div>\\n    </div>\\n    <div class=\"Form-rowData Form-rowData--short\">\\n      <div class=\"js-datePicker\" data-title=\"' +\n__e( _t('components.modals.add-basemap.nasa.cant-select') ) +\n'\"></div>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar ScrollView = require('builder/components/scroll/scroll-view');\nvar $ = require('jquery');\nvar template = require('./tabs.tpl');\n\n/**\n * View representing the tabs content of the dialog.\n */\nmodule.exports = CoreView.extend({\n\n  events: {\n    'click .js-tabs button': '_onClickTab'\n  },\n\n  attributes: function () {\n    return {\n      class: 'Modal-outer'\n    };\n  },\n\n  initialize: function (opts) {\n    if (!opts.submitButton) throw new Error('submitButton is required');\n    if (!opts.modalFooter) throw new Error('modalFooter is required');\n\n    this._submitButton = opts.submitButton;\n    this._modalFooter = opts.modalFooter;\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this.$el.html(template({\n      model: this.model\n    }));\n\n    this._initViews();\n\n    return this;\n  },\n\n  _initViews: function () {\n    var scrollView = new ScrollView({\n      className: 'ScrollView ScrollView--withoutMargins',\n      createContentView: function () {\n        return this._createTabContentView();\n      }.bind(this)\n    });\n\n    this.addView(scrollView);\n    this.$('.js-tab-content').append(scrollView.render().el);\n  },\n\n  _initBinds: function () {\n    this.model.bind('change:currentTab', this.render, this);\n  },\n\n  _createTabContentView: function () {\n    if (this._currentTabView) {\n      this._currentTabView.clean();\n    }\n    this._currentTabView = this.model.activeTabModel().createView({\n      submitButton: this._submitButton,\n      modalFooter: this._modalFooter\n    });\n    this.addView(this._currentTabView);\n    return this._currentTabView.render();\n  },\n\n  _onClickTab: function (e) {\n    this.killEvent(e);\n    var name = $(e.target).closest('button').data('name');\n    if (name) {\n      this.model.set('currentTab', name);\n    } else {\n      throw new Error('tab name was expected but was empty');\n    }\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"Modal-navigation\">\\n  <ul class=\"Modal-navigationInner CDB-Text is-semibold CDB-Size-medium js-tabs\">\\n    ';\n model.get('tabs').each(function(tab) { ;\n__p += '\\n      <li class=\"CDB-NavMenu-item ' +\n__e( model.get('currentTab') === tab.get('name') ? 'is-selected' : '' ) +\n'\">\\n        <button data-name=\"' +\n__e( tab.get('name') ) +\n'\" class=\"CDB-NavMenu-link u-upperCase\">\\n          ' +\n__e( tab.get('label') ) +\n'\\n        </button>\\n      </li>\\n    ';\n }) ;\n__p += '\\n  </ul>\\n</div>\\n<div class=\"Modal-inner Modal-inner--with-navigation js-tab-content\"></div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"u-flex u-alignCenter Modal-basemapContainer\">\\n  <h3 class=\"CDB-Text CDB-Size-large u-mainTextColor Modal-titleBasemap\">' +\n__e( _t('components.modals.add-basemap.tilejson.insert') ) +\n'</h3>\\n  <div class=\"CDB-Text u-flex u-alignCenter\">\\n    <label class=\"Metadata-label Metadata-label--auto  CDB-Text CDB-Size-small is-semibold u-upperCase u-ellipsis\">' +\n__e( _t('components.modals.add-basemap.xyz.enter') ) +\n'</label>\\n    <div class=\"Form-rowData Form-rowData--longer\">\\n      <input type=\"text\" class=\"has-icon CDB-InputText CDB-Text js-url\" value=\"\" placeholder=\"' +\n__e( _t('components.modals.add-basemap.xyz.eg') ) +\n' http://domain.com/tiles.json?foo=bar\">\\n      <i class=\"CDB-IconFont CDB-IconFont-dribbble Form-inputIcon js-idle\"></i>\\n      <i class=\"Spinner XYZPanel-inputIcon Spinner--formIcon Form-inputIcon js-validating\" style=\"display: none;\"></i>\\n      <div class=\"XYZPanel-error CDB-InfoTooltip CDB-InfoTooltip--left is-error CDB-Text CDB-Size-medium CDB-InfoTooltip-text js-error\"></div>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var Backbone = require('backbone');\nvar CustomBaselayerModel = require('builder/data/custom-baselayer-model');\n\n/**\n * Model to representing a TileJSON endpoint\n * See https://github.com/mapbox/tilejson-spec/tree/master/2.1.0 for details\n */\n\nmodule.exports = Backbone.Model.extend({\n\n  url: function () {\n    return this.get('tilejson_url');\n  },\n\n  newTileLayer: function () {\n    if (!this._isFetched()) throw new Error('no tiles, have fetch been called and returned a successful resultset?');\n\n    var url = this._urlTemplate();\n\n    var layer = new CustomBaselayerModel({\n      urlTemplate: url,\n      attribution: this.get('attribution'),\n      maxZoom: this.get('maxzoom'),\n      minZoom: this.get('minzoom'),\n      name: this._name(),\n      bounding_boxes: this.get('bounds'),\n      tms: this.get('scheme') === 'tms',\n      category: 'TileJSON',\n      type: 'Tiled'\n    });\n    layer.set('className', layer._generateClassName(url));\n\n    return layer;\n  },\n\n  setUrl: function (url) {\n    this.set('tilejson_url', url);\n  },\n\n  _isFetched: function () {\n    return this.get('tiles').length > 0;\n  },\n\n  _urlTemplate: function () {\n    return this.get('tiles')[0];\n  },\n\n  _name: function () {\n    return this.get('name') || this.get('description');\n  }\n\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar TileJSONView = require('./tilejson-view');\nvar TileJSONLayerModel = require('./tilejson-layer-model');\n\n/**\n * View model for TileJSON tab content.\n */\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    name: 'tilejson',\n    label: 'TileJSON',\n    layer: undefined // will be set when valid\n  },\n\n  createView: function (opts) {\n    if (!opts.submitButton) throw new Error('submitButton is required');\n\n    this._submitButton = opts.submitButton;\n\n    var tileJSONLayerModel = new TileJSONLayerModel();\n\n    return new TileJSONView({\n      model: this,\n      submitButton: this._submitButton,\n      tileJSONLayerModel: tileJSONLayerModel\n    });\n  },\n\n  hasAlreadyAddedLayer: function (userLayers) {\n    var urlTemplate = this.get('layer').get('urlTemplate');\n    return _.any(userLayers.isCustomCategory(), function (customLayer) {\n      return customLayer.get('urlTemplate') === urlTemplate;\n    });\n  }\n\n});\n","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar template = require('./enter-url.tpl');\n\n/**\n * Represents the TileJSON tab content.\n */\nmodule.exports = CoreView.extend({\n\n  events: {\n    'keydown .js-url': '_onKeydown',\n    'paste .js-url': '_onPaste'\n  },\n\n  initialize: function (opts) {\n    if (!opts.submitButton) throw new Error('submitButton is required');\n    if (!opts.tileJSONLayerModel) throw new Error('tileJSONLayerModel is required');\n\n    this._submitButton = opts.submitButton;\n    this._tileJSONLayerModel = opts.tileJSONLayerModel;\n    this._lastURL = '';\n    this._debouncedUpdate = _.debounce(this._update.bind(this), 150);\n  },\n\n  render: function () {\n    this._updateOkBtn();\n    this._disableOkBtn(true);\n\n    this.$el.html(\n      template()\n    );\n\n    return this;\n  },\n\n  _onKeydown: function (e) {\n    e.stopPropagation();\n    this._debouncedUpdate();\n  },\n\n  _onPaste: function (e) {\n    e.stopPropagation();\n    this._debouncedUpdate();\n  },\n\n  _update: function () {\n    var self = this;\n\n    this._disableOkBtn(true);\n    this._indicateIsValidating(true);\n\n    var url = this._urlWithHTTP();\n\n    if (url === this._lastURL) {\n      // Even if triggered nothing really changed so just update UI and return early\n      this._indicateIsValidating(false);\n      this._updateError();\n\n      return;\n    }\n\n    this._lastURL = url;\n\n    this._indicateIsValidating(true);\n\n    this._tileJSONLayerModel.setUrl(url);\n\n    this._tileJSONLayerModel.fetch({\n      success: function (mdl) {\n        if (url === self._lastURL) {\n          self.model.set('layer', mdl.newTileLayer());\n          self._disableOkBtn(false);\n          self._indicateIsValidating(false);\n          self._updateError();\n        }\n      },\n      error: function () {\n        if (url === self._lastURL) {\n          self._indicateIsValidating(false);\n          // Note that this text can not be longer, or it will exceed available space of the error label.\n          self._updateError(_t('components.modals.add-basemap.tilejson.invalid'));\n        }\n      }\n    });\n  },\n\n  _updateOkBtn: function () {\n    this._submitButton.find('span').text(_t('components.modals.add-basemap.add-btn'));\n  },\n\n  _disableOkBtn: function (disable) {\n    this._submitButton.toggleClass('is-disabled', disable);\n  },\n\n  _updateError: function (msg) {\n    this.$('.js-error').text(msg)[msg ? 'addClass' : 'removeClass']('is-visible');\n  },\n\n  _indicateIsValidating: function (indicate) {\n    if (indicate) {\n      this.$('.js-idle').hide();\n      this.$('.js-validating').show();\n    } else {\n      this.$('.js-validating').hide();\n      this.$('.js-idle').show();\n    }\n  },\n\n  // So don't try to be fetched relatively to current URL path later\n  _urlWithHTTP: function () {\n    var str = this.$('.js-url').val();\n\n    if (str.indexOf('http://') === -1 && str.indexOf('https://') === -1) {\n      return 'http://' + str;\n    } else {\n      return str;\n    }\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"u-flex u-alignCenter Modal-basemapContainer\">\\n  <h3 class=\"CDB-Text CDB-Size-large u-mainTextColor Modal-titleBasemap\">' +\n__e( _t('components.modals.add-basemap.wms.insert') ) +\n'</h3>\\n  <div class=\"CDB-Text u-flex u-alignCenter\">\\n    <label class=\"Metadata-label Metadata-label--auto  CDB-Text CDB-Size-small is-semibold u-upperCase u-ellipsis\">' +\n__e( _t('components.modals.add-basemap.xyz.enter') ) +\n'</label>\\n    <div class=\"Form-rowData Form-rowData--longer\">\\n      <input type=\"text\" class=\"has-icon CDB-InputText CDB-Text js-url\" value=\"\" placeholder=\"' +\n__e( _t('components.modals.add-basemap.xyz.eg') ) +\n' http://openlayers.org/en/v3.5.0/examples/data/ogcsample.xml\">\\n      <i class=\"CDB-IconFont CDB-IconFont-dribbble Form-inputIcon js-idle\"></i>\\n      <i class=\"Spinner XYZPanel-inputIcon XYZPanel-inputIcon--loader Spinner--formIcon Form-inputIcon js-validating\" style=\"display: none;\"></i>\\n      <div class=\"XYZPanel-error CDB-InfoTooltip CDB-InfoTooltip--left is-error CDB-Text CDB-Size-medium CDB-InfoTooltip-text js-error ' +\n__e( (layersFetched && layers.length === 0) ? 'is-visible' : '' ) +\n'\">\\n        ';\n if (layersFetched && layers.length === 0) { ;\n__p += '\\n          ' +\n__e( _t('components.modals.add-basemap.wms.invalid') ) +\n'\\n        ';\n } ;\n__p += '\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar template = require('./select-layer.tpl');\nvar WMSLayersView = require('./wms-layers-view');\n\n/**\n * Sub view, to select what layer to use as basemap.\n */\nmodule.exports = CoreView.extend({\n\n  events: {\n    'click .js-back': '_onClickBack'\n  },\n\n  initialize: function (opts) {\n    if (!opts.customBaselayersCollection) throw new Error('customBaselayersCollection is required');\n    this._customBaselayersCollection = opts.customBaselayersCollection;\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this.$el.html(\n      template({\n        searchQuery: this.model.get('searchQuery'),\n        layersFound: this.model.getLayers(),\n        layersAvailableCount: this.model.layersAvailableCount()\n      })\n    );\n\n    this._initViews();\n\n    return this;\n  },\n\n  _initViews: function () {\n    var wmsListView = new WMSLayersView({\n      model: this.model,\n      customBaselayersCollection: this._customBaselayersCollection\n    });\n\n    this.addView(wmsListView);\n    this.$('.js-layers').append(wmsListView.render().el);\n  },\n\n  _onClickBack: function (e) {\n    this.killEvent(e);\n    this.model.set('currentView', 'enterURL');\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"u-inner\">\\n  <div class=\"Filters WMSSSelectLayer-Filter is-relative\">\\n    <div class=\"Filters-inner\">\\n      <div class=\"Filters-row\">\\n        <div class=\"Filters-group\">\\n          <div class=\"Filters-typeItem Filters-typeItem--searchEnabler\">\\n            <button class=\"Filters-searchLink CDB-Text is-semibold u-upperCase CDB-Size-medium js-search-link\">\\n              <i class=\"Filters-searchLinkIcon CDB-IconFont CDB-IconFont-lens\"></i>' +\n__e( _t('components.modals.add-layer.navigation.search') ) +\n'\\n            </button>\\n          </div>\\n        </div>\\n\\n        <div class=\"Filters-typeItem Filters-typeItem--searchField\">\\n          <form class=\"Filters-searchForm js-search-form\" action=\"#\">\\n            <input class=\"Filters-searchInput CDB-Text CDB-Size-medium js-search-input\" type=\"text\" value=\"' +\n__e( searchQuery ) +\n'\" placeholder=\"' +\n__e( _t('components.modals.add-basemap.wms.placeholder', { layersFoundCount: layersFound.length, layersFoundCountPluralize: _t('components.modals.add-basemap.wms.tables-pluralize', { smart_count: layersFound.length }), layersAvailableCount: layersAvailableCount, layersAvailableCountPluralize: _t('components.modals.add-basemap.wms.tables-pluralize', { smart_count: layersAvailableCount }) }) ) +\n'\" />\\n            <button type=\"button\" class=\"Filters-cleanSearch js-clean-search u-actionTextColor\">\\n              <i class=\"CDB-IconFont CDB-IconFont-close\"></i>\\n            </button>\\n          </form>\\n        </div>\\n\\n        <span class=\"Filters-separator\"></span>\\n      </div>\\n    </div>\\n  </div>\\n\\n  ';\n if (searchQuery && layersFound.length == 0) { ;\n__p += '\\n    <div class=\"IntermediateInfo\">\\n      <div class=\"LayoutIcon\">\\n        <i class=\"CDB-IconFont CDB-IconFont-defaultUser\"></i>\\n      </div>\\n      <h4 class=\"CDB-Text CDB-Size-large u-mainTextColor u-bSpace u-secondaryTextColor u-tSpace-xl\">' +\n__e( _t('components.modals.add-basemap.wms.oh-no') ) +\n'</h4>\\n      <p class=\"CDB-Text CDB-Size-medium u-altTextColor\">' +\n__e( _t('components.modals.add-basemap.wms.unfortunately') ) +\n'</p>\\n    </div>\\n  ';\n } else { ;\n__p += '\\n    <div class=\"js-layers\"></div>\\n  ';\n } ;\n__p += '\\n</div>\\n\\n<button class=\"NavButton Dialog-backBtn js-back\">\\n  <i class=\"CDB-IconFont CDB-IconFont-arrowPrev\"></i>\\n</button>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar CustomBaselayerModel = require('builder/data/custom-baselayer-model');\n\n/**\n * Model for an individual WMS/WMTS layer.\n */\n\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    state: 'idle' // idle, saving, saveDone, saveFail\n  },\n\n  url: function () {\n    return this._wmsService.saveLayerURL({\n      title: this.get('title'),\n      name: this.get('name'),\n      layer: this.get('name'),\n      srs: this.get('srs'),\n      bounding_boxes: this.get('llbbox'),\n      type: this.get('type'), // wms/wmts\n      matrix_sets: this.get('matrix_sets')\n    });\n  },\n\n  sync: function (method, model, options) {\n    options = options || {};\n    options.url = this.url(method.toLowerCase());\n    options.dataType = 'jsonp';\n    options.attrs = '_';\n    method = 'READ';\n\n    return Backbone.sync.apply(this, arguments);\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.wmsService) throw new Error('wmsService is required');\n\n    this._wmsService = opts.wmsService;\n  },\n\n  canSave: function (customBaselayersCollection) {\n    return !_.any(customBaselayersCollection.isCustomCategory(), function (customLayer) {\n      return customLayer.get('name') === this.get('title');\n    }, this);\n  },\n\n  createProxiedLayerOrCustomBaselayerModel: function () {\n    this.set('state', 'saving');\n    this._shouldBeProxied() ? this._createProxiedLayer() : this._newCustomBaselayerModel();\n  },\n\n  _shouldBeProxied: function () {\n    if (this.get('type') === 'wmts') {\n      var supportedMatrixSets = this._wmsService.supportedMatrixSets(this.get('matrix_sets') || []);\n\n      return supportedMatrixSets.length > 0;\n    }\n\n    return true;\n  },\n\n  _createProxiedLayer: function () {\n    var self = this;\n\n    this.save({}, {\n      success: function () {\n        var proxiedBaselayerModel;\n\n        try {\n          proxiedBaselayerModel = self._newProxiedBaselayerModel();\n        } catch (e) {\n        }\n\n        if (proxiedBaselayerModel) {\n          self._setCustomBaselayerModel(proxiedBaselayerModel);\n        } else {\n          self.set('state', 'saveFail');\n        }\n      },\n      error: function (e) {\n        self.set('state', 'saveFail');\n      }\n    });\n  },\n\n  _newCustomBaselayerModel: function () {\n    var customBaselayerModel = this._byCustomURL(this._xyzURLTemplate());\n\n    customBaselayerModel.set({\n      name: this.get('title') || this.get('name'),\n      attribution: this.get('attribution'),\n      bounding_boxes: this.get('llbbox')\n    });\n    this._setCustomBaselayerModel(customBaselayerModel);\n\n    return customBaselayerModel;\n  },\n\n  _newProxiedBaselayerModel: function () {\n    if (!this.get('mapproxy_id')) {\n      throw new Error('mapproxy_id must be set');\n    }\n\n    var url = this._wmsService.getProxyTilesURL() + '/' + this.get('mapproxy_id') + '/wmts/map/webmercator/{z}/{x}/{y}.png';\n    var proxiedBaselayerModel = this._generateCustomBaselayerModel(url);\n\n    proxiedBaselayerModel.set({\n      name: this.get('title') || this.get('name'),\n      attribution: this.get('attribution'),\n      proxy: true,\n      bounding_boxes: this.get('bounding_boxes')\n    });\n\n    return proxiedBaselayerModel;\n  },\n\n  _generateCustomBaselayerModel: function (url) {\n    var layer = new CustomBaselayerModel({\n      urlTemplate: url,\n      attribution: null,\n      maxZoom: 21,\n      minZoom: 0,\n      name: '',\n      category: 'WMS',\n      tms: false,\n      type: 'Tiled'\n    });\n    layer.set('className', layer._generateClassName(url));\n\n    return layer;\n  },\n\n  _byCustomURL: function (url) {\n    // Minimal test for \"valid URL\" w/o having to complicate it with regex\n    if (url && url.indexOf('/') === -1) throw new TypeError('invalid URL');\n\n    // Only lowercase the placeholder variables, since the URL may contain case-sensitive data (e.g. API keys and such)\n    url = url.replace(/\\{S\\}/g, '{s}')\n      .replace(/\\{X\\}/g, '{x}')\n      .replace(/\\{Y\\}/g, '{y}')\n      .replace(/\\{Z\\}/g, '{z}');\n\n    var layer = this._generateCustomBaselayerModel(url);\n\n    return layer;\n  },\n\n  _xyzURLTemplate: function () {\n    var urlTemplate = this.get('url_template') || '';\n    // Convert the proxy template variables to XYZ format, http://foo.com/bar/%%(z)s/%%(x)s/%%(y)s.png\"\n    return urlTemplate.replace(/%%\\((\\w)\\)s/g, '{$1}');\n  },\n\n  _setCustomBaselayerModel: function (customBaselayerModel) {\n    this.set({\n      state: 'saveDone',\n      customBaselayerModel: customBaselayerModel\n    });\n  }\n\n});\n","var CoreView = require('backbone/core-view');\nvar template = require('./wms-layer.tpl');\n\n/**\n * View for an individual layer item.\n */\nmodule.exports = CoreView.extend({\n\n  tagName: 'li',\n\n  className: 'List-row',\n\n  events: {\n    'click .js-add': '_onClickAdd'\n  },\n\n  initialize: function (opts) {\n    if (!opts.customBaselayersCollection) throw new Error('customBaselayersCollection is required');\n\n    this._customBaselayersCollection = opts.customBaselayersCollection;\n  },\n\n  render: function () {\n    this.$el.html(\n      template({\n        model: this.model,\n        canSave: this.model.canSave(this._customBaselayersCollection)\n      })\n    );\n    return this;\n  },\n\n  _onClickAdd: function (e) {\n    this.killEvent(e);\n\n    if (this.model.canSave(this._customBaselayersCollection)) {\n      this.model.createProxiedLayerOrCustomBaselayerModel();\n    }\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"List-rowItem\">\\n  <div class=\"DefaultTitle ' +\n__e( canSave ? '': 'is-disabled' ) +\n'\">' +\n__e( model.get('title') || model.get('name') ) +\n'</div>\\n  <button class=\"js-add Button Button--secondary Button--secondaryTransparentBkg ' +\n__e( canSave ? '' : 'is-disabled' ) +\n'\">\\n    <span>Add this</span>\\n  </button>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar WMSLayerModel = require('./wms-layer-model');\n\nmodule.exports = Backbone.Collection.extend({\n\n  model: function (attrs, opts) {\n    var self = opts.collection;\n\n    return new WMSLayerModel(attrs, {\n      wmsService: self._wmsService\n    });\n  },\n\n  parse: function (r) {\n    var layers = [];\n\n    if (r.layers) {\n      layers = _.map(r.layers, function (layer) {\n        return _.extend({ type: r.type || 'wms' }, layer);\n      });\n    }\n\n    return layers;\n  },\n\n  sync: function (method, model, options) {\n    options = options || {};\n    options.url = this.url(method.toLowerCase());\n    options.dataType = 'jsonp';\n    method = 'READ';\n\n    return Backbone.sync.apply(this, arguments);\n  },\n\n  url: function () {\n    return this._wmsService.getFetchLayersURL();\n  },\n\n  initialize: function (models, opts) {\n    if (!opts.wmsService) throw new Error('wmsService is required');\n\n    this._wmsService = opts.wmsService;\n  }\n\n});\n","var WMSLayerView = require('./wms-layer-view');\nvar CoreView = require('backbone/core-view');\n\n/**\n * Sub view, to select what layer to use as basemap.\n */\nmodule.exports = CoreView.extend({\n\n  className: 'List',\n  tagName: 'ul',\n\n  initialize: function (opts) {\n    if (!opts.customBaselayersCollection) throw new Error('customBaselayersCollection is required');\n    if (!this.model) throw new Error('model is required');\n\n    this._customBaselayersCollection = opts.customBaselayersCollection;\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.append.apply(this.$el, this._renderedLayers());\n    return this;\n  },\n\n  _renderedLayers: function () {\n    return this.model.getLayers().map(function (layer) {\n      var view = new WMSLayerView({\n        model: layer,\n        customBaselayersCollection: this._customBaselayersCollection\n      });\n\n      this.addView(view);\n\n      return view.render().el;\n    }, this);\n  }\n\n});\n","var Backbone = require('backbone');\nvar _ = require('underscore');\nvar WMSView = require('./wms-view');\nvar WMSLayersCollection = require('./wms-layers-collection');\nvar WMSService = require('builder/data/wms-service');\n\n/**\n * View model for WMS/WMTS tab content.\n */\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    name: 'wms',\n    label: 'WMS/WMTS',\n    currentView: 'enterURL', // [fetchingLayers, selectLayer, savingLayer]\n    layersFetched: false,\n    layer: undefined // will be set when selected\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.customBaselayersCollection) throw new Error('customBaselayersCollection is required');\n\n    this._customBaselayersCollection = opts.customBaselayersCollection;\n\n    this.wmsService = new WMSService();\n    this.wmsLayersCollection = new WMSLayersCollection(null, {\n      wmsService: this.wmsService\n    });\n\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.wmsLayersCollection.bind('change:state', this._onLayerStateChange, this);\n    this.wmsLayersCollection.bind('reset', function () {\n      this.set({\n        currentView: this.wmsLayersCollection.length > 0 ? 'selectLayer' : 'enterURL',\n        layersFetched: true\n      });\n\n      this.trigger('layersFetched');\n    }, this);\n  },\n\n  createView: function (opts) {\n    if (!opts.submitButton) throw new Error('submitButton is required');\n    if (!opts.modalFooter) throw new Error('modalFooter is required');\n\n    this._submitButton = opts.submitButton;\n    this._modalFooter = opts.modalFooter;\n\n    this.set({\n      currentView: 'enterURL',\n      layersFetched: false\n    });\n\n    return new WMSView({\n      model: this,\n      customBaselayersCollection: this._customBaselayersCollection,\n      submitButton: this._submitButton,\n      modalFooter: this._modalFooter\n    });\n  },\n\n  fetchLayers: function (url) {\n    this.set('currentView', 'fetchingLayers');\n\n    this.wmsService.setUrl(url);\n\n    this.wmsLayersCollection.fetch({\n      reset: true\n    });\n  },\n\n  layersAvailableCount: function () {\n    return _.difference(\n      this.wmsLayersCollection.pluck('title'),\n      this._customBaselayersCollection.pluck('name')\n    ).length;\n  },\n\n  get: function (name) {\n    if (name === 'layer') {\n      var customBaselayerModel = this.wmsLayersCollection.find(function (mdl) {\n        return mdl.get('state') === 'saveDone';\n      });\n\n      return customBaselayerModel && customBaselayerModel.get('customBaselayerModel');\n    } else {\n      return Backbone.Model.prototype.get.apply(this, arguments);\n    }\n  },\n\n  getLayers: function () {\n    if (this.get('searchQuery')) {\n      var regExp = new RegExp(this.get('searchQuery'), 'i');\n\n      return this.wmsLayersCollection.filter(function (layer) {\n        return layer.get('name').match(regExp);\n      }, this);\n    } else {\n      return this.wmsLayersCollection;\n    }\n  },\n\n  hasAlreadyAddedLayer: function () {\n    // Already added layers are disabled to be saved for each layer\n    return false;\n  },\n\n  _onLayerStateChange: function (mdl, newState) {\n    switch (newState) {\n      case 'saving':\n        this.set('currentView', 'savingLayer');\n        break;\n      case 'saveDone':\n        this.set('layer', mdl.get('customBaselayerModel'));\n        this.trigger('saveBasemap');\n        break;\n      case 'saveFail':\n        this.set('currentView', 'saveFail');\n        break;\n      default:\n        this.set('currentView', 'selectLayer');\n    }\n  }\n\n});\n","var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar SelectLayerView = require('./select-layer-view');\nvar ViewFactory = require('builder/components/view-factory');\nvar ErrorView = require('builder/components/error/error-view');\nvar renderLoading = require('builder/components/loading/render-loading');\nvar enterUrl = require('./enter-url.tpl');\nvar $ = require('jquery');\n\n/**\n * Represents the WMS/WMTS tab category.\n * Current state is defined by presence (or lack of) layers\n */\nmodule.exports = CoreView.extend({\n\n  events: {\n    'keydown .js-search-input': '_onKeyDown',\n    'submit .js-search-form': 'killEvent',\n    'keydown .js-url': '_onKeydown',\n    'paste .js-url': '_onPaste',\n    'click .js-clean-search': '_onCleanSearchClick',\n    'click .js-search-link': '_submitSearch'\n  },\n\n  initialize: function (opts) {\n    if (!opts.customBaselayersCollection) throw new Error('customBaselayersCollection is required');\n    if (!opts.submitButton) throw new Error('submitButton is required');\n    if (!opts.modalFooter) throw new Error('modalFooter is required');\n\n    this._customBaselayersCollection = opts.customBaselayersCollection;\n    this._submitButton = opts.submitButton;\n    this._modalFooter = opts.modalFooter;\n    this._debouncedUpdate = _.debounce(this._update.bind(this), 150);\n    this._onClickBinded = this._onClickOK.bind(this);\n\n    this._bindSubmitButton();\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this._updateOkBtn();\n    this._disableOkBtn(true);\n\n    var view;\n\n    switch (this.model.get('currentView')) {\n      case 'savingLayer':\n        this._disableModalFooter(true);\n\n        view = ViewFactory.createByHTML(\n          renderLoading({\n            title: _t('components.modals.add-basemap.saving')\n          })\n        );\n        break;\n      case 'selectLayer':\n        this._disableModalFooter(true);\n\n        view = new SelectLayerView({\n          model: this.model,\n          customBaselayersCollection: this._customBaselayersCollection\n        });\n        break;\n      case 'saveFail':\n        this._disableModalFooter(true);\n\n        view = new ErrorView({\n          title: _t('components.modals.add-basemap.add-basemap-error')\n        });\n        break;\n      case 'fetchingLayers':\n        this._disableModalFooter(true);\n\n        view = ViewFactory.createByHTML(\n          renderLoading({\n            title: _t('components.modals.add-basemap.fetching')\n          })\n        );\n        break;\n      case 'enterURL':\n      default:\n        this._disableModalFooter(false);\n\n        view = ViewFactory.createByHTML(\n          enterUrl({\n            layersFetched: this.model.get('layersFetched'),\n            layers: this.model.wmsLayersCollection\n          })\n        );\n        break;\n    }\n    this.addView(view);\n    this.$el.append(view.render().el);\n\n    this.$('.js-search-input').focus();\n\n    return this;\n  },\n\n  _showCleanSearchButton: function () {\n    this.$('.js-clean-search').show();\n  },\n\n  _hideCleanSearchButton: function () {\n    this.$('.js-clean-search').hide();\n  },\n\n  _initBinds: function () {\n    this.model.bind('change', this.render, this);\n    this.model.bind('change', this._onChangeSearchQuery, this);\n    this.model.bind('layersFetched', this.render, this);\n  },\n\n  _onKeydown: function (e) {\n    e.stopPropagation();\n\n    this._debouncedUpdate();\n  },\n\n  _onPaste: function (e) {\n    e.stopPropagation();\n\n    this._debouncedUpdate();\n  },\n\n  _update: function (e) {\n    this._disableOkBtn(!this.$('.js-url').val());\n    this.$('.js-error').removeClass('is-visible'); // resets error state when changed\n  },\n\n  _disableOkBtn: function (disable) {\n    this._submitButton.toggleClass('is-disabled', disable);\n  },\n\n  _onKeyDown: function (e) {\n    var enterPressed = (e.keyCode === $.ui.keyCode.ENTER);\n\n    if (enterPressed) {\n      this.killEvent(e);\n\n      this._submitSearch();\n    }\n  },\n\n  _submitSearch: function (e) {\n    this.killEvent(e);\n\n    this.model.set('searchQuery', this.$('.js-search-input').val());\n  },\n\n  _onChangeSearchQuery: function () {\n    var searchQuery = this.model.get('searchQuery');\n\n    if (!searchQuery) {\n      this._hideCleanSearchButton();\n    }\n  },\n\n  _onCleanSearchClick: function (e) {\n    this.killEvent(e);\n\n    this.model.set('searchQuery', '');\n  },\n\n  _onClickOK: function (e) {\n    this.killEvent(e);\n\n    var url = this.$('.js-url').val();\n\n    if (url) {\n      this.model.fetchLayers(url);\n    }\n  },\n\n  _disableModalFooter: function (disable) {\n    this._modalFooter.toggleClass('is-disabled', disable);\n  },\n\n  _updateOkBtn: function () {\n    this._submitButton.find('span').text(_t('components.modals.add-basemap.get-layers'));\n  },\n\n  _bindSubmitButton: function () {\n    this._submitButton.on('click', this._onClickBinded);\n  },\n\n  _unBindSubmitButton: function () {\n    this._submitButton.off('click', this._onClickBinded);\n  },\n\n  clean: function () {\n    this._unBindSubmitButton();\n    CoreView.prototype.clean.call(this);\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"u-flex u-alignCenter Modal-basemapContainer\">\\n  <h3 class=\"CDB-Text CDB-Size-large u-mainTextColor Modal-titleBasemap\">' +\n__e( _t('components.modals.add-basemap.xyz.insert') ) +\n'</h3>\\n  <div class=\"CDB-Text u-flex u-alignCenter\">\\n    <label class=\"Metadata-label Metadata-label--auto  CDB-Text CDB-Size-small is-semibold u-upperCase u-ellipsis\">' +\n__e( _t('components.modals.add-basemap.xyz.enter') ) +\n'</label>\\n    <div class=\"Form-rowData Form-rowData--longer\">\\n      <input type=\"text\" class=\"has-icon CDB-InputText CDB-Text js-url\" value=\"\" placeholder=\"E.g. https://{s}.carto.com/foobar/{z}/{x}/{y}.png\">\\n      <i class=\"Spinner XYZPanel-inputIcon XYZPanel-inputIcon--loader Spinner--formIcon Form-inputIcon js-validating\" style=\"display: none;\"></i>\\n      <div class=\"Checkbox XYZPanel-inputCheckbox js-tms\" data-title=\"Inverts Y axis numbering for tiles\">\\n        <button class=\"Checkbox-input u-rSpace--m\"></button>\\n        <label class=\"CDB-Text CDB-Size-small is-semibold u-upperCase\">' +\n__e( _t('components.modals.add-basemap.xyz.tms') ) +\n'</label>\\n      </div>\\n      <div class=\"XYZPanel-error CDB-InfoTooltip CDB-InfoTooltip--left is-error CDB-Text CDB-Size-medium CDB-InfoTooltip-text js-error\"></div>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar XYZView = require('./xyz-view');\n\n/**\n * View model for XYZ tab content.\n */\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    name: 'xyz',\n    label: 'XYZ',\n    tms: false,\n    layer: undefined // will be set when valid\n  },\n\n  createView: function (opts) {\n    if (!opts.submitButton) throw new Error('submitButton is required');\n    if (!opts.modalFooter) throw new Error('modalFooter is required');\n\n    this._submitButton = opts.submitButton;\n    this._modalFooter = opts.modalFooter;\n\n    return new XYZView({\n      model: this,\n      submitButton: this._submitButton,\n      modalFooter: this._modalFooter\n    });\n  },\n\n  hasAlreadyAddedLayer: function (userLayers) {\n    var urlTemplate = this.get('layer').get('urlTemplate');\n    return _.any(userLayers.isCustomCategory(), function (customLayer) {\n      return customLayer.get('urlTemplate') === urlTemplate;\n    });\n  }\n\n});\n","var $ = require('jquery');\nvar _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar template = require('./enter-url.tpl');\nvar CustomBaselayerModel = require('builder/data/custom-baselayer-model');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\n\n/**\n * Represents the XYZ tab content.\n */\n\nmodule.exports = CoreView.extend({\n\n  className: 'XYZPanel',\n\n  events: {\n    'click .js-tms': '_changeTMS',\n    'keydown .js-url': '_onKeydown',\n    'paste .js-url': '_onPaste'\n  },\n\n  initialize: function (opts) {\n    if (!opts.submitButton) throw new Error('submitButton is required');\n\n    this._submitButton = opts.submitButton;\n    this._lastCallSeq = 0;\n    this._debouncedUpdate = _.debounce(this._update.bind(this), 150);\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this._updateOkBtn();\n    this._disableOkBtn(true);\n\n    this.$el.html(\n      template()\n    );\n\n    this._initViews();\n\n    return this;\n  },\n\n  _initViews: function () {\n    // Add TMS tooltip\n    var tooltip = new TipsyTooltipView({\n      el: this.$('.js-tms'),\n      title: function () {\n        return $(this).data('title');\n      }\n    });\n    this.addView(tooltip);\n  },\n\n  _onKeydown: function (e) {\n    e.stopPropagation();\n    this._debouncedUpdate();\n  },\n\n  _onPaste: function (e) {\n    e.stopPropagation();\n    this._debouncedUpdate();\n  },\n\n  _initBinds: function () {\n    this.model.bind('change:tms', this._setTMSCheckbox, this);\n  },\n\n  _update: function () {\n    this._disableOkBtn(true);\n    this._indicateIsValidating(true);\n    var layer;\n    var urlErrorMsg;\n\n    var url = this.$('.js-url').val();\n    var tms = this.model.get('tms');\n\n    if (url) {\n      try {\n        layer = this._byCustomURL(url, tms);\n      } catch (e) {\n        urlErrorMsg = _t('components.modals.add-basemap.xyz.not-valid');\n      }\n    }\n\n    this.model.set('layer', layer);\n\n    if (layer) {\n      var self = this;\n      // Make sure only the last call made is the one that defines view change,\n      // avoids laggy responses to indicate wrong state\n      var thisCallSeq = ++this._lastCallSeq;\n      layer.validateTemplateURL({\n        success: function () {\n          if (thisCallSeq === self._lastCallSeq) {\n            self._disableOkBtn(false);\n            self._indicateIsValidating(false);\n            self._updateError();\n          }\n        },\n        error: function () {\n          if (thisCallSeq === self._lastCallSeq) {\n            self._disableOkBtn(false);\n            self._indicateIsValidating(false);\n            self._updateError(_t('components.modals.add-basemap.xyz.couldnt-validate'));\n          }\n        }\n      });\n    } else if (url) {\n      this._indicateIsValidating(false);\n      this._updateError(urlErrorMsg);\n    } else {\n      this._indicateIsValidating(false);\n      this._updateError();\n    }\n  },\n\n  _changeTMS: function (e) {\n    this.model.set('tms', !this.model.get('tms'));\n    this._onKeydown(e);\n  },\n\n  _setTMSCheckbox: function (e) {\n    this.$('.js-tms .Checkbox-input').toggleClass('is-checked', this.model.get('tms'));\n  },\n\n  _byCustomURL: function (url, tms) {\n    // Minimal test for \"valid URL\" w/o having to complicate it with regex\n    if (url && url.indexOf('/') === -1) throw new TypeError('invalid URL');\n\n    // Only lowercase the placeholder variables, since the URL may contain case-sensitive data (e.g. API keys and such)\n    url = url.replace(/\\{S\\}/g, '{s}')\n      .replace(/\\{X\\}/g, '{x}')\n      .replace(/\\{Y\\}/g, '{y}')\n      .replace(/\\{Z\\}/g, '{z}');\n\n    var layer = new CustomBaselayerModel({\n      urlTemplate: url,\n      attribution: null,\n      maxZoom: 21,\n      minZoom: 0,\n      name: '',\n      tms: tms,\n      category: 'Custom',\n      type: 'Tiled'\n    });\n    layer.set('className', layer._generateClassName(url));\n\n    return layer;\n  },\n\n  _setTMS: function (ev) {\n    var $checkbox = $(ev.target).closest('.Checkbox');\n    $checkbox.find('.Checkbox-input').toggleClass('is-checked');\n    this._update(ev);\n  },\n\n  _updateOkBtn: function () {\n    this._submitButton.find('span').text(_t('components.modals.add-basemap.add-btn'));\n  },\n\n  _disableOkBtn: function (disable) {\n    this._submitButton.toggleClass('is-disabled', disable);\n  },\n\n  _updateError: function (msg) {\n    this.$('.js-error').text(msg)[ msg ? 'addClass' : 'removeClass' ]('is-visible');\n  },\n\n  _indicateIsValidating: function (indicate) {\n    this.$('.js-validating').toggle(!!indicate);\n  }\n\n});\n","var Backbone = require('backbone');\nvar UploadModel = require('builder/data/upload-model');\nvar VisualizationFetchModel = require('builder/data/visualizations-fetch-model');\nvar TablesCollection = require('builder/data/visualizations-collection');\nvar TableModel = require('builder/data/table-model');\n\nvar MetricsTracker = require('builder/components/metrics/metrics-tracker');\nvar MetricsTypes = require('builder/components/metrics/metrics-types');\n\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar IMPORT = 'import';\nvar DATASETS = 'datasets';\nvar SCRATCH = 'scratch';\n\nvar IMPORT_FILE = 'file';\nvar IMPORT_TWITTER = 'twitter';\n\nvar REQUIRED_OPTS = [\n  'userModel',\n  'userActions',\n  'configModel',\n  'pollingModel'\n];\n\n/**\n * Add layer model\n *\n * \"Implements\" the CreateListingModel.\n */\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    type: 'addLayer',\n    contentPane: 'listing', // [listing, loading]\n    listing: DATASETS, // [IMPORT, DATASETS, SCRATCH]\n    collectionFetched: false,\n    activeImportPane: IMPORT_FILE\n  },\n\n  initialize: function (attrs, opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._initModels();\n    this._initBinds();\n    this._fetchCollection();\n  },\n\n  _initModels: function () {\n    this._uploadModel = new UploadModel({\n      create_vis: false\n    }, {\n      userModel: this._userModel,\n      configModel: this._configModel\n    });\n\n    this._selectedDatasetsCollection = new Backbone.Collection();\n\n    this._tablesCollection = new TablesCollection([], {\n      configModel: this._configModel\n    });\n\n    this._visualizationFetchModel = new VisualizationFetchModel({\n      content_type: DATASETS,\n      library: this.showLibrary()\n    });\n  },\n\n  getTablesCollection: function () {\n    return this._tablesCollection;\n  },\n\n  getSelectedDatasetsCollection: function () {\n    return this._selectedDatasetsCollection;\n  },\n\n  getVisualizationFetchModel: function () {\n    return this._visualizationFetchModel;\n  },\n\n  getUploadModel: function () {\n    return this._uploadModel;\n  },\n\n  canSelect: function (dataset) {\n    return dataset.get('selected') || this._selectedDatasetsCollection.length < 1; // for now only allow 1 item\n  },\n\n  showLibrary: function () {\n    return false;\n  },\n\n  showDatasets: function () {\n    return true;\n  },\n\n  setActiveImportPane: function (name) {\n    this.set('activeImportPane', name);\n  },\n\n  canFinish: function () {\n    if (this._atImportPane()) {\n      return this._uploadModel.isValidToUpload();\n    } else if (this._atDatasetsPane()) {\n      return this._selectedDatasetsCollection.length > 0;\n    }\n  },\n\n  finish: function () {\n    if (this._atImportPane()) {\n      this._pollingModel.trigger('importByUploadData', this._uploadModel.toJSON(), this);\n    } else if (this._atDatasetsPane()) {\n      var mdl = this._selectedDatasetsCollection.at(0);\n      if (mdl.get('type') === 'remote') {\n        var d = {\n          create_vis: false,\n          type: 'remote',\n          value: mdl.get('name'),\n          remote_visualization_id: mdl.get('id'),\n          size: mdl.get('external_source') ? mdl.get('external_source').size : undefined\n        };\n        // See BackgroundImporter where the same event is bound to be handled..\n        this._pollingModel.trigger('importByUploadData', d, this);\n      } else {\n        this._addNewLayer(mdl.getTableModel());\n      }\n    }\n  },\n\n  getImportState: function () {\n    return this.get('activeImportPane');\n  },\n\n  showGuessingToggler: function () {\n    return this._atImportPane();\n  },\n\n  showPrivacyToggler: function () {\n    var hiddenDueToDeprecation = this._atTwitterImportPane() && !this._userModel.hasOwnTwitterCredentials();\n    var hasToBeShowed = this._atImportPane() && !hiddenDueToDeprecation;\n    return hasToBeShowed;\n  },\n\n  _atImportPane: function () {\n    return this.get('listing') === IMPORT;\n  },\n\n  _atDatasetsPane: function () {\n    return this.get('listing') === DATASETS;\n  },\n\n  _atScratchPane: function () {\n    return this.get('listing') === SCRATCH;\n  },\n\n  _atTwitterImportPane: function () {\n    return this.get('activeImportPane') === IMPORT_TWITTER;\n  },\n\n  createFromScratch: function () {\n    var self = this;\n    this.set('contentPane', 'creatingFromScratch');\n    var tableModel = new TableModel({}, {\n      configModel: this._configModel\n    });\n    tableModel.save({}, {\n      success: function () {\n        self._addNewLayer(tableModel, true);\n      },\n      error: function (req, resp) {\n        if (resp.responseText.indexOf('You have reached your table quota') !== -1) {\n          self.set('contentPane', 'datasetQuotaExceeded');\n        } else {\n          self.set('contentPane', 'addLayerFailed');\n        }\n      }\n    });\n  },\n\n  _initBinds: function () {\n    this._uploadModel.bind('change', function () {\n      this.trigger('change:upload', this);\n    }, this);\n    this._visualizationFetchModel.bind('change', this._fetchCollection, this);\n    this.bind('change:listing', this._fetchCollection, this);\n\n    this._tablesCollection.bind('change:selected', function (changedModel, wasSelected) {\n      this._selectedDatasetsCollection[wasSelected ? 'add' : 'remove'](changedModel);\n    }, this);\n    this._tablesCollection.bind('sync', function () {\n      this._selectedDatasetsCollection.each(function (model) {\n        var sameModel = this._tablesCollection.get(model.id);\n        if (sameModel) {\n          sameModel.set('selected', true);\n        }\n      }, this);\n    }, this);\n  },\n\n  _fetchCollection: function () {\n    var params = this._visualizationFetchModel.attributes;\n    var types;\n\n    if (this._visualizationFetchModel.isSearching()) {\n      // Supporting search in data library and user datasets at the same time\n      types = 'table,remote';\n    } else {\n      types = params.library ? 'remote' : 'table';\n    }\n\n    this._tablesCollection.fetch({\n      data: {\n        locked: '',\n        q: params.q,\n        page: params.page,\n        tags: params.tag,\n        shared: params.shared,\n        only_liked: params.liked,\n        type: '',\n        types: types\n      }\n    });\n  },\n\n  _onCollectionChange: function () {\n    this._selectedDatasetsCollection.reset(\n      this._tablesCollection.where({ selected: true })\n    );\n  },\n\n  _addNewLayer: function (tableModel, empty) {\n    this.set('contentPane', 'addingNewLayer');\n\n    this._userActions.createLayerFromTable(tableModel, {\n      success: function (model) {\n        this._userModel.updateTableCount();\n        this.trigger('addLayerDone');\n        MetricsTracker.track(MetricsTypes.CREATED_LAYER, {\n          empty: !!empty,\n          layer_id: model.get('id')\n        });\n      }.bind(this),\n      error: function (req, resp) {\n        if (resp.responseText.indexOf('You have reached your table quota') !== -1) {\n          this.set('contentPane', 'datasetQuotaExceeded');\n        } else {\n          this.set('contentPane', 'addLayerFailed');\n        }\n      }.bind(this)\n    });\n  }\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar template = require('./add-layer.tpl');\nvar FooterView = require('./footer/footer-view');\nvar NavigationView = require('./content/navigation-view');\nvar ListingView = require('./content/listing-view');\nvar TabPaneView = require('builder/components/tab-pane/tab-pane-view');\nvar TabPaneCollection = require('builder/components/tab-pane/tab-pane-collection');\nvar ErrorDetailsView = require('builder/components/background-importer/error-details-view');\nvar ViewFactory = require('builder/components/view-factory');\nvar renderLoading = require('builder/components/loading/render-loading');\nvar ErrorView = require('builder/components/error/error-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'modalModel',\n  'createModel',\n  'configModel',\n  'userModel',\n  'pollingModel'\n];\n\n/**\n * Add layer dialog, typically used from editor\n */\nmodule.exports = CoreView.extend({\n  className: 'Dialog-content Dialog-content--expanded',\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._initModels();\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this.$el.html(template());\n\n    this._initViews();\n  },\n\n  _initModels: function () {\n    this._guessingModel = new Backbone.Model({\n      guessing: true\n    });\n\n    this._privacyModel = new Backbone.Model({\n      privacy: this._userModel.canCreatePrivateDatasets() ? 'PRIVATE' : 'PUBLIC'\n    });\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._createModel, 'addLayerDone', this._modalModel.destroy.bind(this._modalModel));\n    this.listenTo(this._createModel, 'change:contentPane', this._onChangeContentView);\n    this.listenTo(this._pollingModel, 'importByUploadData', this._modalModel.destroy.bind(this._modalModel));\n  },\n\n  _initViews: function () {\n    var self = this;\n\n    this._navigationView = new NavigationView({\n      el: this.$('.js-navigation'),\n      userModel: this._userModel,\n      routerModel: this._createModel.getVisualizationFetchModel(),\n      createModel: this._createModel,\n      tablesCollection: this._createModel.getTablesCollection(),\n      configModel: this._configModel\n    });\n    this._navigationView.render();\n    this.addView(this._navigationView);\n\n    this._tabPaneCollection = new TabPaneCollection([\n      {\n        name: 'listing',\n        selected: this._createModel.get('contentPane') === 'listing',\n        createContentView: function () {\n          return new ListingView({\n            createModel: self._createModel,\n            configModel: self._configModel,\n            userModel: self._userModel,\n            privacyModel: self._privacyModel,\n            guessingModel: self._guessingModel\n          });\n        }\n      }, {\n        name: 'creatingFromScratch',\n        selected: this._createModel.get('contentPane') === 'creatingFromScratch',\n        createContentView: function () {\n          return ViewFactory.createByHTML(\n            renderLoading({\n              title: _t('components.modals.add-layer.create-loading-title')\n            })\n          );\n        }\n      }, {\n        name: 'addingNewLayer',\n        selected: this._createModel.get('contentPane') === 'addingNewLayer',\n        createContentView: function () {\n          return ViewFactory.createByHTML(\n            renderLoading({\n              title: _t('components.modals.add-layer.adding-new-layer')\n            })\n          );\n        }\n      }, {\n        name: 'addLayerFailed',\n        selected: this._createModel.get('contentPane') === 'addLayerFailed',\n        createContentView: function () {\n          return new ErrorView({\n            title: _t('components.modals.add-layer.add-layer-error')\n          });\n        }\n      }, {\n        name: 'datasetQuotaExceeded',\n        selected: this._createModel.get('contentPane') === 'datasetQuotaExceeded',\n        createContentView: function () {\n          return new ErrorDetailsView({\n            error: { errorCode: 8002 },\n            userModel: self._userModel,\n            configModel: self._configModel\n          });\n        }\n      }\n    ]);\n\n    var tabPaneView = new TabPaneView({\n      collection: this._tabPaneCollection\n    });\n    this.addView(tabPaneView);\n    this.$('.js-content-container').append(tabPaneView.render().el);\n\n    this._footerView = new FooterView({\n      configModel: this._configModel,\n      createModel: this._createModel,\n      userModel: this._userModel,\n      privacyModel: self._privacyModel,\n      guessingModel: self._guessingModel\n\n    });\n    this.addView(this._footerView);\n    this.$('.js-footer').append(this._footerView.render().el);\n  },\n\n  _onChangeContentView: function () {\n    var context = this._createModel.get('contentPane');\n    var paneModel = _.first(this._tabPaneCollection.where({ name: context }));\n    var paneModelName = paneModel.get('name');\n    paneModel.set('selected', true);\n\n    if (paneModelName === 'loading') {\n      this._footerView.hide();\n    }\n    if (paneModelName !== 'listing') {\n      this._navigationView.hide();\n    }\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"Dialog-header Dialog-header--expanded CreateDialog-header with-separator\">\\n  <div class=\"Dialog-headerIcon Dialog-headerIcon--neutral\">\\n    <i class=\"CDB-IconFont CDB-IconFont-add\"></i>\\n  </div>\\n  <h2 class=\"CDB-Text CDB-Size-large u-mainTextColor u-bSpace\">' +\n__e( _t('components.modals.add-layer.modal-title') ) +\n'</h2>\\n  <h3 class=\"CDB-Text CDB-Size-medium u-altTextColor\">' +\n__e( _t('components.modals.add-layer.modal-desc') ) +\n'</h3>\\n</div>\\n<div class=\"Filters Filters--navListing Filters--static js-navigation\"></div>\\n<div class=\"js-content-container Dialog-body Dialog-body--expanded Dialog-body--create Dialog-body--noPaddingTop Dialog-body--withoutBorder\"></div>\\n<div class=\"Dialog-footer Dialog-footer--expanded CreateDialog-footer js-footer\"></div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"DatasetsList-itemCategory is--' +\n__e( isRaster ? 'raster' : geometryType ) +\n'Dataset\">\\n  ';\n if (syncStatus) { ;\n__p += '\\n    <i\\n    ';\n if (syncStatus === \"failure\") { ;\n__p += '\\n      data-title=\"' +\n__e( _t('components.modals.add-layer.datasets.item.sync-failed') ) +\n' ' +\n__e( syncRanAt ) +\n'\"\\n    ';\n } else if (syncStatus === \"syncing\") { ;\n__p += '\\n      data-title=\"' +\n__e( _t('components.modals.add-layer.datasets.item.syncing') ) +\n'\"\\n    ';\n } else { ;\n__p += '\\n      data-title=\"' +\n__e( _t('components.modals.add-layer.datasets.item.synced') ) +\n' ' +\n__e( syncRanAt ) +\n'\"\\n    ';\n } ;\n__p += '\\n    class=\"CDB-IconFont CDB-IconFont-wifi DatasetsList-itemStatus is-' +\n__e( syncStatus ) +\n'\"></i>\\n  ';\n } ;\n__p += '\\n</div>\\n<div class=\"ModalDataset-itemInfo\">\\n  <div class=\"ModalDataset-itemInfoTitle\">\\n    <h3 class=\"CDB-Text CDB-Size-large u-bSpace u-ellipsis\">\\n      ' +\n__e( title ) +\n'\\n      ';\n if (showPermissionIndicator) { ;\n__p += '\\n        <span class=\"Tag Tag--outline Tag-outline--grey CDB-Text CDB-Size-small u-upperCase\">\\n          ' +\n__e( _t('components.modals.add-layer.datasets.item.read') ) +\n'\\n        </span>\\n      ';\n } ;\n__p += '\\n    </h3>\\n    ';\n if (description && description.length > 0) { ;\n__p += '\\n      <p class=\"u-ellipsis CDB-Text CDB-Size-medium u-altTextColor\" title=\"' +\n__e( description ) +\n'\">' +\n__e( description ) +\n'</p>\\n    ';\n } else { ;\n__p += '\\n      <span class=\"NoResults CDB-Text CDB-Size-medium\">' +\n__e( _t('components.modals.add-layer.datasets.item.no-description') ) +\n'</span>\\n    ';\n } ;\n__p += '\\n  </div>\\n  <div>\\n    <div class=\"DatasetsList-itemMeta\">\\n\\n      <span class=\"CDB-Tag is-' +\n__e( privacy ) +\n' CDB-Text is-semibold CDB-Size-small u-upperCase\">\\n        ' +\n__e( privacy ) +\n'\\n      </span>\\n      ';\n if (rowCount) { ;\n__p += '\\n        <span class=\"RowsIndicator\">\\n          <span class=\"CDB-Text CDB-Size-small u-altTextColor\">' +\n__e( rowCountFormatted ) +\n' ' +\n__e( _t('components.modals.add-layer.datasets.item.rows-pluralize', { smart_count: rowCount }) ) +\n'</span>\\n        </span>\\n      ';\n } ;\n__p += '\\n      ';\n if (datasetSize) { ;\n__p += '\\n        <span class=\"SizeIndicator\">\\n          <span class=\"CDB-Text CDB-Size-small u-altTextColor\">' +\n__e( datasetSize ) +\n'</span>\\n        </span>\\n      ';\n } ;\n__p += '\\n      <span class=\"DatasetsList-itemTimeDiff DefaultTimeDiff\">\\n        <span class=\"CDB-Text CDB-Size-small u-altTextColor\">' +\n__e( timeDiff ) +\n'</span>\\n        ';\n if (!isOwner) { ;\n__p += '\\n          <span class=\"CDB-Text CDB-Size-small u-altTextColor u-lSpace--xl u-rSpace\">\\n            ' +\n__e( _t('components.modals.add-layer.datasets.item.by') ) +\n'\\n          </span>\\n          <span class=\"DatasetsList-avatar\">\\n            <img class=\"DatasetsList-avatarImg\" src=\"' +\n__e( owner.avatar_url ) +\n'\" alt=\"' +\n__e( owner.name || owner.username  ) +\n'\" title=\"' +\n__e( owner.name || owner.username  ) +\n'\" />\\n          </span>\\n        ';\n } ;\n__p += '\\n      </span>\\n    </div>\\n    <div class=\"DatasetsList-itemMeta DatasetsList-itemTags\">\\n      ';\n if (tagsCount > 0) { ;\n__p += '\\n        <div class=\"DefaultTags CDB-Text CDB-Size-small\">\\n          ';\n for (var i = 0, l = Math.min(maxTagsToShow, tags.length); i < l; ++i) { ;\n__p += '\\n            <button class=\"CDB-Text CDB-Size-small u-upperCase DefaultTags-item js-tag-link u-actionTextColor\" value=\"' +\n__e( tags[i] ) +\n'\">' +\n__e( tags[i] ) +\n'</button>';\n if (i !== (l-1)) { ;\n\n } ;\n__p += '\\n          ';\n } ;\n__p += '\\n          ';\n if (tagsCount > maxTagsToShow) { ;\n__p += '\\n            ' +\n__e( _t('components.modals.add-layer.datasets.item.tags-more', { tagsCount: tagsCount - maxTagsToShow }) ) +\n'\\n          ';\n } ;\n__p += '\\n        </div>\\n      ';\n } else { ;\n__p += '\\n        <span class=\"NoResults CDB-Text CDB-Size-small u-altTextColor\">' +\n__e( _t('components.modals.add-layer.datasets.item.no-tags') ) +\n'</span>\\n      ';\n } ;\n__p += '\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"IntermediateInfo\">\\n  <div class=\"LayoutIcon LayoutIcon--negative\">\\n    <i class=\"CDB-IconFont CDB-IconFont-cockroach\"></i>\\n  </div>\\n  <h4 class=\"CDB-Text CDB-Size-large u-mainTextColor u-secondaryTextColor u-bSpace--m\">\\n    ' +\n__e( _t('components.modals.add-layer.datasets.error.title') ) +\n'\\n  </h4>\\n  <p class=\"CDB-Text CDB-Size-medium u-altTextColor\">' +\n__e( _t('components.modals.add-layer.datasets.error.desc') ) +\n' <a class=\"js-mail-link\" href=\"mailto:support@carto.com\">support@carto.com</a>.</p>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"IntermediateInfo\">\\n  <div class=\"CDB-LoaderIcon CDB-LoaderIcon--big is-dark js-loader\">\\n    <svg class=\"CDB-LoaderIcon-spinner\" viewbox=\"0 0 50 50\">\\n      <circle class=\"CDB-LoaderIcon-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"/>\\n    </svg>\\n  </div>\\n  <h4 class=\"CDB-Text CDB-Size-large u-mainTextColor u-bSpace u-secondaryTextColor u-tSpace-xl\">\\n    ' +\n__e( _t('components.modals.add-layer.datasets.' + (q || tag  ? 'searching' : 'loading')) ) +\n'...\\n  </h4>\\n  <div class=\"CDB-Text CDB-Size-medium u-altTextColor\">' +\n((__t = ( quote )) == null ? '' : __t) +\n'</div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"IntermediateInfo\">\\n  <div class=\"LayoutIcon ';\n (q || tag) ? 'LayoutIcon--negative' : '' ;\n__p += '\">\\n    <i class=\"CDB-IconFont\\n      ';\n if (shared) { ;\n__p += ' CDB-IconFont-defaultUser\\n      ';\n } else if (locked) { ;\n__p += ' CDB-IconFont-lock\\n      ';\n } else if (library) { ;\n__p += ' CDB-IconFont-dribbble\\n      ';\n } else { ;\n__p += ' CDB-IconFont-lens ';\n } ;\n__p += '\" />\\n  </div>\\n  <h4 class=\"CDB-Text CDB-Size-large u-mainTextColor u-bSpace u-secondaryTextColor u-tSpace-xl\">\\n    ';\n if (page > 1 || totalItems === 0 && totalEntries > 0) { ;\n__p += '\\n      ' +\n__e( _t('components.modals.add-layer.datasets.no-results.desc') ) +\n'\\n    ';\n } ;\n__p += '\\n\\n    ';\n if (( tag || q ) && totalItems === 0 && totalEntries === 0) { ;\n__p += '\\n      0 ' +\n__e( tag || q ) +\n' ' +\n__e( type ) +\n' ' +\n__e( _t('components.modals.add-layer.datasets.no-results.found') ) +\n'\\n    ';\n } ;\n__p += '\\n\\n    ';\n if (page === 1 && !tag && !q && totalItems === 0 && totalEntries === 0) { ;\n__p += '\\n      ' +\n__e( _t('components.modals.add-layer.datasets.no-results.there-are-no') ) +\n' ' +\n__e( shared === \"only\" ? 'shared' : '' ) +\n' ' +\n__e( locked ? 'locked' : '' ) +\n' ' +\n__e( library ? 'library' : '' ) +\n' ' +\n__e( type ) +\n'\\n    ';\n } ;\n__p += '\\n  </h4>\\n  <p class=\"CDB-Text CDB-Size-medium u-altTextColor\">\\n    ';\n if (!tag && !q && totalItems === 0 && totalEntries === 0) { ;\n__p += '\\n      ' +\n__e( _t('components.modals.add-layer.datasets.no-results.no-fun', { type: type }) ) +\n'\\n    ';\n } ;\n__p += '\\n  </p>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<h4 class=\"CDB-Text CDB-Size-large u-mainTextColor u-secondaryTextColor u-bSpace--m u-tSpace-xl\">\\n  ' +\n__e( _t('components.modals.add-layer.datasets.no-datasets.title') ) +\n'\\n</h4>\\n<p class=\"CDB-Text CDB-Size-medium u-altTextColor\">\\n  ';\n var connectDatasetHTML = '<button class=\"Button--link js-connect\">' + _t('components.modals.add-layer.datasets.no-datasets.connect-datasets') + '</button>'; ;\n__p += '\\n  ';\n var searchHTML = '<strong>' + _t('components.modals.add-layer.datasets.no-datasets.search') + '</strong>'; ;\n__p += '\\n  ' +\n((__t = ( _t('components.modals.add-layer.datasets.no-datasets.desc', {\n      connectDataset: connectDatasetHTML,\n      search: searchHTML\n    }) )) == null ? '' : __t) +\n'\\n</p>\\n<div class=\"NoDatasets-illustration\"></div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"DatasetsList-itemCategory is--' +\n__e( isRaster ? 'raster' : geometryType ) +\n'Dataset\">\\n  <i data-title=\"Public dataset\" class=\"CDB-IconFont CDB-IconFont-book DatasetsList-itemStatus ' +\n__e( canImportDataset ? 'is-public' : 'is-banned' ) +\n'\"></i>\\n</div>\\n<div class=\"ModalDataset-itemInfo\">\\n  <div class=\"ModalDataset-itemInfoTitle\">\\n    <h3 class=\"CDB-Text CDB-Size-large u-bSpace u-ellipsis\">' +\n__e( title ) +\n'</h3>\\n    ';\n if (description && description.length > 0) { ;\n__p += '\\n      <p class=\"u-ellipsis CDB-Text CDB-Size-medium u-altTextColor\" title=\"' +\n__e( description ) +\n'\">' +\n__e( description ) +\n'</p>\\n    ';\n } else { ;\n__p += '\\n      <span class=\"NoResults CDB-Text CDB-Size-medium\">' +\n__e( _t('components.modals.add-layer.datasets.item.no-description')) +\n'</span>\\n    ';\n } ;\n__p += '\\n  </div>\\n  <div>\\n    <ul class=\"DatasetsList-itemMeta CDB-Text CDB-Size-small u-altTextColor\">\\n      ';\n if (rowCount) { ;\n__p += '\\n        <li class=\"RowsIndicator\">\\n          ' +\n__e( rowCountFormatted ) +\n' ' +\n__e( _t('components.modals.add-layer.datasets.item.rows-pluralize', { smart_count: rowCount }) ) +\n'\\n        </li>\\n      ';\n } ;\n__p += '\\n      ';\n if (datasetSize) { ;\n__p += '\\n        <li class=\"SizeIndicator\">\\n          ' +\n__e( datasetSize ) +\n'\\n        </li>\\n      ';\n } ;\n__p += '\\n      <li class=\"DatasetsList-itemTimeDiff DefaultTimeDiff CDB-Text CDB-Size-small u-altTextColor\">\\n        ' +\n__e( timeDiff ) +\n' <span class=\"DatasetsList-itemSource js-source\">';\n if (source) { ;\n__p +=\n__e( _t('components.modals.add-layer.datasets.item.from') ) +\n' ' +\n((__t = ( cdb.core.sanitize.html(source) )) == null ? '' : __t);\n } ;\n__p += '</span>\\n      </li>\\n    </ul>\\n    <div class=\"DatasetsList-itemMeta DatasetsList-itemTags\">\\n      ';\n if (tagsCount > 0) { ;\n__p += '\\n        <div class=\"DefaultTags CDB-Text CDB-Size-small\">\\n          ';\n for (var i = 0, l = Math.min(maxTagsToShow, tags.length); i < l; ++i) { ;\n__p += '\\n            <button class=\"CDB-Text CDB-Size-small u-upperCase DefaultTags-item js-tag-link u-actionTextColor\" value=\"' +\n__e( tags[i] ) +\n'\">' +\n__e( tags[i] ) +\n'</button>';\n if (i !== (l-1)) { ;\n\n } ;\n__p += '\\n          ';\n } ;\n__p += '\\n          ';\n if (tagsCount > maxTagsToShow) { ;\n__p += '\\n            ' +\n__e( _t('components.modals.add-layer.datasets.item.tags-more', { tagsCount: tagsCount - maxTagsToShow }) ) +\n'\\n          ';\n } ;\n__p += '\\n        </div>\\n      ';\n } else { ;\n__p += '\\n        <span class=\"NoResults CDB-Text CDB-Size-small u-altTextColor\">' +\n__e( _t('components.modals.add-layer.datasets.item.no-tags') ) +\n'</span>\\n      ';\n } ;\n__p += '\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"ImportPanel-header\">\\n  <div class=\"LayoutIcon u-bSpace--xl\">\\n    <i class=\"CDB-IconFont CDB-IconFont-gift\"></i>\\n  </div>\\n  <h3 class=\"CDB-Text CDB-Size-large u-mainTextColor u-secondaryTextColor u-bSpace--m\">ArcGIS<sup>&trade;</sup> ' +\n__e( _t('components.modals.add-layer.imports.connector') ) +\n'</h3>\\n  <p class=\"CDB-Text CDB-Size-medium u-altTextColor u-bSpace--xl\">\\n    ' +\n((__t = ( _t('components.modals.add-layer.imports.arcgis.fallback-desc', {\n      brand: 'ArcGIS<sup>&trade;</sup>'\n    }) )) == null ? '' : __t) +\n'\\n  </p>\\n  <a href=\"mailto:sales@carto.com?subject=' +\n__e( _t('components.modals.add-layer.imports.demo-email-title', { name: 'ArcGIS' }) ) +\n'&body=' +\n__e( _t('components.modals.add-layer.imports.demo-email-desc', { name: 'ArcGIS' }) ) +\n'\" class=\"CDB-Button CDB-Button--primary CDB-Button--medium\">\\n    <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">' +\n__e( _t('components.modals.add-layer.imports.ask-for-demo') ) +\n'</span>\\n  </a>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"ImportPanel-header\">\\n  <div class=\"LayoutIcon u-bSpace--xl\">\\n    <i class=\"CDB-IconFont CDB-IconFont-gift\"></i>\\n  </div>\\n  <h3 class=\"CDB-Text CDB-Size-large u-mainTextColor u-secondaryTextColor u-bSpace--m\">Box ' +\n__e( _t('components.modals.add-layer.imports.connector') ) +\n'</h3>\\n  <p class=\"CDB-Text CDB-Size-medium u-altTextColor u-bSpace--xl\">\\n    ' +\n__e( _t('components.modals.add-layer.imports.box.fallback-desc', { brand: 'Box' }) ) +\n'\\n  </p>\\n  <a href=\"mailto:sales@carto.com?subject=' +\n__e( _t('components.modals.add-layer.imports.demo-email-title', { name: 'Box' }) ) +\n'&body=' +\n__e( _t('components.modals.add-layer.imports.demo-email-desc', { name: 'Box' }) ) +\n'\" class=\"CDB-Button CDB-Button--primary CDB-Button--medium\">\\n    <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">' +\n__e( _t('components.modals.add-layer.imports.ask-for-demo') ) +\n'</span>\\n  </a>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"ImportPanel-header\">\\n  <div class=\"LayoutIcon u-bSpace--xl\">\\n    <i class=\"CDB-IconFont CDB-IconFont-gift\"></i>\\n  </div>\\n  <h3 class=\"CDB-Text CDB-Size-large u-mainTextColor u-secondaryTextColor u-bSpace--m\">MailChimp ' +\n__e( _t('components.modals.add-layer.imports.connector') ) +\n'</h3>\\n  <p class=\"CDB-Text CDB-Size-medium u-altTextColor u-bSpace--xl\">' +\n__e( _t('components.modals.add-layer.imports.mailchimp.fallback-desc', { brand: 'Mailchimp' }) ) +\n'</p>\\n  <a href=\"mailto:sales@carto.com?subject=' +\n__e( _t('components.modals.add-layer.imports.demo-email-title', { name: 'MailChimp' }) ) +\n'&body=' +\n__e( _t('components.modals.add-layer.imports.demo-email-desc', { name: 'MailChimp' }) ) +\n'\" class=\"CDB-Button CDB-Button--primary CDB-Button--medium\">\\n    <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">' +\n__e( _t('components.modals.add-layer.imports.ask-for-demo') ) +\n'</span>\\n  </a>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"ImportPanel-header\">\\n  <div class=\"LayoutIcon u-bSpace--xl\">\\n    <i class=\"CDB-IconFont CDB-IconFont-gift\"></i>\\n  </div>\\n  <h3 class=\"CDB-Text CDB-Size-large u-mainTextColor u-secondaryTextColor u-bSpace--m\">Salesforce ' +\n__e( _t('components.modals.add-layer.imports.connector') ) +\n'</h3>\\n  <p class=\"CDB-Text CDB-Size-medium u-altTextColor u-bSpace--xl\">\\n    ' +\n__e( _t('components.modals.add-layer.imports.salesforce.fallback-desc', { brand: 'Salesforce' }) ) +\n'\\n  </p>\\n  <a href=\"mailto:sales@carto.com?subject=' +\n__e( _t('components.modals.add-layer.imports.demo-email-title', { name: 'Salesforce' }) ) +\n'&body=' +\n__e( _t('components.modals.add-layer.imports.demo-email-desc', { name: 'Salesforce' }) ) +\n'\" class=\"CDB-Button CDB-Button--primary CDB-Button--medium\">\\n    <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">' +\n__e( _t('components.modals.add-layer.imports.contact-us') ) +\n'</span>\\n  </a>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"ImportPanel-header\">\\n  <div class=\"LayoutIcon u-bSpace--xl\">\\n    <i class=\"CDB-IconFont CDB-IconFont-gift\"></i>\\n  </div>\\n  <h3 class=\"CDB-Text CDB-Size-large u-mainTextColor u-secondaryTextColor u-bSpace--m\">' +\n__e( _t('components.modals.add-layer.imports.twitter.fallback-title', { brand: 'Twitter' }) ) +\n'</h3>\\n  <p class=\"CDB-Text CDB-Size-medium u-altTextColor u-bSpace--xl\">\\n    ' +\n__e( _t('components.modals.add-layer.imports.twitter.fallback-desc', { brand: 'Twitter' }) ) +\n'\\n  </p>\\n  <a href=\"mailto:sales@carto.com?subject=' +\n__e( _t('components.modals.add-layer.imports.demo-email-title', { name: 'Twitter' }) ) +\n'&body=' +\n__e( _t('components.modals.add-layer.imports.demo-email-desc', { name: 'Twitter' }) ) +\n'\" class=\"CDB-Button CDB-Button--primary CDB-Button--medium\">\\n    <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">ask for a demo</span>\\n  </a>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<form class=\"Form js-form\">\\n  <div class=\"Form-row\">\\n    <div class=\"Form-rowLabel\">\\n      <label class=\"CDB-Text CDB-Size-medium\">' +\n__e( _t('components.modals.add-layer.imports.form-import.title') ) +\n'</label>\\n    </div>\\n    <div class=\"Form-rowData Form-rowData--longer\">\\n      <input type=\"text\" class=\"CDB-Text CDB-Size-medium Form-input Form-input--longer has-submit js-textInput\" value=\"\" placeholder=\"' +\n((__t = ( _t('components.modals.add-layer.imports.arcgis.input-placeholder', { brand: 'ArcGIS Server&trade;' }) )) == null ? '' : __t) +\n'\" />\\n      <button type=\"submit\" class=\"CDB-Text CDB-Size-small Form-inputSubmit u-upperCase u-actionTextColor Form-inputSubmit\">\\n        <span>' +\n__e( _t('components.modals.add-layer.imports.form-import.submit') ) +\n'</span>\\n      </button>\\n      <div class=\"Form-inputError CDB-Text\">' +\n__e( _t('components.modals.add-layer.imports.form-import.error-desc') ) +\n'</div>\\n    </div>\\n  </div>\\n  <div class=\"Form-row\">\\n    <div class=\"Form-rowLabel\"></div>\\n    <div class=\"Form-rowData Form-rowData--longer\">\\n      <p class=\"CDB-Text CDB-Size-small Form-rowInfoText--centered Form-rowInfoText--block u-altTextColor\">\\n        ' +\n__e( _t('components.modals.add-layer.imports.form-import.format') ) +\n': http://&#60;host&#62;/arcgis/rest/services/&#60;folder&#62;/&#60;serviceName&#62;/&#60;serviceType&#62;<br/>\\n        ' +\n__e( _t('components.modals.add-layer.imports.arcgis.url-desc') ) +\n'\\n      </p>\\n    </div>\\n  </div>\\n</form>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<h3 class=\"CDB-Text CDB-Size-large u-mainTextColor u-secondaryTextColor u-bSpace--m\">\\n  ';\n if (state === 'selected') { ;\n__p += '\\n    ' +\n((__t = ( _t('components.modals.add-layer.imports.header-import.type-selected', { brand: 'ArcGIS<sup>&trade;</sup>' }) )) == null ? '' : __t) +\n'\\n  ';\n } else { ;\n__p += '\\n    ' +\n((__t = ( _t('components.modals.add-layer.imports.header-import.type-import', { brand: 'ArcGIS<sup>&trade;</sup>' }) )) == null ? '' : __t) +\n'\\n  ';\n } ;\n__p += '\\n</h3>\\n<p class=\"CDB-Text CDB-Size-medium u-altTextColor\">\\n  ';\n if (state !== \"selected\") { ;\n__p += '\\n    ' +\n((__t = ( _t('components.modals.add-layer.imports.arcgis.import-data', { brand: 'ArcGIS<sup>&trade;</sup>' }) )) == null ? '' : __t) +\n'\\n  ';\n } else { ;\n__p += '\\n    ' +\n__e( _t('components.modals.add-layer.imports.arcgis.sync-options') ) +\n'\\n  ';\n } ;\n__p += '\\n</p>\\n';\n if (state === \"selected\") { ;\n__p += '\\n  <button class=\"NavButton NavButton--back ImportPanel-headerButton js-back\">\\n    <i class=\"CDB-IconFont CDB-IconFont-arrowPrev\"></i>\\n  </button>\\n';\n } ;\n__p += '\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<form class=\"Form js-form\">\\n  <div class=\"Form-row Form-row--centered\">\\n    ';\n if (fileEnabled) { ;\n__p += '\\n      <div class=\"Form-rowData Form-rowData--med Form-rowData--noMargin js-dropzone\">\\n        <div class=\"Form-upload\">\\n          <label class=\"Form-fileLabel js-fileLabel CDB-Text CDB-Size-medium\">' +\n__e( _t('components.modals.add-layer.imports.form-import.drag-and-drop') ) +\n'</label>\\n          <label class=\"Form-fileLabel Form-fileLabel--error CDB-Text CDB-Size-small js-fileError\"></label>\\n          <div class=\"Form-file\">\\n            <input type=\"file\" class=\"js-fileInput\" />\\n            <span class=\"CDB-Button CDB-Button--primary Form-fileButton CDB-Button-Text CDB-Text is-semibold CDB-Size-small u-upperCase js-fileButton\">\\n              ' +\n__e( _t('components.modals.add-layer.imports.form-import.browse') ) +\n'\\n            </span>\\n          </div>\\n        </div>\\n      </div>\\n      <span class=\"u-lSpace--xl u-rSpace--xl u-flex u-alignCenter CDB-Text CDB-Size-medium u-altTextColor\">' +\n__e( _t('components.modals.add-layer.imports.form-import.or') ) +\n'</span>\\n    ';\n } ;\n__p += '\\n    <div class=\"Form-rowData Form-rowData--noMargin Form-rowData--med\">\\n      <input type=\"text\" class=\"Form-input Form-input--med has-submit js-textInput CDB-Text CDB-Size-medium\" value=\"\" placeholder=\"https://carto.com/data-library\" />\\n      <button type=\"submit\" class=\"CDB-Text CDB-Size-small Form-inputSubmit u-upperCase u-actionTextColor Form-inputSubmit\">\\n        <span>' +\n__e( _t('components.modals.add-layer.imports.form-import.submit') ) +\n'</span>\\n      </button>\\n      <div class=\"Form-inputError CDB-Text\">' +\n__e( _t('components.modals.add-layer.imports.form-import.error-desc') ) +\n'</div>\\n    </div>\\n  </div>\\n</form>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<h3 class=\"CDB-Text CDB-Size-large u-mainTextColor u-secondaryTextColor u-bSpace--m\">\\n  ';\n if (state === 'selected') { ;\n__p += '\\n    ' +\n__e( _t('components.modals.add-layer.imports.header-import.file-selected') ) +\n'\\n  ';\n } else { ;\n__p += '\\n    ' +\n__e( _t('components.modals.add-layer.imports.header-import.upload-file-url', { smart_count: fileEnabled ? 1 : 0 }) ) +\n'\\n  ';\n } ;\n__p += '\\n</h3>\\n<p class=\"CDB-Text CDB-Size-medium u-altTextColor\">\\n  ';\n if (state !== \"selected\") { ;\n__p += '\\n    ';\n fileEnabledText = _t('components.modals.add-layer.imports.header-import.select-a-file') +\n      ' <a target=\"_blank\" href=\"https://carto.com/developers/import-api/guides/importing-geospatial-data/#supported-geospatial-data-formats\">' +\n      _t('components.modals.add-layer.imports.header-import.see-all-formats') +\n      '</a>'\n    ;\n__p += '\\n    ' +\n((__t = ( _t('components.modals.add-layer.imports.header-import.paste-url', {\n      fileEnabled: fileEnabled ? fileEnabledText : ''\n    }) )) == null ? '' : __t) +\n'\\n  ';\n } ;\n__p += '\\n  ';\n if (state === \"selected\") { ;\n__p += '\\n    ';\n if (acceptSync) { ;\n__p += '\\n      ' +\n__e( _t('components.modals.add-layer.imports.header-import.sync-enabled') ) +\n'\\n    ';\n } else { ;\n__p += '\\n      ' +\n__e( _t('components.modals.add-layer.imports.header-import.sync-disabled') ) +\n'\\n    ';\n } ;\n__p += '\\n  ';\n } ;\n__p += '\\n</p>\\n';\n if (state === \"selected\") { ;\n__p += '\\n  <button class=\"NavButton NavButton--back ImportPanel-headerButton js-back\">\\n    <i class=\"CDB-IconFont CDB-IconFont-arrowPrev\"></i>\\n  </button>\\n';\n } ;\n__p += '\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"ImportPanel-header\">\\n  <h3 class=\"CDB-Text CDB-Size-large u-mainTextColor u-secondaryTextColor u-bSpace--m\">' +\n__e( _t('components.modals.add-layer.imports.form-import.title') ) +\n'</h3>\\n  <p class=\"ImportPanel-headerDescription\">' +\n__e( _t('components.modals.add-layer.imports.form-import.desc') ) +\n'</p>\\n</div>\\n<div class=\"ImportPanel-body\">\\n  <div class=\"ImportPanel-bodyWrapper\">\\n    <div class=\"ImportPanel-state ImportPanel-form is-idle\"></div>\\n    <div class=\"ImportPanel-state is-selected DatasetSelected\"></div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n\n if (state !== 'list' ) { ;\n__p += '\\n  <h3 class=\"CDB-Text CDB-Size-large u-mainTextColor u-secondaryTextColor u-bSpace--m\">\\n    ';\n if (state === 'selected') { ;\n__p += '\\n      ' +\n__e( _t('components.modals.add-layer.imports.mailchimp.campaign-selected', { brand: 'MailChimp' }) ) +\n'\\n    ';\n } else { ;\n__p += '\\n      ' +\n__e( _t('components.modals.add-layer.imports.mailchimp.map-campaign', { brand: 'MailChimp' }) ) +\n'\\n    ';\n } ;\n__p += '\\n  </h3>\\n  <p class=\"CDB-Text CDB-Size-medium u-altTextColor ';\n if (state === \"error\") { ;\n__p += 'ImportPanel-headerDescription--negative';\n } ;\n__p += '\">\\n    ';\n if (state === \"idle\") { ;\n__p += '\\n      ' +\n__e( _t('components.modals.add-layer.imports.mailchimp.state-idle', { brand: 'MailChimp' }) ) +\n'\\n    ';\n } ;\n__p += '\\n    ';\n if (state === \"error\") { ;\n__p += '\\n      ' +\n__e( _t('components.modals.add-layer.imports.mailchimp.state-error', { brand: 'MailChimp' }) ) +\n'\\n    ';\n } ;\n__p += '\\n    ';\n if (state === \"token\") { ;\n__p += '\\n      ' +\n__e( _t('components.modals.add-layer.imports.mailchimp.state-token', { brand: 'MailChimp' }) ) +\n'\\n    ';\n } ;\n__p += '\\n    ';\n if (state === \"oauth\") { ;\n__p += '\\n      ' +\n__e( _t('components.modals.add-layer.imports.mailchimp.state-oauth', { brand: 'MailChimp' }) ) +\n'\\n    ';\n } ;\n__p += '\\n    ';\n if (state === \"retrieving\") { ;\n__p += '\\n      ' +\n__e( _t('components.modals.add-layer.imports.mailchimp.state-retrieving', { brand: 'MailChimp' }) ) +\n'\\n    ';\n } ;\n__p += '\\n    ';\n if (state === \"selected\") { ;\n__p += '\\n      ' +\n__e( _t('components.modals.add-layer.imports.mailchimp.state-selected', { brand: 'MailChimp' }) ) +\n'\\n    ';\n } ;\n__p += '\\n  </p>\\n  ';\n if (state === \"selected\") { ;\n__p += '\\n    <button class=\"NavButton NavButton--back ImportPanel-headerButton js-back\">\\n      <i class=\"CDB-IconFont CDB-IconFont-arrowPrev\"></i>\\n    </button>\\n  ';\n } ;\n__p += '\\n';\n } ;\n__p += '\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"DatasetSelected-item\">\\n  <div class=\"DatasetSelected-itemExt CDB-Text u-ellipsis\">\\n    ' +\n__e( ext || '?' ) +\n'\\n  </div>\\n  <div class=\"DatasetSelected-itemInfo u-ellipsis\">\\n    <h6 class=\"CDB-Text CDB-Size-large u-ellipsis\" title=\"' +\n__e( title ) +\n'\">' +\n__e( title ) +\n'</h6>\\n    <p class=\"CDB-Text CDB-Size-small u-ellipsis u-altTextColor\">' +\n__e( description ) +\n'</p>\\n  </div>\\n</div>\\n';\n if (importCanSync) { ;\n__p += '\\n  <div class=\"DatasetSelected-sync\">\\n    <div class=\"DatasetSelected-syncOptions\">\\n      <label class=\"DatasetSelected-syncLabel CDB-Text CDB-Size-medium u-mainTextColor\">\\n        ' +\n__e( _t('components.modals.add-layer.imports.selected-state.sync-my-data') ) +\n'\\n      </label>\\n      <ul class=\"DatasetSelected-syncOptionsList\">\\n        <li class=\"DatasetSelected-syncOptionsItem\">\\n          <div class=\"RadioButton\">\\n            <button class=\"RadioButton-input js-interval-0 ' +\n__e( interval === 0 ? 'is-checked' : '' ) +\n'\"></button>\\n            <label class=\"CDB-Text CDB-Size-medium u-altTextColor u-lSpace\">' +\n__e( _t('components.modals.add-layer.imports.selected-state.never') ) +\n'</label>\\n          </div>\\n        </li>\\n        <li class=\"DatasetSelected-syncOptionsItem\">\\n          <div class=\"RadioButton ' +\n__e( !userCanSync ? 'is-disabled' : '' ) +\n'\">\\n            <button class=\"RadioButton-input js-interval-1 ' +\n__e( interval === 3600 ? 'is-checked' : '' ) +\n'\"></button>\\n            <label class=\"CDB-Text CDB-Size-medium u-altTextColor u-lSpace\">' +\n__e( _t('components.modals.add-layer.imports.selected-state.every-hour') ) +\n'</label>\\n          </div>\\n        </li>\\n        <li class=\"DatasetSelected-syncOptionsItem\">\\n          <div class=\"RadioButton ' +\n__e( !userCanSync ? 'is-disabled' : '' ) +\n'\">\\n            <button class=\"RadioButton-input js-interval-2 ' +\n__e( interval === 86400 ? 'is-checked' : '' ) +\n'\"></button>\\n            <label class=\"CDB-Text CDB-Size-medium u-altTextColor u-lSpace\">' +\n__e( _t('components.modals.add-layer.imports.selected-state.every-day') ) +\n'</label>\\n          </div>\\n        </li>\\n        <li class=\"DatasetSelected-syncOptionsItem\">\\n          <div class=\"RadioButton ' +\n__e( !userCanSync ? 'is-disabled' : '' ) +\n'\">\\n            <button class=\"RadioButton-input js-interval-3 ' +\n__e( interval === 604800 ? 'is-checked' : '' ) +\n'\"></button>\\n            <label class=\"CDB-Text CDB-Size-medium u-altTextColor u-lSpace\">' +\n__e( _t('components.modals.add-layer.imports.selected-state.every-week') ) +\n'</label>\\n          </div>\\n        </li>\\n        <li class=\"DatasetSelected-syncOptionsItem\">\\n          <div class=\"RadioButton ' +\n__e( !userCanSync ? 'is-disabled' : '' ) +\n'\">\\n            <button class=\"RadioButton-input js-interval-4 ' +\n__e( interval === 2592000 ? 'is-checked' : '' ) +\n'\"></button>\\n            <label class=\"CDB-Text CDB-Size-medium u-altTextColor u-lSpace\">' +\n__e( _t('components.modals.add-layer.imports.selected-state.every-month') ) +\n'</label>\\n          </div>\\n        </li>\\n      </ul>\\n    </div>\\n    ';\n if (showUpgrade) { ;\n__p += '\\n      <div class=\"Upgrade-info\">\\n        <p class=\"CDB-Text CDB-Size-medium u-ellipsis u-secondaryTextColor\">\\n         ';\n featuresLink = '<a href=\"https://carto.com/pricing\">' + _t('components.modals.add-layer.imports.selected-state.more-features') + '</a>' ;\n__p += '\\n          ' +\n__e( _t('components.modals.add-layer.imports.selected-state.upgrade-desc', { features: featuresLink }) ) +\n'\\n        </p>\\n        <div class=\"Upgrade-infoActions\">\\n          ';\n if (showTrial) { ;\n__p += '\\n            <p class=\"CDB-Text CDB-Size-medium u-ellipsis is-semibold u-rSpace--xl\">' +\n__e( _t('components.modals.add-layer.imports.selected-state.free-trial', { days: 14 }) ) +\n'</p>\\n          ';\n } ;\n__p += '\\n          <a href=\"' +\n__e( upgradeUrl ) +\n'\" class=\"CDB-Button CDB-Button--secondary\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">' +\n__e( _t('components.modals.add-layer.imports.selected-state.upgrade') ) +\n'</span>\\n          </a>\\n        </div>\\n      </div>\\n    ';\n } ;\n__p += '\\n  </div>\\n';\n } ;\n__p += '\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n\n if (state !== 'list' ) { ;\n__p += '\\n  <h3 class=\"CDB-Text CDB-Size-large u-mainTextColor u-secondaryTextColor u-bSpace--m\">\\n    ';\n if (state === 'selected') { ;\n__p += '\\n      ';\n if (service_name === 'instagram') { ;\n__p += '\\n        ' +\n__e( _t('components.modals.add-layer.imports.service-import.account-connected') ) +\n'\\n        ';\n } else { ;\n__p += '\\n        ' +\n__e( _t('components.modals.add-layer.imports.service-import.item-selected') ) +\n'\\n      ';\n } ;\n__p += '\\n    ';\n } else { ;\n__p += '\\n      ' +\n__e( _t('components.modals.add-layer.imports.service-import.connect-with', { title: title }) ) +\n'\\n    ';\n } ;\n__p += '\\n  </h3>\\n  <p class=\"CDB-Text CDB-Size-medium u-altTextColor ';\n if (state === \"error\") { ;\n__p += 'ImportPanel-headerDescription--negative';\n } ;\n__p += '\">\\n    ';\n if (state === \"idle\") { ;\n__p += '\\n      ';\n if (fileExtensions.length > 0) { ;\n__p += '\\n        ';\n formatsLink = _t('components.modals.add-layer.imports.service-import.and') + ' <a target=\"_blank\" href=\"https://docs.carto.com/cartodb-editor/datasets/#supported-file-formats\" class=\"ImportPanel-headerDescriptionLink\">' + _t('components.modals.add-layer.imports.service-import.many-more-formats') + '</a>' ;\n__p += '\\n        ' +\n__e( fileExtensions.join(', ') );\n if (showAvailableFormats) { ;\n__p += ' ' +\n__e( formatsLink ) +\n' ';\n } ;\n__p += ' ' +\n__e( _t('components.modals.add-layer.imports.service-import.supported') ) +\n'.\\n      ';\n } else { ;\n__p += '\\n        ' +\n__e( _t('components.modals.add-layer.imports.service-import.state-idle-login') ) +\n'\\n      ';\n } ;\n__p += '\\n    ';\n } ;\n__p += '\\n    ';\n if (state === \"error\") { ;\n__p += '\\n      ' +\n__e( _t('components.modals.add-layer.imports.service-import.state-error', { title: title }) ) +\n'\\n    ';\n } ;\n__p += '\\n    ';\n if (state === \"token\") { ;\n__p += '\\n      ' +\n__e( _t('components.modals.add-layer.imports.service-import.state-token') ) +\n'\\n    ';\n } ;\n__p += '\\n    ';\n if (state === \"oauth\") { ;\n__p += '\\n      ' +\n__e( _t('components.modals.add-layer.imports.service-import.state-oauth') ) +\n'\\n    ';\n } ;\n__p += '\\n    ';\n if (state === \"retrieving\") { ;\n__p += '\\n      ' +\n__e( _t('components.modals.add-layer.imports.service-import.state-retrieving', { title: title }) ) +\n'\\n    ';\n } ;\n__p += '\\n    ';\n if (state === \"selected\") { ;\n__p += '\\n      ';\n if (acceptSync) { ;\n__p += '\\n        ' +\n__e( _t('components.modals.add-layer.imports.service-import.state-selected-sync') ) +\n'\\n      ';\n } else { ;\n__p += '\\n        ';\n if (service_name === 'instagram') { ;\n__p += '\\n          ' +\n__e( _t('components.modals.add-layer.imports.service-import.state-selected-instagram') ) +\n'\\n        ';\n } else { ;\n__p += '\\n          ' +\n__e( _t('components.modals.add-layer.imports.service-import.state-selected-no-sync') ) +\n'\\n        ';\n } ;\n__p += '\\n      ';\n } ;\n__p += '\\n    ';\n } ;\n__p += '\\n  </p>\\n  ';\n if (state === \"selected\" && items > 1) { ;\n__p += '\\n    <button class=\"CDB-Size-large ImportPanel-headerButton js-back\">\\n      <i class=\"CDB-IconFont CDB-IconFont-arrowPrev u-actionTextColor\"></i>\\n    </button>\\n  ';\n } ;\n__p += '\\n';\n } ;\n__p += '\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"ServiceList-itemExt u-ellipsLongText CDB-Text CDB-Size-medium u-rSpace--xl\">\\n  ' +\n__e( ext || '?' ) +\n'\\n</div>\\n<div class=\"ServiceList-itemInfo u-flex u-alignCenter u-justifySpace\">\\n  <div class=\"ServiceList-itemInfoTitle\">\\n    <h6 class=\"CDB-Text CDB-Size-large u-bSpace u-ellipsis\" >' +\n__e( title ) +\n'</h6>\\n    <p class=\"CDB-Text CDB-Size-medium u-altTextColor u-ellipsis\">' +\n__e( description ) +\n'</p>\\n  </div>\\n  <div class=\"ServiceList-itemActions\">\\n    <button class=\"CDB-Button CDB-Button--secondary js-choose\">\\n      <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-small u-upperCase\">' +\n__e( _t('components.modals.add-layer.imports.service-import.choose') ) +\n'</span>\\n    </button>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"ConnectDataset-header\">\\n  <h2 class=\"CDB-Text CDB-Size-medium u-altTextColor\">\\n    ' +\n__e( _t('components.modals.add-layer.imports.service-import.found-in', {\n      size: size,\n      pluralize: pluralize,\n      title: title\n    }) ) +\n'\\n  </h2>\\n</div>\\n<div class=\"ServiceList-body\">\\n  ';\n if (size > 0) { ;\n__p += '\\n    <ul class=\"ServiceList-items\"></ul>\\n  ';\n } else { ;\n__p += '\\n    <div class=\"IntermediateInfo ServiceList-empty\">\\n      <div class=\"LayoutIcon\">\\n        <i class=\"CDB-IconFont CDB-IconFont-lens\"></i>\\n      </div>\\n      <h4 class=\"CDB-Text CDB-Size-large u-mainTextColor u-secondaryTextColor u-bSpace--m\">\\n        ' +\n__e( _t('components.modals.add-layer.imports.service-import.no-results-title') ) +\n'\\n      </h4>\\n      <p class=\"CDB-Text CDB-Size-medium u-altTextColor\">\\n        ' +\n__e( _t('components.modals.add-layer.imports.service-import.no-results-desc') ) +\n'\\n      </p>\\n    </div>\\n  ';\n } ;\n__p += '\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"ImportPanel-actions\">\\n  ';\n if (state === \"idle\") { ;\n__p += '\\n    <button class=\"CDB-Button CDB-Button--primary js-connect\">\\n      <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-small u-upperCase\">\\n        ' +\n__e( _t('components.modals.add-layer.imports.service-import.connect') ) +\n'\\n      </span>\\n    </button>\\n  ';\n } else if (state === \"error\") { ;\n__p += '\\n    <button class=\"CDB-Button CDB-Button--primary js-connect\">\\n      <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-small u-upperCase\">\\n        ' +\n__e( _t('components.modals.add-layer.imports.service-import.try-again') ) +\n'\\n      </span>\\n    </button>\\n  ';\n } else { ;\n__p += '\\n    <div class=\"Spinner ImportPanel-actionsLoader\"></div>\\n  ';\n } ;\n__p += '\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"ImportPanel-header\"></div>\\n<div class=\"ImportPanel-body\">\\n  <div class=\"ImportPanel-bodyWrapper\">\\n    <div class=\"ImportPanel-state ServiceLoader is-idle is-token is-oauth is-retrieving is-error\"></div>\\n    <div class=\"ImportPanel-state ServiceList is-list\"></div>\\n    <div class=\"ImportPanel-state ServiceSelected DatasetSelected is-selected\"></div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<i class=\\'TabIcon is-' +\n__e( name ) +\n'\\'></i>\\n<span>' +\n((__t = ( cdb.core.sanitize.html(title || name) )) == null ? '' : __t) +\n'</span>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n\n extraTweets = '<strong>$' + block_price/100 + '/' + block_size + ' ' + _t('components.modals.add-layer.imports.twitter.extra-tweets') + '</strong>' ;\n__p += '\\n';\n if (value <= remaining) { ;\n__p += '\\n  ' +\n__e( _t('components.modals.add-layer.imports.twitter.credits-left', {\n    per: per,\n    remainingFormatted: remainingFormatted\n  }) ) +\n'\\n';\n } else if (remaining <= 0 && !hardLimit) { ;\n__p += '\\n  ' +\n((__t = ( _t('components.modals.add-layer.imports.twitter.credits-consumed', {\n    extraTweets: extraTweets\n  }) )) == null ? '' : __t) +\n'\\n';\n } else { ;\n__p += '\\n  ' +\n((__t = ( _t('components.modals.add-layer.imports.twitter.credits-no-limit', {\n    extraTweets: extraTweets\n  }) )) == null ? '' : __t) +\n'\\n';\n } ;\n__p += '\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"ImportPanel-header\">\\n  <h3 class=\"CDB-Text CDB-Size-large u-mainTextColor u-secondaryTextColor u-bSpace--m\">\\n    ' +\n__e( _t('components.modals.add-layer.imports.twitter.title') ) +\n'\\n  </h3>\\n  <p class=\"CDB-Text CDB-Size-medium u-altTextColor\">\\n    ' +\n__e( _t('components.modals.add-layer.imports.twitter.terms-desc') ) +\n'\\n  </p>\\n</div>\\n<div class=\"ImportPanel-body\">\\n  <form class=\"Form\">\\n    <div class=\"ImportTwitterPanel-categories\"></div>\\n    <div class=\"ImportTwitterPanel-datePicker\">\\n      <div class=\"Form-row\">\\n        <div class=\"Form-rowLabel\">\\n          <label class=\"CDB-Text CDB-Size-medium js-category\">' +\n__e( _t('components.modals.add-layer.imports.twitter.from-to') ) +\n'</label>\\n        </div>\\n        <div class=\"Form-rowData Form-rowData--longer js-picker CDB-Text CDB-Size-medium\"></div>\\n        <div class=\"Form-rowInfo DatePicker-info\">\\n          <p class=\"CDB-Text CDB-Size-small u-altTextColor\">' +\n__e( _t('components.modals.add-layer.imports.twitter.twitter-gmt') ) +\n' <br/>(' +\n__e( _t('components.modals.add-layer.imports.twitter.your-gmt') ) +\n'' +\n__e( currentGMT ) +\n')</p>\\n        </div>\\n      </div>\\n    </div>\\n    <div class=\"ImportTwitterPanel-creditsUsage\">\\n      <div class=\"Form-row\">\\n        <div class=\"Form-rowLabel\">\\n          <label class=\"CDB-Text CDB-Size-medium js-category\">' +\n__e( _t('components.modals.add-layer.imports.twitter.use') ) +\n'</label>\\n        </div>\\n        <div class=\"Form-rowData Form-rowData--longer CreditsUsage\">\\n          <div class=\"UISlider CreditsUsage-slider js-slider\"></div>\\n          <div class=\"CreditsUsage-info CDB-Text CDB-Size-medium js-info\"></div>\\n        </div>\\n      </div>\\n    </div>\\n  </form>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"Form-row\">\\n  <div class=\"Form-rowLabel\">\\n    <label class=\"CDB-Text CDB-Size-medium js-category\">' +\n__e( _t('components.modals.add-layer.imports.twitter.category') ) +\n' ' +\n__e( category ) +\n'</label>\\n  </div>\\n  <div class=\"Form-rowData Form-rowData--longer\">\\n    <input type=\"text\" ';\n if (disabled) { ;\n__p += 'disabled=\"disabled\"';\n } ;\n__p += ' class=\"CDB-Text CDB-Size-medium Form-input Form-input--longer has-icon js-terms ' +\n__e( disabled ? 'is-disabled' : '' ) +\n'\" value=\"' +\n__e( terms.join(\",\") ) +\n'\" placeholder=\"' +\n__e( _t('components.modals.add-layer.imports.twitter.terms-placeholder') ) +\n'\" />\\n    <i class=\"CDB-IconFont CDB-IconFont-twitter Form-inputIcon\"></i>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"ImportOptions-navigation\">\\n  <button class=\"Carousel-Navigation CDB-Size-large ImportOptions-navigationButton ImportOptions-navigationButton--prev js-goPrev\">\\n    <i class=\"CDB-IconFont CDB-IconFont-arrowPrev u-actionTextColor\"></i>\\n  </button>\\n  <button class=\"Carousel-Navigation CDB-Size-large ImportOptions-navigationButton ImportOptions-navigationButton--next js-goNext\">\\n    <i class=\"CDB-IconFont CDB-IconFont-arrowNext u-actionTextColor\"></i>\\n  </button>\\n</div>\\n<div class=\"AddLayer-tabs\">\\n  <ul class=\"ImportOptions-tabsList js-menu CDB-Text CDB-Size-medium u-altTextColor\"></ul>\\n  <p class=\"CDB-Text CDB-Size-medium u-altTextColor u-tSpace-xl\">\\n    ' +\n__e( _t('components.modals.add-layer.imports.feedback.text') ) +\n'\\n    <a href=\"' +\n__e( _t('components.modals.add-layer.imports.feedback.url') ) +\n'\" target=\"_blank\">\\n      ' +\n__e( _t('components.modals.add-layer.imports.feedback.button') ) +\n'\\n    </a>\\n  </p>\\n\\n\\n</div>\\n<div class=\"ImportOptions-panes js-content\"></div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<span class=\"Filters-separator\"></span>\\n\\n<div class=\"Filters-row\">\\n  <div class=\"Filters-group\">\\n    <div class=\"Filters-typeItem Filters-typeItem--searchEnabler js-search-enabler\">\\n      <button class=\"Filters-searchLink CDB-Text is-semibold u-upperCase CDB-Size-medium js-search-link\">\\n        <i class=\"Filters-searchLinkIcon CDB-IconFont CDB-IconFont-lens\"></i>' +\n__e( _t('components.modals.add-layer.navigation.search') ) +\n'\\n      </button>\\n    </div>\\n\\n    <ul class=\"Filters-group js-links-list\">\\n      <li class=\"Filters-typeItem js-filter-type\">\\n        <button class=\"Filters-typeLink js-typeItem u-actionTextColor CDB-Text is-semibold u-upperCase CDB-Size-medium js-connect ' +\n__e( listingType === 'import' ? 'is-selected' : '' ) +\n' ' +\n__e( !canCreateDataset ? 'is-disabled' : '' ) +\n'\">\\n          ' +\n__e( _t('components.modals.add-layer.navigation.connect-dataset') ) +\n'\\n        </button>\\n      </li>\\n      ';\n if (showDatasets) { ;\n__p += '\\n        <li class=\"Filters-typeItem js-filter-type\">\\n          <button class=\"Filters-typeLink js-typeItem u-actionTextColor CDB-Text is-semibold u-upperCase CDB-Size-medium js-datasets ' +\n__e( listingType === 'datasets' && shared !== 'only' && !library ? 'is-selected' : '' ) +\n'\">\\n            ' +\n__e( _t('components.modals.add-layer.navigation.your-datasets') ) +\n'\\n          </button>\\n        </li>\\n        ';\n if (isInsideOrg) { ;\n__p += '\\n          <li class=\"Filters-typeItem js-filter-type\">\\n            <button class=\"Filters-typeLink js-typeItem u-actionTextColor CDB-Text is-semibold u-upperCase CDB-Size-medium js-shared ' +\n__e( listingType === 'datasets' && shared === \"only\" ? 'is-selected' : '' ) +\n'\">\\n              ';\n if (totalShared) { ;\n__p += '\\n                <strong>' +\n__e( totalShared ) +\n'</strong>\\n              ';\n } ;\n__p += '\\n              ' +\n__e( _t('components.modals.add-layer.navigation.shared-with-you') ) +\n'\\n            </button>\\n          </li>\\n        ';\n } ;\n__p += '\\n      ';\n } ;\n__p += '\\n      ';\n if (hasDataLibrary) { ;\n__p += '\\n        <li class=\"Filters-typeItem js-filter-type\">\\n          <button class=\"Filters-typeLink js-typeItem u-actionTextColor CDB-Text is-semibold u-upperCase CDB-Size-medium js-library ' +\n__e( listingType === 'datasets' && library ? 'is-selected' : '' ) +\n'\">\\n            ' +\n__e( _t('components.modals.add-layer.navigation.data-library') ) +\n'\\n          </button>\\n        </li>\\n      ';\n } ;\n__p += '\\n    </ul>\\n  </div>\\n\\n  <div class=\"Filters-typeItem Filters-typeItem--searchField js-search-field\">\\n    <form class=\"Filters-searchForm js-search-form\">\\n      <input class=\"Filters-searchInput CDB-Text CDB-Size-medium js-search-input\" type=\"text\" value=\"' +\n__e( ( tag && (':' + tag) ) || q ) +\n'\" placeholder=\"' +\n__e( _t('components.modals.add-layer.navigation.search-placeholder') ) +\n'\" />\\n      ';\n if (tag || q) { ;\n__p += '\\n        <button type=\"button\" class=\"Filters-cleanSearch js-clean-search u-actionTextColor\">\\n          <i class=\"CDB-IconFont CDB-IconFont-close\"></i>\\n        </button>\\n      ';\n } ;\n__p += '\\n    </form>\\n  </div>\\n\\n  <div class=\"Filters-addLayer js-order-list\">\\n    <button class=\"Filters-typeLink js-typeItem u-actionTextColor CDB-Text is-semibold u-upperCase CDB-Size-medium js-create-empty ' +\n__e( listingType === 'scratch' ? 'is-selected' : '' ) +\n' ' +\n__e( !canCreateDataset ? 'is-disabled' : '' ) +\n'\">\\n      ' +\n__e( _t('components.modals.add-layer.navigation.create-empty-' + createModelType) ) +\n'\\n    </button>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar GuessingTogglerView = require('./guessing-toggler-view');\nvar PrivacyTogglerView = require('./privacy-toggler-view');\nvar template = require('./footer.tpl');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'privacyModel',\n  'guessingModel',\n  'createModel',\n  'userModel',\n  'configModel'\n];\n\n/**\n * Footer view for the add layer modal.\n */\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-ok': '_finish'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this.$el.html(\n      template({\n        canFinish: this._createModel.canFinish(),\n        listing: this._createModel.get('listing')\n      })\n    );\n\n    this._initViews();\n\n    return this;\n  },\n\n  _initViews: function () {\n    var guessingTogglerView = new GuessingTogglerView({\n      guessingModel: this._guessingModel,\n      userModel: this._userModel,\n      createModel: this._createModel,\n      configModel: this._configModel\n    });\n    this.$('.js-footer-info').append(guessingTogglerView.render().el);\n    this.addView(guessingTogglerView);\n\n    var privacyTogglerView = new PrivacyTogglerView({\n      privacyModel: this._privacyModel,\n      userModel: this._userModel,\n      createModel: this._createModel,\n      configModel: this._configModel\n    });\n    this.$('.js-footerActions').prepend(privacyTogglerView.render().el);\n    this.addView(privacyTogglerView);\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._createModel.getUploadModel(), 'change', this.render);\n    this.listenTo(this._createModel.getSelectedDatasetsCollection(), 'all', this._update);\n    this.listenTo(this._createModel, 'change', this._update);\n  },\n\n  _update: function () {\n    var contentPane = this._createModel.get('contentPane');\n    var listing = this._createModel.get('listing');\n    if (contentPane === 'listing' && listing !== 'scratch') {\n      this.render().show();\n    } else {\n      this.hide();\n    }\n  },\n\n  _finish: function (e) {\n    this.killEvent(e);\n    if (this._createModel.canFinish()) {\n      // Set proper guessing values before starting the upload\n      // if dialog is in import section\n      if (this._createModel.get('listing') === 'import') {\n        var uploadModel = this._createModel.getUploadModel();\n        uploadModel.setPrivacy(this._privacyModel.get('privacy'));\n        uploadModel.setGuessing(this._guessingModel.get('guessing'));\n      }\n      this._userModel.updateTableCount();\n      this._createModel.finish();\n    }\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"CreateDialog-footerShadow\"></div>\\n<div class=\"CreateDialog-footerLine\"></div>\\n<div class=\"CreateDialog-footerInner u-flex u-justifySpace u-alignCenter\">\\n  <div class=\"js-footer-info CreateDialog-footerInfo u-secondaryTextColor\">\\n  </div>\\n  <div class=\"CreateDialog-footerActions js-footerActions\">\\n    <button class=\"js-ok CDB-Button CDB-Button--primary ' +\n__e( canFinish ? '' : 'is-disabled' ) +\n'\">\\n      <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-small u-upperCase\">' +\n__e( _t('components.modals.add-layer.footer.add-layer') ) +\n'</span>\\n    </button>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n\n if (importState !== \"twitter\") { ;\n__p += '\\n  <div class=\"u-iBlock CDB-Text CDB-Size-medium u-rSpace--xl js-toggle\">\\n    <input class=\"CDB-Checkbox\" type=\"checkbox\" ' +\n__e( isGuessingEnabled ? 'checked' : '' ) +\n'>\\n    <span class=\"u-iBlock CDB-Checkbox-face\"></span>\\n    <label class=\"u-iBlock u-lSpace\">' +\n__e( _t('components.modals.add-layer.footer.guessing-desc') ) +\n'</label>\\n  </div>\\n';\n } else if (isTwitterDeprecatedForUser) { ;\n__p += '\\n  <div class=\"CDB-Text CDB-Size-medium\">\\n    <span class=\"Dialog-footerWarning\">\\n      ' +\n__e( _t('components.modals.add-layer.footer.deprecated-connector') ) +\n'\\n    </span>\\n    ' +\n((__t = ( _t('components.modals.add-layer.footer.twitter-contact-support') )) == null ? '' : __t) +\n'\\n  </div>\\n';\n } else if (!customHosted) { ;\n__p += '\\n  <span class=\"CDB-Text CDB-Size-medium\">\\n    ' +\n__e( _t('components.modals.add-layer.footer.twitter-how-to-historical') ) +\n'\\n    <a href=\"mailto:support@carto.com\">\\n      ' +\n__e( _t('components.modals.add-layer.footer.contact-team') ) +\n'\\n    </a>\\n  </span>\\n';\n } ;\n__p += '\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n\n if (canUpgrade) { ;\n__p += '\\n  <a href=\"' +\n__e( upgradeUrl ) +\n'\" class=\"PrivacyToggler js-toggler PrivacyToggler--' +\n__e( privacy ) +\n' is-disabled\"\\n    data-title=\"' +\n__e( _t('components.modals.add-layer.footer.privacy-change-not-allowed') ) +\n'\">\\n    <i class=\"CDB-IconFont CDB-IconFont-' +\n__e( icon ) +\n'\"></i>\\n  </a>\\n';\n } else {;\n__p += '\\n  <button type=\"button\" class=\"PrivacyToggler js-toggler PrivacyToggler--' +\n__e( privacy ) +\n' ' +\n__e( isDisabled ? 'is-disabled' : '' ) +\n'\"\\n    data-title=\"\\n      ';\n if (!isDisabled) { ;\n__p += '\\n        ' +\n__e( _t('components.modals.add-layer.footer.privacy-change', { privacy: privacy.toLowerCase() }) ) +\n'.<br />' +\n__e( _t('components.modals.add-layer.footer.privacy-click', { nextPrivacy: nextPrivacy.toLowerCase() }) ) +\n'.\\n      ';\n } else { ;\n__p += '\\n        ' +\n__e( _t('components.modals.add-layer.footer.privacy-change-banned') ) +\n'\\n      ';\n } ;\n__p += '\\n    \">\\n    <i class=\"CDB-IconFont CDB-IconFont-' +\n__e( icon ) +\n'\"></i>\\n  </button>\\n';\n } ;\n__p += '\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar $ = require('jquery');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar createTuplesItems = require('./create-tuples-items');\nvar widgetsTypes = require('./widgets-types');\nvar BodyView = require('./body-view');\nvar template = require('./add-widgets.tpl');\nvar renderLoading = require('builder/components/loading/render-loading');\nvar TableStats = require('./tablestats.js');\n\nvar ENTER_KEY_CODE = 13;\n\n/**\n * View to add new widgets.\n * Expected to be rendered in a modal.\n */\nmodule.exports = CoreView.extend({\n  module: 'components/modals/add-widgets/add-widgets-view',\n\n  className: 'Dialog-content Dialog-content--expanded',\n\n  events: {\n    'click .js-continue': '_onContinue'\n  },\n\n  initialize: function (opts) {\n    if (!opts.userActions) throw new Error('userActions is required');\n    if (!opts.modalModel) throw new Error('modalModel is required');\n    if (!opts.layerDefinitionsCollection) throw new Error('layerDefinitionsCollection is required');\n    if (!opts.widgetDefinitionsCollection) throw new Error('widgetDefinitionsCollection is required');\n    if (!opts.analysisDefinitionNodesCollection) throw new Error('analysisDefinitionNodesCollection is required');\n\n    this._userActions = opts.userActions;\n    this._modalModel = opts.modalModel;\n    this._layerDefinitionsCollection = opts.layerDefinitionsCollection;\n    this._widgetDefinitionsCollection = opts.widgetDefinitionsCollection;\n    this._analysisDefinitionNodesCollection = opts.analysisDefinitionNodesCollection;\n\n    this._optionsCollection = new Backbone.Collection();\n    this.tableStats = new TableStats({\n      configModel: opts.configModel,\n      userModel: opts.userModel\n    });\n\n    this._analysisDefinitionNodesCollection.each(function (analysisDefinitionNode) {\n      analysisDefinitionNode = analysisDefinitionNode.querySchemaModel;\n      analysisDefinitionNode.on('change', this._onQuerySchemaChange, this);\n      this.add_related_model(analysisDefinitionNode);\n      analysisDefinitionNode.fetch();\n    }, this);\n\n    this.listenTo(this._optionsCollection, 'change:selected', this._updateContinueButtonState);\n\n    this.add_related_model(this._optionsCollection);\n\n    this._onKeyDown = this._onKeyDown.bind(this);\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template());\n\n    if (this._hasFetchedAllQuerySchemas()) {\n      this._renderBodyView();\n    } else {\n      this._renderLoadingView();\n    }\n\n    this._updateContinueButtonState();\n\n    return this;\n  },\n\n  _initBinds: function () {\n    $(document).bind('keydown', this._onKeyDown);\n  },\n\n  _disableBinds: function () {\n    $(document).unbind('keydown', this._onKeyDown);\n  },\n\n  _onKeyDown: function (event) {\n    event.preventDefault();\n    if (event.which === ENTER_KEY_CODE) {\n      this._onContinue();\n    }\n  },\n\n  _onQuerySchemaChange: function () {\n    if (this._hasFetchedAllQuerySchemas()) {\n      this.render();\n    }\n  },\n\n  _hasFetchedAllQuerySchemas: function () {\n    return this._analysisDefinitionNodesCollection.all(function (analysisDefinitionNode) {\n      return analysisDefinitionNode.querySchemaModel.get('status') !== 'fetching';\n    });\n  },\n\n  _onContinue: function () {\n    var self = this;\n    var selectedOptionModels = this._optionsCollection.filter(this._isSelected);\n\n    if (selectedOptionModels.length > 0) {\n      this._saveSelectedWidgets(selectedOptionModels)\n        .then(function (widgets) {\n          self._userActions.goToEditWidget(widgets);\n          self._userActions.updateWidgetsOrder(selectedOptionModels);\n        })\n        .catch(function () {\n          self._userActions.updateWidgetsOrder(selectedOptionModels);\n        });\n\n      this._modalModel.destroy();\n    }\n  },\n\n  _saveSelectedWidgets: function (selectedOptionModels) {\n    var saveWidgetOptionsPromises = [];\n\n    _.map(selectedOptionModels, function (selectedOptionModel) {\n      saveWidgetOptionsPromises.push(this._userActions.saveWidgetOption(selectedOptionModel));\n    }, this);\n\n    return Promise.all(saveWidgetOptionsPromises);\n  },\n\n  _renderBodyView: function () {\n    this._createOptionsModels();\n    var view = new BodyView({\n      el: this._$body(),\n      optionsCollection: this._optionsCollection,\n      widgetsTypes: widgetsTypes\n    });\n    this.addView(view.render());\n  },\n\n  _renderLoadingView: function () {\n    this._$body().html(\n      renderLoading({\n        title: _t('components.modals.add-widgets.loading-title')\n      })\n    );\n  },\n\n  _$body: function () {\n    return this.$('.js-body');\n  },\n\n  _updateContinueButtonState: function () {\n    this.$('.js-continue').toggleClass('is-disabled', !this._optionsCollection.any(this._isSelected));\n  },\n\n  _isSelected: function (model) {\n    return !!model.get('selected');\n  },\n\n  _createOptionsModels: function () {\n    var self = this;\n    this._optionsCollection.reset();\n    var tuplesItems = createTuplesItems(this._analysisDefinitionNodesCollection, this._layerDefinitionsCollection);\n\n    _.each(widgetsTypes, function (widgetType) {\n      var models = widgetType.createOptionModels(tuplesItems, this._widgetDefinitionsCollection);\n      models = models.map(function (model) { model.stats = self.tableStats; return model; });\n      this._optionsCollection.add(models);\n    }, this);\n  },\n\n  clean: function () {\n    this._disableBinds();\n    CoreView.prototype.clean.apply(this);\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"Modal\">\\n  <div class=\"Modal-header\">\\n    <div class=\"Modal-headerContainer\">\\n      <h2 class=\"CDB-Text CDB-Size-huge is-light u-mainTextColor u-bSpace\">' +\n__e( _t('components.modals.add-widgets.modal-title') ) +\n'</h2>\\n      <h3 class=\"CDB-Text CDB-Size-medium u-altTextColor\">' +\n__e( _t('components.modals.add-widgets.modal-desc') ) +\n'</h3>\\n    </div>\\n  </div>\\n\\n  <div class=\"Modal-container js-body\"></div>\\n\\n  <div class=\"Modal-footer\">\\n    <div class=\"Modal-footerContainer u-flex u-justifyEnd\">\\n      <button class=\"CDB-Button CDB-Button--primary is-disabled js-continue\">\\n        <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">' +\n__e( _t('components.modals.add-widgets.continue-btn') ) +\n'</span>\\n      </button>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar createTemplateTabPane = require('builder/components/tab-pane/create-template-tab-pane');\nvar tabPaneButtonTemplate = require('./tab-pane-button-template.tpl');\nvar tabPaneTemplate = require('./tab-pane-template.tpl');\n\n/**\n * View to select widget options to create.\n */\nmodule.exports = CoreView.extend({\n  module: 'components/modals/add-widgets/body-view',\n\n  initialize: function (opts) {\n    if (!opts.optionsCollection) throw new Error('optionsCollection is required');\n    if (!opts.widgetsTypes) throw new Error('widgetsTypes is required');\n\n    // Only render tab items for types that have option models available\n    var availableTypes = _.unique(opts.optionsCollection.pluck('type'));\n    this._tabPaneItems = _\n      .reduce(opts.widgetsTypes, function (memo, d) {\n        if (_.contains(availableTypes, d.type)) {\n          var tabPaneItem = d.createTabPaneItem(opts.optionsCollection);\n          memo.push(tabPaneItem);\n        }\n        return memo;\n      }, []);\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    var options = {\n      tabPaneOptions: {\n        template: tabPaneTemplate,\n        tabPaneItemOptions: {\n          tagName: 'li',\n          klassName: 'CDB-NavMenu-item'\n        }\n      },\n      tabPaneTemplateOptions: {\n        tagName: 'button',\n        className: 'CDB-NavMenu-link u-upperCase',\n        template: tabPaneButtonTemplate\n      }\n    };\n\n    var view = createTemplateTabPane(this._tabPaneItems, options);\n    this.addView(view);\n    this.$el.append(view.render().el);\n    return this;\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<p class=\"Widget-categoryFakeText\"></p>\\n<div class=\"Widget-categoryFake\"></div>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar WidgetOptionModel = require('builder/components/modals/add-widgets/widget-option-model');\nvar WidgetDefinitionModel = require('builder/data/widget-definition-model');\n\nvar CATEGORY_TYPE = 'category';\n\nmodule.exports = WidgetOptionModel.extend({\n  defaults: _.defaults({type: CATEGORY_TYPE}, WidgetOptionModel.defaults),\n\n  save: function (widgetDefinitionsCollection) {\n    var model = this;\n    var columnName = this.columnName();\n    var styleModel = this.layerDefinitionModel() && this.layerDefinitionModel().styleModel;\n    var isAllowed = styleModel && styleModel.canApplyAutoStyle() || false;\n\n    var attrs = {\n      type: CATEGORY_TYPE,\n      layer_id: this.layerDefinitionModel().id,\n      source: {\n        id: this.analysisDefinitionNodeModel().id\n      },\n      options: {\n        column: columnName,\n        aggregation_column: columnName,\n        aggregation: this.get('aggregation'),\n        title: this.get('title')\n      },\n      style: {\n        widget_style: {\n          definition: WidgetDefinitionModel.getDefaultWidgetStyle(CATEGORY_TYPE)\n        },\n        auto_style: {\n          allowed: isAllowed,\n          custom: false\n        }\n      }\n    };\n\n    return widgetDefinitionsCollection.addWidget(model, attrs);\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar LayerSelectorView = require('builder/components/modals/add-widgets/layer-selector-view');\nvar template = require('./category-option.tpl');\nvar categoryFake = require('./category-fake.tpl');\n\n/**\n * View for an individual category option.\n */\nmodule.exports = CoreView.extend({\n  module: 'components/modals/add-widgets/category/category-option-view',\n\n  events: {\n    'click': '_onSelect'\n  },\n\n  initialize: function (opts) {\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(this._html());\n    this._renderLayerSelector();\n    var tableStats = this.options.model.stats;\n    if (tableStats) {\n      this._drawGraph();\n    }\n    return this;\n  },\n\n  _html: function () {\n    var isSelected = !!this.model.get('selected');\n\n    this.$el.toggleClass('is-selected', isSelected);\n\n    return template({\n      columnName: this.model.columnName(),\n      isSelected: isSelected\n    });\n  },\n\n  _renderLayerSelector: function () {\n    var view = new LayerSelectorView({\n      model: this.model\n    });\n    this.addView(view);\n    this.$('.js-inner').append(view.render().el);\n  },\n\n  _onSelect: function () {\n    this.model.set('selected', !this.model.get('selected'));\n  },\n\n  _drawGraph: function () {\n    var self = this;\n    this.options.model.stats.graphFor(\n      this.model.analysisDefinitionNodeModel().get('table_name'),\n      this.model.get('name'), function (graph) {\n        if (graph.stats && graph.stats.freqs) {\n          self.$('.js-Category-bar').append(graph.getCategory({\n            color: '#9DE0AD',\n            width: 240,\n            height: 10\n          }));\n          var stats = self.$('.js-catstats').children();\n          self.$(stats[0]).text(graph.getNullsPercentage() + '% null');\n          self.$(stats[1]).text((graph.getPercentageInTopCategories() * 100).toFixed(2) + _t('components.modals.add-widgets.percentage-in-top-cats'));\n          self.$('.js-catstats').css('display', 'flex');\n        } else {\n          self.$('.js-Category-bar').append(categoryFake());\n        }\n      }\n    );\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.model, 'change:layer_index', this.render);\n    this.listenTo(this.model, 'change:selected', this.render);\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"WidgetList-option\">\\n  <input class=\"CDB-Checkbox js-checkbox\" type=\"checkbox\" ';\n if (isSelected) { ;\n__p += 'checked=\"checked\"';\n } ;\n__p += ' />\\n  <span class=\"u-iBlock CDB-Checkbox-face\"></span>\\n</div>\\n\\n<div class=\"WidgetList-inner js-inner\">\\n  <h3 class=\"u-ellipsis CDB-Text CDB-Size-large u-bSpace--m\">' +\n__e( columnName ) +\n'</h3>\\n  <ul class=\"js-catstats u-flex CDB-Text CDB-Size-small u-secondaryTextColor u-upperCase\">\\n    <li class=\\'u-rSpace--m\\'></li>\\n    <li class=\\'u-rSpace--m\\'></li>\\n  </ul>\\n  <div class=\"u-bSpace--m js-Category-bar\">\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar CategoryOptionView = require('./category-option-view.js');\n\n/**\n * View to select category widget options\n */\nmodule.exports = CoreView.extend({\n  module: 'components/modals/add-widgets/category/category-options-view',\n\n  tagName: 'ul',\n  className: 'WidgetList',\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this.collection\n      .chain()\n      .filter(this._isCategory)\n      .each(this._renderOption, this);\n    return this;\n  },\n\n  _renderOption: function (m) {\n    var view = new CategoryOptionView({\n      tagName: 'li',\n      className: 'WidgetList-item js-WidgetList-item',\n      model: m\n    });\n    this.addView(view);\n    this.$el.append(view.render().el);\n  },\n\n  _isCategory: function (m) {\n    return m.get('type') === 'category';\n  }\n\n});\n","var _ = require('underscore');\n\nvar BLACKLISTED_COLUMNS = ['created_at', 'the_geom', 'the_geom_webmercator', 'updated_at'];\n\n/**\n * Tmp data structure with column and layer-def models for each unique name+type tuple.\n * Each bucket contains a columnModel and layerDefinitionModel tuple,\n * since they are unique even if the columns' name+type happen to be the same\n * From this widget definition options for specific needs\n *\n * @param {Object} layerDefinitionsCollection\n * @return {Object} e.g.\n *   e.g.\n *     {\n *       foobar-string: [{\n *         columnModel: M({name: 'foobar', type: 'string', …}),\n *         layerDefinitionModel: M({ id: 'abc-123', … })\n *       }]\n *     }\n */\nmodule.exports = function (analysisDefinitionNodesCollection, layerDefinitionsCollection) {\n  return analysisDefinitionNodesCollection\n    .reduce(function (tuplesItems, nodeDefModel) {\n      var layerDefinitionModel = layerDefinitionsCollection.find(function (l) { return l.isOwnerOfAnalysisNode(nodeDefModel); });\n      if (!layerDefinitionModel) return tuplesItems; // e.g. if the node is one of those temporary tables\n\n      var querySchemaModel = nodeDefModel.querySchemaModel;\n      var queryGeometryModel = nodeDefModel.queryGeometryModel;\n      if (!querySchemaModel || !queryGeometryModel) return tuplesItems;\n      if (!queryGeometryModel.isDone() || !queryGeometryModel.get('simple_geom')) {\n        return tuplesItems;\n      }\n\n      querySchemaModel.columnsCollection.each(function (m) {\n        var columnName = m.get('name');\n\n        if (!_.contains(BLACKLISTED_COLUMNS, columnName)) {\n          var key = columnName + '-' + m.get('type');\n          var tuples = tuplesItems[key] = tuplesItems[key] || [];\n          tuples.push({\n            analysisDefinitionNodeModel: nodeDefModel,\n            layerDefinitionModel: layerDefinitionModel,\n            columnModel: m\n          });\n        }\n      });\n\n      return tuplesItems;\n    }, {});\n};\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\\'Widget-formulaFakeContainer\\'>\\n  <p class=\\'Widget-categoryFakeText\\'></p>\\n  <div class=\\'Widget-formulaFake\\'></div>\\n</div>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar WidgetOptionModel = require('builder/components/modals/add-widgets/widget-option-model');\n\nvar FORMULA_TYPE = 'formula';\n\nmodule.exports = WidgetOptionModel.extend({\n  defaults: _.defaults({type: FORMULA_TYPE}, WidgetOptionModel.defaults),\n\n  save: function (widgetDefinitionsCollection) {\n    var model = this;\n    var columnName = this.columnName();\n\n    var attrs = {\n      type: FORMULA_TYPE,\n      layer_id: this.layerDefinitionModel().id,\n      source: {\n        id: this.analysisDefinitionNodeModel().id\n      },\n      options: {\n        column: columnName,\n        title: this.get('title'),\n        operation: this.get('operation')\n      }\n    };\n\n    return widgetDefinitionsCollection.addWidget(model, attrs);\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar LayerSelectorView = require('builder/components/modals/add-widgets/layer-selector-view');\nvar template = require('./formula-option.tpl');\nvar formulaFake = require('./formula-fake.tpl');\nvar _ = require('underscore');\n\n/**\n * View for an individual formula option.\n */\nmodule.exports = CoreView.extend({\n\n  events: {\n    'click': '_onSelect'\n  },\n\n  initialize: function (opts) {\n    this.listenTo(this.model, 'change:layer_index', this.render);\n    this.listenTo(this.model, 'change:selected', this.render);\n    this.aggregation = this.model.get('operation');\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(this._html());\n    this._renderLayerSelector();\n    var tableStats = this.options.model.stats;\n    if (tableStats) {\n      this._drawGraph();\n    }\n    return this;\n  },\n\n  _html: function () {\n    var isSelected = !!this.model.get('selected');\n\n    this.$el.toggleClass('is-selected', isSelected);\n\n    return template({\n      columnName: this.model.get('title'),\n      isSelected: isSelected\n    });\n  },\n\n  _renderLayerSelector: function () {\n    var view = new LayerSelectorView({\n      model: this.model\n    });\n    this.addView(view);\n    this.$('.js-inner').append(view.render().el);\n  },\n\n  _onSelect: function () {\n    this.model.set('selected', !this.model.get('selected'));\n  },\n\n  _drawGraph: function () {\n    var self = this;\n    this.options.model.stats.graphFor(\n      this.model.analysisDefinitionNodeModel().get('table_name'),\n      this.model.get('name'), function (graph) {\n        if (graph.stats) {\n          var stats = self.$('.js-formulastats').children();\n          var aggregation = graph[{ // eslint-disable-line\n            'avg': 'getAverage',\n            'sum': 'getSum',\n            'min': 'getMin',\n            'max': 'getMax',\n            'count': 'getCount'\n          }[self.aggregation]]();\n          if (_.isNumber(aggregation)) {\n            self.$(stats[0]).text(graph.getNullsPercentage() + '% null');\n            if (self.aggregation === 'count') {\n              self.$(stats[1]).text(aggregation.toFixed().toString());\n            } else {\n              self.$(stats[1]).text(aggregation.toFixed(2).toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ','));\n            }\n            self.$('.js-formulastats').show();\n          } else {\n            self.$('.js-formulastats').append(formulaFake());\n            self.$('.js-formulastats').show();\n          }\n        } else {\n          self.$('.js-formulastats').append(formulaFake());\n          self.$('.js-formulastats').show();\n        }\n      }\n    );\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"WidgetList-option\">\\n  <input class=\"CDB-Checkbox js-checkbox\" type=\"checkbox\" ';\n if (isSelected) { ;\n__p += 'checked=\"checked\"';\n } ;\n__p += ' />\\n  <span class=\"u-iBlock CDB-Checkbox-face\"></span>\\n</div>\\n\\n<div class=\"WidgetList-inner js-inner\">\\n  <h3 class=\"u-ellipsis CDB-Text CDB-Size-large u-bSpace--m\">' +\n__e( columnName ) +\n'</h3>\\n  <div class=\"js-formulastats\" style=\"display: none;\">\\n    <ul class=\"u-flex CDB-Text CDB-Size-small u-secondaryTextColor u-upperCase\">\\n      <li class=\\'u-rSpace\\'></li>\\n    </ul>\\n  \t<h4 class=\"CDB-Text CDB-Size-huge u-bSpace--m\"></h4>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar FormulaOptionView = require('./formula-option-view.js');\n\n/**\n * View to select formula widget options\n */\nmodule.exports = CoreView.extend({\n\n  className: 'WidgetList',\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this.collection\n      .chain()\n      .filter(this._isFormula)\n      .each(this._renderOption, this);\n    return this;\n  },\n\n  _renderOption: function (m) {\n    var view = new FormulaOptionView({\n      className: 'WidgetList-item js-WidgetList-item',\n      model: m\n    });\n    this.addView(view);\n    this.$el.append(view.render().el);\n  },\n\n  _isFormula: function (m) {\n    return m.get('type') === 'formula';\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"Widget-histogramFakeContainer\">\\n  <p class=\"Widget-categoryFakeText\"></p>\\n  <div class=\"Widget-histogramFake\"></div>\\n</div>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar WidgetOptionModel = require('builder/components/modals/add-widgets/widget-option-model');\nvar WidgetDefinitionModel = require('builder/data/widget-definition-model');\n\nvar HISTOGRAM_TYPE = 'histogram';\n\nmodule.exports = WidgetOptionModel.extend({\n  defaults: _.defaults({type: HISTOGRAM_TYPE}, WidgetOptionModel.defaults),\n\n  save: function (widgetDefinitionsCollection) {\n    var model = this;\n    var columnName = this.columnName();\n    var styleModel = this.layerDefinitionModel() && this.layerDefinitionModel().styleModel;\n    var isAllowed = styleModel && styleModel.canApplyAutoStyle() || false;\n\n    var attrs = {\n      type: HISTOGRAM_TYPE,\n      layer_id: this.layerDefinitionModel().id,\n      source: {\n        id: this.analysisDefinitionNodeModel().id\n      },\n      options: {\n        column: columnName,\n        title: this.get('title'),\n        bins: this.get('bins')\n      },\n      style: {\n        widget_style: {\n          definition: WidgetDefinitionModel.getDefaultWidgetStyle(HISTOGRAM_TYPE)\n        },\n        auto_style: {\n          allowed: isAllowed,\n          custom: false\n        }\n      }\n    };\n\n    return widgetDefinitionsCollection.addWidget(model, attrs);\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar LayerSelectorView = require('builder/components/modals/add-widgets/layer-selector-view');\nvar template = require('./histogram-option.tpl');\nvar histogramFake = require('./histogram-fake.tpl');\n\n/**\n * View for an individual histogram option.\n */\nmodule.exports = CoreView.extend({\n\n  events: {\n    'click': '_onSelect'\n  },\n\n  initialize: function (opts) {\n    this.listenTo(this.model, 'change:layer_index', this.render);\n    this.listenTo(this.model, 'change:selected', this.render);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(this._html());\n    this._renderLayerSelector();\n    var tableStats = this.options.model.stats;\n    if (tableStats) {\n      this._drawGraph();\n    }\n    return this;\n  },\n\n  _html: function () {\n    var isSelected = !!this.model.get('selected');\n\n    this.$el.toggleClass('is-selected', isSelected);\n\n    return template({\n      columnName: this.model.columnName(),\n      isSelected: isSelected\n    });\n  },\n\n  _renderLayerSelector: function () {\n    var view = new LayerSelectorView({\n      model: this.model\n    });\n    this.addView(view);\n    this.$('.js-inner').append(view.render().el);\n  },\n\n  _onSelect: function () {\n    this.model.set('selected', !this.model.get('selected'));\n  },\n\n  _drawGraph: function () {\n    var self = this;\n    this.options.model.stats.graphFor(\n      this.model.analysisDefinitionNodeModel().get('table_name'),\n      this.model.get('name'), function (graph) {\n        if (graph.stats) {\n          self.$('.js-Histogram').append(graph.getHistogram({\n            color: '#9DE0AD',\n            width: 240,\n            height: 20,\n            bins: 20\n          }));\n          var stats = self.$('.js-histstats').children();\n          self.$(stats[0]).text(graph.getNullsPercentage() + '% null');\n          self.$('.js-histstats').css('display', 'flex');\n        } else {\n          self.$('.js-Histogram').append(histogramFake());\n        }\n      }\n    );\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"WidgetList-option\">\\n  <input class=\"CDB-Checkbox js-checkbox\" type=\"checkbox\" ';\n if (isSelected) { ;\n__p += 'checked=\"checked\"';\n } ;\n__p += ' />\\n  <span class=\"u-iBlock CDB-Checkbox-face\"></span>\\n</div>\\n\\n<div class=\"WidgetList-inner js-inner\">\\n  <h3 class=\"u-ellipsis CDB-Text CDB-Size-large u-bSpace--m\">' +\n__e( columnName ) +\n'</h3>\\n  <ul class=\"js-histstats u-flex CDB-Text CDB-Size-small u-upperCase\" style=\"display: none;\">\\n    <li class=\\'u-rSpace\\'></li>\\n  </ul>\\n  <div class=\"u-tSpace--m u-bSpace--m js-Histogram\"></div>\\n</div>\\n';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar HistogramOptionView = require('./histogram-option-view.js');\n\n/**\n * View to select histogram widget options\n */\nmodule.exports = CoreView.extend({\n\n  className: 'WidgetList',\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this.collection\n      .chain()\n      .filter(this._isHistogram)\n      .each(this._renderOption, this);\n    return this;\n  },\n\n  _renderOption: function (m) {\n    var view = new HistogramOptionView({\n      className: 'WidgetList-item js-WidgetList-item',\n      model: m\n    });\n    this.addView(view);\n    this.$el.append(view.render().el);\n  },\n\n  _isHistogram: function (m) {\n    return m.get('type') === 'histogram';\n  }\n\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar analyses = require('builder/data/analyses');\nrequire('builder/components/form-components/index');\nvar CustomListItemView = require('builder/components/form-components/editors/select/select-layer-list-item-view');\nvar itemListTemplate = require('builder/components/form-components/editors/select/select-layer-item.tpl');\nvar selectedItemTemplate = require('builder/components/form-components/editors/select/select-layer-list-item.tpl');\n\n/**\n * View for selecting the layer through which to load the column data.\n */\nmodule.exports = CoreView.extend({\n\n  className: 'CDB-SelectorLayer',\n\n  events: {\n    'click': '_onClick',\n    'change': '_onChange'\n  },\n\n  initialize: function (opts) {\n    this._stateModel = new Backbone.Model({\n      highlighted: false\n    });\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this._unbindEvents();\n    this._initViews();\n    this._bindEvents();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._stateModel, 'change:highlighted', this._toggleHover);\n  },\n\n  _initViews: function () {\n    var self = this;\n    var options = this._buildOptions();\n\n    this._selectView = new Backbone.Form.editors.Select({\n      className: 'Widget-select u-flex u-alignCenter',\n      key: 'name',\n      schema: {\n        options: options\n      },\n      model: self.model,\n      showSearch: false,\n      template: require('./select.tpl'),\n      selectedItemTemplate: selectedItemTemplate,\n      customListItemView: CustomListItemView,\n      itemListTemplate: itemListTemplate,\n      mouseOverAction: this._onMouseOver.bind(this),\n      mouseOutAction: this._onMouseOut.bind(this)\n    });\n\n    this._selectView.setValue(this.model.get('layer_index') || 0);\n    this.$el.html(this._selectView.render().el);\n  },\n\n  _onMouseOver: function () {\n    this._stateModel.set('highlighted', true);\n  },\n\n  _onMouseOut: function () {\n    this._stateModel.set('highlighted', false);\n  },\n\n  _toggleHover: function () {\n    var $widget = this.$el.closest('.js-WidgetList-item');\n\n    $widget.toggleClass('is-hover', this._stateModel.get('highlighted'));\n  },\n\n  _buildOptions: function () {\n    return _.map(this.model.get('tuples'), function (item, index) {\n      var layerDefModel = item.layerDefinitionModel;\n      var nodeDefModel = item.analysisDefinitionNodeModel;\n      var layerName = nodeDefModel.isSourceType()\n        ? layerDefModel.getTableName()\n        : layerDefModel.getName();\n\n      return {\n        val: index,\n        layerName: layerName,\n        nodeTitle: analyses.short_title(nodeDefModel),\n        layer_id: nodeDefModel.id,\n        color: layerDefModel.getColor(),\n        isSourceType: nodeDefModel.isSourceType()\n      };\n    });\n  },\n\n  _bindEvents: function () {\n    if (this._selectView) {\n      this._selectView.on('change', this._onChange, this);\n    }\n  },\n\n  _unbindEvents: function () {\n    if (this._selectView) {\n      this._selectView.off('change', this._onChange, this);\n    }\n  },\n\n  _onClick: function (event) {\n    event.stopPropagation();\n  },\n\n  _onChange: function () {\n    this.model.set('layer_index', this._selectView.getValue());\n  },\n\n  clean: function () {\n    this._selectView.remove();\n    CoreView.prototype.clean.apply(this);\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<p class=\"CDB-Text CDB-Size-small u-upperCase u-altTextColor Widget-selectTitle\">Select Layer</p>\\n<div class=\"CDB-InputText CDB-Text is-cursor js-button u-ellipsis\\n  ';\n if (isDisabled) { ;\n__p += ' is-disabled ';\n } ;\n__p += '\\n  ';\n if (!label) { ;\n__p += ' is-empty ';\n } ;\n__p += '\"\\n  tabindex=\"0\">\\n  ';\n if (isLoading) { ;\n__p += '\\n    <div class=\"CDB-LoaderIcon CDB-LoaderIcon--small is-dark\">\\n      <svg class=\"CDB-LoaderIcon-spinner\" viewBox=\"0 0 50 50\">\\n        <circle class=\"CDB-LoaderIcon-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"></circle>\\n      </svg>\\n    </div>\\n    <span class=\"u-lSpace u-secondaryTextColor\">' +\n__e( _t('components.backbone-forms.select.loading') ) +\n'</span>\\n  ';\n } else { ;\n__p += '\\n    ';\n if (isEmpty) { ;\n__p += '\\n      ' +\n__e( _t('components.backbone-forms.select.empty') ) +\n'\\n    ';\n } else { ;\n__p += '\\n      ' +\n__e( label || _t('components.backbone-forms.select.placeholder', { keyAttr: keyAttr }) ) +\n'\\n    ';\n } ;\n__p += '\\n  ';\n } ;\n__p += '\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p +=\n__e( label );\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"Modal-navigation\">\\n  <ul class=\"Modal-navigationInner CDB-Text is-semibold CDB-Size-medium js-menu\"></ul>\\n</div>\\n<div class=\"Modal-inner Modal-inner--with-navigation js-content\">\\n</div>\\n\\n';\n\n}\nreturn __p\n}","var CDB = require('internal-carto.js');\nvar _ = require('underscore');\n\nfunction TableStats (opts) {\n  if (opts.user && opts.api_key) {\n    this.user = opts.username;\n    this.api_key = opts.api_key;\n  } else if (opts.configModel) {\n    this.configModel = opts.configModel;\n    this.userModel = opts.userModel;\n  }\n  this.tables = {};\n  this.queue = {};\n}\n\nTableStats.prototype = {\n\n  graphFor: function (tableName, column, callback) {\n    this._getPgStats(tableName, function (stats) {\n      var graph = new ColumnGraph(stats[column]);\n      callback(graph);\n    });\n  },\n\n  _getPgStats: function (table, callback) {\n    var userModel = this.userModel;\n    var self = this;\n    if (this.tables[table]) {\n      if (!_.isEmpty(this.tables[table])) {\n        callback(this.tables[table]);\n      } else {\n        this.queue[table].push(callback);\n      }\n    } else {\n      this.tables[table] = {};\n      this.queue[table] = [callback];\n\n      var schema = userModel.getSchemaName();\n      var sql = new CDB.SQL({\n        user: this.configModel.get('user_name'),\n        sql_api_template: this.configModel.get('sql_api_template'),\n        api_key: this.configModel.get('api_key')\n      });\n\n      sql.execute(\n        'with a as (select reltuples from pg_class where relname = \\'' + table + '\\'), b as (select * from pg_stats where tablename = \\'' + table + '\\' and schemaname = \\'' + schema + '\\') select * from a,b',\n        null,\n        {\n          rows_per_page: 40,\n          page: 0\n        }\n      ).done(function (data) {\n        data = data || {};\n        var rows = data.rows.map(function (r) {\n          var count = r.reltuples;\n          var bounds = self._reformatToJSON(r.histogram_bounds);\n          if (bounds) {\n            var avgs = bounds.reduce(function (p, c, i) {\n              if (i < bounds.length - 1) {\n                p.push((bounds[i + 1] + c) / 2);\n              }\n              return p;\n            }, []);\n            var binsize = count / (bounds.length - 1);\n            var sum = avgs.reduce(function (p, c) {\n              return p + c * binsize;\n            }, 0);\n            var average = sum / count;\n            var min = bounds[0];\n            var max = _.last(bounds);\n          }\n          var mostCommon = self._reformatToJSON(r.most_common_vals);\n          var trues;\n          if (mostCommon) {\n            var trueIndex = mostCommon.indexOf('t');\n            var falseIndex = mostCommon.indexOf('f');\n            if (trueIndex > -1 && falseIndex > -1) {\n              trues = r.most_common_freqs[trueIndex];\n            }\n          }\n          return {\n            column: r.attname,\n            histogram_bounds: bounds,\n            freqs: r.most_common_freqs,\n            mostcommon: mostCommon,\n            nulls: r.null_frac,\n            count: count,\n            sum: sum,\n            min: min,\n            max: max,\n            avg: average,\n            trues: trues\n          };\n        });\n\n        var stats = rows.reduce(function (p, c) {\n          var column = c.column;\n          delete c.column;\n          p[column] = c;\n          return p;\n        }, {});\n        self.tables[table] = stats;\n        self._processQueue(table);\n      });\n    }\n  },\n\n  _processQueue: function (table) {\n    var self = this;\n    this.queue[table].forEach(function (callback) {\n      callback(self.tables[table]);\n    });\n  },\n\n  _reformatToJSON: function (sqlData) {\n    if (!sqlData) return null;\n    sqlData = sqlData.replace('{', '').replace('}', '').split(',');\n    if (!sqlData.some(isNaN)) {\n      sqlData = sqlData.map(function (n) {\n        return parseInt(n, 10);\n      });\n    }\n    return sqlData;\n  }\n};\n\nfunction ColumnGraph (stats, options) {\n  options = options || {};\n  this.stats = stats;\n  this.normalize = typeof options.normalize === 'undefined' ? true : options.normalize;\n}\n\nColumnGraph.prototype = {\n  getNullsPercentage: function () {\n    return this.stats.nulls;\n  },\n\n  getPercentageInTopCategories: function (topx) {\n    return this.stats.freqs.slice(0, topx || 10).reduce(function (p, c) { return p + c; });\n  },\n\n  getTrues: function () {\n    return this.stats.trues;\n  },\n\n  getHistogram: function (options) {\n    return this._generateHistogram(options.width, options.height, options.color, options.bins);\n  },\n\n  getCategory: function (options) {\n    return this._generateCategory(options.width, options.height, options.color);\n  },\n\n  getMin: function () {\n    return this.stats.min;\n  },\n\n  getMax: function () {\n    return this.stats.max;\n  },\n\n  getAverage: function () {\n    return this.stats.avg;\n  },\n\n  getCount: function () {\n    return this.stats.count;\n  },\n\n  getSum: function () {\n    return this.stats.sum;\n  },\n\n  _generateCategory: function (width, height, color) {\n    if (!this.stats.freqs) return;\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d');\n    var proportion;\n    if (_.isNumber(this.getTrues())) {\n      proportion = this.getTrues();\n    } else {\n      proportion = this.getPercentageInTopCategories();\n    }\n    canvas.height = height || 10;\n    canvas.width = width || 400;\n    var spacing = 2;\n    var begin = spacing;\n    var end = canvas.width - spacing * 2;\n    var greenPosition = (end - begin) * proportion + begin;\n    context.lineCap = 'round';\n    context.strokeStyle = '#EDEDED';\n    context.lineWidth = 4;\n    context.beginPath();\n    context.moveTo(begin, canvas.height / 2);\n    context.lineTo(end, canvas.height / 2);\n    context.stroke();\n    context.strokeStyle = color;\n    context.beginPath();\n    context.moveTo(begin, canvas.height / 2);\n    context.lineTo(greenPosition, canvas.height / 2);\n    context.stroke();\n    return canvas;\n  },\n\n  _generateHistogram: function (width, height, color, bins) {\n    var histogram;\n\n    if (_.isEmpty(this.stats)) {\n      return;\n    }\n\n    if (this.stats.freqs && this.stats.freqs.length < 60) {\n      histogram = this._getHistogramFromFreqs(bins);\n    } else if (this.stats.histogram_bounds) {\n      histogram = this._getHistogramFromBounds(bins);\n    }\n\n    if (!histogram || _.isEmpty(histogram)) {\n      return;\n    }\n\n    if (this.normalize) {\n      var max = _.max(histogram);\n      histogram = histogram.map(function (bin) {\n        return bin / max;\n      });\n    }\n\n    bins = histogram.length;\n\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d');\n    canvas.height = height || 90;\n    canvas.width = width || 400;\n\n    var barSeparation = 2;\n    var barWidth = (canvas.width - barSeparation * (bins - 1)) / bins;\n    context.strokeStyle = '#EDEDED';\n    context.lineWidth = 1;\n\n    // Guides\n\n    context.beginPath();\n    context.moveTo(0, 0);\n    context.lineTo(canvas.width, 0);\n    context.stroke();\n    context.beginPath();\n    context.moveTo(0, canvas.height / 2);\n    context.lineTo(canvas.width, canvas.height / 2);\n    context.stroke();\n\n    // Bars\n\n    histogram.forEach(function (bar, index) {\n      var x = index * (barWidth + barSeparation);\n      var barHeight = canvas.height * bar;\n      context.beginPath();\n      context.fillStyle = color;\n      context.fillRect(x, canvas.height - barHeight, barWidth, barHeight);\n    });\n\n    // Base line\n\n    context.strokeStyle = '#A1BBA7';\n    context.lineWidth = 2;\n    context.beginPath();\n    context.moveTo(0, canvas.height);\n    context.lineTo(canvas.width, canvas.height);\n    context.stroke();\n\n    return canvas;\n  },\n\n  _getHistogramFromBounds: function (bins) {\n    var bounds = this.stats.histogram_bounds;\n    bounds = bounds.sort(function (a, b) { return a - b; });\n    var min = bounds[0];\n    var max = bounds[bounds.length - 1];\n    var width = (max - min) / bins;\n    var histogram = new Array(bins + 1).join('0').split('').map(parseFloat);\n    function scaleBin (value) {\n      if (max === min) return min;\n      return Math.floor((bins - 1) * (value - min) / (max - min));\n    }\n\n    var boundProportion = 1 / (bounds.length - 1);\n    for (var i = 0; i < bounds.length - 1; ++i) {\n      var binMin = scaleBin(bounds[i]);\n      var binMax = scaleBin(bounds[i + 1]);\n      if (binMin === binMax) {\n        histogram[binMin] += boundProportion;\n      } else {\n        var proportionForFirstBin = ((min + width * (binMin + 1)) - bounds[i]) / (bounds[i + 1] - bounds[i]);\n        histogram[binMin] += proportionForFirstBin * boundProportion;\n        var proportionForLastBin = (bounds[i + 1] - (min + width * (binMax))) / (bounds[i + 1] - bounds[i]);\n        histogram[binMax] += proportionForLastBin * boundProportion;\n        var remaining = boundProportion - proportionForFirstBin - proportionForLastBin;\n        _.range(binMin + 1, binMax).forEach(function (binIndex, i, array) {\n          histogram[binIndex] = remaining / array.length;\n        });\n      }\n    }\n\n    return histogram;\n  },\n\n  _getHistogramFromFreqs: function (bins) {\n    var values = this.stats.mostcommon;\n    var freqs = this.stats.freqs;\n    bins = Math.min(bins, values.length);\n    var min = _.min(values);\n    var max = _.max(values);\n\n    // If there is only one value, histogram should not be rendered\n    if (min === max) {\n      return [];\n    }\n\n    var histogram = new Array(bins + 1).join('0').split('').map(parseFloat);\n    function scale (value) {\n      if (max === min) return min;\n      return (bins - 1) * (value - min) / (max - min);\n    }\n    values.forEach(function (v, i) {\n      histogram[Math.floor(scale(v))] += freqs[i];\n    });\n    return histogram;\n  }\n\n};\n\nmodule.exports = TableStats;\n","var _ = require('underscore');\nvar WidgetOptionModel = require('builder/components/modals/add-widgets/widget-option-model');\n\n/**\n * Special case for the time-series type, when if selected it deletes an existing time-series if there is one,\n * otherwise it does nothing.\n */\nmodule.exports = WidgetOptionModel.extend({\n\n  defaults: _.defaults({type: 'time-series'}, WidgetOptionModel.defaults),\n\n  save: function (widgetDefinitionsCollection) {\n    var m = widgetDefinitionsCollection.find(this._isTimesSeries);\n    if (m) {\n      m.destroy({ wait: true });\n    }\n  },\n\n  _isTimesSeries: function (m) {\n    return m.get('type') === 'time-series';\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar template = require('./time-series-none-option.tpl');\n\n/**\n * Represents the (default) no-option view, i.e. since time-series options only can have one selection,\n * this serves as the \"unselect\" option.\n */\nmodule.exports = CoreView.extend({\n\n  events: {\n    'click': '_onSelect'\n  },\n\n  initialize: function (opts) {\n    this.listenTo(this.model, 'change:selected', this.render);\n  },\n\n  render: function () {\n    this.$el.html(this._html());\n    return this;\n  },\n\n  _html: function () {\n    var isSelected = !!this.model.get('selected');\n\n    this.$el.toggleClass('is-selected', isSelected);\n\n    return template({\n      isSelected: isSelected\n    });\n  },\n\n  _onSelect: function () {\n    this.model.set('selected', !this.model.get('selected'));\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"WidgetList-option\">\\n  <input class=\"CDB-Radio u-iBlock js-radio\" type=\"radio\" ';\n if (isSelected) { ;\n__p += 'checked=\"checked\"';\n } ;\n__p += ' />\\n  <span class=\"u-iBlock CDB-Radio-face\"></span>\\n</div>\\n\\n<div class=\"WidgetList-inner js-inner\">\\n  <h3 class=\"WidgetList-title CDB-Text CDB-Size-large u-bSpace--xl\">' +\n__e( _t('components.modals.add-widgets.time-series-no-option-title') ) +\n'</h3>\\n  <p class=\"CDB-Text CDB-Size-small u-altTextColor\">' +\n__e( _t('components.modals.add-widgets.time-series-no-option-desc') ) +\n'</p>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar WidgetOptionModel = require('builder/components/modals/add-widgets/widget-option-model');\nvar WidgetDefinitionModel = require('builder/data/widget-definition-model');\n\nvar TIME_SERIES_TYPE = 'time-series';\n\nmodule.exports = WidgetOptionModel.extend({\n  defaults: _.defaults({type: TIME_SERIES_TYPE}, WidgetOptionModel.defaults),\n\n  save: function (widgetDefinitionsCollection) {\n    var model = this;\n    var columnName = this.columnName();\n    var layerId = this.layerDefinitionModel().id;\n\n    var attrs = {\n      type: TIME_SERIES_TYPE,\n      layer_id: layerId,\n      source: {\n        id: this.analysisDefinitionNodeModel().id\n      },\n      options: {\n        column: columnName,\n        title: this.get('title')\n      },\n      style: {\n        widget_style: {\n          definition: WidgetDefinitionModel.getDefaultWidgetStyle(TIME_SERIES_TYPE)\n        }\n      }\n    };\n\n    var attrsSave = {\n      type: TIME_SERIES_TYPE,\n      layer_id: layerId,\n      source: this.analysisDefinitionNodeModel().id,\n      column: columnName,\n      title: this.get('title'),\n      widget_style_definition: WidgetDefinitionModel.getDefaultWidgetStyle(TIME_SERIES_TYPE)\n    };\n\n    // Depending on column type, widget should have bins or aggregation\n    if (this.get('aggregation')) {\n      attrs.options.aggregation = this.get('aggregation');\n      attrsSave.aggregation = this.get('aggregation');\n    } else if (this.get('bins')) {\n      attrs.options.bins = this.get('bins');\n      attrsSave.bins = this.get('bins');\n    }\n\n    var successReplaceHandler = function () {\n      widgetDefinitionsCollection.trigger('successReplace', model);\n    };\n\n    var errorHandler = function (model, e) {\n      widgetDefinitionsCollection.trigger('error', model, e);\n    };\n\n    var createUpdatingNotification = function () {\n      widgetDefinitionsCollection.trigger('updating', model);\n    };\n\n    var existingModel = widgetDefinitionsCollection.find(this._isTimesSeries);\n    if (existingModel) {\n      // Update existing widget, but only if the column or layer differs\n      if (existingModel.get('column') !== columnName || existingModel.get('layer_id') !== layerId) {\n        createUpdatingNotification();\n        return existingModel.save(attrsSave, {\n          wait: true,\n          success: successReplaceHandler,\n          error: errorHandler\n        });\n      }\n    } else {\n      return widgetDefinitionsCollection.addWidget(model, attrs);\n    }\n  },\n\n  _isTimesSeries: function (model) {\n    return model.get('type') === TIME_SERIES_TYPE;\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar LayerSelectorView = require('builder/components/modals/add-widgets/layer-selector-view');\nvar template = require('./time-series-option.tpl');\n\n/**\n * View for an individual time-series option.\n */\nmodule.exports = CoreView.extend({\n\n  events: {\n    'click': '_onSelect'\n  },\n\n  initialize: function (opts) {\n    this.listenTo(this.model, 'change:layer_index', this.render);\n    this.listenTo(this.model, 'change:selected', this.render);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(this._html());\n    this._renderLayerSelector();\n    return this;\n  },\n\n  _html: function () {\n    var isSelected = !!this.model.get('selected');\n\n    this.$el.toggleClass('is-selected', isSelected);\n\n    return template({\n      columnName: this.model.columnName(),\n      isSelected: isSelected\n    });\n  },\n\n  _renderLayerSelector: function () {\n    var view = new LayerSelectorView({\n      model: this.model\n    });\n    this.addView(view);\n    this.$('.js-inner').append(view.render().el);\n  },\n\n  _onSelect: function () {\n    this.model.set('selected', !this.model.get('selected'));\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"WidgetList-option\">\\n  <input class=\"CDB-Radio u-iBlock js-radio\" type=\"radio\" ';\n if (isSelected) { ;\n__p += 'checked=\"checked\"';\n } ;\n__p += ' />\\n  <span class=\"u-iBlock CDB-Radio-face\"></span>\\n</div>\\n\\n<div class=\"WidgetList-inner js-inner\">\\n  <h3 class=\"u-ellipsis CDB-Text CDB-Size-large u-bSpace--m\">' +\n__e( columnName ) +\n'</h3>\\n</div>\\n';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar TimeSeriesOptionView = require('./time-series-option-view.js');\nvar TimeSeriesNoneOptionView = require('./time-series-none-option-view.js');\n\n/**\n * View to select time-series widget options\n */\nmodule.exports = CoreView.extend({\n  module: 'components/modals/add-widgets/time-series/time-series-options-view',\n\n  className: 'WidgetList',\n\n  initialize: function () {\n    this.listenTo(this.collection, 'change:selected', this._onSelectedChange);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    this.collection\n      .chain()\n      .filter(this._isTimeSeries)\n      .each(this._renderOption, this);\n    return this;\n  },\n\n  _renderOption: function (m) {\n    var ViewClass = m.has('tuples')\n      ? TimeSeriesOptionView\n      : TimeSeriesNoneOptionView;\n\n    var view = new ViewClass({\n      className: 'WidgetList-item js-WidgetList-item',\n      model: m\n    });\n    this.addView(view);\n    this.$el.append(view.render().el);\n  },\n\n  _isTimeSeries: function (m) {\n    return m.get('type') === 'time-series';\n  },\n\n  _onSelectedChange: function (selectedModel, isSelected) {\n    // Make sure there can only be one selected time-series widget option\n    if (isSelected) {\n      this.collection.each(function (m) {\n        if (this._isTimeSeries(m) && m !== selectedModel) {\n          m.set('selected', false);\n        }\n      }, this);\n    }\n  }\n\n});\n","var Backbone = require('backbone');\n\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    layer_index: 0,\n    tuples: []\n  },\n\n  analysisDefinitionNodeModel: function () {\n    return this._selectedItem().analysisDefinitionNodeModel;\n  },\n\n  layerDefinitionModel: function () {\n    return this._selectedItem().layerDefinitionModel;\n  },\n\n  columnName: function () {\n    return this._selectedItem().columnModel.get('name');\n  },\n\n  save: function () {\n    throw new Error('save should be implemented by child');\n  },\n\n  _selectedItem: function () {\n    var i = this.get('layer_index') || 0;\n    var tuples = this.get('tuples') || [];\n    return tuples[i] || {};\n  }\n\n});\n","var _ = require('underscore');\nvar CategoryOptionModel = require('./category/category-option-model');\nvar CategoryOptionsView = require('./category/category-options-view');\nvar HistogramOptionModel = require('./histogram/histogram-option-model');\nvar HistogramOptionsView = require('./histogram/histogram-options-view');\nvar FormulaOptionModel = require('./formula/formula-option-model');\nvar FormulaOptionsView = require('./formula/formula-options-view');\nvar TimeSeriesOptionModel = require('./time-series/time-series-option-model');\nvar TimeSeriesNoneOptionModel = require('./time-series/time-series-none-option-model');\nvar TimeSeriesOptionsView = require('./time-series/time-series-options-view');\nvar ScrollView = require('builder/components/scroll/scroll-view');\n\nvar CARTODB_ID = 'cartodb_id';\n\n// Order is the same in how things will be presented in the UI\nmodule.exports = [\n  {\n    type: 'category',\n    createOptionModels: function (tuplesItems) {\n      return _.reduce(tuplesItems, function (memo, tuples) {\n        var columnModel = tuples[0].columnModel;\n        var type = columnModel.get('type');\n        var m;\n        if (type === 'string' || type === 'boolean') {\n          m = new CategoryOptionModel({\n            tuples: tuples,\n            title: columnModel.get('name'),\n            name: columnModel.get('name'),\n            aggregation: 'count' // or sum\n          });\n          memo.push(m);\n        }\n        return memo;\n      }, []);\n    },\n    createTabPaneItem: function (optionsCollection) {\n      return {\n        label: _t('components.modals.add-widgets.tab-pane.category-label'),\n        name: 'category',\n        createContentView: function () {\n          return new ScrollView({\n            createContentView: function () {\n              return new CategoryOptionsView({\n                collection: optionsCollection\n              });\n            }\n          });\n        }\n      };\n    }\n  },\n  {\n    type: 'histogram',\n    createOptionModels: function (tuplesItems) {\n      return _.reduce(tuplesItems, function (memo, tuples) {\n        var columnModel = tuples[0].columnModel;\n        if (columnModel.get('type') === 'number') {\n          var m = new HistogramOptionModel({\n            tuples: tuples,\n            title: columnModel.get('name'),\n            name: columnModel.get('name'),\n            bins: 10\n          });\n          memo.push(m);\n        }\n        return memo;\n      }, []);\n    },\n    createTabPaneItem: function (optionsCollection) {\n      return {\n        label: _t('components.modals.add-widgets.tab-pane.histogram-label'),\n        name: 'histogram',\n        createContentView: function () {\n          return new ScrollView({\n            createContentView: function () {\n              return new HistogramOptionsView({\n                collection: optionsCollection\n              });\n            }\n          });\n        }\n      };\n    }\n  },\n  {\n    type: 'formula',\n    createOptionModels: function (tuplesItems) {\n      return _.reduce(tuplesItems, function (memo, tuples) {\n        var columnModel = tuples[0].columnModel;\n        var columnName = columnModel.get('name');\n        var operation = 'avg';\n        var title = columnName;\n\n        if (columnModel.get('type') === 'number') {\n          if (columnName === CARTODB_ID) {\n            operation = 'count';\n            title = _t('editor.data.stats.feature-count');\n          }\n\n          var m = new FormulaOptionModel({\n            tuples: tuples,\n            title: title,\n            operation: operation,\n            name: columnModel.get('name')\n          });\n          memo.push(m);\n        }\n        return memo;\n      }, []);\n    },\n    createTabPaneItem: function (optionsCollection) {\n      return {\n        label: _t('components.modals.add-widgets.tab-pane.formula-label'),\n        name: 'formula',\n        createContentView: function () {\n          return new ScrollView({\n            createContentView: function () {\n              return new FormulaOptionsView({\n                collection: optionsCollection\n              });\n            }\n          });\n        }\n      };\n    }\n  },\n  {\n    type: 'time-series',\n    createOptionModels: function (tuplesItems, widgetDefinitionsCollection) {\n      var defaults = {\n        bins: 256\n      };\n      var existingDefModel = widgetDefinitionsCollection.find(function (m) {\n        return m.get('type') === 'time-series';\n      });\n\n      var models = _.reduce(tuplesItems, function (memo, tuples) {\n        var columnModel = tuples[0].columnModel;\n        var columnName = columnModel.get('name');\n        var columnType = columnModel.get('type');\n        if (columnType === 'date' || columnType === 'number') {\n          var attrs = {\n            tuples: tuples,\n            title: columnName\n          };\n          if (columnType === 'date') {\n            attrs.aggregation = defaults.aggregation;\n          } else if (columnType === 'number') {\n            attrs.bins = defaults.bins;\n          }\n\n          // Preselect the correct tuple, if there already exists a widget definition\n          if (existingDefModel && existingDefModel.get('column') === columnName) {\n            _.find(tuples, function (d, i) {\n              if (d.layerDefinitionModel.id === existingDefModel.get('layer_id')) {\n                attrs.selected = true;\n                attrs.layer_index = i;\n                return true;\n              }\n            });\n          }\n\n          var m = new TimeSeriesOptionModel(attrs);\n          memo.push(m);\n        }\n\n        return memo;\n      }, []);\n\n      // Special-case; preprend the none-model since it should appear first\n      var noneOptionModel = new TimeSeriesNoneOptionModel();\n      return [noneOptionModel].concat(models);\n    },\n    createTabPaneItem: function (optionsCollection) {\n      return {\n        label: _t('components.modals.add-widgets.tab-pane.time-series-label'),\n        name: 'time-series',\n        createContentView: function () {\n          return new ScrollView({\n            createContentView: function () {\n              return new TimeSeriesOptionsView({\n                collection: optionsCollection\n              });\n            }\n          });\n        }\n      };\n    }\n  }\n];\n","var CoreView = require('backbone/core-view');\nvar template = require('./editor-visualization-warning.tpl');\nvar VisDefinitionModel = require('builder/data/vis-definition-model');\nvar renderLoading = require('builder/components/loading/render-loading');\nvar ErrorView = require('builder/components/error/error-view');\nvar errorParser = require('builder/helpers/error-parser');\nvar VIS_VERSION = 3;\n\n/**\n *  Confirmation modal dialog\n */\n\nmodule.exports = CoreView.extend({\n  className: 'Dialog-content',\n\n  events: {\n    'click .js-open': '_onOpen',\n    'click .js-duplicate': '_onDuplicate',\n    'click .js-cancel': '_onCancel'\n  },\n\n  initialize: function (opts) {\n    if (!opts.visDefinitionModel) throw new Error('visDefinitionModel is required');\n    if (!opts.modalModel) throw new Error('modalModel is required');\n\n    this._visDefinitionModel = opts.visDefinitionModel;\n    this._modalModel = opts.modalModel;\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this.$el.html(template());\n    return this;\n  },\n\n  _initBinds: function () {\n    this._modalModel.bind('change:show', this._goToDashboard, this);\n    this.add_related_model(this._modalModel);\n  },\n\n  _disableBinds: function () {\n    this._modalModel.unbind('change:show', this._goToDashboard, this);\n  },\n\n  _onOpen: function () {\n    this._disableBinds();\n    this._renderLoading('open');\n\n    this._visDefinitionModel.save({\n      version: VIS_VERSION\n    }, {\n      wait: true,\n      success: function () {\n        this._modalModel.destroy();\n      }.bind(this),\n      error: function (mdl, e) {\n        this._renderError(errorParser(e));\n      }.bind(this)\n    });\n  },\n\n  _onDuplicate: function () {\n    this._renderLoading('duplicate');\n\n    var newVisModel = new VisDefinitionModel({\n      name: this._visDefinitionModel.get('name')\n    }, {\n      configModel: this._visDefinitionModel._configModel\n    });\n\n    newVisModel.save({\n      source_visualization_id: this._visDefinitionModel.get('id')\n    }, {\n      success: function (visModel) {\n        this._redirectToBuilder(visModel.builderURL());\n      }.bind(this),\n      error: function (mdl, e) {\n        this._renderError(errorParser(e));\n      }.bind(this)\n    });\n  },\n\n  _redirectToBuilder: function (redirect) {\n    window.location = redirect;\n  },\n\n  _renderLoading: function (renderOption) {\n    var mapName = this._visDefinitionModel.get('name');\n    var titleText = '';\n\n    if (renderOption === 'duplicate') {\n      titleText = _t('editor.maps.duplicate.loading', { name: mapName });\n    } else if (renderOption === 'open') {\n      titleText = _t('components.modals.editor-vis-warning.opening-title', { name: mapName });\n    }\n\n    this.$el.html(\n      renderLoading({\n        title: titleText\n      })\n    );\n  },\n\n  _renderError: function (errorMessage) {\n    var mapName = this._visDefinitionModel.get('name');\n    var errorView = new ErrorView({\n      title: _t('editor.maps.duplicate.error', { name: mapName }),\n      desc: errorMessage\n    });\n    this.$el.html(errorView.render().el);\n    this.addView(errorView);\n  },\n\n  _goToDashboard: function (redirect) {\n    window.location = redirect;\n  },\n\n  _onCancel: function () {\n    this._goToDashboard(this._visDefinitionModel._configModel.get('base_url'));\n  },\n\n  clean: function () {\n    this._disableBinds();\n    CoreView.prototype.clean.apply(this);\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"u-flex u-justifyCenter\">\\n  <div class=\"Modal-inner Modal-inner--medium u-flex u-justifyCenter\">\\n    <div class=\"Modal-icon\">\\n      <svg width=\"32px\" height=\"32px\" viewbox=\"459 348 24 24\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n        <g id=\"Editor-vis-warning\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(459.000000, 348.000000)\">\\n        \t<path d=\"M15.081,7.19c0.472,0.473,1.1,0.732,1.768,0.732c0.667,0,1.295-0.26,1.768-0.732s0.732-1.101,0.732-1.768\\n        \t\tc0-0.668-0.26-1.296-0.732-1.768c-0.945-0.946-2.592-0.944-3.536,0c-0.472,0.472-0.732,1.1-0.732,1.768S14.608,6.719,15.081,7.19z\\n        \t\t M15.788,4.362c0.283-0.283,0.66-0.439,1.061-0.439c0.4,0,0.777,0.156,1.061,0.439c0.284,0.283,0.439,0.659,0.439,1.061\\n        \t\tc0,0.4-0.156,0.777-0.439,1.061c-0.567,0.566-1.556,0.566-2.122,0c-0.283-0.283-0.439-0.659-0.439-1.061S15.504,4.646,15.788,4.362\\n        \t\tz\" fill=\"#FFA500\"/>\\n        \t<path d=\"M13.676,12.131c0.094-0.094,0.146-0.221,0.146-0.354s-0.053-0.26-0.146-0.354l-2.829-2.828\\n        \t\tc-0.195-0.195-0.512-0.195-0.707,0l-2.828,2.828c-0.195,0.195-0.195,0.512,0,0.707l2.828,2.828\\n        \t\tc0.098,0.098,0.226,0.146,0.354,0.146s0.256-0.049,0.354-0.146L13.676,12.131z M8.373,11.777l2.121-2.121l2.122,2.121l-2.122,2.121\\n        \t\tL8.373,11.777z\" fill=\"#FFA500\"/>\\n        \t<path d=\"M23.375,17.965c-0.182-0.205-0.499-0.227-0.706-0.044c-2.704,2.385-6.065,3.678-8.77,3.367\\n        \t\tc-1.699-0.194-3.106-0.991-4.199-2.354l0.989-0.989c0.087,0.331,0.252,0.646,0.511,0.904c0.39,0.39,0.902,0.584,1.414,0.584\\n        \t\tc0.512,0,1.024-0.194,1.415-0.584l2.122-2.122c0.081-0.08,0.139-0.175,0.213-0.26c0.05-0.023,0.099-0.052,0.14-0.093l4.596-4.597\\n        \t\tc0.755-0.755,1.171-1.76,1.171-2.828c0-0.983-0.367-1.904-1.012-2.635c0.059-0.29,0.089-0.588,0.089-0.892\\n        \t\tc0-1.202-0.468-2.332-1.318-3.183c-0.85-0.85-1.98-1.317-3.182-1.317c-0.304,0-0.602,0.03-0.893,0.089\\n        \t\tc-1.569-1.381-3.963-1.339-5.462,0.159L5.897,5.768C5.856,5.809,5.829,5.856,5.806,5.906C5.72,5.98,5.625,6.04,5.544,6.121\\n        \t\tL3.423,8.242c-0.78,0.779-0.78,2.049,0,2.828c0.255,0.255,0.576,0.416,0.915,0.499l-3.744,3.743\\n        \t\tc-0.377,0.378-0.585,0.88-0.585,1.414c0,0.535,0.208,1.037,0.585,1.414c0.756,0.756,2.073,0.756,2.829,0l3.182-3.182\\n        \t\tc0.196-0.195,0.513-0.194,0.708,0c0.195,0.195,0.195,0.513,0,0.708L4.13,18.849c-0.378,0.377-0.586,0.879-0.586,1.414\\n        \t\tS3.752,21.3,4.13,21.677c0.39,0.39,0.902,0.585,1.414,0.585s1.025-0.195,1.415-0.585l2.032-2.032\\n        \t\tc1.244,1.506,2.888,2.419,4.796,2.637c0.298,0.034,0.603,0.051,0.914,0.051c2.789,0,6.012-1.352,8.63-3.661\\n        \t\tC23.538,18.488,23.558,18.172,23.375,17.965z M21.272,8.949c0,0.802-0.312,1.555-0.878,2.121l-2.85,2.85\\n        \t\tc0.035-0.24,0.071-0.48,0.071-0.729c0-1.24-0.466-2.402-1.287-3.319c0.173,0.021,0.344,0.051,0.521,0.051\\n        \t\tc1.202,0,2.332-0.468,3.182-1.318c0.345-0.345,0.608-0.743,0.821-1.166C21.119,7.894,21.272,8.407,21.272,8.949z M19.323,2.947\\n        \t\tc0.661,0.661,1.025,1.54,1.025,2.476c0,0.935-0.364,1.813-1.025,2.475c-1.294,1.292-3.521,1.312-4.855,0.076l-0.176-0.176\\n        \t\tc-1.273-1.37-1.252-3.517,0.082-4.851c0.661-0.661,1.54-1.024,2.475-1.024C17.783,1.923,18.662,2.286,19.323,2.947z M11.201,1.878\\n        \t\tc0.984-0.982,2.482-1.128,3.631-0.458c-0.422,0.213-0.821,0.477-1.165,0.82c-1.01,1.011-1.419,2.385-1.266,3.704\\n        \t\tc-0.918-0.822-2.079-1.288-3.321-1.288c-0.248,0-0.488,0.036-0.728,0.071L11.201,1.878z M6.251,20.97\\n        \t\tc-0.391,0.391-1.025,0.39-1.415,0c-0.188-0.188-0.292-0.439-0.292-0.707s0.104-0.519,0.293-0.707l3.183-3.182\\n        \t\tc0.584-0.586,0.584-1.538,0-2.122c-0.585-0.586-1.537-0.586-2.122,0l-3.182,3.182c-0.378,0.378-1.037,0.376-1.415,0\\n        \t\tc-0.189-0.188-0.292-0.439-0.292-0.707c0-0.267,0.104-0.519,0.292-0.707l5.186-5.185l0.472-0.472l0,0L9.08,8.242\\n        \t\tc0.195-0.195,0.195-0.512,0-0.707s-0.512-0.195-0.707,0L5.78,10.128l-0.236,0.235c-0.378,0.379-1.036,0.377-1.414,0\\n        \t\tc-0.39-0.39-0.39-1.024,0-1.414l2.121-2.121c1.511-1.512,4.146-1.512,5.657,0l1.677,1.677c0.03,0.031,0.051,0.068,0.082,0.1\\n        \t\tc0.032,0.032,0.071,0.054,0.103,0.085l1.674,1.674c0.755,0.756,1.171,1.76,1.171,2.828s-0.416,2.073-1.171,2.828l-2.121,2.122\\n        \t\tc-0.39,0.389-1.024,0.389-1.415,0c-0.189-0.189-0.293-0.44-0.293-0.708c0-0.267,0.104-0.518,0.292-0.707l2.829-2.828\\n        \t\tc0.195-0.195,0.195-0.512,0-0.707s-0.512-0.195-0.707,0l-2.121,2.121l0,0l-0.707,0.707c0,0,0,0.001-0.001,0.001L6.251,20.97z\" fill=\"#FFA500\"/>\\n        </g>\\n      </svg>\\n    </div>\\n\\n    <div>\\n      <h2 class=\"Dialog-headerTitle--warning CDB-Text CDB-Size-huge is-light u-bSpace--m\">' +\n__e( _t('components.modals.editor-vis-warning.title') ) +\n'</h2>\\n      <p class=\"CDB-Text CDB-Size-medium u-secondaryTextColor u-bSpace--xl\">' +\n__e( _t('components.modals.editor-vis-warning.explanation') ) +\n'</p>\\n      <p class=\"CDB-Text CDB-Size-medium is-semibold u-secondaryTextColor\">' +\n__e( _t('components.modals.editor-vis-warning.question') ) +\n'</p>\\n\\n      <ul class=\"Modal-listActions u-flex u-alignCenter\">\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--secondary CDB-Button--big js-cancel\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-small u-upperCase\">\\n              ' +\n__e( _t('components.modals.editor-vis-warning.go-back') ) +\n'\\n            </span>\\n          </button>\\n        </li>\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-open\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-small u-upperCase\">\\n              ' +\n__e( _t('components.modals.editor-vis-warning.open') ) +\n'\\n            </span>\\n          </button>\\n        </li>\\n      </ul>\\n\\n      <p class=\"CDB-Text CDB-Size-medium u-secondaryTextColor u-tSpace-xl\">or <button class=\"CDB-Text is-semibold u-actionTextColor js-duplicate\">' +\n__e( _t('components.modals.editor-vis-warning.duplicate') ) +\n'</button>.</p>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<input class=\"CDB-Radio js-format\" type=\"radio\" name=\"format\" data-format=\"' +\n__e( format.format ) +\n'\"\\n  ';\n if (isDisabled) { ;\n__p += '\\n    disabled\\n  ';\n } ;\n__p += '\\n\\n  ';\n if (isChecked) { ;\n__p += '\\n    checked\\n  ';\n } ;\n__p += '\\n>\\n<span class=\"u-iBlock CDB-Radio-face\"></span>\\n<label class=\"u-iBlock u-lSpace u-upperCase\">' +\n__e( format.label || format.format ) +\n'</label>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"u-flex u-justifyCenter\">\\n  <div class=\"Modal-inner u-flex u-justifyCenter\">\\n    <div class=\"Modal-icon\">\\n      <svg width=\"24px\" height=\"24px\" viewbox=\"459 348 24 24\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n        <g id=\"Export-dataset\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(459.000000, 348.000000)\">\\n          <path d=\"M1,1 L11,1 L11,5.5 C11,5.776 11.224,6 11.5,6 L16,6 L16,9.5 L17,9.5 L17,5.502 C17,5.502 17,5.502 17,5.501 C17,5.5 17,5.501 17,5.5 C17,5.447 16.985,5.398 16.97,5.35 C16.966,5.337 16.967,5.323 16.962,5.311 C16.936,5.247 16.896,5.19 16.847,5.142 L11.854,0.147 C11.808,0.101 11.753,0.064 11.692,0.039 C11.632,0.014 11.567,0 11.5,0 L0.5,0 C0.224,0 0,0.224 0,0.5 L0,21.5 C0,21.776 0.224,22 0.5,22 L10.5,22 L10.5,21 L1,21 L1,1 L1,1 Z M12,1.708 L15.291,5 L12,5 L12,1.708 L12,1.708 Z\" id=\"Shape\" fill=\"#2E3C43\"/>\\n          <path d=\"M17.5,11 C13.916,11 11,13.916 11,17.5 C11,21.084 13.916,24 17.5,24 C21.084,24 24,21.084 24,17.5 C24,13.916 21.084,11 17.5,11 L17.5,11 Z M17.5,23 C14.467,23 12,20.533 12,17.5 C12,14.467 14.467,12 17.5,12 C20.533,12 23,14.467 23,17.5 C23,20.533 20.533,23 17.5,23 L17.5,23 Z\" id=\"Shape\" fill=\"#2E3C43\"/>\\n          <path d=\"M17.858,14.425 C17.767,14.331 17.641,14.272 17.5,14.272 C17.359,14.272 17.232,14.331 17.142,14.425 L14.965,16.602 C14.77,16.797 14.77,17.114 14.965,17.309 C15.16,17.504 15.477,17.504 15.672,17.309 L17,15.981 L17,20.226 C17,20.502 17.224,20.726 17.5,20.726 C17.776,20.726 18,20.502 18,20.226 L18,15.981 L19.328,17.309 C19.426,17.407 19.554,17.455 19.682,17.455 C19.81,17.455 19.938,17.406 20.036,17.309 C20.231,17.114 20.231,16.797 20.036,16.602 L17.858,14.425 L17.858,14.425 Z\" id=\"Shape\" fill=\"#2E3C43\" transform=\"translate(17.500500, 17.499000) scale(1, -1) translate(-17.500500, -17.499000) \"/>\\n        </g>\\n      </svg>\\n    </div>\\n\\n    <div>\\n      <h2 class=\"CDB-Text CDB-Size-huge is-light u-bSpace--xl\">' +\n__e( _t('components.modals.export-data.title') ) +\n'</h2>\\n      <p class=\"CDB-Text CDB-Size-large u-altTextColor\">' +\n__e( _t('components.modals.export-data.desc') ) +\n'.</p>\\n      ';\n if (!isGeoreferenced) { ;\n__p += '\\n        <p class=\"CDB-Text CDB-Size-large u-altTextColor u-tSpace-xl\">' +\n__e( _t('components.modals.export-data.no-geometry') ) +\n'</p>\\n      ';\n } ;\n__p += '\\n\\n      <div class=\"Modal-listTextItem u-flex u-alignCenter\">\\n        <h3 class=\"CDB-Text CDB-Size-medium is-semibold u-upperCase\">Select format</h3>\\n\\n        <form class=\"js-form\" method=\"POST\" action=\"' +\n__e( url ) +\n'\">\\n          <input type=\"hidden\" class=\"js-filename\" name=\"filename\" />\\n          <input type=\"hidden\" class=\"js-q\" name=\"q\" />\\n          <input type=\"hidden\" class=\"js-apiKey\" name=\"api_key\" />\\n          <input type=\"hidden\" class=\"js-skipfields\" name=\"skipfields\" disabled=\"disabled\" value=\"\" />\\n          <input type=\"hidden\" class=\"js-dp\" name=\"dp\" value=\"4\" disabled=\"disabled\" />\\n\\n          <ul class=\"Modal-listForm u-flex u-alignCenter CDB-Text CDB-Size-medium js-formats\"></ul>\\n        </form>\\n\\n      </div>\\n\\n      <ul class=\"Modal-listActions u-flex u-alignCenter\">\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--secondary CDB-Button--big js-cancel\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">' +\n__e( _t('components.modals.export-data.cancel') ) +\n'</span>\\n          </button>\\n        </li>\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-confirm\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">' +\n__e( _t('components.modals.export-data.download') ) +\n'</span>\\n          </button>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<li class=\"Modal-listActionsitem\">\\n  <button class=\"CDB-Button CDB-Button--secondary CDB-Button--big js-close\">\\n    <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n      ' +\n__e( _t('components.modals.maps-metadata.cancel-btn') ) +\n'\\n    </span>\\n  </button>\\n</li>\\n<li class=\"Modal-listActionsitem\">\\n  <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-save ' +\n__e( canFinish ? '' : 'is-disabled' ) +\n'\">\\n    <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase \">\\n      ' +\n__e( _t('components.modals.maps-metadata.save-btn') ) +\n'\\n    </span>\\n  </button>\\n</li>\\n\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"u-tSpace-xl CDB-Text u-flex js-name-field\">\\n  <label class=\"Metadata-label CDB-Text CDB-Size-medium is-semibold u-upperCase u-ellipsis\">' +\n__e( _t('components.modals.maps-metadata.form.name') ) +\n'</label>\\n</div>\\n\\n<div class=\"u-tSpace-xl CDB-Text u-flex\">\\n  <label class=\"Metadata-label CDB-Text CDB-Size-medium is-semibold u-upperCase u-ellipsis\">' +\n__e( _t('components.modals.maps-metadata.form.description') ) +\n'</label>\\n  <div class=\"u-grow\">\\n    <div class=\"js-description-field u-bSpace\"></div>\\n    <div class=\"Markdown\">\\n      <span class=\"Markdown-tooltip js-markdown\" data-tooltip=\"<em>_italics_</em><br/><b>*bold*</b><br/>[link](http://link.com)\">\\n        <span class=\"Markdown-icon\">\\n          <i class=\"Markdown-icon-text\">M</i>\\n          <i class=\"Markdown-icon-char\">￬</i>\\n        </span>\\n        ' +\n__e( _t('components.modals.maps-metadata.form.markdown') ) +\n'\\n      </span>\\n    </div>\\n  </div>\\n\\n</div>\\n\\n<div class=\"u-tSpace-xl CDB-Text u-flex u-alignCenter js-tags-field\">\\n  <label class=\"Metadata-label CDB-Text CDB-Size-medium is-semibold u-upperCase u-ellipsis\">' +\n__e( _t('components.modals.maps-metadata.form.tags') ) +\n'</label>\\n</div>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"IntermediateInfo\">\\n  <div class=\"Dialog-header Modal-header js-header\">\\n    <div class=\"Dialog-headerIcon Dialog-headerIcon--negative\">\\n      <i class=\"CDB-IconFont CDB-IconFont-cockroach\"></i>\\n    </div>\\n    <h2 class=\"CDB-Text CDB-Size-large u-bSpace u-errorTextColor\">' +\n__e( _t('components.modals.maps-metadata.error.title') ) +\n'</h2>\\n    <h3 class=\"CDB-Text CDB-Size-medium u-secondaryTextColor\">' +\n((__t = ( error )) == null ? '' : __t) +\n'</h3>\\n  </div>\\n\\n  <div class=\"Modal-body\">\\n    <div class=\"Modal-body-inner\">\\n\\n      <div class=\"js-footer\">\\n        <ul class=\"Modal-actions is-narrow\">\\n          <li class=\"Modal-actions-button\">\\n            <button class=\"CDB-Button CDB-Button--primary js-back\">\\n              <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">' +\n__e( _t('components.modals.maps-metadata.back-btn') ) +\n'</span>\\n            </button>\\n          </li>\\n        </ul>\\n      </div>\\n    </div>\\n  </div>\\n</div>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"u-flex u-justifyCenter\">\\n  <div class=\"Modal-inner Modal-inner--grid u-flex u-justifyCenter\">\\n    <div class=\"Modal-icon\">\\n      <svg width=\"25px\" height=\"25px\" viewBox=\"0 0 25 25\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n          <g id=\"Group\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\\n              <path d=\"M16,13 L17,13 L17,5.5 C17,5.433 16.986,5.368 16.961,5.308 C16.936,5.247 16.899,5.192 16.853,5.146 L11.854,0.147 C11.808,0.101 11.753,0.064 11.692,0.039 C11.632,0.014 11.567,0 11.5,0 L0.5,0 C0.224,0 0,0.224 0,0.5 L0,21.5 C0,21.776 0.224,22 0.5,22 L9.5,22 L9.5,21 L1,21 L1,1 L11,1 L11,5.5 C11,5.776 11.224,6 11.5,6 L16,6 L16,13 L16,13 Z M12,1.707 L15.293,5 L12,5 L12,1.707 L12,1.707 Z\" id=\"Shape\" fill=\"#2E3C43\"></path>\\n              <path d=\"M23.854,14.646 L21.354,12.146 C21.166,11.958 20.834,11.958 20.647,12.146 L13.146,19.648 C13.089,19.705 13.054,19.773 13.03,19.845 C13.028,19.852 13.021,19.857 13.019,19.865 L12.019,23.365 C11.969,23.539 12.018,23.727 12.146,23.856 C12.241,23.951 12.369,24.002 12.5,24.002 C12.546,24.002 12.592,23.996 12.637,23.983 L16.137,22.983 C16.144,22.981 16.149,22.974 16.157,22.972 C16.229,22.948 16.297,22.913 16.354,22.856 L23.855,15.354 C24.05,15.158 24.05,14.842 23.854,14.646 L23.854,14.646 Z M16,21.795 L14.207,20.002 L19.001,15.207 L20.794,17 L16,21.795 L16,21.795 Z M13.747,20.957 L15.045,22.255 L13.228,22.775 L13.747,20.957 L13.747,20.957 Z M21.501,16.293 L19.708,14.5 L21.001,13.207 L22.794,15 L21.501,16.293 L21.501,16.293 Z\" id=\"Shape\" fill=\"#2E3C43\"></path>\\n          </g>\\n      </svg>\\n    </div>\\n    <div>\\n      <h2 class=\"CDB-Text CDB-Size-huge is-light u-bSpace--xl\">\\n        ' +\n__e( _t('components.modals.maps-metadata.modal-title') ) +\n'\\n      </h2>\\n      <p class=\"CDB-Text CDB-Size-large u-altTextColor\">\\n        ' +\n__e( _t('components.modals.maps-metadata.modal-desc') ) +\n'\\n      </p>\\n      <div class=\"Modal-listTextItem js-content\"></div>\\n      <div class=\"js-footer\"></div>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n\n if (!escapeOptionsDisabled) { ;\n__p += '\\n  ';\n if (breadcrumbsEnabled) { ;\n__p += '\\n    <div class=\"Dialog-headerWrapper\">\\n      <ul class=\"Editor-breadcrumb\">\\n        <li class=\"Editor-breadcrumbItem CDB-Text CDB-Size-medium u-actionTextColor\">\\n          <button class=\"js-close\">\\n            <i class=\"CDB-IconFont CDB-IconFont-arrowPrev Size-large u-rSpace\"></i>\\n\\n            <span class=\"Editor-breadcrumbLink\">' +\n__e( _t('back') ) +\n'</span>\\n          </button>\\n        </li>\\n      </ul>\\n    </div>\\n  ';\n } else { ;\n__p += '\\n    <button class=\"CDB-Shape js-close Dialog-closeBtn\">\\n      <div class=\"CDB-Shape-close is-blue is-huge\"></div>\\n    </button>\\n  ';\n } ;\n__p += '\\n';\n } ;\n__p += '\\n\\n<div class=\"Dialog-contentWrapper Dialog-contentWrapper--withHeaderWrapper ';\n if (breadcrumbsEnabled) { ;\n__p += 'Dialog-contentWrapper--withBreadcrumbs';\n } ;\n__p += ' js-content\"></div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"u-flex u-justifyCenter\">\\n  <div class=\"Modal-inner Modal-inner--grid u-flex u-justifyCenter\">\\n    <div class=\"Modal-icon\">\\n      <div class=\"Modal-icon--svg js-icon-warning\"></div>\\n    </div>\\n    <div>\\n      <h2 class=\"CDB-Text CDB-Size-huge is-light u-bSpace--xl\">\\n        ' +\n__e( _t('components.modals.privacy-warning.title.' + type + '.' + selectedPrivacyType) ) +\n'\\n      </h2>\\n      <p class=\"CDB-Text CDB-Size-large u-altTextColor\">\\n          ' +\n__e( _t('components.modals.privacy-warning.description.' + selectedPrivacyType) ) +\n'\\n      </p>\\n      <ul class=\"Modal-listActions u-flex u-alignCenter\">\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--secondary CDB-Button--big js-cancel\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n                ' +\n__e( _t('components.modals.privacy-warning.cancel') ) +\n'\\n            </span>\\n          </button>\\n        </li>\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-confirm\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n                ' +\n__e( _t('components.modals.privacy-warning.confirm') ) +\n'\\n            </span>\\n          </button>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<button class=\"Publish-modalButton CDB-Button CDB-Button--loading CDB-Button--primary CDB-Button--small u-rSpace js-button\\n  ';\n if (isDisabled) {;\n__p += ' is-disabled';\n } ;\n__p += '\\n  ';\n if (isLoading) {;\n__p += ' is-loading';\n } ;\n__p += '\\n\">\\n  <div class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-small u-upperCase\">\\n    ';\n if (isPublished) { ;\n__p += '\\n    ' +\n__e( _t('components.modals.publish.update-btn') ) +\n'\\n    ';\n } else { ;\n__p += '\\n    ' +\n__e( _t('components.modals.publish.publish-btn') ) +\n'\\n    ';\n } ;\n__p += '\\n  </div>\\n  <div class=\"CDB-Button-loader CDB-LoaderIcon CDB-LoaderIcon--small is-white\">\\n    <svg class=\"CDB-LoaderIcon-spinner\" viewbox=\"0 0 50 50\">\\n      <circle class=\"CDB-LoaderIcon-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"/>\\n    </svg>\\n  </div>\\n</button> ' +\n__e( publishedOn ) +\n'\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"Publish-modalHeader\">\\n  <div class=\"u-inner\">\\n    <div class=\"CDB-Text CDB-Size-huge is-light u-ellipsis u-bSpace--m\">' +\n__e( name ) +\n'</div>\\n    <ul class=\"u-flex u-alignCenter\">\\n      <li class=\"js-dropdown u-rSpace--xl\"></li>\\n      ';\n if (hasShareStats) { ;\n__p += '\\n      <li class=\"js-share-users\">\\n      </li>\\n      ';\n } ;\n__p += '\\n      <li class=\"CDB-Text CDB-Size-medium u-altTextColor js-update\">\\n      </li>\\n    </ul>\\n  </div>\\n</div>\\n\\n<div class=\"Publish-modalBody js-panes\\n';\n if (isSimple) { ;\n__p += 'is-simple';\n } ;\n__p += '\\n\">\\n  ';\n if (isSimple) { ;\n__p += '\\n    <div class=\"Publish-modalShadow\"></div>\\n  ';\n } ;\n__p += '\\n\\n</div>\\n\\n<div class=\"Dialog-footer Dialog-footer--expanded CreateDialog-footer Publish-modalFooter\">\\n  <div>\\n    <div class=\"CreateDialog-footerShadow\"></div>\\n    <div class=\"CreateDialog-footerLine\"></div>\\n    <div class=\"CreateDialog-footerInner \">\\n      <div class=\"CreateDialog-footerInfo\"></div>\\n      <div class=\"CreateDialog-footerActions js-footerActions u-flex u-justifySpace u-grow\">\\n        <div class=\"js-upgrade\"></div>\\n        <button class=\"CDB-Button CDB-Button--secondary js-done\">\\n          <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">' +\n__e( _t('components.modals.publish.done-btn') ) +\n'</span>\\n        </button>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '\\n<svg width=\"25px\" height=\"25px\" viewBox=\"682 469 25 25\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n    <path d=\"M697.141667,478.48556 C695.774797,477.117815 695.774797,474.90231 697.141553,473.535553 L697.495051,473.182056 L697.141609,472.828502 L693.960609,469.646502 L693.607124,469.292907 L693.253515,469.646378 L690.685515,472.213378 L691.039,472.567 L691.469343,472.312431 C691.271611,471.978171 691.043454,471.678347 690.778553,471.413447 C689.020272,469.655166 686.171603,469.655166 684.414333,471.41356 C682.657184,473.170709 682.657184,476.020291 684.414447,477.777553 C684.682252,478.044267 684.982655,478.273359 685.314094,478.468734 L685.568,478.038 L685.214447,477.684447 L682.646447,480.252447 L682.292893,480.606 L682.646447,480.959553 L685.828447,484.141553 L686.181887,484.494994 L686.53544,484.141667 C687.903185,482.774797 690.11869,482.774797 691.485447,484.141553 C692.852184,485.508291 692.852184,487.724709 691.485447,489.091447 L691.131893,489.445 L691.485447,489.798553 L694.667447,492.980553 L695.021,493.334107 L695.374553,492.980553 L697.941553,490.413553 L697.588,490.06 L697.157928,490.315025 C697.3561,490.649221 697.584149,490.948256 697.849447,491.213553 C699.60664,492.971872 702.456485,492.971872 704.21278,491.213327 C705.970872,489.45636 705.970872,486.606515 704.212327,484.85022 C703.948015,484.584823 703.647051,484.355236 703.312906,484.158266 L703.059,484.589 L703.412553,484.942553 L705.979553,482.375553 L706.333107,482.022 L705.979553,481.668447 L702.797553,478.486447 L702.444,478.132893 L702.090447,478.486447 C700.725536,479.851357 698.508943,479.851087 697.141327,478.48522 L697.141667,478.48556 Z M696.434673,479.19278 C698.192747,480.948604 701.042155,480.948952 702.797553,479.193553 L702.090447,479.193553 L705.272447,482.375553 L705.272447,481.668447 L702.705447,484.235447 L702.248976,484.691917 L702.805094,485.019734 C703.068228,485.174844 703.301587,485.35286 703.504724,485.55683 C704.873128,486.923485 704.873128,489.13964 703.50556,490.506333 C702.139515,491.874128 699.92336,491.874128 698.556667,490.50656 C698.35252,490.302414 698.175052,490.069704 698.018072,489.804975 L697.689693,489.2512 L697.234447,489.706447 L694.667447,492.273447 L695.374553,492.273447 L692.192553,489.091447 L692.192553,489.798553 C693.949816,488.041291 693.949816,485.191709 692.192553,483.434447 C690.43531,481.677203 687.586815,481.677203 685.82856,483.434333 L686.535553,483.434447 L683.353553,480.252447 L683.353553,480.959553 L685.921553,478.391553 L686.378024,477.935083 L685.821906,477.607266 C685.560783,477.453341 685.327004,477.275057 685.12083,477.069724 C683.754816,475.703709 683.754816,473.487291 685.121553,472.120553 C686.488397,470.752834 688.703728,470.752834 690.071447,472.120553 C690.274695,472.323801 690.452152,472.557 690.608657,472.821569 L690.936742,473.376188 L691.392485,472.920622 L693.960485,470.353622 L693.253391,470.353498 L696.434391,473.535498 L696.434447,472.828447 C694.677203,474.58569 694.677203,477.434185 696.434333,479.19244 L696.434673,479.19278 Z\" id=\"Embed-it\" stroke=\"none\" fill=\"#AAAAAA\" fill-rule=\"evenodd\"></path>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '  <svg width=\"23px\" height=\"23px\" viewBox=\"683 470 23 23\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n      <path d=\"M696.399947,482.106803 L696.485947,482.192803 C697.462209,483.169066 699.044791,483.169066 700.021053,482.192803 L703.986009,478.228848 C705.34724,476.86645 705.34724,474.642218 703.986356,473.279 L702.227953,471.521596 C700.866908,470.159384 698.640092,470.159384 697.278795,471.521848 L693.313991,475.485652 C692.337722,476.461921 692.337722,478.044329 693.31372,479.021577 L693.40202,479.108865 L694.10498,478.397635 L694.01898,478.312635 C693.435278,477.728171 693.435278,476.778579 694.021053,476.192803 L697.986009,472.228848 C698.956908,471.257116 700.550092,471.257116 701.520795,472.228652 L703.279047,473.985904 C704.24976,474.958282 704.24976,476.55005 703.278795,477.521848 L699.313991,481.485652 C698.728209,482.071434 697.778791,482.071434 697.193053,481.485697 L697.107053,481.399697 L696.399947,482.106803 L696.399947,482.106803 Z M692.10498,480.397635 L692.01898,480.312635 C691.044791,479.338434 689.462209,479.338434 688.485947,480.314697 L684.520991,484.278652 C683.159735,485.641076 683.159735,487.866424 684.520795,489.228652 L686.279047,490.985904 C687.640092,492.348116 689.866908,492.348116 691.228205,490.985652 L695.193009,487.021848 C696.169278,486.045579 696.169278,484.463171 695.19328,483.485923 L695.107053,483.399697 L694.399947,484.106803 L694.485947,484.192803 C695.071722,484.779329 695.071722,485.728921 694.485947,486.314697 L690.520991,490.278652 C689.550092,491.250384 687.956908,491.250384 686.986205,490.278848 L685.227953,488.521596 C684.257265,487.550076 684.257265,485.957424 685.228205,484.985652 L689.193009,481.021848 C689.778791,480.436066 690.728209,480.436066 691.313947,481.021803 L691.40202,481.108865 L692.10498,480.397635 L692.10498,480.397635 Z M690.718053,485.495803 L698.496053,477.717803 L697.788947,477.010697 L690.010947,484.788697 L690.718053,485.495803 L690.718053,485.495803 Z\" id=\"Get-link\" stroke=\"none\" fill=\"#AAAAAA\" fill-rule=\"evenodd\"></path>\\n  </svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<ul class=\"Publish-optionsList u-flex u-justifySpace js-list\"></ul>\\n';\n if (!isPublished) { ;\n__p += '\\n<div class=\"Share-info\">\\n  <div>\\n    <h2 class=\"CDB-Text CDB-Size-large u-secondaryTextColor u-bSpace is-light\">' +\n__e( _t('components.modals.publish.share.unpublished-header') ) +\n'</h2>\\n    <p class=\"CDB-Text CDB-Size-medium is-light\">' +\n__e( _t('components.modals.publish.share.unpublished-subheader') ) +\n'</p>\\n  </div>\\n</div>\\n';\n } ;\n__p += '\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"Card-icon u-bSpace--xl js-icon\"></div>\\n\\n<div class=\"Card-body u-bSpace--xl\">\\n  ';\n if (isPrivate) { ;\n__p += '\\n    <h3 class=\"CDB-Text CDB-Size-large u-altTextColor u-bSpace--m\">' +\n__e( title ) +\n'</h3>\\n  ';\n } else { ;\n__p += '\\n    <h3 class=\"CDB-Text CDB-Size-large u-mainTextColor u-bSpace--m\">' +\n__e( title ) +\n'</h3>\\n  ';\n } ;\n__p += '\\n  <div class=\"CDB-Text CDB-Size-medium u-altTextColor\">\\n    ' +\n((__t = ( body )) == null ? '' : __t) +\n'\\n    <br/>\\n    ';\n if (url && !isPrivate) { ;\n__p += '\\n    <a href=\"' +\n__e( url ) +\n'\" class=\"Share-link js-link\">' +\n__e( link ) +\n'</a>\\n    ';\n } ;\n__p += '\\n  </div>\\n</div>\\n\\n';\n if (!isPrivate && isPublished) { ;\n__p += '\\n  <div class=\"Share-input\">\\n    <input type=\"text\" id=\"' +\n__e( id ) +\n'\" value=\"' +\n__e( content ) +\n'\" class=\"Share-input-field CDB-InputText is-disabled CDB-Text CDB-Size-medium u-ellipsis js-input\" readonly>\\n    <button class=\"Share-copy CDB-Button CDB-Button--small js-copy\" data-clipboard-target=\"#' +\n__e( id ) +\n'\">\\n      <span class=\"CDB-Button-Text CDB-Text CDB-Size-small u-actionTextColor\">' +\n__e( copy ) +\n'</span>\\n    </button>\\n  </div>\\n';\n } ;\n__p += '\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n\n if (people > 0) { ;\n__p += '\\n  <div class=\"Share-user ' +\n__e( avatarClass ) +\n' u-rSpace u-iBlock\" style=\"background-image: url(' +\n__e( avatar ) +\n')\"></div>\\n  <span class=\"Share-user-text u-secondaryTextColor CDB-Text CDB-Size-small ' +\n__e( separationClass ) +\n'\">+ ' +\n__e( people ) +\n'</span>\\n';\n } else { ;\n__p += '\\n  ';\n if (hasAction) { ;\n__p += '\\n    <button class=\"CDB-Text CDB-Size-small u-upperCase u-actionTextColor ' +\n__e( separationClass ) +\n'\">' +\n__e( _t('components.modals.publish.share.add-people') ) +\n'</button>\\n  ';\n } ;\n__p += '\\n';\n } ;\n__p += '\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"Share-permissionInfo\">\\n  <div class=\"Share-permissionIcon\">\\n    ';\n if (avatar) { ;\n__p += '\\n      <div class=\"Share-user Share-user--huge\" style=\"background-image: url(' +\n__e( avatar ) +\n')\"></div>\\n    ';\n } else { ;\n__p += '\\n        <i class=\"CDB-IconFont CDB-IconFont-people\"></i>\\n    ';\n } ;\n__p += '\\n  </div>\\n  <div>\\n    <div class=\"CDB-Text u-mainTextColor CDB-Size-medium is-semibold u-ellipsis\">\\n      ' +\n__e( name ) +\n'\\n    </div>\\n\\n\\n    <div class=\"CDB-Text u-mainTextColor u-tSpace CDB-Size-medium u-ellipsis\">\\n      ';\n if (role) { ;\n__p += '\\n        <i class=\"Tag Tag--outline Tag--' +\n__e( role ) +\n' CDB-Text CDB-Size-small u-upperCase\">' +\n__e( role ) +\n'</i>\\n      ';\n } ;\n__p += '\\n\\n      ';\n if (users) { ;\n__p += '\\n        <div class=\"js-users\"></div>\\n      ';\n } ;\n__p += '\\n    </div>\\n\\n\\n    ';\n if (description) { ;\n__p += '\\n    <div class=\"CDB-Text u-mainTextColor u-tSpace CDB-Size-medium u-ellipsis\">\\n      ' +\n__e( description ) +\n'\\n    </div>\\n    ';\n } ;\n__p += '\\n  </div>\\n</div>\\n<div class=\"Share-togglers\">\\n  ';\n if (hasWriteAccessAvailable) { ;\n__p += '\\n    <div class=\"CDB-Text CDB-Size-medium u-rSpace--xl Share-toggler js-toggler ';\n if (!canChangeWriteAccess) { ;\n__p += 'is-disabled';\n } ;\n__p += '\">\\n      <input class=\"CDB-Toggle u-iBlock js-write\" type=\"checkbox\"\\n        ';\n if (!canChangeWriteAccess) { ;\n__p += 'disabled=\"disabled\"';\n } ;\n__p += '\\n        ';\n if (hasWriteAccess) { ;\n__p += ' checked ';\n } ;\n__p += '\\n      />\\n      <span class=\"u-iBlock CDB-ToggleFace\"></span>\\n      <label class=\"u-iBlock u-altTextColor \">' +\n__e( _t('components.modals.publish.share.toggle.write') ) +\n'</label>\\n    </div>\\n  ';\n } ;\n__p += '\\n  <div class=\"CDB-Text CDB-Size-medium Share-toggler js-toggler ';\n if (!canChangeReadAccess) { ;\n__p += 'is-disabled';\n } ;\n__p += '\">\\n    <input class=\"CDB-Toggle u-iBlock js-read\" type=\"checkbox\"\\n      ';\n if (hasReadAccess) { ;\n__p += ' checked ';\n } ;\n__p += '\\n      ';\n if (!canChangeReadAccess) { ;\n__p += 'disabled=\"disabled\"';\n } ;\n__p += '\\n    />\\n    <span class=\"u-iBlock CDB-ToggleFace\"></span>\\n    <label class=\"u-iBlock u-altTextColor \">' +\n__e( _t('components.modals.publish.share.toggle.read') ) +\n'</label>\\n  </div>\\n</div>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"js-body\">\\n\\n</div>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"Share-user u-rSpace js-avatar\" style=\"background-image: url(' +\n__e( avatar ) +\n')\" data-title=\"' +\n__e( username ) +\n'\"></div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"u-flex js-content\"></div>\\n';\n if (people > 0) { ;\n__p += '\\n  <div class=\"u-secondaryTextColor CDB-Text CDB-Size-small u-lSpace\">+ ' +\n__e( people ) +\n'</div>\\n';\n } ;\n\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"Publish-modalMenu u-tSpace-xl\">\\n  <nav class=\"CDB-NavMenu u-inner\">\\n    <ul class=\"CDB-Size-medium CDB-Text is-semibold js-menu\"></ul>\\n  </nav>\\n</div>\\n\\n<div class=\"Tab-paneContent Publish-modalContent js-content\"></div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"u-flex u-alignCenter\">\\n  <div class=\"Upgrade-icon u-rSpace--xl\">\\n    <svg width=\"16px\" height=\"16px\" viewBox=\"578 456 16 16\">\\n      <g id=\"present\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(578.000000, 456.000000)\">\\n        <path d=\"M10.0946667,4.4109223 C10.8886667,4.1368747 11.6846667,3.80147316 12.0073333,3.4715253 C12.7866667,2.67392407 12.7866667,1.37662907 12.0073333,0.579027844 C11.2513333,-0.193350099 9.934,-0.192668389 9.17866667,0.579027844 C8.74133333,1.0262299 8.29266667,2.36033726 8,3.37608583 C7.70666667,2.36033726 7.25866667,1.0262299 6.82133333,0.579027844 C6.066,-0.193350099 4.748,-0.192668389 3.99266667,0.579027844 C3.21266667,1.37662907 3.21266667,2.67392407 3.99266667,3.4715253 C4.316,3.80147316 5.11133333,4.1368747 5.90533333,4.4109223 L0.333333333,4.4109223 C0.149333333,4.4109223 0,4.56362544 0,4.75177753 L0,7.47861934 C0,7.66677142 0.149333333,7.81947456 0.333333333,7.81947456 L0.666666667,7.81947456 L0.666666667,15.6591448 C0.666666667,15.8472969 0.816,16 1,16 L15,16 C15.184,16 15.3333333,15.8472969 15.3333333,15.6591448 L15.3333333,7.81947456 L15.6666667,7.81947456 C15.8506667,7.81947456 16,7.66677142 16,7.47861934 L16,4.75177753 C16,4.56362544 15.8506667,4.4109223 15.6666667,4.4109223 L10.0946667,4.4109223 Z M6,6.95652174 L6,4.86956522 L10,4.86956522 L10,6.95652174 L6,6.95652174 L6,6.95652174 Z M10,7.65217391 L10,15.3043478 L6,15.3043478 L6,7.65217391 L10,7.65217391 L10,7.65217391 Z M9.80833133,1.08822938 C10.0510474,0.834996985 10.3727426,0.695652174 10.7169115,0.695652174 C11.0597961,0.695652174 11.3821334,0.834996985 11.6248495,1.08755946 C12.1250502,1.6101025 12.1250502,2.46023983 11.6248495,2.98278288 C11.2729754,3.34990286 9.79227867,3.85636766 8.66666667,4.17391304 C8.97102496,2.99953105 9.45581507,1.45534937 9.80833133,1.08822938 L9.80833133,1.08822938 Z M4.37515049,1.08822938 C4.6178666,0.834996985 4.94020387,0.695652174 5.28373064,0.695652174 C5.6266153,0.695652174 5.94895256,0.834996985 6.19166867,1.08755946 C6.54354282,1.45467944 7.02833293,2.99886112 7.33333333,4.17391304 C6.20707922,3.85569773 4.72638253,3.34990286 4.37515049,2.98278288 C3.87494984,2.46090976 3.87494984,1.61077243 4.37515049,1.08822938 L4.37515049,1.08822938 Z M0.666666667,4.86956522 L5.33333333,4.86956522 L5.33333333,6.95652174 L1,6.95652174 L0.666666667,6.95652174 L0.666666667,4.86956522 L0.666666667,4.86956522 Z M1.33333333,7.65217391 L5.33333333,7.65217391 L5.33333333,15.3043478 L1.33333333,15.3043478 L1.33333333,7.65217391 L1.33333333,7.65217391 Z M14.6666667,15.3043478 L10.6666667,15.3043478 L10.6666667,7.65217391 L14.6666667,7.65217391 L14.6666667,15.3043478 L14.6666667,15.3043478 Z M15.3333333,6.95652174 L15,6.95652174 L10.6666667,6.95652174 L10.6666667,4.86956522 L15.3333333,4.86956522 L15.3333333,6.95652174 L15.3333333,6.95652174 Z\" id=\"Shape\" fill=\"#9BC63B\"></path>\\n      </g>\\n    </svg>\\n  </div>\\n  <div class=\"Upgrade-body\">\\n    <h2 class=\"CDB-Text CDB-Size-large\">' +\n__e( title ) +\n'</h2>\\n    <p class=\"CDB-Text CDB-Size-medium u-altTextColor \">' +\n((__t = ( desc )) == null ? '' : __t) +\n'</p>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar ConfirmationView = require('builder/components/modals/confirmation/modal-confirmation-view');\nvar ExportView = require('builder/editor/components/modals/export-map/modal-export-map-view.js');\nvar ExportMapModel = require('builder/data/export-map-definition-model.js');\nvar templateConfirmation = require('builder/editor/layers/delete-layer-confirmation.tpl');\nvar removeLayer = require('builder/editor/layers/operations/remove-layer');\n\nvar REQUIRED_OPTS = [\n  'modalModel',\n  'layerModel',\n  'modals',\n  'widgetDefinitionsCollection',\n  'visDefinitionModel',\n  'userActions'\n];\n/**\n *  Remove layer modal dialog\n */\n\nmodule.exports = ConfirmationView.extend({\n  className: 'Dialog-content',\n\n  events: function () {\n    return _.extend({}, ConfirmationView.prototype.events, {\n      'click [data-event=exportMapAction]': '_exportMap'\n    });\n  },\n\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (!opts[item]) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n\n    if (opts.loadingTitle) {\n      this._hasLoading = true;\n      this._loadingTitle = opts.loadingTitle;\n    }\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this.$el.html(\n      templateConfirmation({\n        layerName: this._layerModel.getName(),\n        layerVisName: this._visDefinitionModel.get('name'),\n        affectedItemsMessages: this._getAffectedItemsMessages()\n      })\n    );\n    return this;\n  },\n\n  _getAffectedItemsByLayer: function () {\n    var layerModel = this._layerModel;\n    var widgetDefinitionsCollection = this._widgetDefinitionsCollection;\n\n    return [\n      { widgets: widgetDefinitionsCollection.widgetsOwnedByLayer(layerModel.get('id')) },\n      { analyses: layerModel.getNumberOfAnalyses() },\n      { layers: layerModel.getAllDependentLayers() }\n    ];\n  },\n\n  _getAffectedItemsMessages: function () {\n    var affectedItems = this._getAffectedItemsByLayer();\n    var affectedTemplateMessages = [];\n\n    for (var i = 0; i < affectedItems.length; i++) {\n      for (var key in affectedItems[i]) {\n        if (affectedItems[i][key] > 0) {\n          var text = _t('editor.layers.delete.' + key, { smart_count: affectedItems[i][key] });\n          affectedTemplateMessages.push(text);\n        }\n      }\n    }\n    return affectedTemplateMessages;\n  },\n\n  _exportMap: function () {\n    var self = this;\n\n    this._modals.create(function () {\n      var exportMapModel = new ExportMapModel({\n        visualization_id: self._visDefinitionModel.get('id')\n      }, {\n        configModel: this.configModel\n      });\n\n      return new ExportView({\n        modalModel: self._modalModel,\n        exportMapModel: exportMapModel,\n        renderOpts: {\n          name: self._visDefinitionModel.get('name')\n        }\n      });\n    });\n  },\n\n  _runAction: function () {\n    removeLayer({\n      userActions: this._userActions,\n      layerDefinitionModel: this._layerModel\n    });\n\n    this._modalModel.destroy();\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"u-flex u-justifyCenter\">\\n  <div class=\"Modal-inner Modal-inner--full u-flex u-justifyCenter\">\\n    <div class=\"Modal-icon\">\\n      <svg width=\"24px\" height=\"20px\" viewBox=\"0 8 24 20\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n          <g id=\"Icon\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(0.000000, 8.000000)\">\\n              <path d=\"M19.591513,9.26858726 C19.7142261,9.39218837 19.8745043,9.45462604 20.0347826,9.45462604 C20.1950609,9.45462604 20.3553391,9.39218837 20.4780522,9.26858726 C20.7222261,9.0201108 20.7222261,8.61617729 20.4780522,8.36770083 C20.1988174,8.08354571 19.908313,7.81468144 19.6065391,7.56365651 C19.5652174,7.52925208 19.5201391,7.4999446 19.4775652,7.46554017 C17.3914435,5.76952909 14.824487,4.84060942 12.1147826,4.84060942 L12.1122783,4.84060942 L12.1097739,4.84060942 C8.95053913,4.84060942 5.98038261,6.0931856 3.74775652,8.36770083 C3.50358261,8.61617729 3.50358261,9.0201108 3.74775652,9.26858726 C3.87046957,9.3934626 4.03074783,9.45462604 4.19102609,9.45462604 C4.35130435,9.45462604 4.51158261,9.39218837 4.63304348,9.26858726 C6.63151304,7.23490305 9.28737391,6.11484765 12.1122783,6.11484765 C14.9371826,6.11484765 17.5930435,7.23490305 19.591513,9.26858726 L19.591513,9.26858726 Z\" id=\"Shape\" fill=\"#2E3C43\"></path>\\n              <path d=\"M22.7607652,5.95695291 C22.8834783,6.08182825 23.0437565,6.14299169 23.2040348,6.14299169 C23.364313,6.14299169 23.5245913,6.08055402 23.6473043,5.95695291 C23.8914783,5.70847645 23.8914783,5.30454294 23.6473043,5.05606648 C17.2862609,-1.41706371 6.93704348,-1.41451524 0.578504348,5.05606648 C0.334330435,5.30454294 0.334330435,5.70847645 0.578504348,5.95695291 C0.822678261,6.20542936 1.21961739,6.20542936 1.4637913,5.95695291 C7.33398261,-0.0179501385 16.8905739,-0.0166759003 22.7607652,5.95695291 L22.7607652,5.95695291 Z\" id=\"Shape\" fill=\"#2E3C43\"></path>\\n              <path d=\"M9.58789565,9.966759 C8.61495652,10.3273684 7.69586087,10.8854848 6.91575652,11.6793352 C6.67158261,11.9278116 6.67158261,12.3317452 6.91575652,12.5802216 C7.03846957,12.705097 7.19874783,12.7662604 7.35902609,12.7662604 C7.51930435,12.7662604 7.67958261,12.7038227 7.80229565,12.5802216 C10.1789217,10.1642659 14.046887,10.1642659 16.4247652,12.5802216 C16.5474783,12.705097 16.7077565,12.7662604 16.8680348,12.7662604 C17.028313,12.7662604 17.1885913,12.7038227 17.3113043,12.5802216 C17.5554783,12.3317452 17.5554783,11.9278116 17.3113043,11.6793352 C15.2239304,9.55645429 12.1924174,8.99961219 9.58789565,9.966759 L9.58789565,9.966759 Z\" id=\"Shape\" fill=\"#2E3C43\"></path>\\n              <path d=\"M12.1122783,14.1359557 C10.5307826,14.1359557 9.2448,15.4445983 9.2448,17.052687 C9.2448,18.6620499 10.5307826,19.9706925 12.1122783,19.9706925 C13.6925217,19.9706925 14.9785043,18.6620499 14.9785043,17.052687 C14.9785043,15.4458726 13.6925217,14.1359557 12.1122783,14.1359557 L12.1122783,14.1359557 Z M12.1122783,18.6977285 C11.2219826,18.6977285 10.4969739,17.9599446 10.4969739,17.0539612 C10.4969739,16.1479778 11.2219826,15.4114681 12.1122783,15.4114681 C13.0025739,15.4114681 13.7263304,16.1479778 13.7263304,17.0539612 C13.7263304,17.9599446 13.0025739,18.6977285 12.1122783,18.6977285 L12.1122783,18.6977285 Z\" id=\"Shape\" fill=\"#2E3C43\"></path>\\n          </g>\\n      </svg>\\n    </div>\\n    <div>\\n      <h2 class=\"CDB-Text CDB-Size-huge is-light u-bSpace--m\">\\n        ' +\n__e( _t('dataset.sync.title') ) +\n'\\n     </h2>\\n      <p class=\"CDB-Text CDB-Size-medium u-altTextColor\">\\n        ' +\n((__t = ( _t('dataset.sync.desc', {\n          service: service,\n          url: url\n        }) )) == null ? '' : __t) +\n'\\n      </p>\\n      <div class=\"Modal-listTextItem u-flex u-alignCenter\">\\n        <h3 class=\"CDB-Text CDB-Size-small is-semibold u-upperCase\">' +\n__e( _t('dataset.sync.label') ) +\n'</h3>\\n        <ul class=\"Modal-listForm u-flex u-alignCenter CDB-Text CDB-Size-small js-intervals\">\\n          <li class=\"Modal-listFormItem\">\\n            <input class=\"CDB-Radio\" type=\"radio\" name=\"interval\" value=\"3600\"\\n              ';\n if (interval === 3600) { ;\n__p += '\\n                checked\\n              ';\n } ;\n__p += '\\n\\n              ';\n if (isExternalSource) { ;\n__p += '\\n                disabled\\n              ';\n } ;\n__p += '\\n            >\\n            <span class=\"u-iBlock CDB-Radio-face\"></span>\\n            <label class=\"u-iBlock u-lSpace u-upperCase\">Every hour</label>\\n          </li>\\n          <li class=\"Modal-listFormItem\">\\n            <input class=\"CDB-Radio\" type=\"radio\" name=\"interval\" value=\"86400\"\\n              ';\n if (interval === 86400) { ;\n__p += '\\n                checked\\n              ';\n } ;\n__p += '\\n\\n              ';\n if (isExternalSource) { ;\n__p += '\\n                disabled\\n              ';\n } ;\n__p += '\\n            >\\n            <span class=\"u-iBlock CDB-Radio-face\"></span>\\n            <label class=\"u-iBlock u-lSpace u-upperCase\">Every day</label>\\n          </li>\\n          <li class=\"Modal-listFormItem\">\\n            <input class=\"CDB-Radio\" type=\"radio\" name=\"interval\" value=\"604800\"\\n              ';\n if (interval === 604800) { ;\n__p += '\\n                checked\\n              ';\n } ;\n__p += '\\n\\n              ';\n if (isExternalSource) { ;\n__p += '\\n                disabled\\n              ';\n } ;\n__p += '\\n            >\\n            <span class=\"u-iBlock CDB-Radio-face\"></span>\\n            <label class=\"u-iBlock u-lSpace u-upperCase\">Every week</label>\\n          </li>\\n          <li class=\"Modal-listFormItem\">\\n            <input class=\"CDB-Radio\" type=\"radio\" name=\"interval\" value=\"2592000\"\\n              ';\n if (interval === 2592000) { ;\n__p += '\\n                checked\\n              ';\n } ;\n__p += '\\n            >\\n            <span class=\"u-iBlock CDB-Radio-face\"></span>\\n            <label class=\"u-iBlock u-lSpace u-upperCase\">Every month</label>\\n          </li>\\n          <li class=\"Modal-listFormItem\">\\n            <input class=\"CDB-Radio\" type=\"radio\" name=\"interval\" value=\"0\"\\n              ';\n if (interval === 0) { ;\n__p += '\\n                checked\\n              ';\n } ;\n__p += '\\n            >\\n            <span class=\"u-iBlock CDB-Radio-face\"></span>\\n            <label class=\"u-iBlock u-lSpace u-upperCase\">Never</label>\\n          </li>\\n        </ul>\\n      </div>\\n      <ul class=\"Modal-listActions u-flex u-alignCenter\">\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--secondary CDB-Button--big js-cancel\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n              ' +\n__e( _t('dataset.sync.cancel') ) +\n'\\n            </span>\\n          </button>\\n        </li>\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-confirm\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n              ' +\n__e( _t('dataset.sync.confirm') ) +\n'\\n            </span>\\n          </button>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n</div>\\n\\n\\n';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar MosaicView = require('./mosaic/mosaic-view');\n\n/**\n *  Mosaic form view\n */\n\nmodule.exports = CoreView.extend({\n\n  initialize: function (opts) {\n    if (!opts.collection) throw new Error('Mosaic collection is required');\n    if (!opts.template) throw new Error('template is required');\n\n    this.template = opts.template;\n    this._disabled = opts.disabled;\n\n    this._initBinds();\n  },\n\n  render: function () {\n    var selectedItem = this.collection.getSelected();\n    var selectedName = selectedItem && selectedItem.getName();\n    this.$el.html(\n      this.template({\n        name: selectedName\n      })\n    );\n    this._initViews();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.collection.bind('change:highlighted', this._onChangeHighlighted, this);\n  },\n\n  _initViews: function () {\n    var mosaic = new MosaicView({\n      collection: this.collection,\n      disabled: this._disabled\n    });\n\n    if (!this.$('.js-selector').length) throw new Error('HTML element with js-selector class is required');\n\n    this.$('.js-selector').append(mosaic.render().el);\n    this.addView(mosaic);\n  },\n\n  _onChangeHighlighted: function () {\n    var item = this.collection.getHighlighted() || this.collection.getSelected();\n    if (item) {\n      var $el = this.$('.js-highlight');\n      if ($el) {\n        $el.text(item.getName());\n      }\n    }\n  }\n\n});\n","var Backbone = require('backbone');\nvar MosaicModel = require('./mosaic-item-model');\n\n/*\n *  List collection, it parses pairs like:\n *\n *  [{ val, label }]\n *  [\"string\"]\n */\n\nmodule.exports = Backbone.Collection.extend({\n\n  model: function (attrs, opts) {\n    var d = {};\n    if (typeof attrs === 'string') {\n      d.val = attrs;\n    } else {\n      d = attrs;\n    }\n    return new MosaicModel(d);\n  },\n\n  initialize: function () {\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.bind('change:selected', this._onSelectedChange, this);\n  },\n\n  _onSelectedChange: function (changedModel, isSelected) {\n    if (isSelected) {\n      this.each(function (m) {\n        if (m.cid !== changedModel.cid && m.get('selected')) {\n          m.set('selected', false);\n        }\n      });\n    }\n  },\n\n  getSelected: function () {\n    return this.findWhere({ selected: true });\n  },\n\n  getHighlighted: function () {\n    return this.findWhere({ highlighted: true });\n  }\n\n});\n","var Backbone = require('backbone');\n\n/*\n *  List item model\n *\n */\n\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    disabled: false,\n    selected: false,\n    label: '',\n    template: function () {\n      return '';\n    }\n  },\n\n  getName: function () {\n    return this.get('label') || this.getValue();\n  },\n\n  getValue: function () {\n    return this.get('val');\n  }\n\n});\n","var CoreView = require('backbone/core-view');\nvar template = require('./mosaic-item.tpl');\n\nmodule.exports = CoreView.extend({\n\n  className: 'Mosaic-item',\n\n  tagName: 'li',\n\n  events: {\n    'mouseenter': '_onMouseEnter',\n    'mouseleave': '_onMouseLeave',\n    'click': '_onClick'\n  },\n\n  initialize: function (opts) {\n    this._disabled = opts.disabled;\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.$el.html(\n      template({\n        name: this.model.getName(),\n        template: this.model.get('template')()\n      })\n    );\n    this.$el.addClass('js-' + this.model.getValue());\n    this.$el.toggleClass('is-selected', !!this.model.get('selected'));\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.bind('change:selected', this.render, this);\n  },\n\n  _onMouseEnter: function () {\n    this.model.set('highlighted', true);\n  },\n\n  _onMouseLeave: function () {\n    this.model.set('highlighted', false);\n  },\n\n  _onClick: function () {\n    if (this._disabled) {\n      return false;\n    }\n\n    this.model.set('selected', true);\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<button class=\"Mosaic-inner\">\\n  ' +\n((__t = ( template )) == null ? '' : __t) +\n'\\n</button>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<img src=\"' +\n((__t = ( imgURL )) == null ? '' : __t) +\n'\" class=\"Mosaic-image js-thumbnailImg\" />\\n';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar template = require('./mosaic.tpl');\nvar MosaicCollection = require('./mosaic-collection');\nvar MosaicItemView = require('./mosaic-item-view');\n\n/*\n *  A mosaic selector\n *\n *  It accepts a collection of (val, label) model attributes or a values array\n *  with the same content or only strings.\n *\n *  new Mosaic({\n *    options: [\n *      {\n *        val: 'hello',\n *        label: 'hi'\n *      }\n *    ]\n *  });\n */\n\nmodule.exports = CoreView.extend({\n\n  className: 'Mosaic',\n\n  tagName: 'div',\n\n  initialize: function (opts) {\n    if (!opts.collection) {\n      if (!opts.options) throw new Error('options array {value, label} is required');\n\n      this.collection = new MosaicCollection(opts.options);\n    }\n\n    this._disabled = opts.disabled;\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template());\n    this._renderList();\n    return this;\n  },\n\n  _renderList: function () {\n    this.collection.each(function (mdl) {\n      this._createItem(mdl);\n    }, this);\n  },\n\n  _createItem: function (mdl) {\n    var view = new MosaicItemView({\n      model: mdl,\n      disabled: this._disabled\n    });\n    this.$('.js-mosaic').append(view.render().el);\n    this.addView(view);\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<ul class=\"Mosaic-list js-mosaic\"></ul>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"IntermediateInfo\">\\n  <div class=\"LayoutIcon\">\\n    <i class=\"CDB-IconFont ' +\n__e( icon ) +\n'\"></i>\\n  </div>\\n  <h4 class=\"CDB-Text CDB-Size-large u-mainTextColor u-secondaryTextColor u-bSpace--m u-tSpace-xl\">' +\n__e( title ) +\n'</h4>\\n  <p class=\"CDB-Text CDB-Size-medium u-altTextColor\">\\n    ' +\n__e( desc ) +\n'\\n  </p>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<span data-action=\"' +\n__e( button ) +\n'\" class=\"CDB-Text is-semibold u-lSpace u-actionTextColor u-upperCase\">' +\n__e( button ) +\n'</span>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"CDB-Shape-close is-blue is-large js-theme\"></div>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"Notifier-item Notifier-item--' +\n__e( status ) +\n'\">\\n\\n  ';\n if (status === 'loading') { ;\n__p += '\\n  <div class=\"Notifier-icon CDB-LoaderIcon is-blue js-theme u-rSpace--m\">\\n    <svg class=\"CDB-LoaderIcon-spinner\" viewBox=\"0 0 50 50\">\\n      <circle class=\"CDB-LoaderIcon-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"></circle>\\n    </svg>\\n  </div>\\n  ';\n } ;\n__p += '\\n\\n  ';\n if (status === 'success') { ;\n__p += '\\n  <div class=\"Notifier-icon CDB-Shape u-rSpace--m\">\\n    <div class=\"CDB-Shape-CircleItem CDB-Shape-CircleItem--fill is-green\">\\n      <div class=\"CDB-Shape-tick is-medium is-white\"></div>\\n    </div>\\n  </div>\\n  ';\n } ;\n__p += '\\n\\n  ';\n if (status === 'error' || status === 'warning') { ;\n__p += '\\n  <div class=\"Notifier-icon CDB-Shape u-rSpace--m\">\\n    <div class=\"CDB-Shape-CircleItem CDB-Shape-CircleItem--fill is-red\">\\n      <div class=\"CDB-Shape-close is-medium is-white\"></div>\\n    </div>\\n  </div>\\n  ';\n } ;\n__p += '\\n\\n  <div class=\"Notifier-info\">\\n    <p class=\"CDB-Text CDB-Size-medium\">' +\n((__t = ( info )) == null ? '' : __t) +\n' ';\n if (isActionable) { ;\n__p += ' <span class=\"js-actionButton\"></span> ';\n } ;\n__p += '</p>\\n  </div>\\n\\n  ';\n if (isClosable) { ;\n__p += '\\n    <div class=\"Notifier-actions js-closeButton\"></div>\\n  ';\n } ;\n__p += '\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"CDB-Loader js-loader\"></div>\\n<ul class=\"Notifier-list js-status-loading\"></ul>\\n<ul class=\"Notifier-list js-status-done\"></ul>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<p class=\"CDB-Text Onboarding-headerDescription\">\\n  ' +\n__e( _t('analyses-onboarding.new-column-included') ) +\n'\\n</p>\\n\\n<ul class=\"Onboarding-list\">\\n  ';\n if (aggregate_function === 'count') { ;\n__p += '\\n  <li class=\"Onboarding-listItem\">\\n    <div class=\"Onboarding-listItemValue\">count_vals</div>\\n  </li>\\n  <li class=\"Onboarding-listItem\">\\n    <div class=\"Onboarding-listItemValue\">count_vals_density</div>\\n  </li>\\n  ';\n } else {;\n__p += '\\n  <li class=\"Onboarding-listItem\">\\n    <div class=\"Onboarding-listItemValue\">' +\n__e( aggregate_function ) +\n'_' +\n__e( aggregate_column ) +\n'</div>\\n  </li>\\n  ';\n } ;\n__p += '\\n</ul>\\n\\n<p class=\"CDB-Text Onboarding-description\">\\n  ' +\n__e( _t('analyses-onboarding.aggregate-intersection.description') ) +\n'\\n</p>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<p class=\"CDB-Text Onboarding-headerDescription\">\\n  ' +\n__e( _t('analyses-onboarding.geometries-updated') ) +\n'\\n</p>\\n\\n<ul class=\"Onboarding-list\">\\n  <li class=\"Onboarding-listItem\">\\n    <div class=\"Onboarding-listItemValue\">the_geom</div>\\n    <p class=\"CDB-Text Onboarding-description\">' +\n__e( _t('analyses-onboarding.area-of-influence.the-geom') ) +\n'</p>\\n  </li>\\n</ul>\\n\\n<p class=\"CDB-Text Onboarding-description\">\\n  ' +\n__e( _t('analyses-onboarding.area-of-influence.description') ) +\n'\\n</p>\\n\\n<p class=\"CDB-Text Onboarding-description\">\\n  <a href=\"https://carto.com/learn/guides/analysis/areas-of-influence\" class=\"Onboarding-readMore\" target=\"_blank\">' +\n__e( _t('analyses-onboarding.learn-more') ) +\n'</a>\\n</p>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<p class=\"CDB-Text Onboarding-headerDescription\">\\n  ' +\n__e( _t('analyses-onboarding.new-columns-created') ) +\n'\\n</p>\\n\\n<ul class=\"Onboarding-list\">\\n  <li class=\"Onboarding-listItem\">\\n    <div class=\"Onboarding-listItemValue\">the_geom</div>\\n    <p class=\"CDB-Text Onboarding-description\">' +\n__e( _t('analyses-onboarding.centroid.the-geom') ) +\n'</p>\\n  </li>\\n  <li class=\"Onboarding-listItem\">\\n    <div class=\"Onboarding-listItemValue\">value</div>\\n    <p class=\"CDB-Text Onboarding-description\">\\n      ';\n if (aggregation) { ;\n__p += '\\n      ' +\n__e( _t('analyses-onboarding.centroid.aggregated-value') ) +\n'\\n      ';\n } else { ;\n__p += '\\n      ' +\n__e( _t('analyses-onboarding.centroid.non-aggregated-value') ) +\n'\\n      ';\n } ;\n__p += '\\n    </p>\\n  </li>\\n  ';\n if (category_column) { ;\n__p += '\\n  <li class=\"Onboarding-listItem\">\\n    <div class=\"Onboarding-listItemValue\">category</div>\\n    <p class=\"CDB-Text Onboarding-description\">' +\n__e( _t('analyses-onboarding.centroid.category') ) +\n'</p>\\n  </li>\\n  ';\n } ;\n__p += '\\n</ul>\\n\\n<p class=\"CDB-Text Onboarding-description\">\\n  ' +\n__e( _t('analyses-onboarding.centroid.description') ) +\n'\\n</p>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<p class=\"CDB-Text Onboarding-headerDescription\">\\n  ' +\n__e( _t('analyses-onboarding.new-columns-created') ) +\n'\\n</p>\\n\\n<ul class=\"Onboarding-list\">\\n  <li class=\"Onboarding-listItem\">\\n    <div class=\"Onboarding-listItemValue\">the_geom</div>\\n    <p class=\"CDB-Text Onboarding-description\">' +\n__e( _t('analyses-onboarding.closest.the-geom') ) +\n'</p>\\n  </li>\\n  <li class=\"Onboarding-listItem\">\\n    <div class=\"Onboarding-listItemValue\">source_cdb_id</div>\\n    <p class=\"CDB-Text Onboarding-description\">' +\n__e( _t('analyses-onboarding.closest.source_cdb_id') ) +\n'</p>\\n  </li>\\n</ul>\\n\\n<p class=\"CDB-Text Onboarding-description\">\\n  ' +\n__e( _t('analyses-onboarding.closest.description') ) +\n'\\n</p>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<p class=\"CDB-Text Onboarding-headerDescription\">\\n  ' +\n__e( _t('analyses-onboarding.geometries-updated') ) +\n'\\n</p>\\n\\n<ul class=\"Onboarding-list\">\\n  <li class=\"Onboarding-listItem\">\\n    <div class=\"Onboarding-listItemValue\">the_geom</div>\\n    <p class=\"CDB-Text Onboarding-description\">' +\n__e( _t('analyses-onboarding.connect-with-lines.the-geom') ) +\n'</p>\\n  </li>\\n</ul>\\n\\n<p class=\"CDB-Text Onboarding-description\">\\n  ' +\n__e( _t('analyses-onboarding.connect-with-lines.' + type) ) +\n'\\n</p>\\n\\n<p class=\"CDB-Text Onboarding-description\">\\n  <a href=\"https://carto.com/learn/guides/analysis/connect-with-lines\" class=\"Onboarding-readMore\" target=\"_blank\">' +\n__e( _t('analyses-onboarding.learn-more') ) +\n'</a>\\n</p>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<p class=\"CDB-Text Onboarding-headerDescription\">\\n  ' +\n__e( _t('analyses-onboarding.new-column-included') ) +\n'\\n</p>\\n\\n<ul class=\"Onboarding-list\">\\n  <li class=\"Onboarding-listItem\">\\n    <div class=\"Onboarding-listItemValue\">' +\n__e( final_column ) +\n'</div>\\n    <p class=\"CDB-Text Onboarding-description\">' +\n__e( _t('analyses-onboarding.data-observatory-measure.custom-column') ) +\n'</p>\\n  </li>\\n</ul>\\n\\n<p class=\"CDB-Text Onboarding-description\">\\n  ' +\n__e( _t('analyses-onboarding.data-observatory-measure.description') ) +\n'\\n</p>\\n\\n<p class=\"CDB-Text Onboarding-description\">\\n  <a href=\"https://carto.com/learn/guides/analysis/enrich-from-data-observatory\" class=\"Onboarding-readMore\" target=\"_blank\">' +\n__e( _t('analyses-onboarding.learn-more') ) +\n'</a>\\n</p>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<p class=\"CDB-Text Onboarding-headerDescription\">\\n  ' +\n__e( _t('analyses-onboarding.new-columns-included') ) +\n'\\n</p>\\n\\n<ul class=\"Onboarding-list\">\\n  ';\n _.each(column_names, function (column) { ;\n__p += '\\n    <li class=\"Onboarding-listItem\">\\n      <div class=\"Onboarding-listItemValue\">' +\n__e( column ) +\n'</div>\\n    </li>\\n  ';\n }); ;\n__p += '\\n</ul>\\n\\n<p class=\"CDB-Text Onboarding-description\">' +\n__e( _t('analyses-onboarding.data-observatory-multiple-measures.custom-columns') ) +\n'\\n\\n<p class=\"CDB-Text Onboarding-description\">\\n  ' +\n__e( _t('analyses-onboarding.data-observatory-multiple-measures.description') ) +\n'\\n</p>\\n\\n<p class=\"CDB-Text Onboarding-description\">\\n  <a href=\"https://carto.com/learn/guides/analysis/enrich-from-data-observatory\" class=\"Onboarding-readMore\" target=\"_blank\">' +\n__e( _t('analyses-onboarding.learn-more') ) +\n'</a>\\n</p>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<p class=\"CDB-Text Onboarding-description\">\\n  ' +\n__e( _t('analyses-onboarding.filter-by-node-column.description') ) +\n'\\n</p>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<p class=\"CDB-Text Onboarding-headerDescription\">\\n  ' +\n__e( _t('analyses-onboarding.new-columns-created') ) +\n'\\n</p>\\n\\n<p class=\"CDB-Text Onboarding-description\">\\n  ' +\n__e( _t('analyses-onboarding.filter.description') ) +\n'\\n</p>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<p class=\"CDB-Text Onboarding-headerDescription\">\\n  ' +\n__e( _t('analyses-onboarding.geometries-updated') ) +\n'\\n</p>\\n\\n<ul class=\"Onboarding-list\">\\n  <li class=\"Onboarding-listItem\">\\n    <div class=\"Onboarding-listItemValue\">the_geom</div>\\n    <p class=\"CDB-Text Onboarding-description\">' +\n__e( _t('analyses-onboarding.georeference.the-geom') ) +\n'</p>\\n  </li>\\n</ul>\\n\\n<p class=\"CDB-Text Onboarding-description\">\\n  ' +\n__e( _t('analyses-onboarding.georeference.description') ) +\n'\\n</p>\\n\\n<p class=\"CDB-Text Onboarding-description\">\\n  <a href=\"https://carto.com/learn/guides/analysis/georeference\" class=\"Onboarding-readMore\" target=\"_blank\">' +\n__e( _t('analyses-onboarding.learn-more') ) +\n'</a>\\n</p>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<p class=\"CDB-Text Onboarding-headerDescription\">\\n  ' +\n__e( _t('analyses-onboarding.geometries-updated') ) +\n'\\n</p>\\n\\n<ul class=\"Onboarding-list\">\\n  <li class=\"Onboarding-listItem\">\\n    <div class=\"Onboarding-listItemValue\">the_geom</div>\\n    <p class=\"CDB-Text Onboarding-description\">' +\n__e( _t('analyses-onboarding.group-points.the-geom') ) +\n'</p>\\n  </li>\\n  ';\n if (category_column) { ;\n__p += '\\n  <li class=\"Onboarding-listItem\">\\n    <div class=\"Onboarding-listItemValue\">' +\n__e( category_column ) +\n'</div>\\n    <p class=\"CDB-Text Onboarding-description\">' +\n__e( _t('analyses-onboarding.group-points.category') ) +\n'</p>\\n  </li>\\n  ';\n } ;\n__p += '\\n</ul>\\n\\n<p class=\"CDB-Text Onboarding-description\">\\n  ' +\n__e( _t('analyses-onboarding.group-points.description', { method: _t('analyses.' + type + '.title') }) ) +\n'\\n</p>\\n\\n<p class=\"CDB-Text Onboarding-description\">\\n  <a href=\"http://postgis.net/docs/manual-2.2/\" class=\"Onboarding-readMore\" target=\"_blank\">' +\n__e( _t('analyses-onboarding.read-more') ) +\n'</a>\\n</p>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<p class=\"CDB-Text Onboarding-headerDescription\">\\n  ' +\n__e( _t('analyses-onboarding.new-column-included') ) +\n'\\n</p>\\n\\n<ul class=\"Onboarding-list\">\\n  <li class=\"Onboarding-listItem\">\\n    <div class=\"Onboarding-listItemValue\">source_cartodb_id</div>\\n    <p class=\"CDB-Text Onboarding-description\">' +\n__e( _t('analyses-onboarding.intersection.source-cartodb-id') ) +\n'</p>\\n  </li>\\n</ul>\\n\\n<p class=\"CDB-Text Onboarding-description\">\\n  ' +\n__e( _t('analyses-onboarding.intersection.description') ) +\n'\\n</p>\\n\\n<p class=\"CDB-Text Onboarding-description\">\\n  <a href=\"https://carto.com/learn/guides/analysis/intersect-second-layer\" class=\"Onboarding-readMore\" target=\"_blank\">' +\n__e( _t('analyses-onboarding.learn-more') ) +\n'</a>\\n</p>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<p class=\"CDB-Text Onboarding-headerDescription\">\\n  ' +\n__e( _t('analyses-onboarding.new-column-added') ) +\n'\\n</p>\\n\\n<ul class=\"Onboarding-list\">\\n  <li class=\"Onboarding-listItem\">\\n    <div class=\"Onboarding-listItemValue\">cluster_no</div>\\n    <p class=\"CDB-Text Onboarding-description\">' +\n__e( _t('analyses-onboarding.kmeans.cluster-no', { clusters: clusters }) ) +\n'</p>\\n  </li>\\n</ul>\\n\\n<p class=\"CDB-Text Onboarding-description\">\\n  ' +\n__e( _t('analyses-onboarding.kmeans.description') ) +\n'\\n</p>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<p class=\"CDB-Text Onboarding-headerDescription\">\\n  ' +\n__e( _t('analyses-onboarding.new-columns-included-based-on-input') ) +\n'\\n</p>\\n\\n<p class=\"CDB-Text Onboarding-description\">\\n  ' +\n__e( _t('analyses-onboarding.merge.description') ) +\n'\\n</p>\\n\\n<p class=\"CDB-Text Onboarding-description\">\\n  <a href=\"https://carto.com/learn/guides/analysis/join-column-from-second-layer\" class=\"Onboarding-readMore\" target=\"_blank\">' +\n__e( _t('analyses-onboarding.learn-more') ) +\n'</a>\\n</p>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<p class=\"CDB-Text Onboarding-headerDescription\">\\n  ' +\n__e( _t('analyses-onboarding.new-columns-included') ) +\n'\\n</p>\\n\\n<ul class=\"Onboarding-list\">\\n  <li class=\"Onboarding-listItem\">\\n    <div class=\"Onboarding-listItemValue\">quads</div>\\n    <p class=\"CDB-Text Onboarding-description\">' +\n__e( _t('analyses-onboarding.moran.quads') ) +\n'</p>\\n  </li>\\n  <li class=\"Onboarding-listItem\">\\n    <div class=\"Onboarding-listItemValue\">significance</div>\\n    <p class=\"CDB-Text Onboarding-description\">' +\n__e( _t('analyses-onboarding.moran.significance') ) +\n'</p>\\n  </li>\\n  <li class=\"Onboarding-listItem\">\\n    <div class=\"Onboarding-listItemValue\">moran</div>\\n    <p class=\"CDB-Text Onboarding-description\">' +\n__e( _t('analyses-onboarding.moran.moran') ) +\n'</p>\\n  </li>\\n  <li class=\"Onboarding-listItem\">\\n    <div class=\"Onboarding-listItemValue\">vals</div>\\n    <p class=\"CDB-Text Onboarding-description\">' +\n__e( _t('analyses-onboarding.moran.vals') ) +\n'</p>\\n  </li>\\n</ul>\\n\\n<p class=\"CDB-Text Onboarding-description\">\\n  ' +\n__e( _t('analyses-onboarding.moran.description') ) +\n'\\n</p>\\n\\n<p class=\"CDB-Text Onboarding-description\">\\n  <a href=\"https://carto.com/learn/guides/analysis/detect-outliers-and-clusters\" class=\"Onboarding-readMore\" target=\"_blank\">' +\n__e( _t('analyses-onboarding.learn-more') ) +\n'</a>\\n</p>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<p class=\"CDB-Text Onboarding-headerDescription\">\\n  ' +\n__e( _t('analyses-onboarding.no-new-columns') ) +\n'\\n</p>\\n\\n<p class=\"CDB-Text Onboarding-description\">\\n  ' +\n__e( _t('analyses-onboarding.sampling.description', { percentage: Math.round(sampling * 100) }) ) +\n'\\n</p>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<p class=\"CDB-Text Onboarding-headerDescription\">\\n  ' +\n__e( _t('analyses-onboarding.new-columns-included') ) +\n'\\n</p>\\n\\n<ul class=\"Onboarding-list\">\\n  <li class=\"Onboarding-listItem\">\\n    <div class=\"Onboarding-listItemValue\">trend</div>\\n    <p class=\"CDB-Text Onboarding-description\">' +\n__e( _t('analyses-onboarding.spatial-markov-trend.trend') ) +\n'</p>\\n  </li>\\n  <li class=\"Onboarding-listItem\">\\n    <div class=\"Onboarding-listItemValue\">trend_up</div>\\n    <p class=\"CDB-Text Onboarding-description\">' +\n__e( _t('analyses-onboarding.spatial-markov-trend.trend_up') ) +\n'</p>\\n  </li>\\n  <li class=\"Onboarding-listItem\">\\n    <div class=\"Onboarding-listItemValue\">trend_down</div>\\n    <p class=\"CDB-Text Onboarding-description\">' +\n__e( _t('analyses-onboarding.spatial-markov-trend.trend_down') ) +\n'</p>\\n  </li>\\n  <li class=\"Onboarding-listItem\">\\n    <div class=\"Onboarding-listItemValue\">volatility</div>\\n    <p class=\"CDB-Text Onboarding-description\">' +\n__e( _t('analyses-onboarding.spatial-markov-trend.volatility') ) +\n'</p>\\n  </li>\\n</ul>\\n\\n<p class=\"CDB-Text Onboarding-description\">\\n  ' +\n__e( _t('analyses-onboarding.spatial-markov-trend.description') ) +\n'\\n</p>\\n\\n<p class=\"CDB-Text Onboarding-description\">\\n  <a href=\"https://carto.com/learn/guides/analysis/predict-trends-and-volatility\" class=\"Onboarding-readMore\" target=\"_blank\">' +\n__e( _t('analyses-onboarding.learn-more') ) +\n'</a>\\n</p>\\n';\n\n}\nreturn __p\n}","var LocalStorage = require('builder/components/local-storage/local-storage');\nvar AnalysisOnboardingView = require('builder/components/onboardings/analysis/analysis-view');\nvar Analyses = require('builder/data/analyses');\n\nvar BASE_STORAGE_KEY = 'onboarding';\n\nvar launcher = (function () {\n  var onboardings;\n  var userModel;\n  var editorModel;\n  var visDefinitionModel;\n\n  function init (opts) {\n    if (!onboardings && !opts) {\n      throw new Error('onboardings is required');\n    }\n\n    if (!userModel && !opts) {\n      throw new Error('userModel is required');\n    }\n\n    if (!visDefinitionModel && !opts) {\n      throw new Error('visDefinitionModel is required');\n    }\n\n    if (!onboardings && opts && opts.onboardings) {\n      onboardings = opts.onboardings;\n    }\n\n    if (!userModel && opts && opts.userModel) {\n      userModel = opts.userModel;\n    }\n\n    if (!visDefinitionModel && opts && opts.visDefinitionModel) {\n      visDefinitionModel = opts.visDefinitionModel;\n    }\n\n    editorModel = onboardings.editorModel;\n  }\n\n  return {\n    init: function (opts) {\n      init(opts);\n\n      var storageKey = BASE_STORAGE_KEY + '.' + visDefinitionModel.get('id');\n\n      LocalStorage.init(storageKey, {\n        userModel: userModel\n      });\n    },\n\n    launch: function (type, model) {\n      var genericType = Analyses.getAnalysisByType(type).genericType || type;\n\n      if (!LocalStorage.get(genericType) && genericType) {\n        onboardings.create(function (modalModel) {\n          return new AnalysisOnboardingView({\n            modalModel: modalModel,\n            userModel: userModel,\n            editorModel: editorModel,\n            model: model,\n            visDefinitionModel: visDefinitionModel\n          });\n        });\n      }\n    }\n  };\n})();\n\nmodule.exports = launcher;\n","var LocalStorage = require('builder/components/local-storage/local-storage');\nvar CoreView = require('backbone/core-view');\nvar template = require('./analysis-view.tpl');\nvar Analyses = require('builder/data/analyses');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar BASE_STORAGE_KEY = 'onboarding';\n\nvar REQUIRED_OPTS = [\n  'modalModel',\n  'userModel',\n  'editorModel',\n  'visDefinitionModel'\n];\n\nmodule.exports = CoreView.extend({\n  className: 'AnalysisCompletionDetails is-opening',\n\n  events: {\n    'click .js-close': '_close',\n    'click .js-style': '_onStyle'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    var storageKey = BASE_STORAGE_KEY + '.' + this._visDefinitionModel.get('id');\n\n    LocalStorage.init(storageKey, {\n      userModel: this._userModel\n    });\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.$el.html(template({\n      type: this._getGenericAnalysisType()\n    }));\n\n    var onboardingTemplate = this._typeDef().onboardingTemplate;\n    var html = onboardingTemplate && onboardingTemplate(this.model.attributes);\n    this.$('.js-content').html(html);\n\n    this._onChangeEditorModelEdition(this._editorModel);\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.model, 'destroy', this._close);\n    this.listenTo(this._editorModel, 'change:edition', this._onChangeEditorModelEdition);\n    this.add_related_model(this._editorModel);\n  },\n\n  _onChangeEditorModelEdition: function (mdl) {\n    var isEditing = !!mdl.get('edition');\n    this.$el.toggleClass('is-editing', isEditing);\n  },\n\n  _close: function () {\n    this._forget();\n    this.trigger('close', this);\n  },\n\n  _onStyle: function () {\n    this._forget();\n    this.trigger('customEvent', 'style', this);\n  },\n\n  _forget: function () {\n    LocalStorage.set(this._getGenericAnalysisType(), true);\n  },\n\n  _typeDef: function (type) {\n    type = type || this.model.get('type');\n    return Analyses.getAnalysisByType(type);\n  },\n\n  _getGenericAnalysisType: function () {\n    var typeDef = this._typeDef();\n    return typeDef && typeDef.genericType || this.model.get('type');\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"Onboarding-fake\"></div>\\n<div class=\"Onboarding-contentWrapper\">\\n  <div class=\"Onboarding-body\">\\n    <p class=\"CDB-Text Onboarding-headerTitle\">' +\n__e( _t('analyses-onboarding.' + type + '.title') ) +\n'</p>\\n    <p class=\"CDB-Text Onboarding-headerText\">' +\n__e( _t('analyses-onboarding.finished') ) +\n'</p>\\n\\n    <div class=\"js-content\"></div>\\n\\n    <div class=\"Onboarding-footer\">\\n      <div class=\"Onboarding-footerButtons\">\\n        <button class=\"CDB-Button CDB-Button--secondary CDB-Button--white CDB-Button--big Onboarding-footer--marginRight js-close\">\\n          <span class=\"CDB-Button-Text CDB-Text u-upperCase is-semibold CDB-Size-medium\">' +\n__e( _t('analyses-onboarding.done') ) +\n'</span>\\n        </button>\\n\\n        <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-style\">\\n          <span class=\"CDB-Button-Text CDB-Text u-upperCase is-semibold CDB-Size-medium\">' +\n__e( _t('analyses-onboarding.style-analysis') ) +\n'</span>\\n        </button>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\\n';\n\n}\nreturn __p\n}","var $ = require('jquery');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar template = require('./builder-view.tpl');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar GAPusher = require('builder/helpers/ga-pusher');\n\nvar BUILDER_KEY = 'onboarding';\n\nvar LEFT_KEY_CODE = 37;\nvar RIGHT_KEY_CODE = 39;\n\nvar REQUIRED_OPTS = [\n  'userModel',\n  'onboardingNotification',\n  'editorModel'\n];\n\nmodule.exports = CoreView.extend({\n  className: 'BuilderOnboarding is-step0 is-opening',\n\n  events: {\n    'click .js-start': '_onClickNext',\n    'click .js-next': '_onClickNext',\n    'click .js-close': '_close'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._initModels();\n    this._initBinds();\n  },\n\n  render: function () {\n    this.$el.html(template({\n      name: this._userModel.get('name') || this._userModel.get('username')\n    }));\n\n    return this;\n  },\n\n  _initModels: function () {\n    this.model = new Backbone.Model({\n      step: 0\n    });\n  },\n\n  _initBinds: function () {\n    this._keyDown = this._onKeyDown.bind(this);\n    $(document).on('keydown', this._keyDown);\n\n    this.listenTo(this.model, 'change:step', this._onChangeStep);\n    this.listenTo(this.model, 'destroy', this._close);\n    this.listenTo(this._editorModel, 'change:edition', this._changeEdition);\n  },\n\n  _changeEdition: function (mdl) {\n    var isEditing = !!mdl.get('edition');\n    this.$el.toggleClass('is-editing', isEditing);\n  },\n\n  _prev: function () {\n    if (this._currentStep() >= 1) {\n      this.model.set('step', this._currentStep() - 1);\n    }\n  },\n\n  _next: function () {\n    if (this._currentStep() <= 3) {\n      this.model.set('step', this._currentStep() + 1);\n    }\n  },\n\n  _currentStep: function () {\n    return this.model.get('step');\n  },\n\n  _onClickNext: function () {\n    this._next();\n  },\n\n  _onChangeStep: function () {\n    var self = this;\n\n    this.$el.removeClass('is-step' + this.model.previous('step'), function () {\n      self.$el.addClass('is-step' + self._currentStep());\n    });\n\n    this.$('.js-step').removeClass('is-step' + this.model.previous('step'), function () {\n      self.$('.js-step').addClass('is-step' + self._currentStep());\n    });\n  },\n\n  _close: function () {\n    this._forget();\n\n    GAPusher({\n      eventName: 'send',\n      hitType: 'event',\n      eventCategory: 'Edit your Map',\n      eventAction: 'click',\n      eventLabel: 'Builder'\n    });\n\n    this.trigger('close', this);\n  },\n\n  _onKeyDown: function (e) {\n    e.stopPropagation();\n\n    if (e.which === LEFT_KEY_CODE) {\n      this._prev();\n    } else if (e.which === RIGHT_KEY_CODE) {\n      this._next();\n    }\n  },\n\n  _forget: function () {\n    this._onboardingNotification.setKey(BUILDER_KEY, true);\n    this._onboardingNotification.save();\n  },\n\n  clean: function () {\n    $(document).off('keydown', this._keyDown);\n    CoreView.prototype.clean.apply(this);\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"BuilderOnboarding-pad\"></div>\\n<div class=\"BuilderOnboarding-pad2\"></div>\\n<div class=\"BuilderOnboarding-contentWrapper is-step0 js-step\">\\n  <div class=\"BuilderOnboarding-body\">\\n    <div class=\"BuilderOnboarding-header is-step0\">\\n      <p class=\"CDB-Text Onboarding-headerTitle\">' +\n__e( _t('builder-onboarding.title')) +\n'</p>\\n      <p class=\"CDB-Text Onboarding-headerText\">' +\n__e( name ) +\n'</p>\\n\\n      <p class=\"CDB-Text BuilderOnboarding-description\">\\n        ' +\n__e( _t('builder-onboarding.description')) +\n'\\n      </p>\\n    </div>\\n\\n    <div class=\"BuilderOnboarding-footer is-step0\">\\n      <div class=\"BuilderOnboarding-footerButtons\">\\n        <button class=\"CDB-Button CDB-Button--secondary CDB-Button--white CDB-Button--big Onboarding-footer--marginRight js-start\">\\n          <span class=\"CDB-Button-Text CDB-Text u-upperCase is-semibold CDB-Size-medium\">' +\n__e( _t('builder-onboarding.take-tour')) +\n'</span>\\n        </button>\\n\\n        <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-close track-onboarding--editMap\">\\n          <span class=\"CDB-Button-Text CDB-Text u-upperCase is-semibold CDB-Size-medium\">' +\n__e( _t('builder-onboarding.edit-map')) +\n'</span>\\n        </button>\\n      </div>\\n    </div>\\n\\n    <div class=\"BuilderOnboarding-step is-step1\">\\n      <p class=\"CDB-Text Onboarding-headerTitle\">1/4</p>\\n      <p class=\"CDB-Text Onboarding-headerText\">' +\n__e( _t('builder-onboarding.toolbar.title')) +\n'</p>\\n      <p class=\"CDB-Text BuilderOnboarding-description\">\\n        ' +\n__e( _t('builder-onboarding.toolbar.description')) +\n'\\n      </p>\\n    </div>\\n\\n    <div class=\"BuilderOnboarding-step is-step2\">\\n      <p class=\"CDB-Text Onboarding-headerTitle\">2/4</p>\\n      <p class=\"CDB-Text Onboarding-headerText\">' +\n__e( _t('builder-onboarding.configurator.title')) +\n'</p>\\n      <p class=\"CDB-Text BuilderOnboarding-description\">\\n        ' +\n__e( _t('builder-onboarding.configurator.description')) +\n'\\n      </p>\\n    </div>\\n\\n    <div class=\"BuilderOnboarding-step is-step3\">\\n      <p class=\"CDB-Text Onboarding-headerTitle\">3/4</p>\\n      <p class=\"CDB-Text Onboarding-headerText\">' +\n__e( _t('builder-onboarding.map.title')) +\n'</p>\\n      <p class=\"CDB-Text BuilderOnboarding-description\">\\n        ' +\n__e( _t('builder-onboarding.map.description')) +\n'\\n      </p>\\n    </div>\\n\\n    <div class=\"BuilderOnboarding-step is-step4\">\\n      <p class=\"CDB-Text Onboarding-headerTitle\">4/4</p>\\n      <p class=\"CDB-Text Onboarding-headerText\">' +\n__e( _t('builder-onboarding.widgets.title')) +\n'</p>\\n      <p class=\"CDB-Text BuilderOnboarding-description\">\\n        ' +\n__e( _t('builder-onboarding.widgets.description')) +\n'\\n      </p>\\n    </div>\\n\\n    <div class=\"BuilderOnboarding-footer is-step1 is-step2 is-step3\">\\n      <div class=\"BuilderOnboarding-footerButtons\">\\n        <button class=\"CDB-Button CDB-Button--secondary CDB-Button--white CDB-Button--big Onboarding-footer--marginRight js-close\">\\n          <span class=\"CDB-Button-Text CDB-Text u-upperCase is-semibold CDB-Size-medium\">' +\n__e( _t('builder-onboarding.skip')) +\n'</span>\\n        </button>\\n\\n        <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-next\">\\n          <span class=\"CDB-Button-Text CDB-Text u-upperCase is-semibold CDB-Size-medium\">' +\n__e( _t('builder-onboarding.next')) +\n'</span>\\n        </button>\\n      </div>\\n    </div>\\n\\n    <div class=\"BuilderOnboarding-footer is-step4\">\\n      <div class=\"BuilderOnboarding-footerButtons\">\\n        <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-close\">\\n          <span class=\"CDB-Button-Text CDB-Text u-upperCase is-semibold CDB-Size-medium\">' +\n__e( _t('builder-onboarding.edit-map')) +\n'</span>\\n        </button>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\\n<div class=\"BuilderOnboarding-pad3\"></div>\\n<div class=\"BuilderOnboarding-pad4\"></div>\\n<div class=\"BuilderOnboarding-pad5\"></div>\\n<div class=\"BuilderOnboarding-shadow\"></div>\\n';\n\n}\nreturn __p\n}","var BuilderOnboardingView = require('./builder-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar BUILDER_KEY = 'onboarding';\n\nvar REQUIRED_OPTS = [\n  'onboardings',\n  'userModel',\n  'onboardingNotification',\n  'editorModel'\n];\n\nmodule.exports = (function () {\n  return {\n    init: function (opts) {\n      checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n    },\n\n    launch: function () {\n      if (!this._onboardingNotification.getKey(BUILDER_KEY)) {\n        this._onboardings.create(function () {\n          return new BuilderOnboardingView({\n            userModel: this._userModel,\n            editorModel: this._editorModel,\n            onboardingNotification: this._onboardingNotification\n          });\n        }.bind(this));\n      }\n    }\n  };\n})();\n","var _ = require('underscore');\n\nvar GenericOnboardingLauncher = function (launcherOpts, viewOpts) {\n  var _view;\n  var _onboardingNotification;\n  var _notificationKey;\n  var _onboardings;\n  var _viewOpts;\n\n  if (!launcherOpts || !launcherOpts.view) {\n    throw new Error('view is required');\n  }\n\n  if (!launcherOpts.onboardingNotification) {\n    throw new Error('onboardingNotification is required');\n  }\n\n  if (!launcherOpts.notificationKey) {\n    throw new Error('notificationKey is required');\n  }\n\n  if (!launcherOpts.onboardings) {\n    throw new Error('onboardings is required');\n  }\n\n  if (!viewOpts) {\n    throw new Error('viewOpts is required');\n  }\n\n  _view = launcherOpts.view;\n  _onboardingNotification = launcherOpts.onboardingNotification;\n  _notificationKey = launcherOpts.notificationKey;\n  _onboardings = launcherOpts.onboardings;\n  _viewOpts = viewOpts;\n\n  return {\n    launch: function (launchOpts) {\n      if (!_onboardingNotification.getKey(_notificationKey)) {\n        _onboardings.create(function () {\n          var extendedViewOptions = _.extend(_viewOpts, {\n            onboardingNotification: _onboardingNotification,\n            notificationKey: _notificationKey\n          });\n          return new _view(_.extend(extendedViewOptions, launchOpts));\n        });\n      }\n    }\n  };\n};\n\nmodule.exports = GenericOnboardingLauncher;\n","var $ = require('jquery');\nvar Backbone = require('backbone');\nvar _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'onboardingNotification',\n  'editorModel',\n  'template',\n  'numberOfSteps',\n  'selector',\n  'modifier',\n  'notificationKey'\n];\n\nvar LEFT_KEY_CODE = 37;\nvar RIGHT_KEY_CODE = 39;\n\nmodule.exports = CoreView.extend({\n  className: 'is-step0 is-opening',\n\n  events: {\n    'click .js-start': '_onClickNext',\n    'click .js-next': '_onClickNext',\n    'click .js-close': '_close',\n    'click .js-highlight': '_close'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n    this.$el.addClass(this._selector);\n    this.model = new Backbone.Model({\n      step: -1\n    });\n    this._defaultBodyPos = {\n      top: 32,\n      left: 380\n    };\n\n    this._keyDown = this._onKeyDown.bind(this);\n    this._initBinds();\n  },\n\n  render: function () {\n    this.$el.addClass(this._selector + this._modifier);\n    this.$el.html(this._template());\n    if (this.model.get('step') === -1) {\n      this._next();\n    }\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.model, 'destroy', this._close);\n    this.listenTo(this.model, 'change:step', this._onChangeStep);\n    this.listenTo(this._editorModel, 'change:edition', this._changeEdition);\n    $(document).on('keydown', this._keyDown);\n  },\n\n  _changeEdition: function (mdl) {\n    var isEditing = !!mdl.get('edition');\n    this.$el.toggleClass('is-editing', isEditing);\n  },\n\n  _prev: function () {\n    if (this._currentStep() >= 1) {\n      this.model.set('step', this._currentStep() - 1);\n    }\n  },\n\n  _next: function () {\n    if (this._currentStep() < this._numberOfSteps) {\n      this.model.set('step', this._currentStep() + 1);\n    }\n  },\n\n  _currentStep: function () {\n    return this.model.get('step');\n  },\n\n  _onClickNext: function (event) {\n    if (event) event.stopPropagation();\n    this._next();\n  },\n\n  _onChangeStep: function () {\n    var prev = this.model.previous('step');\n    var step = this.model.get('step');\n\n    this.$el.removeClass('is-step' + prev, function () {\n      this.$el.addClass('is-step' + step);\n    }.bind(this));\n\n    this.$('.js-step').removeClass('is-step' + prev).addClass('is-step' + step);\n\n    this.$('.' + this._selector + '-body').fadeOut(0).delay(200).fadeIn(100);\n\n    this.$('.' + this._selector + '-step.is-step' + prev).css('display', 'none');\n    this.$('.' + this._selector + '-footer.is-step' + prev).css('display', 'none');\n    this.$('.' + this._selector + '-step.is-step' + step).css('display', 'block');\n    this.$('.' + this._selector + '-footer.is-step' + step).css('display', 'block');\n\n    this.$('.' + this._selector + '-contentBody').css('display', step === 0 ? 'block' : 'none');\n  },\n\n  _close: function () {\n    this._forget();\n    this.trigger('close', this);\n  },\n\n  _onKeyDown: function (event) {\n    event.stopPropagation();\n\n    if (event.which === LEFT_KEY_CODE) {\n      this._prev();\n    } else if (event.which === RIGHT_KEY_CODE) {\n      this._next();\n    }\n  },\n\n  _forget: function () {\n    this._onboardingNotification.setKey(this._notificationKey, true);\n    this._onboardingNotification.save();\n  },\n\n  clean: function () {\n    $(document).off('keydown', this._keyDown);\n    CoreView.prototype.clean.apply(this);\n  },\n\n  _setMiddlePad: function (position, padding, body) {\n    var $window = $(window);\n    var $top = this.$('.' + this._selector + '-pads--left .' + this._selector + '-padTop');\n    var $middle = this.$('.' + this._selector + '-pads--left .' + this._selector + '-padMiddle');\n    var $bottom = this.$('.' + this._selector + '-pads--left .' + this._selector + '-padBottom');\n    var vh = $window.height();\n    var vw = $window.width();\n    var isSelector = _.isString(position);\n    var $el = $(position);\n    var width = 0;\n    var height = 0;\n    var left = 0;\n    var top = 0;\n    if ($el.length === 0) return;\n\n    if (isSelector) {\n      width = $el.outerWidth();\n      height = $el.outerHeight();\n      left = $el.offset().left;\n      top = $el.offset().top;\n    } else {\n      width = position.width;\n      height = position.height;\n      left = position.left;\n      top = position.top;\n    }\n\n    // Apply padding\n    var appliedPadding = this._buildPadding(padding);\n    top -= appliedPadding.top;\n    left -= appliedPadding.left;\n    width += appliedPadding.left + appliedPadding.right;\n    height += appliedPadding.top + appliedPadding.bottom;\n\n    // Is it place outside the viewport?\n    if (vw - left > 0 && vw - left < width) {\n      width = vw - left;\n    } else if (vw - left <= 0) {\n      width = 0;\n    }\n\n    // Left offset\n    this.$('.' + this._selector + '-toolbarOverlay').outerWidth(left);\n\n    // Right panel\n    this.$('.' + this._selector + '-contentWrapper').outerWidth(vw - (left + width));\n\n    // Width\n    this.$('.' + this._selector + '-pads--left').outerWidth(width);\n    $top.outerWidth(width);\n    $middle.outerWidth(width);\n    $bottom.outerWidth(width);\n\n    // Height\n    var topHeight = top;\n    var middleHeight = height;\n    var bottomHeight = vh - (topHeight + middleHeight);\n\n    $top.outerHeight(topHeight);\n    $middle.outerHeight(middleHeight);\n    $bottom.outerHeight(bottomHeight);\n\n    // Body text\n    this.$('.' + this._selector + '-body').css('top', body && body.top ? body.top : this._defaultBodyPos.top);\n    this.$('.' + this._selector + '-body').css('left', body && body.left ? body.left : this._defaultBodyPos.left);\n  },\n\n  _buildPadding: function (padding) {\n    var result = {\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0\n    };\n\n    if (padding) {\n      result.top = this._calculatePadding(padding.top);\n      result.right = this._calculatePadding(padding.right);\n      result.bottom = this._calculatePadding(padding.bottom);\n      result.left = this._calculatePadding(padding.left);\n    }\n\n    return result;\n  },\n\n  _calculatePadding: function (padding) {\n    return (padding && _.isFinite(padding)) ? padding : 0;\n  }\n});\n","var _ = require('underscore');\nvar OnboardingView = require('builder/components/onboardings/generic/generic-onboarding-view');\nvar AnalysesService = require('builder/editor/layers/layer-content-views/analyses/analyses-service');\nvar template = require('./analysis-onboarding.tpl');\n\nmodule.exports = OnboardingView.extend({\n  events: OnboardingView.extendEvents({\n    'click .js-add-analysis': '_onAddAnalysisClicked'\n  }),\n\n  initialize: function (opts) {\n    OnboardingView.prototype.initialize.call(this, _.extend(opts, {\n      template: template,\n      numberOfSteps: 0,\n      modifier: '--analysis'\n    }));\n  },\n\n  _onAddAnalysisClicked: function () {\n    this._forget();\n\n    this.clean();\n\n    AnalysesService.addAnalysis();\n  },\n\n  _onChangeStep: function () {\n    OnboardingView.prototype._onChangeStep.call(this);\n\n    var step = this.model.get('step');\n\n    if (step === 0) {\n      this._setMiddlePad('.js-editorPanel');\n    }\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"LayerOnboarding-toolbarOverlay\"></div>\\n\\n<div class=\"LayerOnboarding-pads LayerOnboarding-pads--left\">\\n  <div class=\"LayerOnboarding-padTop\"></div>\\n  <div class=\"LayerOnboarding-padMiddle js-highlight\"></div>\\n</div>\\n\\n<div class=\"LayerOnboarding-contentWrapper LayerOnboarding-contentWrapper--analysis is-step0 js-step\">\\n  <div class=\"LayerOnboarding-contentBody LayerOnboarding-contentBody--analysis is-step0 js-step\">\\n    <div class=\"Onboarding-body\">\\n      <p class=\"CDB-Text LayerOnboarding-headerTitle\">' +\n__e( _t('analysis-onboarding.title')) +\n'</p>\\n\\n      <p class=\"CDB-Text Onboarding-headerDescription\">' +\n__e( _t('analysis-onboarding.description')) +\n'</p>\\n\\n      <ul class=\"Onboarding-list\">\\n        <li class=\"Onboarding-listItem\">\\n          <p class=\"CDB-Text LayerOnboarding-description\">' +\n__e( _t('analysis-onboarding.description-list.item1')) +\n'</p>\\n        </li>\\n\\n        <li class=\"Onboarding-listItem\">\\n          <p class=\"CDB-Text LayerOnboarding-description\">' +\n((__t = ( _t('analysis-onboarding.description-list.item2'))) == null ? '' : __t) +\n'</p>\\n        </li>\\n\\n        <li class=\"Onboarding-listItem\">\\n          <p class=\"CDB-Text LayerOnboarding-description\">' +\n__e( _t('analysis-onboarding.description-list.item3')) +\n'</p>\\n        </li>\\n\\n        <li class=\"Onboarding-listItem\">\\n          <p class=\"CDB-Text LayerOnboarding-description\">' +\n__e( _t('analysis-onboarding.description-list.item4')) +\n'</p>\\n        </li>\\n      </ul>\\n    </div>\\n\\n    <div class=\"LayerOnboarding-footer\">\\n      <div class=\"LayerOnboarding-footerButtons\">\\n        <button class=\"CDB-Button CDB-Button--secondary CDB-Button--white CDB-Button--big Onboarding-footer--marginRight js-close\">\\n          <span class=\"CDB-Button-Text CDB-Text u-upperCase is-semibold CDB-Size-medium\">' +\n__e( _t('analysis-onboarding.done')) +\n'</span>\\n        </button>\\n\\n        <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-add-analysis\">\\n          <span class=\"CDB-Button-Text CDB-Text u-upperCase is-semibold CDB-Size-medium\">' +\n__e( _t('analysis-onboarding.add-analysis')) +\n'</span>\\n        </button>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar $ = require('jquery');\nvar OnboardingView = require('builder/components/onboardings/generic/generic-onboarding-view');\nvar template = require('./data-onboarding.tpl');\n\nmodule.exports = OnboardingView.extend({\n  initialize: function (opts) {\n    OnboardingView.prototype.initialize.call(this, _.extend(opts, {\n      template: template,\n      numberOfSteps: 4,\n      modifier: '--data'\n    }));\n  },\n\n  _onChangeStep: function () {\n    OnboardingView.prototype._onChangeStep.call(this);\n\n    var step = this.model.get('step');\n\n    if (step === 0) {\n      this._setMiddlePad('.js-editorPanel');\n    } else if (step === 1) {\n      this._setMiddlePad('.js-editorPanelHeader', {top: 16, right: 24, left: 24});\n    } else if (step === 2) {\n      this._setMiddlePad('.js-editorPanelContent', {top: 8, right: 24, left: 24, bottom: -$('.js-optionsBar').outerHeight()});\n    } else if (step === 3) {\n      this._setMiddlePad('.js-optionsBar', null, {top: -190});\n    } else if (step === 4) {\n      var featurePosition = this._getFeatureEditionPosition();\n      this._setMiddlePad(featurePosition, {top: 8, right: 8, bottom: 8, left: 8}, {top: -270, left: -330});\n    }\n  },\n\n  _getFeatureEditionPosition: function () {\n    var $switch = $('.js-mapTableView').first();\n    var $featureEdition = $('.js-newGeometryView').first();\n    var leftOffset = Math.min($switch.length > 0 ? $switch.offset().left : Number.MAX_VALUE, $featureEdition.length > 0 ? $featureEdition.offset().left : Number.MAX_VALUE);\n    var topOffset = Math.min($switch.length > 0 ? $switch.offset().top : Number.MAX_VALUE, $featureEdition.length > 0 ? $featureEdition.offset().top : Number.MAX_VALUE);\n    var rightOffset = Math.max(\n      $switch.length > 0 ? $switch.offset().left + $switch.outerWidth() : Number.MIN_VALUE,\n      $featureEdition.length > 0 ? $featureEdition.offset().left + $featureEdition.outerWidth() : Number.MIN_VALUE\n    );\n    var bottomOffset = Math.max(\n      $switch.length > 0 ? $switch.offset().top + $switch.outerHeight() : Number.MIN_VALUE,\n      $featureEdition.length > 0 ? $featureEdition.offset().top + $featureEdition.outerHeight() : Number.MIN_VALUE\n    );\n\n    return {\n      left: leftOffset,\n      top: topOffset,\n      width: rightOffset - leftOffset,\n      height: bottomOffset - topOffset\n    };\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"LayerOnboarding-toolbarOverlay\"></div>\\n\\n<div class=\"LayerOnboarding-pads LayerOnboarding-pads--left\">\\n  <div class=\"LayerOnboarding-padTop\"></div>\\n  <div class=\"LayerOnboarding-padMiddle js-highlight\">\\n    <div class=\"LayerOnboarding-body is-step0 js-step\">\\n      <div class=\"LayerOnboarding-step is-step1\">\\n        <p class=\"CDB-Text LayerOnboarding-headerTitle\">1/4</p>\\n        <p class=\"CDB-Text LayerOnboarding-headerText\">' +\n__e( _t('data-onboarding.layer-options.title')) +\n'</p>\\n        <p class=\"CDB-Text LayerOnboarding-description\">\\n          ' +\n__e( _t('data-onboarding.layer-options.description')) +\n'\\n        </p>\\n      </div>\\n      <div class=\"LayerOnboarding-step is-step2\">\\n        <p class=\"CDB-Text LayerOnboarding-headerTitle\">2/4</p>\\n        <p class=\"CDB-Text LayerOnboarding-headerText\">' +\n__e( _t('data-onboarding.data-tab.title')) +\n'</p>\\n        <p class=\"CDB-Text LayerOnboarding-description\">\\n          ' +\n__e( _t('data-onboarding.data-tab.description')) +\n'\\n        </p>\\n      </div>\\n\\n      <div class=\"LayerOnboarding-step is-step3\">\\n        <p class=\"CDB-Text LayerOnboarding-headerTitle\">3/4</p>\\n        <p class=\"CDB-Text LayerOnboarding-headerText\">' +\n__e( _t('data-onboarding.sql-editor.title')) +\n'</p>\\n        <p class=\"CDB-Text LayerOnboarding-description\">\\n          ' +\n__e( _t('data-onboarding.sql-editor.description')) +\n'\\n        </p>\\n      </div>\\n\\n      <div class=\"LayerOnboarding-step is-step4\">\\n        <p class=\"CDB-Text LayerOnboarding-headerTitle\">4/4</p>\\n        <p class=\"CDB-Text LayerOnboarding-headerText is-step4\">' +\n__e( _t('data-onboarding.add-geometry.title')) +\n'</p>\\n        <p class=\"CDB-Text LayerOnboarding-description is-step4\">\\n          ' +\n__e( _t('data-onboarding.add-geometry.description')) +\n'\\n        </p>\\n      </div>\\n\\n      <div class=\"LayerOnboarding-footer is-step1 is-step2 is-step3\">\\n        <div class=\"LayerOnboarding-footerButtons\">\\n          <button class=\"CDB-Button CDB-Button--secondary CDB-Button--white CDB-Button--big Onboarding-footer--marginRight js-close\">\\n            <span class=\"CDB-Button-Text CDB-Text u-upperCase is-semibold CDB-Size-medium\">' +\n__e( _t('data-onboarding.exit')) +\n'</span>\\n          </button>\\n\\n          <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-next\">\\n            <span class=\"CDB-Button-Text CDB-Text u-upperCase is-semibold CDB-Size-medium\">' +\n__e( _t('data-onboarding.next')) +\n'</span>\\n          </button>\\n        </div>\\n      </div>\\n\\n      <div class=\"LayerOnboarding-footer is-step4\">\\n        <div class=\"LayerOnboarding-footerButtons\">\\n          <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-close\">\\n            <span class=\"CDB-Button-Text CDB-Text u-upperCase is-semibold CDB-Size-medium\">' +\n__e( _t('data-onboarding.add-geometry.edit-layer') ) +\n'</span>\\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n  <div class=\"LayerOnboarding-padBottom\"></div>\\n</div>\\n\\n<div class=\"LayerOnboarding-contentWrapper is-step0 js-step\">\\n  <div class=\"LayerOnboarding-contentBody is-step0 js-step\">\\n    <div class=\"LayerOnboarding-header is-step0\">\\n      <p class=\"CDB-Text LayerOnboarding-headerTitle\">' +\n__e( _t('data-onboarding.title')) +\n'</p>\\n\\n      <p class=\"CDB-Text LayerOnboarding-description\">\\n        ' +\n((__t = ( _t('data-onboarding.description'))) == null ? '' : __t) +\n'\\n      </p>\\n    </div>\\n\\n    <div class=\"LayerOnboarding-footer is-step0\">\\n      <div class=\"LayerOnboarding-footerButtons\">\\n        <button class=\"CDB-Button CDB-Button--secondary CDB-Button--white CDB-Button--big Onboarding-footer--marginRight js-start\">\\n          <span class=\"CDB-Button-Text CDB-Text u-upperCase is-semibold CDB-Size-medium\">' +\n__e( _t('data-onboarding.take-tour')) +\n'</span>\\n        </button>\\n\\n        <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-close\">\\n          <span class=\"CDB-Button-Text CDB-Text u-upperCase is-semibold CDB-Size-medium\">' +\n__e( _t('data-onboarding.edit-layer')) +\n'</span>\\n        </button>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar $ = require('jquery');\nvar OnboardingView = require('builder/components/onboardings/generic/generic-onboarding-view');\nvar defaultTemplate = require('./style-onboarding.tpl');\nvar pointsTemplate = require('./style-points-onboarding.tpl');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'geom'\n];\n\nmodule.exports = OnboardingView.extend({\n  module: 'components/onboardings/layers/style-onboarding/style-onboarding-view',\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    var template = defaultTemplate;\n    var modifier = '--style';\n    var steps = 2;\n\n    if (this._geom === 'point') {\n      template = pointsTemplate;\n      steps = 3;\n    }\n\n    OnboardingView.prototype.initialize.call(this, _.extend(opts, {\n      template: template,\n      numberOfSteps: steps,\n      modifier: modifier\n    }));\n  },\n\n  _onChangeStep: function () {\n    OnboardingView.prototype._onChangeStep.call(this);\n\n    var step = this.model.get('step');\n\n    switch (step) {\n      case 0:\n        this._setMiddlePad('.js-editorPanel');\n        break;\n      case 1:\n        this._setStepOne();\n        break;\n      case 2:\n        this._setStepTwo();\n        break;\n      case 3:\n        this._highlightOptionsBar();\n        break;\n    }\n  },\n\n  _setStepOne: function () {\n    var $noGeom = $('.js-styleNoGeom');\n\n    if ($noGeom.length > 0) {\n      this._setMiddlePad('.js-styleNoGeom', {top: 8, right: 24, left: 24, bottom: 8});\n    } else if (this._numberOfSteps === 3) {\n      var aggregationInfo = this._getAggregationPositionAndPadding();\n      this._setMiddlePad(aggregationInfo.position, aggregationInfo.padding);\n    } else {\n      this._highlightStyleProperties();\n    }\n  },\n\n  _setStepTwo: function () {\n    if (this._numberOfSteps === 2) {\n      this._highlightOptionsBar();\n    } else {\n      this._highlightStyleProperties();\n    }\n  },\n\n  _highlightStyleProperties: function () {\n    this._setMiddlePad('.js-styleProperties', {top: 8, right: 24, left: 24, bottom: 8});\n  },\n\n  _highlightOptionsBar: function () {\n    this._setMiddlePad('.js-optionsBar', null, {top: -190});\n  },\n\n  _getAggregationPositionAndPadding: function () {\n    var $aggregationTypes = $('.js-aggregationTypes');\n    var $aggregationOptions = $('.js-aggregationOptions');\n    var left = $aggregationTypes.offset().left;\n    var top = $aggregationTypes.offset().top;\n    var width = $aggregationTypes.outerWidth();\n    var height = $aggregationTypes.outerHeight();\n    var bottomPadding = 0;\n\n    if ($aggregationOptions.length > 0) {\n      height += $aggregationOptions.outerHeight();\n      bottomPadding = 8;\n    }\n\n    return {\n      position: {\n        top: top,\n        left: left,\n        width: width,\n        height: height\n      },\n      padding: {\n        top: 8,\n        right: 24,\n        left: 24,\n        bottom: bottomPadding\n      }\n    };\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"LayerOnboarding-toolbarOverlay\"></div>\\n\\n<div class=\"LayerOnboarding-pads LayerOnboarding-pads--left\">\\n  <div class=\"LayerOnboarding-padTop\"></div>\\n  <div class=\"LayerOnboarding-padMiddle js-highlight\">\\n    <div class=\"LayerOnboarding-body is-step0 js-step\">\\n      <div class=\"LayerOnboarding-step is-step1\">\\n        <p class=\"CDB-Text LayerOnboarding-headerTitle\">1/2</p>\\n        <p class=\"CDB-Text LayerOnboarding-headerText\">' +\n__e( _t('style-onboarding.style.title')) +\n'</p>\\n        <p class=\"CDB-Text LayerOnboarding-description LayerOnboarding-description--style\">\\n          ' +\n__e( _t('style-onboarding.style.short-description')) +\n'\\n        </p>\\n      </div>\\n\\n      <div class=\"LayerOnboarding-step is-step2\">\\n        <p class=\"CDB-Text LayerOnboarding-headerTitle\">2/2</p>\\n        <p class=\"CDB-Text LayerOnboarding-headerText\">' +\n__e( _t('style-onboarding.cartocss.title')) +\n'</p>\\n        <p class=\"CDB-Text LayerOnboarding-description\">\\n          ' +\n__e( _t('style-onboarding.cartocss.description')) +\n'\\n        </p>\\n      </div>\\n\\n      <div class=\"LayerOnboarding-footer is-step1\">\\n        <div class=\"LayerOnboarding-footerButtons\">\\n          <button class=\"CDB-Button CDB-Button--secondary CDB-Button--white CDB-Button--big Onboarding-footer--marginRight js-close\">\\n            <span class=\"CDB-Button-Text CDB-Text u-upperCase is-semibold CDB-Size-medium\">' +\n__e( _t('style-onboarding.exit')) +\n'</span>\\n          </button>\\n\\n          <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-next\">\\n            <span class=\"CDB-Button-Text CDB-Text u-upperCase is-semibold CDB-Size-medium\">' +\n__e( _t('style-onboarding.next')) +\n'</span>\\n          </button>\\n        </div>\\n      </div>\\n\\n      <div class=\"LayerOnboarding-footer is-step2\">\\n        <div class=\"LayerOnboarding-footerButtons\">\\n          <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-close\">\\n            <span class=\"CDB-Button-Text CDB-Text u-upperCase is-semibold CDB-Size-medium\">' +\n__e( _t('style-onboarding.style-layer')) +\n'</span>\\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n  <div class=\"LayerOnboarding-padBottom\"></div>\\n</div>\\n\\n<div class=\"LayerOnboarding-contentWrapper is-step0 js-step\">\\n  <div class=\"LayerOnboarding-contentBody is-step0 js-step\">\\n    <div class=\"LayerOnboarding-header is-step0\">\\n      <p class=\"CDB-Text LayerOnboarding-headerTitle\">' +\n__e( _t('style-onboarding.title')) +\n'</p>\\n\\n      <p class=\"CDB-Text LayerOnboarding-description\">\\n        ' +\n__e( _t('style-onboarding.description')) +\n'\\n      </p>\\n    </div>\\n\\n    <div class=\"LayerOnboarding-footer is-step0\">\\n      <div class=\"LayerOnboarding-footerButtons\">\\n        <button class=\"CDB-Button CDB-Button--secondary CDB-Button--white CDB-Button--big Onboarding-footer--marginRight js-start\">\\n          <span class=\"CDB-Button-Text CDB-Text u-upperCase is-semibold CDB-Size-medium\">' +\n__e( _t('style-onboarding.take-tour')) +\n'</span>\\n        </button>\\n\\n        <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-close\">\\n          <span class=\"CDB-Button-Text CDB-Text u-upperCase is-semibold CDB-Size-medium\">' +\n__e( _t('style-onboarding.style-layer')) +\n'</span>\\n        </button>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"LayerOnboarding-toolbarOverlay\"></div>\\n\\n<div class=\"LayerOnboarding-pads LayerOnboarding-pads--left\">\\n  <div class=\"LayerOnboarding-padTop\"></div>\\n  <div class=\"LayerOnboarding-padMiddle js-highlight\">\\n    <div class=\"LayerOnboarding-body is-step0 js-step\">\\n      <div class=\"LayerOnboarding-step is-step1\">\\n        <p class=\"CDB-Text LayerOnboarding-headerTitle\">1/3</p>\\n        <p class=\"CDB-Text LayerOnboarding-headerText\">' +\n__e( _t('style-onboarding.aggregation.title')) +\n'</p>\\n        <p class=\"CDB-Text LayerOnboarding-description\">\\n          ' +\n__e( _t('style-onboarding.aggregation.description')) +\n'\\n        </p>\\n      </div>\\n      <div class=\"LayerOnboarding-step is-step2\">\\n        <p class=\"CDB-Text LayerOnboarding-headerTitle\">2/3</p>\\n        <p class=\"CDB-Text LayerOnboarding-headerText\">' +\n__e( _t('style-onboarding.style.title')) +\n'</p>\\n        <p class=\"CDB-Text LayerOnboarding-description LayerOnboarding-description--style\">\\n          ' +\n__e( _t('style-onboarding.style.description')) +\n'\\n        </p>\\n      </div>\\n\\n      <div class=\"LayerOnboarding-step is-step3\">\\n        <p class=\"CDB-Text LayerOnboarding-headerTitle\">3/3</p>\\n        <p class=\"CDB-Text LayerOnboarding-headerText\">' +\n__e( _t('style-onboarding.cartocss.title')) +\n'</p>\\n        <p class=\"CDB-Text LayerOnboarding-description\">\\n          ' +\n__e( _t('style-onboarding.cartocss.description')) +\n'\\n        </p>\\n      </div>\\n\\n      <div class=\"LayerOnboarding-footer is-step1 is-step2\">\\n        <div class=\"LayerOnboarding-footerButtons\">\\n          <button class=\"CDB-Button CDB-Button--secondary CDB-Button--white CDB-Button--big Onboarding-footer--marginRight js-close\">\\n            <span class=\"CDB-Button-Text CDB-Text u-upperCase is-semibold CDB-Size-medium\">' +\n__e( _t('style-onboarding.exit')) +\n'</span>\\n          </button>\\n\\n          <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-next\">\\n            <span class=\"CDB-Button-Text CDB-Text u-upperCase is-semibold CDB-Size-medium\">' +\n__e( _t('style-onboarding.next')) +\n'</span>\\n          </button>\\n        </div>\\n      </div>\\n\\n      <div class=\"LayerOnboarding-footer is-step3\">\\n        <div class=\"LayerOnboarding-footerButtons\">\\n          <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-close\">\\n            <span class=\"CDB-Button-Text CDB-Text u-upperCase is-semibold CDB-Size-medium\">' +\n__e( _t('style-onboarding.style-layer')) +\n'</span>\\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n  <div class=\"LayerOnboarding-padBottom\"></div>\\n</div>\\n\\n<div class=\"LayerOnboarding-contentWrapper is-step0 js-step\">\\n  <div class=\"LayerOnboarding-contentBody is-step0 js-step\">\\n    <div class=\"LayerOnboarding-header is-step0\">\\n      <p class=\"CDB-Text LayerOnboarding-headerTitle\">' +\n__e( _t('style-onboarding.title')) +\n'</p>\\n\\n      <p class=\"CDB-Text LayerOnboarding-description\">\\n        ' +\n__e( _t('style-onboarding.description')) +\n'\\n      </p>\\n    </div>\\n\\n    <div class=\"LayerOnboarding-footer is-step0\">\\n      <div class=\"LayerOnboarding-footerButtons\">\\n        <button class=\"CDB-Button CDB-Button--secondary CDB-Button--white CDB-Button--big Onboarding-footer--marginRight js-start\">\\n          <span class=\"CDB-Button-Text CDB-Text u-upperCase is-semibold CDB-Size-medium\">' +\n__e( _t('style-onboarding.take-tour')) +\n'</span>\\n        </button>\\n\\n        <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-close\">\\n          <span class=\"CDB-Button-Text CDB-Text u-upperCase is-semibold CDB-Size-medium\">' +\n__e( _t('style-onboarding.style-layer')) +\n'</span>\\n        </button>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\n\n/**\n * View model of a onboarding\n */\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    show: true,\n    createContentView: function () {\n      return new CoreView();\n    },\n    getContentClasses: function () {\n      return null;\n    }\n  },\n\n  createContentView: function () {\n    return this.get('createContentView')(this);\n  },\n\n  getContentClasses: function () {\n    return this.get('contentClasses');\n  },\n\n  show: function () {\n    this.set('show', true);\n  },\n\n  hide: function () {\n    this.set('show', false);\n  },\n\n  isHidden: function () {\n    return !this.get('show');\n  },\n\n  /**\n   * @override {Backbone.Model.prototype.destroy}\n   */\n  destroy: function () {\n    var args = Array.prototype.slice.call(arguments);\n    this.trigger.apply(this, ['destroy'].concat(args));\n  }\n});\n","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar template = require('./onboarding.tpl');\n\n// Ought to match the duration of the .Dialog.is-closing animation.\nvar CLOSE_DELAY_MS = 120;\n\nmodule.exports = CoreView.extend({\n  className: 'Onboarding is-opening',\n\n  initialize: function () {\n    this.listenTo(this.model, 'change:show', this._onShowChange);\n    this.listenTo(this.model, 'destroy', this._onDestroy);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template());\n\n    var view = this.model.createContentView();\n    this.$el.addClass(this.model.getContentClasses());\n    this.addView(view);\n\n    view.bind('customEvent', this._onCustomEvent, this);\n    view.bind('close', this._onClose, this);\n\n    view.render();\n    this.$('.js-content').append(view.el);\n\n    return this;\n  },\n\n  show: function () {\n    this.model.show();\n  },\n\n  hide: function () {\n    this.model.hide();\n  },\n\n  destroy: function () {\n    // 'remove' would be a better name ofc, but there is already an internal method with that name in CoreView\n    this.model.destroy();\n  },\n\n  _onShowChange: function (m, show) {\n    if (show) {\n      this.$el.show();\n      this.$el.removeClass('is-closing').addClass('is-opening');\n    } else {\n      this.$el.removeClass('is-opening').addClass('is-closing');\n      this._delayDueToAnimation(function () {\n        this.$el.hide();\n      });\n    }\n  },\n\n  _onClose: function () {\n    this.destroy();\n  },\n\n  _onCustomEvent: function (customEventName) {\n    this.destroy();\n    this.trigger('customEvent', customEventName, this);\n  },\n\n  _onDestroy: function () {\n    this.hide();\n    _.invoke(this._subviews, 'allOff');\n    this._delayDueToAnimation(function () {\n      this.clean();\n    });\n  },\n\n  _delayDueToAnimation: function (fn) {\n    setTimeout(fn.bind(this), CLOSE_DELAY_MS);\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"Onboarding js-content\"></div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar OnboardingView = require('./onboarding-view');\nvar OnboardingViewModel = require('./onboarding-view-model');\n\nvar DESTROYED_ONBOARDING_EVENT = 'destroyedOnboarding';\n\n/**\n * Top-level API to handle onboardings.\n * Is intended to be instantiated and registered in some top-level namespace to be accessibel within the lifecycle of\n * an client-side application.\n *\n * Example:\n * // In some entry-point:\n * cdb.onboardings = new OnboardingsServiceModel();\n *\n * // Later, in any view, calling create will create a new onboarding viewModel\n * var onboardingView = cdb.onboardings.create(fn)\n *\n * You will probably see the name of \"Onboarding\" here and there, it's the old nomenclature for the concept of Onboarding.\n */\nmodule.exports = Backbone.Model.extend({\n\n  /**\n   * Creates a new onboarding view\n   *\n   * @param {Function} createContentView\n   * @return {View} the new onboarding view\n   */\n  create: function (createContentView, contentClasses) {\n    if (!_.isFunction(createContentView)) throw new Error('createContentView is required');\n\n    if (!this._onboardingView) {\n      this.trigger('willCreateOnboarding');\n      this._onboardingView = this._newOnboardingView();\n      this.trigger('didCreateOnboarding', this._onboardingView);\n      document.body.appendChild(this._onboardingView.el);\n    }\n\n    this._onboardingView.model.set('createContentView', createContentView);\n    this._onboardingView.model.set('contentClasses', contentClasses);\n    this._onboardingView.render();\n\n    return this._onboardingView;\n  },\n\n  /**\n   * Convenience method to add a listener when current onboarding is destroyed\n   *\n   * This is the same as doing\n   * onboardings.create(function (model) {\n   *   model.once('destroy', callback, context); // <-- same as onboardings.onDestroyOnce(callback, context);\n   *   return new MyView({ … });\n   * });\n   *\n   * @param {Function} callback\n   * @param {Object} [context = undefined]\n   */\n  onDestroyOnce: function (callback, context) {\n    this.once(DESTROYED_ONBOARDING_EVENT, callback, context);\n  },\n\n  destroy: function () {\n    if (this._onboardingView) {\n      this._onboardingView.model.destroy();\n    }\n  },\n\n  _newOnboardingView: function () {\n    var viewModel = new OnboardingViewModel();\n    this._handleBodyClass(viewModel);\n    this._destroyOnEsc(viewModel);\n\n    this.listenToOnce(viewModel, 'destroy', function () {\n      this._onboardingView = null;\n      this.trigger.apply(this, [DESTROYED_ONBOARDING_EVENT].concat(Array.prototype.slice.call(arguments)));\n      this.stopListening(viewModel);\n    });\n\n    var onboardingView = new OnboardingView({\n      model: viewModel\n    });\n\n    onboardingView.bind('customEvent', function (eventName) {\n      this.trigger(eventName);\n    }, this);\n\n    return onboardingView;\n  },\n\n  _destroyOnEsc: function (viewModel) {\n    var destroyOnEsc = function (ev) {\n      if (ev.keyCode === 27) {\n        viewModel.destroy();\n      }\n    };\n    document.addEventListener('keydown', destroyOnEsc);\n    this.listenToOnce(viewModel, 'destroy', function () {\n      document.removeEventListener('keydown', destroyOnEsc);\n    });\n  },\n\n  /**\n   * TL;DR this method manages document.body class state, to enable scroll inside of an open onboarding.\n   *\n   * Some onboarding content have too much content that can be displayed in the viewport the scroll needs to be enabled.\n   * Since the onboarding is implemented as a fixed positioned element the body needs to be fixated too, for the scroll to\n   * be enabled inside the onboarding instead.\n   */\n  _handleBodyClass: function (viewModel) {\n    var bodyClass = 'is-inDialog';\n    document.body.classList.add(bodyClass);\n\n    this.listenTo(viewModel, 'change:show', function (m, show) {\n      document.body.classList[show ? 'add' : 'remove'](bodyClass);\n    });\n\n    this.listenToOnce(viewModel, 'destroy', function () {\n      document.body.classList.remove(bodyClass);\n    });\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"Filters is-relative\">\\n  <div class=\"Filters-inner\">\\n    <div class=\"Filters-row Share-filtersRow js-filters\">\\n      <div class=\"Filters-typeItem Filters-typeItem--searchEnabler\">\\n        <p class=\"Filters-searchLink js-search-link u-alignCenter CDB-Text CDB-Size-medium u-upperCase\">\\n          <i class=\"Filters-searchLinkIcon CDB-IconFont CDB-IconFont-lens u-rSpace--xl\"></i> ' +\n__e( _t('components.pagination-search.filter.search') ) +\n'\\n        </p>\\n      </div>\\n      <div class=\"Filters-typeItem Filters-typeItem--searchField\">\\n        <input class=\"Filters-searchInput CDB-Text CDB-Size-medium js-search-input\" type=\"text\" value=\"' +\n__e( q ) +\n'\" placeholder=\"' +\n__e( _t('components.pagination-search.filter.placeholder') ) +\n'\" />\\n        ';\n if (q !== '') { ;\n__p += '\\n        <button type=\"button\" class=\"CDB-Shape Filters-cleanSearch js-clean-search u-actionTextColor\">\\n          <div class=\"CDB-Shape-close is-blue is-large\"></div>\\n        </button>\\n        ';\n } ;\n__p += '\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n<div class=\"js-content\"></div>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<span class=\"CDB-Text CDB-Size-medium u-altTextColor Pagination-label\">\\n  Page ' +\n__e( currentPage ) +\n' of ' +\n__e( pagesCount ) +\n'\\n</span>\\n<ul class=\"Pagination-list CDB-Text CDB-Size-medium\">\\n  ';\n m.pagesToDisplay().forEach(function(page) { ;\n__p += '\\n    ';\n if (page > 0) { ;\n__p += '\\n      <li class=\"Pagination-listItem ' +\n__e( m.isCurrentPage(page) ? 'is-current' : '' ) +\n'\">\\n        <button class=\"Pagination-listItemInner Pagination-listItemInner--link u-actionTextColor js-listItem\" data-page=\"' +\n__e( page ) +\n'\">' +\n__e( page ) +\n'</button>\\n      </li>\\n    ';\n } else { ;\n__p += '\\n      <li class=\"Pagination-listItem Pagination-listItem\">\\n        <span class=\"Pagination-listItemInner Pagination-listItemInner--more\">&hellip;</span>\\n      </li>\\n    ';\n } ;\n__p += '\\n  ';\n }) ;\n__p += '\\n</ul>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<span class=\"CDB-Text CDB-Size-medium u-altTextColor Pagination-label\">\\n  Page ' +\n__e( currentPage ) +\n' of ' +\n__e( pagesCount ) +\n'\\n</span>\\n<ul class=\"Pagination-list CDB-Text CDB-Size-medium\">\\n  ';\n m.pagesToDisplay().forEach(function(page) { ;\n__p += '\\n    ';\n if (page > 0) { ;\n__p += '\\n      <li class=\"Pagination-listItem ' +\n__e( m.isCurrentPage(page) ? 'is-current' : '' ) +\n'\">\\n        <a class=\"Pagination-listItemInner Pagination-listItemInner--link js-listItem\" href=\"' +\n__e( m.urlTo(page) ) +\n'\" data-page=\"' +\n__e( page ) +\n'\">' +\n__e( page ) +\n'</a>\\n      </li>\\n    ';\n } else { ;\n__p += '\\n      <li class=\"Pagination-listItem Pagination-listItem\">\\n        <span class=\"Pagination-listItemInner Pagination-listItemInner--more\">&hellip;</span>\\n      </li>\\n    ';\n } ;\n__p += '\\n  ';\n }) ;\n__p += '\\n</ul>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"CDB-Box-modalHeader\">\\n  <ul class=\"CDB-Box-modalHeaderItem CDB-Box-modalHeaderItem--block CDB-Box-modalHeaderItem--paddingHorizontal\">\\n    <li class=\"CDB-ListDecoration-item CDB-ListDecoration-itemPadding--vertical\">\\n      <button class=\"u-actionTextColor js-back CDB-Size-medium u-rSpace\">\\n        <i class=\"CDB-IconFont CDB-IconFont-arrowPrev\"></i>\\n      </button>\\n      <span class=\"CDB-Text CDB-Size-medium\">\\n        ' +\n__e( _t('components.modals.publish.privacy.password.title') ) +\n'\\n      </span>\\n    </li>\\n  </ul>\\n</div>\\n<ul class=\"CustomList-list js-customList\">\\n  <li class=\"Privacy-passwordField CustomList-item\">\\n    <input type=\"password\" class=\"CDB-Text CDB-InputText js-input\" placeholder=\"' +\n__e( _t('components.modals.publish.privacy.password.placeholder') ) +\n'\">\\n  </li>\\n</ul>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"Privacy-cta u-flex\">\\n  <svg width=\"16px\" height=\"16px\" viewBox=\"0 0 16 16\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n    <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\\n      <path d=\"M10.0946667,4.4109223 C10.8886667,4.1368747 11.6846667,3.80147316 12.0073333,3.4715253 C12.7866667,2.67392407 12.7866667,1.37662907 12.0073333,0.579027844 C11.2513333,-0.193350099 9.934,-0.192668389 9.17866667,0.579027844 C8.74133333,1.0262299 8.29266667,2.36033726 8,3.37608583 C7.70666667,2.36033726 7.25866667,1.0262299 6.82133333,0.579027844 C6.066,-0.193350099 4.748,-0.192668389 3.99266667,0.579027844 C3.21266667,1.37662907 3.21266667,2.67392407 3.99266667,3.4715253 C4.316,3.80147316 5.11133333,4.1368747 5.90533333,4.4109223 L0.333333333,4.4109223 C0.149333333,4.4109223 0,4.56362544 0,4.75177753 L0,7.47861934 C0,7.66677142 0.149333333,7.81947456 0.333333333,7.81947456 L0.666666667,7.81947456 L0.666666667,15.6591448 C0.666666667,15.8472969 0.816,16 1,16 L15,16 C15.184,16 15.3333333,15.8472969 15.3333333,15.6591448 L15.3333333,7.81947456 L15.6666667,7.81947456 C15.8506667,7.81947456 16,7.66677142 16,7.47861934 L16,4.75177753 C16,4.56362544 15.8506667,4.4109223 15.6666667,4.4109223 L10.0946667,4.4109223 Z M6,6.95652174 L6,4.86956522 L10,4.86956522 L10,6.95652174 L6,6.95652174 L6,6.95652174 Z M10,7.65217391 L10,15.3043478 L6,15.3043478 L6,7.65217391 L10,7.65217391 L10,7.65217391 Z M9.80833133,1.08822938 C10.0510474,0.834996985 10.3727426,0.695652174 10.7169115,0.695652174 C11.0597961,0.695652174 11.3821334,0.834996985 11.6248495,1.08755946 C12.1250502,1.6101025 12.1250502,2.46023983 11.6248495,2.98278288 C11.2729754,3.34990286 9.79227867,3.85636766 8.66666667,4.17391304 C8.97102496,2.99953105 9.45581507,1.45534937 9.80833133,1.08822938 L9.80833133,1.08822938 Z M4.37515049,1.08822938 C4.6178666,0.834996985 4.94020387,0.695652174 5.28373064,0.695652174 C5.6266153,0.695652174 5.94895256,0.834996985 6.19166867,1.08755946 C6.54354282,1.45467944 7.02833293,2.99886112 7.33333333,4.17391304 C6.20707922,3.85569773 4.72638253,3.34990286 4.37515049,2.98278288 C3.87494984,2.46090976 3.87494984,1.61077243 4.37515049,1.08822938 L4.37515049,1.08822938 Z M0.666666667,4.86956522 L5.33333333,4.86956522 L5.33333333,6.95652174 L1,6.95652174 L0.666666667,6.95652174 L0.666666667,4.86956522 L0.666666667,4.86956522 Z M1.33333333,7.65217391 L5.33333333,7.65217391 L5.33333333,15.3043478 L1.33333333,15.3043478 L1.33333333,7.65217391 L1.33333333,7.65217391 Z M14.6666667,15.3043478 L10.6666667,15.3043478 L10.6666667,7.65217391 L14.6666667,7.65217391 L14.6666667,15.3043478 L14.6666667,15.3043478 Z M15.3333333,6.95652174 L15,6.95652174 L10.6666667,6.95652174 L10.6666667,4.86956522 L15.3333333,4.86956522 L15.3333333,6.95652174 L15.3333333,6.95652174 Z\" id=\"Shape\" fill=\"#9BC63B\"></path>\\n    </g>\\n  </svg>\\n  <div class=\"CDB-Text CDB-Size CDB-Size-small u-lSpace--xl\">\\n    <h3 class=\"u-secondaryTextColor\">' +\n__e( _t('components.modals.publish.privacy.cta.title') ) +\n'</h3>\\n    <a href=\"' +\n__e( upgradeURL ) +\n'\">\\n      ' +\n__e( _t( 'components.modals.publish.privacy.cta.desc-' + (showTrial ? 'trial' : 'notrial') ) ) +\n'\\n    </a>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"Privacy-dropdown\">\\n  <button class=\"Privacy-dropdownTrigger Tag Tag-fill Tag-fill--' +\n__e( cssClass ) +\n' CDB-Text CDB-Size-small u-upperCase js-tooltip ';\n if (isOwner && canChangePrivacy) { ;\n__p += 'js-toggle';\n } else { ;\n__p += 'is-disabled';\n } ;\n__p += '\">\\n    ';\n if (isLoading) { ;\n__p += '\\n      <div class=\"CDB-LoaderIcon CDB-LoaderIcon--small u-flex\">\\n        <svg class=\"CDB-LoaderIcon-spinner\" viewBox=\"0 0 50 50\">\\n          <circle class=\"CDB-LoaderIcon-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"></circle>\\n        </svg>\\n      </div>\\n    ';\n } else { ;\n__p += '\\n      ' +\n__e( privacy ) +\n'\\n    ';\n } ;\n__p += '\\n  </button>\\n\\n  <div class=\"js-dialog\"></div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"Tab-paneContent js-content\"></div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n\n if (type === 'vertical') { ;\n__p += '\\n<div class=\"ScrollView-shadow ScrollView-shadow--top js-topShadow\"></div>\\n<div class=\"ScrollView-shadow ScrollView-shadow--bottom js-bottomShadow\"></div>\\n';\n } else { ;\n__p += '\\n<div class=\"Carousel-shadow Carousel-shadow--left js-leftShadow\"></div>\\n<div class=\"Carousel-shadow Carousel-shadow--right js-rightShadow\"></div>\\n';\n } ;\n__p += '\\n<div class=\"ScrollView-wrapper js-wrapper js-perfect-scroll\">\\n  <div class=\"ScrollView-content js-content\"></div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar TabPaneViewRouted = require('./tab-pane-view-routed.js');\nvar TabPaneCollection = require('./tab-pane-collection');\nvar IconView = require('./tab-pane-icon-view');\n\n/**\n * Creates a tab pane representing editor's left-vertical menu, where the tab items are large icons,\n * and the content on the right.\n *\n * Example usage:\n * {\n *   icon: 'my-icon',\n *   createContentView: CoreView(),\n *   selected: false\n * }\n * @param {Array} paneItems\n * @param {Object} options\n * @return {Object} instance of a Backbone view\n */\nmodule.exports = function (paneItems, options) {\n  options = options || {};\n  var tabPaneItemIconOptions = options.tabPaneItemIconOptions;\n\n  var items = paneItems.map(function (paneItem) {\n    ['icon', 'createContentView', 'tooltip'].forEach(function (check) {\n      if (!paneItem[check]) {\n        throw new Error(check + ' should be provided');\n      }\n    });\n\n    return {\n      selected: paneItem.selected,\n      name: paneItem.name,\n      route: paneItem.route,\n      icon: paneItem.icon,\n      onClick: paneItem.onClick,\n      tooltip: paneItem.tooltip,\n      createButtonView: function () {\n        return new IconView(_.extend({ model: this }, tabPaneItemIconOptions));\n      },\n      createContentView: function () {\n        return paneItem.createContentView && paneItem.createContentView() || new CoreView();\n      }\n    };\n  });\n\n  var collection = new TabPaneCollection(items);\n  var tabPaneOptions = options.tabPaneOptions;\n\n  return new TabPaneViewRouted(\n    _.extend(\n      { collection: collection },\n      tabPaneOptions\n    )\n  );\n};\n","var _ = require('underscore');\nvar cdb = require('internal-carto.js');\nvar TabPaneView = require('./tab-pane-view.js');\nvar TabPaneCollection = require('./tab-pane-collection');\nvar TemplateView = require('./tab-pane-template-view');\n\n/**\n * Creates a tab pane, where the menu consists of text labels.\n *\n * Example usage:\n * {\n *   label: 'My label',\n *   createContentView: cdb.core.View(),\n *   selected: false\n * }\n *\n * @param {Array} paneItems\n * @param {Object} options\n * @return {Object} instance of cdb.core.View\n */\nmodule.exports = function (paneItems, options) {\n  options = options || {};\n  var tabPaneTemplateOptions = options.tabPaneTemplateOptions;\n\n  var items = paneItems.map(function (paneItem) {\n    ['label', 'name', 'createContentView'].forEach(function (check) {\n      if (!paneItem[check]) {\n        throw new Error(check + ' should be provided');\n      }\n    });\n\n    return {\n      name: paneItem.name,\n      selected: paneItem.selected,\n      label: paneItem.label,\n      createButtonView: function () {\n        return new TemplateView(_.extend({ model: this }, tabPaneTemplateOptions));\n      },\n      createContentView: function () {\n        return paneItem.createContentView && paneItem.createContentView() || new cdb.core.View();\n      }\n    };\n  });\n\n  var collection = new TabPaneCollection(items);\n\n  var tabPaneOptions = options.tabPaneOptions;\n\n  return new TabPaneView(\n    _.extend(\n      { collection: collection },\n      tabPaneOptions\n    )\n  );\n};\n","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar TabPaneViewRouted = require('./tab-pane-view-routed');\nvar TabPaneCollection = require('./tab-pane-collection');\nvar LabelView = require('./tab-pane-label-view');\n\n/**\n * Creates a tab pane, where the menu consists of text labels.\n *\n * Example usage:\n * {\n *   label: 'My label',\n *   createContentView: CoreView(),\n *   selected: false\n * }\n *\n * @param {Array} paneItems\n * @param {Object} options\n * @return {Object} instance of CoreView\n */\nmodule.exports = function (paneItems, options) {\n  options = options || {};\n  var tabPaneItemLabelOptions = options.tabPaneItemLabelOptions;\n\n  var items = paneItems.map(function (paneItem) {\n    ['label', 'createContentView'].forEach(function (check) {\n      if (!paneItem[check]) {\n        throw new Error(check + ' should be provided');\n      }\n    });\n\n    return {\n      name: paneItem.name,\n      selected: paneItem.selected,\n      disabled: paneItem.disabled,\n      tooltip: paneItem.tooltip,\n      layerId: paneItem.layerId,\n      label: paneItem.label,\n      onClick: paneItem.onClick,\n      selectedChild: paneItem.selectedChild,\n      createButtonView: function () {\n        return new LabelView(_.extend({ model: this }, tabPaneItemLabelOptions));\n      },\n      createContentView: function () {\n        return paneItem.createContentView && paneItem.createContentView() || new CoreView();\n      }\n    };\n  });\n\n  var collection = new TabPaneCollection(items, options);\n\n  var tabPaneOptions = options.tabPaneOptions;\n\n  return new TabPaneViewRouted(\n    _.extend(\n      { collection: collection },\n      tabPaneOptions\n    )\n  );\n};\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"ColorBar ColorBar--inline\" style=\"background-color: ' +\n__e( color ) +\n';\"></div> ';\n if (selectedChild) { ;\n__p += ' <span class=\"CDB-NavSubmenu-status js-NavSubmenu-status u-hintTextColor\">' +\n__e( selectedChild ) +\n'</span>';\n } ;\n__p += '\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n\n if (type === 'text') { ;\n__p += '\\n' +\n__e( label );\n if (selectedChild) { ;\n__p += ' <span class=\"CDB-NavSubmenu-status js-NavSubmenu-status u-hintTextColor\">' +\n__e( selectedChild ) +\n'</span>';\n } ;\n__p += '\\n';\n } else if (kind === 'custom-marker') { ;\n__p += '\\n<div class=\\'Editor-categoryImagesTag CDB-Text CDB-FontSize-small u-altTextColor is-semibold u-upperCase\\'>' +\n__e( _t('form-components.editors.fill.input-color.img') ) +\n'</div>\\n';\n } else { ;\n__p += '\\n<div class=\"Tab-paneLabelImageContainer js-image-container\"></div>\\n';\n } ;\n__p += '\\n';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar Template = require('./tab-pane-icon.tpl');\n\n/**\n *  Icon component\n */\n\nmodule.exports = CoreView.extend({\n  tagName: 'i',\n\n  className: 'CDB-IconFont',\n\n  initialize: function (options) {\n    if (!this.model) {\n      throw new Error('A model should be provided');\n    }\n\n    this.template = this.options.template || Template;\n  },\n\n  render: function () {\n    this.$el.html(this.template({\n      icon: this.model.get('icon')\n    }));\n\n    return this;\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<i class=\"CDB-IconFont CDB-IconFont-' +\n__e( icon ) +\n'\"></i>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar TabPaneItemView = require('./tab-pane-item-view.js');\n\nmodule.exports = TabPaneItemView.extend({\n  _onButtonClicked: function (event) {\n    event.preventDefault();\n    if (this.model.get('disabled')) return;\n\n    _.isFunction(this.model.get('onClick')) && this.model.get('onClick')();\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p +=\n__e( label );\n if (selectedChild) { ;\n__p += ' <span class=\"CDB-NavSubmenu-status js-NavSubmenu-status u-hintTextColor\">' +\n__e( selectedChild ) +\n'</span>';\n } ;\n__p += '\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<input id=\"' +\n__e( customId ) +\n'\" class=\"CDB-Radio\" type=\"radio\" value=\"' +\n__e( name ) +\n'\" ';\n if (selected) { ;\n__p += ' checked ';\n } ;\n__p += ' />\\n<span class=\"u-iBlock CDB-Radio-face\"></span>     \\n<label for=\"' +\n__e( customId ) +\n'\" class=\"u-iBlock u-lSpace CDB-Text CDB-Size-medium ';\n if (help) { ;\n__p += 'js-help';\n } ;\n__p += '\" ';\n if (help) { ;\n__p += ' data-tooltip=\"' +\n__e( help ) +\n'\"';\n } ;\n__p += ' >\\n    ' +\n__e( label ) +\n'\\n</label>\\n';\n if (selectedChild) { ;\n__p += ' <span class=\"CDB-NavSubmenu-status js-NavSubmenu-status u-hintTextColor\">' +\n__e( selectedChild ) +\n'</span>';\n } ;\n\n\n}\nreturn __p\n}","var cdb = require('internal-carto.js');\n\n/**\n *  Icon component\n */\n\nmodule.exports = cdb.core.View.extend({\n\n  initialize: function (options) {\n    if (!this.model) throw new Error('A model should be provided');\n    if (!options.template) throw new Error('A template should be provided');\n    this.template = options.template;\n  },\n\n  render: function () {\n    this.$el.html(this.template(this.model.toJSON()));\n    return this;\n  }\n});\n","var _ = require('underscore');\nvar TabPaneView = require('./tab-pane-view.js');\nvar TabPaneViewItemRouted = require('./tab-pane-item-view-routed.js');\nvar Router = require('builder/routes/router');\n\nmodule.exports = TabPaneView.extend({\n  initialize: function (options) {\n    TabPaneView.prototype.initialize.call(this, options);\n\n    this._initialRoute = false;\n    this.onRouteChange = options.onRouteChange;\n    this.onRouteChange && this.listenTo(Router.getRouteModel(), 'change:currentRoute', this.onRouteChange);\n    this.onRouteChange && this._setInitialRoute(Router.getRouteModel());\n  },\n\n  _renderTabPaneItemView: function (model) {\n    var tabPaneItemView = new TabPaneViewItemRouted(_.extend({ model: model }, this._tabPaneItemOptions));\n    this.addView(tabPaneItemView);\n    this.$('.js-menu').append(tabPaneItemView.render().el);\n  },\n\n  _setInitialRoute: function (routeModel) {\n    this._initialRoute = true;\n    this.onRouteChange(routeModel);\n  },\n\n  _renderTabPaneContentView: function (model) {\n    var selectedView = TabPaneView.prototype._renderTabPaneContentView.call(this, model);\n    var currentRoute = Router.getCurrentRoute();\n    var routeName = _.last(currentRoute.split('/'));\n    var tabName = model.get('name');\n\n    if (this._initialRoute) {\n      var parsed = selectedView.handleRoute && selectedView.handleRoute(Router.getRouteModel());\n\n      if (parsed === false) {\n        Router.replaceWithRoot();\n      }\n\n      if (this.collection.isDisabledTab(routeName) && tabName !== routeName) {\n        var newRoute = currentRoute.replace(routeName, tabName);\n        Router.replaceState(newRoute);\n      }\n\n      this._initialRoute = false;\n    } else {\n      selectedView.handleRoute && selectedView.handleRoute(Router.getRouteModel());\n    }\n\n    return selectedView;\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"js-menu\"></div>\\n<div class=\"Tab-paneContent js-content\"></div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"u-flex u-justifyCenter\">\\n  <div class=\"Modal-inner Modal-inner--grid u-flex u-justifyCenter\">\\n    <div class=\"Modal-icon\">\\n      <svg width=\"24px\" height=\"25px\" viewbox=\"521 436 24 25\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n        <path d=\"M524.5,440 L540.5,440 L540.5,460 L524.5,460 L524.5,440 Z M528.5,437 L536.5,437 L536.5,440 L528.5,440 L528.5,437 Z M522,440 L544,440 L522,440 Z M528.5,443.5 L528.5,455.5 L528.5,443.5 Z M532.5,443.5 L532.5,455.5 L532.5,443.5 Z M536.5,443.5 L536.5,455.5 L536.5,443.5 Z\" id=\"Shape\" stroke=\"#F19243\" stroke-width=\"1\" fill=\"none\"/>\\n      </svg>\\n    </div>\\n    <div>\\n      <h2 class=\" CDB-Text CDB-Size-huge is-light u-bSpace--xl\">\\n        ' +\n__e( _t('components.table.rows.destroy.title', { cartodb_id: cartodb_id }) ) +\n'\\n      </h2>\\n      <p class=\"CDB-Text CDB-Size-large u-altTextColor\">' +\n__e( _t('components.table.rows.destroy.desc') ) +\n'</p>\\n      <ul class=\"Modal-listActions u-flex u-alignCenter\">\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--secondary CDB-Button--big js-cancel\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n              ' +\n__e( _t('components.table.rows.destroy.cancel') ) +\n'\\n            </span>\\n          </button>\\n        </li>\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-confirm\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n              ' +\n__e( _t('components.table.rows.destroy.confirm') ) +\n'\\n            </span>\\n          </button>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<td class=\"Table-cellItem\" data-attribute=\"' +\n__e( columnName ) +\n'\" title=\"' +\n__e( value ) +\n'\" data-clipboard-text=\\'' +\n__e( value ) +\n'\\'>\\n  <div class=\"\\n      Table-cell u-flex u-justifySpace\\n      ' +\n__e( columnName === 'cartodb_id' || (type === 'geometry' && geometry !== 'point') ? 'Table-cell--short' : '' ) +\n'\\n    \">\\n    <!--\\n      WARNING: .fs-hide class excludes this element, which might\\n      contain sensitive data, from FullStory recordings.\\n      Do not remove it unless we are no longer using FullStory!\\n\\n      More info:\\n        https://help.fullstory.com/technical-questions/exclude-elements\\n    -->\\n    <p class=\"\\n      fs-hide\\n      CDB-Text CDB-Size-medium\\n      u-ellipsis u-rSpace--xl\\n      ' +\n__e( type === 'number' && columnName !== 'cartodb_id' ? 'is-number' : '' ) +\n'\\n      ' +\n__e( value === null ? 'is-null' : '' ) +\n'\\n      ' +\n__e( columnName === 'cartodb_id' ? 'is-cartodbId' : '' ) +\n'\\n      js-value\\n    \">\\n      ' +\n__e( value === null ? 'null' : formattedValue ) +\n'\\n    </p>\\n\\n    ';\n if (columnName !== 'cartodb_id') { ;\n__p += '\\n      <button class=\"CDB-Shape-threePoints is-blue is-small Table-cellItemOptions js-cellOptions\">\\n        <div class=\"CDB-Shape-threePointsItem\"></div>\\n        <div class=\"CDB-Shape-threePointsItem\"></div>\\n        <div class=\"CDB-Shape-threePointsItem\"></div>\\n      </button>\\n    ';\n } ;\n__p += '\\n  </div>\\n</td>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<table>\\n  <tbody class=\"js-tbody\"></tbody>\\n</table>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"IntermediateInfo\">\\n  <div class=\"LayoutIcon\">\\n    <i class=\"CDB-IconFont CDB-IconFont-rows\"></i>\\n  </div>\\n  <h3 class=\"CDB-Text CDB-Size-large u-mainTextColor u-secondaryTextColor u-bSpace--m u-tSpace-xl\">\\n    ';\n if (page !== 0) { ;\n__p += '\\n      ' +\n__e( _t('components.table.rows.result.no-page-title', { page: page }) ) +\n'\\n    ';\n } else { ;\n__p += '\\n      ' +\n__e( _t('components.table.rows.result.no-results-title') ) +\n'\\n    ';\n } ;\n__p += '\\n  </h3>\\n  <p class=\"CDB-Text CDB-Size-medium u-altTextColor\">\\n    ';\n if (page !== 0) { ;\n__p += '\\n      ' +\n__e( _t('components.table.rows.result.no-page-desc', { page: page }) ) +\n'\\n    ';\n } else { ;\n__p += '\\n      ' +\n__e( _t('components.table.rows.result.no-results-desc', {\n        addRow: _t('components.table.rows.result.no-results-button')\n      }) ) +\n'\\n    ';\n } ;\n__p += '\\n  </p>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"u-iBlock CDB-Text CDB-Size-medium u-rSpace--xl\">\\n  <input class=\"CDB-Radio\" type=\"radio\" name=\"value\" value=\"true\" ';\n if (value === 'true') { ;\n__p += 'checked';\n } ;\n__p += '>\\n  <span class=\"u-iBlock CDB-Radio-face\"></span>\\n  <label class=\"u-iBlock u-lSpace\">True</label>\\n</div>\\n<div class=\"u-iBlock CDB-Text CDB-Size-medium u-rSpace--xl\">\\n  <input class=\"CDB-Radio\" type=\"radio\" name=\"value\" value=\"false\" ';\n if (value === 'false') { ;\n__p += 'checked';\n } ;\n__p += '>\\n  <span class=\"u-iBlock CDB-Radio-face\"></span>\\n  <label class=\"u-iBlock u-lSpace\">False</label>\\n</div>\\n<div class=\"u-iBlock CDB-Text CDB-Size-medium u-rSpace--xl\">\\n  <input class=\"CDB-Radio\" type=\"radio\" name=\"value\" value=\"null\" ';\n if (value === 'null') { ;\n__p += 'checked';\n } ;\n__p += '>\\n  <span class=\"u-iBlock CDB-Radio-face\"></span>\\n  <label class=\"u-iBlock u-lSpace\">Null</label>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"u-flex u-justifyCenter\">\\n  <div class=\"Modal-inner Modal-inner--grid u-flex u-justifyCenter\">\\n    <div class=\"Modal-icon\">\\n      <svg width=\"25px\" height=\"25px\" viewBox=\"-1 4 25 25\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n        <g id=\"Outline_Icons\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(-1.000000, 4.000000)\">\\n          <path d=\"M1.9477838,21.5 C1.6977511,21.5 1.5,21.3016354 1.5,21.0431048 L1.5,1.95689523 C1.5,1.70555616 1.70315066,1.5 1.94113901,1.5 L16.058861,1.5 C16.2975949,1.5 16.5,1.70783627 16.5,1.96250326 L16.5,13.2661378 L17.5,13.2661378 L17.5,1.96250326 C17.5,1.16139088 16.8558926,0.5 16.058861,0.5 L1.94113901,0.5 C1.14821378,0.5 0.5,1.15588925 0.5,1.95689523 L0.5,21.0431048 C0.5,21.8532278 1.1447717,22.5 1.9477838,22.5 L10.0155676,22.5 L10.0155676,21.5 L1.9477838,21.5 Z\" id=\"path-1\" fill=\"#F19243\"></path>\\n          <rect id=\"Rectangle-2\" fill=\"#F19243\" x=\"1\" y=\"5\" width=\"16\" height=\"1\"></rect>\\n          <path d=\"M23.854,14.646 L21.354,12.146 C21.166,11.958 20.834,11.958 20.647,12.146 L13.146,19.648 C13.089,19.705 13.054,19.773 13.03,19.845 C13.028,19.852 13.021,19.857 13.019,19.865 L12.019,23.365 C11.969,23.539 12.018,23.727 12.146,23.856 C12.241,23.951 12.369,24.002 12.5,24.002 C12.546,24.002 12.592,23.996 12.637,23.983 L16.137,22.983 C16.144,22.981 16.149,22.974 16.157,22.972 C16.229,22.948 16.297,22.913 16.354,22.856 L23.855,15.354 C24.05,15.158 24.05,14.842 23.854,14.646 L23.854,14.646 L23.854,14.646 Z M16,21.795 L14.207,20.002 L19.001,15.207 L20.794,17 L16,21.795 L16,21.795 L16,21.795 Z M13.747,20.957 L15.045,22.255 L13.228,22.775 L13.747,20.957 L13.747,20.957 L13.747,20.957 Z M21.501,16.293 L19.708,14.5 L21.001,13.207 L22.794,15 L21.501,16.293 L21.501,16.293 L21.501,16.293 Z\" id=\"Shape\" fill=\"#F19243\"></path>\\n        </g>\\n      </svg>\\n    </div>\\n    <div>\\n      <h2 class=\" CDB-Text CDB-Size-huge is-light u-bSpace--xl\">\\n        ' +\n__e( _t('components.table.columns.change-type.title', { columnName: columnName, newType: newType }) ) +\n'\\n      </h2>\\n      <p class=\"CDB-Text CDB-Size-large u-altTextColor\">\\n        ' +\n__e( _t('components.table.columns.change-type.desc') ) +\n'\\n      </p>\\n      <ul class=\"Modal-listActions u-flex u-alignCenter\">\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--secondary CDB-Button--big js-cancel\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n              ' +\n__e( _t('components.table.columns.change-type.cancel') ) +\n'\\n            </span>\\n          </button>\\n        </li>\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-confirm\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n              ' +\n__e( _t('components.table.columns.change-type.confirm') ) +\n'\\n            </span>\\n          </button>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"u-flex u-justifyCenter\">\\n  <div class=\"Modal-inner Modal-inner--grid u-flex u-justifyCenter\">\\n    <div class=\"Modal-icon\">\\n      <svg width=\"24px\" height=\"25px\" viewbox=\"521 436 24 25\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n        <path d=\"M524.5,440 L540.5,440 L540.5,460 L524.5,460 L524.5,440 Z M528.5,437 L536.5,437 L536.5,440 L528.5,440 L528.5,437 Z M522,440 L544,440 L522,440 Z M528.5,443.5 L528.5,455.5 L528.5,443.5 Z M532.5,443.5 L532.5,455.5 L532.5,443.5 Z M536.5,443.5 L536.5,455.5 L536.5,443.5 Z\" id=\"Shape\" stroke=\"#F19243\" stroke-width=\"1\" fill=\"none\"/>\\n      </svg>\\n    </div>\\n    <div>\\n      <h2 class=\" CDB-Text CDB-Size-huge is-light u-bSpace--xl\">\\n        ' +\n__e( _t('components.table.columns.destroy.title', { columnName: name }) ) +\n'\\n      </h2>\\n      <p class=\"CDB-Text CDB-Size-large u-altTextColor\">' +\n__e( _t('components.table.columns.destroy.desc') ) +\n'</p>\\n      <ul class=\"Modal-listActions u-flex u-alignCenter\">\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--secondary CDB-Button--big js-cancel\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n              ' +\n__e( _t('components.table.columns.destroy.cancel') ) +\n'\\n            </span>\\n          </button>\\n        </li>\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-confirm\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n              ' +\n__e( _t('components.table.columns.destroy.confirm') ) +\n'\\n            </span>\\n          </button>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"u-flex u-justifyCenter\">\\n  <div class=\"Modal-inner Modal-inner--grid u-flex u-justifyCenter\">\\n    <div class=\"Modal-icon\">\\n      <svg width=\"25px\" height=\"25px\" viewBox=\"67 153 25 25\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n        <g id=\"Group-Copy\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(67.000000, 153.000000)\">\\n          <path d=\"M16,13 L17,13 L17,5.5 C17,5.433 16.986,5.368 16.961,5.308 C16.936,5.247 16.899,5.192 16.853,5.146 L11.854,0.147 C11.808,0.101 11.753,0.064 11.692,0.039 C11.632,0.014 11.567,0 11.5,0 L0.5,0 C0.224,0 0,0.224 0,0.5 L0,21.5 C0,21.776 0.224,22 0.5,22 L9.5,22 L9.5,21 L1,21 L1,1 L11,1 L11,5.5 C11,5.776 11.224,6 11.5,6 L16,6 L16,13 L16,13 Z M12,1.707 L15.293,5 L12,5 L12,1.707 L12,1.707 Z\" id=\"Shape\" fill=\"#F19243\"></path>\\n          <path d=\"M23.854,14.646 L21.354,12.146 C21.166,11.958 20.834,11.958 20.647,12.146 L13.146,19.648 C13.089,19.705 13.054,19.773 13.03,19.845 C13.028,19.852 13.021,19.857 13.019,19.865 L12.019,23.365 C11.969,23.539 12.018,23.727 12.146,23.856 C12.241,23.951 12.369,24.002 12.5,24.002 C12.546,24.002 12.592,23.996 12.637,23.983 L16.137,22.983 C16.144,22.981 16.149,22.974 16.157,22.972 C16.229,22.948 16.297,22.913 16.354,22.856 L23.855,15.354 C24.05,15.158 24.05,14.842 23.854,14.646 L23.854,14.646 Z M16,21.795 L14.207,20.002 L19.001,15.207 L20.794,17 L16,21.795 L16,21.795 Z M13.747,20.957 L15.045,22.255 L13.228,22.775 L13.747,20.957 L13.747,20.957 Z M21.501,16.293 L19.708,14.5 L21.001,13.207 L22.794,15 L21.501,16.293 L21.501,16.293 Z\" id=\"Shape\" fill=\"#F19243\"></path>\\n        </g>\\n      </svg>\\n    </div>\\n    <div>\\n      <h2 class=\" CDB-Text CDB-Size-huge is-light u-bSpace--m\">\\n        ' +\n__e( _t('components.table.columns.rename.title', {\n          columnName: columnName,\n          newName: newName\n        }) ) +\n'\\n      </h2>\\n      <p class=\"CDB-Text CDB-Size-medium u-altTextColor\">\\n        ' +\n__e( _t('components.table.columns.rename.desc', {\n              columnName: columnName,\n              newName: newName\n        }) ) +\n'\\n      </p>\\n      <ul class=\"Modal-listActions u-flex u-alignCenter\">\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--secondary CDB-Button--big js-cancel\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n              ' +\n__e( _t('components.table.columns.rename.cancel') ) +\n'\\n            </span>\\n          </button>\\n        </li>\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-confirm\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n              ' +\n__e( _t('components.table.columns.rename.confirm') ) +\n'\\n            </span>\\n          </button>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"\\n    Table-headItemWrapper\\n    ' +\n__e( name === 'cartodb_id' || (type === 'geometry' && geometry !== 'point') ? 'Table-headItemWrapper--short' : '' ) +\n'\\n  \">\\n  <div class=\"u-flex u-justifySpace\">\\n    <input class=\"Table-headItemName CDB-Text CDB-Size-medium is-semibold u-ellipsis js-attribute\" value=\"' +\n__e( name ) +\n'\" title=\"' +\n__e( name ) +\n'\" readonly />\\n\\n    ';\n if (isOrderBy) { ;\n__p += '\\n      <i class=\"CDB-Size CDB-Size-small CDB-IconFont CDB-IconFont-arrowNext\\n        Table-columnSorted\\n        Table-columnSorted--';\n if (sortBy === 'asc') {;\n__p += 'asc';\n } else {;\n__p += 'desc';\n } ;\n__p += '\\n        u-rSpace u-altTextColor\\n      \"></i>\\n    ';\n } ;\n__p += '\\n\\n    <button class=\"CDB-Shape-threePoints is-blue is-small js-columnOptions\">\\n      <div class=\"CDB-Shape-threePointsItem\"></div>\\n      <div class=\"CDB-Shape-threePointsItem\"></div>\\n      <div class=\"CDB-Shape-threePointsItem\"></div>\\n    </button>\\n  </div>\\n  <p class=\"CDB-Size-small Table-headItemInfo u-altTextColor\">' +\n__e( type ) +\n'</p>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n\n if (val === 'order') { ;\n__p += '\\n  <div class=\"CDB-ListDecoration-itemLink js-order\">\\n    <div class=\"u-flex u-justifySpace\">\\n      <p class=\"CDB-Text CDB-Size-medium\">' +\n__e( name ) +\n'</p>\\n      <ul class=\"u-flex\">\\n        <li class=\"js-asc\">\\n          <i class=\"CDB-IconFont\\n            CDB-IconFont-arrowNext u-actionTextColor\\n            Table-columnSorted\\n            Table-columnSorted--asc\\n            ';\n if (isOrderBy && sortBy === 'asc') { ;\n__p += 'is-disabled';\n } ;\n__p += '\\n            ';\n if (isOrderBy && sortBy === 'desc') { ;\n__p += 'is-semibold';\n } ;\n__p += '\\n          \"></i>\\n        </li>\\n        <li class=\"js-desc u-lSpace--xl\">\\n          <i class=\"CDB-IconFont\\n            CDB-IconFont-arrowNext u-actionTextColor\\n            Table-columnSorted\\n            Table-columnSorted--desc\\n            ';\n if (isOrderBy && sortBy === 'desc') { ;\n__p += 'is-disabled';\n } ;\n__p += '\\n            ';\n if (isOrderBy && sortBy === 'asc') { ;\n__p += 'is-semibold';\n } ;\n__p += '\\n          \"></i>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n';\n } else if (val === 'change') { ;\n__p += '\\n  <div class=\"CDB-ListDecoration-itemLink u-actionTextColor\" title=\"' +\n__e( name ) +\n'\">\\n    <div class=\"u-flex u-justifySpace u-alignCenter\">\\n      <span>' +\n__e( name ) +\n'</span>\\n      <i class=\"CDB-IconFont CDB-Size-small is-semibold CDB-IconFont-rArrowLight\"></i>\\n    </div>\\n  </div>\\n';\n } else { ;\n__p += '\\n  <div\\n    class=\"CDB-ListDecoration-itemLink ';\n if (isDestructive) { ;\n__p += ' u-errorTextColor ';\n } else { ;\n__p += ' u-actionTextColor ';\n } ;\n__p += '\"\\n    title=\"' +\n__e( name ) +\n'\"\\n  >\\n    ' +\n__e( name ) +\n'\\n  </div>\\n';\n } ;\n__p += '\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<thead>\\n  <tr class=\"js-headRow\"></tr>\\n</thead>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"CDB-LoaderIcon is-dark\">\\n  <svg class=\"CDB-LoaderIcon-spinner\" viewbox=\"0 0 50 50\">\\n    <circle class=\"CDB-LoaderIcon-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"/>\\n  </svg>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<button class=\"Table-paginatorButton Table-paginatorButton--prev\\n  ';\n if (isPrevAvailable) { ;\n__p += '\\n    js-prev\\n    is-active\\n  ';\n } ;\n__p += '\\n\">\\n  <i class=\"CDB-IconFont is-semibold CDB-IconFont-lArrowLight CDB-Size-small\\n  ';\n if (isPrevAvailable) { ;\n__p += '\\n    u-actionTextColor\\n  ';\n } else { ;\n__p += '\\n    u-hintTextColor\\n  ';\n } ;\n__p += '\\n  \"></i>\\n</button>\\n<p class=\"Table-paginatorText CDB-Text CDB-Size-small is-semibold u-upperCase\">\\n  ';\n if (!size) {;\n__p += '\\n   <span class=\"u-mainTextColor\">…</span>\\n  ';\n } else { ;\n__p += '\\n    <span class=\"u-mainTextColor\">' +\n__e( (page * 40) + 1 ) +\n'</span>\\n    <span class=\"u-altTextColor u-lSpace u-rSpace\">' +\n__e( _t('components.table.rows.paginator.to') ) +\n'</span>\\n    <span class=\"u-mainTextColor\">' +\n__e( (page * 40) + size ) +\n'</span>\\n  ';\n } ;\n__p += '\\n</p>\\n<button class=\"Table-paginatorButton Table-paginatorButton--next\\n  ';\n if (isNextAvailable) { ;\n__p += '\\n    js-next\\n    is-active\\n  ';\n } ;\n__p += '\\n\">\\n  <i class=\"CDB-IconFont is-semibold CDB-IconFont-rArrowLight CDB-Size-small\\n  ';\n if (isNextAvailable) { ;\n__p += '\\n    u-actionTextColor\\n  ';\n } else { ;\n__p += '\\n    u-hintTextColor\\n  ';\n } ;\n__p += '\\n  \"></i>\\n</button>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"CDB-Text CDB-Size-small is-semibold u-rSpace--xl';\n if (disabled) { ;\n__p += ' is-disabled';\n } ;\n__p += '\">\\n  <label class=\"u-iBlock u-upperCase\">' +\n__e( labels[0] ) +\n'</label>\\n  <input class=\"CDB-Toggle u-iBlock js-input\" type=\"checkbox\"\\n    ';\n if (disabled) { ;\n__p += ' disabled';\n } ;\n__p += '\\n    ';\n if (checked) { ;\n__p += ' checked ';\n } ;\n__p += ' >\\n  <span class=\"u-iBlock CDB-ToggleFace\"></span>\\n  <label class=\"u-iBlock u-upperCase\">' +\n__e( labels[1] ) +\n'</label>\\n</div>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"u-flex u-alignCenter\">\\n  <button class=\"js-undo\">\\n    <i class=\"CDB-IconFont CDB-IconFont-undo Size-large u-actionTextColor js-theme ';\n if (!canUndo) { ;\n__p += 'is-disabled';\n } ;\n__p += '\"></i>\\n  </button>\\n\\n  <button class=\"u-lSpace--xl js-redo\">\\n    <i class=\"CDB-IconFont CDB-IconFont-redo Size-large u-actionTextColor js-theme ';\n if (!canRedo) { ;\n__p += 'is-disabled';\n } ;\n__p += '\"></i>\\n  </button>\\n\\n  ';\n if (canClear) { ;\n__p += '\\n  <button class=\"u-lSpace--xl CDB-Button CDB-Button--secondary CDB-Button--white js-clear\">\\n    <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-small\">' +\n__e( _t('components.undo-redo.clear') ) +\n'</span>\\n  </button>\\n  ';\n } ;\n__p += '\\n\\n  ';\n if (canApply) { ;\n__p += '\\n  <button class=\"u-lSpace--xl CDB-Button CDB-Button--loading CDB-Button--primary js-apply\\n    ';\n if (isLoading) {;\n__p += ' is-loading is-disabled';\n } ;\n__p += '\\n    ';\n if (isDisabled) {;\n__p += ' is-disabled';\n } ;\n__p += '\\n  \">\\n    <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-small\">' +\n__e( _t('components.undo-redo.apply') ) +\n'</span>\\n    <div class=\"CDB-Button-loader CDB-LoaderIcon is-white\">\\n      <svg class=\"CDB-LoaderIcon-spinner\" viewbox=\"0 0 50 50\">\\n        <circle class=\"CDB-LoaderIcon-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"/>\\n      </svg>\\n    </div>\\n  </button>\\n  ';\n } ;\n__p += '\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"Editor-content js-content js-overlay\"></div>\\n<div class=\"js-info\"></div>\\n<ul class=\"Options-bar u-flex u-justifySpace js-theme js-optionsBar\">\\n  <li class=\"CDB-InfoBox-footerItem js-controls\"></li>\\n  <li class=\"CDB-InfoBox-footerItem CDB-InfoBox-footerItem--right js-actions\"></li>\\n</ul>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar camshaftReference = require('./camshaft-reference');\nvar AreaOfInfluenceFormModel = require('builder/editor/layers/layer-content-views/analyses/analysis-form-models/area-of-influence-form-model');\nvar AggregateIntersectionFormModel = require('builder/editor/layers/layer-content-views/analyses/analysis-form-models/aggregate-intersection-form-model');\nvar FilterIntersectionFormModel = require('builder/editor/layers/layer-content-views/analyses/analysis-form-models/filter-intersection-form-model');\nvar FallbackFormModel = require('builder/editor/layers/layer-content-views/analyses/analysis-form-models/fallback-form-model');\nvar UnknownTypeFormModel = require('builder/editor/layers/layer-content-views/analyses/analysis-form-models/unknown-type-form-model');\nvar MergeAnalysisOptionModel = require('builder/components/modals/add-analysis/analysis-option-models/merge-analysis-option-model');\nvar DeprecatedSQLFunctionOptionModel = require('builder/components/modals/add-analysis/analysis-option-models/deprecated-sql-function-option-model');\nvar DataServicesApiCheck = require('builder/editor/layers/layer-content-views/analyses/analyses-quota/analyses-quota-info');\n\nvar DAO_TYPES = ['age-and-gender', 'boundaries', 'education', 'employment', 'families', 'housing', 'income', 'language', 'migration', 'nationality', 'population-segments', 'race-and-ethnicity', 'religion', 'transportation'];\n\nvar MAP = {\n  'aggregate-intersection': {\n    title: _t('analyses.aggregate-intersection.title'),\n    short_title: _t('analyses.aggregate-intersection.short-title'),\n    FormModel: AggregateIntersectionFormModel,\n    modalTitle: _t('components.modals.add-analysis.option-types.aggregate-intersection.title'),\n    modalDesc: _t('components.modals.add-analysis.option-types.aggregate-intersection.desc'),\n    modalCategory: 'data_transformation',\n    modalLink: 'https://carto.com/learn/guides/analysis/intersect-and-aggregate/',\n    onboardingTemplate: require('builder/components/onboardings/analysis/analyses/aggregate-intersection.tpl'),\n    animationTemplate: require('builder/components/modals/add-analysis/animation-templates/intersect.tpl')\n  },\n  'bounding-box': {\n    title: _t('analyses.bounding-box.title'),\n    short_title: _t('analyses.bounding-box.short-title'),\n    FormModel: require('builder/editor/layers/layer-content-views/analyses/analysis-form-models/group-points-form-model'),\n    onboardingTemplate: require('builder/components/onboardings/analysis/analyses/group-points.tpl'),\n    genericType: 'group-points'\n  },\n  'bounding-circle': {\n    title: _t('analyses.bounding-circle.title'),\n    short_title: _t('analyses.bounding-circle.short-title'),\n    FormModel: require('builder/editor/layers/layer-content-views/analyses/analysis-form-models/group-points-form-model'),\n    onboardingTemplate: require('builder/components/onboardings/analysis/analyses/group-points.tpl'),\n    genericType: 'group-points'\n  },\n  'buffer': {\n    title: _t('analyses.area-of-influence.title'),\n    short_title: _t('analyses.area-of-influence.short-title'),\n    FormModel: AreaOfInfluenceFormModel,\n    modalTitle: _t('components.modals.add-analysis.option-types.area-of-influence.title'),\n    modalDesc: _t('components.modals.add-analysis.option-types.area-of-influence.desc'),\n    modalCategory: 'data_transformation',\n    modalLink: 'https://carto.com/learn/guides/analysis/create-travel-distance-buffers/',\n    onboardingTemplate: require('builder/components/onboardings/analysis/analyses/area-of-influence.tpl'),\n    animationTemplate: require('builder/components/modals/add-analysis/animation-templates/aoi.tpl'),\n    genericType: 'area-of-influence'\n  },\n  'centroid': {\n    title: _t('analyses.centroid.title'),\n    short_title: _t('analyses.centroid.short-title'),\n    FormModel: require('builder/editor/layers/layer-content-views/analyses/analysis-form-models/centroid-form-model'),\n    modalTitle: _t('components.modals.add-analysis.option-types.centroid.title'),\n    modalDesc: _t('components.modals.add-analysis.option-types.centroid.desc'),\n    modalCategory: 'data_transformation',\n    modalLink: 'https://carto.com/learn/guides/analysis/create-centroids-of-geometries/',\n    onboardingTemplate: require('builder/components/onboardings/analysis/analyses/centroid.tpl'),\n    animationTemplate: require('builder/components/modals/add-analysis/animation-templates/centroid.tpl'),\n    genericType: 'centroid'\n  },\n  'convex-hull': {\n    title: _t('analyses.convex-hull.title'),\n    short_title: _t('analyses.convex-hull.short-title'),\n    FormModel: require('builder/editor/layers/layer-content-views/analyses/analysis-form-models/group-points-form-model'),\n    modalTitle: _t('components.modals.add-analysis.option-types.group-points.title'),\n    modalDesc: _t('components.modals.add-analysis.option-types.group-points.desc'),\n    modalCategory: 'data_transformation',\n    modalLink: 'https://carto.com/learn/guides/analysis/create-polygons-from-points/',\n    onboardingTemplate: require('builder/components/onboardings/analysis/analyses//group-points.tpl'),\n    animationTemplate: require('builder/components/modals/add-analysis/animation-templates/group-points.tpl'),\n    animationParams: {\n      method: _t('analyses-onboarding.placeholders.method')\n    },\n    genericType: 'group-points'\n  },\n  'concave-hull': {\n    title: _t('analyses.concave-hull.title'),\n    short_title: _t('analyses.concave-hull.short-title'),\n    FormModel: require('builder/editor/layers/layer-content-views/analyses/analysis-form-models/group-points-form-model'),\n    onboardingTemplate: require('builder/components/onboardings/analysis/analyses/group-points.tpl'),\n    genericType: 'group-points'\n  },\n  'data-observatory-measure': {\n    title: _t('analyses.data-observatory-measure.title'),\n    short_title: _t('analyses.data-observatory-measure.short-title'),\n    FormModel: require('builder/editor/layers/layer-content-views/analyses/analysis-form-models/data-observatory-measure-model'),\n    modalTitle: _t('components.modals.add-analysis.option-types.data-observatory-measure.title'),\n    modalDesc: _t('components.modals.add-analysis.option-types.data-observatory-measure.desc'),\n    modalCategory: 'create_clean',\n    modalLink: 'https://carto.com/learn/guides/analysis/enrich-from-data-observatory',\n    checkIfEnabled: function (options) {\n      return checkIfDataObservatoryIsEnabled(options);\n    },\n    onboardingTemplate: require('builder/components/onboardings/analysis/analyses/data-observatory-measure.tpl'),\n    animationTemplate: require('builder/components/modals/add-analysis/animation-templates/data-observatory-measure.tpl'),\n    genericType: 'data-observatory-measure'\n  },\n  'data-observatory-multiple-measures': {\n    title: _t('analyses.data-observatory-measure.title'),\n    short_title: _t('analyses.data-observatory-measure.short-title'),\n    FormModel: require('builder/editor/layers/layer-content-views/analyses/analysis-form-models/data-observatory-multiple-measure-model'),\n    modalTitle: _t('components.modals.add-analysis.option-types.data-observatory-measure.title'),\n    modalDesc: _t('components.modals.add-analysis.option-types.data-observatory-measure.desc'),\n    modalCategory: 'create_clean',\n    modalLink: 'https://carto.com/learn/guides/analysis/enrich-from-data-observatory',\n    checkIfEnabled: function (options) {\n      var dataservicesApiHealth = DataServicesApiCheck.get(options.configModel);\n      var doApiData = dataservicesApiHealth.getService('observatory');\n      var assignedQuota = doApiData ? doApiData.get('monthly_quota') : 0;\n      var softLimit = doApiData ? doApiData.get('soft_limit') : false;\n      var hideDataObservatory = assignedQuota === 0 && !softLimit;\n\n      return checkIfDataObservatoryIsEnabled(options) && !hideDataObservatory;\n    },\n    onboardingTemplate: require('builder/components/onboardings/analysis/analyses/data-observatory-multiple-measure.tpl'),\n    animationTemplate: require('builder/components/modals/add-analysis/animation-templates/data-observatory-measure.tpl'),\n    genericType: 'data-observatory-multiple-measures'\n  },\n  'filter-by-node-column': {\n    title: _t('analyses.filter-by-node-column.title'),\n    short_title: _t('analyses.filter-by-node-column.short-title'),\n    FormModel: require('builder/editor/layers/layer-content-views/analyses/analysis-form-models/filter-by-node-column'),\n    modalTitle: _t('components.modals.add-analysis.option-types.filter-by-node-column.title'),\n    modalDesc: _t('components.modals.add-analysis.option-types.filter-by-node-column.desc'),\n    modalCategory: 'create_clean',\n    modalLink: 'https://carto.com/learn/guides/analysis/link-second-layer/',\n    onboardingTemplate: require('builder/components/onboardings/analysis/analyses/filter-by-node-column.tpl'),\n    animationTemplate: require('builder/components/modals/add-analysis/animation-templates/filter-by-layer.tpl'),\n    animationParams: {\n      name_of_the_layer: _t('analyses-onboarding.placeholders.layer-name')\n    }\n  },\n  'filter-category': {\n    title: _t('analyses.filter.title'),\n    short_title: _t('analyses.filter.short-title'),\n    FormModel: require('builder/editor/layers/layer-content-views/analyses/analysis-form-models/filter-form-model'),\n    onboardingTemplate: require('builder/components/onboardings/analysis/analyses/filter.tpl'),\n    genericType: 'filter'\n  },\n  'filter-range': {\n    title: _t('analyses.filter.title'),\n    short_title: _t('analyses.filter.short-title'),\n    FormModel: require('builder/editor/layers/layer-content-views/analyses/analysis-form-models/filter-form-model'),\n    modalTitle: _t('components.modals.add-analysis.option-types.filter.title'),\n    modalDesc: _t('components.modals.add-analysis.option-types.filter.desc'),\n    modalCategory: 'data_transformation',\n    modalLink: 'https://carto.com/learn/guides/analysis/filter-by-column-value',\n    onboardingTemplate: require('builder/components/onboardings/analysis/analyses/filter.tpl'),\n    animationTemplate: require('builder/components/modals/add-analysis/animation-templates/filter-by-column-value.tpl'),\n    genericType: 'filter'\n  },\n  'georeference-city': {\n    title: _t('analyses.georeference.title'),\n    short_title: _t('analyses.georeference.short-title'),\n    FormModel: require('builder/editor/layers/layer-content-views/analyses/analysis-form-models/georeference-form-model'),\n    checkIfEnabled: function (options) {\n      return checkIfInternalGeocodingIsEnabled(options);\n    },\n    onboardingTemplate: require('builder/components/onboardings/analysis/analyses/georeference.tpl'),\n    genericType: 'georeference'\n  },\n  'georeference-ip-address': {\n    title: _t('analyses.georeference.title'),\n    short_title: _t('analyses.georeference.short-title'),\n    FormModel: require('builder/editor/layers/layer-content-views/analyses/analysis-form-models/georeference-form-model'),\n    checkIfEnabled: function (options) {\n      return checkIfInternalGeocodingIsEnabled(options);\n    },\n    onboardingTemplate: require('builder/components/onboardings/analysis/analyses/georeference.tpl'),\n    genericType: 'georeference'\n  },\n  'georeference-country': {\n    title: _t('analyses.georeference.title'),\n    short_title: _t('analyses.georeference.short-title'),\n    FormModel: require('builder/editor/layers/layer-content-views/analyses/analysis-form-models/georeference-form-model'),\n    checkIfEnabled: function (options) {\n      return checkIfInternalGeocodingIsEnabled(options);\n    },\n    onboardingTemplate: require('builder/components/onboardings/analysis/analyses/georeference.tpl'),\n    genericType: 'georeference'\n  },\n  'georeference-long-lat': {\n    title: _t('analyses.georeference.title'),\n    short_title: _t('analyses.georeference.short-title'),\n    FormModel: require('builder/editor/layers/layer-content-views/analyses/analysis-form-models/georeference-form-model'),\n    onboardingTemplate: require('builder/components/onboardings/analysis/analyses/georeference.tpl'),\n    genericType: 'georeference'\n  },\n  'georeference-placeholder': {\n    dummy: true,\n    title: _t('analyses.georeference.title'),\n    short_title: _t('analyses.georeference.short-title'),\n    FormModel: require('builder/editor/layers/layer-content-views/analyses/analysis-form-models/georeference-form-model'),\n    modalTitle: _t('components.modals.add-analysis.option-types.georeference.title'),\n    modalDesc: _t('components.modals.add-analysis.option-types.georeference.desc'),\n    modalCategory: 'create_clean',\n    modalLink: 'https://carto.com/learn/guides/analysis/georeference',\n    onboardingTemplate: require('builder/components/onboardings/analysis/analyses/georeference.tpl'),\n    animationTemplate: require('builder/components/modals/add-analysis/animation-templates/georeference.tpl'),\n    genericType: 'georeference'\n  },\n  'georeference-postal-code': {\n    title: _t('analyses.georeference.title'),\n    short_title: _t('analyses.georeference.short-title'),\n    FormModel: require('builder/editor/layers/layer-content-views/analyses/analysis-form-models/georeference-form-model'),\n    checkIfEnabled: function (options) {\n      return checkIfInternalGeocodingIsEnabled(options);\n    },\n    onboardingTemplate: require('builder/components/onboardings/analysis/analyses/georeference.tpl'),\n    genericType: 'georeference'\n  },\n  'georeference-street-address': {\n    title: _t('analyses.georeference.title'),\n    short_title: _t('analyses.georeference.short-title'),\n    FormModel: require('builder/editor/layers/layer-content-views/analyses/analysis-form-models/georeference-form-model'),\n    checkIfEnabled: function (options) {\n      return checkIfExternalGeocodingIsEnabled(options);\n    },\n    onboardingTemplate: require('builder/components/onboardings/analysis/analyses/georeference.tpl'),\n    genericType: 'georeference'\n  },\n  'georeference-admin-region': {\n    title: _t('analyses.georeference.title'),\n    short_title: _t('analyses.georeference.short-title'),\n    FormModel: require('builder/editor/layers/layer-content-views/analyses/analysis-form-models/georeference-form-model'),\n    checkIfEnabled: function (options) {\n      return checkIfInternalGeocodingIsEnabled(options);\n    },\n    onboardingTemplate: require('builder/components/onboardings/analysis/analyses/georeference.tpl'),\n    genericType: 'georeference'\n  },\n  'intersection': {\n    title: _t('analyses.filter-intersection.title'),\n    short_title: _t('analyses.filter-intersection.short-title'),\n    FormModel: FilterIntersectionFormModel,\n    modalTitle: _t('components.modals.add-analysis.option-types.filter-intersection.title'),\n    modalDesc: _t('components.modals.add-analysis.option-types.filter-intersection.desc'),\n    modalCategory: 'data_transformation',\n    modalLink: 'https://carto.com/learn/guides/analysis/select-points-in-polygons/',\n    onboardingTemplate: require('builder/components/onboardings/analysis/analyses/intersection.tpl'),\n    animationTemplate: require('builder/components/modals/add-analysis/animation-templates/filter-by-polygon.tpl'),\n    checkIfEnabled: function (options) {\n      return options.queryGeometryModel.isPolygon();\n    }\n  },\n  'kmeans': {\n    title: _t('analyses.kmeans.title'),\n    short_title: _t('analyses.kmeans.short-title'),\n    FormModel: require('builder/editor/layers/layer-content-views/analyses/analysis-form-models/kmeans-form-model'),\n    modalTitle: _t('components.modals.add-analysis.option-types.kmeans.title'),\n    modalDesc: _t('components.modals.add-analysis.option-types.kmeans.desc'),\n    modalCategory: 'analyze_predict',\n    modalLink: 'https://carto.com/learn/guides/analysis/calculate-clusters-of-points',\n    onboardingTemplate: require('builder/components/onboardings/analysis/analyses/kmeans.tpl'),\n    animationTemplate: require('builder/components/modals/add-analysis/animation-templates/kmeans.tpl'),\n    animationParams: {\n      method: _t('analyses-onboarding.placeholders.clusters')\n    }\n  },\n  'line-to-single-point': {\n    title: _t('analyses.connect-with-lines.title'),\n    short_title: _t('analyses.connect-with-lines.short-title'),\n    FormModel: require('builder/editor/layers/layer-content-views/analyses/analysis-form-models/connect-with-lines-form-model'),\n    modalTitle: _t('components.modals.add-analysis.option-types.connect-with-lines.title'),\n    modalDesc: _t('components.modals.add-analysis.option-types.connect-with-lines.desc'),\n    modalCategory: 'data_transformation',\n    modalLink: 'https://carto.com/learn/guides/analysis/create-lines-from-points/',\n    onboardingTemplate: require('builder/components/onboardings/analysis/analyses/connect-with-lines.tpl'),\n    animationTemplate: require('builder/components/modals/add-analysis/animation-templates/connect-with-lines.tpl'),\n    genericType: 'connect-with-lines'\n  },\n  'line-source-to-target': {\n    title: _t('analyses.connect-with-lines.title'),\n    short_title: _t('analyses.connect-with-lines.short-title'),\n    FormModel: require('builder/editor/layers/layer-content-views/analyses/analysis-form-models/connect-with-lines-form-model'),\n    onboardingTemplate: require('builder/components/onboardings/analysis/analyses/connect-with-lines.tpl'),\n    animationTemplate: require('builder/components/modals/add-analysis/animation-templates/connect-with-lines.tpl'),\n    genericType: 'connect-with-lines'\n  },\n  'line-sequential': {\n    title: _t('analyses.connect-with-lines.title'),\n    short_title: _t('analyses.connect-with-lines.short-title'),\n    FormModel: require('builder/editor/layers/layer-content-views/analyses/analysis-form-models/connect-with-lines-form-model'),\n    onboardingTemplate: require('builder/components/onboardings/analysis/analyses/connect-with-lines.tpl'),\n    animationTemplate: require('builder/components/modals/add-analysis/animation-templates/connect-with-lines.tpl'),\n    genericType: 'connect-with-lines'\n  },\n  'merge': {\n    title: _t('analyses.merge.title'),\n    short_title: _t('analyses.merge.short-title'),\n    FormModel: require('builder/editor/layers/layer-content-views/analyses/analysis-form-models/merge-form-model'),\n    modalTitle: _t('components.modals.add-analysis.option-types.merge.title'),\n    modalDesc: _t('components.modals.add-analysis.option-types.merge.desc'),\n    ModalModel: MergeAnalysisOptionModel,\n    modalCategory: 'create_clean',\n    modalLink: 'https://carto.com/learn/guides/analysis/add-columns-from-second-dataset/',\n    onboardingTemplate: require('builder/components/onboardings/analysis/analyses/merge.tpl'),\n    animationTemplate: require('builder/components/modals/add-analysis/animation-templates/join-two-columns.tpl')\n  },\n  'moran': {\n    title: _t('analyses.moran-cluster.title'),\n    short_title: _t('analyses.moran-cluster.short-title'),\n    FormModel: require('builder/editor/layers/layer-content-views/analyses/analysis-form-models/moran-form-model'),\n    modalTitle: _t('components.modals.add-analysis.option-types.moran-cluster.title'),\n    modalDesc: _t('components.modals.add-analysis.option-types.moran-cluster.desc'),\n    modalCategory: 'analyze_predict',\n    modalLink: 'https://carto.com/learn/guides/analysis/detect-outliers-and-clusters',\n    onboardingTemplate: require('builder/components/onboardings/analysis/analyses/moran.tpl'),\n    animationTemplate: require('builder/components/modals/add-analysis/animation-templates/outliers.tpl')\n  },\n  'routing-sequential': {\n    title: _t('analyses.routing.title'),\n    short_title: _t('analyses.routing.short-title'),\n    FormModel: FallbackFormModel,\n    checkIfEnabled: function (options) {\n      return checkIfRoutingIsEnabled(options);\n    }\n  },\n  'routing-to-layer-all-to-all': {\n    title: _t('analyses.routing.title'),\n    short_title: _t('analyses.routing.short-title'),\n    FormModel: FallbackFormModel,\n    checkIfEnabled: function (options) {\n      return checkIfRoutingIsEnabled(options);\n    }\n  },\n  'routing-to-single-point': {\n    title: _t('analyses.routing.title'),\n    short_title: _t('analyses.routing.short-title'),\n    FormModel: FallbackFormModel,\n    checkIfEnabled: function (options) {\n      return checkIfRoutingIsEnabled(options);\n    }\n  },\n  'sampling': {\n    title: _t('analyses.sampling.title'),\n    short_title: _t('analyses.sampling.short-title'),\n    FormModel: require('builder/editor/layers/layer-content-views/analyses/analysis-form-models/sampling-form-model'),\n    modalTitle: _t('components.modals.add-analysis.option-types.sampling.title'),\n    modalDesc: _t('components.modals.add-analysis.option-types.sampling.desc'),\n    modalCategory: 'data_transformation',\n    modalLink: 'https://carto.com/learn/guides/analysis/subsample-percent-of-rows',\n    onboardingTemplate: require('builder/components/onboardings/analysis/analyses/sampling.tpl'),\n    animationTemplate: require('builder/components/modals/add-analysis/animation-templates/sampling.tpl'),\n    animationParams: {\n      percentage: _t('analyses-onboarding.placeholders.percentage')\n    },\n    genericType: 'sampling'\n  },\n  'spatial-markov-trend': {\n    title: _t('analyses.spatial-markov-trend.title'),\n    short_title: _t('analyses.spatial-markov-trend.short-title'),\n    FormModel: require('builder/editor/layers/layer-content-views/analyses/analysis-form-models/spatial-markov-trend-model'),\n    modalTitle: _t('components.modals.add-analysis.option-types.spatial-markov-trend.title'),\n    modalDesc: _t('components.modals.add-analysis.option-types.spatial-markov-trend.desc'),\n    modalCategory: 'analyze_predict',\n    modalLink: 'https://carto.com/learn/guides/analysis/predict-trends-and-volatility',\n    onboardingTemplate: require('builder/components/onboardings/analysis/analyses/spatial-markov-trend.tpl'),\n    animationTemplate: require('builder/components/modals/add-analysis/animation-templates/predict-trends.tpl')\n  },\n  'trade-area': {\n    title: _t('analyses.area-of-influence.title'),\n    short_title: _t('analyses.area-of-influence.short-title'),\n    FormModel: AreaOfInfluenceFormModel,\n    checkIfEnabled: function (options) {\n      if (!options.configModel) throw new Error('configModel is required');\n      return !!options.configModel.dataServiceEnabled('isolines');\n    },\n    onboardingTemplate: require('builder/components/onboardings/analysis/analyses/area-of-influence.tpl'),\n    genericType: 'area-of-influence'\n  },\n  'weighted-centroid': {\n    title: _t('analyses.centroid.title'),\n    short_title: _t('analyses.centroid.short-title'),\n    FormModel: require('builder/editor/layers/layer-content-views/analyses/analysis-form-models/centroid-form-model'),\n    onboardingTemplate: require('builder/components/onboardings/analysis/analyses/centroid.tpl'),\n    genericType: 'centroid'\n  },\n  'closest': {\n    title: _t('editor.layers.analysis-form.find-nearest.workflow-title'),\n    short_title: _t('editor.layers.analysis-form.find-nearest.workflow-title'),\n    FormModel: require('builder/editor/layers/layer-content-views/analyses/analysis-form-models/closest-form-model'),\n    modalTitle: _t('editor.layers.analysis-form.find-nearest.modal-title'),\n    modalDesc: _t('editor.layers.analysis-form.find-nearest.modal-desc'),\n    modalCategory: 'analyze_predict',\n    modalLink: 'https://carto.com/learn/guides/analysis/find-nearest',\n    animationTemplate: require('builder/components/modals/add-analysis/animation-templates/closest.tpl'),\n    onboardingTemplate: require('builder/components/onboardings/analysis/analyses/closest.tpl')\n  },\n  'deprecated-sql-function': {\n    title: _t('editor.layers.analysis-form.deprecated-sql-function.title'),\n    short_title: _t('editor.layers.analysis-form.deprecated-sql-function.title'),\n    FormModel: require('builder/editor/layers/layer-content-views/analyses/analysis-form-models/deprecated-sql-function-form-model'),\n    modalTitle: _t('components.modals.add-analysis.option-types.deprecated-sql-function.title'),\n    modalDesc: _t('components.modals.add-analysis.option-types.deprecated-sql-function.desc'),\n    modalCategory: 'data_transformation',\n    ModalModel: DeprecatedSQLFunctionOptionModel,\n    checkIfEnabled: function (options) {\n      return options.userModel.featureEnabled('deprecated-sql-function');\n    }\n  }\n};\n\nvar checkIfInternalGeocodingIsEnabled = function (options) {\n  if (!options.configModel) throw new Error('configModel is required');\n  return isDataServicesReady(options.configModel) && !!options.configModel.dataServiceEnabled('geocoder_internal');\n};\n\nvar checkIfRoutingIsEnabled = function (options) {\n  if (!options.configModel) throw new Error('configModel is required');\n  return isDataServicesReady(options.configModel) && !!options.configModel.dataServiceEnabled('routing');\n};\n\nvar checkIfExternalGeocodingIsEnabled = function (options) {\n  if (!options.configModel) throw new Error('configModel is required');\n  return isDataServicesReady(options.configModel) && !!options.configModel.dataServiceEnabled('hires_geocoder');\n};\n\nvar checkIfDataObservatoryIsEnabled = function (options) {\n  if (!options.configModel) throw new Error('configModel is required');\n  return isDataServicesReady(options.configModel) && !!options.configModel.dataServiceEnabled('data_observatory');\n};\n\nvar definitionByType = function (m) {\n  var type = 'unknown';\n\n  if (typeof m === 'string' && m !== '') {\n    type = m;\n  } else if (m && m.get) {\n    type = m.get('type');\n\n    if (type === 'data-observatory-measure' && m.has('measurement')) {\n      var measurement = m.get('measurement').toLowerCase().split(' ').join('-');\n\n      if (_.contains(DAO_TYPES, measurement)) {\n        var measurementType = _.clone(MAP[type]);\n        measurementType.title = _t('analyses.data-observatory-measure.' + measurement);\n        return measurementType;\n      }\n    }\n  }\n\n  return MAP[type] || {\n    title: _t('analyses.' + type),\n    short_title: _t('analyses.' + type),\n    modalLink: '',\n    FormModel: FallbackFormModel\n  };\n};\n\nvar isDataServicesReady = function (configModel) {\n  return DataServicesApiCheck.get(configModel).isReady();\n};\n\nvar _isAnalysisValidByType = function (type, options) {\n  var analysis = MAP[type];\n  return analysis && analysis.checkIfEnabled ? analysis.checkIfEnabled(options) : true;\n};\n\nvar DATA_OBSERVATORY_OLD = 'data-observatory-measure';\n\nmodule.exports = {\n  MAP: MAP,\n\n  findFormModelByType: function (type) {\n    var isDummy = MAP[type] && MAP[type].dummy;\n    return camshaftReference.hasType(type) || isDummy\n      ? definitionByType(type).FormModel\n      : UnknownTypeFormModel;\n  },\n\n  getAnalysesByModalCategory: function (category, options) {\n    return _.reduce(MAP, function (memo, item, analysisType) {\n      if (analysisType === DATA_OBSERVATORY_OLD) {\n        return memo;\n      }\n\n      if (item.modalCategory === category) {\n        if (_isAnalysisValidByType(analysisType, options)) {\n          var obj = {\n            nodeAttrs: {\n              type: analysisType\n            },\n            title: item.modalTitle,\n            desc: item.modalDesc,\n            link: item.modalLink\n          };\n\n          if (item.ModalModel) {\n            obj.Model = item.ModalModel;\n          }\n\n          if (item.dummy) {\n            obj.dummy = item.dummy;\n          }\n\n          memo.push(obj);\n        }\n      }\n\n      return memo;\n    }, []);\n  },\n\n  isAnalysisValidByType: function (type, options) {\n    return _isAnalysisValidByType(type, options);\n  },\n\n  getAnalysisByType: function (type) {\n    return MAP[type];\n  },\n\n  title: function (model) {\n    return definitionByType(model).title;\n  },\n\n  short_title: function (model) {\n    return definitionByType(model).short_title;\n  },\n\n  link: function (model) {\n    return definitionByType(model).modalLink;\n  }\n};\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar syncAbort = require('./backbone/sync-abort');\n\n/**\n * Analysis definition model.\n * Points to a node that is the head of the particular analysis.\n */\nmodule.exports = Backbone.Model.extend({\n\n  /**\n   * @override {Backbone.prototype.sync} abort ongoing request if there is any\n   */\n  sync: syncAbort,\n\n  initialize: function (attrs, opts) {\n    if (!opts.analysisDefinitionNodesCollection) throw new Error('analysisDefinitionNodesCollection is required');\n\n    this.USER_SAVED = false; // flag to indicate if the user saved the node and avoid triggering the onboarding model if they didn't\n\n    this._analysisDefinitionNodesCollection = opts.analysisDefinitionNodesCollection;\n  },\n\n  parse: function (r, opts) {\n    // If parse is called on a new model it have not yet called initialize and thus don't have the collection\n    var nodesCollection = this._analysisDefinitionNodesCollection || opts.analysisDefinitionNodesCollection;\n\n    // Merge and parse are used to sync all nodes in a definition with the backend response\n    nodesCollection.add(r.analysis_definition, {silent: true, merge: true, parse: true});\n\n    var attrs = _.omit(r, 'analysis_definition');\n    attrs.node_id = r.analysis_definition.id;\n\n    return attrs;\n  },\n\n  toJSON: function () {\n    return {\n      id: this.id,\n      analysis_definition: this.getNodeDefinitionModel().toJSON()\n    };\n  },\n\n  containsNode: function (other) {\n    var nodeDefModel = this.getNodeDefinitionModel();\n    return !!(nodeDefModel && nodeDefModel.containsNode(other));\n  },\n\n  getNodeDefinitionModel: function () {\n    return this._analysisDefinitionNodesCollection.get(this.get('node_id'));\n  }\n\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar AnalysisDefinitionNodeSourceModel = require('./analysis-definition-node-source-model');\nvar AnalysisDefinitionNodeModel = require('./analysis-definition-node-model');\nvar SQLUtils = require('builder/helpers/sql-utils');\nvar TableNameUtils = require('builder/helpers/table-name-utils');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'userModel',\n  'configModel'\n];\n\n/**\n * Collection of analysis definitions nodes.\n */\nmodule.exports = Backbone.Collection.extend({\n\n  initialize: function (models, opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._relatedTableData = opts.relatedTableData || [];\n\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.on('queryObjectsUpdated', this._onQueryObjectsUpdated);\n  },\n\n  addRelatedTableData: function (tableData) {\n    this._relatedTableData.push(tableData);\n  },\n\n  model: function (r, opts) {\n    var self = opts.collection;\n\n    opts = _.extend(\n      {\n        parse: true,\n        configModel: self._configModel,\n        userModel: self._userModel\n      },\n      opts\n    );\n\n    if (r.type === 'source') {\n      var tableData = _.find(self._relatedTableData, function (t) {\n        return TableNameUtils.isSameTableName(r.options.table_name, t.name, self._configModel.get('user_name'));\n      });\n      if (tableData) {\n        opts.tableData = tableData;\n      }\n      return new AnalysisDefinitionNodeSourceModel(r, opts);\n    } else {\n      return new AnalysisDefinitionNodeModel(r, opts);\n    }\n  },\n\n  createSourceNode: function (d) {\n    d = d || {};\n    if (!d.id) throw new Error('id is required');\n    if (!d.tableName) throw new Error('tableName is required');\n\n    return this.add({\n      id: d.id,\n      type: 'source',\n      params: {\n        query: d.query || SQLUtils.getDefaultSQL(d.tableName, TableNameUtils.getUsername(d.tableName), true)\n      },\n      options: {\n        table_name: d.tableName\n      }\n    });\n  },\n\n  _onQueryObjectsUpdated: function (model) {\n    this._fetchQueryObjectsIfOnTop(model);\n  },\n\n  _fetchQueryObjectsIfOnTop: function (model) {\n    if (this._isNodeOnTop(model)) {\n      model.fetchQueryObjects();\n    }\n  },\n\n  _isNodeOnTop: function (model) {\n    var currentPos = this.indexOf(model);\n\n    return currentPos === this._getTopNodeIndex();\n  },\n\n  _getTopNodeIndex: function () {\n    var nodeOnTop = this._getNodeOnTop();\n    var at = this.indexOf(nodeOnTop);\n\n    return at;\n  },\n\n  _getNodeOnTop: function () {\n    return this.last();\n  }\n});\n","var Backbone = require('backbone');\nvar nodeIds = require('builder/value-objects/analysis-node-ids');\nvar AnalysisDefinitionModel = require('./analysis-definition-model');\n\n/**\n * Collection of analysis definitions.\n */\nmodule.exports = Backbone.Collection.extend({\n\n  model: function (d, opts) {\n    var self = opts.collection;\n\n    var m = new AnalysisDefinitionModel(d, {\n      parse: true,\n      collection: self, // used implicitly, for model to use collection.url()\n      analysisDefinitionNodesCollection: self._analysisDefinitionNodesCollection\n    });\n\n    return m;\n  },\n\n  initialize: function (models, options) {\n    if (!options.configModel) throw new Error('configModel is required');\n    if (!options.vizId) throw new Error('vizId is required');\n    if (!options.analysisDefinitionNodesCollection) throw new Error('analysisDefinitionNodesCollection is required');\n\n    this._configModel = options.configModel;\n    this._vizId = options.vizId;\n    this._analysisDefinitionNodesCollection = options.analysisDefinitionNodesCollection;\n  },\n\n  url: function () {\n    var baseUrl = this._configModel.get('base_url');\n    return baseUrl + '/api/v3/viz/' + this._vizId + '/analyses';\n  },\n\n  findAnalysisThatContainsNode: function (nodeDefModel) {\n    return this.findWhere({node_id: nodeDefModel.id}) ||\n      this.find(function (m) {\n        return m.containsNode(nodeDefModel);\n      });\n  },\n\n  findAnalysisForLayer: function (layerDefModel) {\n    var layerLetter = layerDefModel.get('letter');\n\n    return this.find(function (m) {\n      var letter = nodeIds.letter(m.get('node_id'));\n      return letter === layerLetter;\n    });\n  },\n\n  newAnalysisForNode: function (nodeDefModel) {\n    return this.add({analysis_definition: nodeDefModel.toJSON()});\n  },\n\n  /**\n   * @param {object} layerDefModel - instance of an analysis-definition-node-model\n   * @return {jqXHR, undefined} A promise if created a new analysis\n   */\n  saveAnalysisForLayer: function (layerDefModel) {\n    if (!layerDefModel) throw new Error('layerDefModel is required');\n\n    var nodeDefModel = layerDefModel.getAnalysisDefinitionNodeModel();\n    var analysisDefModel = this.findAnalysisForLayer(layerDefModel);\n\n    if (layerDefModel.isOwnerOfAnalysisNode(nodeDefModel)) {\n      if (analysisDefModel) {\n        analysisDefModel.set('node_id', nodeDefModel.id);\n      } else {\n        analysisDefModel = this.add({analysis_definition: nodeDefModel.toJSON()});\n      }\n    } else {\n      if (analysisDefModel) {\n        analysisDefModel.destroy(); // layer's node is owned by another layer, so the existing analysis should be deleted\n      }\n    }\n\n    this.each(function (analysisDefModel) {\n      if (analysisDefModel.containsNode(nodeDefModel)) {\n        analysisDefModel.save();\n      }\n    });\n\n    return analysisDefModel;\n  }\n\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar ImportsModel = require('./imports-model');\nvar POLL_TIMER = 30000;\n\n/**\n *  Imports collection\n *\n *  If it is fetched, it will add the import\n *\n */\n\nmodule.exports = Backbone.Collection.extend({\n\n  initialize: function (models, opts) {\n    if (!opts.userModel) throw new Error('userModel is required');\n    if (!opts.configModel) throw new Error('configModel is required');\n\n    this._userModel = opts.userModel;\n    this._configModel = opts.configModel;\n  },\n\n  model: function (attrs, opts) {\n    return new ImportsModel(attrs, {\n      userModel: opts.collection._userModel,\n      configModel: opts.collection._configModel\n    });\n  },\n\n  url: function (method) {\n    var version = this._configModel.urlVersion('import');\n    var baseUrl = this._configModel.get('base_url');\n    return baseUrl + '/api/' + version + '/imports';\n  },\n\n  parse: function (r) {\n    var self = this;\n\n    if (r.imports.length === 0) {\n      this.destroyCheck();\n    } else {\n      _.each(r.imports, function (id) {\n        // Check if that import exists...\n        var imports = self.filter(function (mdl) {\n          return mdl._importModel.get('item_queue_id') === id;\n        });\n\n        if (imports.length === 0) {\n          var importsModel = new ImportsModel({\n            id: id\n          }, {\n            userModel: self._userModel,\n            configModel: self._configModel\n          });\n\n          self.add(importsModel);\n        }\n      });\n    }\n\n    return this.models;\n  },\n\n  canImport: function () {\n    var importQuota = this._userModel.getMaxConcurrentImports();\n    var total = this.size();\n    var finished = 0;\n\n    this.each(function (m) {\n      if (m.hasFailed() || m.hasCompleted()) {\n        ++finished;\n      }\n    });\n\n    return (total - finished) < importQuota;\n  },\n\n  pollCheck: function (i) {\n    if (this.pollTimer) {\n      return;\n    }\n\n    var self = this;\n\n    this.pollTimer = setInterval(function () {\n      self.fetch();\n    }, POLL_TIMER || 2000);\n\n    this.fetch();\n  },\n\n  destroyCheck: function () {\n    clearInterval(this.pollTimer);\n    delete this.pollTimer;\n  },\n\n  failedItems: function () {\n    return this.filter(function (item) {\n      return item.hasFailed();\n    });\n  }\n});\n","var Backbone = require('backbone');\nvar ImportsCollection = require('./background-importer-imports-collection');\n\nvar POLLINGS_TIMER = 3000;\n\n/**\n *  Background polling default model\n *\n */\n\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    showSuccessDetailsButton: true,\n    importsPolling: false // enable imports polling\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.userModel) throw new Error('userModel is required');\n    if (!opts.configModel) throw new Error('configModel is required');\n\n    this._userModel = opts.userModel;\n    this._configModel = opts.configModel;\n\n    this.importsCollection = opts.importsCollection || new ImportsCollection(null, {\n      userModel: this._userModel,\n      configModel: this._configModel\n    });\n\n    this._initBinds();\n    this.startPollings();\n  },\n\n  _initBinds: function () {\n    this.importsCollection.bind('change:state', function (mdl) {\n      this.trigger('change', mdl, this);\n      this._onImportsStateChange(mdl);\n    }, this);\n\n    this.importsCollection.bind('remove', function (mdl) {\n      this.trigger('importRemoved', mdl, this);\n    }, this);\n\n    this.importsCollection.bind('add', function (mdl) {\n      this.trigger('importAdded', mdl, this);\n    }, this);\n  },\n\n  getTotalFailedItems: function () {\n    return this.importsCollection.failedItems().length;\n  },\n\n  removeImportItem: function (mdl) {\n    if (!mdl) {\n      return false;\n    }\n    this.importsCollection.remove(mdl);\n  },\n\n  addImportItem: function (mdl) {\n    if (!mdl) {\n      return false;\n    }\n    this.importsCollection.add(mdl);\n  },\n\n  canAddImport: function () {\n    return this.importsCollection.canImport();\n  },\n\n  getTotalImports: function () {\n    return this.importsCollection.size();\n  },\n\n  getTotalPollings: function () {\n    return this.importsCollection.size();\n  },\n\n  stopPollings: function () {\n    if (this.get('importsPolling')) {\n      this.importsCollection.destroyCheck();\n    }\n  },\n\n  startPollings: function () {\n    var self = this;\n    // Don't start pollings inmediately\n    setTimeout(function () {\n      if (self.get('importsPolling')) {\n        self.importsCollection.pollCheck();\n      }\n    }, POLLINGS_TIMER);\n  },\n\n  _onImportsStateChange: function () {},\n\n  clean: function () {\n    this.importsCollection.unbind(null, null, this);\n  }\n});\n","var PROVIDER_LEAFLET = 'leaflet';\nvar PROVIDER_GOOGLE_MAPS = 'googlemaps';\nvar CATEGORY_GOOGLE_MAPS = 'GMaps';\nvar LAYER_TYPE_GOOGLE_MAPS = 'GMapsBase';\nvar LAYER_TYPE_TILED = 'Tiled';\n\nmodule.exports = {\n  getProvider: function (layerType) {\n    if (layerType === LAYER_TYPE_GOOGLE_MAPS) {\n      return PROVIDER_GOOGLE_MAPS;\n    }\n    return PROVIDER_LEAFLET;\n  },\n\n  getLayerType: function (category) {\n    if (this.isGoogleMapsCategory(category)) {\n      return LAYER_TYPE_GOOGLE_MAPS;\n    }\n    return LAYER_TYPE_TILED;\n  },\n\n  isGoogleMapsCategory: function (category) {\n    return category === CATEGORY_GOOGLE_MAPS;\n  }\n};\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar CDB = require('internal-carto.js');\n\nvar queryTemplate = _.template('SELECT <%= column %> FROM (<%= sql %>) _table_sql GROUP BY <%= column %> ORDER BY <%= column %> ASC');\nvar MAX_ROW_COUNT = 100;\n\nmodule.exports = Backbone.Model.extend({\n  initialize: function (attrs, opts) {\n    if (!opts.configModel) throw new Error('configModel param is required');\n    if (!opts.nodeDefModel) throw new Error('nodeDefModel param is required');\n\n    this._query = opts.nodeDefModel.querySchemaModel.get('query');\n    this._rowData = [];\n\n    this._SQL = new CDB.SQL({\n      user: opts.configModel.get('user_name'),\n      sql_api_template: opts.configModel.get('sql_api_template'),\n      api_key: opts.configModel.get('api_key')\n    });\n\n    this.on('change:column', this.fetch, this);\n  },\n\n  _onQueryDone: function (r) {\n    var resultCount = _.size(r.rows);\n\n    if (resultCount && resultCount < MAX_ROW_COUNT) {\n      this._rowData = _.pluck(r.rows, this.get('column'));\n      this.trigger('columnsFetched', this._rowData);\n    }\n  },\n\n  fetch: function () {\n    if (this.get('column') && this._query) {\n      this._SQL.execute(\n        queryTemplate({\n          sql: this._query,\n          column: this.get('column')\n        }),\n        null,\n        {\n          extra_params: ['page', 'rows_per_page'],\n          page: 0,\n          rows_per_page: 40,\n          success: this._onQueryDone.bind(this),\n          error: function () {\n            // TODO: what happens if fails?\n          }\n        }\n      );\n    }\n  },\n\n  getRows: function () {\n    var rowDataCount = _.size(this._rowData);\n    if (rowDataCount > 0) {\n      if (rowDataCount && rowDataCount < MAX_ROW_COUNT) {\n        return _.reject(this._rowData, _.isNull);\n      } else {\n        return false;\n      }\n    } else {\n      return false;\n    }\n  }\n});\n","var BaseCollection = require('./data-observatory-base-collection');\nvar BaseModel = require('builder/components/custom-list/custom-list-item-model');\n\n// Interpolation boundary tag filters geometries to only show full coverage geometries\nvar FILTER_CLIPPED_GEOMS_IF_EXISTS = 'WHERE CASE WHEN EXISTS(SELECT 1 as cond FROM _data WHERE geom_tags ?\\'boundary_type/tags.interpolation_boundary\\' group by cond) THEN geom_tags ? \\'boundary_type/tags.interpolation_boundary\\' ELSE true END';\n\nvar ORDER_CLAUSE_GEOMS = 'ORDER BY geom_weight::numeric DESC;';\n\nvar COMMON_DATA_QUERY = 'bounds => (SELECT ST_SetSRID(ST_Extent(the_geom), 4326) FROM ({{{ query }}}) q), numer_id => {{{ measurement }}}, number_geometries => (SELECT CDB_EstimateRowCount(\\'{{{ query }}}\\')::INTEGER)';\n\nvar BOUNDARIES_QUERY_PLAIN = 'WITH _data as (SELECT * FROM OBS_GetAvailableGeometries( ' + COMMON_DATA_QUERY + ' ) denoms WHERE valid_numer IS TRUE) SELECT *, rank() OVER (ORDER BY score DESC) FROM _data ' + FILTER_CLIPPED_GEOMS_IF_EXISTS + ' ' + ORDER_CLAUSE_GEOMS;\n\nvar BOUNDARIES_QUERY_NORMALIZE = 'WITH _data as (SELECT * FROM OBS_GetAvailableGeometries(' + COMMON_DATA_QUERY + ', denom_id => {{{ denom_id }}}) denoms WHERE valid_numer IS TRUE AND valid_denom IS TRUE) SELECT *, rank() OVER (ORDER BY score DESC) FROM _data ' + FILTER_CLIPPED_GEOMS_IF_EXISTS + ' ' + ORDER_CLAUSE_GEOMS;\n\nvar BOUNDARIES_QUERY_TIMESPAN = 'WITH _data as (SELECT * FROM OBS_GetAvailableGeometries(' + COMMON_DATA_QUERY + ', timespan => {{{ timespan }}}) denoms WHERE valid_numer IS TRUE AND valid_timespan = TRUE) SELECT *, rank() OVER (ORDER BY score DESC) FROM _data ' + FILTER_CLIPPED_GEOMS_IF_EXISTS + ' ' + ORDER_CLAUSE_GEOMS;\n\nvar BOUNDARIES_QUERY_NORMALIZE_TIMESPAN = 'WITH _data as (SELECT * FROM OBS_GetAvailableGeometries(' + COMMON_DATA_QUERY + ', denom_id => {{{ denom_id }}}, timespan => {{{ timespan }}}) denoms WHERE valid_numer IS TRUE AND valid_denom IS TRUE AND valid_timespan is TRUE) SELECT *, rank() OVER (ORDER BY score DESC) FROM _data ' + FILTER_CLIPPED_GEOMS_IF_EXISTS + ' ' + ORDER_CLAUSE_GEOMS;\n\nmodule.exports = BaseCollection.extend({\n  model: function (attrs, opts) {\n    // label and val to custom list compatibility\n    var o = {};\n    o.val = attrs.geom_id;\n    o.label = attrs.geom_name;\n    o.rank = attrs.rank;\n\n    return new BaseModel(o);\n  },\n\n  getLabels: function () {\n    return this.pluck('label');\n  },\n\n  getValues: function () {\n    return this.pluck('val');\n  },\n\n  getPreSelectedBoundaryValue: function () {\n    var boundary = this.models.filter(\n      function (boundary) { return boundary.attributes.rank === 1; }\n    ).shift();\n\n    return boundary && boundary.attributes && boundary.attributes.val;\n  },\n\n  buildQuery: function (options) {\n    if (options.denom_id != null && options.timespan != null) {\n      return BOUNDARIES_QUERY_NORMALIZE_TIMESPAN;\n    } else {\n      if (options.denom_id != null) {\n        return BOUNDARIES_QUERY_NORMALIZE;\n      } else if (options.timespan != null) {\n        return BOUNDARIES_QUERY_TIMESPAN;\n      } else {\n        return BOUNDARIES_QUERY_PLAIN;\n      }\n    }\n  }\n\n});\n","var _ = require('underscore');\nvar $ = require('jquery');\nvar cdb = require('internal-carto.js');\nvar errorParse = require('builder/helpers/error-parser');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'configModel',\n  'nodeDefModel'\n];\n\nvar OBS_META_QUERY = 'SELECT OBS_GetMeta((SELECT ST_SetSRID(ST_Extent(the_geom), 4326) FROM ({{{ query }}}) q), {{{ metadata }}})';\n\nvar ColumnName = function (options) {\n  checkAndBuildOpts(options, REQUIRED_OPTS, this);\n  this._querySchemaModel = this._nodeDefModel.querySchemaModel;\n  this.isFetching = false;\n\n  var configModel = options.configModel;\n  this.SQL = new cdb.SQL({\n    user: configModel.get('user_name'),\n    sql_api_template: configModel.get('sql_api_template'),\n    api_key: configModel.get('api_key')\n  });\n};\n\nColumnName.prototype = {\n  buildQuery: function () {\n    return OBS_META_QUERY;\n  },\n\n  buildQueryOptions: function (options) {\n    return {\n      metadata: \"'[\" + JSON.stringify(options) + \"]'\",\n      query: this._querySchemaModel.get('query')\n    };\n  },\n\n  fetch: function (options) {\n    if (!options.numer_id) {\n      return;\n    }\n\n    this._success = options && options.success;\n    this._error = options && options.error;\n\n    var deferred = $.Deferred();\n\n    var queryOptions = this.buildQueryOptions(_.omit(options, 'sucess', 'error'));\n    var sqlQuery = this.buildQuery();\n\n    if (!this.isFetching) {\n      this.isFetching = true;\n      this.SQL.execute(sqlQuery, queryOptions, {\n        success: function (data) {\n          this.isFetching = false;\n          this._success && this._success(data);\n          deferred.resolve();\n        }.bind(this),\n        error: function (err) {\n          this.isFetching = false;\n          this._error && this._error(errorParse(err));\n          deferred.reject();\n        }.bind(this)\n      });\n    } else {\n      deferred.reject();\n    }\n\n    return deferred.promise();\n  }\n};\n\nmodule.exports = ColumnName;\n","var _ = require('underscore');\nvar BaseModel = require('builder/components/custom-list/custom-list-item-model');\nvar $ = require('jquery');\nvar cdb = require('internal-carto.js');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'configModel',\n  'nodeDefModel'\n];\n\nvar MEASUREMENT_ATTRIBUTES = ['aggregate', 'type', 'label', 'val', 'description', 'filter', 'license'];\n\nvar MEASUREMENT_BY_ID = 'SELECT numer_id, numer_name, numer_description, numer_type, numer_aggregate, numer_tags FROM _OBS_GetNumerators((SELECT ST_SetSRID(ST_Extent(the_geom), 4326) FROM ({{{ query }}}) q), section_tags => {{{ area }}}, ids => {{{ measurement }}})';\n\nmodule.exports = BaseModel.extend({\n  initialize: function (attrs, options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n    this._querySchemaModel = this._nodeDefModel.querySchemaModel;\n\n    var configModel = options.configModel;\n    this.SQL = new cdb.SQL({\n      user: configModel.get('user_name'),\n      sql_api_template: configModel.get('sql_api_template'),\n      api_key: configModel.get('api_key')\n    });\n\n    BaseModel.prototype.initialize.call(this, attrs, options);\n  },\n\n  fetch: function (options) {\n    var defaults = {\n      area: null,\n      measurement: null,\n      query: this._querySchemaModel.get('query')\n    };\n\n    this.deferred = $.Deferred();\n    var queryOptions = _.defaults(options, defaults);\n\n    this.set('state', 'fetching');\n    this.SQL.execute(MEASUREMENT_BY_ID, queryOptions, {\n      success: function (data) {\n        this._onFetchSuccess(data);\n        this.set('state', 'fetched');\n        this.deferred.resolve();\n      }.bind(this),\n      error: function () {\n        this.set('state', 'error');\n        this.deferred.reject();\n      }.bind(this)\n    });\n\n    return this.deferred.promise();\n  },\n\n  isFetching: function () {\n    return this.getState() === 'fetching';\n  },\n\n  getState: function () {\n    return this.get('state');\n  },\n\n  _onFetchSuccess: function (data) {\n    var model = _.first(data.rows);\n\n    if (!model) {\n      this._clear();\n      return;\n    }\n\n    var o = {};\n    // label and val to custom list compatibility\n    o.val = model.numer_id;\n    o.label = model.numer_name;\n    o.description = model.numer_description;\n    o.type = model.numer_type;\n    o.aggregate = model.numer_aggregate;\n    // a measurement can belong to more than one category (filter)\n    o.filter = [];\n    var tags = model.numer_tags;\n    if (!_.isObject(tags)) {\n      tags = JSON.parse(tags);\n    }\n\n    for (var key in tags) {\n      if (/^subsection/.test(key)) {\n        o.filter.push({\n          id: key,\n          name: tags[key]\n        });\n      }\n\n      if (/^license/.test(key)) {\n        o.license = tags[key];\n      }\n    }\n\n    this.set(o);\n  },\n\n  _clear: function (options) {\n    var attrs = MEASUREMENT_ATTRIBUTES.reduce(function (memo, attr) {\n      memo[attr] = null;\n      return memo;\n    }, {});\n\n    this.set(attrs, {silent: true});\n  }\n});\n","var BaseCollection = require('./data-observatory-base-collection');\nvar BaseModel = require('builder/components/custom-list/custom-list-item-model');\n\nvar NORMALIZE_QUERY_WITH_MEASUREMENT = 'SELECT * FROM OBS_GetAvailableDenominators((SELECT ST_SetSRID(ST_Extent(the_geom), 4326) FROM ({{{ query }}}) q), NULL, {{{ measurement }}}) denoms WHERE valid_numer IS TRUE';\n\nmodule.exports = BaseCollection.extend({\n  model: function (attrs, opts) {\n    // label and val to custom list compatibility\n    var o = {};\n    o.val = attrs.denom_id;\n    o.label = attrs.denom_name;\n\n    return new BaseModel(o);\n  },\n\n  buildQuery: function (options) {\n    return NORMALIZE_QUERY_WITH_MEASUREMENT;\n  }\n});\n","var BaseCollection = require('./data-observatory-base-collection');\nvar BaseModel = require('builder/components/custom-list/custom-list-item-model');\n\nvar REGIONS_QUERY = \"SELECT count(*) num_measurements, tag.key region_id, tag.value region_name FROM (SELECT * FROM OBS_GetAvailableNumerators() WHERE jsonb_pretty(numer_tags) LIKE '%subsection/%') numers,  Jsonb_Each(numers.numer_tags) tag WHERE tag.key like 'section%' GROUP BY tag.key, tag.value ORDER BY region_name\";\n\nmodule.exports = BaseCollection.extend({\n  buildQuery: function () {\n    return REGIONS_QUERY;\n  },\n\n  model: function (attrs, opts) {\n    // label and val to custom list compatibility\n    var o = {};\n    o.val = attrs.region_id;\n    o.label = attrs.region_name.replace(/[\"]+/g, '');\n\n    o.renderOptions = {\n      measurements: attrs.num_measurements\n    };\n\n    return new BaseModel(o);\n  },\n\n  fetch: function (options) {\n    this.stateModel.set('state', 'fetching');\n    // check if the geometry type is available, if not wait until it's finished\n    if (this._nodeDefModel.queryGeometryModel.isFetched()) {\n      BaseCollection.prototype.fetch.call(this, options);\n    } else {\n      this._nodeDefModel.queryGeometryModel.once('change:status', function () {\n        BaseCollection.prototype.fetch.call(this, options);\n      }, this);\n    }\n  }\n});\n","var BaseCollection = require('./data-observatory-base-collection');\nvar BaseModel = require('builder/components/custom-list/custom-list-item-model');\n\nvar TIMESPAN_QUERY_WITH_NORMALIZE = 'SELECT * FROM OBS_GetAvailableTimespans((SELECT ST_SetSRID(ST_Extent(the_geom), 4326) FROM ({{{ query }}}) q), NULL, {{{ measurement }}}, {{{ denom_id }}}) denoms WHERE valid_numer IS TRUE AND (valid_denom IS TRUE OR {{{ denom_id }}} IS NULL) ORDER BY timespan_name DESC';\n\nvar TIMESPAN_QUERY_WITHOUT_NORMALIZE = 'SELECT * FROM OBS_GetAvailableTimespans((SELECT ST_SetSRID(ST_Extent(the_geom), 4326) FROM ({{{ query }}}) q), NULL, {{{ measurement }}}, NULL) denoms WHERE valid_numer IS TRUE ORDER BY timespan_name DESC';\n\nmodule.exports = BaseCollection.extend({\n  model: function (attrs, opts) {\n    // label and val to custom list compatibility\n    var o = {};\n    o.val = attrs.timespan_id;\n    o.label = attrs.timespan_name;\n\n    return new BaseModel(o);\n  },\n\n  buildQuery: function (options) {\n    if (options.denom_id != null) {\n      return TIMESPAN_QUERY_WITH_NORMALIZE;\n    } else {\n      return TIMESPAN_QUERY_WITHOUT_NORMALIZE;\n    }\n  },\n\n  selectFirstAsDefault: function () {\n    var first = this.first();\n    if (first) {\n      this.setSelected(first.getValue());\n    }\n  }\n});\n","var BackgroundPollingModel = require('./background-importer/background-polling-model');\nvar TableModel = require('./table-model');\n\n/**\n *  Background polling model for the editor context.\n */\n\nmodule.exports = BackgroundPollingModel.extend({\n\n  initialize: function (attrs, opts) {\n    BackgroundPollingModel.prototype.initialize.apply(this, arguments);\n\n    if (!opts.userActions) { throw new Error('userActions is required'); }\n\n    this._userActions = opts.userActions;\n  },\n\n  _onImportsStateChange: function (importsModel) {\n    if (importsModel.hasCompleted()) {\n      var tableName = importsModel.importedVis().get('table').name;\n      var tableModel = new TableModel({\n        name: tableName\n      }, {\n        configModel: this._configModel\n      });\n\n      // Provide table geometry in order to set properly styles when\n      // layer is added to the current map\n      var onTableFetched = function () {\n        this._userActions.createLayerFromTable(tableModel);\n        this.trigger('importCompleted', importsModel, this);\n      }.bind(this);\n\n      tableModel.fetch().always(onTableFetched);\n    }\n  }\n});\n","var Backbone = require('backbone');\n\n/**\n * Model that represents a visualization export (v3)\n */\n\nmodule.exports = Backbone.Model.extend({\n\n  initialize: function (attrs, opts) {\n    if (!attrs.visualization_id) throw new Error('visualization_id is required');\n    if (!opts.configModel) throw new Error('configModel is required');\n\n    this._configModel = opts.configModel;\n  },\n\n  urlRoot: function () {\n    var baseUrl = this._configModel.get('base_url');\n\n    return baseUrl + '/api/v3/visualization_exports';\n  },\n\n  requestExport: function () {\n    this.save(null, {\n      success: this._requestExportSuccessHandler.bind(this)\n    });\n\n    // TODO add metrics for private and public exports\n  },\n\n  cancelExport: function () {\n    this._interrupt();\n  },\n\n  _requestExportSuccessHandler: function () {\n    this._pollPID = setInterval(function () {\n      this.fetch({\n        success: this._checkState.bind(this),\n        error: this._errorHandler.bind(this)\n      });\n    }.bind(this), 2000);\n  },\n\n  _checkState: function () {\n    if (this.get('state') === 'complete') {\n      this._finishExport();\n    } else if (this.get('state') === 'failure') {\n      this._errorHandler();\n    }\n  },\n\n  _finishExport: function () {\n    clearInterval(this._pollPID);\n  },\n\n  _errorHandler: function () {\n    this._interrupt();\n\n    throw new Error('There is a problem with your export. Please try again.');\n  },\n\n  _interrupt: function () {\n    clearInterval(this._pollPID);\n\n    this.set('state', 'failure');\n  }\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar QueryRowModel = require('./query-row-model');\n\nvar TYPES_POINT = 'point';\nvar TYPES_LINE = 'line';\nvar TYPES_POLYGON = 'polygon';\n\nvar GEOJSON_TO_FEATURE_TYPE = {\n  Point: TYPES_POINT,\n  MultiPoint: TYPES_POINT,\n  LineString: TYPES_LINE,\n  MultiLineString: TYPES_LINE,\n  Polygon: TYPES_POLYGON,\n  MultiPolygon: TYPES_POLYGON\n};\n\nvar convertGeoJSONTypeToFeatureType = function (the_geom) {\n  var geoJSON = null;\n\n  try {\n    geoJSON = JSON.parse(the_geom);\n  } catch (err) {\n    // if the geom is not a valid json value\n  }\n\n  var geometryType = geoJSON && geoJSON.type;\n  var featureType = GEOJSON_TO_FEATURE_TYPE[geometryType];\n  if (!featureType) {\n    throw new Error(\"unsupported geometry type: '\" + geometryType + \"'\");\n  }\n\n  return featureType;\n};\n\nvar BLACKLISTED_COLUMNS = ['cartodb_id', 'created_at', 'the_geom_webmercator', 'updated_at'];\n\nvar FeatureDefinitionModel = Backbone.Model.extend({\n\n  initialize: function (attrs, options) {\n    if (!options.configModel) throw new Error('configModel is required');\n    if (!options.layerDefinitionModel) throw new Error('layerDefinitionModel is required');\n    if (!options.userModel) throw new Error('userModel is required');\n\n    this._configModel = options.configModel;\n    this._layerDefinitionModel = options.layerDefinitionModel;\n    this._userModel = options.userModel;\n    this._featureType = options.featureType;\n\n    this._firstNode = this._getAnalysisDefinitionNodeModel();\n    this._changesHistory = [];\n\n    if (this._firstNode.isSourceType()) {\n      this._tableNodeModel = this._firstNode.getTableModel();\n    }\n\n    this._onChange = _.debounce(this._onChange.bind(this), 500);\n\n    if (this.isNew()) {\n      // Bind change event in order to \"store\" all changed columns after creation\n      this._bindChangeEvent();\n    }\n  },\n\n  isNew: function () {\n    return !this.has('cartodb_id');\n  },\n\n  isPoint: function () {\n    return this._isType(TYPES_POINT);\n  },\n\n  isPolygon: function () {\n    return this._isType(TYPES_POLYGON);\n  },\n\n  isLine: function () {\n    return this._isType(TYPES_LINE);\n  },\n\n  _isType: function (type) {\n    return this._getType() === type;\n  },\n\n  isEditable: function () {\n    var analysisDefinitionModel = this._getAnalysisDefinitionNodeModel();\n    return !analysisDefinitionModel.isReadOnly();\n  },\n\n  _getPermissionModel: function () {\n    return this._tableNodeModel && this._tableNodeModel.getPermissionModel();\n  },\n\n  isReadOnly: function () {\n    return this._tableNodeModel && this._tableNodeModel.isReadOnly(this._userModel);\n  },\n\n  hasAnalyses: function () {\n    return this._layerDefinitionModel.hasAnalyses();\n  },\n\n  isCustomQueryApplied: function () {\n    var analysisDefinitionModel = this._getAnalysisDefinitionNodeModel();\n    return analysisDefinitionModel.isCustomQueryApplied();\n  },\n\n  _getAnalysisDefinitionNodeModel: function () {\n    return this._layerDefinitionModel.getAnalysisDefinitionNodeModel();\n  },\n\n  isEqual: function (featureDefinition) {\n    return this.get('cartodb_id') === featureDefinition.get('cartodb_id') &&\n      this.getLayerId() === featureDefinition.getLayerId();\n  },\n\n  getLayerId: function () {\n    return this._layerDefinitionModel.id;\n  },\n\n  getLayerDefinition: function () {\n    return this._layerDefinitionModel;\n  },\n\n  _cleanChangesHistory: function () {\n    this._changesHistory = [];\n  },\n\n  _bindChangeEvent: function () {\n    this.on('change', this._onChange, this);\n  },\n\n  _unbindChangeEvent: function () {\n    this.off('change', this._onChange, this);\n  },\n\n  _onChange: function () {\n    _.each(this.changed, function (value, key) {\n      if (!_.contains(this._changesHistory, key)) {\n        this._changesHistory.push(key);\n      }\n    }, this);\n  },\n\n  hasBeenChangedAfterLastSaved: function (key) {\n    return _.contains(this._changesHistory, key);\n  },\n\n  getFeatureType: function () {\n    if (this.isPoint()) {\n      return 'point';\n    }\n    if (this.isLine()) {\n      return 'line';\n    }\n    if (this.isPolygon()) {\n      return 'polygon';\n    }\n  },\n\n  fetch: function (options) {\n    options = options || {};\n    this._unbindChangeEvent();\n\n    this._getQueryRowModel().fetch({\n      success: function (data) {\n        this.set(data.toJSON());\n        // Bind change event in order to \"store\" all changed columns after starting edition\n        this._bindChangeEvent();\n        options.success && options.success();\n      }.bind(this)\n    });\n  },\n\n  save: function (options) {\n    options = options || {};\n    var columns = this._layerDefinitionModel.getColumnNamesFromSchema();\n    var attrs = _.pick(this.toJSON(), _.difference(columns, BLACKLISTED_COLUMNS));\n\n    this._getQueryRowModel().save(attrs, {\n      success: function (queryRowModel) {\n        if (this.isNew()) {\n          this.set('cartodb_id', queryRowModel.get('cartodb_id'));\n        }\n        this.trigger('save', this, options);\n        options.success && options.success();\n        this._cleanChangesHistory();\n      }.bind(this),\n      error: function () {\n        options.error && options.error();\n      }\n    });\n  },\n\n  destroy: function (options) {\n    options = options || {};\n    this._getQueryRowModel().destroy({\n      success: function () {\n        this.trigger('remove', this, options);\n        options.success && options.success();\n      }.bind(this),\n      error: function () {\n        options.error && options.error();\n      }\n    });\n  },\n\n  _getQueryRowModel: function () {\n    var attrs = {};\n\n    if (this.has('cartodb_id')) {\n      attrs.cartodb_id = this.get('cartodb_id');\n    }\n\n    this._queryRowModel = this._queryRowModel || new QueryRowModel(attrs, {\n      tableName: this._layerDefinitionModel.getTableName(),\n      configModel: this._configModel,\n      permissionModel: this._getPermissionModel(),\n      userModel: this._userModel\n    });\n\n    return this._queryRowModel;\n  },\n\n  _getType: function () {\n    var the_geom = this.get('the_geom');\n    var type = the_geom && convertGeoJSONTypeToFeatureType(the_geom) || this._featureType;\n\n    return type;\n  }\n});\n\nmodule.exports = FeatureDefinitionModel;\n","var Backbone = require('backbone');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar STATES = require('./query-base-status');\n\nvar CONTEXTS = {\n  map: 'map',\n  table: 'table'\n};\n\nvar REQUIRED_OPTS = [\n  'querySchemaModel',\n  'queryGeometryModel',\n  'queryRowsCollection'\n];\n\nvar LayerContentModel = Backbone.Model.extend({\n  defaults: {\n    context: CONTEXTS.map, // map or table\n    // This variable `state` is only used for the trigger change:state event.\n    // It lives in the model so, as long as the model is recreated with the view every time,\n    // this variable is not shared between views and can NOT use it to get the real state.\n    state: STATES.initial\n  },\n\n  initialize: function (attrs, opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._querySchemaModel, 'change:status', this._setState);\n    this.listenTo(this._queryGeometryModel, 'change:status', this._setState);\n    this.listenTo(this._queryRowsCollection.statusModel, 'change:status', this._setState);\n  },\n\n  _setState: function () {\n    this.set('state', this._getState());\n  },\n\n  _getState: function () {\n    if (this.isErrored()) return STATES.errored;\n    if (this.isFetched()) return STATES.fetched;\n    if (this.isFetching()) return STATES.fetching;\n    if (this.isInitial()) return STATES.initial;\n\n    return STATES.unavailable;\n  },\n\n  isErrored: function () {\n    return this._querySchemaModel.hasRepeatedErrors() ||\n      this._queryGeometryModel.hasRepeatedErrors() ||\n      this._queryRowsCollection.hasRepeatedErrors();\n  },\n\n  isFetching: function () {\n    return this._querySchemaModel.isFetching() ||\n      this._queryGeometryModel.isFetching() ||\n      this._queryRowsCollection.isFetching();\n  },\n\n  isFetched: function () {\n    return this._querySchemaModel.isFetched() &&\n      this._queryGeometryModel.isFetched() &&\n      this._queryRowsCollection.isFetched();\n  },\n\n  isInFinalStatus: function () {\n    return this._querySchemaModel.isInFinalStatus() &&\n      this._queryGeometryModel.isInFinalStatus() &&\n      this._queryRowsCollection.isInFinalStatus();\n  },\n\n  isInitial: function () {\n    return this.get('state') === STATES.initial;\n  },\n\n  isDone: function () {\n    return this.isFetched() || this.isErrored();\n  }\n});\n\nLayerContentModel.CONTEXTS = CONTEXTS;\nLayerContentModel.STATES = STATES;\n\nmodule.exports = LayerContentModel;\n","var $ = require('jquery');\nvar _ = require('underscore');\nvar Backbone = require('backbone');\nvar LayerDefinitionModel = require('./layer-definition-model');\nvar layerLetters = require('./layer-letters');\nvar layerColors = require('./layer-colors');\nvar nodeIds = require('builder/value-objects/analysis-node-ids');\nvar layerTypesAndKinds = require('./layer-types-and-kinds');\nvar SQLUtils = require('builder/helpers/sql-utils');\nvar TableNameUtils = require('builder/helpers/table-name-utils');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar REQUIRED_OPTS = [\n  'analysisDefinitionNodesCollection',\n  'configModel',\n  'mapId',\n  'stateDefinitionModel',\n  'userModel'\n];\n\nvar generateLabelsLayerName = function (layerName) {\n  return layerName + ' Labels';\n};\n\n/**\n * Collection of layer definitions\n */\nmodule.exports = Backbone.Collection.extend({\n\n  initialize: function (models, opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n  },\n\n  url: function () {\n    var baseUrl = this._configModel.get('base_url');\n    return baseUrl + '/api/v1/maps/' + this._mapId + '/layers';\n  },\n\n  parse: function (r) {\n    return r.layers;\n  },\n\n  save: function (options) {\n    this.each(function (layerDefModel, index) {\n      layerDefModel.set('order', index, { silent: true });\n    });\n    Backbone.sync('update', this, options);\n  },\n\n  toJSON: function () {\n    return {\n      layers: Backbone.Collection.prototype.toJSON.apply(this, arguments)\n    };\n  },\n\n  /**\n   * Intended to be called from entry point, to make sure initial layers are taken into account\n   */\n  resetByLayersData: function (layersData) {\n    this.reset(layersData, {\n      silent: true,\n      initialLetters: _.chain(layersData)\n        .pluck('options')\n        .pluck('letter')\n        .compact()\n        .value()\n    });\n\n    this._sanitizeLabels();\n  },\n\n  comparator: function (model) {\n    return model.get('order');\n  },\n\n  model: function (d, opts) {\n    var self = opts.collection;\n\n    // Add data required for new editor if not set (e.g. a vis created on old editor doesn't contain letter and source)\n    var o = _.clone(d.options) || {};\n    var attrs = _.defaults(\n      { options: o },\n      _.omit(d, ['options']\n      ));\n\n    if (!isNaN(opts.at)) {\n      attrs.options.order = opts.at;\n    }\n\n    if (layerTypesAndKinds.isKindDataLayer(attrs.kind)) {\n      o.letter = o.letter || layerLetters.next(self._takenLetters(opts.initialLetters));\n      o.color = o.color || layerColors.getColorForLetter(o.letter);\n\n      // Create source attr if it does not already exist\n      var sourceId = nodeIds.next(o.letter);\n\n      if (o.table_name && (!o.source || o.source === sourceId)) {\n        var tableName = TableNameUtils.getUnqualifiedName(o.table_name);\n        var userName = o.user_name || TableNameUtils.getUsername(o.table_name);\n\n        var qualifyTableName = (userName && self._configModel.get('user_name') !== userName) || self._userModel.isInsideOrg();\n        tableName = TableNameUtils.getQualifiedTableName(o.table_name, userName, qualifyTableName);\n\n        o.source = o.source || sourceId;\n        o.query = o.query || SQLUtils.getDefaultSQLFromTableName(tableName);\n\n        // Add analysis definition unless already existing\n        self._analysisDefinitionNodesCollection.createSourceNode({\n          id: sourceId,\n          tableName: tableName,\n          query: o.query\n        });\n      }\n    }\n\n    var parseAttrs = typeof opts.parse === 'boolean' ? opts.parse : true;\n    var m = new LayerDefinitionModel(attrs, {\n      parse: parseAttrs,\n      collection: self,\n      configModel: self._configModel\n    });\n\n    return m;\n  },\n\n  nextLetter: function () {\n    return layerLetters.next(this._takenLetters());\n  },\n\n  findAnalysisDefinitionNodeModel: function (id) {\n    return this._analysisDefinitionNodesCollection.get(id);\n  },\n\n  findOwnerOfAnalysisNode: function (nodeDefModel) {\n    return this.find(function (layerDefModel) {\n      return layerDefModel.isOwnerOfAnalysisNode(nodeDefModel);\n    });\n  },\n\n  findPrimaryParentLayerToAnalysisNode: function (nodeDefModel, opts) {\n    if (!nodeDefModel) return;\n\n    opts = opts || {};\n    if (!_.isArray(opts.exclude)) {\n      opts.exclude = [opts.exclude];\n    }\n    var owner = this.findOwnerOfAnalysisNode(nodeDefModel);\n\n    return this.find(function (layerDefModel) {\n      if (layerDefModel === owner) return;\n      if (_.contains(opts.exclude, layerDefModel)) return;\n\n      var layerHeadNode = layerDefModel.getAnalysisDefinitionNodeModel();\n      if (nodeDefModel === layerHeadNode) return true;\n\n      if (layerHeadNode) {\n        var primarySourceOfLastOwnNode = _.last(layerHeadNode.linkedListBySameLetter()).getPrimarySource();\n        return nodeDefModel === primarySourceOfLastOwnNode;\n      }\n    });\n  },\n\n  isThereAnyGeometryData: function () {\n    var dataLayers = this._getDataLayers();\n    var allQueryGeometryModels = this._getAllQueryGeometryModels(dataLayers);\n    var queryGeometryModelsValuePromises = _.map(allQueryGeometryModels, function (queryGeometryModel) {\n      return queryGeometryModel.hasValueAsync();\n    });\n\n    return Promise.all(queryGeometryModelsValuePromises)\n      .then(function (hasGeomValues) {\n        return _.some(hasGeomValues);\n      });\n  },\n\n  loadAllQueryGeometryModels: function (callback) {\n    var promises = this.filter(function (layerDefModel) {\n      return layerDefModel.isDataLayer();\n    }).map(function (layerDefModel) {\n      var queryGeometryModel = layerDefModel.getAnalysisDefinitionNodeModel().queryGeometryModel;\n      var status = queryGeometryModel.get('status');\n      var deferred = new $.Deferred();\n\n      if (queryGeometryModel.isFetched()) {\n        deferred.resolve();\n      } else if (queryGeometryModel.canFetch()) {\n        if (status !== 'fetching') {\n          queryGeometryModel.fetch({\n            success: function () {\n              deferred.resolve();\n            },\n            error: function () {\n              deferred.reject();\n            }\n          });\n        } else {\n          deferred.resolve();\n        }\n      } else {\n        deferred.reject();\n      }\n\n      return deferred.promise();\n    }, this);\n\n    $.when.apply($, promises).done(callback);\n  },\n\n  isThereAnyTorqueLayer: function () {\n    return this.any(function (model) {\n      return layerTypesAndKinds.isTorqueType(model.get('type'));\n    });\n  },\n\n  isThereAnyCartoDBLayer: function () {\n    return this.any(function (model) {\n      return layerTypesAndKinds.isCartoDBType(model.get('type'));\n    });\n  },\n\n  anyContainsNode: function (nodeDefModel) {\n    return this.any(function (layerDefModel) {\n      return layerDefModel.containsNode(nodeDefModel);\n    });\n  },\n\n  isDataLayerOnTop: function (lyrModel) {\n    var currentPos = this.indexOf(lyrModel);\n    return currentPos === this.getTopDataLayerIndex();\n  },\n\n  getTopDataLayerIndex: function () {\n    var layerOnTop = this.getLayerOnTop();\n    var at = this.indexOf(layerOnTop);\n    var hasLabels = layerOnTop &&\n      !layerTypesAndKinds.isCartoDBType(layerOnTop.get('type')) &&\n      !layerTypesAndKinds.isTorqueType(layerOnTop.get('type'));\n\n    if (hasLabels) { at--; }\n\n    return at;\n  },\n\n  getNumberOfDataLayers: function () {\n    return this.select(function (model) {\n      return layerTypesAndKinds.isTypeDataLayer(model.get('type'));\n    }).length;\n  },\n\n  _takenLetters: function (otherLetters) {\n    var valuesFromAddedModels = _.compact(this.pluck('letter'));\n\n    // When adding multiple items the models created so far are stored in the internal object this._byId,\n    // need to make sure to take them into account when returning already taken letter.\n    var valuesFromModelsNotYetAdded = _.chain(this._byId).values().invoke('get', 'letter').value();\n\n    return _.union(valuesFromAddedModels, valuesFromModelsNotYetAdded, otherLetters);\n  },\n\n  // This ensures that we don't end up with more than one labels layer\n  _sanitizeLabels: function () {\n    var troubled = this.models.filter(function (layer) {\n      return layerTypesAndKinds.isTiledType(layer.get('type'));\n    }).filter(function (layer) {\n      var index = this.models.indexOf(layer);\n      return (index > 0 && index < this.length - 1);\n    }.bind(this));\n\n    troubled.length > 0 && _.each(troubled, function (layer) {\n      layer.destroy();\n    });\n  },\n\n  setBaseLayer: function (newBaseLayerAttrs) {\n    this.trigger('changingBaseLayer');\n\n    newBaseLayerAttrs = _.clone(newBaseLayerAttrs);\n    if (this.isBaseLayerAdded(newBaseLayerAttrs)) {\n      this.trigger('baseLayerChanged');\n      return false;\n    }\n\n    var newBaseLayerHasLabels = !!(newBaseLayerAttrs.labels && newBaseLayerAttrs.labels.urlTemplate);\n\n    var labelsLayerOptions = {\n      silent: true,\n      wait: true, // do not add/remove the layer unless it's created/removed/updated successfully\n      success: function () {\n        this._sanitizeLabels();\n        this.trigger('baseLayerChanged');\n      }.bind(this),\n      error: function () {\n        this.trigger('baseLayerFailed');\n      }.bind(this)\n    };\n\n    var baseLayerOptions = {\n      silent: true,\n      wait: true, // do not update the layer unless it's created/updated successfully\n      success: function () {\n        var labelsLayer = this.getLabelsLayer();\n        if (newBaseLayerHasLabels) {\n          if (labelsLayer) {\n            this._updateLabelsLayer(newBaseLayerAttrs, labelsLayerOptions);\n          } else {\n            this._addLabelsLayer(newBaseLayerAttrs, labelsLayerOptions);\n          }\n        } else {\n          if (labelsLayer) {\n            this._destroyLabelsLayer(labelsLayerOptions);\n          } else {\n            this._sanitizeLabels();\n            this.trigger('baseLayerChanged');\n          }\n        }\n      }.bind(this),\n      error: function () {\n        this.trigger('baseLayerFailed');\n      }.bind(this)\n    };\n\n    if (this.getBaseLayer()) {\n      this._updateBaseLayer(newBaseLayerAttrs, baseLayerOptions);\n    } else {\n      this._createBaseLayer(newBaseLayerAttrs, baseLayerOptions);\n    }\n  },\n\n  isBaseLayerAdded: function (basemapAttrs) {\n    var baseLayerDefinitionModel = this.getBaseLayer();\n    return baseLayerDefinitionModel.matchesAttrs(basemapAttrs);\n  },\n\n  _updateBaseLayer: function (basemapAttrs, opts) {\n    var currentBaseLayer = this.getBaseLayer();\n    var newBaseLayerAttrs = _.omit(basemapAttrs, [ 'id', 'order', 'labels', 'template' ]);\n\n    currentBaseLayer.attributes = _.extend({\n      order: 0\n    }, _.pick(currentBaseLayer.attributes, [\n      'id',\n      'type',\n      'category'\n    ]));\n\n    currentBaseLayer.save(newBaseLayerAttrs, opts);\n  },\n\n  _createBaseLayer: function (newBaseLayerAttrs, opts) {\n    newBaseLayerAttrs = _.extend(newBaseLayerAttrs, {\n      order: 0\n    });\n    return this.create(newBaseLayerAttrs, _.extend({ at: 0 }, opts));\n  },\n\n  _updateLabelsLayer: function (newBaseLayerAttrs, opts) {\n    var labelsLayer = this.getLabelsLayer();\n    var newAttrs = _.omit(newBaseLayerAttrs, 'labels');\n\n    newAttrs = _.pick(newAttrs, _.identity);\n    newAttrs = _.extend(newAttrs, newBaseLayerAttrs.labels, {\n      name: generateLabelsLayerName(newBaseLayerAttrs.name)\n    });\n\n    labelsLayer.save(newAttrs, opts);\n  },\n\n  _addLabelsLayer: function (newBaseLayerAttrs, opts) {\n    var optionsAttribute = _.pick(newBaseLayerAttrs, ['type', 'subdomains', 'minZoom', 'maxZoom', 'name', 'className', 'attribution', 'category']);\n    optionsAttribute = _.extend(optionsAttribute, newBaseLayerAttrs.labels, {\n      name: generateLabelsLayerName(newBaseLayerAttrs.name)\n    });\n\n    var labelsLayerAttrs = {\n      order: this.getLayerOnTop().get('order') + 1,\n      options: optionsAttribute\n    };\n\n    this.create(labelsLayerAttrs, opts);\n  },\n\n  _destroyLabelsLayer: function (opts) {\n    this.getLayerOnTop().destroy(opts);\n  },\n\n  _getAllQueryGeometryModels: function (dataLayers) {\n    return _.compact(_.map(dataLayers, function (dataLayer) {\n      return dataLayer.getAnalysisDefinitionNodeModel().queryGeometryModel;\n    }));\n  },\n\n  _getDataLayers: function () {\n    return this.filter(function (layerDefinitionModel) {\n      return layerDefinitionModel.isDataLayer();\n    });\n  },\n\n  getBaseLayer: function () {\n    return this.first();\n  },\n\n  getLabelsLayer: function () {\n    var layerOnTop = this.getLayerOnTop();\n    if (this.size() > 1 && layerTypesAndKinds.isTiledType(layerOnTop.get('type'))) {\n      return layerOnTop;\n    }\n  },\n\n  getLayerOnTop: function () {\n    return this.last();\n  }\n});\n","var _ = require('underscore');\n\nmodule.exports = {\n\n  /**\n   * Get the next available letter.\n   * @param {Array} letters e.g. ['a', 'b', 'd']\n   * @return {String} e.g. 'c'\n   */\n  next: function (letters) {\n    return _.chain(letters)\n      .sort()\n      .reduce(function (memo, letter) {\n        if (letter === memo) {\n          return String.fromCharCode(letter.charCodeAt() + 1);\n        } else {\n          return memo;\n        }\n      }, 'a')\n      .value();\n  }\n\n};\n","var Backbone = require('backbone');\nvar _ = require('underscore');\nvar syncAbort = require('builder/data/backbone/sync-abort');\nvar LegendsState = require('./legends-state');\n\n/*\n  Base model for a legend. It should have a reference to a layerDefinitionModel.\n */\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    type: 'none',\n    title: '',\n    postHTMLSnippet: '',\n    preHTMLSnippet: ''\n  },\n\n  sync: syncAbort,\n\n  parse: function (r) {\n    var attrs = _.extend({},\n      _.omit(r, 'created_at', 'updated_at', 'definition', 'pre_html', 'post_html')\n    );\n\n    if (r.conf && r.conf.columns) {\n      attrs.customState = r.conf.columns;\n    }\n\n    attrs.preHTMLSnippet = r.pre_html;\n    attrs.postHTMLSnippet = r.post_html;\n    return attrs;\n  },\n\n  urlRoot: function () {\n    var baseUrl = this.configModel.get('base_url');\n    return baseUrl + '/api/v3/viz/' + this.vizId + '/layer/' + this.layerDefinitionModel.id + '/legends';\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.layerDefinitionModel) throw new Error('layerDefinitionModel is required');\n    if (!opts.configModel) throw new Error('configModel is required');\n    if (!opts.vizId) throw new Error('vizId is required');\n\n    this.layerDefinitionModel = opts.layerDefinitionModel;\n    this.configModel = opts.configModel;\n    this.vizId = opts.vizId;\n  },\n\n  getStyles: function () {\n    return this.layerDefinitionModel && this.layerDefinitionModel.styleModel || null;\n  },\n\n  fetch: function () {\n    throw new Error('This model should not make any fetch calls. It should be created from the vizJSON.');\n  },\n\n  getType: function () {\n    return this.get('type');\n  },\n\n  toJSON: function () {\n    return _.extend(\n      this.attributes,\n      {\n        type: this.getType()\n      }\n    );\n  },\n\n  getAttributes: function () {\n    return _.extend(\n      {},\n      _.pick(this.attributes, _.keys(this.defaults)),\n      _.omit(this.attributes, 'pre_html', 'post_html', 'customState')\n    );\n  },\n\n  setAttributes: function (attrs) {\n    // Store the real values\n    LegendsState.set(this.layerDefinitionModel, this.get('type') || attrs.type, attrs);\n    this.set(attrs);\n  },\n\n  // Overriding set\n  set: function (key, val, options) {\n    var attrs;\n    if (typeof key === 'object') {\n      attrs = key;\n      options = val;\n    } else {\n      (attrs = {})[key] = val;\n    }\n\n    options || (options = {});\n\n    var layerDefinitionModel = this.layerDefinitionModel || options.layerDefinitionModel;\n    var type = this.get('type') || attrs.type;\n\n    // Override attributes with the current custom state\n    var state = LegendsState.get(layerDefinitionModel, type);\n    var attributes = _.extend({}, attrs, {\n      customState: _.keys(state)\n    }, state);\n\n    return Backbone.Model.prototype.set.call(this, attributes, options);\n  },\n\n  hasCustomHtml: function () {\n    return false;\n  }\n});\n","var _ = require('underscore');\nvar LegendBaseDefModel = require('./legend-base-definition-model');\nvar LegendColorHelper = require('builder/editor/layers/layer-content-views/legend/form/legend-color-helper');\nvar DEFAULT_BUBBLES_COLOR = '#999999';\n\nmodule.exports = LegendBaseDefModel.extend({\n  defaults: _.extend({}, LegendBaseDefModel.prototype.defaults,\n    {\n      type: 'bubble',\n      fillColor: DEFAULT_BUBBLES_COLOR,\n      topLabel: '',\n      bottomLabel: ''\n    }\n  ),\n\n  parse: function (r, opts) {\n    var attrs = LegendBaseDefModel.prototype.parse.call(this, r);\n\n    if (opts.layerDefinitionModel) {\n      if (r.definition) {\n        attrs.fillColor = r.definition.color;\n        attrs.topLabel = r.definition.top_label;\n        attrs.bottomLabel = r.definition.bottom_label;\n      } else {\n        attrs.fillColor = this._inheritStyleColor(opts.layerDefinitionModel.styleModel);\n      }\n    }\n    return attrs;\n  },\n\n  toJSON: function () {\n    return _.extend(\n      {},\n      _.omit(this.attributes, 'fill', 'fillColor', 'topLabel', 'bottomLabel', 'postHTMLSnippet', 'preHTMLSnippet', 'customState'),\n      {\n        pre_html: this.get('preHTMLSnippet'),\n        post_html: this.get('postHTMLSnippet')\n      },\n      {\n        conf: {\n          columns: this.get('customState')\n        }\n      },\n      {\n        definition: {\n          color: this.get('fillColor'),\n          top_label: this.get('topLabel'),\n          bottom_label: this.get('bottomLabel')\n        }\n      }\n    );\n  },\n\n  _inheritStyleColor: function (styleModel) {\n    var fill = styleModel.get('fill');\n    var stroke = styleModel.get('stroke');\n    var color = (fill && fill.color) || (stroke && stroke.color);\n\n    if (color && (color.fixed || color.range)) {\n      return LegendColorHelper.getBubbles(color).color.fixed;\n    } else {\n      return DEFAULT_BUBBLES_COLOR;\n    }\n  }\n});\n","var _ = require('underscore');\nvar LegendBaseDefModel = require('./legend-base-definition-model');\n\nmodule.exports = LegendBaseDefModel.extend({\n  defaults: _.extend({}, LegendBaseDefModel.prototype.defaults,\n    {\n      type: 'category'\n    }\n  ),\n\n  toJSON: function () {\n    return _.extend(\n      {},\n      _.omit(this.attributes, 'postHTMLSnippet', 'preHTMLSnippet', 'customState'),\n      {\n        pre_html: this.get('preHTMLSnippet'),\n        post_html: this.get('postHTMLSnippet')\n      },\n      {\n        conf: {\n          columns: this.get('customState')\n        }\n      }\n    );\n  }\n});\n","var _ = require('underscore');\nvar LegendBaseDefModel = require('./legend-base-definition-model');\n\nmodule.exports = LegendBaseDefModel.extend({\n  defaults: _.extend({}, LegendBaseDefModel.prototype.defaults,\n    {\n      type: 'choropleth',\n      prefix: '',\n      suffix: '',\n      leftLabel: '',\n      rightLabel: ''\n    }\n  ),\n\n  parse: function (r, opts) {\n    var attrs = LegendBaseDefModel.prototype.parse.call(this, r);\n    if (r.definition) {\n      attrs.prefix = r.definition.prefix;\n      attrs.suffix = r.definition.suffix;\n      attrs.leftLabel = r.definition.left_label;\n      attrs.rightLabel = r.definition.right_label;\n    }\n    return attrs;\n  },\n\n  toJSON: function () {\n    var definition = {\n      prefix: this.get('prefix'),\n      suffix: this.get('suffix'),\n      left_label: this.get('leftLabel'),\n      right_label: this.get('rightLabel')\n    };\n\n    return _.extend(\n      {},\n      _.omit(this.attributes, 'prefix', 'suffix', 'leftLabel', 'rightLabel', 'postHTMLSnippet', 'preHTMLSnippet', 'customState'),\n      {\n        pre_html: this.get('preHTMLSnippet'),\n        post_html: this.get('postHTMLSnippet')\n      },\n      {\n        conf: {\n          columns: this.get('customState')\n        }\n      },\n      {\n        definition: _.pick(definition, _.identity)\n      }\n    );\n  }\n});\n","var _ = require('underscore');\nvar LegendBaseDefModel = require('./legend-base-definition-model');\n\nmodule.exports = LegendBaseDefModel.extend({\n  defaults: _.extend({}, LegendBaseDefModel.prototype.defaults,\n    {\n      type: 'custom_choropleth',\n      prefix: '',\n      suffix: '',\n      colors: [],\n      leftLabel: '',\n      rightLabel: ''\n    }\n  ),\n\n  parse: function (r, opts) {\n    var attrs = LegendBaseDefModel.prototype.parse.call(this, r);\n    var fill;\n    var stroke;\n    var color;\n\n    if (r.definition) {\n      attrs.colors = r.definition.colors;\n      attrs.prefix = r.definition.prefix;\n      attrs.suffix = r.definition.suffix;\n      attrs.leftLabel = r.definition.left_label;\n      attrs.rightLabel = r.definition.right_label;\n    } else {\n      fill = opts.layerDefinitionModel.styleModel.get('fill');\n      stroke = opts.layerDefinitionModel.styleModel.get('stroke');\n      color = fill.color || stroke.color;\n      attrs.colors = this._inheritStyleColors(color);\n    }\n    return attrs;\n  },\n\n  toJSON: function () {\n    var definition = {\n      prefix: this.get('prefix'),\n      suffix: this.get('suffix'),\n      left_label: this.get('leftLabel'),\n      right_label: this.get('rightLabel'),\n      colors: this.get('colors').map(function (item) {\n        return {\n          color: item.color\n        };\n      })\n    };\n\n    return _.extend(\n      {},\n      _.omit(this.attributes, 'prefix', 'suffix', 'leftLabel', 'rightLabel', 'colors', 'postHTMLSnippet', 'preHTMLSnippet', 'customState'),\n      {\n        pre_html: this.get('preHTMLSnippet'),\n        post_html: this.get('postHTMLSnippet')\n      },\n      {\n        conf: {\n          columns: this.get('customState')\n        }\n      },\n      {\n        definition: _.pick(definition, _.identity)\n      }\n    );\n  },\n\n  _inheritStyleColors: function (color) {\n    var range = 0;\n    var colors = [];\n\n    if (color.range) {\n      range = color.range.length;\n\n      colors = _.range(range).map(function (v, index) {\n        return {\n          color: color.range[index]\n        };\n      });\n    }\n\n    return colors;\n  }\n});\n","var _ = require('underscore');\nvar LegendBaseDefModel = require('./legend-base-definition-model');\nvar StyleHelper = require('builder/helpers/style');\n\nmodule.exports = LegendBaseDefModel.extend({\n  defaults: _.extend({}, LegendBaseDefModel.prototype.defaults,\n    {\n      type: 'custom',\n      items: [],\n      html: ''\n    }\n  ),\n\n  parse: function (r, opts) {\n    var attrs = LegendBaseDefModel.prototype.parse.call(this, r);\n\n    if (r.definition) {\n      attrs.items = r.definition.categories;\n      attrs.html = r.definition.html || '';\n    } else {\n      attrs.items = StyleHelper.getStyleCategories(opts.layerDefinitionModel.styleModel);\n    }\n    attrs.type = 'custom';\n    return attrs;\n  },\n\n  toJSON: function () {\n    var definition = {\n      categories: this.get('items').map(function (item) {\n        return {\n          title: (item.title || '').toString(),\n          color: item.color,\n          icon: item.image || item.icon\n        };\n      })\n    };\n\n    if (this.hasCustomHtml()) {\n      definition.html = this.get('html');\n    }\n\n    return _.extend(\n      {},\n      _.omit(this.attributes, 'items', 'html', 'postHTMLSnippet', 'preHTMLSnippet', 'customState'),\n      {\n        pre_html: this.get('preHTMLSnippet'),\n        post_html: this.get('postHTMLSnippet')\n      },\n      {\n        conf: {\n          columns: this.get('customState')\n        }\n      },\n      {\n        definition: definition\n      }\n    );\n  },\n\n  hasCustomHtml: function () {\n    return this.get('html') !== '';\n  }\n});\n","var Backbone = require('backbone');\nvar _ = require('underscore');\nvar LegendBaseDefModel = require('./legend-base-definition-model');\nvar layerTypesAndKinds = require('builder/data/layer-types-and-kinds');\n\nvar CategoryModel = require('./legend-category-definition-model');\nvar BubbleModel = require('./legend-bubble-definition-model');\nvar ChoroplethModel = require('./legend-choropleth-definition-model');\nvar CustomChoroplethModel = require('./legend-custom-choropleth-definition-model');\nvar CustomModel = require('./legend-custom-definition-model');\nvar TorqueModel = require('./legend-torque-definition-model');\n\nvar LEGEND_MODEL_TYPE = {\n  'bubble': BubbleModel,\n  'category': CategoryModel,\n  'choropleth': ChoroplethModel,\n  'custom_choropleth': CustomChoroplethModel,\n  'custom': CustomModel,\n  'html': CustomModel,\n  'torque': TorqueModel\n};\n\nmodule.exports = Backbone.Collection.extend({\n  model: LegendBaseDefModel,\n\n  initialize: function (models, options) {\n    if (!options.configModel) throw new Error('configModel is required');\n    if (!options.layerDefinitionsCollection) throw new Error('layerDefinitionsCollection is required');\n    if (!options.vizId) throw new Error('vizId is required');\n\n    this.configModel = options.configModel;\n    this.layerDefinitionsCollection = options.layerDefinitionsCollection;\n    this.vizId = options.vizId;\n  },\n\n  /**\n   * Intended to be called from entry point, to make sure initial layers are taken into account\n   */\n  resetByData: function (vizJSON) {\n    var models = [];\n    var layers = _.filter(vizJSON.layers, function (layer) {\n      return this._isDataLayer(layer.type);\n    }, this);\n\n    _.each(layers, function (layer) {\n      var layerDefModel = this._findLayerDefinitionModel(layer.id);\n      var legends = [];\n      if (layer.legends) {\n        legends = layer.legends.map(function (legend) {\n          var Klass = LEGEND_MODEL_TYPE[legend.type];\n\n          return new Klass(legend, {\n            layerDefinitionModel: layerDefModel,\n            configModel: this.configModel,\n            vizId: this.vizId,\n            parse: true\n          });\n        }, this);\n      }\n\n      models.push(legends);\n    }, this);\n\n    this.reset(_.flatten(models));\n  },\n\n  fetch: function () {\n    throw new Error('This collection should not make any fetch calls. It should be populated from the vizJSON.');\n  },\n\n  _isDataLayer: function (layerType) {\n    return layerTypesAndKinds.isCartoDBType(layerType) ||\n      layerTypesAndKinds.isTorqueType(layerType);\n  },\n\n  _findLayerDefinitionModel: function (id) {\n    return this.layerDefinitionsCollection.findWhere({id: id});\n  },\n\n  findByLayerDefModel: function (layerDefModel) {\n    var id = layerDefModel.id;\n    return this.filter(function (legendDefModel) {\n      var layerDefModel = legendDefModel.layerDefinitionModel;\n      return layerDefModel.id === id;\n    });\n  },\n\n  findByLayerDefModelAndType: function (layerDefModel, type) {\n    var id = layerDefModel.id;\n    return this.find(function (legendDefModel) {\n      var layerDefModel = legendDefModel.layerDefinitionModel;\n      return layerDefModel.id === id && legendDefModel.get('type') === type;\n    });\n  },\n\n  findByLayerDefModelAndTypes: function (layerDefModel, types) {\n    var id = layerDefModel.id;\n    return this.filter(function (legendDefModel) {\n      var layerDefModel = legendDefModel.layerDefinitionModel;\n      var type = legendDefModel.get('type');\n      return layerDefModel.id === id && types.indexOf(type) !== -1;\n    });\n  }\n});\n","var _ = require('underscore');\nvar LegendBaseDefModel = require('./legend-custom-definition-model');\n\nmodule.exports = LegendBaseDefModel.extend({\n  defaults: function () {\n    return _.extend({}, LegendBaseDefModel.prototype.defaults,\n      {\n        type: 'torque',\n        items: [],\n        html: ''\n      }\n    );\n  },\n\n  parse: function (r, opts) {\n    var attrs = LegendBaseDefModel.prototype.parse.call(this, r, opts);\n    attrs.type = 'torque';\n    return attrs;\n  }\n});\n","var _ = require('underscore');\nvar legendsMetadata = require('./legends-metadata');\n\nvar CUSTOM_ATTRIBUTES = ['title'];\nvar instance;\nvar legends;\n\nvar State = (function () {\n  var getType = function (type) {\n    var legend = legendsMetadata[type];\n    return legend && legend.legendType;\n  };\n\n  var onLayerAdded = function (layer) {\n    instance[layer.id] = {};\n  };\n\n  var onLayerRemoved = function (layer) {\n    delete instance[layer.id];\n  };\n\n  return {\n    init: function (layersDefinitionCollection, legendsDefinitionCollection) {\n      if (!instance) {\n        instance = {};\n        layersDefinitionCollection.on('add', onLayerAdded);\n        layersDefinitionCollection.on('remove', onLayerRemoved);\n        legends = legendsDefinitionCollection;\n        this.reset();\n      }\n    },\n\n    reset: function () {\n      legends.each(function (legend) {\n        var layer = legend.layerDefinitionModel;\n        if (!instance[layer.id]) {\n          instance[layer.id] = {};\n        }\n\n        var legendType = getType(legend.get('type'));\n        if (!instance[layer.id][legendType]) {\n          instance[layer.id][legendType] = {};\n        }\n\n        var state = _.pick(legend.attributes, legend.attributes.conf.columns);\n        instance[layer.id][legendType] = state;\n      });\n    },\n\n    set: function (layer, type, attrs) {\n      var attributes = _.pick(attrs, CUSTOM_ATTRIBUTES);\n      var legendType = getType(type);\n      if (instance && legendType) {\n        if (!instance[layer.id]) {\n          instance[layer.id] = {};\n        }\n        instance[layer.id][legendType] = attributes;\n      }\n    },\n\n    get: function (layer, type) {\n      var legendType = getType(type);\n      return instance && legendType && instance[layer.id] && instance[layer.id][legendType];\n    },\n\n    getInstance: function () {\n      return instance;\n    }\n  };\n})();\n\nmodule.exports = State;\n","var Backbone = require('backbone');\nvar _ = require('underscore');\nvar OWN_ATTRS = ['drag', 'id', 'keyboard'];\nvar EMBED_ATTRS = ['legends', 'scrollwheel', 'layer_selector', 'dashboard_menu'];\nvar basemapProvidersAndCategories = require('./basemap-providers-and-categories');\n/**\n * Model that represents a visualization's Map\n */\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    drag: true,\n    keyboard: true,\n    cartodb_logo: false,\n    legends: true,\n    layer_selector: false,\n    dashboard_menu: true,\n    scrollwheel: true\n  },\n\n  parse: function (r) {\n    return _.extend({\n      provider: r['map_provider']\n    },\n    _.pick(r, OWN_ATTRS),\n    _.pick(r.options, EMBED_ATTRS)\n    );\n  },\n\n  urlRoot: function () {\n    var baseUrl = this._configModel.get('base_url');\n    return baseUrl + '/api/v2/maps/';\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n    if (!opts.layerDefinitionsCollection) throw new Error('layerDefinitionsCollection is required');\n    if (!opts.userModel) throw new Error('userModel is required');\n\n    this._configModel = opts.configModel;\n    this._userModel = opts.userModel;\n    this._layerDefinitionsCollection = opts.layerDefinitionsCollection;\n\n    this._layerDefinitionsCollection.bind('baseLayerChanged', this._onBaseLayerChanged, this);\n  },\n\n  _onBaseLayerChanged: function () {\n    var baseLayer = this._layerDefinitionsCollection.getBaseLayer();\n    var newProvider = basemapProvidersAndCategories.getProvider(baseLayer.get('type'));\n\n    this.save({\n      provider: newProvider,\n      minZoom: baseLayer.get('minZoom'),\n      maxZoom: baseLayer.get('maxZoom')\n    });\n  },\n\n  toJSON: function () {\n    return _.extend(\n      {},\n      _.omit(this.attributes, EMBED_ATTRS),\n      {\n        attribution: _.unique(this._layerDefinitionsCollection.pluck('attribution')),\n        user_id: this._userModel.get('id')\n      },\n      {\n        options: _.pick(this.attributes, EMBED_ATTRS)\n      }\n    );\n  },\n\n  setMapViewSize: function (size) {\n    this._mapViewSize = size;\n  },\n\n  getMapViewSize: function () {\n    return this._mapViewSize;\n  },\n\n  setStaticImageURLTemplate: function (staticImageURLTemplate) {\n    this._staticImageURLTemplate = staticImageURLTemplate;\n  },\n\n  getStaticImageURLTemplate: function () {\n    return this._staticImageURLTemplate;\n  },\n\n  setImageExportMetadata: function (metadata) {\n    this._imageExportMetadata = metadata;\n  },\n\n  getImageExportMetadata: function () {\n    return this._imageExportMetadata;\n  },\n\n  setConverters: function (converters) {\n    _.each(converters, function (converter, key) {\n      this[key] = converter;\n    }, this);\n  }\n});\n","module.exports = function (overlaysCollection, mapDefModel, userModel) {\n  var overlays = overlaysCollection.pluck('type');\n  var canRemoveLogo = userModel.get('actions').remove_logo;\n\n  return [{\n    setting: 'search',\n    label: _t('editor.settings.preview.options.elements.search'),\n    related: 'overlays',\n    disabled: false,\n    enabler: overlays.indexOf('search') > 0\n  },\n  {\n    setting: 'zoom',\n    label: _t('editor.settings.preview.options.elements.zoom'),\n    related: 'overlays',\n    disabled: false,\n    enabler: overlays.indexOf('zoom') > 0\n  },\n  {\n    setting: 'logo',\n    label: _t('editor.settings.preview.options.elements.logo'),\n    related: 'overlays',\n    disabled: false,\n    hidden: !canRemoveLogo,\n    enabler: overlays.indexOf('logo') > 0\n  },\n  {\n    setting: 'legends',\n    label: _t('editor.settings.preview.options.elements.legends'),\n    related: 'map',\n    disabled: false,\n    enabler: mapDefModel.get('legends') === true\n  },\n  {\n    setting: 'layer_selector',\n    label: _t('editor.settings.preview.options.elements.layer_selector'),\n    related: 'map',\n    disabled: false,\n    enabler: mapDefModel.get('layer_selector') === true\n  },\n  {\n    setting: 'dashboard_menu',\n    label: _t('editor.settings.preview.options.elements.dashboard_menu'),\n    related: 'map',\n    disabled: false,\n    enabler: mapDefModel.get('dashboard_menu') === true\n  },\n  {\n    setting: 'scrollwheel',\n    label: _t('editor.settings.preview.options.elements.scrollwheel'),\n    related: 'map',\n    disabled: false,\n    enabler: mapDefModel.get('scrollwheel') === true\n  }];\n};\n","var Backbone = require('backbone');\n\nmodule.exports = Backbone.Collection.extend({\n  initialize: function (models, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n    if (!opts.visId) throw new Error('visId is required');\n\n    this._configModel = opts.configModel;\n    this._visId = opts.visId;\n  },\n\n  url: function () {\n    var baseUrl = this._configModel.get('base_url');\n    var version = this._configModel.urlVersion('overlays');\n    return baseUrl + '/api/' + version + '/viz/' + this._visId + '/overlays';\n  },\n\n  hasFetched: function () {\n    return this.length > 0;\n  },\n\n  removeOverlay: function (type) {\n    var overlay = this.findWhere({type: type});\n    overlay && overlay.destroy();\n  },\n\n  createOverlay: function (type) {\n    var types = {\n      'fullscreen': this._createFullScreenOverlay,\n      'layer_selector': this._createLayerSelectorOverlay,\n      'search': this._createSearchOverlay,\n      'zoom': this._createZoomOverlay,\n      'logo': this._createLogoOverlay\n    };\n    var fn = types[type];\n    fn && fn.call(this);\n  },\n\n  _createZoomOverlay: function () {\n    var options = {\n      type: 'zoom',\n      order: 6,\n      display: true,\n      x: 20,\n      y: 20\n    };\n    this.create(options);\n  },\n\n  _createLogoOverlay: function () {\n    var options = {\n      type: 'logo',\n      order: 10,\n      display: true,\n      x: 10,\n      y: 40\n    };\n    this.create(options);\n  },\n\n  _createSearchOverlay: function () {\n    var options = {\n      type: 'search',\n      order: 3,\n      display: true,\n      x: 60,\n      y: 20\n    };\n    this.create(options);\n  },\n\n  _createFullScreenOverlay: function () {\n    var options = {\n      type: 'fullscreen',\n      order: 7,\n      display: true,\n      x: 20,\n      y: 172\n    };\n\n    this.create(options);\n  }\n});\n","var Backbone = require('backbone');\nvar syncAbort = require('./backbone/sync-abort');\n\n/**\n * State definition model.\n * Used to persist the dashboard state at any time\n */\nmodule.exports = Backbone.Model.extend({\n\n  /**\n   * @override {Backbone.prototype.sync} abort ongoing request if there is any\n   */\n  sync: syncAbort,\n\n  url: function () {\n    return this._visDefinitionModel.stateURL();\n  },\n\n  isNew: function () {\n    return false;\n  },\n\n  initialize: function (attrs, opts) {\n    if (!attrs.json) throw new Error('state json is required');\n    if (!opts.visDefinitionModel) throw new Error('visDefinitionModel is required');\n\n    this._visDefinitionModel = opts.visDefinitionModel;\n  },\n\n  toJSON: function () {\n    return {\n      json: this.get('json')\n    };\n  },\n\n  updateState: function (state) {\n    this.save({\n      json: state\n    });\n  },\n\n  setBounds: function (bounds) {\n    this.trigger('boundsSet', bounds);\n  },\n\n  getZoom: function () {\n    return this.get('json').map.zoom;\n  },\n\n  getCenter: function () {\n    return this.get('json').map.center;\n  }\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar TableModel = require('./table-model');\n\nvar DEFAULT_FETCH_OPTIONS = {\n  type: 'table',\n  order: 'updated_at',\n  page: 1,\n  per_page: 20,\n  exclude_shared: false,\n  exclude_raster: true,\n  tags: '',\n  q: ''\n};\n\n/**\n * A collection that holds Table models\n */\nmodule.exports = Backbone.Collection.extend({\n\n  model: function (d, opts) {\n    var configModel = opts.collection._configModel;\n    return new TableModel(d, {\n      configModel: configModel,\n      parse: true\n    });\n  },\n\n  modelId: function (attrs) {\n    return attrs.name;\n  },\n\n  initialize: function (models, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n    this._configModel = opts.configModel;\n    this._stats = {};\n  },\n\n  url: function () {\n    var version = this._configModel.urlVersion('visualization');\n    var baseUrl = this._configModel.get('base_url');\n    return baseUrl + '/api/' + version + '/viz';\n  },\n\n  // Overrides the default fetch, to use the internal methods to construct parmas\n  fetch: function (opts) {\n    opts = opts || {\n      data: {\n        // If reaches this code path it's because there were no opts given, i.e. should do a 'full fetch'\n        // Since there is no current way to really do a full fetch let's just set a really high number to get all…\n        // TODO this is obviously bad for organization users, how can we do this differently\n        per_page: 1000\n      }\n    };\n    opts.data = _.extend({}, DEFAULT_FETCH_OPTIONS, opts.data);\n    return Backbone.Collection.prototype.fetch.call(this, opts);\n  },\n\n  getTotalStat: function (attribute) {\n    return this._stats[attribute] || 0;\n  },\n\n  getDefaultParam: function (param) {\n    return DEFAULT_FETCH_OPTIONS[param];\n  },\n\n  parse: function (res) {\n    this._stats = _.omit(res, 'visualizations');\n\n    return _.map(res.visualizations, function (d) {\n      var dt = d.table; // embedded table data in the vis response\n      return {\n        // From embedded table with same key/value\n        id: dt.id,\n        geometry_types: dt.geometry_types,\n        name: dt.name,\n        privacy: dt.privacy,\n\n        // From embedded table with same value, but different key\n        // so re-map them to match what's returned from a GET /tables/t-id\n        rows_counted: dt.row_count,\n        table_size: dt.size,\n        table_type: d.type // table or remote\n      };\n    }, this);\n  }\n});\n","module.exports = {\n  'international-date-line-west': {\n    label: _t('timezones.international-date-line-west'),\n    name: 'Etc/GMT+12'\n  },\n  'midway-island-samoa': {\n    label: _t('timezones.midway-island-samoa'),\n    name: 'Pacific/Midway'\n  },\n  'hawaii': {\n    label: _t('timezones.hawaii'),\n    name: 'Pacific/Honolulu'\n  },\n  'alaska': {\n    label: _t('timezones.alaska'),\n    name: 'America/Juneau'\n  },\n  'pacific-time-us-and-canada-tijuana': {\n    label: _t('timezones.pacific-time-us-and-canada-tijuana'),\n    name: 'America/Dawson'\n  },\n  'mountain-time-us-and-canada': {\n    label: _t('timezones.mountain-time-us-and-canada'),\n    name: 'America/Boise'\n  },\n  'chihuahua-la-paz-mazatlan': {\n    label: _t('timezones.chihuahua-la-paz-mazatlan'),\n    name: 'America/Chihuahua'\n  },\n  'arizona': {\n    label: _t('timezones.arizona'),\n    name: 'America/Phoenix'\n  },\n  'central-time-us-and-canada': {\n    label: _t('timezones.central-time-us-and-canada'),\n    name: 'America/Chicago'\n  },\n  'saskatchewan': {\n    label: _t('timezones.saskatchewan'),\n    name: 'America/Regina'\n  },\n  'guadalajara-mexico-city-monterrey': {\n    label: _t('timezones.guadalajara-mexico-city-monterrey'),\n    name: 'America/Mexico_City'\n  },\n  'central-america': {\n    label: _t('timezones.central-america'),\n    name: 'America/Belize'\n  },\n  'eastern-time-us-and-canada': {\n    label: _t('timezones.eastern-time-us-and-canada'),\n    name: 'America/Detroit'\n  },\n  'indiana-east': {\n    label: _t('timezones.indiana-east'),\n    name: 'America/Indiana/Indianapolis'\n  },\n  'bogota-lima-quito': {\n    label: _t('timezones.bogota-lima-quito'),\n    name: 'America/Bogota'\n  },\n  'atlantic-time-canada': {\n    label: _t('timezones.atlantic-time-canada'),\n    name: 'America/Glace_Bay'\n  },\n  'caracas-la-paz': {\n    label: _t('timezones.caracas-la-paz'),\n    name: 'America/Caracas'\n  },\n  'santiago': {\n    label: _t('timezones.santiago'),\n    name: 'America/Santiago'\n  },\n  // 'newfoundland-and-labrador': {\n  //   label: _t('timezones.newfoundland-and-labrador'),\n  //   name: 'America/St_Johns'\n  // },\n  'brasilia': {\n    label: _t('timezones.brasilia'),\n    name: 'America/Sao_Paulo'\n  },\n  'buenos-aires-georgetown': {\n    label: _t('timezones.buenos-aires-georgetown'),\n    name: 'America/Argentina/Buenos_Aires'\n  },\n  'greenland': {\n    label: _t('timezones.greenland'),\n    name: 'America/Godthab'\n  },\n  'mid-atlantic': {\n    label: _t('timezones.mid-atlantic'),\n    name: 'Etc/GMT+2'\n  },\n  'azores': {\n    label: _t('timezones.azores'),\n    name: 'Atlantic/Azores'\n  },\n  'cape-verde-islands': {\n    label: _t('timezones.cape-verde-islands'),\n    name: 'Atlantic/Cape_Verde'\n  },\n  'gmt-dublin-edinburgh-lisbon-london': {\n    label: _t('timezones.gmt-dublin-edinburgh-lisbon-london'),\n    name: ''\n  },\n  'casablanca-monrovia': {\n    label: _t('timezones.casablanca-monrovia'),\n    name: 'Africa/Casablanca'\n  },\n  'canary-islands': {\n    label: _t('timezones.canary-islands'),\n    name: 'Atlantic/Canary'\n  },\n  'belgrade-bratislava-budapest-ljubljana-prague': {\n    label: _t('timezones.belgrade-bratislava-budapest-ljubljana-prague'),\n    name: 'Europe/Belgrade'\n  },\n  'sarajevo-skopje-warsaw-zagreb': {\n    label: _t('timezones.sarajevo-skopje-warsaw-zagreb'),\n    name: 'Europe/Sarajevo'\n  },\n  'brussels-copenhagen-madrid-paris': {\n    label: _t('timezones.brussels-copenhagen-madrid-paris'),\n    name: 'Europe/Brussels'\n  },\n  'amsterdam-berlin-bern-rome-stockholm-vienna': {\n    label: _t('timezones.amsterdam-berlin-bern-rome-stockholm-vienna'),\n    name: 'Europe/Amsterdam'\n  },\n  'west-central-africa': {\n    label: _t('timezones.west-central-africa'),\n    name: 'Africa/Algiers'\n  },\n  'bucharest': {\n    label: _t('timezones.bucharest'),\n    name: 'Europe/Bucharest'\n  },\n  'cairo': {\n    label: _t('timezones.cairo'),\n    name: 'Africa/Cairo'\n  },\n  'helsinki-kiev-riga-sofia-tallinn-vilnius': {\n    label: _t('timezones.helsinki-kiev-riga-sofia-tallinn-vilnius'),\n    name: 'Europe/Helsinki'\n  },\n  'athens-istanbul-minsk': {\n    label: _t('timezones.athens-istanbul-minsk'),\n    name: 'Europe/Athens'\n  },\n  'jerusalem': {\n    label: _t('timezones.jerusalem'),\n    name: 'Asia/Jerusalem'\n  },\n  'harare-pretoria': {\n    label: _t('timezones.harare-pretoria'),\n    name: 'Africa/Harare'\n  },\n  'moscow-st-petersburg-volgograd': {\n    label: _t('timezones.moscow-st-petersburg-volgograd'),\n    name: 'Europe/Moscow'\n  },\n  'kuwait-riyadh': {\n    label: _t('timezones.kuwait-riyadh'),\n    name: 'Asia/Kuwait'\n  },\n  'nairobi': {\n    label: _t('timezones.nairobi'),\n    name: 'Africa/Nairobi'\n  },\n  'baghdad': {\n    label: _t('timezones.baghdad'),\n    name: 'Asia/Baghdad'\n  },\n  // 'tehran': {\n  //   label: _t('timezones.tehran'),\n  //   name: 'Asia/Tehran'\n  // },\n  'abu-dhabi-muscat': {\n    label: _t('timezones.abu-dhabi-muscat'),\n    name: 'Asia/Dubai'\n  },\n  'baku-tbilisi-yerevan': {\n    label: _t('timezones.baku-tbilisi-yerevan'),\n    name: 'Asia/Baku'\n  },\n  // 'kabul': {\n  //   label: _t('timezones.kabul'),\n  //   name: 'Asia/Kabul'\n  // },\n  'ekaterinburg': {\n    label: _t('timezones.ekaterinburg'),\n    name: 'Asia/Yekaterinburg'\n  },\n  'islamabad-karachi-tashkent': {\n    label: _t('timezones.islamabad-karachi-tashkent'),\n    name: 'Asia/Karachi'\n  },\n  // 'chennai-kolkata-mumbai-new-delhi': {\n  //   label: _t('timezones.chennai-kolkata-mumbai-new-delhi'),\n  //   name: 'Asia/Kolkata'\n  // },\n  // 'kathmandu': {\n  //   label: _t('timezones.kathmandu'),\n  //   name: 'Asia/Kathmandu'\n  // },\n  'astana-dhaka': {\n    label: _t('timezones.astana-dhaka'),\n    name: 'Asia/Dhaka'\n  },\n  // 'sri-jayawardenepura': {\n  //   label: _t('timezones.sri-jayawardenepura'),\n  //   name: 'Asia/Colombo'\n  // },\n  'almaty-novosibirsk': {\n    label: _t('timezones.almaty-novosibirsk'),\n    name: 'Asia/Almaty'\n  },\n  // 'yangon-rangoon': {\n  //   label: _t('timezones.yangon-rangoon'),\n  //   name: 'Asia/Rangoon'\n  // },\n  'bangkok-hanoi-jakarta': {\n    label: _t('timezones.bangkok-hanoi-jakarta'),\n    name: 'Asia/Bangkok'\n  },\n  'krasnoyarsk': {\n    label: _t('timezones.krasnoyarsk'),\n    name: 'Asia/Krasnoyarsk'\n  },\n  'beijing-chongqing-hong-kong-sar-urumqi': {\n    label: _t('timezones.beijing-chongqing-hong-kong-sar-urumqi'),\n    name: 'Asia/Shanghai'\n  },\n  'kuala-lumpur-singapore': {\n    label: _t('timezones.kuala-lumpur-singapore'),\n    name: 'Asia/Kuala_Lumpur'\n  },\n  'taipei': {\n    label: _t('timezones.taipei'),\n    name: 'Asia/Taipei'\n  },\n  'perth': {\n    label: _t('timezones.perth'),\n    name: 'Australia/Perth'\n  },\n  'irkutsk-ulaanbaatar': {\n    label: _t('timezones.irkutsk-ulaanbaatar'),\n    name: 'Asia/Irkutsk'\n  },\n  'seoul': {\n    label: _t('timezones.seoul'),\n    name: 'Asia/Seoul'\n  },\n  'osaka-sapporo-tokyo': {\n    label: _t('timezones.osaka-sapporo-tokyo'),\n    name: 'Asia/Tokyo'\n  },\n  'yakutsk': {\n    label: _t('timezones.yakutsk'),\n    name: 'Asia/Yakutsk'\n  },\n  // 'darwin': {\n  //   label: _t('timezones.darwin'),\n  //   name: 'Australia/Darwin'\n  // },\n  // 'adelaide': {\n  //   label: _t('timezones.adelaide'),\n  //   name: 'Australia/Adelaide'\n  // },\n  'canberra-melbourne-sydney': {\n    label: _t('timezones.canberra-melbourne-sydney'),\n    name: 'Australia/Sydney'\n  },\n  'brisbane': {\n    label: _t('timezones.hobart'),\n    name: 'Australia/Brisbane'\n  },\n  'hobart': {\n    label: _t('timezones.hobart'),\n    name: 'Australia/Hobart'\n  },\n  'vladivostok': {\n    label: _t('timezones.vladivostok'),\n    name: 'Asia/Vladivostok'\n  },\n  'guam-port-moresby': {\n    label: _t('timezones.guam-port-moresby'),\n    name: 'Pacific/Guam'\n  },\n  'magadan-solomon-islands-new-caledonia': {\n    label: _t('timezones.magadan-solomon-islands-new-caledonia'),\n    name: 'Asia/Magadan'\n  },\n  'fiji-islands-kamchatka-marshall-islands': {\n    label: _t('timezones.fiji-islands-kamchatka-marshall-islands'),\n    name: 'Pacific/Fiji'\n  },\n  'auckland-wellington': {\n    label: _t('timezones.auckland-wellington'),\n    name: 'Pacific/Auckland'\n  },\n  'nuku-alofa': {\n    label: _t('timezones.nuku-alofa'),\n    name: 'Pacific/Tongatapu'\n  }\n};\n","var _ = require('underscore');\nvar $ = require('jquery');\nvar nodeIds = require('builder/value-objects/analysis-node-ids');\nvar MetricsTracker = require('builder/components/metrics/metrics-tracker');\nvar MetricsTypes = require('builder/components/metrics/metrics-types');\n\nvar SimpleStyleDefaults = require('builder/editor/style/style-defaults/simple-style-defaults');\nvar camshaftReference = require('./camshaft-reference');\nvar layerTypesAndKinds = require('./layer-types-and-kinds');\nvar layerColors = require('./layer-colors');\nvar Notifier = require('builder/components/notifier/notifier');\nvar resetStylePerNode = require('builder/helpers/reset-style-per-node');\nvar Router = require('builder/routes/router');\n\nvar TABLE_ORIGIN = 'table';\n\n/**\n * Coordinate side-effects done on explicit interactions.\n * @param {Object} params\n * @param {Object} params.userModel\n * @param {Object} params.analysisDefinitionsCollection\n * @param {Object} params.analysisDefinitionNodesCollection\n * @param {Object} params.widgetDefinitionsCollection\n * @return {Object} that contains all user-actions that the user may do related to a map\n */\nmodule.exports = function (params) {\n  if (!params.userModel) throw new Error('userModel is required');\n  if (!params.analysisDefinitionsCollection) throw new Error('analysisDefinitionsCollection is required');\n  if (!params.analysisDefinitionNodesCollection) throw new Error('analysisDefinitionNodesCollection is required');\n  if (!params.layerDefinitionsCollection) throw new Error('layerDefinitionsCollection is required');\n  if (!params.widgetDefinitionsCollection) throw new Error('widgetDefinitionsCollection is required');\n\n  var userModel = params.userModel;\n  var analysisDefinitionsCollection = params.analysisDefinitionsCollection;\n  var analysisDefinitionNodesCollection = params.analysisDefinitionNodesCollection;\n  var layerDefinitionsCollection = params.layerDefinitionsCollection;\n  var widgetDefinitionsCollection = params.widgetDefinitionsCollection;\n\n  var createDefaultCartoDBAttrs = function (oldLayerStyle) {\n    return {\n      kind: 'carto',\n      options: {\n        interactivity: '',\n        tile_style: (oldLayerStyle && oldLayerStyle.options.tile_style) || camshaftReference.getDefaultCartoCSSForType(),\n        cartocss: (oldLayerStyle && oldLayerStyle.options.tile_style) || camshaftReference.getDefaultCartoCSSForType(),\n        style_version: '2.1.1',\n        visible: true,\n        style_properties: (oldLayerStyle && oldLayerStyle.options.style_properties),\n        sql_wrap: (oldLayerStyle && oldLayerStyle.options.sql_wrap)\n      },\n      tooltip: oldLayerStyle ? oldLayerStyle.tooltip : {},\n      infowindow: oldLayerStyle ? oldLayerStyle.infowindow : {}\n    };\n  };\n\n  var deleteOrphanedAnalyses = function () {\n    analysisDefinitionNodesCollection\n      .toArray()\n      .forEach(function (nodeDefModel) {\n        if (!layerDefinitionsCollection.anyContainsNode(nodeDefModel)) {\n          nodeDefModel.destroy();\n        }\n      });\n\n    analysisDefinitionsCollection\n      .toArray()\n      .forEach(function (analysisDefModel) {\n        if (!analysisDefModel.getNodeDefinitionModel()) {\n          analysisDefModel.destroy();\n        }\n      });\n  };\n\n  var restoreWidgetsFromLayer = function (affectedWidgets, layerDefModel, callback, callbackOptions) {\n    if (!affectedWidgets || !_.isArray(affectedWidgets)) throw new Error('affectedWidgets is required');\n    if (!layerDefModel) throw new Error('layerDefModel is required');\n    if (!callback) throw new Error('callback is required');\n\n    var notification;\n    var restoringError;\n    var onWidgetFinished = _.after(affectedWidgets.length, function () {\n      if (notification) {\n        if (!restoringError) {\n          notification.set({\n            status: 'success',\n            info: _t('notifications.widgets.restored'),\n            closable: true\n          });\n        } else {\n          Notifier.removeNotification(notification);\n        }\n      }\n\n      callback(layerDefModel, callbackOptions);\n    });\n\n    if (affectedWidgets.length > 0) {\n      notification = Notifier.addNotification({\n        status: 'loading',\n        info: _t('notifications.widgets.restoring'),\n        closable: false\n      });\n\n      // Create widgets with new source and layer_id\n      _.each(affectedWidgets, function (attrs) {\n        attrs.layer_id = attrs.layer_id || layerDefModel.id;\n\n        widgetDefinitionsCollection.create(\n          attrs, {\n            wait: true,\n            success: onWidgetFinished,\n            error: function (e, mdl) {\n              notification = Notifier.addNotification({\n                status: 'error',\n                info: _t('notifications.widgets.error.title') +\n                  _t('notifications.widgets.error.body', {\n                    body: '',\n                    error: mdl && mdl.get('title')\n                  }),\n                closable: true\n              });\n              restoringError = true;\n              onWidgetFinished();\n            }\n          }\n        );\n      });\n    } else {\n      callback(layerDefModel, callbackOptions);\n    }\n  };\n\n  return {\n    _resetStylePerNode: function (nodeDefModel, layerDefModel, forceStyleUpdate, resetQueryReady) {\n      resetStylePerNode(nodeDefModel, layerDefModel, forceStyleUpdate, resetQueryReady);\n    },\n\n    saveAnalysis: function (analysisFormModel) {\n      if (!analysisFormModel.isValid()) return;\n\n      var nodeDefModel = analysisDefinitionNodesCollection.get(analysisFormModel.id);\n\n      if (nodeDefModel) {\n        analysisFormModel.updateNodeDefinition(nodeDefModel);\n        var layerDefModel = layerDefinitionsCollection.findOwnerOfAnalysisNode(nodeDefModel);\n        analysisDefinitionsCollection.saveAnalysisForLayer(layerDefModel);\n\n        MetricsTracker.track(MetricsTypes.MODIFIED_ANALYSIS, {\n          analysis: {\n            id: analysisFormModel.attributes['id'],\n            natural_id: analysisFormModel.attributes['id'],\n            type: analysisFormModel.attributes['type']\n          }\n        });\n\n        this._resetStylePerNode(nodeDefModel, layerDefModel, false, true);\n      } else {\n        nodeDefModel = analysisFormModel.createNodeDefinition(this); // delegate creation to the form, but expect it to call userActions.createAnalysisNode when done with its internal stuff\n      }\n      nodeDefModel.USER_SAVED = true;\n      return nodeDefModel;\n    },\n\n    /**\n     * Creates a new analysis node on a particular layer.\n     * It's assumed to be created on top of an existing node.\n     * @param {Object} nodeAttrs\n     * @param {Object} layerDefModel - instance of layer-definition-model\n     * @return {Object} instance of analysis-definition-node-model\n     */\n    createAnalysisNode: function (nodeAttrs, layerDefModel) {\n      var nodeDefModel = analysisDefinitionNodesCollection.add(nodeAttrs, { parse: false });\n\n      layerDefModel.save({\n        cartocss: camshaftReference.getDefaultCartoCSSForType(),\n        source: nodeDefModel.id\n      });\n      analysisDefinitionsCollection.saveAnalysisForLayer(layerDefModel);\n\n      MetricsTracker.track(MetricsTypes.CREATED_ANALYSIS, {\n        analysis: {\n          id: nodeDefModel.attributes['id'],\n          natural_id: nodeDefModel.attributes['id'],\n          type: nodeDefModel.attributes['type']\n        }\n      });\n\n      this._resetStylePerNode(nodeDefModel, layerDefModel);\n\n      return nodeDefModel;\n    },\n\n    saveAnalysisSourceQuery: function (query, nodeDefModel, layerDefModel) {\n      if (!nodeDefModel) throw new Error('nodeDefModel is required');\n      if (nodeDefModel.get('type') !== 'source') throw new Error('nodeDefModel must be a source node');\n\n      nodeDefModel.set('query', query || '');\n\n      analysisDefinitionsCollection.saveAnalysisForLayer(layerDefModel);\n      this._resetStylePerNode(nodeDefModel, layerDefModel);\n      layerDefModel.save(); // to make sure layer's source ref is persisted\n    },\n\n    saveWidgetOption: function (widgetOptionModel) {\n      if (!widgetOptionModel) throw new Error('widgetOptionModel is required');\n\n      if (widgetOptionModel.analysisDefinitionNodeModel()) { // Might not always have a node-definition, e.g. time-series none-option\n        var layerDefModel = widgetOptionModel.layerDefinitionModel();\n        analysisDefinitionsCollection.saveAnalysisForLayer(layerDefModel);\n      }\n\n      // delegate back to form model to decide how to save\n      return widgetOptionModel.save(widgetDefinitionsCollection);\n    },\n\n    goToEditWidget: function (widgets) {\n      if (widgets.length === 1) {\n        Router.goToWidget(widgets[0].id);\n      }\n    },\n\n    updateWidgetsOrder: function (widgets) {\n      return widgetDefinitionsCollection.updateWidgetsOrder(widgets);\n    },\n\n    saveWidget: function (widgetDefModel) {\n      if (!widgetDefModel) throw new Error('widgetDefModel is required');\n\n      var widgetLayerId = widgetDefModel.get('layer_id');\n      layerDefinitionsCollection.some(function (layerDefModel) {\n        if (layerDefModel.id === widgetLayerId) {\n          analysisDefinitionsCollection.saveAnalysisForLayer(layerDefModel);\n          return true; // aborts the \"some\"-iterator\n        }\n      });\n\n      widgetDefModel.save();\n    },\n\n    deleteAnalysisNode: function (nodeId) {\n      var nodeDefModel = analysisDefinitionNodesCollection.get(nodeId);\n      if (!nodeDefModel) return false; // abort if there is no node-definition; nothing to delete/change\n      if (!nodeDefModel.canBeDeletedByUser()) return false;\n\n      var layerDefModel = layerDefinitionsCollection.findOwnerOfAnalysisNode(nodeDefModel);\n      var primarySourceNode = nodeDefModel.getPrimarySource();\n\n      var containsNode = function (m) {\n        return m !== layerDefModel && m !== nodeDefModel && m.containsNode(nodeDefModel);\n      };\n      _\n        .flatten([\n          widgetDefinitionsCollection.filter(containsNode),\n          layerDefinitionsCollection.filter(containsNode),\n          analysisDefinitionsCollection.filter(containsNode),\n          analysisDefinitionNodesCollection.filter(containsNode),\n          nodeDefModel\n        ], true)\n        .forEach(function (m) {\n          m.destroy();\n        });\n\n      // Try to restore old styles if we have them, reset them if not\n      var oldNodeStyle = primarySourceNode.getStyleHistoryForLayer(layerDefModel.id);\n      if (oldNodeStyle) {\n        layerDefModel.set({ source: primarySourceNode.id }, { ignoreSchemaChange: true });\n        layerDefModel.styleModel.set(layerDefModel.styleModel.parse(oldNodeStyle.options.style_properties));\n        layerDefModel.set({\n          cartocss: oldNodeStyle.options.tile_style,\n          infowindow: oldNodeStyle.infowindow,\n          tooltip: oldNodeStyle.tooltip,\n          sql_wrap: oldNodeStyle.options.sql_wrap\n        });\n      } else {\n        layerDefModel.set({ source: primarySourceNode.id });\n      }\n      layerDefModel.save();\n      analysisDefinitionsCollection.saveAnalysisForLayer(layerDefModel);\n\n      MetricsTracker.track(MetricsTypes.DELETED_ANALYSIS, {\n        analysis: {\n          id: nodeDefModel.attributes['id'],\n          natural_id: nodeDefModel.attributes['id'],\n          type: nodeDefModel.attributes['type']\n        }\n      });\n\n      this._resetStylePerNode(primarySourceNode, layerDefModel);\n\n      deleteOrphanedAnalyses();\n    },\n\n    /**\n     * Create a new layer for a given table name\n     * @param {model} [tableModel]\n     * @param {object} [options]\n     * @param {number} [options.at]\n     */\n    createLayerFromTable: function (tableModel, options) {\n      options = options || {};\n\n      var tableName = tableModel.getUnqualifiedName();\n      var ownerName = tableModel.getOwnerName() || userModel.get('username');\n      var tableGeometry = tableModel.getGeometryType() && tableModel.getGeometryType()[0];\n\n      // Setting at assumes there to be at least one non-basemap layer\n      var at = options.at || layerDefinitionsCollection.length;\n      var layerOnTop = layerDefinitionsCollection.getLayerOnTop();\n      var layerOnTopPos = layerDefinitionsCollection.indexOf(layerOnTop);\n      var hasTorque = layerDefinitionsCollection.isThereAnyTorqueLayer();\n      var hasLabels = layerOnTop &&\n        !layerTypesAndKinds.isCartoDBType(layerOnTop.get('type')) &&\n        !layerTypesAndKinds.isTorqueType(layerOnTop.get('type'));\n\n      if (hasTorque || hasLabels) {\n        layerOnTop.set('order', layerOnTopPos + 1); // persisted on collection.save in success callback below\n\n        if (hasLabels) { at--; }\n        if (hasTorque) { at--; }\n      }\n\n      var newLetter = layerDefinitionsCollection.nextLetter();\n      var attrs = createDefaultCartoDBAttrs();\n      attrs.letter = newLetter;\n      attrs.options.table_name = tableName;\n      if (ownerName) {\n        attrs.options.user_name = ownerName;\n      }\n\n      if (tableGeometry) {\n        attrs.options.style_properties = {\n          type: 'simple',\n          properties: SimpleStyleDefaults.generateAttributes(tableGeometry)\n        };\n      }\n\n      analysisDefinitionNodesCollection.addRelatedTableData(tableModel.toJSON());\n\n      return layerDefinitionsCollection.create(attrs, {\n        wait: true,\n        at: at,\n        error: options.error,\n        origin: TABLE_ORIGIN,\n        success: function () {\n          layerDefinitionsCollection.each(function (layerDefModel) {\n            if (!layerDefModel.isDataLayer()) return;\n            if (analysisDefinitionsCollection.findAnalysisForLayer(layerDefModel)) return;\n\n            analysisDefinitionsCollection.saveAnalysisForLayer(layerDefModel);\n          });\n          layerDefinitionsCollection.save();\n\n          var newLayerModel = _.last(layerDefinitionsCollection.models);\n          options.success && options.success(newLayerModel);\n        }\n      });\n    },\n\n    /**\n     * A layer for an existing node have different side-effects depending on the context in which the node exists.\n     * @param {string} nodeid\n     * @param {string} letter of the layer where the node change comes\n     * @param {object} cfg\n     *  @param {number} cfg.at\n     */\n    createLayerForAnalysisNode: function (nodeId, fromLayerLetter, cfg) {\n      var userMaxLayers = userModel.get('limits').max_layers;\n      if (layerDefinitionsCollection.getNumberOfDataLayers() >= userMaxLayers) {\n        var err = new Error('max layers reached');\n        err.userMaxLayers = userMaxLayers;\n        throw err;\n      }\n\n      var nodeDefModel = analysisDefinitionNodesCollection.get(nodeId);\n      if (!nodeDefModel) throw new Error('node with id ' + nodeId + ' does not exist');\n      if (!cfg) throw new Error('cfg is required');\n      if (isNaN(cfg.at) || cfg.at <= 0) throw new Error('cfg.at must be on top of the base layer');\n\n      var newPosition = cfg.at;\n\n      var attrs;\n      var tableName;\n      var tableNameAlias;\n      var ownerName;\n      var oldNodeStyle;\n      var movementType;\n      var newLetter = layerDefinitionsCollection.nextLetter();\n      var affectedWidgetAttrsBySourceChange = [];\n\n      var onNewLayerSaved = function (layer, forceResetStyles) {\n        this._resetStylePerNode(layer.getAnalysisDefinitionNodeModel(), layer, forceResetStyles);\n        layerDefinitionsCollection.save(); // to persist layers order\n        MetricsTracker.track(MetricsTypes.DRAGGED_NODE);\n      }.bind(this);\n\n      var prevLayer = layerDefinitionsCollection.findWhere({ source: nodeId, letter: fromLayerLetter });\n      if (prevLayer) {\n        if (nodeDefModel.hasPrimarySource()) {\n          // Node is head of a layer, e.g. given nodeId A3 it should rename prev layer (A => B), and create a new layer (A)\n          // where the prev layer was to take over its letter identity and its primary source (A2).\n          // The motivation for this is to maintain the layer's state (styles, popup etc.) which really depends on the\n          // last analysis output than the layer itself:\n          //   _______       _______   ______\n          //  | A    |      | A    |  | B    | <-- note that B is really A which just got moved & had it's nodes renamed\n          //  |      |      |      |  |      |\n          //  | {A3} |  =>  |      |  | {B1} |\n          //  | [A2] |      | [A2] |  | [A2] |\n          //  | [A1] |      | [A1] |  |      |\n          //  | [A0] |      | [A0] |  |      |\n          //  |______|      |______|  |______|\n          movementType = '1';\n          var prevOrder = layerDefinitionsCollection.indexOf(prevLayer);\n          var prevLetter = fromLayerLetter;\n\n          // Change identity of prevLayer (A) so it appears as the new layer (B), including its analysis\n          var renamedNodeId = newLetter + '1';\n          var renamedNodeDefModel = nodeDefModel.clone(renamedNodeId); // e.g. A3 => B1\n          analysisDefinitionNodesCollection.invoke('changeSourceIds', nodeId, renamedNodeId);\n\n          // We have to manage all widgets associated with the layer due to the operations we do\n          // creating a new one and managing the previous one\n          var prevLayerNodeIds = _.pluck(prevLayer.ownedPrimaryAnalysisNodes(), 'id');\n          var affectedWidgetsBySourceChange = widgetDefinitionsCollection.filter(function (widgetDefModel) {\n            return _.contains(prevLayerNodeIds, widgetDefModel.get('source'));\n          });\n\n          _.each(affectedWidgetsBySourceChange, function (widgetDefModel) {\n            var attrs;\n            var widgetSourceId = widgetDefModel.get('source');\n\n            // If this widget doesn't point to the \"dragged\" node, it will\n            // keep the source but the layer_id will be totally different\n            if (widgetSourceId !== nodeId) {\n              attrs = _.extend(\n                _.omit(widgetDefModel.toJSON(), 'id', 'layer_id', 'order'),\n                {\n                  avoidNotification: true\n                }\n              );\n            } else {\n              // On the other hand, if there is a widget pointing to the dragged node,\n              // it will keep the layer_id but the source will be different\n              attrs = _.extend(\n                _.omit(widgetDefModel.toJSON(), 'id', 'source', 'order'),\n                {\n                  source: {\n                    id: renamedNodeId\n                  },\n                  avoidNotification: true\n                }\n              );\n            }\n\n            affectedWidgetAttrsBySourceChange.push(attrs);\n            widgetDefModel.attributes.avoidNotification = true;\n            widgetDefModel.destroy();\n          });\n\n          analysisDefinitionsCollection.newAnalysisForNode(renamedNodeDefModel); // will be saved by saveAnalysisForLayer later since containing that layer's node\n\n          // Modify all layers using the old node as top source and it doesn't have an analysis definition associated\n          layerDefinitionsCollection.each(function (layerDefModel) {\n            var containsAnalysisDefinition = analysisDefinitionsCollection.findAnalysisForLayer(layerDefModel);\n            if (!containsAnalysisDefinition && layerDefModel.get('source') === nodeId) {\n              layerDefModel\n                .set('source', renamedNodeId)\n                .save();\n            }\n          });\n\n          // New layer takes over the identity of the old layer (A), and its primary source as its head node\n          // We apply the styles from the new header node (A2) if available\n          oldNodeStyle = nodeDefModel.getPrimarySource().getStyleHistoryForLayer(prevLayer.id);\n          tableName = prevLayer.get('table_name');\n          tableNameAlias = prevLayer.get('table_name_alias');\n          ownerName = prevLayer.get('user_name') || userModel.get('username');\n          attrs = createDefaultCartoDBAttrs(oldNodeStyle);\n          attrs.options = _.extend({}, attrs.options, {\n            sql: 'SELECT * FROM ' + tableName,\n            table_name: tableName,\n            table_name_alias: tableNameAlias,\n            letter: prevLetter,\n            color: layerColors.getColorForLetter(prevLetter),\n            source: nodeDefModel.getPrimarySource().id\n          });\n\n          if (ownerName) {\n            attrs.options.user_name = ownerName;\n          }\n\n          // Tell the backend that this layer is a copy of the old one, and how to rename the analysis nodes.\n          // This is used to keep the style_history valid in both the old a new layer\n          attrs.from_layer_id = prevLayer.get('id');\n          attrs.from_letter = prevLetter;\n          var newLayerDefModel = layerDefinitionsCollection.add(attrs, { at: prevOrder });\n          var saveAnalysis = analysisDefinitionsCollection.saveAnalysisForLayer(newLayerDefModel);\n\n          $.when(saveAnalysis)\n            .done(function () {\n              // Update the layer after the analyses request\n              prevLayer.save({\n                letter: newLetter,\n                color: layerColors.getColorForLetter(newLetter),\n                source: renamedNodeId\n              }, { ignoreSchemaChange: true });\n            })\n            .fail(function () {\n              Notifier.addNotification({\n                status: 'error',\n                info: _t('notifications.analysis.failed'),\n                closable: true\n              });\n            });\n\n          // Remove and add prevLayer (A), to move the layers to expected positions\n          layerDefinitionsCollection.remove(prevLayer, { silent: true }); // silent to avoid unwanted side-effects; re-added again later\n          layerDefinitionsCollection.add(prevLayer, { at: newPosition });\n\n          // Reset styles from previous layer\n          this._resetStylePerNode(prevLayer.getAnalysisDefinitionNodeModel(), prevLayer);\n\n          newLayerDefModel.save(null, {\n            success: function () {\n              restoreWidgetsFromLayer(affectedWidgetAttrsBySourceChange, newLayerDefModel, onNewLayerSaved, !oldNodeStyle);\n            },\n            error: function () {\n              Notifier.addNotification({\n                status: 'error',\n                info: _t('notifications.layer.error'),\n                closable: true\n              });\n            }\n          });\n          nodeDefModel.destroy(); // replaced by new node\n        } else {\n          // Node is the source of a prevLayer\n          // Create a new layer which simply points to that source\n          //   _______       _______   ______\n          //  | A    |      | A    |  | B    |\n          //  |      |      |      |  |      |\n          //  | [A0] |  =>  | [A0] |  | [A0] |\n          //  |______|      |______|  |______|\n\n          movementType = '2';\n          // Keep the same style in the new layer\n          oldNodeStyle = {\n            options: {\n              tile_style: prevLayer.get('cartocss'),\n              sql_wrap: prevLayer.get('sql_wrap'),\n              style_properties: prevLayer.get('style_properties')\n            },\n            infowindow: prevLayer.get('infowindow'),\n            tooltip: prevLayer.get('tooltip')\n          };\n          tableName = prevLayer.get('table_name');\n          tableNameAlias = prevLayer.get('table_name_alias');\n          ownerName = prevLayer.get('user_name') || userModel.get('username');\n          attrs = createDefaultCartoDBAttrs(oldNodeStyle);\n          attrs.options = _.extend({}, attrs.options, {\n            sql: 'SELECT * FROM ' + tableName,\n            table_name: tableName,\n            table_name_alias: tableNameAlias,\n            letter: newLetter,\n            color: layerColors.getColorForLetter(newLetter),\n            source: nodeId\n          });\n          if (ownerName) {\n            attrs.options.user_name = ownerName;\n          }\n          newLayerDefModel = layerDefinitionsCollection.create(attrs, {\n            at: newPosition,\n            success: function () {\n              onNewLayerSaved(newLayerDefModel, false);\n            },\n            error: function () {\n              Notifier.addNotification({\n                status: 'error',\n                info: _t('notifications.layer.error'),\n                closable: true\n              });\n            }\n          });\n        }\n      } else {\n        // Node is NOT a head of a node, e.g. given nodeId is 'a2' this would create a new layer B which takes over the\n        // ownership of the given node and its underlying nodes\n        //   _______       _______   ______\n        //  | A    |      | A    |  | B    |\n        //  |      |      |      |  |      |\n        //  | [A3] |      | [A3] |  | {B2} |\n        //  | {A2} |  =>  | {B2} |  | [B1] |\n        //  | [A1] |      |      |  | [B0] |\n        //  | [A0] |      |      |  |      |\n        //  |______|      |______|  |______|\n\n        movementType = '3';\n        var linkedNodesList = nodeDefModel.linkedListBySameLetter();\n\n        var moveNode = function (oldNode) {\n          var newId = nodeIds.changeLetter(oldNode.id, newLetter);\n          var newNode = oldNode.clone(newId);\n          var affectedWidgetsBySourceChange = widgetDefinitionsCollection.where({ source: oldNode.id });\n\n          analysisDefinitionNodesCollection.invoke('changeSourceIds', oldNode.id, newId);\n\n          _.each(affectedWidgetsBySourceChange, function (m) {\n            // Store attrs from affected widget for creating a new\n            // instance when layer is created\n            affectedWidgetAttrsBySourceChange.push(\n              _.extend(\n                _.omit(m.toJSON(), 'id', 'layer_id', 'source', 'order'),\n                {\n                  avoidNotification: true,\n                  source: {\n                    id: newId\n                  }\n                }\n              )\n            );\n\n            // Destroy widgets pointing to that source until new layer is created\n            m.attributes.avoidNotification = true;\n            m.destroy();\n          });\n\n          return newNode;\n        };\n        var newLayerHeadNode = moveNode(linkedNodesList[0]);\n        _.rest(linkedNodesList).forEach(moveNode);\n\n        // Create the new layer (B). Copy the layer style from the dragged node.\n        var ownerLayer = layerDefinitionsCollection.findOwnerOfAnalysisNode(nodeDefModel);\n        oldNodeStyle = nodeDefModel.getStyleHistoryForLayer(ownerLayer.id);\n        tableName = ownerLayer.get('table_name');\n        tableNameAlias = ownerLayer.get('table_name_alias');\n        ownerName = ownerLayer.get('user_name') || userModel.get('username');\n        attrs = createDefaultCartoDBAttrs(oldNodeStyle);\n        attrs.options = _.extend({}, attrs.options, {\n          sql: 'SELECT * FROM ' + tableName,\n          table_name: tableName,\n          table_name_alias: tableNameAlias,\n          letter: newLetter,\n          color: layerColors.getColorForLetter(newLetter),\n          source: newLayerHeadNode.id\n        });\n        if (ownerName) {\n          attrs.options.user_name = ownerName;\n        }\n\n        // Tell the backend that this layer is a copy of the old one, and how to rename the analysis nodes.\n        // This is used to keep the style_history valid in both the old a new layer\n        attrs.from_layer_id = ownerLayer.get('id');\n        attrs.from_letter = ownerLayer.get('letter');\n        newLayerDefModel = layerDefinitionsCollection.add(attrs, { at: newPosition });\n        $.when(analysisDefinitionsCollection.saveAnalysisForLayer(newLayerDefModel))\n          .done(function () {\n            newLayerDefModel.save()\n              .done(function () {\n                restoreWidgetsFromLayer(affectedWidgetAttrsBySourceChange, newLayerDefModel, onNewLayerSaved, !oldNodeStyle);\n              })\n              .fail(function () {\n                Notifier.addNotification({\n                  status: 'error',\n                  info: _t('notifications.layer.error'),\n                  closable: true\n                });\n              });\n          })\n          .fail(function () {\n            Notifier.addNotification({\n              status: 'error',\n              info: _t('notifications.analysis.failed'),\n              closable: true\n            });\n          });\n        nodeDefModel.destroy(); // replaced by new node\n      }\n\n      deleteOrphanedAnalyses();\n\n      window.FS && window.FS.log('log', 'Node dragged out case - ' + movementType);\n    },\n\n    moveLayer: function (d) {\n      var from = d.from;\n      var to = d.to;\n\n      var movingLayer = layerDefinitionsCollection.at(from);\n      layerDefinitionsCollection.remove(movingLayer, { silent: true });\n      layerDefinitionsCollection.add(movingLayer, { at: to, parse: false, silent: true });\n\n      var saveAnalysisPromises = layerDefinitionsCollection\n        .chain()\n        .map(function (layerDefModel) {\n          var nodeDefModel = layerDefModel.getAnalysisDefinitionNodeModel();\n          if (nodeDefModel) {\n            return analysisDefinitionsCollection.saveAnalysisForLayer(layerDefModel);\n          }\n        })\n        .compact()\n        .value();\n\n      $.when.apply($, saveAnalysisPromises).done(function () { // http://api.jquery.com/jQuery.when/\n        layerDefinitionsCollection.save({\n          success: function () {\n            layerDefinitionsCollection.trigger('layerMoved', movingLayer, from, to);\n          }\n        });\n      });\n    },\n\n    deleteLayer: function (id) {\n      var layerToDelete = layerDefinitionsCollection.get(id);\n      if (!layerToDelete.canBeDeletedByUser()) return;\n\n      var parentLayer;\n      var toDestroy = [];\n\n      // Iterate over each node in the list, to decide how to remove dependent objects or fold nodes (if possible)\n      // under another layer's linked nodes list.\n      var linkedNodesList = layerToDelete.ownedPrimaryAnalysisNodes();\n      var nodeDefModel;\n\n      for (var i = 0; i < linkedNodesList.length; i++) {\n        nodeDefModel = linkedNodesList[i];\n\n        parentLayer = layerDefinitionsCollection.findPrimaryParentLayerToAnalysisNode(nodeDefModel, { exclude: toDestroy });\n\n        // No parent layer? delete all dependent objects, since can't move current nodeDefModel elsewhere\n        if (!parentLayer) {\n          toDestroy.push(nodeDefModel);\n\n          layerDefinitionsCollection.each(function (layer) {\n            if (layer.containsNode(nodeDefModel)) {\n              if (!_.contains(toDestroy, layer)) {\n                toDestroy.push(layer);\n              }\n\n              widgetDefinitionsCollection.each(function (widget) {\n                if (!_.contains(toDestroy, widget) && widget.containsNode(nodeDefModel)) {\n                  toDestroy.unshift(widget);\n                }\n              });\n            }\n          });\n\n          continue; // to process all sequent nodes in the linekd list, and their (possibly) dependent objects\n        }\n\n        var newParentLinkedNodesList = parentLayer\n          .ownedPrimaryAnalysisNodes()\n          .concat(nodeDefModel.linkedListBySameLetter());\n\n        // Since will reassign ids from the start of list need to calculate which sequence id to start on\n        var idSequence = newParentLinkedNodesList.length;\n        var firstSequence = nodeIds.sequence(newParentLinkedNodesList[0].id);\n\n        // If first node has a higher sequence start from that one to avoid issues on renaming nodes\n        if (idSequence <= firstSequence) {\n          idSequence = firstSequence;\n        }\n\n        var lastNode = _.last(newParentLinkedNodesList);\n        if (lastNode.get('type') !== 'source') {\n          idSequence++; // to start on right id sequence, so last item in newParentLinkedNodesList gets assigned x1 as id, since its source will be a none-source node belong to another layer\n        }\n\n        // Reassign ids one-by-one, from start of list to avoid ids overlapping (e.g. [c2,c1]+[b2,b1] = [c4,c3,c2,c1])\n        var prevId = parentLayer.get('letter') + idSequence;\n        var moveNodeToParentLayer = function (node) {\n          var oldNodeId = node.id;\n          var newId = nodeIds.prev(prevId);\n\n          node.set('id', newId);\n\n          // Update any depending objects' source\n          analysisDefinitionNodesCollection.each(function (m) {\n            if (!_.contains(toDestroy, m)) {\n              m.changeSourceIds(oldNodeId, newId, true);\n            }\n          });\n          var maybeUpdateSource = function (m) {\n            if (m.get('source') === oldNodeId && !_.contains(toDestroy, m)) {\n              m.save({ source: newId }, { silent: true });\n            }\n          };\n          layerDefinitionsCollection.each(maybeUpdateSource);\n          widgetDefinitionsCollection.each(maybeUpdateSource);\n\n          prevId = newId;\n\n          return node;\n        };\n        var newParentLayerNode = moveNodeToParentLayer(newParentLinkedNodesList[0]);\n        _.rest(newParentLinkedNodesList).forEach(moveNodeToParentLayer);\n\n        parentLayer.save({ source: newParentLayerNode.id });\n\n        break; // since the remaining nodes have been move to a parent layer\n      }\n\n      if (!_.contains(toDestroy, layerToDelete)) {\n        toDestroy.push(layerToDelete);\n      }\n\n      var promise = $.when.apply($, // http://api.jquery.com/jQuery.when/\n        _.chain(toDestroy)\n          .reduce(function (memo, m) {\n            memo.push(m);\n            var layerDefModel = layerDefinitionsCollection.get(m.id);\n            if (layerDefModel) { // Also delete analyses associated with layers that are being deleted\n              var aDefModel = analysisDefinitionsCollection.findAnalysisForLayer(layerDefModel);\n              if (aDefModel) {\n                memo.push(aDefModel);\n              }\n            }\n\n            return memo;\n          }, [])\n          .unique()\n          .map(function (m) {\n            m.set({ avoidNotification: true }, { silent: true });\n            return m.destroy();\n          })\n          .value());\n\n      if (parentLayer) {\n        analysisDefinitionsCollection.saveAnalysisForLayer(parentLayer);\n      }\n      deleteOrphanedAnalyses();\n\n      return promise;\n    },\n\n    /**\n     * E.g. for styles, infowindows etc.\n     * @param {object} layerDefModel - layer-definition-model\n     * @param {object} options\n     */\n    saveLayer: function (layerDefModel, options) {\n      if (!layerDefModel) throw new Error('layerDefModel is required');\n\n      if (layerDefModel.isDataLayer()) {\n        analysisDefinitionsCollection.saveAnalysisForLayer(layerDefModel);\n      }\n\n      deleteOrphanedAnalyses();\n\n      var saveDefaultOptions = {\n        shouldPreserveAutoStyle: false\n      };\n      options = _.extend({}, saveDefaultOptions, options);\n\n      return layerDefModel.save(null, options);\n    }\n  };\n};\n","var _ = require('underscore');\nvar Backbone = require('backbone');\n\n/**\n *  User Notifications\n *\n */\n\nvar UserNotifications = Backbone.Model.extend({\n  sync: function (method, model, options) {\n    return Backbone.sync('update', model, options);\n  },\n\n  url: function () {\n    var baseUrl = this._configModel.get('base_url');\n    return baseUrl + '/api/v3/notifications/' + this.get('key');\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.key) throw new Error('key is required');\n    if (!opts.configModel) throw new Error('configModel is required');\n\n    this._configModel = opts.configModel;\n    this.attributes = _.extend({ notifications: attrs }, { key: opts.key });\n  },\n\n  getKey: function (key) {\n    var notifications = this.get('notifications') || {};\n    return notifications[key];\n  },\n\n  setKey: function (key, value) {\n    var notifications = this.get('notifications') || {};\n    notifications[key] = value;\n    this.set('notifications', notifications);\n  }\n});\n\nmodule.exports = UserNotifications;\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar CartoColor = require('cartocolor');\nvar syncAbort = require('./backbone/sync-abort');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'configModel',\n  'mapId'\n];\n\nvar ATTRS_AT_TOP_LEVEL = ['id', 'layer_id', 'source', 'title', 'type', 'order'];\nvar STYLE_PROPERTIES = ['widget_style_definition', 'auto_style_definition', 'auto_style_allowed', 'widget_color_changed'];\n\nvar DEFAULT_WIDGET_COLOR = '#9DE0AD';\nvar TIME_SERIES_WIDGET_COLOR = '#F2CC8F';\nvar DEFAULT_WIDGET_STYLE = {\n  color: {\n    fixed: DEFAULT_WIDGET_COLOR,\n    opacity: 1\n  }\n};\n\nvar DEFAULT_RAMP_SIZE = 256;\n\nvar getDefaultCategoriesByRange = function (range) {\n  var widgetDomain = [];\n  for (var i = 0, l = range.length; i < l; i++) {\n    widgetDomain.push(_t('form-components.editors.fill.quantification.methods.category') + ' #' + (i + 1));\n  }\n  return widgetDomain;\n};\n\n/**\n * Widget definition Model\n */\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    sync_on_bbox_change: true,\n    auto_style_allowed: true,\n    widget_style_definition: DEFAULT_WIDGET_STYLE,\n    widget_color_changed: false\n  },\n\n  /**\n   * @override {Backbone.prototype.sync} abort ongoing request if there is any\n   */\n  sync: syncAbort,\n\n  initialize: function (attrs, opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n  },\n\n  urlRoot: function () {\n    // Since widget are stored under layers the collection can't figure out the URL by itself,\n    // thus each widget sets its own urlRoot\n    var baseUrl = this._configModel.get('base_url');\n    var layerId = this.get('layer_id');\n    return baseUrl + '/api/v3/maps/' + this._mapId + '/layers/' + layerId + '/widgets';\n  },\n\n  /**\n   * The API response format is a little bit different, and may\n   * @param {Object} API response\n   * @return {Object} attrs to be set on model\n   */\n  parse: function (response) {\n    var attrs = _.defaults(\n      _.pick(response, ATTRS_AT_TOP_LEVEL),\n      response.options\n    );\n\n    if (!_.isEmpty(response.style)) {\n      var style = JSON.parse(JSON.stringify(response.style));\n      if (style.auto_style) {\n        var autoStyle = style.auto_style;\n        var autoStyleDefinition = autoStyle.definition;\n        if (autoStyleDefinition && autoStyleDefinition.color && autoStyleDefinition.color.quantification === 'category') {\n          autoStyle.definition.color.domain = getDefaultCategoriesByRange(autoStyleDefinition.color.range);\n        }\n        attrs.auto_style_definition = autoStyle.definition;\n        attrs.auto_style_allowed = autoStyle.allowed;\n      }\n      attrs.widget_style_definition = response.style.widget_style.definition;\n      attrs.widget_color_changed = response.style.widget_style.widget_color_changed;\n    }\n\n    attrs.source = attrs.source && attrs.source.id;\n\n    // Fetch column type\n    var columnTypeInSource;\n    if (attrs.column && attrs.source) {\n      columnTypeInSource = this.collection.getColumnType(attrs.column, attrs.source);\n    }\n\n    if (columnTypeInSource && columnTypeInSource !== attrs.column_type) {\n      attrs.column_type = columnTypeInSource;\n    }\n\n    return attrs;\n  },\n\n  /**\n   * @override Backbone.Model.prototype.toJSON\n   * Formats the JSON to match the server-side API\n   */\n  toJSON: function () {\n    var attributes = _.pick(this.attributes, ATTRS_AT_TOP_LEVEL);\n    attributes.source = {id: this.get('source')};\n    attributes.options = _.omit(this.attributes, ATTRS_AT_TOP_LEVEL, STYLE_PROPERTIES);\n\n    if (this.get('widget_style_definition')) {\n      attributes.style = {\n        widget_style: {\n          definition: this.get('widget_style_definition'),\n          widget_color_changed: this.get('widget_color_changed')\n        }\n      };\n\n      attributes.style.auto_style = {\n        custom: !!this.get('auto_style_definition'),\n        allowed: this.get('auto_style_allowed')\n      };\n\n      if (this.get('auto_style_definition')) {\n        var autoStyleDefinition = JSON.parse(JSON.stringify(this.get('auto_style_definition')));\n        autoStyleDefinition.color = _.omit(autoStyleDefinition.color, 'domain', 'bins');\n        attributes.style.auto_style.definition = autoStyleDefinition;\n      }\n    }\n\n    return attributes;\n  },\n\n  changeType: function (type) {\n    var resetableAttrs = this.collection.resetableAttrsForTypeMap(type);\n    _.each(resetableAttrs, function (attr) {\n      this.unset(attr, { silent: true });\n    }, this);\n\n    var attrsForNewType = _.defaults({ type: type }, this.collection.attrsForThisType(type, this));\n\n    // Unset now irrelevant attributes due to the type change\n    _\n      .chain(this.attributes)\n      .keys()\n      .difference(\n        ['sync_on_bbox_change'].concat(ATTRS_AT_TOP_LEVEL, STYLE_PROPERTIES),\n        _.keys(attrsForNewType)\n      )\n      .each(function (key) {\n        this.unset(key, { silent: true });\n      }, this);\n\n    this.set(attrsForNewType);\n  },\n\n  containsNode: function (otherNodeDefModel) {\n    if (!otherNodeDefModel) return false;\n\n    var sourceId = this.get('source');\n    var nodeDefModel = otherNodeDefModel.collection.get(sourceId);\n\n    return !!(sourceId === otherNodeDefModel.id ||\n    nodeDefModel && nodeDefModel.containsNode(otherNodeDefModel));\n  }\n}, {\n\n  getDefaultWidgetStyle: function (type) {\n    var widgetColor = type === 'time-series' ? TIME_SERIES_WIDGET_COLOR : DEFAULT_WIDGET_COLOR;\n    var defaultWidgetStyle = DEFAULT_WIDGET_STYLE;\n    defaultWidgetStyle.color.fixed = widgetColor;\n    return defaultWidgetStyle;\n  },\n\n  getDefaultAutoStyle: function (type, columnName) {\n    var defaultWidgetCategories = 10;\n    var defaultWidgetRampSize = 7;\n    var widgetRamp = _.first(\n      _.compact(\n        _.map(CartoColor, function (ramp) {\n          return _.clone(ramp[defaultWidgetRampSize]);\n        }, this)\n      )\n    );\n    var widgetCategories = _.clone(CartoColor.Prism[defaultWidgetCategories]);\n    var widgetRange = type === 'category' ? widgetCategories : widgetRamp;\n    var widgetQuantification = type === 'category' ? 'category' : 'quantiles';\n\n    var attrs = {\n      color: {\n        attribute: columnName,\n        quantification: widgetQuantification,\n        range: widgetRange\n      }\n    };\n\n    if (type === 'category') {\n      attrs.color.domain = getDefaultCategoriesByRange(widgetCategories);\n    } else {\n      attrs.color.bins = type === 'time-series'\n        ? DEFAULT_RAMP_SIZE\n        : defaultWidgetRampSize;\n    }\n\n    return attrs;\n  }\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar WidgetDefinitionModel = require('./widget-definition-model');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'configModel',\n  'mapId',\n  'layerDefinitionsCollection',\n  'analysisDefinitionNodesCollection'\n];\n\n/**\n * Collection of widget definitions, synhronizes the internal definitions and the widget models.\n */\nmodule.exports = Backbone.Collection.extend({\n  comparator: 'order',\n\n  model: function (attrs, opts) {\n    var self = opts.collection;\n    attrs.order = !_.isUndefined(attrs.order) ? attrs.order : 0;\n    var model = new WidgetDefinitionModel(attrs, {\n      parse: true, // make sure data is structured as expected\n      collection: self,\n      configModel: self._configModel,\n      mapId: self._mapId\n    });\n    return model;\n  },\n\n  initialize: function (models, opts) {\n    var self = this;\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._bindLayerStyleChanges();\n\n    this._attrsForThisTypeMap = {\n      formula: function (model) {\n        return {\n          column: model.get('column'),\n          operation: model.get('operation') || 'max'\n        };\n      },\n      category: function (model) {\n        var columnName = model.get('column');\n        return {\n          aggregation: model.get('aggregation') || 'count',\n          aggregation_column: model.get('aggregation_column') || columnName,\n          column: columnName,\n          widget_style_definition: model.get('widget_style_definition') || WidgetDefinitionModel.getDefaultWidgetStyle('category'),\n          auto_style_definition: undefined\n        };\n      },\n      histogram: function (model) {\n        return {\n          column: model.get('column'),\n          bins: model.get('bins') || 10,\n          column_type: 'number',\n          widget_style_definition: model.get('widget_style_definition') || WidgetDefinitionModel.getDefaultWidgetStyle('histogram'),\n          auto_style_definition: undefined\n        };\n      },\n      'time-series': function (model) {\n        return {\n          column: model.get('column'),\n          bins: model.get('bins') || 256,\n          aggregation: model.get('aggregation'),\n          column_type: self.getColumnType(model.get('column'), model.get('source')),\n          widget_style_definition: model.get('widget_style_definition') || WidgetDefinitionModel.getDefaultWidgetStyle('time-series')\n        };\n      }\n    };\n  },\n\n  url: function () {\n    var baseUrl = this._configModel.get('base_url');\n    return baseUrl + '/api/v3/maps/' + this._mapId + '/widgets';\n  },\n\n  parse: function (response) {\n    return response && response.widgets\n      ? response.widgets\n      : [];\n  },\n\n  _bindLayerStyleChanges: function () {\n    this._layerDefinitionsCollection.bind('change:style_properties', this._onLayerStyleChanged, this);\n  },\n\n  _onLayerStyleChanged: function (layerDefModel) {\n    var styleModel = layerDefModel.styleModel;\n    var isAllowed = styleModel && styleModel.canApplyAutoStyle();\n    var affectedWidgets = this.where({ layer_id: layerDefModel.id });\n\n    _.each(affectedWidgets, function (widgetDefModel) {\n      var isNowAllowed = widgetDefModel.get('auto_style_allowed');\n      var willBeAllowed = isAllowed;\n      var attrs = {\n        auto_style_allowed: willBeAllowed\n      };\n\n      if (isNowAllowed !== willBeAllowed) {\n        // if autostyle is not allow, we should clean auto_style_definition\n        if (willBeAllowed === false) {\n          attrs = _.extend(attrs, { auto_style_definition: '' });\n        }\n        widgetDefModel.save(attrs);\n      }\n    });\n  },\n\n  addWidget: function (widgetModel, attrs) {\n    var self = this;\n    var ORDER_NUMBER_TO_APPEAR_ON_TOP = -1;\n\n    return new Promise(function (resolve, reject) {\n      _.extend(attrs, { order: ORDER_NUMBER_TO_APPEAR_ON_TOP });\n\n      self.create(attrs, {\n        wait: true,\n        success: function (model) {\n          resolve(model);\n        },\n        error: function (response, error) {\n          reject(error);\n        }\n      });\n    });\n  },\n\n  updateWidgetsOrder: function (numberOfWidgets) {\n    this.each(function (widgetDefinitionModel, index) {\n      widgetDefinitionModel.set({ order: index });\n    });\n\n    return this.saveAsync(numberOfWidgets);\n  },\n\n  saveAsync: function (updatedWidgets) {\n    var self = this;\n\n    this.trigger('loading', updatedWidgets);\n\n    return new Promise(function (resolve, reject) {\n      self.save({\n        wait: true,\n        success: function (collection) {\n          self.trigger('successAdd', updatedWidgets);\n          resolve(collection);\n        },\n        error: function (response, error) {\n          self.trigger('errorAdd', response);\n          reject(error);\n        }\n      });\n    });\n  },\n\n  save: function (options) {\n    options = options || {};\n    Backbone.sync('update', this, options);\n  },\n\n  attrsForThisType: function (newType, m) {\n    return this._attrsForThisTypeMap[newType](m);\n  },\n\n  resetableAttrsForTypeMap: function (type) {\n    switch (type) {\n      case 'formula':\n        return [];\n      case 'category':\n        return ['aggregation'];\n      case 'histogram':\n        return ['bins', 'column_type'];\n      case 'time-series':\n        return ['bins', 'aggregation', 'column_type'];\n    }\n  },\n\n  isThereTimeSeries: function (opts) {\n    opts = opts || {};\n\n    var timeSeries = opts.animated ? this.findWhere({ type: 'time-series', animated: opts.animated }) : this.findWhere({ type: 'time-series' });\n    return !!timeSeries;\n  },\n\n  isThereOtherWidgets: function () {\n    return !!this.find(function (widgetModel) {\n      return widgetModel.get('type') !== 'time-series';\n    });\n  },\n\n  _getNextOrder: function () {\n    if (this.isEmpty()) {\n      return 0;\n    } else {\n      var lastItemByOrder = this.max(function (mdl) {\n        return mdl.get('order');\n      });\n      return lastItemByOrder.get('order') + 1;\n    }\n  },\n\n  widgetsOwnedByLayer: function (layerId) {\n    var widgets = this.where({ layer_id: layerId });\n\n    return widgets.length;\n  },\n\n  getColumnType: function (columnName, source) {\n    var column;\n    var node = this._analysisDefinitionNodesCollection.get(source);\n    var schemaModel = node && node.querySchemaModel;\n    if (schemaModel && schemaModel.get('status') === 'fetched') {\n      column = schemaModel.columnsCollection.findWhere({ name: columnName });\n    }\n    return column && column.get('type');\n  }\n});\n","var _ = require('underscore');\n\nvar PROXY_URL = 'https://cartodb-wms.global.ssl.fastly.net/api';\nvar PROXY_TILES = 'https://cartodb-wms.global.ssl.fastly.net/mapproxy';\nvar METHOD_TO_URL = {\n  'read': '/check',\n  'create': '/add'\n};\nvar SUPPORTED_MATRIX_SETS = [\n  'EPSG:4326',\n  'EPSG:4258'\n];\n\nfunction WMSService () {\n  this._wms_url = null;\n}\n\nWMSService.prototype.generateURL = function (opts) {\n  var req = PROXY_URL + METHOD_TO_URL[opts.method];\n  var url = this._wms_url;\n\n  var parser = document.createElement('a');\n\n  parser.href = url;\n\n  var params = parser.search.substr(1).split('&');\n\n  var hasCapabilities = _.find(params, function (p) { return p.toLowerCase().indexOf('request=getcapabilities') !== -1; });\n  var hasService = _.find(params, function (p) { return p.toLowerCase().indexOf('service=wms') !== -1; });\n\n  // If the user didn't provided the necessary params, let's add them\n\n  if (!hasCapabilities) {\n    params.push('request=GetCapabilities');\n  }\n\n  if (!hasService) {\n    params.push('service=WMS');\n  }\n\n  url += '?' + params.join('&');\n  req += '?url=' + encodeURIComponent(url);\n\n  var isWMTS = opts.type === 'wmts';\n  req += '&type=' + (isWMTS ? 'wmts' : 'wms');\n\n  if (opts.method === 'create') {\n    if (opts.layer && opts.srs) {\n      req += '&layer=' + opts.layer;\n      req += '&srs=EPSG:' + opts.srs[0].split(':')[1];\n    } else if (isWMTS && opts.layer && opts.matrix_sets.length > 0) {\n      req += '&layer=' + opts.layer;\n      req += '&matrix_set=' + this.supportedMatrixSets(opts.matrix_sets || [])[0];\n    }\n  }\n\n  return req;\n};\n\nWMSService.prototype.getFetchLayersURL = function () {\n  return this.generateURL({\n    method: 'read'\n  });\n};\n\nWMSService.prototype.saveLayerURL = function (opts) {\n  var createOpts = _.extend({\n    method: 'create'\n  }, opts);\n\n  return this.generateURL(createOpts);\n};\n\nWMSService.prototype.supportedMatrixSets = function (matrixSets) {\n  return _.intersection(matrixSets, SUPPORTED_MATRIX_SETS);\n};\n\nWMSService.prototype.getProxyTilesURL = function () {\n  return PROXY_TILES;\n};\n\nWMSService.prototype.setUrl = function (url) {\n  this._wms_url = url;\n};\n\nmodule.exports = WMSService;\n","var _ = require('underscore');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar AnalysisOnboardingLauncher = require('builder/components/onboardings/analysis/analysis-launcher');\nvar AnalysisNotifications = require('builder/editor/layers/analysis-views/analysis-notifications');\n\nvar REQUIRED_OPTS = [\n  'diDashboardHelpers',\n  'analysisDefinitionsCollection',\n  'analysisDefinitionNodesCollection',\n  'layerDefinitionsCollection',\n  'onboardings',\n  'userModel',\n  'visDefinitionModel'\n];\n\n/**\n *  Only manage **ANALYSIS NODES** and **ANALYSIS DEFINITION** actions between\n *  Deep-Insights (CARTO.js) and Builder\n *\n */\n\nmodule.exports = {\n\n  track: function (options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n\n    this._analysisDefinitionNodesCollection.each(function (analysisDefinitionNode) {\n      analysisDefinitionNode.queryRowsCollection.on('remove', this._invalidateMap, this);\n    }, this);\n\n    this._analysisDefinitionNodesCollection.on('add', this._onAnalysisDefinitionNodeAdded, this);\n    this._analysisDefinitionNodesCollection.on('change', this._onAnalysisDefinitionNodeChanged, this);\n    this._analysisDefinitionNodesCollection.on('change:id', this._onAnalysisDefinitionNodeIdChanged, this);\n    this._analysisDefinitionNodesCollection.on('remove', this._onAnalysisDefinitionNodeRemoved, this);\n\n    this._analysisDefinitionsCollection.on('add', this._onAnalysisDefinitionAdded, this);\n    this._analysisDefinitionsCollection.on('sync', this._onAnalysisDefinitionSync, this);\n\n    this._analysisDefinitionsCollection.each(this._analyseDefinition, this);\n\n    return this;\n  },\n\n  _onAnalysisDefinitionNodeAdded: function (node) {\n    node.queryRowsCollection.on('remove', this._invalidateMap, this);\n    this.analyseDefinitionNode(node);\n  },\n\n  _onAnalysisDefinitionNodeChanged: function (node) {\n    if (!this._hasUpdatedOnlyNodeAnalysisStatus(node)) {\n      // Only call analyse if there is a non-only-status change\n      this.analyseDefinitionNode(node);\n    }\n  },\n\n  _onAnalysisDefinitionNodeIdChanged: function (node) {\n    if (this._hasUpdatedOnlyNodeAnalysisId(node)) {\n      var analysis = this._diDashboardHelpers.getAnalysisByNodeId(node.previous('id'));\n      if (analysis) {\n        analysis.set('id', node.id);\n      }\n    }\n  },\n\n  _onAnalysisDefinitionNodeRemoved: function (node) {\n    node.queryRowsCollection.off('remove', this._invalidateMap, this);\n    var analysis = this._diDashboardHelpers.getAnalysisByNodeId(node.previous('id'));\n    if (analysis) {\n      analysis.set({avoidNotification: (node && !!node.get('avoidNotification'))}, {silent: true});\n      analysis.remove();\n    }\n  },\n\n  _onAnalysisDefinitionAdded: function (definition) {\n    this._analyseDefinition(definition);\n  },\n\n  _onAnalysisDefinitionSync: function (definition) {\n    this._analyseDefinition(definition);\n  },\n\n  _analyseDefinition: function (definition) {\n    var id = definition.get('node_id');\n    var node = this._analysisDefinitionNodesCollection.get(id);\n    this.analyseDefinitionNode(node);\n  },\n\n  analyseDefinitionNode: function (node) {\n    if (!this._hasUpdatedOnlyNodeAnalysisId(node)) {\n      var attrs = node.toJSON({ skipOptions: true });\n      this._diDashboardHelpers.analyse(attrs);\n\n      this._tryToSetupDefinitionNodesSync();\n    }\n  },\n\n  _hasUpdatedOnlyNodeAnalysisStatus: function (node) {\n    return node.hasChanged('status') && _.size(node.changed) === 1;\n  },\n\n  _hasUpdatedOnlyNodeAnalysisId: function (node) {\n    return node.hasChanged('id') && _.size(node.changed) === 1;\n  },\n\n  _tryToSetupDefinitionNodesSync: function () {\n    // Unfortunately have to try to setup sync until this point, since a node doesn't exist until after analyse call\n    this._analysisDefinitionNodesCollection.each(this._tryToSetupDefinitionNodeSync, this);\n  },\n\n  _tryToSetupDefinitionNodeSync: function (node) {\n    var isCachedAnalysis = this._isCachedAnalysis(node);\n    if (node.__syncSetup && !isCachedAnalysis) return; // only setup once\n\n    var analysis = this._diDashboardHelpers.getAnalysisByNodeId(node.id);\n    var layerDefinition = this._layerDefinitionsCollection.findOwnerOfAnalysisNode(node);\n    if (!analysis) return; // might not exist when method is called, so do nothing to allow retries\n\n    node.__syncSetup = true;\n    node.__initialization = true;\n\n    if (isCachedAnalysis) {\n      AnalysisOnboardingLauncher.launch(analysis.get('type'), node);\n      node.USER_SAVED = false;\n      return;\n    }\n\n    // Don't need to sync source nodes\n    if (analysis.get('type') !== 'source') {\n      AnalysisNotifications.track(analysis, layerDefinition);\n\n      var updateAnalysisQuerySchema = function () {\n        var query = analysis.get('query');\n        var status = analysis.get('status');\n        var error = analysis.get('error');\n\n        node.querySchemaModel.set({\n          status: 'unfetched',\n          query: query,\n          ready: status === 'ready'\n        });\n        node.queryGeometryModel.set({\n          status: 'unfetched',\n          query: query,\n          ready: status === 'ready'\n        });\n\n        node.set({\n          status: status,\n          error: error\n        });\n\n        if (status === 'ready') {\n          if (!node.__initialization) {\n            node.trigger('queryObjectsUpdated', node);\n          }\n\n          node.__initialization = false;\n        }\n      };\n\n      AnalysisOnboardingLauncher.init({\n        onboardings: this._onboardings,\n        userModel: this._userModel,\n        visDefinitionModel: this._visDefinitionModel\n      });\n\n      node.listenTo(analysis, 'change:status', function (model, status) {\n        if (status === 'ready' && node.USER_SAVED) {\n          AnalysisOnboardingLauncher.launch(analysis.get('type'), model);\n          node.USER_SAVED = false;\n        }\n      });\n\n      updateAnalysisQuerySchema();\n\n      node.listenTo(analysis, 'change:query change:status change:error', updateAnalysisQuerySchema);\n      node.listenToOnce(analysis, 'destroy', node.stopListening);\n    } else {\n      node.listenTo(node.querySchemaModel, 'resetDueToAlteredData', this._invalidateMap.bind(this));\n    }\n  },\n\n  _isCachedAnalysis: function (node) {\n    return node.hasChanged('status') && node.get('status') === 'ready' && node.previous('status') === 'launched';\n  },\n\n  _invalidateMap: function () {\n    this._diDashboardHelpers.invalidateMap();\n  }\n};\n","var _ = require('underscore');\n\n/**\n *  Create a class for providing the Deep Insights Helpers necessary\n *  for any implementation within deep-insights-integration.\n */\n\nvar diDashboardHelpers = function (deepInsightsDashboard) {\n  this._deepInsightsDashboard = deepInsightsDashboard;\n  return this;\n};\n\n_.extend(\n  diDashboardHelpers.prototype,\n  {\n    visMap: function () {\n      return this.getMap().map;\n    },\n\n    getMap: function () {\n      return this.getDashboard().getMap();\n    },\n\n    moveCartoDBLayer: function (from, to) {\n      this.visMap().moveCartoDBLayer(from, to);\n    },\n\n    reloadMap: function () {\n      this.getDashboard().reloadMap();\n    },\n\n    invalidateMap: function () {\n      this.getMap().reload();\n    },\n\n    forceResize: function () {\n      this.getDashboard().forceResize();\n    },\n\n    setBounds: function (bounds) {\n      this.getDashboard()._dashboard.vis.map.setBounds(bounds);\n    },\n\n    analyse: function (analysisDefinition) {\n      return this.getMap().analysis.analyse(analysisDefinition);\n    },\n\n    getAnalysisByNodeId: function (nodeId) {\n      return this.getMap().analysis.findNodeById(nodeId);\n    },\n\n    getLayer: function (id) {\n      return this.visMap().getLayerById(id);\n    },\n\n    getLayers: function () {\n      return this.visMap().layers;\n    },\n\n    getWidget: function (id) {\n      return this.getDashboard().getWidget(id);\n    },\n\n    getWidgets: function () {\n      return this.getDashboard().getWidgets();\n    },\n\n    getOverlays: function () {\n      return this.getMap().overlaysCollection;\n    },\n\n    getDashboard: function () {\n      return this._deepInsightsDashboard;\n    }\n  }\n);\n\nmodule.exports = diDashboardHelpers;\n","var $ = require('jquery');\nvar _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar ConfirmationView = require('builder/components/modals/confirmation/modal-confirmation-view');\nvar templateConfirmation = require('./start-edition-confirmation.tpl');\nvar templateEditGeometry = require('./edit-geometry.tpl');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\nvar Notifier = require('builder/components/notifier/notifier');\nvar Router = require('builder/routes/router');\n\nvar EditFeatureOverlay = CoreView.extend({\n\n  MAX_VERTEXES: 1000,\n\n  className: 'CDB-Overlay',\n  type: 'custom',\n\n  events: {\n    'click .js-edit-feature': '_onEditButtonClicked'\n  },\n\n  initialize: function (options) {\n    if (!options.map) throw new Error('map is required');\n    if (!options.mapModeModel) throw new Error('mapModeModel is required');\n    if (!options.modals) throw new Error('modals is required');\n\n    this._map = options.map;\n    this._mapModeModel = options.mapModeModel;\n    this._modals = options.modals;\n\n    this._onEditButtonClicked = this._onEditButtonClicked.bind(this);\n    this.hide = this.hide.bind(this);\n    this.show = this.show.bind(this);\n\n    this._map.on('change:center', this.hide, this);\n    this._map.on('change:zoom', this.hide, this);\n\n    this._position = {\n      x: 0,\n      y: 0\n    };\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    var isEditable = this._isEditable() && !this._isAggregated();\n\n    this.$el.html(templateEditGeometry({\n      isEditable: isEditable,\n      hasAnalyses: this._hasAnalyses(),\n      isCustomQueryApplied: this._isCustomQueryApplied(),\n      isReadOnly: this._isReadOnly(),\n      disabled: this._disabledTooltip()\n    }));\n\n    if (!isEditable) {\n      var tooltip = new TipsyTooltipView({\n        el: this.$('.js-edit-feature'),\n        gravity: 's',\n        offset: 0,\n        title: function () {\n          return $(this).data('tooltip');\n        }\n      });\n      this.addView(tooltip);\n      this.undelegateEvents();\n    } else {\n      this.delegateEvents();\n    }\n\n    return this;\n  },\n\n  _disabledTooltip: function () {\n    var disabledLayerType;\n\n    if (this._hasAnalyses()) {\n      disabledLayerType = _t('editor.edit-feature.analysis');\n    } else if (this._isCustomQueryApplied()) {\n      disabledLayerType = _t('editor.edit-feature.custom-sql');\n    } else if (this._isReadOnly()) {\n      disabledLayerType = _t('editor.edit-feature.sync');\n    } else if (this._isAggregated()) {\n      disabledLayerType = _t('editor.edit-feature.aggregated');\n    }\n\n    return _t('editor.edit-feature.disabled', { disabledLayerType: disabledLayerType });\n  },\n\n  _isEditable: function () {\n    return this._featureDefinition && this._featureDefinition.isEditable();\n  },\n\n  _hasAnalyses: function () {\n    return this._featureDefinition && this._featureDefinition.hasAnalyses();\n  },\n\n  _isCustomQueryApplied: function () {\n    return this._featureDefinition && this._featureDefinition.isCustomQueryApplied();\n  },\n\n  _isReadOnly: function () {\n    return this._featureDefinition && this._featureDefinition.isReadOnly();\n  },\n\n  _isAggregated: function () {\n    return this._featureDefinition && this._featureDefinition.getLayerDefinition().hasAggregatedStyles();\n  },\n\n  hide: function (event) {\n    this.killEvent(event);\n    this.$el.hide();\n  },\n\n  show: function () {\n    this.$el.css({\n      width: '20px',\n      top: this._position.y,\n      left: this._position.x,\n      position: 'absolute'\n    });\n    this.$el.show();\n  },\n\n  setPosition: function (position) {\n    this._position = position;\n  },\n\n  setFeatureDefinition: function (featureDefinition) {\n    this._featureDefinition = featureDefinition;\n  },\n\n  getFeatureDefinition: function () {\n    return this._featureDefinition;\n  },\n\n  _getGeomCount: function (geojson) {\n    var count = 0;\n\n    _.each(geojson.coordinates, function (pol1, i) {\n      _.each(pol1, function (pol2, j) {\n        count = count + pol2.length;\n      });\n    });\n\n    return count;\n  },\n\n  _confirmStopEdition: function () {\n    var self = this;\n\n    this._modals.create(function (modalModel) {\n      return new ConfirmationView({\n        modalModel: modalModel,\n        template: templateConfirmation,\n        runAction: self._startEdition.bind(self)\n      });\n    });\n  },\n\n  _startEdition: function () {\n    // Exit editing feature mode to re-enter this mode again\n    if (this._mapModeModel.isEditingFeatureMode()) {\n      this._mapModeModel.enterViewingMode();\n    }\n    this._mapModeModel.enterEditingFeatureMode(this._featureDefinition);\n    this._featureDefinition && Router.editFeature(this._featureDefinition);\n  },\n\n  _onEditButtonClicked: function (ev) {\n    if (!this._featureDefinition) {\n      Router.goToDefaultRoute();\n      return;\n    }\n\n    this.killEvent(ev);\n    this.hide();\n\n    if (!this._isEditable()) {\n      return false;\n    }\n\n    var notification = Notifier.addNotification({\n      status: 'loading',\n      info: _t('notifications.edit-feature.edit.loading'),\n      closable: false\n    });\n\n    this._featureDefinition && this._featureDefinition.fetch({\n      success: function () {\n        Notifier.removeNotification(notification);\n\n        var geojson = JSON.parse(this._featureDefinition.get('the_geom'));\n\n        if (this._getGeomCount(geojson) > this.MAX_VERTEXES) {\n          this._confirmStopEdition();\n        } else {\n          this._startEdition();\n        }\n      }.bind(this),\n      error: function () {\n        notification.set({\n          status: 'error',\n          info: _t('notifications.edit-feature.edit.error'),\n          closable: true,\n          delay: Notifier.DEFAULT_DELAY\n        });\n      }\n    });\n  }\n});\n\nmodule.exports = EditFeatureOverlay;\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<button class=\"CDB-Attribution-button js-edit-feature\\n  ';\n if (!isEditable) { ;\n__p += 'is-disabled';\n } ;\n__p += '\\n  ';\n if (hasAnalyses) { ;\n__p += 't-hasAnalyses';\n } ;\n__p += '\\n  ';\n if (isCustomQueryApplied) { ;\n__p += 't-isCustomQueryApplied';\n } ;\n__p += '\\n  ';\n if (isReadOnly) { ;\n__p += 't-isReadOnly';\n } ;\n__p += '\" data-tooltip=\"' +\n__e( disabled ) +\n'\">\\n  <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M10 22.91l1.217-3.65 8.924-8.924c.448-.448 1.177-.448 1.624 0l.81.81c.448.448.448 1.175 0 1.623l-8.923 8.924L10 22.91zm10.952-8.518l-2.434-2.434 2.434 2.434zm-7.3 7.302l-2.435-2.434 2.434 2.434z\" stroke=\"#636D72\" fill=\"none\" fill-rule=\"evenodd\"/></svg>\\n</button>\\n';\n\n}\nreturn __p\n}","var $ = require('jquery');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar FeatureDefinitionModel = require('builder/data/feature-definition-model');\nvar AppNotifications = require('builder/app-notifications');\n\nvar REQUIRED_OPTS = [\n  'configModel',\n  'diDashboardHelpers',\n  'editFeatureOverlay',\n  'layerDefinitionsCollection',\n  'mapModeModel',\n  'userModel'\n];\n\n/**\n *  Only manage **FEATURES** actions or behaviours between Deep-Insights\n *  (CARTO.js) and Builder\n *\n */\n\nmodule.exports = {\n\n  track: function (options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n    var visMap = this._diDashboardHelpers.visMap();\n    var mapModel = this._diDashboardHelpers.getMap();\n\n    this._mapModeModel.on('change:mode', this._onMapModeChanged, this);\n    this._mapModeModel.on('reloadVis', function () {\n      this._diDashboardHelpers.invalidateMap();\n    }, this);\n\n    mapModel.on('click', this._onFeatureOut, this);\n    visMap.on('featureClick', this._onFeatureClicked, this);\n    visMap.on('featureError', this._onFeatureError, this);\n  },\n\n  _onFeatureError: function (error) {\n    if (error && error.type === 'limit') {\n      AppNotifications.addNotification({\n        type: 'interactivity'\n      });\n    }\n  },\n\n  _onFeatureOut: function () {\n    this._editFeatureOverlay.hide();\n  },\n\n  _onFeatureClicked: function (event) {\n    var layerId = event.layer.id;\n    var featureId = event.feature.cartodb_id;\n    var position = event.position;\n    var layerDefinitionModel = this._layerDefinitionsCollection.get(layerId);\n    var isFeatureBeingEdited = false;\n\n    var featureDefinition = new FeatureDefinitionModel({\n      cartodb_id: featureId\n    }, {\n      configModel: this._configModel,\n      layerDefinitionModel: layerDefinitionModel,\n      userModel: this._userModel\n    });\n\n    if (this._mapModeModel.isEditingFeatureMode()) {\n      var editingFeatureDefinitionModel = this._mapModeModel.getFeatureDefinition();\n      isFeatureBeingEdited = featureDefinition.isEqual(editingFeatureDefinitionModel);\n    }\n\n    if (!isFeatureBeingEdited) {\n      this._editFeatureOverlay.setPosition(position);\n      this._editFeatureOverlay.setFeatureDefinition(featureDefinition);\n      this._editFeatureOverlay\n        .render()\n        .show();\n    }\n  },\n\n  _onMapModeChanged: function (mapModeModel) {\n    var map = this._diDashboardHelpers.visMap();\n    var featureDefinition;\n    var geometry;\n\n    // VIEWING MODE\n    if (mapModeModel.isViewingMode()) {\n      map.stopDrawingGeometry();\n      map.stopEditingGeometry();\n    }\n\n    // DRAWING FEATURES\n    if (mapModeModel.isDrawingFeatureMode()) {\n      featureDefinition = mapModeModel.getFeatureDefinition();\n      if (featureDefinition.isPoint()) {\n        geometry = map.drawPoint();\n      } else if (featureDefinition.isLine()) {\n        geometry = map.drawPolyline();\n      } else if (featureDefinition.isPolygon()) {\n        geometry = map.drawPolygon();\n      }\n\n      if (!geometry) {\n        throw new Error(\"couldn't get geometry for feature of type \" + featureDefinition.get('type'));\n      }\n    }\n\n    // EDITING FEATURES\n    if (mapModeModel.isEditingFeatureMode()) {\n      featureDefinition = mapModeModel.getFeatureDefinition();\n      var geojson = JSON.parse(featureDefinition.get('the_geom'));\n      geometry = map.editGeometry(geojson);\n    }\n\n    if (featureDefinition && geometry) {\n      this._bindGeometryToFeatureDefinition(geometry, featureDefinition);\n      featureDefinition.on('save', function () {\n        if (featureDefinition.hasBeenChangedAfterLastSaved('the_geom') || featureDefinition.hasBeenChangedAfterLastSaved('cartodb_id')) {\n          this._diDashboardHelpers.invalidateMap();\n          geometry.setCoordinatesFromGeoJSON(JSON.parse(featureDefinition.get('the_geom')));\n        }\n      }, this);\n      featureDefinition.on('remove', function () {\n        this._diDashboardHelpers.invalidateMap();\n      }, this);\n    }\n  },\n\n  _bindGeometryToFeatureDefinition: function (geometry, featureDefinition) {\n    geometry.on('change', function () {\n      if (geometry.isComplete()) {\n        $('.js-editOverlay').fadeOut(200, function () {\n          $('.js-editOverlay').remove();\n        });\n\n        var geojson = geometry.toGeoJSON();\n        geojson = geojson.geometry || geojson;\n        featureDefinition.set({\n          the_geom: JSON.stringify(geojson)\n        });\n        featureDefinition.trigger('updateFeature');\n      }\n    });\n  }\n};\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar LegendManager = require('./legend-manager');\nvar linkLayerInfowindow = require('./link-layer-infowindow');\nvar linkLayerTooltip = require('./link-layer-tooltip');\nvar layerTypesAndKinds = require('builder/data/layer-types-and-kinds');\nvar Notifier = require('builder/components/notifier/notifier');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar NotificationErrorMessageHandler = require('builder/editor/layers/notification-error-message-handler');\nvar basemapProvidersAndCategories = require('builder/data/basemap-providers-and-categories');\n\nvar REQUIRED_OPTS = [\n  'analysisDefinitionNodesCollection',\n  'editFeatureOverlay',\n  'layerDefinitionsCollection',\n  'legendDefinitionsCollection',\n  'diDashboardHelpers'\n];\n\nvar LAYER_TYPE_TO_LAYER_CREATE_METHOD = {\n  'cartodb': 'createCartoDBLayer',\n  'gmapsbase': 'createGMapsBaseLayer',\n  'plain': 'createPlainLayer',\n  'tiled': 'createTileLayer',\n  'torque': 'createTorqueLayer',\n  'wms': 'createWMSLayer'\n};\n\nvar CARTODBJS_TO_CARTODB_ATTRIBUTE_MAPPINGS = {\n  'layer_name': ['table_name_alias', 'table_name']\n};\n\nvar BLACKLISTED_LAYER_DEFINITION_ATTRS = {\n  'all': [ 'letter', 'kind' ],\n  'Tiled': [ 'category', 'selected', 'highlighted' ],\n  'CartoDB': [ 'color', 'letter' ],\n  'torque': [ 'color', 'letter' ]\n};\n\n/**\n *  Only manage **LAYER** actions between Deep-Insights (CARTO.js) and Builder\n *\n */\n\nvar LayersIntegration = {\n\n  track: function (options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n\n    this._visMap = this._diDashboardHelpers.visMap();\n\n    this._layerDefinitionsCollection.each(this._linkLayerErrors, this);\n    this._layerDefinitionsCollection.on('add', this._onLayerDefinitionAdded, this);\n    this._layerDefinitionsCollection.on('sync', this._onLayerDefinitionSynced, this);\n    this._layerDefinitionsCollection.on('change', this._onLayerDefinitionChanged, this);\n    this._layerDefinitionsCollection.on('remove', this._onLayerDefinitionRemoved, this);\n    this._layerDefinitionsCollection.on('layerMoved', this._onLayerDefinitionMoved, this);\n    this._layerDefinitionsCollection.on('baseLayerChanged', this._onBaseLayerChanged, this);\n\n    this._layerDefinitionsCollection.each(function (layerDefModel) {\n      LegendManager.track(layerDefModel);\n\n      linkLayerInfowindow(layerDefModel, this._visMap);\n      linkLayerTooltip(layerDefModel, this._visMap);\n\n      if (layerDefModel.has('source')) {\n        this._resetStylesIfNoneApplied(layerDefModel);\n      }\n    }, this);\n\n    // In order to sync layer selector and layer visibility\n    this._diDashboardHelpers.getLayers().on('change:visible', function (layer, visible) {\n      var layerDefModel = this._layerDefinitionsCollection.findWhere({id: layer.id});\n      if (layerDefModel) {\n        if (layerDefModel.get('visible') !== visible) {\n          layerDefModel.save({visible: visible});\n        }\n      }\n    }, this);\n\n    return this;\n  },\n\n  _onLayerDefinitionRemoved: function (m) {\n    if (!m.isNew()) {\n      var layer = this._diDashboardHelpers.getLayer(m.id);\n      layer && layer.remove();\n    }\n  },\n\n  _onLayerDefinitionMoved: function (m, from, to) {\n    this._diDashboardHelpers.moveCartoDBLayer(from, to);\n  },\n\n  _createLayer: function (layerDefModel, options) {\n    options = options || {};\n    var attrs = JSON.parse(JSON.stringify(layerDefModel.attributes)); // deep clone\n    attrs = this._adaptAttrsToCDBjs(layerDefModel.get('type'), attrs);\n\n    // create the legends for the new layer\n    var legends = this._legendDefinitionsCollection.findByLayerDefModel(layerDefModel);\n    if (legends.length > 0) {\n      attrs.legends = _.map(legends, function (legend) {\n        return legend.toJSON();\n      });\n    }\n\n    var createMethodName = LAYER_TYPE_TO_LAYER_CREATE_METHOD[attrs.type.toLowerCase()];\n    if (!createMethodName) throw new Error('no create method name found for type ' + attrs.type);\n\n    if (attrs.source) {\n      // Make sure the analysis is created first\n      var nodeDefModel = this._analysisDefinitionNodesCollection.get(attrs.source);\n      // Dependency with another integration\n      this.trigger('onLayerCreation', nodeDefModel);\n      // Set analysis model instead of the string ID source\n      attrs.source = this._diDashboardHelpers.getAnalysisByNodeId(attrs.source);\n    }\n\n    var layerPosition = this._layerDefinitionsCollection.indexOf(layerDefModel);\n\n    this._visMap[createMethodName](attrs, _.extend({\n      at: layerPosition\n    }, options));\n\n    linkLayerInfowindow(layerDefModel, this._visMap);\n    linkLayerTooltip(layerDefModel, this._visMap);\n    LegendManager.track(layerDefModel);\n\n    this._linkLayerErrors(layerDefModel);\n  },\n\n  _linkLayerErrors: function (m) {\n    var layer = this._diDashboardHelpers.getLayer(m.id);\n    if (layer) {\n      if (layer.get('error')) {\n        this._setLayerError(m, layer.get('error'));\n      }\n      layer.on('change:error', function (model, cdbError) {\n        this._setLayerError(m, cdbError);\n      }, this);\n    }\n  },\n\n  _setLayerError: function (layerDefinitionModel, cdbError) {\n    var notification = Notifier.getNotification(layerDefinitionModel.id);\n    var mainErrorMessage = layerDefinitionModel.getName() + ': ' + (cdbError && cdbError.message);\n\n    if (!cdbError) {\n      layerDefinitionModel.unset('error');\n      notification && Notifier.removeNotification(notification);\n      return;\n    }\n\n    var errorMessage = NotificationErrorMessageHandler.extractError(mainErrorMessage);\n\n    if (notification) {\n      notification.update({\n        status: errorMessage.type,\n        info: errorMessage.message\n      });\n    } else {\n      Notifier.addNotification({\n        id: layerDefinitionModel.id,\n        status: errorMessage.type,\n        closable: true,\n        button: false,\n        info: errorMessage.message\n      });\n    }\n\n    if (cdbError.subtype === 'turbo-carto') {\n      var line;\n      try {\n        line = cdbError.context.source.start.line;\n      } catch (error) {}\n\n      layerDefinitionModel.set('error', {\n        type: cdbError.type,\n        subtype: cdbError.subtype,\n        line: line,\n        message: cdbError.message\n      });\n    } else if (errorMessage) {\n      layerDefinitionModel.set('error', {\n        type: errorMessage.type,\n        subtype: cdbError.subtype,\n        message: errorMessage.message\n      });\n    }\n  },\n\n  _onLayerDefinitionAdded: function (m, c, opts) {\n    // Base and labels layers are synced in a separate method\n    if (!layerTypesAndKinds.isTypeDataLayer(m.get('type'))) {\n      return;\n    }\n\n    // If added but not yet saved, postpone the creation until persisted (see sync listener)\n    if (!m.isNew()) {\n      if (!this._diDashboardHelpers.getLayer(m.id)) {\n        this._createLayer(m);\n      } else {\n        // we need to sync model positions\n        this._tryUpdateLayerPosition(m);\n      }\n    }\n  },\n\n  _tryUpdateLayerPosition: function (m) {\n    var builderPosition = this._layerDefinitionsCollection.indexOf(m);\n    var cdbLayer = this._diDashboardHelpers.getLayer(m.id);\n    var cdbPosition;\n\n    if (cdbLayer) {\n      cdbPosition = this._diDashboardHelpers.getLayers().indexOf(cdbLayer);\n    }\n\n    var indexChanges = m.isDataLayer() && cdbPosition > 0 && builderPosition > 0 && builderPosition !== cdbPosition;\n\n    if (indexChanges) {\n      this._diDashboardHelpers.moveCartoDBLayer(cdbPosition, builderPosition);\n    }\n  },\n\n  _onLayerDefinitionSynced: function (m) {\n    // Base and labels layers are synced in a separate method\n    if (!layerTypesAndKinds.isTypeDataLayer(m.get('type'))) {\n      return;\n    }\n\n    if (!this._diDashboardHelpers.getLayer(m.id)) {\n      this._createLayer(m);\n    }\n  },\n\n  _onLayerDefinitionChanged: function (layerDefinitionModel, changedAttributes) {\n    var attrs = layerDefinitionModel.changedAttributes();\n    var attrsNames = _.keys(attrs);\n\n    // Base and labels layers are synced in a separate method\n    if (!layerTypesAndKinds.isTypeDataLayer(layerDefinitionModel.get('type'))) {\n      return;\n    }\n\n    // return if only the 'error' attribute has changed (no need to sync anything)\n    if (attrsNames.length === 1 && attrsNames[0] === 'error') {\n      return;\n    }\n\n    var layer = this._diDashboardHelpers.getLayer(layerDefinitionModel.id);\n    if (!layerDefinitionModel.isNew()) {\n      if (!layer) {\n        this._createLayer(layerDefinitionModel);\n        return;\n      }\n\n      if (attrs.type) {\n        layer.remove();\n        this._createLayer(layerDefinitionModel);\n      } else {\n        if (layerDefinitionModel.get('source') && !layer.get('source')) {\n          attrs.source = layerDefinitionModel.get('source');\n        }\n        var onlySourceChanged = attrs.source && _.keys(attrs).length === 1;\n        if (attrs.source) {\n          // Set analysis model instead of the string ID source\n          attrs.source = this._diDashboardHelpers.getAnalysisByNodeId(attrs.source);\n          // Set source with setSource method\n          layer.setSource(attrs.source, { silent: !onlySourceChanged });\n          // Remove source form attrs to avoid updating source\n          delete attrs.source;\n        }\n        attrs = this._adaptAttrsToCDBjs(layerDefinitionModel.get('type'), attrs);\n        layer.update(attrs, { silent: onlySourceChanged });\n      }\n      // Find an animated layer if exists\n      var animatedLayerDefinitionModel = this._layerDefinitionsCollection.find(function (model) {\n        return model && model.styleModel && model.styleModel.get('type') === 'animation';\n      });\n      // Dependency with widgets-integration\n      // If there is an animated layer, use that layer, else use the provided layer\n      this.trigger('onLayerChanged', animatedLayerDefinitionModel || layerDefinitionModel);\n    }\n  },\n\n  _onBaseLayerChanged: function () {\n    var baseLayerDefinition = this._layerDefinitionsCollection.getBaseLayer();\n    var newBaseLayerAttrs = baseLayerDefinition.changedAttributes();\n\n    var newBaseLayerType = baseLayerDefinition.get('type');\n    var newMapProvider = basemapProvidersAndCategories.getProvider(newBaseLayerType);\n    var mapProviderChanged = false;\n    if (baseLayerDefinition.hasChanged('type')) {\n      var previousBaseLayerType = baseLayerDefinition.previous('type');\n      var previousMapProvider = basemapProvidersAndCategories.getProvider(previousBaseLayerType);\n      mapProviderChanged = previousMapProvider !== newMapProvider;\n    }\n\n    // If the map provider has changed (eg: Leaflet -> Google Maps), we add/update/remove base and\n    // labels layers silently so that CartoDB.js doesn't pick up those changes and tries to add/update/remove\n    // layers until the new map provider has been set\n    var handleLayersSilently = mapProviderChanged;\n\n    // Base layer\n    var cdbjsLayer = this._diDashboardHelpers.getLayer(baseLayerDefinition.id);\n\n    // If the type of base layer has changed. eg: Tiled -> Plain\n    if (newBaseLayerAttrs.type) {\n      cdbjsLayer.remove({ silent: handleLayersSilently });\n      this._createLayer(baseLayerDefinition, { silent: handleLayersSilently });\n    } else {\n      cdbjsLayer.update(this._adaptAttrsToCDBjs(baseLayerDefinition.get('type'), newBaseLayerAttrs), {\n        silent: handleLayersSilently\n      });\n    }\n\n    // Labels layer\n    var labelsLayerDefinition = this._layerDefinitionsCollection.getLabelsLayer();\n    var cdbjsTopLayer = this._diDashboardHelpers.getLayers().last();\n    var cdbjsHasLabelsLayer = cdbjsTopLayer.get('type') === 'Tiled';\n\n    if (labelsLayerDefinition) {\n      if (cdbjsHasLabelsLayer) {\n        var changedAttrs = labelsLayerDefinition.changedAttributes();\n        if (changedAttrs) {\n          cdbjsTopLayer.update(this._adaptAttrsToCDBjs(labelsLayerDefinition.get('type'), changedAttrs), {\n            silent: handleLayersSilently\n          });\n        }\n      } else {\n        this._createLayer(labelsLayerDefinition, { silent: handleLayersSilently });\n      }\n    } else if (cdbjsHasLabelsLayer) {\n      cdbjsTopLayer.remove({ silent: handleLayersSilently });\n    }\n\n    // Map provider\n    this._visMap.set('provider', newMapProvider);\n\n    if (handleLayersSilently) {\n      // Reload map if everything (previously) was done silently\n      this._diDashboardHelpers.reloadMap();\n    }\n\n    // Render again the edit-feature-overlay, in order to\n    // decide if delegate or not events\n    this._editFeatureOverlay.render();\n\n    // Dependency with map-integration class\n    this.trigger('onBaseLayerChanged');\n  },\n\n  _resetStylesIfNoneApplied: function (layerDefModel) {\n    var nodeDefModel = layerDefModel.getAnalysisDefinitionNodeModel();\n    var nodeModel = this._diDashboardHelpers.getAnalysisByNodeId(layerDefModel.get('source'));\n    var isAnalysisNode = nodeModel && nodeModel.get('type') !== 'source';\n    var isDone = nodeModel && nodeModel.isDone();\n    var queryGeometryModel = nodeDefModel && nodeDefModel.queryGeometryModel;\n    var styleModel = layerDefModel.styleModel;\n\n    if (isAnalysisNode && styleModel.hasNoneStyles() && isDone) {\n      var simpleGeom = queryGeometryModel.get('simple_geom');\n\n      var applyDefaultStyles = function () {\n        simpleGeom = queryGeometryModel.get('simple_geom');\n        styleModel.setDefaultPropertiesByType('simple', simpleGeom);\n      };\n\n      if (!simpleGeom) {\n        queryGeometryModel.once('change:simple_geom', applyDefaultStyles, this);\n        queryGeometryModel.fetch();\n      } else {\n        applyDefaultStyles();\n      }\n    }\n  },\n\n  _adaptAttrsToCDBjs: function (layerType, attrs) {\n    attrs = _.omit(attrs, BLACKLISTED_LAYER_DEFINITION_ATTRS['all'], BLACKLISTED_LAYER_DEFINITION_ATTRS[layerType]);\n    _.each(CARTODBJS_TO_CARTODB_ATTRIBUTE_MAPPINGS, function (cdbAttrs, cdbjsAttr) {\n      _.each(cdbAttrs, function (cdbAttr) {\n        if (attrs[cdbAttr] && !attrs[cdbjsAttr]) {\n          attrs[cdbjsAttr] = attrs[cdbAttr];\n        }\n      });\n    });\n\n    return attrs;\n  }\n};\n\n_.extend(LayersIntegration, Backbone.Events);\n\nmodule.exports = LayersIntegration;\n","var _ = require('underscore');\nvar LegendFactory = require('builder/editor/layers/layer-content-views/legend/legend-factory');\nvar LegendColorHelper = require('builder/editor/layers/layer-content-views/legend/form/legend-color-helper');\nvar LegendTypes = require('builder/editor/layers/layer-content-views/legend/legend-types');\n\nvar StyleHelper = require('builder/helpers/style');\nvar DEFAULT_BUBBLES_COLOR = '#999999';\n\nfunction _createLegendForAnimation (layerDefModel, color) {\n  LegendFactory.removeLegend(layerDefModel, LegendTypes.CATEGORY, function () {\n    LegendFactory.removeLegend(layerDefModel, LegendTypes.CHOROPLETH, function () {\n      LegendFactory.removeLegend(layerDefModel, LegendTypes.CUSTOM_CHOROPLETH, function () {\n        var items = StyleHelper.getStyleCategories(layerDefModel.styleModel);\n        LegendFactory.createLegend(layerDefModel, LegendTypes.TORQUE, {\n          title: color.attribute,\n          items: items\n        });\n      });\n    });\n  });\n}\n\nfunction _createLegendForHeatmap (layerDefModel) {\n  LegendFactory.removeLegend(layerDefModel, LegendTypes.CATEGORY, function () {\n    LegendFactory.removeLegend(layerDefModel, LegendTypes.TORQUE, function () {\n      LegendFactory.removeLegend(layerDefModel, LegendTypes.CHOROPLETH, function () {\n        var colors = StyleHelper.getHeatmapColors(layerDefModel);\n        LegendFactory.createLegend(layerDefModel, LegendTypes.CUSTOM_CHOROPLETH, {\n          title: _t('editor.legend.pixel-title'),\n          colors: colors\n        });\n      });\n    });\n  });\n}\n\nfunction _createCategoryLegend (layerDefModel, color) {\n  LegendFactory.removeLegend(layerDefModel, LegendTypes.CHOROPLETH, function () {\n    LegendFactory.removeLegend(layerDefModel, LegendTypes.CUSTOM_CHOROPLETH, function () {\n      if (layerDefModel.isAutoStyleApplied()) {\n        LegendFactory.removeLegend(layerDefModel, LegendTypes.CATEGORY);\n      } else {\n        LegendFactory.createLegend(layerDefModel, LegendTypes.CATEGORY, { title: color.attribute });\n      }\n    });\n  });\n}\n\nfunction _createChoroplethLegend (layerDefModel, color) {\n  LegendFactory.removeLegend(layerDefModel, LegendTypes.CATEGORY, function () {\n    LegendFactory.removeLegend(layerDefModel, LegendTypes.TORQUE, function () {\n      LegendFactory.removeLegend(layerDefModel, LegendTypes.CUSTOM_CHOROPLETH, function () {\n        if (layerDefModel.isAutoStyleApplied()) {\n          LegendFactory.removeLegend(layerDefModel, LegendTypes.CHOROPLETH);\n        } else {\n          LegendFactory.createLegend(layerDefModel, LegendTypes.CHOROPLETH, { title: color.attribute });\n        }\n      });\n    });\n  });\n}\n\nfunction _createColorLegend (layerDefModel, color) {\n  var styleModel = layerDefModel.styleModel;\n\n  if (styleModel.isAnimation()) {\n    _createLegendForAnimation(layerDefModel, color);\n  } else if (styleModel.isHeatmap()) {\n    _createLegendForHeatmap(layerDefModel);\n  } else {\n    var usesCategory = (color && color.quantification === 'category');\n    var attributeTypeIsString = (color.attribute_type && color.attribute_type === 'string');\n    var attributeTypeIsBoolean = (color.attribute_type && color.attribute_type === 'boolean');\n\n    if (usesCategory || attributeTypeIsString || attributeTypeIsBoolean) {\n      _createCategoryLegend(layerDefModel, color);\n    } else {\n      _createChoroplethLegend(layerDefModel, color);\n    }\n  }\n}\n\nfunction _updateSizeLegend (layerDefModel, size, color) {\n  if (size && size.attribute !== undefined) {\n    var attrs = { title: size.attribute };\n\n    if (!layerDefModel.isAutoStyleApplied()) {\n      // Do not apply the fill color of an autostyle ramp\n      attrs.fillColor = color && (color.fixed || color.range)\n        ? LegendColorHelper.getBubbles(color).color.fixed\n        : DEFAULT_BUBBLES_COLOR;\n    }\n\n    var hasBubbleLegend = LegendFactory.find(layerDefModel, LegendTypes.BUBBLE);\n    if (hasBubbleLegend) {\n      LegendFactory.createLegend(layerDefModel, LegendTypes.BUBBLE, attrs);\n    }\n  } else {\n    LegendFactory.removeLegend(layerDefModel, LegendTypes.BUBBLE);\n  }\n}\n\nfunction _updateColorLegend (layerDefModel, color) {\n  var colorLegendTypes = [LegendTypes.CATEGORY, LegendTypes.TORQUE, LegendTypes.CHOROPLETH, LegendTypes.CUSTOM_CHOROPLETH];\n\n  if (color && color.attribute !== undefined) {\n    var hasSomeLegend = [];\n\n    _.each(colorLegendTypes, function (legendType) {\n      var hasLegend = LegendFactory.find(layerDefModel, legendType);\n      if (hasLegend) {\n        hasSomeLegend.push(hasLegend);\n      }\n    });\n\n    var hasCustomLegend = LegendFactory.find(layerDefModel, LegendTypes.CUSTOM);\n    if (!hasCustomLegend && hasSomeLegend.length) {\n      _createColorLegend(layerDefModel, color);\n    }\n  } else {\n    _.each(colorLegendTypes, function (legendType) {\n      LegendFactory.removeLegend(layerDefModel, legendType);\n    });\n  }\n}\n\nvar onChange = function (layerDefModel) {\n  var color = StyleHelper.getColor(layerDefModel.styleModel);\n  var size = StyleHelper.getSize(layerDefModel.styleModel);\n\n  if (color == null && size == null) return;\n\n  if (LegendFactory.isEnabledType('size')) {\n    _updateSizeLegend(layerDefModel, size, color);\n  }\n\n  if (LegendFactory.isEnabledType('color')) {\n    _updateColorLegend(layerDefModel, color);\n  }\n};\n\nmodule.exports = {\n  track: function (layerDefModel) {\n    var onStyleChange = function () {\n      onChange(layerDefModel);\n    };\n\n    var styleModel = layerDefModel.styleModel;\n\n    layerDefModel.on('change:cartocss', onChange);\n    if (styleModel) {\n      styleModel.on('style:update', onStyleChange);\n\n      // For torque legends, for agreggations with the same range, there is no change on the cartocss\n      // so we need to force the onChange for these.\n      styleModel.on('change', function () {\n        var hasChangedCartocss = layerDefModel.hasChanged('cartocss');\n\n        if (!hasChangedCartocss && styleModel.isAnimation()) {\n          onChange(layerDefModel);\n        }\n      });\n    }\n\n    layerDefModel.on('destroy', function () {\n      layerDefModel.off('change:cartocss', onChange);\n      styleModel && styleModel.off('style:update', onStyleChange);\n    });\n  }\n};\n","var checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'diDashboardHelpers',\n  'legendDefinitionsCollection'\n];\n\n/**\n *  Only manage **LEGENDS** actions between Deep-Insights (CARTO.js) and Builder\n *\n */\n\nmodule.exports = {\n\n  track: function (options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n\n    this._legendDefinitionsCollection.on('add', this._onLegendDefinitionAdded, this);\n    this._legendDefinitionsCollection.on('change', this._onLegendDefinitionChanged, this);\n    this._legendDefinitionsCollection.on('remove', this._onLegendDefinitionRemoved, this);\n\n    return this;\n  },\n\n  _onLegendDefinitionAdded: function (m) {\n    var layerDefModel = m.layerDefinitionModel;\n    var layer = this._diDashboardHelpers.getLayer(layerDefModel.id);\n    var type = m.get('type');\n    var legend;\n    if (layer && layer.legends) {\n      legend = layer.legends[type];\n      if (legend) {\n        legend.reset();\n        legend.set(m.getAttributes());\n        legend.show();\n      }\n    }\n  },\n\n  _onLegendDefinitionRemoved: function (m) {\n    var layerDefModel = m.layerDefinitionModel;\n    var layer = this._diDashboardHelpers.getLayer(layerDefModel.id);\n    var type = m.get('type');\n    var legend;\n    if (layer && layer.legends) {\n      legend = layer.legends[type];\n      legend && legend.hide();\n    }\n  },\n\n  _onLegendDefinitionChanged: function (m) {\n    var layerDefModel = m.layerDefinitionModel;\n    var layer = this._diDashboardHelpers.getLayer(layerDefModel.id);\n    var type = m.get('type');\n    var legend;\n    if (layer && layer.legends) {\n      legend = layer.legends[type];\n      if (legend) {\n        legend.reset();\n        legend.set(m.getAttributes());\n      }\n    }\n  }\n};\n","var infowindowNoneTemplate = require('builder/mustache-templates/infowindows/infowindow_none.tpl');\n\nmodule.exports = function linkLayerInfowindow (layerDef, visMap) {\n  if (!layerDef.infowindowModel) return;\n\n  function updateInfowindow (infowindowModel) {\n    var attrs = JSON.parse(JSON.stringify(infowindowModel.attributes));\n\n    if (infowindowModel.isEmptyTemplate()) {\n      var node = layerDef.getAnalysisDefinitionNodeModel();\n\n      var cartodb_id = node && node.querySchemaModel.columnsCollection.find(function (m) {\n        return m.get('name') === 'cartodb_id';\n      });\n\n      if (cartodb_id) {\n        attrs.fields = [{\n          name: 'cartodb_id',\n          title: true,\n          position: 0\n        }];\n\n        attrs.template = infowindowNoneTemplate({\n          title: _t('editor.layers.infowindow.no-fields'),\n          subtitle: _t('editor.layers.infowindow.select-fields')\n        });\n      }\n    }\n\n    var infowindow = visMap.getLayerById(layerDef.id).infowindow;\n    // some layers like basemaps, torque, or aggregated don't have infowindows so skip update\n    if (infowindow) {\n      infowindow.update(attrs);\n    }\n  }\n\n  function onChange (infowindowModel) {\n    updateInfowindow(infowindowModel);\n  }\n\n  updateInfowindow(layerDef.infowindowModel);\n\n  layerDef.infowindowModel.bind('change', onChange);\n\n  layerDef.bind('destroy', function () {\n    layerDef.infowindowModel.unbind('change', onChange);\n  });\n};\n","module.exports = function linkLayerTooltip (layerDef, visMap) {\n  if (!layerDef.tooltipModel) return;\n\n  function onChange (tooltipModel) {\n    var attrs = JSON.parse(JSON.stringify(tooltipModel.attributes));\n    var tooltip = visMap.getLayerById(layerDef.id).tooltip;\n    // some layers like basemaps, torque, or aggregated don't have infowindows\n    // so skip update\n    tooltip && tooltip.update(attrs);\n  }\n\n  var tooltipModel = layerDef.tooltipModel;\n  if (tooltipModel.get('template_name')) {\n    tooltipModel.setTemplate(tooltipModel.get('template_name'));\n  }\n\n  tooltipModel.bind('change', onChange);\n\n  layerDef.bind('destroy', function () {\n    tooltipModel.unbind('change', onChange);\n  });\n};\n","var _ = require('underscore');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar VisNotifications = require('builder/vis-notifications');\nvar AppNotifications = require('builder/app-notifications');\n\nvar REQUIRED_OPTS = [\n  'diDashboardHelpers',\n  'editorModel',\n  'mapDefinitionModel',\n  'stateDefinitionModel',\n  'visDefinitionModel'\n];\n\n/**\n *  Only manage **MAP**, **STATE** and **VIS** actions between Deep-Insights (CARTO.js) and Builder\n *\n */\n\nmodule.exports = {\n\n  track: function (options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n\n    this._map = this._diDashboardHelpers.getMap();\n    this._vis = this._diDashboardHelpers.visMap();\n\n    this._mapDefinitionModel.on('change:minZoom change:maxZoom', _.debounce(this._onMinMaxZoomChanged.bind(this), 300), this);\n    this._mapDefinitionModel.on('change:scrollwheel', this._onScrollWheelChanged, this);\n    this._mapDefinitionModel.on('change:legends', this._onLegendsChanged, this);\n    this._mapDefinitionModel.on('change:layer_selector', this._onLayerSelectorChanged, this);\n\n    var saveStateDefinition = _.debounce(this._saveStateDefinition.bind(this), 500);\n    this._diDashboardHelpers.getDashboard().onStateChanged(saveStateDefinition);\n    this._stateDefinitionModel.on('boundsSet', this._onBoundsSet, this);\n\n    this._vis.on('mapViewSizeChanged', this._setMapViewSize, this);\n\n    this._editorModel.on('change:settingsView', this._onEditorSettingsChanged, this);\n    this._editorModel.on('change:edition', this._onEditionChanged, this);\n\n    this._map.on('reload', this._visReload, this);\n    this._map.on('change:error', this._visErrorChange, this);\n    this._vis.on('featureError error:tile error:limit', function (error) {\n      AppNotifications.addNotification(error);\n    }, this);\n\n    VisNotifications.track(this._map);\n\n    this._onScrollWheelChanged();\n\n    // Needed to image export feature\n    this._getVisMetadata();\n    this.setMapConverters();\n    this._setMapViewSize();\n\n    return this;\n  },\n\n  _onMinMaxZoomChanged: function () {\n    var currentZoom = this._vis.get('zoom');\n    var maxZoom = this._mapDefinitionModel.get('maxZoom');\n    var minZoom = this._mapDefinitionModel.get('minZoom');\n\n    this._vis.set({\n      minZoom: minZoom,\n      maxZoom: maxZoom,\n      zoom: Math.min(currentZoom, maxZoom)\n    });\n  },\n\n  _saveStateDefinition: function () {\n    var state = this._diDashboardHelpers.getDashboard().getState();\n    this._stateDefinitionModel.updateState(state);\n    this._getVisMetadata();\n  },\n\n  _onScrollWheelChanged: function () {\n    var scrollwheel = this._mapDefinitionModel.get('scrollwheel');\n    var method = scrollwheel ? 'enableScrollWheel' : 'disableScrollWheel';\n    var map = this._vis;\n    map && map[method] && map[method]();\n  },\n\n  _onLegendsChanged: function () {\n    var legends = this._mapDefinitionModel.get('legends');\n    this._map.settings.set('showLegends', legends);\n  },\n\n  _onLayerSelectorChanged: function () {\n    var layerSelector = this._mapDefinitionModel.get('layer_selector');\n    this._map.settings.set('showLayerSelector', layerSelector);\n  },\n\n  _setMapViewSize: function () {\n    this._mapDefinitionModel.setMapViewSize(\n      this._vis.getMapViewSize()\n    );\n  },\n\n  setMapConverters: function () {\n    var map = this._diDashboardHelpers.visMap();\n    this._mapDefinitionModel.setConverters({\n      pixelToLatLng: map.pixelToLatLng(),\n      latLngToPixel: map.latLngToPixel()\n    });\n  },\n\n  _onBoundsSet: function (bounds) {\n    this._diDashboardHelpers.setBounds(bounds);\n  },\n\n  _onEditorSettingsChanged: function () {\n    var settingsView = this._editorModel.get('settingsView');\n    this._map.settings.set('layerSelectorEnabled', settingsView);\n  },\n\n  _onEditionChanged: function () {\n    this._diDashboardHelpers.forceResize();\n  },\n\n  _getVisMetadata: function () {\n    var vis = this._map;\n    var map = this._diDashboardHelpers.visMap();\n    var layers = this._diDashboardHelpers.getLayers();\n\n    var imageExportMetadata = {\n      zoom: map.get('zoom'),\n      mapType: map.getBaseLayer().get('baseType'),\n      style: layers.at(0).get('style'),\n      attribution: map.get('attribution'),\n      provider: map.get('provider')\n    };\n\n    this._mapDefinitionModel.setImageExportMetadata(imageExportMetadata);\n    this._mapDefinitionModel.setStaticImageURLTemplate(vis.getStaticImageURL.bind(vis));\n  },\n\n  _visReload: function () {\n    this._getVisMetadata();\n    this._visDefinitionModel.trigger('vis:reload');\n    this._visDefinitionModel.recordChange();\n  },\n\n  _visErrorChange: function () {\n    this._visDefinitionModel &&\n      this._visDefinitionModel.trigger('vis:error', this._map.get('error'));\n  }\n};\n","var checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'diDashboardHelpers',\n  'overlayDefinitionsCollection'\n];\n\n/**\n *  Only manage **OVERLAYS** actions between Deep-Insights (CARTO.js) and Builder\n *\n */\n\nmodule.exports = {\n\n  track: function (options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n\n    this._overlayDefinitionsCollection.on('add', this._onOverlayDefinitionAdded, this);\n    this._overlayDefinitionsCollection.on('remove', this._onOverlayDefinitionRemoved, this);\n    return this;\n  },\n\n  _onOverlayDefinitionAdded: function (mdl) {\n    this._diDashboardHelpers.getOverlays().add(mdl.toJSON());\n  },\n\n  _onOverlayDefinitionRemoved: function (mdl) {\n    var collection = this._diDashboardHelpers.getOverlays();\n    var overlay = collection.findWhere({ type: mdl.get('type') });\n    overlay && collection.remove(overlay);\n  }\n};\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"u-flex u-justifyCenter\">\\n  <div class=\"Modal-inner Modal-inner--grid u-flex u-justifyCenter\">\\n    <div class=\"Modal-icon\">\\n      <svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\">\\n        <path d=\"M1 25l2.262-6.787 16.59-16.59c.832-.83 2.185-.83 3.016 0l1.508 1.51c.83.83.83 2.182 0 3.015l-16.59 16.59L1 25zM21.36 9.165L16.835 4.64l4.525 4.525zM7.787 22.738l-4.525-4.525 4.525 4.525z\" stroke=\"#F19243\" fill=\"none\" fill-rule=\"evenodd\"/>\\n      </svg>\\n    </div>\\n    <div>\\n      <h2 class=\" CDB-Text CDB-Size-huge is-light u-bSpace--m\">' +\n__e( _t('components.modals.edit-feature.confirmation.title') ) +\n'</h2>\\n      <p class=\"CDB-Text CDB-Size-medium u-altTextColor\">' +\n__e( _t('components.modals.edit-feature.confirmation.desc') ) +\n'</p>\\n      <ul class=\"Modal-listActions u-flex u-alignCenter\">\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--secondary CDB-Button--big js-cancel\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n              ' +\n__e( _t('components.modals.edit-feature.confirmation.cancel') ) +\n'\\n            </span>\\n          </button>\\n        </li>\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-confirm\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">' +\n__e( _t('components.modals.edit-feature.confirmation.continue') ) +\n'</span>\\n          </button>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar WidgetsService = require('builder/editor/widgets/widgets-service');\nvar WidgetDefinitionModel = require('builder/data/widget-definition-model');\nvar WidgetsNotifications = require('builder/widgets-notifications');\nvar getStylesWithoutAutostyles = require('builder/helpers/styles-without-autostyle');\n\nvar WIDGET_STYLE_PARAMS = [\n  'widget_style_definition',\n  'auto_style_definition',\n  'auto_style_allowed'\n];\n\nvar REQUIRED_OPTS = [\n  'diDashboardHelpers',\n  'layerDefinitionsCollection',\n  'widgetDefinitionsCollection',\n  'analysisDefinitionNodesCollection'\n];\n\n/**\n *  Only manage **WIDGET** actions between Deep-Insights (CARTO.js) and Builder\n *\n */\n\nmodule.exports = {\n\n  track: function (options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n\n    this._getStylesWithoutAutostyles = getStylesWithoutAutostyles();\n\n    this._widgetDefinitionsCollection.on('add', this._onWidgetDefinitionAdded, this);\n    this._widgetDefinitionsCollection.on('sync', this._onWidgetDefinitionSynced, this);\n    this._widgetDefinitionsCollection.on('change', this._onWidgetDefinitionChanged, this);\n    this._widgetDefinitionsCollection.on('destroy', this._onWidgetDefinitionDestroyed, this);\n    this._widgetDefinitionsCollection.on('add remove reset', this._invalidateSize, this);\n    this._widgetDefinitionsCollection.on('setSelected', this._setSelectedWidget, this);\n\n    this._widgetDefinitionsCollection.each(this._onWidgetDefinitionAdded, this);\n\n    WidgetsNotifications.track(this._widgetDefinitionsCollection);\n\n    return this;\n  },\n\n  _invalidateSize: function () {\n    var vis = this._diDashboardHelpers.getMap();\n    vis.invalidateSize();\n  },\n\n  _onWidgetDefinitionAdded: function (model) {\n    var widgetModel = this._diDashboardHelpers.getWidget(model.id);\n    if (widgetModel) {\n      var layerDefModel = this._layerDefinitionsCollection.findWhere({ id: model.get('layer_id') });\n\n      widgetModel.set({\n        show_source: true,\n        show_stats: true,\n        show_options: true,\n        table_name: layerDefModel.get('table_name')\n      });\n\n      this._bindWidgetChanges(widgetModel);\n    }\n  },\n\n  _onWidgetDefinitionSynced: function (model) {\n    var widgetModel = this._diDashboardHelpers.getWidget(model.id);\n    if (!widgetModel) {\n      this._createWidgetModel(model);\n    }\n  },\n\n  _onWidgetAutoStyleColorChanged: function (model) {\n    var isAutoStyleApplied = model.isAutoStyle();\n    var autoStyleInfo = model.getAutoStyle();\n    var layerId = model.layerModel.id;\n    var layerDefModel = this._layerDefinitionsCollection.findWhere({ id: layerId });\n    var nodeDefModel = layerDefModel && layerDefModel.getAnalysisDefinitionNodeModel();\n    var styleModel = layerDefModel && layerDefModel.styleModel;\n    var geometryType = nodeDefModel && nodeDefModel.get('simple_geom');\n\n    if (layerDefModel) {\n      layerDefModel.set({\n        autoStyle: isAutoStyleApplied ? model.id : false,\n        cartocss: autoStyleInfo.cartocss\n      });\n    }\n\n    if (isAutoStyleApplied && styleModel && geometryType) {\n      styleModel.setPropertiesFromAutoStyle({\n        definition: autoStyleInfo.definition,\n        geometryType: geometryType,\n        widgetId: model.id\n      });\n    }\n  },\n\n  _onWidgetAutoStyleChanged: function (model) {\n    var isAutoStyleApplied = model.isAutoStyle();\n    var autoStyleInfo = model.getAutoStyle();\n    var layerId = model.layerModel.id;\n    var layerDefModel = this._layerDefinitionsCollection.findWhere({ id: layerId });\n    var nodeDefModel = layerDefModel && layerDefModel.getAnalysisDefinitionNodeModel();\n    var styleModel = layerDefModel && layerDefModel.styleModel;\n    var onLayerChange = _.debounce(function () {\n      var dontResetStyles = true; // In order to make it more visible\n      model.cancelAutoStyle(dontResetStyles);\n    }, 10);\n\n    var stylesWithoutAutostyles = this._getStylesWithoutAutostyles(layerDefModel);\n\n    if (layerDefModel && nodeDefModel) {\n      if (isAutoStyleApplied) {\n        layerDefModel.set({\n          autoStyle: model.id\n        });\n      }\n    } else {\n      return;\n    }\n\n    if (isAutoStyleApplied) {\n      var geometryType = nodeDefModel.get('simple_geom');\n      styleModel.setPropertiesFromAutoStyle({\n        definition: autoStyleInfo.definition,\n        geometryType: geometryType,\n        widgetId: model.id\n      });\n\n      layerDefModel.set(_.extend(\n        {\n          cartocss: autoStyleInfo.cartocss,\n          cartocss_custom: false\n        },\n        stylesWithoutAutostyles\n      ));\n\n      layerDefModel.once('change:autoStyle change:cartocss', onLayerChange, this);\n    } else {\n      layerDefModel.unbind('change:autoStyle change:cartocss', onLayerChange, this);\n      var autoStyleId = layerDefModel.get('autoStyle');\n\n      if (autoStyleId && autoStyleId === model.id) {\n        styleModel.resetPropertiesFromAutoStyle();\n\n        layerDefModel.set({\n          autoStyle: false,\n          cartocss_custom: layerDefModel.get('previousCartoCSSCustom'),\n          cartocss: layerDefModel.get('previousCartoCSS')\n        });\n\n        // Because we are messing with the autoStyle property on saving,\n        // whenever we disable autoStyle, we save the layer to force\n        // the sync on the cartocss\n        layerDefModel.save();\n      }\n    }\n  },\n\n  _onWidgetCustomAutoStyleColorChanged: function (model) {\n    var isAutoStyleApplied = model.isAutoStyle();\n    var autoStyleInfo = model.getAutoStyle();\n    var layerId = model.layerModel.id;\n    var layerDefModel = this._layerDefinitionsCollection.findWhere({ id: layerId });\n    var nodeDefModel = layerDefModel && layerDefModel.getAnalysisDefinitionNodeModel();\n    var styleModel = layerDefModel && layerDefModel.styleModel;\n\n    if (isAutoStyleApplied) {\n      var geometryType = nodeDefModel.get('simple_geom');\n      styleModel.setPropertiesFromAutoStyle({\n        definition: autoStyleInfo.definition,\n        geometryType: geometryType,\n        widgetId: model.id\n      });\n\n      layerDefModel.set({\n        cartocss: autoStyleInfo.cartocss,\n        cartocss_custom: false\n      }, {silent: true});\n\n      // In order to make legends aware\n      styleModel.trigger('style:update');\n    }\n  },\n\n  _onWidgetDefinitionChanged: function (model) {\n    var widgetModel = this._diDashboardHelpers.getWidget(model.id);\n\n    // Only try to update if there's a corresponding widget model\n    // E.g. the change of type will remove the model and provoke change events, which are not of interest (here),\n    // since the widget model should be re-created for the new type anyway.\n    if (widgetModel) {\n      if (model.hasChanged('type')) {\n        widgetModel.remove();\n        this._createWidgetModel(model);\n      } else {\n        var attrs = this._formatWidgetAttrs(model.changedAttributes(), model);\n        widgetModel.update(attrs);\n      }\n    }\n\n    var colorChanged = !model.get('widget_color_changed') &&\n                        model.changedAttributes() &&\n                        model.changedAttributes().widget_style_definition &&\n                        model.changedAttributes().widget_style_definition.color;\n\n    if (colorChanged) {\n      model.set({ widget_color_changed: true });\n    }\n  },\n\n  _onWidgetDefinitionDestroyed: function (model) {\n    var widgetModel = this._diDashboardHelpers.getWidget(model.id);\n\n    if (widgetModel) {\n      if (widgetModel.isAutoStyle()) {\n        widgetModel.cancelAutoStyle();\n      }\n      this._unbindWidgetChanges(widgetModel);\n      widgetModel.remove();\n    }\n  },\n\n  _setSelectedWidget: function (selectedWidgetId) {\n    var collection = this._diDashboardHelpers.getWidgets();\n\n    collection.forEach(function (widget) {\n      widget.trigger('setDisabled', widget, selectedWidgetId);\n    });\n  },\n\n  _onEditWidget: function (model) {\n    var widgetDefinitionModel = this._widgetDefinitionsCollection.get(model.id);\n    if (widgetDefinitionModel) {\n      WidgetsService.editWidget(widgetDefinitionModel);\n    }\n  },\n\n  _onRemoveWidget: function (model) {\n    var widgetDefinitionModel = this._widgetDefinitionsCollection.get(model.id);\n    if (widgetDefinitionModel) {\n      WidgetsService.removeWidget(widgetDefinitionModel);\n    }\n  },\n\n  _bindWidgetChanges: function (model) {\n    model.bind('editWidget', this._onEditWidget, this);\n    model.bind('removeWidget', this._onRemoveWidget, this);\n    model.bind('customAutoStyle', this._onWidgetCustomAutoStyleColorChanged, this);\n    model.bind('change:autoStyle', this._onWidgetAutoStyleChanged, this);\n    model.bind('change:color', this._onWidgetAutoStyleColorChanged, this);\n  },\n\n  _unbindWidgetChanges: function (model) {\n    model.unbind('editWidget', this._onEditWidget, this);\n    model.unbind('removeWidget', this._onRemoveWidget, this);\n    model.unbind('customAutoStyle', this._onWidgetCustomAutoStyleColorChanged, this);\n    model.unbind('change:autoStyle', this._onWidgetAutoStyleChanged, this);\n    model.unbind('change:color', this._onWidgetAutoStyleColorChanged, this);\n  },\n\n  _createWidgetModel: function (model) {\n    // e.g. 'time-series' => createTimeSeriesWidget\n    var infix = model.get('type').replace(/(^\\w|-\\w)/g, function (match) {\n      return match.toUpperCase().replace('-', '');\n    });\n    var methodName = 'create' + infix + 'Widget';\n\n    var layerId = model.get('layer_id');\n    var layerModel = this._diDashboardHelpers.getLayer(layerId);\n    var layerDefModel = this._layerDefinitionsCollection.findWhere({ id: layerId });\n    var attrs = this._formatWidgetAttrs(model.attributes, model);\n\n    var widgetModel = this._diDashboardHelpers.getDashboard()[methodName](attrs, layerModel);\n\n    if (widgetModel) {\n      widgetModel.set({\n        show_source: true,\n        show_stats: true,\n        show_options: true,\n        table_name: layerDefModel.get('table_name')\n      });\n\n      this._bindWidgetChanges(widgetModel);\n    }\n  },\n\n  /**\n   * Massage some data points to the expected format of deep-insights API\n   */\n  _formatWidgetAttrs: function (changedAttrs, widgetDefinitionModel) {\n    var formattedAttrs = changedAttrs;\n\n    // Source formatting\n    if (_.isString(formattedAttrs.source)) {\n      formattedAttrs = _.omit(formattedAttrs, 'source');\n      formattedAttrs.source = this._diDashboardHelpers.getAnalysisByNodeId(changedAttrs.source);\n    }\n\n    // Widget style or auto style changes\n    var thereIsWidgetStyleChange = _.find(formattedAttrs, function (value, key) {\n      return _.contains(WIDGET_STYLE_PARAMS, key);\n    });\n\n    if (!_.isUndefined(thereIsWidgetStyleChange)) {\n      formattedAttrs = _.omit(formattedAttrs, WIDGET_STYLE_PARAMS);\n      formattedAttrs.style = widgetDefinitionModel.toJSON().style;\n    }\n\n    return formattedAttrs;\n  },\n\n  manageTimeSeriesForTorque: function (model) {\n    function recreateWidget (currentTimeseries, newLayer, animated) {\n      var persistName = currentTimeseries && currentTimeseries.get('title');\n      // This prevents a bug if user has a range selected and switches column\n      newLayer.unset('customDuration');\n      this._createTimeseries(newLayer, animated, persistName);\n    }\n\n    // not a cartodb layer\n    if (!model.styleModel) return;\n    var animatedChanged = model.styleModel.changedAttributes().animated;\n    var previousAnimated = model.styleModel.previous('animated');\n    var attributeChanged;\n    if (animatedChanged && previousAnimated && animatedChanged.attribute !== previousAnimated.attribute) attributeChanged = animatedChanged.attribute;\n    var typeChanged = model.styleModel.changedAttributes().type;\n    var animatedAttribute = model.styleModel.get('animated') && model.styleModel.get('animated').attribute;\n    var previousType = model.styleModel.previous('type');\n\n    if (!typeChanged && !attributeChanged) return;\n\n    var type = model.styleModel.get('type');\n    var widgetModel = this._diDashboardHelpers.getWidgets().filter(function (model) {\n      return model.get('type') === 'time-series';\n    })[0];\n\n    var currentTimeseries = this._getTimeseriesDefinition();\n    var newLayer = this._diDashboardHelpers.getLayer(model.id);\n\n    if (type !== 'animation' && previousType === 'animation' && this._lastType !== type) {\n      if (widgetModel) {\n        this._removeTimeseries();\n      }\n\n      this._lastType = type;\n      this._lastTSAnimateChange = '';\n    }\n\n    if (type === 'animation' && (this._lastTSAnimateChange !== attributeChanged || this._lastType !== 'animation')) {\n      if (widgetModel) {\n        this._removeTimeseries();\n      }\n\n      if (newLayer.get('type') === 'torque' || model.get('type') === 'torque') {\n        recreateWidget.call(this, currentTimeseries, newLayer, _.extend({ animated: true }, animatedChanged, { attribute: animatedAttribute }));\n      }\n\n      this._lastType = type;\n      this._lastTSAnimateChange = attributeChanged;\n    }\n  },\n\n  _removeTimeseries: function () {\n    this._widgetDefinitionsCollection.models.forEach(function (def) {\n      if (def.get('type') === 'time-series') {\n        def.set({avoidNotification: true}, {silent: true});\n        def.destroy();\n      }\n    });\n  },\n\n  _getTimeseriesDefinition: function () {\n    return this._widgetDefinitionsCollection.findWhere({type: 'time-series'});\n  },\n\n  _createTimeseries: function (newLayer, animatedChanged, persist) {\n    function getColumnType (sourceId, columnName) {\n      var node = this._analysisDefinitionNodesCollection.get(sourceId);\n      return node && node.querySchemaModel.getColumnType(columnName);\n    }\n\n    this._removeTimeseries();\n    var attribute = animatedChanged && animatedChanged.attribute || '';\n    var animated = animatedChanged && animatedChanged.animated;\n    var sourceId = newLayer.get('source');\n    var source = this._diDashboardHelpers.getAnalysisByNodeId(sourceId);\n    if (attribute) {\n      var baseAttrs = {\n        type: 'time-series',\n        layer_id: newLayer.get('id'),\n        source: source,\n        options: {\n          column: attribute,\n          title: persist || 'time_date__t',\n          animated: animated\n        },\n        style: {\n          widget_style: WidgetDefinitionModel.getDefaultWidgetStyle('time-series')\n        }\n      };\n\n      var columnType = getColumnType.call(this, sourceId, attribute);\n      if (columnType !== 'date') {\n        baseAttrs.options.bins = 256;\n      }\n\n      this._widgetDefinitionsCollection.create(baseAttrs, { wait: true });\n    }\n  }\n};\n","var LayersIntegration = require('./deep-insights-integration/layers-integration');\nvar WidgetsIntegration = require('./deep-insights-integration/widgets-integration');\nvar AnalysesIntegration = require('./deep-insights-integration/analyses-integration');\nvar MapIntegration = require('./deep-insights-integration/map-integration');\nvar LegendsIntegration = require('./deep-insights-integration/legends-integration');\nvar OverlaysIntegration = require('./deep-insights-integration/overlays-integration');\nvar FeaturesIntegration = require('./deep-insights-integration/features-integration');\n\nvar DIDashboardHelpers = require('./deep-insights-integration/deep-insights-helpers');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'analysisDefinitionNodesCollection',\n  'analysisDefinitionsCollection',\n  'configModel',\n  'deepInsightsDashboard',\n  'editFeatureOverlay',\n  'editorModel',\n  'layerDefinitionsCollection',\n  'legendDefinitionsCollection',\n  'mapDefinitionModel',\n  'mapModeModel',\n  'onboardings',\n  'overlayDefinitionsCollection',\n  'stateDefinitionModel',\n  'userModel',\n  'visDefinitionModel',\n  'widgetDefinitionsCollection'\n];\n\n/**\n * Integration between various data collections/models with cartodb.js and deep-insights.js.\n */\nmodule.exports = function (opts) {\n  checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n  var diDashboardHelpers = new DIDashboardHelpers(this._deepInsightsDashboard);\n\n  AnalysesIntegration.track({\n    diDashboardHelpers: diDashboardHelpers,\n    analysisDefinitionsCollection: this._analysisDefinitionsCollection,\n    analysisDefinitionNodesCollection: this._analysisDefinitionNodesCollection,\n    layerDefinitionsCollection: this._layerDefinitionsCollection,\n    onboardings: this._onboardings,\n    userModel: this._userModel,\n    visDefinitionModel: this._visDefinitionModel\n  });\n\n  WidgetsIntegration.track({\n    diDashboardHelpers: diDashboardHelpers,\n    layerDefinitionsCollection: this._layerDefinitionsCollection,\n    widgetDefinitionsCollection: this._widgetDefinitionsCollection,\n    analysisDefinitionNodesCollection: this._analysisDefinitionNodesCollection\n  });\n\n  LegendsIntegration.track({\n    diDashboardHelpers: diDashboardHelpers,\n    legendDefinitionsCollection: this._legendDefinitionsCollection\n  });\n\n  OverlaysIntegration.track({\n    diDashboardHelpers: diDashboardHelpers,\n    overlayDefinitionsCollection: this._overlayDefinitionsCollection\n  });\n\n  FeaturesIntegration.track({\n    configModel: this._configModel,\n    diDashboardHelpers: diDashboardHelpers,\n    editFeatureOverlay: this._editFeatureOverlay,\n    layerDefinitionsCollection: this._layerDefinitionsCollection,\n    mapModeModel: this._mapModeModel,\n    userModel: this._userModel\n  });\n\n  MapIntegration.track({\n    diDashboardHelpers: diDashboardHelpers,\n    editorModel: this._editorModel,\n    mapDefinitionModel: this._mapDefinitionModel,\n    stateDefinitionModel: this._stateDefinitionModel,\n    visDefinitionModel: this._visDefinitionModel\n  });\n\n  LayersIntegration.track({\n    analysisDefinitionNodesCollection: this._analysisDefinitionNodesCollection,\n    diDashboardHelpers: diDashboardHelpers,\n    editFeatureOverlay: this._editFeatureOverlay,\n    layerDefinitionsCollection: this._layerDefinitionsCollection,\n    legendDefinitionsCollection: this._legendDefinitionsCollection\n  });\n\n  LayersIntegration.bind('onLayerCreation', function (nodeDefModel) {\n    AnalysesIntegration.analyseDefinitionNode(nodeDefModel);\n  });\n\n  LayersIntegration.bind('onLayerChanged', function (layerDefinitionModel) {\n    WidgetsIntegration.manageTimeSeriesForTorque(layerDefinitionModel);\n  });\n\n  LayersIntegration.bind('onBaseLayerChanged', function () {\n    MapIntegration.setMapConverters();\n  });\n};\n","var ACTIVE_LOCALE = window.ACTIVE_LOCALE;\nif (ACTIVE_LOCALE !== 'en') {\n  require('moment/locale/' + ACTIVE_LOCALE);\n}\nvar Locale = require('locale/index');\nvar Polyglot = require('node-polyglot');\nrequire('promise-polyfill');\nvar polyglot = new Polyglot({\n  locale: ACTIVE_LOCALE, // Needed for pluralize behaviour\n  phrases: Locale[ACTIVE_LOCALE]\n});\nwindow._t = polyglot.t.bind(polyglot);\n\nvar $ = require('jquery');\nvar _ = require('underscore');\nvar Backbone = require('backbone');\nvar deepInsights = require('deep-insights/index');\nvar ConfigModel = require('builder/data/config-model');\nvar EditorMapView = require('builder/editor/editor-map-view');\nvar MapDefinitionModel = require('builder/data/map-definition-model');\nvar AnalysisDefinitionNodesCollection = require('builder/data/analysis-definition-nodes-collection');\nvar AnalysisDefinitionsCollection = require('builder/data/analysis-definitions-collection');\nvar LayerDefinitionsCollection = require('builder/data/layer-definitions-collection');\nvar WidgetDefinitionsCollection = require('builder/data/widget-definitions-collection');\nvar VisDefinitionModel = require('builder/data/vis-definition-model');\nvar createEditorMenuTabPane = require('builder/components/tab-pane/create-editor-menu-tab-pane');\nvar editorPaneTemplate = require('builder/editor/editor-pane.tpl');\nvar editorPaneIconItemTemplate = require('builder/editor/editor-pane-icon.tpl');\nvar ModalsServiceModel = require('builder/components/modals/modals-service-model');\nvar AnalysesService = require('builder/editor/layers/layer-content-views/analyses/analyses-service');\nvar OnboardingsServiceModel = require('builder/components/onboardings/onboardings-service-model');\nvar BuilderOnboardingLauncher = require('builder/components/onboardings/builder/launcher');\nvar viewFactory = require('builder/components/view-factory');\nvar UserModel = require('builder/data/user-model');\nvar UserNotifications = require('builder/data/user-notifications');\nvar EditorModel = require('builder/data/editor-model');\nvar UserActions = require('builder/data/user-actions');\nvar ImporterManager = require('builder/components/background-importer/background-importer');\nvar BackgroundPollingModel = require('builder/data/editor-background-polling-model');\nvar StyleManager = require('builder/editor/style/style-manager');\nvar DeepInsightsIntegrations = require('./deep-insights-integrations');\nvar EditFeatureOverlay = require('./deep-insights-integration/edit-feature-overlay');\nvar Notifier = require('builder/components/notifier/notifier');\nvar MetricsTracker = require('builder/components/metrics/metrics-tracker');\n// var WebGLMetrics = require('builder/components/metrics/webgl-metrics');\nvar FeedbackButtonView = require('builder/editor/feedback/feedback-button-view');\nvar SettingsOptions = require('builder/data/map-settings');\nvar SettingsView = require('builder/editor/editor-settings-view');\nvar OverlaysCollection = require('builder/data/overlays-definition-collection');\nvar MapcapsCollection = require('builder/data/mapcaps-collection');\nvar PrivacyCollection = require('builder/components/modals/publish/privacy-collection');\nvar CreatePrivacyOptions = require('builder/components/modals/publish/create-privacy-options');\nvar UserGroupFetcher = require('builder/data/users-group-fetcher');\nvar State = require('builder/data/state-definition-model');\nvar LegendDefinitionsCollection = require('builder/data/legends/legend-definitions-collection');\nvar LegendsState = require('builder/data/legends/legends-state');\nvar LegendFactory = require('builder/editor/layers/layer-content-views/legend/legend-factory');\nvar EditorVisualizationWarningView = require('builder/components/modals/editor-visualization-warning/editor-visualization-warning-view');\nvar MapModeModel = require('./map-mode-model');\nvar NodeGeometryTracker = require('./node-geometry-tracker');\nvar WidgetsService = require('builder/editor/widgets/widgets-service');\nvar DataServicesApiCheck = require('builder/editor/layers/layer-content-views/analyses/analyses-quota/analyses-quota-info');\nvar AppNotifications = require('./app-notifications');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\nvar Router = require('builder/routes/router');\nvar handleAnalysesRoute = require('builder/routes/handle-analyses-route');\nvar handleModalsRoute = require('builder/routes/handle-modals-route');\nvar handleWidgetRoute = require('builder/routes/handle-widget-route');\n\nconst ForbiddenAction = require('builder/data/backbone/network-interceptors/interceptors/forbidden-403');\nconst NetworkResponseInterceptor = require('builder/data/backbone/network-interceptors/interceptor');\nNetworkResponseInterceptor.addURLPattern('api/v');\nNetworkResponseInterceptor.addErrorInterceptor(ForbiddenAction());\nNetworkResponseInterceptor.start();\n\n// JSON data passed from entry point (editor/visualizations/show.html):\nvar vizJSON = window.vizJSON;\nvar stateJSON = window.stateJSON;\nvar userData = window.userData;\nvar frontendConfig = window.frontendConfig;\nvar visualizationData = window.visualizationData;\nvar layersData = window.layersData;\nvar analysesData = window.analysesData;\nvar builderNotifications = window.builderNotifications;\nvar mapcapsData = window.mapcapsData;\nvar overlaysData = window.overlaysData;\nvar basemaps = window.basemaps;\n\nvar configModel = new ConfigModel(\n  _.defaults(\n    {\n      base_url: userData.base_url,\n      api_key: userData.api_key\n    },\n    frontendConfig\n  )\n);\n\nDataServicesApiCheck.get(configModel).fetch();\n\nvar onboardingNotification = new UserNotifications(builderNotifications, {\n  key: 'builder',\n  configModel: configModel\n});\n\nvar userModel = new UserModel(userData, {\n  configModel: configModel\n});\n\nvar editorModel = new EditorModel();\n\nvar visDefinitionModel = new VisDefinitionModel(visualizationData, {\n  configModel: configModel\n});\nvar modals = new ModalsServiceModel();\nvar onboardings = new OnboardingsServiceModel();\nonboardings.editorModel = editorModel;\n\nUserGroupFetcher.track({\n  userModel: userModel,\n  configModel: configModel,\n  acl: visDefinitionModel.getPermissionModel().acl\n});\n\nvar stateDefModel = new State({\n  json: stateJSON\n}, {\n  visDefinitionModel: visDefinitionModel\n});\n\nvar mapId = visualizationData.map_id;\n\nvar analysisDefinitionNodesCollection = new AnalysisDefinitionNodesCollection(null, {\n  userModel: userModel,\n  configModel: configModel,\n  relatedTableData: visualizationData.related_tables\n});\n\nvar layerDefinitionsCollection = new LayerDefinitionsCollection(null, {\n  configModel: configModel,\n  userModel: userModel,\n  analysisDefinitionNodesCollection: analysisDefinitionNodesCollection,\n  mapId: mapId,\n  stateDefinitionModel: stateDefModel\n});\n\nvar analysisDefinitionsCollection = new AnalysisDefinitionsCollection(analysesData, {\n  configModel: configModel,\n  analysisDefinitionNodesCollection: analysisDefinitionNodesCollection,\n  layerDefinitionsCollection: layerDefinitionsCollection,\n  vizId: visDefinitionModel.id\n});\n\nlayerDefinitionsCollection.resetByLayersData(layersData);\n\n// Track geometry changes over any node definition model\nNodeGeometryTracker.track({\n  analysisDefinitionsCollection: analysisDefinitionsCollection,\n  analysisDefinitionNodesCollection: analysisDefinitionNodesCollection,\n  layerDefinitionsCollection: layerDefinitionsCollection\n});\n\nvar widgetDefinitionsCollection = new WidgetDefinitionsCollection(null, {\n  configModel: configModel,\n  mapId: mapId,\n  layerDefinitionsCollection: layerDefinitionsCollection,\n  analysisDefinitionNodesCollection: analysisDefinitionNodesCollection\n});\n\nvizJSON.widgets.forEach(function (widgetDefinitionModel) {\n  widgetDefinitionsCollection.add(widgetDefinitionModel);\n});\n\nvar legendDefinitionsCollection = new LegendDefinitionsCollection(null, {\n  configModel: configModel,\n  layerDefinitionsCollection: layerDefinitionsCollection,\n  vizId: visDefinitionModel.id\n});\nlegendDefinitionsCollection.resetByData(vizJSON);\nLegendFactory.init(legendDefinitionsCollection);\nLegendsState.init(layerDefinitionsCollection, legendDefinitionsCollection);\n\nNotifier.init({\n  editorModel: editorModel,\n  visDefinitionModel: visDefinitionModel\n});\n\nAppNotifications.init();\n\nMetricsTracker.init({\n  userId: userModel.get('id'),\n  visId: visDefinitionModel.get('id'),\n  configModel: configModel\n});\n\nBuilderOnboardingLauncher.init({\n  onboardings: onboardings,\n  userModel: userModel,\n  editorModel: editorModel,\n  onboardingNotification: onboardingNotification\n});\n\nAnalysesService.init({\n  onboardings: onboardings,\n  layerDefinitionsCollection: layerDefinitionsCollection,\n  modals: modals,\n  userModel: userModel,\n  configModel: configModel\n});\n\nvar userActions = UserActions({\n  userModel: userModel,\n  analysisDefinitionsCollection: analysisDefinitionsCollection,\n  analysisDefinitionNodesCollection: analysisDefinitionNodesCollection,\n  layerDefinitionsCollection: layerDefinitionsCollection,\n  widgetDefinitionsCollection: widgetDefinitionsCollection\n});\n\nvar privacyOptions = CreatePrivacyOptions(visDefinitionModel, userModel);\nvar privacyCollection = new PrivacyCollection(privacyOptions);\n\nvar mapcapsCollection = new MapcapsCollection(mapcapsData, {\n  visDefinitionModel: visDefinitionModel\n});\n\nvar backgroundPollingModel = new BackgroundPollingModel({\n  importsPolling: false\n}, {\n  configModel: configModel,\n  userModel: userModel,\n  userActions: userActions\n});\n\nImporterManager.init({\n  pollingModel: backgroundPollingModel,\n  createVis: false,\n  userModel: userModel,\n  configModel: configModel,\n  modals: modals\n});\n\nvar mapDefModel = new MapDefinitionModel(\n  _.extend(\n    vizJSON,\n    {\n      id: visualizationData.map_id\n    }\n  ),\n  {\n    parse: true,\n    configModel: configModel,\n    userModel: userModel,\n    layerDefinitionsCollection: layerDefinitionsCollection\n  }\n);\n\nvar overlaysCollection = new OverlaysCollection(overlaysData, {\n  configModel: configModel,\n  visId: visDefinitionModel.id\n});\n\nvar mapModeModel = new MapModeModel();\n\nWidgetsService.init({\n  analysisDefinitionNodesCollection: analysisDefinitionNodesCollection,\n  editorModel: editorModel,\n  layerDefinitionsCollection: layerDefinitionsCollection,\n  modals: modals,\n  userActions: userActions,\n  widgetDefinitionsCollection: widgetDefinitionsCollection\n});\n\nvar mapCreation = function () {\n  BuilderOnboardingLauncher.launch();\n\n  deepInsights.createDashboard('#dashboard', vizJSON, {\n    apiKey: configModel.get('api_key'),\n    no_cdn: false,\n    cartodb_logo: false,\n    renderMenu: false,\n    show_empty_infowindow_fields: true,\n    showLimitErrors: true,\n    state: stateJSON,\n    interactiveFeatures: true,\n    layerSelectorEnabled: false\n  }, function (error, dashboard) {\n    if (error) {\n      window.trackJs && window.trackJs.console.log({\n        type: 'Dashboard:',\n        data: error\n      });\n    }\n\n    var vis = dashboard.getMap();\n    var dashboardView = dashboard.getView();\n\n    dashboardView.listenTo(editorModel, 'change:edition', function (m) {\n      dashboardView.$el.toggleClass('is-dark', m.isEditing());\n    });\n\n    var styleManager = new StyleManager(layerDefinitionsCollection, vis.map, configModel);\n\n    var editFeatureOverlay = new EditFeatureOverlay({\n      map: vis.map,\n      mapModeModel: mapModeModel,\n      modals: modals\n    });\n    editFeatureOverlay.hide();\n    vis.addCustomOverlay(editFeatureOverlay);\n\n    var deepInsightsIntegrations = new DeepInsightsIntegrations({\n      onboardings: onboardings,\n      userModel: userModel,\n      deepInsightsDashboard: dashboard,\n      analysisDefinitionsCollection: analysisDefinitionsCollection,\n      analysisDefinitionNodesCollection: analysisDefinitionNodesCollection,\n      layerDefinitionsCollection: layerDefinitionsCollection,\n      legendDefinitionsCollection: legendDefinitionsCollection,\n      widgetDefinitionsCollection: widgetDefinitionsCollection,\n      overlayDefinitionsCollection: overlaysCollection,\n      visDefinitionModel: visDefinitionModel,\n      mapDefinitionModel: mapDefModel,\n      stateDefinitionModel: stateDefModel,\n      mapModeModel: mapModeModel,\n      configModel: configModel,\n      editorModel: editorModel,\n      editFeatureOverlay: editFeatureOverlay\n    });\n\n    var currentRoute = Router.getRouteModel().get('currentRoute');\n    handleWidgetRoute(currentRoute, widgetDefinitionsCollection);\n\n    // Expose things after Map initialization\n    window.deepInsightsIntegrations = deepInsightsIntegrations;\n    window.styleManager = styleManager;\n    window.dashboard = dashboard;\n    window.vis = vis;\n  });\n};\n\nif (visDefinitionModel.get('version') === 2 && modals) {\n  visDefinitionModel.bind('change:version', function () {\n    mapcapsCollection.fetch();\n    mapCreation();\n  }, this);\n\n  modals.create(function (modalModel) {\n    return new EditorVisualizationWarningView({\n      modalModel: modalModel,\n      visDefinitionModel: visDefinitionModel\n    });\n  }, {\n    escapeOptionsDisabled: true,\n    keepOpenOnRouteChange: true\n  });\n} else {\n  mapCreation();\n}\n\nvar settingsCollection = new Backbone.Collection(SettingsOptions(overlaysCollection, mapDefModel, userModel));\n\nRouter.init({\n  modals: modals,\n  widgetDefinitionsCollection: widgetDefinitionsCollection,\n  editorModel: editorModel,\n  handleModalsRoute: function (currentRoute, modals) {\n    handleModalsRoute(currentRoute, modals);\n  },\n  handleAnalysesRoute: function (currentRoute) {\n    handleAnalysesRoute(currentRoute);\n  },\n  handleWidgetRoute: function (currentRoute, widgetDefinitionsCollection) {\n    handleWidgetRoute(currentRoute, widgetDefinitionsCollection);\n  }\n});\n\nvar rootLocation = (/(\\/builder\\/[0-z\\.\\-]+\\/?)/).exec(location.pathname)[1];\nvar baseUrl = userModel.isInsideOrg() ? '/u/' + userModel.get('username') : '';\nBackbone.history.start({ pushState: true, hashChange: false, root: baseUrl + rootLocation });\n\nvar editorTabPaneView = createEditorMenuTabPane([\n  {\n    icon: 'pencilMenu',\n    name: 'editor',\n    tooltip: 'edit-map',\n    selected: true,\n    onClick: function () { Router.goToLayerList(); },\n    createContentView: function () {\n      editorModel.set({ settingsView: false });\n      return new EditorMapView({\n        basemaps: basemaps,\n        userActions: userActions,\n        configModel: configModel,\n        userModel: userModel,\n        editorModel: editorModel,\n        pollingModel: backgroundPollingModel,\n        mapDefinitionModel: mapDefModel,\n        onboardings: onboardings,\n        modals: modals,\n        visDefinitionModel: visDefinitionModel,\n        layerDefinitionsCollection: layerDefinitionsCollection,\n        analysisDefinitionNodesCollection: analysisDefinitionNodesCollection,\n        widgetDefinitionsCollection: widgetDefinitionsCollection,\n        mapcapsCollection: mapcapsCollection,\n        privacyCollection: privacyCollection,\n        legendDefinitionsCollection: legendDefinitionsCollection,\n        mapModeModel: mapModeModel,\n        stateDefinitionModel: stateDefModel,\n        onboardingNotification: onboardingNotification,\n        settingsCollection: settingsCollection,\n        routeModel: Router.getRouteModel()\n      });\n    }\n  }, {\n    icon: 'settings',\n    name: 'settings',\n    tooltip: 'map-settings',\n    onClick: function () { Router.goToSettings(); },\n    createContentView: function () {\n      editorModel.set({ settingsView: true });\n      return new SettingsView({\n        mapDefinitionModel: mapDefModel,\n        overlaysCollection: overlaysCollection,\n        mapcapsCollection: mapcapsCollection,\n        visDefinitionModel: visDefinitionModel,\n        privacyCollection: privacyCollection,\n        configModel: configModel,\n        userModel: userModel,\n        modals: modals,\n        editorModel: editorModel,\n        settingsCollection: settingsCollection,\n        stateDefinitionModel: stateDefModel\n      });\n    }\n  }\n], {\n  tabPaneOptions: {\n    className: 'Editor-wrapper',\n    template: editorPaneTemplate,\n    url: userModel.get('base_url'),\n    avatar_url: userModel.get('avatar_url'),\n    tabPaneItemOptions: {\n      tagName: 'li',\n      klassName: 'EditorMenu-navigationItem'\n    },\n    onRouteChange: function (routeModel) {\n      var route = routeModel.get('currentRoute');\n      if (!route) {\n        Router.goToDefaultRoute();\n        return;\n      }\n      var routeName = route[0];\n      // I feel like we should/could be smarter here\n      // This is the top level routing element which should:\n      // - Show settings for /settings\n      // - Show layers for /layers/**/*\n      // because al subsequent views might do something with the route as well\n      // but they probably depend on the top level having the correct state\n      if (routeName === 'settings') {\n        this.setSelectedTabPaneByName('settings');\n      } else {\n        this.setSelectedTabPaneByName('editor');\n      }\n    }\n  },\n  tabPaneItemIconOptions: {\n    tagName: 'button',\n    template: editorPaneIconItemTemplate,\n    className: 'EditorMenu-navigationLink'\n  }\n});\n\nmapModeModel.bindRouteEvents(Router.getRouteModel());\n\nwindow.editorTabPane = editorTabPaneView;\n\n$('.js-editor').prepend(editorTabPaneView.render().$el);\n\neditorTabPaneView.listenTo(editorModel, 'change:edition', function (m) {\n  editorTabPaneView.$('.Editor-panelWrapper').toggleClass('is-larger', m.isEditing());\n});\neditorTabPaneView.add_related_model(editorModel);\n\nvar tooltip = new TipsyTooltipView({\n  el: editorTabPaneView.$('.js-editor-logo'),\n  title: function () {\n    return _t('back-to-dashboard');\n  },\n  gravity: 'w'\n});\neditorTabPaneView.addView(tooltip);\n\nif (!configModel.get('cartodb_com_hosted')) {\n  var feedbackView = new FeedbackButtonView({ modals: modals });\n  $('.js-editorMenu').append(feedbackView.render().el);\n}\n\ndocument.title = visDefinitionModel.get('name') + ' | CARTO';\n\nif (window.__backboneAgent) {\n  window.__backboneAgent.handleBackbone(Backbone);\n}\n\n// Expose the root stuff to be able to inspect and modify state from\n// developer console (before views)\nwindow.configModel = configModel;\nwindow.modals = modals;\nwindow.onboardings = onboardings;\nwindow.userActions = userActions;\nwindow.userModel = userModel;\nwindow.viewFactory = viewFactory;\nwindow.visDefinitionModel = visDefinitionModel;\nwindow.layerDefinitionsCollection = layerDefinitionsCollection;\nwindow.widgetDefinitionsCollection = widgetDefinitionsCollection;\nwindow.analysisDefinitionsCollection = analysisDefinitionsCollection;\nwindow.analysisDefinitionNodesCollection = analysisDefinitionNodesCollection;\nwindow.legendDefinitionsCollection = legendDefinitionsCollection;\nwindow.editorModel = editorModel;\nwindow.mapDefModel = mapDefModel;\nwindow.overlaysCollection = overlaysCollection;\nwindow.mapcapsCollection = mapcapsCollection;\nwindow.stateDefModel = stateDefModel;\nwindow.settingsCollection = settingsCollection;\nwindow.Router = Router;\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"u-flex u-justifyCenter\">\\n  <div class=\"Modal-inner Modal-inner--grid u-flex u-justifyCenter\">\\n    <div class=\"Modal-icon\">\\n      <svg width=\"24px\" height=\"24px\" viewbox=\"459 348 24 24\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n        <g id=\"Export-dataset\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(459.000000, 348.000000)\">\\n          <path d=\"M1,1 L11,1 L11,5.5 C11,5.776 11.224,6 11.5,6 L16,6 L16,9.5 L17,9.5 L17,5.502 C17,5.502 17,5.502 17,5.501 C17,5.5 17,5.501 17,5.5 C17,5.447 16.985,5.398 16.97,5.35 C16.966,5.337 16.967,5.323 16.962,5.311 C16.936,5.247 16.896,5.19 16.847,5.142 L11.854,0.147 C11.808,0.101 11.753,0.064 11.692,0.039 C11.632,0.014 11.567,0 11.5,0 L0.5,0 C0.224,0 0,0.224 0,0.5 L0,21.5 C0,21.776 0.224,22 0.5,22 L10.5,22 L10.5,21 L1,21 L1,1 L1,1 Z M12,1.708 L15.291,5 L12,5 L12,1.708 L12,1.708 Z\" id=\"Shape\" fill=\"#2E3C43\"/>\\n          <path d=\"M17.5,11 C13.916,11 11,13.916 11,17.5 C11,21.084 13.916,24 17.5,24 C21.084,24 24,21.084 24,17.5 C24,13.916 21.084,11 17.5,11 L17.5,11 Z M17.5,23 C14.467,23 12,20.533 12,17.5 C12,14.467 14.467,12 17.5,12 C20.533,12 23,14.467 23,17.5 C23,20.533 20.533,23 17.5,23 L17.5,23 Z\" id=\"Shape\" fill=\"#2E3C43\"/>\\n          <path d=\"M17.858,14.425 C17.767,14.331 17.641,14.272 17.5,14.272 C17.359,14.272 17.232,14.331 17.142,14.425 L14.965,16.602 C14.77,16.797 14.77,17.114 14.965,17.309 C15.16,17.504 15.477,17.504 15.672,17.309 L17,15.981 L17,20.226 C17,20.502 17.224,20.726 17.5,20.726 C17.776,20.726 18,20.502 18,20.226 L18,15.981 L19.328,17.309 C19.426,17.407 19.554,17.455 19.682,17.455 C19.81,17.455 19.938,17.406 20.036,17.309 C20.231,17.114 20.231,16.797 20.036,16.602 L17.858,14.425 L17.858,14.425 Z\" id=\"Shape\" fill=\"#2E3C43\" transform=\"translate(17.500500, 17.499000) scale(1, -1) translate(-17.500500, -17.499000) \"/>\\n        </g>\\n      </svg>\\n    </div>\\n    <div>\\n      <h2 class=\" CDB-Text CDB-Size-huge is-light u-bSpace--xl\">' +\n__e( _t('editor.maps.export.confirmation.title', { name: name }) ) +\n'</h2>\\n      <p class=\"CDB-Text CDB-Size-large u-altTextColor\">' +\n__e( _t('editor.maps.export.confirmation.desc') ) +\n'</p>\\n      <ul class=\"Modal-listActions u-flex u-alignCenter\">\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--secondary CDB-Button--big js-cancel\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n               ' +\n__e( _t('editor.maps.export.confirmation.cancel') ) +\n'\\n            </span>\\n          </button>\\n        </li>\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-confirm\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n              ' +\n__e( _t('editor.maps.export.confirmation.confirm') ) +\n'\\n            </span>\\n          </button>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"Dialog-header\">\\n  <div class=\"Dialog-headerIcon Dialog-headerIcon--neutral\">\\n    <i class=\"CDB-IconFont CDB-IconFont-download\"></i>\\n  </div>\\n  <h2 class=\"CDB-Text CDB-Size-large u-bSpace\">\\n    ' +\n__e( _t('editor.maps.export.download.title') ) +\n'\\n  </h2>\\n  <h3 class=\"CDB-Text CDB-Size-medium u-altTextColor\">\\n    ' +\n__e( _t('editor.maps.export.download.tip') ) +\n'</br>\\n    ' +\n__e( _t('editor.maps.export.download.desc') ) +\n'\\n  </h3>\\n</div>\\n<div class=\"Dialog-footer--simple u-inner\">\\n  <button class=\"CDB-Button CDB-Button--primary u-tSpace--m js-download\">\\n    <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n      ' +\n__e( _t('editor.maps.export.download.confirm') ) +\n'\\n    </span>\\n  </button>\\n</div>\\n';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar $ = require('jquery');\nvar _ = require('underscore');\nvar renderLoading = require('builder/components/loading/render-loading.js');\nvar templateExportMapConfirmation = require('builder/editor/components/modals/export-map/export-map-confirmation.tpl');\nvar templateExportMapDownload = require('builder/editor/components/modals/export-map/export-map-download.tpl');\nvar ErrorView = require('builder/components/error/error-view.js');\n\nvar ENTER_KEY_CODE = 13;\nvar REQUIRED_OPTS = [\n  'renderOpts',\n  'modalModel',\n  'exportMapModel'\n];\n\nmodule.exports = CoreView.extend({\n  className: 'Dialog-content',\n\n  events: {\n    'click .js-confirm': '_onConfirm',\n    'click .js-cancel': '_onCancel',\n    'click .js-download': '_download'\n  },\n\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (!opts[item]) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n\n    this._onKeyDown = this._onKeyDown.bind(this);\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    var state = this._exportMapModel.get('state');\n\n    if (state === 'complete') {\n      this._renderCompleteView();\n    } else if (state === 'pending' || state === 'exporting' || state === 'uploading') {\n      this._renderLoadingView(state);\n    } else if (state === 'failure') {\n      this._renderFailureView();\n    } else {\n      this._renderConfirmationView();\n    }\n  },\n\n  _renderCompleteView: function () {\n    var w = window.open(this._exportMapModel.get('url'));\n\n    // If w is nullish, popup was blocked: we show a \"click to download\" modal. Else, download has started.\n    if (w == null) {\n      this.$el.html(templateExportMapDownload());\n    } else {\n      w.focus();\n      this._modalModel.destroy();\n    }\n  },\n\n  _renderLoadingView: function (state) {\n    var loadingTitle = state.charAt(0).toUpperCase() + state.slice(1) + ' ...';\n\n    this.$el.html(\n      renderLoading({\n        title: loadingTitle\n      })\n    );\n  },\n\n  _renderFailureView: function () {\n    var errorView = new ErrorView({\n      title: _t('editor.maps.export.error.title'),\n      desc: _t('editor.maps.export.error.desc')\n    });\n\n    this.$el.html(errorView.render().el);\n  },\n\n  _renderConfirmationView: function () {\n    this.$el.html(\n      templateExportMapConfirmation({\n        name: this._renderOpts.name\n      })\n    );\n  },\n\n  _initBinds: function () {\n    $(document).bind('keydown', this._onKeyDown);\n\n    this._exportMapModel.bind('change:state', function () {\n      this.render();\n    }, this);\n  },\n\n  _disableBinds: function () {\n    $(document).unbind('keydown', this._onKeyDown);\n  },\n\n  _onKeyDown: function (ev) {\n    var keyCode = ev.which;\n    if (keyCode === ENTER_KEY_CODE) {\n      this._onConfirm();\n    }\n  },\n\n  _onConfirm: function () {\n    this._exportMapModel.requestExport();\n  },\n\n  _onCancel: function () {\n    this._exportMapModel.cancelExport();\n\n    this._modalModel.destroy();\n  },\n\n  _download: function () {\n    window.open(this._exportMapModel.get('url'));\n    window.focus();\n\n    this._modalModel.destroy();\n  },\n\n  clean: function () {\n    this._disableBinds();\n    CoreView.prototype.clean.apply(this);\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"u-flex u-justifyCenter\">\\n  <div class=\"Modal-inner Modal-inner--grid u-flex u-justifyCenter\">\\n    <div class=\"Modal-icon\">\\n      <svg width=\"24px\" height=\"25px\" viewbox=\"521 436 24 25\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n        <path d=\"M524.5,440 L540.5,440 L540.5,460 L524.5,460 L524.5,440 Z M528.5,437 L536.5,437 L536.5,440 L528.5,440 L528.5,437 Z M522,440 L544,440 L522,440 Z M528.5,443.5 L528.5,455.5 L528.5,443.5 Z M532.5,443.5 L532.5,455.5 L532.5,443.5 Z M536.5,443.5 L536.5,455.5 L536.5,443.5 Z\" id=\"Shape\" stroke=\"#F19243\" stroke-width=\"1\" fill=\"none\"/>\\n      </svg>\\n    </div>\\n    <div>\\n      <h2 class=\" CDB-Text CDB-Size-huge is-light u-bSpace--xl\">\\n     ' +\n__e( _t('editor.maps.delete.title', { name: name }) ) +\n'</h2>\\n      <p class=\"CDB-Text CDB-Size-large u-altTextColor\">' +\n__e( _t('editor.maps.delete.desc') ) +\n'</p>\\n      <ul class=\"Modal-listActions u-flex u-alignCenter\">\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--secondary CDB-Button--big js-cancel\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n              ' +\n__e( _t('editor.maps.delete.cancel') ) +\n'\\n            </span>\\n          </button>\\n        </li>\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-confirm\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n              ' +\n__e( _t('editor.maps.delete.confirm') ) +\n'\\n            </span>\\n          </button>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar template = require('./editor-header.tpl');\nvar moment = require('moment');\nvar ConfirmationView = require('builder/components/modals/confirmation/modal-confirmation-view');\nvar EditMetadataView = require('builder/components/modals/map-metadata/map-metadata-view');\nvar templateConfirmation = require('./delete-map-confirmation.tpl');\nvar ExportView = require('builder/editor/components/modals/export-map/modal-export-map-view');\nvar ExportMapModel = require('builder/data/export-map-definition-model.js');\nvar removeMap = require('./map-operations/remove-map');\nvar renameMap = require('./map-operations/rename-map');\nvar InlineEditorView = require('builder/components/inline-editor/inline-editor-view');\nvar templateInlineEditor = require('./inline-editor.tpl');\nvar CreationModalView = require('builder/components/modals/creation/modal-creation-view');\nvar VisDefinitionModel = require('builder/data/vis-definition-model');\nvar errorParser = require('builder/helpers/error-parser');\nvar ShareWith = require('builder/components/modals/publish/share-with-view');\nvar ContextMenuFactory = require('builder/components/context-menu-factory-view');\nvar PrivacyDropdown = require('builder/components/privacy-dropdown/privacy-dropdown-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'userModel',\n  'editorModel',\n  'configModel',\n  'modals',\n  'visDefinitionModel',\n  'privacyCollection',\n  'mapcapsCollection',\n  'clickPrivacyAction'\n];\n\nmodule.exports = CoreView.extend({\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._title = this._visDefinitionModel.get('name');\n\n    _.bind(this._changeStyle, this);\n\n    this._bindEvents();\n  },\n\n  render: function () {\n    var model = this._privacyCollection.searchByPrivacy(this._visDefinitionModel.get('privacy'));\n    var published = this._mapcapsCollection.length > 0\n      ? _t('editor.published', { when: moment(this._mapcapsCollection.first().get('created_at')).fromNow() })\n      : _t('editor.unpublished');\n\n    this.$el.html(\n      template({\n        title: this._title,\n        privacy: model.get('privacy'),\n        cssClass: model.get('cssClass'),\n        avatar: this._userModel.get('avatar_url'),\n        isInsideOrg: this._userModel.isInsideOrg(),\n        published: published\n      })\n    );\n\n    this._initViews();\n    this._changeStyle(this._editorModel);\n\n    return this;\n  },\n\n  _initViews: function () {\n    var self = this;\n    this._inlineEditor = new InlineEditorView({\n      template: templateInlineEditor,\n      renderOptions: {\n        name: self._visDefinitionModel.get('name')\n      },\n      onEdit: self._renameMap.bind(self)\n    });\n\n    this.$('.js-header').append(this._inlineEditor.render().el);\n    this.addView(this._inlineEditor);\n\n    var shareWith = new ShareWith({\n      visDefinitionModel: this._visDefinitionModel,\n      userModel: this._userModel,\n      separationClass: 'u-rSpace--m',\n      clickPrivacyAction: this._onClickPrivacy.bind(this)\n    });\n\n    this.$('.js-share-users').append(shareWith.render().el);\n    this.addView(shareWith);\n\n    var menuItems = [{\n      label: _t('editor.maps.options.rename'),\n      val: 'rename-map',\n      action: this._onRenameMap.bind(this)\n    }, {\n      label: _t('editor.maps.options.duplicate'),\n      val: 'duplicate-map',\n      action: this._duplicateMap.bind(this),\n      disabled: !this._canDuplicate()\n    }, {\n      label: _t('editor.maps.options.edit-metadata'),\n      val: 'metadata-map',\n      action: this._editMetadata.bind(this)\n    }, {\n      label: _t('editor.maps.options.export-map'),\n      val: 'export-map',\n      action: this._exportMap.bind(this)\n    }, {\n      label: _t('editor.maps.options.export-image'),\n      val: 'export-image',\n      action: this._exportImage.bind(this)\n    }, {\n      label: _t('editor.maps.options.remove'),\n      val: 'delete-map',\n      destructive: true,\n      action: this._confirmDeleteLayer.bind(this)\n    }];\n\n    this._contextMenuFactory = new ContextMenuFactory({\n      menuItems: menuItems\n    });\n\n    this.$('.js-context-menu').append(this._contextMenuFactory.render().el);\n    this.addView(this._contextMenuFactory);\n\n    var privacyDropdown = new PrivacyDropdown({\n      privacyCollection: this._privacyCollection,\n      visDefinitionModel: this._visDefinitionModel,\n      userModel: this._userModel,\n      configModel: this._configModel,\n      mapcapsCollection: this._mapcapsCollection,\n      isOwner: true\n    });\n\n    this.$('.js-dropdown').append(privacyDropdown.render().el);\n    this.addView(privacyDropdown);\n  },\n\n  _canDuplicate: function () {\n    var isIndividualUser = this.options.userModel.isIndividualUser();\n    var hasRemainingPublicMaps = this.options.userModel.hasRemainingPublicMaps();\n    var privacy = this._visDefinitionModel.get('privacy');\n    if (isIndividualUser && !hasRemainingPublicMaps && privacy !== 'PRIVATE') {\n      return false;\n    }\n    return true;\n  },\n\n  _bindEvents: function () {\n    this.listenTo(this._visDefinitionModel, 'change:privacy change:name', this.render);\n    this.add_related_model(this._visDefinitionModel);\n\n    this.listenTo(this._editorModel, 'change:edition', this._changeStyle);\n    this.add_related_model(this._editorModel);\n\n    this._mapcapsCollection.on('add reset', this.render, this);\n    this._mapcapsCollection.on('change:status', this.render, this);\n    this.add_related_model(this._mapcapsCollection);\n  },\n\n  _renameMap: function () {\n    var newName = this._inlineEditor.getValue();\n\n    if (newName !== '' && newName !== this._visDefinitionModel.get('name')) {\n      // Speed!\n      this._onRenameSuccess(newName);\n\n      renameMap({\n        newName: newName,\n        visDefinitionModel: this._visDefinitionModel,\n        onError: this._onRenameError.bind(this)\n      });\n    }\n  },\n\n  _onRenameMap: function () {\n    this._inlineEditor.edit();\n  },\n\n  _duplicateMap: function () {\n    var self = this;\n    var mapName = this._visDefinitionModel.get('name');\n\n    this._modals.create(function (modalModel) {\n      return new CreationModalView({\n        modalModel: modalModel,\n        loadingTitle: _t('editor.maps.duplicate.loading', { name: mapName }),\n        errorTitle: _t('editor.maps.duplicate.error', { name: mapName }),\n        runAction: function (opts) {\n          var newVisModel = new VisDefinitionModel({\n            name: mapName\n          }, {\n            configModel: self._configModel\n          });\n\n          newVisModel.save({\n            source_visualization_id: self._visDefinitionModel.get('id')\n          }, {\n            success: function (visModel) {\n              window.location = visModel.builderURL();\n            },\n            error: function (mdl, e) {\n              opts.error && opts.error(errorParser(e));\n            }\n          });\n        }\n      });\n    });\n  },\n\n  _confirmDeleteLayer: function () {\n    var self = this;\n    var mapName = this._visDefinitionModel.get('name');\n\n    this._modals.create(function (modalModel) {\n      return new ConfirmationView({\n        modalModel: modalModel,\n        template: templateConfirmation,\n        loadingTitle: _t('editor.maps.delete.loading', {name: mapName}),\n        renderOpts: {\n          name: mapName\n        },\n        runAction: function () {\n          removeMap({\n            onSuccess: self._onSuccessDestroyMap.bind(self, modalModel),\n            onError: self._onErrorDestroyMap.bind(self, modalModel),\n            visDefinitionModel: self._visDefinitionModel\n          });\n        }\n      });\n    });\n  },\n\n  _exportMap: function () {\n    var mapName = this._visDefinitionModel.get('name');\n    var visID = this._visDefinitionModel.get('id');\n\n    var exportMapModel = new ExportMapModel({\n      visualization_id: visID\n    }, {\n      configModel: this._configModel\n    });\n\n    this._modals.create(function (modalModel) {\n      return new ExportView({\n        modalModel: modalModel,\n        exportMapModel: exportMapModel,\n        renderOpts: {\n          name: mapName\n        }\n      });\n    });\n  },\n\n  _exportImage: function () {\n    this.trigger('export-image', this);\n  },\n\n  _editMetadata: function () {\n    var self = this;\n\n    this._modals.create(function (modalModel) {\n      return new EditMetadataView({\n        modalModel: modalModel,\n        visDefinitionModel: self._visDefinitionModel\n      });\n    });\n  },\n\n  _onSuccessDestroyMap: function (modal) {\n    this.options.onRemoveMap && this.options.onRemoveMap();\n  },\n\n  _onErrorDestroyMap: function (modal) {\n    modal.destroy();\n  },\n\n  _onRenameSuccess: function (newName) {\n    this.$('.js-title').text(newName).show();\n    this._inlineEditor.hide();\n  },\n\n  _onRenameError: function (oldName) {\n    this.$('.js-title').text(oldName).show();\n    this._inlineEditor.hide();\n  },\n\n  _changeStyle: function (m) {\n    this._getTitle().toggleClass('is-dark', m.isEditing());\n  },\n\n  _getTitle: function () {\n    return this.$('.Editor-HeaderInfo');\n  },\n\n  _onClickPrivacy: function () {\n    this.options.clickPrivacyAction && this.options.clickPrivacyAction();\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"Editor-HeaderInfoEditor\">\\n  <div class=\"Editor-HeaderInfo-inner Editor-HeaderInfo-inner--wide\">\\n    <div class=\"Editor-HeaderInfo-title u-bSpace--m js-context-menu\">\\n      <div class=\"Editor-HeaderInfo-titleText u-bSpace js-header\">\\n      </div>\\n    </div>\\n    <div class=\"u-bSpace--xl u-flex u-alignCenter\">\\n      <div class=\"js-dropdown u-rSpace--m\"></div>\\n      ';\n if (isInsideOrg) { ;\n__p += '\\n        <div class=\"js-share-users\"></div>\\n      ';\n } ;\n__p += '\\n      <p class=\"Editor-HeaderInfo-publishDate u-ellipsis CDB-Text CDB-Size-medium u-altTextColor\">' +\n__e( published ) +\n'</p>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","module.exports = [{\n  keywords: 'buffer-size',\n  type: 'Map'\n}, {\n  keywords: 'marker-fill marker-width marker-fill-opacity marker-opacity marker-line-color marker-line-width marker-line-opacity marker-comp-op marker-allow-overlap marker-file marker-type marker-height marker-width marker-transform marker-placement marker-ignore-placement marker-spacing marker-avoid-edges point-file point-opacity point-comp-op point-allow-overlap point-placement point-ignore-placement point-transform',\n  type: 'Points'\n}, {\n  keywords: 'line-color line-width line-opacity line-comp-op line-pattern-file line-join line-cap line-dasharray line-dash-offset line-offset line-simplify line-simplify-algorithm line-smooth line-clip',\n  type: 'Lines'\n}, {\n  keywords: 'polygon-fill polygon-opacity polygon-comp-op polygon-pattern-file polygon-pattern-alignment polygon-pattern-opacity polygon-smooth polygon-simplify polygon-simplify-algorithm polygon-gamma polygon-gamma-method polygon-geometry-transform polygon-clip',\n  type: 'Polygons'\n}, {\n  keywords: 'text-name text-face-name text-size text-fill text-opacity text-comp-op text-halo-radius text-halo-fill text-halo-rasterizer text-allow-overlap text-transform text-placement text-placement-type text-dx text-dy text-wrap-width text-wrap-before text-character-spacing text-line-spacing text-min-distance text-avoid-edges text-orientation text-vertical-alignment',\n  type: 'Text'\n}, {\n  keywords: 'building-fill building-fill-opacity building-height',\n  type: 'Building'\n}, {\n  keywords: 'shield-name shield-face-name shield-size shield-file shield-fill shield-opacity shield-text-opacity shield-allow-overlap shield-placements shield-placement-type shield-dy shield-dx shield-text-dx shield-text-dy shield-min-distance shield-avoid-edges',\n  type: 'Shield'\n}, {\n  keywords: 'image-filters comp-op opacity',\n  type: ''\n}];\n","var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar EditorView = require('./editor-view');\nvar AnalysesService = require('./layers/layer-content-views/analyses/analyses-service');\nvar StackLayoutView = require('builder/components/stack-layout/stack-layout-view');\nvar BasemapContentView = require('./layers/basemap-content-view');\nvar LayerContentView = require('./layers/layer-content-view');\nvar EditFeatureContentView = require('./layers/edit-feature-content-view');\nvar WidgetsFormContentView = require('./widgets/widgets-form/widgets-form-content-view');\nvar Notifier = require('builder/components/notifier/notifier');\nvar Router = require('builder/routes/router');\n\nvar REQUIRED_OPTS = [\n  'userActions',\n  'basemaps',\n  'visDefinitionModel',\n  'layerDefinitionsCollection',\n  'analysisDefinitionNodesCollection',\n  'legendDefinitionsCollection',\n  'widgetDefinitionsCollection',\n  'mapcapsCollection',\n  'privacyCollection',\n  'modals',\n  'onboardings',\n  'userModel',\n  'configModel',\n  'editorModel',\n  'pollingModel',\n  'mapDefinitionModel',\n  'mapModeModel',\n  'stateDefinitionModel',\n  'onboardingNotification',\n  'settingsCollection',\n  'routeModel'\n];\n\nmodule.exports = CoreView.extend({\n  className: 'MapEditor Editor-panel',\n\n  events: {\n    'click .js-add-analysis': '_onAddAnalysisClicked'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    var self = this;\n\n    var stackViewCollection = new Backbone.Collection([{\n      createStackView: function (stackLayoutModel, opts) {\n        var selectedTabItem = opts[0] || 'layers';\n\n        return new EditorView({\n          className: 'Editor-content',\n          modals: self._modals,\n          userModel: self._userModel,\n          userActions: self._userActions,\n          configModel: self._configModel,\n          editorModel: self._editorModel,\n          pollingModel: self._pollingModel,\n          mapDefinitionModel: self._mapDefinitionModel,\n          visDefinitionModel: self._visDefinitionModel,\n          layerDefinitionsCollection: self._layerDefinitionsCollection,\n          analysisDefinitionNodesCollection: self._analysisDefinitionNodesCollection,\n          widgetDefinitionsCollection: self._widgetDefinitionsCollection,\n          mapcapsCollection: self._mapcapsCollection,\n          privacyCollection: self._privacyCollection,\n          mapStackLayoutModel: stackLayoutModel,\n          selectedTabItem: selectedTabItem,\n          mapModeModel: self._mapModeModel,\n          stateDefinitionModel: self._stateDefinitionModel,\n          settingsCollection: self._settingsCollection,\n          routeModel: self._routeModel\n        });\n      }\n    }, {\n      createStackView: function (stackLayoutModel, opts) {\n        var viewType = opts[1];\n\n        switch (viewType) {\n          case 'basemaps':\n            return new BasemapContentView({\n              className: 'Editor-content',\n              basemaps: self._basemaps,\n              layerDefinitionsCollection: self._layerDefinitionsCollection,\n              stackLayoutModel: stackLayoutModel,\n              customBaselayersCollection: self._userModel.layers,\n              modals: self._modals,\n              configModel: self._configModel\n            });\n          case 'layer-content':\n            var layerDefinitionModel = opts[0];\n            var selectedTabItem = opts[2];\n            var analysisPayload = opts[3];\n\n            return new LayerContentView({\n              className: 'Editor-content',\n              userActions: self._userActions,\n              userModel: self._userModel,\n              layerDefinitionModel: layerDefinitionModel,\n              mapDefinitionModel: self._mapDefinitionModel,\n              widgetDefinitionsCollection: self._widgetDefinitionsCollection,\n              layerDefinitionsCollection: self._layerDefinitionsCollection,\n              analysisDefinitionNodesCollection: self._analysisDefinitionNodesCollection,\n              legendDefinitionsCollection: self._legendDefinitionsCollection,\n              analysis: self._analysis,\n              modals: self._modals,\n              onboardings: self._onboardings,\n              stackLayoutModel: stackLayoutModel,\n              analysisPayload: analysisPayload,\n              configModel: self._configModel,\n              editorModel: self._editorModel,\n              mapModeModel: self._mapModeModel,\n              stateDefinitionModel: self._stateDefinitionModel,\n              onboardingNotification: self._onboardingNotification,\n              visDefinitionModel: self._visDefinitionModel,\n              selectedTabItem: selectedTabItem\n            });\n          case 'widget-content':\n            var widgetDefinitionModel = opts[0];\n            var stackLayoutPrevStep = opts[1];\n\n            return new WidgetsFormContentView({\n              className: 'Editor-content',\n              modals: self._modals,\n              userModel: self._userModel,\n              configModel: self._configModel,\n              userActions: self._userActions,\n              widgetDefinitionModel: widgetDefinitionModel,\n              widgetDefinitionsCollection: self._widgetDefinitionsCollection,\n              layerDefinitionsCollection: self._layerDefinitionsCollection,\n              analysisDefinitionNodesCollection: self._analysisDefinitionNodesCollection,\n              stackLayoutPrevStep: stackLayoutPrevStep,\n              stackLayoutModel: stackLayoutModel\n            });\n          case 'element-content':\n            console.log(viewType + 'view is not implemented yet');\n            break;\n          default:\n            console.log(viewType + 'view doesn\\'t exist');\n        }\n      }\n    }, {\n      createStackView: function (stackLayoutModel, opts) {\n        var layerDefinitionModel = opts[0];\n        var isValidGeometry = opts[1];\n\n        return new EditFeatureContentView({\n          layerDefinitionModel: layerDefinitionModel,\n          configModel: self._configModel,\n          stackLayoutModel: stackLayoutModel,\n          mapModeModel: self._mapModeModel,\n          editorModel: self._editorModel,\n          model: new Backbone.Model({\n            hasChanges: false,\n            isValidAttributes: true,\n            isValidGeometry: isValidGeometry\n          }),\n          modals: self._modals\n        });\n      }\n    }]);\n\n    this._stackLayoutView = new StackLayoutView({\n      className: 'Editor-content',\n      collection: stackViewCollection\n    });\n\n    this.$el.append(this._stackLayoutView.render().$el);\n    this.addView(this._stackLayoutView);\n\n    var notifierView = Notifier.getView();\n    this.$el.append(notifierView.render().el);\n    this.addView(notifierView);\n\n    this._setServices();\n\n    return this;\n  },\n\n  _setServices: function () {\n    AnalysesService.setStackLayoutView(this._stackLayoutView);\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._routeModel, 'change:currentRoute', this._handleRoute);\n    this.listenTo(this._editorModel, 'change:edition', this._changeStyle);\n  },\n\n  // Required to receive external route from parent\n  handleRoute: function (routeModel) {\n    this._handleRoute(routeModel);\n  },\n\n  _handleRoute: function (routeModel) {\n    var currentRoute = routeModel.get('currentRoute');\n    var routeName = currentRoute[0];\n\n    if (routeName.indexOf('layer_') === 0) {\n      var layerId = currentRoute[1];\n      var layerDefinitionModel = this._layerDefinitionsCollection.find({ id: layerId });\n\n      if (layerDefinitionModel === undefined) {\n        Router.goToLayerList();\n        return true;\n      }\n\n      var args = [1, layerDefinitionModel, 'layer-content'];\n      switch (routeName) {\n        case 'layer_data':\n          args.push('data');\n          break;\n        case 'layer_style':\n          args.push('style');\n          break;\n        case 'layer_analyses':\n          args.push('analyses');\n          args.push(currentRoute[2]);\n          break;\n        case 'layer_popups':\n          args.push('popups');\n          break;\n        case 'layer_legends':\n          args.push('legends');\n          break;\n      }\n\n      this._stackLayoutView.model.goToStep.apply(this._stackLayoutView.model, args);\n      return true;\n    } else if (routeName === 'widget') {\n      var widgetId = currentRoute[1];\n      var widgetDefinitionModel = this._widgetDefinitionsCollection.find({ id: widgetId });\n\n      if (widgetDefinitionModel === undefined) {\n        Router.goToWidgetList();\n        return true;\n      }\n\n      this._stackLayoutView.model.goToStep(1, widgetDefinitionModel, 'widget-content');\n      return true;\n    } else if (routeName === 'root' || routeName === 'layers' || routeName === 'widgets') {\n      this._stackLayoutView.model.goToStep(0, routeName);\n      return true;\n    } else if (routeName === 'edit_feature') {\n      var feature = this._mapModeModel.getFeatureDefinition();\n\n      if (feature) {\n        var isFeatureNew = !feature.isNew();\n        this._stackLayoutView.model.goToStep(2, this._layerDefinitionsCollection.find({ id: currentRoute[1] }), isFeatureNew);\n      } else {\n        // We could instantiate a feature here based on the URL parameters, this is easier for now\n        Router.goToPreviousRoute({\n          options: { replace: true }\n        });\n      }\n    } else if (routeName === 'basemap') {\n      this._stackLayoutView.model.goToStep(1, null, 'basemaps');\n      return true;\n    }\n\n    return false;\n  },\n\n  _changeStyle: function () {\n    this.$el.toggleClass('is-dark', this._editorModel.isEditing());\n  },\n\n  _onAddAnalysisClicked: function () {\n    AnalysesService.addAnalysis();\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<i class=\"CDB-IconFont CDB-IconFont-' +\n__e( icon ) +\n' EditorMenu-navigationIcon\"></i>\\n';\n\n}\nreturn __p\n}","var $ = require('jquery');\nvar Backbone = require('backbone');\nvar _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar createTextLabelsTabPaneRouted = require('builder/components/tab-pane/create-text-labels-tab-pane-routed');\nvar Header = require('./editor-header.js');\nvar EditorTabPaneTemplate = require('./editor-tab-pane.tpl');\nvar EditorWidgetsView = require('./widgets/widgets-view');\nvar LayersView = require('./layers/layers-view');\nvar ScrollView = require('builder/components/scroll/scroll-view');\nvar PanelWithOptionsView = require('builder/components/view-options/panel-with-options-view');\nvar ShareButtonView = require('./layers/share-button-view');\nvar PublishView = require('builder/components/modals/publish/publish-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar Infobox = require('builder/components/infobox/infobox-factory');\nvar InfoboxModel = require('builder/components/infobox/infobox-model');\nvar InfoboxCollection = require('builder/components/infobox/infobox-collection');\nvar AppNotifications = require('builder/app-notifications');\nvar zoomToData = require('./map-operations/zoom-to-data');\nvar Router = require('builder/routes/router');\n\nvar REQUIRED_OPTS = [\n  'userActions',\n  'modals',\n  'configModel',\n  'userModel',\n  'editorModel',\n  'pollingModel',\n  'analysisDefinitionNodesCollection',\n  'layerDefinitionsCollection',\n  'privacyCollection',\n  'widgetDefinitionsCollection',\n  'mapcapsCollection',\n  'visDefinitionModel',\n  'stateDefinitionModel',\n  'selectedTabItem',\n  'mapStackLayoutModel',\n  'routeModel'\n];\n\nvar LAYERS_TAB_NAME = 'layers';\nvar WIDGETS_TAB_NAME = 'widgets';\nvar MAX_LAYERS_REACHED = 'MAX_LAYERS_REACHED';\nvar ORIGIN_TABLE = 'table';\n\nmodule.exports = CoreView.extend({\n\n  className: 'Editor-content',\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._initModels();\n    this._initBinds();\n\n    this._zoomToData = zoomToData; // For using Dependency Injection in specs\n  },\n\n  render: function () {\n    var self = this;\n\n    var count = this._getDataLayerCount();\n    var max = this._getMaxCount();\n\n    this.clearSubViews();\n    this.$el.empty();\n\n    var infoboxStates = [\n      this._getMaxLayerInfoBoxForCurrentUser(),\n      this._getUnknownErrorInfobox(),\n      this._getLimitInfobox('interactivity'),\n      this._getLimitInfobox('limit')\n    ];\n\n    this._infoboxModel = new InfoboxModel({\n      state: null\n    });\n\n    var infoboxCollection = new InfoboxCollection(infoboxStates);\n\n    var tabPaneTabs = [{\n      name: LAYERS_TAB_NAME,\n      label: this._getTranslatedLayersLabel(count, max),\n      selected: this._selectedTabItem === LAYERS_TAB_NAME,\n      onClick: function () { Router.goToLayerList(); },\n      createContentView: function () {\n        return new PanelWithOptionsView({\n          className: 'Editor-content js-editorPanelContent',\n          editorModel: self._editorModel,\n          infoboxModel: self._infoboxModel,\n          infoboxCollection: infoboxCollection,\n          createContentView: function () {\n            return new ScrollView({\n              createContentView: function () {\n                var scrollViewInstance = this;\n                return new LayersView({\n                  modals: self._modals,\n                  userModel: self._userModel,\n                  editorModel: self._editorModel,\n                  configModel: self._configModel,\n                  pollingModel: self._pollingModel,\n                  userActions: self._userActions,\n                  layerDefinitionsCollection: self._layerDefinitionsCollection,\n                  analysisDefinitionNodesCollection: self._analysisDefinitionNodesCollection,\n                  stateDefinitionModel: self._stateDefinitionModel,\n                  widgetDefinitionsCollection: self._widgetDefinitionsCollection,\n                  visDefinitionModel: self._visDefinitionModel,\n                  showMaxLayerError: self._infoboxState.bind(self),\n                  onNotificationCloseAction: scrollViewInstance._updateScrollWhenExist.bind(scrollViewInstance)\n                });\n              }\n            });\n          },\n          createActionView: function () {\n            return new ShareButtonView({\n              visDefinitionModel: self._visDefinitionModel,\n              onClickAction: self._share.bind(self)\n            });\n          }\n        });\n      }\n    }, {\n      name: 'widgets',\n      label: _t('editor.tab-pane.widgets.title-label'),\n      selected: this._selectedTabItem === WIDGETS_TAB_NAME,\n      onClick: function () { Router.goToWidgetList(); },\n      createContentView: function () {\n        return new PanelWithOptionsView({\n          className: 'Editor-content',\n          editorModel: self._editorModel,\n          infoboxModel: self._infoboxModel,\n          infoboxCollection: infoboxCollection,\n          createContentView: function () {\n            return new ScrollView({\n              createContentView: function () {\n                return new EditorWidgetsView({\n                  userActions: self._userActions,\n                  modals: self._modals,\n                  layerDefinitionsCollection: self._layerDefinitionsCollection,\n                  widgetDefinitionsCollection: self._widgetDefinitionsCollection,\n                  analysisDefinitionNodesCollection: self._analysisDefinitionNodesCollection,\n                  userModel: self._userModel,\n                  configModel: self._configModel,\n                  stackLayoutModel: self._mapStackLayoutModel\n                });\n              }\n            });\n          },\n          createActionView: function () {\n            return new ShareButtonView({\n              visDefinitionModel: self._visDefinitionModel,\n              onClickAction: self._share.bind(self)\n            });\n          }\n        });\n      }\n    }];\n\n    var header = new Header({\n      editorModel: self._editorModel,\n      mapcapsCollection: self._mapcapsCollection,\n      modals: self._modals,\n      visDefinitionModel: self._visDefinitionModel,\n      privacyCollection: self._privacyCollection,\n      clickPrivacyAction: self._share.bind(self),\n      onRemoveMap: self._onRemoveMap.bind(self),\n      configModel: self._configModel,\n      userModel: self._userModel\n    });\n\n    header.bind('export-image', this._onExportImage, this);\n\n    this.$el.append(header.render().$el);\n    this.addView(header);\n\n    var tabPaneOptions = {\n      tabPaneOptions: {\n        template: EditorTabPaneTemplate,\n        tabPaneItemOptions: {\n          tagName: 'li',\n          klassName: 'CDB-NavMenu-item'\n        }\n      },\n      tabPaneItemLabelOptions: {\n        tagName: 'button',\n        className: 'CDB-NavMenu-link u-upperCase'\n      }\n    };\n\n    this._mapTabPaneView = createTextLabelsTabPaneRouted(tabPaneTabs, tabPaneOptions);\n\n    this.$el.append(this._mapTabPaneView.render().$el);\n    this.addView(this._mapTabPaneView);\n\n    this._infoboxState();\n\n    return this;\n  },\n\n  _initModels: function () {\n    this._updatedModel = new Backbone.Model({\n      date: ''\n    });\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._editorModel, 'change:edition', this._changeStyle);\n    this.listenTo(this._layerDefinitionsCollection, 'add', this._onLayerAdd);\n    this.listenTo(this._layerDefinitionsCollection, 'add remove', this._onLayerCountChange);\n    this.listenTo(AppNotifications.getCollection(), 'add', this._infoboxState);\n    this.listenTo(this._routeModel, 'change:currentRoute', this._handleRoute);\n  },\n\n  _handleRoute: function (routeModel) {\n    var currentRoute = routeModel.get('currentRoute');\n\n    if (!currentRoute) return;\n\n    var routeName = currentRoute[0];\n\n    if (routeName === WIDGETS_TAB_NAME) {\n      this._mapTabPaneView.setSelectedTabPaneByName(WIDGETS_TAB_NAME);\n    } else {\n      this._mapTabPaneView.setSelectedTabPaneByName(LAYERS_TAB_NAME);\n    }\n  },\n\n  _onLayerAdd: function (model, collection, options) {\n    if (options.origin && options.origin === ORIGIN_TABLE) {\n      var nodeModel = model.getAnalysisDefinitionNodeModel();\n      var query = nodeModel.querySchemaModel.get('query');\n\n      this._zoomToData(this._configModel, this._stateDefinitionModel, query);\n    }\n\n    this._visDefinitionModel.fetch();\n  },\n\n  _getMaxLayerTitle: function () {\n    return _t('editor.layers.max-layers-infowindow.title');\n  },\n\n  _getMaxLayerInfoBoxForCurrentUser: function () {\n    var infoboxOpts = {\n      type: 'alert',\n      title: this._getMaxLayerTitle()\n    };\n\n    var baseState = {\n      state: MAX_LAYERS_REACHED\n    };\n\n    // Open-source / local installation\n    if (this._configModel.isHosted()) {\n      infoboxOpts.body = _t('editor.layers.max-layers-infowindow.custom.body', { maxLayers: this._getMaxCount() });\n      infoboxOpts.action = { label: _t('editor.layers.max-layers-infowindow.custom.contact') };\n      baseState.onAction = function () { window.open(_t('editor.layers.max-layers-infowindow.custom.contact-url')); };\n    } else {\n      if (this._userModel.isInsideOrg()) {\n        if (this._userModel.isOrgAdmin()) {\n          infoboxOpts.body = _t('editor.layers.max-layers-infowindow.org-admin.body', { maxLayers: this._getMaxCount() });\n          infoboxOpts.action = { label: _t('editor.layers.max-layers-infowindow.org-admin.upgrade') };\n        } else {\n          infoboxOpts.body = _t('editor.layers.max-layers-infowindow.org.body', { maxLayers: this._getMaxCount() });\n          infoboxOpts.action = { label: _t('editor.layers.max-layers-infowindow.org.upgrade') };\n        }\n\n        baseState.onAction = function () { window.open('mailto:' + this._userModel.upgradeContactEmail()); };\n      } else {\n        baseState.onAction = function () { window.open(_t('editor.layers.max-layers-infowindow.pricing')); };\n        infoboxOpts.body = _t('editor.layers.max-layers-infowindow.regular.body', { maxLayers: this._getMaxCount() });\n        infoboxOpts.action = { label: _t('editor.layers.max-layers-infowindow.regular.upgrade') };\n      }\n    }\n\n    return _.extend(baseState, {\n      createContentView: function () {\n        return Infobox.createWithAction(infoboxOpts);\n      }\n    });\n  },\n\n  _getUnknownErrorInfobox: function () {\n    return {\n      state: 'unknown',\n      createContentView: function () {\n        return Infobox.createWithAction({\n          type: 'alert',\n          title: _t('editor.messages.generic-error.title'),\n          body: _t('editor.messages.generic-error.body'),\n          className: 'fs-unknown-tile-error'\n        });\n      }\n    };\n  },\n\n  _getLimitInfobox: function (type) {\n    var infoboxOpts = {\n      type: 'alert',\n      title: _t('editor.messages.' + type + '.title'),\n      body: _t('editor.messages.' + type + '.body')\n    };\n\n    var baseState = {\n      state: type,\n      onClose: function () {\n        AppNotifications.muteByType(type);\n        this._infoboxModel.set('state', null);\n      }.bind(this)\n    };\n\n    if (!this._configModel.isHosted()) {\n      infoboxOpts.action = {\n        label: _t('editor.messages.' + type + '.cta.label'),\n        type: 'secondary'\n      };\n\n      baseState.onAction = function () {\n        window.open(_t('editor.messages.' + type + '.cta.url'));\n      };\n\n      infoboxOpts.body = _t('editor.messages.' + type + '.body') + _t('editor.messages.' + type + '.try_to');\n    }\n\n    return _.extend(baseState, {\n      createContentView: function () {\n        return Infobox.createWithAction(infoboxOpts);\n      }\n    });\n  },\n\n  _onLayerCountChange: function () {\n    var count = this._getDataLayerCount();\n    var max = this._getMaxCount();\n\n    var layersModel = this._mapTabPaneView.getTabPaneCollection().find(function (model) {\n      return model.get('name') === LAYERS_TAB_NAME;\n    });\n\n    layersModel.set('label', this._getTranslatedLayersLabel(count, max));\n\n    if (count === max) {\n      this._infoboxState();\n    } else {\n      this._infoboxModel.set('state', null);\n    }\n  },\n\n  _infoboxState: function () {\n    var count = this._getDataLayerCount();\n    var max = this._getMaxCount();\n    var hasLimitError = AppNotifications.getByType('limit');\n    var hasUnknownError = AppNotifications.getByType('unknown');\n    var hasInteractivityError = AppNotifications.getByType('interactivity');\n\n    if (hasLimitError) {\n      this._infoboxModel.set('state', 'limit');\n    } else if (hasInteractivityError) {\n      this._infoboxModel.set('state', 'interactivity');\n    } else if (hasUnknownError) {\n      this._infoboxModel.set('state', 'unknown');\n    } else if (count === max) {\n      this._infoboxModel.set('state', MAX_LAYERS_REACHED);\n    } else {\n      this._infoboxModel.set('state', null);\n    }\n  },\n\n  _onExportImage: function () {\n    this.trigger('export-image', this);\n  },\n\n  _onRemoveMap: function () {\n    window.location = this._userModel.get('base_url');\n  },\n\n  _getDataLayerCount: function () {\n    return this._layerDefinitionsCollection.getNumberOfDataLayers();\n  },\n\n  _getMaxCount: function () {\n    return this._userModel.get('limits').max_layers;\n  },\n\n  _getTranslatedLayersLabel: function (count, max) {\n    return _t('editor.tab-pane.layers.title-label', {\n      count: count,\n      maxCount: max\n    });\n  },\n\n  _share: function () {\n    var self = this;\n\n    this._modals.create(function (modalModel) {\n      return new PublishView({\n        mapcapsCollection: self._mapcapsCollection,\n        modalModel: modalModel,\n        visDefinitionModel: self._visDefinitionModel,\n        privacyCollection: self._privacyCollection,\n        userModel: self._userModel,\n        configModel: self._configModel,\n        isOwner: true\n      });\n    }, {\n      breadcrumbsEnabled: true\n    });\n  },\n\n  _changeStyle: function (m) {\n    this.$el.toggleClass('is-dark');\n    this._mapTabPaneView.changeStyleMenu(m);\n  },\n\n  _setUpdateFromCreation: function () {\n    this._updatedModel.set({date: this._visDefinitionModel.get('created_at')});\n  },\n\n  _setUpdateFromMapcap: function (mapcaps) {\n    this._updatedModel.set({date: mapcaps[0].created_at});\n  },\n\n  _getMapcaps: function () {\n    var updateFromCreation = this._setUpdateFromCreation.bind(this);\n    var updateFromMapcap = this._setUpdateFromMapcap.bind(this);\n    var url = this._visDefinitionModel.mapcapsURL();\n    var data = {\n      api_key: this._configModel.get('api_key')\n    };\n\n    $.get(url, data)\n      .done(function (data) {\n        if (data.length > 0) {\n          updateFromMapcap(data);\n        } else {\n          updateFromCreation();\n        }\n      })\n      .fail(function () {\n        updateFromCreation();\n      });\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"EditorMenu js-editorMenu\">\\n  <a class=\"EditorMenu-logo js-editor-logo\" href=\"' +\n__e( url ) +\n'\">\\n    <svg width=\"32px\" height=\"32px\" viewBox=\"762 -58 32 32\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n      <g class=\"imago\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(762.000000, -58.000000)\">\\n        <circle class=\"Halo\" fill=\"#FFFFFF\" opacity=\"0.2\" cx=\"16\" cy=\"16\" r=\"16\"></circle>\\n        <circle class=\"point\" fill=\"#FFFFFF\" cx=\"16\" cy=\"16\" r=\"5.5\"></circle>\\n      </g>\\n    </svg>\\n  </a>\\n  <ul class=\"EditorMenu-navigation js-menu\"></ul>\\n</div>\\n<div class=\"Editor-panelWrapper js-editorPanel\">\\n  <div class=\"js-content\"></div>\\n</div>\\n';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar OptionsView = require('./settings/preview/preview-view');\nvar ScrollView = require('builder/components/scroll/scroll-view');\nvar Header = require('./editor-header.js');\nvar PublishView = require('builder/components/modals/publish/publish-view');\nvar ShareButtonView = require('./layers/share-button-view');\nvar PanelWithOptionsView = require('builder/components/view-options/panel-with-options-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'configModel',\n  'editorModel',\n  'mapDefinitionModel',\n  'mapcapsCollection',\n  'modals',\n  'overlaysCollection',\n  'privacyCollection',\n  'settingsCollection',\n  'userModel',\n  'visDefinitionModel'\n];\n\nmodule.exports = CoreView.extend({\n\n  module: 'editor:editor-settings-pane',\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._editorModel.set('edition', false);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    var header = new Header({\n      userModel: this._userModel,\n      editorModel: this._editorModel,\n      configModel: this._configModel,\n      mapcapsCollection: this._mapcapsCollection,\n      modals: this._modals,\n      visDefinitionModel: this._visDefinitionModel,\n      privacyCollection: this._privacyCollection,\n      clickPrivacyAction: this._share.bind(this),\n      onRemoveMap: this._onRemoveMap.bind(this)\n    });\n\n    header.bind('export-image', function () {\n      this.trigger('export-image', this);\n    }, this);\n\n    this.$el.append(header.render().$el);\n    this.addView(header);\n\n    var view = new PanelWithOptionsView({\n      className: 'Editor-content',\n      editorModel: this._editorModel,\n      infoboxModel: this._infoboxModel,\n      infoboxCollection: this._infoboxCollection,\n      createContentView: function () {\n        return new ScrollView({\n          createContentView: function () {\n            return new OptionsView({\n              mapDefinitionModel: this._mapDefinitionModel,\n              settingsCollection: this._settingsCollection,\n              overlaysCollection: this._overlaysCollection\n            });\n          }.bind(this)\n        });\n      }.bind(this),\n      createActionView: function () {\n        return new ShareButtonView({\n          visDefinitionModel: this._visDefinitionModel,\n          onClickAction: this._share.bind(this)\n        });\n      }.bind(this)\n    });\n\n    this.$el.append(view.render().$el);\n    this.addView(view);\n\n    return this;\n  },\n\n  _share: function () {\n    var publishView = this._modals.create(function (modalModel) {\n      return new PublishView({\n        mapcapsCollection: this._mapcapsCollection,\n        modalModel: modalModel,\n        visDefinitionModel: this._visDefinitionModel,\n        privacyCollection: this._privacyCollection,\n        userModel: this._userModel,\n        configModel: this._configModel,\n        isOwner: this._isOwner()\n      });\n    }.bind(this), {\n      breadcrumbsEnabled: true\n    });\n\n    this.addView(publishView);\n  },\n\n  _onRemoveMap: function () {\n    window.location = this._userModel.get('base_url');\n  },\n\n  _isOwner: function () {\n    return this._visDefinitionModel\n      .getPermissionModel()\n      .isOwner(this._userModel);\n  }\n});\n","var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar EditorSettingsPane = require('./editor-settings-pane');\nvar ExportImagePane = require('./export-image-pane/export-image-pane');\nvar StackLayoutView = require('builder/components/stack-layout/stack-layout-view');\nvar Notifier = require('builder/components/notifier/notifier');\n\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar REQUIRED_OPTS = [\n  'configModel',\n  'editorModel',\n  'mapcapsCollection',\n  'mapDefinitionModel',\n  'modals',\n  'overlaysCollection',\n  'privacyCollection',\n  'settingsCollection',\n  'visDefinitionModel',\n  'userModel',\n  'stateDefinitionModel',\n  'settingsCollection'\n];\n\nmodule.exports = CoreView.extend({\n  className: 'Editor-panel',\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n    this._editorModel.set('edition', false);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this._generateStackLayoutView();\n\n    var notifierView = Notifier.getView();\n    this.$el.append(notifierView.render().el);\n    this.addView(notifierView);\n\n    return this;\n  },\n\n  _generateStackLayoutView: function () {\n    var stackViewCollection = new Backbone.Collection([{\n      createStackView: function (stackLayoutModel, opts) {\n        return this._createEditorSettingsView(stackLayoutModel, opts).bind(this);\n      }.bind(this)\n    }]);\n\n    stackViewCollection.push({\n      createStackView: function (stackLayoutModel, opts) {\n        return this._createExportImageView(stackLayoutModel, opts).bind(this);\n      }.bind(this)\n    });\n\n    this._stackLayoutView = new StackLayoutView({\n      className: 'Editor-content',\n      collection: stackViewCollection\n    });\n    this.addView(this._stackLayoutView);\n    this.$el.append(this._stackLayoutView.render().$el);\n  },\n\n  _createEditorSettingsView: function (stackLayoutModel, opts) {\n    var view = new EditorSettingsPane({\n      className: 'Editor-content',\n      configModel: this._configModel,\n      editorModel: this._editorModel,\n      mapcapsCollection: this._mapcapsCollection,\n      mapDefinitionModel: this._mapDefinitionModel,\n      modals: this._modals,\n      overlaysCollection: this._overlaysCollection,\n      privacyCollection: this._privacyCollection,\n      settingsCollection: this._settingsCollection,\n      userModel: this._userModel,\n      visDefinitionModel: this._visDefinitionModel\n    });\n\n    view.bind('export-image', function () {\n      this._stackLayoutView.model.goToStep(1);\n    }, this);\n\n    return view;\n  },\n\n  _createExportImageView: function (stackLayoutModel, opts) {\n    var view = new ExportImagePane({\n      className: 'Editor-content',\n      canvasClassName: 'CDB-Map',\n      configModel: this._configModel,\n      stackLayoutModel: stackLayoutModel,\n      userModel: this._userModel,\n      visDefinitionModel: this._visDefinitionModel,\n      stateDefinitionModel: this._stateDefinitionModel,\n      mapDefinitionModel: this._mapDefinitionModel,\n      editorModel: this._editorModel,\n      settingsCollection: this._settingsCollection\n    });\n\n    return view;\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<nav class=\"CDB-NavMenu js-theme\">\\n  <ul class=\"CDB-NavMenu-inner CDB-Text is-semibold CDB-Size-medium js-menu\"></ul>\\n</nav>\\n<div class=\"Editor-content js-content\"></div>\\n';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar Backbone = require('backbone');\nvar EditorPane = require('./editor-pane');\nvar ExportImagePane = require('./export-image-pane/export-image-pane');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar StackLayoutView = require('builder/components/stack-layout/stack-layout-view');\n\nvar REQUIRED_OPTS = [\n  'userActions',\n  'modals',\n  'configModel',\n  'userModel',\n  'editorModel',\n  'pollingModel',\n  'analysisDefinitionNodesCollection',\n  'layerDefinitionsCollection',\n  'privacyCollection',\n  'widgetDefinitionsCollection',\n  'mapcapsCollection',\n  'mapDefinitionModel',\n  'visDefinitionModel',\n  'mapStackLayoutModel',\n  'stateDefinitionModel',\n  'selectedTabItem',\n  'settingsCollection',\n  'routeModel'\n];\n\nmodule.exports = CoreView.extend({\n\n  className: 'Editor-content',\n\n  events: {\n    'click .js-add': '_addItem'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this._generateStackLayoutView();\n    return this;\n  },\n\n  _generateStackLayoutView: function () {\n    var stackViewCollection = new Backbone.Collection([{\n      createStackView: function (stackLayoutModel, opts) {\n        return this._createEditorView(stackLayoutModel, opts).bind(this);\n      }.bind(this)\n    }]);\n\n    stackViewCollection.push({\n      createStackView: function (stackLayoutModel, opts) {\n        return this._createExportImageView(stackLayoutModel, opts).bind(this);\n      }.bind(this)\n    });\n\n    this._stackLayoutView = new StackLayoutView({\n      className: 'Editor-content',\n      collection: stackViewCollection\n    });\n\n    this.addView(this._stackLayoutView);\n    this.$el.append(this._stackLayoutView.render().$el);\n  },\n\n  _createEditorView: function (stackLayoutModel, opts) {\n    var view = new EditorPane({\n      analysisDefinitionNodesCollection: this._analysisDefinitionNodesCollection,\n      configModel: this._configModel,\n      editorModel: this._editorModel,\n      layerDefinitionsCollection: this._layerDefinitionsCollection,\n      mapStackLayoutModel: this._mapStackLayoutModel,\n      mapcapsCollection: this._mapcapsCollection,\n      modals: this._modals,\n      pollingModel: this._pollingModel,\n      privacyCollection: this._privacyCollection,\n      stateDefinitionModel: this._stateDefinitionModel,\n      userActions: this._userActions,\n      userModel: this._userModel,\n      visDefinitionModel: this._visDefinitionModel,\n      widgetDefinitionsCollection: this._widgetDefinitionsCollection,\n      selectedTabItem: this._selectedTabItem,\n      routeModel: this._routeModel\n    });\n\n    view.bind('export-image', function () {\n      this._stackLayoutView.model.goToStep(1);\n    }, this);\n\n    return view;\n  },\n\n  _createExportImageView: function (stackLayoutModel, opts) {\n    var view = new ExportImagePane({\n      visDefinitionModel: this._visDefinitionModel,\n      canvasClassName: 'CDB-Map',\n      configModel: this._configModel,\n      stackLayoutModel: stackLayoutModel,\n      userModel: this._userModel,\n      mapDefinitionModel: this._mapDefinitionModel,\n      stateDefinitionModel: this._stateDefinitionModel,\n      editorModel: this._editorModel,\n      settingsCollection: this._settingsCollection\n    });\n\n    return view;\n  }\n});\n","var Backbone = require('backbone');\nvar _ = require('underscore');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar REQUIRED_OPTS = [\n  'userModel',\n  'hasGoogleBasemap'\n];\n\nvar DIMENSION_LIMIT = 8192;\n\nvar OPTIONS = [{\n  type: 'png',\n  label: '.png',\n  className: 'track-ImageExport track-typePNG'\n}, {\n  type: 'jpg',\n  label: '.jpg',\n  className: 'track-ImageExport track-typeJPG'\n}];\n\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    type: 'none',\n    title: ''\n  },\n\n  initialize: function (attrs, opts) {\n    checkAndBuildOpts(attrs, REQUIRED_OPTS, this);\n\n    this.schema = this._generateSchema();\n    this._setSchema();\n    this.on('change:format change:width change:height', this._setSchema, this);\n  },\n\n  _setSchema: function () {\n    this.schema = this._generateSchema();\n  },\n\n  _generateSchema: function () {\n    return {\n      width: {\n        type: 'Number',\n        title: _t('editor.export-image.properties.width') + ' (px)',\n        validators: ['required', this._validateDimension.bind(this)],\n        showSlider: false,\n        editorAttrs: {\n          className: 'track-ImageExport track-inputWidth',\n          placeholder: _t('editor.export-image.properties.width')\n        }\n      },\n      height: {\n        type: 'Number',\n        title: _t('editor.export-image.properties.height') + ' (px)',\n        validators: ['required', this._validateDimension.bind(this)],\n        showSlider: false,\n        editorAttrs: {\n          className: 'track-ImageExport track-inputHeight',\n          placeholder: _t('editor.export-image.properties.height')\n        }\n      },\n      format: {\n        type: 'Radio',\n        title: _t('editor.export-image.properties.format'),\n        options: _.map(OPTIONS, function (d) {\n          return {\n            val: d.type,\n            label: d.label,\n            className: d.className\n          };\n        }, this)\n      }\n    };\n  },\n\n  _validateDimension: function (value, formValues) {\n    var numericValue = +value;\n    var limit = DIMENSION_LIMIT;\n\n    if (_.isNumber(numericValue) && numericValue >= 1 && numericValue <= limit) {\n      return null; // valid dimension\n    }\n\n    return {\n      message: _t('editor.export-image.invalid-dimension', { limit: limit })\n    };\n  },\n\n  setErrors: function (errors) {\n    // we don't want to set these errors as part as attributes\n    // then we manually check if we should trigger the custom event\n    var shouldTrigger = errors !== this._validationErrors;\n    this._validationErrors = errors;\n    shouldTrigger && this.trigger('change:errors');\n  },\n\n  canExport: function () {\n    return _.isUndefined(this._validationErrors);\n  },\n\n  toJSON: function () {\n    return _.extend(\n      this.attributes,\n      {\n        type: this.get('type')\n      }\n    );\n  }\n});\n","var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar template = require('./export-image-form.tpl');\nrequire('builder/components/form-components/index');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar REQUIRED_OPTS = [\n  'formModel'\n];\n\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this._removeFormView();\n    this._renderForm();\n    this._initBinds();\n    return this;\n  },\n\n  _renderForm: function () {\n    this.clearSubViews();\n    this._removeFormView();\n\n    this._formView = new Backbone.Form({\n      template: template,\n      model: this._formModel\n    });\n\n    this.$('form').on('submit', function (e) {\n      e.preventDefault();\n    });\n\n    this.$el.append(this._formView.render().$el);\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._formView, 'change', this._updateChanges);\n    this.listenTo(this._formModel, 'change:width change:height', this._updateSchema);\n  },\n\n  _updateSchema: function () {\n    this._formView.fields.width.setValue(this._formModel.get('width'));\n    this._formView.fields.height.setValue(this._formModel.get('height'));\n    this._updateChanges();\n  },\n\n  _updateChanges: function () {\n    var errors = this._formView.commit({validate: true});\n    this._formView.model.setErrors(errors);\n  },\n\n  _removeFormView: function () {\n    this._formView && this._formView.remove();\n  },\n\n  clean: function () {\n    this.$('form').off('submit');\n    this._removeFormView();\n    CoreView.prototype.clean.call(this);\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"u-flex u-bSpace--xl\">\\n  <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">1</div>\\n    <div class=\"Editor-HeaderInfo-inner CDB-Text\" data-fields=\"width,height\">\\n    <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n      <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.export-image.properties.size') ) +\n'</h2>\\n    </div>\\n    <p class=\"CDB-Text u-upperCase CDB-FontSize-small u-altTextColor u-bSpace--m\">' +\n__e( _t('editor.export-image.properties.size-subtitle') ) +\n'</p>\\n  </div>\\n</div>\\n<div class=\"u-flex u-bSpace--xl\">\\n  <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">2</div>\\n    <div class=\"Editor-HeaderInfo-inner CDB-Text\" data-fields=\"format\">\\n    <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n      <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.export-image.properties.format') ) +\n'</h2>\\n    </div>\\n    <p class=\"CDB-Text u-upperCase CDB-FontSize-small u-altTextColor u-bSpace--m\">' +\n__e( _t('editor.export-image.properties.format-subtitle') ) +\n'</p>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var $ = require('jquery');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar FooterView = require('./footer/footer-view');\nvar ExportImageFormView = require('./export-image-form-view.js');\nvar ExportImageFormModel = require('./export-image-form-model');\nvar ExportImageWidget = require('./export-image-widget');\nvar template = require('./export-image-pane.tpl');\nvar Utils = require('builder/helpers/utils');\nvar Notifier = require('builder/components/notifier/notifier');\nvar browser = require('builder/helpers/browser-detect');\n\nvar Infobox = require('builder/components/infobox/infobox-factory');\nvar InfoboxView = require('builder/components/infobox/infobox-view');\nvar InfoboxModel = require('builder/components/infobox/infobox-model');\nvar InfoboxCollection = require('builder/components/infobox/infobox-collection');\n\nvar DEFAULT_EXPORT_FORMAT = 'png';\nvar DEFAULT_EXPORT_WIDTH = 300;\nvar DEFAULT_EXPORT_HEIGHT = 200;\n\nvar CARTO_ATTRIBUTION = '@CARTO';\nvar ATTRIBUTION_WIDTH = 15;\nvar ATTRIBUTION_HEIGHT = 16;\n\nvar NOTIFICATION_ID = 'exportImageNotification';\nvar LOGO_PATH = '/unversioned/images/carto.png';\n\nvar GMAPS_DIMENSION_LIMIT = 640;\nvar GMAPS_DIMENSION_LIMIT_PREMIUM = 2048;\n\nvar MIMETYPES = {\n  'jpg': 'image/jpeg',\n  'png': 'image/png'\n};\n\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar REQUIRED_OPTS = [\n  'canvasClassName',\n  'configModel',\n  'stackLayoutModel',\n  'userModel',\n  'visDefinitionModel',\n  'stateDefinitionModel',\n  'mapDefinitionModel',\n  'editorModel',\n  'settingsCollection'\n];\n\nmodule.exports = CoreView.extend({\n  className: 'Editor-content',\n\n  events: {\n    'click .js-back': '_goStepBack'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._canvasModel = new Backbone.Model();\n    this._$map = $('.' + this._canvasClassName);\n\n    var width = DEFAULT_EXPORT_WIDTH;\n    var height = DEFAULT_EXPORT_HEIGHT;\n\n    var x = Math.ceil(this._$map.width() / 2 - (width / 2));\n    var y = Math.ceil(this._$map.height() / 2 - (height / 2));\n\n    this._exportImageFormModel = new ExportImageFormModel({\n      userModel: this._userModel,\n      hasGoogleBasemap: this._hasGoogleMapsBasemap(),\n      format: DEFAULT_EXPORT_FORMAT,\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    });\n  },\n\n  _isLogoActive: function () {\n    var canRemoveLogo = this._userModel.get('actions').remove_logo;\n    var logoSetting = this._settingsCollection.findWhere({\n      setting: 'logo'\n    });\n\n    var isLogoActive = logoSetting && logoSetting.get('enabler') || false;\n    if (!canRemoveLogo || canRemoveLogo && isLogoActive) {\n      return true;\n    }\n\n    if (canRemoveLogo && !isLogoActive) {\n      return false;\n    }\n  },\n\n  _addErrorNotification: function (error) {\n    Notifier.addNotification({\n      id: NOTIFICATION_ID,\n      status: 'error',\n      closable: true,\n      button: false,\n      delay: Notifier.DEFAULT_DELAY,\n      info: error + ' ' + _t('editor.maps.export-image.errors.try-again')\n    });\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this.$el.append(\n      template({\n        mapName: this._getMapName()\n      })\n    );\n\n    this._createWidget();\n    this._createForm();\n    this._createDisclaimer();\n    this._createFooter();\n\n    return this;\n  },\n\n  _createForm: function () {\n    this._exportImageFormView = new ExportImageFormView({\n      formModel: this._exportImageFormModel,\n      canvasModel: this._exportImageFormModel\n    });\n\n    this.$('.js-content').append(this._exportImageFormView.render().$el);\n    this.addView(this._exportImageFormView);\n  },\n\n  _createDisclaimer: function () {\n    var infoboxSstates = [{\n      state: 'disclaimer',\n      createContentView: function () {\n        return Infobox.createWithAction({\n          type: 'warning',\n          title: _t('editor.maps.export-image.disclaimer.title'),\n          body: _t('editor.maps.export-image.disclaimer.body')\n        });\n      }\n    }];\n\n    this._infoboxModel = new InfoboxModel({\n      state: 'disclaimer'\n    });\n\n    this._infoboxCollection = new InfoboxCollection(infoboxSstates);\n\n    this._infoboxView = new InfoboxView({\n      infoboxModel: this._infoboxModel,\n      infoboxCollection: this._infoboxCollection\n    });\n\n    this.$('.js-disclaimer').append(this._infoboxView.render().el);\n    this.addView(this._infoboxView);\n  },\n\n  _createFooter: function () {\n    this._footerView = new FooterView({\n      configModel: this._configModel,\n      userModel: this._userModel,\n      formModel: this._exportImageFormModel\n    });\n\n    this.addView(this._footerView);\n    this._footerView.bind('finish', this._exportImage, this);\n    this.$('.js-footer').append(this._footerView.render().el);\n  },\n\n  _createWidget: function () {\n    this._exportImageWidget = new ExportImageWidget({\n      mapViewClass: 'CDB-Map-wrapper',\n      dashboardCanvasClass: 'CDB-Dashboard-canvas',\n      model: this._exportImageFormModel,\n      stateDefinitionModel: this._stateDefinitionModel,\n      mapDefinitionModel: this._mapDefinitionModel\n    });\n\n    this.addView(this._exportImageWidget);\n    this._$map.prepend(this._exportImageWidget.render().$el);\n  },\n\n  _getStaticMapURL: function () {\n    var getStaticImageURL = this._mapDefinitionModel.getStaticImageURLTemplate();\n    var imageMapMetadata = this._mapDefinitionModel.getImageExportMetadata();\n    return getStaticImageURL({\n      zoom: imageMapMetadata.zoom,\n      width: this._exportImageFormModel.get('width'),\n      height: this._exportImageFormModel.get('height'),\n      lat: this._exportImageFormModel.get('lat'),\n      lng: this._exportImageFormModel.get('lng'),\n      format: 'png' // we always use 'png' to allow merging layers\n    });\n  },\n\n  _removeNotification: function () {\n    if (Notifier.getNotification(NOTIFICATION_ID)) {\n      Notifier.removeNotification(NOTIFICATION_ID);\n    }\n  },\n\n  _exportImage: function () {\n    var self = this;\n\n    this._removeNotification();\n\n    var def = $.Deferred();\n\n    var logo = function () {\n      return self._loadLogo();\n    };\n\n    var basemap = function () {\n      if (self._hasGoogleMapsBasemap()) {\n        return self._loadGMapBasemap();\n      }\n    };\n\n    var image = function () {\n      return self._onLoadImage(self._downloadImage.bind(self));\n    };\n\n    var attribution = function () {\n      return self._loadAttribution();\n    };\n\n    def.then(logo)\n      .then(basemap)\n      .then(attribution)\n      .then(image)\n      .fail(this._onFail.bind(this));\n\n    def.resolve();\n  },\n\n  _onFail: function (error) {\n    this._footerView.stopLoader();\n    this._addErrorNotification(error);\n  },\n\n  _getMapName: function () {\n    return this._visDefinitionModel.get('name');\n  },\n\n  _downloadImage: function (canvas) {\n    var browserInfo = browser();\n    var imageFormat = this._exportImageFormModel.get('format');\n    var fileName = this._getMapName() + '.' + imageFormat;\n\n    if (canvas.msToBlob) {\n      var image = canvas.msToBlob();\n      window.navigator.msSaveBlob(\n        new Blob([image], { type: MIMETYPES[imageFormat] }), // eslint-disable-line\n        fileName\n      );\n    } else {\n      var dataUri = canvas.toDataURL(MIMETYPES[imageFormat]);\n      var link = document.createElement('a');\n      document.body.appendChild(link);\n\n      link.download = fileName;\n      link.href = dataUri;\n\n      if (browserInfo.name !== 'Safari') {\n        link.target = '_blank';\n      } else {\n        dataUri.replace(/^data:image\\/[^;]/, 'data:application/octet-stream');\n      }\n\n      link.click();\n\n      document.body.removeChild(link);\n    }\n\n    this._footerView.stopLoader();\n  },\n\n  _hasGoogleMapsBasemap: function () {\n    var imageMapMetadata = this._mapDefinitionModel.getImageExportMetadata();\n    return imageMapMetadata.provider === 'googlemaps';\n  },\n\n  _onLoadImage: function (callback) {\n    var self = this;\n    var url = this._getStaticMapURL();\n\n    var basemap = this._basemap;\n\n    var width = +this._exportImageFormModel.get('width');\n    var height = +this._exportImageFormModel.get('height');\n\n    var image = new Image(); // eslint-disable-line\n\n    image.setAttribute('crossOrigin', 'anonymous');\n\n    image.onload = function () {\n      var canvas = document.createElement('canvas');\n      var ctx = canvas.getContext('2d');\n\n      canvas.width = this.naturalWidth;\n      canvas.height = this.naturalHeight;\n\n      if (basemap) {\n        ctx.drawImage(basemap, 0, 0);\n      }\n\n      ctx.drawImage(this, 0, 0);\n\n      if (self._isLogoActive()) {\n        self._drawLogo(ctx, width, height);\n      }\n\n      self._drawAttribution(ctx, width, height);\n\n      callback(canvas);\n    };\n\n    image.onerror = function (e) {\n      self._onFail(_t('editor.maps.export-image.errors.error-image'));\n    };\n\n    image.src = url;\n  },\n\n  _drawLogo: function (ctx, width, height) {\n    if (this._logo) {\n      var left = (width / 2) - (this._logo.width / 2);\n      var top = height - this._logo.height - 5;\n\n      ctx.drawImage(this._logo, left, top);\n    }\n  },\n\n  _drawAttribution: function (ctx, width, height) {\n    if (this._attribution) {\n      var left = width - this._attribution.width - 3;\n      var top = height - this._attribution.height;\n\n      if (this._hasGoogleMapsBasemap()) {\n        var attributionWidth = this._$map.find('.gm-style-cc').width();\n\n        if (attributionWidth >= width / 2) {\n          top = top - ATTRIBUTION_HEIGHT / 2;\n        }\n\n        top = height - this._attribution.height - ATTRIBUTION_HEIGHT;\n      }\n\n      ctx.drawImage(this._attribution, left, top);\n    }\n  },\n\n  _getDimensionString: function () {\n    var width = this._exportImageFormModel.get('width');\n    var height = this._exportImageFormModel.get('height');\n\n    return width + 'x' + height;\n  },\n\n  _getCenterString: function () {\n    var lat = +this._exportImageFormModel.get('lat').toFixed(6);\n    var lng = +this._exportImageFormModel.get('lng').toFixed(6);\n\n    return lat + ',' + lng;\n  },\n\n  _parseAttribution: function (attribution) {\n    return Utils.stripHTML(\n      attribution\n        .join(' ')\n        .replace(/&copy;/g, '©')\n    );\n  },\n\n  _loadAttribution: function () {\n    var self = this;\n    var visMetadata = this._mapDefinitionModel.getImageExportMetadata();\n    var deferred = $.Deferred();\n\n    var image = new Image(); // eslint-disable-line\n    var canvas = document.createElement('canvas');\n    var ctx = canvas.getContext('2d');\n\n    var text = this._hasGoogleMapsBasemap() ? CARTO_ATTRIBUTION : this._parseAttribution(visMetadata.attribution);\n    var dimension = ctx.measureText(text);\n    var width = dimension.width;\n\n    ctx.font = '11px';\n    ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';\n    ctx.fillRect(-ATTRIBUTION_WIDTH, 0, width + ATTRIBUTION_WIDTH + 2, ATTRIBUTION_HEIGHT - 3);\n\n    ctx.fillStyle = '#333';\n    ctx.fillText(text, 0, 10);\n\n    image.onload = function () {\n      self._attribution = this;\n      deferred.resolve();\n    };\n\n    image.onerror = function () {\n      deferred.reject(_t('editor.maps.export-image.errors.error-attribution'));\n    };\n\n    image.width = width;\n    image.height = ATTRIBUTION_HEIGHT - 3;\n    image.src = canvas.toDataURL();\n\n    return deferred.promise();\n  },\n\n  _loadLogo: function () {\n    var self = this;\n    var deferred = $.Deferred();\n    var logoUrl = this._configModel.get('app_assets_base_url') + LOGO_PATH;\n\n    if (this._isLogoActive()) {\n      this._getImageFromUrl(logoUrl)\n        .then(function (image) {\n          self._logo = image;\n          deferred.resolve();\n        })\n        .fail(function () {\n          deferred.reject(_t('editor.maps.export-image.errors.error-image'));\n        });\n    } else {\n      deferred.resolve();\n    }\n    return deferred.promise();\n  },\n\n  _loadGMapBasemap: function () {\n    var self = this;\n    var apiUrl = self._configModel.get('base_url') + '/api/v1/viz/' + self._visDefinitionModel.get('id') + '/google_maps_static_image';\n    var visMetadata = this._mapDefinitionModel.getImageExportMetadata();\n    var deferred = $.Deferred();\n\n    var onError = function () {\n      deferred.reject(_t('editor.maps.export-image.errors.error-basemap'));\n    };\n\n    var onSuccess = function (data) {\n      var limit = data.url.indexOf('signature') !== -1 ? GMAPS_DIMENSION_LIMIT_PREMIUM : GMAPS_DIMENSION_LIMIT;\n\n      if (self._validGMapDimension(data.url, limit)) {\n        self._getImageFromUrl(data.url)\n          .then(function (image) {\n            self._basemap = image;\n            deferred.resolve();\n          })\n          .fail(onError);\n      } else {\n        deferred.reject(_t('editor.export-image.invalid-dimension', { limit: limit }));\n      }\n    };\n\n    $.ajax({\n      url: apiUrl,\n      data: {\n        center: this._getCenterString(),\n        size: this._getDimensionString(),\n        zoom: visMetadata.zoom\n      },\n      success: onSuccess,\n      error: onError\n    });\n\n    return deferred.promise();\n  },\n\n  _getImageFromUrl: function (url) {\n    var deferred = $.Deferred();\n    var image = new Image(); // eslint-disable-line\n\n    image.setAttribute('crossOrigin', 'anonymous');\n\n    image.onload = function () {\n      deferred.resolve(this);\n    };\n\n    image.onerror = function () {\n      deferred.reject();\n    };\n\n    image.src = url;\n\n    return deferred.promise();\n  },\n\n  _validGMapDimension: function (url, limit) {\n    var width = this._exportImageFormModel.get('width');\n    var height = this._exportImageFormModel.get('height');\n\n    return width <= limit && height <= limit;\n  },\n\n  _goStepBack: function () {\n    this._stackLayoutModel.prevStep();\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<ul class=\"Editor-breadcrumb\">\\n  <li class=\"Editor-breadcrumbItem CDB-Text CDB-Size-medium u-actionTextColor\">\\n    <button class=\"js-back\">\\n      <i class=\"CDB-IconFont CDB-IconFont-arrowPrev Size-large u-rSpace\"></i>\\n\\n      <span class=\"Editor-breadcrumbLink\">' +\n__e( _t('back') ) +\n'</span>\\n    </button>\\n  </li>\\n\\n  <li class=\"Editor-breadcrumbItem CDB-Text CDB-Size-medium\">\\n    <span class=\"Editor-breadcrumbSep\"> / </span> ' +\n__e( _t('editor.maps.export-image.title') ) +\n'\\n  </li>\\n</ul>\\n\\n<div class=\"Editor-HeaderInfoEditor\">\\n  <div class=\"Editor-HeaderInfo-inner Editor-HeaderInfo-inner--wide\">\\n    <div class=\"Editor-HeaderInfo\">\\n      <div class=\"CDB-Text CDB-Size-huge is-light u-ellipsis\">' +\n__e( mapName ) +\n'</div>\\n    </div>\\n  </div>\\n</div>\\n\\n<div class=\"Editor-content js-content\"></div>\\n<div class=\"js-disclaimer\"></div>\\n<div class=\"Options-bar Options-bar--right u-flex js-footer\"></div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar $ = require('jquery');\nvar CoreView = require('backbone/core-view');\nvar template = require('./export-image-widget.tpl');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar TRACK_CONTEXT_CLASS = 'track-ImageExport';\n\nvar REQUIRED_OPTS = [\n  'mapViewClass',\n  'dashboardCanvasClass',\n  'stateDefinitionModel',\n  'mapDefinitionModel'\n];\n\nmodule.exports = CoreView.extend({\n  className: 'ExportImageView',\n\n  events: {\n    'mouseenter .js-canvas': '_onEnter',\n    'mouseleave .js-canvas': '_onLeave'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._$dashBoardCanvas = $('.' + this._dashboardCanvasClass);\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.$el.append(template(this.model.attributes));\n    this._initViews();\n\n    return this;\n  },\n\n  _initViews: function () {\n    this._setupCanvas();\n    this._updateHelpers();\n\n    var x = +this.model.get('x');\n    var y = +this.model.get('y');\n    var width = +this.model.get('width');\n    var height = +this.model.get('height');\n\n    this._updateCoordinates(x, y, width, height);\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.model, 'change:x change:y change:width change:height', this._updateHelpers);\n    this.listenTo(this._stateDefinitionModel, 'change:json', this._onChangeMap);\n\n    this._resize = _.debounce(this._onResizeWindow.bind(this), 20);\n    $(window).on('resize', this._resize);\n\n    this.listenTo(this._stateDefinitionModel, 'change', this._updateCanvasCoordinates);\n  },\n\n  _onEnter: function () {\n    _.debounce(this.$el.addClass('is-top'), 50);\n  },\n\n  _onLeave: function () {\n    _.debounce(this.$el.removeClass('is-top'), 50);\n  },\n\n  _onResizeWindow: function (e) {\n    if (e.target === window) {\n      var latLngToPixel = this._mapDefinitionModel.latLngToPixel;\n\n      var coordinates = latLngToPixel({\n        lat: this.model.get('lat'),\n        lng: this.model.get('lng')\n      });\n\n      var width = this.model.get('width');\n      var height = this.model.get('height');\n\n      this.model.set({\n        x: coordinates.x - width / 2,\n        y: coordinates.y - height / 2\n      });\n\n      this._updateCanvasCoordinates();\n      this._updateHelpers();\n    }\n  },\n\n  _setupCanvas: function () {\n    this.$('.js-canvas').resizable({\n      resize: this._onResize.bind(this),\n      handles: 'n, e, s, w, ne, se, sw, nw',\n      containment: this._$dashBoardCanvas\n    });\n\n    this.$('.js-canvas').draggable({\n      drag: this._updateCanvasCoordinates.bind(this),\n      stop: this._updateCanvasCoordinates.bind(this),\n      containment: this._$dashBoardCanvas\n    });\n\n    this._setupTracks();\n\n    this.$('.js-canvas').css({\n      top: +this.model.get('x'),\n      left: +this.model.get('y'),\n      width: +this.model.get('width'),\n      height: +this.model.get('height')\n    });\n  },\n\n  _updateHelpers: function () {\n    var x = +this.model.get('x');\n    var y = +this.model.get('y');\n    var width = +this.model.get('width');\n    var height = +this.model.get('height');\n\n    var size = this._mapDefinitionModel.getMapViewSize();\n    var canvasWidth = size && size.x || 0;\n    var canvasHeight = size && size.y || 0;\n\n    var bottom = y + height + 1;\n    var right = x + width + 1;\n\n    this.$('.js-canvas').css({\n      top: y,\n      left: x,\n      height: height,\n      width: width\n    });\n\n    if (x >= 0 && y >= 0) {\n      this.$('.js-helper-north').css({ top: 0, width: right, height: y + 1 });\n      this.$('.js-helper-west').css({ left: 0, top: y + 1, width: x + 1, height: height });\n      this.$('.js-helper-south').css({ top: bottom, left: 0, width: canvasWidth, height: canvasHeight - height - y });\n      this.$('.js-helper-east').css({ left: right, top: 0, width: canvasWidth - width - x - 1, height: bottom });\n    }\n\n    if (right + 1 >= canvasWidth) {\n      this.$('.js-helper-east').css('width', 0);\n    }\n    if (x <= 0) {\n      this.$('.js-helper-west').css('width', 0);\n    }\n    if (bottom + 1 >= canvasHeight) {\n      this.$('.js-helper-south').css('height', 0);\n    }\n    if (y <= 0) {\n      this.$('.js-helper-north').css('height', 0);\n    }\n  },\n\n  _updateCanvasCoordinates: function () {\n    var width = this.$('.js-canvas').width();\n    var height = this.$('.js-canvas').height();\n    var x = this.$('.js-canvas').position().left;\n    var y = this.$('.js-canvas').position().top;\n\n    this._updateCoordinates(x, y, width, height);\n  },\n\n  _onChangeMap: function () {\n    var coordinates = this._calcCenter();\n\n    this.model.set({\n      lat: coordinates.lat,\n      lng: coordinates.lng\n    });\n  },\n\n  _onResize: function (e, ui) {\n    var width = ui.helper.width();\n    var height = ui.helper.height();\n    var x = ui.helper.position().left;\n    var y = ui.helper.position().top;\n\n    this._updateCoordinates(x, y, width, height);\n  },\n\n  _updateCoordinates: function (x, y, width, height) {\n    var coordinates = this._calcCenter();\n\n    this.model.set({\n      x: x,\n      y: y,\n      width: width,\n      height: height,\n      lat: coordinates.lat,\n      lng: coordinates.lng\n    });\n  },\n\n  _calcCenter: function () {\n    var x = this.model.get('x') + this.model.get('width') / 2;\n    var y = this.model.get('y') + this.model.get('height') / 2;\n    var pixelToLatLng = this._mapDefinitionModel.pixelToLatLng;\n    return pixelToLatLng({ x: x, y: y });\n  },\n\n  _setupTracks: function () {\n    this.$('.js-canvas .ui-resizable-nw').addClass(TRACK_CONTEXT_CLASS + ' ' + 'track-nodeTopLeft');\n    this.$('.js-canvas .ui-resizable-n').addClass(TRACK_CONTEXT_CLASS + ' ' + 'track-nodeTopCenter');\n    this.$('.js-canvas .ui-resizable-ne').addClass(TRACK_CONTEXT_CLASS + ' ' + 'track-nodeTopRight');\n    this.$('.js-canvas .ui-resizable-w').addClass(TRACK_CONTEXT_CLASS + ' ' + 'track-nodeMiddleLeft');\n    this.$('.js-canvas .ui-resizable-e').addClass(TRACK_CONTEXT_CLASS + ' ' + 'track-nodeMiddleCenter');\n    this.$('.js-canvas .ui-resizable-sw').addClass(TRACK_CONTEXT_CLASS + ' ' + 'track-nodeBottomLeft');\n    this.$('.js-canvas .ui-resizable-s').addClass(TRACK_CONTEXT_CLASS + ' ' + 'track-nodeBottomCenter');\n    this.$('.js-canvas .ui-resizable-se').addClass(TRACK_CONTEXT_CLASS + ' ' + 'track-nodeBottomRight');\n  },\n\n  clean: function () {\n    $(window).off('resize', this._resize);\n    CoreView.prototype.clean.apply(this);\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"ExportHelper ExportHelper--north js-export-helper js-helper-north\"></div>\\n<div class=\"ExportHelper ExportHelper--west  js-export-helper js-helper-west\"></div>\\n<div class=\"ExportHelper ExportHelper--south js-export-helper js-helper-south\"></div>\\n<div class=\"ExportHelper ExportHelper--east  js-export-helper js-helper-east\"></div>\\n<div class=\"CanvasExport js-canvas\"></div>\\n';\n\n}\nreturn __p\n}","var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar template = require('./footer.tpl');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar LOADING = 'loading';\n\nvar REQUIRED_OPTS = [\n  'userModel',\n  'configModel',\n  'formModel'\n];\n\nmodule.exports = CoreView.extend({\n  className: 'Editor-FooterInfoEditor',\n\n  events: {\n    'click .js-ok': '_finish'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this.model = new Backbone.Model({ state: '' });\n\n    this.listenTo(this.model, 'change:state', this.render);\n    this.listenTo(this._formModel, 'change:errors', this.render);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template({\n      isLoading: this._isLoading(),\n      isDisabled: !(this._formModel.canExport() && !this._isLoading())\n    }));\n\n    return this;\n  },\n\n  stopLoader: function (e) {\n    this.model.unset('state');\n  },\n\n  _isLoading: function () {\n    return this.model.get('state') === LOADING;\n  },\n\n  _finish: function (e) {\n    this.killEvent(e);\n    this.model.set('state', LOADING);\n    this.trigger('finish', this);\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<button class=\"CDB-Button CDB-Button--loading CDB-Button--primary js-ok track-ImageExport track-export\\n  ';\n if (isLoading || isDisabled) { ;\n__p += ' is-disabled ';\n } ;\n__p += '\\n  ';\n if (isLoading) { ;\n__p += ' is-loading ';\n } ;\n__p += '\\n  \"\\n  ';\n if (isDisabled) { ;\n__p += ' disabled ';\n } ;\n__p += '>\\n  <div class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-small u-upperCase u-flex\">\\n    ' +\n__e( _t('editor.maps.export-image.export') ) +\n'\\n  </div>\\n  <div class=\"CDB-Button-loader CDB-LoaderIcon is-white\">\\n    <svg class=\"CDB-LoaderIcon-spinner\" viewbox=\"0 0 50 50\">\\n      <circle class=\"CDB-LoaderIcon-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"/>\\n    </svg>\\n  </div>\\n</button>\\n';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar template = require('./feedback-button.tpl');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\n\nmodule.exports = CoreView.extend({\n\n  tagName: 'a',\n  className: 'EditorMenu-feedback typeform-share button js-feedback',\n\n  attributes: {\n    href: 'https://docs.google.com/forms/d/e/1FAIpQLScBQUWd-TP3Qy514DOCNg-KoLrViHijUR5giLAMS-3jmDnrPg/viewform',\n    target: '_blank'\n  },\n\n  events: {\n    'click': '_onClick'\n  },\n\n  initialize: function (opts) {\n    if (!opts.modals) throw new Error('modals is required');\n    this._modals = opts.modals;\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this.$el.append(template());\n\n    var tooltip = new TipsyTooltipView({\n      el: this.el,\n      gravity: 'w',\n      title: function () {\n        return _t('feedback');\n      }\n    });\n    this.addView(tooltip);\n\n    return this;\n  },\n\n  _onClick: function () {\n    this.$el.blur();\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"18px\" height=\"16px\" viewBox=\"-1 -1 18 16\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n <g id=\"feedback\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\\n   <path d=\"M16,11 L8,11 L5,14 L5,11 L0,11 L0,0 L16,0 L16,11 Z M7.29289322,10.2928932 L7.58578644,10 L8,10 L15,10.0047607 L15.0084229,1 L1,0.993103027 L1,10 L5,10 L6,10 L6,11 L6,11.5374756 L7.29289322,10.2928932 Z\" id=\"Combined-Shape\" fill=\"#FFFFFF \"></path>\\n   <rect id=\"Rectangle-25\" fill=\"#FFFFFF \" x=\"4\" y=\"3\" width=\"8\" height=\"1\"></rect>\\n   <rect id=\"Rectangle-25\" fill=\"#FFFFFF \" x=\"4\" y=\"5\" width=\"8\" height=\"1\"></rect>\\n   <rect id=\"Rectangle-25\" fill=\"#FFFFFF \" x=\"4\" y=\"7\" width=\"5\" height=\"1\"></rect>\\n </g>\\n</svg>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<h2 class=\"Inline-editor\">\\n  <div class=\"CDB-Text CDB-Size-huge is-light u-ellipsis js-title Inline-editor-text\">' +\n__e( name ) +\n'</div>\\n  <input type=\"text\" name=\"text\" class=\"Inline-editor-input Inline-editor-input--small CDB-Text CDB-InputText js-input\" value=\"' +\n__e( name ) +\n'\" readonly>\\n</h2>';\n\n}\nreturn __p\n}","var $ = require('jquery');\nvar cdb = require('internal-carto.js');\nvar CoreView = require('backbone/core-view');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view.js');\nvar NotificationErrorMessageHandler = require('builder/editor/layers/notification-error-message-handler');\n\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    if (!opts.analysisNode) throw new Error('analysisNode is required');\n    if (!opts.element) throw new Error('element is required');\n    if (!opts.triggerSelector) throw new Error('triggerSelector is required');\n\n    this.analysisNode = opts.analysisNode;\n    this.$el = opts.element;\n    this.selector = opts.triggerSelector;\n\n    this.$el.on('mouseover', this.selector, this._showTooltip.bind(this));\n    this.$el.on('mouseout', this.selector, this._destroyTooltip.bind(this));\n    this.$el.on('mouseleave', this.selector, this._destroyTooltip.bind(this));\n  },\n\n  _showTooltip: function (e) {\n    var status = this.analysisNode.get('status');\n\n    if (status === 'failed') {\n      var message = NotificationErrorMessageHandler.extractErrorFromAnalysisNode(this.analysisNode);\n\n      this.tooltip = this._createTooltip({\n        $el: $(e.target),\n        msg: message.message\n      });\n\n      this.tooltip.showTipsy();\n    }\n  },\n\n  _createTooltip: function (opts) {\n    return new TipsyTooltipView({\n      el: opts.$el,\n      title: function () {\n        return opts.msg;\n      }\n    });\n  },\n\n  _destroyTooltip: function () {\n    if (this.tooltip) {\n      this.tooltip.hideTipsy();\n      this.tooltip.destroyTipsy();\n      delete this.tooltip;\n    }\n  },\n\n  clean: function () {\n    this.$el.off('mouseover', this.selector);\n    this.$el.off('mouseout', this.selector);\n    this.$el.off('mouseleave', this.selector);\n\n    this._destroyTooltip();\n    cdb.core.View.prototype.clean.call(this);\n  }\n});\n","var _ = require('underscore');\nvar Notifier = require('builder/components/notifier/notifier');\nvar NotificationErrorMessageHandler = require('builder/editor/layers/notification-error-message-handler');\n\nvar DEFAULT_DELAY = Notifier.DEFAULT_DELAY;\nvar STATUS_READY = 'ready';\nvar STATUS_PENDING = 'pending';\nvar STATUS_RUNNING = 'running';\nvar STATUS_WAITING = 'waiting';\nvar STATUS_FAILED = 'failed';\n\nvar AnalysisNotifications = {\n\n  track: function (analysisNode, layerDefModel) {\n    analysisNode.on('change:status', this._addStatusChangedNotification, this);\n    analysisNode.on('change:error', this._onErrorChanged, this);\n    analysisNode.once('destroy', this._addRemovedNotification, this);\n    this._layerDefModel = layerDefModel;\n\n    if (analysisNode.get('status') && analysisNode.get('status') !== STATUS_READY) {\n      this._addStatusChangedNotification(analysisNode);\n    }\n  },\n\n  _addRemovedNotification: function (analysisNode) {\n    if (analysisNode.get('avoidNotification') === true) {\n      return;\n    }\n\n    var nodeId = analysisNode.get('id');\n    var notificationAttrs = {\n      status: 'success',\n      info: _t('notifications.analysis.removed', {\n        nodeId: nodeId.toUpperCase()\n      }),\n      closable: true,\n      delay: DEFAULT_DELAY\n    };\n    this._addOrUpdateNotification(analysisNode.cid, notificationAttrs);\n  },\n\n  _addStatusChangedNotification: function (analysisNode) {\n    var status = analysisNode.get('status');\n    if (status === STATUS_WAITING || status === STATUS_PENDING) {\n      this._addAnalysisWaitingNotification(analysisNode);\n    }\n    if (status === STATUS_RUNNING) {\n      this._addAnalysisRunningNotification(analysisNode);\n    }\n    if (status === STATUS_READY) {\n      this._addAnalysisReadyNotification(analysisNode);\n    }\n    if (status === STATUS_FAILED) {\n      this._addAnalysisFailedNotification(analysisNode);\n    }\n  },\n\n  _addAnalysisWaitingNotification: function (analysisNode) {\n    var notificationAttrs = {\n      status: 'loading',\n      info: _t('notifications.analysis.waiting', {\n        nodeId: analysisNode.get('id').toUpperCase()\n      })\n    };\n    this._addOrUpdateNotification(analysisNode.cid, notificationAttrs);\n  },\n\n  _addAnalysisRunningNotification: function (analysisNode) {\n    var notificationAttrs = {\n      status: 'loading',\n      info: _t('notifications.analysis.running', {\n        nodeId: analysisNode.get('id').toUpperCase()\n      })\n    };\n    this._addOrUpdateNotification(analysisNode.cid, notificationAttrs);\n  },\n\n  _addAnalysisReadyNotification: function (analysisNode) {\n    var notificationAttrs = {\n      status: 'success',\n      info: _t('notifications.analysis.completed', {\n        nodeId: analysisNode.get('id').toUpperCase()\n      }),\n      closable: true,\n      delay: DEFAULT_DELAY\n    };\n    this._addOrUpdateNotification(analysisNode.cid, notificationAttrs);\n  },\n\n  _addAnalysisFailedNotification: function (analysisNode) {\n    var message = NotificationErrorMessageHandler.extractErrorFromAnalysisNode(analysisNode, this._layerDefModel);\n\n    var notificationAttrs = {\n      status: message.type,\n      info: message.message,\n      closable: true,\n      autoclosable: false\n    };\n\n    this._addOrUpdateNotification(analysisNode.cid, notificationAttrs);\n  },\n\n  _addOrUpdateNotification: function (notificationId, notificationAttrs) {\n    var notification = this._getNotification(notificationId);\n    if (notification) {\n      notification.set(notificationAttrs);\n    } else {\n      this._addNotification(notificationId, notificationAttrs);\n    }\n  },\n\n  _addNotification: function (notificationId, notificationAttrs) {\n    notificationAttrs = _.extend({\n      id: notificationId\n    }, notificationAttrs);\n    Notifier.addNotification(notificationAttrs);\n  },\n\n  _getNotification: function (notificationId) {\n    return Notifier.getNotification(notificationId);\n  },\n\n  _onErrorChanged: function (analysisNode, error) {\n    if (error) {\n      this._addAnalysisFailedNotification(analysisNode);\n    }\n  }\n};\n\nmodule.exports = AnalysisNotifications;\n","var CoreView = require('backbone/core-view');\nvar SourceLayerAnalysisView = require('./source-layer-analysis-view');\nvar DefaultLayerAnalysisView = require('./default-layer-analysis-view');\nvar template = require('./composite-layer-analysis-view.tpl');\n\n/**\n * View for an analysis node which have two source nodes as input.\n * The primary source node is rendered separately, this view renders the own node + the secondary one.\n *  _____________         ___________________\n * |  own node  | ------ |  secondary node  |\n * |____________|        |__________________|\n *       |\n *  ________________\n * |  primary node  |\n * |________________|\n *\n * this.model is expected to be a analysis-definition-node-nodel\n */\nmodule.exports = CoreView.extend({\n\n  tagName: 'li',\n  className: 'Editor-ListAnalysis-item',\n\n  initialize: function (opts) {\n    if (!opts.analysisDefinitionNodesCollection) throw new Error('analysisDefinitionNodesCollection is required');\n    if (!opts.layerDefinitionModel) throw new Error('layerDefinitionModel is required');\n\n    this._analysisDefinitionNodesCollection = opts.analysisDefinitionNodesCollection;\n    this._layerDefinitionModel = opts.layerDefinitionModel;\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this.$el.html(template());\n\n    this._renderOwnNode();\n    this._renderSecondaryNode();\n\n    return this;\n  },\n\n  _renderOwnNode: function () {\n    var view = new DefaultLayerAnalysisView({\n      tagName: 'div',\n      model: this.model,\n      analysisNode: this._analysisDefinitionNodesCollection.get(this.model.id),\n      layerDefinitionModel: this._layerDefinitionModel\n    });\n    this.addView(view);\n    this.$('.js-primary-source').append(view.render().el);\n  },\n\n  _renderSecondaryNode: function () {\n    var nodeDefModel = this.model.getSecondarySource();\n    var layerDefModel = this._layerDefinitionModel.collection.findOwnerOfAnalysisNode(nodeDefModel);\n\n    if (nodeDefModel) {\n      var view = nodeDefModel.get('type') === 'source'\n        ? new SourceLayerAnalysisView({\n          model: nodeDefModel,\n          analysisNode: this._analysisDefinitionNodesCollection.get(nodeDefModel.id),\n          layerDefinitionModel: this._layerDefinitionModel,\n          showId: !!(layerDefModel && this._isOwnedByOtherLayer(layerDefModel))\n        })\n        : new DefaultLayerAnalysisView({\n          tagName: 'div',\n          model: nodeDefModel,\n          analysisNode: this._analysisDefinitionNodesCollection.get(nodeDefModel.id),\n          layerDefinitionModel: layerDefModel\n        });\n\n      this.addView(view);\n      this.$('.js-secondary-source').append(view.render().el);\n    }\n  },\n\n  _isOwnedByOtherLayer: function (layerDefModel) {\n    return layerDefModel !== this._layerDefinitionModel;\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<ul class=\"Editor-ListAnalysis-inner\">\\n  <li class=\"Editor-ListAnalysis-innerItem js-primary-source\"></li>\\n  <li class=\"Editor-ListAnalysis-innerItem js-secondary-source\"></li>\\n</ul>\\n';\n\n}\nreturn __p\n}","var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar nodeIds = require('builder/value-objects/analysis-node-ids');\nvar layerColors = require('builder/data/layer-colors');\nvar template = require('./default-layer-analysis-view.tpl');\nvar Analyses = require('builder/data/analyses');\nvar AnalysisTooltip = require('./analyses-tooltip-error');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\n\n/**\n * View for an analysis node with a single input\n *\n * this.model is expected to be a analysis-definition-node-nodel\n */\nmodule.exports = CoreView.extend({\n\n  tagName: 'li',\n  className: 'Editor-ListAnalysis-item Editor-ListAnalysis-layer CDB-Text is-semibold CDB-Size-small js-analysis-node',\n\n  events: {\n    'mouseenter': '_onMouseEnter',\n    'mouseleave': '_onMouseLeave'\n  },\n\n  initialize: function (opts) {\n    if (!opts.analysisNode) throw new Error('analysisNode is required');\n\n    this._analysisNode = opts.analysisNode;\n    this._analysisNode.on('change:status', this.render, this);\n    this.add_related_model(this._analysisNode);\n\n    this._analysisTooltip = new AnalysisTooltip({\n      analysisNode: this._analysisNode,\n      element: this.$el,\n      triggerSelector: '.Editor-ListAnalysis-itemError'\n    });\n    this.addView(this._analysisTooltip);\n\n    this._stateModel = new Backbone.Model({\n      highlighted: false\n    });\n\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this._stateModel.on('change:highlighted', this._toggleHover, this);\n    this.add_related_model(this._stateModel);\n  },\n\n  render: function () {\n    var status = this._analysisNode.get('status');\n\n    this.$el.html(template({\n      id: this.model.id,\n      bgColor: this._bgColor(),\n      isDone: status === 'ready' || status === 'failed',\n      title: Analyses.title(this.model),\n      hasError: status === 'failed'\n    }));\n    this.$el.toggleClass('has-error', status === 'failed');\n\n    this.el.dataset.analysisNodeId = this.model.id;\n\n    this._initViews();\n\n    return this;\n  },\n\n  _initViews: function () {\n    var sourceTooltip = new TipsyTooltipView({\n      el: this.$el,\n      gravity: 'w',\n      title: function () {\n        return _t('edit-analysis');\n      }\n    });\n    this.addView(sourceTooltip);\n  },\n\n  _bgColor: function () {\n    var letter = nodeIds.letter(this._analysisNode.id);\n    return layerColors.getColorForLetter(letter);\n  },\n\n  _onMouseEnter: function () {\n    this._stateModel.set('highlighted', true);\n  },\n\n  _onMouseLeave: function () {\n    this._stateModel.set('highlighted', false);\n  },\n\n  _toggleHover: function () {\n    var $layer = this.$el.closest('.js-layer');\n    var $title = $layer.find('.js-Editor-ListLayer-titleText');\n    var highlighted = this._stateModel.get('highlighted');\n\n    $layer.toggleClass('is-hover', highlighted);\n    $title.toggleClass('is-hover', highlighted);\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"Editor-ListAnalysis-itemInfo u-rSpace--m CDB-Text is-semibold CDB-Size-small u-upperCase\" style=\"background: ' +\n__e( bgColor ) +\n'; color: #fff\">\\n  ';\n if (isDone) { ;\n__p += '\\n    <span class=\"CDB-Text u-rSpace\">\\n      ' +\n__e( id ) +\n'\\n    </span>\\n    <i class=\"CDB-IconFont CDB-IconFont-ray CDB-Size-medium\"></i>\\n  ';\n } else { ;\n__p += '\\n    <div class=\"CDB-LoaderIcon\">\\n      <svg class=\"CDB-LoaderIcon-spinner\" viewBox=\"0 0 50 50\">\\n        <circle class=\"CDB-LoaderIcon-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"></circle>\\n      </svg>\\n    </div>\\n  ';\n } ;\n__p += '\\n</div>\\n<p class=\"Editor-ListAnalysis-title CDB-Text CDB-Size-small u-secondaryTextColor u-ellipsis\" title=\"' +\n__e( title ) +\n'\">' +\n__e( title ) +\n'</p>\\n\\n';\n if (hasError) { ;\n__p += '\\n<div class=\"Editor-ListAnalysis-itemError\"></div>\\n';\n } ;\n__p += '\\n';\n\n}\nreturn __p\n}","var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar analyses = require('builder/data/analyses');\nvar template = require('./ref-layer-analysis-view.tpl');\n\n/**\n * View for an analysis node that belongs to another layer\n *\n * this.model is expected to be a analysis-definition-node-nodel\n */\nmodule.exports = CoreView.extend({\n\n  tagName: 'li',\n  className: 'Editor-ListAnalysis-item Editor-ListAnalysis-layer CDB-Text is-semibold CDB-Size-small js-analysis-node',\n\n  events: {\n    'mouseenter': '_onMouseEnter',\n    'mouseleave': '_onMouseLeave'\n  },\n\n  initialize: function (opts) {\n    if (!opts.layerDefinitionModel) throw new Error('layerDefinitionModel is required');\n    if (!opts.analysisNode) throw new Error('analysisNode is required');\n\n    this._layerDefinitionModel = opts.layerDefinitionModel;\n    this._analysisNode = opts.analysisNode;\n\n    this._stateModel = new Backbone.Model({\n      highlighted: false\n    });\n\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._analysisNode, 'change:status', this.render);\n    this.add_related_model(this._analysisNode);\n\n    this.listenTo(this._layerDefinitionModel, 'change', this.render);\n    this.add_related_model(this._layerDefinitionModel);\n\n    this.listenTo(this._stateModel, 'change:highlighted', this._toggleHover);\n    this.add_related_model(this._stateModel);\n  },\n\n  render: function () {\n    var status = this._analysisNode.get('status');\n\n    this.$el.html(template({\n      id: this.model.id,\n      layerName: this._layerDefinitionModel.getName(),\n      bgColor: this.model.getColor(),\n      isDone: status === 'ready' || status === 'failed',\n      title: analyses.title(this.model)\n    }));\n    this.$el.toggleClass('has-error', status === 'failed');\n\n    this.el.dataset.analysisNodeId = this.model.id;\n\n    return this;\n  },\n\n  _onMouseEnter: function () {\n    this._stateModel.set('highlighted', true);\n  },\n\n  _onMouseLeave: function () {\n    this._stateModel.set('highlighted', false);\n  },\n\n  _toggleHover: function () {\n    var $layer = this.$el.closest('.js-layer');\n    var $title = $layer.find('.js-Editor-ListLayer-titleText');\n    var highlighted = this._stateModel.get('highlighted');\n\n    $layer.toggleClass('is-hover', highlighted);\n    $title.toggleClass('is-hover', highlighted);\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"Editor-ListAnalysis-itemInfo u-rSpace--m CDB-Text is-semibold CDB-Size-small u-upperCase\" style=\"background: ' +\n__e( bgColor ) +\n'; color: #fff\">\\n  ';\n if (isDone) { ;\n__p += '\\n    <span class=\"CDB-Text u-rSpace\">\\n      ' +\n__e( id ) +\n'\\n    </span>\\n    <i class=\"CDB-IconFont CDB-IconFont-ray CDB-Size-medium\"></i>\\n  ';\n } else { ;\n__p += '\\n    <div class=\"CDB-LoaderIcon\">\\n      <svg class=\"CDB-LoaderIcon-spinner\" viewBox=\"0 0 50 50\">\\n        <circle class=\"CDB-LoaderIcon-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"></circle>\\n      </svg>\\n    </div>\\n  ';\n } ;\n__p += '\\n</div>\\n<p class=\"Editor-ListAnalysis-title CDB-Text CDB-Size-small u-secondaryTextColor u-ellipsis u-flex\" title=\"' +\n__e( title ) +\n'\">\\n  ' +\n__e( title ) +\n' <span class=\"u-altTextColor u-lSpace u-ellipsis\">' +\n__e( layerName ) +\n'</span>\\n</p>\\n';\n\n}\nreturn __p\n}","var $ = require('jquery');\nvar _ = require('underscore');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar template = require('./source-layer-analysis-view.tpl');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\nvar moment = require('moment');\n\n/**\n * View for a analysis source (i.e. SQL query).\n *\n * this.model is expected to be a analysis-definition-node-model and belong to the given layer-definition-model\n */\nmodule.exports = CoreView.extend({\n\n  tagName: 'li',\n  className: 'Editor-ListAnalysis-item Editor-ListAnalysis-layer js-base is-base u-flex u-justifySpace',\n\n  events: {\n    'mouseenter': '_onMouseEnter',\n    'mouseleave': '_onMouseLeave'\n  },\n\n  initialize: function (opts) {\n    if (!opts.layerDefinitionModel) throw new Error('layerDefinitionModel is required');\n    if (!opts.analysisNode) throw new Error('analysisNode is required');\n\n    this._layerDefinitionModel = opts.layerDefinitionModel;\n    this._analysisNode = opts.analysisNode;\n    this._tableNodeModel = this._analysisNode.getTableModel();\n    this._stateModel = new Backbone.Model({\n      highlighted: false\n    });\n\n    this._initBinds();\n  },\n\n  options: {\n    showId: true\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    var isSync = this._tableNodeModel && this._tableNodeModel.isSync();\n    var syncData = {};\n\n    if (isSync) {\n      var syncModel = this._tableNodeModel.getSyncModel();\n      var runAt = syncModel.get('run_at');\n\n      syncData = {\n        ranAt: moment(syncModel.get('ran_at') || new Date()).fromNow(),\n        runAt: moment(runAt).fromNow(),\n        state: syncModel.get('state'),\n        errorCode: syncModel.get('error_code'),\n        errorMessage: syncModel.get('error_message')\n      };\n\n      // Due to the time we need to polling, we have to display to the user\n      // that the sync will be in a moment\n      if (!runAt || (new Date(runAt) <= new Date())) {\n        syncData.runAt = _t('dataset.sync.in-a-moment');\n      }\n    }\n\n    var isCustomQueryApplied = this._analysisNode.isCustomQueryApplied();\n    this.$el.html(template(_.extend({\n      id: this.options.showId ? this.model.id : '',\n      tableName: this.model.get('table_name'),\n      customQueryApplied: isCustomQueryApplied,\n      isSync: isSync,\n      bgColor: this._analysisNode.getColor()\n    }, syncData)));\n\n    var sourceTooltip = new TipsyTooltipView({\n      el: this.$el,\n      gravity: 'w',\n      title: function () {\n        return _t('data-source');\n      }\n    });\n    this.addView(sourceTooltip);\n\n    if (isSync) {\n      var syncTooltipTitle = (syncData.errorCode || syncData.errorMessage) ? _t('dataset.sync.error-code', { errorCode: syncData.errorCode }) + ':' + syncData.errorMessage : $(this).data('tooltip');\n      var syncTooltip = new TipsyTooltipView({\n        el: this.$('.js-sync'),\n        gravity: 's',\n        offset: 0,\n        title: syncTooltipTitle\n      });\n      this.addView(syncTooltip);\n    }\n\n    if (isCustomQueryApplied) {\n      var sqlTooltip = new TipsyTooltipView({\n        el: this.$('.js-sql'),\n        gravity: 'w',\n        title: function () {\n          return _t('sql-applied');\n        },\n        mouseEnterAction: function () {\n          sourceTooltip.hideTipsy();\n        },\n        mouseLeaveAction: function () {\n          sourceTooltip.showTipsy();\n        }\n      });\n      this.addView(sqlTooltip);\n    }\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._stateModel, 'change:highlighted', this._toggleHover);\n    this.listenTo(this._tableNodeModel, 'change:synchronization', this.render);\n  },\n\n  _onMouseEnter: function () {\n    this._stateModel.set('highlighted', true);\n  },\n\n  _onMouseLeave: function () {\n    this._stateModel.set('highlighted', false);\n  },\n\n  _toggleHover: function () {\n    var $layer = this.$el.closest('.js-layer');\n    var $title = $layer.find('.js-Editor-ListLayer-titleText');\n    var highlighted = this._stateModel.get('highlighted');\n\n    $layer.toggleClass('is-hover', highlighted);\n    $title.toggleClass('is-hover', highlighted);\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<p class=\"Editor-ListAnalysis-itemInfoTitle CDB-Text CDB-Size-small u-ellipsis u-flex\" title=\"' +\n__e( tableName ) +\n'\">\\n  <span class=\"CDB-Text is-semibold CDB-Size-small u-rSpace u-upperCase\"  style=\"color: ' +\n__e( bgColor ) +\n'\">\\n    ' +\n__e( id ) +\n'\\n  </span>\\n  Source\\n  <span class=\"Editor-ListAnalysis-title u-altTextColor u-lSpace u-ellipsis\">\\n    ' +\n__e( tableName ) +\n'\\n  </span>\\n</p>\\n';\n if (isSync) { ;\n__p += '\\n  <span class=\"Editor-ListAnalysis-itemInfoIcon\">\\n    <div class=\"u-flex u-alignCenter CDB-Text CDB-Size-small u-altTextColor SyncInfo-message--' +\n__e( state ) +\n' js-sync\" data-tooltip=\"';\n if (errorCode || errorMessage) { ;\n__p +=\n__e( _t('dataset.sync.sync-failed') );\n } else { ;\n__p +=\n__e( ranAt );\n } ;\n__p += '\">\\n      <i class=\"CDB-IconFont CDB-IconFont-wifi\"></i>\\n    </div>\\n  </span>\\n';\n } ;\n__p += '\\n';\n if (customQueryApplied) { ;\n__p += '\\n  <span class=\"Editor-ListAnalysis-itemInfoIcon Tag Tag--outline Tag-outline--dark CDB-Text CDB-Size-small js-sql\">\\n    SQL\\n  </span>\\n';\n } ;\n__p += '\\n';\n\n}\nreturn __p\n}","var Backbone = require('backbone');\nvar _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar CarouselCollection = require('builder/components/custom-carousel/custom-carousel-collection');\nvar template = require('./basemap-content.tpl');\nvar BasemapHeaderView = require('./basemap-content-views/basemap-header-view');\nvar BasemapModelFactory = require('./basemap-content-views/basemap-model-factory');\nvar BasemapsCollection = require('./basemap-content-views/basemaps-collection');\nvar BasemapInnerView = require('./basemap-content-views/basemap-inner-view');\nvar ScrollView = require('builder/components/scroll/scroll-view');\nvar Notifier = require('builder/components/notifier/notifier');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar Router = require('builder/routes/router');\n\nvar NOTIFICATION_ID = 'basemapNotification';\n\nvar BASEMAP_ICONS = {\n  gmaps: require('./basemap-content-views/basemap-icons/basemap-gmaps.tpl'),\n  carto: require('./basemap-content-views/basemap-icons/basemap-carto.tpl'),\n  stamen: require('./basemap-content-views/basemap-icons/basemap-stamen.tpl'),\n  color: require('./basemap-content-views/basemap-icons/basemap-color.tpl'),\n  mapbox: require('./basemap-content-views/basemap-icons/basemap-mapbox.tpl'),\n  custom: require('./basemap-content-views/basemap-icons/basemap-custom.tpl'),\n  here: require('./basemap-content-views/basemap-icons/basemap-here.tpl'),\n  wms: require('./basemap-content-views/basemap-icons/basemap-wms.tpl'),\n  tilejson: require('./basemap-content-views/basemap-icons/basemap-tilejson.tpl'),\n  nasa: require('./basemap-content-views/basemap-icons/basemap-nasa.tpl')\n};\n\nvar REQUIRED_OPTS = [\n  'layerDefinitionsCollection',\n  'stackLayoutModel',\n  'customBaselayersCollection',\n  'basemaps',\n  'modals',\n  'configModel'\n];\n\nmodule.exports = CoreView.extend({\n\n  events: {\n    'click .js-back': '_onClickBack'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._baseLayer = this._layerDefinitionsCollection.getBaseLayer();\n\n    this.model = new Backbone.Model({\n      disabled: false\n    });\n\n    this._basemapModelFactory = new BasemapModelFactory(this._layerDefinitionsCollection, this._configModel);\n\n    this._initCollections(opts.basemaps);\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template());\n\n    this._initViews();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.bind('change:disabled', function () {\n      this.$('.js-basemapContent').toggleClass('is-disabled', this.model.get('disabled'));\n    }, this);\n\n    this._basemapsCollection.bind('change:category', function (mdl) {\n      var userLayersMdl = this._customBaselayersCollection.get(mdl.get('id'));\n      userLayersMdl.set('category', mdl.get('category'));\n      userLayersMdl.save();\n    }, this);\n    this._basemapsCollection.bind('remove', function (mdl) {\n      var userLayersMdl = this._customBaselayersCollection.get(mdl.get('id'));\n      userLayersMdl.destroy();\n    }, this);\n    this._basemapsCollection.bind('add', this._onAddBasemap, this);\n    this.add_related_model(this._basemapsCollection);\n\n    this._layerDefinitionsCollection.bind('changingBaseLayer', this._onChangingBaseLayer, this);\n    this._layerDefinitionsCollection.bind('baseLayerChanged', this._onBaseLayerChanged, this);\n    this._layerDefinitionsCollection.bind('baseLayerFailed', this._onBaseLayerFailed, this);\n    this._layerDefinitionsCollection.bind('change', function () {\n      this._renderHeader();\n\n      this._baseLayer = this._layerDefinitionsCollection.getBaseLayer();\n      this._updateSelectedCategory(this._baseLayer.get('category'));\n    }, this);\n    this.add_related_model(this._layerDefinitionsCollection);\n  },\n\n  _initViews: function () {\n    this._renderHeader();\n    this._renderContent();\n  },\n\n  _initCollections: function (basemaps) {\n    this._basemapsCollection = new BasemapsCollection();\n    var basemapModel;\n\n    // Basemaps defined in app_config.yml\n    _(basemaps).each(function (categoryBasemaps, category) {\n      _.map(categoryBasemaps, function (basemap) {\n        basemapModel = this._basemapModelFactory.createBasemapModel(category, basemap);\n        this._basemapsCollection.add(basemapModel);\n      }, this);\n    }, this);\n\n    // userlayers basemaps\n    this._customBaselayersCollection.each(function (customBaseLayerDefinitionModel) {\n      var category = customBaseLayerDefinitionModel.get('category') || 'Custom';\n      basemapModel = this._basemapModelFactory.createBasemapModel(category, customBaseLayerDefinitionModel.attributes);\n      this._basemapsCollection.add(basemapModel);\n    }, this);\n\n    // Plain color or image basemap\n    basemapModel = this._basemapModelFactory.createBasemapModel('Color', {\n      color: this._baseLayer.get('color') || '',\n      image: this._baseLayer.get('image') || '',\n      selected: this._baseLayer.get('className') === 'plain'\n    });\n    this._basemapsCollection.add(basemapModel);\n\n    this._categoriesCollection = new CarouselCollection(\n      _.map(this._basemapsCollection.getCategories(), function (category) {\n        return {\n          selected: this._getBaseLayerCategory() === category,\n          val: category,\n          label: category,\n          template: function () {\n            var template = this._getTemplateForCategory(category.toLowerCase());\n            return template();\n          }.bind(this)\n        };\n      }, this)\n    );\n  },\n\n  _getTemplateForCategory: function (categoryName) {\n    var template = BASEMAP_ICONS[categoryName.toLowerCase()];\n    if (!template) {\n      template = function () {\n        return categoryName;\n      };\n    }\n    return template;\n  },\n\n  _onChangingBaseLayer: function () {\n    this.model.set('disabled', true);\n\n    if (Notifier.getNotification(NOTIFICATION_ID)) {\n      Notifier.removeNotification(NOTIFICATION_ID);\n    }\n\n    this.notification = Notifier.addNotification({\n      id: NOTIFICATION_ID,\n      status: 'loading',\n      info: _t('editor.layers.basemap.saving.loading'),\n      closable: false\n    });\n  },\n\n  _onBaseLayerChanged: function () {\n    this.model.set('disabled', false);\n\n    this.notification.set({\n      status: 'success',\n      info: _t('editor.layers.basemap.saving.success'),\n      closable: true\n    });\n  },\n\n  _onBaseLayerFailed: function () {\n    this.model.set('disabled', false);\n\n    this.notification.set({\n      status: 'error',\n      info: _t('editor.layers.basemap.saving.error'),\n      closable: true\n    });\n  },\n\n  _updateSelectedCategory: function (category) {\n    var newCategory = this._categoriesCollection.findWhere({ val: category });\n    newCategory && newCategory.set({ selected: true });\n  },\n\n  _onChangeSelectedCategory: function (mdl, isSelected) {\n    if (isSelected) {\n      this._renderContent();\n    }\n  },\n\n  _getBaseLayerCategory: function () {\n    var category = this._basemapsCollection.getDefaultCategory();\n\n    if (this._baseLayer.get('category')) {\n      category = this._baseLayer.get('category');\n    } else if (this._baseLayer.get('type') === 'Plain') {\n      category = 'Color';\n    } else if (this._customBaselayersCollection.hasCustomBaseLayer(this._baseLayer.get('className'))) {\n      category = 'Custom';\n    }\n\n    return category;\n  },\n\n  _renderContent: function () {\n    var self = this;\n\n    if (this._contentView) {\n      this.removeView(this._contentView);\n      this._contentView.clean();\n    }\n\n    this._contentView = new ScrollView({\n      createContentView: function () {\n        return new BasemapInnerView({\n          model: self.model,\n          categoriesCollection: self._categoriesCollection,\n          layerDefinitionsCollection: self._layerDefinitionsCollection,\n          basemapsCollection: self._basemapsCollection,\n          customBaselayersCollection: self._customBaselayersCollection,\n          modals: self._modals\n        });\n      }\n    });\n    this.addView(this._contentView);\n    this.$('.js-basemapContent').html(this._contentView.render().el);\n  },\n\n  _renderHeader: function () {\n    if (this._headerView) {\n      this.removeView(this._headerView);\n      this._headerView.clean();\n    }\n\n    this._headerView = new BasemapHeaderView({\n      model: this._layerDefinitionsCollection.getBaseLayer(),\n      category: this._getBaseLayerCategory()\n    });\n    this.addView(this._headerView);\n    this.$('.js-basemapHeader').html(this._headerView.render().el);\n  },\n\n  _onAddBasemap: function (mdl) {\n    this._basemapsCollection.updateSelected(mdl.getValue());\n  },\n\n  _onClickBack: function () {\n    Router.goToLayerList();\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"js-selector\">\\n  <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n    <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.layers.basemap.category.title-label') ) +\n'</h2>\\n  </div>\\n  <p class=\"CDB-Text u-upperCase CDB-FontSize-small u-altTextColor u-bSpace--m js-highlight\">' +\n__e( _t('editor.layers.basemap.category.select-category') ) +\n'</p>\\n</div>\\n';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar template = require('./basemap-categories.tpl');\nvar CarouselFormView = require('builder/components/carousel-form-view');\n\nmodule.exports = CoreView.extend({\n\n  initialize: function (opts) {\n    if (!opts.categoriesCollection) throw new Error('categoriesCollection is required');\n\n    this._categoriesCollection = opts.categoriesCollection;\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this.$el.html(template());\n\n    this._renderCarousel();\n\n    return this;\n  },\n\n  _renderCarousel: function () {\n    var view = new CarouselFormView({\n      collection: this._categoriesCollection,\n      template: require('./basemap-carousel.tpl')\n    });\n    this.addView(view);\n    this.$('.js-select').append(view.render().el);\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"Editor-HeaderInfo\">\\n  <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">1</div>\\n  <div class=\"Editor-HeaderInfo-inner CDB-Text js-select\"></div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar DEBOUNCE_TIME = 650;\n\nmodule.exports = Backbone.Model.extend({\n\n  initialize: function (attrs, opts) {\n    if (!opts.layerDefinitionsCollection) throw new Error('layerDefinitionsCollection is required');\n    if (!opts.basemapsCollection) throw new Error('basemapsCollection is required');\n\n    this._layerDefinitionsCollection = opts.layerDefinitionsCollection;\n    this._basemapsCollection = opts.basemapsCollection;\n    this._disabled = opts.disabled;\n\n    this._generateSchema();\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this._onChange = this._onChange.bind(this);\n    this.bind('change', _.debounce(this._onChange, DEBOUNCE_TIME), this);\n  },\n\n  _onChange: function () {\n    if (this.hasChanged('color')) {\n      var color = this.get('color').color.fixed;\n      this._updatePlainBasemap(color);\n    }\n  },\n\n  _updatePlainBasemap: function (color) {\n    var plainBasemap = this._basemapsCollection.find(function (mdl) {\n      return mdl.get('className') === 'plain';\n    });\n    var isAlreadySelected = plainBasemap.get('selected');\n\n    plainBasemap.set({\n      color: color,\n      image: '',\n      maxZoom: 32\n    });\n\n    if (isAlreadySelected) {\n      this._layerDefinitionsCollection.setBaseLayer(plainBasemap.toJSON());\n    } else {\n      this._basemapsCollection.updateSelected(plainBasemap.getValue());\n    }\n  },\n\n  _generateSchema: function () {\n    this.schema = {\n      color: {\n        type: 'Fill',\n        title: _t('editor.layers.basemap.style.color'),\n        options: [],\n        editorAttrs: {\n          color: {\n            hidePanes: ['value'],\n            disableOpacity: true\n          },\n          disabled: this._disabled\n        },\n        validators: ['required']\n      }\n    };\n  }\n\n});\n","var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar template = require('./basemap-form.tpl');\nvar BasemapFormModel = require('./basemap-form-model');\n\nmodule.exports = CoreView.extend({\n\n  initialize: function (opts) {\n    if (!opts.layerDefinitionsCollection) throw new Error('layerDefinitionsCollection is required');\n    if (!opts.basemapsCollection) throw new Error('basemapsCollection is required');\n\n    this._layerDefinitionsCollection = opts.layerDefinitionsCollection;\n    this._basemapsCollection = opts.basemapsCollection;\n    this._disabled = opts.disabled;\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template());\n\n    this._generateForms();\n\n    return this;\n  },\n\n  _generateForms: function () {\n    if (this._formView) {\n      this._formView.remove();\n    }\n\n    var color = {\n      color: {\n        fixed: '',\n        opacity: 1\n      }\n    };\n\n    if (typeof this.model.get('color') === 'string') {\n      color.color.fixed = this.model.get('color');\n    }\n\n    this._formModel = new BasemapFormModel({\n      color: color,\n      image: this.model.get('image') || ''\n    }, {\n      basemapsCollection: this._basemapsCollection,\n      layerDefinitionsCollection: this._layerDefinitionsCollection,\n      disabled: this._disabled\n    });\n\n    this._formView = new Backbone.Form({\n      model: this._formModel\n    });\n\n    this._formView.bind('change', function () {\n      this.commit();\n    });\n\n    this.$('.js-form').append(this._formView.render().$el);\n  },\n\n  clean: function () {\n    if (this._formView) {\n      this._formView.remove();\n    }\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"js-selector\">\\n  <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n    <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.layers.infowindow.style.title-label') ) +\n'</h2>\\n  </div>\\n  <p class=\"CDB-Text u-upperCase CDB-FontSize-small u-altTextColor u-bSpace--m js-highlight\">' +\n__e( _t('editor.layers.infowindow.style.select-style') ) +\n'</p>\\n</div>\\n\\n<div class=\"js-form\"></div>\\n';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar template = require('./basemap-header.tpl');\n\nvar DEFAULT_NAME = _t('editor.layers.basemap.custom-basemap');\n\nmodule.exports = CoreView.extend({\n\n  initialize: function (opts) {\n    if (!opts.category) throw new Error('category is required');\n\n    this.category = opts.category;\n  },\n\n  render: function () {\n    this.$el.html(\n      template({\n        title: _t('editor.layers.basemap.title-label'),\n        description: this._getName()\n      })\n    );\n    return this;\n  },\n\n  _getName: function () {\n    var name = this.model.getName();\n\n    if (!name) {\n      name = DEFAULT_NAME;\n    } else {\n      name = this.model.getName().replace(/_/g, '') + ' ' + _t('editor.layers.basemap.by') + ' ' + this.category;\n    }\n\n    return name;\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<ul class=\"Editor-breadcrumb\">\\n  <li class=\"Editor-breadcrumbItem CDB-Text CDB-Size-medium u-actionTextColor\">\\n    <button class=\"js-back\">\\n      <i class=\"CDB-IconFont CDB-IconFont-arrowPrev Size-large u-rSpace\"></i>\\n\\n      <span class=\"Editor-breadcrumbLink\">\\n        ' +\n__e( _t('back') ) +\n'\\n      </span>\\n    </button>\\n  </li>\\n\\n  <li class=\"Editor-breadcrumbItem CDB-Text CDB-Size-medium\">\\n    <span class=\"Editor-breadcrumbSep\"> / </span>\\n    ' +\n__e( _t('editor.layers.breadcrumb.basemap-options') ) +\n'\\n  </li>\\n</ul>\\n\\n<div class=\"Editor-HeaderInfo u-alignStart\">\\n  <div class=\"Editor-HeaderInfo-inner\">\\n    <div class=\"Editor-HeaderInfo-title u-bSpace\">\\n      <h2 class=\"Editor-HeaderInfo-titleText CDB-Text CDB-Size-huge is-light u-ellipsis\">' +\n__e( description ) +\n'</h2>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<img src=\"data:image/png;base64,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\" />';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"23px\" height=\"25px\" viewBox=\"1383 664 23 25\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n    <g id=\"color\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(1383.000000, 664.000000)\">\\n        <path d=\"M19.04725,12.691 C19.12525,12.504 19.08225,12.289 18.93925,12.146 L9.93925,3.146 C9.84125,3.049 9.71325,3 9.58525,3 L9.58525,2.5 C9.58525,1.122 8.46325,0 7.08525,0 C5.70725,0 4.58525,1.122 4.58525,2.5 L4.58525,7.793 L0.73125,11.647 C-0.24375,12.622 -0.24375,14.208 0.73125,15.183 L5.40325,19.854 C5.87525,20.326 6.50325,20.586 7.17125,20.586 C7.83925,20.586 8.46625,20.326 8.93925,19.854 L15.79225,13 L18.58525,13 C18.78725,13 18.97025,12.878 19.04725,12.691 L19.04725,12.691 Z M5.58525,2.5 C5.58525,1.673 6.25825,1 7.08525,1 C7.91225,1 8.58525,1.673 8.58525,2.5 L8.58525,3.793 L5.58525,6.793 L5.58525,2.5 L5.58525,2.5 Z M15.58525,12 C15.45225,12 15.32525,12.053 15.23125,12.146 L8.23125,19.146 C7.66525,19.712 6.67625,19.712 6.11025,19.146 L1.43825,14.475 C0.85325,13.89 0.85325,12.938 1.43825,12.353 L5.38925,8.401 C5.42025,8.377 5.44725,8.351 5.47125,8.32 L8.58525,5.207 L8.58525,10.5 C8.58525,10.776 8.80925,11 9.08525,11 C9.36125,11 9.58525,10.776 9.58525,10.5 L9.58525,4.207 L17.37825,12 L15.58525,12 L15.58525,12 Z\" id=\"Shape\" fill=\"#AAAAAA\"></path>\\n        <path d=\"M20.01225,15.241 C19.83125,14.942 19.33825,14.942 19.15825,15.241 C18.89425,15.674 16.58525,19.522 16.58525,21 C16.58525,22.654 17.93125,24 19.58525,24 C21.23925,24 22.58525,22.654 22.58525,21 C22.58525,19.522 20.27625,15.674 20.01225,15.241 L20.01225,15.241 Z M19.58525,23 C18.48225,23 17.58525,22.103 17.58525,21 C17.58525,20.225 18.68125,18.061 19.58525,16.485 C20.48925,18.061 21.58525,20.225 21.58525,21 C21.58525,22.103 20.68825,23 19.58525,23 L19.58525,23 Z\" id=\"Shape\" fill=\"#AAAAAA\"></path>\\n    </g>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"22px\" height=\"24px\" viewBox=\"966 769 22 24\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n    <path d=\"M973.5,791.5 L966.5,786.5 L966.5,770.5 L973.5,775.5 L980.5,770.5 L987.5,775.5 L987.5,791.5 L980.5,786.5 L973.5,791.5 Z M973.5,775.5 L973.5,791.5 L973.5,775.5 Z M980.5,786.5 L980.5,770.531 L980.5,786.5 Z\" id=\"Shape\" stroke=\"#AAAAAA\" stroke-width=\"1\" fill=\"none\"></path>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<p class=\"CDB-Text CDB-Size-small u-upperCase u-altTextColor\">Google maps</p>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<img src=\"data:image/png;base64,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\" />';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<p class=\"CDB-Text CDB-Size-small u-upperCase u-altTextColor\">Mapbox</p>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<p class=\"CDB-Text CDB-Size-small u-upperCase u-altTextColor\">nasa</p>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<img src=\"data:image/png;base64,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\" />';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<p class=\"CDB-Text CDB-Size-small u-upperCase u-altTextColor\">tilejson</p>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<p class=\"CDB-Text CDB-Size-small u-upperCase u-altTextColor\">wms/wmts</p>';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar BasemapCategoriesView = require('./basemap-categories-view');\nvar BasemapSelectView = require('./basemap-select-view');\nvar template = require('./basemap-inner.tpl');\n\nmodule.exports = CoreView.extend({\n\n  className: 'Editor-inner',\n\n  initialize: function (opts) {\n    if (!opts.categoriesCollection) throw new Error('categoriesCollection is required');\n    if (!opts.layerDefinitionsCollection) throw new Error('layerDefinitionsCollection is required');\n    if (!opts.basemapsCollection) throw new Error('basemapsCollection is required');\n    if (!opts.customBaselayersCollection) throw new Error('customBaselayersCollection is required');\n    if (!opts.modals) throw new Error('modals is required');\n\n    this._categoriesCollection = opts.categoriesCollection;\n    this._layerDefinitionsCollection = opts.layerDefinitionsCollection;\n    this._basemapsCollection = opts.basemapsCollection;\n    this._customBaselayersCollection = opts.customBaselayersCollection;\n    this._modals = opts.modals;\n\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.model.bind('change:disabled', function () {\n      this._renderSelect();\n    }, this);\n\n    this._basemapsCollection.bind('add remove', function () {\n      this._renderSelect();\n    }, this);\n    this.add_related_model(this._basemapsCollection);\n\n    this._categoriesCollection.bind('change:selected', this._renderSelect, this);\n    this.add_related_model(this._categoriesCollection);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template());\n\n    this._initViews();\n    return this;\n  },\n\n  _initViews: function () {\n    this._renderCategories();\n    this._renderSelect();\n  },\n\n  _renderCategories: function () {\n    if (this._categoriesView) {\n      this.removeView(this._categoriesView);\n      this._categoriesView.clean();\n    }\n\n    this._categoriesView = new BasemapCategoriesView({\n      categoriesCollection: this._categoriesCollection\n    });\n\n    this.addView(this._categoriesView);\n    this.$('.js-basemapCategory').html(this._categoriesView.render().el);\n  },\n\n  _renderSelect: function () {\n    if (this._selectView) {\n      this.removeView(this._selectView);\n      this._selectView.clean();\n    }\n\n    this._selectView = new BasemapSelectView({\n      layerDefinitionsCollection: this._layerDefinitionsCollection,\n      basemapsCollection: this._basemapsCollection,\n      customBaselayersCollection: this._customBaselayersCollection,\n      selectedCategoryVal: this._categoriesCollection.getSelectedValue(),\n      modals: this._modals,\n      disabled: this.model.get('disabled')\n    });\n    this.addView(this._selectView);\n    this.$('.js-basemapSelect').html(this._selectView.render().el);\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"js-basemapCategory\"></div>\\n<div class=\"js-basemapSelect\"></div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar basemapProvidersAndCategories = require('builder/data/basemap-providers-and-categories');\nvar mosaicThumbnail = require('builder/components/mosaic/mosaic-thumbnail.tpl');\nvar BasemapModel = require('./basemap-model');\n\nvar DEFAULT_SUBDOMAIN = 'a';\nvar DEFAULT_X_POSITION = 30;\nvar DEFAULT_Y_POSISTION = 24;\nvar DEFAULT_ZOOM = 6;\n\n// 'CartoDB', 'Stamen', 'Here'\n\nvar createLeafletBasemapModel = function (category, basemap, baseLayerDefinition, assetsBaseURL) {\n  var value;\n  var currentValue;\n  var label;\n  var imageURL;\n\n  var type = basemapProvidersAndCategories.getLayerType(category);\n  value = basemap.className;\n  currentValue = baseLayerDefinition.get('className');\n  label = basemap.name;\n  imageURL = lowerXYZ(basemap.urlTemplate, basemap.subdomains);\n\n  _.extend(basemap, {\n    type: type,\n    name: basemap.name,\n    category: category,\n    selected: currentValue === value,\n    val: value,\n    label: label,\n    template: function () {\n      return mosaicThumbnail({\n        imgURL: imageURL\n      });\n    }\n  });\n\n  return new BasemapModel(basemap);\n};\n\nvar lowerXYZ = function (urlTemplate, subdomains) {\n  return urlTemplate\n    .replace('{s}', getSubdomain(subdomains))\n    .replace('{z}', DEFAULT_ZOOM)\n    .replace('{x}', DEFAULT_X_POSITION)\n    .replace('{y}', DEFAULT_Y_POSISTION);\n};\n\nvar getSubdomain = function (subdomains) {\n  return (subdomains && subdomains.length) ? subdomains[0] : DEFAULT_SUBDOMAIN;\n};\n\n// Google Maps\n\nvar createGoogleMapsBasemapModel = function (category, basemapAttrs, baseLayerDefinition, assetsBaseURL) {\n  var value;\n  var currentValue;\n  var label;\n  var imageURL;\n\n  var type = basemapProvidersAndCategories.getLayerType(category);\n  var generateValue = function (baseType, baseName) {\n    var value = baseType;\n    if (baseName) {\n      value = value + '_' + baseName;\n    }\n    return value;\n  };\n  value = generateValue(basemapAttrs.baseType, basemapAttrs.baseName);\n  currentValue = generateValue(baseLayerDefinition.get('baseType'), baseLayerDefinition.get('baseName'));\n  label = basemapAttrs.name.replace('GMaps ', '');\n  imageURL = [\n    assetsBaseURL,\n    'unversioned/images/google-maps-basemap-icons',\n    value + '.jpg'\n  ].join('/');\n\n  _.extend(basemapAttrs, {\n    type: type,\n    name: basemapAttrs.name,\n    category: category,\n    selected: currentValue === value,\n    val: value,\n    label: label,\n    template: function () {\n      return mosaicThumbnail({\n        imgURL: imageURL\n      });\n    }\n  });\n\n  return new BasemapModel(basemapAttrs);\n};\n\n// Custom\n\nvar createCustomBasemapModel = function (category, customBaseLayerAttrs, baseLayerDefinition, configModel) {\n  var name = customBaseLayerAttrs.name ? customBaseLayerAttrs.name : 'Custom basemap ' + customBaseLayerAttrs.order;\n  var className = customBaseLayerAttrs.className;\n  var urlTemplate = customBaseLayerAttrs.urlTemplate;\n\n  return new BasemapModel({\n    id: customBaseLayerAttrs.id,\n    urlTemplate: urlTemplate,\n    minZoom: customBaseLayerAttrs.minZoom || 0,\n    maxZoom: customBaseLayerAttrs.maxZoom || 21,\n    name: name,\n    className: className,\n    attribution: customBaseLayerAttrs.attribution,\n    category: category || 'Custom',\n    tms: customBaseLayerAttrs.tms,\n    selected: baseLayerDefinition.get('className') === className,\n    val: className,\n    label: name,\n    template: function (imgURL) {\n      return mosaicThumbnail({\n        imgURL: imgURL\n      });\n    }\n  });\n};\n\n// Color\n\nvar createColorBasemapModel = function (category, basemapAttrs, baseLayerDefinition, configModel) {\n  return new BasemapModel({\n    default: false,\n    color: basemapAttrs.color || '',\n    image: basemapAttrs.image || '',\n    maxZoom: 32,\n    className: 'plain',\n    category: 'Color',\n    type: 'Plain',\n    selected: baseLayerDefinition.get('className') === 'plain',\n    val: 'plain',\n    label: 'plain',\n    template: function () {\n      return 'plain';\n    }\n  });\n};\n\n//  Factory\n\nvar CATEGORY_CARTODB = 'CARTO';\nvar CATEGORY_STAMEN = 'Stamen';\nvar CATEGORY_HERE = 'Here';\nvar CATEGORY_GMAPS = 'GMaps';\nvar CATEGORY_CUSTOM = 'Custom';\nvar CATEGORY_NASA = 'NASA';\nvar CATEGORY_TILEJSON = 'TileJSON';\nvar CATEGORY_MAPBOX = 'Mapbox';\nvar CATEGORY_WMS = 'WMS';\nvar CATEGORY_COLOR = 'Color';\n\nvar CREATE_METHODS = {};\nCREATE_METHODS[CATEGORY_CARTODB] = createLeafletBasemapModel;\nCREATE_METHODS[CATEGORY_STAMEN] = createLeafletBasemapModel;\nCREATE_METHODS[CATEGORY_HERE] = createLeafletBasemapModel;\nCREATE_METHODS[CATEGORY_GMAPS] = createGoogleMapsBasemapModel;\nCREATE_METHODS[CATEGORY_CUSTOM] = createCustomBasemapModel;\nCREATE_METHODS[CATEGORY_NASA] = createCustomBasemapModel;\nCREATE_METHODS[CATEGORY_TILEJSON] = createCustomBasemapModel;\nCREATE_METHODS[CATEGORY_MAPBOX] = createCustomBasemapModel;\nCREATE_METHODS[CATEGORY_WMS] = createCustomBasemapModel;\nCREATE_METHODS[CATEGORY_COLOR] = createColorBasemapModel;\n\nvar BasemapModelFactory = function (layerDefinitionsCollection, configModel) {\n  if (!layerDefinitionsCollection) throw new Error('layerDefinitionsCollection is required');\n  if (!configModel) throw new Error('configModel is required');\n\n  this._layerDefinitionsCollection = layerDefinitionsCollection;\n  this._configModel = configModel;\n};\n\nBasemapModelFactory.prototype.createBasemapModel = function (basemapCategory, basemapAttrs) {\n  var baseLayer = this._layerDefinitionsCollection.getBaseLayer();\n  var assetsBaseURL = this._configModel.get('app_assets_base_url');\n\n  var createMethod = CREATE_METHODS[basemapCategory];\n  if (!createMethod) {\n    throw new Error(\"Can't create basemapModel for basemap of type: \" + basemapCategory);\n  }\n  return createMethod(basemapCategory, basemapAttrs, baseLayer, assetsBaseURL);\n};\n\nmodule.exports = BasemapModelFactory;\n","var Backbone = require('backbone');\n\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    default: false,\n    minZoom: 0,\n    maxZoom: 21,\n    name: '',\n    category: 'Custom',\n    type: 'Tiled',\n    selected: false,\n    val: '',\n    label: '',\n    template: function () {\n      return '';\n    }\n  },\n\n  getName: function () {\n    return this.get('label') || this.getValue();\n  },\n\n  getValue: function () {\n    return this.get('val');\n  }\n\n});\n","var CoreView = require('backbone/core-view');\nvar template = require('builder/components/mosaic/mosaic-item.tpl');\nvar AddBasemapView = require('builder/components/modals/add-basemap/add-basemap-view');\nvar AddBasemapModel = require('builder/components/modals/add-basemap/add-basemap-model');\n\nmodule.exports = CoreView.extend({\n\n  className: 'Mosaic-item Mosaic-item--dashed',\n\n  tagName: 'li',\n\n  events: {\n    'mouseenter': '_onMouseEnter',\n    'mouseleave': '_onMouseLeave',\n    'click': '_onClick'\n  },\n\n  initialize: function (opts) {\n    if (!opts.layerDefinitionsCollection) throw new Error('layerDefinitionsCollection is required');\n    if (!opts.modals) throw new Error('modals is required');\n    if (!opts.basemapsCollection) throw new Error('basemapsCollection is required');\n    if (!opts.customBaselayersCollection) throw new Error('customBaselayersCollection is required');\n    if (!opts.mosaicModel) throw new Error('mosaicModel is required');\n\n    this._layerDefinitionsCollection = opts.layerDefinitionsCollection;\n    this._basemapsCollection = opts.basemapsCollection;\n    this._customBaselayersCollection = opts.customBaselayersCollection;\n    this._modals = opts.modals;\n    this._currentTab = opts.currentTab;\n    this._mosaicModel = opts.mosaicModel;\n\n    this.add_related_model(this._mosaicModel);\n  },\n\n  render: function () {\n    this.$el.html(\n      template({\n        name: this.model.getName(),\n        template: this.model.get('template')()\n      })\n    );\n    return this;\n  },\n\n  _onMouseEnter: function () {\n    this._mosaicModel.set('highlightedAdd', true);\n  },\n\n  _onMouseLeave: function () {\n    this._mosaicModel.set('highlightedAdd', false);\n  },\n\n  _onClick: function () {\n    var self = this;\n\n    var modal = this._modals.create(function (modalModel) {\n      var addBasemapModel = new AddBasemapModel({}, {\n        layerDefinitionsCollection: self._layerDefinitionsCollection,\n        basemapsCollection: self._basemapsCollection,\n        customBaselayersCollection: self._customBaselayersCollection,\n        currentTab: self._currentTab\n      });\n\n      return new AddBasemapView({\n        modalModel: modalModel,\n        createModel: addBasemapModel\n      });\n    }, {\n      breadcrumbsEnabled: true\n    });\n    modal.show();\n  }\n\n});\n","var BasemapMosaicView = require('./basemap-mosaic-view');\nvar BasemapMosaicModel = require('./basemap-mosaic-model');\nvar MosaicFormView = require('builder/components/mosaic-form-view');\n\n/**\n *  Mosaic form view\n */\n\nmodule.exports = MosaicFormView.extend({\n\n  initialize: function (opts) {\n    if (!opts.collection) throw new Error('Mosaic collection is required');\n    if (!opts.template) throw new Error('template is required');\n    if (!opts.layerDefinitionsCollection) throw new Error('layerDefinitionsCollection is required');\n    if (!opts.basemapsCollection) throw new Error('basemapsCollection is required');\n    if (!opts.customBaselayersCollection) throw new Error('customBaselayersCollection is required');\n    if (!opts.modals) throw new Error('modals is required');\n\n    this.template = opts.template;\n    this._layerDefinitionsCollection = opts.layerDefinitionsCollection;\n    this._basemapsCollection = opts.basemapsCollection;\n    this._customBaselayersCollection = opts.customBaselayersCollection;\n    this._modals = opts.modals;\n    this._disabled = opts.disabled;\n    this._currentTab = opts.currentTab;\n\n    this._initBinds();\n  },\n\n  _initViews: function () {\n    this.mosaic = new BasemapMosaicView({\n      model: new BasemapMosaicModel(),\n      collection: this.collection,\n      layerDefinitionsCollection: this._layerDefinitionsCollection,\n      basemapsCollection: this._basemapsCollection,\n      customBaselayersCollection: this._customBaselayersCollection,\n      modals: this._modals,\n      disabled: this._disabled,\n      currentTab: this._currentTab\n    });\n    this.mosaic.model.bind('change:highlightedAdd', this._onChangeHighlighted, this);\n\n    if (!this.$('.js-selector').length) throw new Error('HTML element with js-selector class is required');\n\n    this.$('.js-selector').append(this.mosaic.render().el);\n    this.addView(this.mosaic);\n  },\n\n  _onChangeHighlighted: function () {\n    var item = this.collection.getHighlighted() || this.mosaic.model.getHighlighted() || this.collection.getSelected();\n    if (item) {\n      var $el = this.$('.js-highlight');\n      if ($el) {\n        $el.text(item.getName());\n      }\n    }\n  }\n\n});\n","/* global Image */\n\nvar template = require('builder/components/mosaic/mosaic-item.tpl');\nvar MosaicItemView = require('builder/components/mosaic/mosaic-item-view');\nvar BasemapMosaicRemoveView = require('./basemap-mosaic-remove-view');\n\nvar DEFAULT_SUBDOMAIN = 'a';\nvar DEFAULT_X_POSITION = 30;\nvar DEFAULT_Y_POSISTION = 24;\nvar DEFAULT_ZOOM = 6;\nvar DEFAULT_IMG = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAZ9JREFUWAntWUtugzAUNKbAJl1EYtcz9Ba5UE6SC+UWPUN3SNlkw78zVhJRCeIXbCup6ic5gP08Ho/x40ESBauq6iNJkgPKDpdb1j3RTuM4HlH2ZVl+JySXpukXygaksiViRVEsNd3qu65Tfd/frpdO8jxXEGO2GcTUMAxtXddnYH1qKqe1fof3IrlZpECVJA6xMgiyMdzws0N5CzTealiIlpGbBsKz77nZSYAc67ck+NIWCbouj1cFL/eNK6df/UW7FztKMT7ZTOJDDMQ5RUyJGYK2IMyBm6ax4nFQGxZBEIStWFcH2TSu3pZjiCX2StDCf1VzJLhKtkmnqOBEjFWn/0tBaaB+REoTqJkJ2wxJpM3FtPvGMgQlabrkCUEcCcF7Kf9UBT5xvN6DIZbYK8Hp7H2dR4KuSkYFo4KPKBAiYTWBmoHznvEdQpKm82ljw+I4DObElJghaJu59AWHA9qw6CMlR9+4i6mCi0UFXdRj3z+hIL8Ju040VP+TBrkjtn0bagQH3JbcSHB/+WDNCgc8r11bZOdncjPfWV/5b4gfOaaYLUG/QVoAAAAASUVORK5CYII=';\nvar DEFAULT_NAME = _t('editor.layers.basemap.custom-basemap');\n\nmodule.exports = MosaicItemView.extend({\n\n  initialize: function (opts) {\n    if (!opts.basemapsCollection) throw new Error('basemapsCollection is required');\n\n    this._basemapsCollection = opts.basemapsCollection;\n    this._disabled = opts.disabled;\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.$el.html(\n      template({\n        name: this._getName(),\n        template: this.model.get('template')(this._getImageURL())\n      })\n    );\n    this.$el.addClass('js-' + this.model.getValue());\n    this.$el.toggleClass('is-selected', !!this.model.get('selected'));\n\n    this._initViews();\n\n    return this;\n  },\n\n  _initViews: function () {\n    var basemapMosaicRemoveView = new BasemapMosaicRemoveView({\n      model: this.model,\n      basemapsCollection: this._basemapsCollection\n    });\n    this.addView(basemapMosaicRemoveView);\n    this.$el.append(basemapMosaicRemoveView.render().el);\n  },\n\n  _getImageURL: function () {\n    var self = this;\n    var url = this._lowerXYZ();\n\n    var image = new Image();\n    image.onerror = function () {\n      self.$('.js-thumbnailImg').attr('src', DEFAULT_IMG);\n    };\n    image.src = url;\n\n    return url;\n  },\n\n  _getSubdomain: function () {\n    var subdomains = this.model.get('subdomains'); // eg: 'abcd' or '1234'\n\n    return (subdomains && subdomains.length) ? subdomains[0] : DEFAULT_SUBDOMAIN;\n  },\n\n  _lowerXYZ: function () {\n    return this.model.get('urlTemplate')\n      .replace('{s}', this._getSubdomain())\n      .replace('{z}', DEFAULT_ZOOM)\n      .replace('{x}', DEFAULT_X_POSITION)\n      .replace('{y}', DEFAULT_Y_POSISTION);\n  },\n\n  _getName: function () {\n    var name = this.model.getName();\n\n    if (!name) {\n      name = this.model.get('order') ? DEFAULT_NAME + ' ' + this.model.get('order') : DEFAULT_NAME;\n    } else {\n      name.replace(/_/g, '');\n    }\n\n    return name;\n  }\n\n});\n","var Backbone = require('backbone');\n\n/*\n *  List item model\n *\n */\n\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    highlightedAdd: false\n  },\n\n  getHighlighted: function () {\n    return this.get('highlightedAdd') && this;\n  },\n\n  getName: function () {\n    return 'Add';\n  }\n\n});\n","var CoreView = require('backbone/core-view');\nvar template = require('./basemap-mosaic-remove.tpl');\nvar CustomListCollection = require('builder/components/custom-list/custom-list-collection');\nvar ContextMenuView = require('builder/components/context-menu/context-menu-view');\n\nmodule.exports = CoreView.extend({\n\n  tagName: 'span',\n  className: 'Mosaic-remove CDB-Shape-threePoints is-white is-small js-Mosaic-remove',\n\n  events: {\n    'click': '_onToggleContextMenuClicked'\n  },\n\n  initialize: function (opts) {\n    if (!opts.basemapsCollection) throw new Error('basemapsCollection is required');\n\n    this._basemapsCollection = opts.basemapsCollection;\n  },\n\n  render: function () {\n    this.$el.html(template());\n\n    return this;\n  },\n\n  _hasContextMenu: function () {\n    return this._menuView;\n  },\n\n  _hideContextMenu: function () {\n    this.removeView(this._menuView);\n    this._menuView.clean();\n    delete this._menuView;\n  },\n\n  _showContextMenu: function (position) {\n    this._menuItems = new CustomListCollection([{\n      label: _t('editor.layers.basemap.remove-baselayer'),\n      val: 'remove-baselayer',\n      destructive: true\n    }]);\n\n    var triggerElementID = 'context-menu-trigger-' + this.model.cid;\n    this.$('.js-Mosaic-remove').attr('id', triggerElementID);\n    this._menuView = new ContextMenuView({\n      collection: this._menuItems,\n      triggerElementID: triggerElementID,\n      position: position\n    });\n\n    this._menuItems.bind('change:selected', function (menuItem) {\n      if (menuItem.get('val') === 'remove-baselayer') {\n        this._deleteBaselayer();\n      }\n    }, this);\n    this.add_related_model(this._menuItems);\n\n    this._menuView.model.bind('change:visible', function (model, isContextMenuVisible) {\n      if (this._hasContextMenu() && !isContextMenuVisible) {\n        this._hideContextMenu();\n      }\n    }, this);\n\n    this._menuView.show();\n    this.addView(this._menuView);\n  },\n\n  _deleteBaselayer: function () {\n    this._basemapsCollection.remove(this.model);\n  },\n\n  _onToggleContextMenuClicked: function (e) {\n    this.killEvent(e);\n\n    if (this._hasContextMenu()) {\n      this._hideContextMenu();\n    } else {\n      this._showContextMenu({\n        x: e.pageX + 215, // CustomList--small width\n        y: e.pageY\n      });\n    }\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"CDB-Shape-threePointsItem\"></div>\\n<div class=\"CDB-Shape-threePointsItem\"></div>\\n<div class=\"CDB-Shape-threePointsItem\"></div>\\n';\n\n}\nreturn __p\n}","var template = require('builder/components/mosaic/mosaic.tpl');\nvar MosaicView = require('builder/components/mosaic/mosaic-view');\nvar MosaicItemModel = require('builder/components/mosaic/mosaic-item-model');\nvar BasemapMosaicItemView = require('./basemap-mosaic-item-view');\nvar MosaicAddItemView = require('./basemap-mosaic-add-item-view');\n\nmodule.exports = MosaicView.extend({\n\n  initialize: function (opts) {\n    if (!opts.layerDefinitionsCollection) throw new Error('layerDefinitionsCollection is required');\n    if (!opts.basemapsCollection) throw new Error('basemapsCollection is required');\n    if (!opts.customBaselayersCollection) throw new Error('customBaselayersCollection is required');\n    if (!opts.modals) throw new Error('modals is required');\n\n    this._layerDefinitionsCollection = opts.layerDefinitionsCollection;\n    this._basemapsCollection = opts.basemapsCollection;\n    this._customBaselayersCollection = opts.customBaselayersCollection;\n    this._modals = opts.modals;\n    this._disabled = opts.disabled;\n    this._currentTab = opts.currentTab;\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template());\n    this._renderList();\n    this._createAddItem();\n    return this;\n  },\n\n  _createItem: function (mdl) {\n    var view = new BasemapMosaicItemView({\n      model: mdl,\n      disabled: this._disabled,\n      basemapsCollection: this._basemapsCollection\n    });\n    this.$('.js-mosaic').append(view.render().el);\n    this.addView(view);\n  },\n\n  _createAddItem: function () {\n    var view = new MosaicAddItemView({\n      model: new MosaicItemModel({\n        label: 'Add',\n        val: 'add',\n        template: function () {\n          return '<div class=\"Mosaic-button\">+</div>';\n        }\n      }),\n      layerDefinitionsCollection: this._layerDefinitionsCollection,\n      basemapsCollection: this._basemapsCollection,\n      customBaselayersCollection: this._customBaselayersCollection,\n      mosaicModel: this.model,\n      modals: this._modals,\n      currentTab: this._currentTab\n    });\n    this.$('.js-mosaic').append(view.render().el);\n    this.addView(view);\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"js-selector\">\\n  <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n    <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.layers.basemap.style.title-label') ) +\n'</h2>\\n  </div>\\n  <p class=\"CDB-Text u-upperCase CDB-FontSize-small u-altTextColor u-bSpace--m js-highlight\">' +\n__e( _t('editor.layers.basemap.style.select-style') ) +\n'</p>\\n</div>\\n';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar template = require('./basemap-select.tpl');\nvar MosaicFormView = require('builder/components/mosaic-form-view');\nvar BasemapFormView = require('./basemap-form-view');\nvar MosaicCollection = require('builder/components/mosaic/mosaic-collection');\nvar BasemapMosaicFormView = require('./basemap-mosaic-form-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'layerDefinitionsCollection',\n  'basemapsCollection',\n  'customBaselayersCollection',\n  'selectedCategoryVal',\n  'modals'\n];\n\nmodule.exports = CoreView.extend({\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._baseLayer = this._layerDefinitionsCollection.getBaseLayer();\n    this._disabled = opts.disabled;\n\n    this._initCollection();\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template());\n\n    var category = this._selectedCategoryVal.toLowerCase();\n\n    switch (category) {\n      case 'color':\n        this._renderForm();\n        break;\n      case 'custom':\n        this._renderCustomMosaic();\n        break;\n      case 'nasa':\n      case 'tilejson':\n      case 'mapbox':\n      case 'wms':\n        this._renderCustomMosaic(category);\n        break;\n      default:\n        this._renderMosaic();\n    }\n\n    return this;\n  },\n\n  _initCollection: function () {\n    this._filteredBasemapsCollection = new MosaicCollection(\n      this._basemapsCollection.findByCategory(this._selectedCategoryVal)\n    );\n  },\n\n  _initBinds: function () {\n    this._filteredBasemapsCollection.bind('change:selected', function (mdl) {\n      if (mdl.get('selected')) {\n        var value = mdl.getValue();\n\n        this._changeBasemap(value);\n      }\n    }, this);\n    this.add_related_model(this._filteredBasemapsCollection);\n  },\n\n  _changeBasemap: function (value) {\n    var basemap = this._basemapsCollection.getByValue(value);\n\n    this._layerDefinitionsCollection.setBaseLayer(basemap.toJSON());\n  },\n\n  _renderMosaic: function () {\n    var view = new MosaicFormView({\n      collection: this._filteredBasemapsCollection,\n      template: require('./basemap-mosaic.tpl'),\n      disabled: this._disabled\n    });\n    this.addView(view);\n    this.$('.js-select').append(view.render().el);\n  },\n\n  _renderCustomMosaic: function (category) {\n    var view = new BasemapMosaicFormView({\n      collection: this._filteredBasemapsCollection,\n      template: require('./basemap-mosaic.tpl'),\n      layerDefinitionsCollection: this._layerDefinitionsCollection,\n      basemapsCollection: this._basemapsCollection,\n      customBaselayersCollection: this._customBaselayersCollection,\n      modals: this._modals,\n      disabled: this._disabled,\n      currentTab: category\n    });\n    this.addView(view);\n    this.$('.js-select').append(view.render().el);\n  },\n\n  _renderForm: function () {\n    var view = new BasemapFormView({\n      model: this._baseLayer,\n      basemapsCollection: this._basemapsCollection,\n      layerDefinitionsCollection: this._layerDefinitionsCollection,\n      disabled: this._disabled\n    });\n    this.addView(view);\n    this.$('.js-select').append(view.render().el);\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"Editor-HeaderInfo\">\\n  <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">2</div>\\n  <div class=\"Editor-HeaderInfo-inner CDB-Text js-select\"></div>\\n</div>\\n';\n\n}\nreturn __p\n}","var Backbone = require('backbone');\nvar BasemapModel = require('./basemap-model');\nvar _ = require('underscore');\n\n/*\n *  Basemap collection, extends Mosaic collection\n */\n\nmodule.exports = Backbone.Collection.extend({\n\n  model: BasemapModel,\n\n  initialize: function () {\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.bind('change:selected', this._onSelectedChange, this);\n  },\n\n  _onSelectedChange: function (changedModel, isSelected) {\n    if (isSelected) {\n      this.each(function (m) {\n        if (m.cid !== changedModel.cid && m.get('selected')) {\n          m.set('selected', false);\n        }\n      });\n    }\n  },\n\n  findByCategory: function (category) {\n    return this.where({ category: category });\n  },\n\n  getDefaultCategory: function () {\n    var defaultCategory = this.findWhere({ default: true });\n    defaultCategory = defaultCategory || this.first();\n\n    return defaultCategory.get('category');\n  },\n\n  getCategories: function () {\n    var categories = this.chain()\n      .map(function (model) { return model.get('category'); })\n      .concat('Custom')\n      .concat('NASA')\n      .concat('TileJSON')\n      .concat('Mapbox')\n      .concat('WMS')\n      .uniq()\n      .value();\n\n    return categories;\n  },\n\n  getSelected: function () {\n    return this.findWhere({ selected: true });\n  },\n\n  updateSelected: function (value) {\n    var newSelected = this.getByValue(value);\n    newSelected.set({ selected: true });\n  },\n\n  updateCategory: function (value, category) {\n    var newCategory = this.getByValue(value);\n    newCategory.set({ category: category });\n  },\n\n  getByValue: function (value) {\n    return _.first(this.where({ val: value }));\n  },\n\n  getThumbnailImage: function (urlTemplate, subdomains) {\n    return this._lowerXYZ(urlTemplate, subdomains);\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"js-basemapHeader\"></div>\\n<div class=\"js-basemapContent Editor-content\"></div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"Editor-contextSwitchers js-switchers\\n            ';\n if (context === 'table') { ;\n__p += 'Editor-contextSwitchers--table';\n } ;\n__p += ' \">\\n  <ul class=\"u-flex u-alignRight Editor-contextSwitcher Editor-contextSwitcher--geom js-newGeometryView\">\\n    ';\n if (queryGeometryModel === 'point' || !queryGeometryModel) { ;\n__p += '\\n      <li class=\"Editor-contextSwitcherItem js-newGeometryItem ';\n if (isReadOnly || !isVisible) { ;\n__p += 'is-disabled';\n } ;\n__p += '\">\\n        <div class=\"Editor-contextSwitcherButton js-newGeometry\" data-feature-type=\"point\" data-tooltip=\"' +\n__e( _t('editor.edit-feature.add-point') ) +\n'\">\\n          <svg width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><defs><path d=\"M0 2h3v1H0V2zm0-2h3v1H0V0zm2 1h1v1H2V1zM0 1h1v1H0V1z\" id=\"a\"/><path d=\"M0 2h3v1H0V2zm0-2h3v1H0V0zm2 1h1v1H2V1zM0 1h1v1H0V1z\" id=\"c\"/><path d=\"M0 2h3v1H0V2zm0-2h3v1H0V0zm2 1h1v1H2V1zM0 1h1v1H0V1z\" id=\"e\"/></defs><g fill=\"none\" fill-rule=\"evenodd\"><path fill=\"#FFF\" d=\"M4 3h3v1H4v3H3V4H0V3h3V0h1\"/><g transform=\"rotate(180 2.5 6)\"><mask id=\"b\" fill=\"#fff\"><use xlink:href=\"#a\"/></mask><path d=\"M0 2h3v1H0V2zm0-2h3v1H0V0zm2 1h1v1H2V1zM0 1h1v1H0V1z\" mask=\"url(#b)\" stroke=\"#FFF\" stroke-width=\"2\"/></g><g transform=\"rotate(180 6 6)\"><mask id=\"d\" fill=\"#fff\"><use xlink:href=\"#c\"/></mask><path d=\"M0 2h3v1H0V2zm0-2h3v1H0V0zm2 1h1v1H2V1zM0 1h1v1H0V1z\" mask=\"url(#d)\" stroke=\"#FFF\" stroke-width=\"2\"/></g><g transform=\"rotate(180 6 2.5)\"><mask id=\"f\" fill=\"#fff\"><use xlink:href=\"#e\"/></mask><path d=\"M0 2h3v1H0V2zm0-2h3v1H0V0zm2 1h1v1H2V1zM0 1h1v1H0V1z\" mask=\"url(#f)\" stroke=\"#FFF\" stroke-width=\"2\"/></g></g></svg>\\n        </div>\\n      </li>\\n    ';\n } ;\n__p += '\\n    ';\n if (queryGeometryModel === 'line' || !queryGeometryModel) { ;\n__p += '\\n      <li class=\"Editor-contextSwitcherItem js-newGeometryItem ';\n if (isReadOnly || !isVisible) { ;\n__p += 'is-disabled';\n } ;\n__p += '\">\\n        <div class=\"Editor-contextSwitcherButton js-newGeometry\" data-feature-type=\"line\" data-tooltip=\"' +\n__e( _t('editor.edit-feature.add-line') ) +\n'\">\\n          <svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><defs><path d=\"M0 2h3v1H0V2zm0-2h3v1H0V0zm2 1h1v1H2V1zM0 1h1v1H0V1z\" id=\"a\"/><path d=\"M0 2h3v1H0V2zm0-2h3v1H0V0zm2 1h1v1H2V1zM0 1h1v1H0V1z\" id=\"c\"/></defs><g fill=\"none\" fill-rule=\"evenodd\"><path fill=\"#FFF\" d=\"M11.5 5l-.707-.707-6.354 6.853.704.708\"/><g transform=\"translate(11 2)\"><mask id=\"b\" fill=\"#fff\"><use xlink:href=\"#a\"/></mask><path d=\"M0 2h3v1H0V2zm0-2h3v1H0V0zm2 1h1v1H2V1zM0 1h1v1H0V1z\" mask=\"url(#b)\" stroke=\"#FFF\" stroke-width=\"2\"/></g><g transform=\"translate(2 11)\"><mask id=\"d\" fill=\"#fff\"><use xlink:href=\"#c\"/></mask><path d=\"M0 2h3v1H0V2zm0-2h3v1H0V0zm2 1h1v1H2V1zM0 1h1v1H0V1z\" mask=\"url(#d)\" stroke=\"#FFF\" stroke-width=\"2\"/></g><path fill=\"#FFF\" d=\"M3 4H0V3h3V0h1v3h3v1H4v3H3\"/></g></svg>\\n        </div>\\n      </li>\\n    ';\n } ;\n__p += '\\n    ';\n if (queryGeometryModel === 'polygon' || !queryGeometryModel) { ;\n__p += '\\n      <li class=\"Editor-contextSwitcherItem js-newGeometryItem ';\n if (isReadOnly || !isVisible) { ;\n__p += 'is-disabled';\n } ;\n__p += '\">\\n        <div class=\"Editor-contextSwitcherButton js-newGeometry\" data-feature-type=\"polygon\" data-tooltip=\"' +\n__e( _t('editor.edit-feature.add-polygon') ) +\n'\">\\n          <svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><defs><path d=\"M0 2h3v1H0V2zm0-2h3v1H0V0zm2 1h1v1H2V1zM0 1h1v1H0V1z\" id=\"a\"/><path d=\"M0 2h3v1H0V2zm0-2h3v1H0V0zm2 1h1v1H2V1zM0 1h1v1H0V1z\" id=\"c\"/><path d=\"M0 2h3v1H0V2zm0-2h3v1H0V0zm2 1h1v1H2V1zM0 1h1v1H0V1z\" id=\"e\"/></defs><g fill=\"none\" fill-rule=\"evenodd\"><path d=\"M13 11.5V5h-1v7h1m-.5-7.5l-.707-.707-7.647 7.353-.353.354.707.707.354-.353M4 3h3v1H4v3H3V4H0V3h3V0h1\" fill=\"#FFF\"/><path fill=\"#FFF\" d=\"M4.5 13H12v-1H4v1\"/><g transform=\"rotate(180 7 7)\"><mask id=\"b\" fill=\"#fff\"><use xlink:href=\"#a\"/></mask><path d=\"M0 2h3v1H0V2zm0-2h3v1H0V0zm2 1h1v1H2V1zM0 1h1v1H0V1z\" stroke=\"#FFF\" stroke-width=\"2\" mask=\"url(#b)\"/></g><g transform=\"rotate(180 7 2.5)\"><mask id=\"d\" fill=\"#fff\"><use xlink:href=\"#c\"/></mask><path d=\"M0 2h3v1H0V2zm0-2h3v1H0V0zm2 1h1v1H2V1zM0 1h1v1H0V1z\" stroke=\"#FFF\" stroke-width=\"2\" mask=\"url(#d)\"/></g><g transform=\"rotate(180 2.5 7)\"><mask id=\"f\" fill=\"#fff\"><use xlink:href=\"#e\"/></mask><path d=\"M0 2h3v1H0V2zm0-2h3v1H0V0zm2 1h1v1H2V1zM0 1h1v1H0V1z\" stroke=\"#FFF\" stroke-width=\"2\" mask=\"url(#f)\"/></g></g></svg>\\n        </div>\\n      </li>\\n    ';\n } ;\n__p += '\\n  </ul>\\n\\n  <div class=\"u-flex u-alignCenter Editor-contextSwitcher Editor-contextSwitcher--view js-mapTableView\"></div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"u-flex u-justifyCenter\">\\n  <div class=\"Modal-inner Modal-inner--grid u-flex u-justifyCenter\">\\n    <div class=\"Modal-icon\">\\n      <svg width=\"24px\" height=\"25px\" viewbox=\"521 436 24 25\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n        <path d=\"M524.5,440 L540.5,440 L540.5,460 L524.5,460 L524.5,440 Z M528.5,437 L536.5,437 L536.5,440 L528.5,440 L528.5,437 Z M522,440 L544,440 L522,440 Z M528.5,443.5 L528.5,455.5 L528.5,443.5 Z M532.5,443.5 L532.5,455.5 L532.5,443.5 Z M536.5,443.5 L536.5,455.5 L536.5,443.5 Z\" id=\"Shape\" stroke=\"#F19243\" stroke-width=\"1\" fill=\"none\"/>\\n      </svg>\\n    </div>\\n    <div>\\n      <h2 class=\"CDB-Text CDB-Size-huge is-light u-bSpace--xl\">' +\n__e( _t('editor.layers.delete.title', { layerName: layerName }) ) +\n'</h2>\\n      <p class=\"CDB-Text CDB-Size-large u-altTextColor\">' +\n((__t = ( _t('editor.layers.delete.desc', { layerVisName: layerVisName }) )) == null ? '' : __t) +\n'</p>\\n      <ul class=\"Modal-listText\">\\n        ';\n if (affectedItemsMessages.length > 0) { ;\n__p += '\\n          <li class=\"Modal-listTextItem\">\\n            <p class=\"CDB-Text CDB-Size-large\">\\n              ' +\n((__t = ( _t('editor.layers.delete.affected-items') )) == null ? '' : __t) +\n'\\n              ';\n for (var i = 0; i < affectedItemsMessages.length; i++) { ;\n__p += '\\n                  <span class=\"CDB-Text is-semibold\">' +\n__e( affectedItemsMessages[i] ) +\n'</span>\\n                  ';\n if (i < (affectedItemsMessages.length - 2)) { ;\n__p += '\\n                    ,\\n                  ';\n } else if (i == (affectedItemsMessages.length - 2)) { ;\n__p += '\\n                    ' +\n((__t = ( _t('editor.layers.delete.and') )) == null ? '' : __t) +\n'\\n                  ';\n } ;\n__p += '\\n              ';\n } ;\n__p += '\\n              .</p>\\n          </li>\\n        ';\n } ;\n__p += '\\n        <li class=\"Modal-listTextItem\">\\n          <p class=\"CDB-Text CDB-Size-large\">' +\n((__t = ( _t('editor.layers.delete.link-to-export') )) == null ? '' : __t) +\n'</p>\\n        </li>\\n      </ul>\\n      <ul class=\"Modal-listActions u-flex u-alignCenter\">\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--secondary CDB-Button--big js-cancel\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n              ' +\n__e( _t('editor.layers.delete.cancel') ) +\n'\\n            </span>\\n          </button>\\n        </li>\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-confirm\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n              ' +\n__e( _t('editor.layers.delete.confirm') ) +\n'\\n            </span>\\n          </button>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar $ = require('jquery');\nvar CoreView = require('backbone/core-view');\nvar template = require('./edit-feature-content.tpl');\nvar EditFeatureActionView = require('./edit-feature-content-views/edit-feature-action-view');\nvar EditFeatureControlView = require('./edit-feature-content-views/edit-feature-control-view');\nvar EditFeatureHeaderView = require('./edit-feature-content-views/edit-feature-header-view');\nvar VisTableModel = require('builder/data/visualization-table-model');\nvar EditFeatureInnerView = require('./edit-feature-content-views/edit-feature-inner-view');\nvar PanelWithOptionsView = require('builder/components/view-options/panel-with-options-view');\nvar ScrollView = require('builder/components/scroll/scroll-view');\nvar Notifier = require('builder/components/notifier/notifier');\nvar EditFeatureGeometryFormModel = require('./edit-feature-content-views/edit-feature-geometry-form-model');\nvar EditFeatureGeometryPointFormModel = require('./edit-feature-content-views/edit-feature-geometry-point-form-model');\nvar EditFeatureAttributesFormModel = require('./edit-feature-content-views/edit-feature-attributes-form-model');\n\nvar StyleHelper = require('builder/helpers/style');\nvar StyleConstants = require('builder/components/form-components/_constants/_style');\nvar StylesFactory = require('builder/editor/style/styles-factory');\n\nvar Router = require('builder/routes/router');\n\nvar NOTIFICATION_ID = 'editFeatureNotification';\nvar NOTIFICATION_ERROR_TEMPLATE = _.template(\"<span class='u-errorTextColor'><%- title %></span>\");\n\nvar REQUIRED_OPTS = [\n  'stackLayoutModel',\n  'layerDefinitionModel',\n  'configModel',\n  'mapModeModel',\n  'editorModel',\n  'modals'\n];\n\nvar GEOMETRY_TYPE = 'simple_geom';\n\nmodule.exports = CoreView.extend({\n\n  className: 'Editor-content',\n\n  events: {\n    'click .js-back': 'cleanAndGoBack'\n  },\n\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (opts[item] === undefined) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n\n    this._featureModel = this._mapModeModel.getFeatureDefinition();\n    this._tableName = '';\n    this._url = '';\n\n    this._editorModel.set({\n      edition: false\n    });\n\n    this._getTable();\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template());\n\n    this._initViews();\n\n    return this;\n  },\n\n  _initBinds: function () {\n    if (this._querySchemaModel.get('status') !== 'fetched') {\n      // status can be: fetched, unavailable, fetching\n      this._querySchemaModel.bind('change:status', this.render, this);\n      this._querySchemaModel.fetch();\n    }\n\n    this._queryGeometryModel.bind('change:' + GEOMETRY_TYPE, this._checkNewLayerGeometryTypeDefinition, this);\n\n    this.listenTo(this._editorModel, 'cancelPreviousEditions', this.clean);\n\n    this.listenTo(this._featureModel, 'updateFeature', this._updateForms);\n    this.listenTo(this._featureModel, 'destroyFeature', this._onDestroyFeature);\n    this.listenTo(this._featureModel, 'destroyFeatureSuccess', this._onDestroyFeatureSuccess);\n    this.listenTo(this._featureModel, 'destroyFeatureFailed', this._onDestroyFeatureFailed);\n    this.listenTo(this._featureModel, 'addFeature', this._onAddFeature);\n    this.listenTo(this._featureModel, 'saveFeature', this._onSaveFeature);\n    this.listenTo(this._featureModel, 'saveFeatureSuccess', this._onSaveFeatureSuccess);\n    this.listenTo(this._featureModel, 'saveFeatureFailed', this._onSaveFeatureFailed);\n  },\n\n  _initViews: function () {\n    if (this._featureModel.isNew()) {\n      this._addRow();\n    } else {\n      this._renderInfo();\n    }\n  },\n\n  _updateForms: function () {\n    this._updateGeometry();\n    this._attributesFormModel.trigger('updateFeature');\n  },\n\n  _updateGeometry: function () {\n    var geojson = null;\n\n    try {\n      geojson = JSON.parse(this._featureModel.get('the_geom'));\n    } catch (err) {\n      // if the geom is not a valid json value\n    }\n\n    var attrs;\n\n    if (this._featureModel.isPoint()) {\n      attrs = {\n        lng: geojson && geojson.coordinates[0],\n        lat: geojson && geojson.coordinates[1]\n      };\n    } else {\n      attrs = {\n        the_geom: this._featureModel.get('the_geom')\n      };\n    }\n\n    this._geometryFormModel.set(attrs);\n    this._geometryFormModel.trigger('updateFeature', attrs);\n  },\n\n  _addRow: function () {\n    this._renderInfo();\n  },\n\n  _renderInfo: function () {\n    this._renderHeader();\n    this._renderContent();\n  },\n\n  _renderHeader: function () {\n    if (this._headerView) {\n      this.removeView(this._headerView);\n      this._headerView.clean();\n    }\n\n    this._headerView = new EditFeatureHeaderView({\n      url: this._url,\n      tableName: this._tableName,\n      layerDefinitionModel: this._layerDefinitionModel,\n      model: this._featureModel,\n      modals: this._modals,\n      isNew: this._featureModel.isNew(),\n      backAction: this.cleanAndGoBack.bind(this)\n    });\n    this.addView(this._headerView);\n    this.$('.js-editFeatureHeader').html(this._headerView.render().el);\n  },\n\n  _renderContent: function () {\n    if (this._contentView) {\n      this.removeView(this._contentView);\n      this._contentView.clean();\n    }\n\n    var geojson = null;\n\n    try {\n      geojson = JSON.parse(this._featureModel.get('the_geom'));\n    } catch (err) {\n      // if the geom is not a valid json value\n    }\n\n    if (this._featureModel.isPoint()) {\n      this._geometryFormModel = new EditFeatureGeometryPointFormModel({\n        lng: geojson && geojson.coordinates[0],\n        lat: geojson && geojson.coordinates[1]\n      }, {\n        featureModel: this._featureModel\n      });\n    } else {\n      this._geometryFormModel = new EditFeatureGeometryFormModel({\n        the_geom: this._featureModel.get('the_geom')\n      }, {\n        featureModel: this._featureModel\n      });\n    }\n\n    this._attributesFormModel = new EditFeatureAttributesFormModel(this._featureModel.toJSON(), {\n      featureModel: this._featureModel,\n      columnsCollection: this._sourceNode.querySchemaModel.columnsCollection,\n      configModel: this._configModel,\n      nodeDefModel: this._layerDefinitionModel.getAnalysisDefinitionNodeModel()\n    });\n\n    this._contentView = new PanelWithOptionsView({\n      className: 'Editor-content',\n      editorModel: this._editorModel,\n      createContentView: function () {\n        return new ScrollView({\n          createContentView: function () {\n            return new EditFeatureInnerView({\n              featureModel: this._featureModel,\n              geometryFormModel: this._geometryFormModel,\n              attributesFormModel: this._attributesFormModel\n            });\n          }.bind(this)\n        });\n      }.bind(this),\n      createControlView: function () {\n        return new EditFeatureControlView();\n      },\n      createActionView: function () {\n        return new EditFeatureActionView({\n          model: this.model,\n          featureModel: this._featureModel,\n          geometryFormModel: this._geometryFormModel,\n          attributesFormModel: this._attributesFormModel\n        });\n      }.bind(this)\n    });\n    this.addView(this._contentView);\n    this.$('.js-editFeatureContent').html(this._contentView.render().el);\n  },\n\n  _onDestroyFeature: function () {\n    if (Notifier.getNotification(NOTIFICATION_ID)) {\n      Notifier.removeNotification(NOTIFICATION_ID);\n    }\n\n    this.notification = Notifier.addNotification({\n      id: NOTIFICATION_ID,\n      status: 'loading',\n      info: _t('notifications.edit-feature.destroy.loading'),\n      closable: false\n    });\n  },\n\n  _onDestroyFeatureSuccess: function () {\n    this._onUpdateFeature('destroy');\n\n    this.notification.set({\n      status: 'success',\n      info: _t('notifications.edit-feature.destroy.success'),\n      closable: true\n    });\n\n    var layerId = this._layerDefinitionModel.get('id');\n    Router.goToStyleTab(layerId);\n  },\n\n  _onDestroyFeatureFailed: function (mdl, error) {\n    this.notification.set({\n      status: 'error',\n      info: NOTIFICATION_ERROR_TEMPLATE({\n        title: _t('notifications.edit-feature.destroy.error')\n      }),\n      closable: true\n    });\n  },\n\n  _onAddFeature: function () {\n    if (Notifier.getNotification(NOTIFICATION_ID)) {\n      Notifier.removeNotification(NOTIFICATION_ID);\n    }\n\n    this.notification = Notifier.addNotification({\n      id: NOTIFICATION_ID,\n      status: 'loading',\n      info: _t('notifications.edit-feature.adding'),\n      closable: false\n    });\n  },\n\n  _onSaveFeature: function () {\n    if (Notifier.getNotification(NOTIFICATION_ID)) {\n      Notifier.removeNotification(NOTIFICATION_ID);\n    }\n\n    this.notification = Notifier.addNotification({\n      id: NOTIFICATION_ID,\n      status: 'loading',\n      info: _t('notifications.edit-feature.save.loading'),\n      closable: false\n    });\n  },\n\n  _onSaveFeatureSuccess: function (operation, model) {\n    this._onUpdateFeature(operation);\n    this._needReloadVis() && this._mapModeModel.trigger('reloadVis');\n\n    this.notification.set({\n      status: 'success',\n      info: _t('notifications.edit-feature.save.success'),\n      closable: true\n    });\n\n    Router.editFeature(model);\n  },\n\n  _checkNewLayerGeometryTypeDefinition: function (queryGeometryModel, currentGeometryType) {\n    var layerGeometryTypeHasBeenDefined = currentGeometryType && !(queryGeometryModel.previous(GEOMETRY_TYPE));\n\n    if (layerGeometryTypeHasBeenDefined) {\n      var defaultStyle = _.extend({ type: StyleConstants.Type.SIMPLE },\n        StylesFactory.getDefaultStyleAttrsByType(StyleConstants.Type.SIMPLE, currentGeometryType)\n      );\n      this._layerDefinitionModel.styleModel.set(defaultStyle);\n    }\n  },\n\n  _onSaveFeatureFailed: function (mdl, error) {\n    this.notification.set({\n      status: 'error',\n      info: NOTIFICATION_ERROR_TEMPLATE({\n        title: _t('notifications.edit-feature.save.error')\n      }),\n      closable: true\n    });\n  },\n\n  _onUpdateFeature: function (operation) {\n    var self = this;\n    this._queryGeometryModel.hasValueAsync()\n      .then(function (hasGeom) {\n        if (operation !== 'save' || !hasGeom) {\n          self._queryGeometryModel.resetFetch();\n        }\n      });\n\n    if (operation === 'add' || operation === 'destroy') {\n      this._rowsCollection.resetFetch();\n    }\n  },\n\n  _needReloadVis: function () {\n    var style = this._layerDefinitionModel.styleModel;\n    var color = StyleHelper.getColorAttribute(style);\n    var size = StyleHelper.getSizeAttribute(style);\n    var changed = _.keys(this._featureModel.changedAttributes());\n    return (color && _.contains(changed, color) || size && _.contains(changed, size));\n  },\n\n  _getTable: function () {\n    this._sourceNode = this._getSourceNode();\n\n    if (this._sourceNode) {\n      var tableName = this._sourceNode.get('table_name');\n      this._visTableModel = new VisTableModel({\n        id: tableName,\n        table: {\n          name: tableName\n        }\n      }, {\n        configModel: this._configModel\n      });\n\n      this._querySchemaModel = this._sourceNode.querySchemaModel;\n      this._queryGeometryModel = this._sourceNode.queryGeometryModel;\n      this._rowsCollection = this._sourceNode.queryRowsCollection;\n    }\n\n    if (this._visTableModel) {\n      var tableModel = this._visTableModel.getTableModel();\n      this._tableName = tableModel.getUnquotedName();\n      this._url = this._visTableModel && this._visTableModel.datasetURL();\n    }\n  },\n\n  _getSourceNode: function () {\n    var node = this._layerDefinitionModel.getAnalysisDefinitionNodeModel();\n    var source;\n    if (node.get('type') === 'source') {\n      source = node;\n    } else {\n      var primarySource = node.getPrimarySource();\n      if (primarySource && primarySource.get('type') === 'source') {\n        source = primarySource;\n      }\n    }\n\n    return source;\n  },\n\n  _destroyContextOverlay: function () {\n    $('.js-editOverlay').fadeOut(200, function () {\n      $('.js-editOverlay').remove();\n    });\n  },\n\n  cleanAndGoBack: function () {\n    this.clean();\n    this._mapModeModel.enterViewingMode();\n    Router.goToPreviousRoute({\n      options: { replace: true }\n    });\n  },\n\n  clean: function () {\n    this._destroyContextOverlay();\n    CoreView.prototype.clean.apply(this);\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"u-flex u-justifyCenter\">\\n  <div class=\"Modal-inner Modal-inner--grid u-flex u-justifyCenter\">\\n    <div class=\"Modal-icon\">\\n      <svg width=\"24px\" height=\"25px\" viewbox=\"521 436 24 25\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n        <path d=\"M524.5,440 L540.5,440 L540.5,460 L524.5,460 L524.5,440 Z M528.5,437 L536.5,437 L536.5,440 L528.5,440 L528.5,437 Z M522,440 L544,440 L522,440 Z M528.5,443.5 L528.5,455.5 L528.5,443.5 Z M532.5,443.5 L532.5,455.5 L532.5,443.5 Z M536.5,443.5 L536.5,455.5 L536.5,443.5 Z\" id=\"Shape\" stroke=\"#F19243\" stroke-width=\"1\" fill=\"none\"/>\\n      </svg>\\n    </div>\\n    <div>\\n      <h2 class=\" CDB-Text CDB-Size-huge is-light u-bSpace--xl\">' +\n__e( _t('components.modals.edit-feature.delete.title') ) +\n'</h2>\\n      <p class=\"CDB-Text CDB-Size-large u-altTextColor\">' +\n__e( _t('components.modals.edit-feature.delete.desc') ) +\n'</p>\\n      <ul class=\"Modal-listActions u-flex u-alignCenter\">\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--secondary CDB-Button--big js-cancel\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n              ' +\n__e( _t('components.modals.edit-feature.delete.cancel') ) +\n'\\n            </span>\\n          </button>\\n        </li>\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-confirm\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n              ' +\n__e( _t('components.modals.edit-feature.delete.confirm') ) +\n'\\n            </span>\\n          </button>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar template = require('./edit-feature-action.tpl');\n\n/**\n * View representing the apply button for a form\n */\nmodule.exports = CoreView.extend({\n\n  events: {\n    'click .js-save': '_onSaveClicked'\n  },\n\n  initialize: function (opts) {\n    if (!opts.featureModel) throw new Error('featureModel is required');\n    if (!opts.geometryFormModel) throw new Error('geometryFormModel is required');\n    if (!opts.attributesFormModel) throw new Error('attributesFormModel is required');\n\n    this._featureModel = opts.featureModel;\n    this._geometryFormModel = opts.geometryFormModel;\n    this._attributesFormModel = opts.attributesFormModel;\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this.$el.html(template({\n      label: this._featureModel.isNew() ? _t('editor.edit-feature.add') : _t('editor.edit-feature.save'),\n      isDisabled: !this._canSave()\n    }));\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.on('change', this.render, this);\n    this._featureModel.on('change', function () {\n      this.model.set('hasChanges', true);\n    }, this);\n    this.add_related_model(this._featureModel);\n    this._geometryFormModel.bind('validate', function (isValid) {\n      this.model.set('isValidGeometry', !isValid);\n    }, this);\n    this.add_related_model(this._geometryFormModel);\n    this._attributesFormModel.bind('validate', function (isValid) {\n      this.model.set('isValidAttributes', !isValid);\n    }, this);\n    this.add_related_model(this._attributesFormModel);\n  },\n\n  _canSave: function () {\n    var hasChanges = this.model.get('hasChanges');\n    var isValidGeometry = this.model.get('isValidGeometry');\n    var isValidAttributes = this.model.get('isValidAttributes');\n\n    return isValidGeometry && isValidAttributes && hasChanges;\n  },\n\n  _onSaveClicked: function () {\n    if (this._canSave()) {\n      this._saveFeature();\n    }\n  },\n\n  _saveFeature: function () {\n    var self = this;\n\n    var operation = this._featureModel.isNew() ? 'add' : 'save';\n    var event = operation + 'Feature';\n    this._featureModel.trigger(event);\n\n    this._featureModel.save({\n      success: function () {\n        self._featureModel.trigger('saveFeatureSuccess', operation, self._featureModel);\n        self.model.set('hasChanges', false);\n      },\n      error: function () {\n        self._featureModel.trigger('saveFeatureFailed');\n      }\n    });\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<button class=\"CDB-Button CDB-Button--primary js-save ';\n if (isDisabled) { ;\n__p += 'is-disabled';\n } ;\n__p += '\">\\n  <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-small u-upperCase\">\\n    ' +\n__e( label ) +\n'\\n  </span>\\n</button>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar ColumnRowData = require('builder/data/column-row-data');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar FIELDTYPE_TO_FORMTYPE = {\n  string: 'Text',\n  boolean: 'Radio',\n  number: 'Number',\n  date: 'DateTime',\n  geometry: 'Text'\n};\n\nvar BLACKLISTED_COLUMNS = ['created_at', 'the_geom', 'the_geom_webmercator', 'updated_at'];\n\nvar REQUIRED_OPTS = [\n  'featureModel',\n  'columnsCollection',\n  'configModel',\n  'nodeDefModel'\n];\n\nmodule.exports = Backbone.Model.extend({\n\n  initialize: function (attrs, opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n    this._generateSchema();\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.bind('change', this._onChange, this);\n  },\n\n  _onChange: function () {\n    _.each(this.changed, function (val, key) {\n      this._featureModel.set(key, val);\n    }, this);\n  },\n\n  _getInputType: function (columnRowData) {\n    var rows = columnRowData.getRows();\n    return rows && rows.length ? 'Suggest' : 'Text';\n  },\n\n  _getSupportedColumnType: function (columnType) {\n    var supportedColumnType = _.find(_.keys(FIELDTYPE_TO_FORMTYPE), function (fieldType) {\n      return fieldType === columnType;\n    });\n\n    return supportedColumnType || 'string';\n  },\n\n  _generateSchema: function () {\n    var self = this;\n\n    this.schema = {};\n\n    this._columnsCollection.each(function (model) {\n      var columnName = model.get('name');\n      var columnType = this._getSupportedColumnType(model.get('type'));\n\n      if (!_.contains(BLACKLISTED_COLUMNS, columnName)) {\n        // default field type\n        this.schema[columnName] = {\n          type: FIELDTYPE_TO_FORMTYPE[columnType]\n        };\n\n        if (columnType === 'date') {\n          this.schema[columnName].dialogMode = DialogConstants.Mode.FLOAT;\n        }\n\n        if (columnType === 'string') {\n          var columnRowData = new ColumnRowData({\n            column: columnName\n          }, {\n            nodeDefModel: this._nodeDefModel,\n            configModel: this._configModel\n          });\n          columnRowData.bind('columnsFetched', function (rows) {\n            var type = self._getInputType(this);\n            if (self.schema[columnName].type !== type) {\n              self.schema[columnName].type = type;\n              if (type === 'Suggest') {\n                self.schema[columnName].dialogMode = DialogConstants.Mode.FLOAT;\n              }\n              self.schema[columnName].editorAttrs = {\n                showSearch: true,\n                defaultValue: true,\n                allowFreeTextInput: true,\n                collectionData: rows\n              };\n\n              self._onChangeSchema();\n            }\n          });\n          columnRowData.fetch();\n        }\n\n        if (columnType === 'number') {\n          this.schema[columnName].isFormatted = true;\n          this.schema[columnName].showSlider = false;\n        }\n\n        if (columnType === 'boolean') {\n          this.schema[columnName].options = [\n            {\n              label: _t('form-components.editors.radio.true'),\n              val: true\n            }, {\n              label: _t('form-components.editors.radio.false'),\n              val: false\n            }, {\n              label: _t('form-components.editors.radio.null'),\n              val: null\n            }\n          ];\n        }\n\n        if (columnName === 'cartodb_id') {\n          this.schema[columnName].isFormatted = false;\n          this.schema[columnName].editorAttrs = {\n            disabled: true\n          };\n        }\n      }\n    }, this);\n  },\n\n  _onChangeSchema: function () {\n    this.trigger('changeSchema');\n  }\n\n});\n","var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar template = require('./edit-feature-attributes-form.tpl');\n\nmodule.exports = CoreView.extend({\n  module: 'editor:layers:edit-feature-content-views:edit-feature-attributes-form-view',\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template());\n\n    this._generateForms();\n\n    this.model.bind('changeSchema', this._generateForms, this);\n\n    return this;\n  },\n\n  _generateForms: function () {\n    var self = this;\n\n    if (this._formView) {\n      this._formView.remove();\n    }\n\n    this._formView = new Backbone.Form({\n      model: this.model\n    });\n\n    this._formView.bind('change', function () {\n      var validate = this.validate();\n      self.model.trigger('validate', !!validate);\n\n      if (!validate) {\n        this.commit();\n      }\n    });\n\n    this.$('.js-form').append(this._formView.render().$el);\n  },\n\n  clean: function () {\n    if (this._formView) {\n      this._formView.remove();\n    }\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"Editor-HeaderInfo\">\\n  <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">2</div>\\n\\n  <div class=\"Editor-HeaderInfo-inner CDB-Text\">\\n    <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n      <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.edit-feature.attributes') ) +\n'</h2>\\n    </div>\\n    <p class=\"CDB-Text u-upperCase CDB-FontSize-small u-altTextColor u-bSpace--m\">' +\n__e( _t('editor.edit-feature.attributes-columns') ) +\n'</p>\\n    <div class=\"js-form\"></div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar template = require('./edit-feature-control.tpl');\n\nmodule.exports = CoreView.extend({\n\n  render: function () {\n    this.$el.html(template());\n\n    return this;\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<button class=\"CDB-Button u-upperCase js-back\">\\n  <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-small u-actionTextColor\">' +\n__e( _t('editor.edit-feature.cancel') ) +\n'</span>\\n</button>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar cdb = require('internal-carto.js');\n\nmodule.exports = Backbone.Model.extend({\n\n  _COORDINATES_OPTIONS: {\n    min_lat: -90,\n    max_lat: 90,\n    min_lng: -180,\n    max_lng: 180\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.featureModel) throw new Error('featureModel is required');\n\n    this._featureModel = opts.featureModel;\n\n    this._generateSchema();\n  },\n\n  _formatCoordinate: function (coordinate) {\n    if (this._isValidCoordinate(coordinate)) {\n      return parseFloat(parseFloat(coordinate).toFixed(8));\n    }\n  },\n\n  _isValidCoordinate: function (coordinate) {\n    return _.isNumber(coordinate) || _.isString(coordinate);\n  },\n\n  _getLatitude: function (pos) {\n    return pos && pos[0];\n  },\n\n  _getLongitude: function (pos) {\n    return pos && pos[1];\n  },\n\n  _validateGeom: function (value) {\n    var validation;\n    var coordinates;\n\n    var geoJSON = JSON.parse(value);\n\n    if (this._featureModel.isLine()) {\n      coordinates = cdb.helpers.GeoJSONHelper.getPolylineLatLngsFromGeoJSONCoords(geoJSON);\n    } else {\n      coordinates = cdb.helpers.GeoJSONHelper.getPolygonLatLngsFromGeoJSONCoords(geoJSON);\n    }\n\n    var errors = _.chain(coordinates)\n      .reduce(function (memo, coordinate) {\n        var latitude = this._formatCoordinate(this._getLatitude(coordinate));\n        var longitude = this._formatCoordinate(this._getLongitude(coordinate));\n\n        var latError = (latitude > this._COORDINATES_OPTIONS.max_lat || latitude < this._COORDINATES_OPTIONS.min_lat);\n\n        if (latError) {\n          memo.push(_t('editor.edit-feature.out-of-bounds-lat'));\n        }\n\n        var lngError = (longitude > this._COORDINATES_OPTIONS.max_lng || longitude < this._COORDINATES_OPTIONS.min_lng);\n\n        if (lngError) {\n          memo.push(_t('editor.edit-feature.out-of-bounds-lng'));\n        }\n\n        return memo;\n      }, [], this)\n      .uniq()\n      .value();\n\n    if (errors.length) {\n      validation = {\n        message: errors.join(' ')\n      };\n    }\n\n    return validation;\n  },\n\n  _generateSchema: function () {\n    this.schema = {};\n\n    this.schema.the_geom = {\n      type: 'Text',\n      validators: ['required', this._validateGeom.bind(this)],\n      editorAttrs: {\n        disabled: true\n      },\n      hasCopyButton: this._featureModel.has('the_geom')\n    };\n  }\n\n});\n","var Backbone = require('backbone');\nvar _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar template = require('./edit-feature-geometry-form.tpl');\n\nmodule.exports = CoreView.extend({\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template());\n\n    this._generateForms();\n\n    return this;\n  },\n\n  _generateForms: function () {\n    if (this._formView) {\n      this._formView.remove();\n    }\n\n    this._formView = new Backbone.Form({\n      model: this.model\n    });\n\n    this._formView.bind('change', this._validateForm, this);\n\n    this.model.bind('updateFeature', function (attrs) {\n      _.each(attrs, function (value, key) {\n        this._formView.fields[key].editor.setValue(value);\n      }, this);\n      this._validateForm();\n    }, this);\n\n    this.$('.js-form').append(this._formView.render().$el);\n  },\n\n  _validateForm: function () {\n    var validate = this._formView.validate();\n    this.model.trigger('validate', !!validate);\n\n    if (!validate) {\n      this._formView.commit();\n    }\n  },\n\n  clean: function () {\n    if (this._formView) {\n      this._formView.remove();\n    }\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"Editor-HeaderInfo\">\\n  <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">1</div>\\n  <div class=\"Editor-HeaderInfo-inner CDB-Text\">\\n    <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n      <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.edit-feature.geometry') ) +\n'</h2>\\n    </div>\\n    <p class=\"CDB-Text u-upperCase CDB-FontSize-small u-altTextColor u-bSpace--m\">' +\n__e( _t('editor.edit-feature.geometry-edit') ) +\n'</p>\\n    <div class=\"js-form\"></div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar EditFeatureGeometryFormModel = require('./edit-feature-geometry-form-model');\n\nvar getCoordinatesFromGeoJSON = function (geoJSON) {\n  if (geoJSON && geoJSON.coordinates && geoJSON.coordinates.length === 2) {\n    return geoJSON.coordinates;\n  }\n};\n\nmodule.exports = EditFeatureGeometryFormModel.extend({\n\n  initialize: function () {\n    EditFeatureGeometryFormModel.prototype.initialize.apply(this, arguments);\n\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.bind('change:lat', this._onLatLngChange, this);\n    this.bind('change:lng', this._onLatLngChange, this);\n  },\n\n  _onLatLngChange: function () {\n    var newGeoJSON = this._toGeoJSON();\n    var currentGeoJSON = {};\n\n    if (this._featureModel.get('the_geom')) {\n      currentGeoJSON = JSON.parse(this._featureModel.get('the_geom'));\n    }\n\n    // Only set `the_geom` if there's new geoJSON\n    if (!_.isEqual(newGeoJSON, currentGeoJSON)) {\n      this._featureModel.set('the_geom', JSON.stringify(newGeoJSON));\n    }\n  },\n\n  _toGeoJSON: function () {\n    var latitude = this._formatCoordinate(this._getLatitude());\n    var longitude = this._formatCoordinate(this._getLongitude());\n    if (this._isValidCoordinate(latitude) && this._isValidCoordinate(longitude)) {\n      return {\n        'type': 'Point',\n        'coordinates': [ longitude, latitude ]\n      };\n    }\n  },\n\n  _getLatitude: function () {\n    if (this.has('lat')) {\n      return this.get('lat');\n    }\n\n    var geoJSON = JSON.parse(this._featureModel.get('the_geom'));\n    var geoJSONCoordinates = getCoordinatesFromGeoJSON(geoJSON);\n    var latitudeFromGeoJSON = geoJSONCoordinates && geoJSONCoordinates[1];\n    if (latitudeFromGeoJSON) {\n      return latitudeFromGeoJSON;\n    }\n  },\n\n  _getLongitude: function () {\n    if (this.has('lng')) {\n      return this.get('lng');\n    }\n\n    var geoJSON = JSON.parse(this._featureModel.get('the_geom'));\n    var geoJSONCoordinates = getCoordinatesFromGeoJSON(geoJSON);\n    var longitudeFromGeoJSON = geoJSONCoordinates && geoJSONCoordinates[1];\n    if (longitudeFromGeoJSON) {\n      return longitudeFromGeoJSON;\n    }\n  },\n\n  _validateLatitude: function (value, formValues) {\n    var numericValue = +value;\n\n    var error = {\n      message: _t('editor.edit-feature.valid-lat')\n    };\n\n    if (_.isNumber(numericValue) &&\n       (numericValue >= this._COORDINATES_OPTIONS.min_lat && numericValue <= this._COORDINATES_OPTIONS.max_lat)) {\n      return null; // valid latitude\n    }\n\n    if (_.isNumber(numericValue) &&\n       (numericValue > this._COORDINATES_OPTIONS.max_lat || numericValue < this._COORDINATES_OPTIONS.min_lat)) {\n      error.message = _t('editor.edit-feature.out-of-bounds-lat');\n    }\n\n    return error;\n  },\n\n  _validateLongitude: function (value, formValues) {\n    var numericValue = +value;\n\n    var error = {\n      message: _t('editor.edit-feature.valid-lng')\n    };\n\n    if (_.isNumber(numericValue) &&\n       (numericValue >= this._COORDINATES_OPTIONS.min_lng && numericValue <= this._COORDINATES_OPTIONS.max_lng)) {\n      return null; // valid longitude\n    }\n\n    if (_.isNumber(numericValue) &&\n       (numericValue > this._COORDINATES_OPTIONS.max_lng || numericValue < this._COORDINATES_OPTIONS.min_lng)) {\n      error.message = _t('editor.edit-feature.out-of-bounds-lng');\n    }\n\n    return error;\n  },\n\n  _generateSchema: function () {\n    this.schema = {};\n\n    this.schema.lng = {\n      type: 'Number',\n      validators: ['required', this._validateLongitude.bind(this)],\n      showSlider: false\n    };\n\n    this.schema.lat = {\n      type: 'Number',\n      validators: ['required', this._validateLatitude.bind(this)],\n      showSlider: false\n    };\n  }\n\n});\n","var CoreView = require('backbone/core-view');\nvar template = require('./edit-feature-header.tpl');\nvar ContextMenuFactory = require('builder/components/context-menu-factory-view');\nvar ConfirmationView = require('builder/components/modals/confirmation/modal-confirmation-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar templateConfirmation = require('./delete-feature-confirmation.tpl');\n\nvar REQUIRED_OPTS = [\n  'url',\n  'tableName',\n  'modals',\n  'isNew',\n  'layerDefinitionModel'\n];\n\nmodule.exports = CoreView.extend({\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    var letter = this._layerDefinitionModel.get('letter');\n    var featureType = this.model.getFeatureType() ? _t('editor.edit-feature.features.' + this.model.getFeatureType()) : _t('editor.edit-feature.features.geometry');\n    var breadcrumbLabel = this._isNew ? _t('editor.edit-feature.add-' + featureType) : _t('editor.edit-feature.edit', { featureType: featureType });\n\n    this.$el.html(\n      template({\n        url: this._url,\n        layerName: this._layerDefinitionModel.getName(),\n        tableName: this._tableName,\n        bgColor: this._layerDefinitionModel.getColor(),\n        letter: letter,\n        featureType: featureType,\n        breadcrumbLabel: breadcrumbLabel\n      })\n    );\n\n    if (!this._isNew) {\n      this._initViews();\n    }\n\n    return this;\n  },\n\n  _initViews: function () {\n    var menuItems = [{\n      label: _t('editor.edit-feature.delete', { featureType: _t('editor.edit-feature.features.' + this.model.getFeatureType()) }),\n      val: 'delete-feature',\n      destructive: true,\n      action: this._confirmDeleteFeature.bind(this)\n    }];\n\n    this._contextMenuFactory = new ContextMenuFactory({\n      menuItems: menuItems\n    });\n\n    this.$('.js-context-menu').append(this._contextMenuFactory.render().el);\n    this.addView(this._contextMenuFactory);\n  },\n\n  _confirmDeleteFeature: function () {\n    this._modals.create(function (modalModel) {\n      return new ConfirmationView({\n        modalModel: modalModel,\n        template: templateConfirmation,\n        runAction: this._destroyFeature.bind(this)\n      });\n    }.bind(this));\n  },\n\n  _destroyFeature: function () {\n    this.model.trigger('destroyFeature');\n\n    this.model.destroy({\n      success: function () {\n        this.model.trigger('destroyFeatureSuccess');\n      }.bind(this),\n      error: function () {\n        this.model.trigger('destroyFeatureFailed');\n      }.bind(this)\n    });\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<ul class=\"Editor-breadcrumb\">\\n  <li class=\"Editor-breadcrumbItem CDB-Text CDB-Size-medium u-actionTextColor\">\\n    <button class=\"js-back\">\\n      <i class=\"CDB-IconFont CDB-IconFont-arrowPrev Size-large u-rSpace\"></i>\\n\\n      <span class=\"Editor-breadcrumbLink\">' +\n__e( _t('back') ) +\n'</span>\\n    </button>\\n  </li>\\n\\n  <li class=\"Editor-breadcrumbItem CDB-Text CDB-Size-medium\">\\n    <span class=\"Editor-breadcrumbSep\"> / </span>\\n    ' +\n__e( breadcrumbLabel ) +\n'\\n  </li>\\n</ul>\\n\\n<div class=\"Editor-HeaderInfoEditor Editor-HeaderInfoEditor--layer\">\\n  <div class=\"Editor-HeaderInfo-inner Editor-HeaderInfo-inner--wide u-ellipsis\">\\n    <div class=\"Editor-HeaderInfo-title u-bSpace\">\\n      <span class=\"CDB-SelectorLayer-letter CDB-Text CDB-Size-small u-whiteTextColor u-tSpace--m u-rSpace--m u-upperCase\" style=\"background-color: ' +\n__e( bgColor ) +\n';\">\\n        ' +\n__e( letter ) +\n'\\n      </span>\\n\\n      <h2 class=\"Inline-editor\">\\n        <div class=\"CDB-Text CDB-Size-huge is-light u-ellipsis\">\\n          ' +\n__e( layerName ) +\n'\\n        </div>\\n      </h2>\\n    </div>\\n\\n    <div class=\"Editor-HeaderInfo-source u-flex\">\\n      <p class=\"CDB-Text CDB-Size-small u-ellipsis\">\\n        <a href=\"' +\n__e( url ) +\n'\" target=\"_blank\" title=\"' +\n__e( tableName ) +\n'\" class=\"Editor-headerLayerName\">' +\n__e( tableName ) +\n'</a>\\n      </p>\\n    </div>\\n  </div>\\n  \\n  <div class=\"u-flex u-tSpace-xl js-context-menu\"></div>\\n</div>\\n';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar EditFeatureGeometryFormView = require('./edit-feature-geometry-form-view');\nvar EditFeatureAttributesFormView = require('./edit-feature-attributes-form-view');\n\nmodule.exports = CoreView.extend({\n\n  initialize: function (opts) {\n    if (!opts.featureModel) throw new Error('featureModel is required');\n    if (!opts.geometryFormModel) throw new Error('geometryFormModel is required');\n    if (!opts.attributesFormModel) throw new Error('attributesFormModel is required');\n\n    this._featureModel = opts.featureModel;\n    this._geometryFormModel = opts.geometryFormModel;\n    this._attributesFormModel = opts.attributesFormModel;\n  },\n\n  render: function () {\n    if (this._editFeatureGeometryFormView) {\n      this._editFeatureGeometryFormView.clean();\n    }\n\n    if (this._editFeatureAttributesFormView) {\n      this._editFeatureAttributesFormView.clean();\n    }\n\n    this.clearSubViews();\n\n    this.$el.empty();\n\n    this._editFeatureGeometryFormView = new EditFeatureGeometryFormView({\n      model: this._geometryFormModel\n    });\n\n    this.addView(this._editFeatureGeometryFormView);\n    this.$el.append(this._editFeatureGeometryFormView.render().el);\n\n    this._editFeatureAttributesFormView = new EditFeatureAttributesFormView({\n      model: this._attributesFormModel\n    });\n\n    this.addView(this._editFeatureAttributesFormView);\n    this.$el.append(this._editFeatureAttributesFormView.render().el);\n\n    return this;\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"js-editFeatureHeader\"></div>\\n<div class=\"Editor-content js-editFeatureContent\"></div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"EditOverlay js-editOverlay is-hidden\"><p class=\"EditOverlay-inner CDB-Text CDB-Size-medium u-whiteTextColor\">' +\n__e( text ) +\n'</p></div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<h2 class=\"Editor-HeaderInfo-titleText Inline-editor js-title-editor\" title=\"' +\n__e( alias ) +\n'\">\\n  <div class=\"CDB-Text CDB-Size-huge is-light u-ellipsis js-title Inline-editor-text\">' +\n__e( alias ) +\n'</div>\\n  <input type=\"text\" name=\"text\" class=\"Inline-editor-input Inline-editor-input--small CDB-Text CDB-InputText js-input\" value=\"' +\n__e( alias ) +\n'\" readonly>\\n</h2>';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar LayerAnalysisDraggableView = require('./layer-analysis-draggable-view');\n\n/**\n * View of analyses within a layer\n * this.model is the layer-definition-model\n */\nmodule.exports = CoreView.extend({\n\n  tagName: 'ul',\n\n  options: {\n    sortableSelector: ''\n  },\n\n  initialize: function (opts) {\n    if (!this.options.sortableSelector) throw new Error('sortableSelector is required');\n    if (!opts.layerAnalysisViewFactory) throw new Error('layerAnalysisViewFactory is required');\n    if (!this.model) throw new Error('layerDefinitionModel is required');\n\n    this._layerAnalysisViewFactory = opts.layerAnalysisViewFactory;\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    var nodeDefModel = this.model.getAnalysisDefinitionNodeModel();\n    this._renderNode(nodeDefModel);\n\n    return this;\n  },\n\n  /**\n   * @param {Object} current instance of a analysis-layer-node-model\n   */\n  _renderNode: function (current) {\n    this._createNodeView(current);\n\n    var next = current.getPrimarySource();\n    if (next && this.model.isOwnerOfAnalysisNode(current)) {\n      this._renderNode(next);\n    }\n  },\n\n  _createNodeView: function (current) {\n    var view = this._layerAnalysisViewFactory.createView(current, this.model);\n    this.addView(view);\n    this.$el.append(view.render().el);\n    this._attachDraggableToNodeView(view, current);\n  },\n\n  _attachDraggableToNodeView: function (nodeView, nodeDefModel) {\n    if (!this.model.isOwnerOfAnalysisNode(nodeDefModel)) return;\n\n    var draggableView = new LayerAnalysisDraggableView({\n      model: nodeDefModel,\n      layerDefinitionModel: this.model,\n      getNextLetter: this.model.collection.nextLetter.bind(this.model.collection),\n      $nodeViewElement: nodeView.$el,\n      sortableSelector: this.options.sortableSelector\n    });\n    this.addView(draggableView);\n  }\n\n});\n","require('jquery-ui');\nvar CoreView = require('backbone/core-view');\nvar template = require('./layer-analysis-draggable.tpl');\nvar analyses = require('builder/data/analyses');\nvar layerColors = require('builder/data/layer-colors');\n\n/**\n * Attach draggable behavior to an analysis node\n * Implemented as a view to hook into Backbone's lifecycle handling, but really it's just attaching the behavior to the\n * provided $nodeViewElement\n */\nmodule.exports = CoreView.extend({\n  options: {\n    getNextLetter: function () { return 'x'; },\n    sortableSelector: '',\n    $nodeViewElement: null\n  },\n\n  initialize: function (opts) {\n    if (!opts.sortableSelector) throw new Error('sortableSelector is required');\n    if (!opts.$nodeViewElement) throw new Error('$nodeViewElement is required');\n    if (!opts.layerDefinitionModel) throw new Error('layerDefinitionModel is required');\n\n    this.options.$nodeViewElement.draggable({\n      appendTo: this.options.sortableSelector,\n      connectToSortable: this.options.sortableSelector,\n      cursor: 'move',\n      axis: 'y',\n      cursorAt: { top: 40 },\n      helper: this._createHelper.bind(this),\n      zIndex: 1000\n    });\n  },\n\n  _createHelper: function () {\n    var nextLetter = this.options.getNextLetter();\n    var layerLetter = this.options.layerDefinitionModel.get('letter');\n    return template({\n      nodeId: this.model.id,\n      nextLetter: nextLetter,\n      layerLetter: layerLetter,\n      nextBgColor: layerColors.getColorForLetter(nextLetter),\n      title: analyses.title(this.model)\n    });\n  },\n\n  clean: function () {\n    if (this.options.$nodeViewElement && this.options.$nodeViewElement.data('ui-draggable')) {\n      this.options.$nodeViewElement.draggable('destroy');\n    }\n\n    this.options.$nodeViewElement = null; // remove DOM reference to avoid memory leak\n    CoreView.prototype.clean.apply(this, arguments);\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<li class=\"Editor-newLayerContainer\" data-layer-letter=\"' +\n__e( layerLetter ) +\n'\" data-analysis-node-id=\"' +\n__e( nodeId ) +\n'\" style=\"width: 294px;\">\\n  <div class=\"Editor-ListLayer-item\">\\n    <div class=\"Editor-ListLayer-itemHeader\">\\n      <div class=\"Editor-ListLayer-media u-rSpace--m\" style=\"background: ' +\n__e( nextBgColor ) +\n'; color: #fff\">\\n        <p class=\"CDB-Text CDB-Size-large is-semibold u-upperCase\">' +\n__e( nextLetter ) +\n'</p>\\n      </div>\\n      <div class=\"Editor-ListLayer-inner\">\\n        <div class=\"Editor-ListLayer-title\">\\n          <h2 class=\"Editor-ListLayer-titleText CDB-Text CDB-Size-large u-ellipsis\">' +\n__e( title ) +\n'</h2>\\n        </div>\\n        <button class=\"CDB-Text CDB-Size-small u-actionTextColor u-upperCase\">' +\n__e( _t('editor.layers.layer.add-analysis') ) +\n'</button>\\n      </div>\\n    </div>\\n  </div>\\n  <div class=\"Editor-layerInfo CDB-Text CDB-Size-small u-whiteTextColor\">\\n    Created new layer based on [' +\n__e( nodeId ) +\n']\\n  </div>\\n</li>\\n';\n\n}\nreturn __p\n}","var RefLayerAnalysisView = require('./analysis-views/ref-layer-analysis-view');\nvar DefaultLayerAnalysisView = require('./analysis-views/default-layer-analysis-view');\nvar SourceLayerAnalysisView = require('./analysis-views/source-layer-analysis-view');\nvar CompositeLayerAnalysisView = require('./analysis-views/composite-layer-analysis-view');\n\nvar LayerAnalysisViewFactory = function (analysisDefinitionNodesCollection) {\n  this._analysisDefinitionNodesCollection = analysisDefinitionNodesCollection;\n};\n\n/**\n * @param {Object} nodeDefModel - an analysis-definition-node-model\n * @param {Object} layerDefinitionModel\n * @param {String} [tagName = 'li']\n * @return {Object} instance of CoreView\n * @throws {Error} if node model can not be found, or view can not be found for the given mode\n */\nLayerAnalysisViewFactory.prototype.createView = function (nodeDefModel, layerDefinitionModel) {\n  if (!nodeDefModel) throw new Error('nodeDefModel is required');\n  if (!layerDefinitionModel) throw new Error('layerDefinitionModel is required');\n\n  var analysisNode = this._analysisDefinitionNodesCollection.get(nodeDefModel.id);\n  var sourcesCount = nodeDefModel.sourceIds().length;\n\n  var ownerLayer = layerDefinitionModel.collection.findOwnerOfAnalysisNode(nodeDefModel);\n  if (ownerLayer !== layerDefinitionModel) {\n    sourcesCount = null; // to force default ref view\n  }\n\n  switch (sourcesCount) {\n    case 2:\n      return new CompositeLayerAnalysisView({\n        model: nodeDefModel,\n        analysisDefinitionNodesCollection: this._analysisDefinitionNodesCollection,\n        layerDefinitionModel: layerDefinitionModel\n      });\n    case 0:\n      return new SourceLayerAnalysisView({\n        model: nodeDefModel,\n        analysisNode: analysisNode,\n        layerDefinitionModel: layerDefinitionModel\n      });\n    case 1:\n      return new DefaultLayerAnalysisView({\n        model: nodeDefModel,\n        analysisNode: analysisNode,\n        layerDefinitionModel: layerDefinitionModel\n      });\n    default:\n      return new RefLayerAnalysisView({\n        model: nodeDefModel,\n        analysisNode: analysisNode,\n        layerDefinitionModel: ownerLayer || layerDefinitionModel // use same layer model as fallback\n      });\n  }\n};\n\nmodule.exports = LayerAnalysisViewFactory;\n","var _ = require('underscore');\nvar $ = require('jquery');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar createTextLabelsTabPaneRouted = require('builder/components/tab-pane/create-text-labels-tab-pane-routed');\nvar TabPaneTemplate = require('./layer-tab-pane.tpl');\nvar LayerHeaderView = require('./layer-header-view');\nvar TablesCollection = require('builder/data/tables-collection');\nvar AnalysisSourceOptionsModel = require('./layer-content-views/analyses/analysis-source-options-model');\nvar AnalysisFormsCollection = require('./layer-content-views/analyses/analysis-forms-collection');\nvar TableManager = require('builder/components/table/table-manager');\nvar changeViewButtons = require('./change-view-buttons.tpl');\nvar editOverlay = require('./edit-overlay.tpl');\nvar DataView = require('./layer-content-views/data/data-view');\nvar LayerContentAnalysesView = require('./layer-content-views/analyses/analyses-view');\nvar StyleView = require('builder/editor/style/style-view');\nvar InfowindowsView = require('./layer-content-views/infowindow/infowindows-view');\nvar LegendsView = require('./layer-content-views/legend/legends-view');\nvar FeatureDefinitionModel = require('builder/data/feature-definition-model');\nvar AnalysesService = require('./layer-content-views/analyses/analyses-service');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\nvar Toggler = require('builder/components/toggler/toggler-view');\nvar Router = require('builder/routes/router');\nvar fetchAllQueryObjects = require('builder/helpers/fetch-all-query-objects');\nvar LayerContentModel = require('builder/data/layer-content-model');\n\nvar TABS = {\n  data: 'data',\n  analyses: 'analyses',\n  style: 'style',\n  popups: 'popups',\n  legends: 'legends'\n};\n\nvar DISABLED_TABS = [\n  TABS.style,\n  TABS.popups,\n  TABS.legends\n];\n\nvar ROUTER_ADD_GEOMETRY = {\n  point: 'addPoint',\n  line: 'addLine',\n  polygon: 'addPolygon'\n};\n\nvar CONTEXTS = LayerContentModel.CONTEXTS;\n\nvar REQUIRED_OPTS = [\n  'userActions',\n  'analysisDefinitionNodesCollection',\n  'layerDefinitionsCollection',\n  'layerDefinitionModel',\n  'widgetDefinitionsCollection',\n  'legendDefinitionsCollection',\n  'stackLayoutModel',\n  'modals',\n  'onboardings',\n  'configModel',\n  'editorModel',\n  'userModel',\n  'mapDefinitionModel',\n  'mapModeModel',\n  'visDefinitionModel',\n  'stateDefinitionModel',\n  'onboardingNotification'\n];\n\nmodule.exports = CoreView.extend({\n  module: 'editor:layers:layer-content-view',\n\n  events: {\n    'click .js-back': '_onClickBack',\n    'click .js-fix-sql': '_onClickFixSQL'\n  },\n\n  options: {\n    selectedTabItem: null,\n    analysisPayload: null // id or a new analysis node attrs (may not be complete)\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this.model = new LayerContentModel({}, {\n      querySchemaModel: this._getQuerySchemaModel(),\n      queryGeometryModel: this._getQueryGeometryModel(),\n      queryRowsCollection: this._getQueryRowsCollection()\n    });\n\n    this._initViewState();\n    this._onClickNewGeometry = this._onClickNewGeometry.bind(this);\n\n    this._togglerModel = new Backbone.Model({\n      labels: [_t('editor.context-switcher.map'), _t('editor.context-switcher.data')],\n      active: this._isContextTable()\n    });\n\n    AnalysesService.setLayerId(this._layerDefinitionModel.get('id'));\n\n    this._updateViewState();\n    this._initBinds();\n  },\n\n  render: function () {\n    this._unbindEvents();\n    this.clearSubViews();\n    this._destroyTable();\n    this.$el.empty();\n\n    this._renderHeaderView();\n    this._renderLayerTabPaneView();\n\n    if (this._isContextTable()) {\n      this._initTable();\n    }\n\n    this._renderContextButtons();\n\n    return this;\n  },\n\n  _initViewState: function () {\n    this._viewState = new Backbone.Model({\n      isLayerEmpty: false,\n      canBeGeoreferenced: false,\n      isLayerDone: false\n    });\n    this._setViewState();\n  },\n\n  _initBinds: function () {\n    var querySchemaModel = this._getQuerySchemaModel();\n    var queryRowsCollection = this._getQueryRowsCollection();\n    var queryGeometryModel = this._getQueryGeometryModel();\n    var layerDefinitionModel = this._layerDefinitionModel;\n\n    this.listenTo(this.model, 'change:context', this._renderContextButtons);\n    this.listenTo(this.model, 'change:state', this._updateViewState);\n    this.listenTo(this._getAnalysisDefinitionNodeModel(), 'change:error', this.render);\n\n    this.listenTo(layerDefinitionModel, 'remove', this._onClickBack);\n    this.listenTo(layerDefinitionModel, 'change:source', this._updateViewState);\n    this.listenTo(layerDefinitionModel, 'change:visible', this._renderContextButtons);\n    this.listenTo(this._viewState, 'change', this.render);\n\n    this.listenTo(this._editorModel, 'change:edition', this._changeStyle);\n\n    this.listenTo(this._togglerModel, 'change:active', this._onTogglerChanged);\n\n    this.listenTo(this._widgetDefinitionsCollection, 'add remove', this._renderContextButtons);\n\n    this.listenTo(this._onboardings, 'style', function () {\n      this._layerTabPaneView.collection.select('name', 'style');\n    });\n\n    this.listenTo(querySchemaModel, 'change:query', function () {\n      this._renderContextButtons();\n\n      if (this._editorModel.isEditing()) {\n        this.listenToOnce(querySchemaModel, 'sync', function (e) {\n          queryRowsCollection.fetch({\n            success: function () {\n              Router.goToDataTab(layerDefinitionModel.get('id'));\n            }\n          });\n        });\n      }\n    });\n\n    this.listenToOnce(queryGeometryModel, 'change:simple_geom', function (model, simpleGeom) {\n      this._renderContextButtons();\n    }, this);\n\n    this.listenTo(Router.getRouteModel(), 'change:currentRoute', this._handleRoute);\n  },\n\n  _renderLayerTabPaneView: function () {\n    var self = this;\n    var analysisPayload = this.options.analysisPayload;\n    var layerId = this._layerDefinitionModel.get('id');\n    var canBeGeoreferenced = this._viewState.get('canBeGeoreferenced');\n    var isDone = this._viewState.get('isLayerDone');\n    var isEmpty = this._viewState.get('isLayerEmpty') && isDone;\n    var selectedTabItem = this.options.selectedTabItem;\n    var analysisFailed = this._getAnalysisDefinitionNodeModel().hasFailed();\n    var isDisabled = canBeGeoreferenced || isEmpty || analysisFailed;\n\n    if (isDisabled && (!selectedTabItem || _.contains(DISABLED_TABS, selectedTabItem))) {\n      if ((!isEmpty && canBeGeoreferenced) || analysisFailed) {\n        selectedTabItem = TABS.analyses;\n      } else {\n        selectedTabItem = TABS.data;\n      }\n    }\n\n    var tabPaneTabs = [{\n      label: _t('editor.layers.menu-tab-pane-labels.data'),\n      name: TABS.data,\n      selected: selectedTabItem === TABS.data,\n      onClick: function () { Router.goToDataTab(layerId); },\n      disabled: false,\n      createContentView: function () {\n        return new DataView({\n          className: 'Editor-content',\n          widgetDefinitionsCollection: self._widgetDefinitionsCollection,\n          layerDefinitionModel: self._layerDefinitionModel,\n          stackLayoutModel: self._stackLayoutModel,\n          userActions: self._userActions,\n          configModel: self._configModel,\n          editorModel: self._editorModel,\n          userModel: self._userModel,\n          onboardings: self._onboardings,\n          onboardingNotification: self._onboardingNotification,\n          layerContentModel: self.model\n        });\n      }\n    }, {\n      label: _t('editor.layers.menu-tab-pane-labels.analyses'),\n      name: TABS.analyses,\n      selected: selectedTabItem === TABS.analyses,\n      disabled: isEmpty && !analysisFailed,\n      onClick: function () { Router.goToAnalysisTab(layerId); },\n      createContentView: function () {\n        var layerDefinitionModel = self._layerDefinitionModel;\n        var analysisSourceOptionsModel = new AnalysisSourceOptionsModel(null, {\n          analysisDefinitionNodesCollection: self._analysisDefinitionNodesCollection,\n          layerDefinitionsCollection: self._layerDefinitionsCollection,\n          tablesCollection: new TablesCollection(null, {\n            configModel: self._configModel\n          })\n        });\n        analysisSourceOptionsModel.fetch();\n\n        var analysisFormsCollection = new AnalysisFormsCollection(null, {\n          userActions: self._userActions,\n          configModel: self._configModel,\n          layerDefinitionModel: self._layerDefinitionModel,\n          analysisSourceOptionsModel: analysisSourceOptionsModel\n        });\n\n        analysisFormsCollection.resetByLayerDefinition();\n\n        if (!self._layerDefinitionModel.hasAnalyses() && canBeGeoreferenced && !analysisPayload) {\n          analysisPayload = AnalysesService.generateGeoreferenceAnalysis();\n        }\n\n        // e.g. when selected from layers view\n        var selectedNodeId;\n        if (_.isString(analysisPayload) && analysisFormsCollection.get(analysisPayload)) {\n          selectedNodeId = analysisPayload;\n        } else if (_.isObject(analysisPayload)) {\n          // payload passed after continue when an option was selected in add-analysis-view\n          selectedNodeId = analysisPayload.id;\n          // Detect when an analysis finishes so we can redirect and / or re-enable the tabs\n          self.listenTo(self._analysisDefinitionNodesCollection, 'add', function (model) {\n            var nodeSource = model.getPrimarySource();\n            // This logic only applies to a geocoding analysis that's the first, on a layer that lacks geocoding\n            if (nodeSource && nodeSource.get('type') === 'source' &&\n                model.get('type').indexOf('georeference') === 0 &&\n                canBeGeoreferenced) {\n              var callback = function (model) {\n                if (model.isDone() || model.hasFailed()) {\n                  this.stopListening(model, 'change:status', callback);\n                }\n\n                if (model.isDone()) {\n                  Router.goToStyleTab(layerId);\n                }\n\n                if (model.hasFailed()) {\n                  self.render();\n                }\n              };\n\n              self.listenTo(model, 'change:status', callback);\n            }\n          });\n\n          analysisFormsCollection.addHead(analysisPayload);\n        } else {\n          var lastAnalysisNode = analysisFormsCollection.at(0);\n\n          if (lastAnalysisNode) {\n            selectedNodeId = lastAnalysisNode.get('id');\n            Router.goToAnalysisNode(layerDefinitionModel.get('id'), selectedNodeId, { trigger: false, replace: true });\n          } else {\n            Router.goToAnalysisTab(layerDefinitionModel.get('id'), { trigger: false, replace: true });\n          }\n        }\n\n        // remove payload once we have used it, to not have it being invoked again when switching tabs\n        selectedTabItem = null;\n        analysisPayload = null;\n\n        return new LayerContentAnalysesView({\n          className: 'Editor-content',\n          userActions: self._userActions,\n          analysisDefinitionNodesCollection: self._analysisDefinitionNodesCollection,\n          editorModel: self._editorModel,\n          userModel: self._userModel,\n          analysisFormsCollection: analysisFormsCollection,\n          configModel: self._configModel,\n          layerDefinitionModel: self._layerDefinitionModel,\n          stackLayoutModel: self._stackLayoutModel,\n          selectedNodeId: selectedNodeId,\n          onboardings: self._onboardings,\n          onboardingNotification: self._onboardingNotification,\n          layerContentModel: self.model\n        });\n      }\n    }, {\n      label: _t('editor.layers.menu-tab-pane-labels.style'),\n      name: TABS.style,\n      selected: selectedTabItem === TABS.style,\n      layerId: layerId,\n      onClick: function () { Router.goToStyleTab(layerId); },\n      disabled: isDisabled,\n      createContentView: function () {\n        // remove payload once we have used it, to not have it being invoked again when switching tabs\n        selectedTabItem = null;\n\n        var styleView = new StyleView({\n          className: 'Editor-content',\n          configModel: self._configModel,\n          userModel: self._userModel,\n          userActions: self._userActions,\n          analysisDefinitionsCollection: self.analysisDefinitionsCollection,\n          queryGeometryModel: self._getQueryGeometryModel(),\n          querySchemaModel: self._getQuerySchemaModel(),\n          queryRowsCollection: self._getQueryRowsCollection(),\n          layerDefinitionsCollection: self._layerDefinitionsCollection,\n          layerDefinitionModel: self._layerDefinitionModel,\n          editorModel: self._editorModel,\n          modals: self._modals,\n          onboardings: self._onboardings,\n          onboardingNotification: self._onboardingNotification,\n          layerContentModel: self.model\n        });\n\n        return styleView;\n      }\n    }, {\n      label: _t('editor.layers.menu-tab-pane-labels.popups'),\n      name: TABS.popups,\n      selected: selectedTabItem === TABS.popups,\n      onClick: function () { Router.goToPopupsTab(layerId); },\n      disabled: isDisabled,\n      createContentView: function () {\n        var nodeDefModel = self._layerDefinitionModel.getAnalysisDefinitionNodeModel();\n        return new InfowindowsView({\n          className: 'Editor-content',\n          userActions: self._userActions,\n          layerDefinitionModel: self._layerDefinitionModel,\n          querySchemaModel: nodeDefModel.querySchemaModel,\n          editorModel: self._editorModel,\n          layerContentModel: self.model\n        });\n      }\n    }, {\n      label: _t('editor.layers.menu-tab-pane-labels.legends'),\n      name: TABS.legends,\n      selected: selectedTabItem === TABS.legends,\n      onClick: function () { Router.goToLegendsTab(layerId); },\n      disabled: isDisabled,\n      createContentView: function () {\n        var nodeDefModel = self._layerDefinitionModel.getAnalysisDefinitionNodeModel();\n        return new LegendsView({\n          className: 'Editor-content',\n          mapDefinitionModel: self._mapDefinitionModel,\n          userActions: self._userActions,\n          layerDefinitionModel: self._layerDefinitionModel,\n          querySchemaModel: nodeDefModel.querySchemaModel,\n          queryRowsCollection: nodeDefModel.queryRowsCollection,\n          legendDefinitionsCollection: self._legendDefinitionsCollection,\n          editorModel: self._editorModel,\n          userModel: self._userModel,\n          configModel: self._configModel,\n          modals: self._modals,\n          layerContentModel: self.model\n        });\n      }\n    }];\n\n    var tabPaneOptions = {\n      tabPaneOptions: {\n        className: 'Tab-pane js-editorPanelContent',\n        template: TabPaneTemplate,\n        tabPaneItemOptions: {\n          tagName: 'li',\n          klassName: 'CDB-NavMenu-item'\n        }\n      },\n      tabPaneItemLabelOptions: {\n        tagName: 'button',\n        className: 'CDB-NavMenu-link u-upperCase'\n      }\n    };\n\n    this._layerTabPaneView = createTextLabelsTabPaneRouted(tabPaneTabs, tabPaneOptions);\n    this.$el.append(this._layerTabPaneView.render().el);\n    this.addView(this._layerTabPaneView);\n\n    this.listenTo(this._layerTabPaneView.collection, 'change:selected', this._quitEditing, this);\n    this._changeStyle();\n  },\n\n  _renderHeaderView: function () {\n    var analysisDefinitionNodeModel = this._getAnalysisDefinitionNodeModel();\n    var tableNodeModel = analysisDefinitionNodeModel.isSourceType() && analysisDefinitionNodeModel.getTableModel();\n    var layerHeaderView = new LayerHeaderView({\n      layerDefinitionsCollection: this._layerDefinitionsCollection,\n      layerDefinitionModel: this._layerDefinitionModel,\n      userActions: this._userActions,\n      configModel: this._configModel,\n      modals: this._modals,\n      tableNodeModel: tableNodeModel,\n      editorModel: this._editorModel,\n      stateDefinitionModel: this._stateDefinitionModel,\n      visDefinitionModel: this._visDefinitionModel,\n      userModel: this._userModel,\n      widgetDefinitionsCollection: this._widgetDefinitionsCollection\n    });\n\n    this.addView(layerHeaderView);\n    this.$el.append(layerHeaderView.render().$el);\n  },\n\n  _updateViewState: function () {\n    var setViewStateFn = this._setViewState.bind(this);\n\n    if (this.model.isDone()) {\n      setViewStateFn();\n      return false;\n    }\n\n    this._fetchAllQueryObjects({\n      queryRowsCollection: this._getQueryRowsCollection(),\n      queryGeometryModel: this._getQueryGeometryModel(),\n      querySchemaModel: this._getQuerySchemaModel()\n    }).then(function () {\n      setViewStateFn();\n    });\n  },\n\n  _fetchAllQueryObjects: fetchAllQueryObjects.bind(this),\n\n  _destroyTable: function () {\n    if (this._tableView) {\n      TableManager.destroy(this._tableView);\n      delete this._tableView;\n    }\n  },\n\n  _initTable: function () {\n    if (this._tableView) {\n      this._destroyTable();\n    }\n\n    this._tableView = TableManager.create({\n      analysisDefinitionNodeModel: this._getAnalysisDefinitionNodeModel(),\n      configModel: this._configModel,\n      modals: this._modals,\n      userModel: this._userModel\n    });\n\n    $('.js-editor .CDB-Dashboard-canvas').append(this._tableView.render().el);\n  },\n\n  _isContextTable: function () {\n    return this.model.get('context') === CONTEXTS.table;\n  },\n\n  _renderContextButtons: function () {\n    this._destroyContextButtons();\n\n    var analysisDefinitionNodeModel = this._getAnalysisDefinitionNodeModel();\n    var isReadOnly = analysisDefinitionNodeModel.isReadOnly();\n    var isVisible = this._layerDefinitionModel.get('visible');\n    var queryGeometryModel = this._getQueryGeometryModel();\n\n    $('.CDB-Dashboard-canvas .CDB-Map-canvas').append(\n      changeViewButtons({\n        context: this.model.get('context'),\n        isThereOtherWidgets: this._widgetDefinitionsCollection.isThereOtherWidgets(),\n        isThereTimeSeries: this._widgetDefinitionsCollection.isThereTimeSeries(),\n        isThereAnimatedTimeSeries: this._widgetDefinitionsCollection.isThereTimeSeries({ animated: true }),\n        queryGeometryModel: queryGeometryModel.get('simple_geom'),\n        isSourceType: analysisDefinitionNodeModel.isSourceType(),\n        isVisible: isVisible,\n        isReadOnly: isReadOnly\n      })\n    );\n\n    var togglerView = new Toggler({\n      model: this._togglerModel\n    });\n\n    $('.js-mapTableView').append(togglerView.render().el);\n    $('.js-newGeometry').on('click', this._onClickNewGeometry);\n    this._addContextButtonsTooltips(isReadOnly, isVisible);\n  },\n\n  _addContextButtonsTooltips: function (isReadOnly, isVisible) {\n    if (isReadOnly || !isVisible) {\n      var disabledButtonTooltip = new TipsyTooltipView({\n        el: $('.js-newGeometryView'),\n        title: function () {\n          return _t('editor.edit-feature.geometry-disabled');\n        }\n      });\n\n      this.addView(disabledButtonTooltip);\n      return;\n    }\n\n    var tooltips = $('.js-newGeometry').map(function () {\n      return new TipsyTooltipView({\n        el: $(this),\n        title: function () {\n          return $(this).data('tooltip');\n        }\n      });\n    });\n\n    _.forEach(tooltips, this.addView.bind(this));\n  },\n\n  _destroyContextButtons: function () {\n    $('.js-newGeometry').off('click', this._onClickNewGeometry);\n\n    $('.js-switchers').remove();\n  },\n\n  _onTogglerChanged: function () {\n    var context = this._togglerModel.get('active') ? CONTEXTS.table : CONTEXTS.map;\n\n    context === CONTEXTS.table\n      ? this._initTable()\n      : this._destroyTable();\n\n    this.model.set('context', context);\n  },\n\n  _unbindEvents: function () {\n    if (this._layerTabPaneView && this._layerTabPaneView.collection) {\n      this._layerTabPaneView.collection.off('change:selected', this._quitEditing, this);\n    }\n  },\n\n  _onClickBack: function () {\n    this._editorModel.set({ edition: false });\n    Router.goToLayerList();\n  },\n\n  _onClickNewGeometry: function (ev) {\n    var $target = $(ev.target).closest('.js-newGeometry');\n    var featureType = $target.data('feature-type');\n    var addGeometry = ROUTER_ADD_GEOMETRY[featureType];\n\n    if ($target.closest('.js-newGeometryItem').hasClass('is-disabled')) return false;\n\n    if (Router[addGeometry]) {\n      Router[addGeometry](this._layerDefinitionModel.get('id'));\n    }\n  },\n\n  _handleRoute: function (routeModel) {\n    var currentRoute = routeModel.get('currentRoute');\n    var routeName = currentRoute[0];\n    var OVERLAY_FADE_MS = 200;\n\n    if (routeName.indexOf('add_feature_') === 0) {\n      var featureType = routeName.split('add_feature_')[1];\n      var editOverlayText = _t('editor.edit-feature.overlay-text', { featureType: _t('editor.edit-feature.features.' + featureType) });\n\n      $('.CDB-Dashboard-canvas .CDB-Map-canvas').append(editOverlay({\n        text: editOverlayText\n      }));\n\n      $('.js-editOverlay').fadeIn(OVERLAY_FADE_MS, function () {\n        $('.js-editOverlay').removeClass('is-hidden');\n      });\n\n      var feature = this._newFeatureDefinitionModel({ featureType: featureType });\n      this._mapModeModel.enterDrawingFeatureMode(feature);\n      this._stackLayoutModel.goToStep(2, feature.getLayerDefinition(), !feature.isNew());\n    }\n  },\n\n  _newFeatureDefinitionModel: function (opts) {\n    return new FeatureDefinitionModel({}, {\n      configModel: this._configModel,\n      layerDefinitionModel: this._layerDefinitionModel,\n      userModel: this._userModel,\n      featureType: opts.featureType\n    });\n  },\n\n  _onClickFixSQL: function () {\n    this._editorModel.set({ edition: true });\n    this._layerTabPaneView.getTabPane('data').set({ selected: true });\n  },\n\n  _changeStyle: function () {\n    this._layerTabPaneView && this._layerTabPaneView.changeStyleMenu(this._editorModel);\n  },\n\n  _quitEditing: function () {\n    if (this._layerTabPaneView.getSelectedTabPaneName() !== TABS.style &&\n        this._layerTabPaneView.getSelectedTabPaneName() !== TABS.popups &&\n        this._layerTabPaneView.getSelectedTabPaneName() !== TABS.legends) {\n      this._editorModel.set({ edition: false });\n    }\n  },\n\n  _getAnalysisDefinitionNodeModel: function () {\n    return this._layerDefinitionModel.getAnalysisDefinitionNodeModel();\n  },\n\n  _getQueryGeometryModel: function () {\n    return this._getAnalysisDefinitionNodeModel().queryGeometryModel;\n  },\n\n  _getQuerySchemaModel: function () {\n    return this._getAnalysisDefinitionNodeModel().querySchemaModel;\n  },\n\n  _getQueryRowsCollection: function () {\n    return this._getAnalysisDefinitionNodeModel().queryRowsCollection;\n  },\n\n  _setViewState: function () {\n    var self = this;\n    var emptyPromise = this._layerDefinitionModel.isEmptyAsync();\n    var geoReferencePromise = this._layerDefinitionModel.canBeGeoreferenced();\n    this._viewState.set('isLayerDone', self._layerDefinitionModel.isDone());\n\n    Promise.all([emptyPromise, geoReferencePromise])\n      .then(function (values) {\n        self._viewState.set({\n          isLayerEmpty: values[0],\n          canBeGeoreferenced: values[1],\n          isLayerDone: self._layerDefinitionModel.isDone()\n        });\n      });\n  },\n\n  clean: function () {\n    this._destroyContextButtons();\n    this._destroyTable();\n    CoreView.prototype.clean.apply(this);\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar ScrollView = require('builder/components/scroll/scroll-view');\nvar ViewFactory = require('builder/components/view-factory');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\nvar IconView = require('builder/components/icon/icon-view');\nvar analysisPlaceholderTemplate = require('builder/editor/layers/layer-content-views/analyses/analyses-placeholder.tpl');\nvar analysisSQLErrorTemplate = require('builder/editor/layers/layer-content-views/analyses/analyses-sql-error.tpl');\nvar AnalysisFormView = require('builder/editor/layers/layer-content-views/analyses/analysis-form-view');\nvar AnalysesWorkflowView = require('builder/editor/layers/layer-content-views/analyses/analyses-workflow-view');\nvar AnalysisControlsView = require('builder/editor/layers/layer-content-views/analyses/analysis-controls-view');\nvar actionErrorTemplate = require('builder/editor/layers/sql-error-action.tpl');\nvar AnalysesQuotaInfo = require('./analyses-quota/analyses-quota-info');\nvar AnalysesService = require('builder/editor/layers/layer-content-views/analyses/analyses-service');\nvar Router = require('builder/routes/router');\nvar utils = require('builder/helpers/utils');\n\nvar REQUIRED_OPTS = [\n  'userActions',\n  'analysisFormsCollection',\n  'layerDefinitionModel',\n  'analysisDefinitionNodesCollection',\n  'configModel',\n  'userModel',\n  'stackLayoutModel',\n  'overlayModel',\n  'layerContentModel',\n  'deleteAnalysisModel'\n];\n\n/**\n * AnalysesContentView:\n *   ├── ScrollView\n *   |   └── ListView:\n *   |       ├── WorkflowView\n *   |       └── FormView\n *   └── ControlsView\n */\n\nmodule.exports = CoreView.extend({\n  module: 'editor:layers:layer-content-views:analyses:analyses-content-view',\n\n  options: {\n    selectedNodeId: false // or an id, e.g. 'a1'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._selectedNodeId = this.options.selectedNodeId;\n    this._querySchemaModel = this._layerDefinitionModel.getAnalysisDefinitionNodeModel().querySchemaModel;\n    this._quotaInfo = AnalysesQuotaInfo.get(opts.configModel);\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    if (this._isErrored()) {\n      this._renderError();\n    } else {\n      this._initViews();\n    }\n\n    this._toggleOverlay();\n    return this;\n  },\n\n  _isErrored: function () {\n    return this._layerContentModel.isErrored();\n  },\n\n  _renderError: function () {\n    this.$el.html(\n      analysisSQLErrorTemplate({\n        body: _t('editor.error-query.body', {\n          action: actionErrorTemplate({\n            label: _t('editor.error-query.label')\n          })\n        })\n      })\n    );\n  },\n\n  _initViews: function () {\n    if (this._analysisFormsCollection.isEmpty()) {\n      this.$el.html(analysisPlaceholderTemplate());\n      this._renderTooltip();\n    } else {\n      var formModel = this._getFormModel();\n\n      this._renderScrollableListView(formModel);\n      this._renderControlsView(formModel);\n    }\n\n    var plusIcon = new IconView({\n      placeholder: this.$el.find('.js-plus-icon'),\n      icon: 'plus'\n    });\n    plusIcon.render();\n    this.addView(plusIcon);\n  },\n\n  _toggleOverlay: function () {\n    var isDisabled = this._overlayModel.get('visible');\n    this.$el.toggleClass('is-disabled', isDisabled);\n  },\n\n  _renderTooltip: function () {\n    var tooltip = new TipsyTooltipView({\n      el: this.$('.js-add-analysis'),\n      gravity: 'w',\n      title: function () {\n        return utils.replaceLastSpaceWithNbsp(_t('editor.layers.analysis-form.add-analysis.tooltip'));\n      },\n      offset: 8\n    });\n    this.addView(tooltip);\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._layerDefinitionModel, 'change:source', this._onLayerDefSourceChanged);\n    this.listenTo(this._analysisFormsCollection, 'change:persisted', this._onAnalysisFormsCollectionSync);\n    this.listenTo(this._analysisFormsCollection, 'destroyedModels remove', this._setDefaultSelectedNodeId);\n    this.listenTo(this._overlayModel, 'change:visible', this._toggleOverlay);\n  },\n\n  _renderScrollableListView: function (formModel) {\n    var self = this;\n\n    var view = new ScrollView({\n      createContentView: function () {\n        return ViewFactory.createListView([\n          function () {\n            return new AnalysesWorkflowView({\n              analysisDefinitionNodesCollection: self._analysisDefinitionNodesCollection,\n              layerDefinitionModel: self._layerDefinitionModel,\n              analysisFormsCollection: self._analysisFormsCollection,\n              selectedNodeId: self._selectedNodeId\n            });\n          },\n          function () {\n            return new AnalysisFormView({\n              formModel: formModel,\n              configModel: self._configModel,\n              userModel: self._userModel\n            });\n          }\n        ]);\n      }\n    });\n    this.$el.append(view.render().el);\n    this.addView(view);\n  },\n\n  _renderControlsView: function (formModel) {\n    var analysisNode = this._analysisDefinitionNodesCollection.get(formModel.id);\n\n    var view = new AnalysisControlsView({\n      layerDefinitionModel: this._layerDefinitionModel,\n      analysisFormsCollection: this._analysisFormsCollection,\n      analysisNode: analysisNode,\n      configModel: this._configModel,\n      formModel: formModel,\n      quotaInfo: this._quotaInfo,\n      querySchemaModel: this._getQuerySchemaModelForEstimation(),\n      stackLayoutModel: this._stackLayoutModel,\n      userActions: this._userActions,\n      userModel: this._userModel,\n      deleteAnalysisModel: this._deleteAnalysisModel\n    });\n    this.addView(view);\n    this.$el.append(view.render().el);\n  },\n\n  _getFormModel: function () {\n    return this._analysisFormsCollection.get(this._selectedNodeId) || this._analysisFormsCollection.first();\n  },\n\n  _getQuerySchemaModelForEstimation: function () {\n    var node = this._analysisDefinitionNodesCollection.get(this._selectedNodeId);\n    var index;\n\n    if (!node) {\n      node = this._layerDefinitionModel.getAnalysisDefinitionNodeModel();\n    } else {\n      index = this._analysisDefinitionNodesCollection.indexOf(node);\n      node = this._analysisDefinitionNodesCollection.at(index - 1);\n    }\n\n    return node.querySchemaModel;\n  },\n\n  _onLayerDefSourceChanged: function () {\n    this._analysisFormsCollection.removeUselessModels();\n  },\n\n  _onAnalysisFormsCollectionSync: function (model) {\n    AnalysesService.clearNotAppliedAnalysis(model.get('id'));\n  },\n\n  _setDefaultSelectedNodeId: function () {\n    var selectedNodeId = this._analysisFormsCollection.pluck('id')[0];\n\n    AnalysesService.clearNotAppliedAnalysis(selectedNodeId);\n    Router.goToAnalysisNode(this._layerDefinitionModel.get('id'), selectedNodeId);\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<button class=\"CDB-Button CDB-Button--dashed CDB-Button--wide CDB-Button-Text CDB-Text is-semibold CDB-Size-small u-upperCase u-bSpace--xl u-flex u-justifyCenter u-alignCenter js-add-analysis\">\\n  <span class=\"js-plus-icon u-flex u-justifyCenter u-alignCenter u-rSpace--m\"></span>\\n  ' +\n__e( _t('editor.layers.analysis-form.add-analysis.label') ) +\n'\\n</button>\\n\\n<h2 class=\"CDB-Text CDB-Size-huge is-light u-secondaryTextColor\">' +\n__e( _t('editor.layers.analysis-form.placeholder-text') ) +\n'</h2>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar $ = require('jquery');\nvar cdb = require('internal-carto.js');\nvar errorParse = require('builder/helpers/error-parser');\n\nvar ENOUGH_QUOTA_QUERY = _.template(\"select cdb_dataservices_client.cdb_enough_quota('<%= analysis %>', <%= rows %>);\");\n\nmodule.exports = {\n  init: function (configModel) {\n    this.SQL = new cdb.SQL({\n      user: configModel.get('user_name'),\n      sql_api_template: configModel.get('sql_api_template'),\n      api_key: configModel.get('api_key')\n    });\n  },\n\n  fetch: function (service, rows) {\n    var query = ENOUGH_QUOTA_QUERY({\n      analysis: service,\n      rows: rows\n    });\n\n    if (!this.deferred || this.deferred.state() !== 'pending') {\n      var deferred = $.Deferred();\n      this.deferred = deferred;\n\n      var errorCallback = function (err) {\n        deferred.reject(errorParse(err));\n      };\n\n      var successCallback = function (data) {\n        // response is something like:\n        // {\"rows\":[{\"cdb_enough_quota\":false}],\"time\":0.024,\"fields\":{\"cdb_enough_quota\":{\"type\":\"boolean\"}},\"total_rows\":1}\n        deferred.resolve(data.rows[0].cdb_enough_quota);\n      };\n\n      this.SQL.execute(query, null, {\n        success: successCallback,\n        error: errorCallback\n      });\n    }\n\n    return this.deferred.promise();\n  }\n};\n","var _ = require('underscore');\nvar $ = require('jquery');\nvar cdb = require('internal-carto.js');\nvar errorParse = require('builder/helpers/error-parser');\n\nvar ESTIMATION_QUOTA_QUERY = _.template('SELECT CDB_EstimateRowCount($$<%= query %>;$$)  AS row_count;');\n\nmodule.exports = {\n  init: function (configModel) {\n    this.SQL = new cdb.SQL({\n      user: configModel.get('user_name'),\n      sql_api_template: configModel.get('sql_api_template'),\n      api_key: configModel.get('api_key')\n    });\n  },\n\n  fetch: function (query) {\n    var estimationQuery = ESTIMATION_QUOTA_QUERY({\n      query: query\n    });\n\n    if (!this.deferred || this.deferred.state() !== 'pending') {\n      var deferred = $.Deferred();\n      this.deferred = deferred;\n\n      var parseResponse = function (response) {\n        return response.rows[0].row_count;\n      };\n\n      var errorCallback = function (err) {\n        deferred.reject(errorParse(err));\n      };\n\n      var successCallback = function (data) {\n        deferred.resolve(parseResponse(data));\n      };\n\n      this.SQL.execute(estimationQuery, null, {\n        success: successCallback,\n        error: errorCallback\n      });\n    }\n\n    return this.deferred.promise();\n  }\n};\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar cdb = require('internal-carto.js');\nvar errorParse = require('builder/helpers/error-parser');\n\nvar SERVICE_QUOTA_QUERY = 'select * from cdb_dataservices_client.cdb_service_quota_info();';\n\nvar QuotaInfo = Backbone.Collection.extend({\n  initialize: function (models, options) {\n    if (!options || !options.configModel) throw new Error('configModel is required');\n\n    var configModel = options.configModel;\n    this.SQL = new cdb.SQL({\n      user: configModel.get('user_name'),\n      sql_api_template: configModel.get('sql_api_template'),\n      api_key: configModel.get('api_key')\n    });\n\n    this._state = 'unfetched';\n    this._ready = 'notready';\n  },\n\n  fetch: function (options) {\n    this._success = options && options.success;\n    this._error = options && options.error;\n\n    if (!this.isFetching()) {\n      this._state = 'fetching';\n      this.SQL.execute(SERVICE_QUOTA_QUERY, null, {\n        success: function (data) {\n          this._state = 'fetched';\n          this._ready = 'ready';\n          this._onFetchSuccess(data);\n          this._success && this._success();\n        }.bind(this),\n        error: function (err) {\n          this._state = 'error';\n          this._error && this._error(errorParse(err));\n        }.bind(this)\n      });\n    }\n  },\n\n  _onFetchSuccess: function (data) {\n    var models = data.rows;\n    _.each(models, function (model) {\n      var m = this.getService(model.service);\n      m ? m.set(model) : this.add(model);\n    }, this);\n  },\n\n  getService: function (service) {\n    return this.findWhere({service: service});\n  },\n\n  isFetching: function () {\n    return this.getState() === 'fetching';\n  },\n\n  isReady: function () {\n    return this._ready === 'ready';\n  },\n\n  needsCheck: function () {\n    var state = this.getState();\n    return state === 'unfetched' || state === 'fetching';\n  },\n\n  getState: function () {\n    return this._state;\n  }\n});\n\nvar collection;\n\nmodule.exports = {\n  get: function (configModel) {\n    if (collection === undefined) {\n      collection = new QuotaInfo([], {\n        configModel: configModel\n      });\n    }\n    return collection;\n  }\n};\n","var _ = require('underscore');\n\n/**\n *  Control which analysis requires quota\n */\n\nvar unity = function (input) {\n  return input;\n};\n\nvar routingAnalysisQuota = {\n  name: _t('editor.layers.analysis-form.quota.analysis-type.routing'),\n  api: 'routing',\n  user: 'mapzen_routing',\n  needsQuota: true,\n  transform: unity\n};\n\nvar dataObservatoryQuota = {\n  name: _t('editor.layers.analysis-form.quota.analysis-type.data-observatory-measure'),\n  api: 'observatory',\n  user: 'obs_general',\n  needsQuota: true,\n  transform: unity\n};\n\nvar ANALYSES_WITH_QUOTA_MAP = {\n  'trade-area': {\n    name: _t('editor.layers.analysis-form.quota.analysis-type.trade-area'),\n    api: 'isolines',\n    user: 'here_isolines',\n    transform: function (input, formModel) {\n      // the isoline analysis consume N rows x M tracts\n      return input * formModel.get('isolines');\n    },\n    needsQuota: function (quotaInfo) {\n      var info = quotaInfo.getService('isolines');\n      var provider = info && info.get('provider');\n      return !!provider;\n    }\n  },\n  'georeference-street-address': {\n    name: _t('editor.layers.analysis-form.quota.analysis-type.georeference-street-address'),\n    api: 'hires_geocoder',\n    user: 'geocoding',\n    transform: unity,\n    needsQuota: function (quotaInfo) {\n      var info = quotaInfo.getService('hires_geocoder');\n      var provider = info && info.get('provider');\n      return provider !== 'google';\n    }\n  },\n  'georeference-city': {\n    name: _t('editor.layers.analysis-form.quota.analysis-type.georeference-cities'),\n    api: 'hires_geocoder',\n    user: 'geocoding',\n    transform: unity,\n    needsQuota: function (quotaInfo) {\n      var info = quotaInfo.getService('hires_geocoder');\n      var provider = info && info.get('provider');\n      return provider !== 'google';\n    }\n  },\n  'data-observatory-measure': dataObservatoryQuota,\n  'routing-sequential': routingAnalysisQuota,\n  'routing-to-layer-all-to-all': routingAnalysisQuota,\n  'routing-to-single-point': routingAnalysisQuota\n};\n\nmodule.exports = {\n  requiresQuota: function (type, quotaInfo) {\n    if (ANALYSES_WITH_QUOTA_MAP[type] !== undefined) {\n      var needsQuota = ANALYSES_WITH_QUOTA_MAP[type].needsQuota;\n      if (_.isFunction(needsQuota)) {\n        return needsQuota(quotaInfo);\n      } else {\n        return needsQuota;\n      }\n    }\n    return false;\n  },\n\n  transformInput: function (type, input, formModel) {\n    if (ANALYSES_WITH_QUOTA_MAP[type] !== undefined) {\n      var transform = ANALYSES_WITH_QUOTA_MAP[type].transform;\n      return transform(input, formModel);\n    }\n    return input;\n  },\n\n  getAnalysisName: function (type) {\n    if (ANALYSES_WITH_QUOTA_MAP[type]) {\n      return ANALYSES_WITH_QUOTA_MAP[type].name;\n    }\n    return null;\n  },\n\n  getServiceName: function (type) {\n    if (ANALYSES_WITH_QUOTA_MAP[type]) {\n      return ANALYSES_WITH_QUOTA_MAP[type].api;\n    }\n    return null;\n  },\n\n  getUserDataName: function (type) {\n    if (ANALYSES_WITH_QUOTA_MAP[type]) {\n      return ANALYSES_WITH_QUOTA_MAP[type].user;\n    }\n    return null;\n  }\n\n};\n","var _ = require('underscore');\nvar Utils = require('builder/helpers/utils');\nvar AnalysesQuotaOptions = require('./analyses-quota-options');\nvar CONTACT_LINK_TEMPLATE = _.template(\"<a href='mailto:<%- mail %>'><%- contact %></a>\");\n\nfunction getOwnerEmail (userModel) {\n  return userModel._organizationModel && userModel._organizationModel.get('admin_email');\n}\n\nfunction getEmail (configModel, userModel) {\n  var isSaas = configModel.get('cartodb_com_hosted') === false;\n  var insideOrganization = userModel.isInsideOrg();\n  var ownerOrganization = userModel.isOrgOwner();\n  var email = _t('editor.layers.analysis-form.quota.emails.support');\n\n  if (isSaas) {\n    if (insideOrganization) {\n      email = ownerOrganization ? _t('editor.layers.analysis-form.quota.emails.support') : getOwnerEmail(userModel);\n    } else {\n      email = _t('editor.layers.analysis-form.quota.emails.saas');\n    }\n  }\n\n  return email;\n}\n\nfunction getMessage (configModel, userModel, notAssignedQuota) {\n  var insideOrganization = userModel.isInsideOrg();\n  var ownerOrganization = userModel.isOrgOwner();\n  var message;\n\n  if (notAssignedQuota) {\n    if (insideOrganization && !ownerOrganization) {\n      message = _t('editor.layers.analysis-form.quota.contact-message.no-quota-assigned.organization');\n    } else {\n      message = _t('editor.layers.analysis-form.quota.contact-message.no-quota-assigned.regular');\n    }\n  } else {\n    if (insideOrganization && !ownerOrganization) {\n      message = _t('editor.layers.analysis-form.quota.contact-message.no-credits.organization');\n    } else {\n      message = _t('editor.layers.analysis-form.quota.contact-message.no-credits.regular');\n    }\n  }\n\n  return message;\n}\n\nvar getNoCreditMessage = function (quota, type, configModel, userModel) {\n  var link;\n  var message;\n\n  link = CONTACT_LINK_TEMPLATE({\n    mail: getEmail(configModel, userModel),\n    contact: getMessage(configModel, userModel, quota.totalQuota === 0)\n  });\n\n  if (quota.totalQuota === 0) {\n    message = _t('editor.layers.analysis-form.quota.no-quota-assigned-body', {\n      analysis: AnalysesQuotaOptions.getAnalysisName(type),\n      contact: link\n    });\n  } else {\n    message = _t('editor.layers.analysis-form.quota.no-credits-body', {\n      contact: link\n    });\n  }\n\n  return message;\n};\n\nmodule.exports = {\n  make: function (data, configModel, userModel) {\n    var blockPrice = Utils.formatNumber(data.quotaInfo.blockPrice / 100);\n    var estimation = data.estimation;\n    var formattedEstimation = Utils.formatNumber(estimation);\n    var blockSize = Utils.formatNumber(data.quotaInfo.blockSize);\n    var body = '';\n    var type = '';\n    var link;\n\n    if (data.quotaInfo.hardLimit) {\n      if (data.creditsLeft > 0) {\n        if (data.quotaInfo.enoughQuota) {\n          // You need to use approximately xxx of your credits.\n          body = _t('editor.layers.analysis-form.quota.enough-quota', {\n            credits: formattedEstimation\n          });\n          type = 'success';\n        } else {\n          // We're sorry the current quota is insufficient to enrich your data. Rows will be set to null and analysis may not complete. Please contact us to extend your quota for this function.\n          link = CONTACT_LINK_TEMPLATE({\n            mail: getEmail(configModel, userModel),\n            contact: getMessage(configModel, userModel, false)\n          });\n\n          body = _t('editor.layers.analysis-form.quota.hard-limit-not-enough-quota', {\n            contact: link\n          });\n          type = 'alert';\n        }\n      } else {\n        // To get access to the [service] you will need more credits. Your current quota is not enough. Contact us.\n        body = getNoCreditMessage(data.quotaInfo, data.type, configModel, userModel);\n        type = 'alert';\n      }\n    } else {\n      if (data.creditsLeft > 0) {\n        // enoughQuota wil be true when soft_limit, becuase in this case, the api asume true\n        if (data.creditsLeft >= estimation) {\n          // You need to use some of your credits for this (data.estimation)\n          body = _t('editor.layers.analysis-form.quota.enough-quota', {\n            credits: formattedEstimation\n          });\n          type = 'success';\n        } else {\n          // Using this analysis component may incur extra fees depending on your account quota. Please review your current quota and/or request a larger allocation.\n          body = _t('editor.layers.analysis-form.quota.soft-limit-enough-quota', {\n            credits: formattedEstimation,\n            blockSize: blockSize,\n            blockPrice: blockPrice\n          });\n          type = 'alert';\n        }\n      } else {\n        if (data.quotaInfo.totalQuota === 0) {\n          body = getNoCreditMessage(data.quotaInfo, data.type, configModel, userModel);\n        } else {\n          // Using this analysis component may incur extra fees depending on your account quota. Please review your current quota and/or request a larger allocation.\n          body = _t('editor.layers.analysis-form.quota.soft-limit-enough-quota', {\n            credits: formattedEstimation,\n            blockSize: blockSize,\n            blockPrice: blockPrice\n          });\n        }\n        type = 'alert';\n      }\n    }\n\n    return {\n      type: type,\n      body: body\n    };\n  }\n};\n","var _ = require('underscore');\nvar AnalysesQuotaOptions = require('./analyses-quota-options');\n/**\n *  Provide info about quota\n *  It handles the source of data: api and user model\n */\n\nvar QUOTA_DEFAULTS = {\n  totalQuota: 0,\n  usedQuota: 0,\n  blockSize: 1000,\n  blockPrice: 0,\n  enoughQuota: true\n};\n\nmodule.exports = function (type, userModel, quotaInfo, enoughQuota) {\n  var apiData = quotaInfo.getService(AnalysesQuotaOptions.getServiceName(type)) || {};\n  var userData = userModel.get(AnalysesQuotaOptions.getUserDataName(type)) || {};\n\n  // Remove null | undefined | falsy values\n  userData = _.pick(userData, _.identity);\n  return _.defaults(\n    {\n      blockSize: userData.block_size,\n      blockPrice: userData.block_price\n    },\n    {\n      totalQuota: apiData.get('monthly_quota'),\n      usedQuota: apiData.get('used_quota'),\n      hardLimit: !apiData.get('soft_limit')\n    },\n    {\n      enoughQuota: enoughQuota\n    },\n    QUOTA_DEFAULTS\n  );\n};\n","// Make common analyses actions available whin editor context\nvar _ = require('underscore');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar AddAnalysisView = require('builder/components/modals/add-analysis/add-analysis-view');\nvar nodeIds = require('builder/value-objects/analysis-node-ids');\n\nvar REQUIRED_OPTS = [\n  'onboardings',\n  'layerDefinitionsCollection',\n  'modals',\n  'userModel',\n  'configModel'\n];\n\nmodule.exports = (function () {\n  return {\n    init: function (opts) {\n      checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n      this._notAppliedAnalysis = null;\n    },\n\n    setLayerId: function (layerId) {\n      var layerDefinitionModel = this._layerDefinitionsCollection.get(layerId);\n      if (!layerDefinitionModel) {\n        throw new Error('no layer-definition found for id' + layerId + ', available layer ids are: ' + this._layerDefinitionsCollection.pluck('id') + ')');\n      }\n\n      this._layerId = layerId;\n    },\n\n    setStackLayoutView: function (stackLayoutView) {\n      if (!stackLayoutView) {\n        throw new Error('stackLayoutView is required');\n      }\n\n      this._stackLayoutView = stackLayoutView;\n    },\n\n    generateGeoreferenceAnalysis: function () {\n      var layerDefinitionModel = this._layerDefinitionsCollection.get(this._layerId);\n\n      var letter = layerDefinitionModel.get('letter');\n      var sourceId = layerDefinitionModel.get('source');\n\n      return {\n        source: sourceId,\n        id: letter === nodeIds.letter(sourceId)\n          ? nodeIds.next(sourceId)\n          : letter + '1',\n        type: 'georeference-long-lat'\n      };\n    },\n\n    addAnalysis: function () {\n      this._onboardings.destroy();\n\n      var layerDefinitionModel = this._layerDefinitionsCollection.get(this._layerId);\n\n      this._modals.create(function (modalModel) {\n        return new AddAnalysisView({\n          userModel: this._userModel,\n          configModel: this._configModel,\n          modalModel: modalModel,\n          layerDefinitionModel: layerDefinitionModel\n        });\n      }.bind(this), {\n        breadcrumbsEnabled: true\n      });\n\n      this._modals.onDestroyOnce(function (analysisFormAttrs) {\n        if (analysisFormAttrs) {\n          // A analysis option was seleted, redirect to layer-content view with new attrs\n          this._stackLayoutView.model.goToStep(1, layerDefinitionModel, 'layer-content', 'analyses', analysisFormAttrs);\n        }\n      }, this);\n    },\n\n    saveNotAppliedAnalysis: function (analysis) {\n      this._notAppliedAnalysis = _.extend({ persisted: false }, analysis);\n    },\n\n    getNotAppliedAnalysis: function () {\n      return this._notAppliedAnalysis;\n    },\n\n    clearNotAppliedAnalysis: function () {\n      this._notAppliedAnalysis = null;\n    }\n  };\n})();\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<h2 class=\"CDB-Text CDB-Size-huge is-light u-secondaryTextColor\">\\n  ' +\n((__t = ( body )) == null ? '' : __t) +\n'\\n</h2>\\n';\n\n}\nreturn __p\n}","var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar Infobox = require('builder/components/infobox/infobox-factory');\nvar InfoboxModel = require('builder/components/infobox/infobox-model');\nvar InfoboxCollection = require('builder/components/infobox/infobox-collection');\nvar PanelWithOptionsView = require('builder/components/view-options/panel-with-options-view');\nvar panelTemplate = require('./panel-with-options.tpl');\nvar AnalysesContentView = require('./analyses-content-view');\nvar OnboardingLauncher = require('builder/components/onboardings/generic/generic-onboarding-launcher');\nvar OnboardingView = require('builder/components/onboardings/layers/analysis-onboarding/analysis-onboarding-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar ONBOARDING_KEY = 'layer-analyses-onboarding';\n\nvar REQUIRED_OPTS = [\n  'userActions',\n  'analysisFormsCollection',\n  'layerDefinitionModel',\n  'analysisDefinitionNodesCollection',\n  'configModel',\n  'userModel',\n  'editorModel',\n  'stackLayoutModel',\n  'onboardings',\n  'onboardingNotification',\n  'layerContentModel'\n];\n\nmodule.exports = CoreView.extend({\n  module: 'editor/layers/layer-content-views/analyses/analyses-view',\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._selectedNodeId = opts.selectedNodeId;\n\n    this._deleteAnalysisModel = new Backbone.Model({\n      analysisId: null\n    });\n\n    this._infoboxModel = new InfoboxModel({\n      state: ''\n    });\n\n    this._overlayModel = new Backbone.Model({\n      visible: this._isLayerHidden()\n    });\n\n    this._onboardingLauncher = new OnboardingLauncher({\n      view: OnboardingView,\n      onboardingNotification: this._onboardingNotification,\n      notificationKey: ONBOARDING_KEY,\n      onboardings: this._onboardings\n    }, {\n      editorModel: this._editorModel,\n      selector: 'LayerOnboarding'\n    });\n\n    this._getQueryAndCheckState();\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this._launchOnboarding();\n    this.clearSubViews();\n    this.$el.empty();\n\n    this._initViews();\n    this._infoboxState();\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._layerDefinitionModel, 'change:visible', this._infoboxState);\n    this.listenTo(this._deleteAnalysisModel, 'change:analysisId', this._infoboxState);\n    this.listenTo(this._analysisFormsCollection, 'reset remove', this._getQueryAndCheckState);\n  },\n\n  _initViews: function () {\n    var self = this;\n    var infoboxSstates = [\n      {\n        state: 'layer-hidden',\n        createContentView: function () {\n          return Infobox.createWithAction({\n            type: 'alert',\n            title: _t('editor.messages.layer-hidden.title'),\n            body: _t('editor.messages.layer-hidden.body'),\n            action: {\n              label: _t('editor.messages.layer-hidden.show')\n            }\n          });\n        },\n        onAction: self._showHiddenLayer.bind(self)\n      },\n      {\n        state: 'deleting-analysis',\n        createContentView: function () {\n          return Infobox.createWithAction({\n            type: 'alert',\n            title: _t('editor.messages.deleting-analysis.title'),\n            body: _t('editor.messages.deleting-analysis.body'),\n            action: {\n              label: _t('editor.messages.deleting-analysis.delete')\n            }\n          });\n        },\n        onClose: self._resetDeletingAnalysis.bind(self),\n        onAction: self._deleteAnalysis.bind(self)\n      }\n    ];\n\n    var infoboxCollection = new InfoboxCollection(infoboxSstates);\n\n    var panelWithOptionsView = new PanelWithOptionsView({\n      template: panelTemplate,\n      className: 'Editor-content',\n      editorModel: self._editorModel,\n      infoboxModel: self._infoboxModel,\n      infoboxCollection: infoboxCollection,\n      createContentView: function () {\n        return new AnalysesContentView({\n          className: 'Editor-content',\n          userActions: self._userActions,\n          analysisDefinitionNodesCollection: self._analysisDefinitionNodesCollection,\n          userModel: self._userModel,\n          analysisFormsCollection: self._analysisFormsCollection,\n          configModel: self._configModel,\n          layerDefinitionModel: self._layerDefinitionModel,\n          stackLayoutModel: self._stackLayoutModel,\n          selectedNodeId: self._selectedNodeId,\n          overlayModel: self._overlayModel,\n          layerContentModel: self._layerContentModel,\n          deleteAnalysisModel: self._deleteAnalysisModel\n        });\n      }\n    });\n\n    this.$el.append(panelWithOptionsView.render().el);\n    this.addView(panelWithOptionsView);\n  },\n\n  _getQueryAndCheckState: function () {\n    if (!this._analysisFormsCollection.isEmpty()) {\n      this._infoboxState();\n    }\n  },\n\n  _launchOnboarding: function () {\n    if (this._onboardingNotification.getKey(ONBOARDING_KEY)) {\n      return;\n    }\n\n    if (this._analysisFormsCollection.isEmpty()) {\n      this._onboardingLauncher.launch();\n    }\n\n    this._layerDefinitionModel.canBeGeoreferenced()\n      .then(function (canBeGeoreferenced) {\n        if (canBeGeoreferenced) {\n          this._onboardingNotification.setKey(ONBOARDING_KEY, true);\n        }\n      }.bind(this));\n  },\n\n  _infoboxState: function () {\n    if (this._isLayerHidden()) {\n      this._infoboxModel.set({ state: 'layer-hidden' });\n      this._overlayModel.set({ visible: true });\n    } else if (this._deleteAnalysisModel.get('analysisId')) {\n      this._infoboxModel.set({ state: 'deleting-analysis' });\n      this._overlayModel.set({ visible: true });\n    } else {\n      this._infoboxModel.set({ state: '' });\n      this._overlayModel.set({ visible: false });\n    }\n  },\n\n  _showHiddenLayer: function () {\n    this._layerDefinitionModel.toggleVisible();\n    this._userActions.saveLayer(this._layerDefinitionModel);\n\n    this._infoboxState();\n  },\n\n  _isLayerHidden: function () {\n    return this._layerDefinitionModel.get('visible') === false;\n  },\n\n  _resetDeletingAnalysis: function () {\n    this._deleteAnalysisModel.unset('analysisId');\n  },\n\n  _deleteAnalysis: function () {\n    this._analysisFormsCollection.deleteNode(this._deleteAnalysisModel.get('analysisId'));\n    this._resetDeletingAnalysis();\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar template = require('./analyses-workflow-item.tpl');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\nvar Analyses = require('builder/data/analyses');\nvar NotificationErrorMessageHandler = require('builder/editor/layers/notification-error-message-handler');\nvar nodeIds = require('builder/value-objects/analysis-node-ids');\nvar layerColors = require('builder/data/layer-colors');\nvar Router = require('builder/routes/router');\nvar linkTemplate = require('./more-info-link.tpl');\n\nmodule.exports = CoreView.extend({\n\n  tagName: 'li',\n  className: 'VerticalRadioList-item',\n\n  events: {\n    'click': '_onNodeClick'\n  },\n\n  initialize: function (opts) {\n    if (!opts.analysisNode && !opts.formModel) throw new Error('analysisNode or formModel is required');\n\n    this._isNew = !opts.analysisNode;\n    this._analysisNode = opts.analysisNode || opts.formModel; // if form model represents a new node there is no analysis yet; use form model as fallback\n    this._layerId = opts.layerId;\n    this._selectedNodeId = opts.selectedNodeId;\n\n    this.listenTo(this._analysisNode, 'change:status', this.render);\n  },\n\n  render: function () {\n    var status = this._analysisNode.get('status');\n    var isDone = this._isNew || status === 'ready' || status === 'failed';\n    var isSelected = this._analysisNode.id === this._selectedNodeId;\n    var hasFailed = status === 'failed';\n    var tooltipMessage = this._tooltipMessage(hasFailed);\n    var letter = nodeIds.letter(this._analysisNode.id);\n    var bgColor = layerColors.getColorForLetter(letter);\n    var helpURL = Analyses.link(this._analysisNode.get('type'));\n\n    var linkContent;\n\n    if (isSelected) {\n      linkContent = linkTemplate({\n        link: helpURL,\n        type: this._analysisNode.get('type')\n      });\n    }\n\n    this.clearSubViews();\n    this.$el.html(\n      template({\n        isNew: this._isNew,\n        isDone: isDone,\n        bgColor: bgColor,\n        isSelected: isSelected,\n        nodeId: this._analysisNode.id,\n        hasError: hasFailed,\n        name: this._analysisName(),\n        linkContent: linkContent\n      })\n    );\n\n    if (!this._isNew && !isSelected) {\n      this._tooltip = new TipsyTooltipView({\n        el: this.$('.js-tooltip'),\n        className: hasFailed ? 'is-error' : '',\n        gravity: 'w',\n        title: function () {\n          return tooltipMessage;\n        }\n      });\n      this.addView(this._tooltip);\n    }\n\n    return this;\n  },\n\n  _onNodeClick: function () {\n    Router.goToAnalysisNode(this._layerId, this._analysisNode.id);\n  },\n\n  _analysisName: function () {\n    return Analyses.title(this._analysisNode.get('type') || '');\n  },\n\n  _tooltipMessage: function (hasFailed) {\n    if (hasFailed) {\n      var error = this._analysisNode.get('error');\n      var errorMessage = error && error.message && NotificationErrorMessageHandler.extractError(error.message).message;\n\n      return errorMessage;\n    }\n\n    return _t('editor.layers.analysis-form.edit-analysis-tooltip');\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"\\n  VerticalRadioList-itemInner\\n  ';\n if (hasError) { ;\n__p += ' has-error';\n } ;\n__p += '\\n\">\\n  ';\n if (isDone) { ;\n__p += '\\n    <div class=\"VerticalRadioList-radio u-rSpace--m\">\\n      <input class=\"CDB-Radio\" type=\"radio\" ' +\n__e( isDone && isSelected ? 'checked' : '' ) +\n'>\\n      <span class=\"u-iBlock CDB-Radio-face\"></span>\\n    </div>\\n  ';\n } else { ;\n__p += '\\n    <div class=\"CDB-LoaderIcon is-blue u-rSpace--m\">\\n      <svg class=\"CDB-LoaderIcon-spinner\" viewbox=\"0 0 50 50\">\\n        <circle class=\"CDB-LoaderIcon-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"/>\\n      </svg>\\n    </div>\\n  ';\n } ;\n__p += '\\n\\n  <div class=\"CDB-Text CDB-Size-small is-semibold u-rSpace u-upperCase u-flex u-alignCenter\" style=\"color: ' +\n__e( bgColor ) +\n';\">\\n    <span class=\"u-rSpace--s\">' +\n__e( nodeId ) +\n'</span>\\n    <i class=\"CDB-IconFont CDB-IconFont-ray CDB-Size-small\"></i>\\n  </div>\\n\\n  <div class=\"VerticalRadioList-label CDB-Text CDB-Size-medium js-analysis-name js-tooltip\">\\n    ' +\n__e( name ) +\n'\\n  </div>\\n\\n  <div class=\"VerticalRadioList-spacer\"></div>\\n\\n  ' +\n((__t = ( linkContent )) == null ? '' : __t) +\n'\\n</div>\\n';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar AnalysesWorkflowItemView = require('./analyses-workflow-item-view');\nvar template = require('./analyses-workflow-list.tpl');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\nvar utils = require('builder/helpers/utils');\n\nvar REQUIRED_OPTS = [\n  'analysisDefinitionNodesCollection',\n  'analysisFormsCollection',\n  'layerId',\n  'selectedNodeId'\n];\n\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template({\n      layerId: this._layerId\n    }));\n\n    this._initViews();\n\n    return this;\n  },\n\n  _initViews: function () {\n    this._analysisFormsCollection.each(this._renderWorkflowItem, this);\n    var tooltip = new TipsyTooltipView({\n      el: this.$('.js-add-analysis'),\n      gravity: 'w',\n      title: function () {\n        return utils.replaceLastSpaceWithNbsp(_t('editor.layers.analysis-form.add-analysis.tooltip'));\n      },\n      offset: 8\n    });\n    this.addView(tooltip);\n  },\n\n  _renderWorkflowItem: function (formModel) {\n    var view = new AnalysesWorkflowItemView({\n      analysisNode: this._analysisDefinitionNodesCollection.get(formModel.id),\n      formModel: formModel,\n      layerId: this._layerId,\n      selectedNodeId: this._selectedNodeId\n    });\n    this.$('.js-analyes').append(view.render().el);\n    this.addView(view);\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<button class=\"CDB-Button CDB-Button--dashed CDB-Button--wide CDB-Button-Text CDB-Text is-semibold CDB-Size-small u-upperCase u-bSpace--xl u-flex u-justifyCenter u-alignCenter js-add-analysis\" data-layer-id=\"' +\n__e( layerId ) +\n'\">\\n  <span class=\"js-plus-icon u-flex u-justifyCenter u-alignCenter u-rSpace--m\"></span>\\n  ' +\n__e( _t('editor.layers.analysis-form.add-analysis.label') ) +\n'\\n</button>\\n\\n\\n<ul class=\"VerticalRadioList u-tSpace js-analyes\"></ul>\\n';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar AnalysesWorkflowListView = require('./analyses-workflow-list-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'analysisDefinitionNodesCollection',\n  'analysisFormsCollection',\n  'layerDefinitionModel',\n  'selectedNodeId'\n];\n\nmodule.exports = CoreView.extend({\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this.listenTo(this._analysisDefinitionNodesCollection, 'add', function () {\n      // change:source happens when a node is deleted as well, so we can't just listen to it all the time\n      this._layerDefinitionModel.once('change:source', this.render, this);\n    });\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    this._renderAnalysesView();\n\n    return this;\n  },\n\n  _renderAnalysesView: function () {\n    var self = this;\n\n    var view = new AnalysesWorkflowListView({\n      analysisDefinitionNodesCollection: self._analysisDefinitionNodesCollection,\n      analysisFormsCollection: self._analysisFormsCollection,\n      layerId: self._layerDefinitionModel.id,\n      selectedNodeId: self._selectedNodeId\n    });\n\n    this.$el.append(view.render().el);\n    this.addView(view);\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar template = require('./analysis-buttons.tpl');\n\nmodule.exports = CoreView.extend({\n  className: 'u-flex u-justifySpace',\n\n  initialize: function (opts) {\n    this.template = template;\n    this.model = opts.model;\n    this._initBinds();\n  },\n\n  render: function () {\n    var html = this.template(this.model.attributes);\n\n    this.clearSubViews();\n    this.$el.empty();\n    this.$el.append(html);\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.model, 'change:isDisabled', this.render);\n    this.listenTo(this.model, 'change:disableDelete', this.render);\n    // listenTo drops events if view is removed from DOM\n    this.model.on('change:isDone', this.render, this);\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<button class=\"\\n  CDB-Button\\n  CDB-Button--noPadding\\n  js-delete\\n  ';\n if (disableDelete) { ;\n__p += ' is-disabled';\n } ;\n__p += '\\n\">\\n  <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-small u-upperCase\\n  ';\n if (isDelete) { ;\n__p += ' u-errorTextColor';\n } else { ;\n__p += ' u-actionTextColor';\n } ;\n__p += '\">\\n    ' +\n__e( labelDelete ) +\n'\\n  </span>\\n</button>\\n<button class=\"CDB-Button CDB-Button--loading CDB-Button--primary js-save\\n';\n if (isDisabled) { ;\n__p += ' is-disabled';\n } ;\n__p += '\\n';\n if (!isDone) { ;\n__p += ' is-loading';\n } ;\n__p += '\">\\n  <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-small u-upperCase\">' +\n__e( labelSave ) +\n'</span>\\n   <div class=\"CDB-Button-loader CDB-LoaderIcon is-white\">\\n     <svg class=\"CDB-LoaderIcon-spinner\" viewbox=\"0 0 50 50\">\\n       <circle class=\"CDB-LoaderIcon-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"/>\\n     </svg>\\n   </div>\\n</button>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar Utils = require('builder/helpers/utils');\nvar InfoboxFactory = require('builder/components/infobox/infobox-factory');\nvar InfoboxModel = require('builder/components/infobox/infobox-model');\nvar InfoboxCollection = require('builder/components/infobox/infobox-collection');\nvar AnalysesQuotaPresenter = require('./analyses-quota/analyses-quota-presenter');\nvar AnalysesQuotaOptions = require('./analyses-quota/analyses-quota-options');\nvar AnalysesQuotaProvider = require('./analyses-quota/analyses-quota-provider');\nvar AnalysesQuotaEstimation = require('./analyses-quota/analyses-quota-estimation-input');\nvar AnalysesQuotaEnough = require('./analyses-quota/analyses-quota-enough');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar AnalysisButtonsView = require('./analysis-buttons-view');\nvar AnalysisQuotaView = require('./analysis-quota-view');\n\nvar REQUIRED_OPTS = [\n  'layerDefinitionModel',\n  'configModel',\n  'formModel',\n  'quotaInfo',\n  'querySchemaModel',\n  'stackLayoutModel',\n  'userActions',\n  'userModel',\n  'analysisFormsCollection',\n  'deleteAnalysisModel'\n];\n\n/**\n * View representing the apply and cancel/delete buttons for a form\n */\nmodule.exports = CoreView.extend({\n  module: 'editor:layers:layer-content-views:analyses:analysis-controls-view',\n\n  className: 'Options-bar',\n\n  events: {\n    'click .js-save': '_onSaveClicked',\n    'click .js-delete': '_onDeleteClicked'\n  },\n\n  _buttonsView: null,\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._analysisNode = opts.analysisNode;\n\n    AnalysesQuotaEstimation.init(opts.configModel);\n    AnalysesQuotaEnough.init(opts.configModel);\n\n    this._viewModel = new Backbone.Model({\n      isNewAnalysis: !opts.analysisNode,\n      hasChanges: !opts.analysisNode,\n      isDone: true,\n      type: this._formModel.get('type')\n    });\n\n    this._infoboxModel = new InfoboxModel({\n      state: this._quotaInfo.getState(),\n      visible: true\n    });\n\n    this._initViewState();\n    this.render = this.render.bind(this);\n\n    this._initBinds();\n\n    if (!opts.analysisNode) {\n      this._fetchQuotaIfNeeded();\n    }\n\n    this._onFormModelChanged = this._onFormModelChanged.bind(this);\n  },\n\n  render: function () {\n    var type, isValid, requiresQuota, view;\n\n    this.clearSubViews();\n    this.$el.empty();\n    type = this._formModel.get('type');\n    isValid = this._formModel.isValid();\n    // If no dataservice, requiresQuota returns false because the model doesn't exist and it's converted to boolean\n    requiresQuota = AnalysesQuotaOptions.requiresQuota(type, this._quotaInfo);\n\n    if (this._isAnalysisDone() && !this._hasChanges()) {\n      view = this._createButtonsView();\n    } else {\n      // If the analysis doesn't require quota, let's not wait or check the fetching state\n      if (!requiresQuota || !isValid) {\n        view = this._createButtonsView();\n      } else {\n        view = this._createQuotaView();\n      }\n    }\n\n    this.addView(view);\n    this.$el.append(view.render().el);\n    this._setTrackingClass();\n\n    return this;\n  },\n\n  _initViewState: function () {\n    this._viewState = new Backbone.Model({\n      canBeGeoreferenced: false\n    });\n    this._setViewState();\n  },\n\n  _setTrackingClass: function () {\n    this.$('.js-save').addClass('track-' + this._formModel.get('type') + '-analysis track-apply');\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._formModel, 'change', this._onFormModelChanged);\n    if (this._analysisNode) {\n      this._bindAnalysisNodeStatusChanges();\n    }\n    this.listenTo(this._viewState, 'change', this.render);\n  },\n\n  _bindAnalysisNodeStatusChanges: function () {\n    this.listenTo(this._analysisNode, 'change:status', function () {\n      this._viewModel.set('isDone', this._isAnalysisDone());\n      var isAnalysisDone = this._isAnalysisDone();\n      if (isAnalysisDone) {\n        this.render();\n      }\n    });\n  },\n\n  _onFormModelChanged: function () {\n    var isAnalysisDone = this._isAnalysisDone();\n    var isDone = this._viewModel.get('isNewAnalysis') || isAnalysisDone;\n    var canSave = this._formModel.isValid() && isDone;\n\n    this._viewModel.set({\n      hasChanges: true,\n      type: this._formModel.get('type'),\n      isDisabled: !canSave\n    });\n\n    this.render();\n    this._fetchQuotaIfNeeded();\n  },\n\n  _fetchQuotaIfNeeded: function () {\n    var type = this._formModel.get('type');\n    var isValid = this._formModel.isValid();\n\n    var quota = this._quotaInfo;\n    if ((quota.needsCheck() || AnalysesQuotaOptions.requiresQuota(type, quota)) && isValid) {\n      this._fetchQuota();\n    }\n  },\n\n  _fetchQuota: function () {\n    this._infoboxModel.set('state', 'fetching');\n\n    this._quotaInfo.fetch({\n      success: function () {\n        this._buildQuotaViewInfo();\n      }.bind(this),\n      error: function (error) {\n        this._viewModel.set({error: error});\n        this._infoboxModel.set('state', 'error');\n      }.bind(this)\n    });\n  },\n\n  _createButtonsView: function () {\n    this._viewModel.set({\n      labelSave: _t('editor.layers.analysis-form.apply-btn'),\n      labelDelete: this._analysisNode\n        ? _t('editor.layers.analysis-form.delete-btn')\n        : _t('editor.layers.analysis-form.cancel-btn'),\n      isDelete: this._analysisNode,\n      disableDelete: !this._canDelete(),\n      isDisabled: !this._canSave()\n    });\n\n    if (this._buttonsView === null) {\n      this._buttonsView = new AnalysisButtonsView({\n        model: this._viewModel\n      });\n    }\n\n    return this._buttonsView;\n  },\n\n  _buildQuotaViewInfo: function () {\n    var formModel = this._formModel;\n    var userModel = this._userModel;\n    var type = formModel.get('type');\n    var service = AnalysesQuotaOptions.getServiceName(type);\n    var query = this._querySchemaModel.get('query');\n    var quotaData = this._quotaInfo;\n\n    var payload = {};\n    payload.type = type;\n\n    var errorCallback = function (error) {\n      this._viewModel.set('error', error);\n      this._infoboxModel.set('state', 'error');\n    }.bind(this);\n\n    var checkEnoughQuota = function (data) {\n      // Apply transformation to the input\n      // for example isolines takes tracts in in order to calculate estimation\n      var rows = AnalysesQuotaOptions.transformInput(type, data, formModel);\n      payload.estimation = rows;\n      // with the input, we calculate wether the quota is enough\n      this.enoughQuotaPromise = AnalysesQuotaEnough.fetch(service, rows);\n      return this.enoughQuotaPromise;\n    }.bind(this);\n\n    var buildPayload = function (enoughQuota) {\n      // then we can get the full set of data\n      payload.quotaInfo = AnalysesQuotaProvider(type, userModel, quotaData, enoughQuota);\n      payload.creditsLeft = payload.quotaInfo.totalQuota - payload.quotaInfo.usedQuota;\n      payload.canRunAnalysis = ((enoughQuota && payload.quotaInfo.totalQuota > 0) ||\n                               (payload.quotaInfo.hardLimit === false && payload.quotaInfo.totalQuota > 0));\n\n      // we need to check the request's state because it could be another render while permforming the current one\n      // so, to make sure we have all data returned by the apis, we don't raise the green flag until both stats are resolved.\n      var estimationState = this.estimationPromise.state();\n      var enoughQuotaState = this.enoughQuotaPromise.state();\n\n      if (estimationState === 'resolved' && enoughQuotaState === 'resolved') {\n        if (this._infoboxModel.get('state') !== 'ready') {\n          this.payload = payload;\n          // finally we are ready to show the information\n          this._infoboxModel.set('state', 'ready');\n        }\n      }\n    }.bind(this);\n\n    var dsReady = quotaData.isReady();\n\n    // Only checks api if analysis belongs to a service with quota\n    if (service !== null && dsReady) {\n      if (formModel.isValid()) {\n        // get the estimation for this analysis\n        this.estimationPromise = AnalysesQuotaEstimation.fetch(query);\n\n        this.estimationPromise\n          .then(checkEnoughQuota, errorCallback)\n          .then(buildPayload, errorCallback);\n      } else {\n        // to render the simple buttons view.\n        this.render();\n      }\n    } else if (!dsReady) {\n      errorCallback(_t('editor.layers.analysis-form.quota.quota-dataservice-down'));\n    }\n  },\n\n  _createQuotaView: function () {\n    var states = [\n      {\n        state: 'fetching',\n        createContentView: function () {\n          return InfoboxFactory.createLoading({\n            body: _t('editor.layers.analysis-form.quota.loading')\n          });\n        }\n      },\n      {\n        state: 'ready',\n        createContentView: function () {\n          var payload = this.payload;\n          var quotaMessage = '';\n\n          if (payload.creditsLeft > 0) {\n            quotaMessage = _t('editor.layers.analysis-form.quota.credits-left-message', {\n              smart_count: Utils.formatNumber(payload.creditsLeft)\n            });\n          } else {\n            quotaMessage = _t('editor.layers.analysis-form.quota.no-credits-message');\n          }\n          payload.quotaInfo.quotaMessage = quotaMessage;\n\n          var dataInfobox = _.extend(AnalysesQuotaPresenter.make(payload, this._configModel, this._userModel), {\n            title: _t('editor.layers.analysis-form.quota.title'),\n            action: {\n              label: _t('editor.layers.analysis-form.confirm-analysis'),\n              type: 'primary',\n              disabled: !this._canSave() || !payload.canRunAnalysis\n            },\n            quota: payload.quotaInfo,\n            closable: false\n          });\n\n          return InfoboxFactory.createQuota(dataInfobox);\n        }.bind(this),\n        onAction: function () {\n          var payload = this.payload;\n          if (this._canSave() && payload.canRunAnalysis) {\n            this._saveAnalysis();\n          }\n        }.bind(this)\n      },\n      {\n        state: 'error',\n        createContentView: function () {\n          return InfoboxFactory.createWithAction({\n            title: _t('editor.layers.analysis-form.quota.title'),\n            type: 'error',\n            body: _t('editor.layers.analysis-form.quota.quota-fetch-error', {\n              error: this._viewModel.get('error')\n            }),\n            action: {\n              label: _t('editor.layers.analysis-form.quota.cancel')\n            }\n          });\n        }.bind(this),\n        onAction: function () {\n          this._stackLayoutModel.prevStep('layers');\n        }.bind(this)\n      }\n    ];\n\n    return new AnalysisQuotaView({\n      className: 'Infobox-wrapper',\n      infoboxModel: this._infoboxModel,\n      infoboxCollection: new InfoboxCollection(states)\n    });\n  },\n\n  _canSave: function () {\n    var isAnalysisDone = this._isAnalysisDone();\n    var isDone = this._viewModel.get('isNewAnalysis') || isAnalysisDone;\n    var hasChanges = this._viewModel.get('hasChanges');\n    return this._formModel.isValid() && isDone && hasChanges;\n  },\n\n  _onSaveClicked: function () {\n    if (this._canSave()) {\n      this._saveAnalysis();\n    }\n  },\n\n  _canDelete: function () {\n    var nodeDefModel = this._analysisNode;\n    var canDeleteNode = (!nodeDefModel || nodeDefModel.canBeDeletedByUser());\n    var canBeGeoreferenced = this._viewState.get('canBeGeoreferenced');\n    var hasAnalyses = this._layerDefinitionModel.hasAnalyses();\n\n    return (hasAnalyses && canDeleteNode) || (canDeleteNode && !canBeGeoreferenced);\n  },\n\n  _onDeleteClicked: function () {\n    if (this._canDelete()) {\n      this._isLastAnalysisNodeSelected()\n        ? this._deleteAnalysisModel.set('analysisId', this._formModel.get('id'))\n        : this._deleteAnalysis();\n    }\n  },\n\n  _hasChanges: function () {\n    return this._viewModel.get('hasChanges') === true;\n  },\n\n  _isAnalysisDone: function () {\n    return this._analysisNode && (this._analysisNode.isDone() || this._analysisNode.hasFailed());\n  },\n\n  _isLastAnalysisNodeSelected: function () {\n    return this._analysisFormsCollection.first() !== this._formModel;\n  },\n\n  _saveAnalysis: function () {\n    this._infoboxModel.set('state', 'idle');\n    var newNode = this._userActions.saveAnalysis(this._formModel);\n\n    if (!this._analysisNode) {\n      this._analysisNode = newNode;\n      this._bindAnalysisNodeStatusChanges();\n    }\n\n    // For cached analysis, if the user edits the analysis to a previous version of it\n    // the request returns the status:ready but the analysis node already has this state\n    // so no changes are triggered\n    this._analysisNode.set({ status: 'launched' }, { silent: true });\n\n    this._viewModel.set({ hasChanges: false, isDone: false });\n    this.render();\n  },\n\n  _deleteAnalysis: function () {\n    this._analysisFormsCollection.deleteNode(this._formModel.get('id'));\n  },\n\n  _setViewState: function () {\n    return this._layerDefinitionModel.canBeGeoreferenced()\n      .then(function (canBeGeoreferenced) {\n        this._viewState.set('canBeGeoreferenced', canBeGeoreferenced);\n      }.bind(this));\n  }\n});\n","var _ = require('underscore');\nvar BaseAnalysisFormModel = require('./base-analysis-form-model');\nvar template = require('./aggregate-intersection-form.tpl');\nvar ColumnOptions = require('builder/editor/layers/layer-content-views/analyses/column-options');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\n\nvar AGGREGATE_FORMAT_FIELDS_NAMES = [\n  'type',\n  'aggregate_column',\n  'aggregate_function'\n];\n\n/**\n * Form model for the aggregate intersection analysis\n */\nmodule.exports = BaseAnalysisFormModel.extend({\n  parse: function (attrs) {\n    if (!attrs.aggregate_column) {\n      attrs.aggregate_column = 'cartodb_id';\n    }\n    if (!attrs.aggregate_function) {\n      attrs.aggregate_function = 'count';\n    }\n    attrs.aggregate = {\n      operator: attrs.aggregate_function,\n      attribute: attrs.aggregate_function === 'count' ? '' : attrs.aggregate_column\n    };\n    return attrs;\n  },\n\n  initialize: function () {\n    BaseAnalysisFormModel.prototype.initialize.apply(this, arguments);\n\n    this._columnOptions = new ColumnOptions({}, {\n      configModel: this._configModel\n    });\n\n    this.listenTo(this._analysisSourceOptionsModel, 'change:fetching', this._setSchema);\n    this.listenTo(this._columnOptions, 'columnsFetched', this._setSchema);\n\n    this.on('change:aggregate', this._onChangeAggregate, this);\n    this.on('change:target', this._onChangeTarget, this);\n\n    this._setSchema();\n    this._fetchColumns();\n  },\n\n  _formatAttrs: function (formAttrs) {\n    var customFormattedFormAttrs = _.pick(formAttrs, ['id', 'source', 'target'].concat(AGGREGATE_FORMAT_FIELDS_NAMES));\n    return BaseAnalysisFormModel.prototype._formatAttrs.call(this, customFormattedFormAttrs);\n  },\n\n  getTemplate: function () {\n    return template;\n  },\n\n  getTemplateData: function () {\n    return {\n      dataFields: 'aggregate',\n      hasTarget: this.get('target') !== undefined\n    };\n  },\n\n  _filterSchemaFieldsByType: function (schema) {\n    // Always include the source and target fields in addition to the type-specific fields\n    return _.pick(schema, ['source', 'target', 'aggregate']);\n  },\n\n  /**\n   * @override {BaseAnalysisFormModel._setSchema}\n   */\n  _setSchema: function () {\n    BaseAnalysisFormModel.prototype._setSchema.call(this, this._filterSchemaFieldsByType({\n      source: this._primarySourceSchemaItem(_t('editor.layers.analysis-form.base-layer')),\n      target: {\n        type: 'NodeDataset',\n        title: _t('editor.layers.analysis-form.target-layer'),\n        options: this._getSourceOptionsForSource({\n          sourceAttrName: 'target'\n        }),\n        validators: ['required'],\n        dialogMode: DialogConstants.Mode.FLOAT,\n        editorAttrs: {\n          disabled: this._isSourceDisabled('target')\n        }\n      },\n      aggregate: {\n        type: 'Operators',\n        title: _t('editor.layers.analysis-form.operation'),\n        dialogMode: DialogConstants.Mode.FLOAT,\n        options: this._columnOptions.filterByType('number')\n      }\n    }));\n  },\n\n  _onChangeAggregate: function () {\n    var aggregate = this.get('aggregate');\n    this.set({\n      aggregate_column: aggregate.attribute || 'cartodb_id',\n      aggregate_function: aggregate.operator\n    });\n  },\n\n  _onChangeTarget: function () {\n    this.set('aggregate', {\n      operator: 'count',\n      attribute: ''\n    });\n    this._analysisSourceOptionsModel.createSourceNodeUnlessExisting(this.get('target'));\n    this._fetchColumns();\n  },\n\n  _fetchColumns: function () {\n    var target = this.get('target');\n    var nodeDefModel = this._layerDefinitionModel.findAnalysisDefinitionNodeModel(target);\n\n    if (nodeDefModel) {\n      this._columnOptions.setNode(nodeDefModel);\n    } else if (target) {\n      this._columnOptions.setDataset(target);\n    }\n  },\n\n  _isSourceDisabled: function (sourceAttrName) {\n    return this._isPrimarySource(sourceAttrName) || this._isFetchingOptions();\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<form>\\n  <div class=\"Editor-HeaderInfo\">\\n    <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">1</div>\\n    <div class=\"Editor-HeaderInfo-inner CDB-Text\" data-fields=\"source,target\">\\n      <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n        <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.layers.analysis-form.select-layer') ) +\n'</h2>\\n      </div>\\n      <div class=\"Editor-HeaderInfo-subtitle u-bSpace--m\">\\n        <p class=\"CDB-Text CDB-FontSize-small u-upperCase u-altTextColor\">' +\n__e( _t('editor.layers.analysis-form.intersect-step-one-desc') ) +\n'</p>\\n      </div>\\n    </div>\\n  </div>\\n  <div class=\"Editor-HeaderInfo ' +\n__e( hasTarget ? '' : 'is-disabled' ) +\n'\">\\n    <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">2</div>\\n    <div class=\"Editor-HeaderInfo-inner CDB-Text\" data-fields=\"' +\n__e( dataFields ) +\n'\">\\n      <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n        <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.layers.analysis-form.measure-by') ) +\n'</h2>\\n      </div>\\n      <p class=\"CDB-Text u-upperCase CDB-FontSize-small u-altTextColor u-bSpace--xl\">' +\n__e( _t('editor.layers.analysis-form.filter-aggregate') ) +\n'</p>\\n    </div>\\n  </div>\\n</form>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar DistanceConverter = require('builder/value-objects/distance-converter');\n\nvar DEFAULT_DISTANCE = 'meters';\n\nmodule.exports = {\n  type: 'buffer',\n  label: _t('editor.layers.analysis-form.distance'),\n  parametersDataFields: 'type,distance,radius,isolines,dissolved',\n\n  parse: function (nodeAttrs) {\n    var formAttrs = _.extend({}, nodeAttrs);\n\n    try {\n      formAttrs.radius = DistanceConverter.toDistance(nodeAttrs.radius, nodeAttrs.distance);\n      formAttrs.distance = nodeAttrs.distance || DEFAULT_DISTANCE;\n      formAttrs.dissolved = nodeAttrs.dissolved === undefined ? false : nodeAttrs.dissolved;\n      formAttrs.isolines = nodeAttrs.isolines || 1;\n    } catch (err) {\n      formAttrs.radius = 100;\n      formAttrs.isolines = 1;\n      formAttrs.distance = DEFAULT_DISTANCE;\n      formAttrs.dissolved = false;\n    }\n\n    return formAttrs;\n  },\n\n  formatAttrs: function (formAttrs) {\n    return _.defaults(\n      {\n        radius: DistanceConverter.toMeters(formAttrs.radius, formAttrs.distance)\n      },\n      formAttrs\n    );\n  }\n};\n","var _ = require('underscore');\nvar BaseAnalysisFormModel = require('./base-analysis-form-model');\nvar template = require('./area-of-influence-form.tpl');\nvar DistanceConverter = require('builder/value-objects/distance-converter');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\n\nvar AREA_OF_INFLUENCE_TYPES = require('./area-of-influence-types');\nvar TYPE_TO_META_MAP = {};\nAREA_OF_INFLUENCE_TYPES.map(function (d) {\n  TYPE_TO_META_MAP[d.type] = d;\n});\n\nmodule.exports = BaseAnalysisFormModel.extend({\n\n  parse: function (attrs) {\n    return _.defaults(\n      _.pick(attrs, 'id', 'source'), // maintain default attrs\n      this._typeDef(attrs.type).parse(attrs)\n    );\n  },\n\n  initialize: function () {\n    BaseAnalysisFormModel.prototype.initialize.apply(this, arguments);\n\n    this._setSchema();\n\n    this.on('change:type', this._onTypeChanged, this);\n    this.on('change:distance', this._onDistanceChanged, this);\n    this.on('change:kind', this._onKindChanged, this);\n  },\n\n  getTemplate: function () {\n    return template;\n  },\n\n  getTemplateData: function () {\n    return {parametersDataFields: this._typeDef().parametersDataFields};\n  },\n\n  /**\n   * @override {BaseAnalysisFormModel.updateNodeDefinition}\n   */\n  updateNodeDefinition: function (nodeDefModel) {\n    var attrs = this._formatAttrs(this.attributes);\n    nodeDefModel.clear({silent: true});\n    nodeDefModel.set(attrs);\n  },\n\n  _formatAttrs: function (formAttrs) {\n    var customFormattedFormAttrs = this._typeDef().formatAttrs(formAttrs);\n    return BaseAnalysisFormModel.prototype._formatAttrs.call(this, customFormattedFormAttrs);\n  },\n\n  /**\n   * @override {BaseAnalysisFormModel._setSchema}\n   */\n  _setSchema: function () {\n    BaseAnalysisFormModel.prototype._setSchema.call(this,\n      this._filterSchemaFieldsByType({\n        source: this._primarySourceSchemaItem(),\n        type: {\n          type: 'Radio',\n          text: _t('editor.layers.analysis-form.type'),\n          options: AREA_OF_INFLUENCE_TYPES.map(function (d) {\n            var isAnalysisTypeEnabled = this._analyses.isAnalysisValidByType(d.type, { configModel: this._configModel });\n            var canChangeToType = this._canChangeToType(d.type);\n            var isDisabled = !isAnalysisTypeEnabled || !canChangeToType;\n            var helpMessage = !isAnalysisTypeEnabled ? _t('editor.layers.analysis-form.disabled-by-config') : _t('editor.layers.analysis-form.valid-type');\n\n            return {\n              val: d.type,\n              label: d.label,\n              disabled: isDisabled,\n              help: isDisabled ? helpMessage : ''\n            };\n          }, this)\n        },\n        distance: {\n          type: 'Radio',\n          title: _t('editor.layers.analysis-form.units'),\n          options: _.map(DistanceConverter.OPTIONS, function (d) {\n            return {\n              val: d.distance,\n              label: this._distanceLabel(d.distance)\n            };\n          }, this)\n        },\n        radius: {\n          type: 'Number',\n          label: _t('editor.layers.analysis-form.radius'),\n          validators: ['required', this._radiusInterval()]\n        },\n        kind: {\n          type: 'Select',\n          title: _t('editor.layers.analysis-form.by'),\n          dialogMode: DialogConstants.Mode.FLOAT,\n          options: [\n            {\n              val: 'walk',\n              label: _t('editor.layers.analysis-form.by-walk')\n            }, {\n              val: 'car',\n              label: _t('editor.layers.analysis-form.by-car')\n            }\n          ]\n        },\n        isolines: {\n          type: 'Number',\n          title: _t('editor.layers.analysis-form.tracts'),\n          help: _t('editor.layers.analysis-form.tracts-help'),\n          validators: ['required', {\n            type: 'interval',\n            min: 1,\n            max: 4\n          }]\n        },\n        time: {\n          type: 'Number',\n          title: _t('editor.layers.analysis-form.time-seconds'),\n          validators: ['required', this._timeInterval()]\n        },\n        dissolved: {\n          type: 'Radio',\n          title: _t('editor.layers.analysis-form.boundaries'),\n          options: [\n            {\n              val: 'false',\n              label: _t('editor.layers.analysis-form.intact'),\n              help: _t('editor.layers.analysis-form.intact-help')\n            }, {\n              val: 'true',\n              label: _t('editor.layers.analysis-form.dissolved'),\n              help: _t('editor.layers.analysis-form.dissolved-help')\n            }\n          ]\n        }\n      })\n    );\n  },\n\n  _canChangeToType: function (type) {\n    if (type === this.get('type')) return true;\n\n    var source = this._layerDefinitionModel.findAnalysisDefinitionNodeModel(this.get('source'));\n    return source.isValidAsInputForType(type);\n  },\n\n  _filterSchemaFieldsByType: function (schema) {\n    // Always include the source field in addition to the type-specific fields\n    var fields = ['source'].concat(this._typeDef().parametersDataFields.split(','));\n    return _.pick(schema, fields);\n  },\n\n  _onTypeChanged: function () {\n    this._replaceAttrs();\n    this._setSchema();\n  },\n\n  _onDistanceChanged: function () {\n    this._fitParamToRange('radius', this._radiusInterval());\n    this._setSchema();\n  },\n\n  _onKindChanged: function () {\n    this._fitParamToRange('time', this._timeInterval());\n    this._setSchema();\n  },\n\n  _fitParamToRange: function (paramName, range) {\n    var val = this.get(paramName);\n    if (val < range.min) {\n      val = range.min;\n    } else if (val > range.max) {\n      val = range.max;\n    }\n    this.set(paramName, val, {silent: true});\n  },\n\n  _replaceAttrs: function () {\n    var attrs = this.parse(this.attributes);\n    this.clear({silent: true});\n    this.set('type', attrs.type, {silent: true}); // re-set type to avoid change:type event to trigger again\n    this.set(attrs);\n  },\n\n  _typeDef: function (type) {\n    type = type || this.get('type');\n    return TYPE_TO_META_MAP[type];\n  },\n\n  _radiusInterval: function () {\n    switch (this.get('distance')) {\n      case 'meters':\n        return {\n          type: 'interval',\n          min: 10,\n          max: 10000\n        };\n      case 'kilometers':\n      case 'miles':\n        return {\n          type: 'interval',\n          min: 0.5,\n          max: 100,\n          step: 0.5\n        };\n      default:\n        return {\n          type: 'interval',\n          min: 1,\n          max: 100\n        };\n    }\n  },\n\n  _timeInterval: function () {\n    switch (this.get('kind')) {\n      case 'car':\n        return {\n          type: 'interval',\n          min: 60,\n          max: 14400,\n          step: 10\n        };\n      case 'walk':\n      default:\n        return {\n          type: 'interval',\n          min: 60,\n          max: 3600\n        };\n    }\n  },\n\n  _distanceLabel: function (distance) {\n    switch (distance) {\n      case 'meters':\n        return _t('editor.layers.analysis-form.meters');\n      case 'kilometers':\n        return _t('editor.layers.analysis-form.kilometers');\n      case 'miles':\n        return _t('editor.layers.analysis-form.miles');\n      default:\n        return '';\n    }\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<form>\\n  <div class=\"Editor-HeaderInfo\">\\n    <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">1</div>\\n    <div class=\"Editor-HeaderInfo-inner CDB-Text\">\\n      <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n        <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.layers.analysis-form.parameters') ) +\n'</h2>\\n      </div>\\n      <div class=\"Editor-HeaderInfo-subtitle u-bSpace--m\">\\n        <p class=\"CDB-Text CDB-FontSize-small u-upperCase u-altTextColor\">' +\n__e( _t('editor.layers.analysis-form.parameters-description') ) +\n'</p>\\n      </div>\\n      <div class=\"u-tSpace-xl CDB-Text CDB-Fieldset\">\\n        <p class=\"CDB-Legend u-upperCase u-iBlock CDB-Text is-semibold CDB-Size-small u-rSpace--m\">' +\n__e( _t('editor.layers.analysis-form.base-layer') ) +\n'</p>\\n        <div class=\"Editor-formInput u-ellipsis\" data-editors=\"source\"></div>\\n      </div>\\n      <div data-fields=\"' +\n__e( parametersDataFields ) +\n'\"></div>\\n    </div>\\n  </div>\\n</form>\\n';\n\n}\nreturn __p\n}","module.exports = {\n  type: 'trade-area',\n  label: _t('editor.layers.analysis-form.time'),\n  parametersDataFields: 'type,kind,time,isolines,dissolved',\n\n  parse: function (nodeAttrs) {\n    return {\n      type: 'trade-area',\n      kind: nodeAttrs.kind || 'walk',\n      isolines: nodeAttrs.isolines || 1,\n      time: nodeAttrs.time || 100,\n      dissolved: nodeAttrs.dissolved === 'true' || nodeAttrs.dissolved === true\n    };\n  },\n\n  formatAttrs: function (formAttrs) {\n    return formAttrs;\n  }\n};\n","module.exports = [\n  require('./area-of-influence-buffer'),\n  require('./area-of-influence-trade-area')\n];\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += 'WITH dep_fns AS (\\n    SELECT oid, proname, proargnames, proargtypes FROM pg_catalog.pg_proc WHERE proname ~* \\'^dep_ext_\\'\\n),\\nfns_argstypes AS (SELECT oid, array_agg((\\n        SELECT\\n        CASE\\n            WHEN typcategory = \\'A\\' THEN \\'array\\'\\n            WHEN typcategory = \\'N\\' THEN \\'number\\'\\n            WHEN typcategory = \\'S\\' THEN \\'string\\'\\n            WHEN typcategory = \\'B\\' THEN \\'boolean\\'\\n        ELSE \\'unknown\\' END\\n        FROM pg_catalog.pg_type\\n        WHERE argtype = pg_catalog.pg_type.oid\\n    )) as argtypes\\n    FROM (\\n        SELECT pg_proc.oid, unnest(pg_proc.proargtypes) as argtype\\n        FROM pg_catalog.pg_proc, dep_fns\\n        WHERE pg_proc.oid = dep_fns.oid\\n    ) _q\\n    group by oid\\n),\\nfns_meta AS (\\n    SELECT\\n        dep_fns.proname,\\n        dep_fns.proargnames,\\n        fns_argstypes.argtypes,\\n        CASE WHEN fns_argstypes.argtypes[6] = \\'array\\' THEN\\n            -- [whether it has a secondary node or not, where the extra parameters start, where to stop]\\n            ARRAY[1,7,array_length(argtypes,1)]\\n        ELSE\\n            ARRAY[0,5,array_length(argtypes,1)]\\n        END as p\\n    FROM dep_fns, fns_argstypes\\n    WHERE dep_fns.oid = fns_argstypes.oid\\n)\\nSELECT\\n    proname as fn_name,\\n    proargnames[p[2]:p[3]] as params_names,\\n    argtypes[p[2]:p[3]] as params_types,\\n    p[1]::boolean as has_secondary_node\\nFROM fns_meta\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar camshaftReference = require('builder/data/camshaft-reference');\n\n/**\n * Base model for all analysis form models.\n */\nmodule.exports = Backbone.Model.extend({\n\n  initialize: function (attrs, opts) {\n    if (!opts.analyses) throw new Error('analyses is required');\n    if (!opts.configModel) throw new Error('configModel is required');\n    if (!opts.layerDefinitionModel) throw new Error('layerDefinitionModel is required');\n    if (!opts.analysisSourceOptionsModel) throw new Error('analysisSourceOptionsModel is required');\n\n    this._analyses = opts.analyses;\n    this._configModel = opts.configModel;\n    this._layerDefinitionModel = opts.layerDefinitionModel;\n    this._analysisSourceOptionsModel = opts.analysisSourceOptionsModel;\n\n    this.schema = {};\n  },\n\n  isNew: function () {\n    return true; // so one can call .destroy() on it to clean up bindings etc. and have it removed from its collection\n  },\n\n  getTemplate: function () {\n    return undefined; // override to return custom template\n  },\n\n  getTemplateData: function () {\n    return {}; // override to return custom template data\n  },\n\n  _getSourceOption: function () {\n    var sourceNodeDefModel = this._getSourceNodeDefModel();\n    var layerName = sourceNodeDefModel.isSourceType()\n      ? this._layerDefinitionModel.getTableName()\n      : this._layerDefinitionModel.getName();\n\n    return sourceNodeDefModel && [{\n      val: sourceNodeDefModel.id,\n      type: 'node',\n      nodeTitle: this._analyses.short_title(sourceNodeDefModel),\n      layerName: layerName,\n      color: sourceNodeDefModel.getColor(),\n      isSourceType: sourceNodeDefModel.isSourceType()\n    }];\n  },\n\n  _getSourceNodeDefModel: function () {\n    var sourceNames = ['source', 'primary_source'];\n    var sourceNodeDefModel = _.reduce(sourceNames, function (memo, sourceName) {\n      if (!memo) {\n        memo = this._layerDefinitionModel.findAnalysisDefinitionNodeModel(this.get(sourceName));\n      }\n      return memo;\n    }, null, this);\n\n    return sourceNodeDefModel;\n  },\n\n  _primarySourceSchemaItem: function (customLabel) {\n    return {\n      type: 'NodeDataset',\n      title: customLabel || _t('editor.layers.analysis-form.base-layer'),\n      dialogMode: DialogConstants.Mode.FLOAT,\n      options: this._getSourceOption(),\n      editorAttrs: {disabled: true}\n    };\n  },\n\n  setFormValidationErrors: function (errors) {\n    this._formValidationErrors = errors;\n    this.trigger('change', this);\n  },\n\n  validate: function () {\n    var errors = _.extend(\n      {},\n      camshaftReference.validate(this.attributes),\n      this._formValidationErrors\n    );\n\n    if (!_.isEmpty(errors)) {\n      return errors;\n    }\n  },\n\n  /**\n   * @override {Backbone.Model.prototype.set} Maintain persisted attr if model is clear'ed\n   */\n  set: function (key, val, options) {\n    if (key == null) return this;\n\n    var attrs;\n    if (typeof key === 'object') {\n      attrs = key;\n      options = val;\n    } else {\n      (attrs = {})[key] = val;\n    }\n\n    options || (options = {});\n\n    var persisted = attrs.persisted || this.get('persisted');\n\n    Backbone.Model.prototype.set.call(this, attrs, options);\n\n    if (persisted !== undefined) {\n      Backbone.Model.prototype.set.call(this, 'persisted', persisted, {silent: true});\n    }\n\n    return this;\n  },\n\n  updateNodeDefinition: function (nodeDefModel) {\n    var nodeAttrs = this._formatAttrs(this.attributes);\n    nodeDefModel.set(nodeAttrs);\n  },\n\n  /**\n   * @deprecated use updateNodeDefinition instead\n   */\n  _updateNodeDefinition: function () {\n    this.updateNodeDefinition.apply(this, arguments);\n  },\n\n  createNodeDefinition: function (userActions) {\n    var nodeAttrs = this._formatAttrs(this.attributes);\n    this.set('persisted', true);\n    return userActions.createAnalysisNode(nodeAttrs, this._layerDefinitionModel);\n  },\n\n  _formatAttrs: function (formAttrs) {\n    return _.omit(camshaftReference.parse(formAttrs), 'persisted');\n  },\n\n  _setSchema: function (schema) {\n    this.schema = schema;\n    this.trigger('changeSchema', this);\n  },\n\n  _isPrimarySource: function (sourceAttrName) {\n    return sourceAttrName === this.get('primary_source_name');\n  },\n\n  _isFetchingOptions: function () {\n    return this._analysisSourceOptionsModel.get('fetching');\n  },\n\n  _getSourceOptionsForSource: function (options) {\n    options = options || {};\n    var sourceAttrName = null;\n    var requiredSimpleGeometryType = '*';\n    var ignorePrimarySource = false;\n    var includeSourceNode = options.includeSourceNode || false;\n\n    // options validation and defaults\n    if (options.sourceAttrName === void 0) {\n      throw new Error('sourceAttrName is required.');\n    } else {\n      sourceAttrName = options.sourceAttrName;\n    }\n\n    if (options.requiredSimpleGeometryType !== void 0) {\n      requiredSimpleGeometryType = options.requiredSimpleGeometryType;\n    }\n\n    if (options.ignorePrimarySource) {\n      ignorePrimarySource = true;\n    }\n\n    var currentSource = this.get(sourceAttrName);\n\n    if (!ignorePrimarySource && this._isPrimarySource(sourceAttrName)) {\n      return [currentSource];\n    }\n    if (this._isFetchingOptions()) {\n      return [{\n        val: currentSource,\n        label: _t('editor.layers.analysis-form.loading'),\n        isLoading: true\n      }];\n    } else {\n      // fetched\n      var sourceId = this._layerDefinitionModel.get('source');\n      return this._analysisSourceOptionsModel\n        .getSelectOptions(requiredSimpleGeometryType)\n        .filter(function (d) {\n          return (\n            (includeSourceNode ? true : d.val !== sourceId) &&\n            (options.onlyNodes ? d.type === 'node' : true)\n          );\n        });\n    }\n  }\n});\n","var _ = require('underscore');\nvar BaseAnalysisFormModel = require('./base-analysis-form-model');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar template = require('./centroid-form.tpl');\nvar ColumnOptions = require('builder/editor/layers/layer-content-views/analyses/column-options');\n\nvar FORMAT_FIELD_NAMES = 'category_column,aggregation,aggregation_column,weight_column';\nvar PARAMETERS_DATA_FIELDS = 'source,category,weight';\n\n/**\n * Form model for a centroid and weighted-centroid analysis\n * It has a rather complicated schema, that depends on several data points and state.\n * https://github.com/CartoDB/camshaft/blob/master/reference/versions/0.38.0/reference.json\n */\n\nmodule.exports = BaseAnalysisFormModel.extend({\n  parse: function (attrs) {\n    var operator = {\n      operator: attrs.aggregation || 'count',\n      attribute: attrs.aggregation === 'count' ? '' : attrs.aggregation_column\n    };\n\n    var aggregate_value = (!!attrs.aggregation_column || !!attrs.aggregation) ? operator : '';\n\n    return _.extend(attrs, {\n      category: attrs.category_column || '',\n      weight: attrs.weight_column || '',\n      aggregate: aggregate_value\n    });\n  },\n\n  initialize: function () {\n    BaseAnalysisFormModel.prototype.initialize.apply(this, arguments);\n\n    this._columnOptions = new ColumnOptions({}, {\n      configModel: this._configModel,\n      nodeDefModel: this._layerDefinitionModel.findAnalysisDefinitionNodeModel(this.get('source'))\n    });\n\n    this.listenTo(this._columnOptions, 'columnsFetched', this._setSchema);\n\n    this.on('change:category', this._onChangeCategory, this);\n    this.on('change:aggregate', this._updateAggregation, this);\n    this.on('change:weight', this._onChangeWeight, this);\n    this.on('change:type', this._setSchema, this);\n\n    this._updateAggregation();\n\n    this._setSchema();\n  },\n\n  updateNodeDefinition: function (nodeDefModel) {\n    var attrs = this._formatAttrs(this.attributes);\n    nodeDefModel.clear({silent: true});\n    nodeDefModel.set(attrs);\n  },\n\n  _getFormatFieldNames: function () {\n    var fields = FORMAT_FIELD_NAMES.split(',');\n\n    if (this.get('aggregate') === '') {\n      fields = _.difference(fields, ['aggregation', 'aggregation_column']);\n    }\n\n    return fields.join(',');\n  },\n\n  _formatAttrs: function (formAttrs) {\n    var customFormattedFormAttrs = _.pick(formAttrs, ['id', 'source', 'type'].concat(this._getFormatFieldNames().split(',')));\n\n    return BaseAnalysisFormModel.prototype._formatAttrs.call(this, customFormattedFormAttrs);\n  },\n\n  getTemplate: function () {\n    return template;\n  },\n\n  getTemplateData: function () {\n    return {\n      parametersDataFields: PARAMETERS_DATA_FIELDS\n    };\n  },\n\n  /*\n  /**\n   * @override {BaseAnalysisFormModel._setSchema}\n   */\n  _setSchema: function () {\n    var operator = {\n      operator: this.get('aggregation'),\n      attribute: this.get('aggregation_column')\n    };\n\n    BaseAnalysisFormModel.prototype._setSchema.call(this, {\n      source: this._primarySourceSchemaItem(),\n\n      category: {\n        type: 'EnablerEditor',\n        title: '',\n        label: _t('editor.layers.analysis-form.categorize-by'),\n        help: _t('editor.layers.analysis-form.categorize-by-help'),\n        editor: {\n          type: 'Select',\n          options: this._columnOptions.all(),\n          dialogMode: DialogConstants.Mode.FLOAT,\n          label: _t('editor.layers.analysis-form.column')\n        }\n      },\n\n      weight: {\n        type: 'EnablerEditor',\n        title: '',\n        label: _t('editor.layers.analysis-form.weighted-by'),\n        help: _t('editor.layers.analysis-form.weighted-by-help'),\n        validators: ['required'],\n        editor: {\n          type: 'Select',\n          options: this._columnOptions.filterByType('number'),\n          dialogMode: DialogConstants.Mode.FLOAT,\n          label: _t('editor.layers.analysis-form.column')\n        }\n      },\n\n      aggregate: {\n        type: 'EnablerEditor',\n        title: '',\n        label: _t('editor.layers.analysis-form.operation'),\n        help: _t('editor.layers.analysis-form.aggregate-by-help'),\n        defaultValue: operator,\n        editor: {\n          type: 'Operators',\n          options: this._columnOptions.filterByType('number'),\n          dialogMode: DialogConstants.Mode.FLOAT,\n          label: _t('editor.layers.analysis-form.column')\n        }\n      }\n    });\n  },\n\n  _onChangeWeight: function () {\n    if (this.get('weight') !== '') {\n      this.set('type', 'weighted-centroid');\n      this.set('weight_column', this.get('weight'));\n    } else {\n      this.set('type', 'centroid');\n      this.unset('weight_column');\n    }\n    this._setSchema();\n  },\n\n  _onChangeCategory: function () {\n    // category_column is optional but if we send it empty,\n    // it has influence in the final result\n    if (this.get('category') === '') {\n      this.unset('category_column');\n    } else {\n      this.set('category_column', this.get('category'));\n    }\n    this._setSchema();\n  },\n\n  _updateAggregation: function () {\n    var aggregate = this.get('aggregate');\n    if (aggregate === '') {\n      this.set({\n        aggregation: 'count',\n        aggregation_column: ''\n      });\n    } else {\n      this.set({\n        aggregation_column: aggregate.attribute,\n        aggregation: aggregate.operator\n      });\n    }\n\n    this._setSchema();\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<form>\\n  <div class=\"Editor-HeaderInfo\">\\n    <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">1</div>\\n    <div class=\"Editor-HeaderInfo-inner CDB-Text\" data-fields=\"' +\n((__t = ( parametersDataFields )) == null ? '' : __t) +\n'\">\\n      <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n        <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.layers.analysis-form.parameters') ) +\n'</h2>\\n      </div>\\n      <div class=\"Editor-HeaderInfo-subtitle u-bSpace--m\">\\n        <p class=\"CDB-Text CDB-FontSize-small u-upperCase u-altTextColor\">' +\n__e( _t('editor.layers.analysis-form.centroid-desc') ) +\n'</p>\\n      </div>\\n    </div>\\n  </div>\\n  <div class=\"Editor-HeaderInfo\">\\n    <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">2</div>\\n    <div class=\"Editor-HeaderInfo-inner CDB-Text\" data-fields=\"aggregate\">\\n      <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n        <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.layers.analysis-form.measure-by') ) +\n'</h2>\\n      </div>\\n      <p class=\"CDB-Text u-upperCase CDB-FontSize-small u-altTextColor u-bSpace--xl\">' +\n__e( _t('editor.layers.analysis-form.filter-aggregate') ) +\n'</p>\\n    </div>\\n  </div>\\n</form>\\n';\n\n}\nreturn __p\n}","var BaseAnalysisFormModel = require('./base-analysis-form-model');\nvar ColumnOptions = require('builder/editor/layers/layer-content-views/analyses/column-options');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar template = require('./closest-form.tpl');\n\nvar MAX_RESPONSES = 32;\n\nmodule.exports = BaseAnalysisFormModel.extend({\n  parse: function (attrs) {\n    if (!attrs.responses) {\n      attrs.responses = 1;\n    }\n\n    return attrs;\n  },\n\n  initialize: function () {\n    BaseAnalysisFormModel.prototype.initialize.apply(this, arguments);\n\n    this._resetColumnOptions();\n    this._initBinds();\n    this._setSchema();\n    this._fetchColumns();\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._analysisSourceOptionsModel, 'change:fetching', this._onSourceOptionsFetched);\n    this.on('change:target', this._onChangeTarget, this);\n  },\n\n  getTemplate: function () {\n    return template;\n  },\n\n  getTemplateData: function () {\n    return {\n      hasTarget: this.get('target') !== undefined\n    };\n  },\n\n  _resetColumnOptions: function () {\n    this._columnOptions = new ColumnOptions({}, {\n      configModel: this._configModel\n    });\n    this.listenTo(this._columnOptions, 'columnsFetched', this._onColumnsFetched);\n  },\n\n  _onSourceOptionsFetched: function () {\n    this._setSchema();\n  },\n\n  _setSchema: function () {\n    BaseAnalysisFormModel.prototype._setSchema.call(this, {\n      source: this._primarySourceSchemaItem(_t('editor.layers.analysis-form.base-layer')),\n      target: {\n        type: 'NodeDataset',\n        title: _t('editor.layers.analysis-form.target'),\n        options: this._getSourceOptionsForSource({\n          sourceAttrName: 'target',\n          includeSourceNode: true\n        }),\n        dialogMode: DialogConstants.Mode.FLOAT,\n        validators: ['required'],\n        editorAttrs: {\n          disabled: this._isSourceDisabled('target')\n        }\n      },\n      category: {\n        type: 'EnablerEditor',\n        title: '',\n        label: _t('editor.layers.analysis-form.group-by'),\n        help: _t('editor.layers.analysis-form.find-nearest.categorized-help'),\n        editor: {\n          type: 'Select',\n          options: this._columnOptions.filterByType('string'),\n          dialogMode: DialogConstants.Mode.FLOAT,\n          editorAttrs: {\n            showLabel: false\n          }\n        }\n      },\n      responses: {\n        type: 'Number',\n        title: _t('editor.layers.analysis-form.find-nearest.max-results'),\n        value: 1,\n        validators: ['required', {\n          type: 'interval',\n          min: 1,\n          max: MAX_RESPONSES\n        }]\n      }\n    });\n  },\n\n  _isSourceDisabled: function (sourceAttrName) {\n    return this._isPrimarySource(sourceAttrName) || this._isFetchingOptions();\n  },\n\n  _onChangeTarget: function () {\n    this.set('category', '');\n    this._setSchema();\n\n    this._analysisSourceOptionsModel.createSourceNodeUnlessExisting(this.get('target'));\n    this._fetchColumns();\n  },\n\n  _fetchColumns: function () {\n    var target = this.get('target');\n\n    var nodeDefModel = this._layerDefinitionModel.findAnalysisDefinitionNodeModel(target);\n\n    if (nodeDefModel) {\n      this._columnOptions.setNode(nodeDefModel);\n    } else if (target) {\n      this._columnOptions.setDataset(target);\n    }\n  },\n\n  _onColumnsFetched: function () {\n    this._setSchema();\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<form>\\n  <div class=\"Editor-HeaderInfo\">\\n    <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">1</div>\\n    <div class=\"Editor-HeaderInfo-inner CDB-Text\" data-fields=\"source,target\">\\n      <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n        <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.layers.analysis-form.select-your-points') ) +\n'</h2>\\n      </div>\\n      <div class=\"Editor-HeaderInfo-subtitle u-bSpace--m\">\\n        <p class=\"CDB-Text CDB-FontSize-small u-upperCase u-altTextColor\">' +\n__e( _t('editor.layers.analysis-form.target-layer-dataset') ) +\n'</p>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div class=\"Editor-HeaderInfo ' +\n__e( hasTarget ? '' : 'is-disabled' ) +\n'\">\\n    <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">2</div>\\n    <div class=\"Editor-HeaderInfo-inner CDB-Text\" data-fields=\"responses,category\">\\n      <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n        <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.layers.analysis-form.parameters') ) +\n'</h2>\\n      </div>\\n      <p class=\"CDB-Text u-upperCase CDB-FontSize-small u-altTextColor u-bSpace--m\">' +\n__e( _t('editor.layers.analysis-form.parameters-description') ) +\n'</p>\\n    </div>\\n  </div>\\n</form>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar BaseAnalysisFormModel = require('./base-analysis-form-model');\nvar template = require('./connect-with-lines.tpl');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar ColumnOptions = require('builder/editor/layers/layer-content-views/analyses/column-options');\n\nvar CONNECT_WITH_LINES = require('./connect-with-lines-types');\n\nvar TYPE_TO_META_MAP = {};\nCONNECT_WITH_LINES.map(function (d) {\n  TYPE_TO_META_MAP[d.type] = d;\n});\n\n/**\n * Form model for a convex hull analysis\n */\nmodule.exports = BaseAnalysisFormModel.extend({\n  defaults: {\n    closest: true,\n    order_type: 'asc'\n  },\n\n  parse: function (attrs) {\n    return _.defaults(\n      _.pick(attrs, 'id', 'source'), // maintain default attrs\n      this._typeDef(attrs.type).parse(attrs)\n    );\n  },\n\n  validate: function () {\n    var errors = BaseAnalysisFormModel.prototype.validate.apply(this, arguments);\n\n    if (errors && errors.target_column) {\n      if (!this._hasSecondGeometry()) {\n        errors.target_column = _t('editor.layers.analysis-form.second-geom-required');\n      }\n    }\n\n    return errors;\n  },\n\n  initialize: function () {\n    BaseAnalysisFormModel.prototype.initialize.apply(this, arguments);\n\n    this._columnOptions = new ColumnOptions({}, {\n      configModel: this._configModel,\n      nodeDefModel: this._layerDefinitionModel.findAnalysisDefinitionNodeModel(this.get('source'))\n    });\n\n    this._targetColumnOptions = new ColumnOptions({}, {\n      configModel: this._configModel,\n      nodeDefModel: this._layerDefinitionModel.findAnalysisDefinitionNodeModel(this.get('source'))\n    });\n\n    this.listenTo(this._columnOptions, 'columnsFetched', this._setSchema);\n    this.listenTo(this._targetColumnOptions, 'columnsFetched', this._setSchema);\n    this.listenTo(this._analysisSourceOptionsModel, 'change:fetching', this._setSchema);\n\n    this.on('change:target', this._onChangeTarget, this);\n    this.on('change:type', this._onTypeChanged, this);\n    this.on('change:group', this._setSchema, this);\n\n    this._setSchema();\n    this._fetchColumns();\n  },\n\n  _onTypeChanged: function () {\n    this._replaceAttrs();\n    this._setSchema();\n  },\n\n  _replaceAttrs: function () {\n    var attrs = this.parse(this.attributes);\n    this.clear({ silent: true });\n    this.set('type', attrs.type, { silent: true }); // re-set type to avoid change:type event to trigger again\n    this.set(_.extend(attrs, this.defaults));\n  },\n\n  updateNodeDefinition: function (nodeDefModel) {\n    var attrs = this._formatAttrs(this.attributes);\n    nodeDefModel.clear({ silent: true });\n    nodeDefModel.set(attrs);\n  },\n\n  _formatAttrs: function (formAttrs) {\n    var customFormattedFormAttrs = this._typeDef().formatAttrs(formAttrs, this._columnOptions);\n    return BaseAnalysisFormModel.prototype._formatAttrs.call(this, customFormattedFormAttrs);\n  },\n\n  getTemplate: function () {\n    return template;\n  },\n\n  getTemplateData: function () {\n    return {\n      type: this.get('type'),\n      group: this.get('group'),\n      parametersDataFields: this._typeDef().parametersDataFields\n    };\n  },\n\n  _filterSchemaFieldsByType: function (schema) {\n    // Always include the source field in addition to the type-specific fields\n    var fields = ['source', 'type'].concat(this._typeDef().parametersDataSchema.split(','));\n    return _.pick(schema, fields);\n  },\n\n  /**\n   * @override {BaseAnalysisFormModel._setSchema}\n   */\n  _setSchema: function () {\n    BaseAnalysisFormModel.prototype._setSchema.call(this, this._filterSchemaFieldsByType({\n      source: this._primarySourceSchemaItem(),\n      type: {\n        type: 'Select',\n        title: _t('editor.layers.analysis-form.type'),\n        dialogMode: DialogConstants.Mode.FLOAT,\n        options: CONNECT_WITH_LINES.map(function (d) {\n          return {\n            val: d.type,\n            label: d.label\n          };\n        }, this)\n      },\n      source_column: {\n        type: 'Select',\n        title: _t('editor.layers.analysis-form.base-layer'),\n        placeholder: _t('editor.layers.analysis-form.select-column'),\n        dialogMode: DialogConstants.Mode.FLOAT,\n        options: this._getColumnOptions('source_column', ['string', 'number'])\n      },\n      target: {\n        type: 'NodeDataset',\n        title: _t('editor.layers.analysis-form.target'),\n        options: this._getSourceOptionsForSource('target', 'point'),\n        dialogMode: DialogConstants.Mode.FLOAT,\n        editorAttrs: {\n          disabled: this._isSourceDisabled('target')\n        },\n        validators: ['required']\n      },\n      target_column: {\n        type: 'Select',\n        title: _t('editor.layers.analysis-form.target-column'),\n        dialogMode: DialogConstants.Mode.FLOAT,\n        options: this._getColumnOptionsForTarget()\n      },\n      target_source_column: {\n        type: 'Select',\n        title: _t('editor.layers.analysis-form.target-column'),\n        options: this._getTargetSourceColumnOptions('target_source_column'),\n        placeholder: _t('editor.layers.analysis-form.select-column'),\n        dialogMode: DialogConstants.Mode.FLOAT,\n        editorAttrs: {\n          disabled: this._isTargetColumnDisabled()\n        }\n      },\n      destination_longitude: {\n        type: 'Text',\n        title: _t('editor.layers.analysis-form.longitude'),\n        validators: ['required'],\n        editorAttrs: {\n          placeholder: _t('editor.layers.analysis-form.enter-longitude')\n        }\n      },\n      destination_latitude: {\n        type: 'Text',\n        title: _t('editor.layers.analysis-form.latitude'),\n        validators: ['required'],\n        editorAttrs: {\n          placeholder: _t('editor.layers.analysis-form.enter-latitude')\n        }\n      },\n      closest: {\n        type: 'Radio',\n        title: _t('editor.layers.analysis-form.closeness'),\n        options: [\n          { label: _t('editor.layers.analysis-form.to-closest'), val: 'true' },\n          { label: _t('editor.layers.analysis-form.all-to-all'), val: 'false' }\n        ]\n      },\n      group: {\n        type: 'Enabler',\n        label: _t('editor.layers.analysis-form.group-by'),\n        title: '',\n        editorAttrs: {\n          reversed: true\n        }\n      },\n      category_column: {\n        type: 'EnablerEditor',\n        title: '',\n        label: _t('editor.layers.analysis-form.group-by'),\n        editor: {\n          type: 'Select',\n          options: this._columnOptions.all(),\n          dialogMode: DialogConstants.Mode.FLOAT,\n          editorAttrs: {\n            showLabel: false\n          }\n        }\n      },\n      order_column: {\n        type: 'Select',\n        title: _t('editor.layers.analysis-form.order-by'),\n        options: this._columnOptions.filterByType(['date', 'number']),\n        dialogMode: DialogConstants.Mode.FLOAT,\n        validators: ['required']\n      },\n      order_type: {\n        type: 'Radio',\n        title: _t('editor.layers.analysis-form.order'),\n        options: [\n          { label: _t('editor.layers.analysis-form.asc'), val: 'asc' },\n          { label: _t('editor.layers.analysis-form.desc'), val: 'desc' }\n        ]\n      }\n    }));\n  },\n\n  _onChangeTarget: function () {\n    this.set('target_source_column', '');\n    this._analysisSourceOptionsModel.createSourceNodeUnlessExisting(this.get('target'));\n    this._fetchColumns();\n  },\n\n  _fetchColumns: function () {\n    var target = this.get('target');\n    var nodeDefModel = this._layerDefinitionModel.findAnalysisDefinitionNodeModel(target);\n\n    if (nodeDefModel) {\n      this._targetColumnOptions.setNode(nodeDefModel);\n    } else if (target) {\n      this._targetColumnOptions.setDataset(target);\n    }\n  },\n\n  _getColumnOptionsForTarget: function () {\n    var columns = this._getColumnOptions('target_column', 'geometry');\n\n    return _.reject(columns, function (column) {\n      return (column.val === 'the_geom' || column.val === 'the_geom_webmercator');\n    }, this);\n  },\n\n  _getColumnOptions: function (attr, attrType) {\n    var opts = this._columnOptions.filterByType(attrType);\n\n    if (this._columnOptions.get('columnsFetched') && this.get(attr)) {\n      var attrExists = false;\n      var value = this.get(attr);\n\n      var customValue = {\n        val: value,\n        label: '\"' + value + '\"'\n      };\n\n      if (opts && opts.length) {\n        attrExists = _.find(opts, function (attr) {\n          return attr.val === customValue.val;\n        });\n      }\n\n      if (!attrExists) {\n        opts.push(customValue);\n        opts = _.sortBy(opts, function (d) {\n          return d.val;\n        });\n      }\n    }\n\n    return opts;\n  },\n\n  _getTargetSourceColumnOptions: function (attr) {\n    var opts = this._targetColumnOptions.all();\n\n    if (this._targetColumnOptions.get('columnsFetched') && this.get(attr)) {\n      var attrExists = false;\n      var value = this.get(attr);\n\n      var customValue = {\n        val: value,\n        label: '\"' + value + '\"'\n      };\n\n      if (opts && opts.length) {\n        attrExists = _.find(opts, function (attr) {\n          return attr.val === customValue.val;\n        });\n      }\n\n      if (!attrExists) {\n        opts.push(customValue);\n        opts = _.sortBy(opts, function (d) {\n          return d.val;\n        });\n      }\n    }\n    return opts;\n  },\n\n  _typeDef: function (type) {\n    type = type || this.get('type');\n    return TYPE_TO_META_MAP[type];\n  },\n\n  _getSourceOptionsForSource: function (sourceAttrName, requiredSimpleGeometryType) {\n    var currentSource = this.get(sourceAttrName);\n\n    if (this._isFetchingOptions()) {\n      return [{\n        val: currentSource,\n        label: _t('editor.layers.analysis-form.loading'),\n        isLoading: true\n      }];\n    } else {\n      // fetched\n      var source = this._getSourceOption()[0];\n      return this._analysisSourceOptionsModel\n        .getSelectOptions(requiredSimpleGeometryType)\n        .filter(function (d) {\n          return d.val !== source.val && d.val !== source.layerName;\n        });\n    }\n  },\n\n  _hasSecondGeometry: function () {\n    return this._getColumnOptionsForTarget().length;\n  },\n\n  _isTargetColumnDisabled: function () {\n    return !this._targetColumnOptions.get('columnsFetched');\n  },\n\n  _isSourceDisabled: function (sourceAttrName) {\n    return this._isPrimarySource(sourceAttrName) || this._isFetchingOptions();\n  }\n});\n","module.exports = [\n  require('./connect-with-lines/line-to-single-point'),\n  require('./connect-with-lines/line-source-to-target'),\n  require('./connect-with-lines/line-sequential')\n];\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<form>\\n  <div class=\"Editor-HeaderInfo Editor-HeaderInfo--noMargin\">\\n    <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">2</div>\\n    <div class=\"Editor-HeaderInfo-inner CDB-Text\" data-fields=\"' +\n((__t = ( parametersDataFields )) == null ? '' : __t) +\n'\">\\n      <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n        <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.layers.analysis-form.parameters') ) +\n'</h2>\\n      </div>\\n      <div class=\"Editor-HeaderInfo-subtitle u-bSpace--m\">\\n        <p class=\"CDB-Text CDB-FontSize-small u-upperCase u-altTextColor\">' +\n__e( _t('editor.layers.analysis-form.define-how-connect-points') ) +\n'</p>\\n      </div>\\n    </div>\\n  </div>\\n\\n  ';\n if (type == 'line-sequential') { ;\n__p += '\\n    <div class=\"Editor-HeaderInfo\">\\n      <div class=\"Editor-HeaderPad u-rSpace--m\"></div>\\n        <div class=\"Editor-checker\" data-fields=\"category_column\"></div>\\n      </div>\\n    </div>\\n  ';\n } ;\n__p += '\\n\\n  ';\n if (type == 'line-source-to-target') { ;\n__p += '\\n    <div class=\"Editor-HeaderInfo\">\\n      <div class=\"Editor-HeaderPad u-rSpace--m\"></div>\\n      <div class=\"Editor-HeaderInfo-inner CDB-Text\">\\n\\n        <div class=\"Editor-checker Editor-checker--slim u-flex u-alignCenter\" data-fields=\"group\"></div>\\n\\n        ';\n if (group) { ;\n__p += '\\n          <div class=\"Editor-formInner--nested\">\\n            <div class=\"CDB-Text Editor-formInner Editor-formInner--noMargin\">\\n              <p class=\"CDB-Legend u-upperCase u-iBlock CDB-Text is-semibold CDB-Size-small u-rSpace--m\">' +\n__e( _t('editor.layers.analysis-form.source-column') ) +\n'</p>\\n              <div class=\"Editor-formInput\" data-editors=\"source_column\"></div>\\n            </div>\\n\\n            <div class=\"CDB-Text Editor-formInner\">\\n              <p class=\"CDB-Legend u-upperCase u-iBlock CDB-Text is-semibold CDB-Size-small u-rSpace--m\">' +\n__e( _t('editor.layers.analysis-form.target-col') ) +\n'</p>\\n              <div class=\"Editor-formInput\" data-editors=\"target_source_column\"></div>\\n            </div>\\n          </div>\\n        ';\n } ;\n__p += '\\n      </div>\\n    </div>\\n  ';\n } ;\n__p += '\\n</form>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\n\nmodule.exports = {\n  type: 'line-sequential',\n  label: _t('editor.layers.analysis-form.line-sequential'),\n  parametersDataFields: 'source,type,order_column,order_type',\n  parametersDataSchema: 'order_column,order_type,category_column',\n\n  parse: function (nodeAttrs) {\n    return {\n      type: 'line-sequential',\n      order_column: nodeAttrs.order_column,\n      category_column: nodeAttrs.category_column,\n      order_type: nodeAttrs.order_type\n    };\n  },\n\n  formatAttrs: function (formAttrs, columnOptions) {\n    if (!formAttrs.category_column) {\n      formAttrs = _.omit(formAttrs, 'category_column');\n    }\n    return formAttrs;\n  }\n};\n","var _ = require('underscore');\n\nmodule.exports = {\n  type: 'line-source-to-target',\n  label: _t('editor.layers.analysis-form.line-source-to-target'),\n  parametersDataFields: 'source,type,target,closest',\n  parametersDataSchema: 'target,closest,group,source_column,target_source_column',\n\n  parse: function (nodeAttrs) {\n    return {\n      type: 'line-source-to-target',\n      target: nodeAttrs.target,\n      closest: nodeAttrs.closest,\n      source_column: nodeAttrs.source_column,\n      group: nodeAttrs.target_column && nodeAttrs.source_column,\n      target_source_column: nodeAttrs.target_column\n    };\n  },\n\n  formatAttrs: function (formAttrs, columnOptions) {\n    formAttrs.target_column = formAttrs.target_source_column;\n\n    if (!formAttrs.group) {\n      formAttrs = _.omit(formAttrs, ['source_column', 'target_column']);\n    }\n\n    formAttrs = _.omit(formAttrs, ['target_source_column', 'group']);\n    return formAttrs;\n  }\n};\n","module.exports = {\n  type: 'line-to-single-point',\n  label: _t('editor.layers.analysis-form.line-to-single-point'),\n\n  parametersDataFields: 'source,type,destination_longitude,destination_latitude',\n  parametersDataSchema: 'destination_longitude,destination_latitude',\n\n  parse: function (nodeAttrs) {\n    return {\n      type: 'line-to-single-point',\n      destination_longitude: nodeAttrs.destination_longitude,\n      destination_latitude: nodeAttrs.destination_latitude\n    };\n  },\n\n  formatAttrs: function (formAttrs, columnOptions) {\n    return formAttrs;\n  }\n};\n","var BaseAnalysisFormModel = require('./base-analysis-form-model');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar template = require('./data-observatory-measure.tpl');\nvar DataObservartoryMetadata = require('builder/editor/layers/layer-content-views/analyses/data-observatory-metadata');\nvar Utils = require('builder/helpers/utils');\n\nmodule.exports = BaseAnalysisFormModel.extend({\n  initialize: function () {\n    BaseAnalysisFormModel.prototype.initialize.apply(this, arguments);\n\n    this.nodeDefModel = this._layerDefinitionModel.findAnalysisDefinitionNodeModel(this.get('source'));\n\n    this.doMetadata = new DataObservartoryMetadata(null, {\n      configModel: this._configModel,\n      geometryType: null\n    });\n\n    // check if the geometry type is available, if not wait until it's finished\n    if (this.nodeDefModel.queryGeometryModel.isFetched()) {\n      this._fetchDOMetadata();\n    } else {\n      this.nodeDefModel.queryGeometryModel.once('change:status', this._fetchDOMetadata, this);\n    }\n    this._setSchema();\n  },\n\n  _formatAttrs: function (formAttrs) {\n    formAttrs.final_column = Utils.sanitizeString(formAttrs.final_column);\n    return BaseAnalysisFormModel.prototype._formatAttrs.call(this, formAttrs);\n  },\n\n  _fetchDOMetadata: function () {\n    var simpleGeometryType = this.nodeDefModel.queryGeometryModel.get('simple_geom') || 'point';\n    this.doMetadata.setGeometryType(simpleGeometryType);\n    this.listenTo(this.doMetadata, 'sync', this._setSchema);\n    this.on('change:area', this._areaChanged, this);\n    this.on('change:measurement', this._measurementChanged, this);\n    this.on('change:segments', this._setSegment, this);\n    this.doMetadata.fetch();\n  },\n\n  _areaChanged: function () {\n    this.set({ measurement: '', segments: '' }, { silent: true });\n    this._setSchema();\n  },\n\n  _measurementChanged: function () {\n    this.set({ segments: '' }, { silent: true });\n    this._setSchema();\n  },\n\n  _normalizeSegment: function (s) {\n    return s.replace(/\\./g, '_', /\\-/g, '_');\n  },\n\n  _setSegment: function () {\n    var s = this.doMetadata.segment(this.get('area'), this.get('measurement'), this.get('segments'));\n    if (s) {\n      this.set('segment_name', s);\n    }\n  },\n\n  getTemplate: function () {\n    return template;\n  },\n\n  /**\n   * @override {BaseAnalysisFormModel._setSchema}\n   */\n  _setSchema: function () {\n    var areas = this.doMetadata.areas();\n    var schema = {\n      source: this._primarySourceSchemaItem(),\n      area: {\n        type: 'Select',\n        title: _t('editor.layers.analysis-form.data-observatory-measurement-area'),\n        // remove Global for the moment since it only includes Boundaries\n        options: areas.length === 0 ? _t('editor.layers.analysis-form.loading') : areas.filter(function (f) { return f !== 'Global'; }).sort(),\n        dialogMode: DialogConstants.Mode.FLOAT,\n        editorAttrs: {\n          disabled: areas.length === 0\n        }\n      },\n      final_column: {\n        title: _t('editor.layers.analysis-form.data-observatory-measurement-column'),\n        type: 'Text',\n        help: _t('editor.layers.analysis-form.data-observatory-measurement-column-help'),\n        validators: ['required']\n      },\n      measurement: {\n        type: 'Select',\n        title: _t('editor.layers.analysis-form.data-observatory-measurement-measurement'),\n        options: this.doMetadata.measurement(this.get('area')).sort(),\n        dialogMode: DialogConstants.Mode.FLOAT\n      },\n      segments: {\n        type: 'Select',\n        title: _t('editor.layers.analysis-form.data-observatory-measurement-segments'),\n        options: this.doMetadata.columns(this.get('area'), this.get('measurement')).sort(),\n        dialogMode: DialogConstants.Mode.FLOAT\n      }\n    };\n\n    BaseAnalysisFormModel.prototype._setSchema.call(this, schema);\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<form>\\n  <div class=\"Editor-HeaderInfo\">\\n    <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">1</div>\\n    <div class=\"Editor-HeaderInfo-inner CDB-Text\" data-fields=\"source,final_column\">\\n      <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n        <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('analyses.data-observatory-measure.title') ) +\n'</h2>\\n      </div>\\n      <div class=\"Editor-HeaderInfo-subtitle u-bSpace--m\">\\n        <p class=\"CDB-Text CDB-FontSize-small u-upperCase u-altTextColor\">' +\n__e( _t('editor.layers.analysis-form.data-observatory-measurement-desc') ) +\n'</p>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div class=\"Editor-HeaderInfo\">\\n    <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">2</div>\\n        <div class=\"Editor-HeaderInfo-inner CDB-Text\" data-fields=\"area,measurement,segments\">\\n      <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n        <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.layers.analysis-form.parameters') ) +\n'</h2>\\n      </div>\\n      <p class=\"CDB-Text u-upperCase CDB-FontSize-small u-altTextColor u-bSpace--m\">' +\n__e( _t('editor.layers.analysis-form.data-observatory-measurement-refine') ) +\n'</p>\\n    </div>\\n  </div>\\n\\n</form>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"ListItem ListItem--fixed Measurement\">\\n  <div data-editor class=\"u-grow\">\\n  </div>\\n  <button class=\"ListItem-deleteButton\" type=\"button\" data-action=\"remove\">\\n    <svg width=\"8px\" height=\"8px\" viewBox=\"0 0 8 8\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n      <polygon fill=\"#1181FB\" points=\"4 3.435128 0.564872 0 0 0.564872 3.435128 4 0 7.435128 0.564872 8 4 4.564872 7.435128 8 8 7.435128 4.564872 4 8 0.564872 7.435128 0\"></polygon>\\n    </svg>\\n  </button>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"u-grow\">\\n  <div data-items class=\"Measurements\">\\n\\n  </div>\\n  <div class=\"u-flex u-justifyEnd DataObservatory-addMeasure\">\\n    <button class=\"CDB-Text CDB-Size-small u-actionTextColor  u-upperCase\" type=\"button\" data-action=\"add\">\\n      ' +\n__e( _t('editor.layers.analysis-form.data-observatory.list.add') ) +\n'\\n    </button>\\n  </div>\\n</div>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar BaseAnalysisFormModel = require('./base-analysis-form-model');\nvar template = require('./data-observatory-multiple-measure.tpl');\nvar templateList = require('./data-observatory-multiple-measure-list.tpl');\nvar templateItem = require('./data-observatory-multiple-measure-list-item.tpl');\nvar NestedMeasurement = require('./data-observatory-multiple-nested-measure-model');\nvar DataObservatoryRegions = require('builder/data/data-observatory/regions-collection');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar camshaftReference = require('builder/data/camshaft-reference');\nvar itemRegionListTemplate = require('./data-observatory-multiple-region-list-item.tpl');\n\nvar DENOMINATORS_BLACKLIST = ['', 'area'];\n\nvar EMPTY_AREA = ' ';\n\nmodule.exports = BaseAnalysisFormModel.extend({\n  defaults: {\n    'area': EMPTY_AREA\n  },\n\n  initialize: function () {\n    BaseAnalysisFormModel.prototype.initialize.apply(this, arguments);\n\n    this.nodeDefModel = this._layerDefinitionModel.findAnalysisDefinitionNodeModel(this.get('source'));\n\n    this.regions = new DataObservatoryRegions(null, {\n      configModel: this._configModel,\n      nodeDefModel: this.nodeDefModel\n    });\n\n    this._initBinds();\n\n    this._setSchema = this._setSchema.bind(this);\n    this._setSchema();\n\n    this.regions.fetch();\n  },\n\n  parse: function (attributes) {\n    var ATTRIBUTES = ['numerators', 'column_names', 'denominators', 'numerator_timespans', 'geom_ids', 'normalizations'];\n\n    var numerators = attributes.numerators;\n    var column_names = attributes.column_names;\n    var denominators = attributes.denominators;\n    var normalizations = attributes.normalizations;\n    var timespans = attributes.numerator_timespans;\n    var geom_ids = attributes.geom_ids;\n\n    var measurements = _.reduce(numerators, function (memo, numerator, index) {\n      memo.push({\n        segment_name: numerator,\n        column_name: column_names[index],\n        normalize: denominators[index],\n        timespan: timespans[index],\n        boundaries: geom_ids[index],\n        normalization: normalizations[index]\n      });\n      return memo;\n    }, []);\n\n    return _.extend(_.omit(attributes, ATTRIBUTES), {\n      measurements: measurements\n    });\n  },\n\n  getTemplate: function () {\n    return template;\n  },\n\n  getTemplateData: function () {\n    var fields = [];\n    var data = {\n      fields: '',\n      hasArea: this.get('area') !== EMPTY_AREA\n    };\n\n    // Don't show measurements until user selects a region\n    if (this.get('area')) {\n      fields.push('measurements');\n    }\n\n    data.fields = fields.join(',');\n    return data;\n  },\n\n  _formatAttrs: function (formAttrs) {\n    var numerators = this._getNumerators();\n    var columnNames = this._getColumnNames();\n    var normalizers = this._getDenominators();\n    var normalization = this._getNormalization();\n    var timespans = this._getTimespan();\n    var boundaries = this._getBoundaries();\n\n    var attributes = _.extend(\n      {},\n      _.omit(formAttrs, 'measurements'),\n      {\n        numerators: numerators,\n        column_names: columnNames,\n        denominators: normalizers,\n        normalizations: normalization,\n        numerator_timespans: timespans,\n        geom_ids: boundaries\n      }\n    );\n\n    return _.omit(camshaftReference.parse(attributes), 'persisted');\n  },\n\n  validate: function () {\n    var source = this.get('source');\n    var type = this.get('type');\n    var region = this.get('area');\n    var numerators = this._getNumerators();\n    var columnNames = this._getColumnNames();\n    var normalizers = this._getDenominators();\n    var normalizations = this._getNormalization();\n    var timespans = this._getTimespan();\n    var boundaries = this._getBoundaries();\n\n    var errors = _.extend(\n      {},\n      this._validRegion(region),\n      this._validateMatchSegmentsColumnNames(numerators, columnNames),\n      this._isCollectionValid(numerators),\n      this._isCollectionValid(columnNames),\n      this._areUniqueMeasurements(columnNames),\n      camshaftReference.validate({\n        source: source,\n        type: type,\n        numerators: numerators,\n        column_names: columnNames,\n        denominators: normalizers,\n        normalizations: normalizations,\n        numerator_timespans: timespans,\n        geom_ids: boundaries\n      }),\n      this._formValidationErrors\n    );\n\n    if (!_.isEmpty(errors)) {\n      return errors;\n    }\n  },\n\n  // DRY\n  _getNumerators: function () {\n    var measurements = this.get('measurements');\n    return _.map(measurements, function (measurement) {\n      return measurement.segment_name;\n    });\n  },\n\n  _getTimespan: function () {\n    var measurements = this.get('measurements');\n    return _.map(measurements, function (measurement) {\n      return measurement.timespan;\n    });\n  },\n\n  _getBoundaries: function () {\n    var measurements = this.get('measurements');\n    return _.map(measurements, function (measurement) {\n      return measurement.boundaries;\n    });\n  },\n\n  _getNormalization: function () {\n    var measurements = this.get('measurements');\n    return _.map(measurements, function (measurement) {\n      return measurement.normalization;\n    });\n  },\n\n  _getDenominators: function () {\n    var measurements = this.get('measurements');\n    return _.map(measurements, function (measurement) {\n      var normalize = measurement.normalize;\n      // We are inserting area option manually, so we need to filter that value for the backend\n      normalize = (DENOMINATORS_BLACKLIST.indexOf(normalize) >= 0) ? null : normalize;\n      return normalize;\n    });\n  },\n\n  _getColumnNames: function () {\n    var measurements = this.get('measurements');\n    return _.map(measurements, function (measurement) {\n      return measurement.column_name;\n    });\n  },\n\n  _validRegion: function (region) {\n    if (region == null) {\n      return {\n        error: true,\n        message: _t('analyses.data-observatory-measure.errors.mandatory-region')\n      };\n    }\n  },\n\n  _validateMatchSegmentsColumnNames: function (segments, columnNames) {\n    if (segments.length !== 0 && columnNames.length !== 0 && segments.length !== columnNames.length) {\n      return {\n        error: true,\n        message: _t('analyses.data-observatory-measure.errors.column-name-mismatch')\n      };\n    }\n  },\n\n  _isCollectionValid: function (collection) {\n    var allFilled = _.every(collection, function (item) {\n      return item && item !== '';\n    });\n\n    if (!allFilled) {\n      return {\n        error: true,\n        message: _t('analyses.data-observatory-measure.errors.invalid-selection')\n      };\n    }\n  },\n\n  _areUniqueMeasurements: function (columnNames) {\n    var uniques = _.unique(columnNames);\n    if (!_.isEqual(uniques, columnNames)) {\n      return {\n        error: true,\n        message: _t('analyses.data-observatory-measure.errors.measurement-twice')\n      };\n    }\n  },\n\n  _initBinds: function () {\n    this.on('change:area', this._setSchema, this);\n  },\n\n  _getRegionOptions: function () {\n    var regions = this.regions;\n    var state = regions.getState();\n    if (state === 'error') {\n      return _t('editor.layers.analysis-form.data-observatory.region.error');\n    } else if (state === 'fetching') {\n      return _t('editor.layers.analysis-form.loading');\n    } else {\n      // remove Global for the moment since it only includes Boundaries\n      return regions.filter(function (f) {\n        var matches = /^Global/.test(f.get('label'));\n        return !matches;\n      }).sort();\n    }\n  },\n\n  /**\n   * @override {BaseAnalysisFormModel._setSchema}\n   */\n  _setSchema: function () {\n    var schema = {\n      source: this._primarySourceSchemaItem(_t('editor.layers.analysis-form.data-observatory.source.label')),\n      area: {\n        type: 'SelectPlaceholder',\n        title: _t('editor.layers.analysis-form.data-observatory.region.label'),\n        collection: this.regions,\n        dialogMode: DialogConstants.Mode.FLOAT,\n        loading: this.regions.stateModel.get('state') === 'fetching',\n        itemListTemplate: itemRegionListTemplate,\n        validators: ['required'],\n        placeholder: _t('editor.layers.analysis-form.data-observatory.region.placeholder'),\n        searchPlaceholder: _t('editor.layers.analysis-form.data-observatory.region.search-placeholder'),\n        forcePlaceholder: this.get('area') === EMPTY_AREA\n      },\n      measurements: {\n        type: 'List',\n        itemType: 'MeasurementModel',\n        model: NestedMeasurement,\n        listTemplate: templateList,\n        itemTemplate: templateItem,\n        title: '',\n        editorAttrs: {\n          configModel: this._configModel,\n          regions: this.regions,\n          nodeDefModel: this.nodeDefModel,\n          maxItems: 10,\n          notAddItemByDefault: true\n        },\n        validators: [ function (value, formValues) {\n          var hasError = value.segment_name == null || value.segment_name === '';\n          if (hasError) {\n            return {\n              error: true,\n              message: _t('analyses.data-observatory-measure.errors.measurement-required')\n            };\n          }\n\n          return null;\n        } ]\n      }\n    };\n\n    BaseAnalysisFormModel.prototype._setSchema.call(this, schema);\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<form>\\n  <div class=\"Editor-HeaderInfo\">\\n    <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">1</div>\\n    <div class=\"Editor-HeaderInfo-inner CDB-Text\" data-fields=\"source,area\">\\n      <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n        <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.layers.analysis-form.data-observatory.header.title') ) +\n'</h2>\\n      </div>\\n      <div class=\"Editor-HeaderInfo-subtitle u-bSpace--m\">\\n        <p class=\"CDB-Text CDB-FontSize-small u-upperCase u-altTextColor\">' +\n__e( _t('editor.layers.analysis-form.data-observatory.header.description') ) +\n'</p>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div class=\"Editor-HeaderInfo ' +\n__e( hasArea ? '' : 'is-disabled' ) +\n'\">\\n    <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">2</div>\\n        <div class=\"Editor-HeaderInfo-inner CDB-Text\" data-fields=\"' +\n__e( fields ) +\n'\">\\n      <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n        <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.layers.analysis-form.data-observatory.parameters.title') ) +\n'</h2>\\n      </div>\\n      <p class=\"CDB-Text u-upperCase CDB-FontSize-small u-altTextColor u-bSpace--m\">' +\n__e( _t('editor.layers.analysis-form.data-observatory.parameters.description') ) +\n'</p>\\n    </div>\\n  </div>\\n</form>\\n';\n\n}\nreturn __p\n}","var $ = require('jquery');\nvar Backbone = require('backbone');\nvar _ = require('underscore');\nvar DataObservatoryNormalize = require('builder/data/data-observatory/normalize-collection');\nvar DataObservatoryTimespan = require('builder/data/data-observatory/timespan-collection');\nvar DataObservatoryBoundaries = require('builder/data/data-observatory/boundaries-collection');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar MeasurementModel = require('builder/data/data-observatory/measurement-model');\nvar DataObservatoryColumnName = require('builder/data/data-observatory/column-name');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'regions',\n  'form',\n  'configModel',\n  'nodeDefModel'\n];\n\nvar DENOMINATORS_BLACKLIST = ['', 'area'];\n\nvar wrap = function (value) {\n  var result = \"'\" + value + \"'\";\n  return result;\n};\n\nvar braces = function (value) {\n  return \"'{\" + value + \"}'\";\n};\n\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    segment_name: null,\n    normalization: 'prenormalized',\n    normalize: '',\n    timespan: null,\n    boundaries: null,\n    column_name: ''\n  },\n\n  initialize: function (attrs, options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n\n    var fetchOptions = {\n      configModel: this._configModel,\n      nodeDefModel: this._nodeDefModel\n    };\n\n    this.measurement = new MeasurementModel({}, fetchOptions);\n\n    this.normalize = new DataObservatoryNormalize(null, fetchOptions);\n    this.timespan = new DataObservatoryTimespan(null, fetchOptions);\n    this.boundaries = new DataObservatoryBoundaries(null, fetchOptions);\n    this.columnName = new DataObservatoryColumnName(fetchOptions);\n\n    this._fetchMeasurement = this._fetchMeasurement.bind(this);\n    this._syncMeasurement = this._syncMeasurement.bind(this);\n    this._fetchNormalize = this._fetchNormalize.bind(this);\n    this._syncNormalize = this._syncNormalize.bind(this);\n    this._fetchTimespan = this._fetchTimespan.bind(this);\n    this._syncTimespan = this._syncTimespan.bind(this);\n    this._fetchBoundaries = this._fetchBoundaries.bind(this);\n    this._syncBoundaries = this._syncBoundaries.bind(this);\n    this._fetchNewColumn = this._fetchNewColumn.bind(this);\n    this._columnNameSuccess = this._columnNameSuccess.bind(this);\n    this._setSchema = this._setSchema.bind(this);\n\n    if (this.get('normalization') === 'area' && !this.get('normalize')) {\n      this.set({ normalize: 'area' });\n    }\n\n    this._initBinds();\n    this._setSchema();\n\n    // If measurement exists, it means the region changed\n    if (this.get('segment_name') != null) {\n      this._regionChanged();\n    }\n\n    this._initialBoundaryValue = this.get('boundaries');\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.measurement, 'change:state', this._setSchema);\n    this.listenTo(this.normalize.stateModel, 'change:state', this._setSchema);\n    this.listenTo(this.timespan.stateModel, 'change:state', this._setSchema);\n    this.listenTo(this.boundaries.stateModel, 'change:state', this._setSchema);\n\n    this.on('change:segment_name', this._measurementChanged, this);\n    this.on('change:normalize', this._normalizeChanged, this);\n    this.on('change:timespan', this._timestampChanged, this);\n  },\n\n  _cleanColumnName: function () {\n    // Avoiding more killing events!\n    this.attributes.column_name = '';\n  },\n\n  _regionChanged: function () {\n    this._cleanColumnName();\n\n    this._fetchMeasurement()\n      .then(this._syncMeasurement)\n      .then(this._fetchNormalize)\n      .then(this._syncNormalize)\n      .then(this._fetchTimespan)\n      .then(this._syncTimespan)\n      .then(this._fetchBoundaries)\n      .then(this._syncBoundaries)\n      .then(this._fetchNewColumn);\n  },\n\n  _measurementChanged: function () {\n    this._cleanColumnName();\n\n    this._fetchNormalize()\n      .then(this._syncNormalize)\n      .then(this._fetchTimespan)\n      .then(this._syncTimespan)\n      .then(this._fetchBoundaries)\n      .then(this._syncBoundaries)\n      .then(this._fetchNewColumn);\n  },\n\n  _normalizeChanged: function () {\n    this._cleanColumnName();\n\n    this._setNormalization();\n    this._fetchTimespan()\n      .then(this._syncTimespan)\n      .then(this._fetchBoundaries)\n      .then(this._syncBoundaries)\n      .then(this._fetchNewColumn);\n  },\n\n  _timestampChanged: function () {\n    this._cleanColumnName();\n\n    this._fetchBoundaries()\n      .then(this._syncBoundaries)\n      .then(this._fetchNewColumn);\n  },\n\n  _fetchMeasurement: function () {\n    var area = this._form.model.get('area');\n    var fetchOptions = {\n      area: area && braces(area),\n      measurement: braces(this.get('segment_name'))\n    };\n    return this.measurement.fetch(fetchOptions);\n  },\n\n  _fetchNormalize: function () {\n    var fetchOptions = this._getUserSelection();\n    return this.normalize.fetch(fetchOptions);\n  },\n\n  _syncMeasurement: function () {\n    var deferred = $.Deferred();\n    var defaults = this.defaults;\n\n    // if measurement has no value, break the chain and restore the measurement\n    if (!this.measurement.getValue()) {\n      deferred.reject();\n      // we don't want to trigger more listeners that do more fetch\n      this.set(defaults, {silent: true});\n      this._setSchema();\n      this._form.trigger('change');\n    } else {\n      deferred.resolve();\n    }\n    return deferred.promise();\n  },\n\n  _syncNormalize: function () {\n    var deferred = $.Deferred();\n    var measurement = this.measurement;\n    var normalize = this.get('normalize');\n    var selected = this.normalize.setSelected(normalize);\n    var areaAllowed = (measurement && measurement.get('type') === 'Numeric' && measurement.get('aggregate') === 'sum');\n\n    if (!selected && normalize !== 'area' || !selected && normalize === 'area' && !areaAllowed) {\n      this.set({ normalize: '' }, { silent: true });\n      this._setSchema();\n    }\n\n    this._setNormalization();\n    deferred.resolve();\n    return deferred.promise();\n  },\n\n  _fetchTimespan: function () {\n    var fetchOptions = this._getUserSelection();\n    return this.timespan.fetch(fetchOptions);\n  },\n\n  _syncTimespan: function () {\n    var deferred = $.Deferred();\n    var timespan = this.get('timespan');\n    var selected = this.timespan.setSelected(timespan);\n\n    if (!selected) {\n      // We don't need setSchema here, because the time span is a controlled component\n      // this means we pass the collection as attribute and the editor render itself when changes\n      this.timespan.selectFirstAsDefault();\n      selected = this.timespan.getSelectedItem();\n      if (selected) {\n        timespan = selected.getValue();\n        this.set({ timespan: timespan }, { silent: true });\n      }\n    }\n\n    deferred.resolve();\n    return deferred.promise();\n  },\n\n  _fetchBoundaries: function () {\n    var fetchOptions = this._getUserSelection();\n    return this.boundaries.fetch(fetchOptions);\n  },\n\n  _syncBoundaries: function () {\n    var deferred = $.Deferred();\n    var hasInitialBoundaryValue = this._initialBoundaryValue != null;\n    var selected = hasInitialBoundaryValue && this.boundaries.setSelected(this._initialBoundaryValue);\n\n    if (!selected) {\n      this.set({ boundaries: null }, { silent: true });\n      this._setSchema();\n    }\n\n    this._initialBoundaryValue = null;\n    deferred.resolve();\n    return deferred.promise();\n  },\n\n  _fetchNewColumn: function () {\n    var columnOptions = this._getColumnNameOptions();\n    this.columnName.fetch(columnOptions);\n  },\n\n  _columnNameSuccess: function (data) {\n    var rows;\n    var metadata;\n\n    rows = data.rows;\n    if (!rows || rows.length === 0) return;\n\n    metadata = rows[0].obs_getmeta;\n    if (!metadata || metadata.length === 0) return;\n\n    var suggestedName = metadata[0].suggested_name;\n\n    this.set({ column_name: suggestedName });\n    this._setSchema();\n    this._form.trigger('change');\n  },\n\n  _setNormalization: function () {\n    var denom = this.get('normalize');\n    denom = denom === '' ? null : denom;\n    var normalization = 'prenormalized';\n\n    if (denom) {\n      normalization = (denom === 'area') ? 'area' : 'denominated';\n    }\n\n    this.set('normalization', normalization);\n  },\n\n  _getColumnNameOptions: function () {\n    var normalize = this.get('normalize') || null;\n    if (normalize !== null) {\n      normalize = (DENOMINATORS_BLACKLIST.indexOf(normalize) >= 0) ? null : normalize;\n    }\n    var normalization = this.get('normalization');\n\n    var defaults = {\n      numer_id: null,\n      denom_id: null,\n      numer_timespan: null\n    };\n\n    var columnOptions = _.defaults({\n      numer_id: this.get('segment_name'),\n      denom_id: normalize,\n      numer_timespan: this.get('timespan') || null,\n      normalization: normalization\n    }, defaults);\n\n    return _.extend(\n      {\n        success: this._columnNameSuccess\n      },\n      _.pick(columnOptions, _.identity)\n    );\n  },\n\n  _getNormalizeOptions: function () {\n    var measurement = this.measurement;\n    var options = this.normalize.models;\n\n    if (measurement && measurement.get('type') === 'Numeric' && measurement.get('aggregate') === 'sum') {\n      options = options.concat([{\n        label: _t('analyses.data-observatory-measure.area'),\n        val: 'area'\n      }]);\n    }\n\n    return options;\n  },\n\n  _getUserSelection: function () {\n    var normalize = this.get('normalize');\n    // We are inserting area option manually, so we need to filter that value for the backend\n    normalize = (DENOMINATORS_BLACKLIST.indexOf(normalize) >= 0) ? null : wrap(normalize);\n\n    var timespan = this.get('timespan');\n    timespan = timespan != null ? wrap(timespan) : null;\n\n    var region = wrap(this._form.model.get('area'));\n    var measurement = wrap(this.get('segment_name'));\n\n    return {\n      region: region,\n      measurement: measurement,\n      denom_id: normalize,\n      timespan: timespan\n    };\n  },\n\n  _getInitialBoundaryValue: function () {\n    return this.get('boundaries') || this.boundaries.getPreSelectedBoundaryValue();\n  },\n\n  _setSchema: function () {\n    var normalizeOptions = this._getNormalizeOptions();\n    var noMeasurement = this.get('segment_name') == null;\n    var isDisabled = noMeasurement || normalizeOptions.length === 0;\n    var schema = {\n      segment_name: {\n        type: 'DataObservatoryDropdown',\n        title: _t('editor.layers.analysis-form.data-observatory.measurements.label'),\n        editorAttrs: {\n          configModel: this._configModel,\n          nodeDefModel: this._nodeDefModel,\n          model: this._form.model,\n          placeholder: _t('editor.layers.analysis-form.data-observatory.measurements.placeholder'),\n          measurementModel: this.measurement,\n          loading: this.measurement.get('state') === 'fetching'\n        },\n        dialogMode: DialogConstants.Mode.FLOAT,\n        region: this._form.model.get('area'),\n        validators: ['required']\n      },\n      normalize: {\n        type: 'EnablerEditor',\n        title: '',\n        label: _t('editor.layers.analysis-form.data-observatory.normalize.label'),\n        isDisabled: isDisabled,\n        editor: {\n          type: 'Select',\n          options: normalizeOptions,\n          dialogMode: DialogConstants.Mode.FLOAT,\n          editorAttrs: {\n            disabled: isDisabled,\n            placeholder: _t('editor.layers.analysis-form.data-observatory.normalize.placeholder'),\n            disabledPlaceholder: _t('editor.layers.analysis-form.data-observatory.normalize.disabled-placeholder'),\n            showSearch: false,\n            showLabel: false,\n            loading: this.normalize.stateModel.get('state') === 'fetching'\n          }\n        }\n      },\n      timespan: {\n        type: 'Select',\n        title: _t('editor.layers.analysis-form.data-observatory.timespan.label'),\n        dialogMode: DialogConstants.Mode.FLOAT,\n        isDisabled: noMeasurement,\n        collection: this.timespan,\n        editorAttrs: {\n          placeholder: _t('editor.layers.analysis-form.data-observatory.timespan.placeholder')\n        }\n      },\n      boundaries: {\n        type: 'Slider',\n        title: _t('editor.layers.analysis-form.data-observatory.boundaries.label'),\n        values: this.boundaries.getValues(),\n        labels: this.boundaries.getLabels(),\n        value: this._getInitialBoundaryValue(),\n        initial: 'highest'\n      },\n      column_name: {\n        type: 'Hidden'\n      },\n      normalization: {\n        type: 'Hidden'\n      }\n    };\n\n    this.schema = schema;\n    this.trigger('updateSchema', this.schema);\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<button type=\"button\" class=\"CDB-ListDecoration-itemLink u-actionTextColor\\n    ';\n if (isSelected) { ;\n__p += ' is-selected ';\n } ;\n__p += '\\n  \" title=\"' +\n__e( name ) +\n'\">\\n  <div class=\"u-bSpace\">' +\n__e( name ) +\n' (' +\n__e( options.measurements ) +\n')</div>\\n</button>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar cdb = require('internal-carto.js');\nvar BaseAnalysisFormModel = require('./base-analysis-form-model');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar availableFunctionsQuery = require('./available-functions.tpl');\nvar template = require('./deprecated-sql-function.tpl');\nvar track = require('builder/helpers/errorTracking.js');\n\nvar REQUIRED_OPTS = [\n  'configModel'\n];\n\nmodule.exports = BaseAnalysisFormModel.extend({\n  initialize: function (attrs, opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n    this._SQL = new cdb.SQL({\n      user: this._configModel.get('user_name'),\n      sql_api_template: this._configModel.get('sql_api_template'),\n      api_key: this._configModel.get('api_key')\n    });\n\n    BaseAnalysisFormModel.prototype.initialize.apply(this, arguments);\n\n    this.set('fetchStatus', 'unfetched');\n    this._functionsInfo = [];\n\n    this._setSchema();\n    this._initBinds();\n    this._fetchAvailableFunctions();\n  },\n\n  _initBinds: function () {\n    this.listenTo(this, 'change:fetchStatus', this._onFetchStatusChanged);\n    this.listenTo(this, 'change:function_name', this._onFunctionSelected);\n    this.listenTo(this._analysisSourceOptionsModel, 'change:fetching', this._onSourceOptionsFetched);\n  },\n\n  validate: function (attrs, options) {\n    this._serializeFunctionArgs();\n\n    return BaseAnalysisFormModel.prototype.validate.call(this, attrs, options);\n  },\n\n  getTemplate: function () {\n    return template;\n  },\n\n  getTemplateData: function () {\n    var fields = [];\n    var data = {\n      fields: ''\n    };\n    var selectedFunction = this._getSelectedFunction();\n    if (selectedFunction) {\n      if (selectedFunction.hasSecondaryNode) {\n        fields.push('secondary_source');\n      }\n\n      _.reduce(selectedFunction.params, function (memo, value, key) {\n        memo.push(key);\n        return memo;\n      }, fields, this);\n    }\n    data.fields = fields.join(',');\n\n    return data;\n  },\n\n  _buildSchema: function () {\n    var schema = {};\n    var selectedFunction = this._getSelectedFunction();\n\n    // Source\n    schema.primary_source = this._primarySourceSchemaItem(_t('editor.layers.analysis-form.deprecated-sql-function.input'));\n\n    // Function\n    schema.function_name = {\n      type: 'Select',\n      title: _t('editor.layers.analysis-form.deprecated-sql-function.function'),\n      options: this._parseFunctionOptions(),\n      dialogMode: DialogConstants.Mode.FLOAT,\n      editorAttrs: this._getSelectFunctionAttrs()\n    };\n\n    if (selectedFunction) {\n      if (selectedFunction.hasSecondaryNode) {\n        schema.secondary_source = {\n          type: 'NodeDataset',\n          title: _t('editor.layers.analysis-form.deprecated-sql-function.target'),\n          options: this._getSourceOptionsForSource({\n            sourceAttrName: 'secondary_source'\n          }),\n          dialogMode: DialogConstants.Mode.FLOAT,\n          editorAttrs: {\n            disabled: this._isSourceDisabled('secondary_source')\n          },\n          validators: ['required']\n        };\n      }\n\n      _.each(selectedFunction.params, function (value, key) {\n        this._addParamToSchema(key, selectedFunction.params[key], schema);\n      }, this);\n    }\n\n    return schema;\n  },\n\n  _setSchema: function () {\n    BaseAnalysisFormModel.prototype._setSchema.call(this, this._buildSchema());\n  },\n\n  _addParamToSchema: function (key, type, schema) {\n    var item = null;\n    var initialValue = null;\n\n    switch (type) {\n      case 'string': {\n        item = {\n          type: 'Text',\n          title: key,\n          validators: ['required']\n        };\n        initialValue = '';\n        break;\n      }\n      case 'number': {\n        item = {\n          type: 'Number',\n          title: key,\n          showSlider: false,\n          validators: ['required']\n        };\n        initialValue = 0;\n        break;\n      }\n      case 'boolean': {\n        item = {\n          type: 'Radio',\n          title: key,\n          options: [\n            {val: 'true', label: 'true'},\n            {val: 'false', label: 'false'}\n          ]\n        };\n        initialValue = true;\n        break;\n      }\n    }\n    if (item) {\n      schema[key] = item;\n      if (!this.has(key)) {\n        this.set(key, initialValue);\n      }\n    }\n  },\n\n  _onSourceOptionsFetched: function () {\n    this._setSchema();\n  },\n\n  _onFetchStatusChanged: function () {\n    this._setSchema();\n  },\n\n  _onFunctionSelected: function () {\n    this._setSchema();\n  },\n\n  _getSelectedFunction: function () {\n    var functionName = this.get('function_name');\n    if (functionName) {\n      return _.first(_.filter(this._functionsInfo, function (info) {\n        return info.functionName === functionName;\n      }, this));\n    }\n    return null;\n  },\n\n  _fetchAvailableFunctions: function () {\n    var query = availableFunctionsQuery();\n    this.set('fetchStatus', 'fetching');\n\n    this._SQL.execute(query, null, {\n      success: function (metadata) {\n        this._functionsInfo = this._parseFunctionsMetadata(metadata);\n        this.set('fetchStatus', 'fetched');\n      }.bind(this),\n      error: function (errors) {\n        this.set('fetchStatus', 'error');\n        if (errors && errors.responseJSON) {\n          track(errors.responseJSON);\n        }\n      }.bind(this)\n    });\n  },\n\n  _parseFunctionsMetadata: function (metadata) {\n    if (!metadata || !metadata.rows) {\n      return [];\n    }\n\n    return _.map(metadata.rows, function (data) {\n      var info = {};\n      info.functionName = this._capitalizeFunctionName(data.fn_name);\n      info.hasSecondaryNode = data.has_secondary_node;\n      info.params = {};\n      for (var i = 0; i < data.params_names.length; i++) {\n        info.params[data.params_names[i]] = data.params_types[i];\n      }\n      return info;\n    }, this);\n  },\n\n  _capitalizeFunctionName: function (name) {\n    var depExtRegex = /^dep_ext/i;\n    return name && name.replace(depExtRegex, 'DEP_EXT');\n  },\n\n  _getSelectFunctionAttrs: function () {\n    var fetchStatus = this.get('fetchStatus');\n    var status = {\n      disabled: true\n    };\n\n    switch (fetchStatus) {\n      case 'unfetched':\n        break;\n      case 'fetching':\n        status = {\n          disabled: true,\n          loading: true\n        };\n        break;\n      case 'fetched': {\n        status = {};\n        if (this._functionsInfo.length > 0) {\n          status.placeholder = _t('editor.layers.analysis-form.deprecated-sql-function.choose-function-small');\n        }\n        break;\n      }\n      case 'error': {\n        status = {\n          disabled: true,\n          placeholder: 'error'\n        };\n        break;\n      }\n    }\n\n    return status;\n  },\n\n  _parseFunctionOptions: function () {\n    return _.map(this._functionsInfo, function (info) {\n      return {\n        val: info.functionName,\n        label: info.functionName\n      };\n    }, this);\n  },\n\n  _serializeFunctionArgs: function () {\n    var values = [];\n    var selectedFunction = this._getSelectedFunction();\n    if (selectedFunction) {\n      values = _.reduce(selectedFunction.params, function (memo, value, key) {\n        memo.push(this.get(key));\n        return memo;\n      }, [], this);\n\n      this.set('function_args', values);\n    }\n  },\n\n  _isPrimarySource: function (sourceAttrName) {\n    return sourceAttrName === this.get('source');\n  },\n\n  _isSourceDisabled: function (sourceAttrName) {\n    return this._isPrimarySource(sourceAttrName) || this._isFetchingOptions();\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<form>\\n  <div class=\"Editor-HeaderInfo\">\\n    <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">1</div>\\n    <div class=\"Editor-HeaderInfo-inner CDB-Text\" data-fields=\"primary_source,function_name\">\\n      <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n        <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.layers.analysis-form.deprecated-sql-function.title') ) +\n'</h2>\\n      </div>\\n      <p class=\"CDB-Text u-upperCase CDB-FontSize-small u-altTextColor u-bSpace--m\">' +\n__e( _t('editor.layers.analysis-form.deprecated-sql-function.choose-function') ) +\n'</p>\\n    </div>\\n  </div>\\n\\n  ';\n if (fields) { ;\n__p += '\\n  <div class=\"Editor-HeaderInfo\">\\n    <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">2</div>\\n    <div class=\"Editor-HeaderInfo-inner CDB-Text\" data-fields=\"' +\n((__t = ( fields )) == null ? '' : __t) +\n'\">\\n      <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n        <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.layers.analysis-form.deprecated-sql-function.params') ) +\n'</h2>\\n      </div>\\n      <p class=\"CDB-Text u-upperCase CDB-FontSize-small u-altTextColor u-bSpace--m\">' +\n__e( _t('editor.layers.analysis-form.deprecated-sql-function.define-params') ) +\n'</p>\\n    </div>\\n  </div>\\n  ';\n } ;\n__p += '\\n\\n</form>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar camshaftReference = require('builder/data/camshaft-reference');\nvar BaseAnalysisFormModel = require('./base-analysis-form-model');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar ARRAY_SPLIT_COMBO = ',';\n\n/**\n * A fallback form model in case the type is not supported (yet).\n */\nmodule.exports = BaseAnalysisFormModel.extend({\n\n  initialize: function () {\n    BaseAnalysisFormModel.prototype.initialize.apply(this, arguments);\n\n    this.listenTo(this._analysisSourceOptionsModel, 'change:fetching', this._updateSchema);\n\n    this._updateSchema();\n  },\n\n  getTemplate: function () {\n    return undefined;\n  },\n\n  getTemplateData: function () {\n    return {};\n  },\n\n  /**\n   * @override {BaseAnalysisFormModel._formatAttrs}\n   */\n  _formatAttrs: function () {\n    var attrs = BaseAnalysisFormModel.prototype._formatAttrs.apply(this, arguments);\n\n    var params = camshaftReference.paramsForType(this.get('type'));\n    for (var name in params) {\n      var param = params[name];\n      if (param.type === 'array') {\n        if (!_.isString(attrs[name]) || attrs[name].trim() === '') {\n          attrs[name] = null;\n        } else {\n          attrs[name] = attrs[name]\n            .split(ARRAY_SPLIT_COMBO)\n            .map(function (val) {\n              return val.trim();\n            });\n        }\n      }\n    }\n\n    return attrs;\n  },\n\n  _updateSchema: function () {\n    var schema = {\n      type: {\n        type: 'Text',\n        title: 'Type',\n        editorAttrs: {disabled: true}\n      }\n    };\n    var params = camshaftReference.paramsForType(this.get('type'));\n\n    var sourceCount = _.reduce(Object.keys(params), function (memo, name) {\n      if (params[name].type === 'node') {\n        memo++;\n      }\n      return memo;\n    }, 0);\n\n    Object.keys(params)\n      .forEach(function (name) {\n        var param = params[name];\n        var label = name + ' (' + param.type + ')';\n        var validators = [];\n        var isRequired = !param.optional;\n\n        if (isRequired) {\n          label += '*';\n          validators.push('required');\n        }\n\n        switch (param.type) {\n          case 'node':\n            schema[name] = sourceCount === 1\n              ? {\n                type: 'Select',\n                text: label,\n                options: [ this.get('source') ],\n                dialogMode: DialogConstants.Mode.FLOAT,\n                editorAttrs: { disabled: true }\n              }\n              : {\n                type: 'Select',\n                dialogMode: DialogConstants.Mode.FLOAT,\n                title: label,\n                options: this._getSourceOptionsForSource({\n                  sourceAttrName: 'target',\n                  ignorePrimarySource: true\n                })\n              };\n            break;\n          case 'string':\n            var fieldDef;\n\n            // If is meant to represent a column try to get columns if possible\n            if (/column/.test(name) && sourceCount === 1) {\n              var nodeDefModel = this._layerDefinitionModel.findAnalysisDefinitionNodeModel(this.get('source'));\n              if (nodeDefModel && nodeDefModel.querySchemaModel.columnsCollection.length > 0) {\n                fieldDef = {\n                  type: 'Text',\n                  title: label,\n                  validators: validators\n                };\n              }\n            }\n\n            if (!fieldDef) {\n              fieldDef = {\n                type: 'Text',\n                title: label,\n                validators: validators\n              };\n            }\n\n            schema[name] = fieldDef;\n            break;\n          case 'enum':\n            schema[name] = {\n              type: 'Select',\n              title: label,\n              options: param.values.map(function (val) {\n                return {\n                  val: val,\n                  label: val\n                };\n              }),\n              dialogMode: DialogConstants.Mode.FLOAT,\n              validators: validators\n            };\n            break;\n          case 'number':\n            schema[name] = {\n              type: 'Text',\n              label: label,\n              validators: validators\n            };\n            break;\n          case 'boolean':\n            schema[name] = {\n              type: 'Radio',\n              text: label,\n              options: [\n                {val: 'true', label: 'true'},\n                {val: 'false', label: 'false'}\n              ],\n              validators: validators\n            };\n            break;\n          case 'array':\n            schema[name] = {\n              type: 'Text',\n              title: label,\n              validators: validators,\n              help: 'Separate values by \"' + ARRAY_SPLIT_COMBO + '\"'\n            };\n            break;\n          default:\n            return null;\n        }\n      }, this);\n\n    this._setSchema(schema);\n  }\n});\n","var BaseAnalysisFormModel = require('./base-analysis-form-model');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar template = require('./filter-by-node-column.tpl');\nvar ColumnOptions = require('builder/editor/layers/layer-content-views/analyses/column-options');\n\n/**\n * Form model for a centroid and weighted-centroid analysis\n * It has a rather complicated schema, that depends on several data points and state.\n */\nmodule.exports = BaseAnalysisFormModel.extend({\n  initialize: function () {\n    BaseAnalysisFormModel.prototype.initialize.apply(this, arguments);\n\n    var nodeDefModel = this._layerDefinitionModel.findAnalysisDefinitionNodeModel(this.get('source'));\n    this._columnOptions = new ColumnOptions({}, {\n      configModel: this._configModel,\n      nodeDefModel: nodeDefModel\n    });\n\n    this._filterColumnOptions = new ColumnOptions({}, {\n      configModel: this._configModel\n    });\n\n    this.listenTo(this._columnOptions, 'columnsFetched', this._setSchema);\n    this.listenTo(this._filterColumnOptions, 'columnsFetched', this._setSchema);\n    this.listenTo(this._analysisSourceOptionsModel, 'change:fetching', this._setSchema);\n    this.on('change:filter_source', this._onFilterSourceChange, this);\n    this._onFilterSourceChange();\n    this._setSchema();\n  },\n\n  _onFilterSourceChange: function () {\n    var nodeDefModel = this._layerDefinitionModel.findAnalysisDefinitionNodeModel(this.get('filter_source'));\n    if (nodeDefModel) {\n      this._filterColumnOptions.setNode(nodeDefModel);\n      this._setSchema();\n    }\n  },\n\n  getTemplate: function () {\n    return template;\n  },\n\n  getTemplateData: function () {\n    return {\n      hasFilterSource: this.get('filter_source') !== undefined\n    };\n  },\n\n  /**\n   * @override {BaseAnalysisFormModel._setSchema}\n   */\n  _setSchema: function () {\n    var schema = {\n      source: this._primarySourceSchemaItem(),\n      filter_source: {\n        type: 'NodeDataset',\n        title: _t('editor.layers.analysis-form.linked-layer'),\n        dialogMode: DialogConstants.Mode.FLOAT,\n        editorAttrs: {\n          disabled: this._isFetchingOptions()\n        },\n        options: this._getSourceOptionsForSource({\n          sourceAttrName: 'filter_source',\n          ignorePrimarySource: true,\n          onlyNodes: true\n        })\n      },\n      column: {\n        type: 'Select',\n        title: _t('editor.layers.analysis-form.source-column'),\n        dialogMode: DialogConstants.Mode.FLOAT,\n        options: this._columnOptions.all()\n      },\n      filter_column: {\n        type: 'Select',\n        title: _t('editor.layers.analysis-form.filter-column'),\n        dialogMode: DialogConstants.Mode.FLOAT,\n        validators: ['required', this._validateFilterColumn.bind(this)],\n        options: this._filterColumnOptions.all()\n      }\n    };\n\n    BaseAnalysisFormModel.prototype._setSchema.call(this, schema);\n  },\n\n  _validateFilterColumn: function (value, formValues) {\n    var filterColumnValue = formValues.filter_column;\n    var columnValue = formValues.column;\n\n    // if we don't have both fields we don't validate\n    if (filterColumnValue === void 0 || columnValue === void 0) return null;\n\n    var error = {\n      message: _t('editor.layers.analysis-form.should-match')\n    };\n\n    var filterColumn = this._filterColumnOptions.findColumn(filterColumnValue);\n    var filterColumnType = filterColumn && filterColumn.type;\n\n    var column = this._columnOptions.findColumn(columnValue);\n    var columnType = column && column.type;\n\n    if (filterColumnType === columnType) {\n      return null; // types match\n    }\n\n    return error;\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<form>\\n  <div class=\"Editor-HeaderInfo\">\\n    <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">1</div>\\n    <div class=\"Editor-HeaderInfo-inner CDB-Text\" data-fields=\"source,filter_source\">\\n      <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n        <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.layers.analysis-form.select-layer') ) +\n'</h2>\\n      </div>\\n      <div class=\"Editor-HeaderInfo-subtitle u-bSpace--m\">\\n        <p class=\"CDB-Text CDB-FontSize-small u-upperCase u-altTextColor\">' +\n__e( _t('editor.layers.analysis-form.link-layer-desc') ) +\n'</p>\\n      </div>\\n    </div>\\n  </div>\\n  <div class=\"Editor-HeaderInfo ' +\n__e( hasFilterSource ? '' : 'is-disabled' ) +\n'\">\\n    <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">2</div>\\n        <div class=\"Editor-HeaderInfo-inner CDB-Text\" data-fields=\"column,filter_column\">\\n      <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n        <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.layers.analysis-form.key-columns') ) +\n'</h2>\\n      </div>\\n      <p class=\"CDB-Text u-upperCase CDB-FontSize-small u-altTextColor u-bSpace--xl\">' +\n__e( _t('editor.layers.analysis-form.key-columns-desc') ) +\n'</p>\\n    </div>\\n  </div>\\n</form>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\n\nvar PARAMS_FOR_IS_EQUAL = 'kind,text';\n\nmodule.exports = {\n  type: 'filter-category',\n  label: 'Filter category',\n  parametersDataFields: 'text,accept_reject',\n  filterDataFields: 'accept,reject',\n\n  parse: function (nodeAttrs) {\n    var formAttrs = _.extend({}, nodeAttrs);\n    var kind = nodeAttrs.kind;\n    var text;\n\n    formAttrs.type = 'filter-category';\n    formAttrs.column = nodeAttrs.column || '';\n\n    if (nodeAttrs.accept) {\n      text = nodeAttrs.accept.join(',');\n    } else if (nodeAttrs.reject) {\n      text = nodeAttrs.reject.join(',');\n    }\n\n    if (this._isFromBooleanKind(kind)) {\n      text = text === 'null' ? null : text === 'true';\n    }\n\n    formAttrs.text = text;\n\n    formAttrs.accept_reject = (nodeAttrs.accept || !(nodeAttrs.accept || nodeAttrs.reject)) ? 'accept' : 'reject';\n\n    return formAttrs;\n  },\n\n  formatAttrs: function (formAttrs) {\n    var attrs = ['id', 'type', 'source', 'column'];\n    var kind = formAttrs.kind;\n    var isFromIsEqualToKind = this._isFromIsEqualToKind(kind);\n    var isFromBooleanKind = this._isFromBooleanKind(kind);\n    var text;\n\n    if (isFromIsEqualToKind) {\n      text = [+formAttrs.text];\n    } else if (isFromBooleanKind) {\n      text = [formAttrs.text];\n    } else if (formAttrs.text) {\n      text = formAttrs.text.split(',');\n    }\n\n    if (formAttrs.accept_reject === 'accept' || isFromIsEqualToKind) {\n      formAttrs.accept = text;\n    } else if (formAttrs.accept_reject === 'reject') {\n      formAttrs.reject = text;\n    }\n\n    if (isFromIsEqualToKind || isFromBooleanKind) {\n      return _.pick(formAttrs, attrs.concat(['kind', formAttrs.accept_reject]));\n    } else {\n      return _.pick(formAttrs, attrs.concat(formAttrs.accept_reject));\n    }\n  },\n\n  _isFromBooleanKind: function (kind) {\n    return kind === 'is-boolean';\n  },\n\n  _isFromIsEqualToKind: function (kind) {\n    return kind === 'is-equal-to';\n  },\n\n  getParameters: function (kind) {\n    var params = this.parametersDataFields;\n\n    if (kind === 'is-equal-to') {\n      params = PARAMS_FOR_IS_EQUAL;\n    }\n\n    return params;\n  }\n};\n","var _ = require('underscore');\nvar BaseAnalysisFormModel = require('./base-analysis-form-model');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar template = require('./filter-form.tpl');\nvar ColumnData = require('builder/editor/layers/layer-content-views/analyses/column-data');\nvar ColumnRowData = require('builder/data/column-row-data');\nvar ColumnOptions = require('builder/editor/layers/layer-content-views/analyses/column-options');\n\nvar FILTER_TYPES = require('./filter-types');\nvar TYPE_TO_META_MAP = {};\n\nFILTER_TYPES.map(function (d) {\n  TYPE_TO_META_MAP[d.type] = d;\n});\n\nvar FILTER_RANGE_KINDS = [\n  { val: 'between', label: _t('editor.layers.filter-options.between') },\n  { val: 'is-equal-to', label: _t('editor.layers.filter-options.is-equal-to') },\n  { val: 'is-greater-than', label: _t('editor.layers.filter-options.is-greater-than') },\n  { val: 'is-greater-or-equal-than', label: _t('editor.layers.filter-options.is-greater-or-equal-than') },\n  { val: 'is-less-than', label: _t('editor.layers.filter-options.is-less-than') },\n  { val: 'is-less-or-equal-than', label: _t('editor.layers.filter-options.is-less-or-equal-than') }\n];\n\nvar LESS_GREATER_KINDS = ['is-greater-or-equal-than', 'is-less-or-equal-than', 'is-less-than', 'is-less-than'];\n\nmodule.exports = BaseAnalysisFormModel.extend({\n\n  defaults: {\n    accept_reject: 'accept'\n  },\n\n  parse: function (attrs) {\n    return _.defaults(\n      _.pick(attrs, 'id', 'source', 'column'), // maintain default attrs\n      this._typeDef(attrs.type).parse(attrs)\n    );\n  },\n\n  initialize: function () {\n    BaseAnalysisFormModel.prototype.initialize.apply(this, arguments);\n\n    this._nodeDefModel = this._layerDefinitionModel.findAnalysisDefinitionNodeModel(this.get('source'));\n\n    this._columnData = new ColumnData({\n      column: this.get('column'),\n      type: this._getSelectedColumnType()\n    }, {\n      nodeDefModel: this._nodeDefModel,\n      configModel: this._configModel\n    });\n\n    this._columnRowData = new ColumnRowData({\n      column: this.get('column')\n    }, {\n      nodeDefModel: this._nodeDefModel,\n      configModel: this._configModel\n    });\n\n    this._columnOptions = new ColumnOptions({}, {\n      configModel: this._configModel,\n      nodeDefModel: this._nodeDefModel\n    });\n\n    this.on('change:kind change:column', this._updateSchema, this);\n    this.on('change:histogram_stats', this._setSchema, this);\n\n    this.listenTo(this._columnOptions, 'columnsFetched', this._setSchema);\n    this.listenTo(this._columnRowData, 'columnsFetched', this._setSchema);\n    this.listenTo(this._columnData, 'columnsFetched', this._storeHistogramStats);\n\n    this._columnData.fetch();\n    this._columnRowData.fetch();\n    this._setSchema();\n  },\n\n  getTemplate: function () {\n    return template;\n  },\n\n  getTemplateData: function () {\n    return {\n      column: this.get('column'),\n      histogram_stats: this.get('histogram_stats'),\n      parametersDataFields: this._typeDef().getParameters(this.get('kind'), this.get('column'))\n    };\n  },\n\n  _formatAttrs: function (formAttrs) {\n    var column = this.get('column');\n    var customFormattedFormAttrs = this._typeDef().formatAttrs(formAttrs, column);\n    return BaseAnalysisFormModel.prototype._formatAttrs.call(this, customFormattedFormAttrs);\n  },\n\n  /**\n   * @override {BaseAnalysisFormModel.updateNodeDefinition}\n   */\n  updateNodeDefinition: function (nodeDefModel) {\n    var attrs = this._formatAttrs(this.attributes);\n    nodeDefModel.clear({ silent: true });\n    nodeDefModel.set(attrs);\n  },\n\n  _getInputOptions: function () {\n    return _.map(this._columnRowData.getRows(), function (d) {\n      return { label: d, val: d };\n    });\n  },\n\n  _setSchema: function () {\n    var requiredValidators = [{\n      type: 'requiredBoolean'\n    }];\n\n    BaseAnalysisFormModel.prototype._setSchema.call(this, this._filterSchemaFieldsByType({\n      source: this._primarySourceSchemaItem(_t('editor.layers.analysis-form.base-layer')),\n      column: {\n        type: 'Select',\n        text: _t('editor.layers.analysis-form.column'),\n        options: this._columnOptions.filterByType(['string', 'number', 'boolean']),\n        dialogMode: DialogConstants.Mode.FLOAT,\n        validators: ['required']\n      },\n      kind: {\n        type: 'Select',\n        title: _t('editor.layers.analysis-form.filter'),\n        dialogMode: DialogConstants.Mode.FLOAT,\n        options: this._getKindOptions(),\n        editorAttrs: {\n          showSearch: false\n        }\n      },\n      greater_than_or_equal: {\n        type: 'Text',\n        title: this._getMinOrEqualLabel(),\n        validators: ['required'],\n        editorAttrs: {\n          placeholder: _t('editor.layers.analysis-form.write-min-or-equal-value')\n        }\n      },\n      less_than_or_equal: {\n        type: 'Text',\n        title: this._getMaxOrEqualLabel(),\n        validators: ['required'],\n        editorAttrs: {\n          placeholder: _t('editor.layers.analysis-form.write-max-or-equal-value')\n        }\n      },\n      greater_than: {\n        type: 'Text',\n        title: this._getMinLabel(),\n        validators: ['required'],\n        editorAttrs: {\n          placeholder: _t('editor.layers.analysis-form.write-min-value')\n        }\n      },\n      less_than: {\n        type: 'Text',\n        title: this._getMaxLabel(),\n        validators: ['required'],\n        editorAttrs: {\n          placeholder: _t('editor.layers.analysis-form.write-max-value')\n        }\n      },\n      text: {\n        type: this._getInputType(),\n        title: _t('editor.layers.analysis-form.value'),\n        validators: this._isBoolean() ? requiredValidators : ['required'],\n        options: this._getInputOptions(),\n        dialogMode: DialogConstants.Mode.FLOAT,\n        editorAttrs: {\n          column: 'column',\n          nodeDefModel: this._nodeDefModel,\n          configModel: this._configModel,\n          placeholder: _t('editor.layers.analysis-form.select-value')\n        }\n      },\n      accept_reject: {\n        type: 'Radio',\n        title: _t('editor.layers.analysis-form.results'),\n        options: [\n          { label: _t('editor.layers.analysis-form.show'), val: 'accept' },\n          { label: _t('editor.layers.analysis-form.hide'), val: 'reject' }\n        ],\n        validators: ['required']\n      }\n    }));\n\n    this._generateHistogram();\n    this._generateHistogramStats();\n  },\n\n  _getInputType: function () {\n    var rows = this._columnRowData.getRows();\n    return rows && rows.length ? 'LazySelect' : 'Text';\n  },\n\n  _getMinOrEqualLabel: function () {\n    return _.contains(LESS_GREATER_KINDS, this.get('kind')) ? _t('editor.layers.analysis-form.value') : _t('editor.layers.analysis-form.min-or-equal');\n  },\n\n  _getMaxOrEqualLabel: function () {\n    return _.contains(LESS_GREATER_KINDS, this.get('kind')) ? _t('editor.layers.analysis-form.value') : _t('editor.layers.analysis-form.max-or-equal');\n  },\n\n  _getMinLabel: function () {\n    return _.contains(LESS_GREATER_KINDS, this.get('kind')) ? _t('editor.layers.analysis-form.value') : _t('editor.layers.analysis-form.min');\n  },\n\n  _getMaxLabel: function () {\n    return _.contains(LESS_GREATER_KINDS, this.get('kind')) ? _t('editor.layers.analysis-form.value') : _t('editor.layers.analysis-form.max');\n  },\n\n  _getSourceColumns: function () {\n    var nodeDefModel = this._layerDefinitionModel.findAnalysisDefinitionNodeModel(this.get('source'));\n\n    var sourceColumns = nodeDefModel.querySchemaModel.columnsCollection.map(function (columnModel) {\n      var columnName = columnModel.get('name');\n      return {\n        val: columnName,\n        label: columnName,\n        type: columnModel.get('type')\n      };\n    });\n\n    return sourceColumns;\n  },\n\n  _filterSchemaFieldsByType: function (schema) {\n    // Always include the source and column fields in addition to the type-specific fields\n    var kind = this.get('kind');\n    var column = this.get('column');\n    var fields = ['source', 'column'];\n    var parameters = this._typeDef().getParameters(kind, column);\n    if (parameters !== '') {\n      fields = fields.concat(parameters.split(','));\n    }\n    return _.pick(schema, fields);\n  },\n\n  _updateSchema: function () {\n    var columnType = this._getSelectedColumnType();\n    this._columnData.set({\n      column: this.get('column'),\n      type: columnType\n    });\n    this._columnRowData.set('column', this.get('column'));\n\n    this._setType();\n    this._setSchema();\n  },\n\n  _getSelectedColumnType: function () {\n    var columns = this._getSourceColumns();\n    var columnType = null;\n\n    for (var i in columns) {\n      if (columns[i]['label'] === this.get('column')) {\n        columnType = columns[i]['type'];\n      }\n    }\n\n    return columnType;\n  },\n\n  _getKindOptions: function () {\n    if (this.get('type') !== 'filter-category' || this.get('kind') === 'is-equal-to') {\n      return FILTER_RANGE_KINDS;\n    }\n  },\n\n  _setType: function () {\n    var columnType = this._getSelectedColumnType();\n    var kind = this.get('kind');\n    var attrs = {\n      type: 'filter-range'\n    };\n\n    if (columnType === 'number' && kind === 'is-equal-to') {\n      attrs.type = 'filter-category';\n      attrs.accept_reject = 'accept';\n    } else if (columnType === 'number') {\n      attrs.kind = this._typeDef(attrs.type).getKind(kind);\n    } else if (columnType === 'string') {\n      attrs.kind = null;\n      attrs.type = 'filter-category';\n    } else if (columnType === 'boolean') {\n      attrs.kind = 'is-boolean';\n      attrs.type = 'filter-category';\n    }\n\n    this.set(attrs);\n  },\n\n  _isBoolean: function () {\n    return this._getSelectedColumnType() === 'boolean';\n  },\n\n  _getColumnType: function (columnName) {\n    var nodeDefModel = this._layerDefinitionModel.findAnalysisDefinitionNodeModel(this.get('source'));\n    var column = nodeDefModel.querySchemaModel.columnsCollection.find(function (c) {\n      return c.get('name') === columnName;\n    }, this);\n\n    return column && column.get('type');\n  },\n\n  _generateHistogramStats: function (data) {\n    if (data) {\n      this.trigger('onColData', this);\n    }\n  },\n\n  _storeHistogramStats: function (data) {\n    if (data && this._getSelectedColumnType() === 'number') {\n      this.set('histogram_stats', data.attributes);\n    } else {\n      this.set('histogram_stats', null);\n    }\n  },\n\n  _generateHistogram: function () {\n    var type;\n    var tableName = this._getSourceOption()[0].layerName;\n    var columnName = this.get('column');\n\n    if (columnName) {\n      type = this._getColumnType(columnName);\n    }\n\n    if (tableName && columnName && type === 'number') {\n      this.trigger('generateHistogram', { columnName: columnName, tableName: tableName });\n    }\n  },\n\n  _typeDef: function (type) {\n    type = type || this.get('type');\n    return TYPE_TO_META_MAP[type];\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<form>\\n  <div class=\"Editor-HeaderInfo\">\\n    <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">1</div>\\n    <div class=\"Editor-HeaderInfo-inner CDB-Text\">\\n      <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n        <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.layers.analysis-form.select-column') ) +\n'</h2>\\n      </div>\\n      <div class=\"Editor-HeaderInfo-subtitle u-bSpace--m\">\\n        <p class=\"CDB-Text CDB-FontSize-small u-upperCase u-altTextColor\">' +\n__e( _t('editor.layers.analysis-form.to-filter-by') ) +\n'</p>\\n      </div>\\n      <div class=\"u-tSpace-xl CDB-Text CDB-Fieldset\">\\n        <p class=\"CDB-Legend u-upperCase u-iBlock CDB-Text is-semibold CDB-Size-small u-rSpace--m\">' +\n__e( _t('editor.layers.analysis-form.base-layer') ) +\n'</p>\\n        <div class=\"Editor-formInput u-ellipsis\" data-editors=\"source\"></div>\\n      </div>\\n      <div class=\"u-tSpace-xl CDB-Text CDB-Fieldset\">\\n        <p class=\"CDB-Legend u-upperCase u-iBlock CDB-Text is-semibold CDB-Size-small u-rSpace--m\">' +\n__e( _t('editor.layers.analysis-form.target-column') ) +\n'</p>\\n        <div class=\"Editor-formInput\" data-editors=\"column\"></div>\\n      </div>\\n      ';\n if (histogram_stats) { ;\n__p += '\\n      <div class=\"u-tSpace-xl CDB-Text CDB-Fieldset \">\\n        <p class=\"CDB-Legend u-upperCase u-iBlock CDB-Text is-semibold CDB-Size-small u-rSpace--m\"></p>\\n        <div class=\"Analysis-Histogram js-histogram\">\\n          <ul class=\"Analysis-HistogramInfo u-flex CDB-Text CDB-Size-small u-secondaryTextColor u-upperCase\">\\n            <li class=\"u-rSpace\"><span class=\"js-min\"></span> ' +\n__e( _t('editor.layers.analysis-form.min') ) +\n'</li>\\n            <li><span class=\"js-max\"></span> ' +\n__e( _t('editor.layers.analysis-form.max') ) +\n'</li>\\n          </ul>\\n          <div class=\"Analysis-HistogramChart js-histogramChart\"></div>\\n        </div>\\n      </div>\\n      ';\n } ;\n__p += '\\n    </div>\\n  </div>\\n  <div class=\"Editor-HeaderInfo ' +\n__e( column ? '' : 'is-disabled' ) +\n'\">\\n    <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">2</div>\\n    <div class=\"Editor-HeaderInfo-inner CDB-Text\" data-fields=\"' +\n__e( parametersDataFields ) +\n'\">\\n      <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n        <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.layers.analysis-form.parameters') ) +\n'</h2>\\n      </div>\\n      <p class=\"CDB-Text u-upperCase CDB-FontSize-small u-altTextColor u-bSpace--xl\">' +\n__e( _t('editor.layers.analysis-form.parameters-description') ) +\n'</p>\\n    </div>\\n  </div>\\n</form>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar BaseAnalysisFormModel = require('./base-analysis-form-model');\nvar template = require('./filter-intersection-form.tpl');\nvar ColumnOptions = require('builder/editor/layers/layer-content-views/analyses/column-options');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\n/**\n *  Filter points in polygon model\n */\nmodule.exports = BaseAnalysisFormModel.extend({\n\n  initialize: function () {\n    BaseAnalysisFormModel.prototype.initialize.apply(this, arguments);\n\n    this._columnOptions = new ColumnOptions({}, {\n      configModel: this._configModel\n    });\n\n    this.listenTo(this._analysisSourceOptionsModel, 'change:fetching', this._setSchema);\n    this.listenTo(this._columnOptions, 'columnsFetched', this._setSchema);\n\n    this.on('change:target', this._onChangeTarget, this);\n\n    this._setSchema();\n    this._fetchColumns();\n  },\n\n  _formatAttrs: function (formAttrs) {\n    var customFormattedFormAttrs = _.pick(formAttrs, ['id', 'source', 'target', 'type']);\n    return BaseAnalysisFormModel.prototype._formatAttrs.call(this, customFormattedFormAttrs);\n  },\n\n  getTemplate: function () {\n    return template;\n  },\n\n  getTemplateData: function () {\n    return {};\n  },\n\n  _filterSchemaFieldsByType: function (schema) {\n    // Always include the source and target fields in addition to the type-specific fields\n    return _.pick(schema, ['source', 'target', 'type']);\n  },\n\n  /**\n   * @override {BaseAnalysisFormModel._setSchema}\n   */\n  _setSchema: function () {\n    BaseAnalysisFormModel.prototype._setSchema.call(this, this._filterSchemaFieldsByType({\n      source: this._primarySourceSchemaItem(_t('editor.layers.analysis-form.base-layer')),\n      target: {\n        type: 'NodeDataset',\n        title: _t('editor.layers.analysis-form.target'),\n        options: this._getSourceOptionsForSource({\n          sourceAttrName: 'target',\n          requiredSimpleGeometryType: 'point'\n        }),\n        dialogMode: DialogConstants.Mode.FLOAT,\n        validators: ['required'],\n        editorAttrs: {\n          disabled: this._isSourceDisabled('target')\n        }\n      }\n    }));\n  },\n\n  _onChangeTarget: function () {\n    this._analysisSourceOptionsModel.createSourceNodeUnlessExisting(this.get('target'));\n    this._fetchColumns();\n  },\n\n  _fetchColumns: function () {\n    var target = this.get('target');\n\n    var nodeDefModel = this._layerDefinitionModel.findAnalysisDefinitionNodeModel(target);\n\n    if (nodeDefModel) {\n      this._columnOptions.setNode(nodeDefModel);\n    } else if (target) {\n      this._columnOptions.setDataset(target);\n    }\n  },\n\n  _isSourceDisabled: function (sourceAttrName) {\n    return this._isPrimarySource(sourceAttrName) || this._isFetchingOptions();\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<form>\\n  <div class=\"Editor-HeaderInfo\">\\n    <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">1</div>\\n    <div class=\"Editor-HeaderInfo-inner CDB-Text\" data-fields=\"source,target\">\\n      <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n        <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.layers.analysis-form.select-your-points') ) +\n'</h2>\\n      </div>\\n      <div class=\"Editor-HeaderInfo-subtitle u-bSpace--m\">\\n        <p class=\"CDB-Text CDB-FontSize-small u-upperCase u-altTextColor\">' +\n__e( _t('editor.layers.analysis-form.target-layer-dataset') ) +\n'</p>\\n      </div>\\n    </div>\\n  </div>\\n</form>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\n\nvar PARAMETERS_FOR_KIND = {\n  'between': 'kind,greater_than_or_equal,less_than_or_equal',\n  'is-equal-to': 'kind,text',\n  'is-less-than': 'kind,less_than',\n  'is-less-or-equal-than': 'kind,less_than_or_equal',\n  'is-greater-than': 'kind,greater_than',\n  'is-greater-or-equal-than': 'kind,greater_than_or_equal'\n};\n\nvar DEFAULT_PARAMETERS = PARAMETERS_FOR_KIND['between'];\n\nmodule.exports = {\n  type: 'filter-range',\n  label: 'Filter range', // TODO: localize?\n\n  parse: function (nodeAttrs) {\n    var formAttrs = _.extend({}, nodeAttrs);\n\n    formAttrs.type = 'filter-range';\n    formAttrs.kind = nodeAttrs.kind || 'between';\n    formAttrs.column = nodeAttrs.column || '';\n    formAttrs.greater_than_or_equal = nodeAttrs.greater_than_or_equal != null ? nodeAttrs.greater_than_or_equal : 0;\n    formAttrs.less_than_or_equal = nodeAttrs.less_than_or_equal != null ? nodeAttrs.less_than_or_equal : 50;\n    formAttrs.greater_than = nodeAttrs.greater_than != null ? nodeAttrs.greater_than : 0;\n    formAttrs.less_than = nodeAttrs.less_than != null ? nodeAttrs.less_than : 50;\n\n    return formAttrs;\n  },\n\n  getParameters: function (kind, column) {\n    if (column) {\n      kind = this.getKind(kind);\n      return PARAMETERS_FOR_KIND[kind];\n    }\n\n    return DEFAULT_PARAMETERS;\n  },\n\n  formatAttrs: function (formAttrs, column) {\n    var kind = this.getKind(formAttrs.kind);\n\n    var attrs = ['id', 'type', 'source', 'column'];\n    var parameters = this.getParameters(kind, column);\n    if (parameters !== '') {\n      attrs = attrs.concat(parameters.split(','));\n    }\n\n    return _.pick(formAttrs, attrs);\n  },\n\n  getKind: function (kind) {\n    if (!kind || !_.contains(_.keys(PARAMETERS_FOR_KIND), kind)) {\n      kind = 'between';\n    }\n\n    return kind;\n  }\n};\n","module.exports = [\n  require('./filter-category-model'),\n  require('./filter-range-model')\n];\n","module.exports = {\n  type: 'georeference-admin-region',\n  label: _t('editor.layers.analysis-form.georeference.admin-region'),\n  fieldAttrs: {\n    admin_region_column: {\n      showSearch: true\n    },\n    country: {\n      showSearch: true,\n      allowFreeTextInput: true\n    }\n  },\n\n  validatorFor: {\n    admin_region_column: ['required']\n  },\n\n  parametersDataFields: 'admin_region_column,country',\n\n  getParameters: function () {\n    var params = this.parametersDataFields;\n\n    return params;\n  },\n\n  parse: function (nodeAttrs) {\n    return {\n      type: 'georeference-admin-region',\n      admin_region_column: nodeAttrs.admin_region_column,\n      country: nodeAttrs.country || nodeAttrs.country_column\n    };\n  },\n\n  formatAttrs: function (formAttrs, columnOptions) {\n    if (formAttrs.country && columnOptions.findColumn(formAttrs.country, 'string')) {\n      formAttrs.country_column = formAttrs.country;\n      delete formAttrs.country;\n    } else {\n      delete formAttrs.country_column;\n    }\n    return formAttrs;\n  }\n};\n","var _ = require('underscore');\n\nmodule.exports = {\n  type: 'georeference-city',\n  label: _t('editor.layers.analysis-form.georeference.city'),\n  fieldAttrs: {\n    city_column: {\n      showSearch: true\n    },\n    admin_region: {\n      showSearch: true,\n      allowFreeTextInput: true\n    },\n    country: {\n      showSearch: true,\n      allowFreeTextInput: true\n    }\n  },\n\n  validatorFor: {\n    city_column: ['required']\n  },\n\n  parametersDataFields: 'city_column,admin_region,country',\n\n  getParameters: function () {\n    var params = this.parametersDataFields;\n\n    return params;\n  },\n\n  parse: function (nodeAttrs) {\n    return {\n      type: 'georeference-city',\n      city_column: nodeAttrs.city_column,\n      admin_region: nodeAttrs.admin_region || nodeAttrs.admin_region_column,\n      country: nodeAttrs.country || nodeAttrs.country_column\n    };\n  },\n\n  formatAttrs: function (formAttrs, columnOptions) {\n    _.each(['country', 'admin_region'], function (attr) {\n      if (formAttrs[attr] && columnOptions.findColumn(formAttrs[attr], 'string')) {\n        formAttrs[attr + '_column'] = formAttrs[attr];\n        delete formAttrs[attr];\n      } else {\n        delete formAttrs[attr + '_column'];\n      }\n    }, this);\n\n    return formAttrs;\n  }\n};\n","module.exports = {\n  type: 'georeference-country',\n  label: _t('editor.layers.analysis-form.georeference.country'),\n  fieldAttrs: {\n    country_column: {\n      showSearch: true\n    }\n  },\n\n  validatorFor: {\n    country_column: ['required']\n  },\n\n  parametersDataFields: 'country_column',\n\n  getParameters: function () {\n    var params = this.parametersDataFields;\n\n    return params;\n  },\n\n  parse: function (nodeAttrs) {\n    return {\n      type: 'georeference-country',\n      country_column: nodeAttrs.country_column || nodeAttrs.country\n    };\n  },\n\n  formatAttrs: function (formAttrs) {\n    return formAttrs;\n  }\n};\n","var _ = require('underscore');\nvar BaseAnalysisFormModel = require('./base-analysis-form-model');\nvar template = require('./georeference-form.tpl');\nvar ColumnOptions = require('builder/editor/layers/layer-content-views/analyses/column-options');\nvar GEOREFERENCE_TYPES = require('./georeference-types');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\n\nvar TYPE_TO_META_MAP = {};\nGEOREFERENCE_TYPES.map(function (d) {\n  TYPE_TO_META_MAP[d.type] = d;\n});\n\nvar GEOREFERENCE_PLACEHOLDER = 'georeference-placeholder';\n\n/**\n * Form model for a georeference analysis\n * It has a rather complicated schema, that depends on several data points and state.\n */\nmodule.exports = BaseAnalysisFormModel.extend({\n  parse: function (attrs) {\n    return _.defaults(\n      _.pick(attrs, 'id', 'source', 'context'), // maintain default attrs\n      this._typeDef(attrs.type).parse(attrs)\n    );\n  },\n\n  initialize: function () {\n    BaseAnalysisFormModel.prototype.initialize.apply(this, arguments);\n\n    this._columnOptions = new ColumnOptions({}, {\n      configModel: this._configModel,\n      nodeDefModel: this._layerDefinitionModel.findAnalysisDefinitionNodeModel(this.get('source'))\n    });\n\n    this.listenTo(this._columnOptions, 'columnsFetched', this._setSchema);\n    this.on('change:type change:context', this._onTypeChanged, this);\n\n    this._setSchema();\n  },\n\n  updateNodeDefinition: function (nodeDefModel) {\n    var attrs = this._formatAttrs(this.attributes);\n    nodeDefModel.clear({silent: true});\n    nodeDefModel.set(attrs);\n  },\n\n  _formatAttrs: function (formAttrs) {\n    var customFormattedFormAttrs = this._typeDef().formatAttrs(formAttrs, this._columnOptions);\n    return BaseAnalysisFormModel.prototype._formatAttrs.call(this, customFormattedFormAttrs);\n  },\n\n  getTemplate: function () {\n    return template;\n  },\n\n  getTemplateData: function () {\n    return {\n      parametersDataFields: this._typeDef().getParameters(this.get('context')),\n      hasType: this.get('type') !== GEOREFERENCE_PLACEHOLDER\n    };\n  },\n\n  _filterSchemaFieldsByType: function (schema) {\n    // Always include the source field in addition to the type-specific fields\n    // If the model has a context attribute it will be used to filter the fields\n    var context = this.get('context');\n    var fields = ['source', 'type'].concat(this._typeDef().getParameters(context).split(','));\n\n    return _.pick(schema, fields);\n  },\n\n  validate: function () {\n    // Return something so form can't be applied on the placeholder\n    if (this.get('type') === GEOREFERENCE_PLACEHOLDER) return { type: 'required' };\n    return BaseAnalysisFormModel.prototype.validate.call(this);\n  },\n\n  /*\n  /**\n   * @override {BaseAnalysisFormModel._setSchema}\n   */\n  _setSchema: function () {\n    var hasPlaceholder = this.get('type') === GEOREFERENCE_PLACEHOLDER;\n    BaseAnalysisFormModel.prototype._setSchema.call(this, this._filterSchemaFieldsByType({\n      type: {\n        type: 'SelectPlaceholder',\n        title: _t('editor.layers.analysis-form.type'),\n        options: _.compact(\n          GEOREFERENCE_TYPES.map(function (d) {\n            if (!this._analyses.isAnalysisValidByType(d.type, { configModel: this._configModel })) {\n              return false;\n            }\n\n            return {\n              hidden: d.type === GEOREFERENCE_PLACEHOLDER,\n              val: d.type,\n              label: d.label\n            };\n          }, this)\n        ),\n        dialogMode: DialogConstants.Mode.FLOAT,\n        forcePlaceholder: hasPlaceholder,\n        placeholder: _t('editor.layers.analysis-form.select-type-placeholder')\n      },\n      context: {\n        type: 'Toggle',\n        title: '',\n        label: '',\n        options: [\n          {\n            val: 'advance',\n            label: _t('editor.layers.analysis-form.georeference.advance'),\n            help: _t('editor.layers.analysis-form.georeference.street-address-help'),\n            selected: false\n          }, {\n            val: 'normal',\n            label: _t('editor.layers.analysis-form.georeference.normal'),\n            selected: true\n          }\n        ]\n      },\n      source: {\n        type: 'NodeDataset',\n        text: _t('editor.layers.analysis-form.base-layer'),\n        options: this._getSourceOption(),\n        dialogMode: DialogConstants.Mode.FLOAT,\n        editorAttrs: { disabled: true }\n      },\n      latitude: {\n        type: 'Select',\n        title: _t('editor.layers.analysis-form.latitude'),\n        options: this._columnOptions.filterByType('number'),\n        dialogMode: DialogConstants.Mode.FLOAT,\n        validators: this._getFieldValidator('latitude'),\n        placeholder: _t('editor.layers.analysis-form.georeference.select-latitude'),\n        searchPlaceholder: _t('editor.layers.analysis-form.search-by-column-name')\n      },\n      longitude: {\n        type: 'Select',\n        title: _t('editor.layers.analysis-form.longitude'),\n        options: this._columnOptions.filterByType('number'),\n        dialogMode: DialogConstants.Mode.FLOAT,\n        validators: this._getFieldValidator('longitude'),\n        placeholder: _t('editor.layers.analysis-form.georeference.select-longitude'),\n        searchPlaceholder: _t('editor.layers.analysis-form.search-by-column-name')\n      },\n      admin_region: {\n        type: 'EnablerEditor',\n        title: '',\n        label: _t('editor.layers.analysis-form.admin-region'),\n        help: _t('editor.layers.analysis-form.georeference.admin-region-extended-help'),\n        validators: this._getFieldValidator('admin_region'),\n        editor: {\n          type: 'Select',\n          options: this._getColumnOptions('admin_region', 'string'),\n          dialogMode: DialogConstants.Mode.FLOAT,\n          editorAttrs: this._getFieldAttrs('admin_region'),\n          placeholder: _t('editor.layers.analysis-form.georeference.select-admin'),\n          searchPlaceholder: _t('editor.layers.analysis-form.georeference.enter-region-name')\n        }\n      },\n      admin_region_column: {\n        type: 'Select',\n        title: _t('editor.layers.analysis-form.admin-region'),\n        options: this._columnOptions.filterByType('string'),\n        dialogMode: DialogConstants.Mode.FLOAT,\n        help: _t('editor.layers.analysis-form.georeference.admin-region-help'),\n        validators: this._getFieldValidator('admin_region'),\n        editorAttrs: this._getFieldAttrs('admin_region'),\n        placeholder: _t('editor.layers.analysis-form.georeference.select-admin'),\n        searchPlaceholder: _t('editor.layers.analysis-form.search-by-column-name')\n      },\n      country_column: {\n        type: 'Select',\n        title: _t('editor.layers.analysis-form.country'),\n        options: this._columnOptions.filterByType('string'),\n        dialogMode: DialogConstants.Mode.FLOAT,\n        help: _t('editor.layers.analysis-form.georeference.country-help'),\n        validators: this._getFieldValidator('country_column'),\n        editorAttrs: this._getFieldAttrs('country_column'),\n        placeholder: _t('editor.layers.analysis-form.georeference.select-a-country'),\n        searchPlaceholder: _t('editor.layers.analysis-form.search-by-column-name')\n      },\n      city: {\n        type: 'EnablerEditor',\n        title: '',\n        label: _t('editor.layers.analysis-form.city'),\n        help: _t('editor.layers.analysis-form.georeference.city-extended-help'),\n        validators: this._getFieldValidator('city'),\n        editor: {\n          type: 'Select',\n          options: this._getColumnOptions('city', 'string'),\n          dialogMode: DialogConstants.Mode.FLOAT,\n          editorAttrs: this._getFieldAttrs('city'),\n          placeholder: _t('editor.layers.analysis-form.georeference.select-city'),\n          searchPlaceholder: _t('editor.layers.analysis-form.georeference.enter-city-name')\n        }\n      },\n      city_column: {\n        type: 'Select',\n        title: _t('editor.layers.analysis-form.city'),\n        options: this._columnOptions.filterByType('string'),\n        dialogMode: DialogConstants.Mode.FLOAT,\n        help: _t('editor.layers.analysis-form.georeference.city-help'),\n        validators: this._getFieldValidator('city_column'),\n        editorAttrs: this._getFieldAttrs('city_column'),\n        placeholder: _t('editor.layers.analysis-form.georeference.select-city'),\n        searchPlaceholder: _t('editor.layers.analysis-form.search-by-column-name')\n      },\n      postal_code_column: {\n        type: 'Select',\n        title: _t('editor.layers.analysis-form.postal-code'),\n        options: this._columnOptions.filterByType(['string', 'number']),\n        dialogMode: DialogConstants.Mode.FLOAT,\n        help: _t('editor.layers.analysis-form.georeference.postal-code-help'),\n        validators: this._getFieldValidator('postal_code_column'),\n        placeholder: _t('editor.layers.analysis-form.georeference.select-postal-code'),\n        searchPlaceholder: _t('editor.layers.analysis-form.search-by-column-name')\n      },\n      ip_address: {\n        type: 'Select',\n        title: _t('editor.layers.analysis-form.georeference.ip-address-column'),\n        options: this._columnOptions.filterByType('string'),\n        dialogMode: DialogConstants.Mode.FLOAT,\n        help: _t('editor.layers.analysis-form.georeference.ip-address-help'),\n        validators: this._getFieldValidator('ip_address'),\n        placeholder: _t('editor.layers.analysis-form.georeference.select-ip'),\n        searchPlaceholder: _t('editor.layers.analysis-form.search-by-column-name')\n      },\n      street_address_template: {\n        type: 'CodeEditor',\n        title: '',\n        label: '',\n        tokens: this._getColumnHints(this._columnOptions.filterByType(['string', 'number'])),\n        validators: this._getFieldValidator('street_address_template'),\n        placeholder: '{{street_number}} {{street_name}}, {{postal_code}} {{country}}'\n      },\n      street_address_column: {\n        type: 'Select',\n        title: _t('editor.layers.analysis-form.georeference.street-address-column'),\n        options: this._columnOptions.filterByType('string'),\n        dialogMode: DialogConstants.Mode.FLOAT,\n        help: _t('editor.layers.analysis-form.georeference.street-address-column-help'),\n        validators: this._getFieldValidator('street_address_column'),\n        placeholder: _t('editor.layers.analysis-form.georeference.select-street-address'),\n        searchPlaceholder: _t('editor.layers.analysis-form.search-by-column-name')\n      },\n      state: {\n        type: 'EnablerEditor',\n        title: '',\n        label: _t('editor.layers.analysis-form.state'),\n        help: _t('editor.layers.analysis-form.georeference.state-help'),\n        validators: this._getFieldValidator('state'),\n        editor: {\n          type: 'Select',\n          options: this._getColumnOptions('state', 'string'),\n          dialogMode: DialogConstants.Mode.FLOAT,\n          editorAttrs: this._getFieldAttrs('state'),\n          placeholder: _t('editor.layers.analysis-form.georeference.select-state'),\n          searchPlaceholder: _t('editor.layers.analysis-form.georeference.enter-state-name')\n        }\n      },\n      country: {\n        type: 'EnablerEditor',\n        title: '',\n        label: _t('editor.layers.analysis-form.country'),\n        help: _t('editor.layers.analysis-form.georeference.country-extended-help'),\n        validators: this._getFieldValidator('country'),\n        editor: {\n          type: 'Select',\n          options: this._getColumnOptions('country', 'string'),\n          dialogMode: DialogConstants.Mode.FLOAT,\n          editorAttrs: this._getFieldAttrs('country'),\n          placeholder: _t('editor.layers.analysis-form.georeference.select-country'),\n          searchPlaceholder: _t('editor.layers.analysis-form.georeference.enter-country-name')\n        }\n      },\n      postal_code_country: {\n        type: 'Suggest',\n        title: _t('editor.layers.analysis-form.country'),\n        options: this._columnOptions.filterByType('string'),\n        dialogMode: DialogConstants.Mode.FLOAT,\n        help: _t('editor.layers.analysis-form.georeference.country-extended-help'),\n        validators: this._getFieldValidator('postal_code_country'),\n        editorAttrs: this._getFieldAttrs('postal_code_country'),\n        placeholder: _t('editor.layers.analysis-form.georeference.select-country'),\n        searchPlaceholder: _t('editor.layers.analysis-form.georeference.enter-country-name')\n      }\n    }));\n  },\n\n  _onTypeChanged: function () {\n    this._replaceAttrs();\n    this._setSchema();\n  },\n\n  _replaceAttrs: function () {\n    var attrs = this.parse(this.attributes);\n    this.clear({silent: true});\n    this.set({\n      type: attrs.type,\n      context: attrs.context\n    }, { silent: true }); // re-set type to avoid change:type change:context event to trigger again\n    this.set(attrs);\n  },\n\n  _typeDef: function (type) {\n    type = type || this.get('type');\n    return TYPE_TO_META_MAP[type];\n  },\n\n  _getFieldAttrs: function (fieldName) {\n    return this._typeDef() && this._typeDef().fieldAttrs[fieldName];\n  },\n\n  _getFieldValidator: function (fieldName) {\n    return this._typeDef() && this._typeDef().validatorFor[fieldName] || null;\n  },\n\n  _getColumnHints: function (columns) {\n    if (!columns) {\n      return [];\n    }\n\n    return [{\n      keywords: columns.map(function (column) { return column.val; }).join(' '),\n      type: 'Column_name'\n    }];\n  },\n\n  _getColumnOptions: function (attr, attrType) {\n    var opts = this._columnOptions.filterByType(attrType);\n\n    if (this._columnOptions.get('columnsFetched') && this.get(attr)) {\n      var attrExists = false;\n      var value = this.get(attr);\n\n      var customValue = {\n        val: value,\n        label: '\"' + value + '\"'\n      };\n\n      if (opts && opts.length) {\n        attrExists = _.find(opts, function (attr) {\n          return attr.val === customValue.val;\n        });\n      }\n\n      if (!attrExists) {\n        opts.push(customValue);\n        opts = _.sortBy(opts, function (d) {\n          return d.val;\n        });\n      }\n    }\n    return opts;\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<form>\\n  <div class=\"Editor-HeaderInfo\">\\n    <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">1</div>\\n    <div class=\"Editor-HeaderInfo-inner CDB-Text\">\\n      <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n        <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.layers.analysis-form.select-type') ) +\n'</h2>\\n      </div>\\n      <div class=\"Editor-HeaderInfo-subtitle u-bSpace--m\">\\n        <p class=\"CDB-Text CDB-FontSize-small u-upperCase u-altTextColor\">' +\n__e( _t('editor.layers.analysis-form.georeference.description') ) +\n'</p>\\n      </div>\\n      <div class=\"u-tSpace-xl CDB-Text CDB-Fieldset\">\\n        <p class=\"CDB-Legend u-upperCase u-iBlock CDB-Text is-semibold CDB-Size-small u-rSpace--m\">' +\n__e( _t('editor.layers.analysis-form.base-layer') ) +\n'</p>\\n        <div class=\"Editor-formInput u-ellipsis\" data-editors=\"source\"></div>\\n      </div>\\n      <div class=\"u-tSpace-xl CDB-Text CDB-Fieldset\">\\n        <p class=\"CDB-Legend u-upperCase u-iBlock CDB-Text is-semibold CDB-Size-small u-rSpace--m\">' +\n__e( _t('editor.layers.analysis-form.data-type') ) +\n'</p>\\n        <div class=\"Editor-formInput\" data-editors=\"type\"></div>\\n      </div>\\n    </div>\\n  </div>\\n  <div class=\"Editor-HeaderInfo ' +\n__e( hasType ? '' : 'is-disabled' ) +\n'\">\\n    <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">2</div>\\n    <div class=\"Editor-HeaderInfo-inner CDB-Text\" data-fields=\"' +\n((__t = ( parametersDataFields )) == null ? '' : __t) +\n'\">\\n      <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n        <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.layers.analysis-form.parameters') ) +\n'</h2>\\n      </div>\\n      <p class=\"CDB-Text u-upperCase CDB-FontSize-small u-altTextColor u-bSpace--xl\">' +\n__e( _t('editor.layers.analysis-form.tune-analysis') ) +\n'</p>\\n    </div>\\n  </div>\\n</form>\\n';\n\n}\nreturn __p\n}","module.exports = {\n  type: 'georeference-ip-address',\n  label: _t('editor.layers.analysis-form.georeference.ip-address'),\n  fieldAttrs: {\n    ip_address: {\n      showSearch: true\n    }\n  },\n\n  validatorFor: {\n    ip_address: ['required']\n  },\n\n  parametersDataFields: 'ip_address',\n\n  getParameters: function () {\n    var params = this.parametersDataFields;\n\n    return params;\n  },\n\n  parse: function (nodeAttrs) {\n    return {\n      type: 'georeference-ip-address',\n      ip_address: nodeAttrs.ip_address\n    };\n  },\n\n  formatAttrs: function (formAttrs) {\n    return formAttrs;\n  }\n};\n","module.exports = {\n  type: 'georeference-long-lat',\n  label: _t('editor.layers.analysis-form.georeference.long-lat'),\n  parametersDataFields: 'latitude,longitude',\n  fieldAttrs: {\n    latitude: {\n      showSearch: true\n    },\n    longitude: {\n      showSearch: true\n    }\n  },\n\n  validatorFor: {\n    latitudde: ['required'],\n    longitude: ['required']\n  },\n\n  parse: function (nodeAttrs) {\n    return {\n      type: 'georeference-long-lat',\n      latitude: nodeAttrs.latitude,\n      longitude: nodeAttrs.longitude\n    };\n  },\n\n  getParameters: function () {\n    var params = this.parametersDataFields;\n\n    return params;\n  },\n\n  formatAttrs: function (formAttrs) {\n    return formAttrs;\n  }\n};\n","module.exports = {\n  type: 'georeference-placeholder',\n  label: null,\n  keyAttr: 'label',\n  parametersDataFields: 'latitude,longitude',\n  fieldAttrs: {\n    latitude: {\n      showSearch: true\n    },\n    longitude: {\n      showSearch: true\n    }\n  },\n\n  validatorFor: {\n  },\n\n  parse: function (nodeAttrs) {\n    return {\n      type: 'georeference-placeholder',\n      latitude: null,\n      longitude: null\n    };\n  },\n\n  getParameters: function () {\n    var params = this.parametersDataFields;\n\n    return params;\n  },\n\n  formatAttrs: function (formAttrs) {\n    return formAttrs;\n  }\n};\n","module.exports = {\n  type: 'georeference-postal-code',\n  label: _t('editor.layers.analysis-form.georeference.postal-code'),\n  fieldAttrs: {\n    postal_code_column: {\n      showSearch: true\n    },\n    postal_code_country: {\n      showSearch: true,\n      allowFreeTextInput: true\n    }\n  },\n\n  validatorFor: {\n    postal_code_column: ['required'],\n    postal_code_country: ['required']\n  },\n\n  parametersDataFields: 'postal_code_column,postal_code_country',\n\n  getParameters: function () {\n    var params = this.parametersDataFields;\n\n    return params;\n  },\n\n  parse: function (nodeAttrs) {\n    return {\n      type: 'georeference-postal-code',\n      postal_code_column: nodeAttrs.postal_code_column || '',\n      postal_code_country: nodeAttrs.postal_code_country || nodeAttrs.country_column || ''\n    };\n  },\n\n  formatAttrs: function (formAttrs, columnOptions) {\n    if (formAttrs.postal_code_country && columnOptions.findColumn(formAttrs.postal_code_country, 'string')) {\n      formAttrs.country_column = formAttrs.postal_code_country;\n      delete formAttrs.postal_code_country;\n    } else {\n      formAttrs.country = formAttrs.postal_code_country;\n      delete formAttrs.country_column;\n    }\n    return formAttrs;\n  }\n};\n","var _ = require('underscore');\n\nvar PARAMETERS_FOR_CONTEXT = {\n  'normal': 'street_address_column,context,city,state,country',\n  'advance': 'street_address_template,context,city,state,country'\n};\n\nmodule.exports = {\n  type: 'georeference-street-address',\n  label: _t('editor.layers.analysis-form.georeference.street-address'),\n  fieldAttrs: {\n    street_address_column: {\n      showSearch: true\n    },\n    city: {\n      showSearch: true,\n      allowFreeTextInput: true\n    },\n    state: {\n      showSearch: true,\n      allowFreeTextInput: true\n    },\n    country: {\n      showSearch: true,\n      allowFreeTextInput: true\n    }\n  },\n\n  validatorFor: {\n    street_address_column: ['required'],\n    street_address_template: ['required']\n  },\n\n  parse: function (nodeAttrs) {\n    var attrs = {\n      type: 'georeference-street-address',\n      city: nodeAttrs.city || nodeAttrs.city_column || '',\n      state: nodeAttrs.state || nodeAttrs.state_column || '',\n      country: nodeAttrs.country || nodeAttrs.country_column || ''\n    };\n\n    if (nodeAttrs.context === 'advance') {\n      attrs.street_address_template = nodeAttrs.street_address_column && this._wrapInBraces(nodeAttrs.street_address_column) || nodeAttrs.street_address_template || '';\n    } else {\n      attrs.street_address_column = nodeAttrs.street_address_column || '';\n    }\n\n    return attrs;\n  },\n\n  _wrapInBraces: function (fragments) {\n    return ['{{', fragments, '}}'].join('');\n  },\n\n  getParameters: function (context) {\n    if (!context) {\n      context = 'normal';\n    }\n    return PARAMETERS_FOR_CONTEXT[context];\n  },\n\n  formatAttrs: function (formAttrs, columnOptions) {\n    _.each(['city', 'state', 'country'], function (attr) {\n      if (formAttrs[attr] && columnOptions.findColumn(formAttrs[attr], 'string')) {\n        formAttrs[attr + '_column'] = formAttrs[attr];\n        delete formAttrs[attr];\n      } else {\n        delete formAttrs[attr + '_column'];\n      }\n    }, this);\n\n    return formAttrs;\n  }\n};\n","module.exports = [\n  require('./georeference-placeholder'),\n  require('./georeference-long-lat-model'),\n  require('./georeference-city-model'),\n  require('./georeference-country-model'),\n  require('./georeference-admin-region-model'),\n  require('./georeference-postal-code-model'),\n  require('./georeference-ip-address-model'),\n  require('./georeference-street-address-model')\n];\n","var _ = require('underscore');\nvar BaseAnalysisFormModel = require('./base-analysis-form-model');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar template = require('./group-points.tpl');\nvar ColumnOptions = require('builder/editor/layers/layer-content-views/analyses/column-options');\n\nvar ANALYSES_TYPES = require('./group-points-types');\n\nvar TYPE_TO_META_MAP = {};\nANALYSES_TYPES.map(function (d) {\n  TYPE_TO_META_MAP[d.type] = d;\n});\n\nmodule.exports = BaseAnalysisFormModel.extend({\n  parse: function (attrs) {\n    return _.defaults(\n      _.pick(attrs, 'id', 'source'), // maintain default attrs\n      this._typeDef(attrs.type).parse(attrs)\n    );\n  },\n\n  initialize: function () {\n    BaseAnalysisFormModel.prototype.initialize.apply(this, arguments);\n\n    this._columnOptions = new ColumnOptions({}, {\n      configModel: this._configModel,\n      nodeDefModel: this._layerDefinitionModel.findAnalysisDefinitionNodeModel(this.get('source'))\n    });\n\n    this.listenTo(this._columnOptions, 'columnsFetched', this._setSchema);\n    this.on('change:aggregate', this._updateAggregation, this);\n    this.on('change:type', this._onTypeChanged, this);\n\n    this._updateAggregation();\n    this._setSchema();\n  },\n\n  _updateAggregation: function () {\n    var aggregate = this.get('aggregate');\n\n    if (aggregate === '') {\n      this.set({aggregation: 'count', aggregation_column: ''});\n    } else {\n      this.set({aggregation_column: aggregate.attribute, aggregation: aggregate.operator});\n    }\n\n    this._setSchema();\n  },\n\n  _onTypeChanged: function () {\n    this._replaceAttrs();\n    this._setSchema();\n  },\n\n  _replaceAttrs: function () {\n    var attrs = this.parse(this.attributes);\n    this.clear({ silent: true });\n    this.set('type', attrs.type, { silent: true }); // re-set type to avoid change:type event to trigger again\n    this.set(_.extend(attrs, this.defaults));\n  },\n\n  updateNodeDefinition: function (nodeDefModel) {\n    var attrs = this._formatAttrs(this.attributes);\n    nodeDefModel.clear({ silent: true });\n    nodeDefModel.set(attrs);\n  },\n\n  _formatAttrs: function (formAttrs) {\n    var customFormattedFormAttrs = this._typeDef().formatAttrs(formAttrs, this._columnOptions);\n    return BaseAnalysisFormModel.prototype._formatAttrs.call(this, customFormattedFormAttrs);\n  },\n\n  getTemplate: function () {\n    return template;\n  },\n\n  getTemplateData: function () {\n    return {\n      parametersDataFields: this._typeDef().parametersDataFields\n    };\n  },\n\n  _filterSchemaFieldsByType: function (schema) {\n    // Always include the source field in addition to the type-specific fields\n    var fields = ['source', 'type', 'aggregate'].concat(this._typeDef().parametersDataFields.split(','));\n    return _.pick(schema, fields);\n  },\n\n  /**\n   * @override {BaseAnalysisFormModel._setSchema}\n   */\n  _setSchema: function () {\n    BaseAnalysisFormModel.prototype._setSchema.call(this, this._filterSchemaFieldsByType({\n      source: this._primarySourceSchemaItem(),\n      type: {\n        type: 'Select',\n        title: _t('editor.layers.analysis-form.method'),\n        options: ANALYSES_TYPES.map(function (d) {\n          return {\n            val: d.type,\n            label: d.label\n          };\n        }, this),\n        dialogMode: DialogConstants.Mode.FLOAT\n      },\n      target_percentage: {\n        type: 'Number',\n        title: _t('editor.layers.analysis-form.target-percent'),\n        help: _t('editor.layers.analysis-form.target-percent-help'),\n        validators: ['required', {\n          type: 'interval',\n          min: 0,\n          max: 100\n        }]\n      },\n      allow_holes: {\n        type: 'Radio',\n        title: _t('editor.layers.analysis-form.allow-holes'),\n        options: [\n          { val: false, label: _t('editor.layers.analysis-form.no') },\n          { val: true, label: _t('editor.layers.analysis-form.yes') }\n        ]\n      },\n      category_column: {\n        type: 'EnablerEditor',\n        title: '',\n        label: _t('editor.layers.analysis-form.group-by'),\n        editor: {\n          type: 'Select',\n          options: this._columnOptions.all(),\n          dialogMode: DialogConstants.Mode.FLOAT,\n          editorAttrs: {\n            showLabel: false\n          }\n        }\n      },\n      aggregate: {\n        type: 'Operators',\n        title: _t('editor.layers.analysis-form.operation'),\n        options: this._columnOptions.filterByType('number'),\n        dialogMode: DialogConstants.Mode.FLOAT\n      }\n    }));\n  },\n\n  _getColumnOptions: function (attr, attrType) {\n    var opts = this._columnOptions.filterByType(attrType);\n\n    if (this._columnOptions.get('columnsFetched') && this.get(attr)) {\n      var attrExists = false;\n      var value = this.get(attr);\n\n      var customValue = {\n        val: value,\n        label: '\"' + value + '\"'\n      };\n\n      if (opts && opts.length) {\n        attrExists = _.find(opts, function (attr) {\n          return attr.val === customValue.val;\n        });\n      }\n\n      if (!attrExists) {\n        opts.push(customValue);\n        opts = _.sortBy(opts, function (d) {\n          return d.val;\n        });\n      }\n    }\n    return opts;\n  },\n\n  _typeDef: function (type) {\n    type = type || this.get('type');\n    return TYPE_TO_META_MAP[type];\n  }\n});\n","module.exports = [\n  require('./group-points/convex-hull'),\n  require('./group-points/concave-hull'),\n  require('./group-points/bounding-circle'),\n  require('./group-points/bounding-box')\n];\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<form>\\n  <div class=\"Editor-HeaderInfo\">\\n    <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">1</div>\\n    <div class=\"Editor-HeaderInfo-inner CDB-Text\" data-fields=\"' +\n((__t = ( parametersDataFields )) == null ? '' : __t) +\n'\">\\n      <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n        <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.layers.analysis-form.parameters') ) +\n'</h2>\\n      </div>\\n      <div class=\"Editor-HeaderInfo-subtitle u-bSpace--m\">\\n        <p class=\"CDB-Text CDB-FontSize-small u-upperCase u-altTextColor\">' +\n__e( _t('editor.layers.analysis-form.parameters-description') ) +\n'</p>\\n      </div>\\n    </div>\\n  </div>\\n  <div class=\"Editor-HeaderInfo\">\\n    <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">2</div>\\n    <div class=\"Editor-HeaderInfo-inner CDB-Text\" data-fields=\"aggregate\">\\n      <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n        <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.layers.analysis-form.measure-by') ) +\n'</h2>\\n      </div>\\n      <p class=\"CDB-Text u-upperCase CDB-FontSize-small u-altTextColor u-bSpace--xl\">' +\n__e( _t('editor.layers.analysis-form.filter-aggregate') ) +\n'</p>\\n    </div>\\n  </div>\\n</form>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\n\nmodule.exports = {\n  type: 'bounding-box',\n  label: _t('editor.layers.analysis-form.bounding-box'),\n  parametersDataFields: 'source,type,category_column',\n\n  parse: function (nodeAttrs) {\n    if (!nodeAttrs.aggregation_column) {\n      nodeAttrs.aggregation_column = 'cartodb_id';\n    }\n    if (!nodeAttrs.aggregation) {\n      nodeAttrs.aggregation = 'count';\n    }\n    var aggregate = {\n      operator: nodeAttrs.aggregation,\n      attribute: nodeAttrs.aggregation === 'count' ? '' : nodeAttrs.aggregation_column\n    };\n\n    return {\n      type: 'bounding-box',\n      category_column: nodeAttrs.category_column,\n      aggregate: aggregate\n    };\n  },\n\n  formatAttrs: function (formAttrs) {\n    formAttrs = _.omit(formAttrs, 'aggregate');\n\n    if (!formAttrs.aggregation_column) {\n      formAttrs = _.omit(formAttrs, 'aggregation_column');\n    }\n\n    if (!formAttrs.category_column) {\n      formAttrs = _.omit(formAttrs, 'category_column');\n    }\n\n    return formAttrs;\n  }\n};\n","var _ = require('underscore');\n\nmodule.exports = {\n  type: 'bounding-circle',\n  label: _t('editor.layers.analysis-form.bounding-circle'),\n  parametersDataFields: 'source,type,category_column',\n\n  parse: function (nodeAttrs) {\n    if (!nodeAttrs.aggregation_column) {\n      nodeAttrs.aggregation_column = 'cartodb_id';\n    }\n    if (!nodeAttrs.aggregation) {\n      nodeAttrs.aggregation = 'count';\n    }\n    var aggregate = {\n      operator: nodeAttrs.aggregation,\n      attribute: nodeAttrs.aggregation === 'count' ? '' : nodeAttrs.aggregation_column\n    };\n    return {\n      type: 'bounding-circle',\n      category_column: nodeAttrs.category_column,\n      aggregate: aggregate\n    };\n  },\n\n  formatAttrs: function (formAttrs) {\n    formAttrs = _.omit(formAttrs, 'aggregate');\n\n    if (!formAttrs.aggregation_column) {\n      formAttrs = _.omit(formAttrs, 'aggregation_column');\n    }\n\n    if (!formAttrs.category_column) {\n      formAttrs = _.omit(formAttrs, 'category_column');\n    }\n\n    return formAttrs;\n  }\n};\n","var _ = require('underscore');\n\nmodule.exports = {\n  type: 'concave-hull',\n  label: _t('editor.layers.analysis-form.concave-hull'),\n  parametersDataFields: 'source,type,target_percentage,allow_holes,category_column',\n\n  parse: function (nodeAttrs) {\n    if (!nodeAttrs.aggregation_column) {\n      nodeAttrs.aggregation_column = 'cartodb_id';\n    }\n    if (!nodeAttrs.aggregation) {\n      nodeAttrs.aggregation = 'count';\n    }\n\n    var aggregate = {\n      operator: nodeAttrs.aggregation,\n      attribute: nodeAttrs.aggregation === 'count' ? '' : nodeAttrs.aggregation_column\n    };\n\n    var target_percentage = 70;\n\n    if (nodeAttrs.target_percent === 0) {\n      target_percentage = 0;\n    } else if (nodeAttrs.target_percent) {\n      target_percentage = nodeAttrs.target_percent * 100;\n    }\n\n    return {\n      type: 'concave-hull',\n      target_percentage: target_percentage,\n      category_column: nodeAttrs.category_column,\n      aggregate: aggregate\n    };\n  },\n\n  formatAttrs: function (formAttrs) {\n    formAttrs = _.omit(formAttrs, 'aggregate');\n\n    formAttrs.target_percent = formAttrs.target_percentage / 100;\n    formAttrs = _.omit(formAttrs, 'target_percentage');\n\n    if (!formAttrs.aggregation_column) {\n      formAttrs = _.omit(formAttrs, 'aggregation_column');\n    }\n\n    if (!formAttrs.allow_holes) {\n      formAttrs = _.omit(formAttrs, 'allow_holes');\n    }\n\n    if (!formAttrs.category_column) {\n      formAttrs = _.omit(formAttrs, 'category_column');\n    }\n\n    return formAttrs;\n  }\n};\n","var _ = require('underscore');\n\nmodule.exports = {\n  type: 'convex-hull',\n  label: _t('editor.layers.analysis-form.convex-hull'),\n  parametersDataFields: 'source,type,category_column',\n\n  parse: function (nodeAttrs) {\n    if (!nodeAttrs.aggregation_column) {\n      nodeAttrs.aggregation_column = 'cartodb_id';\n    }\n    if (!nodeAttrs.aggregation) {\n      nodeAttrs.aggregation = 'count';\n    }\n    var aggregate = {\n      operator: nodeAttrs.aggregation,\n      attribute: nodeAttrs.aggregation === 'count' ? '' : nodeAttrs.aggregation_column\n    };\n    return {\n      type: 'convex-hull',\n      category_column: nodeAttrs.category_column,\n      aggregate: aggregate\n    };\n  },\n\n  formatAttrs: function (formAttrs) {\n    formAttrs = _.omit(formAttrs, 'aggregate');\n\n    if (!formAttrs.aggregation_column) {\n      formAttrs = _.omit(formAttrs, 'aggregation_column');\n    }\n\n    if (!formAttrs.category_column) {\n      formAttrs = _.omit(formAttrs, 'category_column');\n    }\n\n    return formAttrs;\n  }\n};\n","var BaseAnalysisFormModel = require('./base-analysis-form-model');\nvar template = require('./kmeans-form.tpl');\n\n/**\n * Form model for a means analysis\n * It has a rather complicated schema, that depends on several data points and state.\n */\nmodule.exports = BaseAnalysisFormModel.extend({\n  defaults: {\n    clusters: 2\n  },\n\n  initialize: function () {\n    BaseAnalysisFormModel.prototype.initialize.apply(this, arguments);\n\n    this._setSchema();\n  },\n\n  getTemplate: function () {\n    return template;\n  },\n\n  /**\n   * @override {BaseAnalysisFormModel._setSchema}\n   */\n  _setSchema: function () {\n    BaseAnalysisFormModel.prototype._setSchema.call(this, {\n      source: this._primarySourceSchemaItem(),\n      clusters: {\n        type: 'Number',\n        title: _t('editor.layers.analysis-form.clusters-num'),\n        validators: ['required', {\n          type: 'interval',\n          min: 2,\n          max: 16\n        }]\n      }\n    });\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<form>\\n  <div class=\"Editor-HeaderInfo\">\\n    <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">1</div>\\n    <div class=\"Editor-HeaderInfo-inner CDB-Text\">\\n      <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n        <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.layers.analysis-form.parameters') ) +\n'</h2>\\n      </div>\\n      <div class=\"Editor-HeaderInfo-subtitle u-bSpace--m\">\\n        <p class=\"CDB-Text CDB-FontSize-small u-upperCase u-altTextColor\">' +\n__e( _t('editor.layers.analysis-form.tune-clusters') ) +\n'</p>\\n      </div>\\n      <div data-fields=\"source,clusters\"></div>\\n    </div>\\n  </div>\\n</form>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar BaseAnalysisFormModel = require('./base-analysis-form-model');\nvar template = require('./merge-form.tpl');\nvar ColumnOptions = require('builder/editor/layers/layer-content-views/analyses/column-options');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar MERGE_FIELDS = 'join_operator,left_source_column,right_source_column,source_geometry_selector,left_source_columns,right_source_columns';\n\n/**\n * Form model for the merge analysis\n */\nmodule.exports = BaseAnalysisFormModel.extend({\n  defaults: {\n    join_operator: 'inner',\n    source_geometry: 'left_source',\n    right_source_columns: []\n  },\n\n  parse: function (attrs) {\n    if (attrs.source_geometry === 'left_source' || !attrs.source_geometry) {\n      attrs.source_geometry_selector = attrs.left_source;\n    } else {\n      attrs.source_geometry_selector = attrs.right_source;\n    }\n\n    return attrs;\n  },\n\n  initialize: function (attrs, options) {\n    BaseAnalysisFormModel.prototype.initialize.call(this, attrs, options);\n\n    this.on('change', this._onChange, this);\n\n    this._leftColumnOptions = new ColumnOptions({}, {\n      configModel: this._configModel\n    });\n\n    this._rightColumnOptions = new ColumnOptions({}, {\n      configModel: this._configModel\n    });\n\n    this.listenTo(this._analysisSourceOptionsModel, 'change:fetching', this._setSchema);\n\n    this.listenTo(this._leftColumnOptions, 'columnsFetched', this._setSchema);\n    this.listenTo(this._rightColumnOptions, 'columnsFetched', this._setSchema);\n\n    this.on('change:type', this._setSchema, this);\n    this.on('change:right_source', this._onChangeRightSource, this);\n    this.on('change:join_operator, change:right_source, change:left_source_column, change:right_source_column', this._setSchema, this);\n\n    this._setSchema();\n    this._fetchLeftColumns();\n    this._fetchRightColumns();\n  },\n\n  _getFormFieldNames: function () {\n    return MERGE_FIELDS;\n  },\n\n  _getFormatFieldNames: function () {\n    return MERGE_FIELDS;\n  },\n\n  _formatAttrs: function (formAttrs) {\n    var customFormattedFormAttrs = _.pick(formAttrs, ['id', 'type', 'left_source', 'right_source'].concat(this._getFormatFieldNames().split(',')));\n\n    if (this.get('left_source') === this.get('source_geometry_selector')) {\n      customFormattedFormAttrs.source_geometry = 'left_source';\n    } else {\n      customFormattedFormAttrs.source_geometry = 'right_source';\n    }\n\n    if (!formAttrs.left_source_columns) {\n      customFormattedFormAttrs.left_source_columns = [];\n    }\n\n    if (!formAttrs.right_source_columns) {\n      customFormattedFormAttrs.right_source_columns = [];\n    }\n\n    return BaseAnalysisFormModel.prototype._formatAttrs.call(this, customFormattedFormAttrs);\n  },\n\n  getTemplate: function () {\n    return template;\n  },\n\n  getTemplateData: function () {\n    return {\n      right_source: this.get('right_source'),\n      hasLeftAndRightSourceColumns: this.get('left_source_column') && this.get('right_source_column')\n    };\n  },\n\n  _filterSchemaFieldsByType: function (schema) {\n    // Always include the source and target fields in addition to the type-specific fields\n    return _.pick(schema, ['left_source', 'right_source'].concat(this._getFormFieldNames().split(',')));\n  },\n\n  _onChangeRightSource: function () {\n    this._fetchRightColumns();\n    this.unset('right_source_column');\n    this.set('right_source_columns', []);\n  },\n\n  /**\n   * @override {BaseAnalysisFormModel._setSchema}\n   */\n  _setSchema: function () {\n    var schemaFields = {\n      left_source: this._primarySourceSchemaItem(_t('editor.layers.analysis-form.base-layer')),\n      right_source: {\n        type: 'NodeDataset',\n        title: _t('editor.layers.analysis-form.target'),\n        options: this._getSourceOptionsForSource('right_source', '*'),\n        dialogMode: DialogConstants.Mode.FLOAT,\n        validators: ['required'],\n        editorAttrs: {\n          disabled: this._isSourceDisabled('right_source'),\n          placeholder: _t('editor.layers.analysis-form.select-data-source')\n        }\n      },\n      join_operator: {\n        type: 'Radio',\n        title: _t('editor.layers.analysis-form.join-type'),\n        options: [\n          { label: _t('editor.layers.analysis-form.append'), val: 'left', help: _t('editor.layers.analysis-form.append-help') },\n          { label: _t('editor.layers.analysis-form.intersect'), val: 'inner', help: _t('editor.layers.analysis-form.intersect-help') }\n        ],\n        validators: ['required']\n      },\n      source_geometry_selector: {\n        type: 'NodeDataset',\n        title: _t('editor.layers.analysis-form.geometry-from'),\n        options: this._getSourcesSelector(),\n        dialogMode: DialogConstants.Mode.FLOAT,\n        editorAttrs: {\n          disabled: this._isSourceDisabled('right_source')\n        }\n      },\n      left_source_columns: {\n        type: 'MultiSelect',\n        title: _t('editor.layers.analysis-form.base-data'),\n        options: this._leftColumnOptions.filterByType(['string', 'number', 'date', 'boolean']),\n        dialogMode: DialogConstants.Mode.FLOAT\n      },\n      right_source_columns: {\n        type: 'MultiSelect',\n        title: _t('editor.layers.analysis-form.target-data'),\n        options: this._rightColumnOptions.filterByType(['string', 'number', 'date', 'boolean']),\n        dialogMode: DialogConstants.Mode.FLOAT\n      }\n    };\n\n    schemaFields['left_source_column'] = {\n      type: 'Select',\n      title: _t('editor.layers.analysis-form.source-column'),\n      options: this._leftColumnOptions.all(),\n      dialogMode: DialogConstants.Mode.FLOAT,\n      validators: this.get('right_source') ? ['required'] : [],\n      editorAttrs: {\n        placeholder: _t('editor.layers.analysis-form.select-column')\n      }\n    };\n\n    schemaFields['right_source_column'] = {\n      type: 'Select',\n      title: _t('editor.layers.analysis-form.target-column'),\n      options: this._rightColumnOptions.all(),\n      dialogMode: DialogConstants.Mode.FLOAT,\n      validators: this.get('right_source') ? ['required', this._validateRightSourceColumn.bind(this)] : [],\n      editorAttrs: {\n        placeholder: _t('editor.layers.analysis-form.select-column')\n      }\n    };\n\n    BaseAnalysisFormModel.prototype._setSchema.call(this, this._filterSchemaFieldsByType(schemaFields));\n  },\n\n  _validateRightSourceColumn: function (value, formValues) {\n    var leftColumnValue = formValues.left_source_column;\n    var rightColumnValue = formValues.right_source_column;\n\n    // if we don't have both fields we don't validate\n    if (leftColumnValue === void 0 || rightColumnValue === void 0) return null;\n\n    var error = {\n      message: _t('editor.layers.analysis-form.should-match')\n    };\n\n    var leftColumn = this._leftColumnOptions.findColumn(leftColumnValue);\n    var leftColumnType = leftColumn && leftColumn.type;\n\n    var rightColumn = this._rightColumnOptions.findColumn(rightColumnValue);\n    var rightColumnType = rightColumn && rightColumn.type;\n\n    if (leftColumnType === rightColumnType) {\n      return null; // types match\n    }\n\n    return error;\n  },\n\n  _fetchColumns: function (sourceName, columnOptions) {\n    var source = this.get(sourceName);\n\n    var nodeDefModel = this._layerDefinitionModel.findAnalysisDefinitionNodeModel(source);\n\n    if (nodeDefModel) {\n      columnOptions.setNode(nodeDefModel);\n    } else if (source) {\n      columnOptions.setDataset(source);\n    }\n  },\n\n  _fetchLeftColumns: function () {\n    this._fetchColumns('left_source', this._leftColumnOptions);\n  },\n\n  _fetchRightColumns: function () {\n    this._fetchColumns('right_source', this._rightColumnOptions);\n  },\n\n  _isSourceDisabled: function (sourceAttrName) {\n    return this._isPrimarySource(sourceAttrName) || this._isFetchingOptions();\n  },\n\n  _getSourcesSelector: function () {\n    return _.compact([this._getSourceOption()[0], this._getRightSource()]);\n  },\n\n  _getRightSource: function () {\n    if (this.get('right_source')) {\n      var source = this._getSourceOptionsForSourceId(this.get('right_source'), 'right_source', '*');\n      if (source) {\n        return {\n          val: this.get('right_source'),\n          type: source.type,\n          nodeTitle: source.nodeTitle,\n          layerName: source.layerName,\n          color: source.color\n        };\n      }\n    }\n  },\n\n  _getSourceOptionsForSourceId: function (sourceId, sourceAttrName, requiredSimpleGeometryType) {\n    var options = this._analysisSourceOptionsModel.getSelectOptions(requiredSimpleGeometryType);\n    var searchFn = function (d) {\n      // Can't select own layer as source, so exclude it\n      return d.val === sourceId;\n    };\n\n    if (options.find) {\n      return options.find(searchFn);\n    } else {\n      return _.find(options, searchFn);\n    }\n  },\n\n  _getSourceOptionsForSource: function (sourceAttrName, requiredSimpleGeometryType) {\n    var currentSource = this.get(sourceAttrName);\n    var nodeOptions = this._analysisSourceOptionsModel.getSelectOptions(requiredSimpleGeometryType);\n\n    if (this._isFetchingOptions() && nodeOptions.length === 0) {\n      return [{\n        val: currentSource,\n        label: _t('editor.layers.analysis-form.loading'),\n        isLoading: true\n      }];\n    } else {\n      // fetched or populated\n      var source = this._getSourceOption()[0];\n      return this._analysisSourceOptionsModel\n        .getSelectOptions(requiredSimpleGeometryType)\n        .filter(function (d) {\n          return d.val !== source.val && d.val !== source.layerName;\n        });\n    }\n  },\n\n  _getSourceOption: function () {\n    var leftSourceId = this.get('left_source');\n    var nodeDefModel = this._layerDefinitionModel.findAnalysisDefinitionNodeModel(leftSourceId);\n    var layerName = nodeDefModel && nodeDefModel.isSourceType()\n      ? this._layerDefinitionModel.getTableName()\n      : this._layerDefinitionModel.getName();\n\n    return [{\n      val: leftSourceId,\n      type: 'node',\n      nodeTitle: this._analyses.short_title(nodeDefModel),\n      layerName: layerName,\n      color: nodeDefModel && nodeDefModel.getColor(),\n      isSourceType: nodeDefModel && nodeDefModel.isSourceType()\n    }];\n  },\n\n  _onChange: function () {\n    var changedSourceId = this.changed.left_source || this.changed.right_source;\n    if (changedSourceId) {\n      this._analysisSourceOptionsModel.createSourceNodeUnlessExisting(changedSourceId);\n    }\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<form>\\n  <div class=\"Editor-HeaderInfo\">\\n    <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">1</div>\\n    <div class=\"Editor-HeaderInfo-inner CDB-Text\" data-fields=\"left_source,right_source,join_operator\">\\n      <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n        <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.layers.analysis-form.merge-step-one-title') ) +\n'</h2>\\n      </div>\\n      <div class=\"Editor-HeaderInfo-subtitle u-bSpace--m\">\\n        <p class=\"CDB-Text CDB-FontSize-small u-upperCase u-altTextColor\">' +\n__e( _t('editor.layers.analysis-form.target-layer-dataset') ) +\n'</p>\\n      </div>\\n    </div>\\n  </div>\\n    <div class=\"Editor-HeaderInfo ' +\n__e( right_source ? '' : 'is-disabled' ) +\n'\">\\n      <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">2</div>\\n      <div class=\"Editor-HeaderInfo-inner CDB-Text\" data-fields=\"left_source_column,right_source_column\">\\n        <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n          <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.layers.analysis-form.key-columns') ) +\n'</h2>\\n        </div>\\n        <p class=\"CDB-Text u-upperCase CDB-FontSize-small u-altTextColor u-bSpace--xl\">' +\n__e( _t('editor.layers.analysis-form.key-columns-desc') ) +\n'</p>\\n      </div>\\n    </div>\\n    <div class=\"Editor-HeaderInfo ' +\n__e( hasLeftAndRightSourceColumns ? '' : 'is-disabled' ) +\n'\">\\n      <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">3</div>\\n      <div class=\"Editor-HeaderInfo-inner CDB-Text\" data-fields=\"source_geometry_selector,left_source_columns,right_source_columns\">\\n        <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n          <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.layers.analysis-form.output-data') ) +\n'</h2>\\n        </div>\\n        <p class=\"CDB-Text u-upperCase CDB-FontSize-small u-altTextColor u-bSpace--xl\">' +\n__e( _t('editor.layers.analysis-form.keep-data') ) +\n'</p>\\n      </div>\\n    </div>\\n</form>\\n';\n\n}\nreturn __p\n}","var BaseAnalysisFormModel = require('./base-analysis-form-model');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar template = require('./moran-form.tpl');\nvar ColumnOptions = require('builder/editor/layers/layer-content-views/analyses/column-options');\n\n/**\n * Form model for a moran analysis\n * It has a rather complicated schema, that depends on several data points and state.\n */\nmodule.exports = BaseAnalysisFormModel.extend({\n  defaults: {\n    significance: 0.05,\n    neighbours: 5,\n    permutations: 99,\n    w_type: 'knn'\n  },\n\n  initialize: function () {\n    BaseAnalysisFormModel.prototype.initialize.apply(this, arguments);\n\n    this._columnOptions = new ColumnOptions({}, {\n      configModel: this._configModel,\n      nodeDefModel: this._layerDefinitionModel.findAnalysisDefinitionNodeModel(this.get('source'))\n    });\n\n    this.listenTo(this._columnOptions, 'columnsFetched', this._setSchema);\n\n    this._setSchema();\n  },\n\n  getTemplate: function () {\n    return template;\n  },\n\n  /*\n  /**\n   * @override {BaseAnalysisFormModel._setSchema}\n   */\n  _setSchema: function () {\n    var schema = {\n      source: this._primarySourceSchemaItem(),\n      numerator_column: {\n        type: 'Select',\n        title: _t('editor.layers.analysis-form.numerator'),\n        placeholder: _t('editor.layers.analysis-form.select-column'),\n        options: this._columnOptions.filterByType('number'),\n        dialogMode: DialogConstants.Mode.FLOAT,\n        help: _t('editor.layers.analysis-form.numerator-help')\n      },\n      denominator_column: {\n        type: 'EnablerEditor',\n        title: '',\n        label: _t('editor.layers.analysis-form.normalize'),\n        help: _t('editor.layers.analysis-form.normalize-help'),\n        editor: {\n          type: 'Select',\n          title: _t('editor.layers.analysis-form.normalize'),\n          placeholder: _t('editor.layers.analysis-form.select-column'),\n          options: this._columnOptions.filterByType('number'),\n          dialogMode: DialogConstants.Mode.FLOAT,\n          disabledPlaceholder: _t('editor.layers.analysis-form.enable-normalize')\n        }\n      },\n      significance: {\n        type: 'Number',\n        title: _t('editor.layers.analysis-form.significance'),\n        help: _t('editor.layers.analysis-form.significance-help'),\n        validators: ['required', {\n          type: 'interval',\n          min: 0,\n          max: 1,\n          step: 0.05\n        }]\n      },\n      neighbours: {\n        type: 'Number',\n        title: _t('editor.layers.analysis-form.neighbors'),\n        help: _t('editor.layers.analysis-form.neighbors-help'),\n        validators: ['required', {\n          type: 'interval',\n          min: 1,\n          max: 100\n        }]\n      }\n      // hidden as per https://github.com/CartoDB/cartodb/pull/7893#issuecomment-226803659\n      /*\n      permutations: {\n        type: 'Number',\n        title: _t('editor.layers.analysis-form.permutations'),\n        validators: ['required', {\n          type: 'interval',\n          min: 1,\n          max: 100\n        }]\n      },\n      w_type: {\n        type: 'Select',\n        title: _t('editor.layers.analysis-form.weight-type'),\n        options: ['knn', 'queen'],\n        validators: []\n      }\n      */\n    };\n    BaseAnalysisFormModel.prototype._setSchema.call(this, schema);\n  },\n\n  updateNodeDefinition: function (nodeDefModel) {\n    var nodeAttrs = this._formatAttrs(this.attributes);\n    // It could happen that denominator_column is not present, and if we use `set`\n    // instead of the thing below, it could keep returning that attribute for the analysis\n    nodeDefModel.attributes = nodeAttrs;\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<form>\\n  <div class=\"Editor-HeaderInfo\">\\n    <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">1</div>\\n    <div class=\"Editor-HeaderInfo-inner CDB-Text\">\\n      <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n        <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.layers.analysis-form.parameters') ) +\n'</h2>\\n      </div>\\n      <div class=\"Editor-HeaderInfo-subtitle u-bSpace--m\">\\n        <p class=\"CDB-Text CDB-FontSize-small u-upperCase u-altTextColor\">' +\n__e( _t('editor.layers.analysis-form.moran-desc') ) +\n'</p>\\n      </div>\\n      <div data-fields=\"source,numerator_column,denominator_column,significance,neighbours\"></div>\\n    </div>\\n  </div>\\n</form>\\n';\n\n}\nreturn __p\n}","var BaseAnalysisFormModel = require('./base-analysis-form-model');\nvar template = require('./sampling-form.tpl');\nvar _ = require('underscore');\n\nvar DEFAULT_PERCENT = 10;\n\n/**\n * Form model for a sampling\n */\nmodule.exports = BaseAnalysisFormModel.extend({\n\n  initialize: function () {\n    BaseAnalysisFormModel.prototype.initialize.apply(this, arguments);\n    this.bind('change:percent', function () {\n      this.set('sampling', +this.get('percent') / 100);\n    }, this);\n    this._setSchema();\n  },\n\n  parse: function (attrs) {\n    return _.defaults(attrs, {\n      percent: DEFAULT_PERCENT,\n      sampling: DEFAULT_PERCENT / 100\n    });\n  },\n\n  getTemplate: function () {\n    return template;\n  },\n\n  /**\n   * @override {BaseAnalysisFormModel._setSchema}\n   */\n  _setSchema: function () {\n    var schema = {\n      source: this._primarySourceSchemaItem(),\n      percent: {\n        type: 'Number',\n        title: _t('editor.layers.analysis-form.sampling-rate'),\n        validators: ['required', {\n          type: 'interval',\n          min: 0,\n          max: 100,\n          step: 1\n        }],\n        editorAttrs: {\n          help: _t('editor.layers.analysis-form.sampling-form-model.help')\n        }\n      }\n    };\n\n    BaseAnalysisFormModel.prototype._setSchema.call(this, schema);\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<form>\\n  <div class=\"Editor-HeaderInfo\">\\n    <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">1</div>\\n    <div class=\"Editor-HeaderInfo-inner CDB-Text\" data-fields=\"source,percent\">\\n      <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n        <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('analyses.sampling.title') ) +\n'</h2>\\n      </div>\\n      <div class=\"Editor-HeaderInfo-subtitle u-bSpace--m\">\\n        <p class=\"CDB-Text CDB-FontSize-small u-upperCase u-altTextColor\">' +\n__e( _t('editor.layers.analysis-form.sampling-desc') ) +\n'</p>\\n      </div>\\n    </div>\\n  </div>\\n</form>\\n';\n\n}\nreturn __p\n}","var BaseAnalysisFormModel = require('./base-analysis-form-model');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar template = require('./spatial-markov-trend.tpl');\nvar ColumnOptions = require('builder/editor/layers/layer-content-views/analyses/column-options');\n\nmodule.exports = BaseAnalysisFormModel.extend({\n  initialize: function () {\n    BaseAnalysisFormModel.prototype.initialize.apply(this, arguments);\n    var nodeDefModel = this._layerDefinitionModel.findAnalysisDefinitionNodeModel(this.get('source'));\n    this._columnOptions = new ColumnOptions({}, {\n      configModel: this._configModel,\n      nodeDefModel: nodeDefModel\n    });\n    this.listenTo(this._columnOptions, 'columnsFetched', this._setSchema);\n    this._setSchema();\n  },\n\n  getTemplate: function () {\n    return template;\n  },\n\n  /**\n   * @override {BaseAnalysisFormModel._setSchema}\n   */\n  _setSchema: function () {\n    var schema = {\n      source: this._primarySourceSchemaItem(),\n      time_columns: {\n        type: 'MultiSelect',\n        title: _t('editor.layers.analysis-form.spatial-markov-trend-time-columns'),\n        options: this._columnOptions.filterByType(['string', 'number']),\n        dialogMode: DialogConstants.Mode.FLOAT,\n        help: _t('editor.layers.analysis-form.spatial-markov-trend-time-columns-help'),\n        editorAttrs: {\n          showSearch: true\n        }\n      }\n    };\n\n    BaseAnalysisFormModel.prototype._setSchema.call(this, schema);\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<form>\\n  <div class=\"Editor-HeaderInfo\">\\n    <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">1</div>\\n    <div class=\"Editor-HeaderInfo-inner CDB-Text\" data-fields=\"source,time_columns\">\\n      <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n        <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.layers.analysis-form.select-columns') ) +\n'</h2>\\n      </div>\\n      <div class=\"Editor-HeaderInfo-subtitle u-bSpace--m\">\\n        <p class=\"CDB-Text CDB-FontSize-small u-upperCase u-altTextColor\">' +\n__e( _t('editor.layers.analysis-form.spatial-markov-trend-desc') ) +\n'</p>\\n      </div>\\n    </div>\\n  </div>\\n</form>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar BaseAnalysisFormModel = require('./base-analysis-form-model');\n\n/**\n * A fallback form model in case the type is not supported (yet).\n */\nmodule.exports = BaseAnalysisFormModel.extend({\n\n  validate: function () {\n    return true; // always fail, should not be able to save an unknown node\n  },\n\n  getTemplate: function () {\n    return _.template('<form>Unknown analysis type <%- type %></form>');\n  },\n\n  getTemplateData: function () {\n    return {type: this.get('type') || ''};\n  },\n\n  // Don't allow to update or create an unknown type\n  updateNodeDefinition: function () {},\n  createNodeDefinition: function () {}\n\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar TableStats = require('builder/components/modals/add-widgets/tablestats');\nvar Utils = require('builder/helpers/utils');\nrequire('builder/components/form-components/index');\n\nvar CHECK_FORM_VALIDATION_TOO = {validate: true};\n\n/**\n * This view is required because a schema change require the Backbone.Form object to be re-created to update the view as expected.\n */\nmodule.exports = CoreView.extend({\n\n  initialize: function (opts) {\n    if (!opts.formModel) throw new Error('formModel is required');\n    if (!opts.configModel) throw new Error('configModel is required');\n\n    this._configModel = opts.configModel;\n    this._userModel = opts.userModel;\n    this._formModel = opts.formModel;\n\n    this.link = this._formModel._analyses.link(this._formModel);\n\n    this.tableStats = new TableStats({\n      configModel: this._configModel,\n      userModel: this._userModel\n    });\n\n    this._formModel.on('changeSchema', this.render, this);\n    this._formModel.on('generateHistogram', this._generateHistogram, this);\n    this._formModel.on('change:histogram_stats', this._showHistogramStats, this);\n\n    this.add_related_model(this._formModel);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    this._formView = new Backbone.Form({\n      model: this._formModel,\n      trackingClass: 'track-' + this._formModel.get('type') + '-analysis',\n      template: this._formModel.getTemplate(),\n      templateData: this._formModel.getTemplateData()\n    });\n\n    this._formView.bind('change', this._onChangeAnalysisFormView, this);\n    this.$el.append(this._formView.render().el);\n\n    return this;\n  },\n\n  _onChangeAnalysisFormView: function (data) {\n    var formId = this._formView.cid;\n    this._formView.model.setFormValidationErrors(undefined);\n    var formValue = this._formView.getValue();\n    this._formView.model.set(formValue); // <-- This can trigger change events and their callbacks will be run. That could provoke some 'race conditions'.\n    this._showAnalysisFormErrors(formId); // To avoid race condition of running this function against a new form view.\n  },\n\n  _showAnalysisFormErrors: function (formId) {\n    if (this._formView.cid === formId && this._formView.$el) {\n      var formValidationErrors = this._formView.commit(CHECK_FORM_VALIDATION_TOO);\n      this._formView.model.setFormValidationErrors(formValidationErrors);\n    }\n  },\n\n  _generateHistogram: function (data) {\n    this.tableStats.graphFor(data.tableName, data.columnName, this._drawHistogram.bind(this));\n  },\n\n  _showHistogramStats: function () {\n    var stats = this._formModel.get('histogram_stats');\n\n    if (!stats || !_.isNumber(stats.max) || !_.isNumber(stats.min)) {\n      this.$('.js-histogram').hide();\n      return;\n    }\n\n    var max = stats.max < 10000 ? Utils.formatNumber(stats.max) : Utils.readizableNumber(stats.max);\n    var min = stats.min < 10000 ? Utils.formatNumber(stats.min) : Utils.readizableNumber(stats.min);\n\n    this.$('.js-max').html(max);\n    this.$('.js-min').html(min);\n    this.$('.js-histogram').show();\n  },\n\n  _drawHistogram: function (graph) {\n    var stats = this._formModel.get('histogram_stats');\n\n    if (!stats || !_.isNumber(stats.max) || !_.isNumber(stats.min)) {\n      return;\n    }\n\n    this.$('.js-histogramChart').html(graph.getHistogram({\n      color: '#9DE0AD',\n      width: 158,\n      height: 20,\n      bins: 20\n    }));\n\n    this._showHistogramStats();\n  },\n\n  /**\n   * @override CoreView.prototype.clearSubViews\n   */\n  clearSubViews: function () {\n    if (this._formView) {\n      this._formView.remove(); // the Backbone.Form equivalent to \"view.clean()\"\n    }\n\n    return CoreView.prototype.clearSubViews.apply(this, arguments);\n  }\n\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar Analyses = require('builder/data/analyses');\nvar AnalysesService = require('builder/editor/layers/layer-content-views/analyses/analyses-service');\n\nmodule.exports = Backbone.Collection.extend({\n\n  initialize: function (models, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n    if (!opts.layerDefinitionModel) throw new Error('layerDefinitionModel is required');\n    if (!opts.analysisSourceOptionsModel) throw new Error('analysisSourceOptionsModel is required');\n    if (!opts.userActions) throw new Error('userActions is required');\n\n    this._configModel = opts.configModel;\n    this._layerDefinitionModel = opts.layerDefinitionModel;\n    this._analysisSourceOptionsModel = opts.analysisSourceOptionsModel;\n    this._userActions = opts.userActions;\n  },\n\n  model: function (attrs, opts) {\n    var self = opts.collection;\n\n    var FormModel = Analyses.findFormModelByType(attrs.type);\n\n    return new FormModel(attrs, {\n      configModel: self._configModel,\n      analyses: Analyses,\n      layerDefinitionModel: self._layerDefinitionModel,\n      analysisSourceOptionsModel: self._analysisSourceOptionsModel,\n      collection: self,\n      parse: true\n    });\n  },\n\n  resetByLayerDefinition: function () {\n    var current = this._layerDefinitionModel.getAnalysisDefinitionNodeModel();\n\n    if (current) {\n      var notAppliedAnalysis = AnalysesService.getNotAppliedAnalysis();\n      var attrsList = [];\n\n      if (notAppliedAnalysis) {\n        attrsList.push(notAppliedAnalysis);\n      }\n\n      this._walkAnalysisChain(current, this._layerDefinitionModel, function (nodeDefModel) {\n        var attrs = _.extend({ persisted: true }, nodeDefModel.attributes);\n        attrsList.push(attrs);\n      });\n\n      this.reset(attrsList);\n    }\n  },\n\n  addHead: function (attrs) {\n    AnalysesService.saveNotAppliedAnalysis(attrs);\n\n    this.remove(attrs.id); // if having the same id it's because the existing node is a temporary one,\n    return this.add(attrs, { at: 0 }); // so replace it with the new attrs\n  },\n\n  deleteNode: function (nodeId) {\n    var nodeDefModel = this._layerDefinitionModel.findAnalysisDefinitionNodeModel(nodeId);\n    if (nodeDefModel) {\n      this._userActions.deleteAnalysisNode(nodeId);\n    } else {\n      this.remove(nodeId);\n    }\n  },\n\n  removeUselessModels: function () {\n    var removed = [];\n\n    this.models.forEach(function (model) {\n      var useless = this._layerDefinitionModel.findAnalysisDefinitionNodeModel(model.id) === undefined;\n      if (useless) {\n        removed.push(model);\n      }\n    }, this);\n\n    if (removed.length > 0) {\n      this.remove(removed, { silent: true });\n      this.trigger('destroyedModels');\n    }\n  },\n\n  _walkAnalysisChain: function (current, layerDefModel, visitorFn) {\n    if (!current.hasPrimarySource()) return;\n\n    visitorFn.call(this, current);\n\n    var next = current.getPrimarySource();\n    if (layerDefModel.isOwnerOfAnalysisNode(next)) {\n      this._walkAnalysisChain(next, layerDefModel, visitorFn);\n    }\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar InfoboxView = require('builder/components/infobox/infobox-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'infoboxModel',\n  'infoboxCollection'\n];\n\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n    return this;\n  },\n\n  _initViews: function () {\n    var view = new InfoboxView({\n      infoboxModel: this._infoboxModel,\n      infoboxCollection: this._infoboxCollection\n    });\n    this.addView(view);\n    this.$el.append(view.render().el);\n  }\n});\n","var _ = require('underscore');\nvar queueAsync = require('d3-queue').queue;\nvar Backbone = require('backbone');\nvar analyses = require('builder/data/analyses');\n\n/**\n * Analysis source options are not trivial to get and requires some coordination of events.\n *\n * It's intended to be fetched\n */\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    fetching: false,\n    nodes_options: []\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.analysisDefinitionNodesCollection) throw new Error('analysisDefinitionNodesCollection is required');\n    if (!opts.layerDefinitionsCollection) throw new Error('layerDefinitionsCollection is required');\n    if (!opts.tablesCollection) throw new Error('tablesCollection is required');\n\n    this._analysisDefinitionNodesCollection = opts.analysisDefinitionNodesCollection;\n    this._layerDefinitionsCollection = opts.layerDefinitionsCollection;\n    this._tablesCollection = opts.tablesCollection;\n  },\n\n  fetch: function () {\n    this.set({\n      fetching: true,\n      nodes_options: []\n    });\n\n    var queue = queueAsync();\n\n    this._fetchTables(queue);\n    this._createOptionsFromNodes(queue);\n\n    queue.awaitAll(function () {\n      this.set('fetching', false);\n    }.bind(this));\n  },\n\n  /**\n   * @param {String, Array<String>} requiredSimpleGeometryTypes\n   */\n  getSelectOptions: function (requiredSimpleGeometryTypes) {\n    var nodeOptions = this.get('nodes_options');\n    if (this.get('fetching') && nodeOptions.length === 0) {\n      return nodeOptions;\n    }\n\n    if (_.isString(requiredSimpleGeometryTypes)) {\n      requiredSimpleGeometryTypes = [requiredSimpleGeometryTypes];\n    }\n\n    return _.flatten([\n      nodeOptions\n        .filter(function (d) {\n          return this._isValidGeometry(requiredSimpleGeometryTypes, d.simpleGeometryType);\n        }, this)\n        .map(function (d) {\n          var node = this._analysisDefinitionNodesCollection.get(d.val);\n          var layer = this._layerDefinitionsCollection.findOwnerOfAnalysisNode(node);\n          var layerName = node.isSourceType()\n            ? layer.getTableName()\n            : layer.getName();\n\n          return _.extend({\n            layerName: layerName,\n            nodeTitle: analyses.short_title(node),\n            color: node.getColor(),\n            type: 'node',\n            isSourceType: node.isSourceType()\n          }, d);\n        }, this),\n      this._getTablesSelectOptions(requiredSimpleGeometryTypes)\n    ]);\n  },\n\n  /**\n   * @param {String} val val from select option\n   */\n  createSourceNodeUnlessExisting: function (val) {\n    var tableModel = this._tablesCollection.get(val);\n\n    // If there is no table with given val as id, then it must be a layer source which already exist, so nothing to do\n    if (tableModel) {\n      var tableName = tableModel.get('name');\n      this._analysisDefinitionNodesCollection.createSourceNode({\n        id: tableName, // to avoid duplicats\n        tableName: tableName\n      });\n    }\n  },\n\n  _isValidGeometry: function (requiredSimpleGeometryTypes, simpleGeometryType) {\n    return _.contains(requiredSimpleGeometryTypes, simpleGeometryType) || requiredSimpleGeometryTypes[0] === '*';\n  },\n\n  _fetchTables: function (queue) {\n    queue.defer(function (cb) {\n      this._tablesCollection.fetch({\n        data: {\n          show_liked: false,\n          show_stats: false,\n          show_table_size_and_row_count: false,\n          show_permission: false,\n          show_synchronization: false,\n          show_uses_builder_features: false,\n          load_totals: false,\n          per_page: 1000\n        }\n      });\n      this._tablesCollection.once('sync error', function () {\n        cb();\n      });\n    }.bind(this));\n  },\n\n  _createOptionsFromNodes: function (queue) {\n    var self = this;\n\n    this._analysisDefinitionNodesCollection\n      .each(function (nodeDefModel) {\n        var queryGeometryModel = nodeDefModel.queryGeometryModel;\n\n        queue.defer(function (cb) {\n          if (queryGeometryModel.isFetched()) {\n            self._appendNodeOption(nodeDefModel);\n            return cb();\n          }\n\n          if (!queryGeometryModel.canFetch()) {\n            return cb();\n          }\n\n          var onStatusChange = function () {\n            if (queryGeometryModel.get('status') === 'fetching') return;\n            queryGeometryModel.off('change:status', onStatusChange);\n            self._appendNodeOption(nodeDefModel);\n            cb();\n          };\n          queryGeometryModel.on('change:status', onStatusChange);\n          queryGeometryModel.fetch();\n        });\n      });\n  },\n\n  _appendNodeOption: function (nodeDefModel) {\n    var geom = nodeDefModel.queryGeometryModel.get('simple_geom');\n    // If a node doesn't belong to a layer, we should not append it as a node option\n    // It could be an intersection node, for example.\n    var belongsToLayer = this._layerDefinitionsCollection.findOwnerOfAnalysisNode(nodeDefModel);\n\n    if (!geom || !belongsToLayer) return;\n\n    this.get('nodes_options')\n      .push({\n        simpleGeometryType: geom,\n        val: nodeDefModel.id,\n        label: nodeDefModel.id\n      });\n  },\n\n  _getTablesSelectOptions: function (requiredSimpleGeometryTypes) {\n    return this._tablesCollection.reduce(function (memo, m) {\n      var simpleGeometryType = m.getGeometryType()[0];\n\n      if (this._isValidGeometry(requiredSimpleGeometryTypes, simpleGeometryType)) {\n        memo.push({\n          val: m.id,\n          label: m.get('name'),\n          type: 'dataset'\n        });\n      }\n\n      return memo;\n    }, [], this);\n  }\n\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar CDB = require('internal-carto.js');\nvar queryTemplate = _.template('SELECT min(<%= column %>) as min, max(<%= column %>) as max FROM (<%= sql %>) _table_sql');\nvar queryBooleanTemplate = _.template('SELECT DISTINCT <%= column %> as val FROM (<%= sql %>) _table_sql');\n\nmodule.exports = Backbone.Model.extend({\n  initialize: function (attrs, opts) {\n    if (!opts.configModel) throw new Error('configModel param is required');\n    if (!opts.nodeDefModel) throw new Error('nodeDefModel param is required');\n\n    this._nodeDefModel = opts.nodeDefModel;\n\n    this._SQL = new CDB.SQL({\n      user: opts.configModel.get('user_name'),\n      sql_api_template: opts.configModel.get('sql_api_template'),\n      api_key: opts.configModel.get('api_key')\n    });\n\n    this._query = opts.nodeDefModel.querySchemaModel.get('query');\n\n    this.on('change:column', this.fetch, this);\n  },\n\n  _onQueryDone: function (r) {\n    if (_.size(r.rows) > 0) {\n      this.trigger('columnsFetched', _.first(r.rows));\n    }\n  },\n\n  fetch: function () {\n    var template = this.get('type') === 'boolean' ? queryBooleanTemplate : queryTemplate;\n\n    if (this.get('column') && this._query) {\n      this._SQL.execute(\n        template({\n          sql: this._query,\n          column: this.get('column')\n        }),\n        null,\n        {\n          extra_params: ['page', 'rows_per_page'],\n          page: 0,\n          rows_per_page: 40,\n          success: this._onQueryDone.bind(this),\n          error: function () {\n            // TODO: what happens if fails?\n          }\n        }\n      );\n    }\n  }\n});\n","var _ = require('underscore');\nvar CDB = require('internal-carto.js');\nvar Backbone = require('backbone');\nvar tableQueryTemplate = _.template('SELECT * FROM <%= tableName %>');\n\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    columnsFetched: false\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n\n    this._columnOptions = [];\n\n    this._SQL = new CDB.SQL({\n      user: opts.configModel.get('user_name'),\n      sql_api_template: opts.configModel.get('sql_api_template'),\n      api_key: opts.configModel.get('api_key')\n    });\n\n    if (opts.nodeDefModel) {\n      this.setNode(opts.nodeDefModel);\n    }\n  },\n\n  _fetch: function () {\n    if (this._query) {\n      this.set('columnsFetched', false);\n      this._SQL.execute(\n        this._query,\n        null,\n        {\n          extra_params: ['page', 'rows_per_page'],\n          page: 0,\n          rows_per_page: 0,\n          success: this._onQueryDone.bind(this),\n          error: function () {\n            // TODO: what happens if fails?\n          }\n        }\n      );\n    }\n  },\n\n  setDataset: function (tableName) {\n    this._columnOptions = [];\n    this._query = tableQueryTemplate({ tableName: tableName });\n    this._fetch();\n  },\n\n  setNode: function (nodeDefModel) {\n    this._columnOptions = [];\n    this._query = nodeDefModel.querySchemaModel.get('query');\n    this._fetch();\n  },\n\n  findColumn: function (columnName, columnType) {\n    return _.find(this.filterByType(columnType), function (column) {\n      return column.val === columnName;\n    }, this);\n  },\n\n  all: function () {\n    return this.filterByType();\n  },\n\n  filterByType: function (columnType) {\n    if (!_.size(this._columnOptions)) {\n      return [];\n    }\n\n    var columns = _.map(this._columnOptions, function (value, key) {\n      var columnName = key;\n      return {\n        val: columnName,\n        label: columnName,\n        type: value.type\n      };\n    });\n\n    if (_.isArray(columnType)) {\n      columns = columns.filter(function (column) {\n        return _.contains(columnType, column.type);\n      });\n    } else if (columnType) {\n      columns = columns.filter(function (column) {\n        return column.type === columnType;\n      });\n    }\n    return columns;\n  },\n\n  _onQueryDone: function (r) {\n    this._columnOptions = r.fields;\n    this.set('columnsFetched', true);\n    this.trigger('columnsFetched');\n  }\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar cdb = require('internal-carto.js');\n\nfunction getQueryForGeometryType (geometryType) {\n  if (geometryType === 'polygon') {\n    return \"select * from obs_legacybuildermetadata('sum')\";\n  } else {\n    return 'select * from obs_legacybuildermetadata()';\n  }\n}\n\n/**\n * this class fetches information from observatory metadata\n */\nmodule.exports = Backbone.Model.extend({\n  initialize: function (attrs, opts) {\n    this._configModel = opts.configModel;\n    this._geometryType = opts.geometryType;\n  },\n\n  sync: function (method, model, options) {\n    var sql = new cdb.SQL({\n      user: this._configModel.get('user_name'),\n      sql_api_template: this._configModel.get('sql_api_template'),\n      api_key: this._configModel.get('api_key')\n    });\n    sql.execute(getQueryForGeometryType(this._geometryType)).done(function (data) {\n      options.success && options.success(data);\n    }).error(function (errors) {\n      // console.log(\"errors:\" + errors);\n    });\n  },\n\n  setGeometryType: function (geometryType) {\n    this._geometryType = geometryType;\n  },\n\n  parse: function (attrs) {\n    var a = {};\n    _.each(attrs.rows, function (r) {\n      var sub = {};\n      _.each(r.subsection, function (s) {\n        var cols = {};\n        _.each(s.f1.columns, function (c) {\n          cols[c.f1.name] = c.f1.id;\n        });\n        sub[s.f1.name] = cols;\n      });\n      a[r.name] = sub;\n    });\n    return a;\n  },\n\n  measurement: function (area) {\n    var subsection = this.get(area);\n    if (subsection) {\n      return _.keys(subsection);\n    }\n    return [];\n  },\n\n  columns: function (area, subsectionName) {\n    var subsection = this.get(area);\n    if (subsection) {\n      return _.keys(subsection[subsectionName] || {});\n    }\n    return [];\n  },\n\n  segment: function (area, subsectionName, column) {\n    var subsection = this.get(area);\n    if (subsection) {\n      return subsection[subsectionName][column];\n    }\n    return null;\n  },\n\n  areas: function () {\n    return _.keys(this.attributes);\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n\n if (link) { ;\n__p += '\\n<a class=\"Editor-HeaderInfo-link CDB-Text CDB-FontSize-small u-lSpace u-actionTextColor u-upperCase track-' +\n__e( type ) +\n'-form-learn\" href=\"' +\n__e( link ) +\n'\" target=\"_blank\">\\n  ' +\n__e( _t('editor.layers.analysis-form.more-info') ) +\n'\\n</a>\\n';\n } ;\n__p += '\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"Editor-content js-content\"></div>\\n<div class=\"js-info\"></div>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<ul class=\"CodeMirror-error\">\\n  <li class=\"CodeMirror-errorMessage u-lSpace--xl u-rSpace--xl\">\\n    ' +\n__e( _t('components.codemirror.syntax-error') ) +\n': <span>' +\n__e( message ) +\n'</span>\\n  </li>\\n  <li class=\"CodeMirror-errorDocs\">\\n    <a href=\"https://carto.com/developers/sql-api/\" target=\"_black\">' +\n__e( _t('components.codemirror.docs') ) +\n'</a>\\n  </li>\\n</ul>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\n\nvar BLACKLISTED_COLUMNS = ['created_at', 'the_geom', 'the_geom_webmercator', 'updated_at'];\n\nmodule.exports = function (nodeDefModel, layerDefinitionModel) {\n  var tuplesItems = {};\n\n  if (!layerDefinitionModel) return tuplesItems; // e.g. if the node is one of those temporary tables\n\n  var querySchemaModel = nodeDefModel.querySchemaModel;\n  if (!querySchemaModel) return tuplesItems;\n\n  querySchemaModel.columnsCollection.each(function (m) {\n    var columnName = m.get('name');\n\n    if (!_.contains(BLACKLISTED_COLUMNS, columnName)) {\n      var key = columnName + '-' + m.get('type');\n      var tuples = tuplesItems[key] = tuplesItems[key] || [];\n      tuples.push({\n        analysisDefinitionNodeModel: nodeDefModel,\n        layerDefinitionModel: layerDefinitionModel,\n        columnModel: m\n      });\n    }\n  });\n\n  return tuplesItems;\n};\n","var $ = require('jquery');\nvar Backbone = require('backbone');\nvar createTuplesItems = require('./create-tuples-items');\nvar widgetsTypes = require('./widgets-types');\n\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    render: false\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.layerDefinitionModel) { throw new Error('layerDefinitionModel is required'); }\n    if (!opts.widgetDefinitionsCollection) { throw new Error('widgetDefinitionsCollection is required'); }\n    if (!opts.tableStats) { throw new Error('tablestats is required'); }\n\n    this._layerDefinitionModel = opts.layerDefinitionModel;\n    this._analysisDefinitionNode = this._layerDefinitionModel.getAnalysisDefinitionNodeModel();\n    this._widgetDefinitionsCollection = opts.widgetDefinitionsCollection;\n    this._tableStats = opts.tableStats;\n    this._columnsCollection = new Backbone.Collection();\n  },\n\n  getCollection: function () {\n    return this._columnsCollection;\n  },\n\n  createColumnCollection: function () {\n    var tuplesItems = createTuplesItems(this._analysisDefinitionNode, this._layerDefinitionModel);\n    var models = widgetsTypes(tuplesItems);\n    this._columnsCollection.reset(models);\n    this._generateGraphs();\n  },\n\n  _generateGraphs: function () {\n    var self = this;\n\n    var promises = this._columnsCollection.map(function (stat) {\n      var table = stat.get('table');\n      var column = stat.get('name');\n      var deferred = new $.Deferred();\n\n      self._locateWidget(stat);\n\n      self._tableStats.graphFor(table, column, function (graph) {\n        if (graph.stats) {\n          stat.set({graph: graph});\n        }\n        deferred.resolve();\n      });\n\n      return deferred.promise();\n    }, this);\n\n    $.when.apply($, promises).done(function () {\n      self.set({render: self._columnsCollection.length > 0});\n    });\n  },\n\n  findWidget: function (model) {\n    var type = model.get('type');\n    var column = model.get('name');\n\n    return this._widgetDefinitionsCollection.findWhere({\n      type: type,\n      source: model.analysisDefinitionNodeModel().id,\n      column: column\n    });\n  },\n\n  _locateWidget: function (model) {\n    var widget = this.findWidget(model);\n\n    if (widget) {\n      model.set({\n        selected: true,\n        widget: widget\n      }, {silent: true});\n    }\n  },\n\n  getColumnsWithWidgetAndGraph: function () {\n    return this._columnsCollection.filter(function (model) {\n      return !!model.get('widget') && !!model.get('graph');\n    });\n  },\n\n  getColumnsWithWidget: function () {\n    return this._columnsCollection.filter(function (model) {\n      return !!model.get('widget') && !model.get('graph');\n    });\n  },\n\n  getColumnsWithGraph: function () {\n    return this._columnsCollection.filter(function (model) {\n      return !!model.get('graph') && !model.get('widget');\n    });\n  },\n\n  getColumnsWithoutGraph: function () {\n    return this._columnsCollection.filter(function (model) {\n      return !model.get('graph') && !model.get('widget');\n    });\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<h2 class=\"CDB-Text CDB-Size-huge is-light u-secondaryTextColor\">\\n  ' +\n((__t = ( body )) == null ? '' : __t) +\n'\\n</h2>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<h2 class=\"CDB-Text CDB-Size-huge is-light u-secondaryTextColor\">\\n  ' +\n((__t = ( message )) == null ? '' : __t) +\n'\\n</h2>\\n<h2 class=\"CDB-Text CDB-Size-huge is-light u-secondaryTextColor u-tSpace-xl\">\\n  ' +\n((__t = ( action )) == null ? '' : __t) +\n'\\n</h2>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n\n if (renderLoading) { ;\n__p += '\\n<div class=\"Data-loaderContainer\">\\n  <div class=\"CDB-Loader is-visible\"></div>\\n</div>\\n';\n } ;\n__p += '\\n\\n<div class=\"FormPlaceholder-paragraph u-tSpace-m u-flex\">\\n  <div class=\"FormPlaceholder-step u-rSpace--m\"></div>\\n  <div class=\"FormPlaceholder-inner\">\\n    <span class=\"FormPlaceholder-label FormPlaceholder-size--med u-tSpace-xl\"></span>\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--med u-tSpace-xl\"></span>\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--med\"></span>\\n    <span class=\"FormPlaceholder-label FormPlaceholder-size--short u-tSpace-xl\"></span>\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--long u-tSpace-xl\"></span>\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--long\"></span>\\n  </div>\\n</div>\\n\\n<div class=\"FormPlaceholder-paragraph u-tSpace-m u-flex\">\\n  <div class=\"FormPlaceholder-step u-rSpace--m\"></div>\\n  <div class=\"FormPlaceholder-inner\">\\n    <span class=\"FormPlaceholder-label FormPlaceholder-size--med u-tSpace-xl\"></span>\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--med u-tSpace-xl\"></span>\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--med\"></span>\\n    <span class=\"FormPlaceholder-label FormPlaceholder-size--short u-tSpace-xl\"></span>\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--long u-tSpace-xl\"></span>\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--long\"></span>\\n  </div>\\n</div>\\n\\n<div class=\"FormPlaceholder-paragraph u-tSpace-m u-flex\">\\n  <div class=\"FormPlaceholder-step u-rSpace--m\"></div>\\n  <div class=\"FormPlaceholder-inner\">\\n    <span class=\"FormPlaceholder-label FormPlaceholder-size--med u-tSpace-xl\"></span>\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--med u-tSpace-xl\"></span>\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--med\"></span>\\n    <span class=\"FormPlaceholder-label FormPlaceholder-size--short u-tSpace-xl\"></span>\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--long u-tSpace-xl\"></span>\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--long\"></span>\\n  </div>\\n</div>\\n\\n<div class=\"FormPlaceholder-paragraph u-tSpace-m u-flex\">\\n  <div class=\"FormPlaceholder-step u-rSpace--m\"></div>\\n  <div class=\"FormPlaceholder-inner\">\\n    <span class=\"FormPlaceholder-label FormPlaceholder-size--med u-tSpace-xl\"></span>\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--med u-tSpace-xl\"></span>\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--med\"></span>\\n    <span class=\"FormPlaceholder-label FormPlaceholder-size--short u-tSpace-xl\"></span>\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--long u-tSpace-xl\"></span>\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--long\"></span>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar StatView = require('./stat-view');\nvar dataNotReadyTemplate = require('./data-content-not-ready.tpl');\nvar dataErrorTemplate = require('./data-content-error.tpl');\nvar dataNoGeometryTemplate = require('./data-content-nogeometry.tpl');\nvar layerTabMessageTemplate = require('builder/editor/layers/layer-tab-message.tpl');\nvar actionErrorTemplate = require('builder/editor/layers/sql-error-action.tpl');\nvar addFeaturePointIcon = require('builder/components/icon/templates/add-feature-point.tpl');\nvar addFeatureLineIcon = require('builder/components/icon/templates/add-feature-line.tpl');\nvar addFeaturePolygonIcon = require('builder/components/icon/templates/add-feature-polygon.tpl');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar STATES = require('builder/data/query-base-status');\n\nvar REQUIRED_OPTS = [\n  'columnsModel',\n  'infoboxModel',\n  'overlayModel',\n  'queryGeometryModel',\n  'stackLayoutModel',\n  'userActions',\n  'layerContentModel',\n  'layerDefinitionModel'\n];\n\nmodule.exports = CoreView.extend({\n  module: 'editor/layers/layer-content-views/data/data-content-view',\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._initViewState();\n    this._initModels();\n    this._initBinds();\n  },\n\n  _initViewState: function () {\n    this._viewState = new Backbone.Model({\n      hasGeom: true,\n      isDataFiltered: false,\n      canBeGeoreferenced: false\n    });\n\n    this._setViewState();\n  },\n\n  _initModels: function () {\n    this._columnsCollection = this._columnsModel.getCollection();\n\n    this.model = new Backbone.Model({\n      renderLoading: true\n    });\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._layerContentModel, 'change:state', this._setViewState);\n    this.listenTo(this._columnsModel, 'change:render', this._handleStats);\n    this.listenTo(this._columnsCollection, 'change:selected', this._handleWidget);\n    this.listenTo(this._overlayModel, 'change:visible', this._toggleOverlay);\n    this.listenTo(this._viewState, 'change', this.render);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    if (this._isErrored()) {\n      this._showError();\n    } else if (this._viewState.get('isDataFiltered')) {\n      this._showFilteredData();\n    } else if (this._viewState.get('canBeGeoreferenced')) {\n      this._showGeocodeMessage();\n    } else if (!this._viewState.get('hasGeom')) {\n      this._showNoGeometryData();\n    } else {\n      this._renderStats();\n    }\n\n    this._toggleOverlay();\n    return this;\n  },\n\n  _toggleOverlay: function () {\n    var isDisabled = this._overlayModel.get('visible');\n    this.$el.toggleClass('is-disabled', isDisabled);\n  },\n\n  _showLoading: function () {\n    this.$el.empty();\n    this.$el.append(\n      dataNotReadyTemplate({\n        renderLoading: this._layerContentModel.get('renderLoading')\n      })\n    );\n  },\n\n  _showError: function () {\n    this.$el.append(\n      dataErrorTemplate({\n        body: _t('editor.error-query.body', {\n          action: actionErrorTemplate({\n            label: _t('editor.error-query.label')\n          })\n        })\n      })\n    );\n  },\n\n  _showNoGeometryData: function () {\n    this.$el.append(\n      dataNoGeometryTemplate({\n        message: _t('editor.data.no-geometry-data.message'),\n        action: _t('editor.data.no-geometry-data.action-message', {\n          pointIcon: addFeaturePointIcon(),\n          lineIcon: addFeatureLineIcon(),\n          polygonIcon: addFeaturePolygonIcon()\n        })\n      })\n    );\n  },\n\n  _showFilteredData: function () {\n    this.$el.append(\n      layerTabMessageTemplate({\n        message: _t('editor.layers.warnings.no-data.message'),\n        action: _t('editor.layers.warnings.no-data.action-message')\n      })\n    );\n  },\n\n  _showGeocodeMessage: function () {\n    this.$el.append(\n      layerTabMessageTemplate({\n        message: _t('editor.layers.warnings.geocode.message'),\n        action: _t('editor.layers.warnings.geocode.action-message')\n      })\n    );\n  },\n\n  _isErrored: function () {\n    return this._layerContentModel.isErrored();\n  },\n\n  _columnsReady: function () {\n    return this._columnsModel.get('render') === true;\n  },\n\n  _handleWidget: function (model) {\n    model.get('selected') === true\n      ? this._addWidget(model)\n      : this._destroyWidget(model);\n  },\n\n  _addWidget: function (model) {\n    var widgetModel = this._columnsModel.findWidget(model);\n\n    widgetModel\n      ? model.set({widget: widgetModel})\n      : this._saveWidget(model);\n  },\n\n  _destroyWidget: function (model) {\n    var widgetModel = model.get('widget');\n    widgetModel && widgetModel.destroy();\n  },\n\n  _saveWidget: function (model) {\n    var self = this;\n    var widgetModel;\n\n    this._userActions.saveWidgetOption(model)\n      .then(function (newWidgetModel) {\n        widgetModel = newWidgetModel;\n\n        model.set({widget: widgetModel});\n\n        if (model.get('type') === 'time-series') {\n          self._normalizeTimeSeriesColumn(model);\n        }\n\n        return self._userActions.updateWidgetsOrder(model);\n      })\n      .then(function () {\n        self.render();\n      });\n  },\n\n  _normalizeTimeSeriesColumn: function (lastModel) {\n    var existingDefModel = this._columnsCollection.findWhere(function (model) {\n      return model.get('type') === 'time-series' && model.get('selected') === true && model.cid !== lastModel.cid;\n    });\n\n    existingDefModel && existingDefModel.set({\n      selected: false,\n      widget: null\n    });\n  },\n\n  _handleStats: function () {\n    if (this._columnsReady()) {\n      // we force render because the state could be ready already\n      this._layerContentModel.set({\n        state: STATES.fetched,\n        renderLoading: true\n      }, {\n        silent: true\n      });\n      this.render();\n    } else {\n      // if there are not stats, we hide loading and show placeholder\n      this._layerContentModel.set({\n        state: STATES.fetching,\n        renderLoading: false\n      });\n    }\n  },\n\n  _renderStats: function () {\n    if (!this._columnsReady()) {\n      return;\n    }\n\n    var withWidgetAndGraph = this._columnsModel.getColumnsWithWidgetAndGraph();\n    var withWidget = this._columnsModel.getColumnsWithWidget();\n    var withGraph = this._columnsModel.getColumnsWithGraph();\n    var withoutGraph = this._columnsModel.getColumnsWithoutGraph();\n    var all;\n\n    if (withWidgetAndGraph.length === 0 && withWidget.length === 0 &&\n      withGraph.length === 0 && withoutGraph.length === 0) {\n      this._infoboxModel.set({\n        state: 'no-data',\n        renderLoading: false\n      });\n      this._showLoading();\n    } else {\n      this.$el.empty();\n      all = _.union(withWidgetAndGraph, withWidget, withGraph, withoutGraph);\n      this._renderColumns(all);\n    }\n  },\n\n  _renderColumns: function (stats) {\n    _.each(stats, function (stat, index) {\n      var view = new StatView({\n        stackLayoutModel: this._stackLayoutModel,\n        statModel: stat\n      });\n\n      this.addView(view);\n      this.$el.append(view.render().el);\n    }, this);\n  },\n\n  _setViewState: function () {\n    var self = this;\n    var hasGeomPromise = this._queryGeometryModel.hasValueAsync();\n    var isDataFilteredPromise = this._layerDefinitionModel.isDataFiltered();\n    var geoReferencePromise = this._layerDefinitionModel.canBeGeoreferenced();\n\n    Promise.all([hasGeomPromise, isDataFilteredPromise, geoReferencePromise])\n      .then(function (values) {\n        self._viewState.set({\n          hasGeom: values[0],\n          isDataFiltered: values[1],\n          canBeGeoreferenced: values[2]\n        });\n      });\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar CodeMirrorView = require('builder/components/code-mirror/code-mirror-view');\nvar ErrorTemplate = require('./code-mirror-error.tpl');\nvar FactoryHints = require('builder/editor/editor-hints/factory-hints');\nvar SQLHints = require('builder/editor/editor-hints/sql-hints');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'layerDefinitionModel',\n  'querySchemaModel',\n  'codemirrorModel',\n  'onApplyEvent'\n];\n\nmodule.exports = CoreView.extend({\n  module: 'editor:layers:layer-content-views:data-sql-view',\n\n  className: 'Editor-dataContentSQL Editor-content',\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._initBinds();\n\n    FactoryHints.init({\n      querySchemaModel: this._querySchemaModel,\n      layerDefinitionModel: this._layerDefinitionModel,\n      tokens: SQLHints\n    });\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n    return this;\n  },\n\n  _initBinds: function () {\n    this._querySchemaModel.on('change:query', this._onQueryChanged, this);\n    this.add_related_model(this._querySchemaModel);\n  },\n\n  _onQueryChanged: function (mdl, status) {\n    if (status === 'fetched') {\n      this.codeMirrorView.updateHints(SQLHints.reset().hints);\n    }\n  },\n\n  _initViews: function () {\n    var hints = FactoryHints.reset().hints;\n    this.codeMirrorView = new CodeMirrorView({\n      model: this._codemirrorModel,\n      hints: hints,\n      mode: 'text/x-pgsql',\n      tips: [\n        _t('editor.data.code-mirror.tip')\n      ],\n      errorTemplate: ErrorTemplate\n    });\n\n    this.codeMirrorView.bind('codeSaved', this._triggerCodeSaved, this);\n    this.addView(this.codeMirrorView);\n    this.$el.append(this.codeMirrorView.render().el);\n  },\n\n  _updateEditorContent: function () {\n    this.codeMirrorView.setContent(this._layerDefinitionModel.get('sql'));\n  },\n\n  _triggerCodeSaved: function (code, view) {\n    this._onApplyEvent && this._onApplyEvent();\n  }\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar PanelWithOptionsView = require('builder/components/view-options/panel-with-options-view');\nvar ScrollView = require('builder/components/scroll/scroll-view');\nvar DatasetBaseView = require('builder/components/dataset/dataset-base-view');\nvar DataContentView = require('./data-content-view');\nvar DataSQLView = require('./data-sql-view');\nvar TabPaneView = require('builder/components/tab-pane/tab-pane-view');\nvar TabPaneCollection = require('builder/components/tab-pane/tab-pane-collection');\nvar Toggler = require('builder/components/toggler/toggler-view');\nvar UndoButtons = require('builder/components/undo-redo/undo-redo-view');\nvar Infobox = require('builder/components/infobox/infobox-factory');\nvar InfoboxModel = require('builder/components/infobox/infobox-model');\nvar InfoboxCollection = require('builder/components/infobox/infobox-collection');\nvar TableStats = require('builder/components/modals/add-widgets/tablestats');\nvar DataColumnsModel = require('./data-columns-model');\nvar SQLNotifications = require('builder/sql-notifications');\nvar MetricsTracker = require('builder/components/metrics/metrics-tracker');\nvar MetricsTypes = require('builder/components/metrics/metrics-types');\nvar OnboardingLauncher = require('builder/components/onboardings/generic/generic-onboarding-launcher');\nvar OnboardingView = require('builder/components/onboardings/layers/data-onboarding/data-onboarding-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar LocaleHelper = require('builder/helpers/locale');\n\nvar ONBOARDING_KEY = 'layer-data-onboarding';\n\nvar REQUIRED_OPTS = [\n  'widgetDefinitionsCollection',\n  'stackLayoutModel',\n  'userActions',\n  'layerDefinitionModel',\n  'userModel',\n  'onboardings',\n  'onboardingNotification',\n  'layerContentModel'\n];\n\nvar getNotificationMessage = function (error, type) {\n  var prefix = 'notifications.sql.';\n  var key = prefix + type;\n  var result = LocaleHelper.linkify(key);\n  return result || (error && _.first(error)) || _t('notifications.sql.unknown.body');\n};\n\nmodule.exports = DatasetBaseView.extend({\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n    this._nodeModel = opts.layerDefinitionModel.getAnalysisDefinitionNodeModel();\n    this._querySchemaModel = this._nodeModel.querySchemaModel;\n    this._queryGeometryModel = this._nodeModel.queryGeometryModel;\n\n    DatasetBaseView.prototype.initialize.call(this, {\n      layerDefinitionModel: opts.layerDefinitionModel,\n      editorModel: opts.editorModel,\n      configModel: opts.configModel,\n      querySchemaModel: this._querySchemaModel\n    });\n\n    this._initModels();\n\n    this._tableStats = new TableStats({\n      configModel: this._configModel,\n      userModel: this._userModel\n    });\n\n    this._columnsModel = new DataColumnsModel({}, {\n      layerDefinitionModel: this._layerDefinitionModel,\n      widgetDefinitionsCollection: this._widgetDefinitionsCollection,\n      tableStats: this._tableStats\n    });\n\n    SQLNotifications.track(this);\n\n    this._parseSQL = this._internalParseSQL.bind(this, this._afterAlterDataSuccess);\n\n    this._onboardingLauncher = new OnboardingLauncher({\n      view: OnboardingView,\n      onboardingNotification: this._onboardingNotification,\n      notificationKey: ONBOARDING_KEY,\n      onboardings: this._onboardings\n    }, {\n      editorModel: this._editorModel,\n      selector: 'LayerOnboarding'\n    });\n\n    this._configPanes();\n    this._initBinds();\n    this._initData();\n  },\n\n  render: function () {\n    this._launchOnboarding();\n    this.clearSubViews();\n    this.$el.empty();\n\n    this._initViews();\n\n    return this;\n  },\n\n  _initModels: function () {\n    this._infoboxModel = new InfoboxModel({\n      state: this._isLayerHidden()\n        ? 'layer-hidden'\n        : ''\n    });\n\n    this._layerDefinitionModel.canBeGeoreferenced()\n      .then(function (canBeGeoreferenced) {\n        if (!this._isLayerHidden() && canBeGeoreferenced) {\n          this._infoboxModel.set('state', 'georeference');\n        }\n      }.bind(this));\n\n    this._overlayModel = new Backbone.Model({\n      visible: this._isLayerHidden()\n    });\n\n    this._applyButtonStatusModel = new Backbone.Model({\n      loading: false\n    });\n\n    this._togglerModel = new Backbone.Model({\n      labels: [_t('editor.data.data-toggle.values'), _t('editor.data.data-toggle.cartocss')],\n      active: this._editorModel.isEditing(),\n      disabled: this._editorModel.isDisabled(),\n      tooltip: _t('editor.data.data-toggle.tooltip')\n    });\n  },\n\n  _launchOnboarding: function () {\n    if (this._onboardingNotification.getKey(ONBOARDING_KEY)) {\n      return;\n    }\n\n    if (!this._editorModel.isEditing()) {\n      this._onboardingLauncher.launch({\n        numberOfWidgets: this._widgetDefinitionsCollection.length,\n        hasTimeSeries: this._widgetDefinitionsCollection.isThereTimeSeries(),\n        hasAnimatedTimeSeries: this._widgetDefinitionsCollection.isThereTimeSeries({ animated: true })\n      });\n    }\n  },\n\n  _initData: function () {\n    if (this._hasFetchedQuerySchema()) {\n      this._onQuerySchemaStatusChange();\n    }\n  },\n\n  _redirectIfErrors: function () {\n    var errors = this._querySchemaModel.get('query_errors');\n    if (errors && errors.length > 0) {\n      this._showErrors();\n      this._editorModel.set({\n        edition: true\n      });\n    }\n  },\n\n  _onQuerySchemaChange: function () {\n    if (this._hasFetchedQuerySchema()) {\n      this._codemirrorModel.set({ content: this._querySchemaModel.get('query') });\n    }\n  },\n\n  _onQuerySchemaStatusChange: function () {\n    if (this._hasFetchedQuerySchema()) {\n      this._columnsModel.createColumnCollection();\n    }\n  },\n\n  _hasFetchedQuerySchema: function () {\n    return this._querySchemaModel.isFetched();\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._editorModel, 'change:edition', this._onChangeEdition);\n    this.listenTo(this._editorModel, 'change:disabled', this._onChangeDisabled);\n    this.listenTo(this._togglerModel, 'change:active', this._onTogglerChanged);\n\n    this.listenTo(this._querySchemaModel, 'change:query', this._onQuerySchemaChange);\n    this.listenTo(this._querySchemaModel, 'change:status', this._onQuerySchemaStatusChange);\n    this.listenTo(this._querySchemaModel, 'change:query_errors', this._showErrors);\n\n    this.listenTo(this._sqlModel, 'undo redo', function () {\n      this._codemirrorModel.set('content', this._sqlModel.get('content'));\n    }.bind(this));\n\n    this.listenTo(this._layerDefinitionModel, 'change:visible', this._infoboxState);\n\n    this._querySchemaModel.bind('change:status', function () {\n      this._applyButtonStatusModel.set('loading', this._querySchemaModel.isFetching());\n    }, this);\n  },\n\n  _runQuery: function (query, callback) {\n    // Should change the query to geometry model before the schema model\n    this._queryGeometryModel.set({\n      query: query\n    });\n\n    this._querySchemaModel.set({\n      query: query,\n      status: 'unfetched'\n    });\n\n    SQLNotifications.showNotification({\n      status: 'loading',\n      info: _t('notifications.sql.applying'),\n      closable: false\n    });\n\n    var saveSQL = _.after(2, callback);\n    var errorSQL = function (err) {\n      var type = err && err.status;\n      var error = getNotificationMessage(err.error, type);\n      this._forceErrors(error, {\n        showEditorError: type === 400\n      });\n    }.bind(this);\n\n    this._querySchemaModel.fetch({ success: saveSQL, error: errorSQL });\n    this._queryGeometryModel.fetch({ complete: saveSQL, error: errorSQL });\n  },\n\n  _saveSQL: function (response) {\n    if (response.status !== 200) {\n      return;\n    }\n\n    var query = this._codemirrorModel.get('content');\n\n    this._sqlModel.set('content', query);\n    this._userActions.saveAnalysisSourceQuery(query, this._nodeModel, this._layerDefinitionModel);\n    this._querySchemaModel.set('query_errors', []);\n\n    SQLNotifications.showNotification({\n      status: 'success',\n      info: _t('notifications.sql.success'),\n      closable: true\n    });\n\n    this._checkClearButton();\n\n    MetricsTracker.track(MetricsTypes.APPLIED_SQL, {\n      node_id: this._nodeModel.get('id'),\n      sql: this._nodeModel.get('query')\n    });\n\n    MetricsTracker.track(MetricsTypes.USED_ADVANCED_MODE, {\n      mode_type: 'sql'\n    });\n  },\n\n  _isQueryAlreadyApplied: function (query) {\n    var history = this._sqlModel.getUndoHistory();\n    var last = _.last(history);\n    return last && last.content && last.content.toLowerCase() === query.toLowerCase();\n  },\n\n  _updateVisNotification: function () {\n    SQLNotifications.showNotification({\n      status: 'success',\n      info: _t('notifications.sql.success'),\n      closable: true\n    });\n  },\n\n  _defaultSQL: function () {\n    return this._nodeModel.getDefaultQuery();\n  },\n\n  _afterAlterDataSuccess: function () {\n    var originalQuery = this._defaultSQL();\n    this._userActions.saveAnalysisSourceQuery(originalQuery, this._nodeModel, this._layerDefinitionModel);\n  },\n\n  _hasAnalysisApplied: function () {\n    return this._nodeModel.get('type') !== 'source';\n  },\n\n  _onChangeEdition: function () {\n    this._infoboxState();\n\n    var edition = this._editorModel.get('edition');\n    var index = edition ? 1 : 0;\n    this._collectionPane.at(index).set({ selected: true });\n    this._togglerModel.set({ active: edition });\n  },\n\n  _onChangeDisabled: function () {\n    var disabled = this._editorModel.get('disabled');\n    this._togglerModel.set({ disabled: disabled });\n  },\n\n  _onTogglerChanged: function () {\n    var checked = this._togglerModel.get('active');\n    this._editorModel.set({ edition: checked });\n  },\n\n  _configPanes: function () {\n    var self = this;\n    var tabPaneTabs = [{\n      selected: !this._editorModel.get('edition'),\n      createContentView: function () {\n        return new ScrollView({\n          createContentView: function () {\n            return new DataContentView({\n              className: 'Editor-content',\n              stackLayoutModel: self._stackLayoutModel,\n              columnsModel: self._columnsModel,\n              queryGeometryModel: self._queryGeometryModel,\n              userActions: self._userActions,\n              infoboxModel: self._infoboxModel,\n              overlayModel: self._overlayModel,\n              layerContentModel: self._layerContentModel,\n              layerDefinitionModel: self._layerDefinitionModel\n            });\n          }\n        });\n      },\n      createActionView: function () {\n        return new CoreView();\n      }\n    }, {\n      selected: this._editorModel.get('edition'),\n      createContentView: function () {\n        return new DataSQLView({\n          layerDefinitionModel: self._layerDefinitionModel,\n          querySchemaModel: self._querySchemaModel,\n          codemirrorModel: self._codemirrorModel,\n          onApplyEvent: self._parseSQL\n        });\n      },\n      createActionView: function () {\n        var isAnalysis = self._hasAnalysisApplied();\n        if (!isAnalysis) {\n          self._checkClearButton();\n          return new UndoButtons({\n            trackModel: self._sqlModel,\n            editorModel: self._editorModel,\n            clearModel: self._clearSQLModel,\n            applyStatusModel: self._applyButtonStatusModel,\n            applyButton: true,\n            clearButton: true,\n            onApplyClick: self._parseSQL,\n            onClearClick: self._clearSQL.bind(self)\n          });\n        }\n      }\n    }];\n\n    this._collectionPane = new TabPaneCollection(tabPaneTabs);\n  },\n\n  _confirmReadOnly: function () {\n    this._infoboxModel.set({ state: '' });\n  },\n\n  _initViews: function () {\n    var self = this;\n\n    var infoboxSstates = [\n      {\n        state: 'readonly',\n        createContentView: function () {\n          return Infobox.createWithAction({\n            type: 'code',\n            title: _t('editor.data.messages.sql-readonly.title'),\n            body: _t('editor.data.messages.sql-readonly.body'),\n            action: {\n              label: _t('editor.data.messages.sql-readonly.accept')\n            }\n          });\n        },\n        onAction: self._confirmReadOnly.bind(self)\n      }, {\n        state: 'no-data',\n        createContentView: function () {\n          return Infobox.createInfo({\n            type: 'alert',\n            title: _t('editor.data.messages.empty-data.title'),\n            body: _t('editor.data.messages.empty-data.body')\n          });\n        }\n      }, {\n        state: 'layer-hidden',\n        createContentView: function () {\n          return Infobox.createWithAction({\n            type: 'alert',\n            title: _t('editor.messages.layer-hidden.title'),\n            body: _t('editor.messages.layer-hidden.body'),\n            action: {\n              label: _t('editor.messages.layer-hidden.show')\n            }\n          });\n        },\n        onAction: self._showHiddenLayer.bind(self)\n      }\n    ];\n\n    var infoboxCollection = new InfoboxCollection(infoboxSstates);\n\n    var panelWithOptionsView = new PanelWithOptionsView({\n      className: 'Editor-content',\n      editorModel: self._editorModel,\n      infoboxModel: self._infoboxModel,\n      infoboxCollection: infoboxCollection,\n      createContentView: function () {\n        return new TabPaneView({\n          collection: self._collectionPane\n        });\n      },\n      createControlView: function () {\n        return new Toggler({\n          model: self._togglerModel\n        });\n      },\n      createActionView: function () {\n        return new TabPaneView({\n          collection: self._collectionPane,\n          createContentKey: 'createActionView'\n        });\n      }\n    });\n\n    this.$el.append(panelWithOptionsView.render().el);\n    this.addView(panelWithOptionsView);\n\n    // TOFIX\n    // If there are errors in the SQL, open the sql editor by default\n    // we defer it to not interfere with the high order tabpane item selection\n    setTimeout(this._redirectIfErrors.bind(this), 0);\n  },\n\n  _infoboxState: function () {\n    var edition = this._editorModel.get('edition');\n    var isAnalysis = this._hasAnalysisApplied();\n\n    if (edition && isAnalysis) {\n      this._codemirrorModel.set({ readonly: true });\n      this._infoboxModel.set({ state: 'readonly' });\n    } else if (this._isLayerHidden()) {\n      this._infoboxModel.set({ state: 'layer-hidden' });\n      this._overlayModel.set({ visible: true });\n    } else {\n      this._codemirrorModel.set({ readonly: false });\n      this._infoboxModel.set({ state: '' });\n      this._overlayModel.set({ visible: false });\n    }\n  },\n\n  _showHiddenLayer: function () {\n    var savingOptions = {\n      shouldPreserveAutoStyle: true\n    };\n    this._layerDefinitionModel.toggleVisible();\n    this._userActions.saveLayer(this._layerDefinitionModel, savingOptions);\n  },\n\n  _isLayerHidden: function () {\n    return this._layerDefinitionModel.get('visible') === false;\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<ul class=\"u-flex CDB-Text CDB-Size-small u-upperCase u-bSpace u-secondaryTextColor\">\\n  <li class=\\'u-rSpace--m js-null\\'></li>\\n  <li class=\\'js-percent\\'></li>\\n</ul>\\n<div class=\"js-category-stat\"></div>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<h4 class=\"CDB-Text CDB-Size-huge js-formula-stat\"></h4>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"CDB-Text CDB-Size-small u-upperCase u-bSpace u-secondaryTextColor js-histogram-numbers\"></div>\\n<div class=\"js-histogram-stat\"></div>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar template = require('./stat.tpl');\nvar utils = require('builder/helpers/utils');\nvar templateCategory = require('./stat-category.tpl');\nvar templateHistogram = require('./stat-histogram.tpl');\nvar templateFormula = require('./stat-formula.tpl');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\nvar Router = require('builder/routes/router');\n\nmodule.exports = CoreView.extend({\n  module: 'editor/layers/layer-content-views/data/stat-view',\n\n  className: 'StatsList',\n\n  events: {\n    'click .js-checkbox': '_onSelect',\n    'click .js-style': '_onEdit'\n  },\n\n  initialize: function (opts) {\n    if (!opts.statModel) throw new Error('statModel is required');\n\n    this._statModel = opts.statModel;\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n    return this;\n  },\n\n  _initBinds: function () {\n    this._statModel.on('change:selected', this.render, this);\n    this.add_related_model(this._statModel);\n  },\n\n  _initViews: function () {\n    var graph = this._statModel.get('graph');\n    var type = this._statModel.get('type');\n\n    this._renderTemplate();\n\n    if (graph) {\n      // No graph for formula\n      if (type === 'histogram') {\n        this._showHistogram(graph);\n      } else if (type === 'category') {\n        this._showCategory(graph);\n      } else if (type === 'formula') {\n        this._showFormula(graph);\n      }\n    }\n\n    if (this._isSelected()) {\n      var tooltip = new TipsyTooltipView({\n        el: this.$('.js-help'),\n        gravity: 'w',\n        title: function () {\n          return _t('editor.data.stats.help');\n        }\n      });\n      this.addView(tooltip);\n    }\n  },\n\n  _renderTemplate: function () {\n    this.$el.append(template({\n      id: this.cid,\n      column: this._statModel.get('title'),\n      type: this._statModel.get('column'),\n      graph: this._statModel.get('type'),\n      isSelected: this._isSelected()\n    }));\n  },\n\n  _isSelected: function () {\n    return this._statModel.get('selected');\n  },\n\n  _onSelect: function () {\n    this._statModel.set('selected', !this._statModel.get('selected'));\n  },\n\n  _onEdit: function (event) {\n    event.preventDefault();\n\n    Router.goToWidget(this._statModel.get('widget').get('id'));\n  },\n\n  _showCategory: function (graph) {\n    if (graph.stats && graph.stats.freqs) {\n      this.$('.js-stat').append(templateCategory());\n      this.$('.js-category-stat').append(graph.getCategory({\n        color: '#9DE0AD',\n        width: 262,\n        height: 10\n      }));\n\n      this.$('.js-null').text(utils.formatDecimalPositions(graph.getNullsPercentage() * 100) + _t('editor.data.stats.null'));\n      if (this.options.statModel.attributes.column !== 'boolean') {\n        this.$('.js-percent').text(utils.formatDecimalPositions(graph.getPercentageInTopCategories() * 100) + _t('editor.data.stats.top-cat'));\n      } else {\n        var numOfTrues = graph.getTrues();\n        if (utils.isNumeric(numOfTrues)) {\n          this.$('.js-percent').text(utils.formatDecimalPositions(numOfTrues * 100) + _t('editor.data.stats.trues'));\n        }\n      }\n    }\n  },\n\n  _showHistogram: function (graph) {\n    if (graph.stats) {\n      this.$('.js-stat').append(templateHistogram());\n      this.$('.js-histogram-stat').append(graph.getHistogram({\n        color: '#9DE0AD',\n        width: 262,\n        height: 20,\n        bins: 20\n      }));\n      this.$('.js-histogram-numbers').text(graph.getNullsPercentage() + _t('editor.data.stats.null'));\n    }\n  },\n\n  _showFormula: function (graph) {\n    var aggregation;\n    if (graph.stats) {\n      aggregation = graph.getCount();\n      if (_.isNumber(aggregation)) {\n        this.$('.js-stat').append(templateFormula());\n        this.$('.js-formula-stat').text(aggregation.toFixed().toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ','));\n      }\n    }\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"StatsList-item\">\\n  <div class=\"u-rSpace--m\">\\n    <input class=\"CDB-Checkbox js-checkbox\" id=\"' +\n__e( id ) +\n'\" type=\"checkbox\" ';\n if (isSelected) { ;\n__p += 'checked=\"checked\"';\n } ;\n__p += ' />\\n    <span class=\"u-iBlock CDB-Checkbox-face\"></span>\\n  </div>\\n\\n  <div class=\"WidgetList-inner js-inner\">\\n    <div class=\"StatsList-header u-flex u-justifySpace u-alignCenter u-bSpace--m\">\\n      <label class=\"u-ellipsis CDB-Text CDB-Size-medium\" for=\"' +\n__e( id ) +\n'\">' +\n__e( _t('editor.data.stats.add-widget') ) +\n'</label>\\n      ';\n if (isSelected) { ;\n__p += '\\n      <button class=\"StatsList-style CDB-Text CDB-Size-small js-style u-actionTextColor js-help\">\\n        <div class=\"StatsList-arrow CDB-Shape-Arrow is-blue u-iBlock u-rSpace--m\"></div> ' +\n__e( _t('editor.data.stats.edit') ) +\n'\\n      </button>\\n      ';\n } ;\n__p += '\\n    </div>\\n    <div class=\"u-flex u-alignCenter u-bSpace\">\\n      <h2 class=\"js-title u-ellipsis CDB-Text CDB-Size-large u-rSpace--m\">' +\n__e( column ) +\n'</h2>\\n      <div class=\"StatsList-tag Tag Tag--outline Tag-outline--grey CDB-Text CDB-Size-small u-upperCase\">' +\n__e( type ) +\n'</div>\\n    </div>\\n    <div class=\"js-stat\"></div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar FormulaOptionModel = require('builder/components/modals/add-widgets/formula/formula-option-model');\nvar CategoryOptionModel = require('builder/components/modals/add-widgets/category/category-option-model');\nvar HistogramOptionModel = require('builder/components/modals/add-widgets/histogram/histogram-option-model');\nvar TimeSeriesOptionModel = require('builder/components/modals/add-widgets/time-series/time-series-option-model');\n\nvar CARTODB_ID = 'cartodb_id';\n\nmodule.exports = function (tuplesItems) {\n  return _.reduce(tuplesItems, function (memo, tuples) {\n    var columnModel = tuples[0].columnModel;\n    var layerDef = tuples[0].layerDefinitionModel;\n    var table = layerDef.getTableName();\n    var type = columnModel.get('type');\n    var columnName = columnModel.get('name');\n    var model;\n\n    if (columnName === CARTODB_ID) {\n      model = new FormulaOptionModel({\n        tuples: tuples,\n        table: table,\n        title: _t('editor.data.stats.feature-count'),\n        column: columnModel.get('type'),\n        operation: 'count',\n        name: columnName\n      });\n      memo.push(model);\n    } else if (type === 'string' || type === 'boolean') {\n      model = new CategoryOptionModel({\n        tuples: tuples,\n        table: table,\n        title: columnName,\n        name: columnName,\n        column: columnModel.get('type'),\n        aggregation: 'count' // or sum\n      });\n      memo.push(model);\n    } else if (columnModel.get('type') === 'number') {\n      model = new HistogramOptionModel({\n        tuples: tuples,\n        table: table,\n        title: columnName,\n        name: columnName,\n        column: columnModel.get('type'),\n        bins: 10\n      });\n      memo.push(model);\n    } else if (columnModel.get('type') === 'date') {\n      model = new TimeSeriesOptionModel({\n        tuples: tuples,\n        table: table,\n        title: columnName,\n        name: columnName,\n        column: columnModel.get('type')\n      });\n      memo.push(model);\n    }\n    return memo;\n  }, []);\n};\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<ul class=\"CodeMirror-error\">\\n  <li class=\"CodeMirror-errorMessage u-lSpace--xl u-rSpace--xl\">\\n    ' +\n__e( _t('components.codemirror.syntax-error') ) +\n'. ' +\n__e( _t('components.codemirror.line') ) +\n' ' +\n__e( line ) +\n': <span>' +\n__e( message ) +\n'</span>\\n  </li>\\n</ul>';\n\n}\nreturn __p\n}","var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar PanelWithOptionsView = require('builder/components/view-options/panel-with-options-view');\nvar InfoWindowHTMLView = require('./infowindow-html-view');\nvar InfowindowContentView = require('./infowindow-content-view');\nvar ScrollView = require('builder/components/scroll/scroll-view');\nvar TabPaneView = require('builder/components/tab-pane/tab-pane-view');\nvar TabPaneCollection = require('builder/components/tab-pane/tab-pane-collection');\nvar Toggler = require('builder/components/toggler/toggler-view');\nvar ApplyButtonView = require('builder/components/apply-button/apply-button-view');\nvar Infobox = require('builder/components/infobox/infobox-factory');\nvar InfoboxModel = require('builder/components/infobox/infobox-model');\nvar InfoboxCollection = require('builder/components/infobox/infobox-collection');\nvar MetricsTracker = require('builder/components/metrics/metrics-tracker');\nvar MetricsTypes = require('builder/components/metrics/metrics-types');\n\nvar cdb = require('internal-carto.js');\n\nvar REQUIRED_OPTS = [\n  'editorModel',\n  'layerDefinitionModel',\n  'userActions'\n];\n\nmodule.exports = CoreView.extend({\n  module: 'infowindow-base-view',\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._initModels();\n    this._initBinds();\n    this._configPanes();\n    this._initTemplates();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    this._initViews();\n    this._infoboxState();\n    this._toggleOverlay();\n\n    return this;\n  },\n\n  _initModels: function () {\n    var content;\n    if (this.model.isCustomTemplate()) {\n      content = this.model.get('template');\n    } else {\n      content = this._getTemplateContent();\n    }\n\n    this._codemirrorModel = new Backbone.Model({\n      content: content\n    });\n\n    this._infoboxModel = new InfoboxModel({\n      state: this._isLayerHidden() ? 'layer-hidden' : ''\n    });\n\n    this._overlayModel = new Backbone.Model({\n      visible: this._isLayerHidden()\n    });\n\n    // Set edition attribute in case custom html is applied and\n    // in case none template is applied\n    this._editorModel.set({\n      edition: this.model.isCustomTemplate(),\n      disabled: !this.model.hasTemplate() && !this.model.isCustomTemplate()\n    });\n\n    this._togglerModel = new Backbone.Model({\n      labels: [_t('editor.infowindow.html-toggle.values'), _t('editor.infowindow.html-toggle.html')],\n      active: this._editorModel.isEditing(),\n      disabled: this._editorModel.isDisabled(),\n      isDisableable: true,\n      tooltip: _t('editor.infowindow.html-toggle.tooltip')\n    });\n  },\n\n  _initViews: function () {\n    var self = this;\n\n    var infoboxSstates = [\n      {\n        state: 'confirm',\n        createContentView: function () {\n          return Infobox.createWithAction({\n            type: 'alert',\n            title: _t('editor.infowindow.messages.custom-html-applied.title'),\n            body: _t('editor.infowindow.messages.custom-html-applied.body'),\n            action: {\n              label: _t('editor.infowindow.messages.custom-html-applied.accept')\n            }\n          });\n        },\n        onAction: self._cancelHTML.bind(self)\n      }, {\n        state: 'layer-hidden',\n        createContentView: function () {\n          return Infobox.createWithAction({\n            type: 'alert',\n            title: _t('editor.messages.layer-hidden.title'),\n            body: _t('editor.messages.layer-hidden.body'),\n            action: {\n              label: _t('editor.messages.layer-hidden.show')\n            }\n          });\n        },\n        onAction: self._showHiddenLayer.bind(self)\n      }\n    ];\n\n    var infoboxCollection = new InfoboxCollection(infoboxSstates);\n\n    var panelWithOptionsView = new PanelWithOptionsView({\n      className: 'Editor-content',\n      editorModel: self._editorModel,\n      infoboxModel: self._infoboxModel,\n      infoboxCollection: infoboxCollection,\n      createContentView: function () {\n        return new TabPaneView({\n          collection: self._collectionPane\n        });\n      },\n      createControlView: function () {\n        return new Toggler({\n          model: self._togglerModel\n        });\n      },\n      createActionView: function () {\n        return new TabPaneView({\n          collection: self._collectionPane,\n          createContentKey: 'createActionView'\n        });\n      }\n    });\n\n    this.$el.append(panelWithOptionsView.render().el);\n    this.addView(panelWithOptionsView);\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.model, 'change', this._onChange);\n    this.listenTo(this._layerDefinitionModel, 'change:visible', this._infoboxState);\n\n    this.listenTo(this._editorModel, 'change:edition', this._onChangeEdition);\n    this.listenTo(this._editorModel, 'change:disabled', this._onChangeDisabled);\n    this.listenTo(this._togglerModel, 'change:active', this._onTogglerChanged);\n    this.listenTo(this._overlayModel, 'change:visible', this._toggleOverlay);\n  },\n\n  _toggleOverlay: function () {\n    var isDisabled = this._overlayModel.get('visible');\n    this.$('.js-overlay').toggleClass('is-disabled', isDisabled);\n  },\n\n  _setContent: function () {\n    if (this._editorModel.get('edition')) {\n      return;\n    }\n\n    var html_value = this._getTemplateContent();\n    this._codemirrorModel.set({\n      content: html_value\n    });\n  },\n\n  _saveInfowindowHTML: function () {\n    var content = this._codemirrorModel.get('content');\n    // Parse\n    var errors = this._getErrors(content);\n\n    if (errors.length === 0) {\n      this._clearErrors();\n\n      // Save old fields\n      if (!this.model.get('old_fields')) {\n        this.model.saveFields();\n      }\n\n      // Save old template name\n      if (!this.model.get('old_template_name')) {\n        this.model.set('old_template_name', this.model.get('template_name'));\n      }\n\n      // new custom template\n      this.model.set({\n        template: content,\n        template_name: ''\n      });\n\n      MetricsTracker.track(MetricsTypes.USED_ADVANCED_MODE, {\n        mode_type: 'popup'\n      });\n\n      this._userActions.saveLayer(this._layerDefinitionModel);\n    } else {\n      this._parseErrors(errors);\n    }\n  },\n\n  _getErrors: function (content) {\n    try {\n      var template = new cdb.core.Template({\n        template: content,\n        type: 'mustache'\n      });\n      template.compile()();\n      if (content === '') {\n        return [{\n          line: 1,\n          message: _t('editor.infowindow.code-mirror.errors.empty')\n        }];\n      } else {\n        return [];\n      }\n    } catch (e) {\n      return e;\n    }\n  },\n\n  _showErrors: function (model) {\n    var errors = this._querySchemaModel.get('query_errors');\n    this._codemirrorModel.set('errors', this._parseErrors(errors));\n  },\n\n  _parseErrors: function (errors) {\n    return errors.map(function (error) {\n      return {\n        line: error.line,\n        message: error.message.split('\\n\\n')[1]\n      };\n    });\n  },\n\n  _clearErrors: function () {\n    this._codemirrorModel.set({ errors: [] });\n  },\n\n  _getTemplateContent: function () {\n    var fields = [];\n    var alternative_names = this.model.get('alternative_names');\n\n    _.each(this.model.get('fields'), function (field, i) {\n      var f = _.clone(field);\n      f.position = i;\n      if (alternative_names && alternative_names[f.name]) {\n        f.alternative_name = alternative_names[f.name];\n      }\n      fields.push(f);\n    });\n\n    var tmpl = new cdb.core.Template({\n      template: this.model.getTemplate(),\n      type: 'mustache'\n    });\n\n    return tmpl.render({ content: { fields: fields } });\n  },\n\n  _configPanes: function () {\n    var self = this;\n\n    var tabPaneTabs = [{\n      selected: !self.model.isCustomTemplate(),\n      createContentView: function () {\n        return new ScrollView({\n          createContentView: function () {\n            return new InfowindowContentView(_.extend(self.options, {\n              templates: self._templates\n            }));\n          }\n        });\n      },\n      createActionView: function () {\n        return new CoreView();\n      }\n    }, {\n      selected: self.model.isCustomTemplate(),\n      createContentView: function () {\n        return new InfoWindowHTMLView({\n          onApplyEvent: self._saveInfowindowHTML.bind(self),\n          codemirrorModel: self._codemirrorModel\n        });\n      },\n      createActionView: function () {\n        return new ApplyButtonView({\n          onApplyClick: self._saveInfowindowHTML.bind(self),\n          overlayModel: self._overlayModel\n        });\n      }\n    }];\n\n    this._collectionPane = new TabPaneCollection(tabPaneTabs);\n  },\n\n  _onChange: function () {\n    this._userActions.saveLayer(this._layerDefinitionModel);\n    this._setContent();\n  },\n\n  _onChangeEdition: function () {\n    this._infoboxState();\n\n    var edition = this._editorModel.get('edition');\n    var index = edition ? 1 : 0;\n    this._collectionPane.at(index).set({ selected: true });\n    this._togglerModel.set({ active: edition });\n  },\n\n  _onChangeDisabled: function () {\n    var disabled = this._editorModel.get('disabled');\n    this._togglerModel.set({ disabled: disabled });\n  },\n\n  _onTogglerChanged: function () {\n    var checked = this._togglerModel.get('active');\n    this._editorModel.set({ edition: checked });\n  },\n\n  _cancelHTML: function () {\n    this.model.setDefault();\n    this._infoboxModel.set({ state: '' });\n    this._overlayModel.set({ visible: false });\n  },\n\n  _isLayerHidden: function () {\n    return this._layerDefinitionModel.get('visible') === false;\n  },\n\n  _infoboxState: function () {\n    var edition = this._editorModel.get('edition');\n    var customTemplate = this.model.isCustomTemplate();\n\n    if (!edition && customTemplate) {\n      this._infoboxModel.set({ state: 'confirm' });\n      this._overlayModel.set({ visible: true });\n    } else if (this._isLayerHidden()) {\n      this._infoboxModel.set({ state: 'layer-hidden' });\n      this._overlayModel.set({ visible: true });\n      this._togglerModel.set({ disabled: true });\n    } else {\n      this._infoboxModel.set({ state: '' });\n      this._overlayModel.set({ visible: false });\n      this._togglerModel.set({ disabled: false });\n    }\n  },\n\n  _showHiddenLayer: function () {\n    var savingOptions = {\n      shouldPreserveAutoStyle: true\n    };\n    this._layerDefinitionModel.toggleVisible();\n    this._userActions.saveLayer(this._layerDefinitionModel, savingOptions);\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"js-selector\">\\n  <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n    <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.layers.infowindow.style.title-label') ) +\n'</h2>\\n  </div>\\n  <p class=\"CDB-Text u-upperCase CDB-FontSize-small u-altTextColor u-bSpace--m js-highlight\">' +\n__e( _t('editor.layers.infowindow.style.select-style') ) +\n'</p>\\n</div>\\n';\n\n}\nreturn __p\n}","var InfowindowBaseView = require('./infowindow-base-view');\n\n/**\n * Select for an Infowindow style type.\n */\nmodule.exports = InfowindowBaseView.extend({\n\n  _initTemplates: function () {\n    this._templates = [\n      {\n        value: '',\n        infowindowIcon: require('./infowindow-icons/infowindow-none.tpl'),\n        label: _t('editor.layers.infowindow.style.none'),\n        tooltip: _t('editor.layers.infowindow.tooltips.none')\n      }, {\n        value: 'infowindow_light',\n        infowindowIcon: require('./infowindow-icons/infowindow-light.tpl'),\n        label: _t('editor.layers.infowindow.style.infowindow_light'),\n        tooltip: _t('editor.layers.infowindow.tooltips.infowindow_light')\n      }, {\n        value: 'infowindow_dark',\n        infowindowIcon: require('./infowindow-icons/infowindow-dark.tpl'),\n        label: _t('editor.layers.infowindow.style.infowindow_dark'),\n        tooltip: _t('editor.layers.infowindow.tooltips.infowindow_dark')\n      }, {\n        value: 'infowindow_color',\n        infowindowIcon: require('./infowindow-icons/infowindow-color.tpl'),\n        label: _t('editor.layers.infowindow.style.infowindow_color'),\n        tooltip: _t('editor.layers.infowindow.tooltips.infowindow_color')\n      }, {\n        value: 'infowindow_header_with_image',\n        infowindowIcon: require('./infowindow-icons/infowindow-image.tpl'),\n        label: _t('editor.layers.infowindow.style.infowindow_header_with_image'),\n        tooltip: _t('editor.layers.infowindow.tooltips.infowindow_header_with_image')\n      }\n    ];\n  }\n\n});\n","var _ = require('underscore');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar CoreView = require('backbone/core-view');\nvar InfowindowSelectView = require('./infowindow-select-view');\nvar InfowindowItemsView = require('./infowindow-items-view');\nvar CarouselCollection = require('builder/components/custom-carousel/custom-carousel-collection');\n\nvar REQUIRED_OPTS = [\n  'querySchemaModel',\n  'layerDefinitionModel',\n  'templates',\n  'editorModel'\n];\n\nmodule.exports = CoreView.extend({\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._initCollection();\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    this._initViews();\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.model, 'change:template_name', this._renderItems);\n    this.listenTo(this.model, 'change:template', this._updateEditor);\n  },\n\n  _initViews: function () {\n    var selectView = new InfowindowSelectView({\n      model: this.model,\n      templatesCollection: this._templatesCollection\n    });\n    this.addView(selectView);\n    this.$el.append(selectView.render().el);\n\n    this._renderItems();\n  },\n\n  _renderItems: function () {\n    if (this._itemsView) {\n      this.removeView(this._itemsView);\n      this._itemsView.clean();\n    }\n\n    this._itemsView = new InfowindowItemsView({\n      model: this.model,\n      querySchemaModel: this._querySchemaModel,\n      layerDefinitionModel: this._layerDefinitionModel,\n      hasValidTemplate: !!this._checkValidTemplate()\n    });\n    this.addView(this._itemsView);\n    this.$el.append(this._itemsView.render().el);\n  },\n\n  _initCollection: function () {\n    this._templatesCollection = new CarouselCollection(\n      _.map(this._templates, function (template) {\n        return {\n          selected: this.model.get('template_name') === template.value,\n          val: template.value,\n          label: template.label,\n          template: function () {\n            return (template.infowindowIcon && template.infowindowIcon()) || template.value;\n          },\n          tooltip: template.tooltip\n        };\n      }, this)\n    );\n  },\n\n  _updateEditor: function () {\n    this._editorModel.set('disabled', !this.model.hasTemplate());\n  },\n\n  _checkValidTemplate: function () {\n    var template = this._templatesCollection.find(function (mdl) {\n      return this.model.get('template_name') === mdl.get('val');\n    }, this);\n\n    return template && template.get('val') !== '';\n  }\n});\n","var template = require('./infowindow-description.tpl');\nvar CoreView = require('backbone/core-view');\n\nmodule.exports = CoreView.extend({\n\n  events: {\n    'click .js-toggle': '_toggle'\n  },\n\n  initialize: function (opts) {\n    if (typeof opts.namesCount === 'undefined') throw new Error('namesCount has to be defined');\n\n    this._namesCount = opts.namesCount;\n  },\n\n  render: function () {\n    var totalFields = this._namesCount;\n    var selectedFields = this.model.fieldCount();\n\n    this.$el.html(\n      template({\n        allSelected: selectedFields && (selectedFields === totalFields),\n        noneSelected: !selectedFields,\n        selectedFields: selectedFields\n      })\n    );\n\n    return this;\n  },\n\n  _toggle: function () {\n    this.trigger('toggle');\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"u-flex u-justifySpace u-alignCenter\">\\n  <p class=\"CDB-Text is-semibold CDB-Size-small u-upperCase js-textInfo\">\\n    ';\n if (noneSelected) { ;\n__p += '\\n      None selected\\n    ';\n } else { ;\n__p += '\\n      ' +\n__e( allSelected ? \"All selected\" : selectedFields + \" selected\" ) +\n'\\n    ';\n };\n__p += '\\n  </p>\\n \\n  <button class=\"CDB-Text CDB-Size-small u-upperCase u-actionTextColor js-toggle\">';\n if (allSelected) { ;\n__p += 'none';\n } else { ;\n__p += 'all';\n } ;\n__p += '</button>\\n</div>';\n\n}\nreturn __p\n}","var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar template = require('./infowindow-field.tpl');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\n\n/**\n * View for an individual column model.\n */\nmodule.exports = CoreView.extend({\n\n  tagName: 'li',\n\n  className: 'js-field Infowindow-listFieldItem',\n\n  events: {\n    'click .js-checkbox': 'toggle',\n    'keyup .js-input': '_onKeyUp',\n    'blur .js-input': '_onBlur'\n  },\n\n  initialize: function (opts) {\n    if (!opts.layerInfowindowModel) throw new Error('layerInfowindowModel is required');\n\n    this._layerInfowindowModel = opts.layerInfowindowModel;\n\n    this.fieldName = opts.field.name;\n    this.fieldTitle = opts.field.title;\n    this.position = opts.position;\n\n    this._layerInfowindowModel.bind('change:fields', this.render, this);\n\n    this.model = new Backbone.Model({\n      title: this._layerInfowindowModel.getAlternativeName(this.fieldName) || this.fieldName,\n      selected: !!this._layerInfowindowModel.containsField(this.fieldName)\n    });\n    this.model.bind('change:title', this._updateTitle, this);\n    this.model.bind('change:selected', this._updateSelected, this);\n  },\n\n  _onBlur: function (e) {\n    var value = this.$el.find('.js-input').val();\n    value = this._stripHTML(value);\n\n    this.model.set('title', value);\n  },\n\n  _updateTitle: function () {\n    var value = this.model.get('title');\n    value = this._stripHTML(value);\n    this._layerInfowindowModel.setAlternativeName(this.fieldName, value);\n\n    var isBlank = this._isBlank(value);\n    this._layerInfowindowModel.setFieldProperty(this.fieldName, 'title', !isBlank);\n  },\n\n  _onKeyUp: function (e) {\n    if (e.keyCode === 13) { // Enter\n      var value = this.$el.find('.js-input').val();\n      value = this._stripHTML(value);\n\n      this.model.set('title', value);\n    // } else if (e.keyCode === 27) { // Esc\n    //   this._close();\n    }\n  },\n\n  _isBlank: function (str) {\n    return (!str || /^\\s*$/.test(str));\n  },\n\n  _stripHTML: function (input, allowed) {\n    allowed = (((allowed || '') + '').toLowerCase().match(/<[a-z][a-z0-9]*>/g) || []).join('');\n    var tags = /<\\/?([a-z][a-z0-9]*)\\b[^>]*>/gi;\n    if (!input || (typeof input !== 'string')) return '';\n    return input.replace(tags, function ($0, $1) {\n      return allowed.indexOf('<' + $1.toLowerCase() + '>') > -1 ? $0 : '';\n    });\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this.$el.html(template({\n      name: this.fieldName,\n      title: this._layerInfowindowModel.getFieldProperty(this.fieldName, 'title'),\n      alternativeName: this._layerInfowindowModel.getAlternativeName(this.fieldName),\n      isSelected: !!this._layerInfowindowModel.containsField(this.fieldName)\n    }));\n    this.$el.attr('data-view-cid', this.cid);\n\n    this._initViews();\n\n    return this;\n  },\n\n  _initViews: function () {\n    var tooltip = new TipsyTooltipView({\n      el: this.$('.js-input'),\n      gravity: 'w',\n      title: function () {\n        return _t('editor.layers.infowindow.items.help');\n      }\n    });\n    this.addView(tooltip);\n  },\n\n  toggle: function (e) {\n    e && e.preventDefault();\n\n    this.model.set('selected', !this.model.get('selected'));\n\n    return false;\n  },\n\n  _updateSelected: function (e) {\n    if (!this._layerInfowindowModel.containsField(this.fieldName)) {\n      this._layerInfowindowModel.addField(this.fieldName, this.position);\n    } else {\n      this.model.set('title', null);\n      this._layerInfowindowModel.removeField(this.fieldName);\n    }\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"CDB-Text CDB-Fieldset u-tSpace--m\">\\n  <div class=\"CDB-Legend CDB-Legend--big u-ellipsis CDB-Text CDB-Size-medium u-rSpace--m\">\\n    <div class=\"Infowindow-listFieldsOrder CDB-Shape u-iblock u-malign\">\\n      <div class=\"CDB-Shape-rectsHandle is-small\">\\n        <div class=\"CDB-Shape-rectsHandleItem CDB-Shape-rectsHandleItem--grey is-first\"></div>\\n        <div class=\"CDB-Shape-rectsHandleItem CDB-Shape-rectsHandleItem--grey is-second\"></div>\\n        <div class=\"CDB-Shape-rectsHandleItem CDB-Shape-rectsHandleItem--grey is-third\"></div>\\n      </div>\\n    </div>\\n    <input class=\"CDB-Checkbox js-checkbox\" type=\"checkbox\" ';\n if (isSelected) { ;\n__p += 'checked=\"checked\"';\n } ;\n__p += '\">\\n    <span class=\"u-iBlock CDB-Checkbox-face u-rSpace\"></span>\\n    <label class=\"u-rSpace--m\" title=\"' +\n__e( name ) +\n'\">' +\n__e( name ) +\n'</label>\\n  </div>\\n  <input type=\"text\" name=\"text\" placeholder=\\'\"' +\n__e( name ) +\n'\"\\' value=\"';\n if (!isSelected) { ;\n__p +=\n__e( name );\n } else { ;\n\n if (title) { ;\n\n if (alternativeName) { ;\n__p +=\n__e( alternativeName );\n } else { ;\n__p +=\n__e( name );\n } ;\n\n } ;\n\n } ;\n__p += '\" class=\"CDB-InputText js-input\" ';\n if (!isSelected) { ;\n__p += 'disabled';\n } ;\n__p += '>\\n</div>\\n';\n\n}\nreturn __p\n}","var FieldView = require('./infowindow-field-view.js');\nvar InfowindowDescriptionView = require('./infowindow-description-view.js');\nvar template = require('./infowindow-fields.tpl');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar $ = require('jquery');\nrequire('jquery-ui');\n\nmodule.exports = CoreView.extend({\n\n  initialize: function (opts) {\n    if (!opts.querySchemaModel) throw new Error('querySchemaModel is required');\n    if (!opts.layerDefinitionModel) throw new Error('layerDefinitionModel is required');\n\n    this._querySchemaModel = opts.querySchemaModel;\n    this._layerDefinitionModel = opts.layerDefinitionModel;\n\n    // An internal collection to keep track of the columns and their order\n    this._sortedFields = new Backbone.Collection();\n    this._sortedFields.comparator = function (model) {\n      return model.get('position');\n    };\n\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.model.bind('remove:fields', this._renderDescription, this);\n    this.model.bind('add:fields', this._renderDescription, this);\n  },\n\n  render: function () {\n    this._destroySortable();\n    this.clearSubViews();\n\n    this.$el.html(template());\n\n    this._renderDescription();\n    this._renderFields();\n    this._initSortable();\n    this._renderSelectAll();\n    this._storeSortedFields();\n\n    return this;\n  },\n\n  _renderDescription: function () {\n    if (this._fieldsDescriptionView) {\n      this.removeView(this._fieldsDescriptionView);\n      this._fieldsDescriptionView.clean();\n    }\n\n    this._fieldsDescriptionView = new InfowindowDescriptionView({\n      model: this.model,\n      namesCount: this._getColumnNames().length\n    });\n\n    this._fieldsDescriptionView.bind('toggle', this.manageAll, this);\n\n    this.addView(this._fieldsDescriptionView);\n    this.$('.js-description').append(this._fieldsDescriptionView.render().el);\n\n    this._renderSelectAll();\n  },\n\n  _renderSelectAll: function () {\n    this.selectedAll = this._allFieldsSelected();\n  },\n\n  _allFieldsSelected: function () {\n    var selectedAll = true;\n\n    _.each(this._getColumnNames(), function (field) {\n      if (!this.model.containsField(field)) {\n        selectedAll = false;\n      }\n    }, this);\n\n    return selectedAll;\n  },\n\n  manageAll: function (e) {\n    if (!this.selectedAll) {\n      this._selectAll();\n    } else {\n      this._unselectAll();\n    }\n  },\n\n  _selectAll: function () {\n    var names = this._sortedFields.map(function (w) { return w.get('name'); });\n    var promises = [];\n\n    _.each(names, function (f) {\n      if (!this.model.containsField(f)) {\n        promises.push(this.model._addField(f));\n      }\n    }, this);\n\n    $.when.apply($, promises).then(function () {\n      this.model.sortFields();\n      this.model.trigger('add:fields');\n      this.model.trigger('change:fields', this.model, this.model.get('fields'));\n      this.model.trigger('change', this.model);\n\n      this._toggleSelectAll();\n    }.bind(this));\n  },\n\n  _unselectAll: function () {\n    this.model.clearFields();\n    this.model.trigger('change:fields');\n    this._toggleSelectAll();\n  },\n\n  _toggleSelectAll: function () {\n    this.selectedAll = !this.selectedAll;\n    this._renderDescription();\n  },\n\n  _initSortable: function () {\n    this.$('.js-fields').sortable({\n      axis: 'y',\n      items: '> li',\n      opacity: 0.8,\n      update: this._onSortableFinish.bind(this),\n      forcePlaceholderSize: false\n    });\n  },\n\n  _destroySortable: function () {\n    if (this.$('.js-fields').data('ui-sortable')) {\n      this.$('.js-fields').sortable('destroy');\n    }\n  },\n\n  _onSortableFinish: function () {\n    this._storeSortedFields();\n  },\n\n  _getSortedColumnNames: function () {\n    var names = this._getColumnNames();\n\n    if (this.model.fieldCount() > 0) {\n      names.sort(function (a, b) {\n        var pos_a = this.model.getFieldPos(a);\n        var pos_b = this.model.getFieldPos(b);\n        return pos_a - pos_b;\n      }.bind(this));\n    }\n    return names;\n  },\n\n  _storeSortedFields: function () {\n    this._sortedFields.reset([]);\n\n    this.$('.js-fields > .js-field').each(function (index, item) {\n      var view = this._subviews[$(item).data('view-cid')];\n\n      this.model.setFieldProperty(view.fieldName, 'position', index);\n      view.position = index;\n\n      this._sortedFields.add({\n        name: view.fieldName,\n        position: index\n      });\n    }.bind(this));\n  },\n\n  _getColumnNames: function () {\n    var filteredColumns = this._querySchemaModel.columnsCollection.filter(function (c) {\n      return !_.contains(this.model.SYSTEM_COLUMNS, c.get('name'));\n    }.bind(this));\n\n    var columnNames = [];\n\n    _.each(filteredColumns, function (m) {\n      columnNames.push(m.get('name'));\n    });\n\n    return columnNames;\n  },\n\n  _renderFields: function () {\n    var renderField = function (field) {\n      var title = this.model.getFieldProperty(field, 'title');\n\n      var view = new FieldView({\n        layerInfowindowModel: this.model,\n        field: { name: field, title: title },\n        position: this.model.getFieldPos(field)\n      });\n\n      this.addView(view);\n      this.$('.js-fields').append(view.render().el);\n    }.bind(this);\n\n    var names = this._getSortedColumnNames();\n    var selected = [];\n    var fields = this.model.get('fields');\n\n    if (_.isArray(fields)) {\n      selected = fields.map(function (field) {\n        return field.name;\n      });\n    }\n\n    var rest = _.difference(names, selected);\n    _.each(selected.concat(rest), renderField);\n  },\n\n  clean: function () {\n    this._destroySortable();\n    CoreView.prototype.clean.apply(this);\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"js-description\"></div>\\n<ul class=\"js-fields Infowindow-listFields\"></ul>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar DEBOUNCE_TIME = 350;\n\nmodule.exports = Backbone.Model.extend({\n\n  initialize: function (attrs, opts) {\n    if (!opts.layerInfowindowModel) throw new Error('layerInfowindowModel is required');\n    this._layerInfowindowModel = opts.layerInfowindowModel;\n\n    this._generateSchema();\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.bind('change', _.debounce(this._onChange.bind(this), DEBOUNCE_TIME), this);\n  },\n\n  _onChange: function () {\n    var self = this;\n\n    _.each(this.changed, function (val, key) {\n      // if the attr doesn't exist in the infowindowModel it will be created, BOOM\n      self._layerInfowindowModel.set(key, val);\n    });\n  },\n\n  _generateSchema: function () {\n    this.schema = {};\n\n    var type = this._layerInfowindowModel.get('template_name');\n\n    if (type !== '' && type !== 'none') {\n      if (this._layerInfowindowModel.has('width')) {\n        this.schema.width = {\n          type: 'Number',\n          title: _t('editor.layers.infowindow.style.size.label'),\n          validators: ['required', {\n            type: 'interval',\n            min: 200,\n            max: 400\n          }],\n          editorAttrs: {\n            help: _t('editor.layers.infowindow.style.size.help')\n          }\n        };\n      }\n    }\n\n    if (type === 'infowindow_color') {\n      this.schema.headerColor = {\n        type: 'Fill',\n        title: _t('editor.layers.infowindow.style.header-color'),\n        options: [],\n        dialogMode: DialogConstants.Mode.FLOAT,\n        editorAttrs: {\n          color: {\n            hidePanes: ['value']\n          }\n        },\n        validators: ['required']\n      };\n    }\n  }\n\n});\n","var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar template = require('./infowindow-form.tpl');\nvar InfowindowFormModel = require('./infowindow-form-model');\n\nmodule.exports = CoreView.extend({\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template());\n\n    this._generateForms();\n    this._initBinds();\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.bind('change:template_name', this._generateForms, this);\n  },\n\n  _generateForms: function () {\n    if (this._formView) {\n      this._formView.remove();\n    }\n\n    this._formModel = new InfowindowFormModel({\n      width: this.model.get('width'),\n      headerColor: this.model.get('headerColor')\n    }, {\n      layerInfowindowModel: this.model\n    });\n\n    this._formView = new Backbone.Form({\n      model: this._formModel\n    });\n\n    this._formView.bind('change', function () {\n      this.commit();\n    });\n\n    this.$('.js-form').append(this._formView.render().$el);\n  },\n\n  clean: function () {\n    if (this._formView) {\n      this._formView.remove();\n    }\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"js-form\"></div>\\n';\n\n}\nreturn __p\n}","var InfowindowBaseView = require('./infowindow-base-view');\n\n/**\n * Select for an Infowindow style type.\n */\nmodule.exports = InfowindowBaseView.extend({\n\n  _initTemplates: function () {\n    this._templates = [\n      {\n        value: '',\n        infowindowIcon: require('./tooltip-icons/tooltip-none.tpl'),\n        label: _t('editor.layers.infowindow.style.none'),\n        tooltip: _t('editor.layers.infowindow.tooltips.none')\n      }, {\n        value: 'tooltip_light',\n        infowindowIcon: require('./tooltip-icons/tooltip-light.tpl'),\n        label: _t('editor.layers.infowindow.style.infowindow_light'),\n        tooltip: _t('editor.layers.infowindow.tooltips.infowindow_light')\n      }, {\n        value: 'tooltip_dark',\n        infowindowIcon: require('./tooltip-icons/tooltip-dark.tpl'),\n        label: _t('editor.layers.infowindow.style.infowindow_dark'),\n        tooltip: _t('editor.layers.infowindow.tooltips.infowindow_dark')\n      }\n    ];\n  }\n\n});\n","var CoreView = require('backbone/core-view');\nvar CodeMirrorView = require('builder/components/code-mirror/code-mirror-view');\nvar ErrorTemplate = require('./code-mirror-error.tpl');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'codemirrorModel',\n  'onApplyEvent'\n];\n\nmodule.exports = CoreView.extend({\n  module: 'editor:layers:layer-content-views:infowindow:infowindow-html-view',\n\n  className: 'Editor-content',\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n    return this;\n  },\n\n  _initViews: function () {\n    this.codeMirrorView = new CodeMirrorView({\n      model: this._codemirrorModel,\n      tips: [\n        _t('editor.infowindow.code-mirror.save'),\n        _t('editor.infowindow.code-mirror.sanitize')\n      ],\n      errorTemplate: ErrorTemplate\n    });\n\n    this.codeMirrorView.bind('codeSaved', this._triggerCodeSaved, this);\n    this.addView(this.codeMirrorView);\n    this.$el.append(this.codeMirrorView.render().el);\n  },\n\n  _triggerCodeSaved: function (code, view) {\n    this._onApplyEvent && this._onApplyEvent();\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"58px\" height=\"38px\" viewBox=\"608 430 58 38\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n    <g id=\"PopUp\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(608.000000, 431.000000)\">\\n        <path d=\"M1,2.00174332 C1,0.89621101 1.90230818,0 2.99306965,0 L55.0069304,0 C56.1076723,0 57,0.889261723 57,2.00174332 L57,29.9982567 C57,31.103789 56.1032859,32 55.0073354,32 L18.4262695,32 L9,36 L9,32 L2.99810135,32 C1.89458045,32 1,31.1107383 1,29.9982567 L1,2.00174332 L1,2.00174332 Z\" id=\"Rectangle-2087\" stroke=\"#EEEEEE\" fill=\"#FFFFFF\"></path>\\n        <path d=\"M15,4.35207426e-14 L10.3214747,12 L1,12 L1,3.48144531 C1,3.48144531 0.787841764,1.33203125 1.49902344,0.666015625 C2.21020511,4.35207426e-14 3.82543945,4.35207426e-14 3.82543945,4.35207426e-14 L15,4.35207426e-14 Z\" id=\"Rectangle-678\" fill=\"#9AE0AA\"></path>\\n        <polygon id=\"Rectangle-678\" fill=\"#F4F1DE\" points=\"27 0 22.3214747 12 9 12 13.6785253 0\"></polygon>\\n        <polygon id=\"Rectangle-678\" fill=\"#E37E62\" points=\"39 0 34.3214747 12 21 12 25.6785253 0\"></polygon>\\n        <polygon id=\"Rectangle-678\" fill=\"#3D3D5B\" points=\"51 0 46.3214747 12 33 12 37.6785253 0\"></polygon>\\n        <path d=\"M54.2199707,0 C54.2199707,0 56.0734097,0.047231609 56.5109863,0.508300759 C57.0344286,1.05984554 57.1030273,3.0378418 57.1030273,3.0378418 L57.1030273,12 L46,12 L50.6785253,0 L54.2199707,0 Z\" id=\"Rectangle-678\" fill=\"#F2CF8F\"></path>\\n        <rect id=\"Rectangle-678\" fill=\"#FFFFFF\" opacity=\"0.32\" x=\"7\" y=\"4\" width=\"36\" height=\"4\"></rect>\\n        <rect id=\"Rectangle-679\" fill=\"#DDDDDD\" x=\"6\" y=\"17\" width=\"45\" height=\"2\"></rect>\\n        <rect id=\"Rectangle-680\" fill=\"#DDDDDD\" x=\"6\" y=\"21\" width=\"26\" height=\"2\"></rect>\\n        <rect id=\"Rectangle-680\" fill=\"#DDDDDD\" x=\"6\" y=\"25\" width=\"19\" height=\"2\"></rect>\\n    </g>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"56px\" height=\"36px\" viewBox=\"512 431 56 36\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n    <g id=\"PopUp\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(512.000000, 431.000000)\">\\n        <path d=\"M0,2.00174332 C0,0.89621101 0.902308181,0 1.99306965,0 L54.0069304,0 C55.1076723,0 56,0.889261723 56,2.00174332 L56,29.9982567 C56,31.103789 55.1032859,32 54.0073354,32 L17.4262695,32 L8,36 L8,32 L1.99810135,32 C0.894580447,32 0,31.1107383 0,29.9982567 L0,2.00174332 L0,2.00174332 Z\" id=\"Rectangle-2087\" fill=\"#2E3C43\"></path>\\n        <rect id=\"Rectangle-679\" fill=\"#636D72\" x=\"5\" y=\"15\" width=\"45\" height=\"2\"></rect>\\n        <rect id=\"Rectangle-680\" fill=\"#636D72\" x=\"5\" y=\"19\" width=\"26\" height=\"2\"></rect>\\n        <rect id=\"Rectangle-680\" fill=\"#636D72\" x=\"5\" y=\"23\" width=\"19\" height=\"2\"></rect>\\n        <rect id=\"Rectangle-680\" fill=\"#636D72\" x=\"5\" y=\"11\" width=\"26\" height=\"2\"></rect>\\n        <rect id=\"Rectangle-680\" fill=\"#636D72\" x=\"5\" y=\"7\" width=\"36\" height=\"2\"></rect>\\n    </g>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"58px\" height=\"38px\" viewBox=\"688 430 58 38\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n    <g id=\"IMG\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(689.000000, 431.000000)\">\\n        <path d=\"M0,2.00174332 C0,0.89621101 0.902308181,0 1.99306965,0 L54.0069304,0 C55.1076723,0 56,0.889261723 56,2.00174332 L56,29.9982567 C56,31.103789 55.1032859,32 54.0073354,32 L17.4262695,32 L8,36 L8,32 L1.99810135,32 C0.894580447,32 0,31.1107383 0,29.9982567 L0,2.00174332 L0,2.00174332 Z\" id=\"Rectangle-2087\" stroke=\"#EEEEEE\" fill=\"#FFFFFF\"></path>\\n        <path d=\"M54.0069304,0 C55.1076723,0 56,0.901950359 56,2.0085302 L56,12 L0,12 L0,2.0085302 C0,0.899249601 0.902308181,0 1.99306965,0 L54.0069304,0 Z\" id=\"Rectangle-678\" fill=\"#CBCED0\"></path>\\n        <rect id=\"Rectangle-678\" fill=\"#FFFFFF\" opacity=\"0.32\" x=\"6\" y=\"4\" width=\"28\" height=\"4\"></rect>\\n        <rect id=\"Rectangle-679\" fill=\"#DDDDDD\" x=\"5\" y=\"17\" width=\"45\" height=\"2\"></rect>\\n        <rect id=\"Rectangle-680\" fill=\"#DDDDDD\" x=\"5\" y=\"21\" width=\"26\" height=\"2\"></rect>\\n        <rect id=\"Rectangle-680\" fill=\"#DDDDDD\" x=\"5\" y=\"25\" width=\"19\" height=\"2\"></rect>\\n        <path d=\"M43.6,6 L46,8 L49.6,2 L52,10 L40,10 L43.6,6 Z M41,4 C41.5522847,4 42,3.55228475 42,3 C42,2.44771525 41.5522847,2 41,2 C40.4477153,2 40,2.44771525 40,3 C40,3.55228475 40.4477153,4 41,4 Z\" id=\"Rectangle-5896\" fill=\"#FFFFFF\"></path>\\n    </g>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"58px\" height=\"38px\" viewBox=\"429 431 58 38\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n    <g id=\"PopUp-Copy\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(430.000000, 432.000000)\">\\n        <path d=\"M0,2.00174332 C0,0.89621101 0.902308181,0 1.99306965,0 L54.0069304,0 C55.1076723,0 56,0.889261723 56,2.00174332 L56,29.9982567 C56,31.103789 55.1032859,32 54.0073354,32 L17.4262695,32 L8,36 L8,32 L1.99810135,32 C0.894580447,32 0,31.1107383 0,29.9982567 L0,2.00174332 L0,2.00174332 Z\" id=\"Rectangle-2087\" stroke=\"#EEEEEE\" fill=\"#FFFFFF\"></path>\\n        <rect id=\"Rectangle-679\" fill=\"#DDDDDD\" x=\"4\" y=\"14\" width=\"45\" height=\"2\"></rect>\\n        <rect id=\"Rectangle-680\" fill=\"#DDDDDD\" x=\"4\" y=\"18\" width=\"26\" height=\"2\"></rect>\\n        <rect id=\"Rectangle-680\" fill=\"#DDDDDD\" x=\"4\" y=\"22\" width=\"19\" height=\"2\"></rect>\\n        <rect id=\"Rectangle-680\" fill=\"#DDDDDD\" x=\"4\" y=\"10\" width=\"26\" height=\"2\"></rect>\\n        <rect id=\"Rectangle-680\" fill=\"#DDDDDD\" x=\"4\" y=\"6\" width=\"36\" height=\"2\"></rect>\\n    </g>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<p class=\"CDB-Text CDB-Size-small u-altTextColor u-upperCase\">None</p>';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar template = require('./infowindow-items.tpl');\nvar InfowindowFieldsView = require('./infowindow-fields-view');\n\nmodule.exports = CoreView.extend({\n\n  initialize: function (opts) {\n    if (!opts.querySchemaModel) throw new Error('querySchemaModel is required');\n    if (!opts.layerDefinitionModel) throw new Error('layerDefinitionModel is required');\n    if (typeof opts.hasValidTemplate === 'undefined') throw new Error('hasValidTemplate has to be defined');\n    this._querySchemaModel = opts.querySchemaModel;\n    this._layerDefinitionModel = opts.layerDefinitionModel;\n    this._hasValidTemplate = opts.hasValidTemplate;\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    if (this._hasValidTemplate) {\n      this._initViews();\n    }\n\n    return this;\n  },\n\n  _initViews: function () {\n    this.$el.html(template({\n      title: _t('editor.layers.infowindow.items.title-label')\n    }));\n\n    if (this._infowindowFieldsView) {\n      this.removeView(this._infowindowFieldsView);\n      this._infowindowFieldsView.clean();\n    }\n\n    this._infowindowFieldsView = new InfowindowFieldsView({\n      model: this.model,\n      querySchemaModel: this._querySchemaModel,\n      layerDefinitionModel: this._layerDefinitionModel\n    });\n\n    this.$('.js-content').append(this._infowindowFieldsView.render().$el);\n    this.addView(this._infowindowFieldsView);\n\n    return this;\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"Editor-HeaderInfo\">\\n  <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">2</div>\\n\\n  <div class=\"Editor-HeaderInfo-Inner CDB-Text\">\\n    <div class=\"Editor-HeaderInfo-Title u-bSpace--m\">\\n      <h2 class=\"Editor-HeaderInfo-TitleText CDB-Text CDB-Size-large\">' +\n__e( _t('editor.layers.infowindow.items.title-label') ) +\n'</h2>\\n    </div>\\n\\n    <div class=\"js-content\"></div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar template = require('./infowindow-select.tpl');\nvar CarouselFormView = require('builder/components/carousel-form-view');\nvar InfowindowFormView = require('./infowindow-form-view');\n\nmodule.exports = CoreView.extend({\n\n  initialize: function (opts) {\n    if (!opts.templatesCollection) throw new Error('templatesCollection is required');\n    this._templatesCollection = opts.templatesCollection;\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this.$el.html(template());\n\n    this._renderCarousel();\n    this._renderForm();\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.bind('change:headerColor', this._onColorChange, this);\n  },\n\n  _onColorChange: function () {\n    this._setTemplate(this.model.get('template_name'));\n  },\n\n  _checkValidTemplate: function () {\n    var template = this._templatesCollection.find(function (mdl) {\n      return this.model.get('template_name') === mdl.get('val');\n    }, this);\n\n    return template && template.get('val') !== '';\n  },\n\n  _setNoneTemplate: function () {\n    var noneTemplate = this._templatesCollection.find(function (mdl) {\n      return mdl.get('val') === '';\n    }, this);\n\n    noneTemplate.set('selected', true);\n  },\n\n  _setTemplate: function (template_name) {\n    this.model.setTemplate(template_name);\n  },\n\n  _renderCarousel: function () {\n    if (!this._checkValidTemplate()) {\n      this._setNoneTemplate();\n    }\n\n    this._templatesCollection.bind('change:selected', function (mdl) {\n      if (mdl.get('selected')) {\n        var value = mdl.getValue();\n        this._setTemplate(value);\n      }\n    }, this);\n    this.add_related_model(this._templatesCollection);\n\n    var view = new CarouselFormView({\n      collection: this._templatesCollection,\n      template: require('./infowindow-carousel.tpl')\n    });\n    this.addView(view);\n    this.$('.js-select').append(view.render().el);\n  },\n\n  _renderForm: function () {\n    if (this._infowindowFormView) {\n      this.removeView(this._infowindowFormView);\n      this._infowindowFormView.clean();\n    }\n\n    this._infowindowFormView = new InfowindowFormView({\n      model: this.model\n    });\n    this.addView(this._infowindowFormView);\n    this.$('.js-select').append(this._infowindowFormView.render().el);\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"Editor-HeaderInfo\">\\n  <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">1</div>\\n  <div class=\"Editor-HeaderInfo-inner CDB-Text js-select\"></div>\\n</div>\\n';\n\n}\nreturn __p\n}","var Backbone = require('backbone');\nvar _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar InfowindowClickView = require('./infowindow-click-view');\nvar TooltipView = require('./infowindow-hover-view');\nvar createTextLabelsTabPane = require('builder/components/tab-pane/create-text-labels-tab-pane');\nvar TabPaneTemplate = require('builder/editor/tab-pane-submenu.tpl');\nvar popupPlaceholderTemplate = require('./popups-placeholder.tpl');\nvar layerTabMessageTemplate = require('builder/editor/layers/layer-tab-message.tpl');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'userActions',\n  'layerDefinitionModel',\n  'querySchemaModel',\n  'editorModel',\n  'layerContentModel'\n];\n\nmodule.exports = CoreView.extend({\n  module: 'infowindows-view',\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._initViewState();\n    this._initModels();\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    if (this._viewState.get('isDataFiltered')) {\n      this._renderFilteredData();\n    } else if (this._isNotAggregatedType() && this._hasColumns()) {\n      this._initViews();\n    } else {\n      this._renderPlaceholder();\n    }\n\n    return this;\n  },\n\n  _initViewState: function () {\n    this._viewState = new Backbone.Model({\n      isDataFiltered: false\n    });\n\n    this._setViewValues();\n  },\n\n  _initModels: function () {\n    this._layerInfowindowModel = this._layerDefinitionModel.infowindowModel;\n    this._layerTooltipModel = this._layerDefinitionModel.tooltipModel;\n\n    this._editorModel.set({\n      edition: false\n    });\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._editorModel, 'change:edition', this._changeStyle);\n    this.listenTo(this._layerInfowindowModel, 'change:template', this._updateSelectedChild);\n    this.listenTo(this._layerTooltipModel, 'change:template', this._updateSelectedChild);\n    this.listenTo(this._layerContentModel, 'change:state', this._setViewValues);\n    this.listenTo(this._viewState, 'change:isDataFiltered', this.render);\n    this.listenTo(this._querySchemaModel, 'change:status', this.render);\n  },\n\n  _initViews: function () {\n    var self = this;\n\n    var clickTemplate = _t('editor.layers.infowindow.style.none');\n    var hoverTemplate = _t('editor.layers.tooltip.style.none');\n\n    if (this._layerInfowindowModel.isCustomTemplate()) {\n      clickTemplate = _t('editor.layers.infowindow.style.custom');\n    } else if (this._layerInfowindowModel.hasTemplate()) {\n      clickTemplate = _t('editor.layers.infowindow.style.' + this._layerInfowindowModel.get('template_name'));\n    }\n\n    if (this._layerTooltipModel.isCustomTemplate()) {\n      hoverTemplate = _t('editor.layers.tooltip.style.custom');\n    } else if (this._layerTooltipModel.hasTemplate()) {\n      hoverTemplate = _t('editor.layers.tooltip.style.' + this._layerTooltipModel.get('template_name'));\n    }\n\n    var selectedModel = this._layerTabPaneView && this._layerTabPaneView.collection.find(function (model) {\n      return model.get('selected');\n    });\n    var selectedTab = selectedModel ? selectedModel.get('name') : 'click';\n\n    var tabPaneTabs = [{\n      name: 'click',\n      selected: selectedTab === 'click',\n      label: _t('editor.layers.infowindow-menu-tab-pane-labels.click'),\n      createContentView: function () {\n        return new InfowindowClickView({\n          className: 'Editor-content',\n          querySchemaModel: self._querySchemaModel,\n          userActions: self._userActions,\n          editorModel: self._editorModel,\n          model: self._layerInfowindowModel,\n          layerDefinitionModel: self._layerDefinitionModel\n        });\n      },\n      selectedChild: clickTemplate\n    }, {\n      name: 'hover',\n      selected: selectedTab === 'hover',\n      label: _t('editor.layers.infowindow-menu-tab-pane-labels.hover'),\n      createContentView: function () {\n        return new TooltipView({\n          className: 'Editor-content',\n          querySchemaModel: self._querySchemaModel,\n          userActions: self._userActions,\n          editorModel: self._editorModel,\n          model: self._layerTooltipModel,\n          layerDefinitionModel: self._layerDefinitionModel\n        });\n      },\n      selectedChild: hoverTemplate\n    }];\n\n    var tabPaneOptions = {\n      tabPaneOptions: {\n        template: TabPaneTemplate,\n        tabPaneItemOptions: {\n          tagName: 'li',\n          klassName: 'CDB-NavSubmenu-item'\n        }\n      },\n      tabPaneItemLabelOptions: {\n        tagName: 'button',\n        className: 'CDB-NavSubmenu-link u-upperCase'\n      }\n    };\n\n    this._layerTabPaneView = createTextLabelsTabPane(tabPaneTabs, tabPaneOptions);\n    this.$el.append(this._layerTabPaneView.render().$el);\n    this.addView(this._layerTabPaneView);\n  },\n\n  _isLayerHidden: function () {\n    return this._layerDefinitionModel.get('visible') === false;\n  },\n\n  _hasColumns: function () {\n    var columns = this._querySchemaModel.columnsCollection.models;\n\n    var filteredColumns = _(columns).filter(function (c) {\n      return !_.contains(this._layerInfowindowModel.SYSTEM_COLUMNS, c.get('name'));\n    }, this);\n\n    return filteredColumns.length;\n  },\n\n  _isNotAggregatedType: function () {\n    var styleModel = this._layerDefinitionModel.styleModel;\n    return this._layerInfowindowModel && styleModel && !styleModel.isAggregatedType() && !styleModel.isAnimation();\n  },\n\n  _renderPlaceholder: function () {\n    if (this._layerInfowindowModel && !this._hasColumns()) {\n      this.$el.append(popupPlaceholderTemplate({\n        placeholder: _t('editor.layers.infowindow.placeholder-columns-text')\n      }));\n    } else {\n      this.$el.append(popupPlaceholderTemplate({\n        placeholder: _t('editor.layers.infowindow.placeholder-interactivity-text')\n      }));\n    }\n  },\n\n  _renderFilteredData: function () {\n    this.$el.append(\n      layerTabMessageTemplate({\n        message: _t('editor.layers.warnings.no-data.message'),\n        action: _t('editor.layers.warnings.no-data.action-message')\n      })\n    );\n  },\n\n  _changeStyle: function (model) {\n    if (this._layerTabPaneView) { this._layerTabPaneView.changeStyleMenu(model); }\n  },\n\n  _updateSelectedChild: function () {\n    // TODO: Move to tabPaneView\n    var selectedChild;\n    var selectedChildTxt;\n\n    switch (this._layerTabPaneView.getSelectedTabPaneName()) {\n      case 'click':\n        selectedChild = this._layerInfowindowModel.get('template_name');\n        selectedChildTxt = _t('editor.layers.infowindow.style.none');\n\n        if (this._layerInfowindowModel.isCustomTemplate()) {\n          selectedChildTxt = _t('editor.layers.infowindow.style.custom');\n        } else if (this._layerInfowindowModel.hasTemplate()) {\n          selectedChildTxt = _t('editor.layers.infowindow.style.' + selectedChild);\n        }\n\n        break;\n      case 'hover':\n        selectedChild = this._layerTooltipModel.get('template_name');\n        selectedChildTxt = _t('editor.layers.tooltip.style.none');\n\n        if (this._layerTooltipModel.isCustomTemplate()) {\n          selectedChildTxt = _t('editor.layers.tooltip.style.custom');\n        } else if (this._layerTooltipModel.hasTemplate()) {\n          selectedChildTxt = _t('editor.layers.tooltip.style.' + selectedChild);\n        }\n\n        break;\n    }\n\n    this._layerTabPaneView.$('.js-menu .CDB-NavSubmenu-item.is-selected .js-NavSubmenu-status').html(selectedChildTxt);\n    this._layerTabPaneView.$('.js-list .Carousel-item').removeClass('is-selected');\n    this._layerTabPaneView.$('.js-list .Carousel-item.js-' + selectedChild).addClass('is-selected');\n  },\n\n  _showHiddenLayer: function () {\n    var savingOptions = {\n      shouldPreserveAutoStyle: true\n    };\n    this._layerDefinitionModel.toggleVisible();\n    this._userActions.saveLayer(this._layerDefinitionModel, savingOptions);\n  },\n\n  _setViewValues: function () {\n    this._layerDefinitionModel.isDataFiltered()\n      .then(function (isDataFiltered) {\n        this._viewState.set('isDataFiltered', isDataFiltered);\n      }.bind(this));\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<h2 class=\"CDB-Text CDB-Size-huge is-light u-secondaryTextColor\">' +\n__e( placeholder ) +\n'</h2>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"58px\" height=\"32px\" viewBox=\"494 496 58 32\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n    <g id=\"PopUp-Copy-3\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(494.000000, 496.000000)\">\\n        <path d=\"M2.99306965,0 L55.0069304,0 C56.1076723,0 57,0.889261723 57,2.00174332 L57,29.9982567 C57,31.103789 56.1032859,32 55.0073354,32 L18.4262695,32 L9,32 L0.998101354,32 L1,2.00174332 C1,0.89621101 1.90230818,0 2.99306965,0 Z\" id=\"Rectangle-2087\" fill=\"#2E3C43\"></path>\\n        <rect id=\"Rectangle-679\" fill=\"#636D72\" x=\"6\" y=\"15\" width=\"45\" height=\"2\"></rect>\\n        <rect id=\"Rectangle-680\" fill=\"#636D72\" x=\"6\" y=\"19\" width=\"26\" height=\"2\"></rect>\\n        <rect id=\"Rectangle-680\" fill=\"#636D72\" x=\"6\" y=\"23\" width=\"19\" height=\"2\"></rect>\\n        <rect id=\"Rectangle-680\" fill=\"#636D72\" x=\"6\" y=\"11\" width=\"26\" height=\"2\"></rect>\\n        <rect id=\"Rectangle-680\" fill=\"#636D72\" x=\"6\" y=\"7\" width=\"36\" height=\"2\"></rect>\\n    </g>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"58px\" height=\"34px\" viewBox=\"429 496 58 34\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n    <g id=\"PopUp-Copy-2\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(429.000000, 497.000000)\">\\n        <path d=\"M2.99306965,0 L55.0069304,0 C56.1076723,0 57,0.889261723 57,2.00174332 L57,29.9982567 C57,31.103789 56.1032859,32 55.0073354,32 L18.4262695,32 L9,32 L0.998101354,32 L1,2.00174332 C1,0.89621101 1.90230818,0 2.99306965,0 Z\" id=\"Rectangle-2087\" stroke=\"#EEEEEE\" fill=\"#FFFFFF\"></path>\\n        <rect id=\"Rectangle-679\" fill=\"#DDDDDD\" x=\"5\" y=\"14\" width=\"45\" height=\"2\"></rect>\\n        <rect id=\"Rectangle-680\" fill=\"#DDDDDD\" x=\"5\" y=\"18\" width=\"26\" height=\"2\"></rect>\\n        <rect id=\"Rectangle-680\" fill=\"#DDDDDD\" x=\"5\" y=\"22\" width=\"19\" height=\"2\"></rect>\\n        <rect id=\"Rectangle-680\" fill=\"#DDDDDD\" x=\"5\" y=\"10\" width=\"26\" height=\"2\"></rect>\\n        <rect id=\"Rectangle-680\" fill=\"#DDDDDD\" x=\"5\" y=\"6\" width=\"36\" height=\"2\"></rect>\\n    </g>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<p class=\"CDB-Text CDB-Size-small u-altTextColor u-upperCase\">None</p>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"42px\" height=\"18px\" viewBox=\"7 7 42 18\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n    <g id=\"Group\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(7.000000, 7.000000)\">\\n        <rect id=\"Rectangle-680\" fill=\"#DDDDDD\" x=\"0\" y=\"0\" width=\"11\" height=\"2\"></rect>\\n        <rect id=\"Rectangle-680\" fill=\"#DDDDDD\" x=\"0\" y=\"4\" width=\"9\" height=\"2\"></rect>\\n        <rect id=\"Rectangle-680\" fill=\"#DDDDDD\" x=\"0\" y=\"8\" width=\"16\" height=\"2\"></rect>\\n        <rect id=\"Rectangle-680\" fill=\"#DDDDDD\" x=\"0\" y=\"12\" width=\"13\" height=\"2\"></rect>\\n        <rect id=\"Rectangle-680\" fill=\"#DDDDDD\" x=\"0\" y=\"16\" width=\"16\" height=\"2\"></rect>\\n        <ellipse id=\"Oval-1585\" fill-opacity=\"0.2\" fill=\"#9DE0AD\" cx=\"33\" cy=\"9\" rx=\"9\" ry=\"9\"></ellipse>\\n        <ellipse id=\"Oval-1585\" fill-opacity=\"0.4\" fill=\"#9DE0AD\" cx=\"33\" cy=\"11\" rx=\"7\" ry=\"7\"></ellipse>\\n        <ellipse id=\"Oval-1585\" fill-opacity=\"0.5\" fill=\"#9DE0AD\" cx=\"33\" cy=\"13\" rx=\"5\" ry=\"5\"></ellipse>\\n        <ellipse id=\"Oval-1585\" fill-opacity=\"0.8\" fill=\"#9DE0AD\" cx=\"33\" cy=\"15\" rx=\"3\" ry=\"3\"></ellipse>\\n        <ellipse id=\"Oval-1585\" fill=\"#9DE0AD\" cx=\"33\" cy=\"17\" rx=\"1\" ry=\"1\"></ellipse>\\n    </g>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"56px\" height=\"32px\" viewBox=\"529 429 56 32\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n  <defs>\\n    <rect id=\"path-1\" x=\"0\" y=\"0\" width=\"56\" height=\"32\" rx=\"2\"></rect>\\n    <mask id=\"mask-2\" maskContentUnits=\"userSpaceOnUse\" maskUnits=\"objectBoundingBox\" x=\"0\" y=\"0\" width=\"56\" height=\"32\" fill=\"white\">\\n        <use xlink:href=\"#path-1\"></use>\\n    </mask>\\n  </defs>\\n  <g id=\"category\" transform=\"translate(529.000000, 429.000000)\">\\n    <use id=\"Rectangle-2\" stroke=\"#EEEEEE\" mask=\"url(#mask-2)\" stroke-width=\"2\" fill=\"#FFFFFF\" xlink:href=\"#path-1\"></use>\\n    <rect id=\"Rectangle-679\" fill=\"#DDDDDD\" x=\"7\" y=\"15\" width=\"23\" height=\"2\"></rect>\\n    <rect id=\"Rectangle-680\" fill=\"#DDDDDD\" x=\"7\" y=\"19\" width=\"13\" height=\"2\"></rect>\\n    <rect id=\"Rectangle-680\" fill=\"#DDDDDD\" x=\"7\" y=\"23\" width=\"10\" height=\"2\"></rect>\\n    <rect id=\"Rectangle-680\" fill=\"#DDDDDD\" x=\"7\" y=\"11\" width=\"13\" height=\"2\"></rect>\\n    <rect id=\"Rectangle-680\" fill=\"#DDDDDD\" x=\"7\" y=\"7\" width=\"19\" height=\"2\"></rect>\\n    <rect id=\"Rectangle-680\" fill=\"#9CE0AC\" x=\"45\" y=\"7\" width=\"3\" height=\"2\"></rect>\\n    <rect id=\"Rectangle-680\" fill=\"#F4F1DE\" x=\"45\" y=\"11\" width=\"3\" height=\"2\"></rect>\\n    <rect id=\"Rectangle-680\" fill=\"#E17C60\" x=\"45\" y=\"15\" width=\"3\" height=\"2\"></rect>\\n    <rect id=\"Rectangle-680\" fill=\"#3D3F5B\" x=\"45\" y=\"19\" width=\"3\" height=\"2\"></rect>\\n    <rect id=\"Rectangle-680\" fill=\"#F2CD8F\" x=\"45\" y=\"23\" width=\"3\" height=\"2\"></rect>\\n  </g>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"56px\" height=\"32px\" viewBox=\"529 429 56 32\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n  <defs>\\n    <rect id=\"path-1\" x=\"0\" y=\"0\" width=\"56\" height=\"32\" rx=\"2\"></rect>\\n    <mask id=\"mask-2\" maskContentUnits=\"userSpaceOnUse\" maskUnits=\"objectBoundingBox\" x=\"0\" y=\"0\" width=\"56\" height=\"32\" fill=\"white\">\\n        <use xlink:href=\"#path-1\"></use>\\n    </mask>\\n  </defs>\\n  <g id=\"category\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(529.000000, 429.000000)\">\\n    <use id=\"Rectangle-2\" stroke=\"#EEEEEE\" mask=\"url(#mask-2)\" stroke-width=\"2\" fill=\"#FFFFFF\" xlink:href=\"#path-1\"></use>\\n    <rect id=\"Rectangle-679\" fill=\"#DDDDDD\" x=\"14\" y=\"15\" width=\"23\" height=\"2\"></rect>\\n    <rect id=\"Rectangle-680\" fill=\"#DDDDDD\" x=\"14\" y=\"19\" width=\"13\" height=\"2\"></rect>\\n    <rect id=\"Rectangle-680\" fill=\"#DDDDDD\" x=\"14\" y=\"23\" width=\"10\" height=\"2\"></rect>\\n    <rect id=\"Rectangle-680\" fill=\"#DDDDDD\" x=\"14\" y=\"11\" width=\"13\" height=\"2\"></rect>\\n    <rect id=\"Rectangle-680\" fill=\"#DDDDDD\" x=\"14\" y=\"7\" width=\"19\" height=\"2\"></rect>\\n    <rect id=\"Rectangle-680\" fill=\"#9CE0AC\" x=\"7\" y=\"7\" width=\"3\" height=\"2\"></rect>\\n    <rect id=\"Rectangle-680\" fill=\"#F4F1DE\" x=\"7\" y=\"11\" width=\"3\" height=\"2\"></rect>\\n    <rect id=\"Rectangle-680\" fill=\"#E17C60\" x=\"7\" y=\"15\" width=\"3\" height=\"2\"></rect>\\n    <rect id=\"Rectangle-680\" fill=\"#3D3F5B\" x=\"7\" y=\"19\" width=\"3\" height=\"2\"></rect>\\n    <rect id=\"Rectangle-680\" fill=\"#F2CD8F\" x=\"7\" y=\"23\" width=\"3\" height=\"2\"></rect>\\n  </g>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"54px\" height=\"24px\" viewBox=\"519 458 54 24\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n  <defs>\\n    <linearGradient x1=\"90.736547%\" y1=\"49.7500002%\" x2=\"9.63471511%\" y2=\"49.7500002%\" id=\"linearGradient-1\">\\n      <stop stop-color=\"#C11F22\" offset=\"0%\"></stop>\\n      <stop stop-color=\"#F53F15\" offset=\"23.9588524%\"></stop>\\n      <stop stop-color=\"#FF9030\" offset=\"49.5142003%\"></stop>\\n      <stop stop-color=\"#FFCF52\" offset=\"75.4982561%\"></stop>\\n      <stop stop-color=\"#FFFEAE\" offset=\"100%\"></stop>\\n    </linearGradient>\\n  </defs>\\n  <g id=\"color\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(519.000000, 458.000000)\">\\n    <rect id=\"bg\" fill=\"#FFFFFF\" x=\"0\" y=\"0\" width=\"54\" height=\"23\" rx=\"2\"></rect>\\n    <path d=\"M1,20.9991358 C1,21.5484057 1.45096651,22 2.00209026,22 L51.9979097,22 C52.5538814,22 53,21.5535154 53,20.9991358 L53,2.00086422 C53,1.45159429 52.5490335,1 51.9979097,1 L2.00209026,1 C1.44611861,1 1,1.44648455 1,2.00086422 L1,20.9991358 Z M2.00209026,0 L51.9979097,0 C53.1036337,0 54,0.901627257 54,2.00086422 L54,20.9991358 C54,22.1041826 53.1077828,23 51.9979097,23 L2.00209026,23 C0.896366344,23 0,22.0983727 0,20.9991358 L0,2.00086422 C0,0.895817426 0.892217249,0 2.00209026,0 Z\" id=\"Rectangle-2087-Copy\" fill=\"#EEEEEE\"></path>\\n    <rect id=\"Rectangle-680\" fill=\"url(#linearGradient-1)\" x=\"6\" y=\"12\" width=\"42\" height=\"5\"></rect>\\n    <rect id=\"Rectangle-680\" fill=\"#DDDDDD\" x=\"6\" y=\"6\" width=\"6\" height=\"2\"></rect>\\n    <rect id=\"Rectangle-680\" fill=\"#DDDDDD\" x=\"42\" y=\"6\" width=\"6\" height=\"2\"></rect>\\n  </g>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<p class=\"CDB-Text CDB-Size-small u-upperCase u-altTextColor\">None</p>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<ul class=\"CodeMirror-error\">\\n  <li class=\"CodeMirror-errorMessage u-lSpace--xl u-rSpace--xl\">\\n    ' +\n__e( _t('components.codemirror.syntax-error') ) +\n'. ' +\n__e( _t('components.codemirror.line') ) +\n' ' +\n__e( line ) +\n': <span>' +\n__e( message ) +\n'</span>\\n  </li>\\n</ul>';\n\n}\nreturn __p\n}","var LegendTypes = require('builder/editor/layers/layer-content-views/legend/legend-types');\nvar styleHelper = require('builder/helpers/style');\n\nmodule.exports = [\n  {\n    value: LegendTypes.NONE,\n    tooltipTranslationKey: 'editor.legend.tooltips.style.none',\n    legendIcon: require('builder/editor/layers/layer-content-views/legend/carousel-icons/none.tpl'),\n    label: _t('editor.legend.types.none')\n  }, {\n    value: LegendTypes.CATEGORY,\n    tooltipTranslationKey: 'editor.legend.tooltips.style.category',\n    legendIcon: require('builder/editor/layers/layer-content-views/legend/carousel-icons/category.tpl'),\n    label: _t('editor.legend.types.category'),\n    isStyleCompatible: function (styleModel) {\n      var color = styleHelper.getColor(styleModel);\n\n      if (color == null || styleModel.isAnimation()) return false;\n\n      var usesCategory = (color && color.quantification === 'category');\n      var hasStringAttribute = (color && color.attribute &&\n        color.attribute_type && color.attribute_type === 'string');\n      var hasBooleanAttribute = (color && color.attribute &&\n        color.attribute_type && color.attribute_type === 'boolean');\n\n      return (usesCategory || hasStringAttribute || hasBooleanAttribute);\n    }\n  }, {\n    value: LegendTypes.TORQUE,\n    tooltipTranslationKey: 'editor.legend.tooltips.style.torque',\n    legendIcon: require('builder/editor/layers/layer-content-views/legend/carousel-icons/category.tpl'),\n    label: _t('editor.legend.types.category'),\n    isStyleCompatible: function (styleModel) {\n      var color = styleHelper.getColor(styleModel);\n\n      if (color == null || !styleModel.isAnimation()) return false;\n\n      var usesCategory = (color && color.quantification === 'category');\n      var hasStringAttribute = (color && color.attribute &&\n        color.attribute_type && color.attribute_type === 'string');\n\n      return (usesCategory || hasStringAttribute);\n    }\n  }, {\n    value: LegendTypes.CHOROPLETH,\n    tooltipTranslationKey: 'editor.legend.tooltips.style.choropleth',\n    legendIcon: require('builder/editor/layers/layer-content-views/legend/carousel-icons/gradient.tpl'),\n    label: _t('editor.legend.types.gradient'),\n    isStyleCompatible: function (styleModel) {\n      var color = styleHelper.getColor(styleModel);\n      if (color == null) return false;\n\n      if (styleModel.isAnimation() || styleModel.isHeatmap()) return false;\n\n      var usesCategory = (color && color.quantification === 'category');\n      if (usesCategory) return false;\n\n      var attributeTypeIsBoolean = (color.attribute_type && color.attribute_type === 'boolean');\n      if (attributeTypeIsBoolean) return false;\n\n      var hasAttribute = color && color.attribute;\n      var attributeTypeIsUndef = (color.attribute_type === undefined);\n      var attributeTypeIsNotString = (color.attribute_type && color.attribute_type !== 'string');\n\n      return hasAttribute && (attributeTypeIsUndef || attributeTypeIsNotString);\n    }\n  }, {\n    value: LegendTypes.CUSTOM_CHOROPLETH,\n    tooltipTranslationKey: 'editor.legend.tooltips.style.custom_choropleth',\n    legendIcon: require('builder/editor/layers/layer-content-views/legend/carousel-icons/gradient.tpl'),\n    label: _t('editor.legend.types.gradient'),\n    isStyleCompatible: function (styleModel) {\n      var color = styleHelper.getColor(styleModel);\n\n      if (color == null || !styleModel.isHeatmap()) return false;\n\n      var hasAttribute = color && color.attribute;\n      var attributeTypeIsUndef = (color.attribute_type === undefined);\n      var attributeTypeIsNotString = (color.attribute_type && color.attribute_type !== 'string');\n\n      return hasAttribute && (attributeTypeIsUndef || attributeTypeIsNotString);\n    }\n  }, {\n    value: LegendTypes.CUSTOM,\n    tooltipTranslationKey: 'editor.legend.tooltips.style.custom',\n    legendIcon: require('builder/editor/layers/layer-content-views/legend/carousel-icons/custom.tpl'),\n    label: _t('editor.legend.types.custom')\n  }\n];\n","var LegendTypes = require('./legend-color-types');\nvar LegendTypeBaseView = require('builder/editor/layers/layer-content-views/legend/legend-base-type-view');\n\nmodule.exports = LegendTypeBaseView.extend({\n  initialize: function (opts) {\n    this.legendTypes = LegendTypes;\n    LegendTypeBaseView.prototype.initialize.call(this, opts);\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<ul>\\n  ';\n for(var i in items) { ;\n__p += '\\n    <li class=\"Legend-categoryListItem u-flex u-alignCenter\">\\n      ';\n if (items[i].icon) { ;\n__p += '\\n        <span class=\"Legend-categoryIcon js-image-container\" data-icon=\"' +\n((__t = ( items[i].icon )) == null ? '' : __t) +\n'\" ';\n if (items[i].color) { ;\n__p += 'data-color=\"' +\n((__t = ( items[i].color )) == null ? '' : __t) +\n'\"';\n } ;\n__p += '></span>\\n      ';\n } else if (items[i].color) { ;\n__p += '\\n        <span class=\"Legend-categoryCircle\" style=\"opacity:1; background: ' +\n((__t = ( items[i].color )) == null ? '' : __t) +\n';\"></span>\\n      ';\n } ;\n__p += '\\n\\n      <p class=\"Legend-categoryTitle CDB-Text CDB-Size-small u-upperCase u-ellipsis\" title=\"' +\n((__t = ( items[i].title )) == null ? '' : __t) +\n'\">' +\n((__t = ( items[i].title )) == null ? '' : __t) +\n'</p>\\n    </li>\\n  ';\n } ;\n__p += '\\n</ul>\\n';\n\n}\nreturn __p\n}","var Backbone = require('backbone');\nvar _ = require('underscore');\n\n/*\n  Base model form legend.\n */\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    type: 'none',\n    title: ''\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.legendDefinitionModel) throw new Error('legendDefinitionModel is required');\n    this.legendDefinitionModel = opts.legendDefinitionModel;\n\n    this.schema = this._generateSchema();\n  },\n\n  _generateSchema: function () {\n    return {\n      title: {\n        type: 'EnablerEditor',\n        title: '',\n        label: _t('editor.legend.legend-form.title.label'),\n        defaultValue: this._titlePlaceholder,\n        editor: {\n          type: 'Text',\n          editorAttrs: {\n            placeholder: this._titlePlaceholder,\n            help: _t('editor.legend.legend-form.title.help')\n          }\n        }\n      }\n    };\n  },\n\n  toJSON: function () {\n    return _.extend(\n      this.attributes,\n      {\n        type: this.get('type')\n      }\n    );\n  }\n});\n","var _ = require('underscore');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar LegendBaseDefModel = require('./legend-base-definition-form-model');\nvar LegendColorHelper = require('./legend-color-helper');\n\nmodule.exports = LegendBaseDefModel.extend({\n  defaults: _.extend({}, LegendBaseDefModel.prototype.defaults,\n    {\n      type: 'bubble',\n      fillColor: null\n    }\n  ),\n\n  initialize: function (attrs, opts) {\n    this._titlePlaceholder = _t('editor.legend.legend-form.by-size');\n    LegendBaseDefModel.prototype.initialize.call(this, attrs, opts);\n\n    this.on('change:fill', function () {\n      this.set('fillColor', this.get('fill').color.fixed);\n    }, this);\n\n    this._initialColor();\n  },\n\n  toJSON: function () {\n    return _.extend(\n      {},\n      _.omit(this.attributes, 'fill')\n    );\n  },\n\n  _initialColor: function () {\n    var color = this.legendDefinitionModel.get('fillColor');\n    var fill = LegendColorHelper.getBubbles(color);\n    this.set({fill: fill});\n  },\n\n  _generateSchema: function () {\n    var schema = LegendBaseDefModel.prototype._generateSchema.call(this);\n    return _.extend(\n      schema,\n      {\n        fill: {\n          type: 'Fill',\n          title: _t('editor.legend.legend-form.fill'),\n          options: [],\n          dialogMode: DialogConstants.Mode.FLOAT,\n          editorAttrs: {\n            color: {\n              hidePanes: ['value']\n            }\n          }\n        },\n        topLabel: {\n          type: 'EnablerEditor',\n          title: '',\n          label: _t('editor.legend.legend-form.top-label'),\n          editor: {\n            type: 'Text',\n            editorAttrs: {\n              placeholder: _t('editor.legend.legend-form.custom-label-placeholder')\n            }\n          }\n        },\n        bottomLabel: {\n          type: 'EnablerEditor',\n          title: '',\n          label: _t('editor.legend.legend-form.bottom-label'),\n          editor: {\n            type: 'Text',\n            editorAttrs: {\n              placeholder: _t('editor.legend.legend-form.custom-label-placeholder')\n            }\n          }\n        }\n      }\n    );\n  }\n});\n","var _ = require('underscore');\nvar LegendBaseDefModel = require('./legend-base-definition-form-model');\n\nmodule.exports = LegendBaseDefModel.extend({\n  defaults: _.extend({}, LegendBaseDefModel.prototype.defaults,\n    {\n      type: 'category'\n    }\n  ),\n\n  initialize: function (attrs, opts) {\n    this._titlePlaceholder = _t('editor.legend.legend-form.by-color');\n    LegendBaseDefModel.prototype.initialize.call(this, attrs, opts);\n  }\n});\n","var _ = require('underscore');\nvar LegendBaseDefModel = require('./legend-base-definition-form-model');\n\nmodule.exports = LegendBaseDefModel.extend({\n  defaults: _.extend({}, LegendBaseDefModel.prototype.defaults,\n    {\n      type: 'choropleth',\n      prefix: '',\n      suffix: '',\n      leftLabel: '',\n      rightLabel: ''\n    }\n  ),\n\n  initialize: function (attrs, opts) {\n    this._titlePlaceholder = _t('editor.legend.legend-form.by-color');\n    LegendBaseDefModel.prototype.initialize.call(this, attrs, opts);\n  },\n\n  _generateSchema: function () {\n    var schema = LegendBaseDefModel.prototype._generateSchema.call(this);\n    return _.extend(\n      schema,\n      {\n        leftLabel: {\n          type: 'EnablerEditor',\n          title: '',\n          label: _t('editor.legend.legend-form.left-label'),\n          editor: {\n            type: 'Text',\n            editorAttrs: {\n              placeholder: _t('editor.legend.legend-form.custom-label-placeholder')\n            }\n          }\n        },\n        rightLabel: {\n          type: 'EnablerEditor',\n          title: '',\n          label: _t('editor.legend.legend-form.right-label'),\n          editor: {\n            type: 'Text',\n            editorAttrs: {\n              placeholder: _t('editor.legend.legend-form.custom-label-placeholder')\n            }\n          }\n        },\n        suffix: {\n          type: 'EnablerEditor',\n          title: '',\n          label: _t('editor.legend.legend-form.suffix'),\n          editor: {\n            type: 'Text'\n          }\n        },\n        prefix: {\n          type: 'EnablerEditor',\n          title: '',\n          label: _t('editor.legend.legend-form.prefix'),\n          editor: {\n            type: 'Text'\n          }\n        }\n      }\n    );\n  }\n});\n","var _ = require('underscore');\n\nfunction buildSwatch (color, name, icon) {\n  if (_.isString(color)) {\n    color = {\n      fixed: color,\n      opacity: 1,\n      image: icon\n    };\n  }\n\n  return {\n    fill: {\n      color: color\n    },\n    title: name\n  };\n}\n\nfunction _unquote (c) {\n  return c && c.replace && c.replace(/^\"(.+(?=\"$))\"$/, '$1') || c;\n}\n\nfunction simpleColor (color) {\n  return [buildSwatch(color, '', color.image || '')];\n}\n\nfunction collectionColor (color) {\n  var range = color.range.length;\n  return _.range(range).map(function (v, index) {\n    // if style attribute is number there is no domain (choropleth)\n    return buildSwatch(\n      color.range[index],\n      color.domain && _unquote(color.domain[index]) || '',\n      color.images && color.images[index]);\n  });\n}\n\nmodule.exports = {\n  buildSwatch: buildSwatch,\n  getCategories: function (color) {\n    if (color.fixed !== undefined) {\n      return simpleColor(color);\n    } else if (color.attribute) {\n      return collectionColor(color);\n    }\n  },\n\n  unquoteColor: _unquote,\n  getBubbles: function (color) {\n    return _.omit(_.first(this.getCategories(color)), 'title').fill;\n  }\n};\n","var _ = require('underscore');\n\nfunction rotateCollection (array) {\n  var first = _.first(array);\n  array = _.rest(array);\n  return array.concat([first]);\n}\n\nvar COLORS = [\n  '#66B79E',\n  '#E65176',\n  '#528995',\n  '#FF710F',\n  '#305482',\n  '#CCD859',\n  '#565175',\n  '#FFB927',\n  '#3EBCAE',\n  '#E54C1F'\n];\n\nmodule.exports = {\n  getNextColor: function () {\n    COLORS = rotateCollection(COLORS);\n    return _.first(COLORS);\n  },\n\n  getColors: function () {\n    return COLORS;\n  },\n\n  setColors: function (collection) {\n    COLORS = collection;\n  }\n};\n","var _ = require('underscore');\nvar LegendBaseDefModel = require('./legend-choropleth-definition-form-model');\n\nmodule.exports = LegendBaseDefModel.extend({\n  defaults: _.extend({}, LegendBaseDefModel.prototype.defaults,\n    {\n      type: 'custom_choropleth'\n    }\n  )\n});\n","var _ = require('underscore');\nvar LegendBaseDefModel = require('./legend-base-definition-form-model');\nvar NestedCategory = require('./legend-nested-category-definition-form-model');\nvar templateItem = require('./legend-list-item.tpl');\nvar templateList = require('./legend-list.tpl');\nvar LegendColorHelper = require('./legend-color-helper');\n\nmodule.exports = LegendBaseDefModel.extend({\n  defaults: _.extend({}, LegendBaseDefModel.prototype.defaults,\n    {\n      type: 'custom',\n      items: []\n    }\n  ),\n\n  initialize: function (attrs, opts) {\n    if (!opts.userModel) throw new Error('userModel is required');\n    if (!opts.configModel) throw new Error('configModel is required');\n    if (!opts.modals) throw new Error('configModel is required');\n\n    this._userModel = opts.userModel;\n    this._configModel = opts.configModel;\n    this._modals = opts.modals;\n\n    this._titlePlaceholder = _t('editor.legend.legend-form.by-color');\n    LegendBaseDefModel.prototype.initialize.call(this, attrs, opts);\n\n    this._initialItems();\n  },\n\n  _initialItems: function () {\n    var items;\n    var categories = this.legendDefinitionModel.get('items');\n    items = categories.map(function (v, index) {\n      return LegendColorHelper.buildSwatch(v.color, v.title, v.icon);\n    });\n    this.set({items: items});\n  },\n\n  _generateSchema: function () {\n    var schema = LegendBaseDefModel.prototype._generateSchema.call(this);\n    return _.extend(\n      schema,\n      {\n        items: {\n          type: 'SortableList',\n          itemType: 'CategoryModel',\n          model: NestedCategory,\n          title: '',\n          itemTemplate: templateItem,\n          listTemplate: templateList,\n          editorAttrs: {\n            className: 'u-flex',\n            userModel: this._userModel,\n            configModel: this._configModel,\n            modals: this._modals\n          }\n        }\n      }\n    );\n  },\n\n  toJSON: function () {\n    return _.extend(\n      {},\n      _.omit(this.attributes, 'items'),\n      {\n        items: this.get('items').map(function (item) {\n          return {\n            title: item.title,\n            color: item.fill.color.fixed,\n            image: item.fill.color.image\n          };\n        })\n      }\n    );\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"LegendItem js-sortable\">\\n  <div class=\"LegendItem-listFieldsOrder CDB-Shape js-editable\">\\n    <div class=\"CDB-Shape-rectsHandle is-small\">\\n      <div class=\"CDB-Shape-rectsHandleItem CDB-Shape-rectsHandleItem--grey is-first\"></div>\\n      <div class=\"CDB-Shape-rectsHandleItem CDB-Shape-rectsHandleItem--grey is-second\"></div>\\n      <div class=\"CDB-Shape-rectsHandleItem CDB-Shape-rectsHandleItem--grey is-third\"></div>\\n    </div>\\n  </div>\\n  <div data-editor class=\"u-grow\">\\n  </div>\\n  <button class=\"LegendItem-deleteButton js-editable js-remove-help\" type=\"button\" data-action=\"remove\">\\n    <svg width=\"8px\" height=\"8px\" viewBox=\"0 0 8 8\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n      <polygon fill=\"#1181FB\" points=\"4 3.435128 0.564872 0 0 0.564872 3.435128 4 0 7.435128 0.564872 8 4 4.564872 7.435128 8 8 7.435128 4.564872 4 8 0.564872 7.435128 0\"></polygon>\\n    </svg>\\n  </button>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"u-grow  LegendItems-container\">\\n  <div data-items class=\"u-bSpace--xl\">\\n\\n  </div>\\n  <div class=\"u-flex u-justifyEnd\" style=\"width: 100%;\"> <!-- We need a fucking u-full helper -->\\n    <button class=\"CDB-Text CDB-Size-small u-actionTextColor u-upperCase\" type=\"button\" data-action=\"add\">\\n      ' +\n__e( _t('editor.legend.legend-form.add') ) +\n'\\n    </button>\\n  </div>\\n</div>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar LegendColors = require('./legend-color-range');\n\nvar defaultFill = {\n  color: {\n    fixed: '#fabada',\n    opacity: 0.9\n  }\n};\n\nmodule.exports = Backbone.Model.extend({\n  schema: {\n    fill: {\n      type: 'Fill',\n      title: '',\n      options: [],\n      dialogMode: DialogConstants.Mode.FLOAT,\n      editorAttrs: {\n        color: {\n          hidePanes: ['value'],\n          imageEnabled: true,\n          help: _t('editor.legend.tooltips.item.fill')\n        },\n        className: 'LegendItem-inner'\n      }\n    },\n    title: {\n      type: 'Text',\n      title: '',\n      editorAttrs: {\n        className: 'LegendItem-inner',\n        placeholder: _t('editor.legend.legend-form.untitled'),\n        help: _t('editor.legend.tooltips.item.title')\n      }\n    }\n  },\n\n  initialize: function (attrs, opts) {\n    this._userModel = opts.userModel;\n    this._configModel = opts.configModel;\n    this._modals = opts.modals;\n\n    this._setOptions();\n\n    var fill = _.clone(defaultFill);\n    if (attrs.fill === undefined) {\n      fill.color.fixed = LegendColors.getNextColor();\n      this.set({fill: fill}, {silent: true});\n    }\n  },\n\n  _setOptions: function () {\n    this.schema.fill.editorAttrs.userModel = this._userModel;\n    this.schema.fill.editorAttrs.configModel = this._configModel;\n    this.schema.fill.editorAttrs.modals = this._modals;\n  }\n});\n","var _ = require('underscore');\nvar LegendBaseDefModel = require('./legend-category-definition-form-model');\n\nmodule.exports = LegendBaseDefModel.extend({\n  defaults: _.extend({}, LegendBaseDefModel.prototype.defaults,\n    {\n      type: 'torque'\n    }\n  )\n});\n","var cdb = require('internal-carto.js');\nvar _ = require('underscore');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar PanelWithOptionsView = require('builder/components/view-options/panel-with-options-view');\nvar LegendContentView = require('./legend-content-view');\nvar LegendEditorView = require('./legend-editor-view');\nvar ScrollView = require('builder/components/scroll/scroll-view');\nvar TabPaneView = require('builder/components/tab-pane/tab-pane-view');\nvar TabPaneCollection = require('builder/components/tab-pane/tab-pane-collection');\nvar Toggler = require('builder/components/toggler/toggler-view');\nvar ApplyButtonView = require('builder/components/apply-button/apply-button-view');\nvar Infobox = require('builder/components/infobox/infobox-factory');\nvar InfoboxCollection = require('builder/components/infobox/infobox-collection');\nvar LegendDefinitionModel = require('builder/data/legends/legend-base-definition-model');\nvar LegendFactory = require('./legend-factory');\nvar htmlTemplate = require('./color/legend-custom-template.tpl');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar MetricsTracker = require('builder/components/metrics/metrics-tracker');\nvar MetricsTypes = require('builder/components/metrics/metrics-types');\n\nvar REQUIRED_OPTS = [\n  'mapDefinitionModel',\n  'layerDefinitionModel',\n  'editorModel',\n  'layerContentModel',\n  'legendDefinitionsCollection',\n  'type',\n  'userActions',\n  'userModel',\n  'configModel',\n  'modals',\n  'overlayModel',\n  'infoboxModel'\n];\n\nvar PLACEHOLDER = '[[Legend]]';\nvar HTML_TEMPLATE = _.template('<%= preSnippet %>\\r\\n<%- placeholder %>\\r\\n<%= postSnippet %>');\n\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    // this.legendTypes is defined in the subview\n    this._legendDefinitionModel = this._getUserLegend(this.legendTypes);\n\n    this._codemirrorModel = new Backbone.Model({\n      content: this._getEditorContent()\n    });\n\n    this._editorModel.set({\n      edition: this._legendDefinitionModel.hasCustomHtml(),\n      disabled: this._isToggleDisable() // if there is an sql error or none style is selected, set to true\n    });\n\n    this._overlayModel.set({\n      visible: this._isLayerHidden() || this._legendDefinitionModel.hasCustomHtml()\n    }, {\n      silent: true\n    });\n\n    this._togglerModel = new Backbone.Model({\n      labels: [_t('editor.legend.data-toggle.values'), _t('editor.legend.data-toggle.html')],\n      active: this._editorModel.isEditing(),\n      disabled: this._editorModel.isDisabled(),\n      isDisableable: true,\n      tooltip: _t('editor.legend.data-toggle.tooltip')\n    });\n\n    this._configPanes();\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    this._initViews();\n    this._infoboxState();\n    this._toggleOverlay();\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._layerContentModel, 'change:state', this._infoboxState);\n    this.listenTo(this._layerDefinitionModel, 'change:visible', this._infoboxState);\n    this.listenTo(this._mapDefinitionModel, 'change:legends', this._infoboxState);\n\n    this.listenTo(this._editorModel, 'change:edition', this._onChangeEdition);\n    this.listenTo(this._editorModel, 'change:disabled', this._onChangeDisabled);\n    this.listenTo(this._togglerModel, 'change:active', this._onTogglerChanged);\n    this.listenTo(this._overlayModel, 'change:visible', this._toggleOverlay);\n  },\n\n  _getEditorContent: function () {\n    var content;\n    var type = this._legendDefinitionModel.get('type');\n\n    if (type === 'custom') {\n      if (this._legendDefinitionModel.hasCustomHtml()) {\n        content = this._legendDefinitionModel.get('html');\n      } else {\n        content = '';\n      }\n    } else {\n      content = this._getReadOnlyContent();\n    }\n\n    return content;\n  },\n\n  _getReadOnlyContent: function () {\n    var content = HTML_TEMPLATE({\n      preSnippet: this._legendDefinitionModel.get('preHTMLSnippet') || _t('editor.legend.code-mirror.pre-html'),\n      placeholder: PLACEHOLDER,\n      postSnippet: this._legendDefinitionModel.get('postHTMLSnippet') || _t('editor.legend.code-mirror.post-html')\n    });\n\n    return content;\n  },\n\n  _getCustomContent: function () {\n    var items;\n    var result = this._legendDefinitionModel.get('html');\n\n    if (result === '') {\n      items = this._legendDefinitionModel.get('items');\n\n      result = htmlTemplate({ items: items });\n    }\n\n    return result;\n  },\n\n  _handleEditorContent: function (expertMode) {\n    var type = this._legendDefinitionModel.get('type');\n    if (expertMode) {\n      this._codemirrorModel.set({ content: type === 'custom' ? this._getCustomContent() : this._getReadOnlyContent() });\n    }\n  },\n\n  _getUserLegend: function (types) {\n    var self = this;\n    var values = _.map(types, function (type) { return type.value; });\n    var selected = this._legendDefinitionsCollection.find(function (legendDefModel) {\n      return values.indexOf(legendDefModel.get('type')) !== -1 && legendDefModel.layerDefinitionModel.id === self._layerDefinitionModel.id;\n    });\n\n    if (selected === undefined) {\n      selected = new LegendDefinitionModel(null, {\n        layerDefinitionModel: this._layerDefinitionModel,\n        configModel: this._legendDefinitionsCollection.configModel,\n        vizId: this._legendDefinitionsCollection.vizId\n      });\n    }\n\n    return selected;\n  },\n\n  _isToggleDisable: function () {\n    return this._isErrored() || this._legendDefinitionModel.get('type') === 'none' || this._areLegendsDisabled();\n  },\n\n  _isLayerHidden: function () {\n    return this._layerDefinitionModel.get('visible') === false;\n  },\n\n  _isErrored: function () {\n    return this._layerContentModel.isErrored();\n  },\n\n  _toggleOverlay: function () {\n    var isDisabled = this._overlayModel.get('visible');\n    this.$('.js-overlay').toggleClass('is-disabled', isDisabled);\n  },\n\n  _onChangeState: function () {\n    this._editorModel.set({ disabled: this._isErrored() });\n  },\n\n  _onChangeEdition: function () {\n    this._infoboxState();\n\n    var edition = this._editorModel.get('edition');\n    this._handleEditorContent(edition);\n\n    var index = edition ? 1 : 0;\n    this._collectionPane.at(index).set({ selected: true });\n    this._togglerModel.set({ active: edition });\n  },\n\n  _onChangeDisabled: function () {\n    var disabled = this._editorModel.get('disabled');\n    this._togglerModel.set({ disabled: disabled });\n  },\n\n  _onTogglerChanged: function () {\n    var checked = this._togglerModel.get('active');\n    this._editorModel.set({ edition: checked });\n  },\n\n  _initViews: function () {\n    var self = this;\n\n    var infoboxSstates = [\n      {\n        state: 'html-legend',\n        createContentView: function () {\n          return Infobox.createWithAction({\n            type: 'alert',\n            title: _t('editor.legend.messages.custom-legend.title'),\n            body: _t('editor.legend.messages.custom-legend.body'),\n            action: {\n              label: _t('editor.legend.messages.custom-legend.accept')\n            }\n          });\n        },\n        onAction: self._deleteCustomHtmlLegend.bind(self)\n      }, {\n        state: 'layer-hidden',\n        createContentView: function () {\n          return Infobox.createWithAction({\n            type: 'alert',\n            title: _t('editor.messages.layer-hidden.title'),\n            body: _t('editor.messages.layer-hidden.body'),\n            action: {\n              label: _t('editor.messages.layer-hidden.show')\n            }\n          });\n        },\n        onAction: self._showHiddenLayer.bind(self)\n      }, {\n        state: 'legends-disabled',\n        createContentView: function () {\n          return Infobox.createWithAction({\n            type: 'alert',\n            title: _t('editor.legend.messages.legends-disabled.title'),\n            body: _t('editor.legend.messages.legends-disabled.body'),\n            action: {\n              label: _t('editor.legend.messages.legends-disabled.show')\n            }\n          });\n        },\n        onAction: self._enableLegends.bind(self)\n      }\n    ];\n\n    var infoboxCollection = new InfoboxCollection(infoboxSstates);\n\n    var panelWithOptionsView = new PanelWithOptionsView({\n      className: 'Editor-content',\n      editorModel: self._editorModel,\n      infoboxModel: self._infoboxModel,\n      infoboxCollection: infoboxCollection,\n      createContentView: function () {\n        return new TabPaneView({\n          collection: self._collectionPane\n        });\n      },\n      createControlView: function () {\n        return new Toggler({\n          model: self._togglerModel\n        });\n      },\n      createActionView: function () {\n        return new TabPaneView({\n          collection: self._collectionPane,\n          createContentKey: 'createActionView'\n        });\n      }\n    });\n\n    this.$el.append(panelWithOptionsView.render().el);\n    this.addView(panelWithOptionsView);\n  },\n\n  _showHiddenLayer: function () {\n    var savingOptions = {\n      shouldPreserveAutoStyle: true\n    };\n    this._layerDefinitionModel.toggleVisible();\n    this._userActions.saveLayer(this._layerDefinitionModel, savingOptions);\n  },\n\n  _deleteCustomHtmlLegend: function () {\n    var type = this._legendDefinitionModel.get('type');\n    this._legendDefinitionModel && this._legendDefinitionModel.set({\n      html: ''\n    });\n    LegendFactory.createLegend(this._layerDefinitionModel, type);\n    this._infoboxState();\n  },\n\n  _saveLegendHTML: function () {\n    var content = this._codemirrorModel.get('content');\n    var type = this._legendDefinitionModel.get('type');\n    var parts;\n\n    if (type === 'custom') {\n      this._legendDefinitionModel && this._legendDefinitionModel.set({\n        html: content\n      });\n    } else {\n      parts = content.split(PLACEHOLDER).map(function (part) {\n        return cdb.core.sanitize.html(part);\n      });\n\n      this._legendDefinitionModel && this._legendDefinitionModel.set({\n        preHTMLSnippet: parts[0],\n        postHTMLSnippet: parts[1]\n      });\n    }\n\n    MetricsTracker.track(MetricsTypes.USED_ADVANCED_MODE, {\n      mode_type: 'legend'\n    });\n\n    LegendFactory.createLegend(this._layerDefinitionModel, type);\n  },\n\n  _infoboxState: function () {\n    var edition = this._editorModel.get('edition');\n\n    if (!edition && this._areLegendsDisabled()) {\n      this._infoboxModel.set({ state: 'legends-disabled' });\n      this._overlayModel.set({ visible: true });\n      this._togglerModel.set({ disabled: true });\n    } else if (!edition && this._legendDefinitionModel.hasCustomHtml()) {\n      this._infoboxModel.set({ state: 'html-legend' });\n      this._overlayModel.set({ visible: true });\n    } else if (this._isLayerHidden()) {\n      this._infoboxModel.set({ state: 'layer-hidden' });\n      this._overlayModel.set({ visible: true });\n      this._togglerModel.set({ disabled: true });\n    } else {\n      this._infoboxModel.set({ state: '' });\n      this._overlayModel.set({ visible: false });\n      this._togglerModel.set({ disabled: false });\n    }\n  },\n\n  _areLegendsDisabled: function () {\n    return this._mapDefinitionModel.get('legends') === false;\n  },\n\n  _enableLegends: function () {\n    this._mapDefinitionModel.save({ legends: true });\n  },\n\n  // we need to update the reference to the model\n  _updateLegend: function (newLegendDefModel) {\n    this._legendDefinitionModel = newLegendDefModel;\n  },\n\n  _configPanes: function () {\n    var self = this;\n    var tabPaneTabs = [{\n      selected: !self._legendDefinitionModel.hasCustomHtml(),\n      createContentView: function () {\n        return new ScrollView({\n          createContentView: function () {\n            return new LegendContentView({\n              className: 'Editor-content',\n              editorModel: self._editorModel,\n              legendTypes: self.legendTypes,\n              layerDefinitionModel: self._layerDefinitionModel,\n              legendDefinitionModel: self._getUserLegend(self.legendTypes),\n              legendDefinitionsCollection: self._legendDefinitionsCollection,\n              updateLegend: self._updateLegend.bind(self),\n              type: self._type,\n              userModel: self._userModel,\n              configModel: self._configModel,\n              modals: self._modals\n            });\n          }\n        });\n      },\n      createActionView: function () {\n        return new CoreView();\n      }\n    }, {\n      selected: self._legendDefinitionModel.hasCustomHtml(),\n      createContentView: function () {\n        return new LegendEditorView({\n          isCustom: self._legendDefinitionModel.get('type') === 'custom',\n          codemirrorModel: self._codemirrorModel,\n          onApplyEvent: self._saveLegendHTML.bind(self)\n        });\n      },\n      createActionView: function () {\n        return new ApplyButtonView({\n          onApplyClick: self._saveLegendHTML.bind(self),\n          overlayModel: self._overlayModel\n        });\n      }\n    }];\n\n    this._collectionPane = new TabPaneCollection(tabPaneTabs);\n  }\n});\n","var _ = require('underscore');\n\nvar LEGEND_TYPES_PER_ATTRIBUTE = {\n  color: ['category', 'choropleth', 'custom', 'custom_choropleth', 'torque'],\n  size: ['bubble']\n};\n\nfunction LegendBuffer (opts) {\n  this.queue = [];\n  this.running = false;\n  this._legendDefinitionsCollection = opts.legendDefinitionsCollection;\n}\n\nLegendBuffer.prototype.add = function (model, callback) {\n  this._cleanQueue(model.get('layer_id'), model.get('type'));\n  this.queue.push(model);\n\n  if (!this.running) {\n    this.running = true;\n    this._run(callback);\n  }\n};\n\nLegendBuffer.prototype._run = function (callback) {\n  if (this.running === false || this.queue.length === 0) {\n    this.running = false;\n    return;\n  }\n\n  var model = this.queue.shift();\n\n  this._removePrevious(model.layerDefinitionModel.get('id'), model.get('type'), function () {\n    model.save(null, {\n      success: function (model) {\n        this._legendDefinitionsCollection.add(model);\n        this._run();\n      }.bind(this),\n      complete: function () {\n        callback && callback();\n      }\n    });\n  }.bind(this));\n};\n\nLegendBuffer.prototype._removePrevious = function (layer_id, type, callback) {\n  var types = this._findSameType(type);\n\n  var removeLegends = this._legendDefinitionsCollection.filter(function (legend) {\n    return legend.get('layer_id') === layer_id && _.includes(types, legend.get('type'));\n  });\n  var legendsLeft = removeLegends.length;\n\n  if (this._legendDefinitionsCollection.size() === 0 || removeLegends.length === 0) {\n    callback && callback();\n    return;\n  }\n\n  _.each(removeLegends, function (legend) {\n    legend.destroy({\n      complete: function () {\n        // In case there's more than one legend to be removed (shouldn't be possible), we should wait for all to be removed\n        legendsLeft = legendsLeft - 1;\n        if (legendsLeft === 0) {\n          callback && callback();\n        }\n      }\n    });\n  });\n};\n\nLegendBuffer.prototype._cleanQueue = function (layer_id, type) {\n  var types = this._findSameType(type);\n\n  this.queue = _.reject(this.queue, function (legend) {\n    return legend.get('layer_id') === layer_id && _.includes(types, legend.get('type'));\n  });\n};\n\nLegendBuffer.prototype._findSameType = function (type) {\n  return _.find(LEGEND_TYPES_PER_ATTRIBUTE, function (collection, name) {\n    return _.include(collection, type);\n  });\n};\n\nLegendBuffer.prototype.findLegend = function (layer_id, type) {\n  return _.findWhere(this.queue, { layer_id: layer_id, type: type });\n};\n\nmodule.exports = LegendBuffer;\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<h2 class=\"CDB-Text CDB-Size-huge is-light u-secondaryTextColor\">\\n  ' +\n((__t = ( body )) == null ? '' : __t) +\n'\\n</h2>';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar styleHelper = require('builder/helpers/style');\n\nvar CarouselFormView = require('builder/components/carousel-form-view');\nvar CarouselCollection = require('builder/components/custom-carousel/custom-carousel-collection');\nvar FormView = require('./legend-properties-form');\n\nvar CustomFormModel = require('./form/legend-custom-definition-form-model');\nvar CategoryFormModel = require('./form/legend-category-definition-form-model');\nvar BubbleFormModel = require('./form/legend-bubble-definition-form-model');\nvar ChoroplethFormModel = require('./form/legend-choropleth-definition-form-model');\nvar CustomChoroplethFormModel = require('./form/legend-custom-choropleth-definition-form-model');\nvar TorqueFormModel = require('./form/legend-torque-definition-form-model');\n\nvar template = require('./legend-content.tpl');\nvar LegendFactory = require('./legend-factory');\n\nvar DEBOUNCE_TIME = 350;\n\nvar REQUIRED_OPTS = [\n  'editorModel',\n  'legendTypes',\n  'updateLegend',\n  'layerDefinitionModel',\n  'legendDefinitionModel',\n  'legendDefinitionsCollection',\n  'type',\n  'userModel',\n  'configModel',\n  'modals'\n];\n\nvar LEGEND_MODEL_TYPE = {\n  bubble: BubbleFormModel,\n  custom: CustomFormModel,\n  category: CategoryFormModel,\n  choropleth: ChoroplethFormModel,\n  custom_choropleth: CustomChoroplethFormModel,\n  torque: TorqueFormModel\n};\n\nmodule.exports = CoreView.extend({\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    var type = this._legendDefinitionModel.get('type');\n\n    this._onDebouncedChange = _.debounce(this._updateChanges.bind(this), DEBOUNCE_TIME);\n    this._lastType = type || 'none';\n\n    this._createFormModel(type);\n\n    var styleModel = this._layerDefinitionModel.styleModel;\n    this._carouselCollection = new CarouselCollection(\n      _.chain(this._legendTypes).filter(function (legend) {\n        return legend.isStyleCompatible ? legend.isStyleCompatible(styleModel) : true;\n      }, this).map(function (legend) {\n        return {\n          selected: type === legend.value,\n          val: legend.value,\n          label: legend.label,\n          template: function () {\n            return (legend.legendIcon && legend.legendIcon()) || legend.value;\n          },\n          tooltip: _t(legend.tooltipTranslationKey)\n        };\n      }, this).value()\n    );\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    this.$el.html(template());\n\n    this._initViews();\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._carouselCollection, 'change:selected', this._onCarouselChange);\n  },\n\n  _initViews: function () {\n    var type = this._legendDefinitionModel.get('type');\n    this._renderCarousel();\n    this._renderForm(type);\n    this._updateToggle(type);\n  },\n\n  _createFormModel: function (type) {\n    var Klass;\n    var attrs;\n\n    if (this._formModel) {\n      this._unBindFormModel(this._formModel);\n      delete this._formModel;\n    }\n\n    if (type && type !== 'none') {\n      Klass = LEGEND_MODEL_TYPE[type];\n      attrs = this._pickAttrs(this._legendDefinitionModel);\n      this._formModel = new Klass(attrs, {\n        legendDefinitionModel: this._legendDefinitionModel,\n        userModel: this._userModel,\n        configModel: this._configModel,\n        modals: this._modals\n      });\n\n      this._bindFormModel(this._formModel);\n    }\n  },\n\n  _pickAttrs: function (legendDefinitionModel) {\n    var attrs = _.pick(legendDefinitionModel.attributes, 'title', 'prefix', 'suffix', 'leftLabel', 'rightLabel', 'topLabel', 'bottomLabel', 'items');\n    return attrs;\n  },\n\n  _onCarouselChange: function (model) {\n    var type = model.getValue();\n\n    if (model.get('selected') === true) {\n      this._updateLegendModel(type);\n      this._createFormModel(type);\n      this._renderForm(type);\n      this._updateToggle(type);\n    }\n  },\n\n  _updateLegendModel: function (type) {\n    var attrs;\n\n    if (type && type !== 'none') {\n      attrs = this._getDefaultAttributes(this._layerDefinitionModel, type);\n      LegendFactory.enableLegend(this._type);\n      this._legendDefinitionModel = LegendFactory.createLegend(this._layerDefinitionModel, type, attrs);\n      this._updateLegend(this._legendDefinitionModel);\n    } else {\n      LegendFactory.disableLegend(type);\n      LegendFactory.removeLegend(this._layerDefinitionModel, this._lastType);\n      this._updateLegend(null);\n      delete this._legendDefinitionModel;\n    }\n\n    this._lastType = type;\n  },\n\n  _getDefaultAttributes: function (layerDefModel, type) {\n    if (type === 'torque' || type === 'choropleth') {\n      return {\n        title: styleHelper.getColorAttribute(layerDefModel.styleModel)\n      };\n    }\n  },\n\n  _renderForm: function (type) {\n    this._removeForm();\n\n    if (type && type !== 'none') {\n      this._addForm();\n    }\n  },\n\n  _addForm: function () {\n    this._formView = new FormView({\n      formModel: this._formModel\n    });\n    this.addView(this._formView);\n    this.$('.js-form').html(this._formView.render().el);\n  },\n\n  _removeForm: function () {\n    if (this._formView) {\n      this.removeView(this._formView);\n      this._formView.clean();\n    }\n  },\n\n  _updateToggle: function (type) {\n    var isDisabled = type === 'none';\n    this._editorModel.set({disabled: isDisabled});\n  },\n\n  _renderCarousel: function () {\n    var view = new CarouselFormView({\n      collection: this._carouselCollection,\n      template: require('./legend-form-types.tpl')\n    });\n    this.addView(view);\n    this.$('.js-carousel').html(view.render().el);\n  },\n\n  _bindFormModel: function (model) {\n    if (model) {\n      model.on('change', this._onDebouncedChange, this);\n      this.add_related_model(model);\n    }\n  },\n\n  _unBindFormModel: function (model) {\n    model && model.off('change', this._onDebouncedChange, this);\n  },\n\n  _updateChanges: function () {\n    if (this._legendDefinitionModel) {\n      this._legendDefinitionModel.setAttributes(this._formModel.toJSON());\n      LegendFactory.createLegend(this._layerDefinitionModel, this._legendDefinitionModel.get('type'));\n    }\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"js-carousel\"></div>\\n<div class=\"js-form\"></div>\\n';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar CodeMirrorView = require('builder/components/code-mirror/code-mirror-view');\nvar ErrorTemplate = require('./code-mirror-error.tpl');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'codemirrorModel',\n  'onApplyEvent',\n  'isCustom'\n];\n\nvar PLACEHOLDER = '[[Legend]]';\n\nmodule.exports = CoreView.extend({\n  module: 'editor:layers:layer-content-views:legend:legend-editor-view',\n\n  className: 'Editor-content',\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n    return this;\n  },\n\n  _initViews: function () {\n    this.codeMirrorView = new CodeMirrorView({\n      model: this._codemirrorModel,\n      tips: [\n        _t('editor.legend.code-mirror.save')\n      ],\n      errorTemplate: ErrorTemplate\n    });\n\n    this.codeMirrorView.bind('codeSaved', this._triggerCodeSaved, this);\n    this.addView(this.codeMirrorView);\n    this.$el.append(this.codeMirrorView.render().el);\n\n    if (!this._isCustom) {\n      this._markReadOnly();\n    }\n  },\n\n  _markReadOnly: function () {\n    var cursor = this.codeMirrorView.search(PLACEHOLDER);\n    this.codeMirrorView.markReadOnly(cursor.from, cursor.to);\n  },\n\n  _triggerCodeSaved: function (code, view) {\n    this.options.onApplyEvent && this.options.onApplyEvent();\n  }\n});\n","var _ = require('underscore');\nvar CategoryModel = require('builder/data/legends/legend-category-definition-model');\nvar BubbleModel = require('builder/data/legends/legend-bubble-definition-model');\nvar ChoroplethModel = require('builder/data/legends/legend-choropleth-definition-model');\nvar CustomChoroplethModel = require('builder/data/legends/legend-custom-choropleth-definition-model');\nvar CustomModel = require('builder/data/legends/legend-custom-definition-model');\nvar TorqueModel = require('builder/data/legends/legend-torque-definition-model');\nvar Validations = require('./legend-validations');\nvar Buffer = require('./legend-buffer');\n\nvar LEGEND_MODEL_TYPE = {\n  'bubble': BubbleModel,\n  'category': CategoryModel,\n  'choropleth': ChoroplethModel,\n  'custom_choropleth': CustomChoroplethModel,\n  'custom': CustomModel,\n  'torque': TorqueModel\n};\n\nvar manager = (function () {\n  return {\n    init: function (legendDefinitionsCollection) {\n      if (!legendDefinitionsCollection) {\n        throw new Error('legendDefinitionsCollection is required');\n      }\n      this.legendDefinitionsCollection = legendDefinitionsCollection;\n      this.legendBuffer = new Buffer({\n        legendDefinitionsCollection: this.legendDefinitionsCollection\n      });\n    },\n\n    getLegendsCollection: function () {\n      return this.legendDefinitionsCollection;\n    },\n\n    save: function (model, callback) {\n      model.save(null, {complete: function (model) {\n        callback && callback();\n      }});\n    },\n\n    remove: function (model, callback) {\n      var self = this;\n      model.destroy({\n        success: function (model) {\n          self.legendDefinitionsCollection.remove(model);\n        },\n        complete: function () {\n          callback && callback();\n        }\n      });\n    },\n\n    createLegend: function (layerDefModel, type, attrs, callback) {\n      var model = this.legendDefinitionsCollection.findByLayerDefModelAndType(layerDefModel, type);\n      var Klass;\n      var validation = Validations[type];\n      var isValid = validation(layerDefModel.styleModel);\n      attrs = attrs || {};\n\n      if (!model) {\n        Klass = LEGEND_MODEL_TYPE[type];\n        model = new Klass(attrs, {\n          layerDefinitionModel: layerDefModel,\n          configModel: this.legendDefinitionsCollection.configModel,\n          vizId: this.legendDefinitionsCollection.vizId,\n          parse: true\n        });\n\n        if (isValid) {\n          this.legendBuffer.add(model, callback);\n        }\n      } else {\n        if (!isValid) {\n          this.remove(model, callback);\n        } else {\n          model.set(attrs);\n          this.save(model, callback);\n        }\n      }\n\n      return model;\n    },\n\n    removeLegend: function (layerDefModel, type, cb) {\n      var legend = this.legendDefinitionsCollection.findByLayerDefModelAndType(layerDefModel, type);\n      if (legend) {\n        this.remove(legend, cb);\n      } else {\n        cb && cb();\n      }\n      return legend;\n    },\n\n    find: function (layerDefModel, type) {\n      return this.legendDefinitionsCollection.findByLayerDefModelAndType(layerDefModel, type);\n    },\n\n    removeAllLegend: function (layerDefModel) {\n      var legends = this.legendDefinitionsCollection.findByLayerDefModel(layerDefModel);\n      _.each(legends, function (legend) {\n        legend.get('type') !== 'custom' && this.remove(legend);\n      }, this);\n    },\n\n    hasMigratedLegend: function (layerDefModel) {\n      var legend = this.legendDefinitionsCollection.findByLayerDefModelAndType(layerDefModel, 'html');\n      return !!legend;\n    },\n\n    disableLegend: function (type) {\n      this[type] = false;\n    },\n\n    enableLegend: function (type) {\n      this[type] = true;\n    },\n\n    // By default, it's undefined so we are removing this condition from the equation\n    isEnabledType: function (type) {\n      return this[type] === undefined ? true : !!this[type];\n    }\n  };\n})();\n\nmodule.exports = manager;\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"Editor-HeaderInfo\">\\n  <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">1</div>\\n  <div class=\"Editor-HeaderInfo-inner CDB-Text\">\\n    <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n      <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.legend.legend-form.type.title') ) +\n'</h2>\\n    </div>\\n    <div class=\"js-selector u-bSpace--xl\">\\n      <p class=\"CDB-Text u-upperCase CDB-FontSize-small u-altTextColor u-bSpace--m js-highlight\">' +\n__e( name ) +\n'</p>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar template = require('./legend-properties-form.tpl');\nrequire('builder/components/form-components/index');\n\nmodule.exports = CoreView.extend({\n\n  initialize: function (opts) {\n    if (!opts.formModel) throw new Error('formModel is required');\n    this._formModel = opts.formModel;\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this._removeFormView();\n    this.$el.html(template());\n    this._initViews();\n    return this;\n  },\n\n  _initViews: function () {\n    this._formView = new Backbone.Form({\n      model: this._formModel\n    });\n\n    this.listenTo(this._formView, 'change', this._updateChanges, this);\n\n    this.$('.js-propertiesForm').append(this._formView.render().el);\n\n    this.$('form').on('submit', function (event) {\n      event.preventDefault();\n    });\n  },\n\n  _updateChanges: function () {\n    this._formView.commit();\n  },\n\n  _removeFormView: function () {\n    this._formView && this._formView.remove();\n  },\n\n  clean: function () {\n    this.$('form').off('submit');\n    this._removeFormView();\n    CoreView.prototype.clean.call(this);\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"Editor-HeaderInfo\">\\n  <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">2</div>\\n  <div class=\"Editor-HeaderInfo-inner CDB-Text js-selector\">\\n    <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n      <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.legend.legend-form.properties.title') ) +\n'</h2>\\n    </div>\\n    <p class=\"CDB-Text u-upperCase CDB-FontSize-small u-altTextColor u-bSpace--m\">' +\n__e( _t('editor.legend.legend-form.properties.subtitle') ) +\n'</p>\\n    <div class=\"js-propertiesForm\"></div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var LEGEND_TYPES = {\n  NONE: 'none',\n  BUBBLE: 'bubble',\n  CATEGORY: 'category',\n  CHOROPLETH: 'choropleth',\n  TORQUE: 'torque',\n  CUSTOM: 'custom',\n  CUSTOM_CHOROPLETH: 'custom_choropleth'\n};\n\nmodule.exports = LEGEND_TYPES;\n","var _ = require('underscore');\n\nvar noOp = function () {\n  return true;\n};\n\nvar getStyleAttrs = function (styleModel) {\n  var fill = styleModel.get('fill');\n  var stroke = styleModel.get('stroke');\n  if (!fill && !stroke || _.isEmpty(fill) && _.isEmpty(stroke)) return false;\n\n  return {\n    fill: fill,\n    stroke: stroke\n  };\n};\n\nvar validateColorRange = function (styleModel) {\n  var attributes = getStyleAttrs(styleModel);\n  if (!attributes) return false;\n\n  var color = attributes.fill && attributes.fill.color || attributes.stroke && attributes.stroke.color;\n  return color.range && color.range.length > 0;\n};\n\nvar validateSizeRange = function (styleModel) {\n  var attributes = getStyleAttrs(styleModel);\n  if (!attributes) return false;\n\n  var size = attributes.fill && attributes.fill.size || attributes.stroke && attributes.stroke.size;\n  return size.range && size.range.length > 0;\n};\n\nvar validateRangeAndDomain = function (styleModel) {\n  var attributes = getStyleAttrs(styleModel);\n  if (!attributes) return false;\n\n  var color = attributes.fill && attributes.fill.color || attributes.stroke && attributes.stroke.color;\n  return color.range && color.range.length > 0 && color.domain && color.domain.length > 0 && color.range && color.range.length > 0;\n};\n\nvar validations = {\n  bubble: validateSizeRange,\n  category: validateRangeAndDomain,\n  torque: validateRangeAndDomain,\n  choropleth: validateColorRange,\n  custom_choropleth: validateColorRange,\n  custom: noOp\n};\n\nmodule.exports = validations;\n","var Backbone = require('backbone');\nvar _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar LegendColorView = require('./color/legend-color-view');\nvar LegendSizeView = require('./size/legend-size-view');\nvar LegendSizeTypes = require('./size/legend-size-types');\nvar createTextLabelsTabPane = require('builder/components/tab-pane/create-text-labels-tab-pane');\nvar TabPaneTemplate = require('builder/editor/tab-pane-submenu.tpl');\nvar sqlErrorTemplate = require('./legend-content-sql-error.tpl');\nvar actionErrorTemplate = require('builder/editor/layers/sql-error-action.tpl');\nvar layerTabMessageTemplate = require('builder/editor/layers/layer-tab-message.tpl');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar InfoboxModel = require('builder/components/infobox/infobox-model');\n\nvar REQUIRED_OPTS = [\n  'mapDefinitionModel',\n  'userActions',\n  'layerDefinitionModel',\n  'legendDefinitionsCollection',\n  'editorModel',\n  'userModel',\n  'configModel',\n  'modals',\n  'layerContentModel'\n];\n\nvar LEGEND_TYPES = {\n  color: 'color',\n  size: 'size'\n};\n\nmodule.exports = CoreView.extend({\n  module: 'layer-content-views:legend:legends-view',\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._initViewState();\n    this._initModels();\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    if (this._isErrored()) {\n      this._renderError();\n    } else if (this._viewState.get('isDataFiltered')) {\n      this._renderFilteredData();\n    } else {\n      this._initViews();\n    }\n\n    return this;\n  },\n\n  _initViewState: function () {\n    this._viewState = new Backbone.Model({\n      isDataFiltered: false\n    });\n\n    this._setViewValues();\n  },\n\n  _initModels: function () {\n    this._infoboxModel = new InfoboxModel({\n      state: this._isLayerHidden() ? 'layer-hidden' : ''\n    });\n\n    this._overlayModel = new Backbone.Model({\n      visible: this._isLayerHidden()\n    });\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._editorModel, 'change:edition', this._changeStyle);\n    this.listenTo(this._layerContentModel, 'change:state', this._setViewValues);\n    this.listenTo(this._viewState, 'change:isDataFiltered', this.render);\n  },\n\n  _isLayerHidden: function () {\n    return this._layerDefinitionModel.get('visible') === false;\n  },\n\n  _onQueryChanged: function () {\n    if (this._isErrored()) {\n      this.render();\n    }\n  },\n\n  _isErrored: function () {\n    return this._layerContentModel.isErrored();\n  },\n\n  _renderError: function () {\n    this.$el.append(\n      sqlErrorTemplate({\n        body: _t('editor.error-query.body', {\n          action: actionErrorTemplate({\n            label: _t('editor.error-query.label')\n          })\n        })\n      })\n    );\n  },\n\n  _renderFilteredData: function () {\n    this.$el.append(\n      layerTabMessageTemplate({\n        message: _t('editor.layers.warnings.no-data.message'),\n        action: _t('editor.layers.warnings.no-data.action-message')\n      })\n    );\n  },\n\n  _initViews: function () {\n    var tabPaneTabs = [this._getColorTabPaneOptions(), this._getSizeTabPaneOptions()];\n\n    var tabPaneOptions = {\n      tabPaneOptions: {\n        template: TabPaneTemplate,\n        tabPaneItemOptions: {\n          tagName: 'li',\n          klassName: 'CDB-NavSubmenu-item'\n        }\n      },\n      tabPaneItemLabelOptions: {\n        tagName: 'button',\n        className: 'CDB-NavSubmenu-link u-upperCase'\n      }\n    };\n\n    this._layerTabPaneView = createTextLabelsTabPane(tabPaneTabs, tabPaneOptions);\n    this.$el.append(this._layerTabPaneView.render().$el);\n    this.addView(this._layerTabPaneView);\n    this._changeStyle(this._editorModel);\n  },\n\n  _getColorTabPaneOptions: function () {\n    var self = this;\n\n    return {\n      name: LEGEND_TYPES.color,\n      label: _t('editor.legend.menu-tab-pane-labels.color'),\n      createContentView: function () {\n        return new LegendColorView({\n          className: 'Editor-content js-type',\n          mapDefinitionModel: self._mapDefinitionModel,\n          editorModel: self._editorModel,\n          userActions: self._userActions,\n          layerContentModel: self._layerContentModel,\n          layerDefinitionModel: self._layerDefinitionModel,\n          legendDefinitionsCollection: self._legendDefinitionsCollection,\n          type: LEGEND_TYPES.color,\n          userModel: self._userModel,\n          configModel: self._configModel,\n          modals: self._modals,\n          overlayModel: self._overlayModel,\n          infoboxModel: self._infoboxModel\n        });\n      }\n    };\n  },\n\n  _getSizeTabPaneOptions: function () {\n    var legendType = LEGEND_TYPES.size;\n    var disabled = !this._isStyleCompatible(legendType);\n    var self = this;\n\n    return {\n      name: legendType,\n      label: _t('editor.legend.menu-tab-pane-labels.size'),\n      disabled: disabled,\n      tooltip: disabled && _t('editor.legend.menu-tab-pane-labels.size-disabled'),\n      createContentView: function () {\n        return new LegendSizeView({\n          className: 'Editor-content js-type',\n          mapDefinitionModel: self._mapDefinitionModel,\n          editorModel: self._editorModel,\n          userActions: self._userActions,\n          userModel: self._userModel,\n          configModel: self._configModel,\n          modals: self._modals,\n          layerContentModel: self._layerContentModel,\n          layerDefinitionModel: self._layerDefinitionModel,\n          legendDefinitionsCollection: self._legendDefinitionsCollection,\n          type: legendType,\n          overlayModel: self._overlayModel,\n          infoboxModel: self._infoboxModel\n        });\n      }\n    };\n  },\n\n  _isStyleCompatible: function (legendType) {\n    if (legendType === LEGEND_TYPES.size) {\n      var isCompatible = _.some(LegendSizeTypes, function (type) {\n        var isStyleCompatible = type.isStyleCompatible;\n\n        if (isStyleCompatible) {\n          return isStyleCompatible(this._layerDefinitionModel.styleModel);\n        }\n\n        return false;\n      }, this);\n\n      return isCompatible;\n    }\n\n    return true;\n  },\n\n  _changeStyle: function (m) {\n    if (this._layerTabPaneView) { this._layerTabPaneView.changeStyleMenu(m); }\n  },\n\n  _showHiddenLayer: function () {\n    var savingOptions = {\n      shouldPreserveAutoStyle: true\n    };\n    this._layerDefinitionModel.toggleVisible();\n    this._userActions.saveLayer(this._layerDefinitionModel, savingOptions);\n  },\n\n  _setViewValues: function () {\n    this._layerDefinitionModel.isDataFiltered()\n      .then(function (isDataFiltered) {\n        this._viewState.set('isDataFiltered', isDataFiltered);\n      }.bind(this));\n  }\n});\n","var LegendTypes = require('builder/editor/layers/layer-content-views/legend/legend-types');\nvar styleHelper = require('builder/helpers/style');\n\nmodule.exports = [\n  {\n    value: LegendTypes.NONE,\n    tooltipTranslationKey: 'editor.legend.tooltips.style.none',\n    legendIcon: require('builder/editor/layers/layer-content-views/legend/carousel-icons/none.tpl'),\n    label: _t('editor.legend.types.none')\n  }, {\n    value: LegendTypes.BUBBLE,\n    tooltipTranslationKey: 'editor.legend.tooltips.style.bubble',\n    legendIcon: require('builder/editor/layers/layer-content-views/legend/carousel-icons/bubble.tpl'),\n    label: _t('editor.legend.types.bubble'),\n    isStyleCompatible: function (styleModel) {\n      var size = styleHelper.getSize(styleModel);\n      if (size == null) return false;\n\n      return size && size.attribute !== undefined;\n    }\n  }\n];\n","var LegendTypes = require('./legend-size-types');\nvar LegendTypeBaseView = require('builder/editor/layers/layer-content-views/legend/legend-base-type-view');\n\nmodule.exports = LegendTypeBaseView.extend({\n  initialize: function (opts) {\n    this.legendTypes = LegendTypes;\n    LegendTypeBaseView.prototype.initialize.call(this, opts);\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar Backbone = require('backbone');\nvar template = require('./layer-header.tpl');\nvar SyncInfoView = require('./sync-info/sync-info-view');\nvar ContextMenuView = require('builder/components/context-menu/context-menu-view');\nvar CustomListCollection = require('builder/components/custom-list/custom-list-collection');\nvar VisTableModel = require('builder/data/visualization-table-model');\nvar renameLayer = require('./operations/rename-layer');\nvar DeleteLayerConfirmationView = require('builder/components/modals/remove-layer/delete-layer-confirmation-view');\nvar InlineEditorView = require('builder/components/inline-editor/inline-editor-view');\nvar ModalExportDataView = require('builder/components/modals/export-data/modal-export-data-view');\nvar templateInlineEditor = require('./inline-editor.tpl');\nvar zoomToData = require('builder/editor/map-operations/zoom-to-data');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\nvar IconView = require('builder/components/icon/icon-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nconst { getSourceNode, nodeHasTradeArea, nodeHasSQLFunction } = require('builder/helpers/analysis-node-utils');\n\nvar REQUIRED_OPTS = [\n  'modals',\n  'userActions',\n  'layerDefinitionModel',\n  'layerDefinitionsCollection',\n  'configModel',\n  'stateDefinitionModel',\n  'editorModel',\n  'userModel',\n  'visDefinitionModel',\n  'widgetDefinitionsCollection'\n];\n\nmodule.exports = CoreView.extend({\n  module: 'layers:layer-header-view',\n\n  className: 'js-editorPanelHeader',\n\n  events: {\n    'click .js-toggle-menu': '_onToggleContextMenuClicked',\n    'click .js-zoom': '_onZoomClicked',\n    'blur .js-input': '_hideRenameInput',\n    'keyup .js-input': '_onKeyUpInput'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._sourceNodeModel = getSourceNode(this._getNodeModel());\n    this._topQueryGeometryModel = null;\n\n    this._initVisTableModel();\n    this._initViewState();\n    this._bindEvents();\n    this._onSourceChanged();\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    var tableName = '';\n    var url = '';\n\n    if (this._visTableModel) {\n      var tableModel = this._visTableModel.getTableModel();\n      tableName = tableModel.getUnquotedName();\n      url = this._visTableModel && this._visTableModel.datasetURL();\n    }\n\n    this.$el.html(\n      template({\n        letter: this._layerDefinitionModel.get('letter'),\n        id: this._getNodeModel().id,\n        bgColor: this._layerDefinitionModel.getColor(),\n        isTableSource: !!this._sourceNodeModel,\n        url: url,\n        tableName: tableName,\n        title: this._layerDefinitionModel.getTableName().replace(/_/gi, ' '),\n        alias: this._layerDefinitionModel.getName(),\n        isEmpty: this._viewState.get('isLayerEmpty'),\n        canBeGeoreferenced: this._viewState.get('canBeGeoreferenced')\n      })\n    );\n\n    this._showOrHideZoomVisibility();\n    this._initViews();\n    this._changeStyle();\n\n    return this;\n  },\n\n  _initVisTableModel: function () {\n    if (this._sourceNodeModel) {\n      var tableName = this._sourceNodeModel.get('table_name');\n      this._visTableModel = new VisTableModel({\n        id: tableName,\n        table: {\n          name: tableName\n        }\n      }, {\n        configModel: this._configModel\n      });\n    }\n  },\n\n  _initViewState: function () {\n    this._viewState = new Backbone.Model({\n      isLayerEmpty: false,\n      hasGeom: true,\n      canBeGeoreferenced: false\n    });\n    this._setViewStateValues();\n  },\n\n  _initViews: function () {\n    this._addSyncInfo();\n\n    this._inlineEditor = new InlineEditorView({\n      template: templateInlineEditor,\n      renderOptions: {\n        alias: this._layerDefinitionModel.getName()\n      },\n      onEdit: this._renameLayer.bind(this)\n    });\n    this.addView(this._inlineEditor);\n    this.$('.js-header').append(this._inlineEditor.render().el);\n\n    var centerTooltip = new TipsyTooltipView({\n      el: this._getZoom(),\n      gravity: 'w',\n      title: function () {\n        return _t('editor.layers.options.center-map');\n      }\n    });\n\n    this.addView(centerTooltip);\n\n    var toggleMenuTooltip = new TipsyTooltipView({\n      el: this._getToggleMenu(),\n      gravity: 'w',\n      title: function () {\n        return _t('more-options');\n      }\n    });\n    this.addView(toggleMenuTooltip);\n\n    if (this._viewState.get('isLayerEmpty') || this._viewState.get('canBeGeoreferenced')) {\n      var warningIcon = new IconView({\n        placeholder: this.$el.find('.js-warningIcon'),\n        icon: 'warning'\n      });\n      warningIcon.render();\n      this.addView(warningIcon);\n\n      var title = this._viewState.get('isLayerEmpty')\n        ? _t('editor.layers.layer.empty-layer')\n        : _t('editor.layers.layer.geocode-tooltip');\n\n      var emptyLayerTooltip = new TipsyTooltipView({\n        el: this.$el.find('.js-warningIcon'),\n        gravity: 'w',\n        title: function () {\n          return title;\n        }\n      });\n      this.addView(emptyLayerTooltip);\n    }\n  },\n\n  _getNodeModel: function () {\n    return this._layerDefinitionModel.getAnalysisDefinitionNodeModel();\n  },\n\n  _addSyncInfo: function () {\n    var nodeModel = this._getNodeModel();\n\n    if (nodeModel && nodeModel.tableModel && nodeModel.tableModel.isSync()) {\n      this._createSyncInfo(nodeModel.tableModel);\n    }\n  },\n\n  _createSyncInfo: function (tableModel) {\n    var syncModel = tableModel.getSyncModel();\n    this._syncInfoView = new SyncInfoView({\n      modals: this._modals,\n      syncModel: tableModel._syncModel,\n      tableModel: tableModel,\n      userModel: this._userModel\n    });\n\n    this.addView(this._syncInfoView);\n    this.$el.prepend(this._syncInfoView.render().el);\n\n    syncModel.bind('destroy', this._destroySyncInfo, this);\n    this.add_related_model(syncModel);\n  },\n\n  _destroySyncInfo: function () {\n    this.removeView(this._syncInfoView);\n    this._syncInfoView.clean();\n    delete this._syncInfoView;\n  },\n\n  _bindEvents: function () {\n    if (this._tableNodeModel) {\n      this._tableNodeModel.bind('change:synchronization', this.render, this);\n      this.add_related_model(this._tableNodeModel);\n    }\n\n    this._changeStyle = this._changeStyle.bind(this);\n    this._layerDefinitionModel.bind('change:source', this._onSourceChanged, this);\n    this._layerDefinitionModel.bind('change:source', this.render, this);\n    this._editorModel.on('change:edition', this._changeStyle, this);\n    this.add_related_model(this._editorModel);\n    this.add_related_model(this._layerDefinitionModel);\n    this.listenTo(this._viewState, 'change:hasGeom', this._showOrHideZoomVisibility);\n    this.listenTo(this._viewState, 'change:isLayerEmpty change:canBeGeoreferenced', this.render);\n  },\n\n  _onSourceChanged: function () {\n    var nodeModel = this._getNodeModel();\n\n    if (this._topQueryGeometryModel !== null) {\n      this._topQueryGeometryModel.unbind('change:simple_geom');\n    }\n    this._topQueryGeometryModel = nodeModel.queryGeometryModel.bind('change:simple_geom', this._setViewStateValues, this);\n    this._setViewStateValues();\n  },\n\n  _changeStyle: function () {\n    var editing = this._editorModel.isEditing();\n    this._getTitle().toggleClass('u-whiteTextColor', editing);\n    this._getText().toggleClass('u-altTextColor', editing);\n    this._getInlineEditor().toggleClass('u-mainTextColor', editing);\n    this._getLink().toggleClass('u-whiteTextColor', editing);\n    this._getBack().toggleClass('u-whiteTextColor', editing);\n    this._getToggleMenu().toggleClass('is-white', editing);\n    this._getZoom().toggleClass('is-white', editing);\n  },\n\n  _getInlineEditor: function () {\n    return this.$('.Inline-editor-input');\n  },\n\n  _getTitle: function () {\n    return this.$('.Editor-HeaderInfo-titleText .js-title');\n  },\n\n  _getText: function () {\n    return this.$('.Editor-breadcrumbItem');\n  },\n\n  _getLink: function () {\n    return this.$('.CDB-Text a');\n  },\n\n  _getBack: function () {\n    return this.$('.js-back');\n  },\n\n  _getToggleMenu: function () {\n    return this.$('.js-toggle-menu');\n  },\n\n  _getZoom: function () {\n    return this.$('.js-zoom');\n  },\n\n  _onToggleContextMenuClicked: function (event) {\n    if (this._hasContextMenu()) {\n      this._hideContextMenu();\n    } else {\n      this._showContextMenu({\n        x: event.pageX,\n        y: event.pageY\n      });\n    }\n  },\n\n  _hasContextMenu: function () {\n    return this._menuView != null;\n  },\n\n  _showContextMenu: function (position) {\n    var menuItems = new CustomListCollection([{\n      label: _t('editor.layers.options.rename'),\n      val: 'rename-layer'\n    }, {\n      label: this._layerHidden() ? _t('editor.layers.options.show') : _t('editor.layers.options.hide'),\n      val: 'toggle-layer'\n    }, {\n      label: _t('editor.layers.options.export'),\n      val: 'export-data'\n    }]);\n    if (this._layerDefinitionModel.canBeDeletedByUser()) {\n      menuItems.add({\n        label: _t('editor.layers.options.delete'),\n        val: 'delete-layer',\n        destructive: true\n      });\n    }\n\n    var triggerElementID = 'context-menu-trigger-' + this._layerDefinitionModel.cid;\n    this._getToggleMenu().attr('id', triggerElementID);\n    this._menuView = new ContextMenuView({\n      collection: menuItems,\n      triggerElementID: triggerElementID,\n      position: position\n    });\n\n    menuItems.bind('change:selected', function (menuItem) {\n      if (menuItem.get('val') === 'delete-layer') {\n        this._confirmDeleteLayer();\n      }\n      if (menuItem.get('val') === 'rename-layer') {\n        this._inlineEditor.edit();\n      }\n      if (menuItem.get('val') === 'toggle-layer') {\n        var savingOptions = {\n          shouldPreserveAutoStyle: true\n        };\n        this._layerDefinitionModel.toggleVisible();\n        this._userActions.saveLayer(this._layerDefinitionModel, savingOptions);\n      }\n      if (menuItem.get('val') === 'export-data') {\n        this._exportLayer();\n      }\n    }, this);\n\n    this._menuView.model.bind('change:visible', function (model, isContextMenuVisible) {\n      if (this._hasContextMenu() && !isContextMenuVisible) {\n        this._hideContextMenu();\n      }\n    }, this);\n\n    this._menuView.show();\n    this.addView(this._menuView);\n  },\n\n  _confirmDeleteLayer: function () {\n    this._modals.create(function (modalModel) {\n      var deleteLayerConfirmationView = new DeleteLayerConfirmationView({\n        userActions: this._userActions,\n        modals: this._modals,\n        layerModel: this._layerDefinitionModel,\n        modalModel: modalModel,\n        visDefinitionModel: this._visDefinitionModel,\n        widgetDefinitionsCollection: this._widgetDefinitionsCollection\n      });\n\n      return deleteLayerConfirmationView;\n    }.bind(this));\n  },\n\n  _hideContextMenu: function () {\n    this.removeView(this._menuView);\n    this._menuView.clean();\n    delete this._menuView;\n  },\n\n  _exportLayer: function () {\n    var nodeModel = this._getNodeModel();\n    const { queryGeometryModel, querySchemaModel } = nodeModel;\n    const canHideColumns = nodeHasTradeArea(nodeModel) &&\n      !nodeHasSQLFunction(nodeModel);\n\n    this._modals.create(function (modalModel) {\n      return new ModalExportDataView({\n        fromView: 'layer',\n        modalModel: modalModel,\n        queryGeometryModel,\n        querySchemaModel,\n        canHideColumns,\n        layerModel: this._layerDefinitionModel,\n        configModel: this._configModel,\n        filename: this._layerDefinitionModel.getName()\n      });\n    }.bind(this));\n  },\n\n  _renameLayer: function () {\n    var newName = this._inlineEditor.getValue();\n\n    if (newName !== '') {\n      // Optimistic\n      this._onSaveSuccess(newName);\n\n      renameLayer({\n        newName: newName,\n        userActions: this._userActions,\n        layerDefinitionsCollection: this._layerDefinitionsCollection,\n        layerDefinitionModel: this._layerDefinitionModel,\n        onError: this._onSaveError.bind(this)\n      });\n    }\n  },\n\n  _onSaveSuccess: function (newName) {\n    this.$('.js-title').text(newName).show();\n    this.$('.js-title-editor').attr('title', newName);\n    this._inlineEditor.hide();\n  },\n\n  _onSaveError: function (oldName) {\n    this.$('.js-title').text(oldName).show();\n    this._inlineEditor.hide();\n  },\n\n  _layerHidden: function () {\n    return this._layerDefinitionModel.get('visible') === false;\n  },\n\n  _onZoomClicked: function () {\n    var nodeModel = this._getNodeModel();\n    var query = nodeModel.querySchemaModel.get('query');\n    zoomToData(this._configModel, this._stateDefinitionModel, query);\n  },\n\n  _showOrHideZoomVisibility: function () {\n    this._getZoom().toggle(this._viewState.get('hasGeom'));\n  },\n\n  _setViewStateValues: function () {\n    var nodeModel = this._getNodeModel();\n    var isEmptyPromise = this._layerDefinitionModel.isEmptyAsync();\n    var hasGeomPromise = nodeModel.queryGeometryModel.hasValueAsync();\n    var canBeGeoreferencedPromise = this._layerDefinitionModel.canBeGeoreferenced();\n\n    Promise.all([isEmptyPromise, hasGeomPromise, canBeGeoreferencedPromise])\n      .then(function (values) {\n        this._viewState.set({\n          isLayerEmpty: values[0],\n          hasGeom: values[1],\n          canBeGeoreferenced: values[2]\n        });\n      }.bind(this));\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<ul class=\"Editor-breadcrumb\">\\n  <li class=\"Editor-breadcrumbItem CDB-Text CDB-Size-medium u-actionTextColor\">\\n    <button class=\"js-back\">\\n      <i class=\"CDB-IconFont CDB-IconFont-arrowPrev Size-large u-rSpace\"></i>\\n\\n      <span class=\"Editor-breadcrumbLink\">' +\n__e( _t('back') ) +\n'</span>\\n    </button>\\n  </li>\\n\\n  <li class=\"Editor-breadcrumbItem CDB-Text CDB-Size-medium\"><span class=\"Editor-breadcrumbSep\"> / </span> ' +\n__e( _t('editor.layers.breadcrumb.layer-options') ) +\n'</li>\\n</ul>\\n\\n<div class=\"Editor-HeaderInfoEditor Editor-HeaderInfoEditor--layer\">\\n  <div class=\"Editor-HeaderInfo-inner u-ellipsis\">\\n    <div class=\"Editor-HeaderInfo-title u-bSpace js-header\">\\n      <span class=\"CDB-SelectorLayer-letter CDB-Text CDB-Size-small u-whiteTextColor u-tSpace--m u-rSpace--m u-upperCase\" style=\"background-color: ' +\n__e( bgColor ) +\n';\">\\n        ' +\n__e( letter ) +\n'\\n      </span>\\n    </div>\\n\\n    ';\n if (isTableSource) { ;\n__p += '\\n      <div class=\"Editor-HeaderInfo-source u-flex\">\\n        <p class=\"CDB-Text CDB-Size-small u-ellipsis\">\\n          <a href=\"' +\n__e( url ) +\n'\" target=\"_blank\" title=\"' +\n__e( tableName ) +\n'\" class=\"Editor-headerLayerName\">' +\n__e( tableName ) +\n'</a>\\n        </p>\\n      </div>\\n    ';\n } ;\n__p += '\\n  </div>\\n\\n  <ul class=\"u-flex u-tSpace-xl\">\\n    ';\n if (isEmpty || canBeGeoreferenced) { ;\n__p += '\\n      <li class=\"Editor-HeaderInfo-emptyLayer js-warningIcon\"></li>\\n    ';\n } ;\n__p += '\\n    <li class=\"u-rSpace\">\\n      <button class=\"Editor-HeaderInfo-zoom CDB-Shape js-zoom\">\\n        <svg width=\"16px\" height=\"15px\" viewBox=\"287 30 16 15\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n          <g id=\"Icon\" stroke=\"none\" stroke-width=\"1\" fill-rule=\"evenodd\" transform=\"translate(288.000000, 30.000000)\">\\n            <circle id=\"Oval\" cx=\"7.5\" cy=\"7.5\" r=\"0.5\"></circle>\\n            <path d=\"M7,0 L8,0 L8,5 L7,5 L7,0 Z M6,3 L7,3 L7,4 L6,4 L6,3 Z M8,3 L9,3 L9,4 L8,4 L8,3 Z M9,2 L10,2 L10,3 L9,3 L9,2 Z M5,2 L6,2 L6,3 L5,3 L5,2 Z\" id=\"Combined-Shape\"></path>\\n            <path d=\"M7,10 L8,10 L8,15 L7,15 L7,10 Z M6,13 L7,13 L7,14 L6,14 L6,13 Z M8,13 L9,13 L9,14 L8,14 L8,13 Z M9,12 L10,12 L10,13 L9,13 L9,12 Z M5,12 L6,12 L6,13 L5,13 L5,12 Z\" id=\"Combined-Shape\" transform=\"translate(7.500000, 12.500000) scale(1, -1) translate(-7.500000, -12.500000) \"></path>\\n            <path d=\"M12,5 L13,5 L13,10 L12,10 L12,5 Z M11,8 L12,8 L12,9 L11,9 L11,8 Z M13,8 L14,8 L14,9 L13,9 L13,8 Z M14,7 L15,7 L15,8 L14,8 L14,7 Z M10,7 L11,7 L11,8 L10,8 L10,7 Z\" id=\"Combined-Shape\" transform=\"translate(12.500000, 7.500000) scale(1, -1) rotate(90.000000) translate(-12.500000, -7.500000) \"></path>\\n            <path d=\"M2,5 L3,5 L3,10 L2,10 L2,5 Z M1,8 L2,8 L2,9 L1,9 L1,8 Z M3,8 L4,8 L4,9 L3,9 L3,8 Z M4,7 L5,7 L5,8 L4,8 L4,7 Z M0,7 L1,7 L1,8 L0,8 L0,7 Z\" id=\"Combined-Shape\" transform=\"translate(2.500000, 7.500000) scale(-1, -1) rotate(90.000000) translate(-2.500000, -7.500000) \"></path>\\n          </g>\\n        </svg>\\n      </button>\\n    </li>\\n    <li class=\"CDB-Shape\">\\n      <button class=\"CDB-Shape-threePoints is-blue is-small js-toggle-menu\">\\n        <div class=\"CDB-Shape-threePointsItem\"></div>\\n        <div class=\"CDB-Shape-threePointsItem\"></div>\\n        <div class=\"CDB-Shape-threePointsItem\"></div>\\n      </button>\\n    </li>\\n  </ul>\\n\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<h2 class=\"CDB-Text CDB-Size-huge is-light u-secondaryTextColor\">\\n  ' +\n((__t = ( message )) == null ? '' : __t) +\n'\\n</h2>\\n<h2 class=\"CDB-Text CDB-Size-huge is-light u-secondaryTextColor u-tSpace-xl\">\\n  ' +\n((__t = ( action )) == null ? '' : __t) +\n'\\n</h2>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<nav class=\"CDB-NavMenu js-theme\">\\n  <ul class=\"CDB-NavMenu-inner CDB-Text is-semibold CDB-Size-medium js-menu\"></ul>\\n</nav>\\n<div class=\"Editor-content js-content\"></div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar layerTypesAndKinds = require('builder/data/layer-types-and-kinds');\nvar BaseTiledLayerView = require('./layer-views/base-tiled-layer-view');\nvar PlainColorLayerView = require('./layer-views/plain-color-layer-view');\nvar BackgroundImageLayerView = require('./layer-views/background-image-layer-view');\nvar GoogleMapsBaseLayerView = require('./layer-views/google-maps-base-layer-view');\nvar DataLayerView = require('./layer-views/data-layer-view');\nvar ErroredDataLayerView = require('./layer-views/errored-data-layer-view');\nvar LabelsLayerView = require('./layer-views/labels-layer-view');\nvar LayerAnalysesView = require('./layer-analyses-view');\nvar LayerAnalysisViewFactory = require('./layer-analysis-view-factory');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'userActions',\n  'layerDefinitionsCollection',\n  'analysisDefinitionNodesCollection',\n  'modals',\n  'configModel',\n  'sortableSelector',\n  'stateDefinitionModel',\n  'visDefinitionModel',\n  'widgetDefinitionsCollection'\n];\n\nvar LayerViewFactory = function (opts) {\n  opts = opts || {};\n  checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n};\n\nLayerViewFactory.prototype.createLayerView = function (layerDefinitionModel) {\n  var layerViewOptions = {\n    model: layerDefinitionModel,\n    modals: this._modals,\n    stateDefinitionModel: this._stateDefinitionModel,\n    configModel: this._configModel\n  };\n\n  if (layerDefinitionModel.isDataLayer()) {\n    layerViewOptions = _.extend(layerViewOptions, {\n      userActions: this._userActions,\n      layerDefinitionsCollection: this._layerDefinitionsCollection,\n      newAnalysesView: this._newAnalysesView.bind(this),\n      widgetDefinitionsCollection: this._widgetDefinitionsCollection,\n      visDefinitionModel: this._visDefinitionModel,\n      analysisDefinitionNodesCollection: this._analysisDefinitionNodesCollection\n    });\n  }\n\n  var LayerViewClass = this._getLayerViewClass(layerDefinitionModel);\n  return new LayerViewClass(layerViewOptions);\n};\n\nLayerViewFactory.prototype._getLayerViewClass = function (layerDefinitionModel) {\n  // Base layers\n  if (this._isTiledBaseLayer(layerDefinitionModel)) {\n    return BaseTiledLayerView;\n  }\n  if (this._isPlainColorBaseLayer(layerDefinitionModel)) {\n    return PlainColorLayerView;\n  }\n  if (this._isBackgroundImageBaseLayer(layerDefinitionModel)) {\n    return BackgroundImageLayerView;\n  }\n  if (this._isGoogleMapsBaseLayer(layerDefinitionModel)) {\n    return GoogleMapsBaseLayerView;\n  }\n\n  // Data layers\n  if (layerDefinitionModel.isDataLayer()) {\n    var nodeDefModel = layerDefinitionModel.getAnalysisDefinitionNodeModel();\n    if (nodeDefModel) {\n      return DataLayerView;\n    } else {\n      // Ghost node layer (😱)\n      return ErroredDataLayerView;\n    }\n  }\n\n  // Labels layer\n  if (this.isLabelsLayer(layerDefinitionModel)) {\n    return LabelsLayerView;\n  }\n\n  throw new Error('No layer view for type \"' + layerDefinitionModel.get('type') + '\" just yet.');\n};\n\nLayerViewFactory.prototype._isBaseLayer = function (layerDefinitionModel) {\n  return layerDefinitionModel.get('order') === 0;\n};\n\nLayerViewFactory.prototype._isTiledBaseLayer = function (layerDefinitionModel) {\n  var layerType = layerDefinitionModel.get('type');\n  return layerTypesAndKinds.isTiledType(layerType) &&\n    this._isBaseLayer(layerDefinitionModel);\n};\n\nLayerViewFactory.prototype._isPlainColorBaseLayer = function (layerDefinitionModel) {\n  var layerType = layerDefinitionModel.get('type');\n  return layerTypesAndKinds.isPlainType(layerType) &&\n    this._isBaseLayer(layerDefinitionModel) &&\n      layerDefinitionModel.get('color');\n};\n\nLayerViewFactory.prototype._isBackgroundImageBaseLayer = function (layerDefinitionModel) {\n  var layerType = layerDefinitionModel.get('type');\n  return layerTypesAndKinds.isPlainType(layerType) &&\n    this._isBaseLayer(layerDefinitionModel) &&\n      layerDefinitionModel.get('image');\n};\n\nLayerViewFactory.prototype._isGoogleMapsBaseLayer = function (layerDefinitionModel) {\n  var layerType = layerDefinitionModel.get('type');\n  return layerTypesAndKinds.isGMapsBase(layerType) &&\n    this._isBaseLayer(layerDefinitionModel);\n};\n\nLayerViewFactory.prototype.isLabelsLayer = function (layerDefinitionModel) {\n  var layerType = layerDefinitionModel.get('type');\n  return layerTypesAndKinds.isTiledType(layerType) &&\n    !this._isBaseLayer(layerDefinitionModel);\n};\n\nLayerViewFactory.prototype.isBasemapLayer = function (layerDefinitionModel) {\n  return this._isBaseLayer(layerDefinitionModel);\n};\n\nLayerViewFactory.prototype._newAnalysesView = function (el, layerDefinitionModel) {\n  var layerAnalysisViewFactory = new LayerAnalysisViewFactory(this._analysisDefinitionNodesCollection);\n  return new LayerAnalysesView({\n    el: el,\n    model: layerDefinitionModel,\n    layerAnalysisViewFactory: layerAnalysisViewFactory,\n    sortableSelector: this._sortableSelector\n  });\n};\n\nmodule.exports = LayerViewFactory;\n","var _ = require('underscore');\nvar BaseLayerViewBase = require('./base-layer-view-base');\nvar template = require('./image-thumbnail-layer.tpl');\n\nmodule.exports = BaseLayerViewBase.extend({\n  _getCompiledTemplate: function () {\n    return template({\n      title: this._getImageFileName(),\n      desc: _t('editor.layers.image.title-label'),\n      imgURL: this.model.get('image')\n    });\n  },\n\n  _getImageFileName: function () {\n    var imageURL = this.model.get('image');\n    var fileNameWithParameters = _.last(imageURL.split('/'));\n    var fileName = fileNameWithParameters.split('?')[0];\n    return fileName;\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar Router = require('builder/routes/router');\n\n/**\n * Base view for all base layer views.\n */\nmodule.exports = CoreView.extend({\n  module: 'editor:layers:layer-views:base-layer-view-base',\n\n  tagName: 'li',\n\n  className: 'BlockList-item BlockList-item--basemap js-layer ui-state-disabled',\n\n  events: {\n    'click': '_onEditBasemap'\n  },\n\n  initialize: function (opts) {\n    this.listenTo(this.model, 'change', this.render);\n  },\n\n  render: function () {\n    this.$el.html(this._getCompiledTemplate());\n\n    return this;\n  },\n\n  _getCompiledTemplate: function () {\n    throw new Error('subclasses of BasemapLayerViewBase must implement _getCompiledTemplate');\n  },\n\n  _onEditBasemap: function (e) {\n    e.stopPropagation();\n\n    Router.goToBaseMap();\n  }\n});\n","/* global Image */\n\nvar BaseLayerViewBase = require('./base-layer-view-base');\nvar template = require('./image-thumbnail-layer.tpl');\n\nvar DEFAULT_SUBDOMAIN = 'a';\nvar DEFAULT_X_POSITION = 30;\nvar DEFAULT_Y_POSISTION = 24;\nvar DEFAULT_ZOOM = 6;\nvar DEFAULT_IMG = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAZ9JREFUWAntWUtugzAUNKbAJl1EYtcz9Ba5UE6SC+UWPUN3SNlkw78zVhJRCeIXbCup6ic5gP08Ho/x40ESBauq6iNJkgPKDpdb1j3RTuM4HlH2ZVl+JySXpukXygaksiViRVEsNd3qu65Tfd/frpdO8jxXEGO2GcTUMAxtXddnYH1qKqe1fof3IrlZpECVJA6xMgiyMdzws0N5CzTealiIlpGbBsKz77nZSYAc67ck+NIWCbouj1cFL/eNK6df/UW7FztKMT7ZTOJDDMQ5RUyJGYK2IMyBm6ax4nFQGxZBEIStWFcH2TSu3pZjiCX2StDCf1VzJLhKtkmnqOBEjFWn/0tBaaB+REoTqJkJ2wxJpM3FtPvGMgQlabrkCUEcCcF7Kf9UBT5xvN6DIZbYK8Hp7H2dR4KuSkYFo4KPKBAiYTWBmoHznvEdQpKm82ljw+I4DObElJghaJu59AWHA9qw6CMlR9+4i6mCi0UFXdRj3z+hIL8Ju040VP+TBrkjtn0bagQH3JbcSHB/+WDNCgc8r11bZOdncjPfWV/5b4gfOaaYLUG/QVoAAAAASUVORK5CYII=';\nvar DEFAULT_NAME = _t('editor.layers.basemap.custom-basemap');\n\nmodule.exports = BaseLayerViewBase.extend({\n\n  _getCompiledTemplate: function () {\n    var title = this.model.getName() || DEFAULT_NAME;\n    var desc = _t('editor.layers.basemap.title-label');\n\n    return template({\n      title: title,\n      desc: title === desc ? '' : desc,\n      imgURL: this._getImageURL()\n    });\n  },\n\n  _getImageURL: function () {\n    var self = this;\n    var url = this._lowerXYZ();\n\n    var image = new Image();\n    image.onerror = function () {\n      self.$('.js-thumbnailImg').attr('src', DEFAULT_IMG);\n    };\n    image.src = url;\n\n    return url;\n  },\n\n  _getSubdomain: function () {\n    var subdomains = this.model.get('subdomains'); // eg: 'abcd' or '1234'\n\n    return (subdomains && subdomains.length) ? subdomains[0] : DEFAULT_SUBDOMAIN;\n  },\n\n  _lowerXYZ: function () {\n    return this.model.get('urlTemplate')\n      .replace('{s}', this._getSubdomain())\n      .replace('{z}', DEFAULT_ZOOM)\n      .replace('{x}', DEFAULT_X_POSITION)\n      .replace('{y}', DEFAULT_Y_POSISTION);\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"Editor-ListLayer-itemHeader\">\\n  <div class=\"Editor-ListLayer-media Editor-ListLayer-media--placeholder u-rSpace--m\">\\n  </div>\\n  <div class=\"Editor-ListLayer-inner\">\\n    <div class=\"Editor-ListLayer-title\">\\n      <div class=\"Editor-ListLayer-titleText Editor-ListLayer-titleText--placeholder\">\\n      </div>\\n    </div>\\n    <div class=\"u-flex Editor-ListLayer-info Editor-ListLayer-info--placeholder u-tSpace--m\">\\n    </div>\\n  </div>\\n</div>\\n<ul class=\"Editor-ListAnalysis js-analyses\">\\n  <li class=\"Editor-ListAnalysis-item Editor-ListAnalysis-layer--placeholder Editor-ListAnalysis-layer js-base is-base ui-draggable ui-draggable-handle\">\\n    <div class=\"Editor-ListAnalysis-itemInfo u-rSpace--m\">\\n      <div class=\"Editor-ListAnalysis-itemInfoIcon Editor-ListAnalysis-itemInfoIcon--placeholder\">\\n      </div>\\n    </div>\\n    <div class=\"Editor-ListAnalysis-itemInfoDataset--placeholder\">\\n    </div>\\n  </li>\\n</ul>\\n';\n\n}\nreturn __p\n}","var Backbone = require('backbone');\nvar _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar template = require('./data-layer.tpl');\nvar fetchingTemplate = require('./data-layer-fetching.tpl');\nvar ContextMenuView = require('builder/components/context-menu/context-menu-view');\nvar CustomListCollection = require('builder/components/custom-list/custom-list-collection');\nvar renameLayer = require('builder/editor/layers/operations/rename-layer');\nvar DeleteLayerConfirmationView = require('builder/components/modals/remove-layer/delete-layer-confirmation-view');\nvar ModalExportDataView = require('builder/components/modals/export-data/modal-export-data-view');\nvar InlineEditorView = require('builder/components/inline-editor/inline-editor-view');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\nvar zoomToData = require('builder/editor/map-operations/zoom-to-data');\nvar templateInlineEditor = require('./inline-editor.tpl');\nvar geometryNoneTemplate = require('./geometry-none.tpl');\nvar geometryPointsTemplate = require('./geometry-points.tpl');\nvar geometryLinesTemplate = require('./geometry-lines.tpl');\nvar geometryPolygonsTemplate = require('./geometry-polygons.tpl');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar fetchAllQueryObjects = require('builder/helpers/fetch-all-query-objects');\nvar Router = require('builder/routes/router');\nvar IconView = require('builder/components/icon/icon-view');\nvar STATES = require('builder/data/query-base-status');\nconst { nodeHasTradeArea, nodeHasSQLFunction } = require('builder/helpers/analysis-node-utils');\n\nvar REQUIRED_OPTS = [\n  'userActions',\n  'layerDefinitionsCollection',\n  'modals',\n  'configModel',\n  'stateDefinitionModel',\n  'widgetDefinitionsCollection',\n  'visDefinitionModel',\n  'analysisDefinitionNodesCollection'\n];\n\nmodule.exports = CoreView.extend({\n  module: 'editor:layers:layer-views:data-layer-view',\n\n  tagName: 'li',\n\n  className: 'Editor-ListLayer-item js-layer',\n\n  events: {\n    'click': '_onEditLayer',\n    'click .js-base': '_onClickSource',\n    'click .js-title': '_onClickTitle',\n    'click .js-toggle-menu': '_onToggleContextMenuClicked',\n    'click .js-toggle': '_onToggleLayerClicked',\n    'click .js-analysis-node': '_onAnalysisNodeClicked'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    if (!_.isFunction(opts.newAnalysesView)) throw new Error('newAnalysesView is required as a function');\n\n    this._newAnalysesView = opts.newAnalysesView;\n    this._styleModel = this.model.styleModel;\n\n    var nodeDefModel = this.model.getAnalysisDefinitionNodeModel();\n\n    this._queryGeometryModel = nodeDefModel.queryGeometryModel;\n    this._queryRowsStatus = nodeDefModel.queryRowsCollection.statusModel;\n\n    this._initViewState();\n    this._bindEvents();\n\n    fetchAllQueryObjects({\n      queryRowsCollection: nodeDefModel.queryRowsCollection,\n      queryGeometryModel: this._queryGeometryModel,\n      querySchemaModel: nodeDefModel.querySchemaModel\n    }).then(function () {\n      this.model.fetchQueryRowsIfRequired();\n      this._setViewState();\n    }.bind(this));\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    var isAnimation = this._styleModel.isAnimation();\n    var fetching = this._viewState.get('isFetchingRows');\n\n    if (fetching) {\n      this.$el.html(fetchingTemplate());\n      this.$el.addClass('Editor-ListLayer-item--fetching');\n      return this;\n    } else {\n      this.$el.removeClass('Editor-ListLayer-item--fetching');\n    }\n\n    this.$el.html(template({\n      layerId: this.model.id,\n      title: this.model.getName(),\n      color: this.model.getColor(),\n      isVisible: this.model.get('visible'),\n      isAnimated: isAnimation,\n      isTorque: this._isTorque(),\n      hasError: this._hasError(),\n      isCollapsed: this._isCollapsed(),\n      numberOfAnalyses: this.model.getNumberOfAnalyses(),\n      numberOfWidgets: this._widgetDefinitionsCollection.widgetsOwnedByLayer(this.model.id),\n      needsGeocoding: this._viewState.get('needsGeocoding'),\n      hasGeom: this._viewState.get('queryGeometryHasGeom'),\n      isEmpty: this._viewState.get('isLayerEmpty'),\n      brokenLayer: false\n    }));\n\n    this._initViews();\n\n    return this;\n  },\n\n  _initViewState: function () {\n    this._viewState = new Backbone.Model({\n      needsGeocoding: false,\n      isLayerEmpty: false,\n      queryGeometryHasGeom: true,\n      isFetchingRows: false\n    });\n    this._setViewState();\n  },\n\n  _isTorque: function () {\n    return this.model.isTorqueLayer();\n  },\n\n  _initViews: function () {\n    var geometryTemplate = this._getGeometryTemplate(this._queryGeometryModel.get('simple_geom'));\n\n    this._inlineEditor = new InlineEditorView({\n      template: templateInlineEditor,\n      renderOptions: {\n        title: this.model.getName()\n      },\n      onClick: this._onEditLayer.bind(this),\n      onEdit: this._renameLayer.bind(this)\n    });\n    this.addView(this._inlineEditor);\n\n    this.$('.js-thumbnail').append(geometryTemplate({\n      letter: this.model.get('letter')\n    }));\n    this.$('.js-header').html(this._inlineEditor.render().el);\n\n    this.$el.toggleClass('is-unavailable', this.model.isNew());\n    this.$el.toggleClass('js-sortable-item', !this._isTorque());\n    this.$el.toggleClass('is-animated', this._isTorque());\n    this.$el.toggleClass('is-empty', this._viewState.get('needsGeocoding'));\n    this.$('.js-thumbnail').toggleClass('is-hidden', this._isHidden());\n    this.$('.js-title').toggleClass('is-hidden', this._isHidden());\n    this.$('.js-analyses-widgets-info').toggleClass('is-hidden', this._isHidden());\n\n    if (this._isTorque()) {\n      var torqueTooltip = new TipsyTooltipView({\n        el: this.$('.js-torqueIcon'),\n        gravity: 's',\n        offset: 0\n      });\n      this.addView(torqueTooltip);\n    }\n\n    if (this._viewState.get('needsGeocoding')) {\n      var georeferenceTooltip = new TipsyTooltipView({\n        el: this.$('.js-geocode'),\n        gravity: 'w',\n        offset: 0\n      });\n      this.addView(georeferenceTooltip);\n    }\n\n    if (this._viewState.get('isLayerEmpty')) {\n      var warningIcon = new IconView({\n        placeholder: this.$el.find('.js-emptylayer'),\n        icon: 'warning'\n      });\n      warningIcon.render();\n      this.addView(warningIcon);\n\n      var emptyLayerTooltip = new TipsyTooltipView({\n        el: this.$el.find('.js-emptylayer'),\n        gravity: 'w',\n        title: function () {\n          return _t('editor.layers.layer.empty-layer');\n        }\n      });\n      this.addView(emptyLayerTooltip);\n    }\n\n    this._toggleClickEventsOnCapturePhase('remove'); // remove any if rendered previously\n    if (this.model.isNew()) {\n      this._toggleClickEventsOnCapturePhase('add');\n    }\n\n    if (this.model.get('source')) {\n      var analysesView = this._newAnalysesView(this.$('.js-analyses'), this.model);\n      this.addView(analysesView);\n      analysesView.render();\n    }\n\n    if (this._hasError()) {\n      var errorTooltip = new TipsyTooltipView({\n        el: this.$('.js-error'),\n        gravity: 's',\n        offset: 0,\n        title: function () {\n          return this.model.get('error') && this.model.get('error').message;\n        }.bind(this)\n      });\n      this.addView(errorTooltip);\n    }\n\n    var toggleTooltip = new TipsyTooltipView({\n      el: this.$('.js-toggle-menu'),\n      gravity: 'w',\n      title: function () {\n        return _t('more-options');\n      }\n    });\n    this.addView(toggleTooltip);\n\n    var toggleMenuTooltip = new TipsyTooltipView({\n      el: this.$('.js-toggle'),\n      gravity: 's',\n      title: function () {\n        return this._isHidden() ? _t('editor.layers.options.show') : _t('editor.layers.options.hide');\n      }.bind(this)\n    });\n    this.addView(toggleMenuTooltip);\n  },\n\n  _bindEvents: function () {\n    this.listenTo(this.model, 'change', this.render);\n    this.listenToOnce(this.model, 'destroy', this._onDestroy);\n    this.listenTo(this._queryGeometryModel, 'change:simple_geom', this._setViewState);\n    this.listenTo(this._queryRowsStatus, 'change:status', this._onQueryRowsStatusChanged);\n    this.listenTo(this._viewState, 'change', this.render);\n  },\n\n  _getGeometryTemplate: function (geometry) {\n    switch (geometry) {\n      case 'line':\n        return geometryLinesTemplate;\n      case 'point':\n        return geometryPointsTemplate;\n      case 'polygon':\n        return geometryPolygonsTemplate;\n      default:\n        return geometryNoneTemplate;\n    }\n  },\n\n  _isHidden: function () {\n    return !this.model.get('visible');\n  },\n\n  _hasError: function () {\n    return !!this.model.get('error');\n  },\n\n  _isCollapsed: function () {\n    return !!this.model.get('collapsed');\n  },\n\n  _onClickTitle: function (event) {\n    // event is handled with inlineEditor\n    event.stopPropagation();\n  },\n\n  _onAnalysisNodeClicked: function (event) {\n    event.stopPropagation();\n\n    var nodeId = event.currentTarget && event.currentTarget.dataset.analysisNodeId;\n    if (!nodeId) throw new Error('missing data-analysis-node-id on element to edit analysis node, the element was: ' + event.currentTarget.outerHTML);\n\n    var nodeDefModel = this._analysisDefinitionNodesCollection.get(nodeId);\n    var layerDefModel = this._layerDefinitionsCollection.findOwnerOfAnalysisNode(nodeDefModel);\n    if (!layerDefModel) throw new Error('no owning layer found for node ' + nodeId);\n\n    Router.goToAnalysisNode(this.model.get('id'), nodeId);\n  },\n\n  _onClickSource: function (event) {\n    event.stopPropagation();\n\n    Router.goToDataTab(this.model.get('id'));\n  },\n\n  _onEditLayer: function (event) {\n    event && event.stopPropagation();\n\n    var self = this;\n    this.model.canBeGeoreferenced()\n      .then(function (canBeGeoreferenced) {\n        if (canBeGeoreferenced) {\n          Router.goToAnalysisTab(self.model.get('id'));\n        }\n      });\n    Router.goToStyleTab(self.model.get('id')); // Speculative execution. We bet on not needing geocoding to give quick feedback to the user.\n  },\n\n  _onToggleCollapsedLayer: function () {\n    this.model.toggleCollapse();\n  },\n\n  _onToggleLayerClicked: function (event) {\n    event.stopPropagation();\n\n    var savingOptions = {\n      shouldPreserveAutoStyle: true\n    };\n\n    this.model.toggleVisible();\n    this._userActions.saveLayer(this.model, savingOptions);\n  },\n\n  _onToggleContextMenuClicked: function (event) {\n    event.stopPropagation();\n\n    if (this._hasContextMenu()) {\n      this._hideContextMenu();\n    } else {\n      this._showContextMenu({\n        x: event.pageX,\n        y: event.pageY\n      });\n    }\n  },\n\n  _hasContextMenu: function () {\n    return this._menuView;\n  },\n\n  _hideContextMenu: function () {\n    this.removeView(this._menuView);\n    this._menuView.clean();\n    delete this._menuView;\n  },\n\n  _getContextMenuOptions: function () {\n    var menuItems = [{\n      label: _t('editor.layers.options.edit'),\n      val: 'edit-layer',\n      action: this._onEditLayer.bind(this)\n    }];\n\n    if (!this._viewState.get('needsGeocoding')) {\n      menuItems = menuItems.concat([{\n        label: this._isCollapsed() ? _t('editor.layers.options.expand') : _t('editor.layers.options.collapse'),\n        val: 'collapse-expand-layer',\n        action: this._onToggleCollapsedLayer.bind(this)\n      }, {\n        label: _t('editor.layers.options.rename'),\n        val: 'rename-layer',\n        action: function () {\n          this._inlineEditor.edit();\n        }.bind(this)\n      }]);\n\n      if (!this._viewState.get('isLayerEmpty')) {\n        menuItems = menuItems.concat([\n          {\n            label: _t('editor.layers.options.export'),\n            val: 'export-data',\n            action: this._exportLayer.bind(this)\n          },\n          {\n            label: _t('editor.layers.options.center-map'),\n            val: 'center-map',\n            action: this._centerMap.bind(this)\n          }\n        ]);\n      }\n    }\n\n    if (this.model.canBeDeletedByUser()) {\n      menuItems.push({\n        label: _t('editor.layers.options.delete'),\n        val: 'delete-layer',\n        action: this._confirmDeleteLayer.bind(this),\n        destructive: true\n      });\n    }\n\n    return menuItems;\n  },\n\n  _showContextMenu: function (position) {\n    var menuItems = new CustomListCollection(this._getContextMenuOptions());\n    var triggerElementID = 'context-menu-trigger-' + this.model.cid;\n    this.$('.js-toggle-menu').attr('id', triggerElementID);\n    this._menuView = new ContextMenuView({\n      collection: menuItems,\n      triggerElementID: triggerElementID,\n      position: position\n    });\n\n    menuItems.bind('change:selected', function (menuItem) {\n      menuItem.has('action') && menuItem.get('action')();\n    }, this);\n\n    this._menuView.model.bind('change:visible', function (model, isContextMenuVisible) {\n      if (this._hasContextMenu() && !isContextMenuVisible) {\n        this._hideContextMenu();\n      }\n    }, this);\n\n    this._menuView.show();\n    this.addView(this._menuView);\n  },\n\n  _exportLayer: function () {\n    var nodeDefModel = this.model.getAnalysisDefinitionNodeModel();\n    const { queryGeometryModel, querySchemaModel } = nodeDefModel;\n    const canHideColumns = nodeHasTradeArea(nodeDefModel) &&\n      !nodeHasSQLFunction(nodeDefModel);\n\n    this._modals.create(function (modalModel) {\n      return new ModalExportDataView({\n        fromView: 'main',\n        modalModel: modalModel,\n        queryGeometryModel,\n        querySchemaModel,\n        canHideColumns,\n        configModel: this._configModel,\n        layerModel: this.model,\n        filename: this.model.getName()\n      });\n    }.bind(this));\n  },\n\n  _confirmDeleteLayer: function () {\n    this._modals.create(function (modalModel) {\n      var deleteLayerConfirmationView = new DeleteLayerConfirmationView({\n        userActions: this._userActions,\n        modals: this._modals,\n        layerModel: this.model,\n        modalModel: modalModel,\n        visDefinitionModel: this._visDefinitionModel,\n        widgetDefinitionsCollection: this._widgetDefinitionsCollection\n      });\n\n      return deleteLayerConfirmationView;\n    }.bind(this));\n  },\n\n  _renameLayer: function () {\n    var newName = this._inlineEditor.getValue();\n\n    if (newName !== '') {\n      // Optimistic\n      this._onSaveSuccess(newName);\n\n      renameLayer({\n        newName: newName,\n        userActions: this._userActions,\n        layerDefinitionsCollection: this._layerDefinitionsCollection,\n        layerDefinitionModel: this.model,\n        onError: this._onSaveError.bind(this)\n      });\n    }\n  },\n\n  _onSaveSuccess: function (newName) {\n    this.$('.js-title').text(newName).show();\n    this._inlineEditor.hide();\n  },\n\n  _onSaveError: function (oldName) {\n    this.$('.js-title').text(oldName).show();\n    this._inlineEditor.hide();\n  },\n\n  _onDestroy: function () {\n    this.clean();\n  },\n\n  _disableEventsOnCapturePhase: function (evt) {\n    evt.stopPropagation();\n    evt.preventDefault();\n  },\n\n  _toggleClickEventsOnCapturePhase: function (str) {\n    var addOrRemove = str === 'add'\n      ? 'add'\n      : 'remove';\n    this.el[addOrRemove + 'EventListener']('click', this._disableEventsOnCapturePhase, true);\n  },\n\n  _centerMap: function () {\n    var nodeModel = this.model.getAnalysisDefinitionNodeModel();\n    var query = nodeModel.querySchemaModel.get('query');\n    zoomToData(this._configModel, this._stateDefinitionModel, query);\n  },\n\n  _isFetchingRows: function () {\n    var nodeDefModel = this.model.getAnalysisDefinitionNodeModel();\n    var queryRowsStatus = nodeDefModel.queryRowsCollection.statusModel;\n    return queryRowsStatus.get('status') === STATES.fetching;\n  },\n\n  _onQueryRowsStatusChanged: function () {\n    this._viewState.set('isFetchingRows', this._isFetchingRows());\n    this._setViewState();\n  },\n\n  _setViewState: function () {\n    var self = this;\n    var georeferencePromise = this.model.canBeGeoreferenced();\n    var isLayerEmptyPromise = this.model.isEmptyAsync();\n    var hasGeomPromise = this._queryGeometryModel.hasValueAsync();\n\n    Promise.all([georeferencePromise, isLayerEmptyPromise, hasGeomPromise])\n      .then(function (values) {\n        self._viewState.set({\n          needsGeocoding: values[0],\n          isLayerEmpty: values[1],\n          queryGeometryHasGeom: values[2],\n          isFetchingRows: self._isFetchingRows()\n        });\n      });\n  },\n\n  clean: function () {\n    this._toggleClickEventsOnCapturePhase('remove');\n    CoreView.prototype.clean.apply(this);\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n\n if (hasError) { ;\n__p += '\\n  <div class=\"Editor-ListLayer-itemError js-error\"></div>\\n';\n } ;\n__p += '\\n\\n';\n if (!isTorque) { ;\n__p += '\\n  <div class=\"Editor-ListLayer-dragIcon\">\\n    <div class=\"CDB-Shape\">\\n      <div class=\"CDB-Shape-rectsHandle is-small\">\\n        <div class=\"CDB-Shape-rectsHandleItem CDB-Shape-rectsHandleItem--grey is-first\"></div>\\n        <div class=\"CDB-Shape-rectsHandleItem CDB-Shape-rectsHandleItem--grey is-second\"></div>\\n        <div class=\"CDB-Shape-rectsHandleItem CDB-Shape-rectsHandleItem--grey is-third\"></div>\\n      </div>\\n    </div>\\n  </div>\\n';\n } ;\n__p += '\\n<div class=\"Editor-ListLayer-itemHeader\">\\n  <div class=\"Editor-ListLayer-media u-rSpace--m js-thumbnail\" style=\"background: ' +\n__e( color ) +\n'; color: #fff\">\\n  </div>\\n  <div class=\"Editor-ListLayer-inner\">\\n    <div class=\"Editor-ListLayer-title\">\\n      <div class=\"Editor-ListLayer-titleText js-Editor-ListLayer-titleText js-header\">\\n        <h2 class=\"CDB-Text CDB-Size-large u-ellipsis\">\\n          ' +\n__e( title ) +\n'\\n        </h2>\\n      </div>\\n      <ul class=\"Editor-HeaderInfo-actions\">\\n        ';\n if (isTorque) { ;\n__p += '\\n          <li class=\"Editor-HeaderInfo-actionsItem u-rSpace\">\\n            ';\n if (isAnimated) { ;\n__p += '\\n              <svg class=\"js-torqueIcon\" width=\"19px\" height=\"8px\" viewBox=\"222 24 19 8\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" data-tooltip=\"' +\n__e( _t('editor.layers.layer.animated') ) +\n'\">\\n                <g id=\"Animated-Icon\" opacity=\"0.6\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(222.000000, 24.000000)\">\\n                  <rect id=\"Rectangle-649\" fill=\"#2E3C43\" x=\"11\" y=\"0\" width=\"8\" height=\"8\" rx=\"4\"></rect>\\n                  <rect id=\"Rectangle-649\" fill=\"#2E3C43\" opacity=\"0.5\" x=\"5\" y=\"0\" width=\"8\" height=\"8\" rx=\"4\"></rect>\\n                  <rect id=\"Rectangle-649\" fill=\"#2E3C43\" opacity=\"0.2\" x=\"0\" y=\"0\" width=\"8\" height=\"8\" rx=\"4\"></rect>\\n                </g>\\n              </svg>\\n            ';\n } else { ;\n__p += '\\n              <svg class=\"js-torqueIcon\" width=\"31px\" height=\"17px\" viewBox=\"563 512 31 17\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" data-tooltip=\"' +\n__e( _t('editor.layers.layer.heatmap') ) +\n'\">\\n                <g id=\"Group\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(563.000000, 512.000000)\">\\n                  <ellipse id=\"Oval-120\" fill=\"#E6E8E8\" transform=\"translate(27.020000, 12.197917) rotate(-90.000000) translate(-27.020000, -12.197917) \" cx=\"27.02\" cy=\"12.1979167\" rx=\"3.875\" ry=\"3.84\"></ellipse>\\n                  <path d=\"M26.93,13.0729167 C27.3442136,13.0729167 27.68,12.7371302 27.68,12.3229167 C27.68,11.9087031 27.3442136,11.5729167 26.93,11.5729167 C26.5157864,11.5729167 26.18,11.9087031 26.18,12.3229167 C26.18,12.7371302 26.5157864,13.0729167 26.93,13.0729167 Z\" id=\"Oval-120-Copy-2\" fill=\"#828A8F\" opacity=\"0.8\" transform=\"translate(26.930000, 12.322917) rotate(-90.000000) translate(-26.930000, -12.322917) \"></path>\\n                  <ellipse id=\"Oval-120\" fill=\"#E6E8E8\" transform=\"translate(8.140000, 8.000000) rotate(-90.000000) translate(-8.140000, -8.000000) \" cx=\"8.14\" cy=\"8\" rx=\"7.75\" ry=\"7.68\"></ellipse>\\n                  <path d=\"M7.96,10.75 C9.34071187,10.75 10.46,9.63071187 10.46,8.25 C10.46,6.86928813 9.34071187,5.75 7.96,5.75 C6.57928813,5.75 5.46,6.86928813 5.46,8.25 C5.46,9.63071187 6.57928813,10.75 7.96,10.75 Z\" id=\"Oval-120-Copy-2\" fill=\"#828A8F\" transform=\"translate(7.960000, 8.250000) rotate(-90.000000) translate(-7.960000, -8.250000) \"></path>\\n                  <path d=\"M15.1403347,6.71285923 C15.4606435,9.05621552 17.487459,10.8625 19.94,10.8625 C22.6151293,10.8625 24.78375,8.7134668 24.78375,6.0625 C24.78375,3.4115332 22.6151293,1.2625 19.94,1.2625 C17.2648707,1.2625 15.09625,3.4115332 15.09625,6.0625 C15.09625,6.28307774 15.1112641,6.50018043 15.1403347,6.71285923 Z\" id=\"Oval-120\" fill=\"#E6E8E8\" transform=\"translate(19.940000, 6.062500) rotate(-90.000000) translate(-19.940000, -6.062500) \"></path>\\n                  <path d=\"M20.64,7.90625 C21.4684271,7.90625 22.14,7.23467712 22.14,6.40625 C22.14,5.57782288 21.4684271,4.90625 20.64,4.90625 C19.8115729,4.90625 19.14,5.57782288 19.14,6.40625 C19.14,7.23467712 19.8115729,7.90625 20.64,7.90625 Z\" id=\"Oval-120-Copy-2\" fill=\"#828A8F\" opacity=\"0.8\" transform=\"translate(20.640000, 6.406250) rotate(-90.000000) translate(-20.640000, -6.406250) \"></path>\\n                  <path d=\"M13.5625,2.88 C13.5625,2.88 16.1458333,5.12 18.0833333,2.56 C17.4375,4.16 17.1145833,5.44 17.1145833,5.44 L16.46875,6.72 L14.2083333,4.8 L13.5625,2.88 Z\" id=\"Path-494\" fill=\"#E6E8E8\"></path>\\n                  <path d=\"M22.3894032,6.40571996 C22.3894032,6.40571996 24.9727365,8.64571996 26.9102365,6.08571996 C26.2644032,7.68571996 25.9414865,8.96571996 25.9414865,8.96571996 L25.2956532,10.24572 L23.0352365,8.32571996 L22.3894032,6.40571996 Z\" id=\"Path-494\" fill=\"#E6E8E8\" transform=\"translate(24.649820, 8.165720) rotate(52.000000) translate(-24.649820, -8.165720) \"></path>\\n                  <path d=\"M20.6462245,8.51753488 C20.6462245,8.51753488 23.9604656,11.3038091 25.8979656,8.74380905 C25.2521323,10.3438091 25.078218,11.598674 25.078218,11.598674 L24.4323847,12.878674 L21.1028976,9.87517984 L20.6462245,8.51753488 Z\" id=\"Path-494\" fill=\"#E6E8E8\" transform=\"translate(23.272095, 10.698104) rotate(-135.000000) translate(-23.272095, -10.698104) \"></path>\\n                  <path d=\"M18.2927779,9.85808612 C18.2927779,9.85808612 15.6067281,8.91370489 14.3461002,11.8663856 C14.5856745,10.1576712 14.5893391,8.83757209 14.5893391,8.83757209 L14.4253034,7.30493626 L14.7514729,5.70339822 L18.2927779,9.85808612\" id=\"Path-494\" fill=\"#E6E8E8\"></path>\\n                  <path d=\"\" id=\"Path-499\" stroke=\"#979797\" stroke-width=\"0.64\"></path>\\n                  <polygon id=\"Path-500\" fill=\"#828A8F\" points=\"9.94618849 9.56 11.6875 7.72609277 9.6875 6.56\"></polygon>\\n                </g>\\n              </svg>\\n            ';\n } ;\n__p += '\\n          </li>\\n        ';\n } ;\n__p += '\\n        <li class=\"Editor-HeaderInfo-actionsItem CDB-Shape\">\\n          ';\n if (hasGeom) { ;\n__p += '\\n            <button class=\"js-toggle\">\\n              ';\n if (isVisible) { ;\n__p += '\\n                <i class=\"CDB-IconFont CDB-IconFont-view u-actionTextColor\"></i>\\n              ';\n } else { ;\n__p += '\\n                <i class=\"CDB-IconFont CDB-IconFont-hide u-actionTextColor\"></i>\\n              ';\n } ;\n__p += '\\n            </button>\\n          ';\n } else if (brokenLayer) { ;\n__p += '\\n            <svg class=\"js-warningIcon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"12\" viewBox=\"0 0 14 12\" data-tooltip=\"' +\n__e( _t('editor.layers.georeference.visualize') ) +\n'\"><path fill=\"#FFB300\" fill-rule=\"evenodd\" d=\"M5.012 1.48C6.11-.444 7.887-.45 8.988 1.48l4.526 7.92c.82 1.436.15 2.6-1.523 2.6H2.01C.346 12-.333 10.83.485 9.4l4.526-7.92zM1.354 9.895C.917 10.66 1.116 11 2.01 11h9.98c.903 0 1.097-.333.656-1.104L8.12 1.976C7.404.72 6.596.722 5.88 1.975l-4.526 7.92zM6 9h2v1H6V9zm0-5h2v4H6V4z\"/></svg>\\n          ';\n } ;\n__p += '\\n        </li>\\n        ';\n if (isEmpty) { ;\n__p += '\\n          <li class=\"Editor-HeaderInfo-emptyLayer js-emptylayer\"></li>\\n        ';\n } ;\n__p += '\\n        <li class=\"Editor-HeaderInfo-actionsItem CDB-Shape\">\\n          <button class=\"CDB-Shape-threePoints is-blue is-small js-toggle-menu\">\\n            <div class=\"CDB-Shape-threePointsItem\"></div>\\n            <div class=\"CDB-Shape-threePointsItem\"></div>\\n            <div class=\"CDB-Shape-threePointsItem\"></div>\\n          </button>\\n        </li>\\n      </ul>\\n    </div>\\n      <div class=\"u-flex Editor-ListLayer-info js-analyses-widgets-info\">\\n        <span class=\"CDB-Text CDB-Size-small u-secondaryTextColor u-upperCase u-rSpace--m\">\\n          ' +\n__e( _t('editor.layers.layer.analyses-count', { smart_count: numberOfAnalyses }) ) +\n'\\n        </span>\\n        <span class=\"CDB-Text CDB-Size-small u-secondaryTextColor u-upperCase\">\\n          ' +\n__e( _t('editor.layers.layer.widgets-count', { smart_count: numberOfWidgets }) ) +\n'\\n        </span>\\n      </div>\\n  </div>\\n</div>\\n';\n // Show this for regular layers or ghost nodes ;\n__p += '\\n';\n if (hasGeom || brokenLayer || !needsGeocoding) { ;\n__p += '\\n  <ul class=\"Editor-ListAnalysis js-analyses ' +\n__e( isVisible ? '' : 'is-hidden' ) +\n'  ' +\n__e( isCollapsed ? 'is-collapsed' : '' ) +\n'\"></ul>\\n';\n } ;\n__p += '\\n';\n if (needsGeocoding) { ;\n__p += '\\n  <div class=\"u-tSpace--m\">\\n    <span class=\"CDB-Text CDB-Size-medium u-secondaryTextColor\">\\n      ' +\n__e( _t('editor.layers.layer.geocode-text') ) +\n'\\n    </span>\\n\\n    <div class=\"u-flex u-justifyEnd u-tSpace--m\">\\n      <button data-tooltip=\"' +\n__e( _t('editor.layers.layer.geocode-tooltip') ) +\n'\" class=\"CDB-Button CDB-Button--small CDB-Button--primary js-geocode\">\\n        <span class=\"CDB-Button-Text CDB-Text u-upperCase is-semibold CDB-Size-small\">' +\n__e( _t('editor.layers.layer.geocode') ) +\n'</span>\\n      </button>\\n    </div>\\n  </div>\\n';\n } ;\n__p += '\\n';\n\n}\nreturn __p\n}","var $ = require('jquery');\nvar DataLayerView = require('./data-layer-view');\nvar template = require('./data-layer.tpl');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar geometryNoneTemplate = require('./geometry-none.tpl');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\nvar defaultLayerAnalysisView = require('builder/editor/layers/analysis-views/default-layer-analysis-view.tpl');\nvar BROKEN_NODE_LAYER_COLOR = '#CCC';\n\nvar REQUIRED_OPTS = [\n  'userActions',\n  'layerDefinitionsCollection',\n  'modals',\n  'configModel',\n  'stateDefinitionModel',\n  'widgetDefinitionsCollection',\n  'visDefinitionModel',\n  'analysisDefinitionNodesCollection'\n];\n\nmodule.exports = DataLayerView.extend({\n\n  tagName: 'li',\n  className: 'Editor-ListLayer-item',\n\n  events: {\n    'click .js-toggle-menu': '_onToggleContextMenuClicked'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    var m = this.model;\n    var isTorque = m.isTorqueLayer();\n    var isAnimation = this.model.styleModel.isAnimation();\n\n    this.$el.html(template({\n      layerId: m.id,\n      title: m.getName(),\n      color: BROKEN_NODE_LAYER_COLOR,\n      isVisible: true,\n      isAnimated: isAnimation,\n      isTorque: isTorque,\n      hasError: false,\n      isCollapsed: false,\n      numberOfAnalyses: m.getNumberOfAnalyses(),\n      numberOfWidgets: this._widgetDefinitionsCollection.widgetsOwnedByLayer(m.id),\n      needsGeocoding: false,\n      hasGeom: false,\n      brokenLayer: true,\n      isEmpty: false\n    }));\n\n    this.$('.js-thumbnail').append(\n      geometryNoneTemplate({\n        letter: m.get('letter')\n      })\n    );\n\n    // Displaying errored node\n    var $nodeAnalysisItem = $('<li>').addClass('Editor-ListAnalysis-item Editor-ListAnalysis-layer');\n    $nodeAnalysisItem.append(\n      defaultLayerAnalysisView({\n        title: _t('editor.layers.errors.broken-node'),\n        id: this.model.get('source'),\n        bgColor: BROKEN_NODE_LAYER_COLOR,\n        isDone: true,\n        hasError: false\n      })\n    );\n    this.$('.js-analyses').append($nodeAnalysisItem);\n\n    this.$el.addClass('is-errored');\n    this.$el.removeClass('js-sortable-item');\n    this.$el.toggleClass('is-animated', isTorque);\n\n    var errorTooltip = new TipsyTooltipView({\n      el: this.$('.js-warningIcon'),\n      gravity: 's',\n      offset: 0,\n      title: function () {\n        return _t('editor.layers.errors.non-existent-node', { nodeId: this.model.get('source') });\n      }.bind(this)\n    });\n    this.addView(errorTooltip);\n\n    return this;\n  },\n\n  _getContextMenuOptions: function () {\n    return [{\n      label: _t('editor.layers.options.delete-and-reload'),\n      val: 'delete-layer',\n      action: function () {\n        this.listenTo(this.model, 'destroy', this._reloadApplication);\n\n        this._confirmDeleteLayer();\n      }.bind(this),\n      destructive: true\n    }];\n  },\n\n  _reloadApplication: function () {\n    window.location.reload();\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<p class=\"CDB-Text CDB-Size-large is-semibold u-upperCase\">' +\n__e( letter ) +\n' <svg width=\"12px\" height=\"12px\" viewBox=\"0 0 12 12\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n  <path d=\"M8.30379432,3.06016671 C8.11128812,2.75281724 8,2.38940498 8,2 C8,0.8954305 8.8954305,0 10,0 C11.1045695,0 12,0.8954305 12,2 C12,3.1045695 11.1045695,4 10,4 C9.70653076,4 9.42782451,3.93679216 9.17675238,3.82324762 L3.82324762,9.17675238 C3.93679216,9.42782451 4,9.70653076 4,10 C4,11.1045695 3.1045695,12 2,12 C0.8954305,12 0,11.1045695 0,10 C0,8.8954305 0.8954305,8 2,8 C2.38940498,8 2.75281724,8.11128812 3.06016671,8.30379432 L8.30379432,3.06016671 Z\" stroke=\"none\" fill=\"#FFFFFF\" fill-rule=\"evenodd\"></path>\\n</svg></p>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<p class=\"CDB-Text CDB-Size-large is-semibold u-upperCase\">' +\n__e( letter ) +\n'</p>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<p class=\"CDB-Text CDB-Size-large is-semibold u-upperCase\">' +\n__e( letter ) +\n' <svg width=\"12px\" height=\"12px\" viewBox=\"589 382 12 12\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n  <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(589.000000, 382.000000)\">\\n    <circle fill=\"#FFFFFF\" cx=\"2\" cy=\"2\" r=\"2\"></circle>\\n    <circle fill=\"#FFFFFF\" cx=\"2\" cy=\"10\" r=\"2\"></circle>\\n    <circle fill=\"#FFFFFF\" cx=\"10\" cy=\"10\" r=\"2\"></circle>\\n  </g>\\n</svg></p>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<p class=\"CDB-Text CDB-Size-large is-semibold u-upperCase\">' +\n__e( letter ) +\n' <svg width=\"12px\" height=\"12px\" viewBox=\"589 382 12 12\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n  <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(589.000000, 382.000000)\">\\n    <path d=\"M1,2 L1,2 L2,1 L2,11 L1,10 L11,10 L10,11 L10,1 L11,2 L1,2 Z M1,1 L11,1 L11,11 L1,11 L1,1 L1,1 Z\" id=\"Rectangle-2\" fill=\"#FFFFFF\"></path>\\n    <circle fill=\"#FFFFFF\" cx=\"2\" cy=\"2\" r=\"2\"></circle>\\n    <circle fill=\"#FFFFFF\" cx=\"10\" cy=\"2\" r=\"2\"></circle>\\n    <circle fill=\"#FFFFFF\" cx=\"2\" cy=\"10\" r=\"2\"></circle>\\n    <circle fill=\"#FFFFFF\" cx=\"10\" cy=\"10\" r=\"2\"></circle>\\n  </g>\\n</svg></p>';\n\n}\nreturn __p\n}","var BaseLayerViewBase = require('./base-layer-view-base');\nvar template = require('./image-thumbnail-layer.tpl');\n\nmodule.exports = BaseLayerViewBase.extend({\n  initialize: function (opts) {\n    BaseLayerViewBase.prototype.initialize.apply(this, arguments);\n\n    if (!opts.configModel) throw new Error('configModel is required');\n\n    this._configModel = opts.configModel;\n  },\n\n  _getCompiledTemplate: function () {\n    return template({\n      title: this._getTitle(),\n      desc: _t('editor.layers.gmaps.title-label'),\n      imgURL: this._getImageURL()\n    });\n  },\n\n  _getImageURL: function () {\n    var imageName = this.model.get('baseType');\n    if (this.model.get('baseName')) {\n      imageName = imageName + '_' + this.model.get('baseName');\n    }\n    var imageURL = [\n      this._configModel.get('app_assets_base_url'),\n      'unversioned/images/google-maps-basemap-icons',\n      imageName + '.jpg'\n    ].join('/');\n    return imageURL;\n  },\n\n  _getTitle: function () {\n    return this.model.get('name').replace('GMaps ', '');\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"BlockList-media u-rSpace--xl js-thumbnail\">\\n  <img src=\"' +\n__e( imgURL ) +\n'\" class=\"BlockList-mediaImg js-thumbnailImg\" />\\n</div>\\n<div class=\"BlockList-inner\">\\n  <h2 class=\"BlockList-titleText CDB-Text CDB-Size-medium u-ellipsis js-title\">' +\n__e( title ) +\n'</h2>\\n  <p class=\"CDB-Text CDB-Size-small u-secondaryTextColor u-upperCase\">' +\n__e( desc ) +\n'</p>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<h2 class=\"Inline-editor\">\\n  <div class=\"CDB-Text CDB-Size-large u-ellipsis js-title Inline-editor-text\">' +\n__e( title ) +\n'</div>\\n  <input type=\"text\" name=\"text\" class=\"Inline-editor-input Inline-editor-input--small CDB-Text CDB-InputText js-input\" value=\"' +\n__e( title ) +\n'\" readonly>\\n</h2>';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar template = require('./image-thumbnail-layer.tpl');\n\nmodule.exports = CoreView.extend({\n  module: 'editor:layers:layer-views:labels-layer-view',\n\n  tagName: 'li',\n\n  className: 'BlockList-item BlockList-item--noAction js-layer ui-state-disabled',\n\n  initialize: function (opts) {\n    this.listenTo(this.model, 'change', this.render);\n  },\n\n  render: function () {\n    var desc = _t('editor.layers.labels.title-label');\n    var title = this.model.getName() || desc;\n\n    this.$el.html(template({\n      title: title,\n      desc: title === desc ? '' : desc,\n      imgURL: this._getImageURL()\n    }));\n\n    return this;\n  },\n\n  _getImageURL: function () {\n    return this.model.get('urlTemplate')\n      .replace('{s}', 'a')\n      .replace('{z}', 6)\n      .replace('{x}', 30)\n      .replace('{y}', 24);\n  }\n});\n","var BaseLayerViewBase = require('./base-layer-view-base');\nvar template = require('./plain-color-layer.tpl');\n\nmodule.exports = BaseLayerViewBase.extend({\n  _getCompiledTemplate: function () {\n    var desc = _t('editor.layers.color.title-label');\n    var title = this.model.get('color') || desc;\n\n    return template({\n      title: title,\n      desc: title === desc ? '' : desc,\n      color: this.model.get('color')\n    });\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"BlockList-media u-rSpace--xl js-thumbnail\" style=\"background-color: ' +\n__e( color ) +\n'\">\\n</div>\\n<div class=\"BlockList-inner\">\\n  <h2 class=\"BlockList-titleText CDB-Text CDB-Size-medium u-ellipsis js-title\">' +\n__e( title ) +\n'</h2>\\n  <p class=\"CDB-Text CDB-Size-small u-secondaryTextColor u-upperCase\">' +\n__e( desc ) +\n'</p>\\n</div>\\n';\n\n}\nreturn __p\n}","require('jquery-ui');\nvar _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar Notifier = require('builder/components/notifier/notifier');\nvar template = require('./layers.tpl');\nvar LayerViewFactory = require('./layer-view-factory');\nvar IconView = require('builder/components/icon/icon-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\nvar AddLayerView = require('builder/components/modals/add-layer/add-layer-view');\nvar AddLayerModel = require('builder/components/modals/add-layer/add-layer-model');\n\nvar SORTABLE_SELECTOR = '.js-layers';\nvar SORTABLE_ITEMS_SELECTOR = '.js-layer.js-sortable-item';\n\nvar BASEMAPS_SELECTOR = '.js-basemaps';\n\nvar REQUIRED_OPTS = [\n  'analysisDefinitionNodesCollection',\n  'layerDefinitionsCollection',\n  'modals',\n  'userModel',\n  'configModel',\n  'pollingModel',\n  'editorModel',\n  'userActions',\n  'stateDefinitionModel',\n  'visDefinitionModel',\n  'widgetDefinitionsCollection',\n  'showMaxLayerError',\n  'onNotificationCloseAction'\n];\n\n/**\n * View to render layer definitions list\n */\nmodule.exports = CoreView.extend({\n\n  events: {\n    'click .js-add': '_addLayer'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._layerViewFactory = new LayerViewFactory({\n      userActions: this._userActions,\n      layerDefinitionsCollection: this._layerDefinitionsCollection,\n      analysisDefinitionNodesCollection: opts.analysisDefinitionNodesCollection,\n      modals: opts.modals,\n      configModel: opts.configModel,\n      sortableSelector: SORTABLE_SELECTOR,\n      stateDefinitionModel: this._stateDefinitionModel,\n      visDefinitionModel: this._visDefinitionModel,\n      widgetDefinitionsCollection: this._widgetDefinitionsCollection\n    });\n\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._layerDefinitionsCollection, 'add remove change:id', this.render);\n    this.listenTo(this._layerDefinitionsCollection, 'reset', this._updateAddButtonState);\n    this.listenTo(this._layerDefinitionsCollection, 'add', this._createNotification);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template);\n\n    _.each(this._layerDefinitionsCollection.toArray().reverse(), this._addLayerView, this);\n    this._initSortable();\n    this._updateAddButtonState();\n    this._initViews();\n\n    return this;\n  },\n\n  _initViews: function () {\n    var tooltip = new TipsyTooltipView({\n      el: this.$('.js-add'),\n      gravity: 'w',\n      title: function () {\n        return this._tooltipTitle;\n      }.bind(this),\n      offset: 8\n    });\n    this.addView(tooltip);\n\n    var plusIcon = new IconView({\n      placeholder: this.$el.find('.js-plus-icon'),\n      icon: 'plus'\n    });\n    plusIcon.render();\n    this.addView(plusIcon);\n  },\n\n  _addLayer: function () {\n    if (this.$('.js-add').hasClass('is-disabled')) return;\n\n    var self = this;\n    var modal = this._modals.create(function (modalModel) {\n      var addLayerModel = new AddLayerModel({}, {\n        userModel: self._userModel,\n        userActions: self._userActions,\n        configModel: self._configModel,\n        pollingModel: self._pollingModel\n      });\n\n      return new AddLayerView({\n        modalModel: modalModel,\n        configModel: self._configModel,\n        userModel: self._userModel,\n        createModel: addLayerModel,\n        pollingModel: self._pollingModel\n      });\n    });\n    modal.show();\n  },\n\n  _createNotification: function (layerDefinitionModel) {\n    var LAYER_ADDED_NOTIFICATION = 'layer-added';\n    var notification = Notifier.getNotification(LAYER_ADDED_NOTIFICATION);\n\n    var notificationAttrs = {\n      status: 'success',\n      info: _t('notifications.layer.added'),\n      closable: true,\n      delay: Notifier.DEFAULT_DELAY\n    };\n\n    if (notification) {\n      notification.set(notificationAttrs);\n    } else {\n      notification = Notifier.addNotification(_.extend(notificationAttrs, {\n        id: LAYER_ADDED_NOTIFICATION\n      }));\n    }\n\n    if (notification) {\n      notification.once('notification:close', this._onNotificationClose.bind(this));\n    }\n  },\n\n  _onNotificationClose: function () {\n    this._onNotificationCloseAction();\n  },\n\n  _addLayerView: function (model) {\n    if (this._layerViewFactory.isLabelsLayer(model)) {\n      return;\n    }\n\n    var view = this._layerViewFactory.createLayerView(model);\n    view.$el.data('layerId', model.id);\n    this.addView(view);\n    if (this._layerViewFactory.isBasemapLayer(model)) {\n      this.$(BASEMAPS_SELECTOR).append(view.render().el);\n    } else {\n      this.$(SORTABLE_SELECTOR).append(view.render().el);\n    }\n  },\n\n  _initSortable: function () {\n    this.$(SORTABLE_SELECTOR).sortable({\n      axis: 'y',\n      tolerance: 'pointer',\n      items: SORTABLE_ITEMS_SELECTOR,\n      placeholder: 'Editor-ListLayer-item Editor-ListLayer-item--placeholder',\n      containment: SORTABLE_SELECTOR,\n      forceHelperSize: true,\n      forcePlaceholderSize: true,\n      update: this._onSortableUpdate.bind(this)\n    });\n  },\n\n  _getDataLayerCount: function () {\n    return this._layerDefinitionsCollection.getNumberOfDataLayers();\n  },\n\n  _getMaxCount: function () {\n    return this._userModel.get('limits').max_layers;\n  },\n\n  _updateAddButtonState: function () {\n    var count = this._getDataLayerCount();\n    var max = this._getMaxCount();\n\n    if (count === max) {\n      this._disableAddButton();\n      this._tooltipTitle = _t('editor.layers.max-layers-infowindow.title');\n    } else {\n      this._enableAddButton();\n      this._tooltipTitle = _t('editor.layers.add-layer.tooltip');\n    }\n  },\n\n  _enableAddButton: function () {\n    this.$('.js-add').removeClass('is-disabled');\n  },\n\n  _disableAddButton: function () {\n    this.$('.js-add').addClass('is-disabled');\n  },\n\n  _onSortableUpdate: function (event, ui) {\n    var $draggedLayerElement = ui.item;\n    var numberOfLayers = this.$(SORTABLE_SELECTOR).children().length - 1; // -1: remove the non-added layer\n    var numberOfBasemaps = this.$(BASEMAPS_SELECTOR).children().length;\n    var newPosition = numberOfLayers + numberOfBasemaps - $draggedLayerElement.index();\n\n    var layerId = $draggedLayerElement.data('layerId');\n    if (layerId) {\n      var layerDefinitionModel = this._layerDefinitionsCollection.get(layerId);\n      this._userActions.moveLayer({\n        from: layerDefinitionModel.get('order'),\n        to: newPosition\n      });\n      return;\n    }\n\n    var analysisNodeId = $draggedLayerElement.data('analysis-node-id');\n    var fromLayerLetter = $draggedLayerElement.data('layer-letter');\n    if (analysisNodeId) {\n      try {\n        this._userActions.createLayerForAnalysisNode(analysisNodeId, fromLayerLetter, { at: newPosition });\n      } catch (err) {\n        if (/max/.test(err.message)) {\n          $draggedLayerElement.remove();\n          this._showMaxLayerError();\n        } else {\n          throw err; // unknown err, let it bubble up\n        }\n      }\n    }\n  },\n\n  _destroySortable: function () {\n    if (this.$(SORTABLE_SELECTOR).data('ui-sortable')) {\n      this.$(SORTABLE_SELECTOR).sortable('destroy');\n    }\n  },\n\n  clean: function () {\n    this._destroySortable();\n    CoreView.prototype.clean.apply(this);\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<button class=\"CDB-Button CDB-Button--dashed CDB-Button--wide CDB-Button-Text CDB-Text is-semibold CDB-Size-small u-upperCase u-bSpace--xl u-flex u-justifyCenter u-alignCenter js-add\">\\n  <span class=\"js-plus-icon u-flex u-justifyCenter u-alignCenter u-rSpace--m\"></span>\\n  ' +\n__e( _t('editor.layers.add-layer.label') ) +\n'\\n</button>\\n<ul class=\"Editor-ListLayer js-layers\"></ul>\\n<ul class=\"Editor-ListLayer js-basemaps\"></ul>\\n<div class=\"Editor-dropArea js-drop\"></div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar Messages = require('./notification-error-messages.json');\nvar Utils = require('builder/helpers/utils');\n\nvar CONTACT_LINK_TEMPLATE;\nvar SAMPLE_LINK_TEMPLATE;\n\nvar getBodyAttributes = function (errorType, layerDefModel) {\n  var bodyAttrs = {};\n  if (errorType === 'timeout') {\n    // if layerDefModel is defined, hen use html code\n    // this happens for notification, but not for tooltip errors where we don't want html\n    if (layerDefModel != null) {\n      CONTACT_LINK_TEMPLATE = _.template(\"<a href='mailto:<%- mail %>'><%- contact %></a>\")({\n        contact: _t('notifications.analysis.contact.label'),\n        mail: _t('notifications.analysis.contact.mail')\n      });\n\n      SAMPLE_LINK_TEMPLATE = _.template(\"<button class='js-add-analysis u-actionTextColor' data-layer-id='<%- layerId %>'><%- sample %></button>\")({\n        sample: _t('notifications.analysis.sample'),\n        layerId: layerDefModel && layerDefModel.get('id') || ''\n      });\n    } else {\n      CONTACT_LINK_TEMPLATE = _t('notifications.analysis.contact.label');\n      SAMPLE_LINK_TEMPLATE = _t('notifications.analysis.sample');\n    }\n\n    bodyAttrs = {\n      sample: SAMPLE_LINK_TEMPLATE,\n      contact: CONTACT_LINK_TEMPLATE\n    };\n  }\n\n  return bodyAttrs;\n};\n\nmodule.exports = {\n  extractErrorFromAnalysisNode: function (analysisNode, layerDefModel) {\n    var errorType = 'error';\n    var message = _t('notifications.analysis.failed', {\n      nodeId: analysisNode.get('id').toUpperCase()\n    });\n\n    var error = analysisNode.get('error');\n\n    if ((error && error.message) || analysisNode.get('error_message')) {\n      var errorMessage = (error && error.message) || analysisNode.get('error_message');\n      var extractedError = this.extractError(errorMessage, layerDefModel);\n      message += ': ' + extractedError.message;\n      errorType = extractedError.type;\n    }\n\n    return { message: message, type: errorType };\n  },\n\n  extractError: function (errorMessage, layerDefModel) {\n    var errorType;\n    var matched = false;\n    var message;\n\n    Messages.messages.some(function (m) {\n      var errorMessageType = m.replaceWith;\n      var regExp = new RegExp(m.match);\n      var match = errorMessage.match(regExp);\n      var body;\n\n      errorMessage = Utils.removeNewLines(errorMessage);\n\n      if (match) {\n        if (errorMessageType) {\n          body = _t('notifications.analysis.errors.' + errorMessageType, getBodyAttributes(errorMessageType, layerDefModel));\n          message = errorMessage.replace(regExp, body);\n        } else {\n          message = match[1];\n        }\n        matched = true;\n        errorType = m.errorType;\n      }\n\n      return matched;\n    });\n\n    return { message: message || errorMessage, type: errorType || 'error' };\n  }\n};\n","var Notifier = require('builder/components/notifier/notifier');\nvar errorParser = require('builder/helpers/error-parser');\n\nmodule.exports = function (opts) {\n  if (!opts.layerDefinitionModel) throw new Error('layerDefinitionModel is required');\n  if (!opts.userActions) throw new Error('userActions is required');\n\n  var layerDefinitionModel = opts.layerDefinitionModel;\n\n  var name = layerDefinitionModel.getName();\n  var notification = Notifier.addNotification({\n    status: 'loading',\n    info: _t('editor.layers.delete.loading', {name: name}),\n    closable: false\n  });\n\n  opts.userActions.deleteLayer(layerDefinitionModel.id)\n    .done(function () {\n      notification.set({\n        status: 'success',\n        info: _t('editor.layers.delete.success', {name: name}),\n        closable: true\n      });\n    })\n    .fail(function (e) {\n      notification.set({\n        status: 'error',\n        info: _t('editor.layers.delete.error', {name: name, error: errorParser(e)}),\n        closable: true\n      });\n    });\n};\n","var Notifier = require('builder/components/notifier/notifier');\nvar errorParser = require('builder/helpers/error-parser');\nvar utils = require('builder/helpers/utils');\n\nmodule.exports = function (opts) {\n  if (!opts.userActions) throw new Error('userActions is required');\n  if (!opts.layerDefinitionModel) throw new Error('layerDefinitionModel is required');\n  if (!opts.layerDefinitionsCollection) throw new Error('layerDefinitionsCollection is required');\n  if (!opts.newName) throw new Error('newName is required');\n\n  var layerDefinitionModel = opts.layerDefinitionModel;\n  var successCallback = opts.onSuccess;\n  var errorCallback = opts.onError;\n  var newName = opts.newName;\n  var oldName = layerDefinitionModel.getName();\n\n  var notification = Notifier.addNotification({\n    status: 'loading',\n    info: _t('editor.layers.rename.loading'),\n    closable: false\n  });\n\n  layerDefinitionModel.set('table_name_alias', newName);\n\n  opts.userActions.saveLayer(layerDefinitionModel)\n    .done(function () {\n      successCallback && successCallback(newName);\n      notification.set({\n        status: 'success',\n        info: _t('editor.layers.rename.success', {name: utils.escapeHTML(newName)}),\n        closable: true\n      });\n    })\n    .fail(function (e) {\n      errorCallback && errorCallback(oldName);\n      notification.set({\n        status: 'error',\n        info: _t('editor.layers.rename.error', {name: utils.escapeHTML(oldName), error: errorParser(e)}),\n        closable: true\n      });\n    });\n};\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"FormPlaceholder-paragraph u-tSpace-m u-flex\">\\n  <div class=\"FormPlaceholder-paragraphLoader\">\\n    <div class=\"CDB-Loader is-visible\"></div>\\n  </div>\\n</div>\\n\\n<div class=\"FormPlaceholder-paragraph u-tSpace-m u-flex\">\\n  <div class=\"FormPlaceholder-step u-rSpace--m\"></div>\\n  <div class=\"FormPlaceholder-inner\">\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--med u-tSpace--m\"></span>\\n  </div>\\n</div>\\n<div class=\"FormPlaceholder-paragraph u-flex\">\\n  <div class=\"FormPlaceholder-step u-rSpace--m\"></div>\\n  <div class=\"FormPlaceholder-inner\">\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--med u-tSpace--m\"></span>\\n    <span class=\"FormPlaceholder-label FormPlaceholder-size--short u-tSpace-xl\"></span>\\n    <ul class=\"FormPlaceholder-carousel u-flex FormPlaceholder-size--long\">\\n      <li class=\"FormPlaceholder-carouselItem\"></li>\\n      <li class=\"FormPlaceholder-carouselItem\"></li>\\n      <li class=\"FormPlaceholder-carouselItem\"></li>\\n    </ul>\\n  </div>\\n</div>\\n<div class=\"FormPlaceholder-paragraph u-flex\">\\n  <div class=\"FormPlaceholder-step u-rSpace--m\"></div>\\n  <div class=\"FormPlaceholder-inner\">\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--short u-tSpace--m\"></span>\\n    <span class=\"FormPlaceholder-label FormPlaceholder-size--med u-tSpace-xl\"></span>\\n    <ul class=\"FormPlaceholder-fields\">\\n      <li class=\"FormPlaceholder-fieldsItem u-flex u-justifySpace\">\\n        <span class=\"FormPlaceholder-label FormPlaceholder-size--short\"></span>\\n        <span class=\"FormPlaceholder-input FormPlaceholder-size--med\"></span>\\n      </li>\\n      <li class=\"FormPlaceholder-fieldsItem u-flex u-justifySpace\">\\n        <span class=\"FormPlaceholder-label FormPlaceholder-size--shorter\"></span>\\n        <span class=\"FormPlaceholder-input FormPlaceholder-size--med\"></span>\\n      </li>\\n    </ul>\\n  </div>\\n</div>\\n<div class=\"FormPlaceholder-paragraph u-flex\">\\n  <div class=\"FormPlaceholder-step u-rSpace--m\"></div>\\n  <div class=\"FormPlaceholder-inner\">\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--short u-tSpace--m\"></span>\\n    <span class=\"FormPlaceholder-label FormPlaceholder-size--med u-tSpace-xl\"></span>\\n    <ul class=\"FormPlaceholder-fields\">\\n      <li class=\"FormPlaceholder-fieldsItem u-flex u-justifySpace\">\\n        <span class=\"FormPlaceholder-label FormPlaceholder-size--short\"></span>\\n        <span class=\"FormPlaceholder-input FormPlaceholder-size--med\"></span>\\n      </li>\\n      <li class=\"FormPlaceholder-fieldsItem u-flex u-justifySpace\">\\n        <span class=\"FormPlaceholder-label FormPlaceholder-size--shorter\"></span>\\n        <span class=\"FormPlaceholder-input FormPlaceholder-size--med\"></span>\\n      </li>\\n      <li class=\"FormPlaceholder-fieldsItem u-flex u-justifySpace\">\\n        <span class=\"FormPlaceholder-label FormPlaceholder-size--shorter\"></span>\\n        <span class=\"FormPlaceholder-input FormPlaceholder-size--med\"></span>\\n      </li>\\n      <li class=\"FormPlaceholder-fieldsItem u-flex u-justifySpace\">\\n        <span class=\"FormPlaceholder-label FormPlaceholder-size--short\"></span>\\n        <span class=\"FormPlaceholder-input FormPlaceholder-size--med\"></span>\\n      </li>\\n      <li class=\"FormPlaceholder-fieldsItem u-flex u-justifySpace\">\\n        <span class=\"FormPlaceholder-label FormPlaceholder-size--short\"></span>\\n        <span class=\"FormPlaceholder-input FormPlaceholder-size--med\"></span>\\n      </li>\\n    </ul>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n\n if (hasChanges) { ;\n__p += '\\n<span class=\"CDB-Text CDB-Size-small u-rSpace--m u-altTextColor\">' +\n__e( _t('editor.unpublished-changes') ) +\n'</span>\\n';\n } ;\n__p += '\\n<button class=\"CDB-Button CDB-Button--primary js-button\">\\n  <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-small u-upperCase\">' +\n__e( _t('editor.button_publish') ) +\n'</span>\\n</button>\\n';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar template = require('./publish-button.tpl');\nvar _ = require('underscore');\n\nvar REQUIRED_OPTS = [\n  'onClickAction',\n  'visDefinitionModel'\n];\n\nmodule.exports = CoreView.extend({\n\n  events: {\n    'click .js-button': '_clickHandler'\n  },\n\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (!opts[item]) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template({\n      hasChanges: this._visDefinitionModel.get('visChanges') > 0\n    }));\n    return this;\n  },\n\n  _initBinds: function () {\n    this._visDefinitionModel.on('change:visChanges', this.render, this);\n    this.add_related_model(this._visDefinitionModel);\n  },\n\n  _clickHandler: function () {\n    this._onClickAction && this._onClickAction();\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<button class=\\'CDB-Text u-actionTextColor js-fix-sql\\'>' +\n__e( label ) +\n'</button>';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar template = require('./sync-info.tpl');\nvar moment = require('moment');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\nvar SyncOptionsModalView = require('builder/components/modals/sync-options/sync-options-modal-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'modals',\n  'syncModel',\n  'tableModel',\n  'userModel'\n];\n\nmodule.exports = CoreView.extend({\n\n  className: 'SyncInfo SyncInfo--separator',\n\n  events: {\n    'click .js-options': '_openSyncOptions'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n  },\n\n  render: function () {\n    var runAt = this._syncModel.get('run_at');\n\n    var d = {\n      canSyncNow: this._syncModel.canSyncNow(),\n      fromExternalSource: this._syncModel.get('from_external_source'),\n      ranAt: moment(this._syncModel.get('ran_at') || new Date()).fromNow(),\n      runAt: moment(runAt).fromNow(),\n      state: this._syncModel.get('state'),\n      errorCode: this._syncModel.get('error_code'),\n      errorMessage: this._syncModel.get('error_message'),\n      isOwner: this._tableModel.isOwner(this._userModel)\n    };\n\n    // Due to the time we need to polling, we have to display to the user\n    // that the sync will be in a moment\n    if (!runAt || (new Date(runAt) <= new Date())) {\n      d.runAt = _t('dataset.sync.in-a-moment');\n    }\n\n    this.$el.html(template(d));\n\n    if (d.errorCode || d.errorMessage) {\n      var tooltip = new TipsyTooltipView({\n        el: this.$('.js-tooltip'),\n        title: function () {\n          return _t('dataset.sync.error-code', { errorCode: d.errorCode }) + ':' + d.errorMessage;\n        }\n      });\n      this.addView(tooltip);\n    }\n\n    return this;\n  },\n\n  _openSyncOptions: function () {\n    var self = this;\n    this._modals.create(function (modalModel) {\n      return new SyncOptionsModalView({\n        syncModel: self._syncModel,\n        modalModel: modalModel,\n        tableName: self._tableModel.getUnquotedName()\n      });\n    });\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"u-flex u-alignCenter u-justifySpace\">\\n  <div class=\"u-flex u-alignCenter CDB-Text CDB-Size-small u-altTextColor SyncInfo-message--' +\n__e( state ) +\n' js-state\">\\n    <i class=\"CDB-IconFont CDB-IconFont-wifi\"></i>\\n    <p class=\"u-upperCase is-semibold u-lSpace\">\\n      ';\n if (errorCode || errorMessage) { ;\n__p += '\\n        ' +\n__e( _t('dataset.sync.sync-failed') ) +\n'\\n      ';\n } else { ;\n__p += '\\n        ' +\n__e( ranAt ) +\n'\\n      ';\n } ;\n__p += '\\n    </p>\\n  </div>\\n  ';\n if (isOwner) { ;\n__p += '\\n    <button class=\"CDB-Text CDB-Size-small u-upperCase js-options SyncInfo-viewOptions\">' +\n__e( _t('dataset.sync.view-options') ) +\n'</button>\\n  ';\n } ;\n__p += '\\n</div>\\n';\n\n}\nreturn __p\n}","var Notifier = require('builder/components/notifier/notifier');\nvar errorParser = require('builder/helpers/error-parser');\n\nmodule.exports = function (opts) {\n  if (!opts.visDefinitionModel) throw new Error('visDefinitionModel is required');\n\n  var visDefinitionModel = opts.visDefinitionModel;\n  var successCallback = opts.onSuccess;\n  var errorCallback = opts.onError;\n  var name = visDefinitionModel.get('name');\n\n  visDefinitionModel.destroy({\n    wait: true,\n    success: function (mdl, attrs) {\n      successCallback && successCallback(mdl, attrs);\n    },\n    error: function (mdl, e) {\n      errorCallback && errorCallback(mdl, e);\n      Notifier.addNotification({\n        status: 'error',\n        info: _t('editor.maps.delete.error', {name: name, error: errorParser(e)}),\n        closable: true\n      });\n    }\n  });\n};\n","var Notifier = require('builder/components/notifier/notifier');\nvar errorParser = require('builder/helpers/error-parser');\nvar utils = require('builder/helpers/utils');\n\nvar TITLE_SUFIX = require('builder/components/modals/visualization-title-suffix-metadata');\n\nmodule.exports = function (opts) {\n  if (!opts.visDefinitionModel) throw new Error('visDefinitionModel is required');\n  if (!opts.newName) throw new Error('newName is required');\n\n  var visDefinitionModel = opts.visDefinitionModel;\n  var successCallback = opts.onSuccess;\n  var errorCallback = opts.onError;\n  var newName = opts.newName;\n  var oldName = visDefinitionModel.get('name');\n\n  var notification = Notifier.addNotification({\n    status: 'loading',\n    info: _t('editor.maps.rename.loading'),\n    closable: false\n  });\n\n  visDefinitionModel.save({\n    name: newName\n  }, {\n    wait: true,\n    success: function (mdl, e) {\n      successCallback && successCallback(newName);\n      document.title = newName + TITLE_SUFIX;\n      notification.set({\n        status: 'success',\n        info: _t('editor.maps.rename.success', {name: utils.escapeHTML(newName)}),\n        closable: true\n      });\n    },\n    error: function (mdl, e) {\n      errorCallback && errorCallback(oldName);\n      notification.set({\n        status: 'error',\n        info: _t('editor.maps.rename.error', {name: utils.escapeHTML(oldName), error: errorParser(e)}),\n        closable: true\n      });\n    }\n  });\n};\n","var cdb = require('internal-carto.js');\n\nvar ongoingQuery = false;\n\nvar zoomToData = function (configModel, stateModel, query) {\n  if (!configModel) throw new Error('configModel is required');\n  if (!stateModel) throw new Error('stateModel is required');\n  if (!query) throw new Error('query is required');\n\n  var queryLauncher = new cdb.SQL({\n    user: configModel.get('user_name'),\n    sql_api_template: configModel.get('sql_api_template'),\n    api_key: configModel.get('api_key')\n  });\n\n  if (!ongoingQuery) {\n    ongoingQuery = true;\n\n    queryLauncher.getBounds(query)\n      .done(function (bounds) {\n        ongoingQuery = false;\n\n        stateModel.setBounds(bounds);\n      })\n      .error(function () {\n        ongoingQuery = false;\n      });\n  }\n};\n\nmodule.exports = zoomToData;\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"Editor-formInner CDB-Text CDB-Size-small u-upperCase ';\n if (disabled) { ;\n__p += 'u-altTextColor';\n } ;\n__p += ' u-upperCase\">\\n  <div class=\"u-flex u-alignCenter\">\\n    <div class=\"u-iBlock u-rSpace--m\">\\n      <input id=\"' +\n__e( id ) +\n'\" class=\"CDB-Checkbox js-input\" type=\"checkbox\" name=\"\" value=\"\" ';\n if (checked) { ;\n__p += 'checked';\n } ;\n__p += ' ';\n if (disabled) { ;\n__p += 'disabled';\n } ;\n__p += '>\\n      <span class=\"u-iBlock CDB-Checkbox-face\"></span>\\n    </div>\\n    <label for=\"' +\n__e( id ) +\n'\" class=\"';\n if (help) { ;\n__p += ' js-help is-underlined';\n } ;\n__p += '\" ';\n if (help) { ;\n__p += ' data-tooltip=\"' +\n__e( help ) +\n'\"';\n } ;\n__p += ' >' +\n__e( title ) +\n'</label>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"FormPlaceholder-paragraph u-tSpace-m u-flex\">\\n  <div class=\"FormPlaceholder-step u-rSpace--m\"></div>\\n  <div class=\"FormPlaceholder-inner\">\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--long u-bSpace\"></span>\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--med u-bSpace--xl\"></span>\\n\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--med\"></span>\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--med u-bSpace--m\"></span>\\n\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--med\"></span>\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--med u-bSpace--m\"></span>\\n\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--med\"></span>\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--med u-bSpace--m\"></span>\\n\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--med\"></span>\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--med u-bSpace--m\"></span>\\n\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--med\"></span>\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--med u-bSpace--m\"></span>\\n\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--med\"></span>\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--med u-bSpace--m\"></span>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar enablerTemplate = require('./enabler.tpl');\nrequire('builder/components/form-components/index');\n\nvar REQUIRED_OPTS = [\n  'model'\n];\n\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (!opts[item]) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n\n    // For enabler compatibility\n    this.model.set(this.model.get('setting'), this.model.get('enabler'), {silent: true});\n  },\n\n  render: function () {\n    this.$el.empty();\n    this._initViews();\n    return this;\n  },\n\n  _initViews: function () {\n    this._enablerView = new Backbone.Form.editors.Enabler({\n      template: enablerTemplate,\n      model: this.model,\n      inputId: this.cid,\n      title: this.model.get('label'),\n      disabled: this.model.get('disabled'),\n      help: '',\n      key: this.model.get('setting')\n    });\n\n    this.$el.append(this._enablerView.render().$el);\n  }\n});\n","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar OptionsItemView = require('./preview-options-item-view');\nvar template = require('./preview-options.tpl');\nvar templateNotReady = require('./options-not-ready.tpl');\n\nvar REQUIRED_OPTS = [\n  'mapDefinitionModel',\n  'settingsCollection',\n  'overlaysCollection'\n];\n\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (!opts[item]) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    if (!this._overlaysCollection.hasFetched()) {\n      this.$el.html(templateNotReady());\n    } else {\n      this.$el.html(template());\n      this._initViews();\n    }\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this._settingsCollection.on('change', this._onChangeOptions, this);\n    this.add_related_model(this._settingsCollection);\n  },\n\n  _onChangeOptions: function (m) {\n    var handler = m.get('related');\n    var property = m.get('setting');\n    var value = m.get('enabler');\n\n    if (handler === 'overlays') {\n      this._overlayHandler(property, value);\n    }\n\n    if (handler === 'map') {\n      this._mapHandler(property, value);\n    }\n  },\n\n  _initViews: function () {\n    this._settingsCollection.each(this._renderSetting, this);\n  },\n\n  _renderSetting: function (model) {\n    const hidden = model.get('hidden');\n    if (hidden) {\n      return;\n    }\n\n    const view = new OptionsItemView({\n      model: model\n    });\n\n    this.$('.js-settings').append(view.render().$el);\n    this.addView(view);\n  },\n\n  _overlayHandler: function (property, value) {\n    if (value === false) {\n      this._overlaysCollection.removeOverlay(property);\n    } else {\n      this._overlaysCollection.createOverlay(property);\n    }\n  },\n\n  _mapHandler: function (property, value) {\n    var payload = {};\n    payload[property] = value;\n    this._mapDefinitionModel.set(payload);\n    this._mapDefinitionModel.save();\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"Editor-HeaderInfo\">\\n  <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">1</div>\\n  <div class=\"Editor-HeaderInfo-inner CDB-Text\">\\n    <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n      <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.settings.preview.options.title') ) +\n'</h2>\\n    </div>\\n    <p class=\"CDB-Text u-upperCase CDB-Size-small u-altTextColor u-bSpace--xl\">' +\n__e( _t('editor.settings.preview.options.subtitle') ) +\n'</p>\\n    <div class=\"u-flex u-justifySpace\">\\n      <div class=\"js-settings Options-form\"></div>\\n    </div>\\n\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar OptionsView = require('./preview-options-view');\n\nvar REQUIRED_OPTS = [\n  'mapDefinitionModel',\n  'settingsCollection',\n  'overlaysCollection'\n];\n\nmodule.exports = CoreView.extend({\n\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (!opts[item]) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._renderOptions();\n    return this;\n  },\n\n  _renderOptions: function () {\n    var view = new OptionsView({\n      mapDefinitionModel: this._mapDefinitionModel,\n      settingsCollection: this._settingsCollection,\n      overlaysCollection: this._overlaysCollection\n    });\n\n    this.$el.append(view.render().el);\n    this.addView(view);\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar CodeMirrorView = require('builder/components/code-mirror/code-mirror-view');\nvar FactoryHints = require('builder/editor/editor-hints/factory-hints');\nvar CSSHints = require('builder/editor/editor-hints/css-hints');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'layerDefinitionModel',\n  'styleModel',\n  'codemirrorModel',\n  'editorModel',\n  'querySchemaModel',\n  'onApplyEvent',\n  'overlayModel'\n];\n\nmodule.exports = CoreView.extend({\n  module: 'editor:style:style-cartocss-view',\n\n  className: 'Editor-styleContentCartoCSS Editor-content',\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._initBinds();\n\n    FactoryHints.init({\n      querySchemaModel: this._querySchemaModel,\n      layerDefinitionModel: this._layerDefinitionModel,\n      tokens: CSSHints\n    });\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    this._initViews();\n    this._toggleOverlay();\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._layerDefinitionModel, 'change:cartocss', this._updateEditorContent);\n    this.listenTo(this._overlayModel, 'change:visible', this._toggleOverlay);\n  },\n\n  _initViews: function () {\n    var hints = FactoryHints.reset().hints;\n    this.codeMirrorView = new CodeMirrorView({\n      model: this._codemirrorModel,\n      addons: ['color-picker'],\n      hints: hints,\n      tips: [\n        _t('editor.style.code-mirror.save')\n      ]\n    });\n    this.codeMirrorView.bind('codeSaved', this._triggerCodeSaved, this);\n    this.addView(this.codeMirrorView);\n    this.$el.append(this.codeMirrorView.render().el);\n  },\n\n  _toggleOverlay: function () {\n    var isDisabled = this._overlayModel.get('visible');\n    this.$el.toggleClass('is-disabled', isDisabled);\n  },\n\n  _updateEditorContent: function () {\n    if (this._editorModel.get('edition') === false) {\n      this.codeMirrorView.setContent(this._layerDefinitionModel.get('cartocss'));\n    }\n  },\n\n  _triggerCodeSaved: function (code, view) {\n    this._onApplyEvent && this._onApplyEvent();\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<h2 class=\"CDB-Text CDB-Size-huge is-light u-secondaryTextColor\">\\n  ' +\n((__t = ( body )) == null ? '' : __t) +\n'\\n</h2>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\n\nvar StyleFormView = require('./style-form/style-form-view');\nvar StylesFactory = require('./styles-factory');\nvar CarouselFormView = require('builder/components/carousel-form-view');\nvar CarouselCollection = require('builder/components/custom-carousel/custom-carousel-collection');\nvar Notifier = require('builder/components/notifier/notifier');\nvar MetricsTracker = require('builder/components/metrics/metrics-tracker');\nvar MetricsTypes = require('builder/components/metrics/metrics-types');\n\nvar StyleConstants = require('builder/components/form-components/_constants/_style');\n\nvar styleSQLErrorTemplate = require('./style-content-sql-error.tpl');\nvar actionErrorTemplate = require('builder/editor/layers/sql-error-action.tpl');\nvar layerTabMessageTemplate = require('builder/editor/layers/layer-tab-message.tpl');\n\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar EXTRA_STYLE_PROPERTIES = [\n  'fillSize',\n  'fillColor',\n  'strokeSize',\n  'strokeColor'\n];\n\nvar EXTRA_LABELS_STYLE_PROPERTIES = [\n  'fillSize',\n  'fillColor',\n  'haloSize',\n  'haloColor'\n];\n\nvar REQUIRED_OPTS = [\n  'configModel',\n  'layerDefinitionsCollection',\n  'userModel',\n  'layerDefinitionModel',\n  'userActions',\n  'styleModel',\n  'overlayModel',\n  'queryGeometryModel',\n  'querySchemaModel',\n  'freezeTorgeAggregation',\n  'editorModel',\n  'modals',\n  'layerContentModel'\n];\n\nmodule.exports = CoreView.extend({\n  module: 'editor/style/style-content-view',\n\n  className: 'Editor-styleContent',\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._initViewState();\n    this._buildAggregationCarouselCollection();\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    if (this._isErrored()) {\n      this._renderError();\n    } else if (this._viewState.get('isDataFiltered')) {\n      this._renderFilteredData();\n    } else {\n      this._initViews();\n    }\n\n    this._toggleOverlay();\n    return this;\n  },\n\n  _initViewState: function () {\n    this._viewState = new Backbone.Model({\n      isDataFiltered: false\n    });\n\n    this._setViewValues();\n  },\n\n  _buildAggregationCarouselCollection: function () {\n    if (this._carouselCollection) {\n      this.stopListening(this._carouselCollection, 'change:selected');\n    }\n    this._carouselCollection = new CarouselCollection(\n      _.map(StylesFactory.getStyleTypes(this._styleModel.get('type'), this._queryGeometryModel.get('simple_geom')), function (type) {\n        return {\n          selected: this._styleModel.get('type') === type.value,\n          val: type.value,\n          label: type.label,\n          template: function () {\n            return (type.iconTemplate && type.iconTemplate()) || type.value;\n          },\n          tooltip: type.tooltip\n        };\n      }, this)\n    );\n    this.listenTo(this._carouselCollection, 'change:selected', this._onSelectAggregation);\n\n    return this._carouselCollection;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._layerDefinitionModel, 'change:autoStyle', this._onAutoStyleChanged);\n    this.listenTo(this._layerDefinitionModel, 'change', this._onStyleChanged);\n    this.listenTo(this._styleModel, 'change:fill', this._onStyleChanged);\n    this.listenTo(this._styleModel, 'change:labels', this._onStyleLabelChanged);\n    this.listenTo(this._styleModel, 'undo redo', this.render);\n    this.listenTo(this._layerContentModel, 'change:state', this._setViewValues);\n    this.listenTo(this._layerContentModel, 'change:state', this._checkEditorModel);\n    this.listenTo(this._overlayModel, 'change:visible', this._toggleOverlay);\n    this.listenTo(this._viewState, 'change:isDataFiltered', this.render);\n  },\n\n  _initViews: function () {\n    if (this._queryGeometryModel.get('simple_geom') === 'point') {\n      this._renderCarousel();\n    }\n\n    this._renderForm();\n  },\n\n  _toggleOverlay: function () {\n    var isDisabled = this._overlayModel.get('visible');\n    this.$el.toggleClass('is-disabled', isDisabled);\n  },\n\n  _isErrored: function () {\n    return this._layerContentModel.isErrored();\n  },\n\n  _onAutoStyleChanged: function (layerDefModel) {\n    var isAutoStyleApplied = layerDefModel.get('autoStyle');\n\n    if (!isAutoStyleApplied) {\n      this.render();\n    } else {\n      this._styleModel.unbind('change', this._onStyleChanged, this);\n      this._styleModel.once('change', function () {\n        this.render();\n        this._styleModel.bind('change', this._onStyleChanged, this);\n      }, this);\n    }\n  },\n\n  _checkEditorModel: function () {\n    this._queryGeometryModel.hasValueAsync()\n      .then(function (hasGeometry) {\n        this._editorModel.set({ disabled: this._isErrored() || !hasGeometry });\n      }.bind(this));\n  },\n\n  _renderError: function () {\n    this.$el.append(\n      styleSQLErrorTemplate({\n        body: _t('editor.error-query.body', {\n          action: actionErrorTemplate({\n            label: _t('editor.error-query.label')\n          })\n        })\n      })\n    );\n  },\n\n  _renderFilteredData: function () {\n    this.$el.append(\n      layerTabMessageTemplate({\n        message: _t('editor.layers.warnings.no-data.message'),\n        action: _t('editor.layers.warnings.no-data.action-message')\n      })\n    );\n  },\n\n  _renderCarousel: function () {\n    var view = new CarouselFormView({\n      collection: this._buildAggregationCarouselCollection(),\n      template: require('./style-form-types.tpl')\n    });\n    this.addView(view);\n    this.$el.append(view.render().el);\n  },\n\n  _onSelectAggregation: function (model) {\n    var alreadyTorqueLayer = this._layerDefinitionsCollection.isThereAnyTorqueLayer();\n    var isTorqueLayer = this._layerDefinitionModel.get('type') === 'torque';\n\n    var styleType;\n    var isTorqueType;\n    var currentGeometryType;\n\n    if (model.get('selected')) {\n      styleType = model.getValue();\n      currentGeometryType = this._queryGeometryModel.get('simple_geom');\n\n      isTorqueType = (styleType === StyleConstants.Type.HEATMAP || styleType === StyleConstants.Type.ANIMATION);\n\n      if (alreadyTorqueLayer && !isTorqueLayer && isTorqueType) {\n        this._freezeTorgeAggregation(styleType, currentGeometryType);\n      } else {\n        // If an animated or a heatmap style is selected, we should move the layer to the\n        // top, but if it is in the most high position, we shouldn't do anything\n        if (isTorqueType && !this._layerDefinitionsCollection.isDataLayerOnTop(this._layerDefinitionModel)) {\n          this._moveTorqueLayerToTop(function () {\n            this._setDefaultProperties(styleType, currentGeometryType);\n          }.bind(this));\n        } else {\n          this._setDefaultProperties(styleType, currentGeometryType, false /* silently */);\n        }\n      }\n    }\n  },\n\n  _setDefaultProperties: function (styleType, currentGeometryType, silently) {\n    var previousType = this._styleModel.get('type');\n    this._styleModel.setDefaultPropertiesByType(styleType, currentGeometryType, silently);\n\n    MetricsTracker.track(MetricsTypes.AGGREGATED_GEOMETRIES, {\n      previous_agg_type: previousType,\n      agg_type: styleType\n    });\n  },\n\n  _moveTorqueLayerToTop: function (callback) {\n    var notification = Notifier.addNotification({\n      status: 'loading',\n      info: _t('editor.layers.moveTorqueLayer.loading'),\n      closable: true\n    });\n\n    this._layerDefinitionsCollection.once('layerMoved', function () {\n      if (callback) { callback(); }\n\n      notification.set({\n        status: 'success',\n        info: _t('editor.layers.moveTorqueLayer.success'),\n        delay: Notifier.DEFAULT_DELAY\n      });\n    }, this);\n\n    this._userActions.moveLayer({\n      from: this._layerDefinitionModel.get('order'),\n      to: this._layerDefinitionsCollection.getTopDataLayerIndex()\n    });\n  },\n\n  _renderForm: function () {\n    if (this._querySchemaModel.get('query')) {\n      var view = new StyleFormView({\n        layerDefinitionsCollection: this._layerDefinitionsCollection,\n        layerDefinitionModel: this._layerDefinitionModel,\n        styleModel: this._styleModel,\n        configModel: this._configModel,\n        userModel: this._userModel,\n        queryGeometryModel: this._queryGeometryModel,\n        querySchemaModel: this._querySchemaModel,\n        modals: this._modals\n      });\n      this.$el.append(view.render().el);\n      this.addView(view);\n    }\n  },\n\n  _onStyleChanged: function () {\n    this._styleModel.set('autogenerated', false);\n    this._unsetExtraStyleProperties();\n    this._layerDefinitionModel.save();\n\n    MetricsTracker.track(MetricsTypes.MODIFIED_STYLE_FORM, {\n      layer_id: this._layerDefinitionModel.get('id'),\n      cartocss: this._layerDefinitionModel.get('cartocss'),\n      style_properties: this._layerDefinitionModel.get('style_properties')\n    });\n  },\n\n  _unsetExtraStyleProperties: function () {\n    EXTRA_STYLE_PROPERTIES.forEach(function (property) {\n      this._styleModel.unset(property, { silent: true });\n    }.bind(this));\n  },\n\n  _onStyleLabelChanged: function () {\n    var labels = this._styleModel.get('labels');\n\n    EXTRA_LABELS_STYLE_PROPERTIES.forEach(function (property) {\n      delete labels[property];\n    });\n\n    this._styleModel.set('labels', labels, { silent: true });\n  },\n\n  _setViewValues: function () {\n    this._layerDefinitionModel.isDataFiltered()\n      .then(function (isDataFiltered) {\n        this._viewState.set('isDataFiltered', isDataFiltered);\n      }.bind(this));\n  }\n});\n","var _ = require('underscore');\nvar camshaftReference = require('builder/data/camshaft-reference');\nvar Utils = require('builder/helpers/utils');\nvar InputQualitativeRamps = require('builder/components/input-color/input-qualitative-ramps/main-view.js');\n\nvar CONFIG = {\n  GENERIC_STYLE: camshaftReference.getDefaultCartoCSSForType(),\n  DEFAULT_HEATMAP_COLORS: ['blue', 'cyan', 'lightgreen', 'yellow', 'orange', 'red']\n};\n\n// utilities\nfunction _null () { return ''; }\n\nfunction makeCartoCSS (obj, prefix) {\n  var css = '';\n  prefix = prefix || '';\n  for (var k in obj) {\n    css += prefix + k + ': ' + obj[k] + ';\\n';\n  }\n  return css;\n}\n\nfunction makeColorRamp (props, isTorqueCategory) {\n  var attribute = isTorqueCategory ? 'value' : props.attribute;\n  var c = ['ramp([' + attribute + ']'];\n\n  if (props.range) {\n    if (_.isArray(props.range)) {\n      c.push('(' + props.range.join(', ') + ')');\n    } else {\n      // colorramp name\n      c.push(props.range);\n      if (props.bins) {\n        c.push(props.bins);\n      }\n    }\n  }\n  if (props.domain) {\n    if (isTorqueCategory) {\n      c.push('(' + _.map(props.domain, function (val, i) {\n        return i + 1;\n      }).join(', ') + ')');\n    } else if (props.static) {\n      // It comes from an autostyle, so we have to set the categories explicitly\n      var parsedDomain = _.filter(props.domain, function (name) {\n        return name !== '\"Other\"';\n      });\n      c.push('(' + parsedDomain.join(', ') + ')');\n    } else {\n      c.push('(' +\n        _.filter(\n          _.map(props.domain, function (val, i) {\n            // Maps api converts null or empty value in empty string\n            // and in the fill component we label them with a locale\n            // so we use the same locale to generate the cartocss\n            return val === '' ? _t('form-components.editors.fill.input-qualitative-ramps.null') : val;\n          }),\n          function (val) {\n            return !_.isUndefined(val);\n          }).join(', ') +\n        ')'\n      );\n      c.push('\"=\"');\n    }\n  }\n  if (props.quantification) {\n    c.push(props.quantification.toLowerCase());\n  }\n\n  if (isTorqueCategory) {\n    c.push('\"=\"');\n  }\n\n  return c.join(', ') + ')';\n}\n\nfunction makeWidthRamp (props) {\n  var c = ['ramp([' + props.attribute + ']'];\n\n  if (props.range) {\n    var min = props.range[0];\n    var max = props.range[1];\n\n    c.push('range(' + min + ', ' + max + ')');\n  }\n\n  if (props.quantification) {\n    var quantification = props.quantification.toLowerCase();\n\n    if (props.bins) {\n      c.push(quantification + '(' + props.bins + ')');\n    } else {\n      c.push(quantification);\n    }\n  }\n\n  return c.join(', ') + ')';\n}\n\n// size\nfunction pointSize (props) {\n  var css = {};\n  if (props.fixed !== undefined) {\n    css['marker-width'] = props.fixed;\n  } else if (props.attribute) {\n    css['marker-width'] = makeWidthRamp(props);\n  } else {\n    // throw new Error('size should contain a fixed value or an attribute')\n  }\n  return css;\n}\n\nfunction blending (b, geometryType, animatedType) {\n  var css = {};\n  var property = geometryType + '-comp-op';\n  if (b !== 'none' && b !== undefined && animatedType !== 'heatmap') {\n    if (animatedType === 'simple') {\n      property = 'comp-op';\n    }\n    css[property] = b;\n  }\n  return css;\n}\n\n// fill\nfunction pointFill (props, animationType) {\n  var css = {};\n  var color = props && props.color || {};\n  var isTorqueCategory = animationType && !color.fixed;\n  var markerFillOpacity = color.opacity;\n\n  if (props.size) {\n    css = pointSize(props.size);\n  }\n  if (color) {\n    if (color.fixed !== undefined) {\n      css['marker-fill'] = color.fixed;\n    } else if (color.attribute) {\n      css['marker-fill'] = makeColorRamp(color, isTorqueCategory);\n    }\n    if (color.operation) {\n      css['marker-comp-op'] = color.operation;\n    }\n\n    css['marker-fill-opacity'] = markerFillOpacity != null ? markerFillOpacity : 1;\n\n    if (hasImagesSelected(props.images) || hasImagesSelected(color.images)) {\n      css['marker-file'] = markerFill(props.images || color.images, color);\n    } else if (props.image || color.image) {\n      var url = props.image;\n\n      if (color.image) {\n        url = 'url(\\'' + color.image + '\\')';\n      }\n\n      css['marker-file'] = url;\n    }\n  }\n  if (!animationType) {\n    css['marker-allow-overlap'] = true;\n  }\n  return css;\n}\n\nfunction hasImagesSelected (images) {\n  if (!images) return false;\n  if (!_.isArray(images)) return false;\n\n  return _.some(images, function (image) {\n    return image !== '';\n  });\n}\n\nfunction getFalsyCategory (category) {\n  var DEFAULT_CATEGORY = \"''\";\n  if (_isInvalidCategory(category)) return DEFAULT_CATEGORY;\n\n  return category\n    ? category === 0 ? '0' : DEFAULT_CATEGORY\n    : category;\n}\n\nfunction markerFill (images, color) {\n  if (!_.isArray(images) || !color || !color.attribute) {\n    return;\n  }\n\n  var columnName = '[' + color.attribute + ']';\n  var filesUrls = [];\n  var categoryNames = [];\n\n  _.each(images, function (image, index) {\n    if (image !== '') {\n      var urlFormat = 'url(\\'' + image + '\\')';\n      filesUrls.push(urlFormat);\n      if (!_.isUndefined(color.domain[index])) {\n        var category = color.domain[index] || getFalsyCategory(color.domain[index]);\n        categoryNames.push(category);\n      }\n    }\n  });\n\n  return 'ramp(' + columnName + ', (' + filesUrls.join(', ') + '), (' + categoryNames.join(', ') + '), \"=\"' + ')';\n}\n\nfunction polygonFill (props) {\n  var css = {};\n  if (props.color) {\n    if (props.color.fixed !== undefined) {\n      css['polygon-fill'] = props.color.fixed;\n    } else if (props.color.attribute) {\n      css['polygon-fill'] = makeColorRamp(props.color);\n    }\n    if (props.color.operation) {\n      css['polygon-comp-op'] = props.color.operation;\n    }\n    if (_.isNumber(props.color.opacity)) {\n      css['polygon-opacity'] = props.color.opacity;\n    }\n  }\n\n  return css;\n}\n\n// stroke\nfunction pointStroke (props, animationType) {\n  var css = {};\n\n  if (animationType === 'heatmap') {\n    return css;\n  }\n\n  if (props.size) {\n    css['marker-line-width'] = props.size.fixed;\n  }\n  if (props.color) {\n    if (props.color.fixed !== undefined) {\n      css['marker-line-color'] = props.color.fixed;\n    } else if (props.color.attribute) {\n      css['marker-line-color'] = makeColorRamp(props.color);\n    }\n    if (_.isNumber(props.color.opacity)) {\n      css['marker-line-opacity'] = props.color.opacity;\n    }\n  }\n  return css;\n}\n\nfunction polygonStroke (props) {\n  var css = {};\n  if (props.size) {\n    if (props.size.fixed !== undefined) {\n      css['line-width'] = props.size.fixed;\n    } else if (props.size.attribute) {\n      css['line-width'] = makeWidthRamp(props.size);\n    }\n  }\n  if (props.color) {\n    if (props.color.fixed) {\n      css['line-color'] = props.color.fixed;\n    } else if (props.color.attribute) {\n      css['line-color'] = makeColorRamp(props.color);\n    }\n    if (_.isNumber(props.color.opacity)) {\n      css['line-opacity'] = props.color.opacity;\n    }\n  }\n  return css;\n}\n\nfunction isValidAttribute (attr) {\n  return attr && attr !== '';\n}\n\nfunction pointAnimated (props) {\n  var css = {};\n  if (isValidAttribute(props.attribute)) {\n    css['-torque-frame-count'] = props.steps;\n    css['-torque-animation-duration'] = props.duration;\n    css['-torque-time-attribute'] = '\"' + props.attribute + '\"';\n    if (props.isCategory) {\n      css['-torque-aggregation-function'] = '\"CDB_Math_Mode(value)\"';\n    } else {\n      css['-torque-aggregation-function'] = '\"count(1)\"';\n    }\n    css['-torque-resolution'] = props.resolution;\n    css['-torque-data-aggregation'] = props.overlap ? 'cumulative' : 'linear';\n  }\n  return css;\n}\n\nfunction _labels (props) {\n  var css = {};\n  if (isValidAttribute(props.attribute)) {\n    css['text-name'] = '[' + props.attribute + ']';\n    css['text-face-name'] = \"'\" + props.font + \"'\";\n    if (props.fill) {\n      css['text-size'] = props.fill.size.fixed;\n\n      if (props.fill.color.opacity != null && props.fill.color.opacity < 1) {\n        css['text-fill'] = Utils.hexToRGBA(props.fill.color.fixed, props.fill.color.opacity);\n      } else {\n        css['text-fill'] = props.fill.color.fixed;\n      }\n    }\n    css['text-label-position-tolerance'] = 0;\n    if (props.halo) {\n      css['text-halo-radius'] = props.halo.size.fixed;\n\n      if (props.halo.color.opacity != null && props.halo.color.opacity < 1) {\n        css['text-halo-fill'] = Utils.hexToRGBA(props.halo.color.fixed, props.halo.color.opacity);\n      } else {\n        css['text-halo-fill'] = props.halo.color.fixed;\n      }\n    }\n    css['text-dy'] = props.offset === undefined ? -10 : props.offset;\n    css['text-allow-overlap'] = props.overlap === undefined ? true : props.overlap;\n    css['text-placement'] = props.placement;\n    css['text-placement-type'] = 'dummy';\n  }\n  return css;\n}\n\nfunction imageFilters (props) {\n  var css = {};\n  if (props.ramp) {\n    css['image-filters'] = 'colorize-alpha(' + props.ramp.join(',') + ')';\n  }\n  return css;\n}\n\nvar cartocssFactory = {\n  animated: {\n    point: pointAnimated,\n    line: _null,\n    polygon: _null\n  },\n\n  trails: {\n    point: trails,\n    line: _null,\n    polygon: _null\n  },\n\n  fill: {\n    point: pointFill,\n    line: _null,\n    polygon: polygonFill\n  },\n\n  stroke: {\n    point: pointStroke,\n    line: polygonStroke,\n    polygon: polygonStroke\n  },\n\n  labels: {\n    point: _labels,\n    line: _labels,\n    polygon: _labels\n  },\n\n  imageFilters: {\n    point: imageFilters,\n    line: imageFilters,\n    polygon: imageFilters\n  },\n\n  blending: {\n    point: function (attrs, animationType) { return blending(attrs, 'marker', animationType); },\n    line: function (attrs) { return blending(attrs, 'line'); },\n    polygon: function (attrs) { return blending(attrs, 'polygon'); }\n  }\n};\n\nvar heatmapConversion = function (style, animated, configModel) {\n  // modify the size\n  style.fill = _.clone(style.fill);\n  var ramp = style.fill.color.range;\n  style.fill.size = style.fill.size || { fixed: 35 };\n\n  style.fill.image = 'url(' + configModel.get('app_assets_base_url') + '/unversioned/images/alphamarker.png)';\n\n  style.fill.color = {\n    fixed: style.fill.color.fixed || 'white',\n    opacity: style.fill.color.opacity\n  };\n\n  // switch to torque\n  // add image filters\n  if (ramp !== undefined) {\n    style.imageFilters = {\n      ramp: _.isArray(ramp) ? ramp : CONFIG.DEFAULT_HEATMAP_COLORS\n    };\n  }\n  return style;\n};\n\nvar styleConversion = {\n  animation: function (style, configModel) {\n    if (style.style === 'heatmap') {\n      return heatmapConversion(style, true, configModel);\n    }\n  },\n\n  heatmap: function (style, configModel) {\n    return heatmapConversion(style, false, configModel);\n  }\n};\n\nfunction renderBlock (block, geometryType, animationType) {\n  var css = {};\n  for (var k in block) {\n    var f = cartocssFactory[k];\n    if (f) {\n      css = _.extend(css, f[geometryType](block[k], animationType));\n    }\n  }\n  return makeCartoCSS(css, '  ');\n}\n\nfunction isTypeTorque (type) {\n  return type === 'animation' || type === 'heatmap';\n}\n\nfunction isCategoryType (styleDef, geometryType) {\n  if (geometryType === 'line') {\n    var stroke = styleDef.stroke;\n    return stroke && stroke.color && stroke.color.fixed == null;\n  }\n  var fill = styleDef.fill;\n  return fill && fill.color && fill.color.fixed == null;\n}\n\nfunction generateCartoCSS (style, geometryType, configModel) {\n  var css = '';\n  var styleDef = style.properties;\n  var isAnimatable = isTypeTorque(style.type);\n  var isCategory = isCategoryType(styleDef, geometryType);\n  var animationType = style.type === 'animation' && styleDef.style;\n\n  // Animated map 'controls'\n  if (geometryType === 'point' && isAnimatable) {\n    css += 'Map {\\n';\n    css += renderBlock({\n      animated: _.extend({}, styleDef.animated, { isCategory: isCategory })\n    }, geometryType);\n    css += '}\\n';\n  }\n\n  // Main styles\n  var omittedStyleAttrs = ['animated', 'labels'];\n  if (geometryType === 'polygon') {\n    omittedStyleAttrs.push('stroke');\n  }\n  css += '#layer {\\n';\n  css += renderBlock(_.omit(styleDef, omittedStyleAttrs), geometryType, animationType);\n  css += '}';\n\n  // Outline (stroke for polygons) #12412\n  if (styleDef.stroke && geometryType === 'polygon') {\n    css += '\\n#layer::outline {\\n';\n    css += renderBlock({ stroke: styleDef.stroke }, geometryType);\n    css += '}';\n  }\n\n  // Labels\n  if (styleDef.labels && styleDef.labels.enabled && styleDef.labels.enabled !== 'false') {\n    css += '\\n#layer::labels {\\n';\n    css += renderBlock({ labels: styleDef.labels }, geometryType);\n    css += '}';\n  }\n\n  // Animated Map trails\n  if (isAnimatable && styleDef.animated.trails && styleDef.animated.trails > 0) {\n    css += cartocssFactory.trails[geometryType](styleDef);\n  }\n\n  return css;\n}\n\nfunction trails (def) {\n  var baseWidth = def.fill.size && parseInt(def.fill.size.fixed, 10);\n  var baseOpacity = def.fill.color.opacity != null ? def.fill.color.opacity : 1;\n  if (!baseWidth) return '';\n  return '\\n' +\n    _.range(1, parseInt(def.animated.trails, 10) + 1)\n      .map(function (t) {\n        return '#layer[frame-offset=' + t + '] {\\n' +\n          makeCartoCSS({ 'marker-width': baseWidth + 2 * t }, '  ') +\n          makeCartoCSS({ 'marker-fill-opacity': baseOpacity / (2 * t) }, '  ') +\n          '}';\n      }\n      ).join('\\n');\n}\n\nfunction aggToSQL (agg) {\n  if (agg.operator.toLowerCase() === 'count') {\n    return 'count(1)';\n  }\n  return agg.operator + '(' + agg.attribute + ')';\n}\n\nfunction regionTableMap (level) {\n  var map = {\n    'countries': 'aggregation.agg_admin0',\n    'provinces': 'aggregation.agg_admin1'\n  };\n  return map[level];\n}\n\nfunction hexabins (style, mapContext) {\n  var aggregation = style.properties.aggregation;\n  var sql = 'WITH hgrid AS (SELECT CDB_HexagonGrid(ST_Expand(!bbox!, CDB_XYZ_Resolution(<%= z %>) * <%= size %>), CDB_XYZ_Resolution(<%= z %>) * <%= size %>) as cell) SELECT hgrid.cell as the_geom_webmercator, <%= agg %> as agg_value, count(1)/power( <%= size %> * CDB_XYZ_Resolution(<%= z %>), 2 ) as agg_value_density, row_number() over () as cartodb_id FROM hgrid, <%= table %> i where ST_Intersects(i.the_geom_webmercator, hgrid.cell) GROUP BY hgrid.cell';\n  return _.template(sql)({\n    table: '(<%= sql %>)',\n    size: aggregation.size,\n    agg: aggToSQL(aggregation.value),\n    z: mapContext.zoom\n  });\n}\n\nfunction squares (style, mapContext) {\n  var aggregation = style.properties.aggregation;\n  var sql = 'WITH hgrid AS (SELECT CDB_RectangleGrid ( ST_Expand(!bbox!, CDB_XYZ_Resolution(<%= z %>) * <%= size %>), CDB_XYZ_Resolution(<%= z %>) * <%= size %>, CDB_XYZ_Resolution(<%= z %>) * <%= size %>) as cell) SELECT hgrid.cell as the_geom_webmercator, <%= agg %> as agg_value, <%= agg %> /power( <%= size %> * CDB_XYZ_Resolution(<%= z %>), 2 ) as agg_value_density, row_number() over () as cartodb_id FROM hgrid, <%= table %> i where ST_Intersects(i.the_geom_webmercator, hgrid.cell) GROUP BY hgrid.cell';\n  return _.template(sql)({\n    table: '(<%= sql %>)',\n    size: aggregation.size,\n    agg: aggToSQL(aggregation.value),\n    z: mapContext.zoom\n  });\n}\n\nfunction regions (style) {\n  var aggregation = style.properties.aggregation;\n  // TODO: add !bbox! tokens to help postgres with FDW join\n  // I tested this on postgres 9.6, the planner seems to be doing weird, it takes\n  // 7 seconds to query a simple tile with no join, I hope 9.5 works much better\n  // Maybe using a CTE with the FDW table improves the thing\n  // Normalize also by area using the real area (not projected one). Using the_geom_webmercator for that instead of the_geom\n  // to avoid extra data going through the network in the FDW\n  // use 2.6e-06 as minimum area (tile size at zoom level 31)\n  var sql = [\n    'SELECT _poly.*, _merge.points_agg/GREATEST(0.0000026, ST_Area((ST_Transform(the_geom, 4326))::geography)) as agg_value_density, _merge.points_agg as agg_value FROM <%= aggr_dataset %> _poly, lateral (',\n    'SELECT <%= agg %> points_agg FROM (<%= table %>) _point where ST_Contains(_poly.the_geom_webmercator, _point.the_geom_webmercator) ) _merge'].join('\\n');\n  return _.template(sql)({\n    table: '<%= sql %>',\n    aggr_dataset: regionTableMap(aggregation.dataset),\n    agg: aggToSQL(aggregation.value)\n  });\n}\n\nfunction animation (style, mapContext) {\n  var color = style.properties.fill.color;\n  var columnType = color.attribute_type;\n  var columnName = color.attribute;\n  var hasOthers = color.range && color.range.length > InputQualitativeRamps.MAX_VALUES;\n  var categoryCount = color.domain && color.domain.length;\n\n  var s = ['select *, (CASE'];\n\n  if (color.fixed != null || color.domain == null) {\n    return null;\n  }\n\n  function _normalizeValue (v) {\n    return v.replace(/\\n/g, '\\\\n').replace(/\\\"/g, '\\\\\"').replace(/'/g, \"''\");\n  }\n\n  for (var i = 0, l = categoryCount; i < l; i++) {\n    var categoryName = color.domain[i];\n    var categoryPos = i + 1;\n    var value;\n\n    if (columnType !== 'string' || categoryName === null) {\n      value = categoryName;\n    } else {\n      value = \"'\" + _normalizeValue(categoryName.replace(/(^\")|(\"$)/g, '')) + \"'\";\n    }\n\n    if (value != null) {\n      s.push('WHEN \"' + columnName + '\" = ' + value + ' THEN ' + categoryPos);\n    } else {\n      s.push('WHEN \"' + columnName + '\" is NULL THEN ' + categoryPos);\n    }\n  }\n\n  if (hasOthers) {\n    s.push(' ELSE ' + (categoryCount + 1));\n  }\n\n  s.push(' END) as value FROM (<%= sql %>) __wrapped');\n  return s.join(' ');\n}\n\nvar SQLFactory = {\n  hexabins: hexabins,\n  squares: squares,\n  regions: regions,\n  animation: animation\n};\n\nfunction generateSQL (style, geometryType, mapContext) {\n  if (SQLFactory[style.type] === undefined) {\n    return null;\n  }\n\n  if (style.type !== 'animation' && style.properties.aggregation === undefined) {\n    throw new Error('aggregation properties not available');\n  }\n\n  var fn = SQLFactory[style.type];\n  if (fn === undefined) {\n    throw new Error(\"can't generate SQL for aggregation \" + style.type);\n  }\n  return fn(style, mapContext);\n}\n\nvar AggregatedFactory = {\n  simple: {\n    geometryType: {\n      point: 'point',\n      line: 'line',\n      polygon: 'polygon'\n    }\n  },\n  hexabins: {\n    geometryType: {\n      point: 'polygon',\n      line: null,\n      polygon: null\n    }\n  },\n  squares: {\n    geometryType: {\n      point: 'polygon',\n      line: null,\n      polygon: null\n    }\n  },\n  regions: {\n    geometryType: {\n      point: 'polygon',\n      line: null,\n      polygon: null\n    }\n  }\n};\n\n/**\n * given a styleDefinition object and the geometry type generates the query wrapper and the\n */\nfunction generateStyle (style, geometryType, mapContext, configModel) {\n  if (style.type === 'none') {\n    return {\n      cartoCSS: CONFIG.GENERIC_STYLE,\n      sql: null,\n      layerType: 'CartoDB'\n    };\n  }\n\n  if (style.type !== 'simple' && geometryType !== 'point') {\n    throw new Error('aggregated styling does not work with ' + geometryType);\n  }\n\n  // pre style conversion\n  // some styles need some conversion, for example aggregated based on\n  // torque need to move from aggregation to animated properties\n  var conversion = styleConversion[style.type];\n  var properties;\n  if (conversion) {\n    properties = conversion(style.properties, configModel);\n    if (properties) {\n      style.properties = properties;\n    }\n  }\n\n  // override geometryType for aggregated styles\n  var geometryMapping = AggregatedFactory[style.type];\n  if (geometryMapping) {\n    geometryType = geometryMapping.geometryType[geometryType];\n  }\n\n  if (!geometryType) {\n    throw new Error('geometry type not supported for ' + style.type);\n  }\n\n  var layerType = style.type === 'heatmap' || style.type === 'animation' ? 'torque' : 'CartoDB';\n\n  return {\n    cartoCSS: generateCartoCSS(style, geometryType, configModel),\n    sql: generateSQL(style, geometryType, mapContext),\n    layerType: layerType\n  };\n}\n\nfunction _isInvalidCategory (category) {\n  return category.length === 0 || typeof category === 'undefined';\n}\n\nmodule.exports = {\n  configure: function (cfg) {\n    _.extend(CONFIG, cfg);\n  },\n  generateStyle: generateStyle,\n  GENERIC_STYLE: CONFIG.GENERIC_STYLE\n};\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"Editor-HeaderInfo\">\\n  <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">1</div>\\n  <div class=\"Editor-HeaderInfo-inner CDB-Text js-selector\">\\n    <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n      <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.style.style-form.type.title-label') ) +\n'</h2>\\n    </div>\\n    <p class=\"CDB-Text u-upperCase CDB-FontSize-small u-altTextColor u-bSpace--m js-highlight\">' +\n__e( name ) +\n'</p>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<h2 class=\"CDB-Text CDB-Size-huge is-light u-secondaryTextColor\">\\n  ' +\n__e( _t('editor.style.messages.none') ) +\n'\\n</h2>\\n';\n\n}\nreturn __p\n}","var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nrequire('builder/components/form-components/index');\nvar StyleShapeFormModel = require('./style-aggregation-properties-form-model');\nvar template = require('./style-aggregation-form.tpl');\n\nmodule.exports = CoreView.extend({\n  module: 'editor/style/style-form/style-aggregation-form/style-aggregation-form-view',\n\n  initialize: function (opts) {\n    if (!opts.querySchemaModel) throw new Error('querySchemaModel is required');\n    if (!opts.queryGeometryModel) throw new Error('queryGeometryModel is required');\n    if (!opts.styleModel) throw new Error('styleModel is required');\n    if (!opts.modals) throw new Error('modals is required');\n    if (!opts.configModel) throw new Error('configModel is required');\n    if (!opts.userModel) throw new Error('userModel is required');\n\n    this._queryGeometryModel = opts.queryGeometryModel;\n    this._querySchemaModel = opts.querySchemaModel;\n    this._styleModel = opts.styleModel;\n    this._configModel = opts.configModel;\n    this._userModel = opts.userModel;\n    this._modals = opts.modals;\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this._removeFormView();\n    this.$el.html(template());\n    this._initViews();\n    return this;\n  },\n\n  _initViews: function () {\n    this._aggrFormModel = new StyleShapeFormModel(\n      this._styleModel.get('aggregation'),\n      {\n        queryGeometryModel: this._queryGeometryModel,\n        querySchemaModel: this._querySchemaModel,\n        styleModel: this._styleModel,\n        configModel: this._configModel,\n        userModel: this._userModel,\n        modals: this._modals\n      }\n    );\n\n    this._aggrFormView = new Backbone.Form({\n      model: this._aggrFormModel\n    });\n\n    this._aggrFormView.bind('change', function () {\n      this.commit();\n    });\n\n    this.$('.js-aggregationForm').append(this._aggrFormView.render().el);\n  },\n\n  _removeFormView: function () {\n    if (this._aggrFormView) {\n      this._aggrFormView.remove();\n    }\n  },\n\n  clean: function () {\n    this._removeFormView();\n    CoreView.prototype.clean.call(this);\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"Editor-HeaderInfo js-aggregationOptions\">\\n  <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">2</div>\\n  <div class=\"Editor-HeaderInfo-inner CDB-Text js-selector\">\\n    <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n      <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.style.style-form.aggregation.title-label') ) +\n'</h2>\\n    </div>\\n    <p class=\"CDB-Text u-upperCase CDB-FontSize-small u-altTextColor u-bSpace--m js-highlight\">' +\n__e( _t('editor.style.style-form.aggregation.desc') ) +\n'</p>\\n    <div class=\"js-aggregationForm\"></div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar StyleFormDefaultModel = require('builder/editor/style/style-form/style-form-default-model');\n\nmodule.exports = StyleFormDefaultModel.extend({\n\n  _FORM_NAME: 'aggregation',\n\n  _onChange: function () {\n    this._styleModel.set('aggregation', _.clone(this.attributes));\n  }\n\n});\n","var StyleFormAggregationDataset = require('builder/editor/style/style-form/style-form-dictionary/aggregation-dataset');\nvar StyleFormAggregationSize = require('builder/editor/style/style-form/style-form-dictionary/aggregation-size');\nvar StyleFormAggregationValue = require('builder/editor/style/style-form/style-form-dictionary/aggregation-value');\n\nvar StyleFormAnimatedAttribute = require('builder/editor/style/style-form/style-form-dictionary/animated-attribute');\nvar StyleFormAnimatedDuration = require('builder/editor/style/style-form/style-form-dictionary/animated-duration');\nvar StyleFormAnimatedOverlap = require('builder/editor/style/style-form/style-form-dictionary/animated-overlap');\nvar StyleFormAnimatedResolution = require('builder/editor/style/style-form/style-form-dictionary/animated-resolution');\nvar StyleFormAnimatedSteps = require('builder/editor/style/style-form/style-form-dictionary/animated-steps');\nvar StyleFormAnimatedTrails = require('builder/editor/style/style-form/style-form-dictionary/animated-trails');\n\nvar StyleFormBlending = require('builder/editor/style/style-form/style-form-dictionary/blending');\n\nvar StyleFormFillColor = require('builder/editor/style/style-form/style-form-dictionary/fill-color');\nvar StyleFormFillSize = require('builder/editor/style/style-form/style-form-dictionary/fill-size');\n\nvar StyleFormLabelsAttribute = require('builder/editor/style/style-form/style-form-dictionary/labels-attribute');\nvar StyleFormLabelsFillSize = require('builder/editor/style/style-form/style-form-dictionary/labels-fill-size');\nvar StyleFormLabelsFillColor = require('builder/editor/style/style-form/style-form-dictionary/labels-fill-color');\nvar StyleFormLabelsFont = require('builder/editor/style/style-form/style-form-dictionary/labels-font');\nvar StyleFormLabelsHaloSize = require('builder/editor/style/style-form/style-form-dictionary/labels-halo-size');\nvar StyleFormLabelsHaloColor = require('builder/editor/style/style-form/style-form-dictionary/labels-halo-color');\nvar StyleFormLabelsOffset = require('builder/editor/style/style-form/style-form-dictionary/labels-offset');\nvar StyleFormLabelsOverlap = require('builder/editor/style/style-form/style-form-dictionary/labels-overlap');\nvar StyleFormLabelsPlacement = require('builder/editor/style/style-form/style-form-dictionary/labels-placement');\n\nvar StyleFormStrokeSize = require('builder/editor/style/style-form/style-form-dictionary/stroke-size');\nvar StyleFormStrokeColor = require('builder/editor/style/style-form/style-form-dictionary/stroke-color');\n\nvar StyleFormStyle = require('builder/editor/style/style-form/style-form-dictionary/style');\nvar StyleFormHidden = require('builder/editor/style/style-form/style-form-dictionary/hidden');\n\n/*\n *  Dictionary that contains all the necessary components\n *  for the styles form\n */\n\nmodule.exports = {\n  'aggregation-dataset': function (params) {\n    return StyleFormAggregationDataset.generate(params);\n  },\n  'aggregation-size': function (params) {\n    return StyleFormAggregationSize.generate(params);\n  },\n  'aggregation-value': function (params) {\n    return StyleFormAggregationValue.generate(params);\n  },\n  'animated-attribute': function (params) {\n    return StyleFormAnimatedAttribute.generate(params);\n  },\n  'animated-enabled': function (params) {\n    return StyleFormHidden.generate(params);\n  },\n  'animated-duration': function (params) {\n    return StyleFormAnimatedDuration.generate(params);\n  },\n  'animated-overlap': function (params) {\n    return StyleFormAnimatedOverlap.generate(params);\n  },\n  'animated-resolution': function (params) {\n    return StyleFormAnimatedResolution.generate(params);\n  },\n  'animated-steps': function (params) {\n    return StyleFormAnimatedSteps.generate(params);\n  },\n  'animated-trails': function (params) {\n    return StyleFormAnimatedTrails.generate(params);\n  },\n\n  'blending': function (params) {\n    return StyleFormBlending.generate(params);\n  },\n\n  'fillSize': function (params) {\n    return StyleFormFillSize.generate(params);\n  },\n  'fillColor': function (params) {\n    return StyleFormFillColor.generate(params);\n  },\n\n  'labels-enabled': function (params) {\n    return StyleFormHidden.generate(params);\n  },\n  'labels-attribute': function (params) {\n    return StyleFormLabelsAttribute.generate(params);\n  },\n  'labels-fillSize': function (params) {\n    return StyleFormLabelsFillSize.generate(params);\n  },\n  'labels-fillColor': function (params) {\n    return StyleFormLabelsFillColor.generate(params);\n  },\n  'labels-font': function (params) {\n    return StyleFormLabelsFont.generate(params);\n  },\n  'labels-haloSize': function (params) {\n    return StyleFormLabelsHaloSize.generate(params);\n  },\n  'labels-haloColor': function (params) {\n    return StyleFormLabelsHaloColor.generate(params);\n  },\n  'labels-offset': function (params) {\n    return StyleFormLabelsOffset.generate(params);\n  },\n  'labels-overlap': function (params) {\n    return StyleFormLabelsOverlap.generate(params);\n  },\n  'labels-placement': function (params) {\n    return StyleFormLabelsPlacement.generate(params);\n  },\n\n  'strokeSize': function (params) {\n    return StyleFormStrokeSize.generate(params);\n  },\n  'strokeColor': function (params) {\n    return StyleFormStrokeColor.generate(params);\n  },\n  'style': function (params) {\n    return StyleFormStyle.generate(params);\n  }\n};\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar StyleFormComponents = require('./style-form-components-dictionary');\nvar StyleConstants = require('builder/components/form-components/_constants/_style');\nvar DEBOUNCE_TIME = 350;\n\nmodule.exports = Backbone.Model.extend({\n\n  _FORM_NAME: '',\n\n  initialize: function (attrs, opts) {\n    if (!opts.styleModel) throw new Error('Style model is required');\n    if (!opts.modals) throw new Error('modals is required');\n    this._styleModel = opts.styleModel;\n    this._querySchemaModel = opts.querySchemaModel;\n    this._queryGeometryModel = opts.queryGeometryModel;\n    this._configModel = opts.configModel;\n    this._userModel = opts.userModel;\n    this._modals = opts.modals;\n    this.schema = this._generateSchema();\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.bind('change', _.debounce(this._onChange.bind(this), DEBOUNCE_TIME), this);\n  },\n\n  _onChange: function () {\n    throw new Error('_onChange should be defined');\n  },\n\n  _isTorqueCategory: function () {\n    var fill = this._styleModel.get('fill');\n    var color = fill && fill.color || {};\n\n    return this._styleModel.get('style') !== StyleConstants.Type.HEATMAP\n      ? !color.fixed\n      : false;\n  },\n\n  _generateSchema: function () {\n    var querySchemaModel = this._querySchemaModel;\n    var queryGeometryModel = this._queryGeometryModel;\n    var configModel = this._configModel;\n    var userModel = this._userModel;\n    var modals = this._modals;\n    var styleType = this._styleModel.get('type');\n    var isAutoStyleApplied = this._styleModel.has('autoStyle');\n    var animationType = this._styleModel.get('style');\n    var formName = this._FORM_NAME ? this._FORM_NAME + '-' : '';\n\n    return _.reduce(this.attributes, function (attribute, value, key) {\n      var formComponent = StyleFormComponents[formName + key];\n\n      if (formComponent) {\n        attribute[key] = formComponent({\n          styleType: styleType,\n          isAutoStyleApplied: isAutoStyleApplied,\n          animationType: animationType,\n          querySchemaModel: querySchemaModel,\n          queryGeometryModel: queryGeometryModel,\n          modals: modals,\n          userModel: userModel,\n          configModel: configModel,\n          isTorqueCategory: this._isTorqueCategory()\n        });\n      }\n\n      return attribute;\n    }, {}, this);\n  }\n\n});\n","var DialogConstants = require('builder/components/form-components/_constants/_dialogs');\n\nmodule.exports = {\n  generate: function () {\n    return {\n      type: 'Select',\n      title: _t('editor.style.components.aggregation-dataset.label'),\n      dialogMode: DialogConstants.Mode.FLOAT,\n      options: [\n        {\n          val: 'countries'\n        }, {\n          val: 'provinces'\n        }\n      ],\n      editorAttrs: {\n        help: _t('editor.style.components.aggregation-dataset.help')\n      }\n    };\n  }\n};\n","module.exports = {\n  generate: function (params) {\n    return {\n      type: 'Number',\n      title: _t('editor.style.components.aggregation-size.label'),\n      help: _t('editor.style.components.aggregation-size.label-help'),\n      validators: ['required', {\n        type: 'interval',\n        min: 10,\n        max: 100\n      }],\n      editorAttrs: {\n        help: _t('editor.style.components.aggregation-size.help', { type: _t('editor.style.tooltips.' + params.styleType) })\n      }\n    };\n  }\n};\n","var DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar StyleFormDictionaryHelpers = require('builder/editor/style/style-form/style-form-helpers');\n\nmodule.exports = {\n  generate: function (params) {\n    return {\n      type: 'Operators',\n      title: _t('editor.style.components.aggregation-value.label'),\n      options: StyleFormDictionaryHelpers.getSchemaColumns(params.querySchemaModel),\n      dialogMode: DialogConstants.Mode.FLOAT,\n      editorAttrs: {\n        help: _t('editor.style.components.aggregation-value.help')\n      }\n    };\n  }\n};\n","var StyleFormDictionaryHelpers = require('builder/editor/style/style-form/style-form-helpers');\nvar StyleConstants = require('builder/components/form-components/_constants/_style');\n\nmodule.exports = {\n  generate: function (params) {\n    var filterFunction = function (item) {\n      var columnType = item.get('type');\n      return columnType && (columnType === 'number' || columnType === 'date');\n    };\n\n    if (params.styleType === StyleConstants.Type.HEATMAP) {\n      return StyleFormDictionaryHelpers.generateSelectWithSchemaColumns({\n        componentName: 'animated-attribute',\n        querySchemaModel: params.querySchemaModel,\n        filterFunction: filterFunction\n      });\n    }\n\n    return StyleFormDictionaryHelpers.generateSelectByStyleType({\n      componentName: 'animated-attribute',\n      querySchemaModel: params.querySchemaModel,\n      filterFunction: filterFunction,\n      styleType: params.styleType\n    });\n  }\n};\n","module.exports = {\n  generate: function () {\n    return {\n      type: 'Number',\n      title: _t('editor.style.components.animated-duration.label'),\n      validators: ['required', {\n        type: 'interval',\n        min: 0,\n        max: 60\n      }],\n      editorAttrs: {\n        help: _t('editor.style.components.animated-duration.help')\n      }\n    };\n  }\n};\n","module.exports = {\n  generate: function (params) {\n    if (params.isTorqueCategory) {\n      return {\n        type: 'Hidden'\n      };\n    }\n\n    return {\n      type: 'Radio',\n      title: _t('editor.style.components.animated-overlap.label'),\n      options: [\n        {\n          val: 'false',\n          label: _t('editor.style.components.animated-overlap.options.false')\n        }, {\n          val: 'true',\n          label: _t('editor.style.components.animated-overlap.options.true')\n        }\n      ]\n    };\n  }\n};\n","module.exports = {\n  generate: function () {\n    return {\n      type: 'Number',\n      title: _t('editor.style.components.animated-resolution.label'),\n      validators: ['required', {\n        type: 'interval',\n        min: 1,\n        max: 16\n      }],\n      editorAttrs: {\n        help: _t('editor.style.components.animated-resolution.help')\n      }\n    };\n  }\n};\n","module.exports = {\n  generate: function () {\n    return {\n      type: 'Number',\n      title: _t('editor.style.components.animated-steps.label'),\n      validators: ['required', {\n        type: 'interval',\n        min: 1,\n        max: 1024,\n        step: 4\n      }],\n      editorAttrs: {\n        help: _t('editor.style.components.animated-steps.help')\n      }\n    };\n  }\n};\n","module.exports = {\n  generate: function () {\n    return {\n      type: 'Number',\n      title: _t('editor.style.components.animated-trails.label'),\n      validators: ['required', {\n        type: 'interval',\n        min: 0,\n        max: 30\n      }],\n      editorAttrs: {\n        help: _t('editor.style.components.animated-trails.help')\n      }\n    };\n  }\n};\n","var _ = require('underscore');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar StyleConstants = require('builder/components/form-components/_constants/_style');\n\nmodule.exports = {\n  generate: function (params) {\n    var blendingOptions = this._getBlendingOptions(params);\n    var options = this._generateBlendingOptions(blendingOptions);\n\n    return {\n      type: 'Select',\n      title: _t('editor.style.components.blending.label'),\n      options: options,\n      dialogMode: DialogConstants.Mode.FLOAT,\n      editorAttrs: {\n        help: _t('editor.style.tooltips.blending')\n      }\n    };\n  },\n\n  _generateBlendingOptions: function (options) {\n    return _.reduce(options, function (values, option) {\n      values.push({\n        val: option,\n        label: _t('editor.style.components.blending.options.' + option)\n      });\n\n      return values;\n    }, []);\n  },\n\n  _getBlendingOptions: function (params) {\n    return params.styleType === StyleConstants.Type.ANIMATION\n      ? StyleConstants.Blending.ANIMATION\n      : StyleConstants.Blending.SIMPLE;\n  }\n};\n","var DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar StyleFormDictionaryHelpers = require('builder/editor/style/style-form/style-form-helpers');\nvar FillConstants = require('builder/components/form-components/_constants/_fill');\nvar StyleConstants = require('builder/components/form-components/_constants/_style');\n\nvar NO_PANES_CLASS = 'Editor-formInner--NoTabs';\n\nmodule.exports = {\n  generate: function (params) {\n    var editorAttrs = {\n      help: {\n        color: null,\n        image: null\n      },\n      hidePanes: [],\n      hideTabs: [],\n      imageEnabled: false,\n      hideNumericColumns: false,\n      removeByValueCategory: false,\n      categorizeColumns: false,\n      geometryName: params.queryGeometryModel.get('simple_geom')\n    };\n\n    var options = StyleFormDictionaryHelpers.getOptionsByStyleType({\n      querySchemaModel: params.querySchemaModel,\n      styleType: params.styleType,\n      animationType: params.animationType\n    });\n\n    var styleType = this._getStyleType(params);\n\n    if (styleType === StyleConstants.Type.REGIONS ||\n      styleType === StyleConstants.Type.HEXABINS ||\n      styleType === StyleConstants.Type.SQUARES) {\n      editorAttrs.geometryName = 'polygon';\n      editorAttrs.removeByValueCategory = true;\n    }\n\n    this._setColor(editorAttrs, styleType);\n    this._setEditorAttributesForHeatmaps(params, editorAttrs, styleType);\n    this._setEditorAttributesForPoints(params, editorAttrs, styleType);\n    this._setEditorAttributesForAnimation(params, editorAttrs, styleType);\n\n    return {\n      type: 'FillColor',\n      title: this._getTitle(params),\n      options: options,\n      fieldClass: editorAttrs.hidePanes.length >= 1 ? NO_PANES_CLASS : '',\n      query: params.querySchemaModel.get('query'),\n      configModel: params.configModel,\n      userModel: params.userModel,\n      validators: ['required'],\n      editorAttrs: editorAttrs,\n      modals: params.modals,\n      dialogMode: DialogConstants.Mode.FLOAT\n    };\n  },\n\n  _getStyleType: function (params) {\n    return params.queryGeometryModel.get('simple_geom') === StyleConstants.Type.POLYGON\n      ? StyleConstants.Type.POLYGON\n      : params.styleType;\n  },\n\n  _getTitle: function (params) {\n    var geom = params.queryGeometryModel.get('simple_geom');\n    return _t('editor.style.components.fillColor.' + geom) +\n      ' ' +\n      _t('editor.style.components.fillColor.label');\n  },\n\n  _setEditorAttributesForHeatmaps: function (params, editorAttrs, styleType) {\n    if (styleType === StyleConstants.Type.HEATMAP) {\n      editorAttrs.hidePanes = [FillConstants.Panes.FIXED];\n      editorAttrs.help.color = _t('editor.style.tooltips.fill.color-heatmap');\n    }\n  },\n\n  _setEditorAttributesForPoints: function (params, editorAttrs, styleType) {\n    if (styleType === StyleConstants.Type.SIMPLE && StyleFormDictionaryHelpers.hasGeometryOf(params, 'point')) {\n      if (!params.isAutoStyleApplied) {\n        this._setImage(editorAttrs, styleType);\n      }\n    }\n  },\n\n  _setEditorAttributesForAnimation: function (params, editorAttrs, styleType) {\n    if (styleType === StyleConstants.Type.ANIMATION) {\n      editorAttrs.hideTabs = [FillConstants.Tabs.BINS, FillConstants.Tabs.QUANTIFICATION];\n      editorAttrs.hideNumericColumns = true;\n\n      if (params.animationType === 'simple') {\n        editorAttrs.categorizeColumns = true;\n      } else {\n        editorAttrs.hidePanes = [FillConstants.Panes.FIXED];\n        editorAttrs.help.color = _t('editor.style.tooltips.fill.color-heatmap');\n      }\n    }\n  },\n\n  _setColor: function (editorAttrs, styleType) {\n    var tooltipColor = _t('editor.style.tooltips.fill.color', {\n      type: _t('editor.style.tooltips.' + styleType)\n    });\n\n    editorAttrs.help.color = tooltipColor;\n  },\n\n  _setImage: function (editorAttrs, styleType) {\n    editorAttrs.imageEnabled = true;\n    editorAttrs.help.image = _t('editor.style.tooltips.fill.image', {\n      type: _t('editor.style.tooltips.' + styleType)\n    });\n  }\n};\n","var _ = require('underscore');\nvar StyleFormDictionaryHelpers = require('builder/editor/style/style-form/style-form-helpers');\nvar StyleConstants = require('builder/components/form-components/_constants/_style');\nvar FillConstants = require('builder/components/form-components/_constants/_fill');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\n\nvar NO_PANES_CLASS = 'Editor-formInner--NoTabs';\n\nmodule.exports = {\n  generate: function (params) {\n    this._checkForParams(params);\n\n    var optionsForStyle = StyleFormDictionaryHelpers.getOptionsByStyleType({\n      querySchemaModel: params.querySchemaModel,\n      styleType: params.styleType,\n      animationType: params.animationType\n    });\n\n    var size = this._buildFillSize(params, optionsForStyle);\n    return size;\n  },\n\n  _buildFillSize: function (params, optionsForStyle) {\n    var self = this;\n    var size = this._buildSize(params, {\n      options: optionsForStyle,\n      title: _t('editor.style.components.point-size.label'),\n      editorAttrs: self._buildFillSizeAttrs(params)\n    });\n\n    this._hideByValuePaneIfNeeded(params, size);\n    return size;\n  },\n\n  _buildFillSizeAttrs: function (params) {\n    var sizeAttrs = _.extend(FillConstants.Size.DEFAULT, {\n      help: 'editor.style.tooltips.fill.size',\n      geometryName: params.queryGeometryModel.get('simple_geom')\n    });\n    this._setDefaultRangeIfNeeded(params, sizeAttrs);\n    return sizeAttrs;\n  },\n\n  _buildSize: function (params, customOptions) {\n    var size = {\n      type: 'Size',\n      dialogMode: DialogConstants.Mode.FLOAT,\n      validators: ['required']\n    };\n    return _.extend(size, customOptions);\n  },\n\n  _checkForParams: function (params) {\n    if (!params.querySchemaModel) throw new Error('querySchemaModel is required');\n    if (!params.styleType) throw new Error('styleType is required');\n  },\n\n  _setDefaultRangeIfNeeded: function (params, sizeAttrs) {\n    if (params.styleType === StyleConstants.Type.SIMPLE && StyleFormDictionaryHelpers.hasGeometryOf(params, 'point')) {\n      sizeAttrs.defaultRange = [5, 20];\n    }\n  },\n\n  _hideByValuePaneIfNeeded: function (params, size) {\n    if (_.contains([StyleConstants.Type.HEATMAP, StyleConstants.Type.ANIMATION], params.styleType)) {\n      size.editorAttrs.hidePanes = [FillConstants.Panes.BY_VALUE];\n      size.fieldClass = NO_PANES_CLASS;\n    } else {\n      size.editorAttrs.hidePanes = [];\n    }\n  }\n};\n","module.exports = {\n  generate: function () {\n    return {\n      type: 'Hidden'\n    };\n  }\n};\n","var StyleFormDictionaryHelpers = require('builder/editor/style/style-form/style-form-helpers');\n\nmodule.exports = {\n  generate: function (params) {\n    var filterFunction = function (item) {\n      var columnName = item.get('name');\n      var columnType = item.get('type');\n      return columnName !== 'the_geom' && columnName !== 'the_geom_webmercator' && columnType !== 'date';\n    };\n\n    return StyleFormDictionaryHelpers.generateSelectByStyleType({\n      componentName: 'labels-attribute',\n      querySchemaModel: params.querySchemaModel,\n      styleType: params.styleType,\n      filterFunction: filterFunction\n    });\n  }\n};\n","var DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar FillConstants = require('builder/components/form-components/_constants/_fill');\n\nvar NO_PANES_CLASS = 'Editor-formInner--NoTabs';\n\nmodule.exports = {\n  generate: function () {\n    return {\n      type: 'FillColor',\n      title: _t('editor.style.components.labels-fill-color'),\n      fieldClass: NO_PANES_CLASS,\n      options: [],\n      validators: ['required'],\n      dialogMode: DialogConstants.Mode.FLOAT,\n      editorAttrs: {\n        imageEnabled: false,\n        hidePanes: [FillConstants.Panes.BY_VALUE]\n      }\n    };\n  }\n};\n","var DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar FillConstants = require('builder/components/form-components/_constants/_fill');\n\nmodule.exports = {\n  generate: function () {\n    return {\n      type: 'Size',\n      title: _t('editor.style.components.labels-fill-size'),\n      options: [],\n      dialogMode: DialogConstants.Mode.FLOAT,\n      editorAttrs: {\n        min: 6,\n        max: 24,\n        hidePanes: [FillConstants.Panes.BY_VALUE]\n      },\n      validators: ['required'],\n      fieldClass: 'Editor-formInner--NoTabs'\n    };\n  }\n};\n","var DialogConstants = require('builder/components/form-components/_constants/_dialogs');\n\nvar FONTS_LIST = [\n  'DejaVu Sans Book',\n  'Unifont Medium',\n  'Open Sans Regular',\n  'Lato Regular',\n  'Lato Bold',\n  'Lato Bold Italic',\n  'Graduate Regular',\n  'Gravitas One Regular',\n  'Old Standard TT Regular',\n  'Old Standard TT Italic',\n  'Old Standard TT Bold'\n];\n\nmodule.exports = {\n  generate: function () {\n    return {\n      type: 'Select',\n      dialogMode: DialogConstants.Mode.FLOAT,\n      options: FONTS_LIST\n    };\n  }\n};\n","var DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar FillConstants = require('builder/components/form-components/_constants/_fill');\n\nvar NO_PANES_CLASS = 'Editor-formInner--NoTabs';\n\nmodule.exports = {\n  generate: function () {\n    return {\n      type: 'FillColor',\n      title: _t('editor.style.components.labels-halo-color'),\n      fieldClass: NO_PANES_CLASS,\n      options: [],\n      validators: ['required'],\n      dialogMode: DialogConstants.Mode.FLOAT,\n      editorAttrs: {\n        hidePanes: [FillConstants.Panes.BY_VALUE]\n      }\n    };\n  }\n};\n","var DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar FillConstants = require('builder/components/form-components/_constants/_fill');\n\nmodule.exports = {\n  generate: function () {\n    return {\n      type: 'Size',\n      title: _t('editor.style.components.labels-halo-size'),\n      options: [],\n      dialogMode: DialogConstants.Mode.FLOAT,\n      editorAttrs: {\n        hidePanes: [FillConstants.Panes.BY_VALUE]\n      },\n      validators: ['required'],\n      fieldClass: 'Editor-formInner--NoTabs'\n    };\n  }\n};\n","module.exports = {\n  generate: function () {\n    return {\n      type: 'Number',\n      title: _t('editor.style.components.labels-offset'),\n      validators: ['required', {\n        type: 'interval',\n        min: -15,\n        max: 15\n      }]\n    };\n  }\n};\n","module.exports = {\n  generate: function () {\n    return {\n      type: 'Radio',\n      title: _t('editor.style.components.labels-overlap.label'),\n      options: [\n        {\n          val: 'true',\n          label: _t('editor.style.components.labels-overlap.options.true')\n        }, {\n          val: 'false',\n          label: _t('editor.style.components.labels-overlap.options.false')\n        }\n      ]\n    };\n  }\n};\n","var _ = require('underscore');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\n\nmodule.exports = {\n  generate: function () {\n    var PLACEMENTS = ['point', 'line', 'vertex', 'interior'];\n\n    return {\n      type: 'Select',\n      title: _t('editor.style.components.labels-placement.label'),\n      dialogMode: DialogConstants.Mode.FLOAT,\n      options: _.reduce(PLACEMENTS, function (values, type) {\n        values.push({\n          val: type,\n          label: _t('editor.style.components.labels-placement.options.' + type)\n        });\n\n        return values;\n      }, []),\n      editorAttrs: {\n        showSearch: false\n      }\n    };\n  }\n};\n","var StyleFormDictionaryHelpers = require('builder/editor/style/style-form/style-form-helpers');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar StyleConstants = require('builder/components/form-components/_constants/_style');\n\nvar NO_PANES_CLASS = 'Editor-formInner--NoTabs';\n\nmodule.exports = {\n  generate: function (params) {\n    var strokeParams = {\n      querySchemaModel: params.querySchemaModel,\n      queryGeometryModel: params.queryGeometryModel,\n      styleType: params.styleType,\n      configModel: params.configModel,\n      userModel: params.userModel,\n      modals: params.modals\n    };\n\n    return params.queryGeometryModel.get('simple_geom') === 'line'\n      ? this._generateLineStrokeColor(strokeParams)\n      : this._generateSimpleStrokeColor(strokeParams, params.queryGeometryModel.get('simple_geom'));\n  },\n\n  _generateLineStrokeColor: function (params) {\n    if (!params.querySchemaModel) throw new Error('querySchemaModel is required');\n    if (!params.queryGeometryModel) throw new Error('queryGeometryModel is required');\n    if (!params.configModel) throw new Error('configModel is required');\n    if (!params.styleType) throw new Error('styleType is required');\n    if (!params.userModel) throw new Error('userModel is required');\n    if (!params.modals) throw new Error('modals is required');\n\n    var queryStatus = params.querySchemaModel.get('status');\n    var isDisabled = queryStatus !== 'fetched';\n    var helpMessage = _t('editor.style.components.stroke.' + queryStatus);\n\n    return {\n      type: 'FillColor',\n      title: _t('editor.style.components.stroke-color.label'),\n      options: StyleFormDictionaryHelpers.getOptionsByStyleType({\n        querySchemaModel: params.querySchemaModel,\n        styleType: params.styleType\n      }),\n      query: params.querySchemaModel.get('query'),\n      configModel: params.configModel,\n      userModel: params.userModel,\n      modals: params.modals,\n      dialogMode: DialogConstants.Mode.FLOAT,\n      editorAttrs: {\n        imageEnabled: false,\n        hidePanes: [],\n        disabled: isDisabled,\n        help: isDisabled ? helpMessage : _t('editor.style.tooltips.stroke.color', { type: _t('editor.style.tooltips.line') }),\n        geometryName: params.queryGeometryModel.get('simple_geom')\n      },\n      validators: ['required']\n    };\n  },\n\n  _generateSimpleStrokeColor: function (params, type) {\n    if (!params.querySchemaModel) throw new Error('querySchemaModel is required');\n    if (!params.configModel) throw new Error('configModel is required');\n    if (!params.styleType) throw new Error('styleType is required');\n    if (!params.userModel) throw new Error('userModel is required');\n    if (!params.modals) throw new Error('modals is required');\n\n    var styleType = type === StyleConstants.Type.POLYGON\n      ? StyleConstants.Type.POLYGON\n      : params.styleType;\n\n    return {\n      type: 'FillColor',\n      title: _t('editor.style.components.stroke-color.label'),\n      fieldClass: NO_PANES_CLASS,\n      options: [],\n      query: params.querySchemaModel.get('query'),\n      configModel: params.configModel,\n      userModel: params.userModel,\n      modals: params.modals,\n      dialogMode: DialogConstants.Mode.FLOAT,\n      editorAttrs: {\n        imageEnabled: false,\n        hidePanes: ['value'],\n        help: _t('editor.style.tooltips.stroke.color', { type: _t('editor.style.tooltips.' + styleType) })\n      },\n      validators: ['required']\n    };\n  }\n};\n","var _ = require('underscore');\nvar StyleFormDictionaryHelpers = require('builder/editor/style/style-form/style-form-helpers');\nvar FillConstants = require('builder/components/form-components/_constants/_fill');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\n\nvar NO_PANES_CLASS = 'Editor-formInner--NoTabs';\n\nmodule.exports = {\n  generate: function (params) {\n    this._checkForParams(params);\n\n    if (params.queryGeometryModel.get('simple_geom') === 'line') {\n      return this._buildLineStrokeSize(params);\n    }\n    return this._buildSimpleStrokeSize(params);\n  },\n\n  _buildLineStrokeSize: function (params) {\n    var options = StyleFormDictionaryHelpers.getOptionsByStyleType({\n      querySchemaModel: params.querySchemaModel,\n      styleType: params.styleType\n    });\n\n    var self = this;\n    var size = this._buildSize(params, {\n      options: options,\n      title: _t('editor.style.components.stroke-size.label'),\n      editorAttrs: self._buildLineStrokeSizeAttrs(params)\n    });\n\n    return size;\n  },\n\n  _buildSimpleStrokeSize: function (params) {\n    var self = this;\n    var size = this._buildSize(params, {\n      options: [],\n      title: _t('editor.style.components.stroke-size.label'),\n      editorAttrs: self._buildSimpleStrokeSizeAttrs(params)\n    });\n    size.fieldClass = NO_PANES_CLASS;\n\n    return size;\n  },\n\n  _buildLineStrokeSizeAttrs: function (params) {\n    var queryStatus = params.querySchemaModel.get('status');\n    var isDisabled = queryStatus !== 'fetched';\n\n    var sizeAttrs = {\n      min: 0,\n      max: 50,\n      disabled: isDisabled,\n      defaultRange: [1, 5],\n      help: '',\n      geometryName: params.queryGeometryModel.get('simple_geom')\n    };\n\n    return sizeAttrs;\n  },\n\n  _buildSimpleStrokeSizeAttrs: function (params) {\n    var sizeAttrs = {\n      min: 0,\n      max: 10,\n      step: 0.5,\n      hidePanes: [FillConstants.Panes.BY_VALUE],\n      help: 'editor.style.tooltips.stroke.size',\n      geometryName: params.queryGeometryModel.get('simple_geom')\n    };\n    return sizeAttrs;\n  },\n\n  _buildSize: function (params, customOptions) {\n    var size = {\n      type: 'Size',\n      dialogMode: DialogConstants.Mode.FLOAT,\n      validators: ['required']\n    };\n    return _.extend(size, customOptions);\n  },\n\n  _checkForParams: function (params) {\n    if (!params.queryGeometryModel) throw new Error('queryGeometryModel is required');\n    if (!params.querySchemaModel) throw new Error('querySchemaModel is required');\n    if (!params.styleType) throw new Error('styleType is required');\n  }\n};\n","module.exports = {\n  generate: function () {\n    return {\n      type: 'Radio',\n      title: _t('editor.style.components.type.label'),\n      options: [\n        {\n          val: 'simple',\n          label: _t('editor.style.components.type.options.points')\n        }, {\n          val: 'heatmap',\n          label: _t('editor.style.components.type.options.heatmap')\n        }\n      ]\n    };\n  }\n};\n","var DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar StyleConstants = require('builder/components/form-components/_constants/_style');\n\nmodule.exports = {\n  getSchemaColumns: function (querySchemaModel, filterFunction) {\n    if (!querySchemaModel) throw new Error('querySchemaModel is required');\n\n    var columnsCollection = querySchemaModel.columnsCollection;\n    if (filterFunction) {\n      columnsCollection = columnsCollection.filter(filterFunction);\n    }\n    return columnsCollection.map(function (model) {\n      var columnName = model.get('name');\n      return {\n        val: columnName,\n        label: columnName,\n        type: model.get('type')\n      };\n    });\n  },\n\n  getOptionsByStyleType: function (params) {\n    if (!params.querySchemaModel) throw new Error('querySchemaModel is required');\n    var optionsArray = this.getSchemaColumns(params.querySchemaModel, params.filterFunction);\n\n    var CARTODB_ID = { val: 'cartodb_id', label: 'cartodb_id', type: 'number' };\n    var AGG_VALUE = { val: 'agg_value', label: 'agg_value', type: 'number' };\n    var AGG_VALUE_DENSITY = { val: 'agg_value_density', label: 'agg_value_density', type: 'number' };\n\n    switch (params.styleType) {\n      case StyleConstants.Type.HEATMAP:\n        optionsArray = [CARTODB_ID];\n        break;\n      case StyleConstants.Type.REGIONS:\n        optionsArray = [AGG_VALUE, AGG_VALUE_DENSITY];\n        break;\n      case StyleConstants.Type.HEXABINS:\n      case StyleConstants.Type.SQUARES:\n        optionsArray = [AGG_VALUE];\n        break;\n      case StyleConstants.Type.ANIMATION:\n        if (params.animationType === 'heatmap') {\n          optionsArray = [CARTODB_ID];\n        }\n        break;\n      default:\n        // Nothing\n    }\n\n    return optionsArray;\n  },\n\n  generateSelectByStyleType: function (params) {\n    if (!params.componentName) throw new Error('componentName is required');\n    if (!params.querySchemaModel) throw new Error('querySchemaModel is required');\n    if (!params.styleType) throw new Error('styleType is required');\n\n    var queryStatus = params.querySchemaModel.get('status');\n    var isDisabled = queryStatus !== 'fetched';\n    var helpMessage = _t('editor.style.components.' + params.componentName + '.' + queryStatus);\n\n    return {\n      type: 'Select',\n      title: _t('editor.style.components.' + params.componentName + '.label'),\n      placeholder: _t('editor.style.components.' + params.componentName + '.placeholder'),\n      help: isDisabled ? helpMessage : '',\n      options: this.getOptionsByStyleType({\n        querySchemaModel: params.querySchemaModel,\n        filterFunction: params.filterFunction,\n        styleType: params.styleType\n      }),\n      dialogMode: DialogConstants.Mode.FLOAT,\n      validators: ['required'],\n      editorAttrs: {\n        disabled: isDisabled,\n        help: _t('editor.style.components.' + params.componentName + '.help')\n      }\n    };\n  },\n\n  generateSelectWithSchemaColumns: function (componentName, querySchemaModel, filterFunction) {\n    var queryStatus = querySchemaModel.get('status');\n    var isDisabled = queryStatus !== 'fetched';\n    var helpMessage = _t('editor.style.components.' + componentName + '.' + queryStatus);\n\n    return {\n      type: 'Select',\n      title: _t('editor.style.components.' + componentName + '.label'),\n      help: isDisabled ? helpMessage : '',\n      options: this.getSchemaColumns(querySchemaModel, filterFunction),\n      dialogMode: DialogConstants.Mode.FLOAT,\n      validators: ['required'],\n      editorAttrs: {\n        disabled: isDisabled,\n        help: _t('editor.style.components.' + componentName + '.help')\n      }\n    };\n  },\n\n  generateSimpleStroke: function (params, type) {\n    if (!params.querySchemaModel) throw new Error('querySchemaModel is required');\n    if (!params.configModel) throw new Error('configModel is required');\n    if (!params.styleType) throw new Error('styleType is required');\n    if (!params.userModel) throw new Error('userModel is required');\n    if (!params.modals) throw new Error('modals is required');\n\n    var styleType = type === StyleConstants.Type.POLYGON\n      ? StyleConstants.Type.POLYGON\n      : params.styleType;\n\n    return {\n      type: 'Fill',\n      title: _t('editor.style.components.stroke.label'),\n      options: [],\n      query: params.querySchemaModel.get('query'),\n      configModel: params.configModel,\n      userModel: params.userModel,\n      modals: params.modals,\n      dialogMode: DialogConstants.Mode.FLOAT,\n      editorAttrs: {\n        size: {\n          min: 0,\n          max: 10,\n          step: 0.5,\n          hidePanes: ['value'],\n          help: _t('editor.style.tooltips.stroke.size', {type: _t('editor.style.tooltips.' + styleType)})\n        },\n        color: {\n          hidePanes: ['value'],\n          help: _t('editor.style.tooltips.stroke.color', {type: _t('editor.style.tooltips.' + styleType)})\n        }\n      },\n      validators: ['required']\n    };\n  },\n\n  generateLineStroke: function (params) {\n    if (!params.querySchemaModel) throw new Error('querySchemaModel is required');\n    if (!params.configModel) throw new Error('configModel is required');\n    if (!params.styleType) throw new Error('styleType is required');\n    if (!params.userModel) throw new Error('userModel is required');\n    if (!params.modals) throw new Error('modals is required');\n\n    var queryStatus = params.querySchemaModel.get('status');\n    var isDisabled = queryStatus !== 'fetched';\n    var helpMessage = _t('editor.style.components.stroke.' + queryStatus);\n\n    return {\n      type: 'Fill',\n      title: _t('editor.style.components.stroke.label'),\n      help: isDisabled ? helpMessage : '',\n      options: this.getOptionsByStyleType({\n        querySchemaModel: params.querySchemaModel,\n        styleType: params.styleType\n      }),\n      query: params.querySchemaModel.get('query'),\n      configModel: params.configModel,\n      userModel: params.userModel,\n      modals: params.modals,\n      dialogMode: DialogConstants.Mode.FLOAT,\n      editorAttrs: {\n        min: 0,\n        max: 50,\n        disabled: isDisabled,\n        size: {\n          defaultRange: [1, 5],\n          help: _t('editor.style.tooltips.stroke.size', {type: _t('editor.style.tooltips.line')})\n        },\n        color: {\n          help: _t('editor.style.tooltips.stroke.color', {type: _t('editor.style.tooltips.line')})\n        }\n      },\n      validators: ['required']\n    };\n  },\n\n  hasGeometryOf: function (params, type) {\n    return params.queryGeometryModel && params.queryGeometryModel.get('simple_geom') === type;\n  }\n};\n","var CoreView = require('backbone/core-view');\nvar StylePropertiesFormView = require('./style-properties-form/style-properties-form-view');\nvar StyleAggregationFormView = require('./style-aggregation-form/style-aggregation-form-view');\nvar noneFormMessage = require('./none-form-message.tpl');\n\nmodule.exports = CoreView.extend({\n  module: 'editor/style/style-form/style-form-view',\n\n  className: 'Editor-formView',\n\n  initialize: function (opts) {\n    if (!opts.layerDefinitionsCollection) throw new Error('layerDefinitionsCollection is required');\n    if (!opts.layerDefinitionModel) throw new Error('layerDefinitionModel is required');\n    if (!opts.querySchemaModel) throw new Error('querySchemaModel is required');\n    if (!opts.queryGeometryModel) throw new Error('queryGeometryModel is required');\n    if (!opts.configModel) throw new Error('configModel is required');\n    if (!opts.userModel) throw new Error('userModel is required');\n    if (!opts.styleModel) throw new Error('styleModel is required');\n    if (!opts.modals) throw new Error('modals is required');\n\n    this._querySchemaModel = opts.querySchemaModel;\n    this._queryGeometryModel = opts.queryGeometryModel;\n    this._configModel = opts.configModel;\n    this._userModel = opts.userModel;\n    this._layerDefinitionsCollection = opts.layerDefinitionsCollection;\n    this._layerDefinitionModel = opts.layerDefinitionModel;\n    this._styleModel = opts.styleModel;\n    this._modals = opts.modals;\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    if (this._styleModel.get('type') === 'none') {\n      this._renderNoneMessage();\n    } else {\n      this._initFormViews();\n    }\n    return this;\n  },\n\n  _initBinds: function () {\n    this._styleModel.bind('change:type', this.render, this);\n    this.add_related_model(this._styleModel);\n  },\n\n  _renderNoneMessage: function () {\n    this.$el.append(noneFormMessage());\n  },\n\n  _initFormViews: function () {\n    if (this._styleModel.isAggregatedType()) {\n      var aggregationFormView = new StyleAggregationFormView({\n        styleModel: this._styleModel,\n        queryGeometryModel: this._queryGeometryModel,\n        querySchemaModel: this._querySchemaModel,\n        configModel: this._configModel,\n        userModel: this._userModel,\n        modals: this._modals\n      });\n\n      this.addView(aggregationFormView);\n      this.$el.append(aggregationFormView.render().el);\n    }\n\n    var propertiesFormView = new StylePropertiesFormView({\n      styleModel: this._styleModel,\n      layerDefinitionsCollection: this._layerDefinitionsCollection,\n      configModel: this._configModel,\n      userModel: this._userModel,\n      layerDefinitionModel: this._layerDefinitionModel,\n      queryGeometryModel: this._queryGeometryModel,\n      querySchemaModel: this._querySchemaModel,\n      modals: this._modals\n    });\n\n    this.addView(propertiesFormView);\n    this.$el.append(propertiesFormView.render().el);\n  }\n});\n","var _ = require('underscore');\nvar StyleFormDefaultModel = require('builder/editor/style/style-form/style-form-default-model');\nvar StyleFormComponents = require('builder/editor/style/style-form/style-form-components-dictionary');\nvar StyleConstants = require('builder/components/form-components/_constants/_style');\n\nmodule.exports = StyleFormDefaultModel.extend({\n\n  _FORM_NAME: 'animated',\n\n  parse: function (r, opts) {\n    var columnAnimatable = opts.querySchemaModel.columnsCollection.findWhere(function (colModel) {\n      return colModel.get('type') === 'number' || colModel.get('type') === 'date';\n    });\n\n    return _.extend(\n      r,\n      {\n        attribute: r.attribute || (columnAnimatable && columnAnimatable.get('name')),\n        overlap: r.overlap && r.overlap.toString()\n      }\n    );\n  },\n\n  initialize: function (attrs, opts) {\n    StyleFormDefaultModel.prototype.initialize.apply(this, arguments);\n\n    this.listenTo(this._styleModel, 'change', this._onStyleChanged);\n  },\n\n  _setSchema: function () {\n    this.schema = this._generateSchema();\n    this.trigger('changeSchema', this);\n  },\n\n  _onStyleChanged: function () {\n    this._replaceAttrs();\n    this._setSchema();\n  },\n\n  _replaceAttrs: function () {\n    this.set('overlap', this._isTorqueCategory() ? 'false' : this.get('overlap'));\n  },\n\n  _onChange: function () {\n    var animatedData = _.extend(\n      {},\n      this.attributes,\n      {\n        overlap: this.get('overlap') === 'true'\n      }\n    );\n\n    // Don't update style model if there is no attribute selected\n    if (!animatedData.attribute) {\n      return false;\n    }\n\n    this._styleModel.set('animated', animatedData);\n  },\n\n  _generateSchema: function () {\n    var styleType = this._styleModel.get('type');\n\n    if (styleType === StyleConstants.Type.HEATMAP) {\n      return {\n        resolution: StyleFormComponents['animated-resolution']()\n      };\n    } else {\n      return StyleFormDefaultModel.prototype._generateSchema.call(this);\n    }\n  }\n});\n","var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nrequire('builder/components/form-components/index');\nvar StyleAnimatedFormModel = require('./style-animated-properties-form-model');\n\nmodule.exports = CoreView.extend({\n  module: 'editor/style/style-form/style-properties-form/style-animated-properties-form-view',\n\n  initialize: function (opts) {\n    if (!opts.layerDefinitionsCollection) throw new Error('layerDefinitionsCollection is required');\n    if (!opts.layerDefinitionModel) throw new Error('layerDefinitionModel is required');\n    if (!opts.querySchemaModel) throw new Error('querySchemaModel is required');\n    if (!opts.queryGeometryModel) throw new Error('queryGeometryModel is required');\n    if (!opts.styleModel) throw new Error('styleModel is required');\n    if (!opts.userModel) throw new Error('userModel is required');\n    if (!opts.modals) throw new Error('modals is required');\n\n    this._userModel = opts.userModel;\n    this._modals = opts.modals;\n\n    this._querySchemaModel = opts.querySchemaModel;\n    this._queryGeometryModel = opts.queryGeometryModel;\n    this._layerDefinitionsCollection = opts.layerDefinitionsCollection;\n    this._layerDefinitionModel = opts.layerDefinitionModel;\n    this._styleModel = opts.styleModel;\n\n    this._animatedFormModel = new StyleAnimatedFormModel(\n      this._styleModel.get('animated'),\n      {\n        parse: true,\n        querySchemaModel: this._querySchemaModel,\n        queryGeometryModel: this._queryGeometryModel,\n        styleModel: this._styleModel,\n        userModel: this._userModel,\n        modals: this._modals\n      }\n    );\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this._genAnimatedFormView();\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this._animatedFormModel.on('changeSchema', this.render, this);\n  },\n\n  _genAnimatedFormView: function () {\n    this._animatedFormView = new Backbone.Form({\n      model: this._animatedFormModel\n    });\n\n    this._animatedFormView.bind('change', function () {\n      this.commit();\n    });\n\n    this.$el.append(this._animatedFormView.render().el);\n  },\n\n  clearSubViews: function () {\n    if (this._animatedFormView) {\n      this._animatedFormView.remove(); // the Backbone.Form equivalent to 'view.clean()'\n    }\n\n    return CoreView.prototype.clearSubViews.apply(this, arguments);\n  }\n});\n","var _ = require('underscore');\nvar StyleFormDefaultModel = require('builder/editor/style/style-form/style-form-default-model');\n\nvar FILL_PROPERTIES = [\n  { source: 'size', value: 'fillSize' },\n  { source: 'color', value: 'fillColor' }\n];\n\nvar HALO_PROPERTIES = [\n  { source: 'size', value: 'haloSize' },\n  { source: 'color', value: 'haloColor' }\n];\n\nmodule.exports = StyleFormDefaultModel.extend({\n\n  _FORM_NAME: 'labels',\n\n  parse: function (response) {\n    return {\n      enabled: response.enabled,\n      attribute: response.attribute,\n      font: response.font,\n      fillSize: response.fill.size,\n      fillColor: response.fill.color,\n      haloSize: response.halo.size,\n      haloColor: response.halo.color,\n      offset: response.offset,\n      overlap: response.overlap,\n      placement: response.placement\n    };\n  },\n\n  _onChange: function () {\n    var attrs = _.clone(this.attributes);\n\n    if (attrs.enabled && !attrs.attribute) {\n      return false;\n    }\n\n    this._updatePartialProperties(attrs);\n\n    this._styleModel.set('labels', attrs);\n  },\n\n  _updatePartialProperties: function (attrs) {\n    this._setProperties(FILL_PROPERTIES, 'fill', attrs);\n    this._setProperties(HALO_PROPERTIES, 'halo', attrs);\n\n    return attrs;\n  },\n\n  _setProperties: function (properties, propertyName, attrs) {\n    attrs[propertyName] = _.extend(this._styleModel.get('labels')[propertyName]);\n\n    properties.forEach(function (property) {\n      if (attrs[property.value]) {\n        attrs[propertyName][property.source] = attrs[property.value];\n      }\n    });\n  }\n});\n","var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar StyleLabelsFormModel = require('./style-labels-properties-form-model');\n\nrequire('builder/components/form-components/index');\n\nmodule.exports = CoreView.extend({\n\n  className: 'u-tSpace-xl',\n\n  initialize: function (opts) {\n    if (!opts.queryGeometryModel) throw new Error('queryGeometryModel is required');\n    if (!opts.querySchemaModel) throw new Error('querySchemaModel is required');\n    if (!opts.styleModel) throw new Error('styleModel is required');\n    if (!opts.modals) throw new Error('modals is required');\n    if (!opts.configModel) throw new Error('configModel is required');\n    if (!opts.userModel) throw new Error('userModel is required');\n\n    this._queryGeometryModel = opts.queryGeometryModel;\n    this._querySchemaModel = opts.querySchemaModel;\n    this._styleModel = opts.styleModel;\n    this._configModel = opts.configModel;\n    this._userModel = opts.userModel;\n    this._modals = opts.modals;\n\n    var attributes = this._styleModel.get('labels');\n\n    this._labelsFormModel = new StyleLabelsFormModel(\n      attributes,\n      {\n        parse: true,\n        queryGeometryModel: this._queryGeometryModel,\n        querySchemaModel: this._querySchemaModel,\n        styleModel: this._styleModel,\n        configModel: this._configModel,\n        userModel: this._userModel,\n        modals: this._modals\n      }\n    );\n\n    this._enablerModel = new Backbone.Model({\n      enabler: this._styleModel.get('labels').enabled\n    });\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.$el.empty();\n    this._initLabelsEnablerView();\n    return this;\n  },\n\n  _initBinds: function () {\n    this._styleModel.bind('change:type', function () {\n      var isAnimatedEnabled = this._styleModel.get('type') === 'animation';\n      if (isAnimatedEnabled) {\n        this._enablerView.setValue(false);\n      }\n    }, this);\n    this.add_related_model(this._styleModel);\n  },\n\n  _initLabelsEnablerView: function () {\n    var helpMessage = _t('editor.style.components.labels-enabled.not-with-animated');\n    var isAnimatedVisible = this._queryGeometryModel.get('simple_geom') === 'point';\n\n    this._enablerView = new Backbone.Form.editors.Enabler({\n      model: this._enablerModel,\n      title: _t('editor.style.components.labels-enabled.label'),\n      help: isAnimatedVisible ? helpMessage : '',\n      key: 'enabler'\n    });\n\n    this._enablerModel.bind('change', this._setLabelsFormView, this);\n    this.add_related_model(this._enablerModel);\n    this.$el.append(this._enablerView.render().el);\n\n    this._setLabelsFormView();\n  },\n\n  _setLabelsFormView: function () {\n    var isEnabled = this._enablerModel.get('enabler');\n    this._updateFormModel();\n    if (isEnabled) {\n      this._genLabelsFormView();\n    } else {\n      this._removeLabelsFormView();\n    }\n  },\n\n  _updateFormModel: function () {\n    this._labelsFormModel.set('enabled', this._enablerModel.get('enabler'));\n  },\n\n  _genLabelsFormView: function () {\n    this._labelsFormView = new Backbone.Form({\n      className: 'Editor-formInner--nested',\n      model: this._labelsFormModel\n    });\n\n    this._labelsFormView.bind('change', function () {\n      this.commit();\n    });\n\n    this.$el.append(this._labelsFormView.render().el);\n  },\n\n  _removeLabelsFormView: function () {\n    if (this._labelsFormView) {\n      this._labelsFormView.remove();\n      this._labelsFormView.$el.empty();\n    }\n  },\n\n  clean: function () {\n    this._removeLabelsFormView();\n    CoreView.prototype.clean.call(this);\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar StyleLabelsPropertiesFormView = require('./style-labels-properties-form-view');\nvar StyleAnimatedPropertiesFormView = require('./style-animated-properties-form-view');\nvar StyleShapePropertiesFormView = require('./style-shape-properties-form-view');\nvar StyleNotAnimatableView = require('./style-unanimatable-view');\nvar StyleConstants = require('builder/components/form-components/_constants/_style');\nvar template = require('./style-properties-form.tpl');\n\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'layerDefinitionsCollection',\n  'querySchemaModel',\n  'queryGeometryModel',\n  'styleModel',\n  'configModel',\n  'userModel',\n  'userModel',\n  'layerDefinitionModel',\n  'modals'\n];\n\nmodule.exports = CoreView.extend({\n\n  initialize: function (options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    var stepNumber = this._styleModel.isAggregatedType() ? 3 : 2;\n    var simpleGeometry = this._queryGeometryModel.get('simple_geom');\n\n    if (simpleGeometry !== 'point') {\n      stepNumber--;\n    }\n\n    this.$el.html(\n      template({\n        stepNumber: stepNumber,\n        simpleGeometry: simpleGeometry\n      })\n    );\n    this._initViews();\n    return this;\n  },\n\n  _initViews: function () {\n    var styleType = this._styleModel.get('type');\n    var animatedFormView;\n    var shapeFormView;\n    var labelsFormView;\n\n    if (this._isUnanimatable()) {\n      shapeFormView = new StyleNotAnimatableView({\n        layerDefinitionModel: this._layerDefinitionModel,\n        userModel: this._userModel,\n        configModel: this._configModel,\n        modals: this._modals\n      });\n      this.addView(shapeFormView);\n      this.$('.js-propertiesForm').append(shapeFormView.render().el);\n    } else {\n      shapeFormView = new StyleShapePropertiesFormView({\n        styleModel: this._styleModel,\n        queryGeometryModel: this._queryGeometryModel,\n        querySchemaModel: this._querySchemaModel,\n        configModel: this._configModel,\n        userModel: this._userModel,\n        modals: this._modals\n      });\n      this.addView(shapeFormView);\n      this.$('.js-propertiesForm').append(shapeFormView.render().el);\n\n      if (styleType !== StyleConstants.Type.HEATMAP && styleType !== StyleConstants.Type.ANIMATION) {\n        labelsFormView = new StyleLabelsPropertiesFormView({\n          styleModel: this._styleModel,\n          queryGeometryModel: this._queryGeometryModel,\n          querySchemaModel: this._querySchemaModel,\n          configModel: this._configModel,\n          userModel: this._userModel,\n          modals: this._modals\n        });\n        this.addView(labelsFormView);\n        this.$('.js-propertiesForm').append(labelsFormView.render().el);\n      }\n\n      if (this._queryGeometryModel.get('simple_geom') === 'point' &&\n         (styleType === StyleConstants.Type.ANIMATION || styleType === StyleConstants.Type.HEATMAP)) {\n        animatedFormView = new StyleAnimatedPropertiesFormView({\n          layerDefinitionsCollection: this._layerDefinitionsCollection,\n          layerDefinitionModel: this._layerDefinitionModel,\n          styleModel: this._styleModel,\n          queryGeometryModel: this._queryGeometryModel,\n          querySchemaModel: this._querySchemaModel,\n          userModel: this._userModel,\n          configModel: this._configModel,\n          modals: this._modals\n        });\n\n        this.addView(animatedFormView);\n        this.$('.js-propertiesForm').append(animatedFormView.render().el);\n      }\n    }\n  },\n\n  _isUnanimatable: function () {\n    return this._querySchemaModel.columnsCollection.filter(function (colModel) {\n      return colModel.get('type') === 'number' || colModel.get('type') === 'date';\n    }).length === 0 && this._styleModel.get('type') === 'animated';\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"Editor-HeaderInfo js-styleProperties\">\\n  <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">' +\n__e( stepNumber ) +\n'</div>\\n  <div class=\"Editor-HeaderInfo-inner CDB-Text js-selector\">\\n    <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n      <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">\\n        ' +\n__e( _t('editor.style.style-form.properties.title-label-' + simpleGeometry) ) +\n'\\n      </h2>\\n    </div>\\n    <p class=\"CDB-Text u-upperCase CDB-FontSize-small u-altTextColor u-bSpace--m js-highlight\">' +\n__e( _t('editor.style.style-form.properties.desc') ) +\n'</p>\\n    <div class=\"js-propertiesForm\"></div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar StylesFactory = require('builder/editor/style/styles-factory');\nvar StyleFormDefaultModel = require('builder/editor/style/style-form/style-form-default-model');\nvar StyleConstants = require('builder/components/form-components/_constants/_style');\nvar MetricsTracker = require('builder/components/metrics/metrics-tracker');\nvar MetricsTypes = require('builder/components/metrics/metrics-types');\n\nvar FILL_PROPERTIES = [\n  { source: 'size', value: 'fillSize' },\n  { source: 'color', value: 'fillColor' }\n];\n\nvar STROKE_PROPERTIES = [\n  { source: 'size', value: 'strokeSize' },\n  { source: 'color', value: 'strokeColor' }\n];\n\nmodule.exports = StyleFormDefaultModel.extend({\n\n  parse: function (response) {\n    var geom = response.geom;\n\n    var fields = {\n      style: response.style,\n      fillSize: response.fill && response.fill.size,\n      fillColor: response.fill && response.fill.color,\n      strokeSize: response.stroke && response.stroke.size,\n      strokeColor: response.stroke && response.stroke.color,\n      blending: response.blending\n    };\n\n    var isAggregatedType = _.contains(StylesFactory.getAggregationTypes(), response.type);\n    if (isAggregatedType || geom === 'polygon') {\n      fields = _.omit(fields, 'fillSize');\n    }\n\n    if (geom === 'line') {\n      fields = _.omit(fields, 'fillSize');\n      fields = _.omit(fields, 'fillColor');\n    }\n\n    if (response.type === StyleConstants.Type.HEATMAP || response.type === StyleConstants.Type.ANIMATION && response.style === StyleConstants.Type.HEATMAP) {\n      fields = _.omit(fields, 'strokeSize', 'strokeColor', 'blending');\n    }\n\n    if (response.type !== StyleConstants.Type.ANIMATION) {\n      fields = _.omit(fields, 'style');\n    }\n\n    return fields;\n  },\n\n  _onChange: function () {\n    var attrs = this._getUpdatedPartialProperties();\n\n    this._styleModel.set(attrs);\n\n    MetricsTracker.track(MetricsTypes.CHANGED_DEFAULT_GEOMETRY);\n  },\n\n  _getUpdatedPartialProperties: function () {\n    var attrs = _.clone(this.attributes);\n\n    this._setProperties(FILL_PROPERTIES, 'fill', attrs);\n    this._setProperties(STROKE_PROPERTIES, 'stroke', attrs);\n\n    return attrs;\n  },\n\n  _setProperties: function (properties, propertyName, attrs) {\n    attrs[propertyName] = _.extend(this._styleModel.get(propertyName));\n    properties.forEach(function (property) {\n      if (attrs[property.value]) {\n        attrs[propertyName][property.source] = attrs[property.value];\n      }\n    });\n\n    return attrs;\n  }\n});\n","var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nrequire('builder/components/form-components/index');\nvar StyleShapeFormModel = require('./style-shape-properties-form-model');\n\nmodule.exports = CoreView.extend({\n\n  className: 'u-tSpace--m',\n\n  initialize: function (opts) {\n    if (!opts.queryGeometryModel) throw new Error('queryGeometryModel is required');\n    if (!opts.querySchemaModel) throw new Error('querySchemaModel is required');\n    if (!opts.styleModel) throw new Error('styleModel is required');\n    if (!opts.configModel) throw new Error('configModel is required');\n    if (!opts.userModel) throw new Error('userModel is required');\n    if (!opts.modals) throw new Error('modals is required');\n\n    this._queryGeometryModel = opts.queryGeometryModel;\n    this._querySchemaModel = opts.querySchemaModel;\n    this._styleModel = opts.styleModel;\n    this._configModel = opts.configModel;\n    this._userModel = opts.userModel;\n    this._modals = opts.modals;\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this._removeFormView();\n    this.$el.empty();\n    this._initViews();\n    return this;\n  },\n\n  _initBinds: function () {\n    this._styleModel.bind('change:style', function () {\n      var style = this._styleModel.get('style');\n      this._styleModel.setFill(style);\n      this.render();\n    }, this);\n\n    this.add_related_model(this._styleModel);\n  },\n\n  _initViews: function () {\n    this._shapeFormModel = new StyleShapeFormModel(\n      {\n        type: this._styleModel.get('type'),\n        geom: this._queryGeometryModel.get('simple_geom'),\n        style: this._styleModel.get('style'),\n        fill: this._styleModel.get('fill'),\n        stroke: this._styleModel.get('stroke'),\n        blending: this._styleModel.get('blending')\n      },\n      {\n        parse: true,\n        queryGeometryModel: this._queryGeometryModel,\n        querySchemaModel: this._querySchemaModel,\n        configModel: this._configModel,\n        userModel: this._userModel,\n        modals: this._modals,\n        styleModel: this._styleModel\n      }\n    );\n\n    this._shapeFormView = new Backbone.Form({\n      model: this._shapeFormModel\n    });\n\n    this._shapeFormView.bind('change', function () {\n      this.commit();\n    });\n\n    this.$el.append(this._shapeFormView.render().el);\n  },\n\n  _removeFormView: function () {\n    if (this._shapeFormView) {\n      this._shapeFormView.remove();\n    }\n  },\n\n  clean: function () {\n    this._removeFormView();\n    CoreView.prototype.clean.call(this);\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar template = require('./style-unanimatable.tpl');\nvar VisTableModel = require('builder/data/visualization-table-model');\nvar linkTemplate = _.template('<a href=\"<%- url %>\" target=\"_blank\" title=\"<%- tableName %>\"><%- label %></a>');\n\nvar REQUIRED_OPTS = [\n  'layerDefinitionModel',\n  'configModel'\n];\n\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    var tableName;\n\n    _.each(REQUIRED_OPTS, function (item) {\n      if (!opts[item]) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n\n    this._sourceNode = this._getSourceNode();\n\n    if (this._sourceNode) {\n      tableName = this._sourceNode.get('table_name');\n      this._visTableModel = new VisTableModel({\n        id: tableName,\n        table: {\n          name: tableName\n        }\n      }, {\n        configModel: this._configModel\n      });\n    }\n  },\n\n  render: function () {\n    var desc = this._getDescTemplate();\n\n    this.clearSubViews();\n    this.$el.html(template({\n      title: _t('editor.style.style-form.unanimatable.desc'),\n      desc: desc\n    }));\n    return this;\n  },\n\n  _getDescTemplate: function () {\n    var tableName = '';\n    var url = '';\n    var tableModel;\n\n    if (this._visTableModel) {\n      tableModel = this._visTableModel.getTableModel();\n      tableName = tableModel.getUnquotedName();\n      url = this._visTableModel && this._visTableModel.datasetURL();\n    }\n\n    var linkHTML = linkTemplate({\n      url: url,\n      tableName: tableName,\n      label: _t('editor.style.style-form.unanimatable.label')\n    });\n\n    return _t('editor.style.style-form.unanimatable.body', {\n      link: linkHTML\n    });\n  },\n\n  _getSourceNode: function () {\n    var node = this._layerDefinitionModel.getAnalysisDefinitionNodeModel();\n    var source;\n    var primarySource;\n    if (node.get('type') === 'source') {\n      source = node;\n    } else {\n      primarySource = node.getPrimarySource();\n      if (primarySource && primarySource.get('type') === 'source') {\n        source = primarySource;\n      }\n    }\n\n    return source;\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<h2 class=\"CDB-Text CDB-Size-huge is-light u-secondaryTextColor\">' +\n__e( title ) +\n'</h2>\\n<p class=\"CDB-Text u-tSpace--m CDB-Size-medium u-altTextColor\">' +\n((__t = ( desc )) == null ? '' : __t) +\n'</p>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"56px\" height=\"16px\" viewBox=\"718 455 56 16\">\\n    <g id=\"animated\" transform=\"translate(718.000000, 455.000000)\" class=\"Style-fill\">\\n        <rect id=\"Rectangle-649\" x=\"40\" y=\"0\" width=\"16\" height=\"16\" rx=\"8\"></rect>\\n        <rect id=\"Rectangle-649\" opacity=\"0.8\" x=\"30\" y=\"0\" width=\"16\" height=\"16\" rx=\"8\"></rect>\\n        <rect id=\"Rectangle-649\" opacity=\"0.6\" x=\"20\" y=\"0\" width=\"16\" height=\"16\" rx=\"8\"></rect>\\n        <rect id=\"Rectangle-649\" opacity=\"0.4\" x=\"10\" y=\"0\" width=\"16\" height=\"16\" rx=\"8\"></rect>\\n        <rect id=\"Rectangle-649\" opacity=\"0.2\" x=\"0\" y=\"0\" width=\"16\" height=\"16\" rx=\"8\"></rect>\\n    </g>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"56px\" height=\"25px\" viewBox=\"0 0 56 25\" style=\"will-change: opacity;\">\\n    <g id=\"Symbols\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\\n        <g id=\"Aggregation-/-Heatmap\" transform=\"translate(-15.000000, -16.000000)\">\\n            <g id=\"Group-7\">\\n                <g transform=\"translate(15.000000, 16.000000)\">\\n                    <g id=\"Group-2\" style=\"mix-blend-mode: luminosity;\" transform=\"translate(28.000000, 12.500000) rotate(-90.000000) translate(-28.000000, -12.500000) translate(15.500000, -15.500000)\" class=\"Style-fill\">\\n                        <g id=\"heat-copy-2\" transform=\"translate(0.000000, 36.000000)\">\\n                            <circle id=\"Oval-120\" opacity=\"0.4\" cx=\"6\" cy=\"6\" r=\"6\"></circle>\\n                            <circle id=\"Oval-120-Copy\" opacity=\"0.6\" cx=\"6.5\" cy=\"5.5\" r=\"4.03333333\"></circle>\\n                            <path d=\"M6.5,8.06666667 C7.91753086,8.06666667 9.06666667,6.91753086 9.06666667,5.5 C9.06666667,4.08246914 7.91753086,2.93333333 6.5,2.93333333 C5.08246914,2.93333333 3.93333333,4.08246914 3.93333333,5.5 C3.93333333,6.91753086 5.08246914,8.06666667 6.5,8.06666667 Z\" id=\"Oval-120-Copy-2\" opacity=\"0.8\"></path>\\n                            <circle id=\"Oval-120-Copy-3\" cx=\"6.5\" cy=\"5.5\" r=\"1.1\"></circle>\\n                        </g>\\n                        <g id=\"heat-copy-2\" transform=\"translate(13.000000, 48.000000)\">\\n                            <circle id=\"Oval-120\" opacity=\"0.4\" cx=\"4\" cy=\"4\" r=\"4\"></circle>\\n                            <circle id=\"Oval-120-Copy\" opacity=\"0.6\" cx=\"4\" cy=\"4\" r=\"2.93333333\"></circle>\\n                            <path d=\"M4,5.86666667 C5.03093153,5.86666667 5.86666667,5.03093153 5.86666667,4 C5.86666667,2.96906847 5.03093153,2.13333333 4,2.13333333 C2.96906847,2.13333333 2.13333333,2.96906847 2.13333333,4 C2.13333333,5.03093153 2.96906847,5.86666667 4,5.86666667 Z\" id=\"Oval-120-Copy-2\" opacity=\"0.8\"></path>\\n                            <circle id=\"Oval-120-Copy-3\" cx=\"4\" cy=\"4\" r=\"0.8\"></circle>\\n                        </g>\\n                        <g id=\"heat-copy-3\" transform=\"translate(0.500000, 0.500000)\">\\n                            <circle id=\"Oval-120\" opacity=\"0.4\" cx=\"12\" cy=\"12\" r=\"12\"></circle>\\n                            <ellipse id=\"Oval-120-Copy\" opacity=\"0.6\" cx=\"12\" cy=\"12\" rx=\"8.8\" ry=\"8.8\"></ellipse>\\n                            <path d=\"M12,17.6 C15.0927946,17.6 17.6,15.0927946 17.6,12 C17.6,8.9072054 15.0927946,6.4 12,6.4 C8.9072054,6.4 6.4,8.9072054 6.4,12 C6.4,15.0927946 8.9072054,17.6 12,17.6 Z\" id=\"Oval-120-Copy-2\" opacity=\"0.8\"></path>\\n                            <circle id=\"Oval-120-Copy-3\" cx=\"12\" cy=\"12\" r=\"2.4\"></circle>\\n                        </g>\\n                        <g id=\"heat\" transform=\"translate(8.000000, 25.000000)\">\\n                            <path d=\"M0.0682602115,8.5161863 C0.564222232,12.1776805 3.7025171,15 7.5,15 C11.6421356,15 15,11.6421356 15,7.5 C15,3.35786438 11.6421356,0 7.5,0 C3.35786438,0 0,3.35786438 0,7.5 C0,7.84465272 0.0232475903,8.18387567 0.0682602115,8.5161863 Z\" id=\"Oval-120\" opacity=\"0.4\"></path>\\n                            <circle id=\"Oval-120-Copy\" opacity=\"0.6\" cx=\"7.5\" cy=\"7.5\" r=\"5.5\"></circle>\\n                            <path d=\"M7.5,11 C9.43299662,11 11,9.43299662 11,7.5 C11,5.56700338 9.43299662,4 7.5,4 C5.56700338,4 4,5.56700338 4,7.5 C4,9.43299662 5.56700338,11 7.5,11 Z\" id=\"Oval-120-Copy-2\" opacity=\"0.8\"></path>\\n                            <circle id=\"Oval-120-Copy-3\" cx=\"7.5\" cy=\"7.5\" r=\"1.5\"></circle>\\n                        </g>\\n                    </g>\\n                    <g id=\"Group-8\" style=\"mix-blend-mode: luminosity;\" transform=\"translate(15.000000, 4.000000)\">\\n                        <path opacity=\"0.4\" d=\"M6,0.5 C6,0.5 10,4 13,0 C12,2.5 11.5,4.5 11.5,4.5 L10.5,6.5 L7,3.5 L6,0.5 Z\" id=\"Path-494\" class=\"Style-fill\"></path>\\n                        <path opacity=\"0.4\" d=\"M21.2158501,6.00893743 C21.2158501,6.00893743 25.2158501,9.50893743 28.2158501,5.50893743 C27.2158501,8.00893743 26.7158501,10.0089374 26.7158501,10.0089374 L25.7158501,12.0089374 L22.2158501,9.00893743 L21.2158501,6.00893743 Z\" id=\"Path-494\" class=\"Style-fill\" transform=\"translate(24.715850, 8.758937) rotate(52.000000) translate(-24.715850, -8.758937) \"></path>\\n                        <path opacity=\"0.4\" d=\"M16.9683476,9.30864826 C16.9683476,9.30864826 22.1000758,13.6622016 25.1000758,9.66220164 C24.1000758,12.1622016 23.8307892,14.1229281 23.8307892,14.1229281 L22.8307892,16.1229281 L17.6754544,11.4299685 L16.9683476,9.30864826 Z\" id=\"Path-494\" class=\"Style-fill\" transform=\"translate(21.034212, 12.715788) rotate(-135.000000) translate(-21.034212, -12.715788) \"></path>\\n                        <path opacity=\"0.4\" d=\"M6.01244045,6.22463473 C6.01244045,6.22463473 9.69418934,8.6717337 12.6941893,4.6717337 C11.6941893,7.1717337 11.1941893,9.1717337 11.1941893,9.1717337 L10.8665273,11.557349 L9.7765744,13.8621271 L6.01244045,6.22463473 Z\" id=\"Path-494\" class=\"Style-fill\" transform=\"translate(9.353315, 9.266930) rotate(-194.000000) translate(-9.353315, -9.266930) \"></path>\\n                        <path opacity=\"0.6\" d=\"M6,7.5 C5.85295664,5.882523 3.5,2.5 3.5,2.5 C3.5,2.5 6.5,5 9,5 C11.5,5 14.5,1 14.5,1 C14.5,1 12.5,4.25504557 12.5,6 C12.5,7.25504557 14.5,10 14.5,10 C14.5,10 12,8 9.5,8 C7,8 4.5,13.5 4.5,13.5 C4.5,13.5 6.18628997,9.54918967 6,7.5 Z\" id=\"Path-497\" class=\"Style-fill\"></path>\\n                        <path opacity=\"0.6\" d=\"M19.7830175,9.69012543 C19.6894445,8.07264843 16.7664559,5.429802 16.7664559,5.429802 C16.7664559,5.429802 20.2086087,8.27970692 21.7995178,8.27970692 C23.3904269,8.27970692 26.4566805,5.77970692 26.4566805,5.77970692 C26.4566805,5.77970692 24.4742142,8.43779004 24.4742142,10.1827445 C24.4742142,11.43779 25.8285796,12.5099091 25.8285796,12.5099091 C25.8285796,12.5099091 23.7086087,11.2797069 22.1176996,11.2797069 C20.5267905,11.2797069 17.9729009,15.2555074 17.9729009,15.2555074 C17.9729009,15.2555074 19.9015657,11.7393151 19.7830175,9.69012543 Z\" id=\"Path-497\" class=\"Style-fill\" transform=\"translate(21.611568, 10.342655) rotate(52.000000) translate(-21.611568, -10.342655) \"></path>\\n                        <path id=\"Path-499\" stroke=\"#979797\"></path>\\n                        <polygon id=\"Path-500\" class=\"Style-fill\" points=\"0.5 12.5 5 7.5 1 4\"></polygon>\\n                    </g>\\n                </g>\\n            </g>\\n        </g>\\n    </g>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"52px\" height=\"23px\" viewBox=\"0 0 52 23\">\\n    <g id=\"Symbols\">\\n        <g id=\"Aggregation-/-Hexabins\" transform=\"translate(-15.000000, -17.000000)\" class=\"Style-fill\">\\n            <g id=\"Hexabins\">\\n                <g transform=\"translate(15.000000, 17.000000)\">\\n                    <polygon id=\"Polygon-1-Copy-4\" points=\"23 11 28 14 28 20 23 23 18 20 18 14\"></polygon>\\n                    <polygon id=\"Polygon-1-Copy-8\" points=\"17 0 22 3 22 9 17 12 12 9 12 3\"></polygon>\\n                    <polygon id=\"Polygon-1-Copy-8\" points=\"5 0 10 3 10 9 5 12 -1.15463195e-13 9 3.85466323e-09 3\"></polygon>\\n                    <polygon id=\"Polygon-1-Copy-13\" points=\"29 0 34 3 34 9 29 12 24 9 24 3\"></polygon>\\n                    <polygon id=\"Polygon-1-Copy-15\" points=\"41 0 46 3 46 9 41 12 36 9 36 3\"></polygon>\\n                    <polygon id=\"Polygon-1-Copy-14\" points=\"35 11 40 14 40 20 35 23 30 20 30 14\"></polygon>\\n                    <polygon id=\"Polygon-1-Copy-14\" points=\"47 11 52 14 52 20 47 23 42 20 42 14\"></polygon>\\n                </g>\\n            </g>\\n        </g>\\n    </g>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"56px\" height=\"24px\" viewBox=\"16 16 56 24\">\\n    <g id=\"points\" transform=\"translate(16.000000, 16.000000)\"  class=\"Style-fill\">\\n        <path d=\"M6,10 C8.209139,10 10,8.209139 10,6 C10,3.790861 8.209139,2 6,2 C3.790861,2 2,3.790861 2,6 C2,8.209139 3.790861,10 6,10 Z\" id=\"Oval-59\"></path>\\n        <path d=\"M52,8 C54.209139,8 56,6.209139 56,4 C56,1.790861 54.209139,0 52,0 C49.790861,0 48,1.790861 48,4 C48,6.209139 49.790861,8 52,8 Z\" id=\"Oval-59-Copy-2\"></path>\\n        <path d=\"M52,22 C54.209139,22 56,20.209139 56,18 C56,15.790861 54.209139,14 52,14 C49.790861,14 48,15.790861 48,18 C48,20.209139 49.790861,22 52,22 Z\" id=\"Oval-59-Copy-3\"></path>\\n        <path d=\"M4,24 C6.209139,24 8,22.209139 8,20 C8,17.790861 6.209139,16 4,16 C1.790861,16 0,17.790861 0,20 C0,22.209139 1.790861,24 4,24 Z\" id=\"Oval-59-Copy\"></path>\\n        <path d=\"M28,8 C30.209139,8 32,6.209139 32,4 C32,1.790861 30.209139,0 28,0 C25.790861,0 24,1.790861 24,4 C24,6.209139 25.790861,8 28,8 Z\" id=\"Oval-59-Copy-4\"></path>\\n        <path d=\"M24,20 C26.209139,20 28,18.209139 28,16 C28,13.790861 26.209139,12 24,12 C21.790861,12 20,13.790861 20,16 C20,18.209139 21.790861,20 24,20 Z\" id=\"Oval-59-Copy-4\"></path>\\n        <path d=\"M16,16 C18.209139,16 20,14.209139 20,12 C20,9.790861 18.209139,8 16,8 C13.790861,8 12,9.790861 12,12 C12,14.209139 13.790861,16 16,16 Z\" id=\"Oval-59-Copy-4\"></path>\\n        <path d=\"M44,12 C46.209139,12 48,10.209139 48,8 C48,5.790861 46.209139,4 44,4 C41.790861,4 40,5.790861 40,8 C40,10.209139 41.790861,12 44,12 Z\" id=\"Oval-59-Copy-4\"></path>\\n    </g>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"56px\" height=\"24px\" viewBox=\"0 0 56 24\">\\n    <g id=\"Symbols\">\\n        <g id=\"Aggregation-/-Admin-Regions\" transform=\"translate(-16.000000, -16.000000)\" class=\"Style-fill\">\\n            <g id=\"regions\">\\n                <g transform=\"translate(16.000000, 16.000000)\">\\n                    <polygon id=\"Rectangle-649\" points=\"9 8 1 0 27 0 27 17 36 17 36.0065918 23.9934082 25 24 9 16\"></polygon>\\n                    <polygon id=\"Rectangle-649\" points=\"0 2 7 9 7 17 21 24 0 24 0 15\"></polygon>\\n                    <polygon id=\"Rectangle-649\" points=\"29 0 50 0 50 6 56 6 56 24 48 24 38 24 38 15 29 15\"></polygon>\\n                    <rect id=\"Rectangle-1933\" x=\"52\" y=\"0\" width=\"4\" height=\"4\"></rect>\\n                </g>\\n            </g>\\n        </g>\\n    </g>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"58px\" height=\"28px\" viewBox=\"0 0 58 28\">\\n    <g id=\"Symbols\">\\n        <g id=\"Aggregation-/-Squares\" transform=\"translate(-15.000000, -14.000000)\" class=\"Style-fill\">\\n            <g id=\"squares\">\\n                <g transform=\"translate(15.000000, 14.000000)\">\\n                    <rect id=\"Rectangle-847-Copy-2\" x=\"10\" y=\"0\" width=\"8\" height=\"8\" rx=\"1\"></rect>\\n                    <rect id=\"Rectangle-847-Copy-5\" x=\"30\" y=\"20\" width=\"8\" height=\"8\" rx=\"1\"></rect>\\n                    <rect id=\"Rectangle-847-Copy-12\" x=\"40\" y=\"20\" width=\"8\" height=\"8\" rx=\"1\"></rect>\\n                    <rect id=\"Rectangle-847-Copy-13\" x=\"40\" y=\"10\" width=\"8\" height=\"8\" rx=\"1\"></rect>\\n                    <rect id=\"Rectangle-847-Copy-8\" x=\"20\" y=\"10\" width=\"8\" height=\"8\" rx=\"1\"></rect>\\n                    <rect id=\"Rectangle-847-Copy-6\" x=\"30\" y=\"10\" width=\"8\" height=\"8\" rx=\"1\"></rect>\\n                    <rect id=\"Rectangle-847-Copy-9\" x=\"20\" y=\"20\" width=\"8\" height=\"8\" rx=\"1\"></rect>\\n                    <rect id=\"Rectangle-847-Copy-10\" x=\"10\" y=\"10\" width=\"8\" height=\"8\" rx=\"1\"></rect>\\n                    <rect id=\"Rectangle-847-Copy-10\" x=\"0\" y=\"10\" width=\"8\" height=\"8\" rx=\"1\"></rect>\\n                    <rect id=\"Rectangle-847-Copy-10\" x=\"50\" y=\"20\" width=\"8\" height=\"8\" rx=\"1\"></rect>\\n                    <rect id=\"Rectangle-847-Copy-11\" x=\"20\" y=\"0\" width=\"8\" height=\"8\" rx=\"1\"></rect>\\n                </g>\\n            </g>\\n        </g>\\n    </g>\\n</svg>';\n\n}\nreturn __p\n}","var StyleGenerator = require('./style-converter');\nvar _ = require('underscore');\n\n/**\n * this class manages the changes in layerdef styles and generate the proper cartocss and sql\n */\nfunction StyleManager (layerDefinitionsCollection, map, configModel) {\n  this.layerDefinitionsCollection = layerDefinitionsCollection;\n  this.map = map;\n  this._configModel = configModel;\n  this._initBinds();\n}\n\nStyleManager.prototype = {\n  _initBinds: function () {\n    var self = this;\n\n    function _generate (layerDef) {\n      return function () {\n        self.generate(layerDef);\n      };\n    }\n\n    function _bind (layerDef) {\n      if (layerDef && layerDef.styleModel) {\n        layerDef.styleModel.bind('change', _generate(layerDef), this);\n        layerDef.bind('change:autoStyle', _generate(layerDef), this);\n      }\n    }\n\n    function _unbind (layerDef) {\n      if (layerDef.styleModel) {\n        layerDef.styleModel.unbind('change', _generate(layerDef), this);\n        layerDef.unbind('change:autoStyle', _generate(layerDef), this);\n      }\n    }\n\n    function _bindAll () {\n      this.layerDefinitionsCollection.each(_bind, this);\n    }\n\n    this.layerDefinitionsCollection.bind('reset', _bindAll, this);\n    this.layerDefinitionsCollection.bind('add', _bind, this);\n    this.layerDefinitionsCollection.bind('remove', _unbind, this);\n\n    _bindAll.call(this);\n  },\n\n  generate: function (layerDef) {\n    var isAutoStyleApplied = layerDef.get('autoStyle');\n    var stylesChanged = layerDef.styleModel.changed;\n\n    if (isAutoStyleApplied) {\n      return;\n    }\n\n    if (stylesChanged.type && _.size(stylesChanged) === 1) {\n      return;\n    }\n\n    var simpleGeometryType = layerDef.getAnalysisDefinitionNodeModel().queryGeometryModel.get('simple_geom') || 'point';\n    var generated = StyleGenerator.generateStyle(\n      layerDef.styleModel.toJSON(),\n      simpleGeometryType,\n      {\n        zoom: this.map.get('zoom')\n      },\n      this._configModel\n    );\n\n    var properties = {\n      cartocss: generated.cartoCSS,\n      sql_wrap: generated.sql,\n      type: generated.layerType\n    };\n\n    if (layerDef.get('previousCartoCSSCustom')) {\n      properties = _.extend(properties, {\n        cartocss: layerDef.get('previousCartoCSS'),\n        cartocss_custom: layerDef.get('previousCartoCSSCustom'),\n        previousCartoCSSCustom: false\n      });\n    }\n\n    layerDef.set(properties);\n  }\n};\n\nmodule.exports = StyleManager;\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar PanelWithOptionsView = require('builder/components/view-options/panel-with-options-view');\nvar StyleContentView = require('./style-content-view');\nvar StyleCartoCSSView = require('./style-cartocss-view');\nvar ScrollView = require('builder/components/scroll/scroll-view');\nvar TabPaneView = require('builder/components/tab-pane/tab-pane-view');\nvar TabPaneCollection = require('builder/components/tab-pane/tab-pane-collection');\nvar Toggler = require('builder/components/toggler/toggler-view');\nvar UndoButtons = require('builder/components/undo-redo/undo-redo-view');\nvar ParserCSS = require('builder/helpers/parser-css');\nvar Infobox = require('builder/components/infobox/infobox-factory');\nvar InfoboxModel = require('builder/components/infobox/infobox-model');\nvar InfoboxCollection = require('builder/components/infobox/infobox-collection');\nvar Notifier = require('builder/components/notifier/notifier');\nvar CartoCSSNotifications = require('builder/cartocss-notifications');\nvar MetricsTracker = require('builder/components/metrics/metrics-tracker');\nvar MetricsTypes = require('builder/components/metrics/metrics-types');\n\nvar OnboardingLauncher = require('builder/components/onboardings/generic/generic-onboarding-launcher');\nvar OnboardingView = require('builder/components/onboardings/layers/style-onboarding/style-onboarding-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar ONBOARDING_KEY = 'layer-style-onboarding';\n\nvar REQUIRED_OPTS = [\n  'layerDefinitionsCollection',\n  'layerDefinitionModel',\n  'userActions',\n  'queryGeometryModel',\n  'querySchemaModel',\n  'queryRowsCollection',\n  'modals',\n  'editorModel',\n  'configModel',\n  'userModel',\n  'onboardings',\n  'onboardingNotification',\n  'layerContentModel'\n];\n\nmodule.exports = CoreView.extend({\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._styleModel = this._layerDefinitionModel.styleModel;\n    this._cartocssModel = this._layerDefinitionModel.cartocssModel;\n    this._codemirrorModel = new Backbone.Model({\n      content: this._layerDefinitionModel.get('cartocss')\n    });\n\n    // Set edition attribute in case custom cartocss is applied\n    this._editorModel.set({\n      edition: !!this._layerDefinitionModel.get('cartocss_custom'),\n      disabled: false\n    });\n\n    this._infoboxModel = new InfoboxModel({\n      state: this._isLayerHidden() ? 'layer-hidden' : ''\n    });\n\n    this._overlayModel = new Backbone.Model({\n      visible: this._isLayerHidden()\n    });\n\n    this._applyButtonStatusModel = new Backbone.Model({\n      loading: false\n    });\n\n    this._togglerModel = new Backbone.Model({\n      labels: [_t('editor.style.style-toggle.values'), _t('editor.style.style-toggle.cartocss')],\n      active: this._editorModel.isEditing(),\n      disabled: this._editorModel.isDisabled(),\n      isDisableable: true,\n      tooltip: _t('editor.style.style-toggle.tooltip')\n    });\n\n    this._appendMapsAPIError();\n\n    CartoCSSNotifications.track(this);\n\n    this._onboardingLauncher = new OnboardingLauncher({\n      view: OnboardingView,\n      onboardingNotification: this._onboardingNotification,\n      notificationKey: ONBOARDING_KEY,\n      onboardings: this._onboardings\n    }, {\n      editorModel: this._editorModel,\n      selector: 'LayerOnboarding'\n    });\n\n    this._configPanes();\n    this._initBinds();\n  },\n\n  render: function () {\n    this._launchOnboarding();\n    this.clearSubViews();\n    this.$el.empty();\n\n    this._initViews();\n    this._infoboxState();\n\n    return this;\n  },\n\n  _launchOnboarding: function () {\n    if (this._onboardingNotification.getKey(ONBOARDING_KEY)) {\n      return;\n    }\n\n    var georeferencePromise = this._layerDefinitionModel.canBeGeoreferenced();\n    var hasGeomPromise = this._queryGeometryModel.hasValueAsync();\n    var launchOnboarding = function (canBeGeoreferenced, hasGeom) {\n      if (!this._editorModel.isEditing() && !canBeGeoreferenced && hasGeom) {\n        this._onboardingLauncher.launch({\n          geom: this._queryGeometryModel.get('simple_geom'),\n          type: this._styleModel.get('type')\n        });\n      }\n    }.bind(this);\n\n    Promise.all([georeferencePromise, hasGeomPromise])\n      .then(function (values) {\n        launchOnboarding(values[0], values[1]);\n      });\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._layerDefinitionModel, 'change:error', this._appendMapsAPIError);\n    this.listenTo(this._layerDefinitionModel, 'change:cartocss', this._onCartocssChanged);\n    this.listenTo(this._layerDefinitionModel, 'change:visible', this._infoboxState);\n    this.listenTo(this._layerDefinitionModel, 'change:autoStyle', this._infoboxState);\n\n    this.listenTo(this._editorModel, 'change:edition', this._onChangeEdition);\n    this.listenTo(this._editorModel, 'change:disabled', this._onChangeDisabled);\n    this.listenTo(this._togglerModel, 'change:active', this._onTogglerChanged);\n\n    this.listenTo(this._querySchemaModel, 'change:query_errors', this._updateEditor);\n\n    this.listenTo(this._styleModel, 'change', this._onCartocssChanged);\n    this.listenTo(this._cartocssModel, 'undo redo', this._onUndoRedo);\n  },\n\n  _initViews: function () {\n    var self = this;\n\n    var infoboxSstates = [\n      {\n        state: 'confirm',\n        createContentView: function () {\n          return Infobox.createWithAction({\n            type: 'alert',\n            title: _t('editor.style.messages.cartocss-applied.title'),\n            body: _t('editor.style.messages.cartocss-applied.body'),\n            action: {\n              label: _t('editor.style.messages.cartocss-applied.clear')\n            }\n          });\n        },\n        onAction: self._clearCustomStyles.bind(self),\n        onClose: self._cancelClearStyles.bind(self)\n      }, {\n        state: 'layer-hidden',\n        createContentView: function () {\n          return Infobox.createWithAction({\n            type: self._layerDefinitionModel.get('cartocss_custom') ? 'code' : 'alert',\n            title: _t('editor.messages.layer-hidden.title'),\n            body: _t('editor.messages.layer-hidden.body'),\n            action: {\n              label: _t('editor.messages.layer-hidden.show')\n            }\n          });\n        },\n        onAction: self._showHiddenLayer.bind(self)\n      }, {\n        state: 'torque-exists',\n        createContentView: function () {\n          return Infobox.createWithAction({\n            type: 'alert',\n            title: _t('editor.style.messages.torque-exists.title'),\n            body: _t('editor.style.messages.torque-exists.body'),\n            action: {\n              label: _t('editor.style.messages.torque-exists.continue')\n            }\n          });\n        },\n        onAction: self._applyTorqueAggregation.bind(self),\n        onClose: self._cancelTorqueAggregation.bind(self)\n      }\n    ];\n\n    var infoboxCollection = new InfoboxCollection(infoboxSstates);\n\n    var panelWithOptionsView = new PanelWithOptionsView({\n      className: 'Editor-content',\n      editorModel: self._editorModel,\n      infoboxModel: self._infoboxModel,\n      infoboxCollection: infoboxCollection,\n      createContentView: function () {\n        return new TabPaneView({\n          collection: self._collectionPane\n        });\n      },\n      createControlView: function () {\n        return new Toggler({\n          model: self._togglerModel\n        });\n      },\n      createActionView: function () {\n        return new TabPaneView({\n          collection: self._collectionPane,\n          createContentKey: 'createActionView'\n        });\n      }\n    });\n\n    this.$el.append(panelWithOptionsView.render().el);\n    this.addView(panelWithOptionsView);\n  },\n\n  _onCartocssChanged: function () {\n    this._codemirrorModel.set('content', this._layerDefinitionModel.get('cartocss'));\n  },\n\n  _onUndoRedo: function () {\n    this._codemirrorModel.set('content', this._cartocssModel.get('content'));\n  },\n\n  _appendMapsAPIError: function () {\n    var error = this._layerDefinitionModel.get('error');\n    if (error) {\n      if (error.subtype === 'turbo-carto') {\n        var newErrors = _.clone(this._codemirrorModel.get('errors')) || [];\n        newErrors.push({ line: error.line, message: error.message });\n        this._codemirrorModel.set('errors', newErrors);\n      }\n    }\n  },\n\n  _updateEditor: function (model) {\n    var errors = this._querySchemaModel.get('query_errors');\n    var hasErrors = errors && errors.length > 0;\n    this._editorModel.set('disabled', hasErrors);\n  },\n\n  _saveCartoCSS: function (cb) {\n    var content = this._codemirrorModel.get('content');\n    var parser = new ParserCSS(content);\n    var errors = parser.errors();\n\n    if (!content) {\n      return false;\n    }\n\n    this._applyButtonStatusModel.set('loading', true);\n    this._codemirrorModel.set('errors', parser.parseError(errors));\n\n    if (errors.length === 0) {\n      this._cartocssModel.set('content', content);\n\n      // Disable auto-style before saving, in order to not reset styles\n      this._layerDefinitionModel.set('autoStyle', false);\n\n      this._layerDefinitionModel.save({\n        cartocss_custom: true,\n        cartocss: content\n      }, {\n        complete: cb\n      });\n\n      MetricsTracker.track(MetricsTypes.APPLIED_CARTOCSS, {\n        layer_id: this._layerDefinitionModel.get('id'),\n        cartocss: this._layerDefinitionModel.get('cartocss')\n      });\n\n      MetricsTracker.track(MetricsTypes.USED_ADVANCED_MODE, {\n        mode_type: 'cartocss'\n      });\n    } else {\n      this._editorModel.get('edition') === false && CartoCSSNotifications.showErrorNotification(parser.parseError(errors));\n      this._applyButtonStatusModel.set('loading', false);\n    }\n  },\n\n  _onSaveComplete: function () {\n    CartoCSSNotifications.showSuccessNotification();\n    this._applyButtonStatusModel.set('loading', false);\n  },\n\n  _cancelClearStyles: function () {\n    this._infoboxModel.set({ state: '' });\n    this._overlayModel.set({ visible: false });\n\n    this._editorModel.set({\n      edition: true\n    });\n  },\n\n  _clearCustomStyles: function () {\n    this._layerDefinitionModel.set('cartocss_custom', false);\n    this._styleModel.applyLastState();\n    this._infoboxModel.set({ state: '' });\n    this._overlayModel.set({ visible: false });\n    this.render();\n  },\n\n  _cancelTorqueAggregation: function () {\n    this._styleModel.applyLastState();\n    this._infoboxModel.set({ state: '' });\n    this._overlayModel.set({ visible: false });\n    this.render();\n  },\n\n  _applyTorqueAggregation: function () {\n    if (this._layerDefinitionsCollection.isThereAnyTorqueLayer()) {\n      var torqueLayer = this._layerDefinitionsCollection.findWhere({ type: 'torque' });\n      torqueLayer.styleModel.setDefaultPropertiesByType('simple', 'point');\n    }\n\n    this._infoboxModel.set({ state: 'unfreeze' });\n  },\n\n  _onChangeEdition: function () {\n    this._infoboxState();\n\n    var edition = this._editorModel.get('edition');\n    var index = edition ? 1 : 0;\n    this._collectionPane.at(index).set({ selected: true });\n    this._togglerModel.set({ active: edition });\n  },\n\n  _onChangeDisabled: function () {\n    var disabled = this._editorModel.get('disabled');\n    this._togglerModel.set({ disabled: disabled });\n  },\n\n  _onTogglerChanged: function () {\n    var checked = this._togglerModel.get('active');\n    this._editorModel.set({ edition: checked });\n  },\n\n  _freezeTorgeAggregation: function (styleType, currentGeometryType) {\n    this._infoboxModel.set({ state: 'torque-exists' });\n    this._overlayModel.set({ visible: true });\n\n    // Apply the previously selected style\n    this._infoboxModel.once('change:state', function (mdl, state) {\n      if (state === 'unfreeze') {\n        this._moveTorqueLayerToTop(function () {\n          this._overlayModel.set({ visible: false });\n          this._styleModel.setDefaultPropertiesByType(styleType, currentGeometryType);\n        }.bind(this));\n        this._infoboxModel.set({ state: '' });\n      }\n    }, this);\n  },\n\n  _moveTorqueLayerToTop: function (callback) {\n    var notification = Notifier.addNotification({\n      status: 'loading',\n      info: _t('editor.layers.moveTorqueLayer.loading'),\n      closable: true\n    });\n\n    this._layerDefinitionsCollection.once('layerMoved', function () {\n      callback && callback();\n      notification.set({\n        status: 'success',\n        info: _t('editor.layers.moveTorqueLayer.success'),\n        delay: Notifier.DEFAULT_DELAY\n      });\n    }, this);\n\n    this._userActions.moveLayer({\n      from: this._layerDefinitionModel.get('order'),\n      to: this._layerDefinitionsCollection.getTopDataLayerIndex()\n    });\n  },\n\n  _configPanes: function () {\n    var self = this;\n    var tabPaneTabs = [{\n      selected: !this._layerDefinitionModel.get('cartocss_custom'),\n      createContentView: function () {\n        return new ScrollView({\n          createContentView: function () {\n            return new StyleContentView({\n              className: 'Editor-content',\n              userActions: self._userActions,\n              layerDefinitionsCollection: self._layerDefinitionsCollection,\n              layerDefinitionModel: self._layerDefinitionModel,\n              styleModel: self._styleModel,\n              modals: self._modals,\n              configModel: self._configModel,\n              userModel: self._userModel,\n              queryGeometryModel: self._queryGeometryModel,\n              querySchemaModel: self._querySchemaModel,\n              editorModel: self._editorModel,\n              overlayModel: self._overlayModel,\n              freezeTorgeAggregation: self._freezeTorgeAggregation.bind(self),\n              layerContentModel: self._layerContentModel\n            });\n          }\n        });\n      },\n      createActionView: function () {\n        return new UndoButtons({\n          trackModel: self._styleModel,\n          editorModel: self._editorModel,\n          applyButton: false\n        });\n      }\n    }, {\n      selected: this._layerDefinitionModel.get('cartocss_custom'),\n      createContentView: function () {\n        return new StyleCartoCSSView({\n          layerDefinitionModel: self._layerDefinitionModel,\n          querySchemaModel: self._querySchemaModel,\n          styleModel: self._styleModel,\n          editorModel: self._editorModel,\n          codemirrorModel: self._codemirrorModel,\n          onApplyEvent: self._saveCartoCSS.bind(self, self._onSaveComplete.bind(self)),\n          overlayModel: self._overlayModel\n        });\n      },\n      createActionView: function () {\n        return new UndoButtons({\n          trackModel: self._cartocssModel,\n          editorModel: self._editorModel,\n          applyStatusModel: self._applyButtonStatusModel,\n          applyButton: true,\n          onApplyClick: self._saveCartoCSS.bind(self, self._onSaveComplete.bind(self)),\n          overlayModel: self._overlayModel\n        });\n      }\n    }];\n\n    this._collectionPane = new TabPaneCollection(tabPaneTabs);\n  },\n\n  _isLayerHidden: function () {\n    return this._layerDefinitionModel.get('visible') === false;\n  },\n\n  _infoboxState: function () {\n    var edition = this._editorModel.get('edition');\n    var cartocss_custom = this._layerDefinitionModel.get('cartocss_custom');\n    var isAutoStyleApplied = this._layerDefinitionModel.get('autoStyle');\n\n    if (!edition && cartocss_custom && !isAutoStyleApplied) {\n      this._infoboxModel.set({ state: 'confirm' });\n      this._overlayModel.set({ visible: true });\n    } else if (this._isLayerHidden()) {\n      this._infoboxModel.set({ state: 'layer-hidden' });\n      this._overlayModel.set({ visible: true });\n      this._togglerModel.set({ disabled: true });\n    } else {\n      this._infoboxModel.set({ state: '' });\n      this._overlayModel.set({ visible: false });\n      this._togglerModel.set({ disabled: false });\n    }\n  },\n\n  _showHiddenLayer: function () {\n    var savingOptions = {\n      shouldPreserveAutoStyle: true\n    };\n    this._layerDefinitionModel.toggleVisible();\n    this._userActions.saveLayer(this._layerDefinitionModel, savingOptions);\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<nav class=\"CDB-NavMenu js-theme\">\\n  <ul class=\"CDB-NavSubmenu CDB-NavSubmenu--outside CDB-Size-small CDB-Text is-semibold js-menu\"></ul>\\n</nav>\\n<div class=\"Editor-content js-content\"></div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"u-flex u-justifyCenter\">\\n  <div class=\"Modal-inner Modal-inner--grid u-flex u-justifyCenter\">\\n    <div class=\"Modal-icon\">\\n      <svg width=\"24px\" height=\"25px\" viewbox=\"521 436 24 25\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n            <path d=\"M524.5,440 L540.5,440 L540.5,460 L524.5,460 L524.5,440 Z M528.5,437 L536.5,437 L536.5,440 L528.5,440 L528.5,437 Z M522,440 L544,440 L522,440 Z M528.5,443.5 L528.5,455.5 L528.5,443.5 Z M532.5,443.5 L532.5,455.5 L532.5,443.5 Z M536.5,443.5 L536.5,455.5 L536.5,443.5 Z\" id=\"Shape\" stroke=\"#F19243\" stroke-width=\"1\" fill=\"none\"/>\\n      </svg>\\n    </div>\\n    <div>\\n      <h2 class=\"CDB-Text CDB-Size-huge is-light u-bSpace--xl\">\\n        ' +\n__e( _t('editor.widgets.delete.title', { name: name }) ) +\n'\\n      </h2>\\n      <p class=\"CDB-Text CDB-Size-large u-altTextColor\">' +\n__e( _t('editor.widgets.delete.desc') ) +\n'</p>\\n      <ul class=\"Modal-listActions u-flex u-alignCenter\">\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--secondary CDB-Button--big js-cancel\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n              ' +\n__e( _t('editor.widgets.delete.cancel') ) +\n'\\n            </span>\\n          </button>\\n        </li>\\n        <li class=\"Modal-listActionsitem\">\\n          <button class=\"CDB-Button CDB-Button--primary CDB-Button--big js-confirm\">\\n            <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium u-upperCase\">\\n              ' +\n__e( _t('editor.widgets.delete.confirm') ) +\n'\\n            </span>\\n          </button>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<h2 class=\"Inline-editor\">\\n  <div class=\"CDB-Text CDB-Size-large u-ellipsis js-title Inline-editor-text\">' +\n__e( title ) +\n'</div>\\n  <input type=\"text\" name=\"text\" class=\"Inline-editor-input Inline-editor-input--small CDB-Text CDB-InputText js-input\" value=\"' +\n__e( title ) +\n'\" readonly>\\n</h2>';\n\n}\nreturn __p\n}","var Backbone = require('backbone');\nvar cdb = require('internal-carto.js');\nvar _ = require('underscore');\nvar moment = require('moment');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar QUERY_TEMPLATE = _.template('SELECT MAX(<%= column %>), MIN(<%= column %>) FROM (<%= table %>) __wrapped');\n\nvar STATUS = {\n  unavailable: 'unavailable',\n  unfetched: 'unfetched',\n  fetching: 'fetching',\n  fetched: 'fetched'\n};\n\nvar DEFAULT_MAX_BUCKETS = 367;\n\nvar REQUIRED_OPTS = [\n  'configModel',\n  'querySchemaModel'\n];\n\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    status: STATUS.unfetched,\n    buckets: []\n  },\n\n  initialize: function (attrs, opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    if (!_.has(attrs, 'column')) {\n      throw new Error('Column is required');\n    }\n\n    this._SQL = new cdb.SQL({\n      user: this._configModel.get('user_name'),\n      sql_api_template: this._configModel.get('sql_api_template'),\n      api_key: this._configModel.get('api_key')\n    });\n\n    this._initBinds();\n\n    if (this._querySchemaModel.get('status') === STATUS.fetched) {\n      this._queryData();\n    }\n  },\n\n  _initBinds: function () {\n    this.on('change:column', this._queryData, this);\n    this.listenTo(this._querySchemaModel, 'change:status', this._onQuerySchemaStatusChanged);\n  },\n\n  _onQuerySchemaStatusChanged: function () {\n    if (this._querySchemaModel.get('status') === STATUS.fetched) {\n      this._queryData();\n    }\n  },\n\n  _queryData: function () {\n    if (this._querySchemaModel.getColumnType(this.get('column')) !== 'date') {\n      return;\n    }\n\n    var query = QUERY_TEMPLATE({\n      column: this.get('column'),\n      table: this._querySchemaModel.get('query')\n    });\n\n    var callback = {\n      success: this._onQuerySuccess.bind(this),\n      error: this._onQueryError.bind(this)\n    };\n\n    this.set('status', STATUS.fetching);\n    this._SQL.execute(query, null, callback);\n  },\n\n  _onQuerySuccess: function (data) {\n    this.set('status', STATUS.fetched);\n    var row = data.rows && data.rows[0];\n    var max = row && row.max ? row.max : 0;\n    var min = row && row.min ? row.min : 0;\n    this._calculateBuckets(max, min);\n  },\n\n  _onQueryError: function () {\n    this.set('status', STATUS.unavailable);\n  },\n\n  _calculateDecadesDiff: function (start, end) {\n    var startYear = start.year();\n    var endYear = end.year();\n    var startDecade = Math.floor(startYear / 10);\n    var endDecade = Math.floor((endYear + 10) / 10);\n\n    return endDecade - startDecade;\n  },\n\n  _calculateBuckets: function (max, min) {\n    var end = moment(max).utc();\n    var start = moment(min).utc();\n    var BUCKET_INCREMENT = 1;\n\n    var buckets = [{\n      bins: end.diff(start, 'minutes', true),\n      val: 'minute',\n      label: 'Minutes'\n    }, {\n      bins: end.diff(start, 'hours', true),\n      val: 'hour',\n      label: 'Hours'\n    }, {\n      bins: end.diff(start, 'days', true),\n      val: 'day',\n      label: 'Days'\n    }, {\n      bins: end.diff(start, 'weeks', true),\n      val: 'week',\n      label: 'Weeks'\n    }, {\n      bins: end.diff(start, 'months', true),\n      val: 'month',\n      label: 'Months'\n    }, {\n      bins: end.diff(start, 'quarters', true),\n      val: 'quarter',\n      label: 'Quarters'\n    }, {\n      bins: end.diff(start, 'years', true),\n      val: 'year',\n      label: 'Years'\n    }, {\n      bins: this._calculateDecadesDiff(start, end),\n      val: 'decade',\n      label: 'Decades'\n    }];\n\n    var incrementedBuckets = _.map(buckets, function (bucket) {\n      var increment = bucket.val === 'decade'\n        ? 0\n        : BUCKET_INCREMENT;\n\n      return _.extend(_.clone(bucket), {\n        bins: Math.ceil(bucket.bins) + increment\n      });\n    });\n\n    this.set('buckets', incrementedBuckets);\n  },\n\n  getFilteredBuckets: function (max) {\n    var limit = max || DEFAULT_MAX_BUCKETS;\n    var buckets = _.filter(this.get('buckets'), function (bucket) {\n      return bucket.bins <= limit;\n    });\n\n    return buckets;\n  },\n\n  getPreferredBucket: function (max) {\n    var sortedBuckets = _.sortBy(this.getFilteredBuckets(max), 'bins');\n    return sortedBuckets.length > 0 ? sortedBuckets[sortedBuckets.length - 1] : {};\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"56px\" height=\"32px\" viewBox=\"498 425 56 32\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n    <g id=\"Bolean\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(498.000000, 425.000000)\">\\n        <rect id=\"Rectangle-17\" fill=\"#FFFFFF\" x=\"0\" y=\"0\" width=\"56\" height=\"32\" rx=\"4\"></rect>\\n        <path d=\"M1,2.00174332 L1,2.00174332 L1,29.9982567 C1,30.5564876 1.4426521,31 1.99306965,31 L54.0069304,31 C54.5486548,31 55,30.5482532 55,29.9982567 L55,2.00174332 C55,1.44351239 54.5573479,1 54.0069304,1 L1.99306965,1 C1.45134516,1 1,1.4517468 1,2.00174332 L1,2.00174332 Z M0,2.00174332 C0,0.89621101 0.902308181,0 1.99306965,0 L54.0069304,0 C55.1076723,0 56,0.889261723 56,2.00174332 L56,29.9982567 C56,31.103789 55.0976918,32 54.0069304,32 L1.99306965,32 C0.892327676,32 0,31.1107383 0,29.9982567 L0,2.00174332 L0,2.00174332 Z\" id=\"Rectangle-774\" fill=\"#EEEEEE\"></path>\\n        <rect id=\"Rectangle-1876\" fill=\"#EEEEEE\" x=\"8\" y=\"6\" width=\"16\" height=\"3\"></rect>\\n        <rect id=\"Rectangle-1876\" fill=\"#EEEEEE\" x=\"8\" y=\"15\" width=\"40\" height=\"2\" rx=\"1\"></rect>\\n        <rect id=\"Rectangle-1876-Copy\" fill=\"#9DE0AD\" x=\"8\" y=\"15\" width=\"31\" height=\"2\" rx=\"1\"></rect>\\n        <rect id=\"Rectangle-1876\" fill=\"#EEEEEE\" x=\"8\" y=\"22\" width=\"40\" height=\"2\" rx=\"1\"></rect>\\n        <rect id=\"Rectangle-1876-Copy\" fill=\"#9DE0AD\" x=\"8\" y=\"22\" width=\"11\" height=\"2\" rx=\"1\"></rect>\\n    </g>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"56px\" height=\"32px\" viewBox=\"0 0 56 32\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n    <g id=\"Graf\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\\n        <rect id=\"Rectangle-17\" fill=\"#FFFFFF\" x=\"0\" y=\"0\" width=\"56\" height=\"32\" rx=\"4\"></rect>\\n        <path d=\"M1,2.00174332 L1,2.00174332 L1,29.9982567 C1,30.5564876 1.4426521,31 1.99306965,31 L54.0069304,31 C54.5486548,31 55,30.5482532 55,29.9982567 L55,2.00174332 C55,1.44351239 54.5573479,1 54.0069304,1 L1.99306965,1 C1.45134516,1 1,1.4517468 1,2.00174332 L1,2.00174332 Z M0,2.00174332 C0,0.89621101 0.902308181,0 1.99306965,0 L54.0069304,0 C55.1076723,0 56,0.889261723 56,2.00174332 L56,29.9982567 C56,31.103789 55.0976918,32 54.0069304,32 L1.99306965,32 C0.892327676,32 0,31.1107383 0,29.9982567 L0,2.00174332 L0,2.00174332 Z\" id=\"Rectangle-774\" fill=\"#EEEEEE\"></path>\\n        <rect id=\"Rectangle-1876\" fill=\"#EEEEEE\" x=\"8\" y=\"6\" width=\"16\" height=\"3\"></rect>\\n        <rect id=\"Rectangle-53\" fill=\"#9DE0AD\" x=\"8\" y=\"19\" width=\"40\" height=\"7\"></rect>\\n        <rect id=\"Rectangle-1876\" fill=\"#EEEEEE\" x=\"8\" y=\"14\" width=\"16\" height=\"2\"></rect>\\n    </g>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"56px\" height=\"32px\" viewBox=\"498 425 56 32\" version=\"1.1\" mlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n    <g id=\"Bars\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(498.000000, 425.000000)\">\\n        <rect id=\"Rectangle-17\" fill=\"#FFFFFF\" x=\"0\" y=\"0\" width=\"56\" height=\"32\" rx=\"4\"></rect>\\n        <path d=\"M1,2.00174332 L1,2.00174332 L1,29.9982567 C1,30.5564876 1.4426521,31 1.99306965,31 L54.0069304,31 C54.5486548,31 55,30.5482532 55,29.9982567 L55,2.00174332 C55,1.44351239 54.5573479,1 54.0069304,1 L1.99306965,1 C1.45134516,1 1,1.4517468 1,2.00174332 L1,2.00174332 Z M0,2.00174332 C0,0.89621101 0.902308181,0 1.99306965,0 L54.0069304,0 C55.1076723,0 56,0.889261723 56,2.00174332 L56,29.9982567 C56,31.103789 55.0976918,32 54.0069304,32 L1.99306965,32 C0.892327676,32 0,31.1107383 0,29.9982567 L0,2.00174332 L0,2.00174332 Z\" id=\"Rectangle-774\" fill=\"#EEEEEE\"></path>\\n        <rect id=\"Bar\" fill=\"#9DE0AD\" transform=\"translate(36.000000, 23.000000) scale(-1, 1) translate(-36.000000, -23.000000) \" x=\"35\" y=\"22\" width=\"2\" height=\"2\"></rect>\\n        <rect id=\"Bar-Copy-6\" fill=\"#9DE0AD\" transform=\"translate(39.000000, 22.000000) scale(-1, 1) translate(-39.000000, -22.000000) \" x=\"38\" y=\"20\" width=\"2\" height=\"4\"></rect>\\n        <rect id=\"Bar-Copy-7\" fill=\"#9DE0AD\" transform=\"translate(42.000000, 21.500000) scale(-1, 1) translate(-42.000000, -21.500000) \" x=\"41\" y=\"19\" width=\"2\" height=\"5\"></rect>\\n        <rect id=\"Bar-Copy-8\" fill=\"#9DE0AD\" transform=\"translate(45.000000, 20.000000) scale(-1, 1) translate(-45.000000, -20.000000) \" x=\"44\" y=\"16\" width=\"2\" height=\"8\"></rect>\\n        <rect id=\"Bar-Copy-9\" fill=\"#9DE0AD\" transform=\"translate(48.000000, 21.500000) scale(-1, 1) translate(-48.000000, -21.500000) \" x=\"47\" y=\"19\" width=\"2\" height=\"5\"></rect>\\n        <rect id=\"Bar-Copy-2\" fill=\"#9DE0AD\" transform=\"translate(33.000000, 21.000000) scale(-1, 1) translate(-33.000000, -21.000000) \" x=\"32\" y=\"18\" width=\"2\" height=\"6\"></rect>\\n        <rect id=\"Bar-Copy-3\" fill=\"#9DE0AD\" transform=\"translate(30.000000, 22.500000) scale(-1, 1) translate(-30.000000, -22.500000) \" x=\"29\" y=\"21\" width=\"2\" height=\"3\"></rect>\\n        <rect id=\"Bar-Copy-4\" fill=\"#9DE0AD\" transform=\"translate(27.000000, 22.000000) scale(-1, 1) translate(-27.000000, -22.000000) \" x=\"26\" y=\"20\" width=\"2\" height=\"4\"></rect>\\n        <polygon id=\"Bar-Copy-5\" fill=\"#9DE0AD\" transform=\"translate(24.000000, 20.500000) scale(-1, 1) translate(-24.000000, -20.500000) \" points=\"23 17 25 17 25 24 23 24\"></polygon>\\n        <rect id=\"Bar\" fill=\"#9DE0AD\" x=\"8\" y=\"21\" width=\"2\" height=\"3\"></rect>\\n        <rect id=\"Bar-Copy-2\" fill=\"#9DE0AD\" x=\"11\" y=\"15\" width=\"2\" height=\"9\"></rect>\\n        <rect id=\"Bar-Copy-3\" fill=\"#9DE0AD\" x=\"14\" y=\"16\" width=\"2\" height=\"8\"></rect>\\n        <rect id=\"Bar-Copy-4\" fill=\"#9DE0AD\" x=\"17\" y=\"19\" width=\"2\" height=\"5\"></rect>\\n        <polygon id=\"Bar-Copy-5\" fill=\"#9DE0AD\" points=\"20 16 22 16 22 24 20 24\"></polygon>\\n        <rect id=\"Rectangle-1876\" fill=\"#EEEEEE\" x=\"7\" y=\"7\" width=\"16\" height=\"3\"></rect>\\n    </g>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"20px\" height=\"18px\" viewBox=\"10 11 20 18\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n    <g id=\"Group\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(10.000000, 11.000000)\">\\n        <rect id=\"Bar\" fill=\"#A4DAB1\" x=\"0\" y=\"2\" width=\"13\" height=\"2\"></rect>\\n        <rect id=\"Bar\" fill=\"#A4DAB1\" x=\"0\" y=\"9\" width=\"10\" height=\"2\"></rect>\\n        <rect id=\"Bar\" fill=\"#A4DAB1\" x=\"0\" y=\"16\" width=\"12\" height=\"2\"></rect>\\n        <rect id=\"Bar\" fill=\"#DDDDDD\" x=\"0\" y=\"7\" width=\"7\" height=\"1\"></rect>\\n        <rect id=\"Bar\" fill=\"#DDDDDD\" x=\"0\" y=\"14\" width=\"5\" height=\"1\"></rect>\\n        <rect id=\"Bar\" fill=\"#EEEEEE\" x=\"13\" y=\"2\" width=\"7\" height=\"2\"></rect>\\n        <rect id=\"Bar\" fill=\"#EEEEEE\" x=\"10\" y=\"9\" width=\"10\" height=\"2\"></rect>\\n        <rect id=\"Bar\" fill=\"#EEEEEE\" x=\"12\" y=\"16\" width=\"8\" height=\"2\"></rect>\\n        <rect id=\"Bar\" fill=\"#DDDDDD\" x=\"0\" y=\"0\" width=\"5\" height=\"1\"></rect>\\n    </g>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"20px\" height=\"8px\" viewBox=\"0 0 20 8\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n    <g id=\"Group\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\\n        <rect id=\"Bar-Copy-2\" fill=\"#9DE0AD\" x=\"0\" y=\"4\" width=\"20\" height=\"4\"></rect>\\n        <rect id=\"Bar-Copy-3\" fill=\"#DDDDDD\" x=\"0\" y=\"0\" width=\"9\" height=\"2\"></rect>\\n    </g>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"20px\" height=\"18px\" viewBox=\"10 11 20 18\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n    <g id=\"Bars\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(10.000000, 11.000000)\">\\n        <rect id=\"Bar\" fill=\"#A4DAB1\" x=\"0\" y=\"10\" width=\"2\" height=\"8\"></rect>\\n        <rect id=\"Bar\" fill=\"#A4DAB1\" x=\"3\" y=\"6\" width=\"2\" height=\"12\"></rect>\\n        <rect id=\"Bar\" fill=\"#A4DAB1\" x=\"6\" y=\"2\" width=\"2\" height=\"16\"></rect>\\n        <rect id=\"Bar\" fill=\"#A4DAB1\" x=\"9\" y=\"0\" width=\"2\" height=\"18\"></rect>\\n        <rect id=\"Bar\" fill=\"#A4DAB1\" x=\"12\" y=\"2\" width=\"2\" height=\"16\"></rect>\\n        <rect id=\"Bar\" fill=\"#A4DAB1\" x=\"15\" y=\"5\" width=\"2\" height=\"13\"></rect>\\n        <rect id=\"Bar\" fill=\"#A4DAB1\" x=\"18\" y=\"8\" width=\"2\" height=\"10\"></rect>\\n    </g>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"21px\" height=\"18px\" viewBox=\"10 11 21 18\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n    <g id=\"Group-2\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(10.000000, 11.000000)\">\\n        <g id=\"Bars\" transform=\"translate(0.000000, 8.000000)\">\\n            <rect id=\"Bar\" fill=\"#F2CC8F\" x=\"4\" y=\"0\" width=\"1\" height=\"10\"></rect>\\n            <rect id=\"Bar\" fill=\"#F2CC8F\" x=\"6\" y=\"1\" width=\"1\" height=\"9\"></rect>\\n            <rect id=\"Bar-Copy\" fill=\"#F2CC8F\" x=\"0\" y=\"5\" width=\"1\" height=\"5\"></rect>\\n            <rect id=\"Bar\" fill=\"#F2CC8F\" x=\"8\" y=\"2\" width=\"1\" height=\"8\"></rect>\\n            <rect id=\"Bar\" fill=\"#F2CC8F\" x=\"10\" y=\"3\" width=\"1\" height=\"7\"></rect>\\n            <rect id=\"Bar\" fill=\"#EEEEEE\" x=\"12\" y=\"4\" width=\"1\" height=\"6\"></rect>\\n            <rect id=\"Bar\" fill=\"#EEEEEE\" x=\"14\" y=\"5\" width=\"1\" height=\"5\"></rect>\\n            <rect id=\"Bar\" fill=\"#EEEEEE\" x=\"16\" y=\"6\" width=\"1\" height=\"4\"></rect>\\n            <rect id=\"Bar-Copy\" fill=\"#F2CC8F\" x=\"2\" y=\"3\" width=\"1\" height=\"7\"></rect>\\n            <rect id=\"Bar\" fill=\"#EEEEEE\" x=\"18\" y=\"7\" width=\"1\" height=\"3\"></rect>\\n            <rect id=\"Bar\" fill=\"#EEEEEE\" x=\"20\" y=\"7\" width=\"1\" height=\"3\"></rect>\\n        </g>\\n        <polygon id=\"Rectangle-316\" fill=\"#979EA1\" points=\"0 5 0 0 4 2.5\"></polygon>\\n        <rect id=\"Rectangle-1876\" fill=\"#DDDDDD\" x=\"8\" y=\"1\" width=\"12\" height=\"3\"></rect>\\n    </g>\\n</svg>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"56px\" height=\"32px\" viewBox=\"539 370 56 32\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n    <g id=\"Time-Series\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(539.000000, 370.000000)\">\\n        <rect id=\"Rectangle-17\" fill=\"#FFFFFF\" x=\"0\" y=\"0\" width=\"56\" height=\"32\" rx=\"4\"></rect>\\n        <path d=\"M1,2.00174332 L1,2.00174332 L1,29.9982567 C1,30.5564876 1.4426521,31 1.99306965,31 L54.0069304,31 C54.5486548,31 55,30.5482532 55,29.9982567 L55,2.00174332 C55,1.44351239 54.5573479,1 54.0069304,1 L1.99306965,1 C1.45134516,1 1,1.4517468 1,2.00174332 L1,2.00174332 Z M0,2.00174332 C0,0.89621101 0.902308181,0 1.99306965,0 L54.0069304,0 C55.1076723,0 56,0.889261723 56,2.00174332 L56,29.9982567 C56,31.103789 55.0976918,32 54.0069304,32 L1.99306965,32 C0.892327676,32 0,31.1107383 0,29.9982567 L0,2.00174332 L0,2.00174332 Z\" id=\"Rectangle-774\" fill=\"#EEEEEE\"></path>\\n        <rect id=\"Bar\" fill=\"#DDDDDD\" opacity=\"0.5\" transform=\"translate(34.000000, 23.500000) scale(-1, 1) translate(-34.000000, -23.500000) \" x=\"33\" y=\"22\" width=\"2\" height=\"3\"></rect>\\n        <rect id=\"Bar-Copy-6\" fill=\"#DDDDDD\" opacity=\"0.5\" transform=\"translate(37.000000, 24.000000) scale(-1, 1) translate(-37.000000, -24.000000) \" x=\"36\" y=\"23\" width=\"2\" height=\"2\"></rect>\\n        <rect id=\"Bar-Copy-7\" fill=\"#DDDDDD\" opacity=\"0.5\" transform=\"translate(40.000000, 24.000000) scale(-1, 1) translate(-40.000000, -24.000000) \" x=\"39\" y=\"23\" width=\"2\" height=\"2\"></rect>\\n        <rect id=\"Bar-Copy-8\" fill=\"#DDDDDD\" opacity=\"0.5\" transform=\"translate(43.000000, 24.500000) scale(-1, 1) translate(-43.000000, -24.500000) \" x=\"42\" y=\"24\" width=\"2\" height=\"1\"></rect>\\n        <rect id=\"Bar-Copy-9\" fill=\"#DDDDDD\" opacity=\"0.5\" transform=\"translate(46.000000, 24.500000) scale(-1, 1) translate(-46.000000, -24.500000) \" x=\"45\" y=\"24\" width=\"2\" height=\"1\"></rect>\\n        <rect id=\"Bar-Copy-2\" fill=\"#DDDDDD\" opacity=\"0.5\" transform=\"translate(31.000000, 23.500000) scale(-1, 1) translate(-31.000000, -23.500000) \" x=\"30\" y=\"22\" width=\"2\" height=\"3\"></rect>\\n        <rect id=\"Bar-Copy-3\" fill=\"#DDDDDD\" opacity=\"0.5\" transform=\"translate(28.000000, 23.000000) scale(-1, 1) translate(-28.000000, -23.000000) \" x=\"27\" y=\"21\" width=\"2\" height=\"4\"></rect>\\n        <rect id=\"Bar-Copy-4\" fill=\"#F2CC8F\" transform=\"translate(25.000000, 23.000000) scale(-1, 1) translate(-25.000000, -23.000000) \" x=\"24\" y=\"21\" width=\"2\" height=\"4\"></rect>\\n        <polygon id=\"Bar-Copy-5\" fill=\"#F2CC8F\" transform=\"translate(22.000000, 22.500000) scale(-1, 1) translate(-22.000000, -22.500000) \" points=\"21 20 23 20 23 25 21 25\"></polygon>\\n        <rect id=\"Bar-Copy-2\" fill=\"#F2CC8F\" x=\"9\" y=\"24\" width=\"2\" height=\"1\"></rect>\\n        <rect id=\"Bar-Copy-3\" fill=\"#F2CC8F\" x=\"12\" y=\"21\" width=\"2\" height=\"4\"></rect>\\n        <rect id=\"Bar-Copy-4\" fill=\"#F2CC8F\" x=\"15\" y=\"18\" width=\"2\" height=\"7\"></rect>\\n        <polygon id=\"Bar-Copy-5\" fill=\"#F2CC8F\" points=\"18 19 20 19 20 25 18 25\"></polygon>\\n        <polygon id=\"Rectangle-316\" fill=\"#979EA1\" points=\"9 10 9 5 13 7.5\"></polygon>\\n        <rect id=\"Rectangle-1876\" fill=\"#EEEEEE\" x=\"16\" y=\"6\" width=\"16\" height=\"3\"></rect>\\n    </g>\\n</svg>';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar template = require('./widget-view.tpl');\nvar ContextMenuFactory = require('builder/components/context-menu-factory-view');\nvar InlineEditorView = require('builder/components/inline-editor/inline-editor-view');\nvar templateInlineEditor = require('./inline-editor.tpl');\nvar WidgetsService = require('./widgets-service');\nvar Analyses = require('builder/data/analyses');\nvar Router = require('builder/routes/router');\n\nvar widgetIconTemplateMap = {\n  category: require('./widget-icon-layer-category.tpl'),\n  histogram: require('./widget-icon-layer-histogram.tpl'),\n  formula: require('./widget-icon-layer-formula.tpl'),\n  'time-series': require('./widget-icon-layer-timeSeries.tpl')\n};\n\n/**\n * View for an individual widget definition model.\n */\nmodule.exports = CoreView.extend({\n  module: 'editor:widgets:widget-view',\n\n  tagName: 'li',\n\n  className: 'BlockList-item js-widgetItem',\n\n  events: {\n    'click': '_onEditWidget'\n  },\n\n  initialize: function (opts) {\n    if (!opts.layer) throw new Error('layer is required');\n    if (!opts.userActions) throw new Error('userActions is required');\n\n    this.layer = opts.layer;\n    this._userActions = opts.userActions;\n    this.stackLayoutModel = opts.stackLayoutModel;\n\n    this.listenTo(this.model, 'change', this.render);\n    this.listenToOnce(this.model, 'destroy', this._onDestroy);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    var widgetType = this.model.get('type');\n    var source = this.model.get('source');\n    var analysisNode = this.layer.findAnalysisDefinitionNodeModel(source);\n    var layerName = analysisNode.isSourceType()\n      ? this.layer.getTableName()\n      : this.layer.getName();\n\n    this.$el.html(template({\n      widgetType: widgetType,\n      layerName: layerName,\n      sourceId: source,\n      sourceColor: analysisNode.getColor(),\n      sourceType: Analyses.short_title(analysisNode.get('type')),\n      isSourceType: analysisNode.isSourceType()\n    }));\n    this.$el.attr('data-model-cid', this.model.cid);\n\n    this._initViews();\n\n    return this;\n  },\n\n  _initViews: function () {\n    var widgetType = this.model.get('type');\n\n    this._inlineEditor = new InlineEditorView({\n      template: templateInlineEditor,\n      renderOptions: {\n        title: this.model.get('title')\n      },\n      onClick: this._onEditWidget.bind(this),\n      onEdit: this._renameWidget.bind(this)\n    });\n\n    this.$('.js-header').append(this._inlineEditor.render().el);\n    this.addView(this._inlineEditor);\n\n    var iconTemplate = widgetIconTemplateMap[widgetType];\n\n    if (!iconTemplate) {\n      console.log(widgetType + ' widget template not defined');\n    } else {\n      this.$('.js-widgetIcon').append(iconTemplate());\n    }\n\n    var menuItems = [{\n      label: _t('editor.widgets.options.rename'),\n      val: 'rename-widget',\n      action: this._onRenameWidget.bind(this)\n    }, {\n      label: _t('editor.widgets.options.edit'),\n      val: 'edit-widget',\n      action: this._onEditWidget.bind(this)\n    }, {\n      label: _t('editor.widgets.options.remove'),\n      val: 'delete-widget',\n      destructive: true,\n      action: this._confirmDeleteWidget.bind(this)\n    }];\n\n    this._contextMenuFactory = new ContextMenuFactory({\n      menuItems: menuItems\n    });\n\n    this.$('.js-context-menu').append(this._contextMenuFactory.render().el);\n    this.addView(this._contextMenuFactory);\n  },\n\n  _onRenameWidget: function () {\n    this._inlineEditor.edit();\n  },\n\n  _renameWidget: function () {\n    var newName = this._inlineEditor.getValue();\n\n    if (newName !== '' && newName !== this.model.get('title')) {\n      this.$('.js-title').text(newName).show();\n      this._inlineEditor.hide();\n      this.model.set({title: newName});\n      this._userActions.saveWidget(this.model);\n    }\n  },\n\n  _confirmDeleteWidget: function () {\n    WidgetsService.removeWidget(this.model);\n  },\n\n  _onEditWidget: function (event) {\n    event && event.stopPropagation();\n    WidgetsService.editWidget(this.model);\n  },\n\n  _onDestroy: function () {\n    Router.goToWidgetList();\n    this.clean();\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"BlockList-dragIcon\">\\n  <div class=\"CDB-Shape\">\\n    <div class=\"CDB-Shape-rectsHandle is-small\">\\n      <div class=\"CDB-Shape-rectsHandleItem CDB-Shape-rectsHandleItem--grey is-first\"></div>\\n      <div class=\"CDB-Shape-rectsHandleItem CDB-Shape-rectsHandleItem--grey is-second\"></div>\\n      <div class=\"CDB-Shape-rectsHandleItem CDB-Shape-rectsHandleItem--grey is-third\"></div>\\n    </div>\\n  </div>\\n</div>\\n<div class=\"BlockList-media u-rSpace--m js-widgetIcon\">\\n</div>\\n<div class=\"BlockList-inner u-ellipsis\">\\n  <div class=\"BlockList-title u-bSpace js-context-menu\">\\n    <div class=\"BlockList-titleText js-header\"></div>\\n  </div>\\n  <div class=\"u-flex u-alignCenter\">\\n    <span class=\"CDB-Text CDB-Size-small is-semibold u-upperCase\" style=\"color: ' +\n__e( sourceColor ) +\n';\">\\n      ' +\n__e( sourceId ) +\n'\\n    </span>\\n\\n    ';\n if (!isSourceType) { ;\n__p += '\\n      <span class=\"CDB-Text CDB-Size-small u-lSpace--s u-flex\" style=\"color: ' +\n__e( sourceColor ) +\n';\">\\n        <i class=\"CDB-IconFont CDB-Size-small CDB-IconFont-ray\"></i>\\n      </span>\\n    ';\n } ;\n__p += '\\n\\n    <span class=\"CDB-Text CDB-Size-small u-mainTextColor u-lSpace\">\\n      ' +\n((__t = ( sourceType )) == null ? '' : __t) +\n'\\n    </span>\\n\\n    <span class=\"CDB-Text CDB-Size-small u-altTextColor u-ellipsis u-lSpace\" title=\"' +\n((__t = ( layerName )) == null ? '' : __t) +\n'\">\\n      ' +\n((__t = ( layerName )) == null ? '' : __t) +\n'\\n    </span>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<h2 class=\"CDB-Text CDB-Size-huge is-light u-secondaryTextColor\">\\n  ' +\n((__t = ( body )) == null ? '' : __t) +\n'\\n</h2>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"FormPlaceholder-widget u-tSpace-m u-flex\">\\n  <div class=\"FormPlaceholder-widgetIcon u-rSpace--m\"></div>\\n  <div class=\"FormPlaceholder-widgetInner\">\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--long\"></span>\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--long\"></span>\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--med u-tSpace-xl\"></span>\\n  </div>\\n</div>\\n\\n<div class=\"FormPlaceholder-widget u-tSpace-m u-flex\">\\n  <div class=\"FormPlaceholder-widgetIcon u-rSpace--m\"></div>\\n  <div class=\"FormPlaceholder-widgetInner\">\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--med\"></span>\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--med\"></span>\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--long u-tSpace-xl\"></span>\\n  </div>\\n</div>\\n\\n<div class=\"FormPlaceholder-widget u-tSpace-m u-flex\">\\n  <div class=\"FormPlaceholder-widgetIcon u-rSpace--m\"></div>\\n  <div class=\"FormPlaceholder-widgetInner\">\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--med\"></span>\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--med\"></span>\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--short u-tSpace-xl\"></span>\\n  </div>\\n</div>\\n\\n<div class=\"FormPlaceholder-widget u-tSpace-m u-flex\">\\n  <div class=\"FormPlaceholder-widgetIcon u-rSpace--m\"></div>\\n  <div class=\"FormPlaceholder-widgetInner\">\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--long\"></span>\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--long\"></span>\\n    <span class=\"FormPlaceholder-title FormPlaceholder-size--short u-tSpace-xl\"></span>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<h2 class=\"Inline-editor\">\\n  <div class=\"CDB-Text CDB-Size-huge is-light u-ellipsis js-title Inline-editor-text\">' +\n__e( title ) +\n'</div>\\n  <input type=\"text\" name=\"text\" class=\"Inline-editor-input Inline-editor-input--small CDB-Text CDB-InputText js-input\" value=\"' +\n__e( title ) +\n'\" readonly>\\n</h2>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar WidgetDefinitionModel = require('builder/data/widget-definition-model');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar FillConstants = require('builder/components/form-components/_constants/_fill');\n\nmodule.exports = Backbone.Model.extend({\n\n  initialize: function (attrs, options) {\n    var o = [\n      {\n        val: true,\n        label: _t('editor.widgets.widgets-form.style.yes')\n      }, {\n        val: false,\n        label: _t('editor.widgets.widgets-form.style.no')\n      }\n    ];\n    this.schema = {\n      sync_on_bbox_change: {\n        type: 'Radio',\n        title: _t('editor.widgets.widgets-form.style.sync_on_bbox_change'),\n        options: o\n      }\n    };\n  },\n\n  _addAllStyleSchemaAttributes: function () {\n    var customType = this.get('type') === 'category' ? 'categories' : 'ramp';\n    var styleAttrs = {\n      widget_style_definition: {\n        type: 'Fill',\n        title: _t('editor.widgets.widgets-form.style.fill'),\n        options: [],\n        configModel: this._configModel,\n        modals: this._modals,\n        userModel: this._userModel,\n        dialogMode: DialogConstants.Mode.FLOAT,\n        editorAttrs: {\n          color: {\n            hidePanes: [FillConstants.Panes.BY_VALUE],\n            disableOpacity: true\n          }\n        }\n      }\n    };\n\n    if (this.get('auto_style_allowed')) {\n      var editorAttrs = {\n        color: {\n          hidePanes: [FillConstants.Panes.FIXED]\n        }\n      };\n\n      if (customType === 'categories') {\n        editorAttrs.color.hideTabs = [\n          FillConstants.Tabs.BINS,\n          FillConstants.Tabs.QUANTIFICATION\n        ];\n      }\n\n      styleAttrs = _.extend(styleAttrs, {\n        auto_style_definition: {\n          type: 'EnablerEditor',\n          title: '',\n          label: _t('editor.widgets.widgets-form.style.custom-colors'),\n          help: _t('editor.widgets.widgets-form.style.custom-help'),\n          editor: {\n            type: 'Fill',\n            title: '',\n            options: [this.get('column')],\n            dialogMode: DialogConstants.Mode.FLOAT,\n            query: 'query',\n            configModel: this._configModel,\n            modals: this._modals,\n            userModel: this._userModel,\n            editorAttrs: editorAttrs\n          }\n        }\n      });\n    } else {\n      styleAttrs = _.extend(styleAttrs, {\n        auto_style_definition: {\n          type: 'Text',\n          title: _t('editor.widgets.widgets-form.style.custom-colors'),\n          help: _t('editor.widgets.widgets-form.style.custom-disabled'),\n          disabled: true\n        }\n      });\n    }\n\n    this.schema = _.extend(this.schema, styleAttrs);\n  },\n\n  parse: function (r) {\n    var attrs = _.defaults(\n      {\n        sync_on_bbox_change: r.sync_on_bbox_change ? 'true' : 'false'\n      },\n      r\n    );\n    return attrs;\n  },\n\n  changeWidgetDefinitionModel: function (widgetDefinitionModel) {\n    var attrs = _.defaults(\n      {\n        sync_on_bbox_change: this.get('sync_on_bbox_change') === 'true'\n      },\n      this._prepareAttributesForWidgetDefinition()\n    );\n\n    if (attrs.auto_style_definition !== '' && _.isEmpty(attrs.auto_style_definition)) {\n      attrs.auto_style_definition = WidgetDefinitionModel.getDefaultAutoStyle(widgetDefinitionModel.get('type'), widgetDefinitionModel.get('column'));\n    }\n\n    widgetDefinitionModel.set(attrs);\n  },\n\n  _prepareAttributesForWidgetDefinition: function () {\n    return this.attributes;\n  }\n});\n","var _ = require('underscore');\nvar WidgetsFormBaseSchema = require('./widgets-form-base-schema-model');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\n\nvar REQUIRED_OPTS = [\n  'columnOptionsFactory',\n  'modals',\n  'configModel',\n  'userModel'\n];\n\nmodule.exports = WidgetsFormBaseSchema.extend({\n\n  defaults: {\n    schema: {},\n    aggregate: {\n      attribute: '',\n      operator: 'count'\n    }\n  },\n\n  initialize: function (attrs, opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this.on('change:aggregate', this._updateAggregation, this);\n    this.on('change:column', this.updateSchema, this);\n\n    this._updateAggregation();\n\n    WidgetsFormBaseSchema.prototype.initialize.apply(this, arguments);\n  },\n\n  getFields: function () {\n    var fields = ['column', 'aggregate', 'prefix', 'suffix'];\n\n    return {\n      data: fields.join(','),\n      style: ['sync_on_bbox_change', 'widget_style_definition', 'auto_style_definition']\n    };\n  },\n\n  _updateAggregation: function () {\n    var aggregate = this.get('aggregate');\n    if (aggregate === undefined) {\n      this.set({\n        aggregation: 'count',\n        aggregation_column: ''\n      });\n    } else {\n      this.set({\n        aggregation_column: aggregate.attribute,\n        aggregation: aggregate.operator\n      });\n    }\n\n    this.updateSchema();\n  },\n\n  updateSchema: function () {\n    var columnOptions = this._columnOptionsFactory.create(this.get('column'));\n    var helpMsg = this._columnOptionsFactory.unavailableColumnsHelpMessage();\n    var aggregationOptions = _.filter(columnOptions, function (column) {\n      return column.type === 'number';\n    });\n\n    this.schema = _.extend(this.schema, {\n      column: {\n        type: 'Select',\n        title: _t('editor.widgets.widgets-form.data.aggregate-by'),\n        options: columnOptions,\n        help: helpMsg,\n        dialogMode: DialogConstants.Mode.FLOAT,\n        editorAttrs: {\n          disabled: this._columnOptionsFactory.areColumnsUnavailable()\n        }\n      },\n      aggregate: {\n        type: 'Operators',\n        title: _t('editor.widgets.widgets-form.data.operation'),\n        options: aggregationOptions,\n        dialogMode: DialogConstants.Mode.FLOAT,\n        editorAttrs: {\n          showSearch: false\n        }\n      },\n      suffix: {\n        type: 'EnablerEditor',\n        title: '',\n        label: _t('editor.widgets.widgets-form.data.suffix'),\n        editor: {\n          type: 'Text'\n        }\n      },\n      prefix: {\n        type: 'EnablerEditor',\n        title: '',\n        label: _t('editor.widgets.widgets-form.data.prefix'),\n        editor: {\n          type: 'Text'\n        }\n      }\n    });\n\n    this._addAllStyleSchemaAttributes();\n  },\n\n  canSave: function () {\n    var aggregation = this.get('aggregation');\n    var aggregationColumn = this.get('aggregation_column');\n    var canSave = false;\n\n    if (aggregation === 'count') {\n      canSave = true;\n    } else {\n      canSave = !!(aggregation && aggregationColumn);\n    }\n\n    return canSave;\n  }\n\n});\n","var _ = require('underscore');\nvar WidgetsFormBaseSchema = require('./widgets-form-base-schema-model');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\n\nmodule.exports = WidgetsFormBaseSchema.extend({\n\n  defaults: {\n    schema: {},\n    aggregate: {\n      attribute: '',\n      operator: 'count'\n    }\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.columnOptionsFactory) throw new Error('columnOptionsFactory is required');\n    this._columnOptionsFactory = opts.columnOptionsFactory;\n\n    this.listenTo(this, 'change:aggregate', this._updateAggregate);\n\n    this._updateAggregate();\n\n    WidgetsFormBaseSchema.prototype.initialize.apply(this, arguments);\n  },\n\n  parse: function (r) {\n    r.aggregate = {\n      attribute: r.column,\n      operator: r.operation\n    };\n\n    return r;\n  },\n\n  getFields: function () {\n    return {\n      data: 'aggregate,prefix,suffix,description',\n      style: 'sync_on_bbox_change'\n    };\n  },\n\n  _updateAggregate: function () {\n    var aggregate = this.get('aggregate');\n    this.set({\n      column: aggregate.attribute,\n      operation: aggregate.operator\n    });\n\n    this.updateSchema();\n  },\n\n  updateSchema: function () {\n    var columnOptions = this._columnOptionsFactory.create(this.get('column'), this._isNumberType);\n\n    this.schema = _.extend(this.schema, {\n      aggregate: {\n        type: 'Operators',\n        title: _t('editor.widgets.widgets-form.data.operation'),\n        options: columnOptions,\n        dialogMode: DialogConstants.Mode.FLOAT,\n        editorAttrs: {\n          showSearch: false\n        }\n      },\n      suffix: {\n        type: 'EnablerEditor',\n        title: '',\n        label: _t('editor.widgets.widgets-form.data.suffix'),\n        editor: {\n          type: 'Text'\n        }\n      },\n      prefix: {\n        type: 'EnablerEditor',\n        title: '',\n        label: _t('editor.widgets.widgets-form.data.prefix'),\n        editor: {\n          type: 'Text'\n        }\n      },\n      description: {\n        type: 'EnablerEditor',\n        title: '',\n        label: _t('editor.widgets.widgets-form.style.description'),\n        editor: {\n          type: 'TextArea'\n        }\n      }\n    });\n  },\n\n  canSave: function () {\n    var column = this.get('column');\n    var operation = this.get('operation');\n\n    return operation === 'count' || !!column;\n  },\n\n  _isNumberType: function (m) {\n    return m.get('type') === 'number';\n  }\n});\n","var _ = require('underscore');\nvar WidgetsFormBaseSchema = require('./widgets-form-base-schema-model');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\n\nvar NUMBER_TYPE = 'number';\nvar REQUIRED_OPTS = [\n  'columnOptionsFactory',\n  'modals',\n  'configModel',\n  'userModel'\n];\n\nmodule.exports = WidgetsFormBaseSchema.extend({\n  initialize: function (attrs, opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    WidgetsFormBaseSchema.prototype.initialize.apply(this, arguments);\n  },\n\n  getFields: function () {\n    return {\n      data: ['column', 'bins'],\n      style: ['sync_on_bbox_change', 'widget_style_definition', 'auto_style_definition']\n    };\n  },\n\n  updateSchema: function () {\n    var columnOptions = this._columnOptionsFactory.create(this.get('column'), this._isNumberType);\n    var helpMsg = this._columnOptionsFactory.unavailableColumnsHelpMessage();\n\n    this.schema = _.extend(this.schema, {\n      column: {\n        title: _t('editor.widgets.widgets-form.data.column'),\n        type: 'Select',\n        help: helpMsg,\n        options: columnOptions,\n        dialogMode: DialogConstants.Mode.FLOAT,\n        editorAttrs: {\n          disabled: this._columnOptionsFactory.areColumnsUnavailable()\n        },\n        validators: [{\n          type: 'columnType',\n          columnsCollection: this._columnOptionsFactory._querySchemaModel.columnsCollection,\n          columnType: 'number'\n        }]\n      },\n      bins: {\n        title: _t('editor.widgets.widgets-form.data.bins'),\n        type: 'Number',\n        validators: ['required', {\n          type: 'interval',\n          min: 2,\n          max: 30\n        }]\n      }\n    });\n\n    this._addAllStyleSchemaAttributes();\n  },\n\n  canSave: function () {\n    return !!this.get('column');\n  },\n\n  _isNumberType: function (m) {\n    return m.get('type') === NUMBER_TYPE;\n  }\n});\n","var _ = require('underscore');\n\nvar WidgetsFormBaseSchema = require('./widgets-form-base-schema-model');\nvar TimeSeriesQueryModel = require('builder/editor/widgets/time-series-query-model');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar FillConstants = require('builder/components/form-components/_constants/_fill');\n\nvar timezones = require('builder/data/timezones');\nvar moment = require('moment');\n\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nrequire('moment-timezone');\n\nvar REQUIRED_OPTS = [\n  'columnOptionsFactory',\n  'configModel',\n  'querySchemaModel'\n];\n\nmodule.exports = WidgetsFormBaseSchema.extend({\n  defaults: {\n    schema: {},\n    bins: 48,\n    timezone: '',\n    offset: 0\n  },\n\n  initialize: function (attrs, opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n    WidgetsFormBaseSchema.prototype.initialize.apply(this, arguments);\n\n    this._timeSeriesQueryModel = new TimeSeriesQueryModel({\n      column: this.get('column')\n    }, {\n      configModel: this._configModel,\n      querySchemaModel: this._querySchemaModel\n    });\n\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.on('change:column', this._onColumnChanged, this);\n    this.listenTo(this._timeSeriesQueryModel, 'change:buckets', this.updateSchema);\n  },\n\n  getFields: function () {\n    var columnType = this._getColumnType();\n    var data = ['column'];\n\n    if (columnType === 'date') {\n      data.push('timezone', 'aggregation');\n    } else {\n      data.push('bins');\n    }\n\n    return {\n      data: data,\n      style: ['sync_on_bbox_change', 'widget_style_definition']\n    };\n  },\n\n  updateSchema: function () {\n    var columnOptions = this._columnOptionsFactory.create(this.get('column'), this._isNumberOrDateType.bind(this));\n    var helpMsg = this._columnOptionsFactory.unavailableColumnsHelpMessage();\n\n    this.schema = _.extend(this.schema, {\n      column: {\n        title: _t('editor.widgets.widgets-form.data.column'),\n        type: 'Select',\n        help: helpMsg,\n        options: columnOptions,\n        dialogMode: DialogConstants.Mode.FLOAT,\n        editorAttrs: {\n          disabled: this._columnOptionsFactory.areColumnsUnavailable()\n        }\n      },\n      widget_style_definition: {\n        type: 'Fill',\n        title: _t('editor.widgets.widgets-form.style.fill'),\n        options: [],\n        dialogMode: DialogConstants.Mode.FLOAT,\n        editorAttrs: {\n          color: {\n            hidePanes: [FillConstants.Panes.BY_VALUE],\n            disableOpacity: true\n          }\n        }\n      }\n    });\n\n    var columnType = this._getColumnType();\n    if (columnType === 'date') {\n      var aggregationOptions = this._timeSeriesQueryModel.getFilteredBuckets();\n      var sortedTimezoneOptions = this._getSortedTimezoneOptions(timezones);\n\n      this.schema = _.extend(this.schema, {\n        aggregation: {\n          title: _t('editor.widgets.widgets-form.data.bins'),\n          type: 'Select',\n          placeholder: _t('editor.widgets.widgets-form.data.select-bucket'),\n          searchPlaceholder: _t('editor.widgets.widgets-form.data.search-by-bucket'),\n          options: aggregationOptions,\n          dialogMode: DialogConstants.Mode.FLOAT,\n          loading: _.isEmpty(aggregationOptions)\n        },\n        timezone: {\n          title: _t('editor.widgets.widgets-form.data.timezone'),\n          type: 'Select',\n          options: sortedTimezoneOptions,\n          dialogMode: DialogConstants.Mode.FLOAT\n        }\n      });\n    } else {\n      this.schema = _.extend(this.schema, {\n        bins: {\n          title: _t('editor.widgets.widgets-form.data.bins'),\n          type: 'Number',\n          validators: ['required', {\n            type: 'interval',\n            min: 0,\n            max: 256\n          }]\n        }\n      });\n    }\n\n    this.trigger('changeSchema');\n  },\n\n  canSave: function () {\n    return this.get('column');\n  },\n\n  _isDateType: function (model) {\n    return model.get('type') === 'date';\n  },\n\n  _isNumberType: function (model) {\n    return model.get('type') === 'number';\n  },\n\n  _isNumberOrDateType: function (model) {\n    return this._isDateType(model) || this._isNumberType(model);\n  },\n\n  _onColumnChanged: function () {\n    this.set({\n      aggregation: undefined\n    }, { silent: true });\n    this._timeSeriesQueryModel.set('column', this.get('column'));\n    this.set('column_type', this._getColumnType());\n    this.updateSchema();\n  },\n\n  _getColumnType: function () {\n    var column;\n    if (this._querySchemaModel.isFetched()) {\n      column = this._querySchemaModel.columnsCollection.findWhere({ name: this.get('column') });\n    }\n    return column && column.get('type');\n  },\n\n  _prepareAttributesForWidgetDefinition: function () {\n    var attrs = this.toJSON();\n\n    if (this._getColumnType() === 'date') {\n      attrs.bins = undefined;\n      attrs.offset = moment.tz(attrs.timezone).utcOffset() * 60;\n    } else {\n      attrs.aggregation = undefined;\n      attrs.timezone = undefined;\n      attrs.offset = undefined;\n    }\n\n    return attrs;\n  },\n\n  _getSortedTimezoneOptions: function (timezones) {\n    return _.chain(timezones)\n      .reduce(function (memo, tz) {\n        var name = tz.name;\n\n        memo.push({\n          label: tz.label,\n          name: name,\n          offset: moment.tz(name).utcOffset()\n        });\n\n        return memo;\n      }, [])\n      .sortBy('offset')\n      .reduce(function (memo, tz) {\n        var name = tz.name;\n        var timezone = tz.offset ? moment.tz(name).format('Z') : '';\n\n        memo.push({\n          label: '(GMT' + timezone + ') ' + tz.label,\n          val: name\n        });\n\n        return memo;\n      }, [])\n      .value();\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar template = require('./widget-header.tpl');\nvar InlineEditorView = require('builder/components/inline-editor/inline-editor-view');\nvar VisTableModel = require('builder/data/visualization-table-model');\nvar templateInlineEditor = require('./inline-editor.tpl');\nvar ContextMenuFactory = require('builder/components/context-menu-factory-view');\nvar WidgetsService = require('builder/editor/widgets/widgets-service');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar analyses = require('builder/data/analyses');\n\nvar REQUIRED_OPTS = [\n  'layerDefinitionModel',\n  'userActions',\n  'stackLayoutModel',\n  'configModel'\n];\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-toggle-menu': '_onToggleContextMenuClicked'\n  },\n\n  initialize: function (opts) {\n    if (!this.model) throw new Error('model is required');\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._sourceNode = this._getSourceNode();\n\n    if (this._sourceNode) {\n      var tableName = this._sourceNode.get('table_name');\n      this._visTableModel = new VisTableModel({\n        id: tableName,\n        table: {\n          name: tableName\n        }\n      }, {\n        configModel: this._configModel\n      });\n    }\n  },\n\n  render: function () {\n    var widgetTitle = this.model.get('title');\n    var source = this.model.get('source');\n    var analysisNode = this._layerDefinitionModel.findAnalysisDefinitionNodeModel(source);\n    var layerName = analysisNode.isSourceType()\n      ? this._layerDefinitionModel.getTableName()\n      : this._layerDefinitionModel.getName();\n\n    this.$el.html(\n      template({\n        title: widgetTitle,\n        source: source,\n        color: this._layerDefinitionModel.get('color'),\n        layerName: layerName,\n        nodeTitle: analyses.short_title(analysisNode),\n        isSourceType: analysisNode.isSourceType(),\n        url: this._visTableModel ? this._visTableModel.datasetURL() : ''\n      })\n    );\n\n    this._initViews();\n    return this;\n  },\n\n  _initViews: function () {\n    var widgetTitle = this.model.get('title');\n\n    this._inlineEditor = new InlineEditorView({\n      template: templateInlineEditor,\n      renderOptions: {\n        title: widgetTitle\n      },\n      onEdit: this._renameWidget.bind(this)\n    });\n\n    this.$('.js-header').append(this._inlineEditor.render().el);\n    this.addView(this._inlineEditor);\n\n    var menuItems = [{\n      label: _t('editor.widgets.options.rename'),\n      val: 'rename-widget',\n      action: this._onRenameWidget.bind(this)\n    }, {\n      label: _t('editor.widgets.options.remove'),\n      val: 'delete-widget',\n      destructive: true,\n      action: this._confirmDeleteWidget.bind(this)\n    }];\n\n    this._contextMenuFactory = new ContextMenuFactory({\n      menuItems: menuItems\n    });\n\n    this.$('.js-context-menu').append(this._contextMenuFactory.render().el);\n    this.addView(this._contextMenuFactory);\n  },\n\n  _getSourceNode: function () {\n    var nodeModel = this._layerDefinitionModel.getAnalysisDefinitionNodeModel();\n\n    var source;\n    if (nodeModel.get('type') === 'source') {\n      source = nodeModel;\n    } else {\n      var primarySource = nodeModel.getPrimarySource();\n      if (primarySource && primarySource.get('type') === 'source') {\n        source = primarySource;\n      }\n    }\n\n    return source;\n  },\n\n  _onRenameWidget: function () {\n    this._inlineEditor.edit();\n  },\n\n  _renameWidget: function () {\n    var newName = this._inlineEditor.getValue();\n\n    if (newName !== '' && newName !== this.model.get('title')) {\n      this.model.set({title: newName});\n      this._userActions.saveWidget(this.model);\n      this.$('.js-title').text(newName).show();\n      this._inlineEditor.hide();\n    }\n  },\n\n  _confirmDeleteWidget: function () {\n    WidgetsService.removeWidget(this.model);\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<ul class=\"Editor-breadcrumb\">\\n  <li class=\"Editor-breadcrumbItem CDB-Text CDB-Size-medium u-actionTextColor\">\\n    <button class=\"js-back\">\\n      <i class=\"CDB-IconFont CDB-IconFont-arrowPrev Size-large u-rSpace\"></i>\\n\\n      <span class=\"Editor-breadcrumbLink\">' +\n__e( _t('back') ) +\n'</span>\\n    </button>\\n  </li>\\n\\n  <li class=\"Editor-breadcrumbItem CDB-Text CDB-Size-medium\"><span class=\"Editor-breadcrumbSep\"> / </span> ' +\n__e( _t('editor.widgets.breadcrumb.widget-options') ) +\n'</li>\\n</ul>\\n\\n<div class=\"Editor-HeaderInfoEditor\">\\n  <div class=\"Editor-HeaderInfo-inner Editor-HeaderInfo-inner--wide\">\\n    <div class=\"Editor-HeaderInfo-title js-context-menu\">\\n      <div class=\"Editor-HeaderInfo-titleText js-header\"></div>\\n    </div>\\n\\n    <div class=\"Editor-HeaderInfo u-flex u-alignCenter\">\\n      <span class=\"CDB-Text CDB-Size-small is-semibold u-bSpace--s u-upperCase\" style=\"color: ' +\n__e( color ) +\n';\">\\n        ' +\n__e( source ) +\n'\\n      </span>\\n\\n      ';\n if (!isSourceType) { ;\n__p += '\\n        <span class=\"CDB-Text CDB-Size-small u-lSpace--s u-flex\" style=\"color: ' +\n__e( color ) +\n';\">\\n          <i class=\"CDB-IconFont CDB-Size-small CDB-IconFont-ray\"></i>\\n        </span>\\n      ';\n } ;\n__p += '\\n\\n      <span class=\"CDB-Text CDB-Size-small u-lSpace\">\\n        ' +\n((__t = ( nodeTitle )) == null ? '' : __t) +\n'\\n      </span>\\n\\n      <span class=\"CDB-Text CDB-Size-small u-altTextColor u-ellipsis u-lSpace\" title=\"' +\n((__t = ( layerName )) == null ? '' : __t) +\n'\">\\n        ' +\n((__t = ( layerName )) == null ? '' : __t) +\n'\\n      </span>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","/**\n * Object to generate column options for a current state of a query schema model\n */\nvar F = function (querySchemaModel) {\n  this._querySchemaModel = querySchemaModel;\n};\n\nF.prototype.areColumnsUnavailable = function () {\n  var status = this._querySchemaModel.get('status');\n  return status === 'fetching' || status === 'unavailable';\n};\n\nF.prototype.unavailableColumnsHelpMessage = function () {\n  if (this._querySchemaModel.get('status') === 'unavailable') {\n    return _t('editor.widgets.widgets-form.data.columns-unavailable');\n  }\n};\n\nF.prototype.create = function (currentVal, columnFilter) {\n  columnFilter = columnFilter || function () {\n    return true;\n  };\n\n  switch (this._querySchemaModel.get('status')) {\n    case 'fetching':\n      return [{val: _t('editor.widgets.widgets-form.data.loading')}];\n    case 'unavailable':\n      return [{val: currentVal}];\n    default:\n      return this._querySchemaModel\n        .columnsCollection\n        .filter(columnFilter)\n        .map(function (m) {\n          var columnName = m.get('name');\n          return {\n            val: columnName,\n            label: columnName,\n            type: m.get('type')\n          };\n        });\n  }\n};\n\nmodule.exports = F;\n","var CoreView = require('backbone/core-view');\nvar WidgetsFormView = require('./widgets-form-view');\nvar WidgetHeaderView = require('./widget-header.js');\nvar ScrollView = require('builder/components/scroll/scroll-view');\nvar Router = require('builder/routes/router');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'userActions',\n  'widgetDefinitionModel',\n  'modals',\n  'analysisDefinitionNodesCollection',\n  'layerDefinitionsCollection',\n  'stackLayoutModel',\n  'configModel',\n  'userModel'\n];\n\n/**\n * View to render all necessary for the widget form\n */\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-back': '_goBack'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this._initViews();\n\n    return this;\n  },\n\n  _initViews: function () {\n    var self = this;\n    var nodeId = self._widgetDefinitionModel.get('source');\n    var analysisDefinitionNodeModel = self._analysisDefinitionNodesCollection.get(nodeId);\n\n    var header = new WidgetHeaderView({\n      layerDefinitionModel: this._layerDefinitionsCollection.get(this._widgetDefinitionModel.get('layer_id')),\n      model: this._widgetDefinitionModel,\n      modals: this._modals,\n      userActions: this._userActions,\n      stackLayoutModel: this._stackLayoutModel,\n      configModel: this._configModel\n    });\n    this.$el.append(header.render().$el);\n    this.addView(header);\n\n    var view = new ScrollView({\n      createContentView: function () {\n        return new WidgetsFormView({\n          userActions: self._userActions,\n          widgetDefinitionModel: self._widgetDefinitionModel,\n          querySchemaModel: analysisDefinitionNodeModel.querySchemaModel,\n          modals: self._modals,\n          configModel: self._configModel,\n          userModel: self._userModel\n        });\n      }\n    });\n\n    this.$el.append(view.render().$el);\n    this.addView(view);\n  },\n\n  _goBack: function () {\n    Router.goToPreviousRoute({\n      fallback: 'widgets'\n    });\n  }\n});\n","var _ = require('underscore');\nvar WidgetsFormColumnOptionsFactory = require('./widgets-form-column-options-factory');\n\nvar dataMap = {\n  category: {\n    labelTranslationKey: 'editor.widgets.widgets-form.type.category',\n    iconTemplate: require('builder/editor/widgets/widget-icon-category.tpl'),\n    Class: require('./schema/widgets-form-category-schema-model')\n  },\n  formula: {\n    labelTranslationKey: 'editor.widgets.widgets-form.type.formula',\n    iconTemplate: require('builder/editor/widgets/widget-icon-formula.tpl'),\n    Class: require('./schema/widgets-form-formula-schema-model'),\n    checkIfValid: function (querySchemaModel) {\n      return querySchemaModel.columnsCollection.any(function (m) {\n        return m.get('type') === 'number';\n      });\n    }\n  },\n  histogram: {\n    labelTranslationKey: 'editor.widgets.widgets-form.type.histogram',\n    iconTemplate: require('builder/editor/widgets/widget-icon-histogram.tpl'),\n    Class: require('./schema/widgets-form-histogram-schema-model'),\n    checkIfValid: function (querySchemaModel) {\n      return querySchemaModel.columnsCollection.any(function (m) {\n        return m.get('type') === 'number';\n      });\n    }\n  },\n  'time-series': {\n    labelTranslationKey: 'editor.widgets.widgets-form.type.time_series',\n    iconTemplate: require('builder/editor/widgets/widget-icon-timeSeries.tpl'),\n    Class: require('./schema/widgets-form-time-series-schema-model'),\n    checkIfValid: function (querySchemaModel) {\n      return querySchemaModel.columnsCollection.any(function (m) {\n        return m.get('type') === 'date' || m.get('type') === 'number';\n      });\n    }\n  }\n};\n\nmodule.exports = {\n\n  createWidgetFormModel: function (options) {\n    var widgetDefinitionModel = options.widgetDefinitionModel;\n    var widgetType = widgetDefinitionModel.get('type');\n    var Klass = dataMap[widgetType].Class;\n    return new Klass(widgetDefinitionModel.attributes, {\n      parse: true, // in case the raw attributes needs to be adapted to the expected form types, e.g. timestamp => Date\n      columnOptionsFactory: new WidgetsFormColumnOptionsFactory(options.querySchemaModel),\n      userModel: options.userModel,\n      modals: options.modals,\n      configModel: options.configModel,\n      querySchemaModel: options.querySchemaModel\n    });\n  },\n\n  getDataTypes: function (querySchemaModel) {\n    return _.reduce(dataMap, function (memo, val, key) {\n      if (val.checkIfValid ? val.checkIfValid(querySchemaModel) : true) {\n        memo.push({\n          iconTemplate: val.iconTemplate,\n          value: key,\n          label: _t(val.labelTranslationKey)\n        });\n      }\n      return memo;\n    }, []);\n  }\n\n};\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar WidgetFormFactory = require('./widgets-form-factory');\nvar template = require('./widgets-form-fields.tpl');\nrequire('builder/components/form-components/index');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'userActions',\n  'widgetDefinitionModel',\n  'querySchemaModel',\n  'modals',\n  'configModel',\n  'userModel'\n];\n\n/**\n *  View of form to edit a widget definition's data\n *\n */\nmodule.exports = CoreView.extend({\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n    var widgetOptions = {\n      widgetDefinitionModel: this._widgetDefinitionModel,\n      querySchemaModel: this._querySchemaModel,\n      modals: this._modals,\n      userModel: this._userModel,\n      configModel: this._configModel\n    };\n\n    this._widgetFormModel = WidgetFormFactory.createWidgetFormModel(widgetOptions);\n    this._widgetFormModel.updateSchema();\n\n    this._debounceSaveWidget = _.debounce(this._saveWidget.bind(this), 500);\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this._removeForm();\n    this.$el.empty();\n    this._initViews();\n    return this;\n  },\n\n  _initBinds: function () {\n    this._widgetFormModel.bind('change:column change:aggregation changeSchema', this.render, this);\n    this._widgetFormModel.bind('change', this._onFormChange, this);\n    this.add_related_model(this._widgetFormModel);\n\n    this._widgetDefinitionModel.on('change:title', function (model, title) {\n      this._widgetFormModel.set({title: title}, {silent: true}); // silent to avoid sending the form\n    }, this);\n    this._widgetDefinitionModel.bind('change:auto_style_definition', this._onAutoStyleChanged, this);\n    this.add_related_model(this._widgetDefinitionModel);\n  },\n\n  _initViews: function () {\n    var model = this._widgetFormModel;\n    var fields = model.getFields();\n\n    this._widgetFormView = new Backbone.Form({\n      template: template,\n      templateData: {\n        dataFields: fields.data,\n        styleFields: fields.style\n      },\n      model: model\n    });\n\n    this._widgetFormView.bind('change', function () {\n      this.commit();\n    });\n\n    this.$el.append(this._widgetFormView.render().$el);\n\n    return this;\n  },\n\n  validateForm: function () {\n    return this._widgetFormView.validate();\n  },\n\n  _removeForm: function () {\n    // Backbone.Form removes the view with the following method\n    this._widgetFormView && this._widgetFormView.remove();\n  },\n\n  _onFormChange: function () {\n    if (this._widgetFormModel.canSave()) {\n      this._widgetFormModel.changeWidgetDefinitionModel(this._widgetDefinitionModel);\n      this._debounceSaveWidget();\n    }\n  },\n\n  _onAutoStyleChanged: function (widgetDefModel, changedAttrs) {\n    var previousAutoStyleDefinition = widgetDefModel.previous('auto_style_definition');\n    if (previousAutoStyleDefinition === '' && _.isEmpty(previousAutoStyleDefinition)) {\n      this._widgetFormModel.set({\n        auto_style_definition: widgetDefModel.get('auto_style_definition')\n      }, {\n        silent: true\n      });\n\n      if (!_.isEmpty(changedAttrs)) {\n        this.render();\n      }\n    }\n  },\n\n  _saveWidget: function () {\n    this._userActions.saveWidget(this._widgetDefinitionModel);\n  },\n\n  clean: function () {\n    this._removeForm();\n    CoreView.prototype.clean.call(this);\n  }\n\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"Editor-HeaderInfo\">\\n  <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">2</div>\\n\\n  <div class=\"Editor-HeaderInfo-inner CDB-Text\">\\n    <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n      <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.widgets.widgets-form.data.title-label') ) +\n'</h2>\\n    </div>\\n    <p class=\"CDB-Text u-upperCase CDB-FontSize-small u-altTextColor u-bSpace--m\">' +\n__e( _t('editor.widgets.widgets-form.data.description') ) +\n'</p>\\n\\n    <div data-fields=\"' +\n__e( dataFields ) +\n'\"></div>\\n\\n  </div>\\n</div>\\n\\n<div class=\"CDB-HeaderInfo\">\\n  <div class=\"CDB-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">3</div>\\n\\n  <div class=\"Editor-HeaderInfo-inner CDB-Text\">\\n    <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n      <h2 class=\"CDB-Text CDB-HeaderInfo-TitleText CDB-Size-large\">' +\n__e( _t('editor.widgets.widgets-form.style.title-label') ) +\n'</h2>\\n    </div>\\n    <p class=\"CDB-Text u-upperCase CDB-FontSize-small u-altTextColor u-bSpace--m\">' +\n__e( _t('editor.widgets.widgets-form.style.define') ) +\n'</p>\\n\\n    <div data-fields=\"' +\n__e( styleFields ) +\n'\"></div>\\n\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"Editor-HeaderInfo\">\\n  <div class=\"Editor-HeaderNumeration CDB-Text is-semibold u-rSpace--m\">1</div>\\n  <div class=\"Editor-HeaderInfo-inner CDB-Text js-selector\">\\n    <div class=\"Editor-HeaderInfo-title u-bSpace--m\">\\n      <h2 class=\"CDB-Text CDB-HeaderInfo-titleText CDB-Size-large\">' +\n__e( _t('editor.widgets.widgets-form.type.title-label') ) +\n'</h2>\\n    </div>\\n    <p class=\"CDB-Text u-upperCase CDB-FontSize-small u-altTextColor u-bSpace--m js-highlight\">' +\n__e( _t('editor.widgets.widgets-form.type.description') ) +\n'</p>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar CarouselFormView = require('builder/components/carousel-form-view');\nvar CarouselCollection = require('builder/components/custom-carousel/custom-carousel-collection');\nvar WidgetFormFactory = require('./widgets-form-factory');\nvar WidgetsFormFieldsView = require('./widgets-form-fields-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar loadingTemplate = require('builder/editor/layers/panel-loading-template.tpl');\n\nvar TIME_SERIES_TYPE = 'time-series';\nvar REQUIRED_OPTS = [\n  'userActions',\n  'widgetDefinitionModel',\n  'modals',\n  'querySchemaModel',\n  'configModel',\n  'userModel'\n];\n\nmodule.exports = CoreView.extend({\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n    this._initBinds();\n\n    this._shouldFetchQuery();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    if (!this._querySchemaModel.isFetched()) {\n      this.$el.html(loadingTemplate());\n    } else {\n      this._renderCarousel();\n      this._renderForm();\n    }\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._widgetDefinitionModel, 'change:type', this._renderFormAndValidate);\n    this.listenTo(this._querySchemaModel, 'change:status', this.render);\n    this.listenTo(this._querySchemaModel, 'change:query', this._shouldFetchQuery);\n  },\n\n  _shouldFetchQuery: function () {\n    if (this._querySchemaModel.shouldFetch()) {\n      this._querySchemaModel.fetch();\n    }\n  },\n\n  _renderCarousel: function () {\n    var filteredDataTypes = this._getFilteredDataTypes();\n    var carouselCollection = new CarouselCollection(\n      _.map(filteredDataTypes, function (type) {\n        return {\n          selected: this._widgetDefinitionModel.get('type') === type.value,\n          val: type.value,\n          label: type.label,\n          template: function () {\n            return (type.iconTemplate && type.iconTemplate({ makeItBig: true })) || type.value;\n          }\n        };\n      }, this)\n    );\n\n    carouselCollection.bind('change:selected', function (mdl) {\n      if (mdl.get('selected')) {\n        this._widgetDefinitionModel.changeType(mdl.getValue());\n      }\n    }, this);\n\n    var view = new CarouselFormView({\n      collection: carouselCollection,\n      template: require('./widgets-form-types.tpl')\n    });\n    this.addView(view);\n    this.$el.append(view.render().el);\n  },\n\n  _getFilteredDataTypes: function () {\n    var containsTimeSeries = false;\n    var modelCollection = this._widgetDefinitionModel.collection;\n    if (modelCollection) {\n      containsTimeSeries = modelCollection.any(function (model) {\n        return model.get('type') === TIME_SERIES_TYPE;\n      });\n    }\n    var filteredDataTypes = _.filter(WidgetFormFactory.getDataTypes(this._querySchemaModel), function (type) {\n      // Do not allow to change the widget to time-series if there is already a time-series widget\n      return (!containsTimeSeries ||\n              type.value !== TIME_SERIES_TYPE ||\n              this._widgetDefinitionModel.get('type') === TIME_SERIES_TYPE);\n    }, this);\n    return filteredDataTypes;\n  },\n\n  _renderFormAndValidate: function () {\n    this._renderForm();\n\n    if (this._formView.validateForm() === null) {\n      this._userActions.saveWidget(this._widgetDefinitionModel);\n    }\n  },\n\n  _renderForm: function () {\n    if (this._formView) {\n      this.removeView(this._formView);\n      this._formView.clean();\n    }\n    this._formView = new WidgetsFormFieldsView({\n      userActions: this._userActions,\n      widgetDefinitionModel: this._widgetDefinitionModel,\n      querySchemaModel: this._querySchemaModel,\n      modals: this._modals,\n      userModel: this._userModel,\n      configModel: this._configModel\n    });\n    this.addView(this._formView);\n    this.$el.append(this._formView.render().el);\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<h2 class=\"CDB-Text CDB-Size-huge is-light u-secondaryTextColor u-bSpace--xl\">' +\n__e( _t('editor.widgets.widgets-form.placeholder-text') ) +\n'</h2>\\n<button class=\"CDB-Button CDB-Button--dashed CDB-Button--wide CDB-Button-Text CDB-Text is-semibold CDB-Size-small u-upperCase u-flex u-justifyCenter u-alignCenter js-add\">\\n  <span class=\"js-plus-icon u-flex u-justifyCenter u-alignCenter u-rSpace--m\"></span>\\n  ' +\n__e( _t('editor.widgets.add-widget.label') ) +\n'\\n</button>\\n';\n\n}\nreturn __p\n}","var deleteWidgetConfirmationTemplate = require('./delete-widget-confirmation.tpl');\nvar ConfirmationView = require('builder/components/modals/confirmation/modal-confirmation-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar Router = require('builder/routes/router');\n\nvar REQUIRED_OPTS = [\n  'analysisDefinitionNodesCollection',\n  'editorModel',\n  'layerDefinitionsCollection',\n  'modals',\n  'userActions',\n  'widgetDefinitionsCollection'\n];\n\nvar service = (function () {\n  return {\n    init: function (opts) {\n      checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n    },\n\n    removeWidget: function (widgetDefinitionModel) {\n      if (widgetDefinitionModel) {\n        var self = this;\n        var widgetName = widgetDefinitionModel.get('title');\n\n        this._modalView = this._modals.create(function (modalModel) {\n          return new ConfirmationView({\n            modalModel: modalModel,\n            template: deleteWidgetConfirmationTemplate,\n            loadingTitle: _t('editor.widgets.delete.loading', { name: widgetName }),\n            renderOpts: {\n              name: widgetName\n            },\n            runAction: function () {\n              modalModel.destroy();\n              widgetDefinitionModel.destroy();\n              self._modalView.clean();\n              Router.goToWidgetList();\n            }\n          });\n        });\n      }\n    },\n\n    editWidget: function (model) {\n      this._editorModel.set('edition', false);\n      this._editorModel.trigger('cancelPreviousEditions');\n\n      Router.goToWidget(model.get('id'));\n    }\n  };\n})();\n\nmodule.exports = service;\n","var _ = require('underscore');\nvar $ = require('jquery');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar EditorWidgetView = require('./widget-view');\nvar IconView = require('builder/components/icon/icon-view');\nvar template = require('./widgets-view.tpl');\nvar widgetPlaceholderTemplate = require('./widgets-placeholder.tpl');\nvar widgetsErrorTemplate = require('./widgets-content-error.tpl');\nvar widgetsNotReadyTemplate = require('./widgets-content-not-ready.tpl');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar AddWidgetsView = require('builder/components/modals/add-widgets/add-widgets-view');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\n\nrequire('jquery-ui');\n\nvar STATES = {\n  loading: 'loading',\n  ready: 'ready'\n};\n\nvar REQUIRED_OPTS = [\n  'userActions',\n  'analysisDefinitionNodesCollection',\n  'layerDefinitionsCollection',\n  'widgetDefinitionsCollection',\n  'userModel',\n  'stackLayoutModel',\n  'configModel',\n  'modals'\n];\n\n/**\n * View to render widgets definitions overview\n */\nmodule.exports = CoreView.extend({\n\n  module: 'editor:widgets:widgets-view',\n\n  events: {\n    'click .js-add': '_addWidget'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this.viewModel = new Backbone.Model({\n      state: STATES.loading\n    });\n\n    this._initViewState();\n    this._initBinds();\n\n    var callback = this._onAllQueryGeometryLoaded.bind(this);\n    this._layerDefinitionsCollection.loadAllQueryGeometryModels(callback);\n  },\n\n  render: function () {\n    this._destroySortable();\n    this.clearSubViews();\n    this.$el.empty();\n\n    this._initViews();\n\n    return this;\n  },\n\n  _initViewState: function () {\n    this._viewState = new Backbone.Model({\n      anyGeometryData: true\n    });\n\n    this._setViewState();\n  },\n\n  _initViews: function () {\n    if (this._isLoading()) {\n      this.$el.append(widgetsNotReadyTemplate());\n      return;\n    }\n\n    if (!this._viewState.get('anyGeometryData')) {\n      this._showNoGeometryData();\n      return;\n    }\n\n    if (this._widgetDefinitionsCollection.size() > 0) {\n      this.$el.append(template);\n      _.each(this._widgetDefinitionsCollection.sortBy('order'), this._addWidgetItem, this);\n      this._initSortable();\n      this._addTooltip();\n      this._renderPlusIcon();\n      return;\n    }\n\n    this.$el.append(widgetPlaceholderTemplate());\n    this._addTooltip();\n    this._renderPlusIcon();\n  },\n\n  _renderPlusIcon: function () {\n    var plusIcon = new IconView({\n      placeholder: this.$el.find('.js-plus-icon'),\n      icon: 'plus'\n    });\n    plusIcon.render();\n    this.addView(plusIcon);\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._widgetDefinitionsCollection, 'destroy successAdd', this.render, this);\n    this.listenTo(this.viewModel, 'change:state', this.render, this);\n    this.listenTo(this._viewState, 'change', this.render);\n  },\n\n  _showNoGeometryData: function () {\n    this.$el.append(\n      widgetsErrorTemplate({\n        body: _t('editor.widgets.no-geometry-data')\n      })\n    );\n  },\n\n  _onAllQueryGeometryLoaded: function () {\n    this.viewModel.set('state', STATES.ready);\n  },\n\n  _addTooltip: function () {\n    var tooltip = new TipsyTooltipView({\n      el: this.$('.js-add'),\n      gravity: 'w',\n      title: function () {\n        return _t('editor.widgets.add-widget.tooltip');\n      },\n      offset: 8\n    });\n\n    this.addView(tooltip);\n  },\n\n  _isLoading: function () {\n    return this.viewModel.get('state') === STATES.loading;\n  },\n\n  _isReady: function () {\n    return this.viewModel.get('state') === STATES.ready;\n  },\n\n  _setViewState: function () {\n    this._layerDefinitionsCollection.isThereAnyGeometryData()\n      .then(function (anyGeometry) {\n        this._viewState.set('anyGeometryData', anyGeometry);\n      }.bind(this));\n  },\n\n  _initSortable: function () {\n    this.$('.js-widgets').sortable({\n      axis: 'y',\n      items: '> li.BlockList-item',\n      opacity: 0.8,\n      update: this._onSortableFinish.bind(this),\n      forcePlaceholderSize: false\n    }).disableSelection();\n  },\n\n  _destroySortable: function () {\n    if (this.$('.js-widgets').data('ui-sortable')) {\n      this.$('.js-widgets').sortable('destroy');\n    }\n  },\n\n  _onSortableFinish: function () {\n    var self = this;\n    this.$('.js-widgets > .js-widgetItem').each(function (index, item) {\n      var modelCid = $(item).data('model-cid');\n      var widgetDefModel = self._widgetDefinitionsCollection.get(modelCid);\n      widgetDefModel.set('order', index);\n      self._userActions.saveWidget(widgetDefModel);\n    });\n  },\n\n  _addWidget: function () {\n    if (this.$('.js-add').hasClass('is-disabled')) return;\n\n    var self = this;\n\n    this._modals.create(function (modalModel) {\n      return new AddWidgetsView({\n        modalModel: modalModel,\n        userModel: self._userModel,\n        userActions: self._userActions,\n        configModel: self._configModel,\n        analysisDefinitionNodesCollection: self._analysisDefinitionNodesCollection,\n        layerDefinitionsCollection: self._layerDefinitionsCollection,\n        widgetDefinitionsCollection: self._widgetDefinitionsCollection\n      });\n    }, {\n      breadcrumbsEnabled: true\n    });\n  },\n\n  _addWidgetItem: function (model) {\n    var view = new EditorWidgetView({\n      model: model,\n      layer: this._layerDefinitionsCollection.get(model.get('layer_id')),\n      modals: this._modals,\n      userActions: this._userActions,\n      stackLayoutModel: this._stackLayoutModel\n    });\n    this.addView(view);\n    this.$('.js-widgets').append(view.render().el);\n  },\n\n  clean: function () {\n    this._destroySortable();\n    CoreView.prototype.clean.apply(this);\n  }\n});\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<button class=\"CDB-Button CDB-Button--dashed CDB-Button--wide CDB-Button-Text CDB-Text is-semibold CDB-Size-small u-upperCase u-bSpace--m u-flex u-justifyCenter u-alignCenter js-add\">\\n  <span class=\"js-plus-icon u-flex u-justifyCenter u-alignCenter u-rSpace--m\"></span>\\n  ' +\n__e( _t('editor.widgets.add-widget.label') ) +\n'\\n</button>\\n<ul class=\"BlockList js-widgets\"></ul>\\n';\n\n}\nreturn __p\n}","var track = function (error) {\n  if (window.trackJs) {\n    window.trackJs.track(error);\n  }\n};\n\nmodule.exports = track;\n","/**\n *  Send events to Google Analytics if it is available\n *  - https://developers.google.com/analytics/devguides/collection/analyticsjs/sending-hits\n *\n */\n\nvar GAPusher = function (opts) {\n  var ga = window.ga;\n  opts = opts || {};\n\n  if (ga) {\n    ga(opts.eventName || 'send', {\n      hitType: opts.hitType,\n      eventCategory: opts.eventCategory,\n      eventAction: opts.eventAction,\n      eventLabel: opts.eventLabel\n    });\n  }\n};\n\nmodule.exports = GAPusher;\n","var _ = require('underscore');\nvar ACTIVE_LOCALE = window.ACTIVE_LOCALE;\nvar Locale = require('locale/index')[ACTIVE_LOCALE];\n\nvar LINK_TEMPLATE = _.template(\"<a href='<%- href %>'><%- link %></a>\");\n\nmodule.exports = {\n  /*\n  *\n  * Sometimes we need to include a link in a message. This function takes a key:\n  *\n  * {\n  *   \"body\": \"You are over platform's limits. Please %{link} to know more details\",\n  *   \"link\": \"contact us\",\n  *   \"href\": \"mailto:support@carto.com\"\n  * }\n  *\n  * and return the message htmlfied with the link properly included\n  */\n\n  linkify: function (key) {\n    // microtemplate function\n    // underscore doesn't allow change the template settings for one call\n    function t (s, d) {\n      for (var p in d) {\n        s = s.replace(new RegExp('%{' + p + '}', 'g'), d[p]);\n      }\n      return s;\n    }\n\n    var data = this.resolve(key);\n\n    if (!data) {\n      return void 0;\n    }\n\n    if (_.isString(data)) {\n      // we need an object with body, href, link\n      return data;\n    }\n\n    var message = data.body;\n    var link = data.link;\n    var href = data.href;\n\n    // If some data is missing or it doesn't need link\n    if (!message || !link || !href || !this.needLink(message)) {\n      return void 0;\n    }\n\n    return t(message, {\n      link: LINK_TEMPLATE({\n        link: link,\n        href: href\n      })\n    });\n  },\n\n  needLink: function (message) {\n    return message.indexOf('%{link}') >= 0;\n  },\n\n  // It returns the value or undefined for a given locale key\n  resolve: function (path) {\n    return path.split('.').reduce(function (prev, curr) {\n      return prev ? prev[curr] : void 0;\n    }, Locale);\n  }\n};\n","var carto = require('carto');\nvar torque = require('torque.js');\nvar Utils = require('builder/helpers/utils');\nvar _ = require('underscore');\n\nvar ERROR_REGEX = /.*:(\\d+):(\\d+)\\s*(.*)/;\n\nvar CartoParser = function (cartocss) {\n  this.parse_env = null;\n  this.ruleset = null;\n  if (cartocss) {\n    this.parse(cartocss);\n  }\n};\n\nCartoParser.prototype = {\n  // value due to torque\n  RESERVED_VARIABLES: ['mapnik-geometry-type', 'points_density', 'points_count', 'src', 'value', 'agg_value', 'agg_value_density'],\n\n  parse: function (cartocss) {\n    this.parse_env = {\n      validation_data: false,\n      frames: [],\n      errors: [],\n      error: function (obj) {\n        obj.line = carto.Parser().extractErrorLine(cartocss, obj.index);\n        this.errors.push(obj);\n      }\n    };\n\n    var self = this;\n    var ruleset = null;\n    var defs = null;\n\n    try {\n      // set default reference\n      carto.tree.Reference.setData(carto.default_reference.version.latest);\n      ruleset = (new carto.Parser(this.parse_env)).parse(cartocss);\n    } catch (e) {\n      // add the style.mss string to match the response from the server\n      this.parse_env.errors = this.parseError(['style\\.mss' + e.message]);\n      return;\n    }\n\n    if (ruleset) {\n      var existing = {};\n      var mapDef;\n      var symbolizers;\n      var i;\n      var j;\n      var r;\n\n      this.definitions = defs = ruleset.toList(this.parse_env);\n\n      for (i in defs) {\n        if (defs[i].elements.length > 0) {\n          if (defs[i].elements[0].value === 'Map') {\n            mapDef = defs.splice(i, 1)[0];\n          }\n        }\n      }\n\n      symbolizers = torque.cartocss_reference.version.latest.layer;\n\n      if (mapDef) {\n        mapDef.rules.forEach(function (r) {\n          var key = r.name;\n          var type;\n          var element;\n\n          if (!(key in symbolizers)) {\n            self.parse_env.error({\n              message: 'Rule ' + key + ' not allowed for Map.',\n              index: r.index\n            });\n          } else {\n            type = symbolizers[r.name].type;\n            element = r.value.value[0].value[0];\n            if (!self._checkValidType(element, type)) {\n              self.parse_env.error({\n                message: 'Expected type ' + type + '.',\n                index: r.index\n              });\n            }\n          }\n        });\n      }\n\n      defs = carto.inheritDefinitions(defs, this.parse_env);\n      defs = carto.sortStyles(defs, this.parse_env);\n\n      for (i in defs) {\n        for (j in defs[i]) {\n          r = defs[i][j];\n          if (r && r.toXML) {\n            r.toXML(this.parse_env, existing);\n          }\n        }\n      }\n\n      // toList uses parse_env.errors.message to put messages\n      if (this.parse_env.errors.message) {\n        _(this.parse_env.errors.message.split('\\n')).each(function (m) {\n          self.parse_env.errors.push(m);\n        });\n      }\n    }\n\n    this.ruleset = ruleset;\n    return this;\n  },\n\n  _checkValidType: function (e, type) {\n    if (['number', 'float'].indexOf(type) > -1) {\n      return typeof e.value === 'number';\n    } else if (type === 'string') {\n      return e.value !== 'undefined' && typeof e.value === 'string';\n    } else if (type.constructor === Array) {\n      return type.indexOf(e.value) > -1 || e.value === 'linear';\n    } else if (type === 'color') {\n      return this._checkValidColor(e);\n    }\n    return true;\n  },\n\n  _checkValidColor: function (e) {\n    var expectedArguments = {rgb: 3, hsl: 3, rgba: 4, hsla: 4};\n    return typeof e.rgb !== 'undefined' || expectedArguments[e.name] === e.args;\n  },\n\n  /**\n   * gets an array of parse errors from windshaft\n   * and returns an array of {line:1, error: 'string'] with user friendly\n   * strings. Parses errors in format:\n   *\n   *  'style.mss:7:2 Invalid code: asdasdasda'\n   *\n   * it could also get already parsed objects so we return them directly without parsing them again\n   */\n  parseError: function (errors) {\n    var parsedErrors = _.compact(errors).map(function (error) {\n      if (_.isObject(error)) return error;\n\n      var matchedError = error.match(ERROR_REGEX);\n      return matchedError\n        ? { line: parseInt(matchedError[1], 10), message: matchedError[3] }\n        : { line: null, message: error };\n    });\n\n    // sort by line\n    parsedErrors.sort(function (a, b) { return a.line - b.line; });\n    parsedErrors = _.uniq(parsedErrors, true, function (a) { return a.line + a.message; });\n\n    return parsedErrors;\n  },\n\n  /**\n   * return the error list, empty if there were no errors\n   */\n  errors: function () {\n    return this.parse_env ? this.parse_env.errors : [];\n  },\n\n  _colorsFromRule: function (rule) {\n    function searchRecursiveByType (v, t) {\n      var res = [];\n      var i;\n      var r;\n      for (i in v) {\n        if (v[i] instanceof t) {\n          res.push(v[i]);\n        } else if (typeof v[i] === 'object') {\n          r = searchRecursiveByType(v[i], t);\n          if (r.length) {\n            res = res.concat(r);\n          }\n        }\n      }\n      return res;\n    }\n    return searchRecursiveByType(rule.ev(this.parse_env), carto.tree.Color);\n  },\n\n  _varsFromRule: function (rule) {\n    function searchRecursiveByType (v, t) {\n      var res = [];\n      var i;\n      var r;\n\n      for (i in v) {\n        if (v[i] instanceof t) {\n          res.push(v[i]);\n        } else if (typeof v[i] === 'object') {\n          r = searchRecursiveByType(v[i], t);\n          if (r.length) {\n            res = res.concat(r);\n          }\n        }\n      }\n      return res;\n    }\n    return searchRecursiveByType(rule, carto.tree.Field);\n  },\n\n  /**\n   * Extract information from the carto using the provided method.\n   * */\n  _extract: function (method, extractVariables) {\n    var self = this;\n    var columns = [];\n    var definitions;\n    var def;\n    var d;\n    var r;\n    var f;\n    var k;\n    var rule;\n    var columnList;\n    var filter;\n    var filter_key;\n\n    if (this.ruleset) {\n      definitions = this.ruleset.toList(this.parse_env);\n      for (d in definitions) {\n        def = definitions[d];\n\n        if (def.filters) {\n          // extract from rules\n          for (r in def.rules) {\n            rule = def.rules[r];\n            columnList = method(this, rule);\n            columns = columns.concat(columnList);\n          }\n\n          if (extractVariables) {\n            for (f in def.filters) {\n              filter = def.filters[f];\n              for (k in filter) {\n                filter_key = filter[k];\n                if (filter_key.key && filter_key.key.value) {\n                  columns.push(filter_key.key.value);\n                }\n              }\n            }\n          }\n        }\n      }\n\n      return _.reject(_.uniq(columns), function (v) {\n        return _.contains(self.RESERVED_VARIABLES, v);\n      });\n    }\n  },\n\n  /**\n   * return a list of colors used in cartocss\n   */\n  colorsUsed: function (opt) {\n    // extraction method\n    var method = function (self, rule) {\n      var colors = self._colorsFromRule(rule);\n\n      return _.map(colors, function (color) {\n        return color.rgb;\n      });\n    };\n\n    var colors = this._extract(method, false);\n\n    if (opt && opt.mode === 'hex') {\n      colors = _.map(colors, function (color) {\n        return Utils.rgbToHex(color[0], color[1], color[2]);\n      });\n    }\n\n    return colors;\n  },\n\n  colorsUsedForLegend: function (opt) {\n    var rules = this.getDefaultRules();\n\n    if (rules['image-filters']) {\n      var method = function (self, rule) {\n        var imageFillRule = rules['image-filters'];\n        var colors = self._colorsFromRule(imageFillRule);\n        return _.map(colors, function (f) {\n          return f.rgb;\n        });\n      };\n\n      var colors = this._extract(method, true);\n\n      if (opt && opt.mode === 'hex') {\n        colors = _.map(colors, function (color) {\n          return Utils.rgbToHex(color[0], color[1], color[2]);\n        });\n      }\n    }\n\n    return _.map(colors, function (color) {\n      return { color: color };\n    });\n  },\n\n  /**\n   * return a list of variables used in cartocss\n   */\n  variablesUsed: function () {\n    // extraction method\n    var method = function (self, rule) {\n      return _.map(self._varsFromRule(rule), function (f) {\n        return f.value;\n      });\n    };\n\n    return this._extract(method, true);\n  },\n\n  /**\n   * returns the default layer\n   */\n  getDefaultRules: function () {\n    var rules = [];\n    var i;\n    var def;\n    var rulesMap = {};\n\n    for (i = 0; i < this.definitions.length; ++i) {\n      def = this.definitions[i];\n      // all zooms and default attachment so we don't get conditional variables\n      if (def.zoom === 8388607 && _.size(def.filters.filters) === 0 && def.attachment === '__default__') {\n        rules = rules.concat(def.rules);\n      }\n    }\n\n    for (i in rules) {\n      var rule = rules[i];\n      rulesMap[rule.name] = rule;\n    }\n    return rulesMap;\n  },\n\n  getRuleByName: function (definition, ruleName) {\n    if (!definition._rulesByName) {\n      var rulesMap = definition._rulesByName = {};\n      for (var r in definition.rules) {\n        var rule = definition.rules[r];\n        rulesMap[rule.name] = rule;\n      }\n    }\n    return definition._rulesByName[ruleName];\n  }\n};\n\nmodule.exports = CartoParser;\n","/*  Check and perform a reset of the styles due to a change over a node definition model (if possible).\n *\n *  In order to use and test this function in any view, we have removed this code\n *  from user-actions Class.\n *\n *  forceStyleUpdate: it will reset the styles in any case, no matter the schema or the geometry.\n *  resetQueryReady:  set as false ready property for query-schema-model and query-geometry-model\n *                    in order to wait for a node change before checking if reset styles is necessary.\n *\n */\n\nmodule.exports = function (nodeDefModel, layerDefModel, forceStyleUpdate, resetQueryReady) {\n  if (!nodeDefModel) throw new Error('nodeDefModel is required');\n  if (!layerDefModel) throw new Error('layerDefModel is required');\n\n  var CHANGE_READY = 'change:ready';\n  var onQueryGeometryAndSchemaReady;\n  var styleModel = layerDefModel.styleModel;\n  var queryGeometryModel = nodeDefModel.queryGeometryModel;\n  var querySchemaModel = nodeDefModel.querySchemaModel;\n\n  onQueryGeometryAndSchemaReady = function () {\n    if (queryGeometryModel.get('ready') && querySchemaModel.get('ready')) {\n      queryGeometryModel.unbind(CHANGE_READY, onQueryGeometryAndSchemaReady);\n      querySchemaModel.unbind(CHANGE_READY, onQueryGeometryAndSchemaReady);\n    } else {\n      return; // wait until ready\n    }\n\n    var CHANGE_STATUS = 'change:status';\n    var saveDefaultStylesIfStillRelevant;\n\n    saveDefaultStylesIfStillRelevant = function () {\n      var applyStylesAndSave = function () {\n        var simpleGeometryType = queryGeometryModel.get('simple_geom');\n        if (simpleGeometryType) {\n          styleModel.setDefaultPropertiesByType('simple', simpleGeometryType);\n        } else {\n          styleModel.setDefaultPropertiesByType('none'); // fallback if there is no known geometry\n        }\n        layerDefModel.save();\n      };\n\n      var styleTypeApplied = styleModel.get('type');\n\n      if (queryGeometryModel.isDone() && querySchemaModel.isDone()) {\n        queryGeometryModel.unbind(CHANGE_STATUS, saveDefaultStylesIfStillRelevant);\n        querySchemaModel.unbind(CHANGE_STATUS, saveDefaultStylesIfStillRelevant);\n      } else {\n        return; // wait until ready\n      }\n\n      // If the geometry doesn't change and all columns used for style-def-model are still present + the styles are not custom\n      // we can reset the style form with the geometry provided\n      var haveDifferentSchema = querySchemaModel.hasDifferentSchemaThan(styleModel.getColumnsUsedForStyle());\n      if (\n        styleTypeApplied !== 'none' &&\n          !forceStyleUpdate && (\n          (!queryGeometryModel.hasChanged('simple_geom') && !haveDifferentSchema) ||\n            layerDefModel.get('cartocss_custom')\n        )\n      ) {\n        return;\n      }\n\n      if ( // Only apply changes if:\n        (\n          layerDefModel.collection.contains(layerDefModel) && // layer still exist\n          layerDefModel.get('source') === nodeDefModel.id // node is still the head of layer\n        ) || forceStyleUpdate // we force the style update\n      ) {\n        applyStylesAndSave();\n      }\n    };\n\n    saveDefaultStylesIfStillRelevant();\n\n    if (!queryGeometryModel.isFetched()) {\n      queryGeometryModel.bind(CHANGE_STATUS, saveDefaultStylesIfStillRelevant);\n    }\n\n    if (!querySchemaModel.isFetched()) {\n      querySchemaModel.bind(CHANGE_STATUS, saveDefaultStylesIfStillRelevant);\n    }\n  };\n\n  if (resetQueryReady) {\n    queryGeometryModel.set('ready', false);\n    querySchemaModel.set('ready', false);\n  }\n\n  queryGeometryModel.bind(CHANGE_READY, onQueryGeometryAndSchemaReady);\n  querySchemaModel.bind(CHANGE_READY, onQueryGeometryAndSchemaReady);\n  onQueryGeometryAndSchemaReady();\n};\n","var _ = require('underscore');\nvar ParserCSS = require('builder/helpers/parser-css');\nvar LegendColorHelper = require('builder/editor/layers/layer-content-views/legend/form/legend-color-helper');\n\nmodule.exports = {\n  getStyleAttrs: function (styleModel) {\n    if (!styleModel) return;\n\n    var fill = styleModel.get('fill');\n    var stroke = styleModel.get('stroke');\n    if (!fill && !stroke || _.isEmpty(fill) && _.isEmpty(stroke)) return;\n\n    return {\n      fill: fill,\n      stroke: stroke\n    };\n  },\n\n  getColorAttribute: function (styleModel) {\n    var color = this.getColor(styleModel);\n    return color && color.attribute;\n  },\n\n  getSizeAttribute: function (styleModel) {\n    var size = this.getSize(styleModel);\n    return size && size.attribute;\n  },\n\n  getColor: function (styleModel) {\n    var style = this.getStyleAttrs(styleModel);\n    var color = style ? (style.fill && style.fill.color || style.stroke && style.stroke.color) : null;\n    return color;\n  },\n\n  getSize: function (styleModel) {\n    var style = this.getStyleAttrs(styleModel);\n    var size = style ? (style.fill && style.fill.size || style.stroke && style.stroke.size) : null;\n    return size;\n  },\n\n  getColorsFromRange: function (styleModel) {\n    var color = this.getColor(styleModel);\n    if (!(color && color.range)) { return []; }\n\n    return color.range.map(function (v, index) {\n      return { color: v };\n    });\n  },\n\n  getHeatmapColors: function (layerDefinitionModel) {\n    var changed = layerDefinitionModel.styleModel && layerDefinitionModel.styleModel.hasChanged();\n\n    if (changed) {\n      return this.getColorsFromRange(layerDefinitionModel.styleModel);\n    }\n\n    var content = layerDefinitionModel.cartocssModel.get('content');\n    var parser = new ParserCSS(content);\n    return parser.colorsUsedForLegend({ mode: 'hex' });\n  },\n\n  getStyleCategories: function (styleModel) {\n    var color = this.getColor(styleModel);\n    if (!color) { return []; }\n\n    if (color.range) {\n      return color.range.map(function (v, index) {\n        return {\n          color: v,\n          title: color.domain && LegendColorHelper.unquoteColor(color.domain[index]) || _t('editor.legend.legend-form.others'),\n          icon: color.images && color.images[index] || ''\n        };\n      });\n    }\n\n    if (color.fixed) {\n      return [{\n        color: color.fixed,\n        icon: color.image || '',\n        title: ''\n      }];\n    }\n\n    return [];\n  }\n};\n","module.exports = function () {\n  var stylesWithoutAutostyles;\n\n  return function (layerDefModel) {\n    var isAutoStyleActive = !!layerDefModel.get('autoStyle');\n\n    if (!isAutoStyleActive) {\n      stylesWithoutAutostyles = {\n        previousCartoCSS: layerDefModel.get('cartocss'),\n        previousCartoCSSCustom: layerDefModel.attributes.cartocss_custom\n      };\n    }\n\n    return stylesWithoutAutostyles;\n  };\n};\n","var Backbone = require('backbone');\n\nvar VIEWING_MODE = 'viewing';\nvar DRAWING_FEATURE_MODE = 'drawing';\nvar EDITING_FEATURE_MODE = 'editing';\n\nvar MapMode = Backbone.Model.extend({\n  defaults: {\n    mode: VIEWING_MODE\n  },\n\n  enterViewingMode: function () {\n    delete this._featureDefinition;\n    this.set('mode', VIEWING_MODE);\n  },\n\n  enterDrawingFeatureMode: function (feature) {\n    this._featureDefinition = feature;\n    this.set('mode', DRAWING_FEATURE_MODE);\n  },\n\n  enterEditingFeatureMode: function (feature) {\n    this._featureDefinition = feature;\n    this.set('mode', EDITING_FEATURE_MODE);\n  },\n\n  getFeatureDefinition: function () {\n    return this._featureDefinition;\n  },\n\n  isViewingMode: function () {\n    return this._isMode(VIEWING_MODE);\n  },\n\n  isDrawingFeatureMode: function () {\n    return this._isMode(DRAWING_FEATURE_MODE);\n  },\n\n  isEditingFeatureMode: function () {\n    return this._isMode(EDITING_FEATURE_MODE);\n  },\n\n  bindRouteEvents: function (routeModel) {\n    this.listenTo(routeModel, 'change:currentRoute', this._handleRoute, this);\n  },\n\n  _handleRoute: function (routeModel) {\n    var currentRoute = routeModel.get('currentRoute');\n    var routeName = currentRoute[0];\n\n    if (routeName !== 'edit_feature' &&\n        routeName.indexOf('add_feature_') !== 0) {\n      this.enterViewingMode();\n    }\n  },\n\n  _isMode: function (mode) {\n    return this.get('mode') === mode;\n  }\n});\n\nmodule.exports = MapMode;\n","module.exports = \"<div class=\\\"CDB-infowindow CDB-infowindow--light js-infowindow\\\">\\n  <div class=\\\"CDB-infowindow-close js-close\\\"></div>\\n  <div class=\\\"CDB-infowindow-container\\\">\\n    <div class=\\\"CDB-infowindow-header CDB-infowindow-headerBg CDB-infowindow-headerBg--light js-header\\\" style=\\\"background: #35AAE5;\\\">\\n      {{#loading}}…{{/loading}}\\n      <ul class=\\\"CDB-infowindow-list\\\">\\n        {{#content.fields}}\\n          {{^index}}\\n            <li class=\\\"CDB-infowindow-listItem\\\">\\n              {{#title}}<h5 class=\\\"CDB-infowindow-subtitle\\\">{{title}}</h5>{{/title}}\\n              {{#value}}<h4 class=\\\"CDB-infowindow-title {{#type}}{{ type }}{{/type}}\\\">{{{ value }}}</h4>{{/value}}\\n            </li>\\n            {{^value}}{{/value}}\\n          {{/index}}\\n        {{/content.fields}}\\n      </ul>\\n    </div>\\n    <div class=\\\"CDB-infowindow-inner js-inner\\\">\\n      {{#loading}}\\n        <div class=\\\"CDB-Loader js-loader is-visible\\\"></div>\\n      {{/loading}}\\n      <ul class=\\\"CDB-infowindow-list js-content\\\">\\n        {{#content.fields}}\\n          {{#index}}\\n            <li class=\\\"CDB-infowindow-listItem\\\">\\n              {{#title}}\\n                <h5 class=\\\"CDB-infowindow-subtitle\\\">{{title}}</h5>\\n              {{/title}}\\n              {{#value}}\\n                <h4 class=\\\"CDB-infowindow-title\\\">{{{ value }}}</h4>\\n              {{/value}}\\n              {{^value}}\\n                <h4 class=\\\"CDB-infowindow-title\\\">NULL</h4>\\n              {{/value}}\\n            </li>\\n          {{/index}}\\n        {{/content.fields}}\\n      </ul>\\n    </div>\\n    <div class=\\\"CDB-hook\\\">\\n      <div class=\\\"CDB-hook-inner\\\"></div>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"CDB-infowindow CDB-infowindow--dark js-infowindow\\\" style=\\\"background:#2E3C43\\\">\\n  <div class=\\\"CDB-infowindow-close js-close\\\"></div>\\n  <div class=\\\"CDB-infowindow-container\\\">\\n    <div class=\\\"CDB-infowindow-bg\\\">\\n      <div class=\\\"CDB-infowindow-inner js-inner\\\">\\n        {{#loading}}\\n          <div class=\\\"CDB-Loader js-loader is-visible\\\"></div>\\n        {{/loading}}\\n        <ul class=\\\"CDB-infowindow-list js-content\\\">\\n          {{#content.fields}}\\n          <li class=\\\"CDB-infowindow-listItem\\\">\\n            {{#title}}<h5 class=\\\"CDB-infowindow-subtitle\\\">{{title}}</h5>{{/title}}\\n            {{#value}}<h4 class=\\\"CDB-infowindow-title\\\">{{{ value }}}</h4>{{/value}}\\n            {{^value}}<h4 class=\\\"CDB-infowindow-title\\\">null</h4>{{/value}}\\n          </li>\\n          {{/content.fields}}\\n        </ul>\\n      </div>\\n    </div>\\n    <div class=\\\"CDB-hook\\\">\\n      <div class=\\\"CDB-hook-inner\\\"></div>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"CDB-infowindow CDB-infowindow--light js-infowindow\\\" data-cover=\\\"true\\\">\\n  <div class=\\\"CDB-infowindow-close js-close\\\"></div>\\n  <div class=\\\"CDB-infowindow-container\\\">\\n    <div class=\\\"CDB-infowindow-header CDB-infowindow-headerMedia js-header js-cover\\\">\\n      {{#loading}}<div class=\\\"CDB-Loader js-loader\\\"></div>{{/loading}}\\n      <div class=\\\"CDB-infowindow-mediaTitle\\\">\\n        {{#content.fields.1}}\\n          {{#value}}\\n            <h4 class=\\\"CDB-infowindow-title\\\">\\n              <span>{{{ value }}}</span>\\n            </h4>\\n          {{/value}}\\n        {{/content.fields.1}}\\n      </div>\\n    </div>\\n    <div class=\\\"CDB-infowindow-inner js-inner\\\">\\n      {{#loading}}<div class=\\\"CDB-Loader js-loader\\\"></div>{{/loading}}\\n      <div class=\\\"CDB-infowindow-list js-content\\\">\\n        {{#content.fields}}\\n          {{#index}}\\n            <div class=\\\"CDB-infowindow-listItem CDB-infowindow-listItem--order{{index}}\\\">\\n              {{#title}}<h5 class=\\\"CDB-infowindow-subtitle\\\">{{title}}</h5>{{/title}}\\n              {{#value}}<h4 class=\\\"CDB-infowindow-title\\\">{{{ value }}}</h4>{{/value}}\\n              {{^value}}<h4 class=\\\"CDB-infowindow-title\\\">null</h4>{{/value}}\\n            </div>\\n          {{/index}}\\n        {{/content.fields}}\\n      </div>\\n    </div>\\n    <div class=\\\"CDB-hook\\\">\\n      <div class=\\\"CDB-hook-inner\\\"></div>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"CDB-infowindow CDB-infowindow--light js-infowindow\\\">\\n  <div class=\\\"CDB-infowindow-close js-close\\\"></div>\\n  <div class=\\\"CDB-infowindow-container\\\">\\n    <div class=\\\"CDB-infowindow-bg\\\">\\n      <div class=\\\"CDB-infowindow-inner js-inner\\\">\\n        {{#loading}}\\n          <div class=\\\"CDB-Loader js-loader is-visible\\\"></div>\\n        {{/loading}}\\n        <ul class=\\\"CDB-infowindow-list js-content\\\">\\n          {{#content.fields}}\\n          <li class=\\\"CDB-infowindow-listItem\\\">\\n            {{#title}}<h5 class=\\\"CDB-infowindow-subtitle\\\">{{title}}</h5>{{/title}}\\n            {{#value}}<h4 class=\\\"CDB-infowindow-title\\\">{{{ value }}}</h4>{{/value}}\\n            {{^value}}<h4 class=\\\"CDB-infowindow-title\\\">null</h4>{{/value}}\\n          </li>\\n          {{/content.fields}}\\n        </ul>\\n      </div>\\n    </div>\\n    <div class=\\\"CDB-hook\\\">\\n      <div class=\\\"CDB-hook-inner\\\"></div>\\n    </div>\\n  </div>\\n</div>\\n\"","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"CDB-infowindow Infowindow-none js-infowindow\">\\n  <div class=\"CDB-infowindow-close js-close\"></div>\\n  <div class=\"CDB-infowindow-container\">\\n    <div class=\"CDB-infowindow-bg\">\\n      <div class=\"CDB-infowindow-inner\">\\n        <ul class=\"CDB-infowindow-list\">\\n          <li class=\"CDB-infowindow-listItem\">\\n            <h5 class=\"CDB-infowindow-subtitle\">' +\n__e( subtitle ) +\n'</h5>\\n            <h4 class=\"CDB-infowindow-title\">' +\n__e( title ) +\n'</h4>\\n          </li>\\n        </ul>\\n      </div>\\n    </div>\\n    <div class=\"CDB-hook\">\\n      <div class=\"CDB-hook-inner\"></div>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","module.exports = \"<div class=\\\"CDB-infowindow CDB-infowindow--light js-infowindow\\\">\\n  <div class=\\\"CDB-infowindow-close js-close\\\"></div>\\n  <div class=\\\"CDB-infowindow-container\\\">\\n    <div class=\\\"CDB-infowindow-header CDB-infowindow-headerBg CDB-infowindow-headerBg--light js-header\\\" style=\\\"background: #35AAE5;\\\">\\n      {{#loading}}…{{/loading}}\\n      <ul class=\\\"CDB-infowindow-list\\\">\\n        {{#content.fields}}\\n          {{^position}}\\n        <li class=\\\"CDB-infowindow-listItem\\\">\\n          {{#title}}\\n            {{#alternative_name}}\\n          <h5 class=\\\"CDB-infowindow-subtitle\\\">{{{alternative_name}}}</h5>\\n            {{/alternative_name}}\\n            {{^alternative_name}}\\n          <h5 class=\\\"CDB-infowindow-subtitle\\\">{{{name}}}</h5>\\n            {{/alternative_name}}\\n          {{/title}}\\n          {{#name}}\\n          <h4 class=\\\"CDB-infowindow-title {{#type}}{{=<% %>=}}{{<%={{ }}=%>{{{ type }}}{{=<% %>=}}}}<%={{ }}=%>{{/type}}\\\">\\n            {{=<% %>=}}{{<%={{ }}=%>{{{ name }}}{{=<% %>=}}}}<%={{ }}=%>\\n          </h4>\\n          {{/name}}\\n        </li>\\n          {{/position}}\\n        {{/content.fields}}\\n      </ul>\\n    </div>\\n    <div class=\\\"CDB-infowindow-inner js-inner\\\">\\n      {{#loading}}\\n        <div class=\\\"CDB-Loader js-loader is-visible\\\"></div>\\n      {{/loading}}\\n      <ul class=\\\"CDB-infowindow-list js-content\\\">\\n        {{#content.fields}}\\n          {{#position}}\\n        <li class=\\\"CDB-infowindow-listItem\\\">\\n          {{#title}}\\n            {{#alternative_name}}\\n          <h5 class=\\\"CDB-infowindow-subtitle\\\">{{{alternative_name}}}</h5>\\n            {{/alternative_name}}\\n            {{^alternative_name}}\\n          <h5 class=\\\"CDB-infowindow-subtitle\\\">{{{name}}}</h5>\\n            {{/alternative_name}}\\n          {{/title}}\\n          <h4 class=\\\"CDB-infowindow-title\\\">{{=<% %>=}}{{<%={{ }}=%>{{{ name }}}{{=<% %>=}}}}<%={{ }}=%></h4>\\n        </li>\\n          {{/position}}\\n        {{/content.fields}}\\n      </ul>\\n    </div>\\n    <div class=\\\"CDB-hook\\\">\\n      <div class=\\\"CDB-hook-inner\\\"></div>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"CDB-infowindow CDB-infowindow--dark js-infowindow\\\" style=\\\"background:#2E3C43\\\">\\n  <div class=\\\"CDB-infowindow-close js-close\\\"></div>\\n  <div class=\\\"CDB-infowindow-container\\\">\\n    <div class=\\\"CDB-infowindow-bg\\\">\\n      <div class=\\\"CDB-infowindow-inner js-inner\\\">\\n        {{#loading}}\\n          <div class=\\\"CDB-Loader js-loader is-visible\\\"></div>\\n        {{/loading}}\\n        <ul class=\\\"CDB-infowindow-list js-content\\\">\\n          {{#content.fields}}\\n          <li class=\\\"CDB-infowindow-listItem\\\">\\n            {{#title}}\\n              {{#alternative_name}}\\n              <h5 class=\\\"CDB-infowindow-subtitle\\\">{{alternative_name}}</h5>\\n              {{/alternative_name}}\\n              {{^alternative_name}}\\n              <h5 class=\\\"CDB-infowindow-subtitle\\\">{{name}}</h5>\\n              {{/alternative_name}}\\n            {{/title}}\\n            <h4 class=\\\"CDB-infowindow-title\\\">{{=<% %>=}}{{<%={{ }}=%>{{{ name }}}{{=<% %>=}}}}<%={{ }}=%></h4>\\n          </li>\\n          {{/content.fields}}\\n        </ul>\\n      </div>\\n    </div>\\n    <div class=\\\"CDB-hook\\\">\\n      <div class=\\\"CDB-hook-inner\\\"></div>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"CDB-infowindow CDB-infowindow--light js-infowindow\\\" data-cover=\\\"true\\\">\\n  <div class=\\\"CDB-infowindow-close js-close\\\"></div>\\n  <div class=\\\"CDB-infowindow-container\\\">\\n    <div class=\\\"CDB-infowindow-header CDB-infowindow-headerMedia js-header js-cover\\\">\\n      {{#loading}}<div class=\\\"CDB-Loader js-loader\\\"></div>{{/loading}}\\n      <div class=\\\"CDB-infowindow-mediaTitle\\\">\\n        {{#content.fields.1}}\\n        <h4 class=\\\"CDB-infowindow-title\\\">\\n          <span>{{=<% %>=}}{{<%={{ }}=%>{{{ name }}}{{=<% %>=}}}}<%={{ }}=%></span>\\n        </h4>\\n        {{/content.fields.1}}\\n      </div>\\n    </div>\\n    <div class=\\\"CDB-infowindow-inner js-inner\\\">\\n      {{#loading}}<div class=\\\"CDB-Loader js-loader\\\"></div>{{/loading}}\\n      <div class=\\\"CDB-infowindow-list js-content\\\">\\n        {{#content.fields}}\\n          {{#position}}\\n        <div class=\\\"CDB-infowindow-listItem CDB-infowindow-listItem--order{{position}}\\\">\\n            {{#title}}\\n              {{#alternative_name}}\\n          <h5 class=\\\"CDB-infowindow-subtitle\\\">{{{alternative_name}}}</h5>\\n              {{/alternative_name}}\\n              {{^alternative_name}}\\n          <h5 class=\\\"CDB-infowindow-subtitle\\\">{{{name}}}</h5>\\n              {{/alternative_name}}\\n            {{/title}}\\n          <h4 class=\\\"CDB-infowindow-title\\\">{{=<% %>=}}{{<%={{ }}=%>{{{ name }}}{{=<% %>=}}}}<%={{ }}=%></h4>\\n        </div>\\n          {{/position}}\\n        {{/content.fields}}\\n      </div>\\n    </div>\\n    <div class=\\\"CDB-hook\\\">\\n      <div class=\\\"CDB-hook-inner\\\"></div>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"CDB-infowindow CDB-infowindow--light js-infowindow\\\">\\n  <div class=\\\"CDB-infowindow-close js-close\\\"></div>\\n  <div class=\\\"CDB-infowindow-container\\\">\\n    <div class=\\\"CDB-infowindow-bg\\\">\\n      <div class=\\\"CDB-infowindow-inner js-inner\\\">\\n        {{#loading}}\\n          <div class=\\\"CDB-Loader js-loader is-visible\\\"></div>\\n        {{/loading}}\\n        <ul class=\\\"CDB-infowindow-list js-content\\\">\\n          {{#content.fields}}\\n          <li class=\\\"CDB-infowindow-listItem\\\">\\n            {{#title}}\\n              {{#alternative_name}}\\n              <h5 class=\\\"CDB-infowindow-subtitle\\\">{{alternative_name}}</h5>\\n              {{/alternative_name}}\\n              {{^alternative_name}}\\n              <h5 class=\\\"CDB-infowindow-subtitle\\\">{{name}}</h5>\\n              {{/alternative_name}}\\n            {{/title}}\\n            <h4 class=\\\"CDB-infowindow-title\\\">{{=<% %>=}}{{<%={{ }}=%>{{{ name }}}{{=<% %>=}}}}<%={{ }}=%></h4>\\n          </li>\\n          {{/content.fields}}\\n        </ul>\\n      </div>\\n    </div>\\n    <div class=\\\"CDB-hook\\\">\\n      <div class=\\\"CDB-hook-inner\\\"></div>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"CDB-Tooltip CDB-Tooltip--isDark\\\">\\n  <ul class=\\\"CDB-Tooltip-list\\\">\\n    {{#fields}}\\n      <li class=\\\"CDB-Tooltip-listItem\\\">\\n        {{#title}}\\n          <h3 class=\\\"CDB-Tooltip-listTitle\\\">{{{ title }}}</h3>\\n        {{/title}}\\n        <h4 class=\\\"CDB-Tooltip-listText\\\">{{{ value }}}</h4>\\n      </li>\\n    {{/fields}}\\n  </ul>\\n</div>\\n\"","module.exports = \"<div class=\\\"CDB-Tooltip CDB-Tooltip--isLight\\\">\\n  <ul class=\\\"CDB-Tooltip-list\\\">\\n    {{#fields}}\\n      <li class=\\\"CDB-Tooltip-listItem\\\">\\n        {{#title}}\\n          <h3 class=\\\"CDB-Tooltip-listTitle\\\">{{{ title }}}</h3>\\n        {{/title}}\\n        <h4 class=\\\"CDB-Tooltip-listText\\\">{{{ value }}}</h4>\\n      </li>\\n    {{/fields}}\\n  </ul>\\n</div>\\n\"","module.exports = \"<div class=\\\"CDB-Tooltip CDB-Tooltip--isDark\\\">\\n  <ul class=\\\"CDB-Tooltip-list\\\">\\n    {{#content.fields}}\\n      <li class=\\\"CDB-Tooltip-listItem\\\">\\n        {{#title}}\\n          {{#alternative_name}}\\n            <h3 class=\\\"CDB-Tooltip-listTitle\\\">{{{ alternative_name }}}</h3>\\n          {{/alternative_name}}\\n          {{^alternative_name}}\\n            <h3 class=\\\"CDB-Tooltip-listTitle\\\">{{{ name }}}</h3>\\n          {{/alternative_name}}\\n        {{/title}}\\n        <h4 class=\\\"CDB-Tooltip-listText\\\">{{=<% %>=}}{{<%={{ }}=%>{{{ name }}}{{=<% %>=}}}}<%={{ }}=%></h4>\\n      </li>\\n    {{/content.fields}}\\n  </ul>\\n</div>\\n\"","module.exports = \"<div class=\\\"CDB-Tooltip CDB-Tooltip--isLight\\\">\\n  <ul class=\\\"CDB-Tooltip-list\\\">\\n    {{#content.fields}}\\n      <li class=\\\"CDB-Tooltip-listItem\\\">\\n        {{#title}}\\n          {{#alternative_name}}\\n            <h3 class=\\\"CDB-Tooltip-listTitle\\\">{{{ alternative_name }}}</h3>\\n          {{/alternative_name}}\\n          {{^alternative_name}}\\n            <h3 class=\\\"CDB-Tooltip-listTitle\\\">{{{ name }}}</h3>\\n          {{/alternative_name}}\\n        {{/title}}\\n        <h4 class=\\\"CDB-Tooltip-listText\\\">{{=<% %>=}}{{<%={{ }}=%>{{{ name }}}{{=<% %>=}}}}<%={{ }}=%></h4>\\n      </li>\\n    {{/content.fields}}\\n  </ul>\\n</div>\\n\"","/*\n *  Track geometry changes that happens in any Node definition model\n */\n\nmodule.exports = {\n  track: function (params) {\n    if (!params) throw new Error('several parameters required');\n    if (!params.layerDefinitionsCollection) throw new Error('layerDefinitionsCollection is required');\n    if (!params.analysisDefinitionNodesCollection) throw new Error('analysisDefinitionNodesCollection is required');\n    if (!params.analysisDefinitionsCollection) throw new Error('analysisDefinitionsCollection is required');\n\n    this._layerDefinitionsCollection = params.layerDefinitionsCollection;\n    this._analysisDefinitionsCollection = params.analysisDefinitionsCollection;\n\n    params.analysisDefinitionNodesCollection.bind('change:simple_geom', this._onNodeGeometryChange, this);\n  },\n\n  _onNodeGeometryChange: function (nodeDefModel) {\n    if (nodeDefModel.get('table_name')) { // If it is a source node, no save\n      return;\n    }\n    var layerDefModel = this._layerDefinitionsCollection.findWhere({ source: nodeDefModel.get('id') });\n    if (layerDefModel) {\n      this._analysisDefinitionsCollection.saveAnalysisForLayer(layerDefModel);\n    }\n  }\n};\n","var AnalysesService = require('builder/editor/layers/layer-content-views/analyses/analyses-service');\n\nmodule.exports = function (currentRoute) {\n  var routeName = currentRoute[0];\n  var analysisNode = currentRoute[2];\n\n  if (routeName === 'layer_analyses' && !analysisNode) {\n    AnalysesService.clearNotAppliedAnalysis();\n  }\n};\n","module.exports = function (currentRoute, modals) {\n  var routeName = currentRoute[0];\n\n  if (routeName !== 'modal' && !modals.keepOpenOnRouteChange()) {\n    modals.destroy();\n  }\n};\n","module.exports = function (currentRoute, widgetDefinitionsCollection) {\n  var widgetId = currentRoute[0] === 'widget' ? currentRoute[1] : null;\n\n  widgetDefinitionsCollection.trigger('setSelected', widgetId);\n};\n","function matchArg (haystack, args) {\n  var argMatch = haystack.match(/:(.+)/);\n  if (argMatch === null) {\n    throw new Error('Malformed argument: ' + haystack);\n  }\n\n  var argName = argMatch[1];\n  var argValue = args[argName];\n\n  if (argValue === undefined) {\n    throw new Error('No value provided for argument: ' + argName);\n  }\n\n  return haystack.replace(':' + argName, argValue);\n}\n\nfunction findArg (haystack) {\n  var argMatch = haystack.match(/:(.+)/);\n  return argMatch === null ? null : argMatch[1];\n}\n\nmodule.exports = function (route, args) {\n  var optionalMatch = route.match(/\\(.+\\)+/);\n  var optionalArg = optionalMatch !== null ? optionalMatch[0] : null;\n  var cleanRoute = optionalArg !== null ? route.replace(optionalArg, '') : route;\n\n  // Return route without optional arguments if no args were provided\n  if (!args) return cleanRoute;\n\n  // Find out if there's an optional argument provided, and if so, turn it into a regular one\n  if (optionalArg !== null) {\n    // Replace ( and ) with nothing, need the g to apply throughout the string\n    optionalArg = optionalArg.replace(/\\(|\\)/g, '');\n    var optionalArgName = findArg(optionalArg);\n\n    if (args[optionalArgName]) {\n      // append the optional arg without parenthesis\n      cleanRoute += optionalArg.replace(/\\(|\\)/g, '');\n    }\n  }\n\n  return cleanRoute\n    // Split all url arguments\n    .split(/(:[^\\/]+)/g)\n    // replace all arguments with the provided value\n    .map(function (fragment) {\n      return fragment.indexOf(':') === 0 ? matchArg(fragment, args) : fragment;\n    })\n    // join them again\n    .join('');\n};\n","var Backbone = require('backbone');\nvar _ = require('underscore');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar populateRoute = require('./populate-route');\n\nvar ROUTE_LAYERS = 'layers';\nvar ROUTE_WIDGETS = 'widgets';\nvar ROUTE_SETTINGS = 'settings';\nvar BASE_LAYER_ROUTE = 'layer/:layerId';\nvar ROUTE_WIDGET = 'widget/:widgetId';\nvar ROUTE_BASEMAP = 'basemap';\nvar ROUTE_LAYER_DATA_TAB = BASE_LAYER_ROUTE + '/data';\nvar ROUTE_LAYER_ANALYSES_TAB = BASE_LAYER_ROUTE + '/analyses(/:nodeId)';\nvar ROUTE_LAYER_STYLE_TAB = BASE_LAYER_ROUTE + '/style';\nvar ROUTE_LAYER_POPUPS_TAB = BASE_LAYER_ROUTE + '/popups';\nvar ROUTE_LAYER_LEGENDS_TAB = BASE_LAYER_ROUTE + '/legends';\nvar ROUTE_MODAL = 'modal';\nvar ROUTE_ADD_POINT = BASE_LAYER_ROUTE + '/add/point';\nvar ROUTE_ADD_LINE = BASE_LAYER_ROUTE + '/add/line';\nvar ROUTE_ADD_POLYGON = BASE_LAYER_ROUTE + '/add/polygon';\nvar EDIT_FEATURE = BASE_LAYER_ROUTE + '/edit/:featureId';\n\nvar REQUIRED_OPTS = [\n  'modals',\n  'editorModel',\n  'widgetDefinitionsCollection',\n  'handleModalsRoute',\n  'handleAnalysesRoute',\n  'handleWidgetRoute'\n];\n\nvar ROUTES = [\n  ['root', ''],\n  ['root', ROUTE_LAYERS],\n  ['settings', ROUTE_SETTINGS],\n  ['layer', BASE_LAYER_ROUTE],\n  ['widgets', ROUTE_WIDGETS],\n  ['widget', ROUTE_WIDGET],\n  ['layer_data', ROUTE_LAYER_DATA_TAB],\n  ['layer_analyses', ROUTE_LAYER_ANALYSES_TAB],\n  ['layer_style', ROUTE_LAYER_STYLE_TAB],\n  ['layer_style', BASE_LAYER_ROUTE],\n  ['layer_popups', ROUTE_LAYER_POPUPS_TAB],\n  ['layer_legends', ROUTE_LAYER_LEGENDS_TAB],\n  ['add_feature_point', ROUTE_ADD_POINT],\n  ['add_feature_line', ROUTE_ADD_LINE],\n  ['add_feature_polygon', ROUTE_ADD_POLYGON],\n  ['edit_feature', EDIT_FEATURE],\n  ['modal', ROUTE_MODAL],\n  ['basemap', ROUTE_BASEMAP]\n];\n\nmodule.exports = (function () {\n  var initialized = false;\n  var routeModel = new Backbone.Model();\n  // keep last route before a modal, so we can replace /modal with it\n  var previousRoute;\n  // Routes that should not be kept as a \"previous\" route\n  var UNSTORABLE_ROUTES;\n\n  function generateRoute (routeName, model) {\n    return function () {\n      model.set('currentRoute', [routeName].concat(Array.prototype.slice.call(arguments)));\n    };\n  }\n\n  return {\n    init: function (options) {\n      if (initialized) {\n        throw new Error('Router can only be initialized once');\n      }\n\n      checkAndBuildOpts(options, REQUIRED_OPTS, this);\n\n      var self = this;\n      initialized = true;\n      this.appRouter = new Backbone.Router();\n\n      ROUTES.forEach(function (route) {\n        self.appRouter.route(route[1], generateRoute(route[0], routeModel));\n      });\n      UNSTORABLE_ROUTES = [\n        ROUTE_ADD_POINT,\n        ROUTE_ADD_LINE,\n        ROUTE_ADD_POLYGON,\n        EDIT_FEATURE\n      ].map(function (route) {\n        return self.appRouter._routeToRegExp(route);\n      });\n\n      this._initBinds();\n    },\n\n    _initBinds: function () {\n      this.getRouteModel().on('change:currentRoute', this._onChangeRoute, this);\n    },\n\n    _onChangeRoute: function (routeModel) {\n      var currentRoute = routeModel.get('currentRoute');\n\n      if (!currentRoute) return;\n\n      this._handleModalsRoute(currentRoute, this._modals);\n      this._handleAnalysesRoute(currentRoute);\n      this._handleWidgetRoute(currentRoute, this._widgetDefinitionsCollection);\n\n      this._editorModel.set('edition', false);\n    },\n\n    getRouter: function () {\n      return this.appRouter;\n    },\n\n    getRouteModel: function () {\n      return routeModel;\n    },\n\n    goBack: function () {\n      Backbone.history.history.back();\n    },\n\n    goToDefaultRoute: function () {\n      this.navigate('');\n    },\n\n    replaceWithRoot: function () {\n      this.navigate('', { replace: true });\n    },\n\n    goToBaseMap: function (layerId) {\n      this.navigate(ROUTE_BASEMAP);\n    },\n\n    goToLayerList: function () {\n      this.navigate(ROUTE_LAYERS);\n    },\n\n    goToSettings: function () {\n      this.navigate(ROUTE_SETTINGS);\n    },\n\n    goToDataTab: function (layerId) {\n      this.navigate(populateRoute(ROUTE_LAYER_DATA_TAB, { layerId: layerId }));\n    },\n\n    goToAnalysisTab: function (layerId, options) {\n      this.navigate(populateRoute(ROUTE_LAYER_ANALYSES_TAB, { layerId: layerId }), options);\n    },\n\n    goToAnalysisNode: function (layerId, nodeId, options) {\n      var args = { layerId: layerId, nodeId: nodeId };\n\n      this.navigate(populateRoute(ROUTE_LAYER_ANALYSES_TAB, args), options);\n    },\n\n    goToStyleTab: function (layerId) {\n      this.navigate(populateRoute(ROUTE_LAYER_STYLE_TAB, { layerId: layerId }));\n    },\n\n    goToPopupsTab: function (layerId) {\n      this.navigate(populateRoute(ROUTE_LAYER_POPUPS_TAB, { layerId: layerId }));\n    },\n\n    goToLegendsTab: function (layerId) {\n      this.navigate(populateRoute(ROUTE_LAYER_LEGENDS_TAB, { layerId: layerId }));\n    },\n\n    goToWidgetList: function () {\n      this.navigate(ROUTE_WIDGETS);\n    },\n\n    goToWidget: function (widgetId) {\n      var route = routeModel.get('currentRoute');\n      var options = {};\n\n      if (_.isArray(route) && route[0] === 'widget') {\n        options.replace = true;\n      }\n\n      this.navigate(populateRoute(ROUTE_WIDGET, { widgetId: widgetId }), options);\n    },\n\n    getCurrentRoute: function () {\n      return Backbone.history.getPath();\n    },\n\n    saveCurrentRoute: function () {\n      var currentRoute = this.getCurrentRoute();\n      var canBeSaved = !UNSTORABLE_ROUTES.some(function (regex) {\n        return regex.test(currentRoute);\n      });\n\n      if (canBeSaved === true) {\n        previousRoute = currentRoute;\n      }\n    },\n\n    addPoint: function (layerId) {\n      this._addFeature(ROUTE_ADD_POINT, layerId);\n    },\n\n    addLine: function (layerId) {\n      this._addFeature(ROUTE_ADD_LINE, layerId);\n    },\n\n    addPolygon: function (layerId) {\n      this._addFeature(ROUTE_ADD_POLYGON, layerId);\n    },\n\n    goToPreviousRoute: function (options) {\n      previousRoute = previousRoute || options.fallback;\n\n      if (previousRoute !== null && previousRoute !== undefined) {\n        this.navigate(previousRoute, options.options);\n        previousRoute = null;\n      } else {\n        Backbone.history.history.back();\n      }\n    },\n\n    _addFeature: function (route, layerId) {\n      this.navigate(populateRoute(route, { layerId: layerId }));\n    },\n\n    editFeature: function (feature) {\n      var featureId = feature.get('cartodb_id');\n      var layerId = feature.getLayerId();\n\n      this.navigate(populateRoute(EDIT_FEATURE, {\n        layerId: layerId,\n        featureId: featureId\n      }));\n    },\n\n    navigate: function (route, options) {\n      this.saveCurrentRoute();\n\n      options = _.extend({\n        trigger: true\n      }, options);\n\n      this.appRouter.navigate(route, options);\n    },\n\n    replaceState: function (route) {\n      var root = Backbone.history.root;\n      var newRoute = root + route;\n\n      window.history.replaceState(null, null, newRoute);\n    }\n  };\n})();\n","var _ = require('underscore');\n\n/**\n * Value object to calcualte distances\n */\nmodule.exports = {\n  OPTIONS: [\n    {\n      distance: 'meters',\n      metersPerDistance: 1\n    }, {\n      distance: 'kilometers',\n      metersPerDistance: 1000\n    }, {\n      distance: 'miles',\n      metersPerDistance: 1609.34\n    }\n  ],\n\n  /**\n   * @param {Number} val - e.g. 3\n   * @param {String} distance - e.g. 'kilometers'\n   * @param {Float} e.g. 3000\n   */\n  toMeters: function (val, distance) {\n    val = parseFloat(val);\n    if (isNaN(val)) throw new Error('val (1st arg) is required, expected a parseable number or float');\n\n    var option = _.find(this.OPTIONS, function (d) {\n      return d.distance === distance;\n    });\n    if (!option) throw new Error(distance + ' (2nd arg) is not a valid distance value, expects one of ' + _.pluck(this.OPTIONS, 'distance').join(', '));\n\n    return val * option.metersPerDistance;\n  },\n\n  toDistance: function (meters, distance) {\n    meters = parseFloat(meters);\n    if (isNaN(meters)) throw new Error('meters (1st arg) is required');\n\n    var option = _.find(this.OPTIONS, function (d) {\n      return d.distance === distance;\n    });\n    if (!option) throw new Error(distance + ' (2nd arg) is not a valid distance value, expects one of ' + _.pluck(this.OPTIONS, 'distance').join(', '));\n\n    return meters / option.metersPerDistance;\n  }\n};\n","var _ = require('underscore');\nvar Notifier = require('builder/components/notifier/notifier');\n\nvar NOTIFICATION_ID = 'visNotification';\nvar NOTIFICATION_TEMPLATE = _.template(\"<span class='CDB-Text is-semibold u-errorTextColor'><%= title %></span>&nbsp;<%= body %>\");\nvar ERROR_NOTIFICATION_TEMPLATE = _.template('<%- message %> <%- body %>');\n\nvar VisNotifications = {\n\n  track: function (vis) {\n    vis.on('change:error', this._toggleVisErrorNotification, this);\n    this._toggleVisErrorNotification(vis);\n  },\n\n  _toggleVisErrorNotification: function (vis) {\n    var error = vis.get('error');\n    if (error) {\n      this._showVisErrorNotification(error.message);\n    } else {\n      this._hideVisErrorNotification();\n    }\n  },\n\n  _showVisErrorNotification: function (message) {\n    Notifier.addNotification(this._getNotificationAttrs(message));\n  },\n\n  _hideVisErrorNotification: function () {\n    if (Notifier.getNotification(NOTIFICATION_ID)) {\n      Notifier.removeNotification(NOTIFICATION_ID);\n    }\n  },\n\n  _getNotificationAttrs: function (message) {\n    var body = _t('notifications.vis.failed.body');\n    if (message) {\n      body = ERROR_NOTIFICATION_TEMPLATE({\n        message: this._period(message),\n        body: body\n      });\n    }\n\n    return {\n      id: NOTIFICATION_ID,\n      status: 'error',\n      info: NOTIFICATION_TEMPLATE({\n        title: _t('notifications.vis.failed.title'),\n        body: body\n      }),\n      closable: false\n    };\n  },\n\n  _period: function (text) {\n    if (text && !/\\.$/.test(text)) {\n      return text + '.';\n    }\n    return text;\n  }\n};\n\nmodule.exports = VisNotifications;\n","var _ = require('underscore');\nvar Notifier = require('builder/components/notifier/notifier');\nvar errorParser = require('builder/helpers/error-parser');\n\nvar NOTIFICATION_ERROR_TEMPLATE = _.template(\"<span class='u-errorTextColor'><%- title %></span>\");\nvar ADD_NOTIFICATION_ID = 'add-notification';\nvar NOTIFICATION_STATUS = {\n  loading: 'loading',\n  updating: 'loading',\n  added: 'success',\n  removed: 'success',\n  replaced: 'success',\n  error: 'error'\n};\n\nvar WidgetsNotifications = {\n\n  track: function (widgetsCollection) {\n    this._widgetDefinitionsCollection = widgetsCollection;\n    this._widgetDefinitionsCollection.on('successAdd', this._showAddNotification, this);\n    this._widgetDefinitionsCollection.on('successReplace', this._showReplaceNotification, this);\n    this._widgetDefinitionsCollection.on('destroy', this._showRemoveNotification, this);\n    this._widgetDefinitionsCollection.on('errorAdd', this._showErrorNotification, this);\n    this._widgetDefinitionsCollection.on('loading', this._showLoadingNotification, this);\n    this._widgetDefinitionsCollection.on('updating', this._showUpdatingNotification, this);\n  },\n\n  _showLoadingNotification: function (widgets) {\n    var notificationAttrs = {\n      status: NOTIFICATION_STATUS.loading,\n      info: _t('notifications.widgets.loading_pluralize', {\n        smart_count: widgets && widgets.length ? widgets.length : 1\n      }),\n      closable: false\n    };\n\n    this._addNotification(ADD_NOTIFICATION_ID, notificationAttrs);\n  },\n\n  _showUpdatingNotification: function (widgets) {\n    var notificationAttrs = {\n      status: NOTIFICATION_STATUS.updating,\n      info: _t('notifications.widgets.updating_pluralize', {\n        smart_count: widgets && widgets.length ? widgets.length : 1\n      }),\n      closable: false\n    };\n\n    this._addNotification(ADD_NOTIFICATION_ID, notificationAttrs);\n  },\n\n  _showRemoveNotification: function (widgetModel) {\n    if (widgetModel.get('avoidNotification') === true) {\n      return;\n    }\n\n    var notificationAttrs = {\n      status: NOTIFICATION_STATUS.removed,\n      info: _t('notifications.widgets.delete_pluralize', {\n        smart_count: 1\n      }),\n      closable: true,\n      delay: Notifier.DEFAULT_DELAY\n    };\n\n    this._addNotification(ADD_NOTIFICATION_ID, notificationAttrs);\n  },\n\n  _showAddNotification: function (widgets) {\n    var notificationAttrs = {\n      status: NOTIFICATION_STATUS.added,\n      info: _t('notifications.widgets.add_pluralize', {\n        smart_count: widgets && widgets.length ? widgets.length : 1\n      }),\n      closable: true\n    };\n\n    this._addOrUpdateNotification(ADD_NOTIFICATION_ID, notificationAttrs);\n  },\n\n  _showReplaceNotification: function (widgets) {\n    var notificationAttrs = {\n      status: NOTIFICATION_STATUS.replaced,\n      info: _t('notifications.widgets.replace_pluralize', {\n        smart_count: widgets && widgets.length ? widgets.length : 1\n      }),\n      closable: true\n    };\n\n    this._addOrUpdateNotification(ADD_NOTIFICATION_ID, notificationAttrs);\n  },\n\n  _showErrorNotification: function (data, error) {\n    if (this._isAbortion(error)) {\n      return;\n    }\n\n    var notificationAttrs = {\n      status: NOTIFICATION_STATUS.error,\n      info: _t('notifications.widgets.error.body', {\n        body: NOTIFICATION_ERROR_TEMPLATE({\n          title: _t('notifications.widgets.error.title')\n        }),\n        error: errorParser(error)\n      }),\n      closable: true\n    };\n\n    this._addOrUpdateNotification(ADD_NOTIFICATION_ID, notificationAttrs);\n  },\n\n  _addOrUpdateNotification: function (notificationId, notificationAttrs) {\n    var notification = this._getNotification(notificationId);\n\n    if (notification) {\n      notification.set(notificationAttrs);\n    } else {\n      this._addNotification(notificationId, notificationAttrs);\n    }\n  },\n\n  _addNotification: function (notificationId, notificationAttrs) {\n    notificationAttrs = _.extend({\n      id: notificationId\n    }, notificationAttrs);\n\n    Notifier.addNotification(notificationAttrs);\n  },\n\n  _getNotification: function (notificationId) {\n    return Notifier.getNotification(notificationId);\n  },\n\n  _isAbortion: function (error) {\n    return (error.status === 0 && error.statusText === 'abort');\n  }\n};\n\nmodule.exports = WidgetsNotifications;\n","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"CDB-Dashboard-menuContainer\">\\n  <div class=\"CDB-Dashboard-menuInner\">\\n    <div class=\"CDB-Dashboard-menuHeader\">\\n      ';\n if (showLogo === true) { ;\n__p += '\\n      <div class=\"CDB-Dashboard-menuLogo\">\\n        <a href=\"http://carto.com\" target=\"_blank\">\\n          <svg viewBox=\"0 0 62 24\" height=\"24\" width=\"62\">\\n              <g class=\"CDB-EmbedLogo\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\\n                  <path d=\"M3.94693333,15.9877346 C5.63066667,15.9877346 6.60373333,15.2552013 7.32533333,14.260268 L5.72906667,13.1232013 C5.26986667,13.6808013 4.79973333,14.0525346 4.0016,14.0525346 C2.93013333,14.0525346 2.17573333,13.1560013 2.17573333,12.0080013 L2.17573333,11.9861346 C2.17573333,10.8709346 2.93013333,9.95253464 4.0016,9.95253464 C4.73413333,9.95253464 5.23706667,10.3133346 5.6744,10.849068 L7.27066667,9.6136013 C6.5928,8.68426797 5.58693333,8.02826797 4.02346667,8.02826797 C1.7056,8.02826797 0,9.7776013 0,12.0080013 L0,12.029868 C0,14.3149346 1.76026667,15.9877346 3.94693333,15.9877346 L3.94693333,15.9877346 Z M10.93653,15.834668 L13.1559967,15.834668 L13.7026634,14.457068 L16.6655967,14.457068 L17.2122634,15.834668 L19.4863967,15.834668 L16.2282634,8.12666797 L14.18373,8.12666797 L10.93653,15.834668 Z M14.3258634,12.8061346 L15.1895967,10.6413346 L16.0423967,12.8061346 L14.3258634,12.8061346 Z M23.61653,15.834668 L25.7375966,15.834668 L25.7375966,13.5168013 L26.6778633,13.5168013 L28.2194633,15.834668 L30.6575966,15.834668 L28.83173,13.1669346 C29.78293,12.7624013 30.40613,11.9861346 30.40613,10.8053346 L30.40613,10.783468 C30.40613,10.029068 30.17653,9.4496013 29.7282633,9.00133464 C29.2143966,8.48746797 28.40533,8.18133464 27.2354633,8.18133464 L23.61653,8.18133464 L23.61653,15.834668 Z M25.7375966,11.8549346 L25.7375966,10.0072013 L27.1370633,10.0072013 C27.8367966,10.0072013 28.2850633,10.3133346 28.2850633,10.9256013 L28.2850633,10.947468 C28.2850633,11.505068 27.8586633,11.8549346 27.1479966,11.8549346 L25.7375966,11.8549346 Z M36.7338633,15.834668 L38.8549299,15.834668 L38.8549299,10.0400013 L41.1509299,10.0400013 L41.1509299,8.18133464 L34.4487966,8.18133464 L34.4487966,10.0400013 L36.7338633,10.0400013 L36.7338633,15.834668 Z\" class=\"CDB-EmbedLogo-text\" fill=\"#FFFFFF\"></path>\\n                  <g class=\"CDB-EmbedLogo-image\"\\n                    ';\n if (hasTranslation) { ;\n__p += '\\n                      transform=\"translate(37.000000, 0.000000)\"\\n                    ';\n } ;\n__p += '\\n                  >\\n                      <circle class=\"CDB-EmbedLogo-halo\" fill=\"rgba(255, 255, 255, 0.20)\"  cx=\"12.3333333\" cy=\"12\" r=\"12\"></circle>\\n                      <path d=\"M12.3333333,16.5 C14.8186147,16.5 16.8333333,14.4852814 16.8333333,12 C16.8333333,9.51471863 14.8186147,7.5 12.3333333,7.5 C9.84805196,7.5 7.83333333,9.51471863 7.83333333,12 C7.83333333,14.4852814 9.84805196,16.5 12.3333333,16.5 L12.3333333,16.5 Z\" class=\"CDB-EmbedLogo-point\" fill=\"#FFFFFF\" ></path>\\n                  </g>\\n              </g>\\n          </svg>\\n        </a>\\n      </div>\\n      ';\n } ;\n__p += '\\n\\n      <ul class=\"CDB-Dashboard-menuActions\">\\n        <li class=\"CDB-Dashboard-menuActionsItem\">\\n          <a href=\"https://twitter.com/share?url=' +\n__e( urlWithoutParams ) +\n'&text=' +\n__e( shortTitle ) +\n'\" target=\"_blank\" class=\"u-hintTextColor\">\\n            <i class=\"CDB-IconFont CDB-IconFont-twitter CDB-Size-large\"></i>\\n          </a>\\n        </li>\\n        <li class=\"CDB-Dashboard-menuActionsItem\">\\n          <a href=\"http://www.facebook.com/sharer.php?u=' +\n__e( urlWithoutParams ) +\n'&text=' +\n__e( shortTitle ) +\n'\" target=\"_blank\" class=\"u-hintTextColor\">\\n            <i class=\"CDB-IconFont CDB-IconFont-facebook CDB-Size-medium\"></i>\\n          </a>\\n        </li>\\n        ';\n if (inIframe) { ;\n__p += '\\n          <li class=\"CDB-Dashboard-menuActionsItem\">\\n            <a href=\"' +\n__e( url ) +\n'\" target=\"_blank\" class=\"u-hintTextColor\">\\n              <i class=\"CDB-IconFont CDB-IconFont-anchor CDB-Size-medium\"></i>\\n            </a>\\n          </li>\\n        ';\n } ;\n__p += '\\n      </ul>\\n\\n\\n      <div class=\"CDB-Dashboard-menuInfo\">\\n        <button class=\"js-toggle-view\">\\n          <i class=\"CDB-IconFont CDB-Size-medium CDB-IconFont-rArrowLight Size-large\"></i>\\n        </button>\\n      </div>\\n\\n      <div class=\"CDB-Dashboard-menuTexts CDB-Dashboard-hideMobile\">\\n        <div class=\"CDB-Dashboard-menuTextInner js-content\">\\n          <button class=\"js-toggle-view u-actionTextColor CDB-Dashboard-menuTextActions\">\\n            <svg width=\"10px\" height=\"7px\" viewBox=\"12 13 10 7\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n              <path d=\"M12,13.5 C12,13.2238576 12.1908338,13 12.4169561,13 L21.5830439,13 C21.8133224,13 22,13.2319336 22,13.5 C22,13.7761424 21.8091662,14 21.5830439,14 L12.4169561,14 C12.1866776,14 12,13.7680664 12,13.5 L12,13.5 L12,13.5 Z M12,16.5 C12,16.2238576 12.1908338,16 12.4169561,16 L21.5830439,16 C21.8133224,16 22,16.2319336 22,16.5 C22,16.7761424 21.8091662,17 21.5830439,17 L12.4169561,17 C12.1866776,17 12,16.7680664 12,16.5 L12,16.5 L12,16.5 Z M12,19.5 C12,19.2238576 12.1908338,19 12.4169561,19 L21.5830439,19 C21.8133224,19 22,19.2319336 22,19.5 C22,19.7761424 21.8091662,20 21.5830439,20 L12.4169561,20 C12.1866776,20 12,19.7680664 12,19.5 L12,19.5 L12,19.5 Z\" id=\"Combined-Shape\" stroke=\"none\" fill=\"#1785fB\" fill-rule=\"evenodd\"></path>\\n            </svg>\\n          </button>\\n          <p class=\"CDB-Dashboard-menuTime CDB-Text CDB-Size-small u-upperCase u-altTextColor u-bSpace--m js-timeAgo\">UPDATED ' +\n__e( updatedAt ) +\n'</p>\\n          <div class=\"CDB-Dashboard-metadata\">\\n            <h1 class=\"CDB-Dashboard-menuTitle CDB-Dashboard-menuTitle--mobile CDB-Text CDB-Size-huge u-ellipsis js-title\" title=\"' +\n__e( title ) +\n'\">' +\n__e( title ) +\n'</h1>\\n\\n            <div class=\"CDB-Dashboard-scrollWrapper js-scroll-wrapper\">\\n              <div class=\"CDB-Dashboard-scrollContent js-scroll-content\">\\n                <h2 class=\"CDB-Dashboard-menuDescription CDB-Text CDB-Size-large is-light u-secondaryTextColor js-description\">' +\n((__t = ( cdb.core.sanitize.html(description) )) == null ? '' : __t) +\n'</h2>\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n\\n    </div>\\n\\n    <div class=\"CDB-Dashboard-menuFooter\">\\n      <ul>\\n        <li class=\"CDB-Dashboard-menuFooterItem \">\\n          <div class=\"CDB-Dashboard-menuMedia CDB-Dashboard-menuAvatar\">\\n            <img src=\"' +\n__e( userAvatarURL ) +\n'\" alt=\"avatar\" class=\"inline-block\"/>\\n          </div>\\n          <p class=\"CDB-Text CDB-Size-medium CDB-Dashboard-menuFooterTxt\">Map by <a href=\"' +\n__e( userProfileURL ) +\n'\" target=\"_blank\">' +\n__e( userName ) +\n'</a></p>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n  <div class=\"CDB-Dashboard-bg js-toggle-view\"></div>\\n\\n  <div class=\"CDB-Dashboard-menuHeaderMobile\">\\n    <div class=\"u-flex u-alignStart CDB-Dashboard-menuHeaderMobileInner\">\\n      <button class=\"js-toggle-view u-actionTextColor CDB-Dashboard-menuHeaderMobileActions\">\\n        <i class=\"CDB-IconFont CDB-Size-medium CDB-IconFont-rArrowLight Size-large\"></i>\\n      </button>\\n      <div class=\"CDB-Dashboard-menuHeaderMobileText\">\\n        ';\n if (showLogo === true) { ;\n__p += '\\n        <div class=\"CDB-Dashboard-menuLogo\">\\n          <a href=\"http://carto.com\" target=\"_blank\">\\n          <svg width=\"62px\" height=\"24px\" viewBox=\"35 63 62 24\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n              <g class=\"CDB-EmbedLogo\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(35.000000, 63.000000)\">\\n                  <path d=\"M3.94693333,15.9877346 C5.63066667,15.9877346 6.60373333,15.2552013 7.32533333,14.260268 L5.72906667,13.1232013 C5.26986667,13.6808013 4.79973333,14.0525346 4.0016,14.0525346 C2.93013333,14.0525346 2.17573333,13.1560013 2.17573333,12.0080013 L2.17573333,11.9861346 C2.17573333,10.8709346 2.93013333,9.95253464 4.0016,9.95253464 C4.73413333,9.95253464 5.23706667,10.3133346 5.6744,10.849068 L7.27066667,9.6136013 C6.5928,8.68426797 5.58693333,8.02826797 4.02346667,8.02826797 C1.7056,8.02826797 0,9.7776013 0,12.0080013 L0,12.029868 C0,14.3149346 1.76026667,15.9877346 3.94693333,15.9877346 L3.94693333,15.9877346 Z M10.93653,15.834668 L13.1559967,15.834668 L13.7026634,14.457068 L16.6655967,14.457068 L17.2122634,15.834668 L19.4863967,15.834668 L16.2282634,8.12666797 L14.18373,8.12666797 L10.93653,15.834668 Z M14.3258634,12.8061346 L15.1895967,10.6413346 L16.0423967,12.8061346 L14.3258634,12.8061346 Z M23.61653,15.834668 L25.7375966,15.834668 L25.7375966,13.5168013 L26.6778633,13.5168013 L28.2194633,15.834668 L30.6575966,15.834668 L28.83173,13.1669346 C29.78293,12.7624013 30.40613,11.9861346 30.40613,10.8053346 L30.40613,10.783468 C30.40613,10.029068 30.17653,9.4496013 29.7282633,9.00133464 C29.2143966,8.48746797 28.40533,8.18133464 27.2354633,8.18133464 L23.61653,8.18133464 L23.61653,15.834668 Z M25.7375966,11.8549346 L25.7375966,10.0072013 L27.1370633,10.0072013 C27.8367966,10.0072013 28.2850633,10.3133346 28.2850633,10.9256013 L28.2850633,10.947468 C28.2850633,11.505068 27.8586633,11.8549346 27.1479966,11.8549346 L25.7375966,11.8549346 Z M36.7338633,15.834668 L38.8549299,15.834668 L38.8549299,10.0400013 L41.1509299,10.0400013 L41.1509299,8.18133464 L34.4487966,8.18133464 L34.4487966,10.0400013 L36.7338633,10.0400013 L36.7338633,15.834668 Z\" class=\"CDB-EmbedLogo-text\" fill=\"#FFFFFF\"></path>\\n                  <g class=\"CDB-EmbedLogo-image\" transform=\"translate(37.000000, 0.000000)\">\\n                      <circle class=\"CDB-EmbedLogo-halo\" fill=\"rgba(255, 255, 255, 0.20)\"  cx=\"12.3333333\" cy=\"12\" r=\"12\"></circle>\\n                      <path d=\"M12.3333333,16.5 C14.8186147,16.5 16.8333333,14.4852814 16.8333333,12 C16.8333333,9.51471863 14.8186147,7.5 12.3333333,7.5 C9.84805196,7.5 7.83333333,9.51471863 7.83333333,12 C7.83333333,14.4852814 9.84805196,16.5 12.3333333,16.5 L12.3333333,16.5 Z\" class=\"CDB-EmbedLogo-point\" fill=\"#FFFFFF\" ></path>\\n                  </g>\\n              </g>\\n          </svg>\\n          </a>\\n        </div>\\n        ';\n } ;\n__p += '\\n        <p class=\"CDB-Dashboard-menuTime CDB-Text CDB-Size-small u-upperCase u-altTextColor u-bSpace--m js-timeAgo\">UPDATED ' +\n__e( updatedAt ) +\n'</p>\\n        <h1 class=\"CDB-Text CDB-Size-large u-ellipsis js-title u-bSpace--xl u-ellipsis\">' +\n__e( title ) +\n'</h1>\\n        <h2 class=\"CDB-Text CDB-Size-medium u-secondaryTextColor js-description\">' +\n((__t = ( cdb.core.sanitize.html(description) )) == null ? '' : __t) +\n'</h2>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"CDB-Widget-canvasInner js-container\"></div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"CDB-Dashboard-mapWrapper js-map-wrapper\">\\n  <div class=\"CDB-Map-canvas\">\\n    <div class=\"CDB-Map\" id=\"map\"></div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"CDB-Widget-header js-header\"></div>\\n<div class=\"CDB-Widget-content CDB-Widget-content--noSidesMargin\">\\n  <div class=\"CDB-Widget-listWrapper js-content\"></div>\\n</div>\\n<div class=\"CDB-Widget-footer js-footer\"></div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<button type=\"button\" class=\"CDB-Widget-listItemInner CDB-Widget-listButton js-button ' +\n__e( isDisabled ? 'is-disabled' : '' ) +\n'\">\\n  <div class=\"CDB-Widget-contentSpaced\">\\n    <p class=\"CDB-Text is-semibold u-upperCase CDB-Size-medium u-ellipsis u-rSpace--xl\" title=\"' +\n__e( name ) +\n'\">' +\n__e( name ) +\n'</p>\\n    <p class=\"CDB-Text CDB-Size-small u-secondaryTextColor\" title=\"' +\n__e( value ) +\n'\">' +\n__e( prefix ) +\n'' +\n__e( formattedValue ) +\n'' +\n__e( suffix ) +\n'</p>\\n  </div>\\n  <div class=\"CDB-Widget-progressBar\">\\n    <div class=\"CDB-Widget-progressState ' +\n__e( isAggregated ? 'CDB-Widget-progressState--pattern' : '' ) +\n' ' +\n__e( isAccepted ? 'is-accepted' : '' ) +\n'\" style=\"width: ' +\n__e( percentage ) +\n'%; background-color: ' +\n__e( color ) +\n'\"></div>\\n  </div>\\n</button>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"CDB-Widget-listItemInner ' +\n__e( isDisabled ? 'is-disabled' : '' ) +\n'\">\\n  <div class=\"CDB-Widget-contentSpaced\">\\n    <p class=\"CDB-Text is-semibold u-upperCase CDB-Size-medium u-ellipsis u-rSpace--xl\" title=\"' +\n__e( name ) +\n'\">' +\n__e( name ) +\n'</p>\\n    <p class=\"CDB-Text CDB-Size-small u-secondaryTextColor\" title=\"' +\n__e( value ) +\n'\">' +\n__e( prefix ) +\n'' +\n__e( formattedValue ) +\n'' +\n__e( suffix ) +\n'</p>\\n  </div>\\n  <div class=\"CDB-Widget-progressBar\">\\n    <div class=\"CDB-Widget-progressState CDB-Widget-progressState--pattern ' +\n__e( isAggregated ? 'CDB-Widget-progressState--inactive' : '' ) +\n'\"\\n      style=\"width: ' +\n__e( percentage ) +\n'%; background-color: ' +\n__e( color ) +\n'\"></div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<button type=\"button\" class=\"CDB-Widget-listItemInner CDB-Widget-listItemInner--fullSpace CDB-Widget-listButton js-button ' +\n__e( isDisabled ? 'is-disabled' : '' ) +\n'\">\\n  <span class=\"CDB-Widget-checkbox ' +\n__e( isDisabled ? '' : 'is-checked' ) +\n'\"></span>\\n  <div class=\"u-lSpace u-ellipsis\">\\n    <div class=\"CDB-Widget-contentSpaced\">\\n      <p class=\"CDB-Text is-semibold u-upperCase CDB-Size-medium u-ellipsis u-rSpace--xl\" title=\"' +\n__e( name ) +\n'\">' +\n__e( name ) +\n'</p>\\n      <p class=\"CDB-Text CDB-Size-small u-secondaryTextColor\" title=\"' +\n__e( value ) +\n'\">' +\n__e( prefix ) +\n'' +\n__e( formattedValue ) +\n'' +\n__e( suffix ) +\n'</p>\\n    </div>\\n    <div class=\"CDB-Widget-progressBar\">\\n      <div class=\"CDB-Widget-progressState is-accepted\" style=\"width: ' +\n__e( percentage ) +\n'%\"></div>\\n    </div>\\n  </div>\\n</button>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<li class=\"CDB-Widget-listItem CDB-Widget-listItem--fake\"></li>\\n<li class=\"CDB-Widget-listItem CDB-Widget-listItem--fake\"></li>\\n<li class=\"CDB-Widget-listItem CDB-Widget-listItem--fake\"></li>\\n<li class=\"CDB-Widget-listItem CDB-Widget-listItem--fake\"></li>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<li class=\"CDB-Widget-listItem\">\\n  <h4 class=\"CDB-Text CDB-Size-large\">No results</h4>\\n  <p class=\"CDB-Text CDB-Size-medium u-tSpace-xl u-altTextColor\">Your search \"' +\n__e( q ) +\n'\" didn\\'t match<br/>with any value.</p>\\n  <p class=\"CDB-Text CDB-Size-medium u-tSpace-xl u-altTextColor\">Try searching again.</p>\\n</li>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n\n if (isSearchEnabled) { ;\n__p += '\\n  <p class=\"CDB-Text is-semibold CDB-Size-small u-upperCase js-lockCategories\">' +\n__e( totalLocked ) +\n' selected</p>\\n';\n } else { ;\n__p += '\\n  <p class=\"CDB-Text is-semibold CDB-Size-small u-upperCase js-textInfo\">\\n    ';\n if (isLocked) { ;\n__p += '\\n      ' +\n__e( totalCats ) +\n' blocked <button class=\"CDB-Text CDB-Size-small u-upperCase u-actionTextColor CDB-Widget-link u-lSpace js-unlock\">unlock</button>\\n    ';\n } else { ;\n__p += '\\n      ';\n if (noneSelected) { ;\n__p += '\\n        None selected\\n      ';\n } else { ;\n__p += '\\n        ' +\n__e( allSelected ? \"All selected\" : acceptedCats + \" selected\" ) +\n'\\n        ';\n if (canBeLocked) { ;\n__p += '\\n          <button class=\"CDB-Text CDB-Size-small u-upperCase u-actionTextColor CDB-Widget-link u-lSpace js-lock\">lock</button>\\n        ';\n };\n__p += '\\n      ';\n };\n__p += '\\n    ';\n } ;\n__p += '\\n  </p>\\n  ';\n if (canSelectAll) { ;\n__p += '\\n    <div class=\"CDB-Widget-filterButtons\">\\n      <button class=\"CDB-Text CDB-Size-small u-upperCase u-actionTextColor CDB-Widget-link CDB-Widget-filterButton js-all\">all</button>\\n    </div>\\n  ';\n } ;\n__p += '\\n';\n } ;\n__p += '\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<section class=\"CDB-Widget-pagination\">\\n  <button class=\"CDB-Widget-paginationButton u-rSpace--m js-prev\">\\n    <svg width=\"6px\" height=\"10px\" viewBox=\"0 0 6 10\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n      <g fill=\"#1785FB\">\\n        <path d=\"M5.09530663,4.3528203 C5.12374481,4.37148693 5.15072296,4.39333837 5.17574487,4.41836028 C5.20217765,4.44479306 5.22503325,4.47380933 5.24426546,4.50470442 C5.4081023,4.70181793 5.39325947,4.99960853 5.21412378,5.17874423 C5.15044967,5.24241833 5.07410755,5.28556158 4.99327465,5.30793729 L0.85159735,9.44961458 C0.653891927,9.64732 0.339500325,9.64512912 0.144238179,9.44986697 C-0.0453133946,9.2603154 -0.0509109683,8.93790934 0.144490568,8.7425078 L4.10763557,4.7793628 L0.182869475,0.85459671 C-0.012532062,0.659195174 -0.00693448836,0.336789113 0.182617085,0.14723754 C0.377879231,-0.0480246061 0.692270834,-0.050215493 0.889976256,0.147489929 L5.09530663,4.3528203 Z\" transform=\"translate(2.679181, 4.798552) scale(-1, 1) translate(-2.679181, -4.798552) \"></path>\\n      </g>\\n    </svg>\\n  </button>\\n  <p class=\"CDB-Text CDB-Size-small is-semibold u-upperCase\">\\n    <span class=\"u-mainTextColor\">' +\n__e( currentPage ) +\n'</span>\\n    <span class=\"u-altTextColor u-lSpace u-rSpace\">of</span>\\n    <span class=\"u-mainTextColor\">' +\n__e( pages ) +\n'</span>\\n  </p>\\n  <button class=\"CDB-Widget-paginationButton u-lSpace--m js-next\">\\n    <svg width=\"6px\" height=\"10px\" viewBox=\"0 0 6 10\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n      <g fill=\"#1785FB\">\\n        <path d=\"M5.28600662,4.78918286 C5.3144448,4.80784949 5.34142295,4.82970094 5.36644486,4.85472284 C5.39287764,4.88115562 5.41573324,4.91017189 5.43496545,4.94106698 C5.59880229,5.13818049 5.58395946,5.4359711 5.40482376,5.61510679 C5.34114966,5.6787809 5.26480754,5.72192414 5.18397463,5.74429985 L1.04229734,9.88597714 C0.844591917,10.0836826 0.530200314,10.0814917 0.334938168,9.88622953 C0.145386595,9.69667796 0.139789021,9.3742719 0.335190558,9.17887036 L4.29833556,5.21572536 L0.373569464,1.29095927 C0.178167927,1.09555773 0.183765501,0.773151675 0.373317075,0.583600101 C0.56857922,0.388337955 0.882970823,0.386147068 1.08067625,0.58385249 L5.28600662,4.78918286 Z\"></path>\\n      </g>\\n    </svg>\\n  </button>\\n</section>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"CDB-Widget-contentFlex\">\\n  <button class=\"u-rSpace--m CDB-Text is-semibold u-upperCase CDB-Size-small js-searchToggle\">\\n    <div class=\"CDB-Shape u-iBlock\">\\n      <span class=\"CDB-Shape-magnify is-small is-blue\"></span>\\n    </div>\\n    <span class=\"u-iBlock u-actionTextColor\">\\n      search in ' +\n__e( categoriesCount ) +\n' categor' +\n__e( categoriesCount === 1 ? 'y' : 'ies' ) +\n'\\n    </span>\\n  </button>\\n</div>\\n\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"CDB-Widget-contentFlex u-rSpace--xl\">\\n  <button class=\"CDB-Text is-semibold u-upperCase CDB-Size-small u-rSpace--m js-searchToggle u-actionTextColor\">cancel</button>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p +=\n__e( value ) +\n'\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n\n if (isSearchEnabled) { ;\n__p += '\\n    ';\n if (isSearchApplied) { ;\n__p += '\\n      <dt class=\"CDB-Widget-infoCount\">' +\n__e( resultsCount ) +\n'</dt><dd class=\"CDB-Widget-infoDescription\">found</dd>\\n    ';\n } else { ;\n__p += '\\n      &nbsp;\\n    ';\n } ;\n__p += '\\n  </dt>\\n';\n } else { ;\n__p += '\\n  <dt class=\"CDB-Widget-infoCount\">' +\n__e( nullsPer ) +\n'%</dt><dd class=\"CDB-Widget-infoDescription\"> null rows</dd>\\n  <dt class=\"CDB-Widget-infoCount\"><span class=\"js-cats\">' +\n__e( catsPer ) +\n'</span>%</dt><dd class=\"CDB-Widget-infoDescription\">of total</dd>\\n';\n } ;\n__p += '\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n\n if (isSearchEnabled) { ;\n__p += '\\n  <form class=\"CDB-Widget-search js-form\">\\n    <div class=\"CDB-Shape CDB-Widget-searchLens u-iBlock u-rSpace js-searchIcon\">\\n      <span class=\"CDB-Shape-magnify is-small is-blue\"></span>\\n    </div>\\n    <input type=\"text\" class=\"CDB-Text CDB-Size-large CDB-Widget-textInput CDB-Widget-searchTextInput js-textInput\" value=\"' +\n__e( q ) +\n'\" placeholder=\"Search by ' +\n__e( columnName ) +\n'\"/>\\n    ';\n if (canShowApply) { ;\n__p += '\\n      <button type=\"button\" class=\"CDB-Text is-semibold u-upperCase CDB-Size-small CDB-Widget-searchApply js-applyLocked u-actionTextColor\">apply</button>\\n    ';\n } ;\n__p += '\\n  </form>\\n';\n } else { ;\n__p += '\\n  <div class=\"CDB-Widget-title CDB-Widget-contentSpaced js-title\">\\n    <h3 class=\"CDB-Text CDB-Size-large u-ellipsis js-titleText\" title=\"' +\n__e( title ) +\n'\">' +\n__e( title ) +\n'</h3>\\n    <div class=\"CDB-Widget-options CDB-Widget-contentSpaced\">\\n      ';\n if (isAutoStyleEnabled) { ;\n__p += '\\n        <button class=\"CDB-Widget-buttonIcon CDB-Widget-buttonIcon--circle js-colors\\n          ' +\n__e( isAutoStyle ? 'is-selected' : '' ) +\n'\\n          ' +\n__e( isAutoStyle ? 'js-cancelAutoStyle' : 'js-autoStyle' ) +\n'\\n          \" data-tooltip=\"\\n            ' +\n__e( isAutoStyle ? 'Remove Auto style' : 'Apply Auto Style' ) +\n'\\n          \">\\n          <i class=\"CDB-IconFont CDB-IconFont-drop CDB-IconFont--small CDB-IconFont--top\"></i>\\n        </button>\\n      ';\n } ;\n__p += '\\n      <button class=\"CDB-Shape CDB-Widget-actions js-actions u-lSpace\" data-tooltip=\"More options\">\\n        <div class=\"CDB-Shape-threePoints is-blue is-small\">\\n          <div class=\"CDB-Shape-threePointsItem\"></div>\\n          <div class=\"CDB-Shape-threePointsItem\"></div>\\n          <div class=\"CDB-Shape-threePointsItem\"></div>\\n        </div>\\n      </button>\\n    </div>\\n  </div>\\n  ';\n if (showSource) { ;\n__p += '\\n    <dl class=\"CDB-Widget-info u-tSpace\">\\n      <div class=\"u-flex u-alignCenter u-ellipsis\">\\n        <span class=\"CDB-Text CDB-Size-small is-semibold u-upperCase\" style=\"color: ' +\n__e( sourceColor ) +\n';\">\\n          ' +\n__e( sourceId ) +\n'\\n        </span>\\n\\n        ';\n if (!isSourceType) { ;\n__p += '\\n          <span class=\"CDB-Text CDB-Size-small u-lSpace--s u-flex\" style=\"color: ' +\n__e( sourceColor ) +\n';\">\\n            <i class=\"CDB-IconFont CDB-IconFont-ray CDB-Size-small\"></i>\\n          </span>\\n        ';\n } ;\n__p += '\\n\\n        <span class=\"CDB-Text CDB-Size-small u-mainTextColor u-lSpace\">\\n          ' +\n((__t = ( sourceType )) == null ? '' : __t) +\n'\\n        </span>\\n\\n        <span class=\"CDB-Text CDB-Size-small u-altTextColor u-ellipsis u-lSpace\" title=\"' +\n((__t = ( layerName )) == null ? '' : __t) +\n'\">\\n          ' +\n((__t = ( layerName )) == null ? '' : __t) +\n'\\n        </span>\\n      </div>\\n    </dl>\\n  ';\n } ;\n__p += '\\n';\n } ;\n__p += '\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<ul class=\"CDB-Dropdown-list CDB-Text CDB-Size-medium\">\\n\\n  ';\n if (flags.canCollapse) { ;\n__p += '\\n    <li class=\"CDB-Dropdown-item\">\\n      <button class=\"CDB-Dropdown-link js-toggleCollapsed\">\\n        Toggle widget\\n          <div class=\"CDB-Dropdown-toggle\">\\n          ';\n if (collapsed) { ;\n__p += '\\n            <input class=\"CDB-Toggle js-inputCollapsed\" checked=\"checked\" type=\"checkbox\" name=\"collapsed\">\\n          ';\n } else { ;\n__p += '\\n            <input class=\"CDB-Toggle js-inputCollapsed\" type=\"checkbox\" name=\"collapsed\">\\n          ';\n } ;\n__p += '\\n            <span class=\"u-iBlock CDB-ToggleFace\"></span>\\n          </div>\\n      </button>\\n    </li>\\n  ';\n } ;\n__p += '\\n\\n  ';\n if (flags.localTimezone) { ;\n__p += '\\n  <li class=\"CDB-Dropdown-item\">\\n    <button class=\"CDB-Dropdown-link js-toggleLocalTimezone\">\\n      Local Time Zone\\n      <div class=\"CDB-Dropdown-toggle\">\\n        ';\n if (local_timezone) { ;\n__p += '\\n          <input class=\"CDB-Toggle u-iBlock js-localTimezone\" checked=\"checked\" type=\"checkbox\" name=\"localtimezone\">\\n        ';\n } else { ;\n__p += '\\n          <input class=\"CDB-Toggle u-iBlock js-localTimezone\" type=\"checkbox\" name=\"localtimezone\">\\n        ';\n } ;\n__p += '\\n        <span class=\"u-iBlock CDB-ToggleFace\"></span>\\n      </div>\\n    </button>\\n  </li>\\n  ';\n } ;\n__p += '\\n\\n  ';\n if (flags.normalizeHistogram) { ;\n__p += '\\n  <li class=\"CDB-Dropdown-item\">\\n    <button class=\"CDB-Dropdown-link js-toggleNormalized\">\\n      Show totals\\n      <div class=\"CDB-Dropdown-toggle\">\\n        ';\n if (normalized) { ;\n__p += '\\n          <input class=\"CDB-Toggle u-iBlock js-inputNormalized\" type=\"checkbox\" name=\"normalized\">\\n        ';\n } else { ;\n__p += '\\n          <input class=\"CDB-Toggle u-iBlock js-inputNormalized\" checked=\"checked\" type=\"checkbox\" name=\"normalized\">\\n        ';\n } ;\n__p += '\\n        <span class=\"u-iBlock CDB-ToggleFace\"></span>\\n      </div>\\n    </button>\\n  </li>\\n  ';\n } ;\n__p += '\\n\\n  ';\n if (show_options) { ;\n__p += '\\n    <li class=\"CDB-Dropdown-item\">\\n      <button type=\"button\" class=\"CDB-Dropdown-link u-ellipsis u-actionTextColor js-editWidget\" title=\"Edit\">Edit</button>\\n    </li>\\n    <li class=\"CDB-Dropdown-item\">\\n      <button type=\"button\" class=\"CDB-Dropdown-link u-ellipsis u-errorTextColor js-removeWidget\" title=\"Delete...\">Delete...</button>\\n    </li>\\n  ';\n } ;\n__p += '\\n</ul>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p +=\n((__t = ( prefix )) == null ? '' : __t) +\n'' +\n((__t = ( value )) == null ? '' : __t) +\n'' +\n((__t = ( suffix )) == null ? '' : __t) +\n'\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"CDB-Widget-listItem--fake\"></div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"CDB-Widget-header js-header\">\\n  <div class=\"CDB-Widget-title CDB-Widget-contentSpaced\">\\n    <h3 class=\"CDB-Text CDB-Size-large u-ellipsis js-title ' +\n__e( isCollapsed ? 'is-collapsed' : '' ) +\n'\">' +\n__e( title ) +\n'</h3>\\n    <div class=\"CDB-Widget-options\">\\n      <button class=\"CDB-Shape CDB-Widget-actions js-actions\" data-tooltip=\"More options\">\\n        <div class=\"CDB-Shape-threePoints is-blue is-small\">\\n          <div class=\"CDB-Shape-threePointsItem\"></div>\\n          <div class=\"CDB-Shape-threePointsItem\"></div>\\n          <div class=\"CDB-Shape-threePointsItem\"></div>\\n        </div>\\n      </button>\\n    </div>\\n  </div>\\n  ';\n if (showSource) { ;\n__p += '\\n    <dl class=\"CDB-Widget-info u-tSpace\">\\n      <div class=\"u-flex u-alignCenter u-ellipsis\">\\n        <span class=\"CDB-Text CDB-Size-small is-semibold u-upperCase\" style=\"color: ' +\n__e( sourceColor ) +\n';\">\\n          ' +\n__e( sourceId ) +\n'\\n        </span>\\n\\n        ';\n if (!isSourceType) { ;\n__p += '\\n          <span class=\"CDB-Text CDB-Size-small u-lSpace--s u-flex\" style=\"color: ' +\n__e( sourceColor ) +\n';\">\\n            <i class=\"CDB-IconFont CDB-IconFont-ray CDB-Size-small\"></i>\\n          </span>\\n        ';\n } ;\n__p += '\\n\\n        <span class=\"CDB-Text CDB-Size-small u-mainTextColor u-lSpace\">\\n          ' +\n((__t = ( sourceType )) == null ? '' : __t) +\n'\\n        </span>\\n\\n        <span class=\"CDB-Text CDB-Size-small u-altTextColor u-ellipsis u-lSpace\" title=\"' +\n((__t = ( layerName )) == null ? '' : __t) +\n'\">\\n          ' +\n((__t = ( layerName )) == null ? '' : __t) +\n'\\n        </span>\\n      </div>\\n    </dl>\\n  ';\n } ;\n__p += '\\n  ';\n if (showStats) { ;\n__p += '\\n    <dl class=\"CDB-Widget-info CDB-Text CDB-Size-small u-secondaryTextColor u-upperCase u-tSpace\">\\n      <dt class=\"CDB-Widget-infoCount\">' +\n__e( nulls ) +\n'</dt><dd class=\"CDB-Widget-infoDescription\">null rows</dd>\\n    </dl>\\n  ';\n } ;\n__p += '\\n</div>\\n<div class=\"CDB-Widget-content CDB-Widget-content--formula\">\\n  ';\n if (_.isNumber(value)) { ;\n__p += '\\n    <h4 class=\"CDB-Text CDB-Size-huge ' +\n__e( !isCollapsed ? 'js-value' : '' ) +\n'\" title=\"' +\n__e( value ) +\n'\">\\n      ' +\n((__t = ( prefix )) == null ? '' : __t) +\n'' +\n__e( value ) +\n'' +\n((__t = ( suffix )) == null ? '' : __t) +\n'\\n    </h4>\\n    ';\n if (description) { ;\n__p += '\\n      <p class=\"CDB-Text CDB-Size-small u-tSpace js-description\">' +\n__e( description ) +\n'</p>\\n    ';\n } ;\n__p += '\\n  ';\n } else { ;\n__p += '\\n    <div class=\"CDB-Widget-listItem--fake\"></div>\\n  ';\n } ;\n__p += '\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p +=\n__e( value ) +\n' ' +\n__e( suffix ) +\n'\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"CDB-Widget-header js-header\">\\n  <div class=\"js-title\"></div>\\n  ';\n if (showSource) { ;\n__p += '\\n    <dl class=\"CDB-Widget-info u-tSpace\">\\n      <div class=\"u-flex u-alignCenter u-ellipsis\">\\n        <span class=\"CDB-Text CDB-Size-small is-semibold u-upperCase\" style=\"color: ' +\n__e( sourceColor ) +\n';\">\\n          ' +\n__e( sourceId ) +\n'\\n        </span>\\n\\n        ';\n if (!isSourceType) { ;\n__p += '\\n          <span class=\"CDB-Text CDB-Size-small u-lSpace--s u-flex\" style=\"color: ' +\n__e( sourceColor ) +\n';\">\\n            <i class=\"CDB-IconFont CDB-IconFont-ray CDB-Size-small\"></i>\\n          </span>\\n        ';\n } ;\n__p += '\\n\\n        <span class=\"CDB-Text CDB-Size-small u-mainTextColor u-lSpace\">\\n          ' +\n((__t = ( sourceType )) == null ? '' : __t) +\n'\\n        </span>\\n\\n        <span class=\"CDB-Text CDB-Size-small u-altTextColor u-ellipsis u-lSpace\" title=\"' +\n((__t = ( layerName )) == null ? '' : __t) +\n'\">\\n          ' +\n((__t = ( layerName )) == null ? '' : __t) +\n'\\n        </span>\\n      </div>\\n    </dl>\\n  ';\n } ;\n__p += '\\n  ';\n if (showStats) { ;\n__p += '\\n    <dl class=\"CDB-Widget-info CDB-Text CDB-Size-small u-secondaryTextColor u-upperCase u-tSpace\">\\n      ';\n if (showNulls) { ;\n__p += '\\n      <dt class=\"CDB-Widget-infoCount js-nulls\">0</dt><dd class=\"CDB-Widget-infoDescription\">NULL ROWS</dd>\\n      ';\n } ;\n__p += '\\n      <dt class=\"CDB-Widget-infoCount js-min\">0</dt><dd class=\"CDB-Widget-infoDescription\">MIN</dd>\\n      <dt class=\"CDB-Widget-infoCount js-avg\">0</dt><dd class=\"CDB-Widget-infoDescription\">AVG</dd>\\n      <dt class=\"CDB-Widget-infoCount js-max\">0</dt><dd class=\"CDB-Widget-infoDescription\">MAX</dd>\\n    </dl>\\n  ';\n } ;\n__p += '\\n</div>\\n\\n<div class=\"CDB-Widget-content CDB-Widget-content--histogram js-content\">\\n  <div class=\"CDB-Widget-filter CDB-Widget-contentSpaced \">\\n    <p class=\"CDB-Text CDB-Size-small is-semibold u-upperCase js-val\">…</p>\\n    <div class=\"CDB-Widget-filterButtons js-filter is-hidden\">\\n      <button class=\"CDB-Text CDB-Size-small u-upperCase u-actionTextColor CDB-Widget-filterButton js-zoom\">zoom</button>\\n      <button class=\"CDB-Text CDB-Size-small u-upperCase u-actionTextColor CDB-Widget-filterButton js-clear\">clear</button>\\n    </div>\\n  </div>\\n  <div class=\"js-mini-chart\"></div>\\n  <div class=\"CDB-Chart--histogram js-chart\"></div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"CDB-Widget-title CDB-Widget-contentSpaced\">\\n  <h3 class=\"CDB-Text CDB-Size-large u-ellipsis\" title=\"' +\n__e( title ) +\n'\">' +\n__e( title ) +\n'</h3>\\n  <div class=\"CDB-Widget-options CDB-Widget-contentSpaced\">\\n    ';\n if (isAutoStyleEnabled) { ;\n__p += '\\n      <button class=\"CDB-Widget-buttonIcon CDB-Widget-buttonIcon--circle js-sizes\\n        ' +\n__e( isAutoStyle ? 'is-selected' : '' ) +\n'\\n        ' +\n__e( isAutoStyle ? 'js-cancelAutoStyle' : 'js-autoStyle' ) +\n'\\n        \" data-tooltip=\"' +\n__e( isAutoStyle ? 'Remove Auto style' : 'Apply Auto Style' ) +\n'\">\\n        <i class=\"CDB-IconFont CDB-IconFont-drop CDB-IconFont--small CDB-IconFont--top\"></i>\\n      </button>\\n    ';\n } ;\n__p += '\\n    <button class=\"CDB-Shape CDB-Widget-actions js-actions u-lSpace\" data-tooltip=\"More options\">\\n      <div class=\"CDB-Shape-threePoints is-blue is-small\">\\n        <div class=\"CDB-Shape-threePointsItem\"></div>\\n        <div class=\"CDB-Shape-threePointsItem\"></div>\\n        <div class=\"CDB-Shape-threePointsItem\"></div>\\n      </div>\\n    </button>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<ul class=\"CDB-Widget-chart CDB-Widget-chart--fake\">\\n  ';\n for (var i = 0; i < 15; i++) { ;\n__p += '\\n  <li class=\"CDB-Widget-chartItem CDB-Widget-chartItem--' +\n__e( _.sample(['small', 'medium', 'big'], 1)[0] ) +\n' CDB-Widget-chartItem--fake\"></li>\\n  ';\n } ;\n__p += '\\n</ul>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p +=\n__e( value ) +\n' ' +\n__e( suffix ) +\n'\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"CDB-Widget-header js-header\">\\n  <div class=\"js-title\"></div>\\n\\n  ';\n if (showSource) { ;\n__p += '\\n    <div class=\"CDB-Widget-contentSpaced CDB-Widget-contentFull\">\\n      <dl class=\"CDB-Widget-info u-tSpace\">\\n        <div class=\"u-flex u-alignCenter u-ellipsis\">\\n          <span class=\"CDB-Text CDB-Size-small is-semibold u-upperCase\" style=\"color: ' +\n__e( sourceColor ) +\n';\">\\n            ' +\n__e( sourceId ) +\n'\\n          </span>\\n\\n          ';\n if (!isSourceType) { ;\n__p += '\\n            <span class=\"CDB-Text CDB-Size-small u-lSpace--s u-flex\" style=\"color: ' +\n__e( sourceColor ) +\n';\">\\n              <i class=\"CDB-IconFont CDB-IconFont-ray CDB-Size-small\"></i>\\n            </span>\\n          ';\n } ;\n__p += '\\n\\n          <span class=\"CDB-Text CDB-Size-small u-mainTextColor u-lSpace\">\\n            ' +\n((__t = ( sourceType )) == null ? '' : __t) +\n'\\n          </span>\\n\\n          <span class=\"CDB-Text CDB-Size-small u-altTextColor u-ellipsis u-lSpace\" title=\"' +\n((__t = ( layerName )) == null ? '' : __t) +\n'\">\\n            ' +\n((__t = ( layerName )) == null ? '' : __t) +\n'\\n          </span>\\n        </div>\\n      </dl>\\n    </div>\\n  ';\n } ;\n__p += '\\n</div>\\n\\n<div class=\"CDB-Widget-content CDB-Widget-content--timeSeries js-content\"></div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"CDB-Widget-header CDB-Widget-header--timeSeries\">\\n  <div class=\"CDB-Widget-timeSeriesTimeInfo CDB-Widget-timeSeriesTimeInfo--fake\"></div>\\n</div>\\n<div class=\"CDB-Widget-content CDB-Widget-content--';\n if (hasTorqueLayer) { ;\n__p += 'torqueTimeSeries';\n } else { ;\n__p += 'timeSeries';\n } ;\n__p += ' u-flex u-alignCenter\">\\n  ';\n if (hasTorqueLayer) { ;\n__p += '\\n    <div class=\"CDB-Widget-timeSeriesFakeControl\"></div>\\n  ';\n } ;\n__p += '\\n  <div class=\"CDB-Widget-timeSeriesFakeChart ';\n if (hasTorqueLayer) { ;\n__p += 'CDB-Widget-timeSeriesFakeChart--torque';\n } ;\n__p += '\">\\n    ';\n for (var i = 0; i < 50; i++) { ;\n__p += '\\n      <div class=\"CDB-Widget-timeSeriesFakeChartItem\" style=\"height: ' +\n__e( Math.floor(Math.random() * 100) ) +\n'%\"></div>\\n    ';\n } ;\n__p += '\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<p class=\"CDB-Text CDB-Size-large js-widget-title u-iBlock u-ellipsis u-rSpace\">' +\n__e( title ) +\n'</p>\\n<div class=\"CDB-Widget-contentSpaced--end\">\\n  <div class=\"CDB-Widget-options CDB-Widget-contentSpaced\">\\n    <p class=\"CDB-Text CDB-Size-small is-semibold u-upperCase u-rSpace--m js-val\">…</p>\\n\\n    ';\n if (showSelection && start && end) { ;\n__p += '\\n      <div class=\"CDB-Chart-staticTips\">\\n        <div class=\"CDB-Chart-staticTip u-iBlock u-rSpace\">\\n          <p class=\"CDB-Text CDB-Size-small CDB-Chart-staticTipText\">' +\n((__t = ( start )) == null ? '' : __t) +\n'</p>\\n        </div>\\n\\n        <p class=\"CDB-Text CDB-Size-small is-semibold u-upperCase u-iBlock u-rSpace\">to</p>\\n\\n        <div class=\"CDB-Chart-staticTip u-iBlock\">\\n          <p class=\"CDB-Text CDB-Size-small CDB-Chart-staticTipText\">' +\n((__t = ( end )) == null ? '' : __t) +\n'</p>\\n        </div>\\n      </div>\\n    ';\n } ;\n__p += '\\n\\n    ';\n if (showClearButton) { ;\n__p += '\\n      <button class=\"CDB-Text CDB-Size-small is-semibold u-upperCase u-actionTextColor CDB-Widget-filterButton js-clear\">Clear</button>\\n    ';\n } ;\n__p += '\\n    <button class=\"CDB-Shape CDB-Widget-actions js-actions u-lSpace\" data-tooltip=\"More options\">\\n      <div class=\"CDB-Shape-threePoints is-blue is-small\">\\n        <div class=\"CDB-Shape-threePointsItem\"></div>\\n        <div class=\"CDB-Shape-threePointsItem\"></div>\\n        <div class=\"CDB-Shape-threePointsItem\"></div>\\n      </div>\\n    </button>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<button class=\"CDB-Widget-controlButton ';\n if (disabled) { ;\n__p += 'is-disabled ';\n } ;\n__p += '\" ';\n if (disabled) { ;\n__p += ' disabled ';\n } ;\n__p += '>\\n    <div class=\"CDB-Widget-controlButtonContent\">\\n\\n    ';\n if (running) { ;\n__p += '\\n        <svg width=\"6px\" height=\"10px\" viewBox=\"0 0 6 10\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n        <g id=\"Time-series\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\\n            <g id=\"Time-Series\" transform=\"translate(-201.000000, -543.000000)\" fill=\"#FFFFFF\">\\n                <g id=\"TS---01\" transform=\"translate(168.000000, 432.000000)\">\\n                    <g id=\"Torque-bar\" transform=\"translate(24.000000, 100.000000)\">\\n                        <g id=\"Button-Pause\" transform=\"translate(0.000000, 4.000000)\">\\n                            <path d=\"M9,7 L10,7 L10,17 L9,17 L9,7 Z M14,7 L15,7 L15,17 L14,17 L14,7 Z\" id=\"Combined-Shape\"></path>\\n                        </g>\\n                    </g>\\n                </g>\\n            </g>\\n        </g>\\n        </svg>\\n    ';\n} else { ;\n__p += '\\n        <svg width=\"9px\" height=\"11px\" viewBox=\"0 0 9 11\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n        <g id=\"Time-series\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\\n            <g id=\"Time-Series\" transform=\"translate(-200.000000, -279.000000)\" fill-rule=\"nonzero\" fill=\"#FFFFFF\">\\n                <g id=\"TS---01\" transform=\"translate(168.000000, 168.000000)\">\\n                    <g id=\"Torque-bar\" transform=\"translate(24.000000, 72.000000)\">\\n                        <g id=\"Button-Play\" transform=\"translate(0.000000, 32.000000)\">\\n                            <path d=\"M15.766443,12.044867 L9.20456553,8.10774058 C8.92171794,7.93803203 9,7.89347968 9,8.22734108 L9,16.2102807 C9,16.5418859 8.92367044,16.4984182 9.20456553,16.3298812 L15.766443,12.3927547 C16.0692969,12.2110424 16.0693051,12.2265843 15.766443,12.044867 Z M16.2809387,11.1873741 C17.23035,11.7570209 17.2319213,12.6796581 16.2809387,13.2502477 L9.71906129,17.1873741 C8.76964995,17.7570209 8,17.3168605 8,16.2102807 L8,8.22734108 C8,7.11806049 8.76807871,6.67965811 9.71906129,7.25024766 L16.2809387,11.1873741 Z\" id=\"Triangle\"></path>\\n                        </g>\\n                    </g>\\n                </g>\\n            </g>\\n        </g>\\n        </svg>\\n    ';\n } ;\n__p += '\\n    </div>\\n</button>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"CDB-Widget-contentSpaced CDB-Widget-contentSpaced--end js-torque-controls\"></div>\\n<div class=\"CDB-Widget-contentFull\">\\n  <div class=\"js-time-series-header\"></div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"CDB-Widget-header js-header\">\\n  <div class=\"js-torque-header\"></div>\\n\\n  ';\n if (showSource) { ;\n__p += '\\n    <div class=\"CDB-Widget-contentSpaced CDB-Widget-contentFull\">\\n      <dl class=\"CDB-Widget-info u-tSpace\">\\n        <div class=\"u-flex u-alignCenter u-ellipsis\">\\n          <span class=\"CDB-Text CDB-Size-small is-semibold u-upperCase\" style=\"color: ' +\n__e( sourceColor ) +\n';\">\\n            ' +\n__e( sourceId ) +\n'\\n          </span>\\n\\n          ';\n if (!isSourceType) { ;\n__p += '\\n            <span class=\"CDB-Text CDB-Size-small u-lSpace--s u-flex\" style=\"color: ' +\n__e( sourceColor ) +\n';\">\\n              <i class=\"CDB-IconFont CDB-IconFont-ray CDB-Size-small\"></i>\\n            </span>\\n          ';\n } ;\n__p += '\\n\\n          <span class=\"CDB-Text CDB-Size-small u-mainTextColor u-lSpace\">\\n            ' +\n((__t = ( sourceType )) == null ? '' : __t) +\n'\\n          </span>\\n\\n          <span class=\"CDB-Text CDB-Size-small u-altTextColor u-ellipsis u-lSpace\" title=\"' +\n((__t = ( layerName )) == null ? '' : __t) +\n'\">\\n            ' +\n((__t = ( layerName )) == null ? '' : __t) +\n'\\n          </span>\\n        </div>\\n      </dl>\\n    </div>\\n  ';\n } ;\n__p += '\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<p class=\"CDB-Text CDB-Size-large u-secondaryTextColor u-iBlock\">\\n  ' +\n__e( time ) +\n'\\n</p>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p +=\n((__t = ( placeholder )) == null ? '' : __t) +\n'\\n<button class=\"CDB-Button CDB-Button--secondary CDB-Button--medium CDB-Widget-errorButton js-refresh\">\\n  <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium\">REFRESH</span>\\n</button>\\n\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"CDB-Widget-title CDB-Widget-contentSpaced\">\\n  <h3 class=\"CDB-Text CDB-Size-large u-ellipsis\" title=\"' +\n__e( title ) +\n'\">' +\n__e( title ) +\n'</h3>\\n</div>\\n\\n<h2 class=\"CDB-Text CDB-Size-small is-semibold u-upperCase u-tSpace\">' +\n__e( error ) +\n'</h2>\\n\\n<div class=\"CDB-Text CDB-Size-medium u-tSpace-xl\">' +\n__e( message ) +\n'</div>\\n\\n';\n if (refresh) { ;\n__p += '\\n  <button class=\"CDB-Button CDB-Button--secondary CDB-Button--medium u-tSpace-xl js-refresh\">\\n    <span class=\"CDB-Button-Text CDB-Text is-semibold CDB-Size-medium\">REFRESH</span>\\n  </button>\\n';\n }  else { ;\n__p += '\\n  ' +\n((__t = ( placeholder )) == null ? '' : __t) +\n'\\n';\n } ;\n__p += '\\n\\n';\n\n}\nreturn __p\n}","var map = {\n\t\"./0.1.0/reference.json\": \"./node_modules/camshaft-reference/versions/0.1.0/reference.json\",\n\t\"./0.10.0/reference.json\": \"./node_modules/camshaft-reference/versions/0.10.0/reference.json\",\n\t\"./0.14.0/reference.json\": \"./node_modules/camshaft-reference/versions/0.14.0/reference.json\",\n\t\"./0.15.0/reference.json\": \"./node_modules/camshaft-reference/versions/0.15.0/reference.json\",\n\t\"./0.16.0/reference.json\": \"./node_modules/camshaft-reference/versions/0.16.0/reference.json\",\n\t\"./0.17.0/reference.json\": \"./node_modules/camshaft-reference/versions/0.17.0/reference.json\",\n\t\"./0.18.0/reference.json\": \"./node_modules/camshaft-reference/versions/0.18.0/reference.json\",\n\t\"./0.19.0/reference.json\": \"./node_modules/camshaft-reference/versions/0.19.0/reference.json\",\n\t\"./0.2.0/reference.json\": \"./node_modules/camshaft-reference/versions/0.2.0/reference.json\",\n\t\"./0.20.0/reference.json\": \"./node_modules/camshaft-reference/versions/0.20.0/reference.json\",\n\t\"./0.21.0/reference.json\": \"./node_modules/camshaft-reference/versions/0.21.0/reference.json\",\n\t\"./0.22.0/reference.json\": \"./node_modules/camshaft-reference/versions/0.22.0/reference.json\",\n\t\"./0.23.0/reference.json\": \"./node_modules/camshaft-reference/versions/0.23.0/reference.json\",\n\t\"./0.26.0/reference.json\": \"./node_modules/camshaft-reference/versions/0.26.0/reference.json\",\n\t\"./0.27.0/reference.json\": \"./node_modules/camshaft-reference/versions/0.27.0/reference.json\",\n\t\"./0.29.0/reference.json\": \"./node_modules/camshaft-reference/versions/0.29.0/reference.json\",\n\t\"./0.3.0/reference.json\": \"./node_modules/camshaft-reference/versions/0.3.0/reference.json\",\n\t\"./0.33.0/reference.json\": \"./node_modules/camshaft-reference/versions/0.33.0/reference.json\",\n\t\"./0.34.0/reference.json\": \"./node_modules/camshaft-reference/versions/0.34.0/reference.json\",\n\t\"./0.37.0/reference.json\": \"./node_modules/camshaft-reference/versions/0.37.0/reference.json\",\n\t\"./0.37.1/reference.json\": \"./node_modules/camshaft-reference/versions/0.37.1/reference.json\",\n\t\"./0.38.0/reference.json\": \"./node_modules/camshaft-reference/versions/0.38.0/reference.json\",\n\t\"./0.4.0/reference.json\": \"./node_modules/camshaft-reference/versions/0.4.0/reference.json\",\n\t\"./0.40.0/reference.json\": \"./node_modules/camshaft-reference/versions/0.40.0/reference.json\",\n\t\"./0.41.0/reference.json\": \"./node_modules/camshaft-reference/versions/0.41.0/reference.json\",\n\t\"./0.43.0/reference.json\": \"./node_modules/camshaft-reference/versions/0.43.0/reference.json\",\n\t\"./0.44.0/reference.json\": \"./node_modules/camshaft-reference/versions/0.44.0/reference.json\",\n\t\"./0.47.0/reference.json\": \"./node_modules/camshaft-reference/versions/0.47.0/reference.json\",\n\t\"./0.51.0/reference.json\": \"./node_modules/camshaft-reference/versions/0.51.0/reference.json\",\n\t\"./0.52.0/reference.json\": \"./node_modules/camshaft-reference/versions/0.52.0/reference.json\",\n\t\"./0.54.0/reference.json\": \"./node_modules/camshaft-reference/versions/0.54.0/reference.json\",\n\t\"./0.55.0/reference.json\": \"./node_modules/camshaft-reference/versions/0.55.0/reference.json\",\n\t\"./0.55.1/reference.json\": \"./node_modules/camshaft-reference/versions/0.55.1/reference.json\",\n\t\"./0.58.1/reference.json\": \"./node_modules/camshaft-reference/versions/0.58.1/reference.json\",\n\t\"./0.59.3/reference.json\": \"./node_modules/camshaft-reference/versions/0.59.3/reference.json\",\n\t\"./0.59.4/reference.json\": \"./node_modules/camshaft-reference/versions/0.59.4/reference.json\",\n\t\"./0.6.0/reference.json\": \"./node_modules/camshaft-reference/versions/0.6.0/reference.json\",\n\t\"./0.7.0/reference.json\": \"./node_modules/camshaft-reference/versions/0.7.0/reference.json\",\n\t\"./0.9.0/reference.json\": \"./node_modules/camshaft-reference/versions/0.9.0/reference.json\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./node_modules/camshaft-reference/versions sync recursive ^\\\\.\\\\/.*\\\\/reference\\\\.json$\";","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"CDB-Overlay\">\\n  <button type=\"button\" class=\"CDB-Attribution-button js-button\">©</button>\\n  <p class=\"CDB-Attribution-text js-text u-ellipsis\">' +\n((__t = ( attributions )) == null ? '' : __t) +\n'</p>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"CDB-infowindow CDB-infowindow--light js-infowindow\">\\n  <div class=\"CDB-infowindow-close js-close\"></div>\\n  <div class=\"CDB-infowindow-container\">\\n    ';\n if (typeof loading !== 'undefined' && loading) { ;\n__p += '\\n      <div class=\"CDB-Loader js-loader is-visible\"></div>\\n    ';\n } ;\n__p += '\\n    <div class=\"CDB-infowindow-bg\">\\n      <div class=\"CDB-infowindow-inner js-inner\">\\n        <ul class=\"CDB-infowindow-list js-content\">\\n          ';\n if (content.fields) { ;\n__p += '\\n            ';\n _.each(content.fields, function (field) { ;\n__p += '\\n              <li class=\"CDB-infowindow-listItem\">\\n                ';\n if (field.title) { ;\n__p += '<h5 class=\"CDB-infowindow-subtitle\">' +\n__e( field.title ) +\n'</h5>';\n } ;\n__p += '\\n                ';\n if (field.value) { ;\n__p += '<h4 class=\"CDB-infowindow-title\">' +\n__e( field.value ) +\n'</h4>';\n } ;\n__p += '\\n              </li>\\n              ';\n }) ;\n__p += '\\n          ';\n } ;\n__p += '\\n        </ul>\\n      </div>\\n    </div>\\n    <div class=\"CDB-hook\">\\n      <div class=\"CDB-hook-inner\"></div>\\n    </div>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<h3 class=\"CDB-Text CDB-Size-small u-upperCase u-bSpace u-altTextColor u-ellipsis ';\n if (error) { ;\n__p += ' u-' +\n__e( error ) +\n'TextColor ';\n } ;\n__p += '\" title=\"' +\n__e( title ) +\n'\">\\n  ' +\n__e( title ) +\n'\\n</h3>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"Bubble-container\">\\n  <ul class=\"Bubble-list';\n if (hasCustomLabels && labels[1] === '') { ;\n__p += ' Bubble-list--custom';\n } ;\n__p += '\">\\n    ';\n for (var i in bubbleSizes) { ;\n__p += '\\n      ';\n\n        var customCssClass = '';\n        var index = +i;\n        if (hasCustomLabels) {\n          customCssClass = (labels[0] !== '' && index === 0) ? '' : 'Bubble-item--custom';\n        }\n      ;\n__p += '\\n      <li class=\"js-bubbleItem Bubble-item ' +\n__e( customCssClass ) +\n'\">\\n        ';\n if (!hasCustomLabels || (hasCustomLabels && index === 0)) {;\n__p += '\\n          <div class=\"Bubble-label CDB-Text CDB-Size-small\" style=\"height: ' +\n__e( bubbleSizes[i] ) +\n'%;\">\\n            <div class=\"Bubble-numbersItem CDB-Text CDB-Size-small\">' +\n((__t = ( formatter.formatNumber(labels[i]) )) == null ? '' : __t) +\n'</div>\\n          </div>\\n        ';\n } ;\n__p += '\\n        <div class=\"Bubble-circle\">\\n          <span class=\"Bubble-itemCircle\" style=\"height: ' +\n__e( bubbleSizes[i] ) +\n'%; width: ' +\n__e( bubbleSizes[i] ) +\n'%; ' +\n__e( fillColor ? 'opacity:1; background-color:' + fillColor + ';': '') +\n'\" ></span>\\n        </div>\\n      </li>\\n    ';\n } ;\n__p += '\\n\\n    ';\n if (labels[labels.length - 1]) { ;\n__p += '\\n      <li class=\"js-bubbleItem Bubble-item\">\\n        <div class=\"Bubble-label CDB-Text CDB-Size-small\" style=\"height: 0%;\">\\n          <div class=\"Bubble-numbersItem CDB-Text CDB-Size-small\">' +\n((__t = ( formatter.formatNumber(labels[labels.length - 1]) )) == null ? '' : __t) +\n'</div>\\n        </div>\\n      </li>\\n    ';\n } ;\n__p += '\\n  </ul>\\n\\n  ';\n if (!hasCustomLabels) { ;\n__p += '\\n    <p class=\"Bubble-average CDB-Text CDB-Size-small u-altTextColor ';\n if (hasCustomLabels) { ;\n__p += 'Bubble-average--custom';\n } ;\n__p += '\" style=\"bottom: ' +\n__e( avgSize ) +\n'%;\">\\n      AVG: ' +\n((__t = ( formatter.formatNumber(avgLabel) )) == null ? '' : __t) +\n'\\n    </p>\\n  ';\n } ;\n__p += '\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"Legend-placeholder\">\\n  <div class=\"CDB-Loader is-visible Legend-loading\"></div>\\n  <div class=\"Legend-placeholderInner\">\\n    <svg width=\"191px\" height=\"55px\" viewBox=\"0 3 191 55\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n      <g id=\"Graph\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(0.000000, 3.000000)\">\\n        <g id=\"Group-2\" fill=\"#F9F9F9\">\\n          <g id=\"Group-3\">\\n            <rect id=\"Rectangle-3147\" x=\"0\" y=\"45\" width=\"72\" height=\"9\"></rect>\\n            <rect id=\"Rectangle-Copy-2\" x=\"0\" y=\"2\" width=\"78\" height=\"9\"></rect>\\n            <rect id=\"Rectangle-Copy-3\" x=\"0\" y=\"24\" width=\"48\" height=\"9\"></rect>\\n            <ellipse id=\"Oval-1585\" cx=\"164\" cy=\"27\" rx=\"27\" ry=\"27\"></ellipse>\\n            <ellipse id=\"Oval-1585\" stroke=\"#FFFFFF\" cx=\"164\" cy=\"33\" rx=\"21\" ry=\"21\"></ellipse>\\n            <circle id=\"Oval-1585\" stroke=\"#FFFFFF\" cx=\"164\" cy=\"45\" r=\"9\"></circle>\\n          </g>\\n        </g>\\n        <g id=\"Group\" transform=\"translate(137.000000, 0.000000)\"></g>\\n      </g>\\n    </svg>\\n  </div>\\n</div>\\n\\n\\n\\n\\n\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n\n if (categories && categories.length > 0) { ;\n__p += '\\n  <ul>\\n    ';\n for(var i in categories) { ;\n__p += '\\n      <li class=\"Legend-categoryListItem u-flex u-alignCenter\">\\n        ';\n if (categories[i].icon) { ;\n__p += '\\n          <span class=\"Legend-categoryIcon js-image-container\" data-icon=\"' +\n((__t = ( categories[i].icon )) == null ? '' : __t) +\n'\" data-color=\"' +\n((__t = ( categories[i].color )) == null ? '' : __t) +\n'\"></span>\\n        ';\n } else if (categories[i].color) { ;\n__p += '\\n          <span class=\"Legend-categoryCircle\" style=\"opacity:1; background: ' +\n((__t = ( categories[i].color )) == null ? '' : __t) +\n';\"></span>\\n        ';\n } ;\n__p += '\\n        <p class=\"Legend-categoryTitle CDB-Text CDB-Size-small u-upperCase u-ellipsis\" title=\"' +\n((__t = ( categories[i].title )) == null ? '' : __t) +\n'\">' +\n((__t = ( categories[i].title )) == null ? '' : __t) +\n'</p>\\n      </li>\\n    ';\n } ;\n__p += '\\n  </ul>\\n';\n };\n__p += '\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"Legend-placeholder\">\\n  <div class=\"CDB-Loader is-visible Legend-loading\"></div>\\n  <div class=\"Legend-placeholderInner\">\\n    <svg width=\"191px\" height=\"57px\" viewBox=\"0 0 191 57\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n      <g id=\"Group-2\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\\n        <rect id=\"Rectangle-3147\" fill=\"#F9F9F9\" x=\"0\" y=\"48\" width=\"72\" height=\"9\"></rect>\\n        <rect id=\"Rectangle\" fill=\"#F9F9F9\" x=\"0\" y=\"29\" width=\"78\" height=\"9\"></rect>\\n        <rect id=\"Rectangle\" fill=\"#F9F9F9\" x=\"0\" y=\"0\" width=\"117\" height=\"9\"></rect>\\n        <rect id=\"Rectangle\" fill=\"#F9F9F9\" x=\"182\" y=\"29\" width=\"9\" height=\"9\" rx=\"4.5\"></rect>\\n        <rect id=\"Rectangle-Copy\" fill=\"#F9F9F9\" x=\"182\" y=\"48\" width=\"9\" height=\"9\" rx=\"4.5\"></rect>\\n      </g>\\n  </svg>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"u-flex u-justifySpace u-bSpace\">\\n  ';\n if (!hasCustomLabels) { ;\n__p += '\\n    <p class=\"CDB-Text CDB-Size-small\">' +\n__e( prefix ) +\n' ' +\n((__t = ( labels.left )) == null ? '' : __t) +\n' ' +\n__e( suffix ) +\n'</p>\\n    <p class=\"CDB-Text CDB-Size-small\">' +\n__e( prefix ) +\n' ' +\n((__t = ( labels.right )) == null ? '' : __t) +\n' ' +\n__e( suffix ) +\n'</p>\\n  ';\n } else { ;\n__p += '\\n    <p class=\"CDB-Text CDB-Size-small\">' +\n__e( prefix ) +\n' ' +\n((__t = ( labels.left )) == null ? '' : __t) +\n' ' +\n__e( suffix ) +\n'</p>\\n    <p class=\"CDB-Text CDB-Size-small\">' +\n__e( prefix ) +\n' ' +\n((__t = ( labels.right )) == null ? '' : __t) +\n' ' +\n__e( suffix ) +\n'</p>\\n  ';\n } ;\n__p += '\\n</div>\\n<div class=\"Legend-choropleth ';\n if (hasCustomLabels) { ;\n__p += 'no-average';\n } ;\n__p += '\" style=\"opacity:1; background: linear-gradient(90deg ';\n for(var i in colors) { ;\n__p += ',' +\n((__t = ( colors[i].value )) == null ? '' : __t);\n } ;\n__p += ');\">\\n  ';\n if (!hasCustomLabels) { ;\n__p += '\\n  <span class=\"Legend-choroplethAverage CDB-Text CDB-Size-small u-altTextColor\" style=\"opacity:1; left: ' +\n__e( avgPercentage ) +\n'%;\">\\n    <span class=\"Legend-choroplethAverageText\">' +\n((__t = ( formatter.formatNumber(avg) )) == null ? '' : __t) +\n' AVG</span>\\n  </span>\\n  ';\n } ;\n__p += '\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"Legend-placeholder\">\\n  <div class=\"CDB-Loader is-visible Legend-loading\"></div>\\n  <div class=\"Legend-placeholderInner\">\\n    <svg width=\"192px\" height=\"57px\" viewBox=\"0 0 192 57\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n      <g id=\"Graph\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(0.000000, 48.000000)\">\\n        <rect id=\"Rectangle-3147\" fill=\"#F9F9F9\" x=\"0\" y=\"0\" width=\"192\" height=\"9\" rx=\"4\"></rect>\\n      </g>\\n      <rect id=\"Rectangle\" stroke=\"none\" fill=\"#F9F9F9\" fill-rule=\"evenodd\" x=\"0\" y=\"29\" width=\"18\" height=\"9\"></rect>\\n      <rect id=\"Rectangle\" stroke=\"none\" fill=\"#F9F9F9\" fill-rule=\"evenodd\" x=\"0\" y=\"0\" width=\"117\" height=\"9\"></rect>\\n      <rect id=\"Rectangle\" stroke=\"none\" fill=\"#F9F9F9\" fill-rule=\"evenodd\" x=\"169\" y=\"29\" width=\"23\" height=\"9\"></rect>\\n    </svg>\\n  </div>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"u-flex u-justifySpace u-bSpace--m\">\\n  ';\n if (hasCustomLabels) { ;\n__p += '\\n  <p class=\"CDB-Text CDB-Size-small\">' +\n__e( prefix ) +\n' ' +\n((__t = ( leftLabel )) == null ? '' : __t) +\n' ' +\n__e( suffix ) +\n'</p>\\n  <p class=\"CDB-Text CDB-Size-small\">' +\n__e( prefix ) +\n' ' +\n((__t = ( rightLabel )) == null ? '' : __t) +\n' ' +\n__e( suffix ) +\n'</p>\\n  ';\n } else { ;\n__p += '\\n  <p class=\"CDB-Text CDB-Size-small\">' +\n__e( prefix ) +\n' ' +\n__e( suffix ) +\n'</p>\\n  <p class=\"CDB-Text CDB-Size-small\">' +\n__e( prefix ) +\n' ' +\n__e( suffix ) +\n'</p>\\n  ';\n } ;\n__p += '\\n</div>\\n<div class=\"Legend-choropleth\" style=\"opacity:1; background: linear-gradient(90deg ';\n for(var i in colors) { ;\n__p += ',' +\n((__t = ( colors[i].color )) == null ? '' : __t);\n } ;\n__p += ');\"></div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n\n if (items && items.length > 0) { ;\n__p += '\\n  <ul>\\n    ';\n for(var i in items) { ;\n__p += '\\n      <li class=\"Legend-categoryListItem u-flex u-alignCenter\">\\n        ';\n if (items[i].icon) { ;\n__p += '\\n          <span class=\"Legend-categoryIcon js-image-container\" data-icon=\"' +\n((__t = ( items[i].icon )) == null ? '' : __t) +\n'\" data-color=\"' +\n((__t = ( items[i].color )) == null ? '' : __t) +\n'\"></span>\\n        ';\n } else if (items[i].color) { ;\n__p += '\\n          <span class=\"Legend-categoryCircle\" style=\"opacity:1; background: ' +\n((__t = ( items[i].color )) == null ? '' : __t) +\n';\"></span>\\n        ';\n } ;\n__p += '\\n        <p class=\"Legend-categoryTitle CDB-Text CDB-Size-small u-upperCase u-ellipsis\" title=\"' +\n((__t = ( items[i].title )) == null ? '' : __t) +\n'\">' +\n((__t = ( items[i].title )) == null ? '' : __t) +\n'</p>\\n      </li>\\n    ';\n } ;\n__p += '\\n  </ul>\\n';\n };\n__p += '\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<h2 class=\"CDB-Text CDB-Size-medium is-semibold u-flex u-alignCenter\">\\n  ';\n if (showLayerSelector) { ;\n__p += '\\n  <span class=\"u-iBlock u-rSpace--m\">\\n      ';\n if (isLayerVisible) { ;\n__p += '\\n        <input class=\"CDB-Checkbox js-toggle-layer\" type=\"checkbox\" checked>\\n      ';\n } else { ;\n__p += '\\n        <input class=\"CDB-Checkbox js-toggle-layer\" type=\"checkbox\">\\n      ';\n } ;\n__p += '\\n    <span class=\"u-iBlock CDB-Checkbox-face\"></span>\\n  </span>\\n  ';\n } ;\n__p += '\\n  <span class=\"u-ellipsis\">' +\n__e( layerName ) +\n'</span>\\n</h2>\\n\\n';\n if (showLegends) { ;\n__p += '\\n<div class=\"Legends js-legends\"></div>\\n';\n } ;\n__p += '\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"CDB-Legends-canvasInner js-container\"></div>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<svg width=\"64px\" height=\"25px\" viewBox=\"0 0 64 25\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n  <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\\n    <g fill=\"#AAAAAA\">\\n      <circle id=\"Halo\" fill-opacity=\"0.14\" cx=\"51.6129032\" cy=\"12.3870968\" r=\"12.3870968\"></circle>\\n      <path d=\"M4.12518194,16.503468 C5.88495484,16.503468 6.90196645,15.7473046 7.65615484,14.7202766 L5.98779871,13.5465304 C5.50786065,14.1221175 5.01649548,14.5058422 4.18231742,14.5058422 C3.06246194,14.5058422 2.27399226,13.5803884 2.27399226,12.3953562 L2.27399226,12.3727841 C2.27399226,11.2216099 3.06246194,10.2735841 4.18231742,10.2735841 C4.9479329,10.2735841 5.47357935,10.6460228 5.93066323,11.1990379 L7.59901935,9.92371747 C6.89053935,8.96440565 5.83924645,8.28724435 4.20517161,8.28724435 C1.7826271,8.28724435 0,10.0930078 0,12.3953562 L0,12.4179282 C0,14.7767067 1.83976258,16.503468 4.12518194,16.503468 L4.12518194,16.503468 Z M11.4304378,16.3454637 L13.7501385,16.3454637 L14.3214933,14.923425 L17.4182365,14.923425 L17.9895914,16.3454637 L20.3664275,16.3454637 L16.9611527,8.38881855 L14.8242856,8.38881855 L11.4304378,16.3454637 Z M14.9728378,13.2192358 L15.8755785,10.9846035 L16.766892,13.2192358 L14.9728378,13.2192358 Z M24.6830829,16.3454637 L26.8999397,16.3454637 L26.8999397,13.9528272 L27.88267,13.9528272 L29.4938907,16.3454637 L32.0421333,16.3454637 L30.1338081,13.5916745 C31.1279655,13.1740917 31.77931,12.3727841 31.77931,11.1538938 L31.77931,11.1313218 C31.77931,10.3525863 31.539341,9.75442715 31.07083,9.29170027 C30.5337565,8.76125726 29.6881513,8.44524866 28.465452,8.44524866 L24.6830829,8.44524866 L24.6830829,16.3454637 Z M26.8999397,12.2373519 L26.8999397,10.3300142 L28.3626081,10.3300142 C29.0939423,10.3300142 29.5624533,10.6460228 29.5624533,11.2780401 L29.5624533,11.3006121 C29.5624533,11.8761992 29.1167965,12.2373519 28.3740352,12.2373519 L26.8999397,12.2373519 Z M38.3928119,16.3454637 L38.3928119,10.3638723 L36.0045487,10.3638723 L36.0045487,8.44524866 L43.009359,8.44524866 L43.009359,10.3638723 L40.6096687,10.3638723 L40.6096687,16.3454637 L38.3928119,16.3454637 Z M51.5612903,16.516129 C49.2523838,16.516129 47.3806452,14.6674983 47.3806452,12.3870968 C47.3806452,10.1066952 49.2523838,8.25806452 51.5612903,8.25806452 C53.8701969,8.25806452 55.7419355,10.1066952 55.7419355,12.3870968 C55.7419355,14.6674983 53.8701969,16.516129 51.5612903,16.516129 Z\" id=\"Logo\"></path>\\n    </g>\\n  </g>\\n</svg>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"CDB-OverlayContainer\"></div>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape;\nwith (obj) {\n__p += '<div class=\"CDB-infowindow CDB-infowindow--light js-infowindow\">\\n  <div class=\"CDB-infowindow-container\">\\n    <div class=\"CDB-infowindow-inner\">\\n      <div class=\"CDB-infowindow-list \">\\n        <div class=\"CDB-infowindow-listItem\">\\n          <h4 class=\"CDB-infowindow-title\">' +\n__e( address ) +\n'</h4>\\n        </div>\\n      </div>\\n    </div>\\n    <div class=\"CDB-hook\">\\n      <div class=\"CDB-hook-inner\">\\n      </div>\\n    </div>\\n  </div>\\n</div>';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<form class=\"js-form CDB-Search-inner\">\\n  <button type=\"button\" class=\"CDB-Shape CDB-Search-actionButton js-toggle\">\\n    <span class=\"CDB-Shape-magnify is-small\"></span>\\n  </button>\\n  <input type=\"text\" placeholder=\"Search Location\" class=\"CDB-Search-text js-textInput\" value=\"\" />\\n</form>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"CDB-Overlay CDB-Overlay--limits\">\\n  <button type=\"button\" class=\"CDB-Shape CDB-Limits-button js-button\">\\n    <svg width=\"12px\" height=\"12px\" viewBox=\"0 0 500 500\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\\n      <title>icon-font_114_Warning</title>\\n      <defs></defs>\\n      <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\\n        <g id=\"Artboard-1\" transform=\"translate(-9001.000000, -11000.000000)\" fill-rule=\"nonzero\" fill=\"#636D72\">\\n          <g id=\"icon-font_114_Warning\" transform=\"translate(9001.000000, 11000.000000)\">\\n            <path d=\"M47.3618699,443.171714 C40.4022689,456.721101 41.0006423,457.65748 56.75075,457.65748 L441.243856,457.65748 C456.985511,457.65748 457.59007,456.716689 450.632737,443.171714 L248.997303,50.6152213 L47.3618699,443.171714 Z M210.115762,31.2931921 C231.589444,-10.5131174 266.489496,-10.3489299 287.878844,31.2931921 L489.747111,424.302981 C511.220794,466.109288 489.302388,500 441.243856,500 L56.75075,500 C8.48945932,500 -13.1418536,465.945101 8.24749422,424.302981 L210.115762,31.2931921 Z M222.781864,372.97244 L222.781864,415.31496 L266.474263,415.31496 L266.474263,372.97244 L222.781864,372.97244 Z M222.781864,203.602361 L222.781864,330.62992 L266.474263,330.62992 L266.474263,203.602361 L222.781864,203.602361 Z\" id=\"Combined-Shape\"></path>\\n          </g>\\n        </g>\\n      </g>\\n    </svg>\\n  </button>\\n  <p class=\"CDB-Limits-text js-text u-ellipsis\">\\n    ' +\n((__t = ( limits )) == null ? '' : __t) +\n'\\n  </p>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"CDB-Overlay\">\\n  <button class=\"CDB-Zoom-action CDB-Zoom-action--out js-zoomOut\"></button>\\n  <div class=\"CDB-Zoom-info js-zoomInfo\">-</div>\\n  <button class=\"CDB-Zoom-action CDB-Zoom-action--in js-zoomIn\"></button>\\n</div>\\n';\n\n}\nreturn __p\n}","var _ = require('underscore');\nmodule.exports = function(obj) {\nobj || (obj = {});\nvar __t, __p = '';\nwith (obj) {\n__p += '<div class=\"CDB-Overlay\">\\n  <a href=\"' +\n((__t = ( mapUrl )) == null ? '' : __t) +\n'\" target=\"_blank\" class=\"CDB-Fullscreen-link\">\\n      <div class=\"CDB-Shape-Arrow is-up\"></div>\\n      <div class=\"CDB-Shape-Arrow is-down\"></div>\\n  </a>\\n</div>\\n';\n\n}\nreturn __p\n}","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = \"./node_modules/mapnik-reference sync recursive\";","var map = {\n\t\"./af\": \"./node_modules/moment/locale/af.js\",\n\t\"./af.js\": \"./node_modules/moment/locale/af.js\",\n\t\"./ar\": \"./node_modules/moment/locale/ar.js\",\n\t\"./ar-dz\": \"./node_modules/moment/locale/ar-dz.js\",\n\t\"./ar-dz.js\": \"./node_modules/moment/locale/ar-dz.js\",\n\t\"./ar-kw\": \"./node_modules/moment/locale/ar-kw.js\",\n\t\"./ar-kw.js\": \"./node_modules/moment/locale/ar-kw.js\",\n\t\"./ar-ly\": \"./node_modules/moment/locale/ar-ly.js\",\n\t\"./ar-ly.js\": \"./node_modules/moment/locale/ar-ly.js\",\n\t\"./ar-ma\": \"./node_modules/moment/locale/ar-ma.js\",\n\t\"./ar-ma.js\": \"./node_modules/moment/locale/ar-ma.js\",\n\t\"./ar-sa\": \"./node_modules/moment/locale/ar-sa.js\",\n\t\"./ar-sa.js\": \"./node_modules/moment/locale/ar-sa.js\",\n\t\"./ar-tn\": \"./node_modules/moment/locale/ar-tn.js\",\n\t\"./ar-tn.js\": \"./node_modules/moment/locale/ar-tn.js\",\n\t\"./ar.js\": \"./node_modules/moment/locale/ar.js\",\n\t\"./az\": \"./node_modules/moment/locale/az.js\",\n\t\"./az.js\": \"./node_modules/moment/locale/az.js\",\n\t\"./be\": \"./node_modules/moment/locale/be.js\",\n\t\"./be.js\": \"./node_modules/moment/locale/be.js\",\n\t\"./bg\": \"./node_modules/moment/locale/bg.js\",\n\t\"./bg.js\": \"./node_modules/moment/locale/bg.js\",\n\t\"./bn\": \"./node_modules/moment/locale/bn.js\",\n\t\"./bn.js\": \"./node_modules/moment/locale/bn.js\",\n\t\"./bo\": \"./node_modules/moment/locale/bo.js\",\n\t\"./bo.js\": \"./node_modules/moment/locale/bo.js\",\n\t\"./br\": \"./node_modules/moment/locale/br.js\",\n\t\"./br.js\": \"./node_modules/moment/locale/br.js\",\n\t\"./bs\": \"./node_modules/moment/locale/bs.js\",\n\t\"./bs.js\": \"./node_modules/moment/locale/bs.js\",\n\t\"./ca\": \"./node_modules/moment/locale/ca.js\",\n\t\"./ca.js\": \"./node_modules/moment/locale/ca.js\",\n\t\"./cs\": \"./node_modules/moment/locale/cs.js\",\n\t\"./cs.js\": \"./node_modules/moment/locale/cs.js\",\n\t\"./cv\": \"./node_modules/moment/locale/cv.js\",\n\t\"./cv.js\": \"./node_modules/moment/locale/cv.js\",\n\t\"./cy\": \"./node_modules/moment/locale/cy.js\",\n\t\"./cy.js\": \"./node_modules/moment/locale/cy.js\",\n\t\"./da\": \"./node_modules/moment/locale/da.js\",\n\t\"./da.js\": \"./node_modules/moment/locale/da.js\",\n\t\"./de\": \"./node_modules/moment/locale/de.js\",\n\t\"./de-at\": \"./node_modules/moment/locale/de-at.js\",\n\t\"./de-at.js\": \"./node_modules/moment/locale/de-at.js\",\n\t\"./de-ch\": \"./node_modules/moment/locale/de-ch.js\",\n\t\"./de-ch.js\": \"./node_modules/moment/locale/de-ch.js\",\n\t\"./de.js\": \"./node_modules/moment/locale/de.js\",\n\t\"./dv\": \"./node_modules/moment/locale/dv.js\",\n\t\"./dv.js\": \"./node_modules/moment/locale/dv.js\",\n\t\"./el\": \"./node_modules/moment/locale/el.js\",\n\t\"./el.js\": \"./node_modules/moment/locale/el.js\",\n\t\"./en-au\": \"./node_modules/moment/locale/en-au.js\",\n\t\"./en-au.js\": \"./node_modules/moment/locale/en-au.js\",\n\t\"./en-ca\": \"./node_modules/moment/locale/en-ca.js\",\n\t\"./en-ca.js\": \"./node_modules/moment/locale/en-ca.js\",\n\t\"./en-gb\": \"./node_modules/moment/locale/en-gb.js\",\n\t\"./en-gb.js\": \"./node_modules/moment/locale/en-gb.js\",\n\t\"./en-ie\": \"./node_modules/moment/locale/en-ie.js\",\n\t\"./en-ie.js\": \"./node_modules/moment/locale/en-ie.js\",\n\t\"./en-nz\": \"./node_modules/moment/locale/en-nz.js\",\n\t\"./en-nz.js\": \"./node_modules/moment/locale/en-nz.js\",\n\t\"./eo\": \"./node_modules/moment/locale/eo.js\",\n\t\"./eo.js\": \"./node_modules/moment/locale/eo.js\",\n\t\"./es\": \"./node_modules/moment/locale/es.js\",\n\t\"./es-do\": \"./node_modules/moment/locale/es-do.js\",\n\t\"./es-do.js\": \"./node_modules/moment/locale/es-do.js\",\n\t\"./es.js\": \"./node_modules/moment/locale/es.js\",\n\t\"./et\": \"./node_modules/moment/locale/et.js\",\n\t\"./et.js\": \"./node_modules/moment/locale/et.js\",\n\t\"./eu\": \"./node_modules/moment/locale/eu.js\",\n\t\"./eu.js\": \"./node_modules/moment/locale/eu.js\",\n\t\"./fa\": \"./node_modules/moment/locale/fa.js\",\n\t\"./fa.js\": \"./node_modules/moment/locale/fa.js\",\n\t\"./fi\": \"./node_modules/moment/locale/fi.js\",\n\t\"./fi.js\": \"./node_modules/moment/locale/fi.js\",\n\t\"./fo\": \"./node_modules/moment/locale/fo.js\",\n\t\"./fo.js\": \"./node_modules/moment/locale/fo.js\",\n\t\"./fr\": \"./node_modules/moment/locale/fr.js\",\n\t\"./fr-ca\": \"./node_modules/moment/locale/fr-ca.js\",\n\t\"./fr-ca.js\": \"./node_modules/moment/locale/fr-ca.js\",\n\t\"./fr-ch\": \"./node_modules/moment/locale/fr-ch.js\",\n\t\"./fr-ch.js\": \"./node_modules/moment/locale/fr-ch.js\",\n\t\"./fr.js\": \"./node_modules/moment/locale/fr.js\",\n\t\"./fy\": \"./node_modules/moment/locale/fy.js\",\n\t\"./fy.js\": \"./node_modules/moment/locale/fy.js\",\n\t\"./gd\": \"./node_modules/moment/locale/gd.js\",\n\t\"./gd.js\": \"./node_modules/moment/locale/gd.js\",\n\t\"./gl\": \"./node_modules/moment/locale/gl.js\",\n\t\"./gl.js\": \"./node_modules/moment/locale/gl.js\",\n\t\"./gom-latn\": \"./node_modules/moment/locale/gom-latn.js\",\n\t\"./gom-latn.js\": \"./node_modules/moment/locale/gom-latn.js\",\n\t\"./he\": \"./node_modules/moment/locale/he.js\",\n\t\"./he.js\": \"./node_modules/moment/locale/he.js\",\n\t\"./hi\": \"./node_modules/moment/locale/hi.js\",\n\t\"./hi.js\": \"./node_modules/moment/locale/hi.js\",\n\t\"./hr\": \"./node_modules/moment/locale/hr.js\",\n\t\"./hr.js\": \"./node_modules/moment/locale/hr.js\",\n\t\"./hu\": \"./node_modules/moment/locale/hu.js\",\n\t\"./hu.js\": \"./node_modules/moment/locale/hu.js\",\n\t\"./hy-am\": \"./node_modules/moment/locale/hy-am.js\",\n\t\"./hy-am.js\": \"./node_modules/moment/locale/hy-am.js\",\n\t\"./id\": \"./node_modules/moment/locale/id.js\",\n\t\"./id.js\": \"./node_modules/moment/locale/id.js\",\n\t\"./is\": \"./node_modules/moment/locale/is.js\",\n\t\"./is.js\": \"./node_modules/moment/locale/is.js\",\n\t\"./it\": \"./node_modules/moment/locale/it.js\",\n\t\"./it.js\": \"./node_modules/moment/locale/it.js\",\n\t\"./ja\": \"./node_modules/moment/locale/ja.js\",\n\t\"./ja.js\": \"./node_modules/moment/locale/ja.js\",\n\t\"./jv\": \"./node_modules/moment/locale/jv.js\",\n\t\"./jv.js\": \"./node_modules/moment/locale/jv.js\",\n\t\"./ka\": \"./node_modules/moment/locale/ka.js\",\n\t\"./ka.js\": \"./node_modules/moment/locale/ka.js\",\n\t\"./kk\": \"./node_modules/moment/locale/kk.js\",\n\t\"./kk.js\": \"./node_modules/moment/locale/kk.js\",\n\t\"./km\": \"./node_modules/moment/locale/km.js\",\n\t\"./km.js\": \"./node_modules/moment/locale/km.js\",\n\t\"./kn\": \"./node_modules/moment/locale/kn.js\",\n\t\"./kn.js\": \"./node_modules/moment/locale/kn.js\",\n\t\"./ko\": \"./node_modules/moment/locale/ko.js\",\n\t\"./ko.js\": \"./node_modules/moment/locale/ko.js\",\n\t\"./ky\": \"./node_modules/moment/locale/ky.js\",\n\t\"./ky.js\": \"./node_modules/moment/locale/ky.js\",\n\t\"./lb\": \"./node_modules/moment/locale/lb.js\",\n\t\"./lb.js\": \"./node_modules/moment/locale/lb.js\",\n\t\"./lo\": \"./node_modules/moment/locale/lo.js\",\n\t\"./lo.js\": \"./node_modules/moment/locale/lo.js\",\n\t\"./lt\": \"./node_modules/moment/locale/lt.js\",\n\t\"./lt.js\": \"./node_modules/moment/locale/lt.js\",\n\t\"./lv\": \"./node_modules/moment/locale/lv.js\",\n\t\"./lv.js\": \"./node_modules/moment/locale/lv.js\",\n\t\"./me\": \"./node_modules/moment/locale/me.js\",\n\t\"./me.js\": \"./node_modules/moment/locale/me.js\",\n\t\"./mi\": \"./node_modules/moment/locale/mi.js\",\n\t\"./mi.js\": \"./node_modules/moment/locale/mi.js\",\n\t\"./mk\": \"./node_modules/moment/locale/mk.js\",\n\t\"./mk.js\": \"./node_modules/moment/locale/mk.js\",\n\t\"./ml\": \"./node_modules/moment/locale/ml.js\",\n\t\"./ml.js\": \"./node_modules/moment/locale/ml.js\",\n\t\"./mr\": \"./node_modules/moment/locale/mr.js\",\n\t\"./mr.js\": \"./node_modules/moment/locale/mr.js\",\n\t\"./ms\": \"./node_modules/moment/locale/ms.js\",\n\t\"./ms-my\": \"./node_modules/moment/locale/ms-my.js\",\n\t\"./ms-my.js\": \"./node_modules/moment/locale/ms-my.js\",\n\t\"./ms.js\": \"./node_modules/moment/locale/ms.js\",\n\t\"./my\": \"./node_modules/moment/locale/my.js\",\n\t\"./my.js\": \"./node_modules/moment/locale/my.js\",\n\t\"./nb\": \"./node_modules/moment/locale/nb.js\",\n\t\"./nb.js\": \"./node_modules/moment/locale/nb.js\",\n\t\"./ne\": \"./node_modules/moment/locale/ne.js\",\n\t\"./ne.js\": \"./node_modules/moment/locale/ne.js\",\n\t\"./nl\": \"./node_modules/moment/locale/nl.js\",\n\t\"./nl-be\": \"./node_modules/moment/locale/nl-be.js\",\n\t\"./nl-be.js\": \"./node_modules/moment/locale/nl-be.js\",\n\t\"./nl.js\": \"./node_modules/moment/locale/nl.js\",\n\t\"./nn\": \"./node_modules/moment/locale/nn.js\",\n\t\"./nn.js\": \"./node_modules/moment/locale/nn.js\",\n\t\"./pa-in\": \"./node_modules/moment/locale/pa-in.js\",\n\t\"./pa-in.js\": \"./node_modules/moment/locale/pa-in.js\",\n\t\"./pl\": \"./node_modules/moment/locale/pl.js\",\n\t\"./pl.js\": \"./node_modules/moment/locale/pl.js\",\n\t\"./pt\": \"./node_modules/moment/locale/pt.js\",\n\t\"./pt-br\": \"./node_modules/moment/locale/pt-br.js\",\n\t\"./pt-br.js\": \"./node_modules/moment/locale/pt-br.js\",\n\t\"./pt.js\": \"./node_modules/moment/locale/pt.js\",\n\t\"./ro\": \"./node_modules/moment/locale/ro.js\",\n\t\"./ro.js\": \"./node_modules/moment/locale/ro.js\",\n\t\"./ru\": \"./node_modules/moment/locale/ru.js\",\n\t\"./ru.js\": \"./node_modules/moment/locale/ru.js\",\n\t\"./sd\": \"./node_modules/moment/locale/sd.js\",\n\t\"./sd.js\": \"./node_modules/moment/locale/sd.js\",\n\t\"./se\": \"./node_modules/moment/locale/se.js\",\n\t\"./se.js\": \"./node_modules/moment/locale/se.js\",\n\t\"./si\": \"./node_modules/moment/locale/si.js\",\n\t\"./si.js\": \"./node_modules/moment/locale/si.js\",\n\t\"./sk\": \"./node_modules/moment/locale/sk.js\",\n\t\"./sk.js\": \"./node_modules/moment/locale/sk.js\",\n\t\"./sl\": \"./node_modules/moment/locale/sl.js\",\n\t\"./sl.js\": \"./node_modules/moment/locale/sl.js\",\n\t\"./sq\": \"./node_modules/moment/locale/sq.js\",\n\t\"./sq.js\": \"./node_modules/moment/locale/sq.js\",\n\t\"./sr\": \"./node_modules/moment/locale/sr.js\",\n\t\"./sr-cyrl\": \"./node_modules/moment/locale/sr-cyrl.js\",\n\t\"./sr-cyrl.js\": \"./node_modules/moment/locale/sr-cyrl.js\",\n\t\"./sr.js\": \"./node_modules/moment/locale/sr.js\",\n\t\"./ss\": \"./node_modules/moment/locale/ss.js\",\n\t\"./ss.js\": \"./node_modules/moment/locale/ss.js\",\n\t\"./sv\": \"./node_modules/moment/locale/sv.js\",\n\t\"./sv.js\": \"./node_modules/moment/locale/sv.js\",\n\t\"./sw\": \"./node_modules/moment/locale/sw.js\",\n\t\"./sw.js\": \"./node_modules/moment/locale/sw.js\",\n\t\"./ta\": \"./node_modules/moment/locale/ta.js\",\n\t\"./ta.js\": \"./node_modules/moment/locale/ta.js\",\n\t\"./te\": \"./node_modules/moment/locale/te.js\",\n\t\"./te.js\": \"./node_modules/moment/locale/te.js\",\n\t\"./tet\": \"./node_modules/moment/locale/tet.js\",\n\t\"./tet.js\": \"./node_modules/moment/locale/tet.js\",\n\t\"./th\": \"./node_modules/moment/locale/th.js\",\n\t\"./th.js\": \"./node_modules/moment/locale/th.js\",\n\t\"./tl-ph\": \"./node_modules/moment/locale/tl-ph.js\",\n\t\"./tl-ph.js\": \"./node_modules/moment/locale/tl-ph.js\",\n\t\"./tlh\": \"./node_modules/moment/locale/tlh.js\",\n\t\"./tlh.js\": \"./node_modules/moment/locale/tlh.js\",\n\t\"./tr\": \"./node_modules/moment/locale/tr.js\",\n\t\"./tr.js\": \"./node_modules/moment/locale/tr.js\",\n\t\"./tzl\": \"./node_modules/moment/locale/tzl.js\",\n\t\"./tzl.js\": \"./node_modules/moment/locale/tzl.js\",\n\t\"./tzm\": \"./node_modules/moment/locale/tzm.js\",\n\t\"./tzm-latn\": \"./node_modules/moment/locale/tzm-latn.js\",\n\t\"./tzm-latn.js\": \"./node_modules/moment/locale/tzm-latn.js\",\n\t\"./tzm.js\": \"./node_modules/moment/locale/tzm.js\",\n\t\"./uk\": \"./node_modules/moment/locale/uk.js\",\n\t\"./uk.js\": \"./node_modules/moment/locale/uk.js\",\n\t\"./ur\": \"./node_modules/moment/locale/ur.js\",\n\t\"./ur.js\": \"./node_modules/moment/locale/ur.js\",\n\t\"./uz\": \"./node_modules/moment/locale/uz.js\",\n\t\"./uz-latn\": \"./node_modules/moment/locale/uz-latn.js\",\n\t\"./uz-latn.js\": \"./node_modules/moment/locale/uz-latn.js\",\n\t\"./uz.js\": \"./node_modules/moment/locale/uz.js\",\n\t\"./vi\": \"./node_modules/moment/locale/vi.js\",\n\t\"./vi.js\": \"./node_modules/moment/locale/vi.js\",\n\t\"./x-pseudo\": \"./node_modules/moment/locale/x-pseudo.js\",\n\t\"./x-pseudo.js\": \"./node_modules/moment/locale/x-pseudo.js\",\n\t\"./yo\": \"./node_modules/moment/locale/yo.js\",\n\t\"./yo.js\": \"./node_modules/moment/locale/yo.js\",\n\t\"./zh-cn\": \"./node_modules/moment/locale/zh-cn.js\",\n\t\"./zh-cn.js\": \"./node_modules/moment/locale/zh-cn.js\",\n\t\"./zh-hk\": \"./node_modules/moment/locale/zh-hk.js\",\n\t\"./zh-hk.js\": \"./node_modules/moment/locale/zh-hk.js\",\n\t\"./zh-tw\": \"./node_modules/moment/locale/zh-tw.js\",\n\t\"./zh-tw.js\": \"./node_modules/moment/locale/zh-tw.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./node_modules/moment/locale sync recursive ^\\\\.\\\\/.*$\";","/* (ignored) */","/* (ignored) */"],"sourceRoot":""}