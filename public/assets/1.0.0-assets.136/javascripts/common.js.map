{"version":3,"sources":["webpack:///./lib/assets/javascripts/builder/components/background-importer/background-import-limit-view.js","webpack:///./lib/assets/javascripts/builder/components/background-importer/error-details-view.js","webpack:///./lib/assets/javascripts/builder/components/background-importer/twitter-import-details-view.js","webpack:///./lib/assets/javascripts/builder/components/background-importer/warnings-details-view.js","webpack:///./lib/assets/javascripts/builder/components/carousel-form-view.js","webpack:///./lib/assets/javascripts/builder/components/code-mirror/cartocss.code-mirror.js","webpack:///./lib/assets/javascripts/builder/components/code-mirror/code-mirror-view.js","webpack:///./lib/assets/javascripts/builder/components/code-mirror/colorpicker.code-mirror.js","webpack:///./lib/assets/javascripts/builder/components/code-mirror/data-services.js","webpack:///./lib/assets/javascripts/builder/components/code-mirror/hint/custom-list-hint.js","webpack:///./lib/assets/javascripts/builder/components/code-mirror/mode/mustache.js","webpack:///./lib/assets/javascripts/builder/components/code-mirror/mode/sql.js","webpack:///./lib/assets/javascripts/builder/components/code-mirror/placeholder.code-mirror.js","webpack:///./lib/assets/javascripts/builder/components/code-mirror/scroll.code-mirror.js","webpack:///./lib/assets/javascripts/builder/components/code-mirror/searchcursor.code-mirror.js","webpack:///./lib/assets/javascripts/builder/components/code-mirror/show-hint.code-mirror.js","webpack:///./lib/assets/javascripts/builder/components/color-picker/color-picker.js","webpack:///./lib/assets/javascripts/builder/components/context-menu/context-menu-view.js","webpack:///./lib/assets/javascripts/builder/components/custom-carousel/custom-carousel-collection.js","webpack:///./lib/assets/javascripts/builder/components/custom-carousel/custom-carousel-item-model.js","webpack:///./lib/assets/javascripts/builder/components/custom-carousel/custom-carousel-item-view.js","webpack:///./lib/assets/javascripts/builder/components/custom-carousel/custom-carousel-view.js","webpack:///./lib/assets/javascripts/builder/components/custom-list/column-list/column-list-view.js","webpack:///./lib/assets/javascripts/builder/components/custom-list/custom-list-action-view.js","webpack:///./lib/assets/javascripts/builder/components/custom-list/custom-list-collection.js","webpack:///./lib/assets/javascripts/builder/components/custom-list/custom-list-item-model.js","webpack:///./lib/assets/javascripts/builder/components/custom-list/custom-list-item-view.js","webpack:///./lib/assets/javascripts/builder/components/custom-list/custom-list-multi-collection.js","webpack:///./lib/assets/javascripts/builder/components/custom-list/custom-list-multi-item-view.js","webpack:///./lib/assets/javascripts/builder/components/custom-list/custom-list-search-view.js","webpack:///./lib/assets/javascripts/builder/components/custom-list/custom-list-view.js","webpack:///./lib/assets/javascripts/builder/components/custom-list/custom-view.js","webpack:///./lib/assets/javascripts/builder/components/dataset/dataset-base-view.js","webpack:///./lib/assets/javascripts/builder/components/date-picker-range/date-picker-range-view.js","webpack:///./lib/assets/javascripts/builder/components/dialog/dialog-model.js","webpack:///./lib/assets/javascripts/builder/components/dialog/dialog-view.js","webpack:///./lib/assets/javascripts/builder/components/dropdown-overlay/dropdown-overlay-view.js","webpack:///./lib/assets/javascripts/builder/components/error/error-view.js","webpack:///./lib/assets/javascripts/builder/components/form-components/_constants/_dialogs.js","webpack:///./lib/assets/javascripts/builder/components/form-components/_constants/_fill.js","webpack:///./lib/assets/javascripts/builder/components/form-components/_constants/_style.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/base.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/code-editor.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/data-observatory-measurements/data-observatory-dropdown-measurements-view.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/data-observatory-measurements/data-observatory-measurements-view.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/data-observatory-measurements/filter-list-item-view.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/data-observatory-measurements/filters-list-view.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/data-observatory-measurements/measurement-item.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/data-observatory-measurements/measurement-list-item-view.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/data-observatory-measurements/measurements-count-view.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/data-observatory-measurements/measurements-list-view.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/data-observatory-measurements/measurements-search-view.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/datetime/datetime-dialog-model.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/datetime/datetime-dialog-view.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/datetime/datetime-editor-model.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/datetime/datetime-editor-view.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/datetime/datetime.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/enabler-editor/enabler-editor-view.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/enabler/enabler-view.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/fill-color/fill-color-by-value-view.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/fill-color/fill-color-fixed-view.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/fill-color/fill-color.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/fill-color/inputs/input-color-by-value.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/fill-color/inputs/input-color-fixed.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/fill-color/inputs/input-image.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/fill/fill.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/fill/input-collection.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/lazy-select/lazy-list-view.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/lazy-select/lazy-search-collection.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/lazy-select/lazy-search-view.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/lazy-select/lazy-select-view.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/legend/category-item.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/list/list-item.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/list/list.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/node-dataset/node-dataset-item-view.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/node-dataset/node-dataset-view.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/number/number.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/operators/operators-list-collection.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/operators/operators-list-model.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/operators/operators-list-view.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/operators/operators-view.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/radio/radio.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/select/multi-select-view.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/select/select-list-view.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/select/select-placeholder.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/select/select-view.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/select/suggest-view.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/size/size-by-value-content-view.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/size/size-by-value-view.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/size/size-fixed-view.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/size/size.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/slider/slider.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/sortable-list.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/taglist/taglist-collection.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/taglist/taglist-item-view.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/taglist/taglist.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/text.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/textarea.js","webpack:///./lib/assets/javascripts/builder/components/form-components/editors/toggle/toggle.js","webpack:///./lib/assets/javascripts/builder/components/form-components/field.js","webpack:///./lib/assets/javascripts/builder/components/form-components/fieldset-template.js","webpack:///./lib/assets/javascripts/builder/components/form-components/form.js","webpack:///./lib/assets/javascripts/builder/components/form-components/helpers/editor.js","webpack:///./lib/assets/javascripts/builder/components/form-components/index.js","webpack:///./lib/assets/javascripts/builder/components/form-components/nested-form-custom.js","webpack:///./lib/assets/javascripts/builder/components/form-components/validators/column-type.js","webpack:///./lib/assets/javascripts/builder/components/form-components/validators/interval.js","webpack:///./lib/assets/javascripts/builder/components/form-components/validators/required-boolean.js","webpack:///./lib/assets/javascripts/builder/components/icon/icon-view.js","webpack:///./lib/assets/javascripts/builder/components/img-loader-view.js","webpack:///./lib/assets/javascripts/builder/components/infobox/infobox-view.js","webpack:///./lib/assets/javascripts/builder/components/inline-editor/inline-editor-view.js","webpack:///./lib/assets/javascripts/builder/components/input-collection/input-collection.js","webpack:///./lib/assets/javascripts/builder/components/input-color/assets-picker/asset-header-view.js","webpack:///./lib/assets/javascripts/builder/components/input-color/assets-picker/asset-item-view.js","webpack:///./lib/assets/javascripts/builder/components/input-color/assets-picker/assets-list-view.js","webpack:///./lib/assets/javascripts/builder/components/input-color/assets-picker/assets-view.js","webpack:///./lib/assets/javascripts/builder/components/input-color/assets-picker/input-asset-picker-header.js","webpack:///./lib/assets/javascripts/builder/components/input-color/assets-picker/input-asset-picker-view.js","webpack:///./lib/assets/javascripts/builder/components/input-color/assets-picker/organization-assets-list-view.js","webpack:///./lib/assets/javascripts/builder/components/input-color/assets-picker/static-asset-item-view.js","webpack:///./lib/assets/javascripts/builder/components/input-color/assets-picker/upload-assets-tab.js","webpack:///./lib/assets/javascripts/builder/components/input-color/assets-picker/user-assets-list-view.js","webpack:///./lib/assets/javascripts/builder/components/input-color/assets-picker/user-assets-tab.js","webpack:///./lib/assets/javascripts/builder/components/input-color/assets/maki-icons.js","webpack:///./lib/assets/javascripts/builder/components/input-color/input-color-dialog-content.js","webpack:///./lib/assets/javascripts/builder/components/input-color/input-color-file-view.js","webpack:///./lib/assets/javascripts/builder/components/input-color/input-color-fixed-content-view.js","webpack:///./lib/assets/javascripts/builder/components/input-color/input-color-picker/input-color-picker-header.js","webpack:///./lib/assets/javascripts/builder/components/input-color/input-color-picker/input-color-picker-view.js","webpack:///./lib/assets/javascripts/builder/components/input-color/input-color-value-content-view.js","webpack:///./lib/assets/javascripts/builder/components/input-color/input-color.js","webpack:///./lib/assets/javascripts/builder/components/input-color/input-qualitative-ramps/categories-list/list-item-view/categories-list-item-view.js","webpack:///./lib/assets/javascripts/builder/components/input-color/input-qualitative-ramps/categories-list/list-view/categories-custom-list-view.js","webpack:///./lib/assets/javascripts/builder/components/input-color/input-qualitative-ramps/categories-list/list-view/categories-list-view.js","webpack:///./lib/assets/javascripts/builder/components/input-color/input-qualitative-ramps/categories-list/list-view/input-categories-list-view.js","webpack:///./lib/assets/javascripts/builder/components/input-color/input-qualitative-ramps/color-ramps-list/list-item-view/color-ramps-list-item-view.js","webpack:///./lib/assets/javascripts/builder/components/input-color/input-qualitative-ramps/color-ramps-list/list-view/color-ramps-list-view.js","webpack:///./lib/assets/javascripts/builder/components/input-color/input-qualitative-ramps/main-view.js","webpack:///./lib/assets/javascripts/builder/components/input-color/input-quantitative-ramps/input-ramp-content-view.js","webpack:///./lib/assets/javascripts/builder/components/input-color/input-quantitative-ramps/input-ramp-list-item-view.js","webpack:///./lib/assets/javascripts/builder/components/input-color/input-quantitative-ramps/input-ramp-list-view.js","webpack:///./lib/assets/javascripts/builder/components/input-color/input-quantitative-ramps/main-view.js","webpack:///./lib/assets/javascripts/builder/components/input-color/input-quantitative-ramps/ramps.js","webpack:///./lib/assets/javascripts/builder/components/input-fill/input-fill-view.js","webpack:///./lib/assets/javascripts/builder/components/input-number/input-number-content-view.js","webpack:///./lib/assets/javascripts/builder/components/input-number/input-number-dialog-content.js","webpack:///./lib/assets/javascripts/builder/components/input-number/input-number-fixed-content-view.js","webpack:///./lib/assets/javascripts/builder/components/input-number/input-number-value-content-view.js","webpack:///./lib/assets/javascripts/builder/components/input-number/input-number.js","webpack:///./lib/assets/javascripts/builder/components/loading/random-quote.js","webpack:///./lib/assets/javascripts/builder/components/loading/render-loading.js","webpack:///./lib/assets/javascripts/builder/components/metrics/metrics-model.js","webpack:///./lib/assets/javascripts/builder/components/metrics/metrics-tracker.js","webpack:///./lib/assets/javascripts/builder/components/metrics/metrics-types.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/datasets/content-result-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/datasets/dataset-item-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/datasets/datasets-list-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/datasets/datasets-pagination-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/datasets/datasets-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/datasets/remote-dataset-item-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-arcgis/import-arcgis-selected-dataset-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-arcgis/import-arcgis-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-data/import-data-form-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-data/import-data-header-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-data/import-data-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-options.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-selected-dataset-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-service/import-service-header-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-service/import-service-item-description-format.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-service/import-service-item-model.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-service/import-service-items-collection.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-service/import-service-list-item-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-service/import-service-list-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-service/import-service-loader-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-service/import-service-oauth-model.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-service/import-service-token-model.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-service/import-service-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-twitter/credits-info-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-twitter/credits-usage-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-twitter/import-twitter-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-twitter/twitter-categories/twitter-categories-collection.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-twitter/twitter-categories/twitter-categories-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-twitter/twitter-categories/twitter-category-model.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-twitter/twitter-categories/twitter-category-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/import-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/imports/imports-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/listing-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/content/navigation-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/footer/guessing-toggler-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/add-layer/footer/privacy-toggler-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/confirmation/modal-confirmation-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/creation/modal-creation-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/dataset-metadata/dataset-metadata-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/dataset-metadata/footer/footer-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/dataset-metadata/form/form-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/dataset-metadata/save-metadata-dataset.js","webpack:///./lib/assets/javascripts/builder/components/modals/export-data/modal-export-data-format-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/export-data/modal-export-data-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/map-metadata/footer/footer-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/map-metadata/form/form-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/map-metadata/map-metadata-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/map-metadata/save-metadata-map.js","webpack:///./lib/assets/javascripts/builder/components/modals/modal-view-model.js","webpack:///./lib/assets/javascripts/builder/components/modals/modal-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/modals-service-model.js","webpack:///./lib/assets/javascripts/builder/components/modals/privacy-warning/privacy-warning-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/publish/create-privacy-options.js","webpack:///./lib/assets/javascripts/builder/components/modals/publish/privacy-collection.js","webpack:///./lib/assets/javascripts/builder/components/modals/publish/privacy-model.js","webpack:///./lib/assets/javascripts/builder/components/modals/publish/privacy-password-model.js","webpack:///./lib/assets/javascripts/builder/components/modals/publish/publish-button-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/publish/publish-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/publish/publish/create-share-options.js","webpack:///./lib/assets/javascripts/builder/components/modals/publish/publish/publish-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/publish/publish/share-collection.js","webpack:///./lib/assets/javascripts/builder/components/modals/publish/publish/share-item-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/publish/publish/share-model.js","webpack:///./lib/assets/javascripts/builder/components/modals/publish/share-with-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/publish/share/share-list-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/publish/share/share-permission-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/publish/share/share-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/publish/share/user-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/publish/share/users-group-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/publish/upgrade-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/sync-options/sync-options-modal-view.js","webpack:///./lib/assets/javascripts/builder/components/modals/visualization-title-suffix-metadata.js","webpack:///./lib/assets/javascripts/builder/components/no-results/render-no-results.js","webpack:///./lib/assets/javascripts/builder/components/notifier/notifier-action-view.js","webpack:///./lib/assets/javascripts/builder/components/notifier/notifier-collection.js","webpack:///./lib/assets/javascripts/builder/components/notifier/notifier-item-view.js","webpack:///./lib/assets/javascripts/builder/components/notifier/notifier-model.js","webpack:///./lib/assets/javascripts/builder/components/notifier/notifier-view.js","webpack:///./lib/assets/javascripts/builder/components/notifier/notifier.js","webpack:///./lib/assets/javascripts/builder/components/pagination-search/pagination-search-model.js","webpack:///./lib/assets/javascripts/builder/components/pagination-search/pagination-search-view.js","webpack:///./lib/assets/javascripts/builder/components/pagination/pagination-model.js","webpack:///./lib/assets/javascripts/builder/components/pagination/pagination-view.js","webpack:///./lib/assets/javascripts/builder/components/popup-manager.js","webpack:///./lib/assets/javascripts/builder/components/privacy-dropdown/password-dialog-view.js","webpack:///./lib/assets/javascripts/builder/components/privacy-dropdown/privacy-dialog-view.js","webpack:///./lib/assets/javascripts/builder/components/privacy-dropdown/privacy-dropdown-view.js","webpack:///./lib/assets/javascripts/builder/components/scroll/scroll-view.js","webpack:///./lib/assets/javascripts/builder/components/stack-layout/stack-layout-model.js","webpack:///./lib/assets/javascripts/builder/components/stack-layout/stack-layout-view.js","webpack:///./lib/assets/javascripts/builder/components/tab-pane/create-mixed-labels-tab-pane.js","webpack:///./lib/assets/javascripts/builder/components/tab-pane/create-radio-labels-tab-pane.js","webpack:///./lib/assets/javascripts/builder/components/tab-pane/create-text-labels-tab-pane.js","webpack:///./lib/assets/javascripts/builder/components/tab-pane/tab-pane-collection.js","webpack:///./lib/assets/javascripts/builder/components/tab-pane/tab-pane-color-view.js","webpack:///./lib/assets/javascripts/builder/components/tab-pane/tab-pane-item-view.js","webpack:///./lib/assets/javascripts/builder/components/tab-pane/tab-pane-label-view.js","webpack:///./lib/assets/javascripts/builder/components/tab-pane/tab-pane-mixed-view.js","webpack:///./lib/assets/javascripts/builder/components/tab-pane/tab-pane-radio-label-view.js","webpack:///./lib/assets/javascripts/builder/components/tab-pane/tab-pane-view.js","webpack:///./lib/assets/javascripts/builder/components/table/body/table-body-row-view.js","webpack:///./lib/assets/javascripts/builder/components/table/body/table-body-view.js","webpack:///./lib/assets/javascripts/builder/components/table/editors/editor-view-model.js","webpack:///./lib/assets/javascripts/builder/components/table/editors/editor-view.js","webpack:///./lib/assets/javascripts/builder/components/table/editors/editors-service-model.js","webpack:///./lib/assets/javascripts/builder/components/table/editors/types/editor-base-view.js","webpack:///./lib/assets/javascripts/builder/components/table/editors/types/editor-boolean-view.js","webpack:///./lib/assets/javascripts/builder/components/table/editors/types/editor-date-form-model.js","webpack:///./lib/assets/javascripts/builder/components/table/editors/types/editor-date-view.js","webpack:///./lib/assets/javascripts/builder/components/table/editors/types/editor-model.js","webpack:///./lib/assets/javascripts/builder/components/table/editors/types/editor-string-view.js","webpack:///./lib/assets/javascripts/builder/components/table/head/table-head-item-view.js","webpack:///./lib/assets/javascripts/builder/components/table/head/table-head-options-item-view.js","webpack:///./lib/assets/javascripts/builder/components/table/head/table-head-view.js","webpack:///./lib/assets/javascripts/builder/components/table/operations/table-add-column.js","webpack:///./lib/assets/javascripts/builder/components/table/operations/table-add-row.js","webpack:///./lib/assets/javascripts/builder/components/table/operations/table-change-column-type.js","webpack:///./lib/assets/javascripts/builder/components/table/operations/table-edit-cell.js","webpack:///./lib/assets/javascripts/builder/components/table/operations/table-remove-column.js","webpack:///./lib/assets/javascripts/builder/components/table/operations/table-remove-row.js","webpack:///./lib/assets/javascripts/builder/components/table/operations/table-rename-column.js","webpack:///./lib/assets/javascripts/builder/components/table/paginator/table-paginator-view.js","webpack:///./lib/assets/javascripts/builder/components/table/table-manager.js","webpack:///./lib/assets/javascripts/builder/components/table/table-view-model.js","webpack:///./lib/assets/javascripts/builder/components/table/table-view.js","webpack:///./lib/assets/javascripts/builder/components/tipsy-tooltip-view.js","webpack:///./lib/assets/javascripts/builder/components/toggler/toggler-view.js","webpack:///./lib/assets/javascripts/builder/components/undo-redo/undo-redo-view.js","webpack:///./lib/assets/javascripts/builder/components/view-factory.js","webpack:///./lib/assets/javascripts/builder/components/view-options/panel-with-options-view.js","webpack:///./lib/assets/javascripts/builder/config/upload-config.js","webpack:///./lib/assets/javascripts/builder/data/acl-item-model.js","webpack:///./lib/assets/javascripts/builder/data/analysis-definition-node-model.js","webpack:///./lib/assets/javascripts/builder/data/analysis-definition-node-source-model.js","webpack:///./lib/assets/javascripts/builder/data/asset-model.js","webpack:///./lib/assets/javascripts/builder/data/assets-collection.js","webpack:///./lib/assets/javascripts/builder/data/backbone/network-interceptors/interceptor.js","webpack:///./lib/assets/javascripts/builder/data/backbone/network-interceptors/interceptors/forbidden-403.js","webpack:///./lib/assets/javascripts/builder/data/backbone/sync-abort.js","webpack:///./lib/assets/javascripts/builder/data/background-importer/import-model-poller.js","webpack:///./lib/assets/javascripts/builder/data/background-importer/import-model.js","webpack:///./lib/assets/javascripts/builder/data/background-importer/imports-model.js","webpack:///./lib/assets/javascripts/builder/data/background-importer/poller.js","webpack:///./lib/assets/javascripts/builder/data/camshaft-reference.js","webpack:///./lib/assets/javascripts/builder/data/column-model.js","webpack:///./lib/assets/javascripts/builder/data/config-model.js","webpack:///./lib/assets/javascripts/builder/data/custom-baselayer-model.js","webpack:///./lib/assets/javascripts/builder/data/custom-baselayers-collection.js","webpack:///./lib/assets/javascripts/builder/data/data-observatory/data-observatory-base-collection.js","webpack:///./lib/assets/javascripts/builder/data/data-observatory/filters-collection.js","webpack:///./lib/assets/javascripts/builder/data/data-observatory/measurements-collection.js","webpack:///./lib/assets/javascripts/builder/data/editor-model.js","webpack:///./lib/assets/javascripts/builder/data/get-simple-geometry-type.js","webpack:///./lib/assets/javascripts/builder/data/grantables-collection.js","webpack:///./lib/assets/javascripts/builder/data/group-model.js","webpack:///./lib/assets/javascripts/builder/data/infowindow-click-model.js","webpack:///./lib/assets/javascripts/builder/data/infowindow-definition-model.js","webpack:///./lib/assets/javascripts/builder/data/infowindow-hover-model.js","webpack:///./lib/assets/javascripts/builder/data/layer-colors.js","webpack:///./lib/assets/javascripts/builder/data/layer-definition-model.js","webpack:///./lib/assets/javascripts/builder/data/layer-types-and-kinds.js","webpack:///./lib/assets/javascripts/builder/data/legends/legends-metadata.js","webpack:///./lib/assets/javascripts/builder/data/mapcaps-collection.js","webpack:///./lib/assets/javascripts/builder/data/organization-assets-collection.js","webpack:///./lib/assets/javascripts/builder/data/organization-model.js","webpack:///./lib/assets/javascripts/builder/data/permission-model.js","webpack:///./lib/assets/javascripts/builder/data/query-base-model.js","webpack:///./lib/assets/javascripts/builder/data/query-base-status.js","webpack:///./lib/assets/javascripts/builder/data/query-column-model.js","webpack:///./lib/assets/javascripts/builder/data/query-columns-collection.js","webpack:///./lib/assets/javascripts/builder/data/query-geometry-model.js","webpack:///./lib/assets/javascripts/builder/data/query-row-model.js","webpack:///./lib/assets/javascripts/builder/data/query-rows-collection.js","webpack:///./lib/assets/javascripts/builder/data/query-schema-model.js","webpack:///./lib/assets/javascripts/builder/data/static-asset-model.js","webpack:///./lib/assets/javascripts/builder/data/static-assets-collection.js","webpack:///./lib/assets/javascripts/builder/data/synchronization-model.js","webpack:///./lib/assets/javascripts/builder/data/table-columns-collection.js","webpack:///./lib/assets/javascripts/builder/data/table-model.js","webpack:///./lib/assets/javascripts/builder/data/undo-manager.js","webpack:///./lib/assets/javascripts/builder/data/upload-model.js","webpack:///./lib/assets/javascripts/builder/data/user-groups-collection.js","webpack:///./lib/assets/javascripts/builder/data/user-model.js","webpack:///./lib/assets/javascripts/builder/data/users-group-collection.js","webpack:///./lib/assets/javascripts/builder/data/users-group-fetcher.js","webpack:///./lib/assets/javascripts/builder/data/vis-definition-model.js","webpack:///./lib/assets/javascripts/builder/data/vis-metadata-model.js","webpack:///./lib/assets/javascripts/builder/data/visualization-table-model.js","webpack:///./lib/assets/javascripts/builder/data/visualizations-collection.js","webpack:///./lib/assets/javascripts/builder/data/visualizations-fetch-model.js","webpack:///./lib/assets/javascripts/builder/editor/editor-hints/factory-hints.js","webpack:///./lib/assets/javascripts/builder/editor/editor-hints/sql-hints.js","webpack:///./lib/assets/javascripts/builder/editor/layers/layer-content-views/data/data-sql-model.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-cartocss-model.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-defaults/animation-style-defaults.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-defaults/heatmap-style-defaults.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-defaults/hexabins-aggregation-style-defaults.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-defaults/regions-aggregation-style-defaults.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-defaults/simple-style-defaults.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-defaults/squares-aggregation-style-defaults.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-defaults/style-defaults.js","webpack:///./lib/assets/javascripts/builder/editor/style/style-definition-model.js","webpack:///./lib/assets/javascripts/builder/editor/style/styles-factory.js","webpack:///./lib/assets/javascripts/builder/helpers/analysis-node-utils.js","webpack:///./lib/assets/javascripts/builder/helpers/browser-detect.js","webpack:///./lib/assets/javascripts/builder/helpers/carto-color.js","webpack:///./lib/assets/javascripts/builder/helpers/color-keywords.js","webpack:///./lib/assets/javascripts/builder/helpers/error-parser.js","webpack:///./lib/assets/javascripts/builder/helpers/fetch-all-query-objects.js","webpack:///./lib/assets/javascripts/builder/helpers/magic-positioner.js","webpack:///./lib/assets/javascripts/builder/helpers/navigate-through-router.js","webpack:///./lib/assets/javascripts/builder/helpers/point-geojson-parser.js","webpack:///./lib/assets/javascripts/builder/helpers/query-utils-model.js","webpack:///./lib/assets/javascripts/builder/helpers/required-opts.js","webpack:///./lib/assets/javascripts/builder/helpers/sql-utils.js","webpack:///./lib/assets/javascripts/builder/helpers/table-name-utils.js","webpack:///./lib/assets/javascripts/builder/helpers/utils.js","webpack:///./lib/assets/javascripts/builder/sql-notifications.js","webpack:///./lib/assets/javascripts/builder/value-objects/analysis-node-ids.js","webpack:///./lib/assets/javascripts/carto-node/index.js","webpack:///./lib/assets/javascripts/carto-node/lib/clients/authenticated.js","webpack:///./lib/assets/javascripts/carto-node/lib/clients/public.js","webpack:///./lib/assets/javascripts/dashboard/common/upload-config.js","webpack:///./lib/assets/javascripts/dashboard/common/wkt.js","webpack:///./lib/assets/javascripts/dashboard/components/avatar-selector/avatar-selector-view.js","webpack:///./lib/assets/javascripts/dashboard/components/create-fallback-map.js","webpack:///./lib/assets/javascripts/dashboard/components/dashboard-header-view.js","webpack:///./lib/assets/javascripts/dashboard/components/dashboard-header/breadcrumbs/dropdown-view.js","webpack:///./lib/assets/javascripts/dashboard/components/dashboard-header/notifications/dropdown-view.js","webpack:///./lib/assets/javascripts/dashboard/components/dashboard-header/notifications/notifications-collection.js","webpack:///./lib/assets/javascripts/dashboard/components/dashboard-header/notifications/organization-notification-model.js","webpack:///./lib/assets/javascripts/dashboard/components/dashboard-header/notifications/user-notification-model.js","webpack:///./lib/assets/javascripts/dashboard/components/dashboard-header/notifications/user-notifications-view.js","webpack:///./lib/assets/javascripts/dashboard/components/dashboard-header/settings-dropdown-view.js","webpack:///./lib/assets/javascripts/dashboard/components/delete-account/delete-account-view.js","webpack:///./lib/assets/javascripts/dashboard/components/dropdown/dropdown-admin-view.js","webpack:///./lib/assets/javascripts/dashboard/components/dropdown/dropdown-base-view.js","webpack:///./lib/assets/javascripts/dashboard/components/flash-message/flash-message-view.js","webpack:///./lib/assets/javascripts/dashboard/components/icon-selector/icon-selector-view.js","webpack:///./lib/assets/javascripts/dashboard/components/mapcard-preview-view.js","webpack:///./lib/assets/javascripts/dashboard/components/navbar/user-industries-view.js","webpack:///./lib/assets/javascripts/dashboard/components/navbar/user-industries/dropdown-view.js","webpack:///./lib/assets/javascripts/dashboard/components/navbar/user-settings-view.js","webpack:///./lib/assets/javascripts/dashboard/components/navbar/user-settings/dropdown-view.js","webpack:///./lib/assets/javascripts/dashboard/components/pages-subheader/pages-subheader.js","webpack:///./lib/assets/javascripts/dashboard/components/password-confirmation/password-confirmation-view.js","webpack:///./lib/assets/javascripts/dashboard/components/tabpane/tabpane.js","webpack:///./lib/assets/javascripts/dashboard/components/trial-notification/trial-notification-view.js","webpack:///./lib/assets/javascripts/dashboard/components/upgrade-message-view.js","webpack:///./lib/assets/javascripts/dashboard/components/user-info/dropdown-view.js","webpack:///./lib/assets/javascripts/dashboard/components/user-info/user-info-view.js","webpack:///./lib/assets/javascripts/dashboard/components/vendor-scripts/vendor-scripts-view.js","webpack:///./lib/assets/javascripts/dashboard/data/asset-model.js","webpack:///./lib/assets/javascripts/dashboard/data/authenticated-user-model.js","webpack:///./lib/assets/javascripts/dashboard/data/backbone/sync-abort.js","webpack:///./lib/assets/javascripts/dashboard/data/backbone/sync-options.js","webpack:///./lib/assets/javascripts/dashboard/data/background-polling/background-polling-model.js","webpack:///./lib/assets/javascripts/dashboard/data/background-polling/dashboard-background-polling-model.js","webpack:///./lib/assets/javascripts/dashboard/data/config-model.js","webpack:///./lib/assets/javascripts/dashboard/data/dashboard-datasets-url-model.js","webpack:///./lib/assets/javascripts/dashboard/data/dashboard-url-model.js","webpack:///./lib/assets/javascripts/dashboard/data/dashboard-vis-url-model.js","webpack:///./lib/assets/javascripts/dashboard/data/dataset-url-model.js","webpack:///./lib/assets/javascripts/dashboard/data/flash-message-model.js","webpack:///./lib/assets/javascripts/dashboard/data/grantables-collection.js","webpack:///./lib/assets/javascripts/dashboard/data/group-model.js","webpack:///./lib/assets/javascripts/dashboard/data/group-users-collection.js","webpack:///./lib/assets/javascripts/dashboard/data/import-model.js","webpack:///./lib/assets/javascripts/dashboard/data/imports-collection.js","webpack:///./lib/assets/javascripts/dashboard/data/imports-model.js","webpack:///./lib/assets/javascripts/dashboard/data/layers-collection.js","webpack:///./lib/assets/javascripts/dashboard/data/like-model.js","webpack:///./lib/assets/javascripts/dashboard/data/map-layer-model.js","webpack:///./lib/assets/javascripts/dashboard/data/map-model.js","webpack:///./lib/assets/javascripts/dashboard/data/map-url-model.js","webpack:///./lib/assets/javascripts/dashboard/data/organization-groups-collection.js","webpack:///./lib/assets/javascripts/dashboard/data/organization-model.js","webpack:///./lib/assets/javascripts/dashboard/data/organization-url-model.js","webpack:///./lib/assets/javascripts/dashboard/data/organization-users-collection.js","webpack:///./lib/assets/javascripts/dashboard/data/permission-model.js","webpack:///./lib/assets/javascripts/dashboard/data/slide-transition-model.js","webpack:///./lib/assets/javascripts/dashboard/data/table-synchronization-model.js","webpack:///./lib/assets/javascripts/dashboard/data/table/carto-table-data.js","webpack:///./lib/assets/javascripts/dashboard/data/table/column-model.js","webpack:///./lib/assets/javascripts/dashboard/data/table/row-model.js","webpack:///./lib/assets/javascripts/dashboard/data/table/table-data-collection.js","webpack:///./lib/assets/javascripts/dashboard/data/upload-model.js","webpack:///./lib/assets/javascripts/dashboard/data/url-model.js","webpack:///./lib/assets/javascripts/dashboard/data/user-groups-collection.js","webpack:///./lib/assets/javascripts/dashboard/data/user-model.js","webpack:///./lib/assets/javascripts/dashboard/data/user-url-model.js","webpack:///./lib/assets/javascripts/dashboard/data/visualization-model.js","webpack:///./lib/assets/javascripts/dashboard/data/visualization-order-model.js","webpack:///./lib/assets/javascripts/dashboard/data/visualizations-collection.js","webpack:///./lib/assets/javascripts/dashboard/helpers/assets-version.js","webpack:///./lib/assets/javascripts/dashboard/helpers/bytes-to-size.js","webpack:///./lib/assets/javascripts/dashboard/helpers/local-storage.js","webpack:///./lib/assets/javascripts/dashboard/helpers/password-validated-form.js","webpack:///./lib/assets/javascripts/dashboard/helpers/pluralize.js","webpack:///./lib/assets/javascripts/dashboard/helpers/retrigger.js","webpack:///./lib/assets/javascripts/dashboard/helpers/safe-table-name-quoting.js","webpack:///./lib/assets/javascripts/dashboard/helpers/scroll-tofixed-view.js","webpack:///./lib/assets/javascripts/dashboard/views/public-dataset/carto-table-metadata-static.js","webpack:///./lib/assets/javascripts/dashboard/views/public-dataset/carto-table-metadata.js","webpack:///./lib/assets/javascripts/dashboard/views/public-profile/fav-map-view.js","webpack:///./lib/assets/javascripts/deep-insights/api/create-dashboard.js","webpack:///./lib/assets/javascripts/deep-insights/api/dashboard.js","webpack:///./lib/assets/javascripts/deep-insights/api/url-helper.js","webpack:///./lib/assets/javascripts/deep-insights/dashboard-below-map-view.js","webpack:///./lib/assets/javascripts/deep-insights/dashboard-menu-view.js","webpack:///./lib/assets/javascripts/deep-insights/dashboard-sidebar-view.js","webpack:///./lib/assets/javascripts/deep-insights/dashboard-view.js","webpack:///./lib/assets/javascripts/deep-insights/data/analyses.js","webpack:///./lib/assets/javascripts/deep-insights/formatter.js","webpack:///./lib/assets/javascripts/deep-insights/index.js","webpack:///./lib/assets/javascripts/deep-insights/util/error-enhancer.js","webpack:///./lib/assets/javascripts/deep-insights/util/escape-html.js","webpack:///./lib/assets/javascripts/deep-insights/util/get-object-value.js","webpack:///./lib/assets/javascripts/deep-insights/util/layer-colors.js","webpack:///./lib/assets/javascripts/deep-insights/util/timestamp-helper.js","webpack:///./lib/assets/javascripts/deep-insights/util/unescape-html.js","webpack:///./lib/assets/javascripts/deep-insights/viewport-utils.js","webpack:///./lib/assets/javascripts/deep-insights/widgets-service.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/animate-values.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/auto-style/auto-styler.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/auto-style/category-colors.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/auto-style/category.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/auto-style/factory.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/auto-style/histogram.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/auto-style/style-utils.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/category/category-widget-model.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/category/content-view.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/category/list/item/item-view.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/category/list/item/search-item-view.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/category/list/items-view.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/category/list/search-items-view.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/category/locked-categories-collection.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/category/options/options-view.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/category/paginator/paginator-view.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/category/paginator/search-paginator-view.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/category/stats/stats-view.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/category/title/search-title-view.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/dropdown/widget-dropdown-view.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/formula/content-view.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/histogram/chart.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/histogram/content-view.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/histogram/histogram-title-view.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/histogram/histogram-widget-model.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/time-series/content-view.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/time-series/histogram-view.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/time-series/time-series-header-view.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/time-series/time-series-widget-model.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/time-series/torque-content-view.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/time-series/torque-controls-view.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/time-series/torque-header-view.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/time-series/torque-histogram-view.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/time-series/torque-time-info-view.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/time-series/torque-time-slider-view.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/widget-error-view.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/widget-loader-view.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/widget-model.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/widget-view-factory.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/widget-view.js","webpack:///./lib/assets/javascripts/deep-insights/widgets/widgets-collection.js","webpack:///./lib/assets/javascripts/locale/index.js","webpack:///./lib/assets/javascripts/new-dashboard/core/configuration/filters.js","webpack:///./lib/assets/javascripts/new-dashboard/core/models/visualization.js","webpack:///./lib/assets/javascripts/new-dashboard/directives/click-outside.js","webpack:///./lib/assets/javascripts/new-dashboard/i18n/backbone-i18n.js","webpack:///./lib/assets/javascripts/new-dashboard/i18n/index.js","webpack:///./lib/assets/javascripts/new-dashboard/plugins/backbone/backbone-core-models.js","webpack:///./lib/assets/javascripts/new-dashboard/plugins/backbone/modal-model.js","webpack:///./lib/assets/javascripts/new-dashboard/store/actions/apps.js","webpack:///./lib/assets/javascripts/new-dashboard/store/actions/catalog.js","webpack:///./lib/assets/javascripts/new-dashboard/store/actions/visualizations.js","webpack:///./lib/assets/javascripts/new-dashboard/store/index.js","webpack:///./lib/assets/javascripts/new-dashboard/store/modules/apps/connected/index.js","webpack:///./lib/assets/javascripts/new-dashboard/store/modules/apps/oAuth/index.js","webpack:///./lib/assets/javascripts/new-dashboard/store/modules/config/index.js","webpack:///./lib/assets/javascripts/new-dashboard/store/modules/data/catalog/index.js","webpack:///./lib/assets/javascripts/new-dashboard/store/modules/data/datasets/index.js","webpack:///./lib/assets/javascripts/new-dashboard/store/modules/maps/featured-favorited-maps.js","webpack:///./lib/assets/javascripts/new-dashboard/store/modules/maps/index.js","webpack:///./lib/assets/javascripts/new-dashboard/store/modules/notifications/index.js","webpack:///./lib/assets/javascripts/new-dashboard/store/modules/recent-content/index.js","webpack:///./lib/assets/javascripts/new-dashboard/store/modules/search/index.js","webpack:///./lib/assets/javascripts/new-dashboard/store/modules/user/getters.js","webpack:///./lib/assets/javascripts/new-dashboard/store/modules/user/index.js","webpack:///./lib/assets/javascripts/new-dashboard/store/mutations/apps.js","webpack:///./lib/assets/javascripts/new-dashboard/store/mutations/catalog.js","webpack:///./lib/assets/javascripts/new-dashboard/store/mutations/visualizations.js","webpack:///./lib/assets/javascripts/new-dashboard/store/utils/getCARTOData.js","webpack:///./lib/assets/javascripts/new-dashboard/utils/deep-object-extend.js","webpack:///./lib/assets/javascripts/new-dashboard/utils/is-storage-available.js","webpack:///./lib/assets/javascripts/new-dashboard/utils/to-object.js","webpack:///./lib/assets/javascripts/vendor/backbone/core-model.js","webpack:///./lib/assets/javascripts/vendor/backbone/core-view.js","webpack:///./lib/assets/javascripts/vendor/jquery-ui.js","webpack:///./vendor/assets/javascripts/datepicker.js","webpack:///./vendor/assets/javascripts/dragster.js","webpack:///./vendor/assets/javascripts/dropzone.js","webpack:///./vendor/assets/javascripts/filestyle.js","webpack:///./vendor/assets/javascripts/jquery.tipsy.js","webpack:///./vendor/assets/javascripts/markdown.js","webpack:///./vendor/assets/javascripts/tag-it.js"],"names":["CoreView","require","template","Notifier","module","exports","extend","initialize","opts","userModel","Error","configModel","_userModel","_configModel","_notification","addNotification","status","closable","button","info","_getInfo","_initBinds","on","_closeHandler","add_related_model","clean","importQuota","getMaxConcurrentImports","isUpgradeable","get","upgradeUrl","window","upgrade_url","_","defaultTemplate","upgradeErrorTemplate","UPGRADE_ERROR_CODES","error","_error","render","isUpgradeError","contains","errorCode","userCanUpgrade","isInsideOrg","isOrgOwner","_getTemplate","html","title","text","what_about","itemQueueId","item_queue_id","originalUrl","httpResponseCode","httpResponseCodeMessage","httpRresponseCodeMessage","showTrial","canStartTrial","$el","Utils","checkAndBuildOpts","REQUIRED_OPTS","className","events","options","imp","model","userTwitterValues","availableTweets","quota","monthly_use","datasetTotalRows","tweets_georeferenced","datasetTotalRowsFormatted","formatNumber","tweetsCost","tweets_cost","tweetsCostFormatted","availableTweetsFormatted","tweetsOverquota","tweets_overquota","tweetsOverquotaFormatted","blockSizeFormatted","block_size","blockPriceFormatted","block_price","_onCloseClick","_modalModel","destroy","partialImportDetailsTemplate","tooManyFilesDetailsTemplate","tooManyRowsConnectorTemplate","warnings","_warnings","userMaxLayers","user_max_layers","maxTablesPerImport","max_tables_per_import","maxRowsPerConnectorImport","max_rows_per_connection","CarouselView","collection","selectedItem","getSelected","selectedName","getName","name","_initViews","bind","_onChangeHighlighted","carousel","$","length","append","el","initScroll","addView","item","getHighlighted","COLOR_KEYWORDS","CodeMirror","defineMode","config","indentUnit","type","ret","style","tp","tags","split","colorKeywords","keySet","inTagsArray","val","i","selectors","tokenBase","stream","state","ch","next","eatWhile","current","eat","tokenize","tokenCComment","tokenSGMLComment","tokenString","tokenSComment","stack","undefined","test","peek","eatSpace","eol","match","substring","toLowerCase","indexOf","backUp","t_v","old_pos","pos","sc","new_pos","hasOwnProperty","array","keys","skipToEnd","maybeEnd","dashes","quote","escaped","startState","base","baseIndent","token","context","pop","push","indent","textAfter","n","electricChars","defineMIME","ColorPicker","bulletTemplate","errorTemplate","warningTemplate","DATA_SERVICES","ESCAPE_KEY_CODE","RETURN_KEY_CODE","NOHINT","ADDONS","readonly","lineNumbers","autocompleteChars","placeholder","tips","_autocompleteChars","_mode","mode","_addons","addons","_hints","hints","_autocompletePrefix","autocompletePrefix","_autocompleteTriggers","autocompleteTriggers","_autocompleteSuffix","autocompleteSuffix","_errorTemplate","_warningTemplate","_tips","_lineWithErrors","_onInputRead","_onKeyUpEditor","_placeholder","content","join","_bindEvents","_showErrors","defaults","toJSON","isReadOnly","hasLineNumbers","extraKeys","triggerApplyEvent","_completeIfAfterCtrlSpace","editor","fromTextArea","theme","scrollbarStyle","lineWrapping","readOnly","debounce","_onCodeMirrorChange","isEmpty","each","addon","Class","addonView","_toggleReadOnly","setTimeout","refresh","cm","cur","getCursor","getRange","Pos","line","_completeAfter","updateHints","event","code","keyCode","self","_autocompleteTimeout","clearTimeout","str","getTokenAt","string","autocompleteHandler","listItem","hit","isObject","listHints","filter","trigger","pred","completionActive","_showAutocomplete","Pass","showHint","hint","completeSingle","list","_showWarning","$warning","_getWarning","hasNodes","children","_hideWarning","remove","changed","getContent","dataService","_containsDataService","set","silent","setContent","setOption","hide","show","search","query","caseInsensitive","cursor","getSearchCursor","find","markReadOnly","from","to","inclusiveLeft","markText","addLineClass","value","setValue","getValue","destroyEditor","off","getWrapperElement","parent","parentNode","removeChild","_getConsole","_getCode","_removeErrors","empty","$line","removeClass","errors","err","_renderError","_renderBullet","eq","addClass","prototype","apply","STYLE","COLORPICKER_HEIGHT","stopPropagation","e","_updateColors","_onDocumentClick","_editor","destroyPicker","_destroyPicker","_enableUpdateBind","ev","delay","_onClick","wrapper","addEventListener","_disableBinds","removeEventListener","_disableUpdateBind","_createPicker","querySelectorAll","node","_paintColor","textContent","_replaceColor","color","target","nameMatch","_getMatch","hexMatch","start","end","replaceRange","nodeStyle","nodeColor","innerText","borderBottom","re","RegExp","console","log","getLine","exec","len","index","cursorCoords","_colorPicker","disableOpacity","attr","cid","_onColorPickerChange","top","maxTop","outerHeight","css","left","document","body","appendChild","closest","values","hex","removeView","call","arrayContains","arr","scriptHint","keywords","getToken","tprop","innerMode","getMode","level","getCompletions","columnsHint","registerHelper","found","maybeAdd","gatherCompletions","obj","sqlKeywords","words","client","parserConfig","atoms","builtin","operatorChars","support","hooks","dateSQL","result","hexNumber","binaryNumber","charCodeAt","decimallessFloat","doubleQuote","tokenLiteral","nCharCast","charsetCast","commentSlashSlash","commentHash","commentSpaceRequired","tokenComment","zerolessFloat","ODBCdotTable","word","skipTo","pushContext","prev","indentation","col","column","popContext","sol","align","tok","cx","closing","charAt","blockCommentStart","blockCommentEnd","lineComment","hookIdentifier","hookVar","hookClient","defineOption","old","Init","onBlur","onChange","clearPlaceholder","replace","hasFocus","setPlaceholder","elt","createElement","cssText","placeHolder","getOption","createTextNode","display","lineSpace","insertBefore","firstChild","lineCount","Bar","cls","orientation","scroll","screen","total","size","inner","which","e_preventDefault","axis","startpos","done","move","moveTo","innerBox","getBoundingClientRect","where","clientX","right","clientY","bottom","onWheel","moved","wheelEventPixels","oldPos","setPos","force","minButtonSize","update","scrollSize","clientSize","barSize","sizeChanged","buttonSize","SimpleScrollbars","place","horiz","vert","width","measure","getComputedStyle","currentStyle","parseInt","height","needsH","scrollWidth","clientWidth","needsV","scrollHeight","clientHeight","viewHeight","viewWidth","barLeft","setScrollTop","setScrollLeft","clear","scrollbarModel","simple","overlay","SearchCursor","doc","caseFold","atOccurrence","clipPos","global","source","ignoreCase","matches","reverse","lastIndex","slice","cutOff","newMatch","matchLen","origQuery","fold","orig","lastIndexOf","adjustPos","origTarget","last","firstLine","ln","cut","lastLine","findNext","findPrevious","savePosAndFail","maxLine","newText","origin","lines","splitLines","folded","pos1","Math","min","len1","defineExtension","defineDocExtension","ranges","cmpPos","anchor","head","setSelections","HINT_ELEMENT_CLASS","ACTIVE_HINT_ELEMENT_CLASS","getHints","async","newOpts","prop","parseOptions","selections","listSelections","somethingSelected","supportsSelection","close","completion","Completion","signal","widget","tick","startPos","startLen","getSelection","activityFunc","cursorActivity","requestAnimationFrame","fn","cancelAnimationFrame","active","data","pick","getText","closeCharacters","disable","first","myTick","fetchHints","finishUpdate","picked","isNewCompletion","Widget","nw","hintOptions","out","defaultOptions","resolve","getType","buildKeyMap","handle","baseMap","Up","moveFocus","Down","PageUp","menuSize","PageDown","Home","setFocus","End","Enter","Tab","Esc","custom","customKeys","ourMap","addBinding","key","bound","extra","getHintElement","hintsElement","nodeName","toUpperCase","styleHint","element","displayText","innerHTML","dataset","selectedHint","completions","hintId","alignWithWord","below","winW","innerWidth","max","offsetWidth","documentElement","winH","innerHeight","offsetHeight","container","box","overlapY","curTop","overlapX","addKeyMap","keyMap","avoidWrap","changeActive","screenAmount","closeOnUnfocus","closingOnBlur","onFocus","startScroll","getScrollInfo","onScroll","curScroll","newTop","point","pageYOffset","scrollTop","t","srcElement","completeOnSingleClick","focus","removeKeyMap","childNodes","offsetTop","floor","applicableHelpers","helpers","callback","then","resolveAutoHints","getHelpers","resolved","app","run","getHelper","fromList","anyword","term","commands","autocomplete","auto","Backbone","colorPickerTemplate","opacity","Model","_onEscape","_onEscapePressed","rgb","hexToRGB","_sanitizeHex","opacityDisabled","rgbaTemplate","colorpicker","format","horizontal","inline","customClass","slidersHorz","saturation","maxLeft","callLeft","callTop","hue","alpha","setNewColor","toRGB","toHex","r","g","b","a","_initDocumentBinds","_onChangeColor","_destroyDocumentBinds","sanitizeHex","_onChangeOpacity","isNumber","setColor","_onChangeColorValue","rgbToHex","isValidHex","_onChangeHex","isUndefined","hexToRGBA","CustomListView","CustomListItemView","itemTemplate","magicPositioner","DropdownOverlayView","position","x","y","offset","itemView","tagName","triggerElementID","_triggerElementID","visible","mdl","isVisible","$body","posX","posY","clearSubViews","_renderList","toggle","parentView","dropdownOverlay","onClickAction","_listView","typeLabel","CustomCarouselModel","Collection","attrs","d","_onSelectedChange","changedModel","isSelected","m","findWhere","selected","getSelectedValue","selectedModel","highlighted","label","TipsyTooltipView","_itemClassName","itemOptions","_onMouseEnter","_onMouseLeave","toggleClass","tooltip","gravity","killEvent","Ps","CarouselCollection","CarouselItemView","_bindedCheckShadows","_checkShadows","_applyCustomScroll","_checkScroll","_createItem","listItemOptions","view","_listContainer","wheelSpeed","wheelPropagation","swipePropagation","suppressScrollY","stopPropagationOnClick","minScrollbarLength","useBothWheelAxes","_bindScroll","_destroyCustomScroll","_unbindScroll","scrollLeft","currentPos","outerWidth","maxPos","CustomListCollection","ColumnListViewTemplate","headerTitle","stackLayoutModel","columns","_stackLayoutModel","_columns","_showSearch","showSearch","_typeLabel","_itemTemplate","listenTo","_onSelectItem","_onClickBack","action","CustomListItemModel","sort_key","models","comparator","_nameToLowerCase","sortByKey","sort","isNull","isString","toString","getSelectedItem","containsValue","setSelected","removeSelected","isAsync","isDisabled","isDestructive","selectedClass","classList","silentTrue","isArray","searchPlaceholder","_t","_checkButtons","_onSearchType","_submit","_onClickClear","emptyTemplate","addTemplate","ARROW_DOWN_KEY_CODE","ARROW_UP_KEY_CODE","ENTER_KEY_CODE","_onKeyDownBinded","_onKeyDown","_needsMaxSize","mouseOverAction","_mouseOverAction","mouseOutAction","_mouseOutAction","_removeArrowBinds","items","allowFreeTextInput","isBlank","prepend","_renderItem","_applyArrowBinds","ItemViewClass","eventName","_onQueryChanged","_getSelected","selectedValue","_highlightSelected","itemHeight","_onClickAddCustomValue","add","dirty","$listItems","$highlighted","$current","preventDefault","prevQuery","previous","_wrapperContainer","highlight","_onMouseOver","_onMouseOut","SearchView","headerTemplate","CustomListAction","_selectModel","selectModel","actions","_renderHeader","_renderSearch","_renderActions","_focusSearch","_onVisibleChanged","_setActionsVisibility","_searchView","searchTemplate","input","$initialVal","_model","_resetQuery","_toggleVisibility","isInCollection","SQLNotifications","SQLUtils","cdb","_clearSQLModel","_sqlModel","_layerDefinitionModel","sqlModel","_SQL","SQL","user","sql_api_template","api_key","_codemirrorModel","_querySchemaModel","_applyButtonStatusModel","loading","track","_internalParseSQL","callbackAfterAlterSuccess","appliedQuery","currentQuery","isSameQuery","altersData","removeNotification","showNotification","execute","success","DEFAULT_DELAY","_applyDefaultSQLAfterAlteringData","parsedErrors","_parseErrors","responseJSON","showErrorNotification","_checkClearButton","_runQuery","_saveSQL","customSql","isDefaultQuery","_defaultSQL","originalQuery","resetDueToAlteredData","_clearSQL","_forceErrors","hasErrors","editorErrors","showEditorError","_editorModel","map","message","moment","datePickerTemplate","MAX_RANGE","FOUR_HOURS","amount","unit","ONE_DAY","ONE_WEEK","flat","date","calendars","starts","_setPreviousTime","disabled","fromDate","fromHour","fromMin","toDate","toHour","toMin","user_timezone","_setDefaultDate","attributes","max_days","pad","_initCalendar","_hideCalendar","_initTimers","_setValues","_onValuesChange","_destroyBinds","unbind","_formattedDate","calendarIcon","datesUTC","today","utc","subtract","_setModelFromPrevious","selector","calendar","DatePicker","_onDatesChange","onRender","valueOf","now","Date","thirtyDaysAgo","setDate","getDate","formatted","dates","abs","diff","DatePickerSetDate","_toggleCalendar","timeSpan","_setDatepickerFromPrevious","closeCalendar","generateNumberType","validators","schema","_datesForm","Form","commit","getDates","DatePickerHide","createContentView","isHidden","args","Array","arguments","concat","_renderContentView","_onShowChange","_onDestroy","_onVisibilityChange","_onOverlayClicked","baseTemplate","desc","_template","_html","core","sanitize","Mode","NESTED","FLOAT","DEFAULT","Size","MARKER_MIN","IMAGE_MIN","step","DefaultInput100","MIN","MAX","STEP","DEFAULT_RANGE","Panes","FIXED","BY_VALUE","FILE","Tabs","BINS","QUANTIFICATION","Quantification","REFERENCE","Settings","COLOR","quantifications","defaultIndex","COLOR_RAMPS","bins","NUMBER","Type","SIMPLE","ANIMATION","HEATMAP","POLYGON","REGIONS","HEXABINS","SQUARES","NONE","Blending","ESC_KEY_CODE","editors","Base","applyESCBind","_ESCBindCallback","anyModalOpen","_anyModalOpen","applyClickOutsideBind","_clickBindCallback","modals","isOpen","_removeESCandClickListeners","View","FactoryHints","CodeMirrorView","CodeEditor","TextArea","init","tokens","tableName","columnsName","_toggleDisableState","codeMirrorView","_destroyEditor","reset","$codeMirrorEl","replaceWith","setElement","_addTrackingClass","trackingClass","trackClasses","editorType","_hasEditor","StackLayoutView","MeasurementsView","FiltersView","braces","_generateStackLayoutView","createListView","_createListView","createFilterView","_createFilterView","stackViewCollection","createStackView","_stackLayoutView","_buildFilters","selectedFilters","_filtersCollection","_fetchMeasurements","region","_region","fetchOptions","_measurementsCollection","fetch","_fetchMeasurementsWithFilter","filters","_searchMeasurements","keyword","abortable","_fetchFilters","_fetchCollections","filtersCollection","measurementsCollection","searchMeasurements","measurementModel","_measurementModel","nextStep","prevStep","EditorHelpers","selectedItemTemplate","DropdownDialogView","PopupManager","DialogConstants","MeasurementsCollection","FiltersCollection","STATE","idle","fetching","fetched","MEASUREMENT_ATTRIBUTES","DataObservatoryDropdown","setOptions","dialogMode","nodeDefModel","_dialogView","isLoading","_isLoading","_getPlaceholder","_hasValue","keyAttr","_popupManager","_renderLicense","untrack","_onItemSelected","stopListening","getState","_renderButton","_onButtonClick","_onButtonKeyDown","validate","getValidator","every","validator","blur","$html","license","$license","CustomListMultiItemView","NAME","description","itemListTemplate","statusTemplate","_renderListSection","stateModel","_createStatusView","NestedForm","List","MeasurementModel","NestedModel","form","modelInstance","constructor","nestedForm","idPrefix","fieldTemplate","_observeFormEvents","_onChangeForm","BaseView","isFiltering","count","SearchMeasurementView","CountMeasurementView","maxItems","filtered","_createSearchView","_createCountView","_search","_isSerching","_promoteSelected","filtering","_isFiltering","_onClickFilters","promoted","clone","at","utils","_getSearchLabel","_getInput","sanitizeHtml","DatetimeEditorView","_datetimeEditorView","MONTHS","day","formValues","formatDate","isValid","month","year","time","getFormattedDate","DatetimeEditorModel","dateAttr","_formModel","utcOffset","_setValue","_formView","_onKeyUp","DatetimeDialogModel","DatetimeDialogView","DateTime","_removeDateTimeDialog","_getFormattedDatetime","toUTCString","momentObj","editorAttrs","_datetimeDialogModel","_onInputChanged","_datetimeDialogView","_onInputClick","_updateInput","EnablerEditor","_editorOptions","_checkModel","enabled","isChecked","_isChecked","help","id","_helpTooltip","_renderComponent","isEnabled","_manageValue","_triggerChange","defaultValue","_editorComponent","_removeComponent","EditorClass","omit","_setEditorComponentValue","_onCheckClicked","is","templateReversed","Enabler","reversed","checked","inputId","_removeTooltip","undelegateEvents","_onCheckChange","InputFillView","InputColorByValueView","FillConstants","_initInputFields","_initColorByValueInput","quantification","_valueColorInputModel","_valueColorInputView","hideNumericColumns","removeByValueCategory","imageEnabled","_inputCollection","afterRender","InputColorFixedView","InputImageView","_editorAttrs","_modals","_initFillColorInput","_initFillImageInput","_fillInputColorView","_fixedColorInputModel","_fillInputImageView","_imageInputModel","_query","_unbindFormInputs","FillColorFixedView","FillColorByValueView","tabPaneTemplate","createRadioLabelsTabPane","FillColor","_colorKeyAttribute","_colorAttributes","_sizeAttributes","geometryName","fixedPane","tooltipGravity","_generateFixedContentView","valuePane","_generateValueContentView","_tabPaneTabs","hidePanes","tabPaneOptions","tabPaneItemOptions","klassName","tabPaneItemLabelOptions","selectedTabPaneIndex","_getSelectedTabPaneIndex","_tabPaneView","FIXED_TAB_PANE_INDEX","VALUE_TAB_PANE_INDEX","range","_removeDialogs","_removeFillColorFixedDialog","_removeFillColorByValueDialog","_fillColorFixedView","removeDialog","_fillColorByValueView","hideTabs","fixedColorInputModel","imageInputModel","popupConfig","categorizeColumns","valueColorInputModel","param","selectedTabPaneName","getSelectedTabPaneName","_getFillFixedValues","_getFillByValueValues","image","fixed","colorOmitAttributes","imageOmitAttributes","colorAttributes","imageAttributes","InputColorValueContentView","InputColorTemplate","_help","_imageEnabled","_hideNumericColumns","_removeByValueCategory","_getValue","attribute","_getOpacity","colorBar","_getColorbar","_openPopupForColumn","columnSelected","click","colors","deltaPercent","previousPercent","colorsForBar","entry","_getColorStep","minMax","_createContentView","_onToggleSelected","_getColumn","_iconStylingEnabled","_inputColorValueContentView","_categorizeColumns","_hideTabs","_onChangeValue","_getRangeColorValues","ColorPickerView","_colorPickerView","_disableOpacity","_initColorPickerViewBindings","InputImageTemplate","ImageLoaderView","InputColorFileView","isCustomMarker","iconView","imageClass","imageUrl","_getImageURL","_getColor","_updateImageColor","_categoryImagesPresent","images","forEach","updateImageColor","_onChangeFile","marker","kind","url","_inputColorFileView","_initInputColorFileViewBindings","_isIconStylingEnabled","_getKind","DialogModel","DialogView","InputCollection","InputNumber","InputColor","INPUT_TYPE_MAP","QUANTIFICATION_REF","MIN_IMAGE_SIZE","MIN_MARKER_SIZE","Fill","_keyAttr","_initFillDialog","inputKlass","inputModel","Klass","_removeDialog","_adjustImageSize","hasChanged","changedImage","hasImages","compact","hadImages","changedImages","dialogModel","listenToOnce","dialog","unselect","getValues","INPUT_TYPE_ORDER","_onModelsChanged","itemModel","mdlChanges","reduce","memo","typeValues","_type","_searchCollection","_lazySearch","BaseModel","queryTemplate","querySchemaModel","Object","o","buildQuery","sql","_rowModel","deferred","Deferred","sqlQuery","extra_params","page","rows_per_page","_onFetchSuccess","reject","promise","rows","isFetching","getItem","ListView","SearchCollection","LazySelect","rowModel","searchCollection","lazySearch","CategoryModel","Item","removeItem","addItem","$list","Editor","Text","errorClassName","trim","$tooltip","_tooltip","setError","clearError","templateSettings","OPTIONS","_canAddNewItems","listTemplate","itemType","itemValue","_setAddButtonState","userInitiated","customOptions","_addItem","toArray","splice","addEventTriggered","confirmMsg","confirmDelete","confirm","without","focusedItem","invoke","_errorPresenter","unique","$button","_getAddButtonElement","_errorTooltip","maxItemsReached","isSourceType","NodeDatasetItemView","nodeDatasetSelectedTemplate","nodeDatasetItemTemplate","NodeDataset","Select","customListItemView","UP_ARROW_KEY_CODE","BOTTOM_ARROW_KEY_CODE","SPACE_KEY_CODE","SMALL_INCREMENT","BIG_INCREMENT","Number","showSlider","regexp","_validators","_debouncedTriggerChange","hasSlider","isFormatted","slider","slide","_onSlideChange","stop","_onSlideStop","ui","_onInputKeyDown","$input","increment","shiftKey","_nextValue","nextValue","_hasSlider","_onInputKeyUp","_destroySlider","operator","isValidOperator","OperatorsListModel","_dropdownOverlay","_onModelChange","_destroyList","_onAttributeSelected","_hasList","_onOperationChange","OperatorListView","OperatorListCollection","Operators","_setOperatorTemplate","_operatorsListView","_onOperatorsChange","_getOperatorsTextValue","textValue","Radio","_setHelp","containsHelp","option","_createTooltip","msg","_arrayToHtml","selectedVal","MultiSelect","_getLabel","itemCount","pluck","_deselectAll","_selectAll","_onHide","_getSelectedValues","chain","CustomView","_itemView","_getStatus","_renderOverlay","closestModalDialog","_destroyOverlay","SelectPlaceholder","forcePlaceholder","_getButton","_getButtonTemplateData","SelectListView","_isDisabled","_renderSelected","disabledPlaceholder","_initButtonBinds","_destroyButtonBinds","Suggest","_setupCollection","collectionData","categories","_removeForm","_initForm","_getRangeOrCalculateItIfNeeded","_createFormView","_renderFormView","fixedValue","rangeValues","rangeFromFixedValue","_calculateRangeFromFixed","unset","formModel","getNumberType","_getNumberType","formView","percent","span","delta","_onClickQuantification","_onClickBins","ColumnListView","columnListQuantificationMethodItemTemplate","SizeByValueContentView","COLUMN_PANE_INDEX","MAIN_PANE_INDEX","QUANTIFICATION_PANE_INDEX","BINS_PANE_INDEX","_settings","_setupModel","timeoutId","_showByValueDialog","modelBins","defaultBins","_initDialog","_initPopup","_initInputColumn","_popupConfig","rangeSelected","labelColumn","labelRange","removePopupManager","_createStackView","stackLayoutView","_createColumnsView","_createSizeValueContentView","_createQuantificationView","_createBinsView","_getDialogStepPosition","goToStep","SizeFixedView","SizeByValueView","_sizeModel","_updateSizeModelOnChangeBind","_valueView","_removePopupManagers","_getTabPanes","_setSelectedTab","_getTabPaneOptions","_onChangeTabPaneViewTab","tabPaneTabs","_buildFixedPane","_buildByValuePane","selectedIndex","_generateByValueContentView","FIXED_TAB_PANE","BY_VALUE_PANE","hasRange","thereIsByValuePane","_updateFixedValue","_updateRangeValue","avg","defaultRange","_fixedView","MutationObserver","TICKS_PLACEHOLDER","HANDLE_WIDTH","DIMENSION","INITIAL","HIGHEST","LOWEST","Slider","direction","initial","labels","_onValueChange","_values","_labels","_getInitialTickID","_updateUI","_getStepPercentage","rangeIndex","_renderSlider","_addTicks","_getNumberOfValues","field","onMutationObserver","observer","subtree","childList","_initializeSlider","disconnect","observe","numberOfValues","rangeslider","polyfill","fillClass","handleClass","onSlideEnd","_updateLabel","_highlightTick","ticks","appendTo","tickID","steps","_getSteps","rangeWidth","change","SortableList","_initSortable","_updateEditability","sortable","tolerance","containment","forceHelperSize","forcePlaceholderSize","_onSortableUpdate","sorted","removeTag","addTag","_label","TagView","TagCollection","Taglist","_tagCollection","_normalize","isEditable","tagsPlaceholder","_renderTag","tagit","allowSpaces","caseSensitive","placeholderText","preprocessTag","tag","afterTagAdded","_onTagAdded","afterTagRemoved","_onTagRemoved","_destroyTagit","hasClass","dataType","determineChange","_isCopyButtonEnabled","_toggleClipboardState","_togglePlaceholder","removeAttr","hasCopyButton","Toggle","labelHTML","Clipboard","Field","__super__","_initClipboard","createSchema","createEditor","createEditorId","ConstructorFn","hasNestedForm","hideValidationErrors","_destroyErrorTooltip","showTipsy","_clipboard","btn","hideTipsy","destroyTipsy","_destroyHelpTooltip","_destroyClipboard","templateData","isCopyButtonEnabled","fieldAttrs","editorId","Fieldset","Original","createField","handleEditorEvent","_getEditorOptions","_editorAttrsFromBackboneFormSchema","editorOptions","backboneFormSchema","optionKey","optionValidators","columnType","interval","requiredBoolean","CustomForm","updateSchema","newFields","currentFields","fields","fieldSchema","renderAddedField","delegateEvents","fieldKey","$form","$container","selection","selectedFields","columnsCollection","matchesType","minValue","parseFloat","maxValue","fieldValue","isNaN","isFinite","required","iconTemplates","importAllIconTemplates","templates","_preinitializeWithPlaceholder","icon","iconTemplate","_getIconTemplate","placeholderNode","IMAGE_DIM","IMAGE_FILE_ATTRS","VIEWBOX","_imageClass","_imageURL","_color","_lastImage","_loadImage","_isSVG","_loadSVG","$img","_requestImageURL","svg","cloneNode","$svg","bbox","w","h","baseVal","rect","$rect","completeUrl","ajax","getElementsByTagName","fail","noQueryString","endsWith","_setSelectedModel","_infoboxModel","_onChangeState","_selectedModel","infoboxView","_initSubviewBinds","_infoboxCollection","_onAction","_onClose","DBLCLICK_TIMEOUT","clicks","_onClickHandler","edit","save","_timeout","timeout","_unbindEvents","onClick","_title","$title","_renderOptions","_backupText","_oldText","_restoreText","setSelectionRange","_onEdit","_onKeyUpInput","modelChanges","_assetsCollection","assetsCollection","selectedCount","_getSelectedAssetsCount","assetsCount","editable","_editable","allSelected","_onClickRemove","_onClickSelectAll","_onClickDeselectAll","selectedAssets","ASSET_HEIGHT","_changeState","assetHeight","public_url","StaticAssetItemView","StaticAssetsCollection","_setupAssets","_renderAssets","getURLFor","_selectItem","_icons","asset","assets","limit","_selectedAsset","deselectAll","MakiIcons","UserAssetsView","OrganizationAssetsListView","OrganizationAssetsCollection","UploadAssetsView","AssetsCollection","createTextLabelsTabPane","ScrollView","AssetsListView","loadingView","ErrorView","errorParser","KIND","_initModels","disclaimer","_hasFetchedAllCollections","_initTabPane","_renderLoading","_hasError","_stateModel","modalEnabled","uploads","_assetCollections","_userAssetCollection","_organizationAssetCollection","orgId","getOrganization","onFetchAssetCollections","when","response","_setError","_onChangeSelectedAsset","_onChangeSetButton","_assetsTabPaneView","setSelectedTabPaneByName","_upload","create","beforeSend","_beforeAssetUpload","_onAssetUploaded","_onAssetUploadError","complete","_onAssetUploadComplete","_hideDisclaimer","capitalize","_createMakiIconsView","_createYourUploadsView","_createOrganizationUploadsView","_createUploadFileView","_onChangeSelectedTab","_initSetButtonState","_setDisclaimer","_toggleSetButton","_disableSetButton","selectedAssetExist","assetCollection","some","_enableSetButton","selectedAsset","organizationAssetCollection","userAssetCollection","_userAssetsView","_initUpload","_onUploadComplete","_uploadFiles","_uploadURL","icons","folder","_getSelectedFiles","files","file","filename","_onFileSelected","iconModel","_resetFileSelection","error_message","_onSetImage","rampItem","_getRampItem","_loadImages","ramp","_onClickColorPicker","InputAssetPickerHeader","InputAssetPickerView","_headerView","_onGoToColorPicker","_assetPicker","_onChangeImage","AssetItemView","_renderAsset","_onChangeAssets","_getSelectedAsset","assetModel","assetItemView","_selectAsset","AssetStates","SELECTED","Dropzone","_assetCollection","_initDropzone","dragster","Dragster","_showDropzone","_hideDropzone","dropzone","autoProcessQueue","previewsContainer","dataTransfer","_destroyDropzone","removeListeners","_onClickSubmit","_getURL","_hideURLError","isURL","_showURLError","_onURLChanged","AssetHeaderView","_renderRegularView","_addHeaderView","_assetHeaderView","_selectAllAssets","_deselectAllAssets","_removeSelectedAssets","_renderAddButton","addAssetButton","_keyDown","_keyUp","_shiftKeyPressed","selectAll","_removeSelectedAssetsFromView","select","_onDestroyFinished","statusText","UserAssetsListView","InputColorFixedContentView","_hidePanes","_onChangeFixed","attrsToUnsetIfFixed","AssetsView","CarouselFormView","StaticAssetModel","StaticAssetItemViewTemplate","CarouselTemplate","_initCarouselCollection","_carouselCollection","_onSelectAsset","_resetCarouselCollection","unshift","_resetAsset","_getIcons","_getIconSelected","_resetImage","defaultAction","_changeIcon","selectedIcon","rampIndex","categoryImage","_onClickShowCollection","modalModel","_assetsView","_resetAssetsView","breadcrumbsEnabled","createMixedLabelsTabPane","_setupTabPanes","filePane","_generateFileContentView","_updateImageTabPane","_updateTextTabPane","contentView","_reRenderOpacity","iconStylingEnabled","isCategorized","has","_slider","_inverseSliderValue","_onClickColor","_onClickAssetPicker","evt","toFixed","_isValidOpacity","regex","$slider","inputValue","sliderValue","InputColorPickerHeader","_onChangeIndex","_onOpacityChanged","_onGoToAssetPicker","_setColor","InputQuantitativeRamps","InputQualitativeRamps","MetricsTracker","MetricsTypes","StackViewSteps","COLUMN_LIST_VIEW","INPUT_QUALITATIVE_RAMPS_VIEW","INPUT_QUANTITATIVE_RAMPS_VIEW","EXCLUDED_COLUMNS","_removeCategoryFrom","_column","_columnType","_createColumnListView","_createInputQuantitativeRamps","_createInputQualitativeRamps","_createQuantificationListView","hasDomain","showCategories","categoryIndex","settings","columnName","_filteredColumns","_onChangeAttribute","validCategoryTypes","attrsToUnset","wasQuantificationCategory","attribute_type","STYLED_BY_VALUE","InputDialogContent","rampList","_migrateRange","imageURL","categoryImagesPresent","rangeName","_updateColor","$target","isIconClicked","isImgClicked","maxValues","CategoriesListItemView","CategoriesListView","_maxValues","_requiredNumberOfColors","requiredNumberOfColors","_collection","domain","customColorRampTemplate","colorRampsListTemplate","colorRampsListItemTemplate","ColorRampsListItemView","CartoColor","EVENTS","CUSTOM_COLOR","RAMP_SELECTED","CUSTOMIZE","customRamp","_customRamp","selectedRamp","_selectRamp","ramps","getQualitativeRamps","_onClickCustomize","_onClickCustomRamp","mainViewTemplate","AssetPickerView","ColorRampsListView","InputColorPickerView","MAX_VALUES","DEFAULT_COLORS","Prism","STEPS","CATEGORIES_RAMPS_VIEW","CATEGORIES_LIST_VIEW","COLOR_PICKER_VIEW","IMAGE_PICKER_VIEW","_viewModel","_fetchColumns","hideQuantification","currentStep","_createCategoriesRampsListView","_createRangeListView","_createColorPickerView","_createImagePickerView","_onStackLayoutPositionChange","_computeRequiredNumberOfColors","getCurrentPosition","_setViewStatus","max_values","_onQueryDone","_updateRangeAndDomain","categoryNames","_quote","_getRange","_updateRange","_index","eventsToListen","_onImageChanged","c","InputRampListView","_createInputRampListView","_updateRamp","isInverted","_onClickInvert","rampItemTemplate","rampItemView","customRampTemplate","DEFAULT_RAMP_ITEM_COLOR","_onChangeBins","_updateRampOnAttributeChange","_invertRamp","_getRamps","attributeType","rampTypeFromType","number","inverted","customRange","_onClickSwitch","InputRampContentView","_onChangeQuantification","_isValidRange","_getDefaultRamp","collectionOptions","_createInputRampContentView","_createBinsListView","previousBins","previousRamps","previousRamp","green","blue","pink","black","red","inverted_green","inverted_blue","inverted_pink","inverted_black","inverted_red","spectrum1","spectrum2","purple_states","red_states","blue_states","inverted_purple_states","inverted_red_states","inverted_blue_states","FillTemplate","_dialogMode","InputNumberFixedContentView","InputNumberValueContentView","DEFAULT_INPUT_MIN_VALUE","DEFAULT_INPUT_MAX_VALUE","DEFAULT_INPUT_STEP_VALUE","InputNumberContentView","MAIN_PAIN_INDEX","_createInputNumberContentView","f","dropDecimal","v","QUOTES","author","idx","round","random","randomQuote","customDesc","descHTML","eventProperties","_userId","userId","_visId","visId","properties","visualization_id","user_id","MetricsModel","_checkEventIsConfigured","metricModel","allowed","METRIC_TYPES","DOWNLOADED_LAYER","CREATED_LAYER","MODIFIED_ANALYSIS","CREATED_ANALYSIS","DELETED_ANALYSIS","DRAGGED_NODE","APPLIED_SQL","WEBGL_STATS","USED_ADVANCED_MODE","AGGREGATED_GEOMETRIES","MODIFIED_STYLE_FORM","CHANGED_DEFAULT_GEOMETRY","APPLIED_CARTOCSS","VISITED_PRIVATE_PAGE","routerModel","tablesCollection","_routerModel","_tablesCollection","q","shared","locked","library","totalItems","totalEntries","getTotalStat","_onConnectClick","createModel","_createModel","getVisualizationFetchModel","tableModel","getTableModel","permissionModel","getPermissionModel","synchronizationModel","getSynchronizationModel","tableGeomColumnTypes","getGeometryType","geomColumnTypes","isRaster","geometryType","isOwner","owner","getOwner","renderData","showPermissionIndicator","hasWriteAccess","privacy","timeDiff","fromNow","tagsCount","maxTagsToShow","rowCount","datasetSize","syncStatus","syncRanAt","rowCountFormatted","readizableNumber","readablizeBytes","_renderTooltips","_onTagClick","_toggleSelected","canSelect","DATASETS_ITEMS","getTablesCollection","PaginationModel","PaginationView","TypeError","current_page","shouldBeVisible","paginationView","_updatePaginationModelByCollection","_updatePaginationModelByRouterModel","per_page","getDefaultParam","total_count","ContentResultView","DatasetsListView","DatasetsPaginationView","noResultsTemplate","datasetsNoResultTemplate","datasetsErrorTemplate","datasetsLoaderTemplate","_onDataLoading","_onRouterChange","_onDataFetched","_onDataError","controlledViews","enabledViews","noDatasetsView","canCreateDatasets","listView","noResultsView","no_results","errorView","mainLoaderView","main_loader","datasetsPaginationView","content_footer","_hideBlocks","_showBlocks","activeViews","_goToLibrary","views","_isBlockEnabled","DatasetItem","markdown","UploadConfig","toHTML","canImportDataset","_canImportDataset","_setItemClasses","tableSize","fileTimesBigger","SelectedDatasetView","fileAttrs","_genDescription","ext","getFileExtension","userCanSync","isActionEnabled","customInstall","importCanSync","acceptSync","_isArcGISLayer","showUpgrade","FormView","HeaderView","ImportDataView","formTemplate","fileExtensions","service","fileEnabled","headerView","_checkVisibility","_onFileChanged","_setValidFileExtensions","_onTextChanged","_hideTextError","setUpload","_hideFileError","_showFileError","_showTextError","_onSubmitForm","importType","service_item_id","_goToStart","ImportView","UploadModel","service_name","setFresh","_finish","canFinish","setPrivacy","_privacyModel","setGuessing","_guessingModel","finish","_checkState","ImportServiceView","ImportArcGISView","ImportTwitterView","File","GDrive","showAvailableFormats","Dropbox","separator","Box","fallback","Twitter","Mailchimp","itemName","Arcgis","Salesforce","_FORMATTERS","descriptionOpts","descriptionKeyValue","descriptionStr","smart_count","_onIntervalZero","_onIntervalHour","_onIntervalDay","_onIntervalWeek","_onIntervalMonth","_goToList","formatSize","s","checksum","ServiceItem","_DATASOURCE_NAME","method","version","urlVersion","baseUrl","coll","datasourceName","parse","ServiceUtilsFormat","formatDescription","ServiceListItemView","pluralize","_onSelectedItem","serviceTokenModel","serviceOauthModel","_serviceTokenModel","_serviceOauthModel","_checkToken","_getOauthURL","ServiceHeaderView","ServiceLoaderView","ServiceListView","ServiceSelectedFileView","ServiceTokenModel","ServiceOauthModel","ServiceCollection","WINDOW_INTERVAL","_onOauthChange","_openWindow","header","loader","_getFiles","open","setInterval","closed","clearInterval","twitterData","remaining","per","ceil","hardLimit","hard_limit","remainingFormatted","CreditsInfoView","DEFAULT_PER_VALUE","MIN_PER_VALUE","_disabled","_setModel","creditsInfo","getMaxCredits","DatesRangePickerView","TwitterCategoriesView","CreditsUsageView","_disabledDueLackOfCredentials","hasOwnTwitterCredentials","currentGMT","datepicker","creditsUsage","_getCategories","getCategories","category","terms","_getDates","_getMaxCredits","maxCredits","user_defined_limits","twitter_credits_limit","TwitterCategoryModel","TwitterCategoriesCollection","TwitterCategoryView","_MAX_CATEGORIES","_MAX_TERMS","_generateCategory","_addCategory","_manageCategories","_onCategoryChange","collection_size","nonFilled","categoryModel","_subviews","_removeCategory","_sortCategoryIndex","_onCategorySubmit","_onCategoryLimit","_onCategoryNoLimit","TERMS_CHARS","_MAX_COUNTER","_CHAR_MAP","counter","_setCounter","bindAll","_onInputChange","getModelData","ViewFactory","importViewTemplate","importTabViewTemplate","TabPaneView","TabPaneCollection","IMPORT_OPTIONS","TABS_PER_ROW","DEFAULT_IMPORT","ROW_WIDTH","_generateContent","_generateNavigationTabs","_setOption","maxPages","paneItems","importConfig","createButtonView","createByTemplate","pane","privacyModel","guessingModel","_setUploadModel","_tabPaneCollection","numTabs","_checkNavigationTabs","_moveToNextTabs","_moveToPrevTabs","_moveNavigationTabs","rowWidth","_checkGDriveImport","_setFailedTab","_checkDropboxImport","_checkBoxImport","_checkTwitterImport","canCreateTwitterDataset","_checkInstagramImport","featureEnabled","_checkSalesforceImport","_checkMailchimpImport","tabName","$tab","uploadModel","getUploadModel","_onTabChange","tabPaneModel","_updateImportOption","setActiveImportPane","tabModel","DatasetsView","ImportsView","_onChangeListing","paneModels","paneTabPaneView","paneModel","_preRender","$uInner","$filtersInner","showDatasets","createModelType","canCreateDataset","listingType","totalShared","selectedItemsCount","_selectedItems","hasDataLibrary","dataLibraryEnabled","_animate","isSearching","_focusSearchInput","_onChangeIsSearchEnabled","isSearchEnabled","_enableSearchUI","_cleanSearch","_$searchInput","_onSearchKeyDown","inLibrarySection","inDatasetsSection","hasDatasets","enable","_onDatasetsClick","_onSharedClick","_onLibraryClick","_onCreateEmptyClick","createFromScratch","_onSearchClick","_onCleanSearchClick","showLibrary","_submitSearch","htmlStr","showGuessingToggler","isGuessingEnabled","importState","getImportState","isUploadValid","isValidToUpload","customHosted","isTwitterDeprecatedForUser","_toggle","publicPrivacy","privatePrivacy","showPrivacyToggler","canChangePrivacy","canCreatePrivateDatasets","isPublic","nextPrivacy","canUpgrade","renderLoading","loadingTitle","_hasLoading","_loadingTitle","renderOpts","_hasRenderOpts","_renderOpts","_onConfirm","_renderLoadingView","_$content","_runAction","_onCancel","_renderErrorView","errorMessage","_errorTitle","VisMetadataModel","FooterView","templateError","templateLoading","saveMetadata","visDefinitionModel","isLocked","_visDefinitionModel","_isLocked","_visMetadataModel","attributions","visMetadataModel","footerView","onSaveAction","_onSave","onCloseAction","onSuccess","_onSuccessSave","onError","_onErrorSave","_getMetadataName","_getMetadataDescription","_getMetadataTags","_onBackFromError","_onSaveAction","_onCloseAction","_save","_close","templateForm","_addNameView","_addDescriptionView","_addSourceView","_addAttributionView","_addLicenseView","_addTagsView","_addTooltip","_addInputView","$view","_commitView","_buildLicenseOptions","emptyOption","_selectView","_descriptionView","_taglistView","_sanitizeName","_removeBinds","_nameView","_sourceInput","_attributionView","TITLE_SUFIX","successCallback","errorCallback","oldName","wait","_format","FormatView","MAX_SQL_GET_LENGTH","CSV_FILTER","FORMATS","fetcher","geomRequired","autoClose","_layerModel","layerModel","_filename","_queryGeometryModel","_renderFormats","_renderLoadingContent","geometry","isGeoreferenced","getSqlApiUrl","geomRestricted","_renderFormat","showError","_getFormat","_form","formatName","layer_id","table_name","from_view","_fromView","getBaseOptions","apiKey","getGeomFilteredSql","geom","_fetch","skipFields","_canHideColumns","columnNames","getColumnNames","getColumnType","location","serialize","_fetchGET","submit","getError","json","JSON","checkInterval","onload","check","fetchCSV","fetchSVG","_addTextareaView","_inputView","_textareaView","CLOSE_DELAY_MS","classes","escapeOptionsDisabled","_escapeOptionsDisabled","_breadcrumbsEnabled","_keepOpenOnRouteChange","keepOpenOnRouteChange","_delayDueToAnimation","ModalView","ModalViewModel","DESTROYED_MODAL_EVENT","isFunction","_modalView","_newModalView","onDestroyOnce","once","viewModel","_handleBodyClass","_destroyOnEsc","destroyOnEsc","bodyClass","ConfirmationView","IconView","onConfirm","_onConfirmCallback","onDismiss","_onDismissCallback","selectedPrivacyType","_privacyType","warningIcon","_onDismiss","ALL_OPTIONS","alwaysEnabled","cssClass","isVisualization","canSelectPremiumOptions","currentPrivacy","availableOptions","privacyOptions","PrivacyModel","PasswordModel","_deselectLastSelected","searchByPrivacy","selectedOption","passwordOption","password","classNames","canSave","isPassword","saveToVis","vis","callbacks","_attrsToSave","FAKE_PASSWORD","PrivacyWarningView","ModalsServiceModel","VisDefinitionModel","publishedOn","_mapcapsCollection","isPublished","_isPublished","_onUpdate","mapcapsURL","_shouldShowPrivacyWarning","_checkPrivacyChange","_createMapCap","newPrivacyStatus","confirmCallback","dismissCallback","privacyType","post","isPubliclyAvailable","TabPaneTemplate","PublishView","ShareView","PrivacyDropdown","PublishButton","ShareWith","UpgradeView","MODE_FULL","MODE_SHARE","MODE_PUBLISH","mapcapsCollection","isSimple","_hasTabs","hasShareStats","_hasShareStats","_hasOrganization","_makePublishView","_initTabsViews","_makeShareView","hasOrganization","_createPublishView","_createShareView","dropdown","publishButton","shareWith","upgradeView","privacyCollection","_privacyCollection","_isOwner","avatarClass","separationClass","_layerTabPaneView","currentUserId","organization","_organizationModel","_onDone","linkIconTemplate","embedIconTemplate","createIcon","embedURL","private","encodeURI","CreateShareOptions","ShareCollection","ShareItemView","shareOptions","_shareCollection","renderItemView","_renderItemView","_revampPrivacyOptions","ShareModel","browserDetect","PRIVATE_LABEL_TEMPLATE","isPrivate","_body","_link","_copy","_getButtonLabel","browser","link","copy","_onChangePrivacyClick","onChangePrivacy","clickPrivacyAction","_clickPrivacyAction","_acl","acl","people","_getPeople","avatar","hasAction","types","users","group","entity","PermissionView","_sortedCollection","_sortCollection","_sharePermissionModel","_renderOrganization","sharing","permission","hasReadAccess","noSharing","_organization","hasWriteAccessAvailable","_isVisualization","canChangeWriteAccess","canChangeReadAccess","role","_getRole","_currentUserId","viewer","UsersGroup","OPTIONALS_OPT","_name","_avatar","_role","_users","_description","_canChangeReadAccess","_hasReadAccess","_hasWriteAccessAvailable","_canChangeWriteAccess","_hasWriteAccess","_renderUsers","_isSelected","_onChangeWrite","p","_permission","revokeWriteAccess","grantWriteAccess","_onChangeRead","revokeAccess","grantReadAccess","_onHoverDisabledToggler","aclItem","findRepresentableAclItem","isOwn","_inheritedAccessTooltipText","currentTarget","_destroyTooltip","GrantableCollection","SearchPaginationView","_grantablesCollection","_searchPaginationView","listCollection","sharePermissionModel","_onBack","overwriteAcl","username","_username","UserView","MAX_USERS_TO_SHOW","_getRemainsPeople","_renderUser","avatar_url","CONTACT_LINK_TEMPLATE","contact","mail","syncModel","_syncModel","_tableName","isExternalSource","_getServiceURL","serviceName","serviceItemId","_obfuscatePassword","pattern","editorModel","_data","_changeStyle","isEditing","NotifierModel","findById","notification","_findNotificationByAttrs","Template","ActionView","closeTemplate","actionTemplate","notifierModel","_notifierModel","_delay","_autoClose","_onChangeStatus","actionable","getButton","isClosable","getStatus","getInfo","isActionable","_createActionView","_createCloseView","actionView","getAction","_actionHandler","_retriggerEvent","updateClosable","updateButton","updateStatus","setAction","updateInfo","NotifierItemView","_renderAllSubviews","rebindEvents","_renderSubview","_getDoneContainer","_getLoadingContainer","_removeSubview","subview","_getLoader","_anyNotificationLoading","any","NotifierView","NotifierCollection","manager","initialized","notifierView","__ENV__","getView","getCollection","getCount","getNotification","totalCount","_updateStateFetched","_updateStateError","PaginationSearchModel","renderNoResults","paginationTemplate","_paginationModel","_paginationSearchModel","_listCollection","_initPagination","showLoading","_fetchByPagination","_paginationView","_content","_searchInput","_makeNewSearch","stripHTML","_cleanSearchBtn","display_count","extras_display_count","url_to","pagesCount","isCurrentPage","urlTo","hasUrl","pagesToDisplay","rangeStart","_inLowRange","_inHighRange","_startOffset","_withExtraPages","_rangeEnd","pagesRelativeToCurrentPage","lastPage","extraCount","extraStartPages","extraEndPages","startPagesDiff","endPagesDiff","union","_highBoundary","navigateThroughRouter","router","currentPage","_paginate","MARGINS","initObserver","popup","onChangeMutation","reference","Manager","ref","emitter","repositionBinded","throttle","reposition","mutations","mutation","dh","refPosition","ph","onBottom","onTop","querySelector","privacyCTATemplate","disabledOptions","upgradeURL","PrivacyDialogView","PasswordDialogView","templateTabPane","ErrorDetailsView","PRIVACY_MAP","public","_onDocumentElementClicked","ownerName","_ownerName","_configPrivacyCollection","_configPanes","_canChangePrivacy","_hideDialog","isIndividualUser","isMap","hasRemainingPublicMaps","_customCollection","menuItem","_showPasswordDialog","_onToggleDialogClicked","_setPrivacy","_makePrivacyDialog","_makePasswordDialog","onBack","_showPrivacyDialog","onEdit","_setPassword","privacyStatus","_savePrivacy","_discardPrivacyChange","req","resp","responseText","previousPrivacy","_transformPrivacyOptions","renderOptions","Boolean","_showNoneDialog","_collectionPane","_isDialogVisible","_onMouseClick","_showDialog","_privacyTooltip","_getPrivacyInfo","privacyInfo","_maxScroll","_contentContainer","_applyScroll","_updateScrollWhenExist","suppressScrollX","destroyScroll","stackLayoutItems","stackLayoutItemsSize","_rememberStep","_triggerPositionChanged","nextPosition","prevPosition","goBack","_goBackToArguments","_lastStepArguments","StackLayoutModel","_onPositionChange","_genNewStackView","newPos","_removeOldStackView","flatten","oldView","_getCurrentView","nextView","MixedLabelView","ColorView","paneItem","selectedChild","RadioLabelView","LabelView","_disabledTabs","disabledTabs","_setSelected","getDefault","getDefaultName","getDisabledTabs","_defaultTab","isDisabledTab","disabledTab","_onChangeSelected","_initButton","_initTooltip","buttonTooltip","_buttonTooltip","_onButtonClicked","labelType","_getLabelType","customId","TabPaneItem","_tabPaneItemOptions","_createContentKey","createContentKey","_renderCollection","getSelectedTabPane","getTabPaneCollection","getTabPane","selectedTab","_selectedView","_renderTabPaneContentView","_renderTabPaneItemView","tabPaneItemView","tabPaneContentView","changeStyleMenu","cellTemplate","pointGeojsonParser","FORMATTED_TYPE_VALUES","simpleGeometry","setAttribute","_generateRowsHTML","l","_columnsCollection","_tableViewModel","isCustomQueryApplied","isGeometryColumn","_generateCellHTML","columnModel","formattedValue","TableBodyRowView","ContextMenuView","addTableRowOperation","removeTableRowOperation","editCellOperation","ConfirmationModalView","TablePaginatorView","tableBodyTemplate","tableNoRowsTemplate","EditorsServiceModel","EditorsModel","EDITORS_MAP","_editors","_closeEditor","_hideContextMenu","_destroyScrollBinding","isFetched","_rowsCollection","_renderNoRows","_renderBodyRow","_initPaginator","_renderQueryState","_onRemoveRow","querySchemaStatus","nodeReady","geometryStatus","rowsCollectionStatus","getStatusValue","customQuery","paginatorView","rowsCollection","tableViewModel","scrollToBottom","_scrollToBottom","_initScrollBinding","canHideColumns","resetFetch","_hasContextMenu","_menuView","_unhighlightCell","_highlightCell","$tableCellItem","$tableRow","_showContextMenu","modelCID","menuItems","_copyValue","_editCell","_addRow","destructive","_removeRow","isContextMenuVisible","isCellOptions","_onDblClick","_initEditorScrollBinding","_destroyEditorScrollBinding","_saveValue","newValue","_doCellEdition","$tableCell","$options","fetchRowIfGeomIsNotLoaded","cartodb_id","runAction","tbodyHeight","animate","EditorView","EditorViewModel","DESTROYED_EDITOR_EVENT","CONFIRMED_EDITOR_EVENT","_editorView","_newEditorView","_destroyOnClickOutside","destroyOnClickOutside","_onKeyPressed","_setFocus","_initDocumentBind","_destroyDocumentBind","_checkValidity","EditorBaseView","_onRadioChanged","EditorDateFormModel","isBoolean","TableHeadOptionsItemView","tableHeadOptionsItemTemplate","QueryColumnModel","addColumnOperation","renameColumnOperation","changeColumnTypeOperation","removeTableColumnOperation","isOrderBy","sortBy","_unhighlightHead","_highlightHead","elementIndex","sort_order","order_by","isCartoDBIDColumn","_startEditing","isLastColumns","_changeColumnType","_addColumn","_removeColumn","newType","oldType","isTypeChangeDestructive","_onAttributeDblClicked","_initRenameBinds","_destroyRenameBinds","_saveNewName","_finishEditing","newName","focusInput","_openSubContextMenu","_hideSubContextMenu","_subContextMenu","subContextClassName","isTypeChangeAllowed","_onAscClick","_onDescClick","TableHeadItemView","_lastHeadItemView","_renderColumnHead","_newColumn","_scrollToLeft","_focusLastHeadItem","speed","addColumn","addRow","cartodbId","new_name","old_name","templateLoader","QueryUtilsModel","_numRows","_queryUtilsModel","queryUtilsModel","subquery","fetchCount","numRows","_onRowAdded","_onRowRemoved","_onTablePageChange","rowsSize","maxRowsPerPage","DEFAULT_FETCH_OPTIONS","isNextAvailable","isPrevAvailable","_getData","exclude","_onPrevPage","_onNextPage","TableView","QueryColumnsCollection","TableNameUtils","_analysisDefinitionNodeModel","userName","getUsername","getQualifiedTableName","relativePositionated","analysisDefinitionNodeModel","tableView","_setOrderAndSort","hasCartodbId","resetFetchDefaults","TableViewModel","TableHeadView","TableBodyView","addTableRow","addTableColumn","nodeHasTradeArea","nodeHasSQLFunction","queryRowsCollection","queryGeometryModel","_tableModel","shouldFetch","_fetchRowsData","tableElement","_setDisableState","_onChangeQueryOrStatus","isSync","getSyncModel","attrsChanged","changeComeFromSortOrOrder","tableHeadView","tableBodyView","schemaStatus","canFetch","getColumnsCollection","fade","_mouseEnterAction","mouseEnterAction","_mouseLeaveAction","mouseLeaveAction","_tipsyOpenedManually","_initTipsy","getOptimalGravity","gravityConfiguration","preferredGravities","margin","getTitleFromDataAttribute","tipsy","setOffset","getElement","browserWindow","tooltipElement","tooltipContainer","tooltipContainerBoundingRect","gravityOptions","viewportBoundaries","pageXOffset","tooltipBoundaries","tooltipBodyGravity","optimalGravity","tooltipFitsPosition","isTooltipInsideViewport","getTooltipBodyGravity","getAttribute","removeData","viewportBound","tooltipBound","nonCollisioningEdges","edge","_onChange","helpTooltip","applyButton","cancelButton","trackModel","_trackModel","_clearModel","clearModel","_applyStatusModel","applyStatusModel","_overlayModel","overlayModel","canClear","canUndo","_canUndo","canRedo","_canRedo","canApply","_checkButtonsStyle","undoTooltip","redoTooltip","_applyStatusChanged","_onUndoClick","undo","_onRedoClick","redo","_onApplyClick","onApplyClick","_onClearClick","clearButton","onClearClick","editing","createByHTML","viewOpts","createViewFns","all","createItemView","InfoboxView","_createControlView","createControlView","createActionView","infoboxModel","infoboxCollection","_setStyleMenu","controlView","_info","_controls","_actions","uploadStates","PermissionModel","OWN_ATTR_NAMES","access","READ_ONLY","READ_WRITE","camshaftReference","QueryGeometryModel","QuerySchemaModel","nodeIds","QueryRowsCollection","fetchAllQueryObjects","layerColors","modelOpts","simpleGeom","simple_geom","_onGeometryTypeChanged","fetchQueryObjects","sourceNames","merge","getSourceNamesForAnalysisType","parsedParams","params","sourceName","parsedOptions","analysisParams","paramsforJSON","paramsForType","includeParamInJSON","optional","stringify","optionsAttrs","skipOptions","isNew","canBeDeletedByUser","hasPrimarySource","hasFailed","isDone","newId","linkedListBySameLetter","letter","getPrimarySource","isValidAsInputForType","analysisType","isValidInputGeometryForType","containsNode","other","_sourcesContains","hasSecondarySource","getSecondarySource","_getPrimarySourceId","primarySourceId","secondarySourceId","sourceIds","sourceId","getDefaultQuery","_sourceNames","changeSourceIds","currentId","silenty","getColor","getColorForLetter","getStyleHistoryForLayer","styleHistory","primarySource","secondarySource","primarySourceName","AnalysisDefinitionNodeModel","TableModel","ready","tableData","getDefaultSQL","getOwnerName","isTableReadOnly","hasCustomQuery","fetchTable","setTableName","fileAttribute","progress","error_code","get_error_text","substr","upload","xhr","stopUpload","abort","AssetModel","NetworkResponseInterceptor","_originalAjax","_successInterceptors","_errorInterceptors","_urlPatterns","onRequestStart","_onRequestStart","addURLPattern","addSuccessInterceptor","interceptorFn","addErrorInterceptor","_shouldListenToRequest","patternChecks","requestUrl","requestOptions","interceptErrorFn","_applyErrorInterceptors","interceptSuccessFn","_applySuccessInterceptors","textStatus","errorThrown","interceptorFunction","LOGIN_ROUTE","SESSION_EXPIRED","MFA_REQUIRED","MFA_ROUTE","MAINTENANCE_MODE","MAINTENANCE_MODE_ROUTE","LOCKOUT","LOCKOUT_ROUTE","subdomainMatch","redirectRoutes","redirectRoute","URLFunctions","redirectTo","getRedirectURL","currentURLOrigin","route","newURL","protocol","_xhr","sync","always","Poller","ImportModelPoller","POLLING_INTERVAL","POLLING_INTERVAL_MULTIPLIER","POLLING_REQUESTS_BEFORE_INTERVAL_CHANGE","numberOfRequests","stopWhen","SynchronizationModel","idAttribute","poller","urlRoot","_checkQueueId","createImport","_prepareData","pollCheck","create_vis","type_guessing","content_guessing","remote_visualization_id","table_copy","_createSyncImport","_synchronizationModel","_setErrorState","_createRegularImport","imports","destroyCheck","ImportModel","_uploadModel","_importModel","import","_checkStatus","_onImportChange","_onUploadChange","_onIdChange","getImportModel","pause","stopImport","hasCompleted","getWarnings","importedVis","derived_visualization_id","_getMapVis","_getDatasetVis","getNumberOfTablesCreated","_getServiceName","isTwitterImport","isCartoImport","_getDisplayName","derivedVisId","_createVis","table","stepModel","getRedirectUrl","viewUrl","polling","autoStart","_scheduleFetch","_continuePolling","getVersion","DefaultCartography","SOURCE_NAMES_MAP","DEFAULT_MISSING_PARAM_VALUES","NaN","hasType","analyses","formAttrs","parsedAttrs","expectedValues","getDefaultCartoCSSForType","simpleGeometryType","validGeometries","getValidInputGeometriesForType","geometries","base_url","modelName","defaultVersion","_getSqlApiBaseUrl","dataServiceEnabled","dataServices","isHosted","getAttributes","_generateClassName","urlTemplate","order","parent_id","layerOptions","validateTemplateURL","subdomains","Image","onerror","src","CustomBaselayerModel","isCustomCategory","hasCustomBaseLayer","customBaseLayer","errorParse","_nodeDefModel","_success","measurement","normalize","timespan","queryOptions","BaseCollection","FILTERS_QUERY_WITH_REGION","subsection_id","subsection_name","num_measurements","MEASUREMENTS_QUERY_WITH_REGION","MEASUREMENTS_QUERY_WITH_FILTERS","MEASUREMENTS_QUERY_SEARCH","MEASUREMENTS_QUERY_SEARCH_AND_FILTERS","numer_id","numer_name","numer_description","numer_type","aggregate","numer_aggregate","numer_tags","edition","MAP","syncAbort","UserModel","GroupModel","total_entries","grantables","display_name","InfowindowDefinitionModel","template_name","latlng","maxHeight","autoPan","visibility","alternative_names","headerColor","TEMPLATES","infowindow_light","infowindow_dark","infowindow_color","infowindow_header_with_image","custom_infowindow_light","custom_infowindow_dark","custom_infowindow_color","custom_infowindow_header_with_image","_transformTemplate","setTemplate","templateName","isEmptyTemplate","fieldCount","hasTemplate","setDefault","SYSTEM_COLUMNS","clearFields","saveFields","restoreFields","whiteList","_setFields","containsField","fieldName","getFieldProperty","k","setFieldProperty","_cloneFields","sortFields","_addField","dfd","addField","removeField","getAlternativeName","setAlternativeName","alternativeName","alternativeNames","getFieldPos","MAX_VALUE","unsetTemplate","getTemplate","isCustomTemplate","vertical_offset","horizontal_offset","tooltip_dark","tooltip_light","custom_tooltip_dark","custom_tooltip_light","COLORS","letterNumber","colorIndex","StyleDefinitionModel","StyleCartoCSSModel","DataSQLModel","layerTypesAndKinds","InfowindowModel","TooltipModel","ATTR_NAMES","tile_style","cartocss","infowindow","infowindowModel","tooltipModel","autoStyle","styleModel","style_properties","cartocssModel","history","cartocss_history","tile_style_history","sql_history","_onPosibleLayerSchemaChanged","isAggregatedType","isAnimation","autoStyleAttrs","shouldPreserveAutoStyle","resetPropertiesFromAutoStyle","defaultAttributes","getKind","infowindowData","tooltipData","isAutogenerated","getHistory","getNumberOfDataLayers","isDataLayer","_canBeFoldedUnderAnotherLayer","_isAllDataLayersDependingOnAnyAnalysisOfThisLayer","isOwnerOfAnalysisNode","nodeModel","ownedPrimaryAnalysisNodes","getAnalysisDefinitionNodeModel","getTableName","findAnalysisDefinitionNodeModel","ignoreSchemaChange","resetStyles","toggleVisible","toggleCollapse","hasAnalyses","getNumberOfAnalyses","hasAggregatedStyles","analysisNode","getColumnNamesFromSchema","_getQuerySchemaModel","layerType","isCartoDBType","isTorqueType","isTorqueLayer","isAutoStyleApplied","thisNodeDefModel","otherNodeDefModel","lastNode","linkedNodesList","getAllDependentLayers","layersCount","layerDefinitionsCollectionModels","layer","dependentAnalysis","matchesAttrs","otherAttrs","isTiledType","isGMapsBase","baseType","isPlainType","hasGeocodingAnalysisApplied","_hasAnyAnalysisApplied","isEmptyAsync","hasAnyAnalysisApplied","hasCustomQueryApplied","Promise","isDataFiltered","canBeGeoreferenced","emptyPromise","geomPromise","hasValueAsync","hasGeom","fetchQueryRowsIfRequired","geomHasValue","isUnavailable","PLAIN","CARTODB","TILED","TORQUE","GMAPSBASE","WMS","KIND_TO_TYPE_MAP","isKindDataLayer","isTypeDataLayer","LEGENDS_METADATA","bubble","legendType","choropleth","custom_choropleth","_orgId","_ownerModel","getOwnerId","getOwnerEmail","isOrgAdmin","u","OrganizationModel","ACLItemModel","_generateOwner","_generateAcl","_grantAccess","cleanPermissions","hasAccess","_canChangeAccess","isBuilder","representableAclItem","_ownAclItem","getUsersWithAnyPermission","_hasTypeUser","_getEntity","isSharedWithOrganization","_hasTypeOrg","otherPermission","_newAclItem","checkList","_findMostPrivilegedAclItem","fnName","_isOrganization","object","_organizationAclItem","org","_mostPrivilegedGroupAclItem","groups","iteratee","STATUS","MAX_GET_LENGTH","MAX_REPEATED_ERRORS","repeatedErrors","_onStatusChanged","_onReadyChanged","isInInitialStatus","isErrored","errored","unavailable","isInFinalStatus","finalStatuses","hasQuery","isReady","unfetched","hasRepeatedErrors","_addChangeListener","_removeChangeListener","_httpMethod","_getSqlApiQueryParam","_incrementRepeatedError","_resetRepeatedError","DEACTIVATE_MATRIX","DESTRUCTIVE_MATRIX","NON_EDITABLE_ATTRIBUTES","cartodb_type","deactivated","getTime","THE_GEOM_NOT_FOUND_ERROR","PARAMS","GEOMETRIES","LINE","POINT","originalError","geomColumnName","query_errors","row","the_geom","hasValue","geom_column","isPolygon","_permissionModel","ownerUsername","_onError","isGeomLoaded","previousAttributes","__id","uniqueId","QueryRowModel","WRAP_SQL_TEMPLATE","_repeatedErrors","statusModel","_onQuerySchemaQueryChange","_onColumnsCollectionReset","_geometryColumnSQL","_getWrappedSQL","excludeColumns","selectedColumns","previousStatus","_parseWithID","DEFAULT_TABLE_QUERY_TEMPLATE","WRAPPED_SQL_QUERY_TEMPLATE","_setStatusPerQueryValue","hasDefaultQueryFor","defaultQueryForTableName","queryErrors","hasDifferentSchemaThan","schemaArray","columnObj","host","bucket","attributeName","MULTIPLIER","INTERVAL","SYNC_GAP","POLLING_GAP","run_at","ran_at","retried_times","syncNow","pollTimer","request","isSyncing","canSyncNow","ranAt","gap","linkToTable","ColumnModel","TableColumnsCollection","getSimpleGeometryType","SyncModel","table_visualization","geometry_types","synchronization","columnsAttrs","getUnqualifiedName","tk","ownerModel","getUnquotedName","geomTypes","uniq","BackboneUndo","MAXIMUM_STACK_LENGTH","_undoManager","undoManager","maximumStackLength","register","_trackEvents","_addMethods","stopTracking","_addHistory","startTracking","eventType","after","before","undoTypes","magicFusionIndex","pointer","isAvailable","getUndoHistory","_validate","isToDateValid","UserGroups","CustomBaselayersCollection","email","layers","isViewer","hasRemainingByteQuota","hasRemainingTableCount","proUsers","updateTableCount","currentTableCount","hasCreateMapsFeature","getTotalPublicMapsCount","totalPublicPrivacyMapsCount","totalPasswordPrivacyMapsCount","totalLinkPrivacyMapsCount","twitter","customized_config","visModel","private_tables","hasAccountType","accountType","featureFlags","upgradeContactEmail","nameOrUsername","fullName","lastName","concurrent_imports","getSchemaName","currentUser","total_user_entries","fetchUsers","promises","PRIVACY_OPTIONS","visChanges","builderURL","vizjsonURL","stateURL","recordChange","resetChanges","datasetURL","VisualizationTableModel","VisualizationModel","exclude_shared","exclude_raster","_stats","res","visualizations","content_type","liked","deepInsights","isDatasets","isMaps","isDeepInsights","OPTIONAL_OPTS","_getTableName","_getColumns","_getKeywords","_tokens","_memo","_make","UndoManager","_history","_generateHistory","SimpleStyleDefaults","generateAttributes","_getStyleTypeAttrs","_getFillAttrs","_getStrokeAttrs","blending","_getAggrAttrs","_getAnimatedAttrs","animated","overlap","duration","trails","resolution","aggregation","_getLabelsAttrs","fill","ag_Sunset","DefaultFormValues","strokeAttrs","stroke","cloneObject","Emrld","StyleDefaults","fillAttrs","aggrAttrs","labelsAttrs","HexabinsAggregationDefaults","StylesFactory","StyleConstants","autogenerated","setDefaultPropertiesByType","_stylesPreAutoStyle","removeStylesPreAutoStyle","setPropertiesFromAutoStyle","definition","widgetId","extendAutoStyleProperties","newProperties","quotedDomain","static","currentAttrs","styleType","silently","getDefaultStyleAttrsByType","setFill","simpleFill","applyLastState","getAggregationTypes","isHeatmap","hasNoneStyles","canApplyAutoStyle","getColumnsUsedForStyle","fillColumns","_getFillColumns","strokeColumns","_getStrokeColumns","labelColumns","_getLabelColumns","aggregationColumns","_getAggregationColumns","HeatmapDefaults","AnimationDefaults","SquareAggregationDefaults","RegionsAggregationDefaults","STYLE_MAP","tooltipTranslationKey","labelTranslationKey","checkIfValid","defaultStyles","StyleDefaultsKlass","getStyleTypes","currentType","getFormTemplateByType","getSourceNode","someNode","predicate","hasAnalysisType","hasTradeArea","hasSQLFunction","ua","navigator","userAgent","tem","M","appName","appVersion","CartoColors","Tags","COLORBLIND","DIVERGING","QUALITATIVE","QUANTITATIVE","getColorRamps","colorsNumber","rampColors","getColorRampsByTag","getColorblindRamps","getDivergingRamps","getQuantitativeRamps","DEFAULT_ERROR_MSG","fetchModel","subscribeToFinalStatus","schemaModelPromise","geometryModelPromise","DEFAULT_VALUES","MIN_GAP","MIN_HEIGHT","MIN_WIDTH","MagicPositioner","$parentView","parentViewHeight","parentViewWidth","offsetX","offsetY","elementWidth","elementHeight","cssProps","isLinuxMiddleOrRightClick","isMacCmdKeyPressed","metaKey","isCtrlKeyPressed","ctrlKey","navigate","geojson","coordinates","COUNT_SQL_TEMPLATE","_subquery","_getCountSQL","checkAndBuildRequiredOpts","actualOpts","requiredOpts","parseQuery","altersSchema","_removeLineBreaks","inOrganization","getDefaultSQLFromTableName","tablename","_getUnquotedName","_quoteIfNeeded","VALID_IDENTIFIER","schemaPrefix","isSameTableName","firstTableName","secondTableName","firstParts","_getTableNameParts","secondParts","urlregex","bytes","pow","num","parts","property","padZero","digit","String","componentToHex","shortRegex","roundToTwo","$0","$1","escapeHTML","escape","sanitizeString","isNumeric","formatDecimalPositions","converted","abs_v","removeNewLines","replaceLastSpaceWithNbsp","nbsp","lastSpace","suffix","isValidEmail","EMAIL_REGEX","NOTIFICATION_ERROR_TEMPLATE","NOTIFICATION_PREFIX","_notificationId","_addOrUpdateNotification","notificationAttrs","_transformErrors","notificationId","_getNotification","_addNotification","SOURCE_ID_REGEX","seqChange","seq","sequence","changeLetter","newLetter","PublicClient","AuthenticatedClient","CONFIG_PATH","vizUrl","VIZ_API_PATH","uriParams","paramsToURI","assign","mapId","MAPS_API_PATH","payload","put","delete","itemId","URIParts","URLParameters","perPage","include_shared","encodeURIComponent","FormData","doNoSetDefaultContentType","processData","StaticConfig","apiURI","additional","headers","DEFAULT_PARAMS","checkParams","OBJECT_TYPE","relativeURI","jqXHR","regExp","href","path","uriParts","contentType","addHeaders","getAssetsBaseUrl","makeAbsoluteURI","makeRelativeURI","IconSelectorView","acceptedExtensions","imageKind","imageURLAttribute","_destroyFileInput","_renderModel","inputName","avatarURL","avatarAcceptedExtensions","_formatAcceptedExtensions","_renderFileInput","L","NEW_YORK","basemap","zoomControl","minZoom","maxZoom","scrollWheelZoom","setView","dragging","touchZoom","doubleClickZoom","attributionControl","setPrefix","devicePixelRatio","urlTemplate2x","tileLayer","attribution","addTo","google","maps","Map","center","lat","lng","zoom","draggable","scrollwheel","panControl","streetViewControl","mapTypeControl","mapTypeId","MapTypeId","ROADMAP","styles","featureType","elementType","stylers","logoTemplate","dropdownLinkTemplate","SettingsDropdownView","BreadcrumbsDropdown","UserNotificationsView","_renderBreadcrumbsDropdownLink","_renderNotifications","_renderLogoLink","_stopLogoAnimation","_onCollectionError","_startLogoAnimation","breadcrumbTitle","dropdownEnabled","isBreadcrumbDropdownEnabled","userNotifications","organizationNotifications","homeUrl","dashboard","googleEnabled","_createSettingsDropdown","_setupDropdown","horizontalOffset","_createBreadcrumbsDropdown","breadcrumbsDropdownOffset","dropdownView","_closeAnyOtherOpenDialogs","_previousDropDown","AdminDropdownMenu","dashboardUrl","datasetsUrl","datasets","deepInsightsUrl","mapsUrl","avatarUrl","lockedDatasetsUrl","lockedItems","lockedMapsUrl","isDisplayingDeepInsights","isDisplayingDatasets","isDisplayingMaps","isDisplayingLockedItems","_navigateToLinksHref","_renderDropdown","dropdown_content","unreadItems","UserNotificationModel","OrganizationNotificationModel","_apiKey","markAsRead","read_at","opened","UserNotificationsCollection","NotificationsDropdown","dropdownTemplate","LocalStorage","tryTrial","limitsExceeded","closeLimits","upgradedMessage","trialEndsSoon","localStorage","_generateCollection","_user","notificationsCount","_onUserChange","userUrl","comHosted","remainingQuota","publicProfileUrl","publicProfile","bytesQuota","userType","trialEnd","iconFont","severity","organization_notifications","html_body","_openNotifications","_handleClick","_onDropdownHidden","notificationType","DropdownAdminView","shortDisplayName","accountTypeDisplayName","displayName","usedDataBytes","quotaInBytes","usedDataPct","progressBarClass","usedDataStr","availableDataStr","showUpgradeLink","apiKeysUrl","apiKeys","organizationUrl","accountProfileUrl","accountProfile","logoutUrl","logout","orgDisplayEmail","display_email","engineEnabled","engine_enabled","mobileAppsEnabled","mobile_sdk_enabled","passwordNeeded","_onClickDelete","deletion_password_confirmation","_client","deleteUser","_handleError","_onSuccess","_closeDialog","jsonData","_setHref","logout_url","_onFormError","DropdownBaseView","marginTop","verticalPosition","speedIn","openAt","horizontalPosition","modelView","speedOut","DEFAULTS","verticalOffset","_keydown","isTarget","targetPos","targetWidth","targetHeight","shouldDisplay","iconURL","iconAcceptedExtensions","$file","filestyle","buttonText","iconUpload","formattedExtensions","regular","cdn","authTokens","load","_startLoader","_loadFromVisId","_generateImageTemplate","_isHTTPS","cdnConfig","_config","mapsApiResource","_mapsApiResource","tpl","_generateAuthTokensParams","loadURL","fadeIn","_stopLoader","$error","img","IndustriesDropdown","_createDropdown","userSettingsTemplate","bytesToSize","isCartoDBHosted","profileUrl","pathname","accountUrl","accountSettings","connectedAppsUrl","connectedApps","planUrl","getPath","_isConfirmDisabled","isConfirmDisabled","_okButton","_toggleConfirmButton","passwordInput","passwordValue","_onPasswordTyped","_onEnterPressed","tabs","activeTab","activePane","addTab","debug","insertAfter","getPreviousPane","panes","getNextPane","getPane","vid","getActivePane","removeTabs","removeTab","vid_old","activated","tab","userAccount","_upgradeUrl","trialDays","_trialDays","closeToLimits","isCloseToLimits","upgradeableWithoutContactingSales","isEnterprise","quotaPer","BreadcrumbDropdown","_createBreadcrumbDropdown","horizontal_position","assetsVersion","_assetsVersion","googleTagManagerId","hubspotIds","hubspotToken","intercomAppId","intercomEnabled","trackjsAppKey","trackjsCustomer","trackjsEnabled","fullstoryEnabled","fullstoryOrg","userEmail","userAccountType","userCreatedAtInSeconds","userJobRole","userInTrialPeriod","getHost","currentHost","urlError","originalSync","absoluteUrl","surrogateKeys","cachedSync","invalidateSurrogateKeys","currentSync","withCORS","crossDomain","xhrFields","withCredentials","namespace","surrogateKey","session","user_data","namespaceKey","_keys","setItem","invalidate","cache","defer","cached","cachedValue","delayedSaveSync","dsync","saveAbort","_saving","ImportsCollection","pollingsTimer","showGeocodingDatasetURLButton","showSuccessDetailsButton","geocodingsPolling","importsPolling","importsCollection","startPollings","_onImportsStateChange","getTotalFailedItems","failedItems","removeImportItem","addImportItem","canAddImport","canImport","getTotalImports","getTotalPollings","stopPollings","BackgroundPollingModel","importsModel","_shouldRedirect","_redirectTo","allImportsCompletedOrFailed","getCompletedItemsCount","VERSION","modules","REPORT_ERROR_URL","ERROR_TRACK_ENABLED","getSqlApiBaseUrl","getMapsApiHost","mapsApiTemplate","setUrlVersion","prefixUrl","prefixUrlPathname","prefix","getMapsResourceName","DashboardVisUrlModel","DashboardDatasetsUrlModel","dataLibrary","urlToPath","UrlModel","DashboardUrlModel","DashboardVisUrl","sharedItems","likedItems","DatasetUrlModel","GroupUsersCollection","getModelType","User","addInBatch","userIds","_batchAsyncProcessUsers","removeInBatch","ids","password_confirmation","_checkFinish","setUrlRoot","ImportsModel","finished","completedItems","getFailedItemsCount","MapLayer","TILED_LAYER_TYPE","CARTODB_LAYER_TYPE","TORQUE_LAYER_TYPE","LayersCollection","_assignIndexes","layersByType","lastOrder","sortedTypes","j","LikeModel","likeable","likes","_onSaveError","toggleLiked","newByVisData","vis_id","MapModel","_fetchLayers","MapUrlModel","newGroupById","OrganizationUsersCollection","GrantablesCollection","OrganizationGroupsCollection","OrganizationUrl","admin_email","collectionOpts","_setOrganizationOnModel","containsUser","OrganizationUrlModel","_DEFAULT_EXCLUDE_CURRENT_USER","_excludeCurrentUser","excludeCurrentUser","restoreExcludeCurrentUser","SlideTransition","_X","_INTERVAL","_STATES","TableDataCollection","RowModel","WKT","safeTableNameQuoting","cartoMetadataStatic","_ADDED_ROW_TEXT","_ADDING_ROW_TEXT","_GEOMETRY_UPDATED","initOptions","_fetching","pages","newPage","gt","addGeomColumnType","getGeomType","filter_column","filter_value","opt","changingPage","_coll","modify_rows","affected_rows","_schemaFromQueryFields","_createUrlOptions","wrappedSQL","fetchGeometry","select_columns","getSQL","sqlApiUrl","alterTableData","query_schema","isFetchingPage","loadPageAtTop","loadPageAtBottom","rowspp","max_items","shift","notice","newRow","_saved","getRow","no_add","getRowAt","deleteRow","row_id","quartiles","nslots","tmpl","_sqlQuery","slots","equalInterval","_quantificationMethod","functionName","distinct","simplify_fn","discreteHistogram","nbuckets","reached_limit","date_histogram","agg_array","buckets","hist","bounds","upper","lower","tz","bucket_size","histogram","jenkBins","headTails","quantileBins","categoriesForColumn","geometryBounds","lon0","maxx","lat0","maxy","lon1","minx","lat1","miny","minlat","maxlat","minlon","maxlon","clampNum","_previousAttributes","isInSQLView","schemaFromData","originalTableSchema","sortSchema","geometryTypeFromGeoJSON","geo","geometryTypeFromWKT","wkt","geometryTypeFromWKB","wkb","typeMap","bigendian","getGeometryTypes","geoType","RESERVED_COLUMNS","_GEOMETRY_TYPES","user_name","sqlApi","no_geom","containsColumn","skipfields","isGeometryGeoJSON","column_types_WKT","hasGeometry","getFeatureType","isReservedColumn","getCell","byBaseUrl","_joinArgumentsWithSlashes","UserUrlModel","tables","setGroups","setOrganization","isAuthUsernamePasswordEnabled","hasCreateDatasetsFeature","canAddLayerTo","getDataLayers","dataLayers","getMaxLayers","max_layers","getOrganizationName","getOrgName","getMaxLayersPerMap","equals","otherUser","is_org_admin","needsPasswordConfirmation","usedQuotaPercentage","assignedQuotaInRoundedMb","assignedQuotaPercentage","getGoogleApiKey","hasGoogleMaps","showGoogleApiKeys","getSchema","getAuthToken","btoa","VisualizationOrderModel","CartoTableMetadata","bindMap","INHERIT_TABLE_ATTRIBUTES","visualization","transition","like","_bindMap","_fetchMap","transition_options","stats","related_tables","getLikesModel","source_visualization_id","tableMetadata","sharedWithEntities","_metadata","_PREVIEW_TABLES_PER_PAGE","_TABLES_PER_PAGE","_PREVIEW_ITEMS_PER_PAGE","_ITEMS_PER_PAGE","default_options","tag_name","_checkPage","getTotalPages","urlParams","slides","total_shared","total_likes","getAssetsVersion","vars","pair","assetVersion","CartoConfig","user_frontend_version","dataAssetsHost","asset_host","assetsBaseUrl","app_assets_base_url","getAssetsUrl","BytesToSize","UNIT_SUFFIXES","decimals","LocalStorageWrapper","searchTerm","wholeArray","ConfirmPasswordModal","PasswordValidatedForm","formSelector","saveButton","passwordConfirmationNeeded","onPasswordTyped","addPasswordToForm","showPasswordModal","modalService","doNotSubmit","singular","plural","prefixWithCount","retrigEvent","_onWindowScroll","_topBoundary","priorities","priority","prioA","prioB","alterTable","CartoTableData","TableSynchronizationModel","retrigger","currentLoading","_TEXTS","columnDeleted","columnDeleting","columnAdded","columnAdding","hiddenColumns","_prepareSchema","sqlView","isSyncChanged","no_data_fetch","stats_geometry_types","setReadOnly","columnNamesByType","statsGeomColumnTypes","geometryTypes","_map","nonReservedColumnNames","columnTypes","deleteColumn","renameColumn","deactivateMatrix","destructiveMatrix","changeColumnType","saveNewColumnType","originalData","bindData","bindedReset","useSQLView","dataModel","old_success","linkToInfowindow","_hash","hash","current_schema_key","previous_schema_key","mergeFields","removeMissingFields","hasTheGeom","currentSchema","fetchGeoreferenceStatus","geoColumns","geometryTypeChanged","geoTypes","prevGeoTypes","duplicate","importModel","changes","checkImportModel","newTable","dependentVisualizations","createFromQuery","carto","createDefaultFallbackMap","createVis","_createVisMap","_createFallbackMap","vizJson","authToken","searchControl","layer_selector","logo","mobile_layout","legends","fullscreen","no_cdn","fallbackBaselayer","isAllowed","defaultParams","only_liked","mine","favorited","linkPrivacy","passwordPrivacy","allowedFilters","includes","isSharedWithMe","getURL","getThumbnailUrl","visualizationData","loggedUserBackboneModel","loggedUserId","isHTTPS","thumbnailOptions","auth_tokens","interpolateTemplateUrl","visualizationId","Vue","directive","binding","vnode","clickOutsideEvent","expression","addClickEvent","passive","ACTIVE_LOCALE","Locale","Polyglot","overrideTranslationStrings","en","polyglot","locale","phrases","use","VueI18n","i18n","messages","BackboneCoreModels","install","mixin","beforeCreate","$cartoModels","CARTOData","ConfigModel","configureUserModel","backgroundPollingModel","backgroundPolling","userData","UserGroupsCollection","createModalModel","handlers","createOAuth","updateOAuth","regenerateCredentials","fetchFunctionName","rootState","createApp","updateApp","regenerateClientSecret","fetchCategories","fetchCountries","fetchDatasets","setURLOptions","clearList","requestDataset","PATH","country","order_direction","orderOptions","hubspot_id","form_id","getFormData","last_name","job_role","company","phone","deleteLike","fetchVisualizations","resetFilters","setResultsPerPage","updateVisualization","currentLikeStatus","dispatch","visualizationAttributes","parameters","getVisualization","orderDirection","visualizationOptions","root","Vuex","storeOptions","CartoNode","getters","catalog","notifications","recentContent","oAuthApps","Store","AppsMutations","AppsActions","namespaced","computed","setApps","setRequestError","setFetchingState","revoke","revokeOAuthApp","addApp","updateOAuthApp","deleteApp","CARTOUserData","default_fallback_basemap","isFirstTimeViewingDashboard","is_first_time_viewing_dashboard","url_prefix","plan_url","CatalogActions","CatalogMutations","countries","numPages","resultsPerPage","setDatasets","setCategories","setCountries","setPagination","setOrder","orderDatasets","VisualizationActions","VisualizationMutations","isFiltered","filterType","metadata","setFilterType","setVisualizations","updateNumberLikes","Filters","with_dependent_visualizations","featuredFavoritedMaps","setFeaturedFavoritedMaps","fetchMaps","favoritedParams","filtersDefaultParams","setNotifications","fetchNotifications","getConfig","unfiltered_organization_notifications","markNotificationsAsRead","nowString","toISOString","notificationCopy","updateNotification","hasRecentContent","setRecentContent","results","numResults","requestParameters","updatePage","section","updateSearchTerm","requestType","setMaps","setTags","resetState","doSearch","searchParameters","changeSectionPage","pageOptions","sectionCapitalized","fetchTags","getTags","hasEngine","isNotificationVisible","userNotification","getPublicMapsCount","getPublicMapsQuota","isOutOfPublicMapsQuota","getDatasetsCount","getDatasetsQuota","isOutOfDatasetsQuota","isOrganizationUser","remaining_byte_quota","link_privacy_map_count","password_privacy_map_count","public_privacy_map_count","public_map_quota","table_count","table_quota","publicMapsCount","publicMapsQuota","datasetsCount","datasetsQuota","setUserData","setOrganizationNotifications","setShowNotification","newTableCount","updateData","resetOrganizationNotifications","hideUserNotification","apps","isOAuthAppPresent","orderAsc","orderDesc","orderByDirection","visualizationsData","total_locked","isVisualizationPresent","getCARTOData","deepObjectExtend","sources","storageAvailable","storage","DOMException","toObject","finalObject","currentElement"],"mappings":"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AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,OAAO;AACP;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;;;;;;;;;;;;AC9KA,gBAAgB,mBAAO,CAAC,8EAAc;AACtC,QAAQ,mBAAO,CAAC,2DAAY;;AAE5B;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;;AAEA;;AAEA;AACA,cAAc,KAAK;AACnB;AACA;AACA;AACA,GAAG;;AAEH;AACA,cAAc,IAAI;AAClB;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,OAAO;AACP,GAAG;;AAEH;AACA,cAAc,MAAM;AACpB;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,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CnE,yBAAyB,mBAAO,CAAC,8GAAgC;AACjE,2BAA2B,mBAAO,CAAC,kHAAkC;AACrE,wBAAwB,mBAAO,CAAC,4GAA+B;AAC/D,eAAe,mBAAO,CAAC,6FAAyB;AAChD;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA,CAAC;;;;;;;;;;;;ACnMD,QAAQ,mBAAO,CAAC,oDAAQ;AACxB,eAAe,mBAAO,CAAC,iFAAoB;AAC3C,eAAe,mBAAO,CAAC,6EAAiB;AACxC,4BAA4B,mBAAO,CAAC,sGAA4B;AAChE,wBAAwB,mBAAO,CAAC,4FAAuB;AACvD,2BAA2B,mBAAO,CAAC,kGAA0B;;AAE7D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;ACxFD;AACA,aAAa,mBAAO,CAAC,8DAAc;AACnC,eAAe,mBAAO,CAAC,4DAAe;AACtC;AACA;AACA;AACA,CAAC;AACD;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;AClIA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B,SAAS,mBAAO,CAAC,mCAAI;AACrB,aAAa,mBAAO,CAAC,+CAAQ;;AAE7B;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACnHA;AACA;AACA,mBAAmB,mBAAO,CAAC,8FAAwB;AACnD;;;;;;;;;;;;ACHA,QAAQ,mBAAO,CAAC,2DAAY;;AAE5B;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;;;;;;;;;;;;ACpCA,QAAQ,mBAAO,CAAC,2DAAY;;AAE5B;AACA;AACA;;;;;;;;;;;;ACJA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY,IAAI;AAChB,aAAa,IAAI;AACjB;AACA;AACA;AACA;AACA,mBAAmB;AACnB,GAAG;;AAEH;AACA;;;;;;;;;;;;ACdA,QAAQ,mBAAO,CAAC,2DAAY;;AAE5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,eAAe;AAC5B,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACzCA,aAAa,mBAAO,CAAC,+CAAQ;AAC7B,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;;;;;;ACjBA,QAAQ,mBAAO,CAAC,2DAAY;;AAE5B;AACA;AACA;;;;;;;;;;;;ACJA,QAAQ,mBAAO,CAAC,oDAAQ;;AAExB;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;;;;;;ACnBA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B,kBAAkB,mBAAO,CAAC,8FAAwB;AAClD,0BAA0B,mBAAO,CAAC,kIAA0C;AAC5E,2BAA2B,mBAAO,CAAC,sIAA4C;AAC/E,4BAA4B,mBAAO,CAAC,8IAAgD;;AAEpF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,IAAI;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA,iCAAiC,mCAAmC,EAAE;AACtE;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB;AACA,WAAW,OAAO;AAClB;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mCAAmC,eAAe;AAClD;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;;;;;;AC/LA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B,SAAS,mBAAO,CAAC,mCAAI;AACrB,eAAe,mBAAO,CAAC,iFAAoB;;AAE3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,2BAA2B,eAAe;AAC1C;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,gDAAgD,cAAc;AAC9D;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,2BAA2B,eAAe;AAC1C;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,gDAAgD,cAAc;AAC9D;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,2BAA2B,eAAe;AAC1C;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,gDAAgD,cAAc;AAC9D;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA,CAAC;;;;;;;;;;;;ACvHD,UAAU,mBAAO,CAAC,wEAAmB;AACrC,iBAAiB,mBAAO,CAAC,+FAAe;AACxC,qBAAqB,mBAAO,CAAC,uGAAmB;AAChD,eAAe,mBAAO,CAAC,oGAA6B;;AAEpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;;;;;;;;;;;;ACzCA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;;;;;;AC9EA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B,iBAAiB,mBAAO,CAAC,+FAAe;;AAExC;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oBAAoB;AACpB,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA,mBAAmB,uBAAuB;AAC1C;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA,CAAC;;;;;;;;;;;;AClED;AACA,YAAY,mBAAO,CAAC,yFAAY;AAChC,aAAa,mBAAO,CAAC,2FAAa;AAClC;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;;;;;;;;;;;ACdA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B,iBAAiB,mBAAO,CAAC,sDAAY;AACrC,iBAAiB,mBAAO,CAAC,+FAAe;AACxC,iBAAiB,mBAAO,CAAC,+FAAe;;AAExC;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACvJA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B,cAAc,mBAAO,CAAC,sDAAS;AAC/B,0BAA0B,mBAAO,CAAC,gHAA+B;AACjE,iBAAiB,mBAAO,CAAC,oEAAc;;AAEvC;;AAEA;AACA;AACA;AACA,wBAAwB,qBAAqB;AAC7C;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;;;;;;;;;;AC1FA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B,kBAAkB,mBAAO,CAAC,uFAAiB;AAC3C,iCAAiC,mBAAO,CAAC,+HAAgC;;AAEzE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA,CAAC;;;;;;;;;;;;ACtJD,eAAe,mBAAO,CAAC,qDAAU;AACjC,eAAe,mBAAO,CAAC,iFAAoB;AAC3C,sBAAsB,mBAAO,CAAC,qHAA2B;AACzD,0BAA0B,mBAAO,CAAC,+GAAwB;AAC1D,wBAAwB,mBAAO,CAAC,qGAAmB;AACnD,wBAAwB,mBAAO,CAAC,uGAAoB;AACpD,4BAA4B,mBAAO,CAAC,uHAA4B;AAChE,8BAA8B,mBAAO,CAAC,mHAA0B;AAChE,kCAAkC,mBAAO,CAAC,qIAAmC;AAC7E,eAAe,mBAAO,CAAC,4GAAwB;;AAE/C;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA,GAAG;;AAEH;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,CAAC;;;;;;;;;;;;AC5HD,eAAe,mBAAO,CAAC,iFAAoB;AAC3C,gBAAgB,mBAAO,CAAC,kFAAuB;AAC/C,QAAQ,mBAAO,CAAC,2DAAY;AAC5B,wBAAwB,mBAAO,CAAC,oIAA+B;AAC/D,0BAA0B,mBAAO,CAAC,wIAAiC;;AAEnE;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA,CAAC;;;;;;;;;;;;AC5DD,eAAe,mBAAO,CAAC,iFAAoB;AAC3C,gBAAgB,mBAAO,CAAC,kFAAuB;AAC/C,eAAe,mBAAO,CAAC,kJAAsC;;AAE7D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA,CAAC;;;;;;;;;;;;ACrDD,QAAQ,mBAAO,CAAC,2DAAY;AAC5B,eAAe,mBAAO,CAAC,iFAAoB;AAC3C,wBAAwB,mBAAO,CAAC,gGAA+B;AAC/D,uBAAuB,mBAAO,CAAC,wGAAkB;AACjD,kBAAkB,mBAAO,CAAC,qIAAkC;;AAE5D;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA,oCAAoC;AACpC;;AAEA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,2CAA2C;AAC3C;AACA,KAAK,OAAO;AACZ;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA,CAAC;;;;;;;;;;;;AC9KD,wBAAwB,mBAAO,CAAC,gGAAc;AAC9C,mCAAmC,mBAAO,CAAC,sHAAyB;AACpE,kBAAkB,mBAAO,CAAC,iJAAwC;;AAElE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,CAAC;;;;;;;;;;;;AC9DD,QAAQ,mBAAO,CAAC,2DAAY;AAC5B,eAAe,mBAAO,CAAC,qDAAU;;AAEjC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;;AAEA,CAAC;;;;;;;;;;;;AChDD,eAAe,mBAAO,CAAC,iFAAoB;AAC3C,eAAe,mBAAO,CAAC,oHAAwB;;AAE/C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA,CAAC;;;;;;;;;;;;AC1ED,QAAQ,mBAAO,CAAC,oDAAQ;AACxB,eAAe,mBAAO,CAAC,iFAAoB;AAC3C,wBAAwB,mBAAO,CAAC,gGAA+B;AAC/D,sBAAsB,mBAAO,CAAC,0HAA0B;AACxD,yBAAyB,mBAAO,CAAC,4HAA2B;;AAE5D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;;AAEA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA,gCAAgC,sBAAsB,GAAG,eAAe;AACxE;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;AC/ID,oBAAoB,mBAAO,CAAC,6GAAkB;AAC9C,qBAAqB,mBAAO,CAAC,wIAAiC;AAC9D,yBAAyB,mBAAO,CAAC,4HAA2B;;AAE5D;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;ACpCD,QAAQ,mBAAO,CAAC,2DAAY;AAC5B,eAAe,mBAAO,CAAC,iFAAoB;AAC3C,gBAAgB,mBAAO,CAAC,+EAAoB;AAC5C,eAAe,mBAAO,CAAC,8GAAsB;AAC7C,wBAAwB,mBAAO,CAAC,4GAAqB;AACrD,oBAAoB,mBAAO,CAAC,8FAAsB;;AAElD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA,KAAK;;AAEL;AACA,0BAA0B;AAC1B;;AAEA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,OAAO;AACP,GAAG;;AAEH;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;ACtGD,QAAQ,mBAAO,CAAC,2DAAY;AAC5B,QAAQ,mBAAO,CAAC,oDAAQ;AACxB,eAAe,mBAAO,CAAC,iFAAoB;AAC3C,mBAAmB,mBAAO,CAAC,4HAAqC;AAChE,uBAAuB,mBAAO,CAAC,4HAAmD;AAClF,eAAe,mBAAO,CAAC,4HAA6B;AACpD,kBAAkB,mBAAO,CAAC,+FAA4B;AACtD,eAAe,mBAAO,CAAC,uFAAwB;AAC/C,iBAAiB,mBAAO,CAAC,6FAA2B;;AAEpD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA,CAAC;;;;;;;;;;;;ACzLD,QAAQ,mBAAO,CAAC,oDAAQ;AACxB,QAAQ,mBAAO,CAAC,2DAAY;AAC5B,eAAe,mBAAO,CAAC,iFAAoB;AAC3C,eAAe,mBAAO,CAAC,4FAAgB;AACvC,sBAAsB,mBAAO,CAAC,iKAAoE;;AAElG;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;;AAEA,oCAAoC;AACpC;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,GAAG;;AAEH;AACA;;AAEA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;ACvKD,QAAQ,mBAAO,CAAC,2DAAY;AAC5B,SAAS,mBAAO,CAAC,mCAAI;AACrB,eAAe,mBAAO,CAAC,iFAAoB;AAC3C,gBAAgB,mBAAO,CAAC,4EAAiB;AACzC,eAAe,mBAAO,CAAC,2FAAgB;AACvC,mBAAmB,mBAAO,CAAC,yHAAkC;AAC7D,wBAAwB,mBAAO,CAAC,+GAA0B;AAC1D,oBAAoB,mBAAO,CAAC,8FAAsB;AAClD,kBAAkB,mBAAO,CAAC,4FAAyB;AACnD,eAAe,mBAAO,CAAC,oFAAqB;AAC5C,iBAAiB,mBAAO,CAAC,0FAAwB;AACjD,mBAAmB,mBAAO,CAAC,8FAA0B;AACrD,uBAAuB,mBAAO,CAAC,yHAAgD;;AAE/E;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;;;;;;;;;;;;ACnID,QAAQ,mBAAO,CAAC,oDAAQ;AACxB,QAAQ,mBAAO,CAAC,2DAAY;AAC5B,SAAS,mBAAO,CAAC,mCAAI;AACrB,oBAAoB,mBAAO,CAAC,kEAAgB;AAC5C,gBAAgB,mBAAO,CAAC,mFAAqB;AAC7C,eAAe,mBAAO,CAAC,iFAAoB;AAC3C,gBAAgB,mBAAO,CAAC,4EAAiB;AACzC,sBAAsB,mBAAO,CAAC,oGAA6B;AAC3D,oBAAoB,mBAAO,CAAC,sFAAsB;;AAElD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB;;AAEhB,oDAAoD;AACpD;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,oBAAoB,aAAa;AACjC,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,QAAQ;;AAEtC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,OAAO;;AAEP;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0CAA0C;AAC1C,8CAA8C;AAC9C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA,oBAAoB,iCAAiC;AACrD,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,UAAU,EAAE;AAC5C;AACA,gCAAgC,UAAU,EAAE;AAC5C,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,UAAU,EAAE;AAC5C;AACA,gCAAgC,UAAU,EAAE;AAC5C,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,aAAa;AACzB;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA,sCAAsC,kCAAkC,EAAE;AAC1E,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA,mBAAmB,eAAe;AAClC;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT,OAAO;AACP,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA,oBAAoB,WAAW;AAC/B,GAAG;;AAEH;AACA;AACA,gBAAgB,kBAAkB;AAClC,GAAG;;AAEH;AACA;AACA,gBAAgB,aAAa;AAC7B,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,oDAAoD,2CAA2C;AAC/F;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,oBAAoB,6CAA6C;AACjE;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,sBAAsB,iBAAiB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;;AAEA,oBAAoB,kBAAkB;;AAEtC;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA,sBAAsB,6CAA6C,GAAG,eAAe;AACrF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,sBAAsB,6CAA6C;AACnE;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;;AAEA,2BAA2B,eAAe;AAC1C,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,2BAA2B;AAC3B,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,0BAA0B,UAAU,EAAE;AACtC,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,gBAAgB;;AAEhB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qBAAqB,OAAO;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,8BAA8B,gCAAgC,EAAE;AAChE;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,OAAO;;AAEP;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,4EAA4E;AAC5E;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,wBAAwB;;AAExB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,OAAO;AACP;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;AC3tDD,QAAQ,mBAAO,CAAC,2DAAY;AAC5B,eAAe,mBAAO,CAAC,iFAAoB;AAC3C,gBAAgB,mBAAO,CAAC,4EAAiB;AACzC,yBAAyB,mBAAO,CAAC,gHAAwB;AACzD,yBAAyB,mBAAO,CAAC,kFAAS;AAC1C,kBAAkB,mBAAO,CAAC,mGAAmB;AAC7C,eAAe,mBAAO,CAAC,2FAAe;AACtC,mBAAmB,mBAAO,CAAC,yHAAkC;AAC7D,uBAAuB,mBAAO,CAAC,yHAAgD;AAC/E,oBAAoB,mBAAO,CAAC,8FAAsB;AAClD,wBAAwB,mBAAO,CAAC,iHAA0B;AAC1D,kBAAkB,mBAAO,CAAC,4FAAyB;AACnD,eAAe,mBAAO,CAAC,oFAAqB;AAC5C,iBAAiB,mBAAO,CAAC,0FAAwB;;AAEjD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,OAAO;AACP;;AAEA,yEAAyE,gBAAgB;AACzF,GAAG;;AAEH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA,oCAAoC,WAAW;AAC/C;AACA;;AAEA;AACA,oCAAoC,SAAS;AAC7C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA,sBAAsB,4DAA4D;AAClF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA,oBAAoB,iCAAiC;;AAErD;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,eAAe,uCAAuC;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,eAAe,uCAAuC;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;;AAEA,oBAAoB,6EAA6E;AACjG;AACA,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,mEAAmE;AACvF;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,qFAAqF;AACzG;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA,qBAAqB;AACrB,KAAK;AACL,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA,0CAA0C,EAAE;AAC5C,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP,sCAAsC,WAAW;AACjD;AACA;;AAEA;AACA;AACA,OAAO;AACP,sCAAsC,SAAS;AAC/C;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB;AACjB,OAAO;AACP,iBAAiB;AACjB;;AAEA;AACA,SAAS,qCAAqC;AAC9C;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA,oBAAoB,oCAAoC;AACxD;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;AC1rBD,eAAe,mBAAO,CAAC,iFAAoB;AAC3C,uBAAuB,mBAAO,CAAC,yHAAgD;AAC/E,eAAe,mBAAO,CAAC,6HAAgC;;AAEvD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA,CAAC;;;;;;;;;;;;ACnFD,QAAQ,mBAAO,CAAC,2DAAY;AAC5B,kBAAkB,mBAAO,CAAC,uFAAiB;;AAE3C;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,CAAC;;;;;;;;;;;;ACnED,QAAQ,mBAAO,CAAC,2DAAY;AAC5B,eAAe,mBAAO,CAAC,iFAAoB;AAC3C,0BAA0B,mBAAO,CAAC,qGAAmB;AACrD,sBAAsB,mBAAO,CAAC,6FAAe;AAC7C,oBAAoB,mBAAO,CAAC,sGAAkB;AAC9C,2BAA2B,mBAAO,CAAC,wHAA2B;AAC9D,mBAAmB,mBAAO,CAAC,yHAAkC;AAC7D,kBAAkB,mBAAO,CAAC,4FAAyB;AACnD,eAAe,mBAAO,CAAC,oFAAqB;AAC5C,iBAAiB,mBAAO,CAAC,0FAAwB;;AAEjD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP,sCAAsC,WAAW;AACjD;AACA;;AAEA;AACA;AACA,OAAO;AACP,sCAAsC,SAAS;AAC/C;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,CAAC;;;;;;;;;;;;AC7LD,QAAQ,mBAAO,CAAC,oDAAQ;AACxB,eAAe,mBAAO,CAAC,iFAAoB;AAC3C,yBAAyB,mBAAO,CAAC,6FAAoB;AACrD,oBAAoB,mBAAO,CAAC,sFAAsB;AAClD,uBAAuB,mBAAO,CAAC,yHAAgD;;AAE/E;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;;AAEL;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,2CAA2C;AAC1E,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,CAAC;;;;;;;;;;;;ACtND,UAAU,mBAAO,CAAC,wEAAmB;AACrC,eAAe,mBAAO,CAAC,iFAAoB;AAC3C,SAAS,mBAAO,CAAC,mCAAI;AACrB,eAAe,mBAAO,CAAC,mHAA0B;AACjD,gBAAgB,mBAAO,CAAC,4EAAiB;AACzC,oBAAoB,mBAAO,CAAC,8FAAsB;AAClD,wBAAwB,mBAAO,CAAC,mHAA0B;AAC1D,uBAAuB,mBAAO,CAAC,yHAAgD;;AAE/E;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA,qBAAqB;AACrB,KAAK;;AAEL;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,CAAC;;;;;;;;;;;;ACjID,kBAAkB,mBAAO,CAAC,uFAAiB;AAC3C,QAAQ,mBAAO,CAAC,2DAAY;;AAE5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;;;;;;;;;;;ACrDD,QAAQ,mBAAO,CAAC,2DAAY;AAC5B,eAAe,mBAAO,CAAC,iFAAoB;AAC3C,qBAAqB,mBAAO,CAAC,6GAAuB;AACpD,0BAA0B,mBAAO,CAAC,qGAAmB;AACrD,0BAA0B,mBAAO,CAAC,oHAAyB;AAC3D,uBAAuB,mBAAO,CAAC,8GAAsB;AACrD,mBAAmB,mBAAO,CAAC,yHAAkC;AAC7D,kBAAkB,mBAAO,CAAC,4FAAyB;AACnD,eAAe,mBAAO,CAAC,oFAAqB;AAC5C,iBAAiB,mBAAO,CAAC,0FAAwB;;AAEjD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;;AAEH;AACA;;AAE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;AAElD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,aAAa;AAC7B;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA,cAAc,2BAA2B;AACzC;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,CAAC;;;;;;;;;;;;ACnUD,eAAe,mBAAO,CAAC,iFAAoB;AAC3C,QAAQ,mBAAO,CAAC,2DAAY;AAC5B,0BAA0B,mBAAO,CAAC,2HAAoC;AACtE,wBAAwB,mBAAO,CAAC,uHAAkC;;AAElE;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,+BAA+B,2BAA2B;;AAE1D;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;AClED,eAAe,mBAAO,CAAC,iFAAoB;;AAE3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;;;;;;;;;;;;ACzCD,QAAQ,mBAAO,CAAC,2DAAY;AAC5B,UAAU,mBAAO,CAAC,wEAAmB;AACrC,wBAAwB,mBAAO,CAAC,kGAAsB;;AAEtD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,aAAa,OAAO;AACpB,cAAc,QAAQ;AACtB,cAAc,MAAM;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA,gDAAgD,mBAAmB;AACnE,0BAA0B,UAAU,6CAA6C;AACjF,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;AC3OD,QAAQ,mBAAO,CAAC,2DAAY;AAC5B,iBAAiB,mBAAO,CAAC,oFAAe;;AAExC;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,kBAAkB;AAC/B;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACjDA,eAAe,mBAAO,CAAC,qDAAU;AACjC,QAAQ,mBAAO,CAAC,2DAAY;AAC5B,eAAe,mBAAO,CAAC,iFAAoB;AAC3C,uBAAuB,mBAAO,CAAC,kGAAsB;AACrD,sBAAsB,mBAAO,CAAC,gGAAqB;AACnD,oBAAoB,mBAAO,CAAC,6FAAwB;AACpD,eAAe,mBAAO,CAAC,iGAA0B;AACjD,YAAY,mBAAO,CAAC,gFAAuB;;AAE3C;AACA,YAAY,mBAAO,CAAC,mJAAgD;AACpE,WAAW,mBAAO,CAAC,yGAA2B;AAC9C,aAAa,mBAAO,CAAC,6GAA6B;AAClD;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA,2CAA2C;AAC3C;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,8BAA8B,4BAA4B;AAC1D;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA,8BAA8B,wBAAwB;AACtD;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;;AA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2DAAY;AAC5B,eAAe,mBAAO,CAAC,qDAAU;;AAEjC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,eAAe,OAAO;AACtB,gBAAgB,OAAO;AACvB,gBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,CAAC;;AAED;;;;;;;;;;;;AChFA,QAAQ,mBAAO,CAAC,2DAAY;AAC5B,eAAe,mBAAO,CAAC,qDAAU;;AAEjC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,KAA8D,EAAE,EAEnE;AACL,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,eAAe,OAAO;AACtB,gBAAgB,OAAO;AACvB,gBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;AACD;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA,CAAC;;AAED;;;;;;;;;;;;ACzKA;AACA;AACA;AACA,0DAA0D;;AAE1D;AACA,MAAM,IAA0C;;AAEhD;AACA,EAAE,iCAAO,EAAE,yEAAQ,EAAE,oCAAE,OAAO;AAAA;AAAA;AAAA,oGAAE;AAChC,EAAE,MAAM,EAIN;AACF,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,KAAK;AACL;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,yBAAyB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,cAAc,gBAAgB;AAC9B;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA,cAAc,2BAA2B;AACzC;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,uBAAuB;AACvB;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,0BAA0B;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kFAAkF;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oCAAoC;AACpC;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,6BAA6B;AAC7B;;AAEA;AACA,8CAA8C,OAAO,WAAW;AAChE;AACA;AACA;AACA;AACA,oDAAoD;AACpD,gBAAgB,sBAAsB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA,2BAA2B,kBAAkB;AAC7C,EAAE;AACF;AACA,2BAA2B,iBAAiB;AAC5C,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS,kCAAkC;AAC3C;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,CAAC;;AAED;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA,sCAAsC;AACtC,qCAAqC;AACrC,qCAAqC;AACrC,uCAAuC,aAAa;AACpD,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,kBAAkB,WAAW,YAAY,gBAAgB,2BAA2B,WAAW;AACtI;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,kBAAkB;AACxD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,uBAAuB;;AAEvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;;AAE5B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA,oCAAoC,eAAe;AACnD,EAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yCAAyC,oBAAoB;;AAE7D;AACA;;AAEA;AACA;AACA,CAAC;;AAED,CAAC;;AAED;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,gDAAgD;AAChD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA,kCAAkC,2BAA2B;AAC7D;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,IAAI;AACJ,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;;AAEN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;;AAEA,kCAAkC,aAAa;AAC/C,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,iCAAiC,oBAAoB;AACrD,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA,GAAG;AACH;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA,sDAAsD;AACtD;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,MAAM;AACN;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;;AAEP;AACA;AACA;;AAEA;AACA,mDAAmD,aAAa;AAChE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;;AAEA,oDAAoD,aAAa;AACjE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA,gBAAgB,cAAc;AAC9B,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA;AACA,oCAAoC,mBAAmB;AACvD;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,oCAAoC,0BAA0B;AAC9D;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA,IAAI;AACJ,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA,kCAAkC;AAClC,EAAE;AACF;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,CAAC;;AAED;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,gBAAgB,cAAc,oBAAoB,EAAE;;AAEpD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,yBAAyB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,sBAAsB;AACtB,wBAAwB;AACxB,2BAA2B;AAC3B,iCAAiC;AACjC,wBAAwB;AACxB,uCAAuC;AACvC,4CAA4C;AAC5C,4CAA4C;AAC5C,8CAA8C;AAC9C,4CAA4C;AAC5C,+CAA+C;AAC/C,wDAAwD;AACxD,kDAAkD;AAClD,qDAAqD;AACrD,oBAAoB;AACpB,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC,8CAA8C;AAC9C;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,gBAAgB;AAC7C;AACA;AACA,GAAG;AACH;AACA;AACA,EAAE;;AAEF;AACA;AACA,gEAAgE;AAChE,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,gDAAgD;AAChD;AACA;AACA,iDAAiD;AACjD;AACA;AACA;AACA;AACA,WAAW,uDAAuD;AAClE;AACA;AACA,MAAM,oDAAoD;AAC1D;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,IAAI;AACJ;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB,kBAAkB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;;AAE3B;AACA;AACA;AACA;AACA,iCAAiC,aAAa,YAAY;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD;AACvD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAqB,uBAAuB,EAAE;AAC9C,uBAAuB,2BAA2B;AAClD,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,0CAA0C,EAAE,EAAE;AAClE,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAqB,sBAAsB,EAAE;AAC7C,uBAAuB,kCAAkC;AACzD,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,0CAA0C,EAAE,EAAE;AAClE;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,iCAAiC;AAClD;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4CAA4C;AAC5C,yCAAyC;AACzC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;;AAEA,mBAAmB;AACnB;AACA,YAAY;AACZ;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,GAAG,kDAAkD;AACrD;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD;AACA;;AAEA,uFAAuF;AACvF;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,+BAA+B;AAC/B;AACA;AACA,2BAA2B;AAC3B;AACA,8CAA8C;AAC9C;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH,YAAY;AACZ;AACA;AACA;AACA;AACA,kBAAkB,uDAAuD;AACzE;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA,oDAAoD;;AAEpD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA,mBAAmB;AACnB,+BAA+B;AAC/B;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,2BAA2B,iDAAiD;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wEAAwE;AACxE,GAAG;AACH,gCAAgC;AAChC;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA,iBAAiB;AACjB;AACA;AACA;AACA,gCAAgC,sBAAsB,EAAE;AACxD;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,wBAAwB;AACxB;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,6BAA6B;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;;AAEN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mBAAmB,yBAAyB;AAC5C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA,oBAAoB,yBAAyB;AAC7C;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mBAAmB,yBAAyB;AAC5C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,sCAAsC;AACtC;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,oBAAoB;AACnC;AACA;AACA,gBAAgB,oBAAoB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE;AACjE;AACA,iEAAiE;AACjE,0DAA0D,kBAAkB;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAS,SAAS;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD;AACtD,yFAAyF;AACzF;AACA;AACA,kBAAkB,gBAAgB,UAAU;AAC5C;AACA;AACA;AACA,kBAAkB,SAAS,SAAS;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6GAA6G;AAC7G;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA,gEAAgE;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,mBAAmB,YAAY;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2EAA2E;AAC3E;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,iBAAiB;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,+DAA+D;AAC/D;AACA,mBAAmB;AACnB;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA,gCAAgC;AAChC;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,+BAA+B;;AAE/B;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,8BAA8B;AAC9B;AACA;;AAEA;AACA,EAAE;;AAEF;;AAEA;AACA,mBAAmB;AACnB,GAAG;AACH;AACA;;AAEA;;AAEA,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA,EAAE;;AAEF;AACA;AACA,WAAW;AACX;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,EAAE;;AAEF;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF,YAAY;;AAEZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;AAED;AACA;AACA,+BAA+B;AAC/B;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;AACF;AACA,+BAA+B;AAC/B;AACA,GAAG;;AAEH;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH,EAAE;AACF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;;AAEN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,CAAC;;AAED;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;;AAEH,EAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;;AAEA,wCAAwC,QAAQ;;AAEhD;AACA;AACA;AACA;;AAEA;AACA;AACA,iHAAiH,sCAAsC;AACvJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,kDAAkD;AAC9G;AACA;AACA,4DAA4D,kBAAkB;AAC9E;AACA;AACA,6DAA6D,iDAAiD;AAC9G;AACA;AACA,6DAA6D,kBAAkB;AAC/E;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,kBAAkB;AAC9E;AACA;AACA,4DAA4D,kDAAkD;AAC9G;AACA;AACA,6DAA6D,kBAAkB;AAC/E;AACA;AACA,6DAA6D,iDAAiD;AAC9G;AACA;;AAEA;AACA,0GAA0G,sCAAsC;AAChJ;AACA;;AAEA;;AAEA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ,sBAAsB,QAAQ;;AAE9B;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA,6BAA6B,6CAA6C;;AAE1E;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,cAAc,cAAc;;AAE5B;AACA;AACA;;AAEA,cAAc,mBAAmB;;AAEjC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA,mCAAmC,+BAA+B;AAClE;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,EAAE;;AAEF;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,mBAAmB;;AAEnB;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,2BAA2B;AAC3B,gCAAgC;;AAEhC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kCAAkC,uBAAuB;AACzD;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS,OAAO;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,SAAS,+CAA+C;;AAExD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;;AAEJ;;AAEA,EAAE;;AAEF;;AAEA;AACA;;AAEA;;AAEA,+DAA+D;;AAE/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;;AAEA,GAAG;AACH;AACA;;AAEA,EAAE;;AAEF;AACA;AACA,WAAW;AACX,GAAG;AACH;AACA;AACA,WAAW;AACX,GAAG;AACH;AACA;AACA,WAAW;AACX,GAAG;AACH;AACA,WAAW;AACX,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,EAAE;;AAEF,YAAY;;AAEZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;AAED;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,6EAA6E;AACzF;AACA;AACA;AACA;;AAEA;AACA,kCAAkC,uBAAuB,KAAK;AAC9D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oBAAoB,yCAAyC;AAC7D;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iFAAiF;AACjF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,IAAI;AACJ,EAAE;;AAEF;AACA;AACA;AACA,CAAC;;AAED;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;;AAEA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;AAED;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA,KAAK;AACL;AACA;AACA,MAAM;AACN;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA,sBAAsB;AACtB;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK,2BAA2B;AAChC;AACA;AACA,sBAAsB,iBAAiB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,SAAS,iBAAiB;AAC1B;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;;AAEA;AACA,EAAE;;AAEF;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,EAAE;;AAEF;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,EAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,gCAAgC;AAChF,MAAM,6BAA6B,cAAc;AACjD,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,cAAc,gBAAgB;AAC9B;;AAEA;AACA;AACA;AACA;;AAEA,8BAA8B,cAAc;;AAE5C;AACA;AACA;AACA;;AAEA;AACA,eAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,uBAAuB,mFAAmF;;AAE1G;;AAEA,EAAE;AACF;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,GAAG;AACH;;AAEA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;AACF;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,sBAAsB,IAAI,YAAY,IAAI,YAAY,IAAI;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,mBAAmB,EAAE,WAAW,EAAE,WAAW,EAAE;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,EAAE;AACF,6BAA6B;;AAE7B;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;;AAEN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH,EAAE;AACF;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;;AAEA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH,EAAE;AACF;AACA;AACA;AACA,CAAC;AACD;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,cAAc;AACd;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;;AAEJ;AACA;AACA;AACA,GAAG;AACH,EAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM,kBAAkB;AACxB;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,MAAM,qBAAqB;AAC3B;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,gBAAgB,kBAAkB,IAAI,qBAAqB;AAC3D;AACA;AACA,IAAI;AACJ;AACA;AACA,MAAM,qBAAqB;AAC3B;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;;AAED,CAAC;;AAED;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,kBAAkB,gBAAgB;AAClC;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,cAAc,gBAAgB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,0BAA0B;AAC1B,wBAAwB;AACxB;AACA;AACA;AACA,sBAAsB;AACtB,0BAA0B;AAC1B,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,6BAA6B;;AAE7B;AACA;AACA,gBAAgB,uBAAuB;AACvC,gBAAgB,uBAAuB;AACvC,GAAG;AACH;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW;;AAEX;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;;AAED,CAAC;;AAED;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,CAAC;;AAED;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS,uBAAuB;;AAEhC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,+BAA+B;;AAE/B;AACA;AACA;AACA;;AAEA;AACA,cAAc;AACd;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,WAAW;AACxB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,YAAY;AACZ;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,WAAW,QAAQ;AAChC;AACA;;AAEA,cAAc,YAAY,QAAQ;AAClC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA,EAAE;AACF;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;;AAEnB;AACA,iDAAiD;;AAEjD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,OAAO;AACP,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,aAAa,WAAW;AACxB;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB,iBAAiB;AACjB,iBAAiB;AACjB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,aAAa,WAAW;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI;AACJ;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;;AAEA;;AAEA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,KAAK;AACL;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,GAAG;;AAEH,EAAE;;AAEF;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB,UAAU,SAAS,UAAU;AAC7C,gBAAgB,UAAU,SAAS,UAAU;AAC7C,mBAAmB,qDAAqD;;AAExE;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;;AAEH;AACA,EAAE;;AAEF;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;;AAEA;;AAEA;AACA;;AAEA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA,sCAAsC,aAAa;AACnD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,EAAE;;AAEF;AACA,qCAAqC,kBAAkB;AACvD,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA,GAAG;AACH,wBAAwB;AACxB;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA,mCAAmC,aAAa;;AAEhD;AACA,oCAAoC,aAAa;AACjD;;AAEA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA,UAAU;AACV,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,mCAAmC,iBAAiB;AACpD;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,yCAAyC,kBAAkB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA,kBAAkB,iCAAiC;AACnD;;AAEA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,gBAAgB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA,eAAe,iBAAiB;AAChC;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,yBAAyB;AACzF;AACA;AACA,mDAAmD,+CAA+C,GAAG,oCAAoC;AACzI;AACA,MAAM;AACN;AACA,gEAAgE,+BAA+B;AAC/F;AACA;AACA,mDAAmD,gDAAgD,GAAG,oCAAoC;AAC1I;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,6DAA6D,0BAA0B;AACvF;AACA;AACA,gDAAgD,oCAAoC,GAAG,oCAAoC;AAC3H;AACA;AACA,6DAA6D,2BAA2B;AACxF;AACA;AACA,gDAAgD,qCAAqC,GAAG,oCAAoC;AAC5H;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA,sCAAsC,QAAQ;AAC9C;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,EAAE;;AAEF;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW;AACX;AACA;AACA,IAAI;AACJ;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,sBAAsB;;AAEtB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,yCAAyC;AACzC;;AAEA;AACA;AACA;;AAEA,wCAAwC,iCAAiC,EAAE;AAC3E;;AAEA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA,wCAAwC,QAAQ;AAChD;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,yBAAyB;AACzB;;AAEA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA,IAAI;;AAEJ;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iCAAiC,QAAQ;;AAEzC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,EAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA;;AAEA;;AAEA,EAAE;;AAEF;;AAEA;;AAEA,kBAAkB,eAAe;;AAEjC;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA,2CAA2C,QAAQ;AACnD;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;;AAEA,EAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;;AAEA,EAAE;;AAEF;;AAEA;AACA;;AAEA;;AAEA,yBAAyB,6DAA6D,EAAE;AACxF;;AAEA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,mDAAmD;;AAEnD;AACA,EAAE;;AAEF;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,EAAE;;AAEF;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA,EAAE;;AAEF;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,EAAE;;AAEF;;AAEA;AACA;AACA;AACA;;AAEA;AACA,mCAAmC,QAAQ;AAC3C;AACA,6BAA6B,QAAQ;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gGAAgG,gDAAgD;;AAEhJ;AACA;AACA;AACA,8BAA8B,QAAQ;AACtC;AACA;;AAEA;;AAEA,EAAE;;AAEF;;AAEA;;AAEA;AACA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH,EAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA,mGAAmG,yBAAyB;AAC5H;;AAEA,iCAAiC;AACjC,mCAAmC,QAAQ;AAC3C;AACA,4BAA4B,QAAQ;AACpC;AACA;AACA,wGAAwG,yBAAyB;AACjI;AACA;AACA;AACA;AACA;;AAEA,8BAA8B,QAAQ;AACtC;AACA;;AAEA,6CAA6C,mBAAmB;AAChE;;AAEA,qDAAqD;;AAErD;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA,EAAE;;AAEF;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,iCAAiC,QAAQ;AACzC;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH,uCAAuC,QAAQ;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,sBAAsB,yJAAyJ;AAC/K,qBAAqB,uJAAuJ;AAC5K;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,EAAE;;AAEF;AACA;;AAEA;AACA,iBAAiB;AACjB;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA,sCAAsC,QAAQ;;AAE9C;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kCAAkC,QAAQ;AAC1C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA,EAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,sBAAsB;AACtB;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA,EAAE;;AAEF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,WAAW;AACX;;AAEA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,EAAE;;AAEF;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,EAAE;;AAEF;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,6BAA6B;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,EAAE;;AAEF;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wCAAwC;AACxC;AACA,GAAG;;AAEH,EAAE;;AAEF;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA,yCAAyC,iEAAiE,EAAE;AAC5G;AACA;AACA,yCAAyC,gDAAgD,EAAE,EAAE;AAC7F;;AAEA;AACA;AACA;AACA;AACA,0CAA0C,gDAAgD,EAAE;AAC5F,uCAAuC,yBAAyB,kDAAkD,GAAG,GAAG;AACxH,uCAAuC,yBAAyB,iDAAiD,IAAI,EAAE;AACvH;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,QAAQ;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,oCAAoC;AACpC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,YAAY,4BAA4B;AACxC;AACA,IAAI;AACJ;AACA;;AAEA;AACA;;AAEA,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA,kBAAkB;AAClB;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,GAAG;AACH;AACA;;AAEA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,gEAAgE;AAChE;AACA;AACA,kEAAkE;AAClE;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,wDAAwD,eAAe;AACvE;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;;AAEJ;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,iDAAiD;AACjD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA,gDAAgD,aAAa,EAAE;AAC/D,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,IAAI;;AAEJ;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,kDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA,sBAAsB,yBAAyB;AAC/C;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,wBAAwB,yBAAyB;AACjD,0BAA0B,2BAA2B;;AAErD;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA,IAAI;AACJ;AACA,GAAG;AACH;AACA;AACA;AACA,IAAI;AACJ;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAM;AACN,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,KAAK;AACL;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,uCAAuC;AACvD;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,gCAAgC;;AAEhC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,GAAG;AACH;AACA;AACA,IAAI;AACJ;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA,iCAAiC,mBAAmB;AACpD,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA,kCAAkC,mBAAmB;AACrD;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAyB;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;;;;AAID,CAAC,G;;;;;;;;;;;ACxugBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,kBAAkB;AAClB,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,WAAW;AACpC,yBAAyB,aAAa;AACtC,uBAAuB,aAAa;AACpC,6BAA6B,aAAa;AAC1C,uBAAuB,aAAa;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,mBAAmB,uBAAuB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,M;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,QAAQ;AAC7B;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kBAAkB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,oCAAoC,wBAAwB;AAC5D;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,uBAAuB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR,uBAAuB,yBAAyB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,O;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,uBAAuB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR,uBAAuB,yBAAyB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF,CAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mCAAmC,4BAA4B;;AAE/D;AACA,mBAAmB;;AAEnB;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA,aAAa,kBAAkB;;AAE/B;AACA;AACA;AACA,CAAC,I;;;;;;;;;;;;;ACj4BD;AACA;AACA,gCAAgC,mBAAmB,gCAAgC,GAAG;;AAEtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH;;AAEA,CAAC;;;;;;;;;;;;;AC7DD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAkB;AAClB,yCAAyC,0BAA0B,2DAA2D,EAAE,kBAAkB,0BAA0B,EAAE,mCAAmC,8BAA8B,oCAAoC,cAAc;;AAEjS;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,WAAW;AACxD;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,WAAW;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH;AACA;;AAEA;;AAEA;;;AAGA;AACA;;AAEA;;AAEA,6CAA6C,EAAE;AAC/C;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,UAAU,sBAAsB,aAAa;AACvF;AACA,kDAAkD,YAAY;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,wCAAwC,WAAW;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,WAAW;AACrD;AACA;AACA;AACA;AACA,4CAA4C,YAAY;AACxD;AACA;AACA;AACA;AACA,0GAA0G;AAC1G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,eAAe;AACf;AACA;AACA;AACA,mBAAmB;AACnB,iBAAiB;AACjB;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,4CAA4C,YAAY;AACxD;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,0CAA0C,WAAW;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,WAAW;AACrD;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,WAAW;AACrD;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yCAAyC,WAAW;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,qEAAqE;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sCAAsC,WAAW;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sCAAsC,WAAW;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sCAAsC,WAAW;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sCAAsC,WAAW;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,WAAW;AAC5D;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,uCAAuC,WAAW;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,WAAW;AACnD;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,4CAA4C,WAAW;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,WAAW;AACjD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sCAAsC,WAAW;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sCAAsC,WAAW;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,sCAAsC,WAAW;AACjD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA,2CAA2C,WAAW;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uCAAuC,WAAW;AAClD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uCAAuC,WAAW;AAClD;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,WAAW;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,aAAa;AACb;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA,2DAA2D,UAAU,0DAA0D,aAAa;AAC5I,OAAO;AACP;AACA,OAAO;AACP,0DAA0D,UAAU;AACpE;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA,uCAAuC,WAAW;AAClD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,OAAO;AACP;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,WAAW;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uCAAuC,WAAW;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,WAAW;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA,gDAAgD,WAAW;AAC3D;AACA;AACA;AACA;AACA,iDAAiD,YAAY;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,uCAAuC,WAAW;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,YAAY;AACxD;AACA,+GAA+G,YAAY;AAC3H;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,8CAA8C,YAAY;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,8CAA8C,YAAY;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,YAAY;AACxD;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,YAAY;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,YAAY;AACtD;AACA;AACA;AACA;AACA;AACA,8CAA8C,YAAY;AAC1D;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,gDAAgD,wCAAwC;AACxF;AACA;AACA;AACA;;AAEA;AACA;AACA,uCAAuC,WAAW;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uCAAuC,WAAW;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,4CAA4C,WAAW;AACvD;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,WAAW;AACpD;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,wCAAwC,WAAW;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oCAAoC,WAAW;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,uCAAuC,WAAW;AAClD;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,uCAAuC,YAAY;AACnD;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,WAAW;AACxD;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC,a;;;;;;;;;;;;AC/rDD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB;AACrB;AACA;;AAEA;;AAEA;AACA;AACA;AACA,oCAAoC;AACpC,qBAAqB;AACrB;AACA;;AAEA,mCAAmC,kBAAkB;AACrD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,2DAA2D,wCAAwC;AACnG,aAAa;AACb;AACA;AACA,SAAS;;AAET;AACA;AACA,gEAAgE,+CAA+C;AAC/G,aAAa;AACb;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B,aAAa;AACb;AACA;;AAEA,2BAA2B,kBAAkB;AAC7C;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oCAAoC,SAAS;AAC7C;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA,sBAAsB,6CAA6C;AACnE;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gCAAgC;AAChC,iBAAiB;AACjB;AACA;;AAEA,+BAA+B,kBAAkB;AACjD;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA,mBAAmB;AACnB;AACA,mBAAmB;AACnB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;;AAE7C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS;AACT,KAAK;AACL,CAAC,EAAE,oCAAa,E;;;;;;;;;;;;ACpXhB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,wCAAwC;AACxC,+BAA+B,wDAAwD;;AAEvF;AACA;AACA;AACA;;AAEA;AACA,iCAAiC;AACjC;AACA;AACA,aAAa;;AAEb;AACA;AACA;;AAEA;AACA;AACA;AACA,oBAAoB;AACpB,oBAAoB;AACpB;AACA;AACA,oBAAoB;AACpB,oBAAoB;AACpB;AACA;AACA,oBAAoB;AACpB,oBAAoB;AACpB;AACA;AACA,oBAAoB;AACpB,oBAAoB;AACpB;AACA;;AAEA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA,+BAA+B,oDAAoD;AACnF,aAAa;AACb,wBAAwB,qDAAqD;AAC7E;AACA;AACA,SAAS;;AAET;;AAEA;;AAEA;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA,0DAA0D,kBAAkB;AAC5E,WAAW;AACX;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET,4BAA4B,sBAAsB,iCAAiC,EAAE;AACrF,4BAA4B,qBAAqB,EAAE;AACnD,6BAA6B,sBAAsB,EAAE;AACrD,mCAAmC,8BAA8B;AACjE;;AAEA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA,6BAA6B;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,mCAAmC,4CAA4C,EAAE;AACjF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,mCAAmC,6CAA6C,EAAE;AAClF;AACA;;AAEA,iDAAiD,WAAW,EAAE;;AAE9D;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA,yBAAyB,YAAY,8CAA8C;AACnF;AACA;AACA,qCAAqC;AACrC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,2DAA2D;AAC7E;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,EAAE;;;;;;;;;;;;;ACjSF;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,mBAAO,CAAC,wEAAM;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,kBAAkB,gBAAgB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,IAAI;;AAEpC;;AAEA,gCAAgC,uBAAuB;AACvD;;AAEA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;;AAEA;;AAEA;AACA,gCAAgC,gBAAgB;;AAEhD;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,sBAAsB,IAAI,KAAK,EAAE;AACjC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,sDAAsD,kBAAkB,EAAE;;AAE1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA,KAAK;;AAEL;AACA;AACA,wEAAwE,GAAG;;AAE3E;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,IAAI;AAC5C,4BAA4B,IAAI,MAAM,EAAE;;AAExC;AACA;AACA;;AAEA;AACA;AACA,kCAAkC,gBAAgB,EAAE,IAAI;AACxD;AACA,+BAA+B,oBAAoB,IAAI,IAAI;AAC3D;AACA;AACA;AACA,iCAAiC,IAAI;AACrC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,wBAAwB,mBAAmB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,kDAAkD,cAAc;AAChE,qDAAqD,cAAc;AACnE;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,uBAAuB,2BAA2B;AAClD;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,gCAAgC,wBAAwB;AACxD;AACA,+DAA+D,QAAQ,WAAW,EAAE;;AAEpF;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,kBAAkB;AAC9C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe;AACf;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,kCAAkC;AAClC;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,OAAO;;AAEP;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA,uBAAuB;AACvB,MAAM,iBAAiB;;AAEvB,8BAA8B;;AAE9B;AACA;AACA,gCAAgC,EAAE;AAClC;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,qBAAqB;AACrB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,4CAA4C,qDAAqD;AACjG;;AAEA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,8BAA8B;AAC9B,4BAA4B,kBAAkB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA,iBAAiB;;AAEjB;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA,KAAK;;;AAGL;AACA;;AAEA;AACA;AACA,2CAA2C,yBAAyB;;AAEpE;AACA;AACA,2CAA2C,aAAa;AACxD;AACA;AACA,2CAA2C,aAAa;AACxD;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,UAAU;AACV;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,kBAAkB,iBAAiB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,8BAA8B;AAC9B;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,gCAAgC,IAAI,EAAE,YAAY,KAAK,SAAS;AAChE;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB,mBAAmB;AACvC;AACA;AACA;;AAEA;;AAEA,kBAAkB,kBAAkB;AACpC;AACA;;AAEA,kBAAkB,kBAAkB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,iCAAiC,aAAa,gBAAgB;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2BAA2B,IAAI,UAAU,IAAI;AAC7C;AACA,8BAA8B,IAAI,2BAA2B,IAAI;AACjE;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,2DAA2D,eAAe;AAC1E,2DAA2D,cAAc;AACzE,2DAA2D,gBAAgB;AAC3E,4DAA4D;AAC5D,KAAK;;AAEL;AACA;AACA,eAAe,iBAAiB;AAChC,mDAAmD;AACnD;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,gBAAgB;AACnC,oDAAoD;AACpD;AACA;AACA,KAAK;;AAEL;AACA;;AAEA,mCAAmC;AACnC;AACA,kBAAkB;AAClB;;AAEA;AACA;;AAEA;AACA,kBAAkB;AAClB;;AAEA;AACA,0BAA0B,YAAY,KAAK,SAAS;;AAEpD;AACA;AACA,kBAAkB;AAClB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,0DAA0D;;AAE1D;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,gBAAgB;AACnC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA,qBAAqB;AACrB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,mCAAmC;AACnC,kCAAkC;AAClC,kCAAkC;AAClC,oCAAoC;AACpC,mCAAmC;AACnC;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB;AACrB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS,mBAAmB;AAC5B;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;AACD,OAAO,KAA8B,GAAG,EAGrC;AACH;AACA;AACA;AACA,CAAC;;;;;;;;;;;;AC5rDD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,4BAA4B;;AAE5B;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,uCAAuC;AACrG;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA,+FAA+F;AAC/F;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA,iBAAiB;;AAEjB;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;;AAEA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,iBAAiB;AACjB;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA,2BAA2B,eAAe;AAC1C;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2DAA2D,2CAA2C;AACtG;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA,wCAAwC,0BAA0B,EAAE;AACpE;AACA,SAAS;;AAET;AACA;;AAEA;;AAEA;AACA;;AAEA,yDAAyD,uCAAuC;AAChG;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA,wCAAwC;AACxC,yEAAyE,wBAAwB;;AAEjG;AACA;AACA;AACA,+DAA+D,0CAA0C;AACzG,iBAAiB;;AAEjB;AACA,aAAa;AACb;AACA,wDAAwD,uCAAuC;AAC/F;;AAEA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA,KAAK;AACL,CAAC","file":"1.0.0-assets.136/javascripts/common.js","sourcesContent":["var CoreView = require('backbone/core-view');\nvar template = require('./background-import-limit.tpl');\nvar Notifier = require('builder/components/notifier/notifier');\n\n/**\n *  Import limit message within background importer\n *\n */\n\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    if (!opts.userModel) throw new Error('userModel is required');\n    if (!opts.configModel) throw new Error('configModel is required');\n\n    this._userModel = opts.userModel;\n    this._configModel = opts.configModel;\n\n    this._notification = Notifier.addNotification({\n      status: 'error',\n      closable: true,\n      button: false,\n      info: this._getInfo()\n    });\n\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this._notification.on('notification:close', this._closeHandler, this);\n    this.add_related_model(this._notification);\n  },\n\n  _closeHandler: function () {\n    this.clean();\n  },\n\n  _getInfo: function () {\n    var importQuota = this._userModel.getMaxConcurrentImports();\n    var isUpgradeable = !this._configModel.get('cartodb_com_hosted') && importQuota === 1;\n\n    return template({\n      upgradeUrl: window.upgrade_url,\n      isUpgradeable: isUpgradeable,\n      importQuota: importQuota\n    });\n  }\n});\n","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar defaultTemplate = require('./error-details.tpl');\nvar upgradeErrorTemplate = require('./upgrade-errors.tpl');\nvar UPGRADE_ERROR_CODES = [8001, 8002, 8005, 8007];\n\n/**\n * Error details view, to be used together with an error object from an import model.\n *\n */\n\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    if (!opts.userModel) throw new Error('userModel is required');\n    if (!opts.configModel) throw new Error('configModel is required');\n    if (!opts.error) throw new Error('error is required');\n\n    this._userModel = opts.userModel;\n    this._configModel = opts.configModel;\n    this._error = opts.error;\n  },\n\n  render: function () {\n    var isUpgradeError = _.contains(UPGRADE_ERROR_CODES, this._error.errorCode);\n    var upgradeUrl = this._configModel.get('upgrade_url');\n    var userCanUpgrade = upgradeUrl && !this._configModel.get('cartodb_com_hosted') && (!this._userModel.isInsideOrg() || this._userModel.isOrgOwner());\n    var template = this._getTemplate(isUpgradeError);\n\n    var html = template({\n      errorCode: this._error.errorCode,\n      title: this._error.title,\n      text: this._error.what_about,\n      itemQueueId: this._error.item_queue_id,\n      originalUrl: this._error.originalUrl,\n      httpResponseCode: this._error.httpResponseCode,\n      httpResponseCodeMessage: this._error.httpRresponseCodeMessage,\n      userCanUpgrade: userCanUpgrade,\n      showTrial: this._userModel.canStartTrial(),\n      upgradeUrl: upgradeUrl\n    });\n\n    this.$el.html(html);\n\n    return this;\n  },\n\n  _getTemplate: function (isUpgradeError) {\n    var template = defaultTemplate;\n\n    if (isUpgradeError) {\n      template = upgradeErrorTemplate;\n    }\n    return template;\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar Utils = require('builder/helpers/utils');\nvar template = require('./twitter-import-details.tpl');\n\nconst checkAndBuildOpts = require('builder/helpers/required-opts');\n\nconst REQUIRED_OPTS = [\n  'userModel',\n  'modalModel'\n];\n\n/**\n *  When a Twitter import finishes, this dialog displays\n *  all the info about the price/cost etc.\n *\n */\nmodule.exports = CoreView.extend({\n\n  className: 'TwitterImportDetails',\n\n  events: {\n    'click .js-close': '_onCloseClick'\n  },\n\n  initialize: function (options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n  },\n\n  render: function () {\n    var imp = this.model.get('import');\n    var userTwitterValues = this._userModel.get('twitter');\n    var availableTweets = userTwitterValues.quota - userTwitterValues.monthly_use;\n\n    this.$el.html(\n      template({\n        datasetTotalRows: imp.tweets_georeferenced,\n        datasetTotalRowsFormatted: Utils.formatNumber(imp.tweets_georeferenced),\n        tweetsCost: imp.tweets_cost,\n        tweetsCostFormatted: Utils.formatNumber(imp.tweets_cost),\n        availableTweets: availableTweets,\n        availableTweetsFormatted: Utils.formatNumber(availableTweets),\n        tweetsOverquota: imp.tweets_overquota,\n        tweetsOverquotaFormatted: Utils.formatNumber(imp.tweets_overquota),\n        blockSizeFormatted: Utils.formatNumber(userTwitterValues.block_size),\n        blockPriceFormatted: Utils.formatNumber(userTwitterValues.block_price)\n      })\n    );\n\n    return this;\n  },\n\n  _onCloseClick: function () {\n    this._modalModel.destroy();\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar partialImportDetailsTemplate = require('./warning-partial-import-details.tpl');\nvar tooManyFilesDetailsTemplate = require('./warning-too-many-files-details.tpl');\nvar tooManyRowsConnectorTemplate = require('./warning-too-many-rows-connector-details.tpl');\n\n/**\n * Error details view, to be used together with an error object from an import model.\n *\n */\n\nmodule.exports = CoreView.extend({\n\n  initialize: function (opts) {\n    if (!opts.userModel) throw new Error('userModel is required');\n    if (!opts.warnings) throw new Error('warnings is required');\n\n    this._userModel = this.options.userModel;\n    this._warnings = this.options.warnings;\n  },\n\n  render: function () {\n    var warnings = this._warnings;\n    var template = this._getTemplate(warnings);\n\n    this.$el.html(\n      template({\n        userMaxLayers: warnings.user_max_layers,\n        maxTablesPerImport: warnings.max_tables_per_import,\n        maxRowsPerConnectorImport: warnings.max_rows_per_connection\n      })\n    );\n\n    return this;\n  },\n\n  _getTemplate: function (warnings) {\n    if (warnings.user_max_layers && warnings.max_tables_per_import) {\n      return (warnings.user_max_layers < warnings.max_tables_per_import) ? partialImportDetailsTemplate : tooManyFilesDetailsTemplate;\n    } else if (warnings.user_max_layers) {\n      return partialImportDetailsTemplate;\n    } else if (warnings.max_tables_per_import) {\n      return tooManyFilesDetailsTemplate;\n    } else if (warnings.max_rows_per_connection) {\n      return tooManyRowsConnectorTemplate;\n    }\n  }\n});\n","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar CarouselView = require('./custom-carousel/custom-carousel-view');\n\n/**\n *  Carousel form view\n */\n\nmodule.exports = CoreView.extend({\n  module: 'components:carousel-form-view',\n\n  className: 'js-aggregationTypes',\n\n  initialize: function (opts) {\n    if (!opts.collection) throw new Error('Carousel collection is required');\n    if (!opts.template) throw new Error('template is required');\n    this.template = opts.template;\n    this._initBinds();\n  },\n\n  render: function () {\n    var selectedItem = this.collection.getSelected();\n    var selectedName = selectedItem && selectedItem.getName();\n    this.$el.html(\n      this.template({\n        name: selectedName\n      })\n    );\n    this._initViews();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.collection.bind('change:highlighted', this._onChangeHighlighted, this);\n  },\n\n  _initViews: function () {\n    var carousel = new CarouselView(_.extend(this.options, {\n      collection: this.collection\n    }));\n\n    if (!this.$('.js-selector').length) throw new Error('HTML element with js-selector class is required');\n\n    this.$('.js-selector').append(carousel.render().el);\n    carousel.initScroll();\n    this.addView(carousel);\n  },\n\n  _onChangeHighlighted: function () {\n    var item = this.collection.getHighlighted() || this.collection.getSelected();\n    if (item) {\n      var $el = this.$('.js-highlight');\n      if ($el) {\n        $el.text(item.getName());\n      }\n    }\n  }\n\n});\n","var COLOR_KEYWORDS = require('builder/helpers/color-keywords');\n\n/*\n  LESS mode - http://www.lesscss.org/\n  Ported to CodeMirror by Peter Kroon <plakroon@gmail.com>\n  Report bugs/issues here: https://github.com/marijnh/CodeMirror/issues  GitHub: @peterkroon\n*/\n\nmodule.exports = function (CodeMirror) {\n  CodeMirror.defineMode('cartocss', function (config) {\n    var indentUnit = config.indentUnit;\n    var type;\n\n    function ret (style, tp) {\n      type = tp;\n      return style;\n    }\n    // html tags\n    var tags = 'a abbr acronym address applet area article aside audio b base basefont bdi bdo big blockquote body br button canvas caption cite code col colgroup command datalist dd del details dfn dir div dl dt em embed fieldset figcaption figure font footer form frame frameset h1 h2 h3 h4 h5 h6 head header hgroup hr html i iframe img input ins keygen kbd label legend li link map mark menu meta meter nav noframes noscript object ol optgroup option output p param pre progress q rp rt ruby s samp script section select small source span strike strong style sub summary sup table tbody td textarea tfoot th thead time title tr track tt u ul var video wbr'.split(' ');\n    var colorKeywords = keySet(COLOR_KEYWORDS);\n\n    function inTagsArray (val) {\n      for (var i = 0; i < tags.length; i++) {\n        if (val === tags[i]) return true;\n      }\n    }\n\n    var selectors = /(^\\:root$|^\\:nth\\-child$|^\\:nth\\-last\\-child$|^\\:nth\\-of\\-type$|^\\:nth\\-last\\-of\\-type$|^\\:first\\-child$|^\\:last\\-child$|^\\:first\\-of\\-type$|^\\:last\\-of\\-type$|^\\:only\\-child$|^\\:only\\-of\\-type$|^\\:empty$|^\\:link|^\\:visited$|^\\:active$|^\\:hover$|^\\:focus$|^\\:target$|^\\:lang$|^\\:enabled^\\:disabled$|^\\:checked$|^\\:first\\-line$|^\\:first\\-letter$|^\\:before$|^\\:after$|^\\:not$|^\\:required$|^\\:invalid$)/;\n\n    function tokenBase (stream, state) {\n      var ch = stream.next();\n\n      if (ch === '@') {\n        stream.eatWhile(/[\\w\\-]/);\n        return ret('meta', stream.current());\n      } else if (ch === '/' && stream.eat('*')) {\n        state.tokenize = tokenCComment;\n        return tokenCComment(stream, state);\n      } else if (ch === '<' && stream.eat('!')) {\n        state.tokenize = tokenSGMLComment;\n        return tokenSGMLComment(stream, state);\n      } else if (ch === '=') ret(null, 'compare');\n      else if (ch === '|' && stream.eat('=')) return ret(null, 'compare');\n      else if (ch === '\\'' || ch === '\\'') {\n        state.tokenize = tokenString(ch);\n        return state.tokenize(stream, state);\n      } else if (ch === '/') { // e.g.: .png will not be parsed as a class\n        if (stream.eat('/')) {\n          state.tokenize = tokenSComment;\n          return tokenSComment(stream, state);\n        } else {\n          if (type === 'string' || type === '(') {\n            return ret('string', 'string');\n          }\n          if (state.stack[state.stack.length - 1] !== undefined) {\n            return ret(null, ch);\n          }\n          stream.eatWhile(/[\\a-zA-Z0-9\\-_.\\s]/);\n          if (/\\/|\\)|#/.test(stream.peek() || (stream.eatSpace() && stream.peek() === ')')) || stream.eol()) {\n            return ret('string', 'string'); // let url(/images/logo.png) without quotes return as string\n          }\n        }\n      } else if (ch === '!') {\n        stream.match(/^\\s*\\w*/);\n        return ret('keyword', 'important');\n      } else if (/\\d/.test(ch)) {\n        stream.eatWhile(/[\\w.%]/);\n        return ret('number', 'unit');\n      } else if (/[,+<>*\\/]/.test(ch)) {\n        if (stream.peek() === '=' || type === 'a') {\n          return ret('string', 'string');\n        }\n        return ret(null, 'select-op');\n      } else if (/[;{}:\\[\\]()~\\|]/.test(ch)) {\n        if (ch === ':') {\n          stream.eatWhile(/[a-z\\\\\\-]/);\n\n          if (selectors.test(stream.current())) {\n            return ret('tag', 'tag');\n          } else if (stream.peek() === ':') { // ::-webkit-search-decoration\n            stream.next();\n            stream.eatWhile(/[a-z\\\\\\-]/);\n            if (stream.current().match(/\\:\\:\\-(o|ms|moz|webkit)\\-/)) {\n              return ret('string', 'string');\n            }\n            if (selectors.test(stream.current().substring(1))) {\n              return ret('tag', 'tag');\n            }\n            return ret(null, ch);\n          } else {\n            return ret(null, ch);\n          }\n        } else if (ch === '~') {\n          if (type === 'r') {\n            return ret('string', 'string');\n          }\n        } else {\n          return ret(null, ch);\n        }\n      } else if (ch === '.') {\n        if (type === '(' || type === 'string') {\n          return ret('string', 'string'); // allow url(../image.png)\n        }\n        stream.eatWhile(/[\\a-zA-Z0-9\\-_]/);\n        if (stream.peek() === ' ') {\n          stream.eatSpace();\n        }\n        if (stream.peek() === ')') {\n          return ret('number', 'unit'); // rgba(0,0,0,.25);\n        }\n        return ret('tag', 'tag');\n      } else if (ch === '#') {\n        // we don't eat white-space, we want the hex color and or id only\n        stream.eatWhile(/[A-Za-z0-9]/);\n        // check if there is a proper hex color length e.g. #eee || #eeeEEE\n        if (stream.current().length === 4 || stream.current().length === 7) {\n          if (stream.current().match(/[A-Fa-f0-9]{6}|[A-Fa-f0-9]{3}/, false) != null) { // is there a valid hex color value present in the current stream\n            // when not a valid hex value, parse as id\n            if (stream.current().substring(1) !== stream.current().match(/[A-Fa-f0-9]{6}|[A-Fa-f0-9]{3}/, false)[0]) {\n              return ret('atom', 'tag');\n            }\n            // eat white-space\n            stream.eatSpace();\n            // when hex value declaration doesn't end with [;,] but is does with a slash/cc comment treat it as an id, just like the other hex values that don't end with[;,]\n            if (/[\\/<>.({!$%^&*_\\-\\\\?=+\\|#'~`]/.test(stream.peek())) {\n              return ret('atom', 'tag');\n            } else if (stream.peek() === '}') {\n              // #time { color: #aaa }\n              return ret('color', 'unit');\n            } else if (/[a-zA-Z\\\\]/.test(stream.peek())) {\n              // we have a valid hex color value, parse as id whenever an element/class is defined after the hex(id) value e.g. #eee aaa || #eee .aaa\n              return ret('color', 'unit');\n            } else if (stream.eol()) {\n              // when a hex value is on the end of a line, parse as id\n              return ret('color', 'unit');\n            } else {\n              // default\n              return ret('color', 'unit');\n            }\n          } else { // when not a valid hexvalue in the current stream e.g. #footer\n            stream.eatWhile(/[\\w\\\\\\-]/);\n            return ret('atom', 'tag');\n          }\n        } else { // when not a valid hexvalue length\n          stream.eatWhile(/[\\w\\\\\\-]/);\n          return ret('atom', 'tag');\n        }\n      } else if (ch === '&') {\n        stream.eatWhile(/[\\w\\-]/);\n        return ret(null, ch);\n      } else {\n        stream.eatWhile(/[\\w\\\\\\-_%.{]/);\n        if (type === 'string') {\n          return ret('string', 'string');\n        } else if (stream.current().match(/(^http$|^https$)/) != null) {\n          stream.eatWhile(/[\\w\\\\\\-_%.{:\\/]/);\n          return ret('string', 'string');\n        } else if (stream.peek() === '<' || stream.peek() === '>') {\n          return ret('tag', 'tag');\n        } else if (/\\(/.test(stream.peek())) {\n          return ret(null, ch);\n        } else if (stream.peek() === '/' && state.stack[state.stack.length - 1] !== undefined) { // url(dir/center/image.png)\n          return ret('string', 'string');\n        } else if (stream.current().match(/\\-\\d|\\-.\\d/)) { // match e.g.: -5px -0.4 etc... only colorize the minus sign\n          // commment out these 2 comment if you want the minus sign to be parsed as null -500px\n          // stream.backUp(stream.current().length-1);\n          // return ret(null, ch); //console.log( stream.current() );\n          return ret('number', 'unit');\n        } else if (inTagsArray(stream.current().toLowerCase())) { // match html tags\n          return ret('tag', 'tag');\n        } else if (/\\/|[\\s\\)]/.test(stream.peek() || stream.eol() || (stream.eatSpace() && stream.peek() === '/')) && stream.current().indexOf('.') !== -1) {\n          if (stream.current().substring(stream.current().length - 1, stream.current().length) === '{') {\n            stream.backUp(1);\n            return ret('tag', 'tag');\n          } // end if\n          stream.eatSpace();\n          if (/[{<>.a-zA-Z\\/]/.test(stream.peek()) || stream.eol()) return ret('tag', 'tag'); // e.g. button.icon-plus\n          return ret('string', 'string'); // let url(/images/logo.png) without quotes return as string\n        } else if (stream.eol() || stream.peek() === '[' || stream.peek() === '#' || type === 'tag') {\n          if (stream.current().substring(stream.current().length - 1, stream.current().length) === '{') stream.backUp(1);\n          return ret('tag', 'tag');\n        } else if (type === 'compare' || type === 'a' || type === '(') {\n          return ret('string', 'string');\n        } else if (type === '|' || stream.current() === '-' || type === '[') {\n          return ret(null, ch);\n        } else if (stream.peek() === ':') {\n          stream.next();\n          var t_v = stream.peek() === ':';\n          if (!t_v) {\n            var old_pos = stream.pos;\n            var sc = stream.current().length;\n            stream.eatWhile(/[a-z\\\\\\-]/);\n            var new_pos = stream.pos;\n            if (stream.current().substring(sc - 1).match(selectors) != null) {\n              stream.backUp(new_pos - (old_pos - 1));\n              return ret('tag', 'tag');\n            } else stream.backUp(new_pos - (old_pos - 1));\n          } else {\n            stream.backUp(1);\n          }\n          if (t_v) return ret('tag', 'tag');\n          else return ret('variable', 'variable');\n\n          // It is a color variable?\n        } else if (colorKeywords.hasOwnProperty(stream.current())) {\n          return ret('color', 'unit');\n        } else {\n          return ret('variable', 'variable');\n        }\n      }\n    }\n\n    function keySet (array) {\n      var keys = {};\n      for (var i = 0; i < array.length; ++i) {\n        keys[array[i]] = true;\n      }\n      return keys;\n    }\n\n    function tokenSComment (stream, state) { // SComment = Slash comment\n      stream.skipToEnd();\n      state.tokenize = tokenBase;\n      return ret('comment', 'comment');\n    }\n\n    function tokenCComment (stream, state) {\n      var maybeEnd = false;\n      var ch;\n      while ((ch = stream.next()) != null) {\n        if (maybeEnd && ch === '/') {\n          state.tokenize = tokenBase;\n          break;\n        }\n        maybeEnd = (ch === '*');\n      }\n      return ret('comment', 'comment');\n    }\n\n    function tokenSGMLComment (stream, state) {\n      var dashes = 0;\n      var ch;\n      while ((ch = stream.next()) != null) {\n        if (dashes >= 2 && ch === '>') {\n          state.tokenize = tokenBase;\n          break;\n        }\n        dashes = (ch === '-') ? dashes + 1 : 0;\n      }\n      return ret('comment', 'comment');\n    }\n\n    function tokenString (quote) {\n      return function (stream, state) {\n        var escaped = false;\n        var ch;\n        while ((ch = stream.next()) != null) {\n          if (ch === quote && !escaped) {\n            break;\n          }\n          escaped = !escaped && ch === '\\\\';\n        }\n        if (!escaped) state.tokenize = tokenBase;\n        return ret('string', 'string');\n      };\n    }\n\n    return {\n      startState: function (base) {\n        return {\n          tokenize: tokenBase,\n          baseIndent: base || 0,\n          stack: []\n        };\n      },\n\n      token: function (stream, state) {\n        if (stream.eatSpace()) return null;\n        var style = state.tokenize(stream, state);\n\n        var context = state.stack[state.stack.length - 1];\n        if (type === 'hash' && context === 'rule') style = 'atom';\n        else if (style === 'variable') {\n          if (context === 'rule') style = null; // 'tag'\n          else if (!context || context === '@media{') {\n            style = stream.current() === 'when' ? 'variable' : /[\\s,|\\s\\)|\\s]/.test(stream.peek()) ? 'tag' : type;\n          }\n        }\n\n        if (context === 'rule' && /^[\\{\\};]$/.test(type)) {\n          state.stack.pop();\n        }\n        if (type === '{') {\n          if (context === '@media') state.stack[state.stack.length - 1] = '@media{';\n          else state.stack.push('{');\n        } else if (type === '}') state.stack.pop();\n        else if (type === '@media') state.stack.push('@media');\n        else if (context === '{' && type !== 'comment') state.stack.push('rule');\n        return style;\n      },\n\n      indent: function (state, textAfter) {\n        var n = state.stack.length;\n        if (/^\\}/.test(textAfter)) {\n          n -= state.stack[state.stack.length - 1] === 'rule' ? 2 : 1;\n        }\n        return state.baseIndent + n * indentUnit;\n      },\n\n      electricChars: '}'\n    };\n  });\n\n  CodeMirror.defineMIME('text/x-carto', 'cartocss');\n};\n","var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar CodeMirror = require('codemirror');\nvar ColorPicker = require('./colorpicker.code-mirror');\nvar template = require('./code-mirror.tpl');\nvar bulletTemplate = require('./code-mirror-bullet.tpl');\nvar errorTemplate = require('./code-mirror-error.tpl');\nvar warningTemplate = require('./code-mirror-warning.tpl');\nvar DATA_SERVICES = require('./data-services');\n\nrequire('./mode/sql')(CodeMirror);\nrequire('./mode/mustache')(CodeMirror);\nrequire('./cartocss.code-mirror')(CodeMirror);\nrequire('./scroll.code-mirror')(CodeMirror);\nrequire('./show-hint.code-mirror')(CodeMirror);\nrequire('./hint/custom-list-hint')(CodeMirror);\nrequire('./searchcursor.code-mirror')(CodeMirror);\nrequire('./placeholder.code-mirror')(CodeMirror);\n\nvar ESCAPE_KEY_CODE = 27;\nvar RETURN_KEY_CODE = 13;\n\nvar NOHINT = [ESCAPE_KEY_CODE, RETURN_KEY_CODE];\n\nvar ADDONS = {\n  'color-picker': ColorPicker\n};\n\nmodule.exports = CoreView.extend({\n  module: 'components:code-mirror:code-mirror-view',\n\n  className: 'Editor-content',\n\n  options: {\n    readonly: false,\n    lineNumbers: true,\n    autocompleteChars: 3\n  },\n\n  initialize: function (opts) {\n    if (!opts) throw new Error('options for codemirror are required.');\n    if (!opts.model) throw new Error('Model for codemirror is required.');\n    if (opts.model.get('content') === void 0 &&\n        opts.placeholder === void 0) throw new Error('Content property or placeholder for codemirror is required.');\n    if (!opts.tips) throw new Error('tip messages are required');\n\n    this._autocompleteChars = opts.autocompleteChars || this.options.autocompleteChars;\n    this._mode = opts.mode || 'cartocss';\n    this._addons = opts.addons;\n    this._hints = opts.hints;\n    this._autocompletePrefix = opts.autocompletePrefix;\n    this._autocompleteTriggers = opts.autocompleteTriggers;\n    this._autocompleteSuffix = opts.autocompleteSuffix;\n    this._errorTemplate = opts.errorTemplate || errorTemplate;\n    this._warningTemplate = opts.warningTemplate || warningTemplate;\n    this._warnings = null;\n    this._tips = opts.tips;\n    this._lineWithErrors = [];\n    this._onInputRead = _.bind(this._onKeyUpEditor, this);\n    this._placeholder = opts.placeholder;\n  },\n\n  render: function () {\n    this.$el.html(\n      template({\n        content: this.model.get('content'),\n        tips: this._tips.join(' '),\n        warnings: this._warnings\n      })\n    );\n\n    this._initViews();\n    this._bindEvents();\n    this._showErrors();\n    return this;\n  },\n\n  _initViews: function () {\n    var options = _.defaults(_.extend({}, this.model.toJSON()), this.options);\n\n    var isReadOnly = options.readonly;\n    var hasLineNumbers = options.lineNumbers;\n\n    var extraKeys = {\n      'Ctrl-S': this.triggerApplyEvent.bind(this),\n      'Cmd-S': this.triggerApplyEvent.bind(this),\n      'Ctrl-Space': this._completeIfAfterCtrlSpace.bind(this)\n    };\n\n    this.editor = CodeMirror.fromTextArea(this.$('.js-editor').get(0), {\n      lineNumbers: hasLineNumbers,\n      theme: 'material',\n      mode: this._mode,\n      scrollbarStyle: 'simple',\n      lineWrapping: true,\n      readOnly: isReadOnly,\n      extraKeys: extraKeys,\n      placeholder: this._placeholder\n    });\n    this.editor.on('change', _.debounce(this._onCodeMirrorChange.bind(this), 150), this);\n\n    if (!_.isEmpty(this._addons)) {\n      _.each(this._addons, function (addon) {\n        var Class = ADDONS[addon];\n        var addonView = new Class({\n          editor: this.editor\n        });\n        addonView.bind('codeSaved', this.triggerApplyEvent, this);\n        this.$el.append(addonView.el);\n        this.addView(addonView);\n      }, this);\n    }\n\n    if (this._hints) {\n      this.editor.on('keyup', this._onInputRead);\n    }\n\n    this._toggleReadOnly();\n\n    setTimeout(function () {\n      this.editor && this.editor.refresh();\n    }.bind(this), 0);\n  },\n\n  _completeIfAfterCtrlSpace: function (cm) {\n    var autocompletePrefix = this._autocompletePrefix;\n    var opts = {};\n    var cur = cm.getCursor();\n\n    if (autocompletePrefix &&\n        cm.getRange(CodeMirror.Pos(cur.line, cur.ch - autocompletePrefix.length), cur) !== autocompletePrefix) {\n      opts = { autocompletePrefix: autocompletePrefix };\n    }\n\n    return this._completeAfter(cm, opts);\n  },\n\n  updateHints: function (hints) {\n    this._hints = hints;\n  },\n\n  _onKeyUpEditor: function (cm, event) {\n    var code = event.keyCode;\n    var hints = this._hints;\n    var autocompleteChars = this._autocompleteChars - 1;\n    var autocompletePrefix = this._autocompletePrefix;\n\n    if (NOHINT.indexOf(code) === -1) {\n      var self = this;\n\n      if (this._autocompleteTimeout) clearTimeout(this._autocompleteTimeout);\n\n      this._autocompleteTimeout = setTimeout(function () {\n        var opts = {};\n        var cur = cm.getCursor();\n        var str = cm.getTokenAt(cur).string;\n        str = str.toLowerCase();\n\n        if (autocompletePrefix &&\n            cm.getRange(CodeMirror.Pos(cur.line, cur.ch - autocompletePrefix.length), cur) !== autocompletePrefix) {\n          opts = { autocompletePrefix: autocompletePrefix };\n        }\n\n        return self._completeAfter(cm, opts, function () {\n          var autocompleteHandler = function (listItem) {\n            // every list can be an array of strings or an array of objects {text, type}\n            var hit = _.isObject(listItem) ? listItem.text : listItem;\n            hit = hit.toLowerCase();\n            return hit.indexOf(str) !== -1;\n          };\n\n          if (str.length > autocompleteChars) {\n            var listHints = _.filter(hints, autocompleteHandler);\n\n            return listHints.length > 0 || autocompletePrefix && autocompletePrefix === str;\n          }\n        });\n      }, 150);\n    }\n  },\n\n  _onCodeMirrorChange: function () {\n    this.trigger('codeChanged');\n  },\n\n  _completeAfter: function (cm, opts, pred) {\n    if (!pred || pred()) {\n      if (!cm.state.completionActive) {\n        this._showAutocomplete(cm, _.extend({}, opts));\n      }\n    }\n\n    return CodeMirror.Pass;\n  },\n\n  _showAutocomplete: function (cm, opts) {\n    var autocompletePrefix = opts && opts.autocompletePrefix;\n\n    CodeMirror.showHint(cm, CodeMirror.hint['custom-list'], {\n      completeSingle: false,\n      list: this._hints,\n      autocompletePrefix: autocompletePrefix,\n      autocompleteSuffix: this._autocompleteSuffix\n    });\n  },\n\n  _showWarning: function (warnings) {\n    var $warning = this._getWarning();\n    var hasNodes = $warning.children().length;\n\n    if (warnings && !hasNodes) {\n      $warning.append(this._warningTemplate(warnings));\n    }\n  },\n\n  _hideWarning: function () {\n    var $warning = this._getWarning();\n    var hasNodes = $warning.children().length;\n\n    if (hasNodes) {\n      $warning.children()[0].remove();\n    }\n  },\n\n  _bindEvents: function () {\n    var self = this;\n    this.editor.on('change', function (editor, changed) {\n      var content = self.getContent();\n      var dataService = self._containsDataService(content);\n\n      if (dataService) {\n        self._showWarning('Quota error ' + dataService);\n      } else {\n        self._hideWarning();\n      }\n\n      self.model.set('content', content, { silent: true });\n    });\n\n    this.model.on('change:content', function () {\n      this.setContent(this.model.get('content'));\n    }, this);\n\n    this.model.on('change:readonly', this._toggleReadOnly, this);\n\n    this.model.on('change:errors', function () {\n      this._showErrors();\n    }, this);\n\n    this.model.on('undo redo', function () {\n      this.setContent(this.model.get('content'));\n    }, this);\n  },\n\n  _toggleReadOnly: function () {\n    var isReadOnly = !!this.model.get('readonly');\n    this.editor.setOption('readOnly', isReadOnly);\n    if (isReadOnly) {\n      this.editor.setOption('theme', '');\n      this._getInfo().hide();\n    } else {\n      this.editor.setOption('theme', 'material');\n      this._getInfo().show();\n    }\n  },\n\n  search: function (query, caseInsensitive) {\n    var cursor = this.editor.getSearchCursor(query, null, true);\n    cursor.find();\n    return cursor.pos;\n  },\n\n  markReadOnly: function (from, to) {\n    var options = {readOnly: true, inclusiveLeft: true};\n    this.editor.markText(from, to, options);\n\n    for (var i = from.line; i <= to.line; i++) {\n      this.editor.addLineClass(i, 'background', 'CodeMirror-readonlyLine');\n    }\n  },\n\n  setContent: function (value) {\n    this.editor.setValue(value);\n  },\n\n  getContent: function () {\n    return this.editor.getValue();\n  },\n\n  triggerApplyEvent: function () {\n    this.trigger('codeSaved', this.getContent(), this);\n  },\n\n  destroyEditor: function () {\n    this.editor.off('change');\n    var el = this.editor.getWrapperElement();\n    var parent = el.parentNode;\n    parent && parent.removeChild(el);\n    this.editor = null;\n  },\n\n  _getInfo: function () {\n    return this.$('.js-console');\n  },\n\n  _getConsole: function () {\n    return this.$('.js-console-error');\n  },\n\n  _getWarning: function () {\n    return this.$('.js-warning');\n  },\n\n  _getCode: function () {\n    return this.$('.CodeMirror-code');\n  },\n\n  _containsDataService: function (content) {\n    return _.find(DATA_SERVICES, function (dataService) {\n      return content.indexOf(dataService) !== -1;\n    });\n  },\n\n  _removeErrors: function () {\n    this._getConsole().empty();\n    _.each(this._lineWithErrors, function ($line) {\n      $line.find('.CodeMirror-bullet').remove();\n      $line.find('.CodeMirror-linenumber').removeClass('has-error');\n    });\n\n    this._lineWithErrors = [];\n  },\n\n  _showErrors: function () {\n    var errors = this.model.get('errors');\n    this._removeErrors();\n\n    if (errors && errors.length > 0) {\n      _.each(errors, function (err) {\n        this._renderError(err);\n        this._renderBullet(err);\n      }, this);\n    }\n  },\n\n  _renderBullet: function (error) {\n    var line = error.line;\n    var $line;\n    if (line) {\n      $line = this._getCode().children().eq(+line - 1);\n      $line.append(bulletTemplate);\n      $line.find('.CodeMirror-linenumber').addClass('has-error');\n      this._lineWithErrors.push($line);\n    }\n  },\n\n  _renderError: function (error) {\n    this._getConsole().append(this._errorTemplate(error));\n  },\n\n  clean: function () {\n    this.destroyEditor();\n    CoreView.prototype.clean.apply(this);\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar $ = require('jquery');\nvar _ = require('underscore');\nvar ColorPicker = require('builder/components/color-picker/color-picker.js');\nvar COLOR_KEYWORDS = require('builder/helpers/color-keywords');\n\n/**\n *  Show color picker when user clicks over\n *  a color in the Codemirror editor.\n *\n *  new CodemirrorColorPicker({\n *    editor: codemirror-editor...\n *  })\n */\n\nvar REQUIRED_OPTS = [\n  'editor'\n];\n\nvar STYLE = _.template('1px solid  <%- color %>');\nvar COLORPICKER_HEIGHT = 220;\n\nvar stopPropagation = function (e) {\n  e.stopPropagation();\n};\n\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (opts[item] === undefined) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n\n    this._updateColors = _.debounce(this._updateColors, 5).bind(this);\n    this._onDocumentClick = this._onDocumentClick.bind(this);\n    this._editor = opts.editor;\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    var self = this;\n    var destroyPicker = function () {\n      this._destroyPicker();\n    }.bind(this);\n\n    this._enableUpdateBind();\n\n    this._editor.on('mousedown', function (cm, ev) {\n      _.delay(self._onClick.bind(self, cm, ev), 50);\n    });\n\n    this._editor.on('keydown', destroyPicker);\n    this._editor.on('viewportChange', destroyPicker);\n    this._editor.on('scroll', destroyPicker);\n\n    var wrapper = this._editor.getWrapperElement();\n    wrapper.addEventListener('click', stopPropagation);\n  },\n\n  _disableBinds: function () {\n    var wrapper = this._editor.getWrapperElement();\n    wrapper.removeEventListener('click', stopPropagation);\n    this._editor.off(null, null, this);\n  },\n\n  _enableUpdateBind: function () {\n    this._editor.on('update', this._updateColors);\n  },\n\n  _disableUpdateBind: function () {\n    this._editor.off('update', this._updateColors);\n  },\n\n  _onClick: function (cm, ev) {\n    var cursor = this._editor.getCursor(true);\n    var token = this._editor.getTokenAt(cursor);\n\n    if (token.type === 'color') {\n      this._createPicker(ev, cursor, token);\n    } else {\n      this._destroyPicker();\n    }\n  },\n\n  _updateColors: function (cm) {\n    var wrapper = cm.getWrapperElement();\n    _.each(wrapper.querySelectorAll('.cm-color'), function (node) {\n      this._paintColor(node.textContent, node);\n    }, this);\n  },\n\n  _replaceColor: function (color, target) {\n    var cursor = this._editor.getCursor();\n    var nameMatch = this._getMatch(cursor, 'name');\n    var hexMatch = this._getMatch(cursor, 'hex');\n    var match = nameMatch || hexMatch;\n    var start;\n    var end;\n\n    if (match) {\n      start = {\n        line: cursor.line,\n        ch: match.start\n      };\n      end = {\n        line: cursor.line,\n        ch: match.end\n      };\n\n      this._editor.replaceRange(color, start, end, 'paste');\n\n      var wrapper = this._editor.getWrapperElement();\n      _.each(wrapper.querySelectorAll('.cm-color'), function (node) {\n        var nodeStyle = node.style;\n        var nodeColor = node.innerText;\n        if (!nodeStyle || !nodeStyle.borderBottom) {\n          this._paintColor(nodeColor, node);\n        }\n      }, this);\n    }\n  },\n\n  _paintColor: function (color, target) {\n    target.style.borderBottom = STYLE({color: color});\n  },\n\n  _getMatch: function (cursor, type) {\n    if (!type) return;\n    var re;\n\n    switch (type.toLowerCase()) {\n      case 'name':\n        re = new RegExp(COLOR_KEYWORDS.join('|'), 'g');\n        break;\n      case 'hsl':\n        re = /hsla?\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3}\\%)\\s*,\\s*(\\d{1,3}\\%)\\s*(?:\\s*,\\s*(\\d+(?:\\.\\d+)?)\\s*)?\\)/g;\n        break;\n      case 'rgb':\n        re = /rgb\\((\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3})\\)/;\n        break;\n      case 'hex':\n        re = /#[a-fA-F0-9]{3,6}/g;\n        break;\n      default:\n        console.log('Invalid color match selection');\n        return;\n    }\n\n    var line = this._editor.getLine(cursor.line);\n    var match = re.exec(line);\n\n    while (match) {\n      var val = match[0];\n      var len = val.length;\n      var start = match.index;\n      var end = match.index + len;\n      if (cursor.ch >= start && cursor.ch <= end) {\n        match = null;\n        return {\n          start: start,\n          end: end,\n          string: val\n        };\n      }\n      match = re.exec(line);\n    }\n  },\n\n  _createPicker: function (ev, cursor, token) {\n    var cursorCoords = this._editor.cursorCoords();\n    this._destroyPicker();\n\n    this._colorPicker = new ColorPicker({\n      className: 'Editor-boxModal ColorPicker--cm Editor-boxModal--darked Editor-FormDialog CDB-Text',\n      value: token.string,\n      disableOpacity: true\n    });\n    this._colorPicker.$el.attr('data-colorpicker-cid', this.cid);\n    this._colorPicker.bind('change', _.debounce(this._onColorPickerChange.bind(this, ev), 5), this);\n\n    var top = cursorCoords.top + 20;\n    var maxTop = $(window).outerHeight();\n\n    if (top + COLORPICKER_HEIGHT > maxTop) {\n      top = cursorCoords.top - COLORPICKER_HEIGHT - 20;\n    }\n\n    this._colorPicker.$el.css({\n      left: cursorCoords.left,\n      top: top\n    });\n\n    document.body.appendChild(this._colorPicker.render().el);\n    document.addEventListener('click', this._onDocumentClick);\n  },\n\n  _onDocumentClick: function (e) {\n    var $el = $(e.target);\n    if ($el.closest('[data-colorpicker-cid=\"' + this.cid + '\"]').length === 0) {\n      this._destroyPicker();\n    }\n  },\n\n  _onColorPickerChange: function (ev, values) {\n    this._disableUpdateBind();\n    this._replaceColor(values.hex, ev.target);\n    this.trigger('codeSaved');\n    this._enableUpdateBind();\n  },\n\n  _destroyPicker: function () {\n    if (this._colorPicker) {\n      this.removeView(this._colorPicker);\n      this._colorPicker.clean();\n      delete this._colorPicker;\n    }\n\n    document.removeEventListener('click', this._onDocumentClick);\n  },\n\n  clean: function () {\n    this._disableBinds();\n    CoreView.prototype.clean.call(this);\n  }\n});\n","module.exports = [\n  'cdb_geocode_street_point',\n  'cdb_isodistance',\n  'cdb_isochrone',\n  'OBS_GetDemographicSnapshot',\n  'cdb_route_point_to_point',\n  'cdb_route_with_waypoints'\n];\n","var _ = require('underscore');\n\nmodule.exports = function (CodeMirror) {\n  var Pos = CodeMirror.Pos;\n\n  function arrayContains (arr, item) {\n    return arr.indexOf(item) !== -1;\n  }\n\n  function scriptHint (editor, keywords, getToken, options) {\n    // Find the token at the cursor\n    var cur = editor.getCursor();\n    var token = getToken(editor, cur);\n    var tprop = token;\n    var context = [];\n    token.state = CodeMirror.innerMode(editor.getMode(), token.state).state;\n\n    // If it's not a 'word-style' token, ignore the token.\n    if (!/^[\\w$_-]*$/.test(token.string)) {\n      token = tprop = {\n        start: cur.ch,\n        end: cur.ch,\n        string: '',\n        state: token.state,\n        type: token.string === '.' ? 'property' : null\n      };\n    }\n    // If it is a property, find out what it is a property of.\n    while (tprop.type === 'property') {\n      tprop = getToken(editor, Pos(cur.line, tprop.start));\n      if (tprop.string !== '.') return;\n      tprop = getToken(editor, Pos(cur.line, tprop.start));\n      if (tprop.string === ')') {\n        var level = 1;\n        do {\n          tprop = getToken(editor, Pos(cur.line, tprop.start));\n          switch (tprop.string) {\n            case ')':\n              level++;\n              break;\n            case '(':\n              level--;\n              break;\n            default:\n              break;\n          }\n        } while (level > 0);\n        tprop = getToken(editor, Pos(cur.line, tprop.start));\n        if (tprop.type.indexOf('variable') === 0) tprop.type = 'function';\n        else return; // no clue\n      }\n      context.push(tprop);\n    }\n\n    return {\n      list: getCompletions(token, context, keywords, options),\n      from: Pos(cur.line, token.start),\n      to: Pos(cur.line, token.end)\n    };\n  }\n\n  function columnsHint (editor, options) {\n    return scriptHint(editor, [], /* javascriptKeywords */\n      function (e, cur) {\n        return e.getTokenAt(cur);\n      },\n      options);\n  }\n\n  CodeMirror.registerHelper('hint', 'custom-list', columnsHint);\n\n  function getCompletions (token, context, keywords, options) {\n    var found = [];\n    var start = token.string.toLowerCase();\n\n    function maybeAdd (str) {\n      var hit = _.isObject(str) ? str.text : str;\n      hit = hit.toLowerCase();\n      if (hit.indexOf(start) === 0 && start !== hit && !arrayContains(found, hit)) {\n        found.push(str);\n      }\n    }\n\n    function gatherCompletions (obj) {\n      for (var name in obj) {\n        maybeAdd(obj[name]);\n      }\n    }\n\n    gatherCompletions(options.list);\n    _.each(keywords, maybeAdd);\n\n    return found;\n  }\n};\n","module.exports = function (CodeMirror) {\n  CodeMirror.defineMode('mustache', function () {\n    return {\n      token: function (stream, state) {\n        var ch;\n\n        if (stream.match('{{')) {\n          ch = stream.peek();\n          if (ch == null || ch != null && ch.match(/[{]{1,}/)) {\n            stream.next();\n            return 'mustache-error';\n          } else if (ch != null && ch.match(/[a-zA-Z\\u00C0-\\u024F_]+/)) {\n            return null;\n          }\n        }\n\n        if (stream.match('}}')) {\n          ch = stream.peek();\n          if (ch != null && ch.match(/[}]{1,}/)) {\n            stream.next();\n            return 'mustache-error';\n          } else if (ch == null) {\n            return null;\n          }\n        }\n\n        if (stream.match('}')) {\n          ch = stream.peek();\n          if (ch == null || ch != null && ch.match(/[}]{1,}/)) {\n            stream.next();\n            return 'mustache-error';\n          }\n        }\n\n        if (stream.match('{')) {\n          ch = stream.peek();\n          if (ch == null || ch != null && ch.match(/[{]{1,}/)) {\n            stream.next();\n            return 'mustache-error';\n          }\n        }\n\n        // Delimiter character\n        if (stream.match(/[a-zA-Z\\u00C0-\\u024F_]+/, true)) {\n          return 'mustache-text';\n        }\n\n        // jump to the next item, needed OR CRASH\n        stream.next();\n      }\n    };\n  });\n\n  (function () {\n    var sqlKeywords = '{{  }}';\n\n    function set (str) {\n      var obj = {};\n      var words = str.split(' ');\n      for (var i = 0; i < words.length; ++i) obj[words[i]] = true;\n      return obj;\n    }\n\n    CodeMirror.defineMIME('text/mustache', {\n      name: 'mustache',\n      client: set('source'),\n      keywords: set(sqlKeywords)\n    });\n  }());\n};\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n/* eslint-disable */\nmodule.exports = function(CodeMirror) {\n\"use strict\";\n\nCodeMirror.defineMode(\"sql\", function(config, parserConfig) {\n  \"use strict\";\n\n  var client         = parserConfig.client || {},\n      atoms          = parserConfig.atoms || {\"false\": true, \"true\": true, \"null\": true},\n      builtin        = parserConfig.builtin || {},\n      keywords       = parserConfig.keywords || {},\n      operatorChars  = parserConfig.operatorChars || /^[*+\\-%<>!=&|~^]/,\n      support        = parserConfig.support || {},\n      hooks          = parserConfig.hooks || {},\n      dateSQL        = parserConfig.dateSQL || {\"date\" : true, \"time\" : true, \"timestamp\" : true};\n\n  function tokenBase(stream, state) {\n    var ch = stream.next();\n\n    // call hooks from the mime type\n    if (hooks[ch]) {\n      var result = hooks[ch](stream, state);\n      if (result !== false) return result;\n    }\n\n    if (support.hexNumber == true &&\n      ((ch == \"0\" && stream.match(/^[xX][0-9a-fA-F]+/))\n      || (ch == \"x\" || ch == \"X\") && stream.match(/^'[0-9a-fA-F]+'/))) {\n      // hex\n      // ref: http://dev.mysql.com/doc/refman/5.5/en/hexadecimal-literals.html\n      return \"number\";\n    } else if (support.binaryNumber == true &&\n      (((ch == \"b\" || ch == \"B\") && stream.match(/^'[01]+'/))\n      || (ch == \"0\" && stream.match(/^b[01]+/)))) {\n      // bitstring\n      // ref: http://dev.mysql.com/doc/refman/5.5/en/bit-field-literals.html\n      return \"number\";\n    } else if (ch.charCodeAt(0) > 47 && ch.charCodeAt(0) < 58) {\n      // numbers\n      // ref: http://dev.mysql.com/doc/refman/5.5/en/number-literals.html\n          stream.match(/^[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?/);\n      support.decimallessFloat == true && stream.eat('.');\n      return \"number\";\n    } else if (ch == \"?\" && (stream.eatSpace() || stream.eol() || stream.eat(\";\"))) {\n      // placeholders\n      return \"variable-3\";\n    } else if (ch == \"'\" || (ch == '\"' && support.doubleQuote)) {\n      // strings\n      // ref: http://dev.mysql.com/doc/refman/5.5/en/string-literals.html\n      state.tokenize = tokenLiteral(ch);\n      return state.tokenize(stream, state);\n    } else if ((((support.nCharCast == true && (ch == \"n\" || ch == \"N\"))\n        || (support.charsetCast == true && ch == \"_\" && stream.match(/[a-z][a-z0-9]*/i)))\n        && (stream.peek() == \"'\" || stream.peek() == '\"'))) {\n      // charset casting: _utf8'str', N'str', n'str'\n      // ref: http://dev.mysql.com/doc/refman/5.5/en/string-literals.html\n      return \"keyword\";\n    } else if (/^[\\(\\),\\;\\[\\]]/.test(ch)) {\n      // no highlighting\n      return null;\n    } else if (support.commentSlashSlash && ch == \"/\" && stream.eat(\"/\")) {\n      // 1-line comment\n      stream.skipToEnd();\n      return \"comment\";\n    } else if ((support.commentHash && ch == \"#\")\n        || (ch == \"-\" && stream.eat(\"-\") && (!support.commentSpaceRequired || stream.eat(\" \")))) {\n      // 1-line comments\n      // ref: https://kb.askmonty.org/en/comment-syntax/\n      stream.skipToEnd();\n      return \"comment\";\n    } else if (ch == \"/\" && stream.eat(\"*\")) {\n      // multi-line comments\n      // ref: https://kb.askmonty.org/en/comment-syntax/\n      state.tokenize = tokenComment;\n      return state.tokenize(stream, state);\n    } else if (ch == \".\") {\n      // .1 for 0.1\n      if (support.zerolessFloat == true && stream.match(/^(?:\\d+(?:e[+-]?\\d+)?)/i)) {\n        return \"number\";\n      }\n      // .table_name (ODBC)\n      // // ref: http://dev.mysql.com/doc/refman/5.6/en/identifier-qualifiers.html\n      if (support.ODBCdotTable == true && stream.match(/^[a-zA-Z_]+/)) {\n        return \"variable-2\";\n      }\n    } else if (operatorChars.test(ch)) {\n      // operators\n      stream.eatWhile(operatorChars);\n      return null;\n    } else if (ch == '{' &&\n        (stream.match(/^( )*(d|D|t|T|ts|TS)( )*'[^']*'( )*}/) || stream.match(/^( )*(d|D|t|T|ts|TS)( )*\"[^\"]*\"( )*}/))) {\n      // dates (weird ODBC syntax)\n      // ref: http://dev.mysql.com/doc/refman/5.5/en/date-and-time-literals.html\n      return \"number\";\n    } else {\n      stream.eatWhile(/^[_\\w\\d]/);\n      var word = stream.current().toLowerCase();\n      // dates (standard SQL syntax)\n      // ref: http://dev.mysql.com/doc/refman/5.5/en/date-and-time-literals.html\n      if (dateSQL.hasOwnProperty(word) && (stream.match(/^( )+'[^']*'/) || stream.match(/^( )+\"[^\"]*\"/)))\n        return \"number\";\n      if (atoms.hasOwnProperty(word)) return \"atom\";\n      if (builtin.hasOwnProperty(word)) return \"builtin\";\n      if (keywords.hasOwnProperty(word)) return \"keyword\";\n      if (client.hasOwnProperty(word)) return \"string-2\";\n      return null;\n    }\n  }\n\n  // 'string', with char specified in quote escaped by '\\'\n  function tokenLiteral(quote) {\n    return function(stream, state) {\n      var escaped = false, ch;\n      while ((ch = stream.next()) != null) {\n        if (ch == quote && !escaped) {\n          state.tokenize = tokenBase;\n          break;\n        }\n        escaped = !escaped && ch == \"\\\\\";\n      }\n      return \"string\";\n    };\n  }\n  function tokenComment(stream, state) {\n    while (true) {\n      if (stream.skipTo(\"*\")) {\n        stream.next();\n        if (stream.eat(\"/\")) {\n          state.tokenize = tokenBase;\n          break;\n        }\n      } else {\n        stream.skipToEnd();\n        break;\n      }\n    }\n    return \"comment\";\n  }\n\n  function pushContext(stream, state, type) {\n    state.context = {\n      prev: state.context,\n      indent: stream.indentation(),\n      col: stream.column(),\n      type: type\n    };\n  }\n\n  function popContext(state) {\n    state.indent = state.context.indent;\n    state.context = state.context.prev;\n  }\n\n  return {\n    startState: function() {\n      return {tokenize: tokenBase, context: null};\n    },\n\n    token: function(stream, state) {\n      if (stream.sol()) {\n        if (state.context && state.context.align == null)\n          state.context.align = false;\n      }\n      if (stream.eatSpace()) return null;\n\n      var style = state.tokenize(stream, state);\n      if (style == \"comment\") return style;\n\n      if (state.context && state.context.align == null)\n        state.context.align = true;\n\n      var tok = stream.current();\n      if (tok == \"(\")\n        pushContext(stream, state, \")\");\n      else if (tok == \"[\")\n        pushContext(stream, state, \"]\");\n      else if (state.context && state.context.type == tok)\n        popContext(state);\n      return style;\n    },\n\n    indent: function(state, textAfter) {\n      var cx = state.context;\n      if (!cx) return CodeMirror.Pass;\n      var closing = textAfter.charAt(0) == cx.type;\n      if (cx.align) return cx.col + (closing ? 0 : 1);\n      else return cx.indent + (closing ? 0 : config.indentUnit);\n    },\n\n    blockCommentStart: \"/*\",\n    blockCommentEnd: \"*/\",\n    lineComment: support.commentSlashSlash ? \"//\" : support.commentHash ? \"#\" : null\n  };\n});\n\n(function() {\n  \"use strict\";\n\n  // `identifier`\n  function hookIdentifier(stream) {\n    // MySQL/MariaDB identifiers\n    // ref: http://dev.mysql.com/doc/refman/5.6/en/identifier-qualifiers.html\n    var ch;\n    while ((ch = stream.next()) != null) {\n      if (ch == \"`\" && !stream.eat(\"`\")) return \"variable-2\";\n    }\n    stream.backUp(stream.current().length - 1);\n    return stream.eatWhile(/\\w/) ? \"variable-2\" : null;\n  }\n\n  // variable token\n  function hookVar(stream) {\n    // variables\n    // @@prefix.varName @varName\n    // varName can be quoted with ` or ' or \"\n    // ref: http://dev.mysql.com/doc/refman/5.5/en/user-variables.html\n    if (stream.eat(\"@\")) {\n      stream.match(/^session\\./);\n      stream.match(/^local\\./);\n      stream.match(/^global\\./);\n    }\n\n    if (stream.eat(\"'\")) {\n      stream.match(/^.*'/);\n      return \"variable-2\";\n    } else if (stream.eat('\"')) {\n      stream.match(/^.*\"/);\n      return \"variable-2\";\n    } else if (stream.eat(\"`\")) {\n      stream.match(/^.*`/);\n      return \"variable-2\";\n    } else if (stream.match(/^[0-9a-zA-Z$\\.\\_]+/)) {\n      return \"variable-2\";\n    }\n    return null;\n  };\n\n  // short client keyword token\n  function hookClient(stream) {\n    // \\N means NULL\n    // ref: http://dev.mysql.com/doc/refman/5.5/en/null-values.html\n    if (stream.eat(\"N\")) {\n        return \"atom\";\n    }\n    // \\g, etc\n    // ref: http://dev.mysql.com/doc/refman/5.5/en/mysql-commands.html\n    return stream.match(/^[a-zA-Z.#!?]/) ? \"variable-2\" : null;\n  }\n\n  // these keywords are used by all SQL dialects (however, a mode can still overwrite it)\n  var sqlKeywords = \"alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where limit \";\n\n  // turn a space-separated list into an array\n  function set(str) {\n    var obj = {}, words = str.split(\" \");\n    for (var i = 0; i < words.length; ++i) obj[words[i]] = true;\n    return obj;\n  }\n\n  CodeMirror.defineMIME(\"text/x-pgsql\", {\n    name: \"sql\",\n    client: set(\"source\"),\n    // http://www.postgresql.org/docs/9.5/static/sql-keywords-appendix.html\n    keywords: set(sqlKeywords + \"a abort abs absent absolute access according action ada add admin after aggregate all allocate also always analyse analyze any are array array_agg array_max_cardinality asensitive assertion assignment asymmetric at atomic attribute attributes authorization avg backward base64 before begin begin_frame begin_partition bernoulli binary bit_length blob blocked bom both breadth c cache call called cardinality cascade cascaded case cast catalog catalog_name ceil ceiling chain characteristics characters character_length character_set_catalog character_set_name character_set_schema char_length check checkpoint class class_origin clob close cluster coalesce cobol collate collation collation_catalog collation_name collation_schema collect column columns column_name command_function command_function_code comment comments commit committed concurrently condition condition_number configuration conflict connect connection connection_name constraint constraints constraint_catalog constraint_name constraint_schema constructor contains content continue control conversion convert copy corr corresponding cost covar_pop covar_samp cross csv cube cume_dist current current_catalog current_date current_default_transform_group current_path current_role current_row current_schema current_time current_timestamp current_transform_group_for_type current_user cursor cursor_name cycle data database datalink datetime_interval_code datetime_interval_precision day db deallocate dec declare default defaults deferrable deferred defined definer degree delimiter delimiters dense_rank depth deref derived describe descriptor deterministic diagnostics dictionary disable discard disconnect dispatch dlnewcopy dlpreviouscopy dlurlcomplete dlurlcompleteonly dlurlcompletewrite dlurlpath dlurlpathonly dlurlpathwrite dlurlscheme dlurlserver dlvalue do document domain dynamic dynamic_function dynamic_function_code each element else empty enable encoding encrypted end end-exec end_frame end_partition enforced enum equals escape event every except exception exclude excluding exclusive exec execute exists exp explain expression extension external extract false family fetch file filter final first first_value flag float floor following for force foreign fortran forward found frame_row free freeze fs full function functions fusion g general generated get global go goto grant granted greatest grouping groups handler header hex hierarchy hold hour id identity if ignore ilike immediate immediately immutable implementation implicit import including increment indent index indexes indicator inherit inherits initially inline inner inout input insensitive instance instantiable instead integrity intersect intersection invoker isnull isolation k key key_member key_type label lag language large last last_value lateral lead leading leakproof least left length level library like_regex link listen ln load local localtime localtimestamp location locator lock locked logged lower m map mapping match matched materialized max maxvalue max_cardinality member merge message_length message_octet_length message_text method min minute minvalue mod mode modifies module month more move multiset mumps name names namespace national natural nchar nclob nesting new next nfc nfd nfkc nfkd nil no none normalize normalized nothing notify notnull nowait nth_value ntile null nullable nullif nulls number object occurrences_regex octets octet_length of off offset oids old only open operator option options ordering ordinality others out outer output over overlaps overlay overriding owned owner p pad parameter parameter_mode parameter_name parameter_ordinal_position parameter_specific_catalog parameter_specific_name parameter_specific_schema parser partial partition pascal passing passthrough password percent percentile_cont percentile_disc percent_rank period permission placing plans pli policy portion position position_regex power precedes preceding prepare prepared preserve primary prior privileges procedural procedure program public quote range rank read reads reassign recheck recovery recursive ref references referencing refresh regr_avgx regr_avgy regr_count regr_intercept regr_r2 regr_slope regr_sxx regr_sxy regr_syy reindex relative release rename repeatable replace replica requiring reset respect restart restore restrict result return returned_cardinality returned_length returned_octet_length returned_sqlstate returning returns revoke right role rollback rollup routine routine_catalog routine_name routine_schema row rows row_count row_number rule savepoint scale schema schema_name scope scope_catalog scope_name scope_schema scroll search second section security selective self sensitive sequence sequences serializable server server_name session session_user setof sets share show similar simple size skip snapshot some source space specific specifictype specific_name sql sqlcode sqlerror sqlexception sqlstate sqlwarning sqrt stable standalone start state statement static statistics stddev_pop stddev_samp stdin stdout storage strict strip structure style subclass_origin submultiset substring substring_regex succeeds sum symmetric sysid system system_time system_user t tables tablesample tablespace table_name temp template temporary then ties timezone_hour timezone_minute to token top_level_count trailing transaction transactions_committed transactions_rolled_back transaction_active transform transforms translate translate_regex translation treat trigger trigger_catalog trigger_name trigger_schema trim trim_array true truncate trusted type types uescape unbounded uncommitted under unencrypted unique unknown unlink unlisten unlogged unnamed unnest until untyped upper uri usage user user_defined_type_catalog user_defined_type_code user_defined_type_name user_defined_type_schema using vacuum valid validate validator value value_of varbinary variadic var_pop var_samp verbose version versioning view views volatile when whenever whitespace width_bucket window within work wrapper write xmlagg xmlattributes xmlbinary xmlcast xmlcomment xmlconcat xmldeclaration xmldocument xmlelement xmlexists xmlforest xmliterate xmlnamespaces xmlparse xmlpi xmlquery xmlroot xmlschema xmlserialize xmltable xmltext xmlvalidate year yes loop repeat\"),\n    // http://www.postgresql.org/docs/9.5/static/datatype.html\n    builtin: set(\"bigint int8 bigserial serial8 bit varying varbit boolean bool box bytea character char varchar cidr circle date double precision float8 inet integer int int4 interval json jsonb line lseg macaddr money numeric decimal path pg_lsn point polygon real float4 smallint int2 smallserial serial2 serial serial4 text time without zone with timetz timestamp timestamptz tsquery tsvector txid_snapshot uuid xml\"),\n    atoms: set(\"false true null unknown\"),\n    operatorChars: /^[*+\\-%<>!=&|^]/,\n    dateSQL: set(\"date time timestamp\"),\n    support: set(\"ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber nCharCast charsetCast commentHash commentSpaceRequired\")\n  });\n}());\n\n};\n\n/* eslint-enable */\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n/* eslint-disable */\nmodule.exports = function (CodeMirror) {\n  CodeMirror.defineOption(\"placeholder\", \"\", function(cm, val, old) {\n    var prev = old && old != CodeMirror.Init;\n    if (val && !prev) {\n      cm.on(\"blur\", onBlur);\n      cm.on(\"change\", onChange);\n      cm.on(\"swapDoc\", onChange);\n      onChange(cm);\n    } else if (!val && prev) {\n      cm.off(\"blur\", onBlur);\n      cm.off(\"change\", onChange);\n      cm.off(\"swapDoc\", onChange);\n      clearPlaceholder(cm);\n      var wrapper = cm.getWrapperElement();\n      wrapper.className = wrapper.className.replace(\" CodeMirror-empty\", \"\");\n    }\n\n    if (val && !cm.hasFocus()) onBlur(cm);\n  });\n\n  function clearPlaceholder(cm) {\n    if (cm.state.placeholder) {\n      cm.state.placeholder.parentNode.removeChild(cm.state.placeholder);\n      cm.state.placeholder = null;\n    }\n  }\n  function setPlaceholder(cm) {\n    clearPlaceholder(cm);\n    var elt = cm.state.placeholder = document.createElement(\"pre\");\n    elt.style.cssText = \"height: 0; overflow: visible\";\n    elt.className = \"CodeMirror-placeholder\";\n    var placeHolder = cm.getOption(\"placeholder\")\n    if (typeof placeHolder == \"string\") placeHolder = document.createTextNode(placeHolder)\n    elt.appendChild(placeHolder)\n    cm.display.lineSpace.insertBefore(elt, cm.display.lineSpace.firstChild);\n  }\n\n  function onBlur(cm) {\n    if (isEmpty(cm)) setPlaceholder(cm);\n  }\n  function onChange(cm) {\n    var wrapper = cm.getWrapperElement(), empty = isEmpty(cm);\n    wrapper.className = wrapper.className.replace(\" CodeMirror-empty\", \"\") + (empty ? \" CodeMirror-empty\" : \"\");\n\n    if (empty) setPlaceholder(cm);\n    else clearPlaceholder(cm);\n  }\n\n  function isEmpty(cm) {\n    return (cm.lineCount() === 1) && (cm.getLine(0) === \"\");\n  }\n};\n/* eslint-enable */\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\nmodule.exports = function (CodeMirror) {\n  function Bar (cls, orientation, scroll) {\n    this.orientation = orientation;\n    this.scroll = scroll;\n    this.screen = this.total = this.size = 1;\n    this.pos = 0;\n\n    this.node = document.createElement('div');\n    this.node.className = cls + '-' + orientation;\n    this.inner = this.node.appendChild(document.createElement('div'));\n\n    var self = this;\n    CodeMirror.on(this.inner, 'mousedown', function (e) {\n      if (e.which !== 1) return;\n      CodeMirror.e_preventDefault(e);\n      var axis = self.orientation === 'horizontal' ? 'pageX' : 'pageY';\n      var start = e[axis];\n      var startpos = self.pos;\n      function done () {\n        CodeMirror.off(document, 'mousemove', move);\n        CodeMirror.off(document, 'mouseup', done);\n      }\n      function move (e) {\n        if (e.which !== 1) return done();\n        self.moveTo(startpos + (e[axis] - start) * (self.total / self.size));\n      }\n      CodeMirror.on(document, 'mousemove', move);\n      CodeMirror.on(document, 'mouseup', done);\n    });\n\n    CodeMirror.on(this.node, 'click', function (e) {\n      CodeMirror.e_preventDefault(e);\n      var innerBox = self.inner.getBoundingClientRect();\n      var where;\n      if (self.orientation === 'horizontal') {\n        where = e.clientX < innerBox.left ? -1 : e.clientX > innerBox.right ? 1 : 0;\n      } else {\n        where = e.clientY < innerBox.top ? -1 : e.clientY > innerBox.bottom ? 1 : 0;\n      }\n      self.moveTo(self.pos + where * self.screen);\n    });\n\n    function onWheel (e) {\n      var moved = CodeMirror.wheelEventPixels(e)[self.orientation === 'horizontal' ? 'x' : 'y'];\n      var oldPos = self.pos;\n      self.moveTo(self.pos + moved);\n      if (self.pos !== oldPos) {\n        CodeMirror.e_preventDefault(e);\n      }\n    }\n    CodeMirror.on(this.node, 'mousewheel', onWheel);\n    CodeMirror.on(this.node, 'DOMMouseScroll', onWheel);\n  }\n\n  Bar.prototype.setPos = function (pos, force) {\n    if (pos < 0) pos = 0;\n    if (pos > this.total - this.screen) pos = this.total - this.screen;\n    if (!force && pos === this.pos) return false;\n    this.pos = pos;\n    this.inner.style[this.orientation === 'horizontal' ? 'left' : 'top'] =\n      (pos * (this.size / this.total)) + 'px';\n    return true;\n  };\n\n  Bar.prototype.moveTo = function (pos) {\n    if (this.setPos(pos)) this.scroll(pos, this.orientation);\n  };\n\n  var minButtonSize = 10;\n\n  Bar.prototype.update = function (scrollSize, clientSize, barSize) {\n    var sizeChanged = this.screen !== clientSize || this.total !== scrollSize || this.size !== barSize;\n    if (sizeChanged) {\n      this.screen = clientSize;\n      this.total = scrollSize;\n      this.size = barSize;\n    }\n\n    var buttonSize = this.screen * (this.size / this.total);\n    if (buttonSize < minButtonSize) {\n      this.size -= minButtonSize - buttonSize;\n      buttonSize = minButtonSize;\n    }\n    this.inner.style[this.orientation === 'horizontal' ? 'width' : 'height'] =\n      buttonSize + 'px';\n    this.setPos(this.pos, sizeChanged);\n  };\n\n  function SimpleScrollbars (cls, place, scroll) {\n    this.addClass = cls;\n    this.horiz = new Bar(cls, 'horizontal', scroll);\n    place(this.horiz.node);\n    this.vert = new Bar(cls, 'vertical', scroll);\n    place(this.vert.node);\n    this.width = null;\n  }\n\n  SimpleScrollbars.prototype.update = function (measure) {\n    if (this.width == null) {\n      var style = window.getComputedStyle ? window.getComputedStyle(this.horiz.node) : this.horiz.node.currentStyle;\n      if (style) {\n        this.width = parseInt(style.height, 10);\n      }\n    }\n    var width = this.width || 0;\n\n    var needsH = measure.scrollWidth > measure.clientWidth + 1;\n    var needsV = measure.scrollHeight > measure.clientHeight + 1;\n    this.vert.node.style.display = needsV ? 'block' : 'none';\n    this.horiz.node.style.display = needsH ? 'block' : 'none';\n\n    if (needsV) {\n      this.vert.update(measure.scrollHeight, measure.clientHeight,\n        measure.viewHeight - (needsH ? width : 0));\n      this.vert.node.style.bottom = needsH ? width + 'px' : '0';\n    }\n    if (needsH) {\n      this.horiz.update(measure.scrollWidth, measure.clientWidth,\n        measure.viewWidth - (needsV ? width : 0) - measure.barLeft);\n      this.horiz.node.style.right = needsV ? width + 'px' : '0';\n      this.horiz.node.style.left = measure.barLeft + 'px';\n    }\n\n    return {right: needsV ? width : 0, bottom: needsH ? width : 0};\n  };\n\n  SimpleScrollbars.prototype.setScrollTop = function (pos) {\n    this.vert.setPos(pos);\n  };\n\n  SimpleScrollbars.prototype.setScrollLeft = function (pos) {\n    this.horiz.setPos(pos);\n  };\n\n  SimpleScrollbars.prototype.clear = function () {\n    var parent = this.horiz.node.parentNode;\n    parent.removeChild(this.horiz.node);\n    parent.removeChild(this.vert.node);\n  };\n\n  CodeMirror.scrollbarModel.simple = function (place, scroll) {\n    return new SimpleScrollbars('CodeMirror-simplescroll', place, scroll);\n  };\n\n  CodeMirror.scrollbarModel.overlay = function (place, scroll) {\n    return new SimpleScrollbars('CodeMirror-overlayscroll', place, scroll);\n  };\n};\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\nmodule.exports = function (CodeMirror) {\n  /*eslint-disable */\n  var Pos = CodeMirror.Pos;\n\n  function SearchCursor(doc, query, pos, caseFold) {\n    this.atOccurrence = false; this.doc = doc;\n    if (caseFold == null && typeof query == \"string\") caseFold = false;\n\n    pos = pos ? doc.clipPos(pos) : Pos(0, 0);\n    this.pos = {from: pos, to: pos};\n\n    // The matches method is filled in based on the type of query.\n    // It takes a position and a direction, and returns an object\n    // describing the next occurrence of the query, or null if no\n    // more matches were found.\n    if (typeof query != \"string\") { // Regexp match\n      if (!query.global) query = new RegExp(query.source, query.ignoreCase ? \"ig\" : \"g\");\n      this.matches = function(reverse, pos) {\n        if (reverse) {\n          query.lastIndex = 0;\n          var line = doc.getLine(pos.line).slice(0, pos.ch), cutOff = 0, match, start;\n          for (;;) {\n            query.lastIndex = cutOff;\n            var newMatch = query.exec(line);\n            if (!newMatch) break;\n            match = newMatch;\n            start = match.index;\n            cutOff = match.index + (match[0].length || 1);\n            if (cutOff == line.length) break;\n          }\n          var matchLen = (match && match[0].length) || 0;\n          if (!matchLen) {\n            if (start == 0 && line.length == 0) {match = undefined;}\n            else if (start != doc.getLine(pos.line).length) {\n              matchLen++;\n            }\n          }\n        } else {\n          query.lastIndex = pos.ch;\n          var line = doc.getLine(pos.line), match = query.exec(line);\n          var matchLen = (match && match[0].length) || 0;\n          var start = match && match.index;\n          if (start + matchLen != line.length && !matchLen) matchLen = 1;\n        }\n        if (match && matchLen)\n          return {from: Pos(pos.line, start),\n                  to: Pos(pos.line, start + matchLen),\n                  match: match};\n      };\n    } else { // String query\n      var origQuery = query;\n      if (caseFold) query = query.toLowerCase();\n      var fold = caseFold ? function(str){return str.toLowerCase();} : function(str){return str;};\n      var target = query.split(\"\\n\");\n      // Different methods for single-line and multi-line queries\n      if (target.length == 1) {\n        if (!query.length) {\n          // Empty string would match anything and never progress, so\n          // we define it to match nothing instead.\n          this.matches = function() {};\n        } else {\n          this.matches = function(reverse, pos) {\n            if (reverse) {\n              var orig = doc.getLine(pos.line).slice(0, pos.ch), line = fold(orig);\n              var match = line.lastIndexOf(query);\n              if (match > -1) {\n                match = adjustPos(orig, line, match);\n                return {from: Pos(pos.line, match), to: Pos(pos.line, match + origQuery.length)};\n              }\n             } else {\n               var orig = doc.getLine(pos.line).slice(pos.ch), line = fold(orig);\n               var match = line.indexOf(query);\n               if (match > -1) {\n                 match = adjustPos(orig, line, match) + pos.ch;\n                 return {from: Pos(pos.line, match), to: Pos(pos.line, match + origQuery.length)};\n               }\n            }\n          };\n        }\n      } else {\n        var origTarget = origQuery.split(\"\\n\");\n        this.matches = function(reverse, pos) {\n          var last = target.length - 1;\n          if (reverse) {\n            if (pos.line - (target.length - 1) < doc.firstLine()) return;\n            if (fold(doc.getLine(pos.line).slice(0, origTarget[last].length)) != target[target.length - 1]) return;\n            var to = Pos(pos.line, origTarget[last].length);\n            for (var ln = pos.line - 1, i = last - 1; i >= 1; --i, --ln)\n              if (target[i] != fold(doc.getLine(ln))) return;\n            var line = doc.getLine(ln), cut = line.length - origTarget[0].length;\n            if (fold(line.slice(cut)) != target[0]) return;\n            return {from: Pos(ln, cut), to: to};\n          } else {\n            if (pos.line + (target.length - 1) > doc.lastLine()) return;\n            var line = doc.getLine(pos.line), cut = line.length - origTarget[0].length;\n            if (fold(line.slice(cut)) != target[0]) return;\n            var from = Pos(pos.line, cut);\n            for (var ln = pos.line + 1, i = 1; i < last; ++i, ++ln)\n              if (target[i] != fold(doc.getLine(ln))) return;\n            if (fold(doc.getLine(ln).slice(0, origTarget[last].length)) != target[last]) return;\n            return {from: from, to: Pos(ln, origTarget[last].length)};\n          }\n        };\n      }\n    }\n  }\n\n  SearchCursor.prototype = {\n    findNext: function() {return this.find(false);},\n    findPrevious: function() {return this.find(true);},\n\n    find: function(reverse) {\n      var self = this, pos = this.doc.clipPos(reverse ? this.pos.from : this.pos.to);\n      function savePosAndFail(line) {\n        var pos = Pos(line, 0);\n        self.pos = {from: pos, to: pos};\n        self.atOccurrence = false;\n        return false;\n      }\n\n      for (;;) {\n        if (this.pos = this.matches(reverse, pos)) {\n          this.atOccurrence = true;\n          return this.pos.match || true;\n        }\n        if (reverse) {\n          if (!pos.line) return savePosAndFail(0);\n          pos = Pos(pos.line-1, this.doc.getLine(pos.line-1).length);\n        }\n        else {\n          var maxLine = this.doc.lineCount();\n          if (pos.line == maxLine - 1) return savePosAndFail(maxLine);\n          pos = Pos(pos.line + 1, 0);\n        }\n      }\n    },\n\n    from: function() {if (this.atOccurrence) return this.pos.from;},\n    to: function() {if (this.atOccurrence) return this.pos.to;},\n\n    replace: function(newText, origin) {\n      if (!this.atOccurrence) return;\n      var lines = CodeMirror.splitLines(newText);\n      this.doc.replaceRange(lines, this.pos.from, this.pos.to, origin);\n      this.pos.to = Pos(this.pos.from.line + lines.length - 1,\n                        lines[lines.length - 1].length + (lines.length == 1 ? this.pos.from.ch : 0));\n    }\n  };\n\n  // Maps a position in a case-folded line back to a position in the original line\n  // (compensating for codepoints increasing in number during folding)\n  function adjustPos(orig, folded, pos) {\n    if (orig.length == folded.length) return pos;\n    for (var pos1 = Math.min(pos, orig.length);;) {\n      var len1 = orig.slice(0, pos1).toLowerCase().length;\n      if (len1 < pos) ++pos1;\n      else if (len1 > pos) --pos1;\n      else return pos1;\n    }\n  }\n\n  CodeMirror.defineExtension(\"getSearchCursor\", function(query, pos, caseFold) {\n    return new SearchCursor(this.doc, query, pos, caseFold);\n  });\n  CodeMirror.defineDocExtension(\"getSearchCursor\", function(query, pos, caseFold) {\n    return new SearchCursor(this, query, pos, caseFold);\n  });\n\n  CodeMirror.defineExtension(\"selectMatches\", function(query, caseFold) {\n    var ranges = [];\n    var cur = this.getSearchCursor(query, this.getCursor(\"from\"), caseFold);\n    while (cur.findNext()) {\n      if (CodeMirror.cmpPos(cur.to(), this.getCursor(\"to\")) > 0) break;\n      ranges.push({anchor: cur.from(), head: cur.to()});\n    }\n    if (ranges.length)\n      this.setSelections(ranges, 0);\n  });\n  /* eslint-enable */\n};\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n/* eslint-disable */\nmodule.exports = function (CodeMirror) {\n  \"use strict\";\n\n  var HINT_ELEMENT_CLASS        = \"CodeMirror-hint\";\n  var ACTIVE_HINT_ELEMENT_CLASS = \"CodeMirror-hint-active\";\n\n  // This is the old interface, kept around for now to stay\n  // backwards-compatible.\n  CodeMirror.showHint = function(cm, getHints, options) {\n    if (!getHints) return cm.showHint(options);\n    if (options && options.async) getHints.async = true;\n    var newOpts = {hint: getHints};\n    if (options) for (var prop in options) newOpts[prop] = options[prop];\n    return cm.showHint(newOpts);\n  };\n\n  CodeMirror.defineExtension(\"showHint\", function(options) {\n    options = parseOptions(this, this.getCursor(\"start\"), options);\n    var selections = this.listSelections()\n    if (selections.length > 1) return;\n    // By default, don't allow completion when something is selected.\n    // A hint function can have a `supportsSelection` property to\n    // indicate that it can handle selections.\n    if (this.somethingSelected()) {\n      if (!options.hint.supportsSelection) return;\n      // Don't try with cross-line selections\n      for (var i = 0; i < selections.length; i++)\n        if (selections[i].head.line != selections[i].anchor.line) return;\n    }\n\n    if (this.state.completionActive) this.state.completionActive.close();\n    var completion = this.state.completionActive = new Completion(this, options);\n    if (!completion.options.hint) return;\n\n    CodeMirror.signal(this, \"startCompletion\", this);\n    completion.update(true);\n  });\n\n  function Completion(cm, options) {\n    this.cm = cm;\n    this.options = options;\n    this.widget = null;\n    this.debounce = 0;\n    this.tick = 0;\n    this.startPos = this.cm.getCursor(\"start\");\n    this.startLen = this.cm.getLine(this.startPos.line).length - this.cm.getSelection().length;\n\n    var self = this;\n    cm.on(\"cursorActivity\", this.activityFunc = function() { self.cursorActivity(); });\n  }\n\n  var requestAnimationFrame = window.requestAnimationFrame || function(fn) {\n    return setTimeout(fn, 1000/60);\n  };\n  var cancelAnimationFrame = window.cancelAnimationFrame || clearTimeout;\n\n  Completion.prototype = {\n    close: function() {\n      if (!this.active()) return;\n      this.cm.state.completionActive = null;\n      this.tick = null;\n      this.cm.off(\"cursorActivity\", this.activityFunc);\n\n      if (this.widget && this.data) CodeMirror.signal(this.data, \"close\");\n      if (this.widget) this.widget.close();\n      CodeMirror.signal(this.cm, \"endCompletion\", this.cm);\n    },\n\n    active: function() {\n      return this.cm.state.completionActive == this;\n    },\n\n    pick: function(data, i) {\n      var completion = data.list[i];\n      if (completion.hint) completion.hint(this.cm, data, completion);\n      else this.cm.replaceRange(getText(completion, this.options), completion.from || data.from,\n                                completion.to || data.to, \"complete\");\n      CodeMirror.signal(data, \"pick\", completion);\n      this.close();\n    },\n\n    cursorActivity: function() {\n      if (this.debounce) {\n        cancelAnimationFrame(this.debounce);\n        this.debounce = 0;\n      }\n\n      var pos = this.cm.getCursor(), line = this.cm.getLine(pos.line);\n      if (pos.line != this.startPos.line || line.length - pos.ch != this.startLen - this.startPos.ch ||\n          pos.ch < this.startPos.ch || this.cm.somethingSelected() ||\n          (pos.ch && this.options.closeCharacters.test(line.charAt(pos.ch - 1)))) {\n        this.close();\n      } else {\n        var self = this;\n        this.debounce = requestAnimationFrame(function() {self.update();});\n        if (this.widget) this.widget.disable();\n      }\n    },\n\n    update: function(first) {\n      if (this.tick == null) return\n      var self = this, myTick = ++this.tick\n      fetchHints(this.options.hint, this.cm, this.options, function(data) {\n        if (self.tick == myTick) self.finishUpdate(data, first)\n      })\n    },\n\n    finishUpdate: function(data, first) {\n      if (this.data) CodeMirror.signal(this.data, \"update\");\n\n      var picked = (this.widget && this.widget.picked) || (first && this.options.completeSingle);\n      if (this.widget) this.widget.close();\n\n      if (data && this.data && isNewCompletion(this.data, data)) return;\n      this.data = data;\n\n      if (data && data.list.length) {\n        if (picked && data.list.length == 1) {\n          this.pick(data, 0);\n        } else {\n          this.widget = new Widget(this, data);\n          CodeMirror.signal(data, \"shown\");\n        }\n      }\n    }\n  };\n\n  function isNewCompletion(old, nw) {\n    var moved = CodeMirror.cmpPos(nw.from, old.from)\n    return moved > 0 && old.to.ch - old.from.ch != nw.to.ch - nw.from.ch\n  }\n\n  function parseOptions(cm, pos, options) {\n    var editor = cm.options.hintOptions;\n    var out = {};\n    for (var prop in defaultOptions) out[prop] = defaultOptions[prop];\n    if (editor) for (var prop in editor)\n      if (editor[prop] !== undefined) out[prop] = editor[prop];\n    if (options) for (var prop in options)\n      if (options[prop] !== undefined) out[prop] = options[prop];\n    if (out.hint.resolve) out.hint = out.hint.resolve(cm, pos)\n    return out;\n  }\n\n  function getText(completion, options) {\n    var autocompleteSuffix = options && options.autocompleteSuffix ? options.autocompleteSuffix : '';\n    var autocompletePrefix = options && options.autocompletePrefix ? options.autocompletePrefix : '';\n\n    if (typeof completion !== \"string\") {\n      completion = completion.text\n    }\n\n    return autocompletePrefix + completion + autocompleteSuffix;\n  }\n\n  function getType(completion) {\n    if (typeof completion == \"string\") return '';\n    else return completion.type;\n  }\n\n  function buildKeyMap(completion, handle) {\n    var baseMap = {\n      Up: function() {handle.moveFocus(-1);},\n      Down: function() {handle.moveFocus(1);},\n      PageUp: function() {handle.moveFocus(-handle.menuSize() + 1, true);},\n      PageDown: function() {handle.moveFocus(handle.menuSize() - 1, true);},\n      Home: function() {handle.setFocus(0);},\n      End: function() {handle.setFocus(handle.length - 1);},\n      Enter: handle.pick,\n      Tab: handle.pick,\n      Esc: handle.close\n    };\n    var custom = completion.options.customKeys;\n    var ourMap = custom ? {} : baseMap;\n    function addBinding(key, val) {\n      var bound;\n      if (typeof val != \"string\")\n        bound = function(cm) { return val(cm, handle); };\n      // This mechanism is deprecated\n      else if (baseMap.hasOwnProperty(val))\n        bound = baseMap[val];\n      else\n        bound = val;\n      ourMap[key] = bound;\n    }\n    if (custom)\n      for (var key in custom) if (custom.hasOwnProperty(key))\n        addBinding(key, custom[key]);\n    var extra = completion.options.extraKeys;\n    if (extra)\n      for (var key in extra) if (extra.hasOwnProperty(key))\n        addBinding(key, extra[key]);\n    return ourMap;\n  }\n\n  function getHintElement(hintsElement, el) {\n    while (el && el != hintsElement) {\n      if (el.nodeName.toUpperCase() === \"LI\" && el.parentNode == hintsElement) return el;\n      el = el.parentNode;\n    }\n  }\n\n  function styleHint(hint) {\n    var element = document.createElement(hint.displayText || getText(hint));\n    element = document.createElement(\"span\");\n    element.className = 'CDB-Size-small has-letter';\n    element.innerHTML = hint.displayText || getText(hint);\n\n    var type = getType(hint);\n    if (type) {\n      element.className = 'CDB-Size-small has-letter';\n      element.dataset.type = type;\n    }\n\n    return element;\n  }\n\n  function Widget(completion, data) {\n    this.completion = completion;\n    this.data = data;\n    this.picked = false;\n    var widget = this, cm = completion.cm;\n\n    var hints = this.hints = document.createElement(\"ul\");\n    hints.className = \"CodeMirror-hints\";\n    this.selectedHint = data.selectedHint || 0;\n\n    var element;\n    var completions = data.list;\n    for (var i = 0; i < completions.length; ++i) {\n      var elt = hints.appendChild(document.createElement(\"li\")), cur = completions[i];\n      var className = HINT_ELEMENT_CLASS + (i != this.selectedHint ? \"\" : \" \" + ACTIVE_HINT_ELEMENT_CLASS);\n      if (cur.className != null) className = cur.className + \" \" + className;\n      elt.className = className;\n      if (cur.render) cur.render(elt, data, cur);\n      else {\n        element = styleHint(cur);\n        elt.appendChild(element);\n      }\n\n      elt.hintId = i;\n    }\n\n    var pos = cm.cursorCoords(completion.options.alignWithWord ? data.from : null);\n    var left = pos.left, top = pos.bottom, below = true;\n    hints.style.left = left + \"px\";\n    hints.style.top = top + \"px\";\n    // If we're at the edge of the screen, then we want the menu to appear on the left of the cursor.\n    var winW = window.innerWidth || Math.max(document.body.offsetWidth, document.documentElement.offsetWidth);\n    var winH = window.innerHeight || Math.max(document.body.offsetHeight, document.documentElement.offsetHeight);\n    (completion.options.container || document.body).appendChild(hints);\n    var box = hints.getBoundingClientRect(), overlapY = box.bottom - winH;\n    if (overlapY > 0) {\n      var height = box.bottom - box.top, curTop = pos.top - (pos.bottom - box.top);\n      if (curTop - height > 0) { // Fits above cursor\n        hints.style.top = (top = pos.top - height) + \"px\";\n        below = false;\n      } else if (height > winH) {\n        hints.style.height = (winH - 5) + \"px\";\n        hints.style.top = (top = pos.bottom - box.top) + \"px\";\n        var cursor = cm.getCursor();\n        if (data.from.ch != cursor.ch) {\n          pos = cm.cursorCoords(cursor);\n          hints.style.left = (left = pos.left) + \"px\";\n          box = hints.getBoundingClientRect();\n        }\n      }\n    }\n    var overlapX = box.right - winW;\n    if (overlapX > 0) {\n      if (box.right - box.left > winW) {\n        hints.style.width = (winW - 5) + \"px\";\n        overlapX -= (box.right - box.left) - winW;\n      }\n      hints.style.left = (left = pos.left - overlapX) + \"px\";\n    }\n\n    cm.addKeyMap(this.keyMap = buildKeyMap(completion, {\n      moveFocus: function(n, avoidWrap) { widget.changeActive(widget.selectedHint + n, avoidWrap); },\n      setFocus: function(n) { widget.changeActive(n); },\n      menuSize: function() { return widget.screenAmount(); },\n      length: completions.length,\n      close: function() { completion.close(); },\n      pick: function() { widget.pick(); },\n      data: data\n    }));\n\n    if (completion.options.closeOnUnfocus) {\n      var closingOnBlur;\n      cm.on(\"blur\", this.onBlur = function() { closingOnBlur = setTimeout(function() { completion.close(); }, 100); });\n      cm.on(\"focus\", this.onFocus = function() { clearTimeout(closingOnBlur); });\n    }\n\n    var startScroll = cm.getScrollInfo();\n    cm.on(\"scroll\", this.onScroll = function() {\n      var curScroll = cm.getScrollInfo(), editor = cm.getWrapperElement().getBoundingClientRect();\n      var newTop = top + startScroll.top - curScroll.top;\n      var point = newTop - (window.pageYOffset || (document.documentElement || document.body).scrollTop);\n      if (!below) point += hints.offsetHeight;\n      if (point <= editor.top || point >= editor.bottom) return completion.close();\n      hints.style.top = newTop + \"px\";\n      hints.style.left = (left + startScroll.left - curScroll.left) + \"px\";\n    });\n\n    CodeMirror.on(hints, \"dblclick\", function(e) {\n      var t = getHintElement(hints, e.target || e.srcElement);\n      if (t && t.hintId != null) {widget.changeActive(t.hintId); widget.pick();}\n    });\n\n    CodeMirror.on(hints, \"click\", function(e) {\n      var t = getHintElement(hints, e.target || e.srcElement);\n      if (t && t.hintId != null) {\n        widget.changeActive(t.hintId);\n        if (completion.options.completeOnSingleClick) widget.pick();\n      }\n    });\n\n    CodeMirror.on(hints, \"mousedown\", function() {\n      setTimeout(function(){cm.focus();}, 20);\n    });\n\n    CodeMirror.signal(data, \"select\", completions[0], hints.firstChild);\n    return true;\n  }\n\n  Widget.prototype = {\n    close: function() {\n      if (this.completion.widget != this) return;\n      this.completion.widget = null;\n      this.hints.parentNode.removeChild(this.hints);\n      this.completion.cm.removeKeyMap(this.keyMap);\n\n      var cm = this.completion.cm;\n      if (this.completion.options.closeOnUnfocus) {\n        cm.off(\"blur\", this.onBlur);\n        cm.off(\"focus\", this.onFocus);\n      }\n      cm.off(\"scroll\", this.onScroll);\n    },\n\n    disable: function() {\n      this.completion.cm.removeKeyMap(this.keyMap);\n      var widget = this;\n      this.keyMap = {Enter: function() { widget.picked = true; }};\n      this.completion.cm.addKeyMap(this.keyMap);\n    },\n\n    pick: function() {\n      this.completion.pick(this.data, this.selectedHint);\n    },\n\n    changeActive: function(i, avoidWrap) {\n      if (i >= this.data.list.length)\n        i = avoidWrap ? this.data.list.length - 1 : 0;\n      else if (i < 0)\n        i = avoidWrap ? 0  : this.data.list.length - 1;\n      if (this.selectedHint == i) return;\n      var node = this.hints.childNodes[this.selectedHint];\n      node.className = node.className.replace(\" \" + ACTIVE_HINT_ELEMENT_CLASS, \"\");\n      node = this.hints.childNodes[this.selectedHint = i];\n      node.className += \" \" + ACTIVE_HINT_ELEMENT_CLASS;\n      if (node.offsetTop < this.hints.scrollTop)\n        this.hints.scrollTop = node.offsetTop - 3;\n      else if (node.offsetTop + node.offsetHeight > this.hints.scrollTop + this.hints.clientHeight)\n        this.hints.scrollTop = node.offsetTop + node.offsetHeight - this.hints.clientHeight + 3;\n      CodeMirror.signal(this.data, \"select\", this.data.list[this.selectedHint], node);\n    },\n\n    screenAmount: function() {\n      return Math.floor(this.hints.clientHeight / this.hints.firstChild.offsetHeight) || 1;\n    }\n  };\n\n  function applicableHelpers(cm, helpers) {\n    if (!cm.somethingSelected()) return helpers\n    var result = []\n    for (var i = 0; i < helpers.length; i++)\n      if (helpers[i].supportsSelection) result.push(helpers[i])\n    return result\n  }\n\n  function fetchHints(hint, cm, options, callback) {\n    if (hint.async) {\n      hint(cm, callback, options)\n    } else {\n      var result = hint(cm, options)\n      if (result && result.then) result.then(callback)\n      else callback(result)\n    }\n  }\n\n  function resolveAutoHints(cm, pos) {\n    var helpers = cm.getHelpers(pos, \"hint\"), words\n    if (helpers.length) {\n      var resolved = function(cm, callback, options) {\n        var app = applicableHelpers(cm, helpers);\n        function run(i) {\n          if (i == app.length) return callback(null)\n          fetchHints(app[i], cm, options, function(result) {\n            if (result && result.list.length > 0) callback(result)\n            else run(i + 1)\n          })\n        }\n        run(0)\n      }\n      resolved.async = true\n      resolved.supportsSelection = true\n      return resolved\n    } else if (words = cm.getHelper(cm.getCursor(), \"hintWords\")) {\n      return function(cm) { return CodeMirror.hint.fromList(cm, {words: words}) }\n    } else if (CodeMirror.hint.anyword) {\n      return function(cm, options) { return CodeMirror.hint.anyword(cm, options) }\n    } else {\n      return function() {}\n    }\n  }\n\n  CodeMirror.registerHelper(\"hint\", \"auto\", {\n    resolve: resolveAutoHints\n  });\n\n  CodeMirror.registerHelper(\"hint\", \"fromList\", function(cm, options) {\n    var cur = cm.getCursor(), token = cm.getTokenAt(cur);\n    var to = CodeMirror.Pos(cur.line, token.end);\n    if (token.string && /\\w/.test(token.string[token.string.length - 1])) {\n      var term = token.string, from = CodeMirror.Pos(cur.line, token.start);\n    } else {\n      var term = \"\", from = to;\n    }\n    var found = [];\n    for (var i = 0; i < options.words.length; i++) {\n      var word = options.words[i];\n      if (word.slice(0, term.length) == term)\n        found.push(word);\n    }\n\n    if (found.length) return {list: found, from: from, to: to};\n  });\n\n  CodeMirror.commands.autocomplete = CodeMirror.showHint;\n\n  var defaultOptions = {\n    hint: CodeMirror.hint.auto,\n    completeSingle: true,\n    alignWithWord: true,\n    closeCharacters: /[\\s()\\[\\]{};:>,]/,\n    closeOnUnfocus: true,\n    completeOnSingleClick: true,\n    container: null,\n    customKeys: null,\n    extraKeys: null\n  };\n\n  CodeMirror.defineOption(\"hintOptions\", null);\n};\n/* eslint-enable */\n","var _ = require('underscore');\nvar $ = require('jquery');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar template = require('./template.tpl');\nvar colorPickerTemplate = require('./color-picker-template.tpl');\nvar Utils = require('builder/helpers/utils');\n\nrequire('bootstrap-colorpicker');\n\nvar ESCAPE_KEY_CODE = 27;\n\nmodule.exports = CoreView.extend({\n  events: {\n    'blur .js-hex': '_onChangeHex',\n    'blur .js-inputColor': '_onChangeColorValue',\n    'blur .js-a': '_onChangeOpacity'\n  },\n\n  initialize: function (opts) {\n    var opacity = opts.opacity != null ? opts.opacity : 1;\n\n    this.model = new Backbone.Model({\n      hex: opts.value,\n      opacity: opacity\n    });\n\n    this._onEscape = this._onEscapePressed.bind(this);\n    this._initBinds();\n  },\n\n  render: function () {\n    var hex = this.model.get('hex');\n    var rgb = Utils.hexToRGB(this._sanitizeHex());\n    var color = _.extend(rgb, {\n      hex,\n      opacity: this.model.get('opacity'),\n      opacityDisabled: this.options.disableOpacity\n    });\n\n    this.$el.append(template(color));\n\n    var rgbaTemplate = _.template('rgba(<%- r %>, <%- g %>, <%- b %>, <%- opacity %>)');\n\n    this.$('.js-colorPicker').colorpicker({\n      color: rgbaTemplate(color),\n      format: 'rgba',\n      container: true,\n      horizontal: true,\n      inline: true,\n      customClass: 'ColorPicker',\n      template: colorPickerTemplate(),\n      slidersHorz: {\n        saturation: {\n          maxLeft: 206,\n          maxTop: 95,\n          callLeft: 'setSaturation',\n          callTop: 'setBrightness'\n        },\n        hue: {\n          maxLeft: 180,\n          maxTop: 0,\n          callLeft: 'setHue',\n          callTop: false\n        },\n        alpha: {\n          maxLeft: 180,\n          maxTop: 0,\n          callLeft: 'setAlpha',\n          callTop: false\n        }\n      }\n    });\n\n    if (this.options.disableOpacity) {\n      this.$('.js-colorPicker .js-alpha').addClass('is-hidden');\n    }\n\n    var setNewColor = function (e) {\n      var rgb = e.color.toRGB();\n      var hex = e.color.toHex();\n      this.model.set({ hex: hex, r: rgb.r, g: rgb.g, b: rgb.b, opacity: rgb.a });\n      this.$('.js-color').css('opacity', rgb.a);\n    }.bind(this);\n\n    this.$('.js-colorPicker').colorpicker().on('changeColor', setNewColor);\n\n    this._initDocumentBinds();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.bind('change:hex', this._onChangeColor, this);\n    this.model.bind('change:r', this._onChangeColor, this);\n    this.model.bind('change:g', this._onChangeColor, this);\n    this.model.bind('change:b', this._onChangeColor, this);\n    this.model.bind('change:opacity', this._onChangeColor, this);\n  },\n\n  _onEscapePressed: function (ev) {\n    if (ev.which === ESCAPE_KEY_CODE) {\n      this.remove();\n    }\n  },\n\n  _initDocumentBinds: function () {\n    $(document).on('keydown', this._onEscape);\n  },\n\n  _destroyDocumentBinds: function () {\n    $(document).off('keydown', this._onEscape);\n  },\n\n  _sanitizeHex: function () {\n    return Utils.sanitizeHex(this.model.get('hex'));\n  },\n\n  _onChangeColor: function () {\n    this.trigger('change', {\n      opacity: this.model.get('opacity'),\n      hex: this.model.get('hex')\n    }, this);\n\n    this.$('.js-hex').val(this.model.get('hex'));\n    this.$('.js-r').val(this.model.get('r'));\n    this.$('.js-g').val(this.model.get('g'));\n    this.$('.js-b').val(this.model.get('b'));\n    this.$('.js-a').val(this.model.get('opacity'));\n  },\n\n  _onChangeOpacity: function () {\n    var opacity = +this.$('.js-a').val();\n    if (_.isNumber(opacity) && opacity >= 0 && opacity <= 1) {\n      this.setColor(this.model.get('hex'), opacity);\n    }\n  },\n\n  _onChangeColorValue: function (e) {\n    this.$(e.target).removeClass('has-error');\n\n    var r = +this.$('.js-r').val();\n    var g = +this.$('.js-g').val();\n    var b = +this.$('.js-b').val();\n\n    var hex = Utils.rgbToHex(r, g, b);\n\n    if (Utils.isValidHex(hex)) {\n      this.setColor(hex);\n    } else {\n      this.$(e.target).addClass('has-error');\n    }\n  },\n\n  _onChangeHex: function (e) {\n    this.$(e.target).removeClass('has-error');\n\n    var hex = this.$('.js-hex').val();\n\n    if (Utils.isValidHex(hex)) {\n      this.setColor(hex);\n    } else {\n      this.$(e.target).addClass('has-error');\n    }\n  },\n\n  setColor: function (hex, opacity) {\n    if (_.isUndefined(opacity)) {\n      opacity = this.model.get('opacity') || 1;\n    }\n\n    this.$('.js-colorPicker').colorpicker('setValue', Utils.hexToRGBA(hex, opacity));\n  },\n\n  clean: function () {\n    this._destroyDocumentBinds();\n    this.trigger('onClean', this);\n    CoreView.prototype.clean.apply(this);\n  }\n});\n","var $ = require('jquery');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar CustomListView = require('builder/components/custom-list/custom-list-view');\nvar CustomListItemView = require('builder/components/custom-list/custom-list-item-view');\nvar itemTemplate = require('builder/components/custom-list/custom-list-item.tpl');\nvar magicPositioner = require('builder/helpers/magic-positioner');\nvar DropdownOverlayView = require('builder/components/dropdown-overlay/dropdown-overlay-view');\n\nvar ESCAPE_KEY_CODE = 27;\n\n/*\n *  A context menu\n */\nmodule.exports = CoreView.extend({\n\n  options: {\n    position: {\n      x: 0,\n      y: 0\n    },\n    offset: {\n      x: 0,\n      y: 15\n    },\n    itemTemplate: itemTemplate,\n    itemView: CustomListItemView\n  },\n\n  className: 'CDB-Box-modal CDB-SelectItem CustomList CustomList--small',\n  tagName: 'div',\n\n  initialize: function (opts) {\n    opts = opts || {};\n    if (!opts.collection) throw new Error('collection option is required');\n    if (!opts.triggerElementID) throw new Error('element id is required');\n\n    this._triggerElementID = opts.triggerElementID;\n\n    this.model = new Backbone.Model({\n      visible: false\n    });\n\n    this._onEscapePressed = this._onEscapePressed.bind(this);\n\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.model.on('change:visible', function (mdl, isVisible) {\n      this.render();\n      if (isVisible) {\n        this._initDocumentBinds();\n      } else {\n        this._destroyDocumentBinds();\n      }\n    }, this);\n    this.collection.on('change:selected', this.hide, this);\n    this.add_related_model(this.collection);\n  },\n\n  _initDocumentBinds: function () {\n    $(document).on('keydown', this._onEscapePressed);\n  },\n\n  _destroyDocumentBinds: function () {\n    $(document).off('keydown', this._onEscapePressed);\n  },\n\n  render: function () {\n    var $body = $('body');\n    var posX = (this.options.position.x || 0) + this.options.offset.x;\n    var posY = (this.options.position.y || 0) + this.options.offset.y;\n\n    this.clearSubViews();\n    this.$el.empty();\n    this._renderList();\n\n    this.$el.toggle(this.isVisible());\n\n    $body.append(this.el);\n\n    this.$el.css(\n      magicPositioner({\n        parentView: $body,\n        posX: posX,\n        posY: posY\n      })\n    );\n\n    this.dropdownOverlay = new DropdownOverlayView({\n      visible: this.isVisible(),\n      onClickAction: this.hide.bind(this)\n    });\n    this.addView(this.dropdownOverlay);\n\n    return this;\n  },\n\n  _onEscapePressed: function (ev) {\n    if (ev.which === ESCAPE_KEY_CODE) {\n      this.hide();\n    }\n  },\n\n  _renderList: function () {\n    this._listView = new CustomListView({\n      model: this.model,\n      collection: this.collection,\n      typeLabel: '',\n      itemView: this.options.itemView,\n      itemTemplate: this.options.itemTemplate,\n      size: 5\n    });\n    this.$el.append(this._listView.render().el);\n    this.addView(this._listView);\n  },\n\n  show: function () {\n    this.model.set('visible', true);\n  },\n\n  hide: function () {\n    this.model.set('visible', false);\n  },\n\n  toggle: function () {\n    this.model.set('visible', !this.model.get('visible'));\n  },\n\n  isVisible: function () {\n    return this.model.get('visible');\n  },\n\n  clean: function () {\n    this._destroyDocumentBinds();\n    CoreView.prototype.clean.apply(this);\n  }\n});\n","var Backbone = require('backbone');\nvar CustomCarouselModel = require('./custom-carousel-item-model');\n\n/*\n *  Custom list collection, it parses pairs like:\n *\n *  [{ val, label }]\n *  [\"string\"]\n */\n\nmodule.exports = Backbone.Collection.extend({\n\n  model: function (attrs, opts) {\n    var d = {};\n    if (typeof attrs === 'string') {\n      d.val = attrs;\n    } else {\n      d = attrs;\n    }\n    return new CustomCarouselModel(d);\n  },\n\n  initialize: function () {\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.bind('change:selected', this._onSelectedChange, this);\n  },\n\n  _onSelectedChange: function (changedModel, isSelected) {\n    if (isSelected) {\n      this.each(function (m) {\n        if (m.cid !== changedModel.cid && m.get('selected')) {\n          m.set('selected', false);\n        }\n      });\n    }\n  },\n\n  getSelected: function () {\n    return this.findWhere({ selected: true });\n  },\n\n  getSelectedValue: function () {\n    var selectedModel = this.getSelected();\n    return selectedModel && selectedModel.get('val');\n  },\n\n  getHighlighted: function () {\n    return this.findWhere({ highlighted: true });\n  }\n\n});\n","var Backbone = require('backbone');\n\n/*\n *  List item model\n *\n */\n\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    selected: false,\n    label: '',\n    template: function () {\n      return '';\n    }\n  },\n\n  getName: function () {\n    return this.get('label') || this.getValue();\n  },\n\n  getValue: function () {\n    return this.get('val');\n  }\n\n});\n","var CoreView = require('backbone/core-view');\nvar template = require('./custom-carousel-item.tpl');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\n\nmodule.exports = CoreView.extend({\n\n  className: 'Carousel-item',\n  tagName: 'li',\n\n  events: {\n    'mouseenter': '_onMouseEnter',\n    'mouseleave': '_onMouseLeave',\n    'click': '_onClick'\n  },\n\n  initialize: function (opts) {\n    this._itemClassName = opts && opts.itemOptions ? opts.itemOptions.className : '';\n    this._initBinds();\n  },\n\n  render: function () {\n    // NOTE: this function calls destroyTipsy for each tooltip, which calls:\n    // this.$el.unbind('mouseleave mouseenter');\n    // So we need to bind the events again after calling clearSubViews\n    this.clearSubViews();\n\n    this.$el.bind('mouseenter', this._onMouseEnter.bind(this));\n    this.$el.bind('mouseleave', this._onMouseLeave.bind(this));\n\n    this.$el.html(\n      template({\n        name: this.model.getName(),\n        className: this._itemClassName,\n        template: this.model.get('template')()\n      })\n    );\n\n    if (this.model.getValue()) {\n      this.$el.addClass('js-' + this.model.getValue());\n    }\n    this.$el.toggleClass('is-selected', !!this.model.get('selected'));\n\n    this._initViews();\n\n    return this;\n  },\n\n  _initViews: function () {\n    if (this.model.get('tooltip')) {\n      var tooltip = new TipsyTooltipView({\n        el: this.$el,\n        gravity: 's',\n        title: function () {\n          return this.model.get('tooltip');\n        }.bind(this)\n      });\n      this.addView(tooltip);\n    }\n  },\n\n  _initBinds: function () {\n    this.model.bind('change:selected', this.render, this);\n  },\n\n  _onMouseEnter: function () {\n    this.model.set('highlighted', true);\n  },\n\n  _onMouseLeave: function () {\n    this.model.set('highlighted', false);\n  },\n\n  _onClick: function (e) {\n    this.killEvent(e);\n    this.model.set('selected', true);\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar Ps = require('perfect-scrollbar');\nvar template = require('./custom-carousel.tpl');\nvar CarouselCollection = require('./custom-carousel-collection');\nvar CarouselItemView = require('./custom-carousel-item-view');\nvar _ = require('underscore');\n/*\n *  A custom carousel selector\n *\n *  It accepts a collection of (val, label) model attributes or a values array\n *  with the same content or only strings.\n *\n *  new CustomCarousel({\n *    options: [\n *      {\n *        val: 'hello',\n *        label: 'hi'\n *      }\n *    ]\n *  });\n */\n\nmodule.exports = CoreView.extend({\n\n  className: 'Carousel',\n  tagName: 'div',\n\n  initialize: function (opts) {\n    if (!opts.collection) {\n      if (!opts.options) { throw new Error('options array {value, label} is required'); }\n      this.collection = new CarouselCollection(opts.options);\n      this.options = opts;\n    }\n    this._bindedCheckShadows = this._checkShadows.bind(this);\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template());\n    this._renderList();\n    this._applyCustomScroll();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.collection.bind('change:selected', this._checkScroll, this);\n  },\n\n  _renderList: function () {\n    this.collection.each(function (model) {\n      this._createItem(model);\n    }, this);\n  },\n\n  _createItem: function (model) {\n    var opts = this.options;\n    var className = opts && opts.listItemOptions ? opts.listItemOptions.className : 'Carousel-item';\n    var view = new CarouselItemView({\n      className: className,\n      model: model,\n      itemOptions: this.options.itemOptions\n    });\n\n    this._listContainer().append(view.render().el);\n    this.addView(view);\n  },\n\n  _applyCustomScroll: function () {\n    Ps.initialize(this._listContainer().get(0), {\n      wheelSpeed: 1,\n      wheelPropagation: false,\n      swipePropagation: true,\n      suppressScrollY: true,\n      stopPropagationOnClick: false,\n      minScrollbarLength: 120,\n      useBothWheelAxes: true\n    });\n    this._checkScroll();\n    this._bindScroll();\n  },\n\n  _destroyCustomScroll: function () {\n    this._unbindScroll();\n    Ps.destroy(this._listContainer().get(0));\n  },\n\n  _bindScroll: function () {\n    this._listContainer()\n      .on('ps-x-reach-start', this._bindedCheckShadows)\n      .on('ps-x-reach-end', this._bindedCheckShadows)\n      .on('ps-scroll-x', this._bindedCheckShadows);\n  },\n\n  _unbindScroll: function () {\n    this._listContainer()\n      .off('ps-x-reach-start', this._bindedCheckShadows)\n      .off('ps-x-reach-end', this._bindedCheckShadows)\n      .off('ps-scroll-x', this._bindedCheckShadows);\n  },\n\n  _checkScroll: function () {\n    var position = this.$('.is-selected').position();\n    if (position) {\n      this._listContainer().scrollLeft(position.left - 20);\n      this._bindedCheckShadows();\n    }\n  },\n\n  _listContainer: function () {\n    return this.$('.js-list');\n  },\n\n  _checkShadows: function () {\n    var currentPos = this._listContainer().scrollLeft();\n    var max = this._listContainer().get(0).scrollWidth;\n    var width = this._listContainer().outerWidth();\n    var maxPos = max - width;\n\n    this.$('.js-leftShadow').toggleClass('is-visible', currentPos > 0);\n    this.$('.js-rightShadow').toggleClass('is-visible', currentPos < maxPos);\n  },\n\n  clean: function () {\n    this._destroyCustomScroll();\n    CoreView.prototype.clean.apply(this);\n  },\n\n  initScroll: function () {\n    setTimeout(_.bind(function () {\n      this._checkShadows();\n      this._checkScroll();\n      Ps.update(this._listContainer().get(0));\n    }, this), 0);\n  }\n\n});\n","var CoreView = require('backbone/core-view');\nvar CustomListView = require('builder/components/custom-list/custom-view');\nvar CustomListCollection = require('builder/components/custom-list/custom-list-collection');\nvar ColumnListViewTemplate = require('builder/components/custom-list/column-list/column-list-view.tpl');\n\nmodule.exports = CoreView.extend({\n  defaults: {\n    headerTitle: ''\n  },\n\n  events: {\n    'click .js-back': '_onClickBack'\n  },\n\n  initialize: function (opts) {\n    if (!opts.stackLayoutModel) throw new Error('stackLayoutModel is required');\n    if (!opts.columns) throw new Error('columns param is required');\n\n    this._stackLayoutModel = opts.stackLayoutModel;\n    this._columns = opts.columns;\n    this._showSearch = opts.showSearch || false;\n    this._typeLabel = opts.typeLabel;\n    this._itemTemplate = opts.itemTemplate;\n\n    this.collection = new CustomListCollection(this._columns);\n    this.listenTo(this.collection, 'change:selected', this._onSelectItem);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    this.$el.append(\n      ColumnListViewTemplate({\n        headerTitle: this.options.headerTitle\n      })\n    );\n\n    this._initViews();\n\n    return this;\n  },\n\n  _onClickBack: function (e) {\n    this.killEvent(e);\n    this.trigger('back', this);\n  },\n\n  _initViews: function () {\n    this._listView = new CustomListView({\n      collection: this.collection,\n      showSearch: this._showSearch,\n      typeLabel: this._typeLabel,\n      itemTemplate: this._itemTemplate\n    });\n    this.$('.js-content').append(this._listView.render().$el);\n    this.addView(this._listView);\n  },\n\n  _onSelectItem: function (item) {\n    this.trigger('selectItem', item, this);\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar template = require('./custom-list-action.tpl');\n\nmodule.exports = CoreView.extend({\n\n  className: 'CDB-Text CDB-Size-small is-semibold u-upperCase u-actionTextColor u-lSpace--xl',\n\n  tagName: 'button',\n\n  events: {\n    'click': '_onClick'\n  },\n\n  initialize: function (opts) {\n    this.options = opts;\n  },\n\n  render: function () {\n    this.$el.empty();\n    this.clearSubViews();\n\n    this.$el.append(template({\n      label: this.options.label\n    }));\n\n    return this;\n  },\n\n  _onClick: function () {\n    this.options.action && this.options.action();\n  }\n});\n","var Backbone = require('backbone');\nvar CustomListItemModel = require('./custom-list-item-model');\nvar _ = require('underscore');\n\n/*\n *  Custom list collection, it parses pairs like:\n *\n *  [{ val, label }]\n *  [\"string\"]\n */\n\nmodule.exports = Backbone.Collection.extend({\n  sort_key: 'id', // default sort key\n\n  initialize: function (models, options) {\n    this.options = _.extend({ silent: true }, options);\n    this._initBinds();\n  },\n\n  comparator: function (item) {\n    var name = item.get(this.sort_key);\n\n    return this._nameToLowerCase(name);\n  },\n\n  model: function (attrs, opts) {\n    var d = {};\n    if (typeof attrs === 'string') {\n      d.val = attrs;\n    } else {\n      d = attrs;\n    }\n    return new CustomListItemModel(d, opts);\n  },\n\n  sortByKey: function (key) {\n    this.sort_key = key;\n    this.sort();\n  },\n\n  _initBinds: function () {\n    this.bind('change:selected', this._onSelectedChange, this);\n  },\n\n  _nameToLowerCase: function (name) {\n    /*\n     *  It could still be evaluated like true if it is a boolean/number\n     *  in that case, we convert it to a string\n     */\n\n    if (_.isUndefined(name) || _.isNull(name)) return name;\n\n    return _.isString(name) ? name.toLowerCase() : name.toString().toLowerCase();\n  },\n\n  search: function (query) {\n    if (!query) return this;\n    query = query.toLowerCase();\n\n    return _(this.filter(function (model) {\n      var name = model.getName();\n      var val = this._nameToLowerCase(name);\n\n      return val ? ~val.indexOf(query) : -1;\n    }, this));\n  },\n\n  _onSelectedChange: function (changedModel, isSelected) {\n    if (isSelected) {\n      this.each(function (m) {\n        if (m.cid !== changedModel.cid) {\n          m.set({\n            selected: false\n          }, {\n            silent: this.options.silent\n          });\n        }\n      }, this);\n    }\n  },\n\n  getSelectedItem: function () {\n    return this.findWhere({ selected: true });\n  },\n\n  containsValue: function (value) {\n    return this.find(function (mdl) {\n      return mdl.getValue() === value;\n    });\n  },\n\n  setSelected: function (value) {\n    var selectedModel;\n    var silent = { silent: this.options.silent };\n\n    this.each(function (mdl) {\n      if (mdl.getValue() === value) {\n        mdl.set({\n          selected: true\n        }, silent);\n        selectedModel = mdl;\n      } else {\n        mdl.set({\n          selected: false\n        }, silent);\n      }\n    });\n    return selectedModel;\n  },\n\n  removeSelected: function () {\n    this.each(function (mdl) {\n      mdl.set({\n        selected: false\n      });\n    });\n  },\n\n  isAsync: function () {\n    return false;\n  }\n});\n","var Backbone = require('backbone');\n\n/*\n *  List item model\n *\n */\n\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    selected: false\n  },\n\n  getName: function () {\n    return (this.get('label') == null) ? this.getValue() : this.get('label'); // eslint-disable-line\n  },\n\n  getValue: function () {\n    return this.get('val');\n  }\n\n});\n","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\n\nmodule.exports = CoreView.extend({\n\n  options: {\n    template: require('./custom-list-item.tpl')\n  },\n\n  className: 'CDB-ListDecoration-item CustomList-item js-listItem',\n  tagName: 'li',\n\n  events: {\n    'mouseenter': '_onMouseEnter',\n    'mouseleave': '_onMouseLeave',\n    'click': '_onClick'\n  },\n\n  initialize: function (opts) {\n    this.options = _.extend({}, this.options, opts);\n    this.model.on('change', this.render, this);\n  },\n\n  render: function () {\n    this.$el.empty();\n    this.clearSubViews();\n\n    var name = this.model.getName() == null ? 'null' : this.model.getName();\n\n    this.$el.append(\n      this.options.template(\n        _.extend({\n          typeLabel: this.options.typeLabel,\n          isSelected: this.model.get('selected'),\n          isDisabled: this.model.get('disabled'),\n          isDestructive: this.model.get('destructive'),\n          name: name,\n          val: this.model.getValue(),\n          options: this.model.get('renderOptions')\n        })\n      )\n    );\n\n    this.$el\n      .attr('data-val', this.model.getValue())\n      .toggleClass('is-disabled', !!this.model.get('disabled'));\n\n    return this;\n  },\n\n  _onMouseLeave: function () {\n    this.$el.removeClass('is-highlighted');\n  },\n\n  _onMouseEnter: function () {\n    this.$el.addClass('is-highlighted');\n  },\n\n  _onClick: function (ev) {\n    this.killEvent(ev);\n    this.model.set({\n      selectedClass: ev.target.classList,\n      selected: true\n    });\n  }\n});\n","var _ = require('underscore');\nvar CustomListCollection = require('./custom-list-collection');\n\nmodule.exports = CustomListCollection.extend({\n  _initBinds: function () { },\n\n  setSelected: function (value) {\n    var selectedModel;\n    var silentTrue = { silent: true };\n\n    if (_.isArray(value)) {\n      this.each(function (mdl) {\n        if (_.contains(value, mdl.getValue())) {\n          mdl.set({\n            selected: true\n          }, silentTrue);\n          selectedModel = mdl;\n        } else {\n          mdl.set({\n            selected: false\n          }, silentTrue);\n        }\n      });\n    } else {\n      this.each(function (mdl) {\n        if (mdl.getValue() === value) {\n          mdl.set({\n            selected: true\n          }, silentTrue);\n          selectedModel = mdl;\n        } else {\n          mdl.set({\n            selected: false\n          }, silentTrue);\n        }\n      });\n    }\n    return selectedModel;\n  }\n});\n","var CustomListItemView = require('./custom-list-item-view');\n\nmodule.exports = CustomListItemView.extend({\n  _onClick: function (ev) {\n    this.killEvent(ev);\n    this.model.set('selected', !this.model.get('selected'));\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar template = require('./custom-list-search.tpl');\n\nmodule.exports = CoreView.extend({\n\n  className: 'CustomList--full',\n  tagName: 'form',\n\n  events: {\n    'keyup .js-search': '_onSearchType',\n    'click .js-clear': '_onClickClear',\n    'submit': '_submit'\n  },\n\n  initialize: function () {\n    this.template = this.options.template || template;\n    this.searchPlaceholder = this.options.searchPlaceholder || _t('components.custom-list.placeholder', { typeLabel: this.options.typeLabel });\n    this._initBinds();\n  },\n\n  render: function () {\n    this.$el\n      .empty()\n      .append(\n        this.template({\n          query: this.model.get('query'),\n          searchPlaceholder: this.searchPlaceholder\n        })\n      );\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.on('change:query', this._checkButtons, this);\n  },\n\n  _checkButtons: function () {\n    var query = this.model.get('query');\n    this.$('.js-clear').toggleClass('u-transparent', query.length === 0);\n  },\n\n  _onSearchType: function (e) {\n    this._submit();\n  },\n\n  _onClickClear: function (e) {\n    e.stopPropagation();\n    this.model.set('query', '');\n    this.render();\n    this.focus();\n  },\n\n  focus: function () {\n    this.$('.js-search').focus();\n  },\n\n  _submit: function (ev) {\n    this.killEvent(ev);\n    var query = this.$('.js-search').val();\n    this.model.set('query', query);\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar Ps = require('perfect-scrollbar');\nvar emptyTemplate = require('./custom-list-empty.tpl');\nvar addTemplate = require('./custom-list-add.tpl');\nvar template = require('./custom-list.tpl');\nvar Utils = require('builder/helpers/utils');\n\nvar ARROW_DOWN_KEY_CODE = 40;\nvar ARROW_UP_KEY_CODE = 38;\nvar ENTER_KEY_CODE = 13;\n\nmodule.exports = CoreView.extend({\n  module: 'components:custom-list:custom-list-view',\n\n  options: {\n    size: 3\n  },\n\n  className: 'CDB-Text CDB-Size-medium CustomList-listWrapper',\n\n  tagName: 'div',\n\n  events: {\n    'click .js-add-custom-value': '_onClickAddCustomValue',\n    'mouseover': '_onMouseOver',\n    'mouseout': '_onMouseOut'\n  },\n\n  initialize: function (opts) {\n    this.options = _.extend({}, this.options, opts);\n\n    this._onKeyDownBinded = this._onKeyDown.bind(this);\n    this._needsMaxSize = true;\n\n    if (this.options.mouseOverAction) {\n      this._mouseOverAction = this.options.mouseOverAction;\n    }\n\n    if (this.options.mouseOutAction) {\n      this._mouseOutAction = this.options.mouseOutAction;\n    }\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this._removeArrowBinds();\n    this._destroyCustomScroll();\n    this.$el.empty();\n\n    var query = this.model.get('query');\n    var items = this.collection.search(query);\n\n    this.$el.append(template());\n\n    var allowFreeTextInput = this.options.allowFreeTextInput;\n\n    if (allowFreeTextInput && query && !Utils.isBlank(query)) {\n      if (!this.collection.containsValue(query)) {\n        this.$el.prepend(\n          addTemplate({\n            query: query,\n            typeLabel: this.options.typeLabel\n          })\n        );\n      }\n    }\n\n    if (items.size() > 0) {\n      items.each(this._renderItem, this);\n      this._applyArrowBinds();\n      // Perfect-scroll needs to have the element in the DOM in order to\n      // style/positionate the scroll properly, small trick\n      setTimeout(this._applyCustomScroll.bind(this), 0);\n    } else if (!allowFreeTextInput || Utils.isBlank(query)) {\n      this.$el.append(\n        emptyTemplate({\n          query: query,\n          typeLabel: this.options.typeLabel\n        })\n      );\n    }\n\n    return this;\n  },\n\n  _renderItem: function (model) {\n    if (model.get('hidden')) return;\n    var ItemViewClass = this.options.itemView;\n\n    var itemView = new ItemViewClass({\n      model: model,\n      typeLabel: this.options.typeLabel,\n      template: this.options.itemTemplate\n    });\n    this.$('.js-list').append(itemView.render().el);\n    this.addView(itemView);\n\n    itemView.bind('customEvent', function (eventName, item) {\n      this.trigger('customEvent', eventName, item, this);\n    }, this);\n  },\n\n  _initBinds: function () {\n    this.model.bind('change:query', this._onQueryChanged, this);\n  },\n\n  _applyArrowBinds: function () {\n    document.addEventListener('keydown', this._onKeyDownBinded);\n  },\n\n  _removeArrowBinds: function () {\n    document.removeEventListener('keydown', this._onKeyDownBinded);\n  },\n\n  _getSelected: function () {\n    var selectedModel = this.collection.getSelectedItem();\n    var selectedValue;\n\n    if (selectedModel) {\n      selectedValue = selectedModel.getValue();\n      return this.$(\"[data-val='\" + selectedValue + \"']\");\n    }\n\n    return null;\n  },\n\n  _highlightSelected: function (item) {\n    var itemHeight = item.outerHeight();\n    item.addClass('is-highlighted');\n    this.$('.js-list').scrollTop(item.index() * itemHeight);\n  },\n\n  _onClickAddCustomValue: function (event) {\n    this.killEvent(event);\n\n    var query = this.model.get('query');\n\n    var model = this.collection.add({\n      val: query,\n      label: '' + query + '',\n      dirty: true\n    });\n\n    this.collection.sortByKey('val');\n    model.set('selected', true);\n  },\n\n  _onKeyDown: function (event) {\n    if (this.model.get('visible') === false) {\n      return;\n    }\n\n    var key = event.which;\n    var $listItems = this.$('.js-listItem');\n    var $highlighted = $listItems.filter('.is-highlighted');\n    var $current;\n    var model;\n\n    $highlighted.removeClass('is-highlighted');\n\n    if (key === ARROW_DOWN_KEY_CODE) {\n      if (!$highlighted.length || $highlighted[0] === $listItems.last()[0]) {\n        $current = $listItems.eq(0);\n      } else {\n        $current = $highlighted.next();\n      }\n    } else if (key === ARROW_UP_KEY_CODE) {\n      if (!$highlighted.length || $highlighted[0] === $listItems.first()[0]) {\n        $current = $listItems.last();\n      } else {\n        $current = $highlighted.prev();\n      }\n    } else if (key === ENTER_KEY_CODE) {\n      event.preventDefault();\n      if ($highlighted && $highlighted.length) {\n        model = _.first(this.collection.where({ val: $highlighted.data('val') }));\n        if (model) {\n          model.set('selected', true);\n        }\n        return false;\n      }\n    }\n\n    $current && this._highlightSelected($current);\n  },\n\n  _onQueryChanged: function () {\n    var prevQuery = this.collection.findWhere({ val: this.model.previous('query'), dirty: true });\n    this.collection.remove(prevQuery);\n\n    this.render();\n  },\n\n  _applyCustomScroll: function () {\n    Ps.initialize(this._wrapperContainer().get(0), {\n      wheelSpeed: 2,\n      wheelPropagation: true,\n      stopPropagationOnClick: false,\n      minScrollbarLength: 20\n    });\n  },\n\n  _destroyCustomScroll: function () {\n    if (this._wrapperContainer().length > 0) {\n      Ps.destroy(this._wrapperContainer().get(0));\n    }\n  },\n\n  _wrapperContainer: function () {\n    return this.$('.js-list');\n  },\n\n  clean: function () {\n    this._removeArrowBinds();\n    this._destroyCustomScroll();\n    CoreView.prototype.clean.apply(this);\n  },\n\n  highlight: function () {\n    var selected = this._getSelected();\n    selected && this._highlightSelected(selected);\n  },\n\n  _onMouseOver: function () {\n    this._mouseOverAction && this._mouseOverAction();\n  },\n\n  _onMouseOut: function () {\n    this._mouseOutAction && this._mouseOutAction();\n  }\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar CustomListCollection = require('./custom-list-collection');\nvar SearchView = require('./custom-list-search-view');\nvar CustomListView = require('./custom-list-view');\nvar headerTemplate = require('./custom-list-header.tpl');\nvar CustomListAction = require('./custom-list-action-view');\nvar itemTemplate = require('./custom-list-item.tpl');\nvar CustomListItemView = require('./custom-list-item-view');\n\n/*\n *  A custom list with possibility to search within values.\n *\n *  It accepts a collection of (val, label) model attributes or a values array\n *  with the same content or only strings.\n *\n *  new CustomList({\n *    showSearch: false,\n *    itemTemplate: itemTemplate,\n *    values: [\n *      {\n *        val: 'hello',\n *        label: 'hi'\n *      }\n *    ]\n *  });\n */\n\nmodule.exports = CoreView.extend({\n  module: 'components:custom-list:custom-view',\n\n  options: {\n    showSearch: true,\n    allowFreeTextInput: false,\n    typeLabel: 'column',\n    itemTemplate: itemTemplate,\n    itemView: CustomListItemView\n  },\n\n  className: 'CDB-Box-modal CustomList',\n  tagName: 'div',\n\n  events: {\n    'mouseover': '_onMouseOver',\n    'mouseout': '_onMouseOut'\n  },\n\n  initialize: function (opts) {\n    if (!opts.collection) {\n      if (!opts.options) { throw new Error('options array {value, label} is required'); }\n      this.collection = new CustomListCollection(opts.options);\n    }\n\n    if (opts.position) {\n      this.$el.css(opts.position);\n    }\n\n    this.options = _.extend({}, this.options, opts);\n    this._selectModel = this.options.selectModel;\n\n    if (this.options.mouseOverAction) {\n      this._mouseOverAction = this.options.mouseOverAction;\n    }\n\n    if (this.options.mouseOutAction) {\n      this._mouseOutAction = this.options.mouseOutAction;\n    }\n\n    this.model = new Backbone.Model({\n      query: '',\n      visible: false\n    });\n    this._initBinds();\n  },\n\n  render: function () {\n    this.$el.empty();\n    this.clearSubViews();\n\n    if (this.options.showSearch || this.options.actions) {\n      this._renderHeader();\n    }\n\n    if (this.options.showSearch) {\n      this._renderSearch();\n    }\n\n    if (this.options.actions) {\n      this._renderActions();\n    }\n\n    this._renderList();\n\n    if (this.options.showSearch) {\n      this._focusSearch();\n    }\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.bind('change:visible', this._onVisibleChanged, this);\n    this.model.bind('change:query', this._setActionsVisibility, this);\n  },\n\n  _renderHeader: function () {\n    this.$el.prepend(headerTemplate());\n  },\n\n  _renderSearch: function () {\n    this._searchView = new SearchView({\n      template: this.options.searchTemplate,\n      typeLabel: this.options.typeLabel,\n      searchPlaceholder: this.options.searchPlaceholder,\n      model: this.model\n    });\n    this.$('.js-header').prepend(this._searchView.render().el);\n    this.addView(this._searchView);\n  },\n\n  _renderActions: function () {\n    _.each(this.options.actions, function (action) {\n      var view = new CustomListAction(action);\n      this.$('.js-actions').append(view.render().el);\n      this.addView(view);\n    }, this);\n  },\n\n  _setActionsVisibility: function () {\n    this.$('.js-actions').toggleClass('u-hide', this.model.get('query') !== '');\n  },\n\n  _focusSearch: function () {\n    setTimeout(function () {\n      if (this._searchView) {\n        this._searchView.focus();\n        var input = this._searchView.$('input');\n        var $initialVal = input.val();\n        input.val($initialVal + ' ');\n        input.val($initialVal);\n      }\n    }.bind(this), 0);\n  },\n\n  _renderList: function () {\n    this._listView = new CustomListView({\n      model: this.model,\n      allowFreeTextInput: this.options.allowFreeTextInput,\n      collection: this.collection,\n      typeLabel: this.options.typeLabel,\n      itemView: this.options.itemView,\n      itemTemplate: this.options.itemTemplate,\n      size: this.options.size,\n      mouseOverAction: this._mouseOverAction,\n      mouseOutAction: this._mouseOutAction\n    });\n    this.$el.append(this._listView.render().el);\n\n    this._listView.highlight();\n    this.addView(this._listView);\n\n    this._listView.bind('customEvent', function (eventName, item) {\n      this.trigger(eventName, item, this);\n    }, this);\n  },\n\n  highlight: function () {\n    this._listView.highlight();\n  },\n\n  _onVisibleChanged: function (_model, isVisible) {\n    this._resetQuery();\n    this._toggleVisibility();\n\n    isVisible ? this.render() : this.clearSubViews();\n  },\n\n  _resetQuery: function () {\n    var query = this._selectModel && this._selectModel.get(this.options.typeLabel) || '';\n    this.model.set('query', query);\n\n    var isInCollection = this.collection.findWhere({ val: query });\n    if (query && !isInCollection) {\n      this.collection.add({ label: query, val: query });\n    }\n  },\n\n  show: function () {\n    this.model.set('visible', true);\n  },\n\n  hide: function () {\n    this.trigger('hidden', this);\n    this.model.set('visible', false);\n  },\n\n  toggle: function () {\n    this.model.set('visible', !this.model.get('visible'));\n  },\n\n  _toggleVisibility: function () {\n    this.$el.toggleClass('is-visible', !!this.model.get('visible'));\n  },\n\n  isVisible: function () {\n    return this.model.get('visible');\n  },\n\n  _onMouseOver: function () {\n    this._mouseOverAction && this._mouseOverAction();\n  },\n\n  _onMouseOut: function () {\n    this._mouseOutAction && this._mouseOutAction();\n  },\n\n  remove: function () {\n    this._listView && this._listView.clean();\n    CoreView.prototype.remove.call(this);\n  }\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar SQLNotifications = require('builder/sql-notifications');\nvar SQLUtils = require('builder/helpers/sql-utils');\nvar Notifier = require('builder/components/notifier/notifier');\nvar cdb = require('internal-carto.js');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'configModel',\n  'editorModel',\n  'layerDefinitionModel',\n  'querySchemaModel'\n];\n\nmodule.exports = CoreView.extend({\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._clearSQLModel = new Backbone.Model({\n      visible: false\n    });\n\n    this._sqlModel = this._layerDefinitionModel.sqlModel;\n\n    this._SQL = new cdb.SQL({\n      user: this._configModel.get('user_name'),\n      sql_api_template: this._configModel.get('sql_api_template'),\n      api_key: this._configModel.get('api_key')\n    });\n\n    this._codemirrorModel = new Backbone.Model({\n      content: this._querySchemaModel.get('query'),\n      readonly: false\n    });\n\n    this._applyButtonStatusModel = new Backbone.Model({\n      loading: false\n    });\n\n    SQLNotifications.track(this);\n  },\n\n  _internalParseSQL: function (callbackAfterAlterSuccess) {\n    var appliedQuery = this._querySchemaModel.get('query');\n    var currentQuery = this._codemirrorModel.get('content');\n\n    // Remove last character if it has ';'\n    if (currentQuery && currentQuery.slice(-1) === ';') {\n      currentQuery = currentQuery.slice(0, currentQuery.length - 1);\n      this._codemirrorModel.set('content', currentQuery);\n    }\n\n    var isSameQuery = SQLUtils.isSameQuery(currentQuery, appliedQuery);\n    var altersData = SQLUtils.altersData(currentQuery);\n\n    if (currentQuery === '' || isSameQuery) {\n      SQLNotifications.removeNotification();\n      return false;\n    }\n\n    if (altersData) {\n      SQLNotifications.showNotification({\n        status: 'loading',\n        info: _t('notifications.sql.alter-loading'),\n        closable: false\n      });\n\n      this._applyButtonStatusModel.set('loading', true);\n\n      this._sqlModel.set('content', currentQuery);\n\n      this._SQL.execute(currentQuery, null, {\n        success: function () {\n          SQLNotifications.showNotification({\n            status: 'success',\n            info: _t('notifications.sql.alter-success'),\n            closable: true,\n            delay: Notifier.DEFAULT_DELAY\n          });\n\n          this._applyButtonStatusModel.set('loading', false);\n\n          this._applyDefaultSQLAfterAlteringData();\n\n          if (typeof callbackAfterAlterSuccess === 'function') {\n            callbackAfterAlterSuccess.call(this);\n          }\n        }.bind(this),\n        error: function (errors) {\n          var parsedErrors = this._parseErrors(errors.responseJSON && errors.responseJSON.error);\n\n          this._applyButtonStatusModel.set('loading', false);\n\n          this._codemirrorModel.set('errors', parsedErrors);\n\n          SQLNotifications.showErrorNotification(parsedErrors);\n\n          this._checkClearButton();\n        }.bind(this)\n      });\n    } else {\n      this._runQuery(currentQuery, this._saveSQL.bind(this));\n    }\n  },\n\n  _checkClearButton: function () {\n    var customSql = this._codemirrorModel.get('content');\n    var isDefaultQuery = SQLUtils.isSameQuery(customSql, this._defaultSQL());\n    this._clearSQLModel.set({ visible: !isDefaultQuery });\n  },\n\n  _applyDefaultSQLAfterAlteringData: function () {\n    var originalQuery = this._defaultSQL();\n    this._codemirrorModel.set({\n      content: originalQuery,\n      errors: []\n    });\n    this._sqlModel.set('content', originalQuery);\n    this._querySchemaModel.set('query_errors', []);\n    this._clearSQLModel.set({ visible: false });\n    this._querySchemaModel.resetDueToAlteredData();\n    this._clearSQL();\n  },\n\n  _clearSQL: function () {\n    var originalQuery = this._defaultSQL();\n    this._codemirrorModel.set({\n      content: originalQuery,\n      errors: []\n    });\n    this._runQuery(originalQuery, this._saveSQL.bind(this));\n  },\n\n  _showErrors: function (model) {\n    var errors = this._querySchemaModel.get('query_errors');\n    this._forceErrors(errors);\n    this._checkClearButton();\n  },\n\n  _forceErrors: function (errors, options) {\n    var hasErrors = errors && errors.length > 0;\n    var parsedErrors = hasErrors && this._parseErrors(errors);\n    var editorErrors = options && options.showEditorError === false ? [] : parsedErrors;\n    this._codemirrorModel.set('errors', editorErrors);\n    this._editorModel.set('disabled', hasErrors);\n\n    if (hasErrors) {\n      SQLNotifications.showErrorNotification(parsedErrors);\n    }\n  },\n\n  _parseErrors: function (errors) {\n    if (!errors) {\n      return [];\n    }\n\n    errors = _.isArray(errors) ? errors : [errors];\n    return errors.map(function (error) {\n      return {\n        message: error\n      };\n    });\n  }\n});\n","var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar moment = require('moment');\nvar $ = require('jquery');\nvar Utils = require('builder/helpers/utils');\nrequire('builder/components/form-components/index');\nrequire('datepicker');\nvar datePickerTemplate = require('./date-picker-range-form.tpl');\nvar template = require('./date-picker-range.tpl');\n\nvar MAX_RANGE = 30;\nvar FOUR_HOURS = { amount: 4, unit: 'hours' };\nvar ONE_DAY = { amount: 1, unit: 'day' };\nvar ONE_WEEK = { amount: 1, unit: 'week' };\n\n/**\n * Custom picer for a dates range.\n */\nmodule.exports = CoreView.extend({\n\n  className: 'DatePicker',\n\n  options: {\n    flat: true,\n    date: ['2008-07-31', '2008-07-31'],\n    current: '2008-07-31',\n    calendars: 2,\n    mode: 'range',\n    starts: 1\n  },\n\n  events: {\n    'click .js-dates': '_toggleCalendar',\n    'click .js-fourHours': function () { this._setPreviousTime(FOUR_HOURS); },\n    'click .js-oneDay': function () { this._setPreviousTime(ONE_DAY); },\n    'click .js-oneWeek': function () { this._setPreviousTime(ONE_WEEK); }\n  },\n\n  initialize: function (opts) {\n    var isDisabled = (opts && opts.disabled) ? opts.disabled : false;\n\n    this.model = new Backbone.Model({\n      fromDate: '',\n      fromHour: 0,\n      fromMin: 0,\n      toDate: '',\n      toHour: 23,\n      toMin: 59,\n      user_timezone: 0, // Explained as GMT+0\n      disabled: isDisabled\n    });\n\n    this.template = opts.template || template;\n\n    this._initBinds();\n    this._setDefaultDate();\n  },\n\n  render: function () {\n    var self = this;\n\n    this.clearSubViews();\n    this.$el.empty();\n\n    this.$el.append(\n      this.template(\n        _.extend(\n          this.model.attributes,\n          {\n            max_days: MAX_RANGE,\n            pad: Utils.pad\n          }\n        )\n      )\n    );\n\n    setTimeout(function () {\n      self._initCalendar();\n      self._hideCalendar();\n      self._initTimers();\n    }, 100);\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.bind('change', this._setValues, this);\n    this.model.bind('change', this._onValuesChange, this);\n    $(document).bind('click', this._onDocumentClick.bind(this));\n  },\n\n  _destroyBinds: function () {\n    $(document).unbind('click', this._onDocumentClick.bind(this));\n  },\n\n  _formattedDate: function (which) {\n    var text = 'components.datepicker.' + which;\n    return _t(text) + ' ' +\n      '<strong>' +\n        this.model.get(which + 'Date') + ' ' +\n        (Utils.pad(this.model.get(which + 'Hour'), 2) + ':' + Utils.pad(this.model.get(which + 'Min'), 2)) +\n      '</strong>';\n  },\n\n  _setValues: function () {\n    var text = _t('components.datepicker.dates-placeholder');\n    var data = this.model.attributes;\n\n    if (data.fromDate && data.toDate) {\n      var calendarIcon = '<i class=\"CDB-IconFont CDB-IconFont-calendar DatePicker-datesIcon\"></i>';\n      text = this._formattedDate('from') + ' ' + this._formattedDate('to') + calendarIcon;\n    }\n\n    this.$('.DatePicker-dates').html(text);\n  },\n\n  _setDefaultDate: function () {\n    var datesUTC = this.model.get('user_timezone');\n    var today = moment().utc(datesUTC);\n    var previous = moment().utc(datesUTC).subtract((MAX_RANGE - 1), 'days');\n    this.options.date = [previous.format('YYYY-MM-DD'), today.format('YYYY-MM-DD')];\n    this.options.current = today.format('YYYY-MM-DD');\n    this._setModelFromPrevious(previous);\n  },\n\n  _initCalendar: function () {\n    var selector = '.DatePicker-calendar';\n\n    // Can't initialize calendar if not already present in document... avoid errors being thrown\n    if (!document.body.contains(this.$(selector)[0])) return;\n\n    this.calendar = this.$(selector).DatePicker(\n      _.extend(this.options, {\n        onChange: this._onDatesChange.bind(this),\n        onRender: function (d) { // Disable future dates and dates < MAX_RANGE days ago\n          var date = d.valueOf();\n          var now = new Date();\n\n          var thirtyDaysAgo = new Date();\n          thirtyDaysAgo.setDate(now.getDate() - MAX_RANGE);\n\n          return (date < thirtyDaysAgo) || (date > now) ? { disabled: true } : '';\n        }\n      })\n    );\n  },\n\n  _onDatesChange: function (formatted, dates) {\n    // Check if selected dates have more than MAX_RANGE days\n    var start = moment(formatted[0]);\n    var end = moment(formatted[1]);\n\n    if (Math.abs(start.diff(end, 'days')) > MAX_RANGE) {\n      formatted[1] = moment(formatted[0]).add('days', MAX_RANGE).format('YYYY-MM-DD');\n      this.$('.DatePicker-calendar').DatePickerSetDate([formatted[0], formatted[1]]);\n    }\n\n    this.model.set({\n      fromDate: formatted[0],\n      toDate: formatted[1]\n    });\n  },\n\n  _hideCalendar: function (e) {\n    if (e) this.killEvent(e);\n    this.$('.DatePicker-dropdown').hide();\n  },\n\n  _toggleCalendar: function (ev) {\n    if (ev) this.killEvent(ev);\n    this.$('.DatePicker-dropdown').toggle();\n  },\n\n  _setPreviousTime: function (timeSpan) {\n    var previous = moment().utc(0).subtract(timeSpan.amount, timeSpan.unit);\n    this._setModelFromPrevious(previous);\n    this._setDatepickerFromPrevious(previous);\n    this.closeCalendar();\n  },\n\n  _setModelFromPrevious: function (previous) {\n    var today = moment().utc(0);\n\n    this.model.set({\n      fromDate: previous.format('YYYY-MM-DD'),\n      fromHour: parseInt(previous.format('H'), 10),\n      fromMin: parseInt(previous.format('m'), 10),\n      toDate: today.format('YYYY-MM-DD'),\n      toHour: parseInt(today.format('H'), 10),\n      toMin: parseInt(today.format('m'), 10)\n    });\n  },\n\n  _setDatepickerFromPrevious: function (previous) {\n    var today = moment().utc(0);\n    this.$('.DatePicker-calendar').DatePickerSetDate([ previous.format('YYYY-MM-DD'), today.format('YYYY-MM-DD') ]);\n  },\n\n  _initTimers: function () {\n    var generateNumberType = function (min, max) {\n      var title = max === 23\n        ? _t('components.datepicker.hour')\n        : _t('components.datepicker.min');\n      return {\n        type: 'Number',\n        title: title,\n        validators: ['required', {\n          type: 'interval',\n          min: min,\n          max: max\n        }]\n      };\n    };\n\n    this.model.schema = {\n      fromHour: generateNumberType(0, 23),\n      fromMin: generateNumberType(0, 59),\n      toHour: generateNumberType(0, 23),\n      toMin: generateNumberType(0, 59)\n    };\n\n    this._datesForm = new Backbone.Form({\n      model: this.model,\n      template: datePickerTemplate\n    });\n\n    this._datesForm.bind('change', function () {\n      this.commit();\n    });\n    this.$('.js-timers').append(this._datesForm.render().el);\n  },\n\n  _onValuesChange: function () {\n    this.trigger('changeDate', this.model.toJSON(), this);\n  },\n\n  getDates: function () {\n    return this.model.toJSON();\n  },\n\n  closeCalendar: function () {\n    this.$('.DatePicker-dropdown').hide();\n  },\n\n  _onDocumentClick: function (e) {\n    var $el = $(e.target);\n\n    if ($el.closest('.DatePicker').length === 0) {\n      this.closeCalendar();\n    }\n  },\n\n  clean: function () {\n    this._datesForm && this._datesForm.remove();\n    this._destroyBinds();\n    this.closeCalendar();\n    this.$('.DatePicker-calendar').DatePickerHide();\n    CoreView.prototype.clean.call(this);\n  }\n\n});\n","var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\n\n/**\n * View model of the dialog-view\n */\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    visible: true,\n    createContentView: function () {\n      return new CoreView();\n    }\n  },\n\n  createContentView: function () {\n    return this.get('createContentView')(this);\n  },\n\n  show: function () {\n    this.set('visible', true);\n  },\n\n  hide: function () {\n    this.set('visible', false);\n  },\n\n  isHidden: function () {\n    return !this.get('visible');\n  },\n\n  /**\n   * @override {Backbone.Model.prototype.destroy}\n   */\n  destroy: function () {\n    var args = Array.prototype.slice.call(arguments);\n    this.trigger.apply(this, ['destroy'].concat(args));\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar DropdownOverlayView = require('builder/components/dropdown-overlay/dropdown-overlay-view');\n\nmodule.exports = CoreView.extend({\n  className: 'Editor-boxModal Editor-FormDialog js-formDialog is-opening',\n\n  initialize: function () {\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this._renderContentView();\n    return this;\n  },\n\n  _renderContentView: function () {\n    var view = this.model.createContentView();\n    this.addView(view);\n    this.$el.append(view.render().$el);\n\n    this.dropdownOverlay = new DropdownOverlayView({\n      onClickAction: this.hide.bind(this),\n      visible: true\n    });\n    this.addView(this.dropdownOverlay);\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.model, 'change:show', this._onShowChange);\n    this.listenTo(this.model, 'destroy', this._onDestroy);\n  },\n\n  _onShowChange: function (m, show) {\n    if (show) {\n      this.$el.show();\n      this.$el.removeClass('is-closing').addClass('is-opening');\n    } else {\n      this.$el.removeClass('is-opening').addClass('is-closing');\n      this.$el.hide();\n    }\n  },\n\n  show: function () {\n    this.model.show();\n  },\n\n  hide: function () {\n    this.model.hide();\n  },\n\n  _onDestroy: function () {\n    this.hide();\n    this.dropdownOverlay && this.dropdownOverlay.clean();\n    this.clean();\n  }\n});\n","var _ = require('underscore');\nvar $ = require('jquery');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\n\n/*\n *  Dropdown overlay to disable all interactions between elements\n *  beneath the dropdown\n */\nmodule.exports = CoreView.extend({\n\n  className: 'CDB-Box-modalOverlay',\n\n  events: {\n    'click': '_onOverlayClicked'\n  },\n\n  initialize: function (opts) {\n    this.container = opts && opts.container;\n    this.onClickAction = opts && opts.onClickAction;\n\n    this.model = new Backbone.Model({\n      visible: _.isUndefined(opts && opts.visible) ? false : opts.visible\n    });\n\n    this._initBinds();\n    this.render();\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.model, 'change:visible', this._onVisibilityChange);\n  },\n\n  render: function () {\n    (this.container || $(document.body)).append(this.$el);\n    this.$el.toggle(this.isVisible());\n    return this;\n  },\n\n  _onOverlayClicked: function () {\n    this.onClickAction && this.onClickAction();\n    this.hide();\n  },\n\n  show: function () {\n    this.model.set('visible', true);\n  },\n\n  hide: function () {\n    this.model.set('visible', false);\n  },\n\n  toggle: function () {\n    this.model.set('visible', !this.model.get('visible'));\n  },\n\n  isVisible: function () {\n    return this.model.get('visible');\n  },\n\n  _onVisibilityChange: function () {\n    this.$el.toggle(this.isVisible());\n  }\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar cdb = require('internal-carto.js');\nvar baseTemplate = require('./error.tpl');\n\n/**\n * A typical error view.\n * @param {Object} options\n * @param {String} options.title If not provided will use a generic text as fallback\n * @param {String} options.desc If not provied will use a generic text as fallback\n */\nmodule.exports = CoreView.extend({\n\n  className: 'IntermediateInfo',\n\n  initialize: function (opts) {\n    var attrs = _.defaults(\n      _.pick(opts, ['title', 'desc']),\n      {\n        title: _t('components.error.default-title'),\n        desc: _t('components.error.default-desc')\n      }\n    );\n    this._template = this.options && this.options.template || baseTemplate;\n    this.model = new Backbone.Model(attrs);\n  },\n\n  render: function () {\n    this.$el.html(this._html());\n    return this;\n  },\n\n  _html: function () {\n    var m = this.model;\n    return this._template({\n      title: m.get('title'),\n      desc: cdb.core.sanitize.html(m.get('desc'))\n    });\n  }\n});\n","module.exports = {\n  Mode: {\n    NESTED: 'nested',\n    FLOAT: 'float',\n    DEFAULT: 'nested'\n  }\n};\n","module.exports = {\n  Size: {\n    MARKER_MIN: 7,\n    IMAGE_MIN: 20,\n    DEFAULT: {\n      min: 1,\n      max: 45,\n      step: 0.5\n    },\n    DefaultInput100: {\n      MIN: 0,\n      MAX: 100,\n      STEP: 1\n    },\n    DEFAULT_RANGE: [ 5, 20 ]\n  },\n\n  Panes: {\n    FIXED: 'fixed',\n    BY_VALUE: 'value',\n    FILE: 'file'\n  },\n\n  Tabs: {\n    BINS: 'bins',\n    QUANTIFICATION: 'quantification'\n  },\n\n  Quantification: {\n    REFERENCE: {\n      'Jenks': 'jenks',\n      'Equal Interval': 'equal',\n      'Heads/Tails': 'headtails',\n      'Quantile': 'quantiles'\n    }\n  },\n\n  Settings: {\n    COLOR: {\n      quantifications: {\n        items: ['jenks', 'equal', 'headtails', 'quantiles', 'category'],\n        defaultIndex: 0\n      }\n    },\n\n    COLOR_RAMPS: {\n      quantifications: {\n        items: ['quantiles', 'jenks', 'equal', 'headtails', 'category'],\n        defaultIndex: 0\n      },\n      bins: {\n        items: ['2', '3', '4', '5', '6', '7'],\n        defaultIndex: 3\n      }\n    },\n\n    NUMBER: {\n      quantifications: {\n        items: ['quantiles', 'jenks', 'equal', 'headtails'],\n        defaultIndex: 0\n      },\n      bins: {\n        items: ['2', '3', '4', '5', '6', '7'],\n        defaultIndex: 3\n      }\n    }\n  }\n};\n","module.exports = {\n  Type: {\n    SIMPLE: 'simple',\n    ANIMATION: 'animation',\n    HEATMAP: 'heatmap',\n    POLYGON: 'polygon',\n    REGIONS: 'regions',\n    HEXABINS: 'hexabins',\n    SQUARES: 'squares',\n    NONE: 'none'\n  },\n  Blending: {\n    SIMPLE: [\n      'none',\n      'multiply',\n      'screen',\n      'overlay',\n      'darken',\n      'lighten',\n      'color-dodge',\n      'color-burn',\n      'xor',\n      'src-over'\n    ],\n    ANIMATION: [\n      'lighter',\n      'multiply',\n      'source-over',\n      'xor'\n    ]\n  }\n};\n","var Backbone = require('backbone');\nvar $ = require('jquery');\nvar ESC_KEY_CODE = 27;\n\nBackbone.Form.editors.Base = Backbone.Form.editors.Base.extend({\n  applyESCBind: function (callback) {\n    this._ESCBindCallback = callback;\n    this._onKeyDown = this._onKeyDown.bind(this);\n    document.addEventListener('keydown', this._onKeyDown);\n  },\n\n  _onKeyDown: function (ev) {\n    var anyModalOpen;\n    if (ev.which === ESC_KEY_CODE) {\n      anyModalOpen = this._anyModalOpen();\n      !anyModalOpen && this._ESCBindCallback();\n    }\n  },\n\n  applyClickOutsideBind: function (callback) {\n    this._clickBindCallback = callback;\n    this._onDocumentClick = this._onDocumentClick.bind(this);\n    this.$el.attr('data-cid', this.cid);\n    document.addEventListener('click', this._onDocumentClick);\n  },\n\n  _onDocumentClick: function (e) {\n    var $el = $(e.target);\n    var anyModalOpen = this._anyModalOpen();\n    if ($el.closest('[data-cid=\"' + this.cid + '\"]').length === 0 && !anyModalOpen) {\n      this._clickBindCallback();\n    }\n  },\n\n  _anyModalOpen: function () {\n    var modals = this.options.modals;\n    if (!modals) {\n      return false;\n    }\n\n    return modals.isOpen();\n  },\n\n  _destroyBinds: function () {\n    this._removeESCandClickListeners();\n  },\n\n  _removeESCandClickListeners: function () {\n    if (this._ESCBindCallback) {\n      document.removeEventListener('keydown', this._onKeyDown);\n    }\n    if (this._clickBindCallback) {\n      document.removeEventListener('click', this._onDocumentClick);\n    }\n  },\n\n  remove: function () {\n    this._destroyBinds && this._destroyBinds();\n    Backbone.View.prototype.remove.call(this);\n  }\n\n});\n","var $ = require('jquery');\nvar Backbone = require('backbone');\nvar FactoryHints = require('builder/editor/editor-hints/factory-hints');\nvar CodeMirrorView = require('builder/components/code-mirror/code-mirror-view');\n\nBackbone.Form.editors.CodeEditor = Backbone.Form.editors.TextArea.extend({\n  render: function () {\n    this.setValue(this.value);\n\n    this._codemirrorModel = new Backbone.Model({\n      content: this.value,\n      readonly: false,\n      lineNumbers: false\n    });\n\n    FactoryHints.init({\n      tokens: this.options.tokens,\n      tableName: false,\n      columnsName: false\n    });\n\n    this._initViews();\n\n    this._toggleDisableState();\n\n    return this;\n  },\n\n  getValue: function () {\n    var val = this.$el.val();\n\n    val = this.codeMirrorView.getContent();\n\n    return (val === '') ? null : val;\n  },\n\n  _initViews: function () {\n    this._destroyEditor();\n\n    var hints = FactoryHints.reset().hints;\n    this.codeMirrorView = new CodeMirrorView({\n      model: this._codemirrorModel,\n      hints: hints,\n      mode: 'text/mustache',\n      autocompleteChars: 2,\n      autocompletePrefix: '{{',\n      autocompleteSuffix: '}}',\n      placeholder: this.options.placeholder\n    });\n    this.codeMirrorView.bind('codeChanged', function () {\n      this.trigger('change', this.codeMirrorView.getContent());\n    }, this);\n\n    var $codeMirrorEl = $(this.codeMirrorView.render().el);\n    this.$el.replaceWith($codeMirrorEl);\n    this.setElement($codeMirrorEl);\n    this.$el.addClass('CodeMirror-formInput');\n    // The default el is replace it with another dom node\n    // we should add tracking class manually again\n    this._addTrackingClass();\n  },\n\n  _addTrackingClass: function () {\n    if (this.options.trackingClass) {\n      var trackClasses = this.options.trackingClass + ' track-' + this.options.key + this.options.editorType;\n      this.$el.addClass(trackClasses);\n    }\n  },\n\n  _hasEditor: function () {\n    return this.options.editor && !!this.codeMirrorView;\n  },\n\n  _destroyEditor: function () {\n    if (this._hasEditor()) {\n      this.codeMirrorView.remove();\n    }\n  },\n\n  remove: function () {\n    this._destroyEditor();\n    Backbone.Form.editors.Base.prototype.remove.apply(this);\n  },\n\n  clean: function () {\n    this.$el.remove();\n  }\n});\n","var Backbone = require('backbone');\nvar _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar StackLayoutView = require('builder/components/stack-layout/stack-layout-view');\nvar MeasurementsView = require('./measurements-list-view');\nvar FiltersView = require('./filters-list-view');\n\nvar REQUIRED_OPTS = [\n  'filtersCollection',\n  'measurementsCollection',\n  'measurementModel',\n  'region'\n];\n\nvar braces = function (value) {\n  var template = _.template(\"'{<%- value %>}'\");\n  return template({\n    value: value\n  });\n};\n\nmodule.exports = CoreView.extend({\n  className: 'CDB-Box-modal CustomList',\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    // For internal state\n    this.model = new Backbone.Model({\n      visible: false\n    });\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._generateStackLayoutView();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.model, 'change:visible', function (mdl, isVisible) {\n      isVisible ? this.render() : this.clearSubViews();\n      this._toggleVisibility();\n    });\n  },\n\n  _generateStackLayoutView: function () {\n    var createListView = function (stackLayoutModel, opts) {\n      return this._createListView(stackLayoutModel, opts);\n    }.bind(this);\n\n    var createFilterView = function (stackLayoutModel, opts) {\n      return this._createFilterView(stackLayoutModel, opts);\n    }.bind(this);\n\n    var stackViewCollection = new Backbone.Collection([{\n      createStackView: createListView\n    }, {\n      createStackView: createFilterView\n    }]);\n\n    this._stackLayoutView = new StackLayoutView({ collection: stackViewCollection });\n    this.addView(this._stackLayoutView);\n    this.$el.append(this._stackLayoutView.render().$el);\n  },\n\n  _buildFilters: function () {\n    var selectedFilters = this._filtersCollection.getSelected();\n    return _.map(selectedFilters, function (filter) {\n      return filter.getValue();\n    }).join(', ');\n  },\n\n  _fetchMeasurements: function () {\n    var region = this._region;\n    var fetchOptions = {\n      region: region && braces(region)\n    };\n\n    return this._measurementsCollection.fetch(fetchOptions);\n  },\n\n  _fetchMeasurementsWithFilter: function () {\n    var region = this._region;\n    var filters = this._buildFilters();\n\n    var fetchOptions = {\n      filters: filters && braces(filters),\n      region: region && braces(region)\n    };\n\n    return this._measurementsCollection.fetch(fetchOptions);\n  },\n\n  _searchMeasurements: function (keyword) {\n    var region = this._region;\n    var filters = this._buildFilters();\n\n    var fetchOptions = {\n      filters: filters && braces(filters),\n      region: region && braces(region),\n      search: keyword,\n      abortable: true\n    };\n\n    return this._measurementsCollection.fetch(fetchOptions);\n  },\n\n  _fetchFilters: function () {\n    var region = this._region;\n    var fetchOptions = {\n      region: region && braces(region)\n    };\n\n    return this._filtersCollection.fetch(fetchOptions);\n  },\n\n  _fetchCollections: function () {\n    var selectedFilters = this._filtersCollection.getSelected();\n\n    if (selectedFilters.length > 0) {\n      this._fetchMeasurementsWithFilter();\n    } else {\n      this._fetchMeasurements();\n    }\n  },\n\n  _createListView: function (stackLayoutModel, opts) {\n    this._fetchCollections();\n\n    var view = new MeasurementsView({\n      filtersCollection: this._filtersCollection,\n      measurementsCollection: this._measurementsCollection,\n      searchMeasurements: this._searchMeasurements.bind(this),\n      measurementModel: this._measurementModel\n    });\n\n    view.bind('filters', function () {\n      stackLayoutModel.nextStep();\n    }, this);\n\n    return view;\n  },\n\n  _createFilterView: function (stackLayoutModel, opts) {\n    // FIXME\n    // we could save this request, it only depends on region\n    if (this._filtersCollection.size() === 0) {\n      this._fetchFilters();\n    }\n\n    var view = new FiltersView({\n      filtersCollection: this._filtersCollection\n    });\n\n    view.bind('back', function () {\n      this._measurementsCollection.trigger('maybeFiltersUpdated');\n      stackLayoutModel.prevStep();\n    }, this);\n\n    return view;\n  },\n\n  hide: function () {\n    this.model.set('visible', false);\n  },\n\n  toggle: function () {\n    this.model.set('visible', !this.model.get('visible'));\n  },\n\n  isVisible: function () {\n    return this.model.get('visible');\n  },\n\n  _toggleVisibility: function () {\n    this.$el.toggleClass('is-visible', !!this.isVisible());\n  }\n});\n","var Backbone = require('backbone');\nvar _ = require('underscore');\nvar EditorHelpers = require('builder/components/form-components/helpers/editor');\nvar template = require('./data-observatory-measurements.tpl');\nvar selectedItemTemplate = require('./data-observatory-measurement-item.tpl');\nvar DropdownDialogView = require('./data-observatory-dropdown-measurements-view');\nvar PopupManager = require('builder/components/popup-manager');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar MeasurementsCollection = require('builder/data/data-observatory/measurements-collection');\nvar FiltersCollection = require('builder/data/data-observatory/filters-collection');\n\nvar ENTER_KEY_CODE = 13;\nvar STATE = {\n  idle: 'idle',\n  loading: 'loading',\n  fetching: 'fetching',\n  fetched: 'fetched',\n  error: 'error'\n};\nvar MEASUREMENT_ATTRIBUTES = ['aggregate', 'type', 'label', 'val', 'description', 'filter', 'license'];\n\nBackbone.Form.editors.DataObservatoryDropdown = Backbone.Form.editors.Base.extend({\n\n  tagName: 'div',\n  className: 'u-ellipsis Editor-formSelect',\n\n  events: {\n    'click .js-button': '_onButtonClick',\n    'keydown .js-button': '_onButtonKeyDown',\n    'focus .js-button': function () {\n      this.trigger('focus', this);\n    },\n    'blur': function () {\n      this.trigger('blur', this);\n    }\n  },\n\n  options: {\n    selectedItemTemplate: selectedItemTemplate\n  },\n\n  initialize: function (opts) {\n    Backbone.Form.editors.Base.prototype.initialize.call(this, opts);\n    EditorHelpers.setOptions(this, opts);\n\n    this.template = opts.template || template;\n    this.dialogMode = this.options.dialogMode || DialogConstants.Mode.DEFAULT;\n\n    this.measurementModel = this.options.measurementModel;\n\n    var fetchOptions = {\n      configModel: this.options.configModel,\n      nodeDefModel: this.options.nodeDefModel\n    };\n\n    this.measurementsCollection = new MeasurementsCollection([], fetchOptions);\n    this.filtersCollection = new FiltersCollection([], fetchOptions);\n\n    this._initBinds();\n\n    this._dialogView = new DropdownDialogView({\n      configModel: this.options.configModel,\n      nodeDefModel: this.options.nodeDefModel,\n      measurementsCollection: this.measurementsCollection,\n      filtersCollection: this.filtersCollection,\n      measurementModel: this.measurementModel,\n      region: this.options.region\n    });\n  },\n\n  render: function () {\n    var isLoading = this._isLoading();\n    var isDisabled = this.options.disabled;\n    var item = this.measurementModel;\n    var placeholder = this._getPlaceholder();\n    var isNull = this._hasValue();\n    var label = isNull ? placeholder : item.getName();\n    var title = item.getName() || '';\n\n    this.$el.html(\n      this.template({\n        title: title,\n        label: label,\n        keyAttr: this.options.keyAttr,\n        isDisabled: isDisabled,\n        isLoading: isLoading,\n        isNull: isNull\n      })\n    );\n\n    this._popupManager = new PopupManager(this.cid, this.$el, this._dialogView.$el);\n    this._popupManager.append(this.dialogMode);\n\n    if (item) {\n      this._renderLicense(item);\n    }\n\n    return this;\n  },\n\n  _initBinds: function () {\n    var hide = function () {\n      this._dialogView.hide();\n      this._popupManager && this._popupManager.untrack();\n    }.bind(this);\n\n    this.applyESCBind(hide);\n    this.applyClickOutsideBind(hide);\n\n    this.listenTo(this.measurementsCollection, 'change:selected', this._onItemSelected);\n  },\n\n  _destroyBinds: function () {\n    this.stopListening(this.measurementsCollection);\n    Backbone.Form.editors.Base.prototype._destroyBinds.call(this);\n  },\n\n  _getPlaceholder: function (isDisabled) {\n    var keyAttr = this.options.keyAttr;\n    var placeholder = this.options.placeholder || _t('components.backbone-forms.select.placeholder', { keyAttr: keyAttr });\n    return placeholder;\n  },\n\n  _hasValue: function () {\n    var name = this.measurementModel.getValue();\n    return name == null || name === '';\n  },\n\n  _isLoading: function () {\n    var state = this.measurementModel.getState();\n    return state === STATE.fetching;\n  },\n\n  _onItemSelected: function (mdl) {\n    var selected = this.measurementsCollection.getSelectedItem();\n\n    if (selected) {\n      this.measurementModel.clear({silent: true});\n      this.measurementModel.set(_.pick(selected.attributes, MEASUREMENT_ATTRIBUTES));\n    }\n\n    this._dialogView.hide();\n    this._popupManager.untrack();\n    this._renderLicense(selected);\n    this._renderButton(selected).focus();\n\n    this.trigger('change', this);\n  },\n\n  _onButtonClick: function () {\n    this._dialogView.toggle();\n    this._dialogView.isVisible() ? this._popupManager.track() : this._popupManager.untrack();\n  },\n\n  _onButtonKeyDown: function (ev) {\n    if (ev.which === ENTER_KEY_CODE) {\n      ev.preventDefault();\n      if (!this._dialogView.isVisible()) {\n        ev.stopPropagation();\n        this._onButtonClick();\n      } else {\n        this._popupManager.track();\n      }\n    }\n  },\n\n  validate: function () {\n    var value = this.getValue();\n    var validators = this.schema.validators;\n    var getValidator = this.getValidator;\n\n    if (!validators) return null;\n\n    // Run through validators until an error is found\n    var error = null;\n    _.every(validators, function (validator) {\n      error = getValidator(validator)(value, {});\n\n      return !!error;\n    });\n\n    // Return error to be aggregated by list\n    return error ? error : null; // eslint-disable-line\n  },\n\n  focus: function () {\n    this.$('.js-button').focus();\n  },\n\n  blur: function () {\n    this.$('.js-button').blur();\n  },\n\n  getValue: function () {\n    var item = this.measurementModel;\n    if (item) {\n      return item.getValue();\n    } else if (this.value) {\n      return this.value;\n    }\n  },\n\n  setValue: function (value) {\n    var selectedModel = this.measurementModel;\n    if (selectedModel) {\n      this._renderButton(selectedModel);\n    }\n    this.value = value;\n  },\n\n  _renderButton: function (mdl) {\n    var button = this.$('.js-button');\n    var label = mdl.getName();\n    var $html = this.options.selectedItemTemplate({\n      label: label\n    });\n\n    button\n      .removeClass('is-empty')\n      .attr('title', label)\n      .html($html);\n\n    return button;\n  },\n\n  _renderLicense: function (mdl) {\n    var license = mdl.get('license');\n    var $license = this.$('.js-license');\n    $license\n      .removeClass('u-isHidden')\n      .find('span')\n      .text(license);\n  },\n\n  remove: function () {\n    this._popupManager && this._popupManager.destroy();\n    this._dialogView && this._dialogView.clean();\n    this._destroyBinds();\n    Backbone.Form.editors.Base.prototype.remove.call(this);\n  }\n});\n","var _ = require('underscore');\nvar CustomListMultiItemView = require('builder/components/custom-list/custom-list-multi-item-view');\n\nvar NAME = _.template('<%-name %> (<%- items %>)');\n\nmodule.exports = CustomListMultiItemView.extend({\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    var name = this.model.getName() == null ? 'null' : this.model.getName();\n    name = name.replace(/\"/g, '');\n\n    this.$el.append(\n      this.options.template(\n        _.extend({\n          isSelected: this.model.get('selected'),\n          isDisabled: this.model.get('disabled'),\n          name: NAME({\n            name: name,\n            items: this.model.get('items')\n          }),\n          val: this.model.getValue(),\n          description: this.model.get('description')\n        })\n      )\n    );\n\n    this.$el\n      .attr('data-val', this.model.getValue())\n      .toggleClass('is-disabled', !!this.model.get('disabled'));\n\n    return this;\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar CustomListView = require('builder/components/custom-list/custom-view');\nvar CustomListItemView = require('./filter-list-item-view');\nvar itemListTemplate = require('./filter-list-item.tpl');\nvar template = require('./filter-list-view.tpl');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar statusTemplate = require('./list-view-states.tpl');\n\nvar REQUIRED_OPTS = [\n  'filtersCollection'\n];\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-back': '_onClickBack'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._initBinds();\n\n    this._listView = new CustomListView({\n      className: 'DO-Filters',\n      typeLabel: _t('components.backbone-forms.data-observatory.dropdown.filter.item-label'),\n      showSearch: false,\n      collection: this._filtersCollection,\n      itemTemplate: itemListTemplate,\n      itemView: CustomListItemView\n    });\n\n    this.addView(this._listView);\n  },\n\n  render: function () {\n    this.$el.append(template({\n      headerTitle: _t('components.backbone-forms.data-observatory.dropdown.filter.header')\n    }));\n\n    this._renderListSection();\n    return this;\n  },\n\n  _renderListSection: function () {\n    var status = this._filtersCollection.stateModel.get('state');\n    if (status === 'fetched') {\n      this.$('.js-content').html(this._listView.render().$el);\n    } else {\n      this._createStatusView(status);\n    }\n  },\n\n  _createStatusView: function (status) {\n    var el = statusTemplate({\n      status: status,\n      type: _t('components.backbone-forms.data-observatory.dropdown.filter.type')\n    });\n\n    this.$('.js-content').html(el);\n  },\n\n  _onClickBack: function (e) {\n    this.killEvent(e);\n    this.trigger('back', this);\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._filtersCollection.stateModel, 'change:state', this._renderListSection, this);\n    this.listenTo(this._filtersCollection, 'change:selected', this._onSelectItem, this);\n  },\n\n  _onSelectItem: function (item) {\n    this.trigger('selectItem', item, this);\n  }\n});\n","var Backbone = require('backbone');\nvar _ = require('underscore');\nvar NestedForm = require('builder/components/form-components/nested-form-custom');\nvar EditorHelpers = require('builder/components/form-components/helpers/editor');\n\nBackbone.Form.editors.List.MeasurementModel = Backbone.Form.editors.NestedModel.extend({\n  initialize: function (options) {\n    Backbone.Form.editors.Base.prototype.initialize.call(this, options);\n    EditorHelpers.setOptions(this, options);\n\n    if (!this.form) throw new Error('Missing required option \"form\"');\n    if (!options.schema.model) throw new Error('Missing required \"schema.model\" option for NestedModel editor');\n  },\n\n  render: function () {\n    var data = this.value || {};\n    var NestedModel = this.schema.model;\n\n    // Wrap the data in a model if it isn't already a model instance\n    var modelInstance = (data.constructor === NestedModel) ? data : new NestedModel(data, this.options);\n\n    this.nestedForm = new NestedForm({\n      className: 'Editor-formInner--nested',\n      model: modelInstance,\n      idPrefix: this.cid + '_',\n      fieldTemplate: 'nestedField',\n      template: _.template('<form data-fields=\"*\"></form>'),\n      trackingClass: this.options.trackingClass\n    });\n\n    this._observeFormEvents();\n\n    this.listenTo(this.nestedForm, 'change', this._onChangeForm, this);\n    // Render form\n    this.$el.html(this.nestedForm.render().el);\n\n    if (this.hasFocus) {\n      this.trigger('blur', this);\n    }\n\n    return this;\n  },\n\n  _onChangeForm: function () {\n    // To translate values and validation to parent form\n    this.nestedForm.commit();\n  },\n\n  remove: function () {\n    this.nestedForm && this.nestedForm.remove();\n    Backbone.Form.editors.NestedModel.prototype.remove.call(this);\n  }\n});\n","var _ = require('underscore');\nvar BaseView = require('builder/components/custom-list/custom-list-item-view');\n\nmodule.exports = BaseView.extend({\n  render: function () {\n    this.$el.empty();\n    this.clearSubViews();\n\n    var name = this.model.getName() == null ? 'null' : this.model.getName();\n    var isSelected = this.model.get('selected');\n\n    this.$el.append(\n      this.options.template(\n        _.extend({\n          isSelected: isSelected,\n          isDisabled: this.model.get('disabled'),\n          name: name,\n          val: this.model.getValue(),\n          description: this.model.get('description')\n        })\n      )\n    );\n\n    this.$el\n      .attr('data-val', this.model.getValue())\n      .attr('data-selected', isSelected)\n      .toggleClass('is-disabled', !!this.model.get('disabled'));\n\n    return this;\n  },\n\n  _onMouseLeave: function () {\n    var selected = this.$el.attr('data-selected');\n    if (!selected) {\n      this.$el.removeClass('is-highlighted');\n    }\n  },\n\n  _onMouseEnter: function () {\n    var selected = this.$el.attr('data-selected');\n    if (!selected) {\n      this.$el.addClass('is-highlighted');\n    }\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar template = require('./measurements-count.tpl');\n\nvar REQUIRED_OPTS = [\n  'model'\n];\n\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n    this._initBinds();\n  },\n\n  render: function () {\n    var query = this.model.get('query');\n    var isFiltering = this.model.get('filtering');\n    var items = this.model.get('items');\n    var count;\n\n    if (query === '' && !isFiltering) {\n      count = _t('analyses.data-observatory-measure.count.suggested');\n    } else {\n      count = _t('analyses.data-observatory-measure.count.search', {\n        items: items\n      });\n    }\n\n    this.$el.html(template({\n      items: count\n    }));\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.model, 'change:items', this.render);\n  }\n});\n","var Backbone = require('backbone');\nvar _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar CustomListView = require('builder/components/custom-list/custom-view');\nvar CustomListItemView = require('./measurement-list-item-view');\nvar itemListTemplate = require('./measurement-list-item.tpl');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar template = require('./measurements-list.tpl');\nvar SearchMeasurementView = require('./measurements-search-view');\nvar CountMeasurementView = require('./measurements-count-view');\nvar statusTemplate = require('./list-view-states.tpl');\n\nvar REQUIRED_OPTS = [\n  'filtersCollection',\n  'measurementsCollection',\n  'searchMeasurements',\n  'measurementModel'\n];\n\nmodule.exports = CoreView.extend({\n  options: {\n    maxItems: 100\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this.model = new Backbone.Model({\n      query: '',\n      items: this.options.maxItems,\n      filtered: false\n    });\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this.$el.html(template());\n    this._createSearchView();\n    this._createCountView();\n    this._renderListSection();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._measurementsCollection.stateModel, 'change:state', this._renderListSection);\n    this.listenTo(this.model, 'change:query', this._search);\n  },\n\n  _createListView: function () {\n    if (this._listView) {\n      this._listView.clean();\n      this.removeView(this._listView);\n    }\n\n    if (!this._isSerching()) {\n      this._promoteSelected();\n    }\n\n    this.model.set({\n      items: this._measurementsCollection.size(),\n      filtering: this._isFiltering()\n    });\n\n    this._listView = new CustomListView({\n      typeLabel: _t('components.backbone-forms.data-observatory.dropdown.measurement.type'),\n      showSearch: false,\n      itemView: CustomListItemView,\n      collection: this._measurementsCollection,\n      itemTemplate: itemListTemplate\n    });\n\n    this.addView(this._listView);\n    this._listView.show();\n    this.$('.js-list').html(this._listView.$el);\n  },\n\n  _createStatusView: function (status) {\n    var el = statusTemplate({\n      status: status,\n      type: _t('components.backbone-forms.data-observatory.dropdown.measurement.type')\n    });\n\n    this.$('.js-list').html(el);\n  },\n\n  _renderListSection: function () {\n    var status = this._measurementsCollection.stateModel.get('state');\n\n    if (status === 'fetched') {\n      this._createListView();\n    } else {\n      this._createStatusView(status);\n    }\n  },\n\n  _createSearchView: function () {\n    this._searchView = new SearchMeasurementView({\n      model: this.model,\n      filtersCollection: this._filtersCollection\n    });\n    this.addView(this._searchView);\n    this.$('.js-search').append(this._searchView.render().el);\n\n    this.listenTo(this._searchView, 'filters', this._onClickFilters);\n  },\n\n  _onClickFilters: function (e) {\n    this.killEvent(e);\n    this.trigger('filters');\n  },\n\n  _createCountView: function () {\n    var view = new CountMeasurementView({\n      model: this.model\n    });\n    this.addView(view);\n    this.$('.js-count').append(view.render().el);\n  },\n\n  _search: function () {\n    var keyword = this.model.get('query');\n\n    // This function is passed from the parent\n    this._searchMeasurements(keyword);\n  },\n\n  _isSerching: function () {\n    return !!this.model.get('query');\n  },\n\n  _isFiltering: function () {\n    var selectedFilters = this._filtersCollection.getSelected();\n    return selectedFilters.length > 0;\n  },\n\n  _promoteSelected: function () {\n    var selected = this._measurementModel;\n    if (!selected.getValue()) {\n      return;\n    }\n\n    var hit = this._measurementsCollection.findWhere({val: selected.getValue()});\n\n    if (hit) {\n      this._measurementsCollection.remove(hit);\n    }\n\n    var promoted = _.clone(selected.attributes);\n    promoted.selected = true;\n\n    this._measurementsCollection.add(promoted, {at: 0});\n  }\n});\n","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar utils = require('builder/helpers/utils');\nvar template = require('./measurements-search.tpl');\n\nvar REQUIRED_OPTS = [\n  'model',\n  'filtersCollection'\n];\n\nmodule.exports = CoreView.extend({\n  className: 'CDB-Box-modalHeader',\n\n  events: {\n    'input .js-input-search': '_search',\n    'click .js-filters': '_onClickFilters'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n  },\n\n  render: function () {\n    var label = this._getSearchLabel();\n    this.$el.html(template({\n      label: label\n    }));\n\n    // Focus the input when rendered\n    setTimeout(function () {\n      this._getInput().focus();\n    }.bind(this), 100);\n\n    return this;\n  },\n\n  _getSearchLabel: function () {\n    var selectedFilters = this._filtersCollection.getSelected().length;\n    var label = _t('analyses.data-observatory-measure.filters.label');\n    if (selectedFilters === 1) {\n      label = _t('analyses.data-observatory-measure.filters.applied.single');\n    } else if (selectedFilters > 1) {\n      label = _t('analyses.data-observatory-measure.filters.applied.multiple', {\n        filters: selectedFilters\n      });\n    }\n\n    return label;\n  },\n\n  _onClickFilters: function (e) {\n    this.killEvent(e);\n    this.trigger('filters');\n  },\n\n  _search: _.debounce(function (e) {\n    var query = this._getInput().val();\n    query = query.toLowerCase();\n    query = utils.sanitizeHtml(query);\n    this.model.set('query', query);\n  }, 500),\n\n  _getInput: function () {\n    return this.$('.js-input-search');\n  }\n});\n","var Backbone = require('backbone');\n\n/**\n * View model of the fill dialog\n */\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    show: false\n  },\n\n  show: function () {\n    this.set('show', true);\n  },\n\n  hide: function () {\n    this.set('show', false);\n  },\n\n  isHidden: function () {\n    return !this.get('show');\n  },\n\n  /**\n   * @override {Backbone.Model.prototype.destroy}\n   */\n  destroy: function () {\n    var args = Array.prototype.slice.call(arguments);\n    this.trigger.apply(this, ['destroy'].concat(args));\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar DatetimeEditorView = require('./datetime-editor-view');\n\nmodule.exports = CoreView.extend({\n\n  className: 'CDB-Box-modal CustomList CustomList--inputs is-visible has-visibility js-datetimePicker',\n\n  initialize: function () {\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this._datetimeEditorView = new DatetimeEditorView({\n      model: this.model\n    });\n    this.addView(this._datetimeEditorView);\n    this.$el.append(this._datetimeEditorView.render().el);\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.model, 'change:show', this._onShowChange);\n    this.listenTo(this.model, 'destroy', this._onDestroy);\n  },\n\n  _onShowChange: function (mdl, show) {\n    if (show) {\n      this.$el.show();\n      this.$el.removeClass('is-closing').addClass('is-opening');\n    } else {\n      this.$el.removeClass('is-opening').addClass('is-closing');\n      this.$el.hide();\n    }\n  },\n\n  show: function () {\n    this.model.show();\n  },\n\n  hide: function () {\n    this.model.hide();\n  },\n\n  _onDestroy: function () {\n    this.hide();\n    this.clean();\n  }\n});\n","var Backbone = require('backbone');\nvar Utils = require('builder/helpers/utils');\nvar moment = require('moment');\n\nvar MONTHS = [\n  {\n    val: 0,\n    label: _t('months.january')\n  }, {\n    val: 1,\n    label: _t('months.february')\n  }, {\n    val: 2,\n    label: _t('months.march')\n  }, {\n    val: 3,\n    label: _t('months.april')\n  }, {\n    val: 4,\n    label: _t('months.may')\n  }, {\n    val: 5,\n    label: _t('months.june')\n  }, {\n    val: 6,\n    label: _t('months.july')\n  }, {\n    val: 7,\n    label: _t('months.august')\n  }, {\n    val: 8,\n    label: _t('months.september')\n  }, {\n    val: 9,\n    label: _t('months.october')\n  }, {\n    val: 10,\n    label: _t('months.november')\n  }, {\n    val: 11,\n    label: _t('months.december')\n  }\n];\n\nmodule.exports = Backbone.Model.extend({\n\n  initialize: function () {\n    this.schema = {\n      day: {\n        type: 'Text',\n        title: '',\n        validators: [\n          'required',\n          /^(([0]?[1-9])|([1-2][0-9])|(3[01]))$/,\n          function (value, formValues) {\n            var date = moment(Utils.formatDate(formValues));\n            if (!date.isValid()) {\n              return {\n                type: 'date',\n                message: _t('components.datepicker.invalid-date')\n              };\n            }\n          }\n        ]\n      },\n      month: {\n        type: 'Select',\n        title: '',\n        position: {\n          'left': 0,\n          'min-width': '200px'\n        },\n        options: MONTHS\n      },\n      year: {\n        title: '',\n        type: 'Text',\n        validators: ['required', /^([0-9]{0,4})$/]\n      },\n      time: {\n        title: '',\n        type: 'Text',\n        validators: ['required', /^([01]{1}[0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]$/]\n      }\n    };\n  },\n\n  getFormattedDate: function () {\n    return Utils.formatDate(this.toJSON());\n  }\n});\n","var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar moment = require('moment');\nvar DatetimeEditorModel = require('./datetime-editor-model');\n\nmodule.exports = CoreView.extend({\n\n  tagName: 'div',\n  className: 'Table-editorDate',\n\n  events: {\n    'keyup': '_onKeyUp'\n  },\n\n  initialize: function () {\n    var dateAttr = this.model.get('value');\n    var date = {};\n\n    if (!dateAttr) {\n      date = moment().utc();\n    } else {\n      date = moment(dateAttr).utc();\n    }\n\n    this._formModel = new DatetimeEditorModel({\n      day: date.date(),\n      month: date.month(),\n      year: date.year(),\n      time: date.format('HH:mm:ss'),\n      utcOffset: date.utcOffset()\n    });\n    this._formModel.bind('change', this._setValue, this);\n    this.add_related_model(this._formModel);\n\n    this._setValue();\n  },\n\n  render: function () {\n    this._formView = new Backbone.Form({\n      model: this._formModel\n    });\n\n    this._formView.bind('change', function () {\n      this.commit();\n    });\n\n    this.$el.html(this._formView.render().el);\n\n    return this;\n  },\n\n  _setValue: function () {\n    this.model.set('value', this._formModel.getFormattedDate());\n  },\n\n  _onKeyUp: function () {\n    this._setValue();\n  },\n\n  clean: function () {\n    this._formView.remove();\n    CoreView.prototype.clean.apply(this);\n  }\n\n});\n","var Backbone = require('backbone');\nvar EditorHelpers = require('builder/components/form-components/helpers/editor');\nvar moment = require('moment');\n\nvar DatetimeDialogModel = require('./datetime-dialog-model');\nvar DatetimeDialogView = require('./datetime-dialog-view');\nvar template = require('./datetime.tpl');\n\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar PopupManager = require('builder/components/popup-manager');\n\nBackbone.Form.editors.DateTime = Backbone.Form.editors.Base.extend({\n  className: 'Editor-formInput u-flex u-alignCenter',\n\n  events: {\n    'click .js-input': '_onInputClick'\n  },\n\n  initialize: function (opts) {\n    Backbone.Form.editors.Base.prototype.initialize.call(this, opts);\n    EditorHelpers.setOptions(this, opts);\n\n    this.dialogMode = this.options.dialogMode || DialogConstants.Mode.DEFAULT;\n    this._initBinds();\n    this.render();\n  },\n\n  render: function () {\n    Backbone.Form.editors.Base.prototype.render.apply(this, arguments);\n\n    this._removeDateTimeDialog();\n\n    this.$el.html(\n      template({\n        value: this._getFormattedDatetime()\n      })\n    );\n\n    this._initViews();\n\n    return this;\n  },\n\n  _getFormattedDatetime: function () {\n    if (this.value) {\n      var value = new Date(this.value).toUTCString();\n      var momentObj = moment(value).utc();\n      return momentObj.format('YYYY-MM-DD') + 'T' + momentObj.format('HH:mm:ss') + 'Z';\n    }\n\n    // for datetime type, empty '' value raises an error on Postgres\n    return null;\n  },\n\n  _initViews: function () {\n    if (this.options.editorAttrs && this.options.editorAttrs.disabled) {\n      this.$el.addClass('is-disabled');\n    }\n\n    this._datetimeDialogModel = new DatetimeDialogModel({\n      value: this._getFormattedDatetime()\n    });\n    this._datetimeDialogModel.bind('change:value', this._onInputChanged, this);\n\n    this._datetimeDialogView = new DatetimeDialogView({\n      model: this._datetimeDialogModel\n    });\n\n    this._popupManager = new PopupManager(this.cid, this.$el, this._datetimeDialogView.$el);\n  },\n\n  _initBinds: function () {\n    var hide = function () {\n      this._removeDateTimeDialog();\n    }.bind(this);\n    this.applyESCBind(hide);\n    this.applyClickOutsideBind(hide);\n  },\n\n  _onInputClick: function () {\n    this._datetimeDialogView.render();\n    this._popupManager.append(this.dialogMode);\n    this._popupManager.track();\n  },\n\n  _removeDateTimeDialog: function () {\n    if (this._datetimeDialogView) {\n      this._popupManager.untrack();\n      this._datetimeDialogView.remove();\n    }\n  },\n\n  _onInputChanged: function (mdl) {\n    var value = this._datetimeDialogModel.get('value');\n    this.setValue(value);\n\n    this.trigger('change', this);\n  },\n\n  _updateInput: function (value) {\n    this.$('.js-input')\n      .toggleClass('is-empty', !value)\n      .text(value);\n  },\n\n  getValue: function () {\n    return this._datetimeDialogModel.get('value');\n  },\n\n  setValue: function (value) {\n    this._updateInput(value);\n    this.value = value;\n  },\n\n  remove: function () {\n    this._removeDateTimeDialog();\n    this._popupManager && this._popupManager.destroy();\n    Backbone.Form.editors.Base.prototype.remove.apply(this);\n  }\n});\n","var $ = require('jquery');\nvar _ = require('underscore');\nvar Backbone = require('backbone');\nvar EditorHelpers = require('builder/components/form-components/helpers/editor');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\nvar template = require('./enabler-editor.tpl');\n\n/**\n *  Creates an element that enables another component, tested with:\n *\n *  select, number and input so far.\n */\n\nBackbone.Form.editors.EnablerEditor = Backbone.Form.editors.Base.extend({\n  tagName: 'div',\n  className: 'Editor-checker u-flex u-alignCenter',\n\n  events: {\n    'click .js-check': '_onCheckClicked'\n  },\n\n  initialize: function (opts) {\n    Backbone.Form.editors.Base.prototype.initialize.call(this, opts);\n    EditorHelpers.setOptions(this, opts);\n\n    // Disable validators unless it's enabled\n    this.validators = null;\n\n    if (!this.options.editor) {\n      throw new Error('editor options is required');\n    }\n\n    this._editorOptions = this.options.editor;\n    this.value = this.model.get(opts.key);\n    this._checkModel = new Backbone.Model({\n      enabled: !!this.value\n    });\n    this.template = template;\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.$el.html(\n      this.template({\n        label: this.options.label,\n        isChecked: this._isChecked(),\n        help: this.options.help || '',\n        isDisabled: !!this.options.isDisabled,\n        id: this.cid\n      })\n    );\n\n    if (this.options.help) {\n      this._helpTooltip = new TipsyTooltipView({\n        el: this.$('.js-help'),\n        gravity: 's',\n        offset: 0,\n        title: function () {\n          return $(this).data('tooltip');\n        }\n      });\n    }\n\n    this._renderComponent();\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this._checkModel.bind('change:enabled', function (mdl, isEnabled) {\n      this._manageValue(isEnabled);\n      this._renderComponent();\n      this._triggerChange();\n    }, this);\n  },\n\n  _manageValue: function (isEnabled) {\n    if (isEnabled) {\n      this.validators = this.options.validators;\n      this.value = this.options.defaultValue || '';\n      this._editorComponent.setValue(this.options.defaultValue || '');\n    } else {\n      this.validators = null;\n      this.value = '';\n      this._editorComponent.setValue('');\n    }\n    this.model.set(this.options.keyAttr, this.value);\n    this.validate();\n  },\n\n  _isChecked: function () {\n    return this._checkModel.get('enabled');\n  },\n\n  _renderComponent: function () {\n    if (this._editorComponent) {\n      this._removeComponent();\n    }\n\n    var isDisabled = !this._isChecked() || this.options.isDisabled;\n    var EditorClass = Backbone.Form.editors[this._editorOptions.type];\n    var editorAttrs = _.extend(\n      this._editorOptions.editorAttrs || {},\n      {\n        disabled: isDisabled\n      }\n    );\n\n    this._editorComponent = new EditorClass(\n      _.extend(\n        {\n          model: this.model,\n          key: this.options.keyAttr,\n          editorAttrs: editorAttrs,\n          trackingClass: this.options.trackingClass,\n          editorType: this._editorOptions.type\n        },\n        _.omit(this._editorOptions, 'editorAttrs', 'type')\n      )\n    );\n    this._editorComponent.bind('change', this._setEditorComponentValue, this);\n    this.$('.js-editor').html(this._editorComponent.render().el);\n\n    // Not all editor implement the focus method\n    try {\n      this._editorComponent.focus();\n    } catch (e) {}\n  },\n\n  _removeComponent: function () {\n    this._editorComponent.remove();\n    this._editorComponent.unbind('change', this._setEditorComponentValue, this);\n  },\n\n  _setEditorComponentValue: function () {\n    this.value = this._editorComponent.getValue();\n    this._triggerChange();\n  },\n\n  _triggerChange: function () {\n    this.trigger('change', this);\n  },\n\n  getValue: function () {\n    if (this._checkModel.get('enabled')) {\n      return this._editorComponent && this._editorComponent.getValue() || '';\n    } else {\n      return '';\n    }\n  },\n\n  setValue: function (value) {\n    this._checkModel.set('enabled', !!value);\n    if (this._editorComponent) {\n      this._editorComponent.setValue(value);\n    }\n    this.value = value;\n  },\n\n  _onCheckClicked: function (ev) {\n    this._checkModel.set('enabled', $(ev.target).is(':checked'));\n  },\n\n  remove: function () {\n    if (this._editorComponent) {\n      this._removeComponent();\n    }\n    if (this._helpTooltip) {\n      this._helpTooltip.clean();\n    }\n    Backbone.Form.editors.Base.prototype.remove.call(this);\n  }\n\n});\n","var Backbone = require('backbone');\nvar EditorHelpers = require('builder/components/form-components/helpers/editor');\nvar $ = require('jquery');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\nvar template = require('./enabler.tpl');\nvar templateReversed = require('./enabler-reversed.tpl');\n\nBackbone.Form.editors.Enabler = Backbone.Form.editors.Base.extend({\n  tagName: 'div',\n\n  events: {\n    'change .js-input': '_onCheckChange',\n    'focus .js-input': function () {\n      this.trigger('focus', this);\n    },\n    'blur .js-input': function () {\n      this.trigger('blur', this);\n    }\n  },\n\n  initialize: function (opts) {\n    Backbone.Form.editors.Base.prototype.initialize.call(this, opts);\n    EditorHelpers.setOptions(this, opts);\n\n    this.template = opts.schema && opts.schema.editorAttrs && opts.schema.editorAttrs.reversed ? templateReversed : (opts.template || template);\n    this._initViews();\n  },\n\n  _initViews: function () {\n    this.$el.html(\n      this.template({\n        checked: this.options.disabled ? false : this.model.get(this.options.key),\n        label: this.options.label,\n        id: this.options.inputId,\n        title: this.options.title,\n        help: this.options.help || '',\n        disabled: this.options.disabled\n      })\n    );\n\n    if (this.options.help) {\n      this._removeTooltip();\n\n      this._helpTooltip = new TipsyTooltipView({\n        el: this.$('.js-help'),\n        gravity: 's',\n        title: function () {\n          return $(this).data('tooltip');\n        }\n      });\n    }\n\n    if (this.options.disabled) {\n      this.undelegateEvents();\n    }\n  },\n\n  _onCheckChange: function () {\n    var isEnabled = this.$('.js-input').is(':checked');\n    this.model.set('enabler', isEnabled);\n    this.trigger('change', this);\n  },\n\n  getValue: function () {\n    return this.$('.js-input').is(':checked');\n  },\n\n  setValue: function (value) {\n    this.$('.js-input')[value ? 'attr' : 'removeAttr']('checked', '');\n    this.model.set(this.key, value);\n  },\n\n  _removeTooltip: function () {\n    if (this._helpTooltip) {\n      this._helpTooltip.clean();\n    }\n  },\n\n  remove: function () {\n    this._removeTooltip();\n    Backbone.Form.editors.Base.prototype.remove.apply(this);\n  }\n\n});\n","var InputFillView = require('builder/components/input-fill/input-fill-view');\nvar InputColorByValueView = require('builder/components/form-components/editors/fill-color/inputs/input-color-by-value');\nvar FillConstants = require('builder/components/form-components/_constants/_fill');\n\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'columns',\n  'query',\n  'configModel',\n  'userModel',\n  'editorAttrs',\n  'modals',\n  'dialogMode',\n  'valueColorInputModel',\n  'popupConfig'\n];\n\nmodule.exports = InputFillView.extend({\n  initialize: function (options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n\n    this._initViews();\n  },\n\n  _initInputFields: function () {\n    InputFillView.prototype._initInputFields.call(this);\n\n    this._initColorByValueInput();\n  },\n\n  _initColorByValueInput: function () {\n    var quantification = this._valueColorInputModel.get('quantification');\n\n    if (quantification && FillConstants.Quantification.REFERENCE[quantification]) {\n      this._valueColorInputModel.set(\n        'quantification',\n        FillConstants.Quantification.REFERENCE[quantification], {\n          silent: true\n        }\n      );\n    }\n\n    this._valueColorInputView = new InputColorByValueView({\n      model: this._valueColorInputModel,\n      columns: this.options.columns,\n      hideNumericColumns: this.options.hideNumericColumns,\n      removeByValueCategory: this.options.removeByValueCategory,\n      query: this.options.query,\n      configModel: this.options.configModel,\n      userModel: this.options.userModel,\n      modals: this.options.modals,\n      imageEnabled: this.options.imageEnabled,\n      editorAttrs: this.options.editorAttrs ? this.options.editorAttrs : {},\n      disabled: this.options.editorAttrs && this.options.editorAttrs.disabled\n    });\n\n    this._valueColorInputView.bind('click', this._onInputClick, this);\n    this.$('.js-content').append(this._valueColorInputView.render().$el);\n\n    this._inputCollection && this._inputCollection.push(this._valueColorInputModel);\n  },\n\n  afterRender: function () {\n    this._valueColorInputView && this._valueColorInputView.afterRender();\n  }\n});\n","var InputFillView = require('builder/components/input-fill/input-fill-view');\nvar InputColorFixedView = require('builder/components/form-components/editors/fill-color/inputs/input-color-fixed');\nvar InputImageView = require('builder/components/form-components/editors/fill-color/inputs/input-image');\n\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'columns',\n  'editorAttrs',\n  'dialogMode',\n  'popupConfig',\n  'fixedColorInputModel',\n  'imageInputModel'\n];\n\nmodule.exports = InputFillView.extend({\n  initialize: function (options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n\n    if (this._editorAttrs.imageEnabled) {\n      this._configModel = this.options.configModel;\n      this._userModel = this.options.userModel;\n      this._modals = this.options.modals;\n    }\n\n    this._initViews();\n  },\n\n  _initInputFields: function () {\n    InputFillView.prototype._initInputFields.call(this);\n\n    this._initFillColorInput();\n    this._initFillImageInput();\n  },\n\n  _initFillColorInput: function () {\n    this._fillInputColorView = new InputColorFixedView({\n      model: this._fixedColorInputModel,\n      columns: this._columns,\n      configModel: this._configModel,\n      userModel: this._userModel,\n      modals: this._modals,\n      editorAttrs: this._editorAttrs || {},\n      disabled: this._editorAttrs && this._editorAttrs.disabled\n    });\n\n    this._fillInputColorView.bind('click', this._onInputClick, this);\n    this.$('.js-content').append(this._fillInputColorView.render().$el);\n\n    this._inputCollection && this._inputCollection.push(this._fixedColorInputModel);\n  },\n\n  _initFillImageInput: function () {\n    if (this._editorAttrs.imageEnabled) {\n      this._fillInputImageView = new InputImageView({\n        model: this._imageInputModel,\n        columns: this._columns,\n        configModel: this._configModel,\n        userModel: this._userModel,\n        modals: this._modals,\n        query: this._query,\n        editorAttrs: this._editorAttrs || {},\n        disabled: this._editorAttrs && this._editorAttrs.disabled\n      });\n\n      this._fillInputImageView.bind('click', this._onInputClick, this);\n      this.$('.js-content').append(this._fillInputImageView.render().$el);\n\n      this._inputCollection && this._inputCollection.push(this._imageInputModel);\n    }\n  },\n\n  _unbindFormInputs: function () {\n    this._fillInputColorView.unbind('click', this._onInputClick, this);\n    if (this._fillInputImageView) {\n      this._fillInputImageView.unbind('click', this._onInputClick, this);\n    }\n    this._inputCollection.unbind('onInputChanged', this._onInputChanged, this);\n  },\n\n  clean: function () {\n    this._unbindFormInputs();\n    InputFillView.prototype.clean.call(this);\n  }\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar EditorHelpers = require('builder/components/form-components/helpers/editor');\n\nvar FillColorFixedView = require('builder/components/form-components/editors/fill-color/fill-color-fixed-view');\nvar FillColorByValueView = require('builder/components/form-components/editors/fill-color/fill-color-by-value-view');\n\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar FillConstants = require('builder/components/form-components/_constants/_fill');\nvar tabPaneTemplate = require('builder/components/tab-pane/tab-pane.tpl');\nvar createRadioLabelsTabPane = require('builder/components/tab-pane/create-radio-labels-tab-pane');\n\nBackbone.Form.editors.FillColor = Backbone.Form.editors.Base.extend({\n  className: 'Form-InputFill Editor-formInput--FillColor',\n\n  initialize: function (options) {\n    Backbone.Form.editors.Base.prototype.initialize.call(this, options);\n    EditorHelpers.setOptions(this, options);\n\n    if (this.options.editorAttrs) {\n      this.options = _.extend(this.options, {\n        columns: this.options.options,\n        query: this.options.query,\n        configModel: this.options.configModel,\n        userModel: this.options.userModel,\n        editorAttrs: this.options.editorAttrs,\n        modals: this.options.modals\n      });\n\n      this._colorKeyAttribute = options.key;\n      this._colorAttributes = this.model.get(this._colorKeyAttribute);\n      this._sizeAttributes = this.model.get('fillSize');\n\n      this._imageInputModel = new Backbone.Model(\n        _.extend({ type: 'image' }, this._colorAttributes)\n      );\n\n      this._fixedColorInputModel = new Backbone.Model(\n        _.extend({ type: 'color' }, this._colorAttributes)\n      );\n\n      this._valueColorInputModel = new Backbone.Model(\n        _.extend({ type: 'color' }, this._colorAttributes)\n      );\n    }\n\n    this._initViews();\n  },\n\n  _initViews: function () {\n    var self = this;\n    var geometryName = this.options.editorAttrs.geometryName;\n\n    var fixedPane = {\n      name: FillConstants.Panes.FIXED,\n      label: _t('form-components.editors.fill.input-number.solid'),\n      tooltip: _t('editor.style.tooltips.fill.fixed-tab', { type: geometryName }),\n      tooltipGravity: 's',\n      createContentView: function () {\n        return self._generateFixedContentView();\n      }\n    };\n\n    var valuePane = {\n      name: FillConstants.Panes.BY_VALUE,\n      label: _t('form-components.editors.fill.input-number.by-value'),\n      tooltip: _t('editor.style.tooltips.fill.by-value-tab', { type: geometryName }),\n      tooltipGravity: 's',\n      createContentView: function () {\n        return self._generateValueContentView();\n      }\n    };\n\n    this._tabPaneTabs = [];\n\n    if (this.options.editorAttrs && this.options.editorAttrs.hidePanes) {\n      var hidePanes = this.options.editorAttrs.hidePanes;\n\n      if (!_.contains(hidePanes, FillConstants.Panes.FIXED)) {\n        this._tabPaneTabs.push(fixedPane);\n      }\n\n      if (!_.contains(hidePanes, FillConstants.Panes.BY_VALUE)) {\n        this._tabPaneTabs.push(valuePane);\n      }\n    } else {\n      this._tabPaneTabs = [fixedPane, valuePane];\n    }\n\n    var tabPaneOptions = {\n      tabPaneOptions: {\n        template: tabPaneTemplate,\n        tabPaneItemOptions: {\n          tagName: 'li',\n          klassName: 'CDB-NavMenu-item'\n        }\n      },\n      tabPaneItemLabelOptions: {\n        tagName: 'div',\n        className: 'CDB-Text CDB-Size-medium'\n      }\n    };\n\n    var selectedTabPaneIndex = this._getSelectedTabPaneIndex();\n    this._tabPaneTabs[selectedTabPaneIndex].selected = true;\n\n    this._tabPaneView = createRadioLabelsTabPane(this._tabPaneTabs, tabPaneOptions);\n    this.$el.append(this._tabPaneView.render().$el);\n  },\n\n  _getSelectedTabPaneIndex: function () {\n    var FIXED_TAB_PANE_INDEX = 0;\n    var VALUE_TAB_PANE_INDEX = 1;\n\n    return this._colorAttributes && this._colorAttributes.range &&\n      this._tabPaneTabs.length > 1\n      ? VALUE_TAB_PANE_INDEX\n      : FIXED_TAB_PANE_INDEX;\n  },\n\n  _removeDialogs: function () {\n    this._removeFillColorFixedDialog();\n    this._removeFillColorByValueDialog();\n  },\n\n  _removeFillColorFixedDialog: function () {\n    this._fillColorFixedView && this._fillColorFixedView.removeDialog();\n  },\n\n  _removeFillColorByValueDialog: function () {\n    this._fillColorByValueView && this._fillColorByValueView.removeDialog();\n  },\n\n  _generateFixedContentView: function () {\n    this._fillColorFixedView = new FillColorFixedView({\n      model: this.model,\n      columns: this.options.columns,\n      configModel: this.options.configModel,\n      userModel: this.options.userModel,\n      modals: this.options.modals,\n      query: this.options.query,\n      editorAttrs: this.options.editorAttrs,\n      dialogMode: DialogConstants.Mode.FLOAT,\n      hideTabs: this.options.hideTabs,\n      fixedColorInputModel: this._fixedColorInputModel,\n      imageInputModel: this._imageInputModel,\n      popupConfig: {\n        cid: this.cid,\n        $el: this.$el\n      }\n    });\n\n    this.applyESCBind(this._removeFillColorFixedDialog);\n    this.applyClickOutsideBind(this._removeFillColorFixedDialog);\n\n    this._fillColorFixedView.on('onInputChanged', function (input) {\n      this.trigger('change', input);\n    }, this);\n\n    return this._fillColorFixedView;\n  },\n\n  _generateValueContentView: function () {\n    this._fillColorByValueView = new FillColorByValueView({\n      columns: this.options.columns,\n      query: this.options.query,\n      configModel: this.options.configModel,\n      userModel: this.options.userModel,\n      editorAttrs: this.options.editorAttrs,\n      model: this.model,\n      dialogMode: DialogConstants.Mode.FLOAT,\n      categorizeColumns: this.options.categorizeColumns,\n      hideNumericColumns: this.options.hideNumericColumns,\n      removeByValueCategory: this.options.removeByValueCategory,\n      modals: this.options.modals,\n      hideTabs: this.options.hideTabs,\n      valueColorInputModel: this._valueColorInputModel,\n      popupConfig: {\n        cid: this.cid,\n        $el: this.$el\n      }\n    });\n\n    this.applyESCBind(this._removeFillColorByValueDialog);\n    this.applyClickOutsideBind(this._removeFillColorByValueDialog);\n\n    this._fillColorByValueView.on('onInputChanged', function (input) {\n      this.trigger('change', input);\n    }, this);\n\n    return this._fillColorByValueView;\n  },\n\n  getValue: function (param) {\n    var selectedTabPaneName = this._tabPaneView.getSelectedTabPaneName();\n\n    return selectedTabPaneName === FillConstants.Panes.FIXED\n      ? this._getFillFixedValues()\n      : this._getFillByValueValues();\n  },\n\n  _getFillFixedValues: function () {\n    var color = this._fixedColorInputModel.toJSON();\n    var image = this._imageInputModel.toJSON();\n\n    if (color.range) {\n      color.fixed = color.range[0];\n      color.opacity = 1;\n    }\n\n    var colorOmitAttributes = [\n      'createContentView',\n      'selected',\n      'type',\n      'image',\n      'marker',\n      'range'\n    ];\n\n    var imageOmitAttributes = [\n      'createContentView',\n      'selected',\n      'type',\n      'fixed',\n      'range'\n    ];\n\n    var colorAttributes = _.omit(color, colorOmitAttributes);\n    var imageAttributes = _.omit(image, imageOmitAttributes);\n    var values = _.extend({}, imageAttributes, colorAttributes);\n\n    this._fixedColorInputModel.set(values);\n    this._imageInputModel.set(values);\n\n    return values;\n  },\n\n  _getFillByValueValues: function () {\n    var colorOmitAttributes = [\n      'createContentView',\n      'selected',\n      'type'\n    ];\n\n    var values = _.omit(this._valueColorInputModel.toJSON(), colorOmitAttributes);\n\n    this._valueColorInputModel.set(values);\n\n    return values;\n  },\n\n  remove: function () {\n    this._removeDialogs();\n    this._tabPaneView.clean();\n    this._fillColorByValueView && this._fillColorByValueView.clean();\n    this._fillColorFixedView && this._fillColorFixedView.clean();\n    Backbone.Form.editors.Base.prototype.remove.apply(this);\n  }\n});\n","var _ = require('underscore');\nvar $ = require('jquery');\n\nvar CoreView = require('backbone/core-view');\n\nvar InputColorValueContentView = require('builder/components/input-color/input-color-value-content-view');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\nvar InputColorTemplate = require('builder/components/form-components/editors/fill-color/inputs/input-color-by-value.tpl');\nvar FillConstants = require('builder/components/form-components/_constants/_fill');\n\nvar Utils = require('builder/helpers/utils');\n\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'columns',\n  'query',\n  'configModel',\n  'userModel',\n  'modals'\n];\n\nmodule.exports = CoreView.extend({\n  tagName: 'li',\n  className: 'CDB-OptionInput-item',\n\n  events: {\n    'click': '_onClick'\n  },\n\n  initialize: function (options) {\n    if (this.options.editorAttrs) {\n      this._editorAttrs = this.options.editorAttrs;\n      this._help = this._editorAttrs.help;\n      this._imageEnabled = this._editorAttrs.imageEnabled;\n      this._hideNumericColumns = this.options.hideNumericColumns;\n      this._removeByValueCategory = this.options.removeByValueCategory;\n\n      if (this._editorAttrs.hidePanes && !_.contains(this._editorAttrs.hidePanes, FillConstants.Panes.BY_VALUE)) {\n        if (!options.configModel) throw new Error('configModel param is required');\n        if (!options.userModel) throw new Error('userModel param is required');\n        if (!options.modals) throw new Error('modals param is required');\n        if (!options.query) throw new Error('query param is required');\n      }\n    }\n\n    if (!options.columns) throw new Error('columns is required');\n\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this.$el.toggleClass('is-disabled', this.options.disabled);\n\n    this.$el.html(\n      InputColorTemplate({\n        value: this._getValue(),\n        attribute: this.model.get('attribute'),\n        opacity: this._getOpacity(),\n        colorBar: this._getColorbar(),\n        help: this._help.color || ''\n      })\n    );\n\n    this._initViews();\n\n    return this;\n  },\n\n  afterRender: function () {\n    this._openPopupForColumn();\n  },\n\n  _openPopupForColumn: function () {\n    var columnSelected = this.model.get('attribute');\n    if (_.isUndefined(columnSelected)) {\n      var self = this;\n      setTimeout(function () { self.$el.click(); }, 200);\n    }\n  },\n\n  _getColorbar: function () {\n    var colors = this._getValue();\n    if (!_.isArray(colors)) return '';\n\n    var deltaPercent = (100.0 / colors.length);\n    var previousPercent = 0;\n    var self = this;\n    var colorsForBar = colors.map(function (color) {\n      var min = previousPercent;\n      var max = previousPercent + deltaPercent;\n      var entry = self._getColorStep(color, [min, max]);\n      previousPercent = max;\n      return entry;\n    });\n\n    var colorBar = 'background: linear-gradient(90deg, ' + colorsForBar.join(', ') + ')';\n    return colorBar;\n  },\n\n  _getColorStep: function (color, minMax) {\n    return (color + ' ' + minMax[0] + '%, ' + color + ' ' + minMax[1] + '%');\n  },\n\n  _initViews: function () {\n    if (this._help.color) {\n      var tooltip = new TipsyTooltipView({\n        el: this.$('.js-help'),\n        gravity: 'w',\n        title: function () {\n          return $(this).data('tooltip');\n        },\n        offset: 8\n      });\n\n      this.addView(tooltip);\n    }\n  },\n\n  _initBinds: function () {\n    var self = this;\n\n    this.model.set('createContentView', function () {\n      return self._createContentView();\n    }).bind(this);\n\n    this.model.on('change:selected', this._onToggleSelected, this);\n    this.model.on('change:opacity change:range change:attribute', this.render, this);\n  },\n\n  _getColumn: function () {\n    return _.find(this._columns, function (column) {\n      return column.label === this.model.get('attribute');\n    }, this);\n  },\n\n  _iconStylingEnabled: function () {\n    return this._imageEnabled;\n  },\n\n  _createContentView: function () {\n    this._inputColorValueContentView = new InputColorValueContentView({\n      model: this.model,\n      columns: this._columns,\n      hideNumericColumns: this._hideNumericColumns,\n      removeByValueCategory: this._removeByValueCategory,\n      configModel: this._configModel,\n      categorizeColumns: this._categorizeColumns,\n      imageEnabled: this._imageEnabled,\n      userModel: this._userModel,\n      modals: this._modals,\n      hideTabs: this._hideTabs,\n      query: this._query\n    });\n\n    this.model.on('change', this._onChangeValue, this);\n\n    return this._inputColorValueContentView;\n  },\n\n  _onClick: function () {\n    if (this.options.disabled) {\n      return;\n    }\n\n    this.trigger('click', this.model);\n  },\n\n  _getValue: function () {\n    return this.model.get('range') && this.model.get('range').length\n      ? this._getRangeColorValues()\n      : null;\n  },\n\n  _getRangeColorValues: function () {\n    return _.map(this.model.get('range'), function (color) {\n      return Utils.hexToRGBA(color, this._getOpacity());\n    }, this);\n  },\n\n  _getOpacity: function () {\n    return this.model.get('opacity') != null ? this.model.get('opacity') : 1;\n  },\n\n  _onToggleSelected: function () {\n    this.$el.toggleClass('is-active', this.model.get('selected'));\n  },\n\n  _onChangeValue: function (color) {\n    this.model.set({ quantification: color.get('quantification'), range: color.get('range') });\n  }\n});\n","var _ = require('underscore');\nvar $ = require('jquery');\n\nvar CoreView = require('backbone/core-view');\n\nvar ColorPickerView = require('builder/components/color-picker/color-picker');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\nvar InputColorTemplate = require('builder/components/form-components/editors/fill-color/inputs/input-color-fixed.tpl');\n\nvar Utils = require('builder/helpers/utils');\n\nmodule.exports = CoreView.extend({\n  tagName: 'li',\n  className: 'CDB-OptionInput-item',\n\n  events: {\n    'click': '_onClick'\n  },\n\n  initialize: function (options) {\n    if (this.options.editorAttrs) {\n      this._editorAttrs = this.options.editorAttrs;\n      this._help = this._editorAttrs.help;\n    }\n\n    if (!options.columns) throw new Error('columns is required');\n\n    this._columns = options.columns;\n    this._configModel = options.configModel;\n    this._userModel = options.userModel;\n    this._modals = options.modals;\n    this._query = options.query;\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this.$el.toggleClass('is-disabled', this.options.disabled);\n\n    this.$el.html(\n      InputColorTemplate({\n        value: this._getValue(),\n        opacity: this._getOpacity(),\n        help: this._help && this._help.color || null\n      })\n    );\n\n    this._initViews();\n\n    return this;\n  },\n\n  _initViews: function () {\n    if (this._help && this._help.color) {\n      var tooltip = new TipsyTooltipView({\n        el: this.$('.js-help'),\n        gravity: 'w',\n        title: function () {\n          return $(this).data('tooltip');\n        },\n        offset: 8\n      });\n\n      this.addView(tooltip);\n    }\n  },\n\n  _initBinds: function () {\n    var self = this;\n\n    this.model.set('createContentView', function () {\n      return self._createContentView();\n    }).bind(this);\n\n    this.model.on('change:selected', this._onToggleSelected, this);\n    this.model.on('change:opacity change:fixed', this.render, this);\n  },\n\n  _getColumn: function () {\n    return _.find(this._columns, function (column) {\n      return column.label === this.model.get('attribute');\n    }, this);\n  },\n\n  _createContentView: function () {\n    this._colorPickerView = new ColorPickerView({\n      value: this.model.get('fixed'),\n      opacity: this.model.get('opacity'),\n      disableOpacity: this._disableOpacity || false\n    });\n\n    this._initColorPickerViewBindings();\n\n    return this._colorPickerView;\n  },\n\n  _initColorPickerViewBindings: function () {\n    if (this._colorPickerView) {\n      this._colorPickerView.bind('change', this._onChangeValue, this);\n      this._colorPickerView.on('onClean', function () {\n        this._colorPickerView.unbind('change', this._onChangeValue, this);\n      }, this);\n    }\n  },\n\n  _onClick: function () {\n    if (this.options.disabled) {\n      return;\n    }\n\n    this.trigger('click', this.model);\n  },\n\n  _getValue: function () {\n    var value = this.model.get('fixed');\n\n    return value\n      ? Utils.hexToRGBA(value, this._getOpacity())\n      : value;\n  },\n\n  _getOpacity: function () {\n    return this.model.get('opacity') != null ? this.model.get('opacity') : 1;\n  },\n\n  _onToggleSelected: function () {\n    this.$el.toggleClass('is-active', this.model.get('selected'));\n  },\n\n  _onChangeValue: function (color) {\n    this.model.set({ fixed: color.hex, opacity: color.opacity });\n  }\n});\n","var _ = require('underscore');\nvar $ = require('jquery');\n\nvar CoreView = require('backbone/core-view');\n\nvar InputImageTemplate = require('./input-image.tpl');\nvar ImageLoaderView = require('builder/components/img-loader-view');\nvar InputColorFileView = require('builder/components/input-color/input-color-file-view');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\nvar Utils = require('builder/helpers/utils');\n\nmodule.exports = CoreView.extend({\n  tagName: 'li',\n  className: 'CDB-OptionInput-item',\n\n  events: {\n    'click': '_onClick'\n  },\n\n  initialize: function (options) {\n    if (this.options.editorAttrs) {\n      this._editorAttrs = this.options.editorAttrs;\n      this._help = this._editorAttrs.help;\n    }\n\n    this._imageEnabled = true;\n    this._columns = options.columns;\n    this._configModel = options.configModel;\n    this._userModel = options.userModel;\n    this._modals = options.modals;\n    this._query = options.query;\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    this.$el.html(InputImageTemplate({\n      help: this._help.image || '',\n      image: this.model.get('image'),\n      isCustomMarker: this.model.get('kind') === 'custom-marker'\n    }));\n\n    this._initViews();\n\n    return this;\n  },\n\n  _initViews: function () {\n    this.iconView = new ImageLoaderView({\n      imageClass: 'Editor-fillImageAsset',\n      imageUrl: this._getImageURL(),\n      color: this._getColor()\n    });\n\n    this.addView(this.iconView);\n    this.$('.js-image-container').append(this.iconView.render().el);\n\n    if (this._help.image) {\n      var tooltip = new TipsyTooltipView({\n        el: this.$('.js-help'),\n        gravity: 'w',\n        title: function () {\n          return $(this).data('tooltip');\n        },\n        offset: 8\n      });\n\n      this.addView(tooltip);\n    }\n  },\n\n  _initBinds: function () {\n    var self = this;\n    this.model.set('createContentView', function () {\n      return self._createContentView();\n    }).bind(this);\n\n    this.model.on('change:images change:image', this.render, this);\n    this.model.on('change:opacity change:fixed', this._updateImageColor, this);\n  },\n\n  _categoryImagesPresent: function () {\n    var images = this.model.get('images');\n\n    images.forEach(function (image) {\n      if (!_.isEmpty(image)) return true;\n    });\n\n    return false;\n  },\n\n  _updateImageColor: function () {\n    if (this.iconView) {\n      this.iconView.updateImageColor(this._getColor());\n    }\n  },\n\n  _getColor: function () {\n    var color = this.model.get('fixed');\n\n    return color\n      ? Utils.hexToRGBA(color, this._getOpacity())\n      : color;\n  },\n\n  _getOpacity: function () {\n    return this.model.get('opacity') != null ? this.model.get('opacity') : 1;\n  },\n\n  _onClick: function () {\n    if (this.options.disabled) {\n      return;\n    }\n\n    this.trigger('click', this.model);\n  },\n\n  _onChangeFile: function (marker) {\n    var kind, image;\n\n    if (marker) {\n      kind = marker.kind;\n      image = marker.url;\n    } else {\n      kind = null;\n      image = null;\n    }\n\n    this.model.set({ kind: kind, image: image });\n  },\n\n  _createContentView: function () {\n    this._inputColorFileView = new InputColorFileView({\n      model: this.model,\n      userModel: this._userModel,\n      configModel: this._configModel,\n      modals: this._modals\n    });\n\n    this._initInputColorFileViewBindings();\n\n    return this._inputColorFileView;\n  },\n\n  _initInputColorFileViewBindings: function () {\n    if (this._inputColorFileView) {\n      this._inputColorFileView.bind('change', this._onChangeFile, this);\n      this._inputColorFileView.on('onClean', function () {\n        this._inputColorFileView.unbind('change', this._onChangeFile, this);\n      }, this);\n    }\n  },\n\n  _getImageURL: function () {\n    return this.model.get('image') && this._isIconStylingEnabled() ? this.model.get('image') : '';\n  },\n\n  _getKind: function () {\n    return this.model.get('kind') && this._isIconStylingEnabled() ? this.model.get('kind') : '';\n  },\n\n  _isIconStylingEnabled: function () {\n    return this._imageEnabled;\n  }\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar EditorHelpers = require('builder/components/form-components/helpers/editor');\n\nvar DialogModel = require('builder/components/dialog/dialog-model');\nvar DialogView = require('builder/components/dialog/dialog-view');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\n\nvar InputCollection = require('./input-collection');\nvar InputNumber = require('builder/components/input-number/input-number');\nvar InputColor = require('builder/components/input-color/input-color');\n\nvar template = require('builder/components/input-fill/input-fill.tpl');\n\nvar PopupManager = require('builder/components/popup-manager');\n\nvar INPUT_TYPE_MAP = {\n  'size': InputNumber,\n  'color': InputColor,\n  'image': InputColor\n};\n\nvar QUANTIFICATION_REF = {\n  'Jenks': 'jenks',\n  'Equal Interval': 'equal',\n  'Heads/Tails': 'headtails',\n  'Quantile': 'quantiles'\n};\n\nvar MIN_IMAGE_SIZE = 20;\nvar MIN_MARKER_SIZE = 7;\n\nBackbone.Form.editors.Fill = Backbone.Form.editors.Base.extend({\n  className: 'Form-InputFill CDB-OptionInput CDB-Text js-input',\n\n  events: {\n    focus: function () {\n      this.trigger('focus', this);\n    },\n    blur: function () {\n      this.trigger('blur', this);\n    }\n  },\n\n  initialize: function (opts) {\n    Backbone.Form.editors.Base.prototype.initialize.call(this, opts);\n    EditorHelpers.setOptions(this, opts); // Options\n\n    this.options = _.extend(\n      this.options,\n      {\n        columns: this.options.options,\n        query: this.options.query,\n        configModel: this.options.configModel,\n        userModel: this.options.userModel,\n        editorAttrs: this.options.editorAttrs,\n        modals: this.options.modals\n      }\n    );\n\n    this._keyAttr = opts.key;\n    this.dialogMode = this.options.dialogMode || DialogConstants.Mode.DEFAULT;\n\n    this._initBinds();\n    this._initViews();\n  },\n\n  _initViews: function () {\n    this.$el.append(template());\n\n    if (this.options.editorAttrs && this.options.editorAttrs.disabled) {\n      this.$el.addClass('is-disabled');\n    }\n\n    this._initFillDialog();\n    this._initInputFields();\n\n    this._popupManager = new PopupManager(this.cid, this.$el, this._dialogView.$el);\n  },\n\n  _initInputFields: function () {\n    var inputKlass;\n\n    this._inputCollection = new InputCollection();\n\n    _.each(this.model.get(this._keyAttr), function (value, key) {\n      this._inputCollection.add(_.extend({ type: key }, value));\n    }, this);\n\n    this._inputCollection.each(function (inputModel) {\n      var type = inputModel.get('type');\n\n      var Klass = INPUT_TYPE_MAP[type];\n\n      if (!Klass) {\n        throw new Error(type + ' is not a valid type of constructor');\n      }\n\n      if (inputModel.get('quantification') && QUANTIFICATION_REF[inputModel.get('quantification')]) {\n        inputModel.set('quantification', QUANTIFICATION_REF[inputModel.get('quantification')], { silent: true });\n      }\n\n      inputKlass = new Klass(({\n        model: inputModel,\n        columns: this.options.columns,\n        query: this.options.query,\n        configModel: this.options.configModel,\n        userModel: this.options.userModel,\n        modals: this.options.modals,\n        editorAttrs: this.options.editorAttrs ? this.options.editorAttrs[type] : {},\n        disabled: this.options.editorAttrs && this.options.editorAttrs.disabled\n      }));\n\n      inputKlass.bind('click', this._onInputClick, this);\n\n      this.$('.js-content').append(inputKlass.render().$el);\n    }, this);\n\n    this._inputCollection.bind('inputChanged', this._onInputChanged, this);\n  },\n\n  _initBinds: function () {\n    this.applyESCBind(function () {\n      this._removeDialog();\n    });\n    this.applyClickOutsideBind(function () {\n      this._removeDialog();\n    });\n  },\n\n  _onInputClick: function (inputModel) {\n    if (inputModel.get('selected')) {\n      this._removeDialog();\n      return;\n    }\n\n    inputModel.set('selected', true);\n    this._dialogView.model.set('createContentView', inputModel.get('createContentView'));\n    this._dialogView.render();\n    this._dialogView.show();\n\n    this._popupManager.append(this.dialogMode);\n    this._popupManager.track();\n  },\n\n  _onInputChanged: function (model) {\n    this._adjustImageSize(model);\n    this.trigger('change', this);\n  },\n\n  _adjustImageSize: function (model) {\n    if (model.get('type') !== 'color' && model.get('kind') !== 'marker') {\n      return;\n    }\n\n    var size = this._inputCollection.findWhere({ type: 'size' });\n\n    if (!model.get('image') && model.hasChanged('image') && model.previous('image')) {\n      size.set('fixed', MIN_MARKER_SIZE);\n      return;\n    }\n\n    if (!model.get('images') && model.hasChanged('images')) {\n      size.set('fixed', MIN_MARKER_SIZE);\n      return;\n    }\n\n    var changedImage = model.get('image') && model.hasChanged('image') && !model.previous('image');\n    var hasImages = _.isEmpty(_.compact(model.get('images')));\n    var hadImages = _.isEmpty(_.compact(model.previous('images')));\n    var changedImages = !hasImages && model.hasChanged('images') && hadImages;\n\n    if (changedImage || changedImages) {\n      if (size && size.get('fixed') < MIN_IMAGE_SIZE) {\n        size.set('fixed', MIN_IMAGE_SIZE);\n      }\n    }\n  },\n\n  _initFillDialog: function () {\n    var dialogModel = new DialogModel();\n\n    this.listenToOnce(dialogModel, 'destroy', function () {\n      this._dialogView = null;\n      this.stopListening(dialogModel);\n    });\n\n    this._dialogView = new DialogView({\n      model: dialogModel\n    });\n  },\n\n  _removeDialog: function (dialog) {\n    this._inputCollection.unselect();\n    this._dialogView.clean();\n    this._popupManager.untrack();\n  },\n\n  focus: function () {\n    if (this.hasFocus) return;\n    this.$('.js-fillInput').focus();\n  },\n\n  blur: function () {\n    if (!this.hasFocus) return;\n    this.$('.js-fillInput').blur();\n  },\n\n  getValue: function () {\n    return this._inputCollection.getValues();\n  },\n\n  setValue: function (value) {\n    // TODO: add setter\n  },\n\n  remove: function () {\n    this._removeDialog();\n    this._popupManager.destroy();\n    this._inputCollection.unbind('inputChanged', this._onInputChanged, this);\n    Backbone.Form.editors.Base.prototype.remove.apply(this);\n  }\n});\n","var Backbone = require('backbone');\nvar _ = require('underscore');\n\nvar INPUT_TYPE_ORDER = ['size', 'color'];\n\nmodule.exports = Backbone.Collection.extend({\n  constructor: function (models, options) {\n    options = _.extend(options || {}, { silent: false });\n    Backbone.Collection.prototype.constructor.call(this, models, options);\n  },\n\n  comparator: function (m) {\n    return INPUT_TYPE_ORDER.indexOf(m.get('type'));\n  },\n\n  initialize: function () {\n    this.bind('change:selected', this._onSelectedChange, this);\n    this.bind('change', this._onModelsChanged, this);\n  },\n\n  getSelected: function () {\n    return this.find(function (model) {\n      return model.get('selected');\n    });\n  },\n\n  unselect: function () {\n    this.each(function (model) {\n      model.set('selected', false);\n    }, this);\n  },\n\n  _onSelectedChange: function (itemModel, isSelected) {\n    if (!isSelected) {\n      return;\n    }\n\n    this.each(function (model) {\n      if (model !== itemModel) {\n        model.set('selected', false);\n      }\n    }, this);\n  },\n\n  _onModelsChanged: function (mdl) {\n    var mdlChanges = mdl.changed;\n\n    // If there is any change about selected, don't propagate it\n    if (_.isEmpty(mdlChanges) || (_.size(mdlChanges) === 1 && mdl.changed.hasOwnProperty('selected'))) {\n      return;\n    }\n\n    this.trigger('inputChanged', mdl, this);\n  },\n\n  getValues: function () {\n    return this.reduce(function (memo, mdl) {\n      var data = {};\n      var typeValues = mdl.toJSON();\n\n      if (typeValues.fixed) {\n        data.fixed = typeValues.fixed;\n\n        if (typeValues.type === 'color') {\n          if (typeValues.image) {\n            data.image = typeValues.image;\n          }\n          if (typeValues.kind) {\n            data.kind = typeValues.kind;\n          }\n          data.opacity = typeValues.opacity;\n        }\n      } else {\n        data = _.omit(typeValues, ['createContentView', 'selected', 'type']);\n      }\n\n      memo[typeValues.type] = data;\n\n      return memo;\n    }, {});\n  }\n});\n","var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar CustomListView = require('builder/components/custom-list/custom-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar template = require('./lazy-list.tpl');\nvar SearchView = require('./lazy-search-view');\nvar statusTemplate = require('./lazy-list-view-states.tpl');\n\nvar REQUIRED_OPTS = [\n  'searchCollection',\n  'lazySearch'\n];\n\nmodule.exports = CoreView.extend({\n  className: 'CDB-Box-modal CustomList',\n  module: 'components:lazy-load:lazy-list-view',\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n    this._type = opts.type || _t('components.backbone-forms.lazy-select.type');\n    this.model = new Backbone.Model({\n      query: '',\n      visible: false\n    });\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this.$el.html(template());\n    this._createSearchView();\n    this._renderListSection();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._searchCollection.stateModel, 'change:state', this._renderListSection);\n    this.listenTo(this.model, 'change:query', this._search);\n\n    this.listenTo(this.model, 'change:visible', function (mdl, isVisible) {\n      isVisible ? this.render() : this.clearSubViews();\n      this._toggleVisibility();\n    });\n  },\n\n  _createListView: function () {\n    if (this._listView) {\n      this._listView.clean();\n      this.removeView(this._listView);\n    }\n\n    this._listView = new CustomListView({\n      className: '',\n      typeLabel: this._type,\n      showSearch: false,\n      collection: this._searchCollection,\n      searchPlaceholder: this.options.searchPlaceholder\n    });\n\n    this.addView(this._listView);\n    this._listView.show();\n    this.$('.js-list').html(this._listView.$el);\n  },\n\n  _createStatusView: function (status) {\n    var el = statusTemplate({\n      status: status,\n      type: this._type\n    });\n\n    this.$('.js-list').html(el);\n  },\n\n  _renderListSection: function () {\n    var status = this._searchCollection.stateModel.get('state');\n\n    if (status === 'fetched') {\n      this._createListView();\n    } else {\n      this._createStatusView(status);\n    }\n  },\n\n  _createSearchView: function () {\n    this._searchView = new SearchView({\n      model: this.model\n    });\n    this.addView(this._searchView);\n    this.$('.js-search').append(this._searchView.render().el);\n  },\n\n  _search: function () {\n    var keyword = this.model.get('query');\n\n    // This function is passed from the parent\n    this._lazySearch(keyword);\n  },\n\n  _isSerching: function () {\n    return !!this.model.get('query');\n  },\n\n  show: function () {\n    this.model.set('visible', true);\n  },\n\n  hide: function () {\n    this.model.set('visible', false);\n  },\n\n  toggle: function () {\n    this.model.set('visible', !this.model.get('visible'));\n  },\n\n  isVisible: function () {\n    return this.model.get('visible');\n  },\n\n  _toggleVisibility: function () {\n    this.$el.toggleClass('is-visible', !!this.isVisible());\n  }\n});\n","var Backbone = require('backbone');\nvar _ = require('underscore');\nvar $ = require('jquery');\nvar cdb = require('internal-carto.js');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar CustomListCollection = require('builder/components/custom-list/custom-list-collection');\nvar BaseModel = require('builder/components/custom-list/custom-list-item-model');\n\nvar queryTemplate = _.template(\"SELECT DISTINCT <%= column %> FROM (<%= sql %>) _table_sql WHERE <%= column %> ilike '%<%= search %>%' ORDER BY <%= column %> ASC\");\n\nvar REQUIRED_OPTS = [\n  'configModel',\n  'rowModel',\n  'column'\n];\n\nmodule.exports = CustomListCollection.extend({\n  initialize: function (models, options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n\n    this._query = options.nodeDefModel.querySchemaModel.get('query');\n\n    var configModel = options.configModel;\n    this.SQL = new cdb.SQL({\n      user: configModel.get('user_name'),\n      sql_api_template: configModel.get('sql_api_template'),\n      api_key: configModel.get('api_key')\n    });\n\n    this.stateModel = new Backbone.Model({\n      state: _.isEmpty(models) ? 'empty' : 'fetched'\n    });\n\n    CustomListCollection.prototype.initialize.call(this, models, options);\n  },\n\n  model: function (attrs, opts) {\n    // label and val to custom list compatibility\n    var key = Object.keys(attrs)[0];\n    var o = {};\n    o.val = attrs[key];\n    o.label = attrs[key];\n\n    return new BaseModel(o);\n  },\n\n  _onSelectedChange: function (changedModel, isSelected) {\n    if (this.type === 'multiple') {\n      return;\n    }\n\n    if (isSelected) {\n      this.each(function (m) {\n        if (m.cid !== changedModel.cid) {\n          m.set({ selected: false }, { silent: true });\n        }\n      }, this);\n    }\n  },\n\n  buildQuery: function (search) {\n    var column = this.options.column;\n    return queryTemplate({\n      sql: this._query,\n      search: search,\n      column: this._rowModel.get(column)\n    });\n  },\n\n  fetch: function (search) {\n    this.deferred = $.Deferred();\n    var sqlQuery = this.buildQuery(search);\n    this.stateModel.set('state', 'fetching');\n\n    this.SQL.execute(sqlQuery, null, {\n      extra_params: ['page', 'rows_per_page'],\n      page: 0,\n      rows_per_page: 40,\n      success: function (data) {\n        this._onFetchSuccess(data);\n        this.stateModel.set('state', 'fetched');\n        this.deferred.resolve();\n      }.bind(this),\n      error: function () {\n        this.stateModel.set('state', 'error');\n        this.deferred.reject();\n      }.bind(this)\n    });\n\n    return this.deferred.promise();\n  },\n\n  _onFetchSuccess: function (data) {\n    this.reset(data.rows);\n    if (_.isEmpty(this.models)) {\n      this.stateModel.set('state', 'empty');\n    }\n  },\n\n  isFetching: function () {\n    return this.getState() === 'fetching';\n  },\n\n  getState: function () {\n    return this.stateModel.get('state');\n  },\n\n  getItem: function (value) {\n    return this.findWhere({ val: value });\n  },\n\n  isAsync: function () {\n    return true;\n  }\n});\n","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar utils = require('builder/helpers/utils');\nvar template = require('./lazy-search.tpl');\n\nvar REQUIRED_OPTS = [\n  'model'\n];\n\nmodule.exports = CoreView.extend({\n  className: 'CDB-Box-modalHeader',\n\n  events: {\n    'input .js-input-search': '_search'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n  },\n\n  render: function () {\n    this.$el.html(template());\n\n    // Focus the input when rendered\n    setTimeout(function () {\n      this._getInput().focus();\n    }.bind(this), 100);\n\n    return this;\n  },\n\n  _onClickFilters: function (e) {\n    this.killEvent(e);\n    this.trigger('filters');\n  },\n\n  _search: _.debounce(function (e) {\n    var query = this._getInput().val();\n    query = query.toLowerCase();\n    query = utils.sanitizeHtml(query);\n    this.model.set('query', query);\n  }, 500),\n\n  _getInput: function () {\n    return this.$('.js-input-search');\n  }\n});\n","var Backbone = require('backbone');\nvar EditorHelpers = require('builder/components/form-components/helpers/editor');\nvar template = require('./lazy-select.tpl');\nvar selectedItemTemplate = require('./lazy-select-item.tpl');\nvar ListView = require('./lazy-list-view');\nvar PopupManager = require('builder/components/popup-manager');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar SearchCollection = require('./lazy-search-collection');\n\nvar ENTER_KEY_CODE = 13;\n\nBackbone.Form.editors.LazySelect = Backbone.Form.editors.Base.extend({\n\n  tagName: 'div',\n  className: 'u-ellipsis Editor-formSelect',\n\n  events: {\n    'click .js-button': '_onButtonClick',\n    'keydown .js-button': '_onButtonKeyDown',\n    'focus .js-button': function () {\n      this.trigger('focus', this);\n    },\n    'blur': function () {\n      this.trigger('blur', this);\n    }\n  },\n\n  options: {\n    selectedItemTemplate: selectedItemTemplate\n  },\n\n  initialize: function (options) {\n    Backbone.Form.editors.Base.prototype.initialize.call(this, options);\n    EditorHelpers.setOptions(this, options);\n\n    this.template = options.template || template;\n    this.dialogMode = this.options.dialogMode || DialogConstants.Mode.DEFAULT;\n\n    var fetchOptions = {\n      configModel: this.options.configModel,\n      nodeDefModel: this.options.nodeDefModel,\n      rowModel: this.model,\n      column: this.options.column\n    };\n\n    if (this.options.options != null) {\n      this.searchCollection = new SearchCollection(this.options.options, fetchOptions);\n    } else {\n      this.searchCollection = this.options.collection;\n    }\n\n    this._initBinds();\n\n    var value = this.model.get(this.options.keyAttr);\n    if (value != null) {\n      this.setValue(value);\n    }\n\n    var lazySearch = function (search) {\n      this.searchCollection.fetch(search);\n    }.bind(this);\n    var type = this.model.get(this.options.column);\n\n    this._listView = new ListView({\n      configModel: this.options.configModel,\n      searchCollection: this.searchCollection,\n      lazySearch: lazySearch,\n      type: type,\n      searchPlaceholder: this.options.searchPlaceholder\n    });\n  },\n\n  render: function () {\n    var isEmpty = !this.searchCollection.length;\n    var isDisabled = this.options.disabled;\n    var name = this.model.get(this.options.keyAttr);\n    var placeholder = this._getPlaceholder();\n    var isNull = this._hasValue();\n    var label = isNull ? placeholder : name;\n    var title = name || '';\n\n    this.$el.html(\n      this.template({\n        title: title,\n        label: label,\n        keyAttr: this.options.keyAttr,\n        isEmpty: isEmpty,\n        isDisabled: isDisabled,\n        isNull: isNull\n      })\n    );\n\n    this._popupManager = new PopupManager(this.cid, this.$el, this._listView.$el);\n    this._popupManager.append(this.dialogMode);\n\n    return this;\n  },\n\n  _initBinds: function () {\n    var hide = function () {\n      this._listView.hide();\n      this._popupManager && this._popupManager.untrack();\n    }.bind(this);\n\n    this.applyESCBind(hide);\n    this.applyClickOutsideBind(hide);\n\n    this.listenTo(this.searchCollection, 'change:selected', this._onItemSelected);\n  },\n\n  _destroyBinds: function () {\n    this.stopListening(this.searchCollection);\n    Backbone.Form.editors.Base.prototype._destroyBinds.call(this);\n  },\n\n  _getPlaceholder: function (isDisabled) {\n    var keyAttr = this.options.keyAttr;\n    var placeholder = this.options.placeholder || _t('components.backbone-forms.select.placeholder', { keyAttr: keyAttr });\n    return placeholder;\n  },\n\n  _hasValue: function () {\n    var name = this.model.get(this.options.keyAttr);\n    return name == null || name === '';\n  },\n\n  _onItemSelected: function (model) {\n    this._listView.hide();\n    this._popupManager.untrack();\n    this._renderButton(model).focus();\n\n    this.trigger('change', this);\n  },\n\n  _onButtonClick: function () {\n    this._listView.toggle();\n    this._listView.isVisible() ? this._popupManager.track() : this._popupManager.untrack();\n  },\n\n  _onButtonKeyDown: function (ev) {\n    if (ev.which === ENTER_KEY_CODE) {\n      ev.preventDefault();\n      if (!this._listView.isVisible()) {\n        ev.stopPropagation();\n        this._onButtonClick();\n      } else {\n        this._popupManager.track();\n      }\n    }\n  },\n\n  focus: function () {\n    this.$('.js-button').focus();\n  },\n\n  blur: function () {\n    this.$('.js-button').blur();\n  },\n\n  getValue: function () {\n    var item = this.searchCollection.getSelectedItem();\n    if (item) {\n      return item.getValue();\n    } else {\n      return this.value;\n    }\n  },\n\n  setValue: function (value) {\n    var selectedModel = this.searchCollection.getSelectedItem();\n    if (selectedModel) {\n      this._renderButton(selectedModel);\n    } else {\n      this._renderButton(value);\n    }\n    this.value = value;\n  },\n\n  _renderButton: function (model) {\n    var button = this.$('.js-button');\n    var label = model.getName && model.getName() || model;\n    var $html = this.options.selectedItemTemplate({\n      label: label\n    });\n\n    button\n      .toggleClass('is-empty', label === '')\n      .attr('title', label)\n      .html($html);\n\n    return button;\n  },\n\n  remove: function () {\n    this._popupManager && this._popupManager.destroy();\n    this._listView && this._listView.clean();\n    this._destroyBinds();\n    Backbone.Form.editors.Base.prototype.remove.call(this);\n  }\n});\n","var Backbone = require('backbone');\nvar EditorHelpers = require('builder/components/form-components/helpers/editor');\n\nBackbone.Form.editors.List.CategoryModel = Backbone.Form.editors.NestedModel.extend({\n\n  initialize: function (options) {\n    Backbone.Form.editors.Base.prototype.initialize.call(this, options);\n    EditorHelpers.setOptions(this, options);\n\n    if (!this.form) throw new Error('Missing required option \"form\"');\n    if (!options.schema.model) throw new Error('Missing required \"schema.model\" option for NestedModel editor');\n  },\n\n  render: function () {\n    // Get the constructor for creating the nested form; i.e. the same constructor as used by the parent form\n    var NestedForm = this.form.constructor;\n\n    var data = this.value || {};\n    var NestedModel = this.schema.model;\n\n    // Wrap the data in a model if it isn't already a model instance\n    var modelInstance = (data.constructor === NestedModel) ? data : new NestedModel(data, this.options);\n\n    this.nestedForm = new NestedForm({\n      model: modelInstance,\n      idPrefix: this.cid + '_',\n      fieldTemplate: 'nestedField'\n    });\n\n    this._observeFormEvents();\n\n    // Render form\n    this.$el.html(this.nestedForm.render().el);\n\n    if (this.hasFocus) this.trigger('blur', this);\n\n    return this;\n  }\n\n});\n","var Backbone = require('backbone');\nvar $ = require('jquery');\nvar _ = require('underscore');\nvar EditorHelpers = require('builder/components/form-components/helpers/editor');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\n\nvar ENTER_KEY_CODE = 13;\n\n/**\n * A single item in the list\n *\n * @param {editors.List} options.list The List editor instance this item belongs to\n * @param {Function} options.Editor   Editor constructor function\n * @param {String} options.key        Model key\n * @param {Mixed} options.value       Value\n * @param {Object} options.schema     Field schema\n */\nBackbone.Form.editors.List.Item = Backbone.Form.editors.Base.extend({\n\n  events: {\n    'click [data-action=\"remove\"]': function (event) {\n      event.preventDefault();\n      this.list.removeItem(this);\n    },\n    'keydown input[type=text]': function (event) {\n      if (event.keyCode !== ENTER_KEY_CODE) return;\n      event.preventDefault();\n      this.list.addItem(null, true);\n      this.list.$list.find('input:last').focus();\n    }\n  },\n\n  initialize: function (options) {\n    EditorHelpers.setOptions(this, options);\n    this.list = options.list;\n    this.schema = options.schema || this.list.schema;\n    this.Editor = options.Editor || Backbone.Form.editors.Text;\n    this.template = options.template || this.schema.itemTemplate || this.constructor.template;\n    this.errorClassName = options.errorClassName || this.constructor.errorClassName;\n  },\n\n  render: function () {\n    // Create editor\n    this.editor = new this.Editor({\n      key: this.options.key,\n      schema: this.schema,\n      value: this.options.value,\n      list: this.options.list,\n      item: this,\n      form: this.options.form,\n      trackingClass: this.options.trackingClass\n    }, {\n      userModel: this.options.userModel,\n      configModel: this.options.configModel,\n      modals: this.options.modals\n    }).render();\n\n    // Create main element\n    var $el = $($.trim(this.template()));\n\n    $el.find('[data-editor]').append(this.editor.el);\n\n    var $tooltip = $el.find('.js-remove-help');\n\n    if ($tooltip.length) {\n      this._removeTooltip();\n\n      this._tooltip = new TipsyTooltipView({\n        el: $tooltip,\n        gravity: 'w',\n        title: function () {\n          return _t('editor.legend.tooltips.item.remove');\n        }\n      });\n    }\n\n    // Replace the entire element so there isn't a wrapper tag\n    this.setElement($el);\n\n    return this;\n  },\n\n  getValue: function () {\n    return this.editor.getValue();\n  },\n\n  setValue: function (value) {\n    this.editor.setValue(value);\n  },\n\n  focus: function () {\n    this.editor.focus();\n  },\n\n  blur: function () {\n    this.editor.blur();\n  },\n\n  validate: function () {\n    var value = this.getValue();\n    var formValues = this.list.form ? this.list.form.getValue() : {};\n    var validators = this.schema.validators;\n    var getValidator = this.getValidator;\n\n    if (!validators) return null;\n\n    // Run through validators until an error is found\n    var error = null;\n    _.every(validators, function (validator) {\n      error = getValidator(validator)(value, formValues);\n\n      return !!error;\n    });\n\n    // Show/hide error\n    if (error) {\n      this.setError(error);\n    } else {\n      this.clearError();\n    }\n\n    // Return error to be aggregated by list\n    return error ? error : null; // eslint-disable-line\n  },\n\n  /**\n   * Show a validation error\n   */\n  setError: function (err) {\n    this.$el.addClass(this.errorClassName);\n    this.$el.attr('title', err.message);\n  },\n\n  /**\n   * Hide validation errors\n   */\n  clearError: function () {\n    this.$el.removeClass(this.errorClassName);\n    this.$el.attr('title', null);\n  },\n\n  _removeTooltip: function () {\n    if (this._tooltip) {\n      this._tooltip.clean();\n    }\n  },\n\n  remove: function () {\n    this._removeTooltip();\n    this.editor.remove();\n\n    Backbone.Form.editors.Base.prototype.remove.apply(this);\n  },\n\n  clean: function () {\n    this.$el.remove();\n  }\n}, {\n\n  /* eslint-disable */\n  template: _.template('\\\n      <div>\\\n        <span data-editor></span>\\\n        <button type=\"button\" data-action=\"remove\">&times;</button>\\\n      </div>\\\n    ', null, Backbone.Form.templateSettings),\n  errorClassName: 'error'\n  /* eslint-enable */\n});\n","var $ = require('jquery');\nvar _ = require('underscore');\nvar Backbone = require('backbone');\nvar EditorHelpers = require('builder/components/form-components/helpers/editor');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\n\nvar OPTIONS = [\n  'userModel',\n  'configModel',\n  'modals',\n  'layerDefinitionModel',\n  'trackingClass'\n];\n\nBackbone.Form.editors.List = Backbone.Form.editors.Base.extend({\n\n  events: {\n    'click [data-action=\"add\"]': function (event) {\n      event.preventDefault();\n      if (this._canAddNewItems()) {\n        this.addItem(null, true);\n      }\n    }\n  },\n\n  initialize: function (options) {\n    options = options || {};\n\n    var editors = Backbone.Form.editors;\n\n    editors.Base.prototype.initialize.call(this, options);\n    EditorHelpers.setOptions(this, options);\n\n    var schema = this.schema;\n    if (!schema) throw new Error(\"Missing required option 'schema'\");\n\n    this.template = options.template || schema.listTemplate || this.constructor.template;\n\n    // Determine the editor to use\n    this.Editor = (function () {\n      var type = schema.itemType;\n\n      // Default to Text\n      if (!type) return editors.Text;\n\n      // Use List-specific version if available\n      if (editors.List[type]) return editors.List[type];\n\n      // Or whichever was passed\n      return editors[type];\n    })();\n\n    _.each(OPTIONS, function (item) {\n      if (this.options[item]) {\n        this['_' + item] = this.options[item];\n      }\n    }, this);\n\n    this.items = [];\n    this.errors = [];\n\n    this._initBinds();\n  },\n\n  render: function () {\n    var self = this;\n    var value = this.value || [];\n\n    // Create main element\n    var $el = $($.trim(this.template()));\n\n    // Store a reference to the list (item container)\n    this.$list = $el.is('[data-items]') ? $el : $el.find('[data-items]');\n\n    this.setElement($el);\n    this.$el.attr('id', this.id);\n    this.$el.attr('name', this.key);\n\n    // Add existing items\n    if (value.length) {\n      _.each(value, function (itemValue) {\n        self.addItem(itemValue);\n      });\n    } else {\n      // If no existing items create an empty one, unless the editor specifies otherwise\n      if (!this.Editor.isAsync) this.addItem(null, true);\n    }\n\n    if (this.hasFocus) this.trigger('blur', this);\n\n    this.validate();\n    return this;\n  },\n\n  _initBinds: function () {\n    if (this.options.maxItems) {\n      this.listenTo(this, 'add remove', this._setAddButtonState);\n    }\n  },\n\n  /**\n   * Add a new item to the list\n   * @param {Mixed} [value]           Value for the new item editor\n   * @param {Boolean} [userInitiated] If the item was added by the user clicking 'add' or pressing `Enter`\n   */\n  addItem: function (value, userInitiated) {\n    var self = this;\n    var editors = Backbone.Form.editors;\n\n    var defaultOptions = {\n      list: this,\n      form: this.form,\n      schema: this.schema,\n      value: value,\n      Editor: this.Editor,\n      key: this.key\n    };\n\n    var customOptions = _.reduce(OPTIONS, function (memo, item) {\n      if (this.options[item]) {\n        memo[item] = this['_' + item];\n      }\n      return memo;\n    }, {}, this);\n\n    var options = _.extend({}, defaultOptions, customOptions);\n\n    // Create the item\n    var item = new editors.List.Item(options).render();\n\n    var _addItem = function () {\n      self.items.push(item);\n      self.$list.append(item.el);\n\n      item.editor.on('all', function (event) {\n        if (event === 'change') return;\n\n        // args = [\"key:change\", itemEditor, fieldEditor]\n        var args = _.toArray(arguments);\n        args[0] = 'item:' + event;\n        args.splice(1, 0, self);\n        // args = [\"item:key:change\", this=listEditor, itemEditor, fieldEditor]\n\n        editors.List.prototype.trigger.apply(this, args);\n      }, self);\n\n      item.editor.on('change', function () {\n        if (!item.addEventTriggered) {\n          item.addEventTriggered = true;\n          this.trigger('add', this, item.editor);\n        }\n        this.trigger('item:change', this, item.editor);\n        this.trigger('change', this);\n      }, self);\n\n      item.editor.on('focus', function () {\n        if (this.hasFocus) return;\n        this.trigger('focus', this);\n      }, self);\n      item.editor.on('blur', function () {\n        if (!this.hasFocus) return;\n        var self = this;\n        setTimeout(function () {\n          if (_.find(self.items, function (item) {\n            return item.editor.hasFocus;\n          })) return;\n          self.trigger('blur', self);\n        }, 0);\n      }, self);\n\n      if (userInitiated || value) {\n        item.addEventTriggered = true;\n      }\n\n      if (userInitiated) {\n        self.trigger('add', self, item.editor);\n        self.trigger('change', self);\n      }\n    };\n\n    // Check if we need to wait for the item to complete before adding to the list\n    if (this.Editor.isAsync) {\n      item.editor.on('readyToAdd', _addItem, this);\n    } else {\n      // Most editors can be added automatically\n      _addItem();\n      item.editor.focus();\n    }\n\n    return item;\n  },\n\n  /**\n   * Remove an item from the list\n   * @param {List.Item} item\n   */\n  removeItem: function (item) {\n    // Confirm delete\n    var confirmMsg = this.schema.confirmDelete;\n    if (confirmMsg && !confirm(confirmMsg)) return; // eslint-disable-line\n\n    var index = _.indexOf(this.items, item);\n\n    this.items[index].remove();\n    this.items.splice(index, 1);\n\n    if (item.addEventTriggered) {\n      this.trigger('remove', this, item.editor);\n      this.trigger('change', this);\n    }\n\n    if (!this.items.length && !this.Editor.isAsync) this.addItem();\n  },\n\n  getValue: function () {\n    var values = _.map(this.items, function (item) {\n      return item.getValue();\n    });\n\n    // Filter empty items\n    return _.without(values, undefined, '');\n  },\n\n  setValue: function (value) {\n    this.value = value;\n    this.render();\n  },\n\n  focus: function () {\n    if (this.hasFocus) return;\n\n    if (this.items[0]) this.items[0].editor.focus();\n  },\n\n  blur: function () {\n    if (!this.hasFocus) return;\n\n    var focusedItem = _.find(this.items, function (item) {\n      return item.editor.hasFocus;\n    });\n\n    if (focusedItem) focusedItem.editor.blur();\n  },\n\n  /**\n   * Override default remove function in order to remove item views\n   */\n  remove: function () {\n    _.invoke(this.items, 'remove');\n\n    Backbone.Form.editors.Base.prototype.remove.call(this);\n  },\n\n  /**\n   * Run validation\n   *\n   * @return {Object|Null}\n   */\n  validate: function () {\n    if (!this.validators) return null;\n\n    // Collect errors\n    var errors = _.map(this.items, function (item) {\n      return item.validate();\n    });\n\n    // Max items Check\n    if (this.options.maxItems && this.options.maxItems < this.items.length) {\n      errors.push(_t('form-components.editors.list.max-items'));\n    }\n\n    this.errors = _.compact(errors);\n    // Check if any item has errors\n    var hasErrors = !!this.errors.length;\n    this._setAddButtonState();\n\n    if (!hasErrors) return null;\n  },\n\n  _errorPresenter: function (errors) {\n    return _.unique(this.errors.map(function (error) {\n      return error.message;\n    })).join('\\n');\n  },\n\n  _setAddButtonState: function () {\n    var $button = this._getAddButtonElement();\n    var hasErrors = !!this.errors.length;\n\n    $button.toggleClass('is-disabled', hasErrors);\n\n    if (hasErrors) {\n      this._errorTooltip = new TipsyTooltipView({\n        el: $button,\n        gravity: 's',\n        offset: 0,\n        title: this._errorPresenter.bind(this)\n      });\n    } else {\n      if (this._errorTooltip) {\n        this._errorTooltip.clean();\n        this._errorTooltip = null;\n      }\n    }\n\n    if (this.options.maxItems) {\n      $button.toggle(this.items.length < this.options.maxItems);\n    }\n  },\n\n  _getAddButtonElement: function () {\n    return this.$('[data-action=\"add\"]');\n  },\n\n  _canAddNewItems: function () {\n    var opts = this.options;\n    var maxItemsReached = (opts.maxItems && opts.maxItems <= this.items.length) || false;\n    return !this.errors.length && !maxItemsReached;\n  }\n}, {\n\n  /* eslint-disable */\n  template: _.template('\\\n      <div>\\\n        <div data-items></div>\\\n        <button type=\"button\" data-action=\"add\">Add</button>\\\n      </div>\\\n    ', null, Backbone.Form.templateSettings)\n  /* eslint-enable */\n});\n","var CustomListItemView = require('builder/components/custom-list/custom-list-item-view');\nvar _ = require('underscore');\n\nmodule.exports = CustomListItemView.extend({\n\n  render: function () {\n    this.$el.empty();\n    this.clearSubViews();\n\n    this.$el.append(\n      this.options.template(\n        _.extend(\n          {\n            typeLabel: this.options.typeLabel,\n            isSelected: this.model.get('selected'),\n            isSourceType: this.model.get('isSourceType'),\n            name: this.model.getName(),\n            val: this.model.getValue()\n          },\n          this.model.attributes\n        )\n      )\n    );\n\n    this.$el\n      .attr('data-val', this.model.getValue())\n      .toggleClass('is-disabled', !!this.model.get('disabled'));\n\n    return this;\n  }\n\n});\n","var Backbone = require('backbone');\nvar NodeDatasetItemView = require('./node-dataset-item-view');\nvar nodeDatasetSelectedTemplate = require('./node-dataset-selected.tpl');\nvar nodeDatasetItemTemplate = require('./node-dataset-item.tpl');\n\nBackbone.Form.editors.NodeDataset = Backbone.Form.editors.Select.extend({\n\n  options: {\n    selectedItemTemplate: nodeDatasetSelectedTemplate,\n    itemListTemplate: nodeDatasetItemTemplate,\n    customListItemView: NodeDatasetItemView\n  }\n\n});\n","var Backbone = require('backbone');\nvar _ = require('underscore');\nvar $ = require('jquery');\nvar template = require('./number.tpl');\nvar EditorHelpers = require('builder/components/form-components/helpers/editor');\nrequire('jquery');\nrequire('jquery-ui');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\n\nvar UP_ARROW_KEY_CODE = 38;\nvar BOTTOM_ARROW_KEY_CODE = 40;\nvar SPACE_KEY_CODE = 32;\nvar ENTER_KEY_CODE = 13;\n\nvar SMALL_INCREMENT = 1;\nvar BIG_INCREMENT = 10;\n\nBackbone.Form.editors.Number = Backbone.Form.editors.Base.extend({\n\n  tagName: 'ul',\n  className: 'CDB-OptionInput-container CDB-OptionInput-container--noMargin u-grow',\n\n  // backbone-forms 0.14.1 has a 'number' validator:\n  // https://github.com/powmedia/backbone-forms/blob/v0.14.1/src/validators.js#L64\n  // We're on 0.14.0 so we have to use a 'regexp' validator\n  options: {\n    min: 0,\n    max: 10,\n    step: 1,\n    showSlider: true,\n    validators: [{\n      type: 'regexp',\n      regexp: /^[+-]?((\\.\\d+)|(\\d+(\\.\\d+)?))$/,\n      message: _t('editor.edit-feature.valid')\n    }]\n  },\n\n  events: {\n    'keydown .js-input': '_onInputKeyDown',\n    'keyup .js-input': '_onInputKeyUp',\n    focus: function () {\n      this.trigger('focus', this);\n    },\n    blur: function () {\n      this.trigger('blur', this);\n    }\n  },\n\n  initialize: function (opts) {\n    Backbone.Form.editors.Base.prototype.initialize.call(this, opts);\n    EditorHelpers.setOptions(this, opts);\n\n    // Setting min, max and step from validators, if exists.\n    this._validators = opts.validators || (opts.schema && opts.schema.validators);\n    if (this._validators && this._validators[1]) {\n      this.options.min = this._validators[1].min;\n      this.options.max = this._validators[1].max;\n      this.options.step = this._validators[1].step;\n    }\n\n    if (this.options.editorAttrs && this.options.editorAttrs.help) {\n      this._help = this.options.editorAttrs.help;\n    }\n\n    this._debouncedTriggerChange = _.debounce(this._triggerChange, 333).bind(this);\n\n    this._initViews();\n  },\n\n  _initViews: function () {\n    var placeholder = (this.value === null) ? 'null' : '';\n\n    this.$el.html(\n      template({\n        value: this.value,\n        isDisabled: this.options.disabled,\n        hasSlider: this.options.showSlider,\n        isFormatted: this.options.isFormatted,\n        placeholder: placeholder,\n        help: this._help || ''\n      })\n    );\n\n    if (this.options.showSlider) {\n      this.$('.js-slider').slider({\n        range: 'min',\n        value: this.value,\n        min: this.options.min,\n        max: this.options.max,\n        step: this.options.step,\n        orientation: 'horizontal',\n        disabled: this.options.disabled,\n        slide: this._onSlideChange.bind(this),\n        stop: this._onSlideStop.bind(this)\n      });\n    }\n\n    if (this._help) {\n      this._removeTooltip();\n\n      this._helpTooltip = new TipsyTooltipView({\n        el: this.$('.js-help'),\n        gravity: 'w',\n        title: function () {\n          return $(this).data('tooltip');\n        }\n      });\n    }\n\n    this.$el.toggleClass('CDB-OptionInput-container--noSlider', !!this.options.showSlider);\n  },\n\n  _onSlideChange: function (ev, ui) {\n    this.value = ui.value;\n    this.$('.js-input').val(this.value);\n  },\n\n  _onSlideStop: function (ev, ui) {\n    this._debouncedTriggerChange();\n  },\n\n  _onInputKeyDown: function (event) {\n    var $input = this.$('.js-input');\n    var value = +this.getValue();\n    var increment = event.shiftKey === true ? BIG_INCREMENT : SMALL_INCREMENT;\n\n    switch (event.which) {\n      case SPACE_KEY_CODE:\n      case ENTER_KEY_CODE:\n        return false;\n      case UP_ARROW_KEY_CODE:\n        value = this._nextValue(value, increment);\n        $input.val(value);\n        break;\n      case BOTTOM_ARROW_KEY_CODE:\n        value = this._nextValue(value, increment * -1);\n        $input.val(value);\n        break;\n      default:\n        // Any other case!\n    }\n  },\n\n  _nextValue: function (value, increment) {\n    var nextValue = value += increment;\n\n    if (nextValue < this.options.min) return this.options.min;\n    if (nextValue > this.options.max) return this.options.max;\n\n    return nextValue;\n  },\n\n  _hasSlider: function () {\n    return this.options.showSlider && this.$('.js-slider').data('ui-slider');\n  },\n\n  _onInputKeyUp: function () {\n    var value = this.$('.js-input').val();\n    if (this._hasSlider()) {\n      this.$('.js-slider').slider('value', value);\n    }\n\n    this.value = value;\n    this._debouncedTriggerChange();\n  },\n\n  _triggerChange: function () {\n    this.trigger('change', this);\n  },\n\n  focus: function () {\n    if (this.hasFocus) return;\n    this.$('.js-input').focus();\n  },\n\n  blur: function () {\n    if (!this.hasFocus) return;\n    this.$('.js-input').blur();\n  },\n\n  getValue: function () {\n    var val = this.$('.js-input').val();\n\n    return (val === '') ? null : +val;\n  },\n\n  setValue: function (value) {\n    if (this._hasSlider()) {\n      this.$('.js-slider').slider('value', value);\n    }\n\n    this.$('.js-input').val(value);\n    this.value = value;\n  },\n\n  _destroySlider: function () {\n    if (this._hasSlider()) {\n      this.$('.js-slider').slider('destroy');\n    }\n  },\n\n  _removeTooltip: function () {\n    if (this._helpTooltip) {\n      this._helpTooltip.clean();\n    }\n  },\n\n  remove: function () {\n    this._destroySlider();\n    this._removeTooltip();\n\n    Backbone.Form.editors.Base.prototype.remove.apply(this);\n  },\n\n  clean: function () {\n    this.$el.remove();\n  }\n});\n","var CustomListCollection = require('builder/components/custom-list/custom-list-collection');\nvar _ = require('underscore');\n\n/*\n *  Custom list collection, it parses pairs like:\n *\n *  [{ val, label }]\n *  [\"string\"]\n */\n\nmodule.exports = CustomListCollection.extend({\n\n  search: function (query) {\n    query = query.toLowerCase();\n\n    return _(this.filter(function (model) {\n      var val = model.getName().toLowerCase();\n      var type = model.get('type').toLowerCase();\n      return ~val.indexOf(query) && type === 'number';\n    }));\n  }\n\n});\n","var Backbone = require('backbone');\n\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    visible: false,\n    operator: 'count',\n    attribute: ''\n  },\n\n  isValidOperator: function () {\n    var operator = this.get('operator');\n    var attribute = this.get('attribute');\n\n    if (operator === 'count') {\n      return true;\n    } else {\n      if (operator && attribute) {\n        return true;\n      }\n      return false;\n    }\n  }\n\n});\n","var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar $ = require('jquery');\nvar CustomListView = require('builder/components/custom-list/custom-view');\nvar DropdownOverlayView = require('builder/components/dropdown-overlay/dropdown-overlay-view');\nvar OperatorsListModel = require('./operators-list-model');\nvar emptyTemplate = require('./operators-list-count.tpl');\nvar template = require('./operators-list.tpl');\n\nmodule.exports = CoreView.extend({\n\n  className: 'Editor-dropdown Editor-boxModal Editor-dropdownOperators',\n  tagName: 'div',\n\n  events: {\n    'change input[name=\"operator\"]': '_onOperationChange'\n  },\n\n  initialize: function (opts) {\n    this.model = new OperatorsListModel({\n      operator: opts.operator,\n      attribute: opts.attribute,\n      visible: false\n    });\n\n    if (opts.attribute) {\n      this.collection.setSelected(opts.attribute);\n    }\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this.$el.append(\n      template({\n        operator: this.model.get('operator')\n      })\n    );\n    this._renderList();\n\n    this._dropdownOverlay = new DropdownOverlayView({\n      onClickAction: this.hide.bind(this),\n      visible: this.model.get('visible')\n    });\n    this.addView(this._dropdownOverlay);\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.bind('change:operator change:attribute', _.debounce(this._onModelChange.bind(this), 10));\n    this.model.bind('change:visible', function (mdl, isVisible) {\n      this._toggleVisibility();\n\n      if (!isVisible) {\n        this._destroyList();\n        this.$('.js-list').html(emptyTemplate());\n      } else {\n        this.render();\n      }\n    }, this);\n    this.collection.bind('change:selected', this._onAttributeSelected, this);\n    this.add_related_model(this.collection);\n  },\n\n  _hasList: function () {\n    return !!this._listView;\n  },\n\n  _renderList: function () {\n    if (this.model.get('operator') !== 'count') {\n      if (this._hasList()) {\n        return;\n      }\n\n      this._listView = new CustomListView({\n        className: 'CDB-Dropdown-options CDB-Text CDB-Size-medium',\n        collection: this.collection,\n        showSearch: true,\n        typeLabel: this.options.keyAttr\n      });\n      this.$('.js-list').html(this._listView.render().el);\n    } else {\n      this._destroyList();\n      this.$('.js-list').html(emptyTemplate());\n    }\n  },\n\n  _destroyList: function () {\n    if (this._hasList()) {\n      this.removeView(this._listView);\n      this._listView.clean();\n      delete this._listView;\n    }\n  },\n\n  _onModelChange: function () {\n    if (this.model.isValidOperator()) {\n      this.trigger('change', this.model.toJSON(), this);\n    }\n  },\n\n  _onOperationChange: function (ev) {\n    var $input = $(ev.target);\n    var operator = $input.val();\n\n    if (operator === 'count') {\n      this.model.set('attribute', '');\n      this.collection.removeSelected();\n    }\n\n    this.model.set('operator', operator);\n\n    this._renderList();\n  },\n\n  _onAttributeSelected: function (mdl) {\n    if (mdl.get('selected')) {\n      this.model.set('attribute', mdl.getValue());\n    }\n  },\n\n  _toggleVisibility: function () {\n    this.$el.toggleClass('is-visible', !!this.model.get('visible'));\n  },\n\n  show: function () {\n    this.model.set('visible', true);\n  },\n\n  hide: function () {\n    this.model.set('visible', false);\n  },\n\n  toggle: function () {\n    this.model.set('visible', !this.model.get('visible'));\n  },\n\n  isVisible: function () {\n    return this.model.get('visible');\n  },\n\n  remove: function () {\n    this._destroyList();\n    this.$el.empty();\n    CoreView.prototype.remove.call(this);\n  }\n});\n","var Backbone = require('backbone');\nvar EditorHelpers = require('builder/components/form-components/helpers/editor');\nvar _ = require('underscore');\nvar $ = require('jquery');\nvar OperatorListView = require('./operators-list-view');\nvar OperatorListCollection = require('./operators-list-collection');\nvar template = require('./operators.tpl');\nvar PopupManager = require('builder/components/popup-manager');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\n\nvar ENTER_KEY_CODE = 13;\n\nBackbone.Form.editors.Operators = Backbone.Form.editors.Base.extend({\n\n  tagName: 'div',\n  className: 'Editor-formSelect u-ellipsis',\n\n  events: {\n    'click .js-button': '_onButtonClick',\n    'keydown .js-button': '_onButtonKeyDown',\n    'focus .js-button': function () {\n      this.trigger('focus', this);\n    },\n    'blur': function () {\n      this.trigger('blur', this);\n    }\n  },\n\n  initialize: function (opts) {\n    Backbone.Form.editors.Base.prototype.initialize.call(this, opts);\n    EditorHelpers.setOptions(this, opts);\n\n    this.collection = new OperatorListCollection(this.options.options);\n    this.dialogMode = this.options.dialogMode || DialogConstants.Mode.DEFAULT;\n\n    if (this.options.editorAttrs && this.options.editorAttrs.help) {\n      this._help = this.options.editorAttrs.help;\n    }\n\n    this._initViews();\n    this.setValue(this.model.get(this.options.keyAttr));\n    this._initBinds();\n  },\n\n  _initViews: function () {\n    var value = this.model.get(this.options.keyAttr);\n\n    this.$el.append(\n      $('<div>').addClass('js-operator')\n    );\n\n    this._setOperatorTemplate();\n\n    this._operatorsListView = new OperatorListView({\n      operator: value.operator,\n      attribute: value.attribute,\n      collection: this.collection\n    });\n    this._operatorsListView.bind('change', this._onOperatorsChange, this);\n\n    this._popupManager = new PopupManager(this.cid, this.$el, this._operatorsListView.$el);\n    this._popupManager.append(this.dialogMode);\n\n    if (this.options.disabled) {\n      this.undelegateEvents();\n    }\n  },\n\n  _setOperatorTemplate: function () {\n    this.$('.js-operator').html(\n      template({\n        name: this._getOperatorsTextValue(),\n        disabled: this.options.disabled,\n        keyAttr: this.options.keyAttr,\n        help: this._help || ''\n      })\n    );\n\n    if (this._help) {\n      this._removeTooltip();\n\n      this._helpTooltip = new TipsyTooltipView({\n        el: this.$('.js-help'),\n        gravity: 'w',\n        title: function () {\n          return $(this).data('tooltip');\n        }\n      });\n    }\n  },\n\n  _initBinds: function () {\n    var hide = function () {\n      this._operatorsListView.hide();\n      this._popupManager.untrack();\n    }.bind(this);\n\n    this.applyESCBind(hide);\n    this.applyClickOutsideBind(hide);\n  },\n\n  _onOperatorsChange: function (data) {\n    this.model.set(this.options.keyAttr, data);\n    this._setOperatorTemplate();\n    this.$('.js-button').focus();\n    this.trigger('change', this);\n  },\n\n  _getOperatorsTextValue: function () {\n    var value = this.model.get(this.options.keyAttr);\n    if (value && value.operator) {\n      return value.operator.toUpperCase() + (value.attribute ? '(' + value.attribute + ')' : '');\n    } else {\n      return '';\n    }\n  },\n\n  _onButtonClick: function (ev) {\n    this._operatorsListView.toggle();\n    this._operatorsListView.isVisible() ? this._popupManager.track() : this._popupManager.untrack();\n  },\n\n  _onButtonKeyDown: function (ev) {\n    if (ev.which === ENTER_KEY_CODE) {\n      ev.preventDefault();\n      if (!this._operatorsListView.isVisible()) {\n        ev.stopPropagation();\n        this._operatorsListView.toggle();\n        this._popupManager.track();\n      } else {\n        this._popupManager.untrack();\n      }\n    }\n  },\n\n  getValue: function () {\n    var data = this.model.get(this.options.keyAttr);\n    return _.omit(data, 'visible');\n  },\n\n  setValue: function (value) {\n    var textValue = this._getOperatorsTextValue();\n    this.value = textValue;\n    this._setOperatorTemplate();\n  },\n\n  _removeTooltip: function () {\n    if (this._helpTooltip) {\n      this._helpTooltip.clean();\n    }\n  },\n\n  remove: function () {\n    this._removeTooltip();\n\n    this._popupManager && this._popupManager.destroy();\n    this._operatorsListView && this._operatorsListView.clean();\n    Backbone.Form.editors.Base.prototype.remove.call(this);\n  },\n\n  clean: function () {\n    this.$el.remove();\n  }\n});\n","var Backbone = require('backbone');\nvar EditorHelpers = require('builder/components/form-components/helpers/editor');\nvar template = require('./radio.tpl');\nvar _ = require('underscore');\nvar $ = require('jquery');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\n\nBackbone.Form.editors.Radio = Backbone.Form.editors.Radio.extend({\n\n  className: 'CDB-Text CDB-Size-medium u-flex u-alignCenter',\n\n  initialize: function (opts) {\n    Backbone.Form.editors.Base.prototype.initialize.apply(this, arguments);\n    EditorHelpers.setOptions(this, opts);\n  },\n\n  render: function () {\n    this.setOptions(this.schema.options); // It comes from the default Select editor (not ours)\n    this._setHelp();\n    return this;\n  },\n\n  _setHelp: function () {\n    var containsHelp = _.find(this.schema.options, function (option) {\n      return option.help;\n    });\n\n    if (containsHelp) {\n      this._helpTooltip = this._createTooltip({\n        $el: this.$('.js-help')\n      });\n    }\n  },\n\n  _createTooltip: function (opts) {\n    return new TipsyTooltipView({\n      el: opts.$el || this.$el,\n      gravity: opts.gravity || 's',\n      className: opts.className || '',\n      offset: opts.offset || 0,\n      title: function () {\n        return opts.msg || $(this).data('tooltip');\n      }\n    });\n  },\n\n  getValue: function () {\n    var value = this.$('input[type=radio]:checked').val();\n\n    return (value === '') ? null : value;\n  },\n\n  _arrayToHtml: function (array) {\n    var selectedVal = this.form.model.get(this.key);\n\n    var items = _.map(array, function (option, index) {\n      var val = option.val;\n\n      var item = {\n        name: this.getName(),\n        value: (val === null) ? '' : val.toString(),\n        help: option.help,\n        id: this.id,\n        label: option.label,\n        className: option.className\n      };\n\n      // Can't be selected and disabled simultaneously\n      if (selectedVal === val) {\n        item.selected = true;\n      } else {\n        item.disabled = option.disabled;\n      }\n\n      return item;\n    }, this);\n\n    return template({\n      items: items\n    });\n  },\n\n  _destroyBinds: function () {},\n\n  remove: function () {\n    if (this._helpTooltip) {\n      this._helpTooltip.clean();\n    }\n    Backbone.Form.editors.Base.prototype.remove.call(this);\n  }\n});\n","var Backbone = require('backbone');\nvar EditorHelpers = require('builder/components/form-components/helpers/editor');\nvar _ = require('underscore');\nvar CustomListView = require('builder/components/custom-list/custom-view');\nvar CustomListCollection = require('builder/components/custom-list/custom-list-multi-collection');\nvar selectedItemTemplate = require('./select-item.tpl');\nvar CustomListItemView = require('builder/components/custom-list/custom-list-multi-item-view');\nvar itemListTemplate = require('builder/components/custom-list/custom-list-item-with-checkbox.tpl');\nvar template = require('./select.tpl');\nvar PopupManager = require('builder/components/popup-manager');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\n\nvar ENTER_KEY_CODE = 13;\n\nBackbone.Form.editors.MultiSelect = Backbone.Form.editors.Base.extend({\n\n  tagName: 'div',\n  className: 'u-ellipsis Editor-formSelect',\n\n  events: {\n    'click .js-button': '_onButtonClick',\n    'keydown .js-button': '_onButtonKeyDown',\n    'focus .js-button': function () {\n      this.trigger('focus', this);\n    },\n    'blur': function () {\n      this.trigger('blur', this);\n    }\n  },\n\n  options: {\n    selectedItemTemplate: selectedItemTemplate,\n    itemListTemplate: itemListTemplate,\n    customListItemView: CustomListItemView\n  },\n\n  initialize: function (opts) {\n    EditorHelpers.setOptions(this, opts);\n\n    this.collection = new CustomListCollection(opts.schema.options);\n    this.dialogMode = this.options.dialogMode || DialogConstants.Mode.DEFAULT;\n\n    this._initViews();\n    this.setValue(this.model.get(opts.key));\n    Backbone.Form.editors.Base.prototype.initialize.call(this, opts);\n\n    this._initBinds();\n  },\n\n  _getLabel: function () {\n    var itemCount = _.compact(this.collection.pluck('selected')).length;\n    return _t('components.backbone-forms.select.selected', { count: itemCount });\n  },\n\n  _initViews: function () {\n    var isLoading = this.options.loading;\n    var isEmpty = !this.collection.length;\n    var isDisabled = !isEmpty ? this.options.disabled : true;\n    var name = this._getLabel();\n    var isNull = name === null;\n    var label = isNull ? 'null' : name;\n\n    this.$el.html(\n      template({\n        label: label,\n        keyAttr: this.options.keyAttr,\n        isDisabled: isDisabled,\n        isLoading: isLoading,\n        isEmpty: isEmpty,\n        isNull: isNull,\n        placeholder: null,\n        help: this.options.help\n      })\n    );\n\n    if (isDisabled) {\n      this.undelegateEvents();\n    }\n\n    this._listView = new CustomListView({\n      collection: this.collection,\n      showSearch: this.options.showSearch,\n      typeLabel: this.options.keyAttr,\n      itemTemplate: this.options.itemListTemplate,\n      itemView: this.options.customListItemView,\n      actions: [{\n        label: _t('components.backbone-forms.select.none'),\n        action: this._deselectAll.bind(this)\n      },\n      {\n        label: _t('components.backbone-forms.select.all'),\n        action: this._selectAll.bind(this)\n      }],\n      searchPlaceholder: 'Search'\n    });\n\n    this._listView.bind('hidden', this._onHide, this);\n\n    this._popupManager = new PopupManager(this.cid, this.$el, this._listView.$el);\n    this._popupManager.append(this.dialogMode);\n  },\n\n  _initBinds: function () {\n    var hide = function () {\n      this._listView.hide();\n      this._popupManager.untrack();\n    }.bind(this);\n\n    this.collection.bind('change:selected', _.debounce(this._onItemSelected, 50), this);\n    this.applyESCBind(hide);\n    this.applyClickOutsideBind(hide);\n  },\n\n  _selectAll: function () {\n    this.collection.each(function (model) {\n      model.set('selected', true);\n    });\n  },\n\n  _deselectAll: function () {\n    this.collection.each(function (model) {\n      model.set('selected', false);\n    });\n  },\n\n  _onItemSelected: function (mdl) {\n    this._renderButton(mdl).focus();\n    this.trigger('change', this);\n  },\n\n  _onButtonClick: function (ev) {\n    this._listView.toggle();\n    this._listView.isVisible() ? this._popupManager.track() : this._popupManager.untrack();\n  },\n\n  _onButtonKeyDown: function (ev) {\n    if (ev.which === ENTER_KEY_CODE) {\n      ev.preventDefault();\n      if (!this._listView.isVisible()) {\n        ev.stopPropagation();\n        this._listView.toggle();\n        this._popupManager.track();\n      } else {\n        this._popupManager.untrack();\n      }\n    }\n  },\n\n  _getSelectedValues: function () {\n    return this.collection.chain().map(function (m) { return m.get('selected') ? m.get('val') : null; }).compact().value();\n  },\n\n  getValue: function () {\n    var values = this._getSelectedValues();\n    if (values.length > 0) {\n      return values;\n    }\n  },\n\n  setValue: function (value) {\n    if (value) {\n      var selectedModel = this.collection.setSelected(value);\n\n      if (selectedModel) {\n        this._renderButton(selectedModel);\n      }\n    }\n  },\n\n  _renderButton: function (mdl) {\n    var button = this.$('.js-button');\n    var data = _.extend({}, mdl.attributes, { label: this._getLabel() });\n    var $html = this.options.selectedItemTemplate(data);\n\n    button\n      .removeClass('is-empty')\n      .html($html);\n\n    return button;\n  },\n\n  _onHide: function () {\n    if (this._getSelectedValues().length > 0) {\n      this.trigger('change', this);\n    }\n  },\n\n  remove: function () {\n    this._popupManager && this._popupManager.destroy();\n    this._listView && this._listView.clean();\n    Backbone.Form.editors.Base.prototype.remove.call(this);\n  }\n});\n","var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar CustomView = require('builder/components/custom-list/custom-view');\nvar DropdownOverlayView = require('builder/components/dropdown-overlay/dropdown-overlay-view');\nvar statusTemplate = require('./select-list-view-states.tpl');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'collection',\n  'itemTemplate',\n  'itemView'\n];\n\nmodule.exports = CoreView.extend({\n  module: 'components:form-components:editors:select:select-list-view',\n\n  className: 'CustomList',\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._selectModel = this.options.selectModel;\n    this.model = new Backbone.Model({\n      visible: false\n    });\n\n    if (this.options.mouseOverAction) {\n      this._mouseOverAction = this.options.mouseOverAction;\n    }\n\n    if (this.options.mouseOutAction) {\n      this._mouseOutAction = this.options.mouseOutAction;\n    }\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._renderListSection();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.model, 'change:visible', function (mdl, isVisible) {\n      isVisible ? this.render() : this.clearSubViews();\n      this._toggleVisibility();\n      this.trigger('change:visible');\n    });\n\n    if (this.collection.isAsync()) {\n      this.listenTo(this.collection.stateModel, 'change:state', this._renderListSection);\n    }\n  },\n\n  _createListView: function () {\n    if (this._listView) {\n      this._listView.clean();\n      this.removeView(this._listView);\n    }\n    this._listView = new CustomView({\n      className: 'CDB-Box-modal CustomList--inner',\n      collection: this.collection,\n      showSearch: this.options.showSearch,\n      allowFreeTextInput: this.options.allowFreeTextInput,\n      typeLabel: this.options.typeLabel,\n      itemTemplate: this._itemTemplate,\n      itemView: this._itemView,\n      position: this.options.position,\n      searchPlaceholder: this.options.searchPlaceholder,\n      selectModel: this._selectModel,\n      mouseOverAction: this._mouseOverAction,\n      mouseOutAction: this._mouseOutAction\n    });\n\n    this.addView(this._listView);\n    this._listView.show();\n    this.el.appendChild(this._listView.render().el);\n  },\n\n  _createStatusView: function (status) {\n    var el = statusTemplate({\n      status: status,\n      type: this.options.typeLabel\n    });\n\n    this.$el.html(el);\n  },\n\n  _renderListSection: function () {\n    var status = this._getStatus();\n\n    if (status === 'fetched') {\n      this._createListView();\n    } else {\n      this._createStatusView(status);\n    }\n  },\n\n  show: function () {\n    this.model.set('visible', true);\n  },\n\n  hide: function () {\n    this.model.set('visible', false);\n  },\n\n  toggle: function () {\n    this.model.set('visible', !this.model.get('visible'));\n  },\n\n  _renderOverlay: function () {\n    var closestModalDialog = this.$el.closest('.Dialog');\n\n    this._dropdownOverlay = new DropdownOverlayView({\n      container: closestModalDialog.length ? closestModalDialog : undefined,\n      onClickAction: this.hide.bind(this),\n      visible: true\n    });\n\n    this.addView(this._dropdownOverlay);\n  },\n\n  _destroyOverlay: function () {\n    this._dropdownOverlay && this._dropdownOverlay.clean() && this.removeView(this._dropdownOverlay);\n  },\n\n  isVisible: function () {\n    return this.model.get('visible');\n  },\n\n  _toggleVisibility: function () {\n    this.$el.toggleClass('is-visible', !!this.isVisible());\n\n    if (this.isVisible()) {\n      this._renderOverlay();\n    } else {\n      this._destroyOverlay();\n    }\n  },\n\n  _getStatus: function () {\n    if (this.collection.isAsync()) {\n      return this.collection.stateModel.get('state');\n    } else {\n      return 'fetched';\n    }\n  },\n\n  _destroyBinds: function () {\n    this.stopListening(this.collection);\n  },\n\n  _onMouseOver: function () {\n    this._mouseOverAction && this._mouseOverAction();\n  },\n\n  _onMouseOut: function () {\n    this._mouseOutAction && this._mouseOutAction();\n  },\n\n  remove: function () {\n    this._listView && this._listView.clean();\n    this._dropdownOverlay && this._dropdownOverlay.clean();\n    this._destroyBinds();\n  }\n});\n","var Backbone = require('backbone');\n\nBackbone.Form.editors.SelectPlaceholder = Backbone.Form.editors.Select.extend({\n  initialize: function (opts) {\n    Backbone.Form.editors.Select.prototype.initialize.call(this, opts);\n  },\n\n  _renderButton: function (model) {\n    Backbone.Form.editors.Select.prototype._renderButton.call(this, model);\n\n    if (this.options.forcePlaceholder) {\n      this._getButton().addClass('is-empty');\n    }\n  },\n\n  _getLabel: function () {\n    if (this.options.forcePlaceholder) {\n      return this.options.placeholder;\n    }\n\n    return Backbone.Form.editors.Select.prototype._getLabel.call(this);\n  },\n\n  _hasValue: function () {\n    if (this.options.forcePlaceholder) {\n      return false;\n    }\n\n    return Backbone.Form.editors.Select.prototype._hasValue.call(this);\n  },\n\n  _getButtonTemplateData: function (model) {\n    var data = Backbone.Form.editors.Select.prototype._getButtonTemplateData.call(this, model);\n\n    if (this.options.forcePlaceholder) {\n      data.label = this.options.placeholder;\n    }\n\n    return data;\n  }\n\n});\n","var $ = require('jquery');\nvar Backbone = require('backbone');\nvar EditorHelpers = require('builder/components/form-components/helpers/editor');\nvar _ = require('underscore');\nvar CustomListCollection = require('builder/components/custom-list/custom-list-collection');\nvar selectedItemTemplate = require('./select-item.tpl');\nvar CustomListItemView = require('builder/components/custom-list/custom-list-item-view');\nvar itemListTemplate = require('builder/components/custom-list/custom-list-item.tpl');\nvar template = require('./select.tpl');\nvar PopupManager = require('builder/components/popup-manager');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar SelectListView = require('./select-list-view');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\n\nvar ENTER_KEY_CODE = 13;\n\nBackbone.Form.editors.Select = Backbone.Form.editors.Base.extend({\n\n  tagName: 'div',\n  className: 'u-ellipsis Editor-formSelect',\n\n  events: {\n    'click .js-button': '_onButtonClick',\n    'keydown .js-button': '_onButtonKeyDown',\n    'focus .js-button': function () {\n      this.trigger('focus', this);\n    },\n    'blur': function () {\n      this.trigger('blur', this);\n    }\n  },\n\n  options: {\n    selectedItemTemplate: selectedItemTemplate,\n    itemListTemplate: itemListTemplate,\n    customListItemView: CustomListItemView\n  },\n\n  initialize: function (opts) {\n    Backbone.Form.editors.Base.prototype.initialize.call(this, opts);\n    EditorHelpers.setOptions(this, opts);\n\n    this.template = opts.template || template;\n    this.dialogMode = this.options.dialogMode || DialogConstants.Mode.DEFAULT;\n\n    if (this.options.mouseOverAction) {\n      this._mouseOverAction = this.options.mouseOverAction;\n    }\n\n    if (this.options.mouseOutAction) {\n      this._mouseOutAction = this.options.mouseOutAction;\n    }\n\n    if (this.options.editorAttrs && this.options.editorAttrs.help) {\n      this._help = this.options.editorAttrs.help;\n    }\n\n    if (this.options.options != null) {\n      this.collection = new CustomListCollection(this.options.options);\n    } else {\n      this.collection = this.options.collection;\n    }\n\n    if (this.collection.isAsync === undefined) {\n      throw new Error('collection must implement isAsync method.');\n    }\n\n    this._initViews();\n\n    this.setValue(this.model.get(this.options.keyAttr));\n\n    this._initBinds();\n  },\n\n  render: function () {\n    var isEmpty = !this.collection.length;\n    var isNull = !this._hasValue();\n    this._isDisabled = !isEmpty ? this.options.disabled : true;\n    var placeholder = this._getPlaceholder(this._isDisabled);\n    var label = isNull ? placeholder : this._getLabel();\n    var isLoading = this._isLoading();\n\n    this.$el.html(this.template({\n      keyAttr: this.options.keyAttr,\n      isEmpty: isEmpty,\n      label: label,\n      isDisabled: this._isDisabled,\n      isNull: isNull,\n      isLoading: isLoading,\n      help: this._help || ''\n    }));\n\n    // we are replacing the html, so we need to re append if nested mode\n    if (this.dialogMode === DialogConstants.Mode.NESTED) {\n      this._popupManager.append(this.dialogMode);\n    }\n\n    if (!isLoading) {\n      this._renderSelected();\n    }\n\n    return this;\n  },\n\n  _initBinds: function () {\n    var hide = function () {\n      this._listView.hide();\n      this._popupManager.untrack();\n      this._onToggleSelected();\n    }.bind(this);\n\n    this.applyESCBind(hide);\n\n    this.listenTo(this.collection, 'change:selected', this._onItemSelected);\n    this.listenTo(this._listView, 'change:visible', this._onToggleSelected);\n\n    if (this.collection.isAsync()) {\n      this.listenTo(this.collection.stateModel, 'change:state', this.render);\n    }\n  },\n\n  _initViews: function () {\n    this._listView = new SelectListView({\n      collection: this.collection,\n      showSearch: this.options.showSearch,\n      allowFreeTextInput: this.options.allowFreeTextInput,\n      typeLabel: this.options.keyAttr,\n      itemTemplate: this.options.itemListTemplate,\n      itemView: this.options.customListItemView,\n      position: this.options.position,\n      searchPlaceholder: this.options.searchPlaceholder,\n      selectModel: this.options.defaultValue && this.model,\n      mouseOverAction: this._mouseOverAction,\n      mouseOutAction: this._mouseOutAction\n    });\n\n    this._popupManager = new PopupManager(this.cid, this.$el, this._listView.$el);\n    this._popupManager.append(this.dialogMode);\n  },\n\n  _getPlaceholder: function (isDisabled) {\n    var keyAttr = this.options.keyAttr;\n    var placeholder;\n\n    if (isDisabled) {\n      placeholder = this.options.disabledPlaceholder || _t('components.backbone-forms.select.disabled-placeholder', { keyAttr: keyAttr });\n    } else {\n      placeholder = this.options.placeholder || _t('components.backbone-forms.select.placeholder', { keyAttr: keyAttr });\n    }\n\n    return placeholder;\n  },\n\n  _hasValue: function () {\n    var name = this.model.get(this.options.keyAttr);\n    return name != null && name !== '';\n  },\n\n  _getLabel: function () {\n    var name = this.model.get(this.options.keyAttr);\n    var mdl = this.collection.findWhere({val: name});\n    return mdl && mdl.getName() || name || '';\n  },\n\n  _isLoading: function () {\n    var isLoading = this.options.loading;\n\n    if (this.collection.isAsync()) {\n      isLoading = this.collection.stateModel.get('state') === 'fetching';\n    }\n\n    return isLoading;\n  },\n\n  _destroyBinds: function () {\n    this.stopListening(this.collection);\n    Backbone.Form.editors.Base.prototype._destroyBinds.call(this);\n  },\n\n  _onItemSelected: function (model) {\n    this._listView.hide();\n    this._popupManager.untrack();\n    this._renderButton(model);\n    this.trigger('change', this);\n  },\n\n  _onButtonClick: function () {\n    if (this._isDisabled) {\n      return;\n    }\n\n    this._listView.toggle();\n    this._listView.isVisible() ? this._popupManager.track() : this._popupManager.untrack();\n    this._onToggleSelected();\n  },\n\n  _onButtonKeyDown: function (event) {\n    if (this._isDisabled) {\n      return;\n    }\n\n    if (event.which === ENTER_KEY_CODE) {\n      event.preventDefault();\n\n      if (!this._listView.isVisible()) {\n        event.stopPropagation();\n        this._listView.toggle();\n      } else {\n        this._popupManager.track();\n      }\n    }\n  },\n\n  getValue: function () {\n    var item = this.collection.getSelectedItem();\n    if (item) {\n      return item.getValue();\n    } else {\n      return this.value;\n    }\n  },\n\n  setValue: function (value) {\n    var selectedModel = this.collection.setSelected(value);\n    if (selectedModel) {\n      this._renderButton(selectedModel);\n    } else {\n      this.render();\n    }\n    this.value = value;\n  },\n\n  _renderSelected: function () {\n    var selectedModel = this.collection.getSelectedItem();\n    if (selectedModel) {\n      this._renderButton(selectedModel);\n    }\n  },\n\n  _getButton: function () {\n    return this.$('.js-button');\n  },\n\n  _getButtonTemplateData: function (model) {\n    return _.extend({ isSourceType: false }, model.attributes, { label: model.getName() });\n  },\n\n  _renderButton: function (model) {\n    var button = this._getButton();\n    var data = this._getButtonTemplateData(model);\n    var $html = this.options.selectedItemTemplate(data);\n\n    button\n      .removeClass('is-empty')\n      .html($html);\n\n    this._initButtonBinds();\n\n    if (this._help) {\n      this._removeTooltip();\n\n      this._helpTooltip = new TipsyTooltipView({\n        el: this.$('.js-help'),\n        gravity: 'w',\n        title: function () {\n          return $(this).data('tooltip');\n        }\n      });\n    }\n\n    return button;\n  },\n\n  _removeTooltip: function () {\n    if (this._helpTooltip) {\n      this._helpTooltip.clean();\n    }\n  },\n\n  _initButtonBinds: function () {\n    var button = this._getButton();\n\n    button\n      .on('mouseover', this._onMouseOver.bind(this))\n      .on('mouseout', this._onMouseOut.bind(this));\n  },\n\n  _destroyButtonBinds: function () {\n    var button = this._getButton();\n\n    button\n      .off('mouseover', this._onMouseOver.bind(this))\n      .off('mouseout', this._onMouseOut.bind(this));\n  },\n\n  remove: function () {\n    this._removeTooltip();\n    this._popupManager && this._popupManager.destroy();\n    this._listView && this._listView.clean();\n    this._destroyButtonBinds();\n    this._destroyBinds();\n    Backbone.Form.editors.Base.prototype.remove.call(this);\n  },\n\n  _onToggleSelected: function () {\n    var visible = this._listView.isVisible();\n\n    this.$el.toggleClass('is-active', visible);\n\n    if (!visible) {\n      this._getButton().blur();\n    }\n  },\n\n  _onMouseOver: function () {\n    this._mouseOverAction && this._mouseOverAction();\n  },\n\n  _onMouseOut: function () {\n    this._mouseOutAction && this._mouseOutAction();\n  },\n\n  clean: function () {\n    this.$el.remove();\n  }\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar EditorHelpers = require('builder/components/form-components/helpers/editor');\nvar CustomListCollection = require('builder/components/custom-list/custom-list-collection');\nvar DialogConstants = require('builder/components/form-components/_constants/_dialogs');\nvar template = require('./select.tpl');\n\nBackbone.Form.editors.Suggest = Backbone.Form.editors.Select.extend({\n\n  initialize: function (opts) {\n    Backbone.Form.editors.Base.prototype.initialize.call(this, opts);\n    EditorHelpers.setOptions(this, opts);\n\n    this.template = opts.template || template;\n    this.dialogMode = this.options.dialogMode || DialogConstants.Mode.DEFAULT;\n    this._setupCollection();\n    this._initViews();\n\n    this.setValue(this.model.get(this.options.keyAttr));\n\n    this._initBinds();\n  },\n\n  _setupCollection: function () {\n    var item = { label: this.value, val: this.value };\n    this.collection = new CustomListCollection(this.options.options);\n\n    if (this.options.editorAttrs && this.options.editorAttrs.collectionData) {\n      var categories = _.map(this.options.editorAttrs.collectionData, function (data) {\n        return { label: data, val: data };\n      });\n\n      this.collection.reset(categories);\n    }\n\n    if (this.value && !this.collection.findWhere(item)) {\n      this.collection.add(item);\n    }\n  },\n\n  _initBinds: function () {\n    var hide = function () {\n      this._listView.hide();\n      this._popupManager.untrack();\n    }.bind(this);\n\n    this.collection.bind('change:selected', this._onItemSelected, this);\n    this.collection.bind('reset', this.render, this);\n    this.applyESCBind(hide);\n    this.applyClickOutsideBind(hide);\n  },\n\n  _renderButton: function (model) {\n    var button = this.$('.js-button');\n    var name = model.getName();\n    var isNull = name === null || name === 'null';\n    var label = isNull ? 'null' : name;\n\n    var data = _.extend({}, model.attributes, { label: label });\n    var $html = this.options.selectedItemTemplate(data);\n\n    button\n      .html($html)\n      .toggleClass('is-empty', isNull);\n\n    return button;\n  }\n\n});\n","var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar template = require('./size-by-value-content-view.tpl');\n\nvar DEFAULT_RANGE = [1, 5];\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-back': '_onClickBack',\n    'click .js-bins': '_onClickBins',\n    'click .js-quantification': '_onClickQuantification'\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this._removeForm();\n    this.$el.empty();\n\n    this.$el.append(\n      template({\n        bins: this.model.get('bins'),\n        attribute: this.model.get('attribute'),\n        quantification: this.model.get('quantification')\n      })\n    );\n\n    this._initForm();\n\n    return this;\n  },\n\n  _initForm: function () {\n    if (this._formView) this._formView.remove();\n\n    var range = this._getRangeOrCalculateItIfNeeded();\n    this._formView = this._createFormView(range);\n\n    this._renderFormView();\n  },\n\n  _renderFormView: function () {\n    this.$('.js-content').append(this._formView.render().$el);\n  },\n\n  _getRangeOrCalculateItIfNeeded: function () {\n    var min, max;\n    var fixedValue = this.model.get('fixed');\n\n    var rangeValues = this.model.get('range');\n    if (rangeValues) {\n      min = +rangeValues[0];\n      max = +rangeValues[1];\n    }\n\n    /* if we come from a fixed value, we need to\n     calculate the range values based on this */\n    if (fixedValue) {\n      var rangeFromFixedValue = this._calculateRangeFromFixed(fixedValue);\n      min = rangeFromFixedValue[0];\n      max = rangeFromFixedValue[1];\n      this.model.set('range', rangeFromFixedValue); // changes are propagated!\n      this.model.unset('fixed'); // once we have a range, everything is ready to map by value\n    }\n\n    return [min, max];\n  },\n\n  _createFormView: function (range) {\n    var min = range[0];\n    var max = range[1];\n\n    var formModel = new Backbone.Model({ min: min, max: max });\n\n    var getNumberType = this._getNumberType.bind(this);\n    formModel.schema = { min: getNumberType(), max: getNumberType() };\n    formModel.bind(\n      'change',\n      function (input) {\n        this.model.set('range', [+input.get('min'), +input.get('max')]);\n      },\n      this\n    );\n\n    var formView = new Backbone.Form({\n      className: 'Editor-boxList',\n      model: formModel\n    });\n    formView.bind('change', function () {\n      this.commit();\n    });\n\n    return formView;\n  },\n\n  _calculateRangeFromFixed: function (fixed, percent) {\n    percent = percent || 30;\n\n    var span = this.options.max - this.options.min;\n    var delta = fixed / span;\n    var min = Math.floor(Math.max(this.options.min, fixed - percent * delta));\n    var max = Math.floor(Math.min(this.options.max, fixed + percent * delta));\n\n    min = Math.max(min, DEFAULT_RANGE[0]);\n    max = Math.max(max, DEFAULT_RANGE[1]);\n\n    return [min, max];\n  },\n\n  _getNumberType: function () {\n    return {\n      type: 'Number',\n      validators: [\n        'required',\n        {\n          type: 'interval',\n          min: this.options.min,\n          max: this.options.max\n        }\n      ]\n    };\n  },\n\n  _removeForm: function () {\n    this._formView && this._formView.remove();\n  },\n\n  _onClickBack: function (e) {\n    this.killEvent(e);\n    this.trigger('back', this);\n  },\n\n  _onClickQuantification: function (e) {\n    this.killEvent(e);\n    this.trigger('selectQuantification', this);\n  },\n\n  _onClickBins: function (e) {\n    this.killEvent(e);\n    this.trigger('selectBins', this);\n  },\n\n  clean: function () {\n    this._removeForm();\n    CoreView.prototype.clean.call(this);\n  }\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\n\nvar template = require('./size-by-value-view.tpl');\nvar DialogModel = require('builder/components/dialog/dialog-model');\nvar DialogView = require('builder/components/dialog/dialog-view');\n\nvar StackLayoutView = require('builder/components/stack-layout/stack-layout-view');\nvar ColumnListView = require('builder/components/custom-list/column-list/column-list-view');\nvar columnListQuantificationMethodItemTemplate = require('builder/components/custom-list/column-list/column-list-quantification-method-item.tpl');\nvar SizeByValueContentView = require('./size-by-value-content-view');\n\nvar PopupManager = require('builder/components/popup-manager');\n\nvar FillConstants = require('builder/components/form-components/_constants/_fill');\n\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'columns',\n  'popupConfig'\n];\n\nvar COLUMN_PANE_INDEX = 0;\nvar MAIN_PANE_INDEX = 1;\nvar QUANTIFICATION_PANE_INDEX = 2;\nvar BINS_PANE_INDEX = 3;\n\nmodule.exports = CoreView.extend({\n  className: 'Form-StyleByValue u-ellipsis',\n\n  events: {\n    'click .js-button': '_showByValueDialog',\n    'click .js-back': '_onClickBack'\n  },\n\n  initialize: function (options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n\n    this._settings = FillConstants.Settings.NUMBER;\n    this._setupModel();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n    return this;\n  },\n\n  afterRender: function () {\n    this._openPopupForColumn();\n  },\n\n  _openPopupForColumn: function () {\n    var columnSelected = this.model.get('attribute');\n    if (_.isUndefined(columnSelected)) {\n      var self = this;\n      this.timeoutId = setTimeout(function () {\n        self.timeoutId = null;\n        self._showByValueDialog();\n      }, 200);\n    }\n  },\n\n  _setupModel: function () {\n    var options = {};\n\n    if (!this.model.get('quantification')) {\n      var quantifications = this._settings.quantifications;\n      options.quantification =\n        quantifications.items[quantifications.defaultIndex];\n    }\n\n    var modelBins = this.model.get('bins');\n    var defaultBins = this._settings.bins;\n\n    if (!modelBins) {\n      options.bins = defaultBins.items[defaultBins.defaultIndex];\n    }\n\n    if (+modelBins > +_.last(defaultBins.items)) {\n      options.bins = _.last(defaultBins.items);\n    }\n\n    this.model.set(options);\n    this.listenTo(this.model, 'change:attribute change:range', this.render);\n  },\n\n  _initViews: function () {\n    this._initDialog();\n    this._initPopup();\n    this._initInputColumn();\n  },\n\n  _initDialog: function () {\n    if (this._dialogView) return;\n\n    var dialogModel = new DialogModel();\n\n    this.listenToOnce(dialogModel, 'destroy', function () {\n      this._dialogView = null;\n      this.stopListening(dialogModel);\n    });\n\n    this._dialogView = new DialogView({\n      model: dialogModel\n    });\n  },\n\n  _initPopup: function () {\n    this._popupManager = new PopupManager(\n      this._popupConfig.cid,\n      this._popupConfig.$el,\n      this._dialogView.$el\n    );\n  },\n\n  _initInputColumn: function () {\n    var columnSelected = this.model.get('attribute');\n    var rangeSelected = this.model.get('range');\n\n    var labelColumn = columnSelected || _t('form-components.editors.style.select-by-column');\n    var labelRange = rangeSelected ? rangeSelected[0] + ' - ' + rangeSelected[1] : '';\n\n    this.$el.append(template({\n      columnSelected: !!columnSelected,\n      label: labelColumn,\n      rangeSelected: !!rangeSelected,\n      range: labelRange\n    }));\n  },\n\n  removeDialog: function () {\n    this._dialogView.clean();\n    this._popupManager.untrack();\n  },\n\n  removePopupManager: function () {\n    this._popupManager.destroy();\n  },\n\n  _createStackView: function () {\n    var stackLayoutView = new StackLayoutView({\n      collection: new Backbone.Collection([\n        { createStackView: this._createColumnsView.bind(this) },\n        { createStackView: this._createSizeValueContentView.bind(this) },\n        { createStackView: this._createQuantificationView.bind(this) },\n        { createStackView: this._createBinsView.bind(this) }\n      ])\n    });\n    stackLayoutView.model.set('position', this._getDialogStepPosition());\n    return stackLayoutView;\n  },\n\n  _showByValueDialog: function () {\n    this._dialogView.model.set('createContentView', this._createStackView.bind(this));\n    this._dialogView.render();\n    this._dialogView.show();\n\n    this._popupManager.append(this._popupConfig.mode);\n    this._popupManager.track();\n  },\n\n  _getDialogStepPosition: function () {\n    var position = MAIN_PANE_INDEX;\n    if (!this.model.get('attribute')) {\n      position = COLUMN_PANE_INDEX;\n    } else if (!this.model.get('quantification')) {\n      position = QUANTIFICATION_PANE_INDEX;\n    }\n    return position;\n  },\n\n  _createColumnsView: function (stackLayoutModel, opts) {\n    var view = new ColumnListView({\n      stackLayoutModel: stackLayoutModel,\n      columns: this._columns.filter(function (column) {\n        return column.type === 'number';\n      }),\n      showSearch: true,\n      typeLabel: 'column'\n    });\n\n    view.bind(\n      'selectItem',\n      function (item) {\n        this.model.set('attribute', item.get('val'));\n        var step = MAIN_PANE_INDEX;\n        if (!this.model.get('quantification')) {\n          step = QUANTIFICATION_PANE_INDEX;\n        }\n        stackLayoutModel.goToStep(step);\n      },\n      this\n    );\n\n    return view;\n  },\n\n  _createSizeValueContentView: function (stackLayoutModel, opts) {\n    var view = new SizeByValueContentView({\n      stackLayoutModel: stackLayoutModel,\n      model: this.model,\n      min: this.options.min,\n      max: this.options.max\n    });\n\n    view.bind(\n      'back',\n      function (value) {\n        stackLayoutModel.prevStep();\n      },\n      this\n    );\n\n    view.bind(\n      'selectQuantification',\n      function (value) {\n        stackLayoutModel.goToStep(QUANTIFICATION_PANE_INDEX);\n      },\n      this\n    );\n\n    view.bind(\n      'selectBins',\n      function (value) {\n        stackLayoutModel.goToStep(BINS_PANE_INDEX);\n      },\n      this\n    );\n\n    return view;\n  },\n\n  _createQuantificationView: function (stackLayoutModel, opts) {\n    var view = new ColumnListView({\n      headerTitle: _t('form-components.editors.fill.quantification.title'),\n      stackLayoutModel: stackLayoutModel,\n      columns: this._settings.quantifications.items,\n      itemTemplate: columnListQuantificationMethodItemTemplate,\n      showSearch: false\n    });\n\n    view.bind(\n      'selectItem',\n      function (item) {\n        this.model.set('quantification', item.get('val'));\n        stackLayoutModel.prevStep();\n      },\n      this\n    );\n\n    view.bind(\n      'back',\n      function (value) {\n        stackLayoutModel.prevStep();\n      },\n      this\n    );\n\n    return view;\n  },\n\n  _createBinsView: function (stackLayoutModel, opts) {\n    var view = new ColumnListView({\n      headerTitle: _t('form-components.editors.fill.bins'),\n      stackLayoutModel: stackLayoutModel,\n      columns: this._settings.bins.items\n    });\n\n    view.bind(\n      'selectItem',\n      function (item) {\n        this.model.set('bins', item.get('val'));\n        stackLayoutModel.goToStep(MAIN_PANE_INDEX);\n      },\n      this\n    );\n\n    view.bind(\n      'back',\n      function (value) {\n        stackLayoutModel.goToStep(MAIN_PANE_INDEX);\n      },\n      this\n    );\n\n    return view;\n  },\n\n  _onClickBack: function (e) {\n    this.killEvent(e);\n  },\n\n  clean: function () {\n    if (this.timeoutId) {\n      clearTimeout(this.timeoutId);\n    }\n\n    CoreView.prototype.clean.apply(this);\n  }\n});\n","var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\n\nmodule.exports = CoreView.extend({\n  render: function () {\n    this.clearSubViews();\n    this._removeForm();\n    this.$el.empty();\n    this._initForm();\n    return this;\n  },\n\n  _initForm: function () {\n    this._formModel = new Backbone.Model({\n      value: this.model.get('fixed')\n    });\n\n    this._formModel.schema = {\n      value: {\n        type: 'Number',\n        title: '',\n        validators: [\n          'required',\n          {\n            type: 'interval',\n            min: this.options.min,\n            max: this.options.max,\n            step: this.options.step\n          }\n        ]\n      }\n    };\n\n    this._formModel.bind(\n      'change',\n      function (input) {\n        this.model.set('fixed', input.get('value'));\n      },\n      this\n    );\n\n    this._formView = new Backbone.Form({\n      model: this._formModel\n    });\n\n    this._formView.bind('change', function () {\n      this.commit();\n    });\n\n    this.$el.append(this._formView.render().$el);\n  },\n\n  _removeForm: function () {\n    this._formView && this._formView.remove();\n  },\n\n  clean: function () {\n    this._removeForm();\n    CoreView.prototype.clean.call(this);\n  }\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\n\nvar tabPaneTemplate = require('builder/components/tab-pane/tab-pane.tpl');\nvar createRadioLabelsTabPane = require('builder/components/tab-pane/create-radio-labels-tab-pane');\n\nvar EditorHelpers = require('builder/components/form-components/helpers/editor');\n\nvar SizeFixedView = require('./size-fixed-view');\nvar SizeByValueView = require('./size-by-value-view');\n\nvar FillConstants = require('builder/components/form-components/_constants/_fill');\n\nBackbone.Form.editors.Size = Backbone.Form.editors.Base.extend({\n  className: 'Form-InputSize CDB-Text',\n\n  events: {\n    focus: function () {\n      this.trigger('focus', this);\n    },\n    blur: function () {\n      this.trigger('blur', this);\n    }\n  },\n\n  initialize: function (opts) {\n    Backbone.Form.editors.Base.prototype.initialize.call(this, opts);\n    EditorHelpers.setOptions(this, opts);\n\n    this._sizeModel = new Backbone.Model(this.model.get(opts.key));\n\n    this._initBinds();\n    this._initViews();\n  },\n\n  _initBinds: function () {\n    this._updateSizeModelOnChangeBind();\n    this.applyESCBind(this._removeDialogs);\n    this.applyClickOutsideBind(this._removeDialogs);\n  },\n\n  _updateSizeModelOnChangeBind: function () {\n    var self = this;\n    this._sizeModel.bind('change', function () {\n      self.model.set(self.key, self._sizeModel.toJSON());\n    }, this);\n  },\n\n  _removeDialogs: function () {\n    this._valueView && this._valueView.removeDialog();\n  },\n\n  _removePopupManagers: function () {\n    this._valueView && this._valueView.removePopupManager();\n  },\n\n  _initViews: function () {\n    this._tabPaneTabs = this._getTabPanes();\n\n    this._setSelectedTab();\n\n    this._tabPaneView = createRadioLabelsTabPane(\n      this._tabPaneTabs,\n      this._getTabPaneOptions()\n    );\n\n    this.listenTo(\n      this._tabPaneView.collection,\n      'change:selected',\n      this._onChangeTabPaneViewTab\n    );\n\n    this.$el.append(this._tabPaneView.render().$el);\n  },\n\n  _getTabPanes: function () {\n    var tabPaneTabs = [];\n    var attrs = this.options.editorAttrs;\n    if (attrs && attrs.hidePanes) {\n      if (!_.contains(attrs.hidePanes, FillConstants.Panes.FIXED)) tabPaneTabs.push(this._buildFixedPane());\n      if (!_.contains(attrs.hidePanes, FillConstants.Panes.BY_VALUE)) tabPaneTabs.push(this._buildByValuePane());\n    } else {\n      tabPaneTabs = [this._buildFixedPane(), this._buildByValuePane()];\n    }\n    return tabPaneTabs;\n  },\n\n  _setSelectedTab: function () {\n    var selectedIndex = this._getSelectedTabPaneIndex();\n    this._tabPaneTabs[selectedIndex].selected = true;\n  },\n\n  _getTabPaneOptions: function () {\n    var options = {\n      tabPaneOptions: {\n        template: tabPaneTemplate,\n        tabPaneItemOptions: {\n          tagName: 'li',\n          klassName: 'CDB-NavMenu-item'\n        }\n      },\n      tabPaneItemLabelOptions: {\n        tagName: 'div',\n        className: 'CDB-Text CDB-Size-medium'\n      }\n    };\n    return options;\n  },\n\n  _buildFixedPane: function () {\n    var self = this;\n    var geometryName = this.options.editorAttrs.geometryName;\n    var fixedPane = {\n      name: FillConstants.Panes.FIXED,\n      label: _t('form-components.editors.fill.input-number.fixed'),\n      tooltip: _t('editor.style.tooltips.size.fixed-tab', { type: geometryName }),\n      tooltipGravity: 's',\n      createContentView: function () {\n        return self._generateFixedContentView();\n      }\n    };\n    return fixedPane;\n  },\n\n  _buildByValuePane: function () {\n    var self = this;\n    var geometryName = this.options.editorAttrs.geometryName;\n    var valuePane = {\n      name: FillConstants.Panes.BY_VALUE,\n      label: _t('form-components.editors.fill.input-number.by-value'),\n      tooltip: _t('editor.style.tooltips.size.by-value-tab', { type: geometryName }),\n      tooltipGravity: 's',\n      createContentView: function () {\n        return self._generateByValueContentView();\n      }\n    };\n    return valuePane;\n  },\n\n  _getSelectedTabPaneIndex: function () {\n    var FIXED_TAB_PANE = 0;\n    var BY_VALUE_PANE = 1;\n\n    var hasRange = this._sizeModel.get('range');\n    var thereIsByValuePane = this._tabPaneTabs.length > 1;\n\n    return hasRange && thereIsByValuePane ? BY_VALUE_PANE : FIXED_TAB_PANE;\n  },\n\n  _onChangeTabPaneViewTab: function () {\n    var selectedTabPaneName = this._tabPaneView.getSelectedTabPaneName();\n\n    if (selectedTabPaneName === FillConstants.Panes.FIXED) {\n      this._updateFixedValue();\n    } else {\n      this._updateRangeValue();\n    }\n\n    this.trigger('change', selectedTabPaneName, this);\n  },\n\n  _updateFixedValue: function () {\n    var range = this._sizeModel.get('range');\n    if (range) {\n      // when coming from range calculate the average...\n      var avg = 0.5 * (+range[0] + +range[1]);\n      this._sizeModel.set('fixed', avg);\n      this._sizeModel.unset('range');\n    }\n  },\n\n  _updateRangeValue: function () {\n    var fixed = this._sizeModel.get('fixed');\n    if (\n      fixed !== null &&\n      !_.isUndefined(fixed) &&\n      this._sizeModel.get('attribute')\n    ) {\n      var editorAttrs = this.options.editorAttrs;\n      var range = editorAttrs && editorAttrs.defaultRange || [fixed, fixed];\n      this._sizeModel.set('range', range);\n      this._sizeModel.unset('fixed');\n    }\n  },\n\n  _generateFixedContentView: function () {\n    var editorAttrs = this.options.editorAttrs;\n    this._fixedView = new SizeFixedView({\n      model: this._sizeModel,\n      min: editorAttrs && editorAttrs.min || FillConstants.Size.DefaultInput100.MIN,\n      max: editorAttrs && editorAttrs.max || FillConstants.Size.DefaultInput100.MAX,\n      step: editorAttrs && editorAttrs.step || FillConstants.Size.DefaultInput100.STEP\n    });\n    return this._fixedView;\n  },\n\n  _generateByValueContentView: function () {\n    var editorAttrs = this.options.editorAttrs;\n    this._valueView = new SizeByValueView({\n      model: this._sizeModel,\n      columns: this.schema.options,\n      min: editorAttrs && editorAttrs.min || FillConstants.Size.DefaultInput100.MIN,\n      max: editorAttrs && editorAttrs.max || FillConstants.Size.DefaultInput100.MAX,\n      popupConfig: {\n        cid: this.cid,\n        $el: this.$el,\n        mode: this.options.dialogMode\n      }\n    });\n    return this._valueView;\n  },\n\n  focus: function () {\n    if (this.hasFocus) return;\n    this.$('.js-menu').focus();\n  },\n\n  blur: function () {\n    if (!this.hasFocus) return;\n    this.$('.js-menu').blur();\n  },\n\n  getValue: function () {\n    return this._sizeModel.toJSON();\n  },\n\n  remove: function () {\n    this._removeDialogs();\n    this._removePopupManagers();\n    this._tabPaneView.clean();\n    this._valueView && this._valueView.clean();\n    this._fixedView && this._fixedView.clean();\n    Backbone.Form.editors.Base.prototype.remove.apply(this);\n  },\n\n  clean: function () {\n    this.$el.remove();\n  }\n});\n","var $ = require('jquery');\nvar _ = require('underscore');\nvar Backbone = require('backbone');\nvar EditorHelpers = require('builder/components/form-components/helpers/editor');\nvar template = require('./slider.tpl');\nvar MutationObserver = window.MutationObserver;\n\nvar TICKS_PLACEHOLDER = 5;\nvar HANDLE_WIDTH = 12;\nvar DIMENSION = 160;\nvar INITIAL = {\n  HIGHEST: 'highest',\n  LOWEST: 'lowest'\n};\n\nBackbone.Form.editors.Slider = Backbone.Form.editors.Base.extend({\n\n  className: 'rangeslider--no-fill',\n\n  options: {\n    direction: 'horizontal',\n    initial: INITIAL.LOWEST\n  },\n\n  events: {\n    'change .js-slider': '_onValueChange',\n    focus: function () {\n      this.trigger('focus', this);\n    },\n    blur: function () {\n      this.trigger('blur', this);\n    }\n  },\n\n  initialize: function (opts) {\n    Backbone.Form.editors.Base.prototype.initialize.call(this, opts);\n    EditorHelpers.setOptions(this, opts);\n\n    if (!this.options.labels) {\n      throw new Error('labels is required');\n    }\n\n    if (this.options.values && this.options.labels.length !== this.options.values.length) {\n      throw new Error('values and labels should have the same length');\n    }\n\n    if (this.options.value !== undefined) {\n      this.value = this.options.value;\n    }\n\n    this._onValueChange = this._onValueChange.bind(this);\n    this._onSlideChange = this._onSlideChange.bind(this);\n\n    this._values = this.options.values;\n    this._labels = this.options.labels;\n    this._getInitialTickID();\n    this._updateUI();\n  },\n\n  render: function () {\n    var isDisabled = this.options.disabled || this._labels.length <= 0;\n    var max = this._labels.length === 0 ? TICKS_PLACEHOLDER - 1 : this._labels.length - 1;\n    var step = this._getStepPercentage();\n\n    this.$el.html(\n      template({\n        orientation: this.options.direction,\n        disabled: isDisabled,\n        min: 0,\n        max: max,\n        value: this.rangeIndex\n      })\n    );\n\n    this._renderSlider();\n    this._addTicks(step);\n    this._updateUI();\n\n    return this;\n  },\n\n  _getInitialTickID: function () {\n    var value = this.value;\n\n    if (this._values && this._values.length > 0) {\n      value = this._values.indexOf(this.value);\n\n      if (value === -1) {\n        value = this.options.initial === INITIAL.LOWEST ? 0 : this._values.length - 1;\n      }\n    } else if (!this.value) {\n      value = 0;\n    }\n\n    this.rangeIndex = value;\n  },\n\n  _getNumberOfValues: function () {\n    return (this._values && this._values.length) || 0;\n  },\n\n  _renderSlider: function () {\n    var element;\n    var field;\n    var onMutationObserver;\n    var observer;\n    var config = { subtree: true, childList: true };\n\n    if (!MutationObserver) {\n      this._initializeSlider();\n    } else {\n      element = document.body;\n      field = this.$('.js-slider').get(0);\n      onMutationObserver = function () {\n        if (element.contains(field)) {\n          this._initializeSlider();\n          observer.disconnect();\n        }\n      }.bind(this);\n\n      observer = new MutationObserver(onMutationObserver);\n      onMutationObserver();\n\n      observer.observe(element, config);\n    }\n  },\n\n  _initializeSlider: function () {\n    var numberOfValues = this._getNumberOfValues();\n    var init = function () {\n      this.$('.js-slider').rangeslider({\n        polyfill: false,\n        fillClass: 'rangesliderFill',\n        handleClass: 'rangesliderHandle',\n        onSlideEnd: this._onSlideChange\n      });\n    }.bind(this);\n\n    if (numberOfValues !== 1) {\n      !MutationObserver ? setTimeout(init, 0) : init();\n    }\n\n    this.$('.js-slider').toggle(numberOfValues !== 1);\n  },\n\n  _updateUI: function () {\n    this._updateLabel(this.rangeIndex);\n    this._highlightTick(this.rangeIndex);\n  },\n\n  _addTicks: function (step) {\n    var offset = HANDLE_WIDTH / 2;\n    var numberOfValues = this._getNumberOfValues();\n    var ticks = this._labels.length > 0 ? this._labels.length : TICKS_PLACEHOLDER;\n    _.each(_.range(ticks), function (tick, index) {\n      $('<div class=\"rangeslider-tick js-tick\"></div>')\n        .css('left', (step * index + offset) + 'px')\n        .appendTo(this.$('.js-ticks'));\n    }, this);\n\n    this.$('.js-ticks').toggle(numberOfValues !== 1);\n  },\n\n  _highlightTick: function (tickID) {\n    this.$('.js-tick').removeClass('is-highlighted');\n    $(this.$('.js-tick').get(tickID)).addClass('is-highlighted');\n  },\n\n  _updateLabel: function (tickID) {\n    var label = this._labels[tickID];\n    if (this._labels.length <= 0) {\n      label = _t('form-components.editors.slide.no-values');\n    }\n    this.$('.js-label').text(label);\n  },\n\n  _getStepPercentage: function () {\n    var steps = this._getSteps();\n    var rangeWidth = DIMENSION - HANDLE_WIDTH;\n\n    return (rangeWidth / steps);\n  },\n\n  _getSteps: function () {\n    var steps = this._labels.length - 1;\n    if (steps < 0) {\n      steps = TICKS_PLACEHOLDER - 1;\n    }\n\n    return steps;\n  },\n\n  _onValueChange: function (e) {\n    var value = this.$('.js-slider').val();\n    this._onSlideChange(null, value);\n  },\n\n  _onSlideChange: function (position, value) {\n    this.rangeIndex = +value;\n    this.value = this._values && this._values.length > 0 ? this._values[this.rangeIndex] : this.rangeIndex;\n    this._updateUI(this.rangeIndex);\n    this.trigger('change', this);\n  },\n\n  getValue: function () {\n    var value = this._values && this._values.length > 0 ? this._values[this.rangeIndex] : null;\n    return this.value || value;\n  },\n\n  setValue: function (value) {\n    var index = this._values ? this._values.indexOf(value) : value;\n    this.$('.js-slider').val(index).change();\n    this.value = value;\n  },\n\n  _destroySlider: function () {\n    this.$('.js-slider').off('change', this._onValueChange);\n    this.$('.js-slider').rangeslider('destroy');\n  },\n\n  remove: function () {\n    this._destroySlider();\n    Backbone.Form.editors.Base.prototype.remove.apply(this);\n  },\n\n  clean: function () {\n    this.$el.remove();\n  }\n});\n","var Backbone = require('backbone');\nvar _ = require('underscore');\nrequire('jquery-ui');\n\nBackbone.Form.editors.SortableList = Backbone.Form.editors.List.extend({\n  initialize: function () {\n    Backbone.Form.editors.List.prototype.initialize.apply(this, arguments);\n  },\n\n  render: function () {\n    Backbone.Form.editors.List.prototype.render.apply(this, arguments);\n    this._initSortable();\n    return this;\n  },\n\n  addItem: function () {\n    Backbone.Form.editors.List.prototype.addItem.apply(this, arguments);\n    this._updateEditability();\n    return this;\n  },\n\n  removeItem: function () {\n    Backbone.Form.editors.List.prototype.removeItem.apply(this, arguments);\n    this._updateEditability();\n    return this;\n  },\n\n  _initSortable: function () {\n    this.$list.sortable({\n      axis: 'y',\n      items: '.js-sortable',\n      tolerance: 'pointer',\n      containment: this.$list,\n      forceHelperSize: true,\n      forcePlaceholderSize: true,\n      update: this._onSortableUpdate.bind(this)\n    });\n  },\n\n  _onSortableUpdate: function (event, ui) {\n    var sorted = [];\n    var list = this.$list;\n    var items = this.items;\n\n    _.each(items, function (item) {\n      var index = item.$el.index(list.$el);\n      sorted[index] = item;\n    });\n\n    this.items = sorted;\n    this.commit();\n  },\n\n  _updateEditability: function () {\n    if (this.items.length > 1) {\n      this.$('.js-sortable').addClass('is-movable');\n      this.$('.js-editable').removeClass('is-hidden');\n    } else {\n      this.$('.js-sortable').removeClass('is-movable');\n      this.$('.js-editable').addClass('is-hidden');\n    }\n  }\n});\n","var Backbone = require('backbone');\n\nmodule.exports = Backbone.Collection.extend({\n  removeTag: function (label) {\n    var m = this.findWhere({label: label});\n    m && this.remove(m);\n  },\n\n  addTag: function (label) {\n    var m = this.findWhere({label: label});\n    !m && this.add({label: label});\n  },\n\n  getValue: function () {\n    return this.map(function (mdl) {\n      return mdl.get('label');\n    });\n  }\n});\n","var CoreView = require('backbone/core-view');\n\nmodule.exports = CoreView.extend({\n  tagName: 'li',\n\n  initialize: function (opts) {\n    if (!opts.label) throw new Error('label is required');\n    this._label = opts.label;\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(this._label);\n    return this;\n  }\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar template = require('./taglist.tpl');\nvar TagView = require('./taglist-item-view');\nvar TagCollection = require('./taglist-collection');\nvar EditorHelpers = require('builder/components/form-components/helpers/editor');\n\nrequire('jquery');\nrequire('jquery-ui');\nrequire('tagit');\n\nBackbone.Form.editors.Taglist = Backbone.Form.editors.Base.extend({\n  className: 'Form-tags CDB-Text',\n  events: {\n    'mouseover': '_onMouseOver',\n    'mouseout': '_onMouseOut'\n  },\n  initialize: function (opts) {\n    Backbone.Form.editors.Base.prototype.initialize.call(this, opts);\n    EditorHelpers.setOptions(this, opts);\n\n    this._tagCollection = new TagCollection(this._normalize(opts.schema.options.tags));\n\n    this.isEditable = opts.schema.options.isEditable || opts.schema.options.isEditable === undefined;\n  },\n\n  render: function () {\n    this._initViews();\n    return this;\n  },\n\n  _initViews: function () {\n    var self = this;\n    var tagsPlaceholder = (!this.isEditable && this._tagCollection.length === 0)\n      ? _t('components.taglist.none')\n      : _t('components.taglist.placeholder');\n\n    this.$el.html(template());\n\n    this._tagCollection.each(this._renderTag, this);\n\n    this.$('.js-tagsList').tagit({\n      allowSpaces: true,\n      caseSensitive: false,\n      placeholderText: tagsPlaceholder,\n      readOnly: !this.isEditable,\n      onBlur: function () {\n        self.isEditable && self.$el.removeClass('is-focus');\n        self.trigger('blur', self);\n      },\n      onFocus: function () {\n        self.isEditable && self.$el.removeClass('is-hover').addClass('is-focus');\n        self.trigger('focus', self);\n      },\n      preprocessTag: tag => tag.toLowerCase(),\n      afterTagAdded: self._onTagAdded.bind(self),\n      afterTagRemoved: self._onTagRemoved.bind(self)\n    });\n  },\n\n  _renderTag: function (model) {\n    var view = new TagView({\n      label: model.get('label')\n    });\n\n    this.$('.js-tagsList').append(view.render().el);\n  },\n\n  focus: function () {\n    if (this.hasFocus) return;\n    this.$el.focus();\n  },\n\n  blur: function () {\n    if (!this.hasFocus) return;\n    this.$el.blur();\n  },\n\n  getValue: function () {\n    return this._tagCollection.getValue();\n  },\n\n  setValue: function (tags) {\n    this._tagCollection.reset(this._normalize(tags));\n    this._destroyTagit();\n    this.render();\n    this.trigger('change', this);\n  },\n\n  _onMouseOver: function () {\n    !this.$el.hasClass('is-focus') && this.$el.addClass('is-hover');\n  },\n\n  _onMouseOut: function () {\n    !this.$el.hasClass('is-focus') && this.$el.removeClass('is-hover');\n  },\n\n  _onTagRemoved: function (e, ui) {\n    var tag = ui.tag.find('.tagit-label').text();\n    this._tagCollection.removeTag(tag);\n    this.trigger('change', this);\n  },\n\n  _onTagAdded: function (e, ui) {\n    var tag = ui.tag.find('.tagit-label').text();\n    this._tagCollection.addTag(tag);\n    this.trigger('change', this);\n  },\n\n  _normalize: function (tags) {\n    return _.map(tags, function (tag) {\n      return {\n        label: tag.trim()\n      };\n    });\n  },\n\n  _destroyTagit: function () {\n    // cannot call public methods before initilization\n    // checking ui-widget class does the trick\n    (this.$('.ui-widget').length > 0) && this.$('.js-tagsList').tagit('destroy');\n  },\n\n  remove: function () {\n    this._destroyTagit();\n    Backbone.Form.editors.Base.prototype.remove.apply(this);\n  },\n\n  clean: function () {\n    this.$el.remove();\n  }\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar EditorHelpers = require('builder/components/form-components/helpers/editor');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\n\nBackbone.Form.editors.Text = Backbone.Form.editors.Text.extend({\n  className: 'CDB-InputText CDB-Text',\n\n  initialize: function (opts) {\n    Backbone.Form.editors.Base.prototype.initialize.call(this, opts);\n    EditorHelpers.setOptions(this, opts);\n\n    var schema = this.schema;\n\n    // Allow customising text type (email, phone etc.) for HTML5 browsers\n    var type = 'text';\n\n    if (schema && schema.editorAttrs && schema.editorAttrs.type) type = schema.editorAttrs.type;\n    if (schema && schema.dataType) type = schema.dataType;\n\n    if (this.options.editorAttrs && this.options.editorAttrs.help) {\n      this._help = this.options.editorAttrs.help;\n    }\n\n    this.$el.attr('type', type);\n\n    this.determineChange = _.debounce(this.determineChange, 200);\n  },\n\n  render: function () {\n    this.setValue(this.value);\n    this._toggleDisableState();\n\n    if (this._isCopyButtonEnabled()) {\n      this._toggleClipboardState();\n    }\n\n    if (this._help) {\n      this._removeTooltip();\n\n      if (!this.options.disabled) {\n        this._helpTooltip = new TipsyTooltipView({\n          el: this.$el,\n          gravity: 'w',\n          title: function () {\n            return this._help;\n          }.bind(this)\n        });\n      }\n    }\n\n    return this;\n  },\n\n  getValue: function () {\n    var val = this.$el.val();\n\n    return (val === '') ? null : val;\n  },\n\n  _toggleClipboardState: function () {\n    this.$el.toggleClass('Share-input-field u-ellipsis', this._isCopyButtonEnabled());\n  },\n\n  _togglePlaceholder: function () {\n    if (this.options.placeholder) {\n      this.$el.attr('placeholder', this.options.placeholder);\n    } else {\n      var placeholder = (this.value === null) ? 'null' : '';\n      this.$el.attr('placeholder', placeholder);\n    }\n  },\n\n  _toggleDisableState: function () {\n    if (this.options.disabled) {\n      this.$el.attr('readonly', '');\n      this.$el.attr('placeholder', '');\n\n      // if it's disabled AND has copy, leave just readonly\n      if (this._isCopyButtonEnabled()) {\n        this.$el.removeAttr('disabled');\n      }\n    } else {\n      this.$el.removeAttr('readonly');\n      this._togglePlaceholder();\n    }\n\n    this.$el.toggleClass('is-disabled', !!this.options.disabled);\n  },\n\n  _isCopyButtonEnabled: function () {\n    return !!this.options.hasCopyButton;\n  },\n\n  _removeTooltip: function () {\n    if (this._helpTooltip) {\n      this._helpTooltip.clean();\n    }\n  },\n\n  remove: function () {\n    this._removeTooltip();\n\n    Backbone.Form.editors.Base.prototype.remove.apply(this);\n  },\n\n  clean: function () {\n    this.$el.remove();\n  }\n});\n","var Backbone = require('backbone');\n\nBackbone.Form.editors.TextArea = Backbone.Form.editors.Text.extend({\n  tagName: 'textarea',\n  className: 'CDB-Textarea',\n\n  render: function () {\n    this.setValue(this.value);\n    this._toggleDisableState();\n\n    return this;\n  },\n\n  getValue: function () {\n    var val = this.$el.val();\n\n    return (val === '') ? null : val;\n  },\n\n  _toggleDisableState: function () {\n    if (this.options.disabled) {\n      this.$el.attr('readonly', '');\n      this.$el.attr('placeholder', '');\n    } else {\n      this.$el.removeAttr('readonly');\n      this._togglePlaceholder();\n    }\n\n    this.$el.toggleClass('is-disabled', !!this.options.disabled);\n  }\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar template = require('./toggle.tpl');\n\nBackbone.Form.editors.Toggle = Backbone.Form.editors.Radio.extend({\n  className: 'Editor-formLabel CDB-Text CDB-Size-medium u-alignCenter',\n\n  _arrayToHtml: function (array) {\n    var name = this.getName();\n    var id = this.id;\n\n    var items = _.map(array, function (option, index) {\n      var val = this.form.model.get(this.key);\n      var item = {\n        name: name,\n        id: id + '-' + index\n      };\n\n      if (_.isObject(option)) {\n        item.value = (option.val || option.val === 0) ? option.val : '';\n        item.label = option.label;\n        item.help = option.help;\n        item.labelHTML = option.labelHTML;\n        item.selected = (val !== void 0) ? val === option.val : option.selected;\n      } else {\n        item.value = option;\n        item.label = option;\n        item.selected = (val !== void 0) ? val === option : option.selected;\n      }\n\n      return item;\n    }.bind(this));\n\n    return template({ items: items });\n  }\n});\n","var Backbone = require('backbone');\nvar _ = require('underscore');\nvar $ = require('jquery');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view.js');\nvar Clipboard = require('clipboard');\n\nBackbone.Form.Field = Backbone.Form.Field.extend({\n\n  initialize: function (options) {\n    this.trackingClass = options.trackingClass;\n    this.constructor.__super__.initialize.apply(this, arguments);\n  },\n\n  render: function () {\n    this.constructor.__super__.render.apply(this, arguments);\n    if (this.schema.help) {\n      this._setHelp();\n    }\n\n    if (this._isCopyButtonEnabled()) {\n      this._initClipboard();\n    }\n\n    return this;\n  },\n\n  /**\n  * OVERWRITTEN the creation of the full field schema, merging defaults etc.\n  *\n  * @param {Object|String} schema\n  *\n  * @return {Object}\n  */\n  createSchema: function (schema) {\n    var editorType = schema.type;\n    schema = this.constructor.__super__.createSchema.apply(this, arguments);\n    schema.editorType = editorType;\n    return schema;\n  },\n\n  /**\n   * OVERWRITTEN the creation of the editor specified in the schema; either an\n   * editor string name or a constructor function\n   *\n   * @return {View}\n   */\n  createEditor: function () {\n    var options = _.extend(\n      _.pick(this, 'schema', 'form', 'key', 'model', 'value', 'trackingClass'),\n      { id: this.createEditorId() }\n    );\n\n    var ConstructorFn = this.schema.type;\n\n    return new ConstructorFn(options);\n  },\n\n  _setHelp: function () {\n    this._helpTooltip = this._createTooltip({\n      $el: this.$('.js-help')\n    });\n  },\n\n  // Changed original setError function in order to add\n  // the error tooltip\n  setError: function (msg) {\n    if (this.editor.hasNestedForm || this.schema.hideValidationErrors) return;\n    this.$el.addClass(this.errorClassName);\n\n    this._destroyErrorTooltip();\n    this._errorTooltip = this._createTooltip({\n      gravity: 'w',\n      className: 'is-error',\n      msg: msg,\n      offset: 5\n    });\n    this._errorTooltip.showTipsy();\n  },\n\n  // Changed original clearError function in order to remove\n  // the error tooltip\n  clearError: function () {\n    this.$el.removeClass(this.errorClassName);\n    this._destroyErrorTooltip();\n  },\n\n  _initClipboard: function () {\n    if (this._clipboard) {\n      this._clipboard.destroy();\n    }\n\n    var btn = this.$('.js-copy');\n    this._clipboard = new Clipboard(btn.get(0));\n  },\n\n  _createTooltip: function (opts) {\n    return new TipsyTooltipView({\n      el: opts.$el || this.$el,\n      gravity: opts.gravity || 's',\n      className: opts.className || '',\n      offset: opts.offset || 0,\n      title: function () {\n        return opts.msg || $(this).data('tooltip');\n      }\n    });\n  },\n\n  _destroyErrorTooltip: function () {\n    if (this._errorTooltip) {\n      this._errorTooltip.hideTipsy();\n      this._errorTooltip.destroyTipsy();\n    }\n  },\n\n  _destroyHelpTooltip: function () {\n    if (this._helpTooltip) {\n      this._helpTooltip.destroyTipsy();\n    }\n  },\n\n  _destroyClipboard: function () {\n    if (this._clipboard) {\n      this._clipboard.destroy();\n    }\n  },\n\n  // Changed original templateData function in order to add a\n  // new template attribute (hasNestedForm)\n  templateData: function () {\n    var schema = this.schema;\n    var type;\n\n    try {\n      type = this.form.schema[this.key].type;\n    } catch (e) {\n      type = undefined;\n    }\n\n    return {\n      help: schema.help || '',\n      isCopyButtonEnabled: this._isCopyButtonEnabled(),\n      hasNestedForm: this.editor.hasNestedForm,\n      title: schema.title,\n      fieldAttrs: schema.fieldAttrs,\n      editorAttrs: schema.editorAttrs,\n      key: this.key,\n      type: type,\n      editorId: this.editor.id,\n      editorType: this.editor.el.type\n    };\n  },\n\n  _isCopyButtonEnabled: function () {\n    return !!this.schema.hasCopyButton;\n  },\n\n  remove: function () {\n    this._destroyErrorTooltip();\n    this._destroyHelpTooltip();\n    this._destroyClipboard();\n    this.editor.remove();\n    Backbone.View.prototype.remove.call(this);\n  }\n\n}, {\n  template: require('./field.tpl'),\n  errorClassName: 'CDB-FieldError'\n});\n","var Backbone = require('backbone');\nvar _ = require('underscore');\n\n// overwirte template in order to be able to use flex\n/* eslint-disable */\nBackbone.Form.Fieldset.template = _.template('\\\n  <div class=\"Editor-fieldset\" data-fields>\\\n    <% if (legend) { %>\\\n      <legend><%= legend %></legend>\\\n    <% } %>\\\n  </div>\\\n');\n/* eslint-enable */\n","var Backbone = require('backbone');\n\nBackbone.Form = Backbone.Form.extend({\n\n  initialize: function (options) {\n    this.options = options;\n    Backbone.Form.Original.prototype.initialize.call(this, options);\n  },\n\n  createField: function (key, schema) {\n    var options = {\n      form: this,\n      key: key,\n      schema: schema,\n      idPrefix: this.idPrefix,\n      trackingClass: this.options.trackingClass\n    };\n\n    if (this.model) {\n      options.model = this.model;\n    } else if (this.data) {\n      options.value = this.data[key];\n    } else {\n      options.value = undefined;\n    }\n\n    var field = new this.Field(options);\n\n    this.listenTo(field.editor, 'all', this.handleEditorEvent);\n\n    return field;\n  }\n\n});\n","var _ = require('underscore');\n\nmodule.exports = {\n\n  setOptions: function (editor, options) {\n    var validators = [];\n\n    if (options.schema && options.schema.validators) {\n      validators = validators.concat(options.schema.validators);\n    }\n\n    if (editor.options && editor.options.validators) {\n      validators = validators.concat(editor.options.validators);\n    }\n\n    editor.validators = validators;\n    editor.options = this._getEditorOptions(editor, options, validators);\n\n    if (editor.options.className) {\n      editor.$el.addClass(editor.options.className);\n    }\n\n    if (editor.options.trackingClass) {\n      var trackClasses = editor.options.trackingClass + ' track-' + editor.options.key + editor.options.editorType;\n      editor.$el.addClass(trackClasses);\n    }\n  },\n\n  _editorAttrsFromBackboneFormSchema: function (options) {\n    return options.schema && options.schema.editorAttrs || {};\n  },\n\n  _getEditorOptions: function (editor, options, validators) {\n    var editorOptions = _.omit(editor.options, 'validators') || {};\n    var schema = options.schema;\n    var backboneFormSchema = this._editorAttrsFromBackboneFormSchema(options);\n    var editorAttrs = options.editorAttrs;\n    var optionKey = { keyAttr: options.key };\n    var optionValidators = { validators: validators };\n    var defaultOptions = _.omit(options, 'validators');\n\n    return _.extend(\n      {},\n      editorOptions,\n      schema,\n      backboneFormSchema,\n      editorAttrs,\n      optionKey,\n      optionValidators,\n      defaultOptions\n    );\n  }\n};\n","var $ = require('jquery');\nvar _ = require('underscore');\nvar Backbone = require('backbone');\nrequire('backbone-forms');\nrequire('rangeslider.js');\nBackbone.$ = $;\n\n// Custom validators\n_.extend(\n  Backbone.Form.validators,\n  {\n    columnType: require('./validators/column-type'),\n    interval: require('./validators/interval'),\n    requiredBoolean: require('./validators/required-boolean')\n  }\n);\n\nBackbone.Form.Original = Backbone.Form;\n\n// Requiring custom form components\nrequire('./form');\nrequire('./fieldset-template');\nrequire('./field');\nrequire('./editors/base');\nrequire('./editors/text');\nrequire('./editors/textarea');\nrequire('./editors/number/number');\nrequire('./editors/select/select-view');\nrequire('./editors/select/select-placeholder');\nrequire('./editors/select/multi-select-view');\nrequire('./editors/radio/radio');\nrequire('./editors/enabler/enabler-view');\nrequire('./editors/toggle/toggle');\nrequire('./editors/enabler-editor/enabler-editor-view');\nrequire('./editors/node-dataset/node-dataset-view');\nrequire('./editors/operators/operators-view');\nrequire('./editors/list/list');\nrequire('./editors/list/list-item');\nrequire('./editors/sortable-list');\nrequire('./editors/legend/category-item');\nrequire('./editors/slider/slider');\nrequire('./editors/fill/fill');\nrequire('./editors/fill-color/fill-color');\nrequire('./editors/size/size');\nrequire('./editors/taglist/taglist');\nrequire('./editors/datetime/datetime');\nrequire('./editors/select/suggest-view');\nrequire('./editors/code-editor');\nrequire('./editors/data-observatory-measurements/data-observatory-measurements-view');\nrequire('./editors/data-observatory-measurements/measurement-item');\nrequire('./editors/lazy-select/lazy-select-view');\n","var _ = require('underscore');\nvar Backbone = require('backbone');\n\nvar CustomForm = Backbone.Form.extend({\n  initialize: function (options) {\n    this.options = options;\n    Backbone.Form.Original.prototype.initialize.call(this, options);\n    this.listenTo(this.model, 'updateSchema', this.updateSchema);\n  },\n\n  updateSchema: function (schema) {\n    var newFields = _.keys(schema);\n    var currentFields = _.keys(this.schema);\n    var field;\n    var options;\n\n    // Remove all fields not present in the new schema\n    _.each(currentFields, function (key) {\n      if (schema[key] == null) {\n        this.fields[key].remove();\n        delete this.fields[key];\n      }\n    }, this);\n\n    // Creat all fields not present in the old schema\n    _.each(newFields, function (key) {\n      var fieldSchema = schema[key];\n      if (this.schema[key] == null) {\n        this.fields[key] = this.createField(key, fieldSchema);\n        this.renderAddedField(key);\n      } else {\n        // update schema for this field and render\n        field = this.fields[key];\n        options = _.extend({}, _.omit(field.editor.options, _.keys(schema[key])), {\n          schema: schema[key]\n        });\n\n        field.editor._popupManager && field.editor._popupManager.destroy();\n        field.editor._dialogView && field.editor._dialogView.clean();\n        field.editor.undelegateEvents();\n        if (field.editor._destroyBinds) {\n          field.editor._destroyBinds();\n        }\n        field.editor.initialize(options);\n        field.editor.delegateEvents();\n        field.editor.render();\n      }\n    }, this);\n\n    // update the schema\n    this.schema = _.extend({}, this.schema, schema);\n  },\n\n  renderAddedField: function (fieldKey) {\n    var self = this;\n    var fields = this.fields;\n    var $form = this.$el;\n    var $ = Backbone.$;\n\n    $form.find('[data-editors]').each(function (i, el) {\n      var $container = $(el);\n      var selection = $container.attr('data-editors');\n\n      if (_.isUndefined(selection)) return;\n\n      // Work out which fields to include\n      var keys = (selection === '*')\n        ? self.selectedFields || _.keys(fields)\n        : selection.split(',');\n\n      // Add them\n      _.each(keys, function (key) {\n        var field;\n        if (key === fieldKey) {\n          field = fields[key];\n          $container.append(field.editor.render().el);\n        }\n      });\n    });\n\n    // Render standalone fields\n    $form.find('[data-editors]').each(function (i, el) {\n      var $container = $(el);\n      var selection = $container.attr('data-editors');\n\n      if (_.isUndefined(selection)) return;\n\n      // Work out which fields to include\n      var keys = (selection === '*')\n        ? self.selectedFields || _.keys(fields)\n        : selection.split(',');\n\n      // Add them\n      _.each(keys, function (key) {\n        var field;\n        if (key === fieldKey) {\n          field = fields[key];\n          $container.append(field.editor.render().el);\n        }\n      });\n    });\n  }\n});\n\nmodule.exports = CustomForm;\n","module.exports = function (options) {\n  var type = options.columnType;\n  var collection = options.columnsCollection;\n\n  var error = {\n    type: options.type,\n    message: _t('components.backbone-forms.column-type-error', { columnType: type })\n  };\n\n  return function columnType (value) {\n    var column = collection.findWhere({ name: value });\n    var matchesType = column && column.get('type') === type;\n\n    if (!matchesType) return error;\n  };\n};\n","module.exports = function (opts) {\n  // get the min value\n  var minValue = parseFloat(opts.min) || 0;\n  var maxValue = parseFloat(opts.max) || 0;\n  var err = {\n    type: opts.type,\n    message: _t('components.backbone-forms.interval-error', { minValue: opts.min, maxValue: opts.max })\n  };\n  return function interval (value, attrs) {\n    var fieldValue = 0;\n\n    if (value === null || value === undefined || value === '') return err;\n\n    // check if the value is number\n    if (!isNaN(parseFloat(value)) && isFinite(value)) {\n      fieldValue = parseFloat(value);\n    }\n    if (minValue > fieldValue || maxValue < fieldValue) {\n      return err;\n    }\n  };\n};\n","/**\n * Adds a new validator for Boolean fields, based on Form.validators.required\n */\n\nmodule.exports = function (options) {\n  var err = {\n    type: 'required',\n    message: _t('components.backbone-forms.required-boolean-error')\n  };\n\n  return function required (value) {\n    if (value === undefined) return err;\n  };\n};\n","var $ = require('jquery');\nvar CoreView = require('backbone/core-view');\nvar iconTemplates = {};\n\nvar importAllIconTemplates = function () {\n  var templates = require.context('./templates', false, /\\.tpl$/);\n\n  templates.keys().forEach(function (template) {\n    iconTemplates[template] = templates(template);\n  });\n};\n\nimportAllIconTemplates();\n\nmodule.exports = CoreView.extend({\n  constructor: function (opts) {\n    this.placeholder = this._preinitializeWithPlaceholder(opts && opts.placeholder);\n    CoreView.prototype.constructor.call(this, opts);\n  },\n\n  initialize: function (opts) {\n    if (!opts || !opts.icon) throw new Error('An icon is required to render IconView');\n\n    this.icon = opts.icon;\n    this.iconTemplate = this._getIconTemplate(this.icon);\n\n    if (!this.iconTemplate) {\n      throw new Error('The selected icon does not have any available template');\n    }\n  },\n\n  render: function () {\n    this.$el.html(this.iconTemplate);\n\n    if (this.placeholder) {\n      this.placeholder.replaceWith(this.$el);\n    }\n\n    return this;\n  },\n\n  _getIconTemplate: function (icon) {\n    var iconTemplate = './' + this.icon + '.tpl';\n    return iconTemplates[iconTemplate];\n  },\n\n  _preinitializeWithPlaceholder: function (placeholderNode) {\n    if (!placeholderNode) {\n      return;\n    }\n\n    var placeholder = $(placeholderNode);\n    this.tagName = placeholder.prop('tagName');\n    this.className = placeholder.attr('class');\n\n    return placeholder;\n  }\n});\n","var $ = require('jquery');\nvar CoreView = require('backbone/core-view');\nvar utils = require('builder/helpers/utils');\nvar _ = require('underscore');\n\nvar IMAGE_DIM = 18;\nvar IMAGE_FILE_ATTRS = {\n  width: '18px',\n  height: '18px'\n};\n\nvar VIEWBOX = _.template('0 0 <%- w %> <%- h %>');\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    if (!opts.imageClass) { throw new Error('Image class is mandatory.'); }\n\n    this._imageClass = opts.imageClass;\n    this._imageURL = opts.imageUrl;\n    this._color = opts.color;\n\n    this._lastImage = {\n      url: null,\n      content: null\n    };\n  },\n\n  render: function () {\n    this.$el.empty();\n\n    this._loadImage();\n\n    return this;\n  },\n\n  _loadImage: function () {\n    if (!this._imageURL) { // the URL could be null or undefined\n      return;\n    }\n\n    var self = this;\n\n    if (this._isSVG(this._imageURL)) {\n      this._loadSVG();\n    } else {\n      var $img = $('<img crossorigin=\"anonymous\"/>');\n      $img.attr('class', self._imageClass + ' js-image');\n      $img.attr('src', this._imageURL + '?req=markup');\n\n      for (var attribute in IMAGE_FILE_ATTRS) {\n        $img.attr(attribute, IMAGE_FILE_ATTRS[attribute]);\n      }\n\n      this.$el.append($img);\n    }\n  },\n\n  _loadSVG: function () {\n    var self = this;\n\n    this._requestImageURL(this._imageURL, function (content) {\n      var svg = content.cloneNode(true);\n      var $svg = $(svg);\n      $svg = $svg.removeAttr('xmlns:a');\n      $svg.attr('class', self._imageClass + ' js-image');\n\n      var bbox = {\n        w: IMAGE_DIM,\n        h: IMAGE_DIM\n      };\n\n      if (!$svg.attr('viewBox')) {\n        if ($svg.attr('height') && $svg.attr('width')) {\n          bbox = {\n            w: svg.width.baseVal.value,\n            h: svg.height.baseVal.value\n          };\n        }\n\n        $svg.attr('viewBox', VIEWBOX(bbox));\n      }\n\n      for (var attribute in IMAGE_FILE_ATTRS) {\n        $svg.attr(attribute, IMAGE_FILE_ATTRS[attribute]);\n      }\n\n      self.$el.append($svg);\n\n      $svg.css('fill', self._color);\n      $svg.find('g').css('fill', 'inherit');\n      $svg.find('path').css('fill', 'inherit');\n      $svg.find('rect').each(function (_, rect) {\n        var $rect = $(rect);\n        if ($rect.css('fill') !== 'none') {\n          $rect.css('fill', 'inherit');\n        }\n      });\n    });\n  },\n\n  _requestImageURL: function (url, callback) {\n    var self = this;\n    var completeUrl = url + '?req=ajax';\n\n    if (this._lastImage.url === completeUrl) {\n      callback && callback(this._lastImage.content);\n    } else {\n      $.ajax(completeUrl)\n        .done(function (data) {\n          self._lastImage.url = completeUrl;\n          var content = self._lastImage.content = data.getElementsByTagName('svg')[0];\n          callback && callback(content);\n        })\n        .fail(function () {\n          throw new Error(\"Couldn't get \" + completeUrl + ' file.');\n        });\n    }\n  },\n\n  updateImageColor: function (color) {\n    this.$('.js-image').css('fill', color);\n  },\n\n  _isSVG: function (url) {\n    if (!url) {\n      return false;\n    }\n    var noQueryString = url.split('?')[0];\n    return noQueryString && utils.endsWith(noQueryString.toUpperCase(), 'SVG');\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'infoboxModel',\n  'infoboxCollection'\n];\n\nmodule.exports = CoreView.extend({\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._initBinds();\n    this._setSelectedModel();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._infoboxModel, 'change:state', this._onChangeState);\n    this.listenTo(this._infoboxModel, 'change:visible', this.render);\n  },\n\n  _initViews: function () {\n    var createContentView;\n\n    if (this._selectedModel) {\n      createContentView = this._selectedModel.get('createContentView');\n      this.infoboxView = createContentView();\n      this.$el.append(this.infoboxView.render().el);\n      this.addView(this.infoboxView);\n      this._initSubviewBinds();\n    }\n  },\n\n  _setSelectedModel: function () {\n    var state = this._infoboxModel.get('state');\n    this._selectedModel = this._infoboxCollection.setSelected(state);\n  },\n\n  _onChangeState: function () {\n    this._setSelectedModel();\n    this.render();\n  },\n\n  _initSubviewBinds: function () {\n    this.listenTo(this.infoboxView, 'action:main', this._onAction);\n    this.listenTo(this.infoboxView, 'action:close', this._onClose);\n  },\n\n  _onAction: function () {\n    var action = this._selectedModel.get('onAction');\n    action && action();\n  },\n\n  _onClose: function () {\n    var action = this._selectedModel.get('onClose');\n    if (action) {\n      action();\n    } else {\n      // if no action associated, we still need to hide the infobox\n      this._infoboxModel.set('state', null);\n    }\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar REQUIRED_OPTS = [\n  'template',\n  'onEdit',\n  'renderOptions'\n];\n\nvar DBLCLICK_TIMEOUT = 200;\nvar clicks = 0;\nvar ESCAPE_KEY_CODE = 27;\nvar ENTER_KEY_CODE = 13;\n\nmodule.exports = CoreView.extend({\n  events: {\n    'blur .js-input': 'blur',\n    'keyup .js-input': '_onKeyUpInput'\n  },\n\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (!opts[item]) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n\n    this._onClickHandler = this._onClickHandler.bind(this);\n    this.edit = this.edit.bind(this);\n    this.save = _.debounce(this.save, 200, true);\n\n    this._timeout = opts.timeout || DBLCLICK_TIMEOUT;\n  },\n\n  render: function () {\n    this._unbindEvents();\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n    this._initBinds();\n    return this;\n  },\n\n  _initBinds: function () {\n    if (this.options.onClick) {\n      this._onClick = this.options.onClick;\n      this._title().on('click', this._onClickHandler);\n    } else {\n      this._title().on('dblclick', this.edit);\n    }\n  },\n\n  _unbindEvents: function () {\n    var $title = this._title();\n    $title && $title.off('click dblclick');\n  },\n\n  _onClickHandler: function (e) {\n    var self = this;\n    clicks++;\n    if (clicks === 1) {\n      setTimeout(function () {\n        if (clicks === 1) {\n          self._onClick && self._onClick(e);\n        } else {\n          self.edit();\n        }\n        clicks = 0;\n      }, this._timeout);\n    }\n  },\n\n  _initViews: function () {\n    this.$el.append(this._template(this._renderOptions));\n    this.setElement(this.$('.Inline-editor'));\n  },\n\n  _backupText: function () {\n    this._oldText = this.$('.js-title').text();\n  },\n\n  _restoreText: function () {\n    this.$('.js-input').val(this._oldText);\n  },\n\n  edit: function () {\n    this._backupText();\n    this.$('.js-input').val(this._oldText);\n    this.$('.js-input').prop('readonly', false).show().focus();\n    this.$('.js-input').get(0).setSelectionRange(0, this.$('.js-input').val().length);\n  },\n\n  getValue: function () {\n    return this.$('.js-input').val();\n  },\n\n  _title: function () {\n    return this.$('.js-title');\n  },\n\n  hide: function () {\n    this.$('.js-input').prop('readonly', true).hide();\n  },\n\n  blur: function () {\n    this.save();\n    this.hide();\n  },\n\n  save: function () {\n    var value = this.getValue();\n\n    if (value !== this._oldText && !_.isEmpty(value)) {\n      this._onEdit && this._onEdit(value);\n    }\n  },\n\n  clean: function () {\n    this._unbindEvents();\n    CoreView.prototype.clean.call(this);\n  },\n\n  _onKeyUpInput: function (e) {\n    if (e.which === ESCAPE_KEY_CODE) {\n      this._restoreText();\n      this.hide();\n    }\n\n    if (e.which === ENTER_KEY_CODE) {\n      this.$('.js-input').blur();\n      this.save();\n    }\n  }\n});\n","var Backbone = require('backbone');\nvar _ = require('underscore');\n\nvar INPUT_TYPE_ORDER = ['color', 'image'];\n\nmodule.exports = Backbone.Collection.extend({\n  constructor: function (models, options) {\n    options = _.extend(options || {}, { silent: false });\n    Backbone.Collection.prototype.constructor.call(this, models, options);\n  },\n\n  comparator: function (model) {\n    return INPUT_TYPE_ORDER.indexOf(model.get('type'));\n  },\n\n  initialize: function () {\n    this.bind('change', this._onModelsChanged, this);\n    this.bind('change:selected', this._onSelectedChange, this);\n  },\n\n  getSelected: function () {\n    return this.find(function (model) {\n      return model.get('selected');\n    });\n  },\n\n  unselect: function () {\n    this.each(function (model) {\n      model.set('selected', false);\n    }, this);\n  },\n\n  _onSelectedChange: function (itemModel, isSelected) {\n    if (!isSelected) {\n      return;\n    }\n\n    this.each(function (model) {\n      if (model !== itemModel) {\n        model.set('selected', false);\n      }\n    }, this);\n  },\n\n  _onModelsChanged: function (model) {\n    var modelChanges = model.changed;\n\n    if (_.isEmpty(modelChanges) || _.size(modelChanges) === 1 && model.changed.hasOwnProperty('selected')) {\n      return;\n    }\n\n    this.trigger('onInputChanged', model);\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar template = require('./asset-header-view.tpl');\n\nvar REQUIRED_OPTS = [\n  'title',\n  'editable'\n];\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-remove': '_onClickRemove',\n    'click .js-select-all': '_onClickSelectAll',\n    'click .js-deselect-all': '_onClickDeselectAll'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._assetsCollection = this.options.assetsCollection;\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    var selectedCount = this._getSelectedAssetsCount();\n\n    var assetsCount = this._assetsCollection.size();\n\n    this.$el.html(template({\n      title: this._title,\n      editable: this._editable,\n      assetsCount: assetsCount,\n      selectedCount: selectedCount,\n      allSelected: selectedCount === assetsCount\n    }));\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._assetsCollection, 'add change remove', this.render);\n  },\n\n  _onClickRemove: function () {\n    this.trigger('remove');\n  },\n\n  _onClickSelectAll: function () {\n    this.trigger('select-all');\n  },\n\n  _onClickDeselectAll: function () {\n    this.trigger('deselect-all');\n  },\n\n  _getSelectedAssetsCount: function () {\n    var selectedAssets = this._assetsCollection.where({ state: 'selected' });\n    return selectedAssets ? selectedAssets.length : 0;\n  }\n});\n","var CoreView = require('backbone/core-view');\n\nvar template = require('./asset-item-view.tpl');\n\nvar ASSET_HEIGHT = 24;\n\nmodule.exports = CoreView.extend({\n  tagName: 'li',\n  className: 'AssetsList-item AssetsList-item--medium',\n\n  events: {\n    'click .js-asset': '_onClick'\n  },\n\n  initialize: function (opts) {\n    this.listenTo(this.model, 'change:state', this._changeState);\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this.$el.attr('id', this.model.get('id'));\n\n    var type = this.model.get('type') || 'icon';\n\n    this.$el.append(template({\n      type: type,\n      height: this.options.assetHeight || ASSET_HEIGHT,\n      name: this.model.get('name'),\n      public_url: this.model.get('public_url')\n    }));\n\n    this.$el.addClass('AssetsList-item--' + type);\n\n    return this;\n  },\n\n  _onClick: function (e) {\n    this.killEvent(e);\n    this.trigger('selected', this.model);\n  },\n\n  _changeState: function () {\n    this.$el.toggleClass('is-selected', this.model.get('state') === 'selected');\n  }\n});\n","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar StaticAssetItemView = require('./static-asset-item-view');\nvar StaticAssetsCollection = require('builder/data/static-assets-collection');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'icons',\n  'selectedAsset'\n];\n\nmodule.exports = CoreView.extend({\n  tagName: 'ul',\n  className: 'AssetsList',\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n    this._setupAssets(opts);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this._renderAssets();\n    return this;\n  },\n\n  _renderAssets: function () {\n    this._assetsCollection.each(function (mdl) {\n      var item = new StaticAssetItemView({\n        model: mdl\n      });\n\n      if (this.model && item.model.getURLFor(mdl.get('icon')) === this.model.get('image')) {\n        item.model.set('state', 'selected');\n      }\n\n      item.bind('selected', this._selectItem, this);\n\n      this.$el.append(item.render().el);\n      this.addView(item);\n    }, this);\n  },\n\n  _setupAssets: function (opts) {\n    if (!_.isEmpty(opts)) {\n      this._icons = _.map(this._icons, function (asset) {\n        return _.extend(asset, opts);\n      });\n    }\n\n    var assets = this._icons;\n\n    if (this.options.limit) {\n      assets = assets.slice(0, this.options.limit);\n    }\n\n    this._assetsCollection = new StaticAssetsCollection(assets);\n    this.add_related_model(this._assetsCollection);\n  },\n\n  _selectItem: function (m) {\n    this._selectedAsset.set({\n      url: m.get('public_url'),\n      kind: m.get('kind')\n    });\n\n    this._assetsCollection.deselectAll(m);\n  }\n});\n","var $ = require('jquery');\nvar _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar Backbone = require('backbone');\n\nvar Utils = require('builder/helpers/utils');\nvar MakiIcons = require('builder/components/input-color/assets/maki-icons');\nvar UserAssetsView = require('./user-assets-tab');\nvar OrganizationAssetsListView = require('./organization-assets-list-view');\nvar OrganizationAssetsCollection = require('builder/data/organization-assets-collection');\nvar UploadAssetsView = require('./upload-assets-tab');\n\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar AssetsCollection = require('builder/data/assets-collection');\nvar createTextLabelsTabPane = require('builder/components/tab-pane/create-text-labels-tab-pane');\nvar ScrollView = require('builder/components/scroll/scroll-view');\nvar AssetsListView = require('./assets-list-view');\nvar loadingView = require('builder/components/loading/render-loading');\n\nvar ErrorView = require('builder/components/error/error-view');\nvar errorTemplate = require('./upload-assets-error.tpl');\nvar errorParser = require('builder/helpers/error-parser');\n\nvar template = require('./assets-view.tpl');\nvar tabPaneTemplate = require('./tab-pane-template.tpl');\n\nvar KIND = 'custom-marker';\n\nvar REQUIRED_OPTS = [\n  'modalModel',\n  'configModel',\n  'userModel'\n];\n\nmodule.exports = CoreView.extend({\n  className: 'Dialog-content Dialog-content--expanded',\n\n  events: {\n    'click .js-add': '_onSetImage',\n    'click .js-upload': '_initUpload',\n    'change .js-fileInput': '_onFileSelected',\n    'click .js-back': '_onClickBack'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._initModels();\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template({\n      disclaimer: MakiIcons.disclaimer\n    }));\n\n    if (this._hasFetchedAllCollections()) {\n      this._initTabPane();\n    } else if (this._isLoading()) {\n      this._renderLoading();\n    } else if (this._hasError()) {\n      this._renderError();\n    }\n    return this;\n  },\n\n  _hasFetchedAllCollections: function () {\n    return this._stateModel.get('status') === 'show';\n  },\n\n  _initModels: function () {\n    var self = this;\n\n    this._selectedAsset = new Backbone.Model({\n      url: this.model.get('image')\n    });\n\n    this._stateModel = new Backbone.Model({\n      status: 'loading',\n      modalEnabled: false,\n      uploads: 0\n    });\n\n    this._assetCollections = [];\n\n    this._userAssetCollection = new AssetsCollection(null, {\n      configModel: this._configModel,\n      userModel: this._userModel\n    });\n\n    this._assetCollections.push(this._userAssetCollection);\n\n    if (this._userModel.isInsideOrg()) {\n      this._organizationAssetCollection = new OrganizationAssetsCollection(null, {\n        configModel: this._configModel,\n        orgId: this._userModel.getOrganization().get('id')\n      });\n      this._assetCollections.push(this._organizationAssetCollection);\n    }\n\n    var onFetchAssetCollections = _.invoke(this._assetCollections, 'fetch');\n    $.when.apply($, onFetchAssetCollections)\n      .then(function () {\n        self._stateModel.set('status', 'show');\n      }, function (model, response) {\n        self._setError(response);\n      });\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._selectedAsset, 'change:url', this._onChangeSelectedAsset);\n    this.listenTo(this._stateModel, 'change:status', this.render);\n    this.listenTo(this._stateModel, 'change:modalEnabled', this._onChangeSetButton);\n  },\n\n  _onClickBack: function (e) {\n    this.killEvent(e);\n    this._stateModel.set('status', 'show');\n    this._assetsTabPaneView.setSelectedTabPaneByName('upload-file');\n  },\n\n  _upload: function (data) {\n    this._userAssetCollection.create(data, {\n      beforeSend: this._beforeAssetUpload.bind(this),\n      success: this._onAssetUploaded.bind(this),\n      error: this._onAssetUploadError.bind(this),\n      complete: this._onAssetUploadComplete.bind(this)\n    });\n  },\n\n  _renderError: function () {\n    this._hideDisclaimer();\n\n    this.$('.js-body').html(\n      new ErrorView({\n        title: Utils.capitalize(this._stateModel.get('error_message')),\n        desc: _t('components.modals.assets-picker.error-desc'),\n        template: errorTemplate\n      }).render().el\n    );\n  },\n\n  _renderLoading: function () {\n    this._hideDisclaimer();\n\n    this.$('.js-body').html(\n      loadingView({\n        title: _t('components.modals.assets-picker.loading')\n      })\n    );\n  },\n\n  _isLoading: function () {\n    return this._stateModel.get('status') === 'loading';\n  },\n\n  _hasError: function () {\n    return this._stateModel.get('status') === 'error';\n  },\n\n  _initTabPane: function () {\n    var tabPaneTabs = [{\n      name: 'maki-icons',\n      label: _t('components.modals.add-asset.icons'),\n      createContentView: this._createMakiIconsView.bind(this)\n    }, {\n      name: 'your-uploads',\n      label: _t('components.modals.add-asset.your-uploads'),\n      createContentView: this._createYourUploadsView.bind(this)\n    }];\n\n    if (this._userModel.isInsideOrg() && this._organizationAssetCollection.length > 0) {\n      tabPaneTabs.push({\n        name: 'organization-uploads',\n        label: _t('components.modals.add-asset.organization-uploads'),\n        createContentView: this._createOrganizationUploadsView.bind(this)\n      });\n    }\n\n    tabPaneTabs.push({\n      name: 'upload-file',\n      label: _t('components.modals.add-asset.upload-file'),\n      createContentView: this._createUploadFileView.bind(this)\n    });\n\n    var tabPaneOptions = {\n      tabPaneOptions: {\n        template: tabPaneTemplate,\n        disclaimer: MakiIcons.disclaimer,\n        tabPaneItemOptions: {\n          tagName: 'li',\n          klassName: 'CDB-NavMenu-item'\n        }\n      },\n      tabPaneItemLabelOptions: {\n        tagName: 'button',\n        className: 'CDB-NavMenu-link u-upperCase'\n      }\n    };\n\n    this._assetsTabPaneView = createTextLabelsTabPane(tabPaneTabs, tabPaneOptions);\n    this.listenTo(this._assetsTabPaneView.collection, 'change', this._onChangeSelectedTab);\n\n    this.addView(this._assetsTabPaneView);\n    this.$('.js-body').append(this._assetsTabPaneView.render().el);\n\n    this._initSetButtonState();\n  },\n\n  _onChangeSelectedTab: function () {\n    switch (this._assetsTabPaneView.getSelectedTabPaneName()) {\n      case 'maki-icons':\n        this._setDisclaimer(MakiIcons.disclaimer);\n        this._toggleSetButton();\n        break;\n      case 'upload-file':\n        this._hideDisclaimer();\n        this._disableSetButton();\n        break;\n      default:\n        this._hideDisclaimer();\n        this._toggleSetButton();\n        break;\n    }\n  },\n\n  _toggleSetButton: function () {\n    this._stateModel.set('modalEnabled', this._selectedAsset.get('url') !== undefined);\n  },\n\n  _initSetButtonState: function () {\n    if (!this.model.get('image')) {\n      return;\n    }\n\n    var selectedAssetExist = false;\n\n    if (this.model.get('kind') === 'marker') {\n      selectedAssetExist = true;\n    }\n\n    if (!selectedAssetExist) {\n      _.each(this._assetCollections, function (assetCollection) {\n        if (!selectedAssetExist) {\n          selectedAssetExist = assetCollection.some(function (mdl) {\n            return this.model.get('image') === mdl.get('public_url');\n          }, this);\n        }\n      }, this);\n    }\n\n    if (selectedAssetExist) {\n      this._enableSetButton();\n    }\n  },\n\n  _enableSetButton: function () {\n    this._stateModel.set('modalEnabled', true);\n  },\n\n  _disableSetButton: function () {\n    this._stateModel.set('modalEnabled', false);\n  },\n\n  _createYourUploadsView: function () {\n    var view = new UserAssetsView({\n      model: this.model,\n      selectedAsset: this._selectedAsset,\n      title: _t('components.modals.add-asset.your-uploads'),\n      organizationAssetCollection: this._organizationAssetCollection,\n      userAssetCollection: this._userAssetCollection,\n      userModel: this._userModel\n    }).bind(this);\n\n    this._userAssetsView = view;\n\n    view.bind('init-upload', this._initUpload, this);\n\n    this._hideDisclaimer();\n\n    return this._userAssetsView;\n  },\n\n  _createOrganizationUploadsView: function () {\n    var view = new ScrollView({\n      createContentView: function () {\n        return new OrganizationAssetsListView({\n          title: _t('components.modals.add-asset.organization-uploads'),\n          model: this.model,\n          organizationAssetCollection: this._organizationAssetCollection,\n          userAssetCollection: this._userAssetCollection,\n          selectedAsset: this._selectedAsset\n        });\n      }.bind(this)\n    });\n\n    this._hideDisclaimer();\n\n    return view;\n  },\n\n  _createUploadFileView: function () {\n    var view = new UploadAssetsView({\n      model: this.model,\n      userModel: this._userModel,\n      configModel: this._configModel\n    }).bind(this);\n\n    view.bind('upload-complete', this._onUploadComplete, this);\n    view.bind('upload-files', this._uploadFiles, this);\n    view.bind('upload-url', this._uploadURL, this);\n    return view;\n  },\n\n  _createMakiIconsView: function () {\n    return new ScrollView({\n      createContentView: function () {\n        return new AssetsListView({\n          model: this.model,\n          selectedAsset: this._selectedAsset,\n          title: _t('components.modals.add-asset.maki-icons'),\n          icons: MakiIcons.icons,\n          folder: 'maki-icons',\n          kind: 'marker',\n          size: '18'\n        });\n      }.bind(this)\n    });\n  },\n\n  _onUploadComplete: function () {\n    this._assetsTabPaneView.setSelectedTabPaneByName('your-uploads');\n  },\n\n  _onChangeSetButton: function () {\n    this.$('.js-add').toggleClass('is-disabled', !this._stateModel.get('modalEnabled'));\n  },\n\n  _onChangeSelectedAsset: function () {\n    if (!this._selectedAsset.get('url')) {\n      this.model.unset('image');\n      this.model.unset('kind');\n    }\n\n    this._stateModel.set('modalEnabled', !!this._selectedAsset.get('url'));\n  },\n\n  _initUpload: function (e) {\n    this.killEvent(e);\n    this.$('.js-fileInput').click();\n  },\n\n  _setDisclaimer: function (disclaimer) {\n    this.$('.js-disclaimer').html(disclaimer);\n  },\n\n  _hideDisclaimer: function () {\n    this.$('.js-disclaimer').html('');\n  },\n\n  _getSelectedFiles: function () {\n    return this.$('.js-fileInput').prop('files');\n  },\n\n  _uploadURL: function (url) {\n    this._upload({\n      type: 'url',\n      kind: KIND,\n      url: url\n    });\n  },\n\n  _uploadFiles: function (files) {\n    _.each(files, function (file) {\n      this._upload({\n        kind: KIND,\n        type: 'file',\n        filename: file\n      });\n    }, this);\n  },\n\n  _onFileSelected: function () {\n    this._uploadFiles(this._getSelectedFiles());\n  },\n\n  _beforeAssetUpload: function () {\n    this._stateModel.set('uploads', this._stateModel.get('uploads') + 1);\n\n    if (this._stateModel.get('uploads') > 0) {\n      this._stateModel.set('status', 'loading');\n    }\n  },\n\n  _onAssetUploaded: function (iconModel) {\n    this._resetFileSelection();\n  },\n\n  _setError: function (error) {\n    this._stateModel.set({\n      error_message: errorParser(error),\n      status: 'error'\n    });\n  },\n\n  _onAssetUploadError: function (model, response) {\n    this._userAssetCollection.remove(model);\n    this._resetFileSelection();\n    this._setError(response);\n  },\n\n  _onAssetUploadComplete: function () {\n    this._stateModel.set('uploads', this._stateModel.get('uploads') - 1);\n\n    if (this._stateModel.get('uploads') < 1 && !this._hasError()) {\n      this._stateModel.set('status', 'show');\n      this._onUploadComplete();\n    }\n  },\n\n  _resetFileSelection: function () {\n    this.$('.js-fileInput').val('');\n  },\n\n  _onSetImage: function (e) {\n    this.killEvent(e);\n\n    if (!this._stateModel.get('modalEnabled')) {\n      return;\n    }\n\n    this.model.set({\n      image: this._selectedAsset.get('url'), // backend serves the url of the asset in `image`\n      kind: this._selectedAsset.get('kind')\n    });\n\n    this.trigger('change', {\n      url: this._selectedAsset.get('url'),\n      kind: this._selectedAsset.get('kind')\n    }, this);\n\n    this._modalModel.destroy(this.model);\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar template = require('./input-asset-picker-header.tpl');\nvar ImageLoaderView = require('builder/components/img-loader-view');\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-back': '_onClickBack',\n    'click .js-colorPicker': '_onClickColorPicker'\n  },\n\n  initialize: function (opts) {\n    this._imageEnabled = opts.imageEnabled;\n\n    this._initBinds();\n  },\n\n  render: function (model, options) {\n    this.clearSubViews();\n    this.$el.empty();\n\n    var rampItem = this._getRampItem();\n\n    this.$el.append(template({\n      index: this.model.get('index') || 0,\n      color: rampItem.color || '',\n      label: rampItem.title || _t('form-components.editors.fill.input-qualitative-ramps.others'),\n      image: rampItem.image || '',\n      imageEnabled: this._imageEnabled\n    }));\n\n    this._loadImages();\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.model, 'change:image', this.render);\n  },\n\n  _getRampItem: function () {\n    var ramp = this.model.get('ramp');\n\n    if (!ramp) {\n      return {\n        color: '',\n        title: _t('form-components.editors.fill.input-qualitative-ramps.others'),\n        image: ''\n      };\n    }\n\n    return ramp[this.model.get('index')];\n  },\n\n  _loadImages: function () {\n    var rampItem = this._getRampItem();\n\n    this.iconView = new ImageLoaderView({\n      imageClass: 'CDB-Text u-actionTextColor js-assetPicker',\n      imageUrl: rampItem.image,\n      color: rampItem.color\n    });\n    this.addView(this.iconView);\n    this.$('.js-image-container').append(this.iconView.render().el);\n  },\n\n  _onClickBack: function (ev) {\n    this.killEvent(ev);\n    this.trigger('back', this);\n  },\n\n  _onClickColorPicker: function (ev) {\n    this.killEvent(ev);\n    this.trigger('goToColorPicker', this);\n  }\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar template = require('./input-asset-picker-view.tpl');\nvar InputAssetPickerHeader = require('./input-asset-picker-header');\nvar InputAssetPickerView = require('builder/components/input-color/input-color-file-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar REQUIRED_OPTS = [\n  'configModel',\n  'modals',\n  'ramp',\n  'userModel'\n];\n\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n    this._imageEnabled = opts.imageEnabled;\n\n    this.model = new Backbone.Model({\n      index: this.options.index,\n      ramp: opts.ramp\n    });\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template());\n    this._initViews();\n    return this;\n  },\n\n  _initViews: function () {\n    this._headerView = new InputAssetPickerHeader({\n      model: this.model,\n      imageEnabled: this._imageEnabled\n    });\n    this._headerView.bind('goToColorPicker', this._onGoToColorPicker, this);\n    this._headerView.bind('back', this._onClickBack, this);\n    this.$('.js-header').append(this._headerView.render().el);\n    this.addView(this._headerView);\n\n    this._assetPicker = new InputAssetPickerView({\n      model: this.model,\n      userModel: this._userModel,\n      configModel: this._configModel,\n      modals: this._modals,\n      imageEnabled: this._imageEnabled\n    });\n    this._assetPicker.bind('change', _.debounce(this._onChangeImage, 50), this);\n    this.$('.js-content').append(this._assetPicker.render().el);\n    this.addView(this._assetPicker);\n  },\n\n  _getRampItem: function () {\n    var ramp = this.model.get('ramp');\n\n    if (!ramp) {\n      return {\n        color: '',\n        title: _t('form-components.editors.fill.input-qualitative-ramps.others'),\n        image: ''\n      };\n    }\n\n    return ramp[this.model.get('index')];\n  },\n\n  _onChangeImage: function (data) {\n    var url = data && data.url || '';\n    var kind = data && data.kind || '';\n\n    this._getRampItem().image = url;\n    this.model.trigger('change:image');\n\n    this.trigger('change:image', {\n      url: url,\n      kind: kind,\n      index: this.model.get('index')\n    }, this);\n  },\n\n  _onClickBack: function (e) {\n    this.killEvent(e);\n    this.trigger('back', this);\n  },\n\n  _onGoToColorPicker: function (e) {\n    this.killEvent(e);\n    this.trigger('goToColorPicker', this);\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar AssetItemView = require('./asset-item-view');\nvar template = require('./organization-assets-list-view.tpl');\n\nvar REQUIRED_OPTS = [\n  'userAssetCollection',\n  'organizationAssetCollection',\n  'selectedAsset'\n];\n\nvar KIND = 'custom-marker';\nvar ASSET_HEIGHT = 48;\n\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template);\n\n    this._organizationAssetCollection.deselectAll();\n    this._organizationAssetCollection.each(this._renderAsset, this);\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._organizationAssetCollection, 'reset', this.render);\n    this.listenTo(this._organizationAssetCollection, 'change', this._onChangeAssets);\n  },\n\n  _getSelectedAsset: function () {\n    var selectedAssets = this._organizationAssetCollection.where({ state: 'selected' });\n    return selectedAssets && selectedAssets[0];\n  },\n\n  _renderAsset: function (assetModel) {\n    var assetItemView = new AssetItemView({\n      model: assetModel,\n      assetHeight: ASSET_HEIGHT,\n      selectedAsset: this._selectedAsset\n    });\n\n    if (assetModel.get('public_url') === this.model.get('image')) {\n      assetModel.set('state', 'selected');\n    }\n\n    assetItemView.bind('selected', this._selectAsset, this);\n\n    this.$('.js-assets').append(assetItemView.render().el);\n    this.addView(assetItemView);\n  },\n\n  _onChangeAssets: function () {\n    var selectedAsset = this._getSelectedAsset();\n\n    this._selectedAsset.set({\n      url: selectedAsset && selectedAsset.get('public_url'),\n      kind: KIND\n    });\n  },\n\n  _selectAsset: function (m) {\n    m.set('state', 'selected');\n\n    this._organizationAssetCollection.deselectAll(m);\n    this._userAssetCollection.deselectAll();\n  }\n\n});\n","var CoreView = require('backbone/core-view');\nvar template = require('./static-asset-item-view.tpl');\n\nvar AssetStates = {\n  SELECTED: 'selected'\n};\n\nmodule.exports = CoreView.extend({\n  tagName: 'li',\n  className: 'AssetsList-item AssetsList-item--medium',\n\n  events: {\n    'click .js-asset': '_onClick'\n  },\n\n  initialize: function () {\n    this.listenTo(this.model, 'change:state', this._changeState);\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this.$el.append(template({\n      type: 'icon',\n      name: this.model.get('name'),\n      public_url: this.model.get('public_url')\n    }));\n    return this;\n  },\n\n  _onClick: function (e) {\n    this.killEvent(e);\n    this.trigger(AssetStates.SELECTED, this.model);\n    this.model.set('state', AssetStates.SELECTED);\n  },\n\n  _changeState: function () {\n    this.$el.toggleClass('is-selected', this.model.get('state') === AssetStates.SELECTED);\n  }\n});\n","require('dragster');\nvar Dropzone = require('dropzone');\nvar $ = require('jquery');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar Utils = require('builder/helpers/utils');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar AssetsCollection = require('builder/data/assets-collection');\nvar template = require('./upload-assets-tab.tpl');\n\nvar REQUIRED_OPTS = [\n  'configModel',\n  'userModel'\n];\n\nmodule.exports = CoreView.extend({\n  className: 'Form-modal',\n\n  events: {\n    'keyup .js-url': '_onURLChanged',\n    'click .js-submit': '_onClickSubmit'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._stateModel = new Backbone.Model({\n      status: 'show',\n      uploads: 0\n    });\n\n    this.listenTo(this._stateModel, 'change:status', this.render);\n\n    this._assetCollection = new AssetsCollection(\n      null, {\n        configModel: this._configModel,\n        userModel: this._userModel\n      }\n    );\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this.$el.html(template());\n    this._initDropzone();\n\n    return this;\n  },\n\n  _initDropzone: function () {\n    var el = $('html')[0];\n    var self = this;\n\n    this.dragster = new Dragster(el); // eslint-disable-line\n\n    $(el).bind('dragster:enter', function (e) {\n      self._showDropzone();\n    });\n\n    $(el).bind('dragster:leave', function (e) {\n      self._hideDropzone();\n    });\n\n    if (el.dropzone) { // avoid loading the dropzone twice\n      return;\n    }\n\n    this.dropzone = new Dropzone(el, {\n      url: ':)',\n      autoProcessQueue: false,\n      previewsContainer: false\n    });\n\n    this.dropzone.on('dragover', function () {\n      self._showDropzone();\n    });\n\n    this.dropzone.on('drop', function (e) {\n      self.trigger('upload-files', e.dataTransfer.files);\n      self._hideDropzone();\n    });\n  },\n\n  _showDropzone: function () {\n    this.$('.Form-upload').addClass('is-dropping');\n  },\n\n  _hideDropzone: function () {\n    this.$('.Form-upload').removeClass('is-dropping');\n  },\n\n  _destroyDropzone: function () {\n    var el = $('html')[0];\n\n    if (this.dragster) {\n      this.dragster.removeListeners();\n      this.dragster.reset();\n      $(el).unbind('dragster:enter dragster:leave');\n    }\n\n    if (this.dropzone) {\n      this.dropzone.destroy();\n    }\n  },\n\n  _hasError: function () {\n    return this._stateModel.get('status') === 'error';\n  },\n\n  _onClickSubmit: function (e) {\n    this.killEvent(e);\n\n    var url = this._getURL();\n\n    if (!url) {\n      this._hideURLError();\n      return;\n    } else if (!Utils.isURL(url)) {\n      this._showURLError();\n      return;\n    } else {\n      this._hideURLError();\n    }\n\n    this.trigger('upload-url', url);\n  },\n\n  _getURL: function () {\n    return this.$('.js-url').val();\n  },\n\n  _onURLChanged: function () {\n    var url = this._getURL();\n\n    if (!url) {\n      this._hideURLError();\n    } else if (!Utils.isURL(url)) {\n      this._showURLError();\n    } else {\n      this._hideURLError();\n    }\n  },\n\n  _showURLError: function () {\n    this.$('.js-url-error').addClass('is-visible');\n  },\n\n  _hideURLError: function () {\n    this.$('.js-url-error').removeClass('is-visible');\n  },\n\n  clean: function () {\n    this._destroyDropzone();\n    CoreView.prototype.clean.apply(this);\n  }\n});\n","var $ = require('jquery');\nvar _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar AssetItemView = require('./asset-item-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar Backbone = require('backbone');\nvar loadingView = require('builder/components/loading/render-loading');\nvar AssetHeaderView = require('./asset-header-view');\n\nvar ErrorView = require('builder/components/error/error-view');\nvar errorTemplate = require('./upload-assets-error.tpl');\nvar template = require('./user-assets-list-view.tpl');\n\nvar REQUIRED_OPTS = [\n  'userModel',\n  'userAssetCollection',\n  'selectedAsset'\n];\n\nvar KIND = 'custom-marker';\nvar ASSET_HEIGHT = 48;\n\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    if (this._userModel.isInsideOrg()) {\n      if (!opts.organizationAssetCollection) throw new Error('organizationAssetCollection is required');\n\n      this._organizationAssetCollection = opts.organizationAssetCollection;\n    }\n\n    this._stateModel = new Backbone.Model();\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template);\n\n    if (this._isLoading()) {\n      this._renderLoading();\n    } else if (this._hasError()) {\n      this._renderError();\n    } else {\n      this._renderRegularView();\n    }\n\n    return this;\n  },\n\n  _addHeaderView: function () {\n    this._assetHeaderView = new AssetHeaderView({\n      editable: true,\n      title: this.options.title,\n      assetsCollection: this._userAssetCollection\n    });\n\n    this.addView(this._assetHeaderView);\n    this.$('.js-nav').append(this._assetHeaderView.render().el);\n\n    this._assetHeaderView.bind('select-all', this._selectAllAssets, this);\n    this._assetHeaderView.bind('deselect-all', this._deselectAllAssets, this);\n    this._assetHeaderView.bind('remove', this._removeSelectedAssets, this);\n  },\n\n  _renderRegularView: function () {\n    this._addHeaderView();\n    this._renderAddButton();\n\n    this._userAssetCollection.deselectAll();\n    this._userAssetCollection.each(this._renderAsset, this);\n  },\n\n  _renderAddButton: function () {\n    var addAssetButton = new AssetItemView({\n      model: new Backbone.Model({\n        type: 'text',\n        name: '+'\n      }),\n      assetHeight: ASSET_HEIGHT\n    });\n\n    addAssetButton.bind('selected', function () {\n      this.trigger('init-upload');\n    }, this);\n\n    this.addView(addAssetButton);\n    this.$('.js-assets').append(addAssetButton.render().$el);\n  },\n\n  _initBinds: function () {\n    this._keyDown = this._onKeyDown.bind(this);\n    $(document).on('keydown', this._keyDown);\n\n    this._keyUp = this._onKeyUp.bind(this);\n    $(document).on('keyup', this._keyUp);\n\n    this.listenTo(this._stateModel, 'change:status', this.render);\n    this.listenTo(this._userAssetCollection, 'change', this._onChangeAssets);\n  },\n\n  _getSelectedAsset: function () {\n    return this._userAssetCollection.findWhere({ state: 'selected' });\n  },\n\n  _getSelectedAssetsCount: function () {\n    var selectedAssets = this._userAssetCollection.where({ state: 'selected' });\n    return selectedAssets ? selectedAssets.length : 0;\n  },\n\n  _onKeyDown: function (ev) {\n    this._shiftKeyPressed = ev.shiftKey;\n  },\n\n  _onKeyUp: function (ev) {\n    this._shiftKeyPressed = ev.shiftKey;\n  },\n\n  _onClickBack: function (e) {\n    this.killEvent(e);\n    this._stateModel.unset('status');\n  },\n\n  _renderAsset: function (assetModel) {\n    var assetItemView = new AssetItemView({\n      model: assetModel,\n      assetHeight: ASSET_HEIGHT,\n      selectedAsset: this._selectedAsset\n    });\n\n    if (assetModel.get('public_url') === this.model.get('image')) {\n      assetModel.set('state', 'selected');\n    }\n\n    assetItemView.bind('selected', this._selectAsset, this);\n\n    this.$('.js-assets').append(assetItemView.render().el);\n    this.addView(assetItemView);\n  },\n\n  _onChangeAssets: function () {\n    if (this._getSelectedAssetsCount() === 1) {\n      var selectedAsset = this._getSelectedAsset();\n      this._selectedAsset.set({\n        url: selectedAsset && selectedAsset.get('public_url'),\n        kind: KIND\n      });\n    } else {\n      this._selectedAsset.set({\n        url: '',\n        kind: ''\n      });\n    }\n  },\n\n  _selectAllAssets: function () {\n    this._userAssetCollection.selectAll();\n  },\n\n  _deselectAllAssets: function () {\n    this._userAssetCollection.deselectAll();\n  },\n\n  _selectAsset: function (m) {\n    if (this._shiftKeyPressed) {\n      m.set('state', m.get('state') === 'selected' ? '' : 'selected');\n    } else {\n      m.set('state', 'selected');\n    }\n\n    if (!this._shiftKeyPressed) {\n      this._userAssetCollection.deselectAll(m);\n\n      if (this._userModel.isInsideOrg()) {\n        this._organizationAssetCollection.deselectAll();\n      }\n    }\n  },\n\n  _removeSelectedAssetsFromView: function () {\n    var selectedAssets = this._userAssetCollection.select(function (asset) {\n      return asset.get('state') === 'selected';\n    }, this);\n\n    _.each(selectedAssets, function (asset) {\n      this.$('#' + asset.get('id')).remove();\n    }, this);\n  },\n\n  _removeSelectedAssets: function () {\n    this._stateModel.set('status', 'loading');\n\n    var selectedAssets = this._userAssetCollection.select(function (asset) {\n      return asset.get('state') === 'selected';\n    }, this);\n\n    _.each(selectedAssets, function (asset) {\n      asset.destroy({\n        complete: this._onDestroyFinished.bind(this)\n      });\n    }, this);\n  },\n\n  _onDestroyFinished: function (response) {\n    if (response.status === 200) {\n      this._removeSelectedAssetsFromView();\n      this._stateModel.unset('status');\n      this._selectedAsset.unset('kind');\n      this._selectedAsset.unset('url');\n    } else {\n      this._stateModel.set({\n        error_message: response.statusText,\n        status: 'error'\n      });\n    }\n  },\n\n  _isLoading: function () {\n    return this._stateModel.get('status') === 'loading';\n  },\n\n  _hasError: function () {\n    return this._stateModel.get('status') === 'error';\n  },\n\n  _renderLoading: function () {\n    this.$el.html(\n      loadingView({\n        title: _t('components.modals.assets-picker.loading')\n      })\n    );\n  },\n\n  _renderError: function () {\n    this.$el.html(\n      new ErrorView({\n        title: this._stateModel.get('error_message'),\n        desc: _t('components.modals.assets-picker.error-desc'),\n        template: errorTemplate\n      }).render().el\n    );\n  },\n\n  _disableBinds: function () {\n    $(document).off('keydown', this._keyDown);\n    $(document).off('keyup', this._keyUp);\n  },\n\n  clean: function () {\n    this._disableBinds();\n    CoreView.prototype.clean.apply(this);\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar ScrollView = require('builder/components/scroll/scroll-view');\nvar UserAssetsListView = require('./user-assets-list-view');\n\nvar REQUIRED_OPTS = [\n  'userModel',\n  'userAssetCollection',\n  'title',\n  'selectedAsset'\n];\n\nmodule.exports = CoreView.extend({\n\n  className: 'Tab-paneContentInner',\n\n  events: {\n    'change .js-uploadInput': '_onFileSelected'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    if (this._userModel.isInsideOrg()) {\n      if (!opts.organizationAssetCollection) throw new Error('organizationAssetCollection is required');\n\n      this._organizationAssetCollection = opts.organizationAssetCollection;\n    }\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._renderAssets();\n    return this;\n  },\n\n  _renderAssets: function () {\n    var view = new ScrollView({\n      createContentView: function () {\n        var view = new UserAssetsListView({\n          title: this._title,\n          model: this.model,\n          organizationAssetCollection: this._organizationAssetCollection,\n          userAssetCollection: this._userAssetCollection,\n          selectedAsset: this._selectedAsset,\n          userModel: this._userModel\n        });\n\n        view.bind('init-upload', function () {\n          this.trigger('init-upload');\n        }, this);\n\n        return view;\n      }.bind(this)\n    });\n\n    this.addView(view);\n    this.$el.append(view.render().el);\n  }\n});\n","// Maki icons from https://github.com/mapbox/maki\n// and https://github.com/mapbox/maki/blob/mb-pages/_includes/maki.json\nmodule.exports = {\n  disclaimer: _t('assets.maki-icons.disclaimer'),\n  icons: [\n    {\n      'name': 'Square stroked',\n      'icon': 'square-stroked'\n    },\n    {\n      'name': 'Square solid',\n      'icon': 'square'\n    },\n    {\n      'name': 'Triangle stroked',\n      'icon': 'triangle-stroked'\n    },\n    {\n      'name': 'Triangle solid',\n      'icon': 'triangle'\n    },\n    {\n      'name': 'Star stroked',\n      'icon': 'star-stroked'\n    },\n    {\n      'name': 'Star solid',\n      'icon': 'star'\n    },\n    {\n      'name': 'Cross',\n      'icon': 'cross'\n    },\n    {\n      'name': 'Marker Stroke',\n      'icon': 'marker-stroked'\n    },\n    {\n      'name': 'Marker Solid',\n      'icon': 'marker'\n    },\n    {\n      'name': 'Religious Jewish',\n      'icon': 'religious-jewish'\n    },\n    {\n      'name': 'Religious Christian',\n      'icon': 'religious-christian'\n    },\n    {\n      'name': 'Religious Muslim',\n      'icon': 'religious-muslim'\n    },\n    {\n      'name': 'Cemetery',\n      'icon': 'cemetery'\n    },\n    {\n      'name': 'Rocket',\n      'icon': 'rocket'\n    },\n    {\n      'name': 'Airport',\n      'icon': 'airport'\n    },\n    {\n      'name': 'Heliport',\n      'icon': 'heliport'\n    },\n    {\n      'name': 'Rail',\n      'icon': 'rail'\n    },\n    {\n      'name': 'Rail Metro',\n      'icon': 'rail-metro'\n    },\n    {\n      'name': 'Rail Light',\n      'icon': 'rail-light'\n    },\n    {\n      'name': 'Bus',\n      'icon': 'bus'\n    },\n    {\n      'name': 'Fuel',\n      'icon': 'fuel'\n    },\n    {\n      'name': 'Parking',\n      'tags': [\n        'parking',\n        'transportation'\n      ],\n      'icon': 'parking'\n    },\n    {\n      'name': 'Parking Garage',\n      'tags': [\n        'parking',\n        'transportation',\n        'garage'\n      ],\n      'icon': 'parking-garage'\n    },\n    {\n      'name': 'Airfield',\n      'tags': [\n        'airfield',\n        'airport',\n        'plane',\n        'landing strip'\n      ],\n      'icon': 'airfield'\n    },\n    {\n      'name': 'Roadblock',\n      'tags': [\n        'roadblock',\n        'stop',\n        'warning',\n        'dead end'\n      ],\n      'icon': 'roadblock'\n    },\n    {\n      'name': 'Ferry',\n      'tags': [\n        'ship',\n        'boat',\n        'water',\n        'ferry',\n        'transportation'\n      ],\n      'icon': 'ferry'\n    },\n    {\n      'name': 'Harbor',\n      'tags': [\n        'marine',\n        'dock',\n        'water',\n        'wharf'\n      ],\n      'icon': 'harbor'\n    },\n    {\n      'name': 'Bicycle',\n      'tags': [\n        'cycling',\n        'cycle',\n        'transportation'\n      ],\n      'icon': 'bicycle'\n    },\n    {\n      'name': 'Park',\n      'tags': [\n        'recreation',\n        'park',\n        'forest',\n        'tree',\n        'green',\n        'woods',\n        'nature'\n      ],\n      'icon': 'park'\n    },\n    {\n      'name': 'Park 2',\n      'tags': [\n        'recreation',\n        'park',\n        'forest',\n        'tree',\n        'green',\n        'woods',\n        'nature'\n      ],\n      'icon': 'park2'\n    },\n    {\n      'name': 'Museum',\n      'tags': [\n        'recreation',\n        'museum',\n        'tourism'\n      ],\n      'icon': 'museum'\n    },\n    {\n      'name': 'Lodging',\n      'tags': [\n        'lodging',\n        'hotel',\n        'recreation',\n        'motel',\n        'tourism'\n      ],\n      'icon': 'lodging'\n    },\n    {\n      'name': 'Monument',\n      'tags': [\n        'recreation',\n        'statue',\n        'monument',\n        'tourism'\n      ],\n      'icon': 'monument'\n    },\n    {\n      'name': 'Zoo',\n      'tags': [\n        'recreation',\n        'zoo',\n        'animal',\n        'giraffe'\n      ],\n      'icon': 'zoo'\n    },\n    {\n      'name': 'Garden',\n      'tags': [\n        'recreation',\n        'garden',\n        'park',\n        'flower',\n        'nature'\n      ],\n      'icon': 'garden'\n    },\n    {\n      'name': 'Campsite',\n      'tags': [\n        'recreation',\n        'campsite',\n        'camp',\n        'camping',\n        'tent',\n        'nature'\n      ],\n      'icon': 'campsite'\n    },\n    {\n      'name': 'Theatre',\n      'tags': [\n        'recreation',\n        'theatre',\n        'theater',\n        'entertainment',\n        'play',\n        'performance'\n      ],\n      'icon': 'theatre'\n    },\n    {\n      'name': 'Art gallery',\n      'tags': [\n        'art',\n        'center',\n        'museum',\n        'gallery',\n        'creative',\n        'recreation',\n        'entertainment',\n        'studio'\n      ],\n      'icon': 'art-gallery'\n    },\n    {\n      'name': 'Pitch',\n      'tags': [\n        'pitch',\n        'track',\n        'athletic',\n        'sports',\n        'field'\n      ],\n      'icon': 'pitch'\n    },\n    {\n      'name': 'Soccer',\n      'tags': [\n        'soccer',\n        'sports'\n      ],\n      'icon': 'soccer'\n    },\n    {\n      'name': 'American Football',\n      'tags': [\n        'football',\n        'sports'\n      ],\n      'icon': 'america-football'\n    },\n    {\n      'name': 'Tennis',\n      'tags': [\n        'tennis',\n        'court',\n        'ball',\n        'sports'\n      ],\n      'icon': 'tennis'\n    },\n    {\n      'name': 'Basketball',\n      'tags': [\n        'basketball',\n        'ball',\n        'sports'\n      ],\n      'icon': 'basketball'\n    },\n    {\n      'name': 'Baseball',\n      'tags': [\n        'baseball',\n        'softball',\n        'ball',\n        'sports'\n      ],\n      'icon': 'baseball'\n    },\n    {\n      'name': 'Golf',\n      'tags': [\n        'golf',\n        'sports',\n        'course'\n      ],\n      'icon': 'golf'\n    },\n    {\n      'name': 'Swimming',\n      'tags': [\n        'swimming',\n        'water',\n        'swim',\n        'sports'\n      ],\n      'icon': 'swimming'\n    },\n    {\n      'name': 'Cricket',\n      'tags': [\n        'cricket',\n        'sports'\n      ],\n      'icon': 'cricket'\n    },\n    {\n      'name': 'Skiing',\n      'tags': [\n        'winter',\n        'skiing',\n        'ski',\n        'sports'\n      ],\n      'icon': 'skiing'\n    },\n    {\n      'name': 'School',\n      'tags': [\n        'school',\n        'highschool',\n        'elementary',\n        'children',\n        'amenity',\n        'middle'\n      ],\n      'icon': 'school'\n    },\n    {\n      'name': 'College',\n      'tags': [\n        'college',\n        'school',\n        'amenity',\n        'university'\n      ],\n      'icon': 'college'\n    },\n    {\n      'name': 'Library',\n      'tags': [\n        'library',\n        'books',\n        'amenity'\n      ],\n      'icon': 'library'\n    },\n    {\n      'name': 'Post',\n      'tags': [\n        'post',\n        'office',\n        'amenity',\n        'mail',\n        'letter'\n      ],\n      'icon': 'post'\n    },\n    {\n      'name': 'Fire station',\n      'tags': [\n        'fire',\n        'station',\n        'amenity'\n      ],\n      'icon': 'fire-station'\n    },\n    {\n      'name': 'Town hall',\n      'tags': [\n        'townhall',\n        'mayor',\n        'building',\n        'amenity',\n        'government'\n      ],\n      'icon': 'town-hall'\n    },\n    {\n      'name': 'Police',\n      'tags': [\n        'police',\n        'jail',\n        'arrest',\n        'amenity',\n        'station'\n      ],\n      'icon': 'police'\n    },\n    {\n      'name': 'Prison',\n      'tags': [\n        'prison',\n        'jail',\n        'amenity'\n      ],\n      'icon': 'prison'\n    },\n    {\n      'name': 'Embassy',\n      'tags': [\n        'embassy',\n        'diplomacy',\n        'consulate',\n        'amenity',\n        'flag'\n      ],\n      'icon': 'embassy'\n    },\n    {\n      'name': 'Beer',\n      'tags': [\n        'bar',\n        'beer',\n        'drink',\n        'commercial',\n        'biergarten',\n        'pub'\n      ],\n      'icon': 'beer'\n    },\n    {\n      'name': 'Restaurant',\n      'tags': [\n        'restaurant',\n        'commercial'\n      ],\n      'icon': 'restaurant'\n    },\n    {\n      'name': 'Cafe',\n      'tags': [\n        'cafe',\n        'coffee',\n        'commercial',\n        'tea'\n      ],\n      'icon': 'cafe'\n    },\n    {\n      'name': 'Shop',\n      'tags': [\n        'shop',\n        'mall',\n        'commercial',\n        'store'\n      ],\n      'icon': 'shop'\n    },\n    {\n      'name': 'Fast Food',\n      'tags': [\n        'food',\n        'fast',\n        'commercial',\n        'burger',\n        'drive-through'\n      ],\n      'icon': 'fast-food'\n    },\n    {\n      'name': 'Bar',\n      'tags': [\n        'bar',\n        'drink',\n        'commercial',\n        'club',\n        'martini',\n        'lounge'\n      ],\n      'icon': 'bar'\n    },\n    {\n      'name': 'Bank',\n      'tags': [\n        'bank',\n        'atm',\n        'commercial',\n        'money'\n      ],\n      'icon': 'bank'\n    },\n    {\n      'name': 'Grocery',\n      'tags': [\n        'food',\n        'grocery',\n        'commercial',\n        'store',\n        'market'\n      ],\n      'icon': 'grocery'\n    },\n    {\n      'name': 'Cinema',\n      'tags': [\n        'cinema',\n        'theatre',\n        'film',\n        'movie',\n        'commercial',\n        'theater',\n        'entertainment'\n      ],\n      'icon': 'cinema'\n    },\n    {\n      'name': 'Pharmacy',\n      'tags': [\n        'pharmacy',\n        'drugs',\n        'medication',\n        'social',\n        'medicine',\n        'prescription'\n      ],\n      'icon': 'pharmacy'\n    },\n    {\n      'name': 'Hospital',\n      'tags': [\n        'hospital',\n        'health',\n        'medication',\n        'social',\n        'medicine',\n        'medical',\n        'clinic'\n      ],\n      'icon': 'hospital'\n    },\n    {\n      'name': 'Danger',\n      'tags': [\n        'minefield',\n        'landmine',\n        'disaster',\n        'dangerous',\n        'hazard'\n      ],\n      'icon': 'danger'\n    },\n    {\n      'name': 'Industrial',\n      'tags': [\n        'industrial',\n        'factory',\n        'property',\n        'building'\n      ],\n      'icon': 'industrial'\n    },\n    {\n      'name': 'Warehouse',\n      'tags': [\n        'warehouse',\n        'property',\n        'storage',\n        'building'\n      ],\n      'icon': 'warehouse'\n    },\n    {\n      'name': 'Commercial',\n      'tags': [\n        'commercial',\n        'property',\n        'business',\n        'building'\n      ],\n      'icon': 'commercial'\n    },\n    {\n      'name': 'Building',\n      'tags': [\n        'building',\n        'property',\n        'structure',\n        'business',\n        'building'\n      ],\n      'icon': 'building'\n    },\n    {\n      'name': 'Place of worship',\n      'tags': [\n        'religion',\n        'ceremony',\n        'religious',\n        'nondenominational',\n        'church',\n        'temple'\n      ],\n      'icon': 'place-of-worship'\n    },\n    {\n      'name': 'Alcohol shop',\n      'tags': [\n        'alcohol',\n        'liquor',\n        'store',\n        'shop',\n        'beer',\n        'wine',\n        'vodka'\n      ],\n      'icon': 'alcohol-shop'\n    },\n    {\n      'name': 'Logging',\n      'tags': [\n        'logger',\n        'chainsaw',\n        'woods',\n        'industry'\n      ],\n      'icon': 'logging'\n    },\n    {\n      'name': 'Oil well',\n      'tags': [\n        'oil',\n        'natural',\n        'environment',\n        'industry',\n        'resources'\n      ],\n      'icon': 'oil-well'\n    },\n    {\n      'name': 'Slaughterhouse',\n      'tags': [\n        'cows',\n        'cattle',\n        'food',\n        'meat',\n        'industry',\n        'resources'\n      ],\n      'icon': 'slaughterhouse'\n    },\n    {\n      'name': 'Dam',\n      'tags': [\n        'water',\n        'natural',\n        'hydro',\n        'hydroelectric',\n        'energy',\n        'environment',\n        'industry',\n        'resources'\n      ],\n      'icon': 'dam'\n    },\n    {\n      'name': 'Water',\n      'tags': [\n        'water',\n        'natural',\n        'hydro',\n        'lake',\n        'river',\n        'ocean',\n        'resources'\n      ],\n      'icon': 'water'\n    },\n    {\n      'name': 'Wetland',\n      'tags': [\n        'water',\n        'swamp',\n        'natural'\n      ],\n      'icon': 'wetland'\n    },\n    {\n      'name': 'Disability',\n      'tags': [\n        'handicap',\n        'wheelchair',\n        'access'\n      ],\n      'icon': 'disability'\n    },\n    {\n      'name': 'Telephone',\n      'tags': [\n        'payphone',\n        'call'\n      ],\n      'icon': 'telephone'\n    },\n    {\n      'name': 'Emergency Telephone',\n      'tags': [\n        'payphone',\n        'danger',\n        'safety',\n        'call'\n      ],\n      'icon': 'emergency-telephone'\n    },\n    {\n      'name': 'Toilets',\n      'tags': [\n        'bathroom',\n        'men',\n        'women',\n        'sink',\n        'washroom',\n        'lavatory'\n      ],\n      'icon': 'toilets'\n    },\n    {\n      'name': 'Waste Basket',\n      'tags': [\n        'trash',\n        'rubbish',\n        'bin',\n        'garbage'\n      ],\n      'icon': 'waste-basket'\n    },\n    {\n      'name': 'Music',\n      'tags': [\n        'stage',\n        'performance',\n        'band',\n        'concert',\n        'venue'\n      ],\n      'icon': 'music'\n    },\n    {\n      'name': 'Land Use',\n      'tags': [\n        'zoning',\n        'usage',\n        'area'\n      ],\n      'icon': 'land-use'\n    },\n    {\n      'name': 'City',\n      'tags': [\n        'area',\n        'point',\n        'place',\n        'urban'\n      ],\n      'icon': 'city'\n    },\n    {\n      'name': 'Town',\n      'tags': [\n        'area',\n        'point',\n        'place',\n        'small'\n      ],\n      'icon': 'town'\n    },\n    {\n      'name': 'Village',\n      'tags': [\n        'area',\n        'point',\n        'place',\n        'small',\n        'rural'\n      ],\n      'icon': 'village'\n    },\n    {\n      'name': 'Farm',\n      'tags': [\n        'building',\n        'farming',\n        'crops',\n        'plants',\n        'agriculture',\n        'rural'\n      ],\n      'icon': 'farm'\n    },\n    {\n      'name': 'Bakery',\n      'tags': [\n        'bakery',\n        'pastry',\n        'croissant',\n        'food',\n        'shop',\n        'bread'\n      ],\n      'icon': 'bakery'\n    },\n    {\n      'name': 'Dog Park',\n      'tags': [\n        'dog',\n        'pet'\n      ],\n      'icon': 'dog-park'\n    },\n    {\n      'name': 'Lighthouse',\n      'tags': [\n        'building',\n        'navigation',\n        'nautical',\n        'ocean',\n        'logistics'\n      ],\n      'icon': 'lighthouse'\n    },\n    {\n      'name': 'Clothing Store',\n      'tags': [\n        'clothing',\n        'store',\n        'shop'\n      ],\n      'icon': 'clothing-store'\n    },\n    {\n      'name': 'Polling Place',\n      'icon': 'polling-place'\n    },\n    {\n      'name': 'Playground',\n      'icon': 'playground'\n    },\n    {\n      'name': 'Entrance',\n      'icon': 'entrance'\n    },\n    {\n      'name': 'Heart',\n      'icon': 'heart'\n    },\n    {\n      'name': 'London Underground',\n      'icon': 'london-underground'\n    },\n    {\n      'name': 'Minefield',\n      'icon': 'minefield'\n    },\n    {\n      'name': 'Rail Underground',\n      'icon': 'rail-underground'\n    },\n    {\n      'name': 'Rail Above',\n      'icon': 'rail-above'\n    },\n    {\n      'name': 'Camera',\n      'icon': 'camera'\n    },\n    {\n      'name': 'Laundry',\n      'icon': 'laundry'\n    },\n    {\n      'name': 'Car',\n      'icon': 'car'\n    },\n    {\n      'name': 'Suitcase',\n      'icon': 'suitcase'\n    },\n    {\n      'name': 'Hairdresser',\n      'icon': 'hairdresser'\n    },\n    {\n      'name': 'Chemist',\n      'icon': 'chemist'\n    },\n    {\n      'name': 'Mobile phone',\n      'icon': 'mobilephone'\n    },\n    {\n      'name': 'Scooter',\n      'icon': 'scooter'\n    }\n  ]\n};\n","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar tabPaneTemplate = require('builder/components/form-components/editors/fill/fill-tab-pane.tpl');\nvar createTextLabelsTabPane = require('builder/components/tab-pane/create-text-labels-tab-pane');\n\nvar InputColorFixedContentView = require('./input-color-fixed-content-view');\nvar InputColorValueContentView = require('./input-color-value-content-view');\nvar FillConstants = require('builder/components/form-components/_constants/_fill');\n\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    if (this.options.editorAttrs) {\n      var editorAttrs = this.options.editorAttrs;\n\n      if (editorAttrs.hidePanes) {\n        this._hidePanes = editorAttrs.hidePanes;\n\n        if (!_.contains(this._hidePanes, FillConstants.Panes.BY_VALUE)) {\n          if (!opts.configModel) throw new Error('configModel param is required');\n          if (!opts.userModel) throw new Error('userModel param is required');\n          if (!opts.modals) throw new Error('modals param is required');\n          if (!opts.query) throw new Error('query param is required');\n        }\n      }\n\n      if (editorAttrs.categorizeColumns) {\n        this._categorizeColumns = true;\n      }\n\n      if (editorAttrs.hideTabs) {\n        this._hideTabs = editorAttrs.hideTabs;\n      }\n\n      if (editorAttrs.imageEnabled) {\n        this._imageEnabled = true;\n      }\n    }\n\n    if (!opts.columns) throw new Error('columns is required');\n\n    this._columns = opts.columns;\n    this._configModel = opts.configModel;\n    this._userModel = opts.userModel;\n    this._modals = opts.modals;\n    this._query = opts.query;\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.on('change:fixed', this._onChangeFixed, this);\n  },\n\n  _onChangeFixed: function () {\n    if (!this.model.get('fixed') || this.model.get('range')) {\n      this.model.unset('image', { silent: true });\n      this.model.unset('images', { silent: true });\n    }\n  },\n\n  _initViews: function () {\n    var self = this;\n\n    var fixedPane = {\n      name: 'fixed',\n      label: _t('form-components.editors.fill.input-color.solid'),\n      createContentView: function () {\n        return self._generateFixedContentView();\n      }\n    };\n\n    var valuePane = {\n      name: 'value',\n      label: _t('form-components.editors.fill.input-color.value'),\n      createContentView: function () {\n        return self._generateValueContentView();\n      }\n    };\n\n    this._tabPaneTabs = [];\n\n    if (this._hidePanes) {\n      if (!_.contains(this._hidePanes, FillConstants.Panes.FIXED)) {\n        this._tabPaneTabs.push(fixedPane);\n      }\n      if (!_.contains(this._hidePanes, FillConstants.Panes.BY_VALUE)) {\n        this._tabPaneTabs.push(valuePane);\n      }\n    } else {\n      this._tabPaneTabs = [fixedPane, valuePane];\n    }\n\n    var tabPaneOptions = {\n      tabPaneOptions: {\n        template: tabPaneTemplate,\n        tabPaneItemOptions: {\n          tagName: 'li',\n          klassName: 'CDB-NavMenu-item'\n        }\n      },\n      tabPaneItemLabelOptions: {\n        tagName: 'button',\n        className: 'CDB-NavMenu-link u-upperCase'\n      }\n    };\n\n    if (this.model.get('range') && this._tabPaneTabs.length > 1) {\n      this._tabPaneTabs[1].selected = true;\n    }\n\n    this._tabPaneView = createTextLabelsTabPane(this._tabPaneTabs, tabPaneOptions);\n    this._tabPaneView.collection.bind('change:selected', this._onChangeTabPaneViewTab, this);\n    this.$el.append(this._tabPaneView.render().$el);\n    this.addView(this._tabPaneView);\n  },\n\n  _onChangeTabPaneViewTab: function () {\n    var selectedTabPaneName = this._tabPaneView.getSelectedTabPaneName();\n    var attrsToUnsetIfFixed = ['domain', 'bins', 'attribute', 'quantification'];\n\n    if (selectedTabPaneName === 'fixed') {\n      _.each(attrsToUnsetIfFixed, function (attr) {\n        this.model.unset(attr, { silent: true });\n      }, this);\n\n      if (!this.model.get('fixed')) {\n        if (this.model.get('range')) {\n          this.model.set('fixed', this.model.get('range')[0]);\n          this.model.unset('range');\n        } else {\n          this.model.set('fixed', '#0303FF');\n        }\n      }\n    }\n\n    this.trigger('change', selectedTabPaneName, this);\n  },\n\n  _generateFixedContentView: function () {\n    return new InputColorFixedContentView({\n      model: this.model,\n      configModel: this._configModel,\n      userModel: this._userModel,\n      modals: this._modals,\n      editorAttrs: this.options.editorAttrs\n    });\n  },\n\n  _generateValueContentView: function () {\n    return new InputColorValueContentView({\n      model: this.model,\n      columns: this._columns,\n      configModel: this._configModel,\n      categorizeColumns: this._categorizeColumns,\n      imageEnabled: this._imageEnabled,\n      userModel: this._userModel,\n      modals: this._modals,\n      hideTabs: this._hideTabs,\n      query: this._query\n    });\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar template = require('./input-color-file-view.tpl');\nvar AssetsView = require('./assets-picker/assets-view');\nvar CarouselFormView = require('builder/components/carousel-form-view');\nvar CarouselCollection = require('builder/components/custom-carousel/custom-carousel-collection');\nvar StaticAssetsCollection = require('builder/data/static-assets-collection');\nvar StaticAssetModel = require('builder/data/static-asset-model');\nvar StaticAssetItemViewTemplate = require('./assets-picker/static-asset-item-view.tpl');\nvar CarouselTemplate = require('./input-color-file-carousel.tpl');\nvar MakiIcons = require('./assets/maki-icons');\n\nmodule.exports = CoreView.extend({\n\n  events: {\n    'click .js-show-collection': '_onClickShowCollection'\n  },\n\n  initialize: function (options) {\n    if (!options.configModel) throw new Error('configModel is required');\n    if (!options.userModel) throw new Error('userModel is required');\n    if (!options.modals) throw new Error('modals is required');\n\n    this._configModel = options.configModel;\n    this._userModel = options.userModel;\n    this._modals = options.modals;\n\n    this._initCarouselCollection();\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template());\n    this._renderAssets();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._carouselCollection, 'change:selected', this._onSelectAsset);\n    this.listenTo(this._carouselCollection, 'reset', this.render);\n  },\n\n  _resetCarouselCollection: function (url) {\n    this._icons.reset(MakiIcons.icons);\n\n    var selectedItem = this._carouselCollection.find(function (model) {\n      return model.get('url') === url;\n    });\n\n    if (selectedItem) {\n      selectedItem.set('selected', true);\n    }\n\n    this._icons.unshift(this._resetAsset);\n    this._carouselCollection.reset(this._getIcons());\n  },\n\n  _initCarouselCollection: function () {\n    this._icons = new StaticAssetsCollection(MakiIcons.icons);\n    this.add_related_model(this._icons);\n\n    this._resetAsset = new StaticAssetModel({\n      type: 'none',\n      selected: !this._getIconSelected(),\n      name: _t('form-components.editors.fill.image.none'),\n      action: function (model) {\n        this._resetImage(model);\n      }.bind(this)\n    });\n\n    this._icons.unshift(this._resetAsset);\n\n    this._carouselCollection = new CarouselCollection(this._getIcons());\n    this.add_related_model(this._carouselCollection);\n  },\n\n  _getIcons: function () {\n    var defaultAction = function (model) {\n      this._changeIcon(model);\n    }.bind(this);\n\n    return this._icons.map(function (icon) {\n      var type = icon.get('type') ? icon.get('type') : 'icon';\n      var action = icon.get('action') ? icon.get('action') : defaultAction;\n      var selectedIcon = this._getIconSelected();\n\n      return {\n        selected: icon.get('selected') || icon.getURLFor(icon.get('icon')) === selectedIcon,\n        icon: icon,\n        type: type,\n        name: icon.get('name'),\n        url: icon.get('public_url'),\n        action: action,\n        template: function () {\n          return StaticAssetItemViewTemplate({\n            type: type,\n            public_url: icon.get('public_url') + '?req=markup',\n            name: icon.get('name')\n          });\n        }\n      };\n    }, this);\n  },\n\n  _getIconSelected: function () {\n    if (this.model.get('ramp')) {\n      var rampIndex = this.model.get('index') || 0;\n      var categoryImage = this.model.get('ramp')[rampIndex].image;\n\n      return categoryImage || '';\n    }\n\n    return this.model.get('image') || '';\n  },\n\n  _renderAssets: function () {\n    this.clearSubViews();\n    this.$el.html(template());\n\n    var view = new CarouselFormView({\n      collection: this._carouselCollection,\n      template: CarouselTemplate,\n      listItemOptions: {\n        className: 'Carousel-item AssetListItem'\n      },\n      itemOptions: {\n        className: 'AssetItem-button'\n      }\n    });\n\n    this.addView(view);\n    this.$('.js-assets').append(view.render().el);\n  },\n\n  _onSelectAsset: function (model) {\n    model.get('action')(model);\n  },\n\n  _changeIcon: function (model) {\n    var icon = model.get('icon');\n\n    this.trigger('change', {\n      url: icon.get('public_url'),\n      kind: icon.get('kind')\n    }, this);\n  },\n\n  _resetImage: function () {\n    this.trigger('change', null, this);\n  },\n\n  _onClickShowCollection: function (e) {\n    this.killEvent(e);\n\n    var self = this;\n\n    this._modals.create(function (modalModel) {\n      self._assetsView = new AssetsView({\n        model: self.model,\n        modalModel: modalModel,\n        configModel: self._configModel,\n        userModel: self._userModel\n      });\n\n      self._assetsView.bind('change', self._resetAssetsView, self);\n\n      return self._assetsView;\n    }, {\n      breadcrumbsEnabled: true\n    });\n  },\n\n  _resetAssetsView: function (data) {\n    this._resetCarouselCollection(data.url);\n    this.trigger('change', data, this);\n  },\n\n  _destroyDocumentBinds: function () {\n    if (this._assetsView) {\n      this._assetsView.unbind('change', self._resetAssetsView, self);\n    }\n  },\n\n  clean: function () {\n    this._destroyDocumentBinds();\n    this.trigger('onClean', this);\n    CoreView.prototype.clean.apply(this);\n  }\n});\n","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar tabPaneTemplate = require('builder/components/form-components/editors/fill/fill-tab-pane.tpl');\nvar createMixedLabelsTabPane = require('builder/components/tab-pane/create-mixed-labels-tab-pane');\nvar ColorPicker = require('builder/components/color-picker/color-picker');\nvar InputColorFileView = require('./input-color-file-view');\nvar FillConstants = require('builder/components/form-components/_constants/_fill');\n\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    if (this.options.editorAttrs) {\n      var editorAttrs = this.options.editorAttrs;\n\n      this._imageEnabled = editorAttrs.imageEnabled;\n\n      if (editorAttrs.hidePanes) {\n        this._hidePanes = editorAttrs.hidePanes;\n\n        if (this._imageEnabled && !_.contains(this._hidePanes, FillConstants.Panes.FILE)) {\n          if (!opts.configModel) throw new Error('configModel param is required');\n          if (!opts.userModel) throw new Error('userModel param is required');\n          if (!opts.modals) throw new Error('modals param is required');\n        }\n      }\n\n      if (editorAttrs.disableOpacity) {\n        this._disableOpacity = true;\n      }\n    }\n\n    this._userModel = opts.userModel;\n    this._configModel = opts.configModel;\n    this._modals = opts.modals;\n    this._query = opts.query;\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    if (this._imageEnabled) {\n      this._setupTabPanes();\n    }\n\n    if (this._tabPaneView) {\n      this.$el.append(this._tabPaneView.render().$el);\n    } else {\n      this.$el.append(this._generateFixedContentView().render().$el);\n    }\n    return this;\n  },\n\n  _setupTabPanes: function () {\n    var self = this;\n\n    var fixedPane = {\n      name: 'fixed',\n      type: 'color',\n      label: this.model.get('fixed'),\n      createContentView: function () {\n        return self._generateFixedContentView();\n      }\n    };\n\n    var filePane = {\n      name: 'file',\n      type: this.model.get('image') ? 'image' : 'text',\n      label: this.model.get('image') || _t('form-components.editors.fill.input-color.img'),\n      kind: this.model.get('kind') || 'marker',\n      color: this.model.get('fixed'),\n      createContentView: function () {\n        return self._generateFileContentView();\n      }\n    };\n\n    this._tabPaneTabs = [];\n\n    if (this.options.editorAttrs && this.options.editorAttrs.hidePanes) {\n      this._hidePanes = this.options.editorAttrs.hidePanes;\n\n      if (!_.contains(this._hidePanes, FillConstants.Panes.FIXED)) {\n        this._tabPaneTabs.push(fixedPane);\n      }\n\n      if (!_.contains(this._hidePanes, FillConstants.Panes.FILE)) {\n        this._tabPaneTabs.push(filePane);\n      }\n    } else {\n      this._tabPaneTabs = [fixedPane, filePane];\n    }\n\n    var tabPaneOptions = {\n      tabPaneOptions: {\n        template: tabPaneTemplate,\n        tabPaneItemOptions: {\n          tagName: 'li',\n          klassName: 'CDB-NavMenu-item'\n        }\n      },\n      tabPaneItemLabelOptions: {\n        tagName: 'button',\n        className: 'CDB-NavMenu-link u-upperCase'\n      }\n    };\n\n    if (this.model.get('image') && this._tabPaneTabs.length > 1) {\n      this._tabPaneTabs[1].selected = true;\n    }\n    this.listenTo(this.model, 'change:image', this._updateImageTabPane);\n    this.listenTo(this.model, 'change:fixed', this._updateTextTabPane);\n\n    this._tabPaneView = createMixedLabelsTabPane(this._tabPaneTabs, tabPaneOptions);\n    this.addView(this._tabPaneView);\n  },\n\n  _updateTextTabPane: function () {\n    this._updateImageTabPane();\n    this._tabPaneView.collection.at(0).set('label', this.model.get('fixed'));\n  },\n\n  _updateImageTabPane: function () {\n    if (this.model.get('image')) {\n      this._tabPaneView.collection.at(1).set({ label: this.model.get('image'), color: this.model.get('fixed') });\n    } else {\n      this._tabPaneView.collection.at(1).set('label', _t('form-components.editors.fill.input-color.img'));\n    }\n  },\n\n  _generateFixedContentView: function () {\n    var contentView = new ColorPicker({\n      value: this.model.get('fixed'),\n      opacity: this.model.get('opacity'),\n      disableOpacity: this._disableOpacity\n    });\n\n    contentView.bind('change', this._onChangeValue, this);\n    return contentView;\n  },\n\n  _generateFileContentView: function () {\n    var contentView = new InputColorFileView({\n      model: this.model,\n      userModel: this._userModel,\n      configModel: this._configModel,\n      modals: this._modals\n    });\n\n    contentView.bind('change', this._onChangeFile, this);\n    return contentView;\n  },\n\n  _onChangeFile: function (data) {\n    if (data && data.url) {\n      this.model.set({\n        image: data.url,\n        kind: data.kind\n      });\n    } else {\n      this.model.unset('image');\n    }\n  },\n\n  _onChangeValue: function (color) {\n    this.model.set({ fixed: color.hex, opacity: color.opacity });\n  }\n});\n","var $ = require('jquery');\nvar _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar ImageLoaderView = require('builder/components/img-loader-view');\nvar template = require('./input-color-picker-header.tpl');\nvar MAX = 1;\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-color': '_onClickColor',\n    'click .js-assetPicker': '_onClickAssetPicker',\n    'keyup .js-a': '_onChangeOpacity'\n  },\n\n  initialize: function (opts) {\n    this.listenTo(this.model, 'change', this.render);\n  },\n\n  render: function (model, options) {\n    if (model && model.changed && typeof model.changed.opacity !== 'undefined') {\n      this._reRenderOpacity();\n      return this;\n    }\n\n    this.clearSubViews();\n    this.$el.empty();\n\n    var rampItem = this._getRampItem();\n    this.$el.append(template({\n      ramp: this.model.get('ramp'),\n      index: this.model.get('index'),\n      opacity: this.model.get('opacity'),\n      label: rampItem.title || _t('form-components.editors.fill.input-qualitative-ramps.others'),\n      color: rampItem.color || '',\n      iconStylingEnabled: this.options.iconStylingEnabled,\n      isCategorized: _.has(rampItem, 'image'),\n      image: rampItem.image || '',\n      imageEnabled: this.options.imageEnabled\n    }));\n\n    this._slider = this.$('.js-slider').slider({\n      range: 'min',\n      value: this._inverseSliderValue(this.model.get('opacity')),\n      min: 0,\n      max: MAX,\n      step: 0.02,\n      orientation: 'horizontal',\n      disabled: false,\n      slide: this._onSlideChange.bind(this)\n    });\n\n    this._loadImages();\n\n    return this;\n  },\n\n  _getRampItem: function () {\n    var ramp = this.model.get('ramp');\n\n    if (!ramp) {\n      return {\n        color: '',\n        title: _t('form-components.editors.fill.input-qualitative-ramps.others'),\n        image: ''\n      };\n    }\n\n    return ramp[this.model.get('index')];\n  },\n\n  _loadImages: function () {\n    var rampItem = this._getRampItem();\n\n    this.iconView = new ImageLoaderView({\n      imageClass: 'CDB-Text u-actionTextColor js-assetPicker',\n      imageUrl: rampItem.image,\n      color: rampItem.color\n    });\n    this.addView(this.iconView);\n    this.$('.js-image-container').append(this.iconView.render().el);\n  },\n\n  _onClickColor: function (ev) {\n    this.killEvent(ev);\n    this.model.set('index', $(ev.target).index());\n  },\n\n  _onClickBack: function (ev) {\n    this.killEvent(ev);\n    this.trigger('back', this);\n  },\n\n  _onClickAssetPicker: function (ev) {\n    this.killEvent(ev);\n    this.trigger('goToAssetPicker', this);\n  },\n\n  _onSlideChange: function (evt, obj) {\n    this.model.set('opacity', this._inverseSliderValue(obj.value));\n  },\n\n  _inverseSliderValue: function (value) {\n    return parseFloat(Number(MAX - value).toFixed(2));\n  },\n\n  _onChangeOpacity: function () {\n    var $input = this.$('.js-a');\n    var value = $input.val();\n    var isValid = this._isValidOpacity(value);\n    $input.toggleClass('has-error', !isValid);\n    if (isValid) {\n      this.model.set('opacity', parseFloat(value));\n    }\n  },\n\n  _isValidOpacity: function (value) {\n    var regex = /^((0(\\.\\d+)?)|(1(\\.0)?))$/;\n    return regex.test(value);\n  },\n\n  _reRenderOpacity: function () {\n    var $input = this.$('.js-a');\n    var $slider = this.$('.js-slider');\n    var opacity = this.model.get('opacity');\n    var inputValue;\n    var sliderValue;\n\n    if ($input.length > 0) {\n      inputValue = $input.val();\n      if (!this._isValidOpacity(inputValue) || (this._isValidOpacity(inputValue) && parseFloat(inputValue) !== opacity)) {\n        $input.val(opacity);\n      }\n    }\n\n    if (typeof $slider.slider('instance') !== 'undefined') {\n      sliderValue = $slider.slider('value');\n      if (typeof sliderValue !== 'undefined' && sliderValue !== this._inverseSliderValue(opacity)) {\n        $slider.slider('value', this._inverseSliderValue(opacity));\n      }\n    }\n  }\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar ColorPicker = require('builder/components/color-picker/color-picker');\nvar template = require('./input-color-picker-view.tpl');\nvar InputColorPickerHeader = require('./input-color-picker-header');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'ramp',\n  'opacity'\n];\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-back': '_onClickBack'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this.model = new Backbone.Model({\n      index: this.options.index,\n      ramp: opts.ramp,\n      opacity: opts.opacity\n    });\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template());\n    this._initViews();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.model, 'change:index', this._onChangeIndex);\n    this.listenTo(this.model, 'change:opacity', this._onOpacityChanged);\n  },\n\n  _initViews: function () {\n    this._headerView = new InputColorPickerHeader({\n      model: this.model,\n      imageEnabled: this.options.imageEnabled\n    });\n\n    this.addView(this._headerView);\n    this._headerView.bind('goToAssetPicker', this._onGoToAssetPicker, this);\n    this.$('.js-header').append(this._headerView.render().$el);\n\n    this._colorPicker = new ColorPicker({\n      value: this._getColor(),\n      opacity: 1,\n      disableOpacity: true\n    });\n\n    this.addView(this._colorPicker);\n    this._colorPicker.bind('change', this._onChangeValue, this);\n    this.$('.js-content').append(this._colorPicker.render().$el);\n  },\n\n  _setColor: function (color) {\n    var ramp = _.clone(this.model.get('ramp'));\n    ramp[this.model.get('index')].color = color;\n    this.model.set('ramp', ramp);\n    this.model.trigger('change', ramp);\n    this.trigger('change', ramp);\n  },\n\n  _getColor: function () {\n    var ramp = this.model.get('ramp');\n    return ramp[this.model.get('index') || 0].color;\n  },\n\n  _onChangeIndex: function () {\n    this._colorPicker.setColor(this._getColor());\n    this.trigger('changeIndex', this.model.get('index'), this);\n  },\n\n  _onChangeValue: function (color) {\n    this._setColor(color.hex);\n  },\n\n  _onClickBack: function (e) {\n    this.killEvent(e);\n    this.trigger('back', this);\n  },\n\n  _onOpacityChanged: function () {\n    var opacity = this.model.get('opacity');\n    this.trigger('change:opacity', opacity);\n  },\n\n  _onGoToAssetPicker: function () {\n    this.trigger('goToAssetPicker');\n  }\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar StackLayoutView = require('builder/components/stack-layout/stack-layout-view');\nvar ColumnListView = require('builder/components/custom-list/column-list/column-list-view');\nvar columnListQuantificationMethodItemTemplate = require('builder/components/custom-list/column-list/column-list-quantification-method-item.tpl');\n\nvar InputQuantitativeRamps = require('./input-quantitative-ramps/main-view');\nvar InputQualitativeRamps = require('./input-qualitative-ramps/main-view');\n\nvar FillConstants = require('builder/components/form-components/_constants/_fill');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar MetricsTracker = require('builder/components/metrics/metrics-tracker');\nvar MetricsTypes = require('builder/components/metrics/metrics-types');\n\nvar StackViewSteps = {\n  COLUMN_LIST_VIEW: 0,\n  INPUT_QUALITATIVE_RAMPS_VIEW: 1,\n  INPUT_QUANTITATIVE_RAMPS_VIEW: 2\n};\n\nvar EXCLUDED_COLUMNS = ['the_geom', 'the_geom_webmercator'];\nvar REQUIRED_OPTS = [\n  'columns',\n  'configModel',\n  'modals',\n  'query',\n  'userModel'\n];\n\nmodule.exports = CoreView.extend({\n  module: 'components:form-components:editors:fill:input-color:input-color-value-content-view',\n\n  initialize: function (options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n\n    this._settings = _.clone(FillConstants.Settings.COLOR);\n    if (this.options.removeByValueCategory) {\n      this._removeCategoryFrom(this._settings.quantifications.items);\n    }\n\n    this._categorizeColumns = options.categorizeColumns;\n    this._imageEnabled = options.imageEnabled;\n    this._hideTabs = options.hideTabs;\n\n    this._column = this._getColumn();\n    this._columnType = this._column && this._column.type;\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.model, 'change:quantification', function () {\n      if (this.model.previous('quantification') === 'category') {\n        delete this.model.attributes.range;\n      }\n\n      if (this.model.get('quantification') !== 'category') {\n        this.model.unset('domain');\n      }\n    });\n  },\n\n  _initViews: function () {\n    var stackViewCollection = new Backbone.Collection([\n      {\n        createStackView: this._createColumnListView.bind(this)\n      },\n      {\n        createStackView: this._createInputQuantitativeRamps.bind(this)\n      },\n      {\n        createStackView: this._createInputQualitativeRamps.bind(this)\n      }\n    ]);\n\n    if (!this._hideTabs || !_.contains(this._hideTabs, FillConstants.Tabs.QUANTIFICATION)) {\n      stackViewCollection.push({ createStackView: this._createQuantificationListView.bind(this) });\n    }\n\n    this._stackLayoutView = new StackLayoutView({\n      collection: stackViewCollection\n    });\n\n    if (this.model.get('attribute')) {\n      var hasDomain = this.model.get('domain') && this.model.get('domain').length;\n      var hasRange = this.model.get('range') && this.model.get('range').length;\n      var showCategories = (this._columnType === 'string') || (hasDomain && hasRange);\n\n      if (showCategories) {\n        this._stackLayoutView.model.set('position', StackViewSteps.INPUT_QUANTITATIVE_RAMPS_VIEW);\n      } else {\n        this._stackLayoutView.model.set('position', StackViewSteps.INPUT_QUALITATIVE_RAMPS_VIEW);\n      }\n    }\n\n    this.$el.append(this._stackLayoutView.render().$el);\n    this.addView(this._stackLayoutView);\n  },\n\n  _createInputQualitativeRamps: function (stackLayoutModel, options) {\n    var view = new InputQualitativeRamps({\n      model: this.model,\n      query: this._query,\n      columns: this._columns,\n      configModel: this._configModel,\n      userModel: this._userModel,\n      modals: this._modals,\n      hideTabs: this._hideTabs,\n      imageEnabled: this._imageEnabled\n    });\n\n    view.bind('back', function (value) {\n      stackLayoutModel.goToStep(StackViewSteps.COLUMN_LIST_VIEW);\n    }, this);\n\n    return view;\n  },\n\n  _createQuantificationListView: function (stackLayoutModel, options) {\n    var view = new ColumnListView({\n      headerTitle: _t('form-components.editors.fill.quantification.title'),\n      stackLayoutModel: stackLayoutModel,\n      itemTemplate: columnListQuantificationMethodItemTemplate,\n      columns: this._settings.quantifications.items,\n      showSearch: false\n    });\n\n    view.bind('selectItem', function (item) {\n      this.model.set('quantification', item.get('val'));\n      stackLayoutModel.goToStep(StackViewSteps.INPUT_QUALITATIVE_RAMPS_VIEW);\n    }, this);\n\n    view.bind('back', function (value) {\n      stackLayoutModel.goToStep(StackViewSteps.COLUMN_LIST_VIEW);\n    }, this);\n\n    return view;\n  },\n\n  _removeCategoryFrom: function (items) {\n    var categoryIndex = items.indexOf('category');\n    if (categoryIndex !== -1) {\n      items.splice(categoryIndex, 1);\n    }\n  },\n\n  _createInputQuantitativeRamps: function (stackLayoutModel, options) {\n    var settings = _.clone(FillConstants.Settings.COLOR_RAMPS);\n    if (this.options.removeByValueCategory) {\n      this._removeCategoryFrom(settings.quantifications.items);\n    }\n\n    var view = new InputQuantitativeRamps({\n      hideTabs: this.options.hideTabs,\n      model: this.model,\n      settings: settings\n    });\n\n    view.bind('switch', function () {\n      stackLayoutModel.goToStep(StackViewSteps.INPUT_QUANTITATIVE_RAMPS_VIEW);\n    }, this);\n\n    view.bind('back', function (value) {\n      stackLayoutModel.prevStep();\n    }, this);\n\n    return view;\n  },\n\n  _getColumn: function (columnName) {\n    return _.find(this._columns, function (column) {\n      return column.label === (columnName || this.model.get('attribute'));\n    }, this);\n  },\n\n  _createColumnListView: function (stackLayoutModel, options) {\n    var view = new ColumnListView({\n      stackLayoutModel: stackLayoutModel,\n      columns: this._filteredColumns(),\n      showSearch: true,\n      typeLabel: 'column'\n    });\n\n    view.bind('selectItem', function (item) {\n      this._onChangeAttribute(item.get('val'), stackLayoutModel);\n    }, this);\n\n    return view;\n  },\n\n  _filteredColumns: function () {\n    var columns = _.reject(this._columns, function (column) {\n      return column.type === 'geometry' || column.type === 'date' || _.contains(EXCLUDED_COLUMNS, column.label);\n    }, this);\n\n    if (this.options.hideNumericColumns) {\n      // eg. color ramps on numeric fields are not currently supported when using torque animations\n      columns = _.reject(columns, function (column) {\n        return column.type === 'number';\n      });\n    }\n\n    return columns;\n  },\n\n  _onChangeAttribute: function (columnName, stackLayoutModel) {\n    var validCategoryTypes = ['string', 'boolean'];\n    var attrsToUnset = ['image', 'fixed', 'quantification', 'opacity'];\n    var wasQuantificationCategory = this.model.get('quantification') === 'category';\n\n    this._column = this._getColumn(columnName);\n    this._columnType = this._column && this._column.type;\n\n    _.each(attrsToUnset, function (attr) {\n      this.model.unset(attr, { silent: true });\n    }, this);\n\n    if (_.contains(validCategoryTypes, this._columnType) || this._categorizeColumns) {\n      this.model.unset('bins', { silent: true });\n      stackLayoutModel.goToStep(StackViewSteps.INPUT_QUANTITATIVE_RAMPS_VIEW);\n    } else if (this._columnType === 'number') {\n      this.model.unset('images', { silent: true });\n      this.model.unset('domain', { silent: true });\n\n      // Unset range if previous quantification was category\n      if (wasQuantificationCategory) {\n        this.model.unset('range', { silent: true });\n      }\n\n      stackLayoutModel.goToStep(StackViewSteps.INPUT_QUALITATIVE_RAMPS_VIEW);\n    }\n\n    var attrs = {\n      attribute: columnName,\n      attribute_type: this._columnType\n    };\n\n    this.model.set(attrs);\n    MetricsTracker.track(MetricsTypes.STYLED_BY_VALUE, attrs);\n  }\n});\n","var _ = require('underscore');\nvar $ = require('jquery');\nvar CoreView = require('backbone/core-view');\nvar template = require('./input-color.tpl');\nvar InputDialogContent = require('./input-color-dialog-content');\nvar Utils = require('builder/helpers/utils');\nvar rampList = require('./input-quantitative-ramps/ramps');\nvar ImageLoaderView = require('builder/components/img-loader-view');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\nvar FillConstants = require('builder/components/form-components/_constants/_fill');\n\nmodule.exports = CoreView.extend({\n  tagName: 'section',\n  className: 'CDB-OptionInput-item',\n\n  events: {\n    'click': '_onClick'\n  },\n\n  initialize: function (opts) {\n    if (this.options.editorAttrs) {\n      this._editorAttrs = this.options.editorAttrs;\n      this._imageEnabled = this._editorAttrs.imageEnabled;\n      this._help = this._editorAttrs.help;\n      var hidePanes = this._editorAttrs.hidePanes;\n\n      if (hidePanes && !_.contains(hidePanes, FillConstants.Panes.BY_VALUE)) {\n        if (!opts.configModel) throw new Error('configModel param is required');\n        if (!opts.userModel) throw new Error('userModel param is required');\n        if (!opts.modals) throw new Error('modals param is required');\n        if (!opts.query) throw new Error('query param is required');\n      }\n    }\n\n    if (!opts.columns) throw new Error('columns is required');\n\n    this._columns = opts.columns;\n    this._configModel = opts.configModel;\n    this._userModel = opts.userModel;\n    this._modals = opts.modals;\n    this._query = opts.query;\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    if (this.options.disabled) {\n      this.$el.addClass('is-disabled');\n    }\n\n    var column = this._getColumn();\n    var columnType = column && column.type;\n    var hasDomain = this.model.get('domain') && this.model.get('domain').length;\n\n    if (this.model.get('range') && _.isString(this.model.get('range'))) {\n      this._migrateRange();\n    }\n\n    var hasRange = this.model.get('range') && this.model.get('range').length;\n    var showCategories = (columnType === 'string') || (hasDomain && hasRange);\n    var imageURL = this._getImageURL();\n    var categoryImagesPresent = this._iconStylingEnabled() && !this._getImageURL() && this._categoryImagesPresent();\n\n    this.$el.html(template({\n      categoryImagesPresent: categoryImagesPresent,\n      imageURL: imageURL,\n      kind: this._getKind(),\n      showCategories: showCategories,\n      value: this._getValue(),\n      opacity: this._getOpacity(),\n      help: this._help || ''\n    }));\n\n    this._initViews();\n\n    return this;\n  },\n\n  _initViews: function () {\n    this.iconView = new ImageLoaderView({\n      imageClass: 'Editor-fillImageAsset',\n      imageUrl: this._getImageURL(),\n      color: this.model.get('fixed')\n    });\n    this.addView(this.iconView);\n    this.$('.js-image-container').append(this.iconView.render().el);\n\n    if (this._help) {\n      var tooltip = new TipsyTooltipView({\n        el: this.$('.js-help'),\n        gravity: 'w',\n        title: function () {\n          return $(this).data('tooltip');\n        },\n        offset: 8\n      });\n      this.addView(tooltip);\n    }\n  },\n\n  _categoryImagesPresent: function () {\n    var images = this.model.get('images');\n\n    for (var i in images) {\n      if (!_.isEmpty(images[i])) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n\n  _iconStylingEnabled: function () {\n    return this._imageEnabled;\n  },\n\n  _getKind: function () {\n    return this.model.get('kind') && this._iconStylingEnabled() ? this.model.get('kind') : '';\n  },\n\n  _getImageURL: function () {\n    return this.model.get('image') && this._iconStylingEnabled() ? this.model.get('image') : '';\n  },\n\n  // Converts reference to the old color ramp to the full color list\n  _migrateRange: function () {\n    var rangeName = this.model.get('range');\n    var bins = this.model.get('bins') || 3;\n\n    if (rampList[rangeName] && rampList[rangeName][bins]) {\n      this.model.set('range', rampList[rangeName][bins]);\n    }\n  },\n\n  _getColumn: function () {\n    return _.find(this._columns, function (column) {\n      return column.label === this.model.get('attribute');\n    }, this);\n  },\n\n  _createContentView: function () {\n    var view = new InputDialogContent({\n      configModel: this._configModel,\n      userModel: this._userModel,\n      modals: this._modals,\n      query: this._query,\n      model: this.model,\n      columns: this._columns,\n      editorAttrs: this._editorAttrs\n    });\n\n    view.bind('change', this.render, this);\n\n    return view;\n  },\n\n  _onClick: function (e) {\n    if (this.options.disabled) {\n      return;\n    }\n    this.trigger('click', this.model);\n  },\n\n  _initBinds: function () {\n    var self = this;\n\n    this.model.set('createContentView', function () {\n      return self._createContentView();\n    }).bind(this);\n\n    this.model.on('change:images', this.render, this);\n    this.model.on('change:selected', this._onToggleSelected, this);\n    this.model.on('change:opacity', this.render, this);\n    this.model.on('change:fixed', this.render, this);\n    this.model.on('change:fixed', this._updateColor, this);\n    this.model.on('change:image', this.render, this);\n    this.model.on('change:range', this.render, this);\n  },\n\n  _updateColor: function () {\n    this.iconView && this.iconView.updateImageColor(this.model.get('fixed'));\n  },\n\n  _getValue: function () {\n    var value = this.model.get('fixed');\n\n    if (value) {\n      value = Utils.hexToRGBA(value, this._getOpacity());\n    }\n\n    if (this.model.get('range') && this.model.get('range').length) {\n      value = _.map(this.model.get('range'), function (color) {\n        return Utils.hexToRGBA(color, this._getOpacity());\n      }, this);\n    }\n\n    return value;\n  },\n\n  _getOpacity: function () {\n    return this.model.get('opacity') != null ? this.model.get('opacity') : 1;\n  },\n\n  _onToggleSelected: function () {\n    this.$el.toggleClass('is-active', this.model.get('selected'));\n  }\n});\n","var _ = require('underscore');\nvar $ = require('jquery');\nvar ImageLoaderView = require('builder/components/img-loader-view');\nvar CustomListItemView = require('builder/components/custom-list/custom-list-item-view');\n\nmodule.exports = CustomListItemView.extend({\n  module: 'components:form-components:editors:fill:input-color:input-qualitative-ramps:categories-list:list-item-view:categories-list-item-view',\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    var name = this.model.getName() == null ? 'null' : this.model.getName();\n\n    this.$el.append(\n      this.options.template(\n        _.extend({\n          typeLabel: this.options.typeLabel,\n          isSelected: this.model.get('selected'),\n          isDisabled: this.model.get('disabled'),\n          isDestructive: this.model.get('destructive'),\n          name: name,\n          val: this.model.getValue(),\n          options: this.model.get('renderOptions'),\n          image: this.model.get('image'),\n          imageEnabled: this.options.imageEnabled\n        })\n      )\n    );\n\n    this._loadImages();\n\n    this.$el\n      .attr('data-val', this.model.getValue())\n      .toggleClass('is-disabled', !!this.model.get('disabled'));\n\n    return this;\n  },\n\n  _loadImages: function () {\n    this.iconView = new ImageLoaderView({\n      imageClass: 'CDB-Text u-actionTextColor js-assetPicker',\n      imageUrl: this.model.get('image'),\n      color: this.model.get('val')\n    });\n    this.addView(this.iconView);\n    this.$('.js-image-container').append(this.iconView.render().el);\n  },\n\n  _onClick: function (ev) {\n    this.killEvent(ev);\n    var $target = $(ev.target);\n    var isIconClicked = $target.closest('.js-image-container').length > 0;\n    var isImgClicked = $target.closest('.js-assetPicker').length > 0;\n\n    this.model.set({\n      selectedClass: isImgClicked || isIconClicked ? ['js-assetPicker'] : [],\n      selected: true\n    });\n  }\n});\n","var CustomListView = require('builder/components/custom-list/custom-list-view');\n\nmodule.exports = CustomListView.extend({\n  module: 'components:form-components:editors:fill:input-color:input-qualitative-ramps:categories-list:list-view:categories-custom-list-view',\n\n  _renderItem: function (model, index) {\n    var ItemViewClass = this.options.itemView;\n    var imageEnabled = this.options.imageEnabled && index < this.options.maxValues; // Disable image for the last item (\"Others\")\n\n    var itemView = new ItemViewClass({\n      model: model,\n      typeLabel: this.options.typeLabel,\n      template: this.options.itemTemplate,\n      imageEnabled: imageEnabled\n    });\n    this.$('.js-list').append(itemView.render().el);\n    this.addView(itemView);\n\n    // 'customEvent' comes from custom list component\n    itemView.bind('customEvent', function (eventName, item) {\n      this.trigger('customEvent', eventName, item, this);\n    }, this);\n  }\n});\n","var CustomView = require('builder/components/custom-list/custom-view.js');\nvar itemTemplate = require('builder/components/custom-list/custom-list-item.tpl');\nvar CategoriesListItemView = require('../list-item-view/categories-list-item-view');\nvar CategoriesListView = require('./categories-custom-list-view');\n\nmodule.exports = CustomView.extend({\n  module: 'components:form-components:editors:fill:input-color:input-qualitative-ramps:categories-list:list-view:categories-list-view',\n\n  options: {\n    showSearch: true,\n    allowFreeTextInput: false,\n    typeLabel: 'column',\n    itemTemplate: itemTemplate,\n    itemView: CategoriesListItemView\n  },\n\n  _renderList: function () {\n    this._listView = new CategoriesListView({\n      model: this.model,\n      allowFreeTextInput: this.options.allowFreeTextInput,\n      collection: this.collection,\n      typeLabel: this.options.typeLabel,\n      itemView: this.options.itemView,\n      itemTemplate: this.options.itemTemplate,\n      size: this.options.size,\n      maxValues: this.options.maxValues,\n      imageEnabled: this.options.imageEnabled\n    });\n    this.$el.append(this._listView.render().el);\n    this._listView.highlight();\n    this.addView(this._listView);\n\n    // 'customEvent' comes from custom list component\n    this._listView.bind('customEvent', function (eventName, item) {\n      this.trigger(eventName, item, this);\n    }, this);\n  }\n});\n","var _ = require('underscore');\nvar $ = require('jquery');\nvar CoreView = require('backbone/core-view');\nvar Utils = require('builder/helpers/utils');\nvar CategoriesListView = require('./categories-list-view');\nvar CustomListCollection = require('builder/components/custom-list/custom-list-collection');\nvar template = require('./input-color-categories-list-view.tpl');\nvar itemTemplate = require('../list-item-view/categories-list-item.tpl');\n\nmodule.exports = CoreView.extend({\n  module: 'components:form-components:editors:fill:input-color:input-qualitative-ramps:categories-list:list-view:input-categories-list-view',\n\n  events: {\n    'click .js-color': '_onClickColor',\n    'click .js-back': '_onClickBack'\n  },\n\n  initialize: function (opts) {\n    this._showSearch = opts.showSearch || false;\n    this._typeLabel = opts.typeLabel;\n    this._maxValues = opts.maxValues;\n    this._requiredNumberOfColors = opts.requiredNumberOfColors;\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    this.$el.append(template({\n      range: this.model.get('range'),\n      attribute: this.model.get('attribute'),\n      requiredNumberOfColors: this._requiredNumberOfColors\n    }));\n\n    this._setupCollection();\n    this._initBinds();\n\n    this._listView = new CategoriesListView({\n      itemTemplate: itemTemplate,\n      collection: this._collection,\n      showSearch: this._showSearch,\n      typeLabel: this._typeLabel,\n      maxValues: this._maxValues,\n      imageEnabled: this.options.imageEnabled\n    });\n\n    this.addView(this._listView);\n\n    this.$('.js-content').append(this._listView.render().$el);\n\n    return this;\n  },\n\n  _setupCollection: function () {\n    this._collection = new CustomListCollection(null, { silent: false });\n\n    var range = this.model.get('range');\n    var domain = this.model.get('domain');\n    var images = this.model.get('images');\n\n    if (range && range.length && domain && domain.length) {\n      var categories = _.map(range, function (color, i) {\n        var isNull = domain[i] == null || (_.isString(domain[i]) && Utils.isBlank(domain[i]));\n        var label = domain[i];\n\n        if (i >= this._maxValues) {\n          label = _t('form-components.editors.fill.input-qualitative-ramps.others');\n        } else if (isNull) {\n          label = _t('form-components.editors.fill.input-qualitative-ramps.null');\n        }\n\n        var attrs = {\n          label: label,\n          val: color\n        };\n\n        if (images && images.length) {\n          attrs['image'] = images[i];\n        }\n\n        return attrs;\n      }, this);\n\n      this._collection.reset(categories);\n    }\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.model, 'change:range', this.render);\n    this.listenTo(this.model, 'change:domain', this.render);\n    this.listenTo(this.model, 'change:index', this.render);\n    this.listenTo(this._collection, 'change:selected', this._onSelectItem);\n  },\n\n  _onClickBack: function (e) {\n    this.killEvent(e);\n    this.trigger('back', this);\n  },\n\n  _onClickColor: function (e) {\n    this.killEvent(e);\n\n    var index = $(e.target).index();\n    var color = this._collection.at(index);\n    color && this._onSelectItem(color);\n  },\n\n  _onSelectItem: function (item) {\n    var selectedItem = {\n      index: this._collection.indexOf(item),\n      target: _.contains(item.get('selectedClass'), 'js-assetPicker') ? 'asset' : 'color'\n    };\n\n    this.trigger('selectItem', selectedItem, this);\n  }\n});\n","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\n\nmodule.exports = CoreView.extend({\n  module: 'components:form-components:editors:fill:input-color:input-qualitative-ramps:color-ramps-list:list-item-view:color-ramps-list-item-view',\n\n  className: 'CDB-ListDecoration-item CustomList-item CustomList-item--invert js-listItem',\n\n  tagName: 'li',\n\n  events: {\n    'mouseenter': '_onMouseEnter',\n    'mouseleave': '_onMouseLeave',\n    'click .js-listItemLink': '_onClick'\n  },\n\n  initialize: function (opts) {\n    this.options = _.extend({}, this.options, opts);\n    this.listenTo(this.model, 'change', this.render);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    this.$el.append(\n      this.options.template(\n        {\n          typeLabel: this.options.typeLabel,\n          isSelected: this.model.get('selected'),\n          isDisabled: this.model.get('disabled'),\n          isDestructive: this.model.get('destructive'),\n          name: this.model.getName(),\n          val: this.model.getValue(),\n          options: this.model.get('renderOptions')\n        }\n      )\n    );\n\n    this.$el\n      .attr('data-val', this.model.getValue())\n      .toggleClass('is-disabled', !!this.model.get('disabled'))\n      .toggleClass('is-selected', !!this.model.get('selected'));\n\n    return this;\n  },\n\n  _onMouseLeave: function () {\n    this.$el.removeClass('is-highlighted');\n  },\n\n  _onMouseEnter: function () {\n    this.$el.addClass('is-highlighted');\n  },\n\n  _onClick: function (ev) {\n    this.killEvent(ev);\n\n    if (this.model.get('selected')) {\n      this.trigger('customEvent', 'customize', this.model.getValue(), this);\n    } else {\n      this.model.set('selected', true);\n    }\n  }\n});\n","var _ = require('underscore');\nvar cdb = require('internal-carto.js');\nvar CoreView = require('backbone/core-view');\n\nvar customColorRampTemplate = require('./color-ramp-custom-item.tpl');\nvar colorRampsListTemplate = require('./color-ramps-list-view.tpl');\nvar colorRampsListItemTemplate = require('../list-item-view/color-ramps-list-item.tpl');\nvar ColorRampsListItemView = require('../list-item-view/color-ramps-list-item-view');\n\nvar CustomListView = require('builder/components/custom-list/custom-view');\nvar CustomListCollection = require('builder/components/custom-list/custom-list-collection');\n\nvar CartoColor = require('builder/helpers/carto-color');\n\nvar EVENTS = {\n  CUSTOM_COLOR: 'custom-color',\n  RAMP_SELECTED: 'ramp-selected',\n  CUSTOMIZE: 'customize'\n};\n\nmodule.exports = CoreView.extend({\n  module: 'components:form-components:editors:fill:input-color:input-qualitative-ramps:color-ramps-list:list-view:color-ramps-list-view',\n\n  events: {\n    'click .js-customize': '_onClickCustomize',\n    'click .js-clear': '_onClickClear',\n    'click .js-customRamp': '_onClickCustomRamp',\n    'click .js-back': '_onClickBack'\n  },\n\n  initialize: function (options) {\n    this.model = options.model;\n    this._maxValues = options.maxValues;\n    this._requiredNumberOfColors = options.requiredNumberOfColors;\n\n    this._initModels();\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this.$el.empty();\n    this.$el.append(colorRampsListTemplate());\n\n    var customRamp = this._customRamp.get('range');\n\n    this._listView = new CustomListView({\n      collection: this.collection,\n      showSearch: false,\n      typeLabel: this._typeLabel,\n      itemTemplate: colorRampsListItemTemplate,\n      itemView: ColorRampsListItemView\n    });\n\n    this._listView.bind('customize', function (ramp) {\n      this.trigger('customize', ramp, this);\n    }, this);\n\n    this.$('.js-rampsList').append(this._listView.render().el);\n    this.addView(this._listView);\n\n    if (customRamp && customRamp.length) {\n      this.$('.js-customList').addClass('is-customized');\n      this.$('.js-customList').prepend(customColorRampTemplate({\n        customRamp: customRamp\n      }));\n    } else {\n      var selectedRamp = this.collection.getSelectedItem();\n\n      if (!selectedRamp) {\n        selectedRamp = this.collection.first();\n      }\n\n      this._selectRamp(selectedRamp);\n    }\n\n    return this;\n  },\n\n  _selectRamp: function (item) {\n    if (!item) {\n      return;\n    }\n\n    var range = item.get('val');\n\n    // 'manually' select the item to preserve scroll position\n    this.$('.js-listItemLink').removeClass('is-selected');\n    this.$('.js-listItem[data-val=\"' + range.join(',') + '\"] .js-listItemLink').addClass('is-selected');\n  },\n\n  _initModels: function () {\n    this._customRamp = new cdb.core.Model();\n    this._setupCollection();\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.collection, 'change:selected', this._onSelectItem);\n  },\n\n  _onSelectItem: function (item) {\n    var range = item.get('val');\n    this.model.set('range', range);\n    this.trigger(EVENTS.RAMP_SELECTED, range, this);\n  },\n\n  _setupCollection: function () {\n    var ramps = CartoColor.getQualitativeRamps(this._requiredNumberOfColors);\n    var range = this.model.get('range');\n\n    ramps = _.map(ramps, function (ramp, name) {\n      var isSelected = false;\n\n      if (ramp && ramp.length && range && range.length) {\n        isSelected = ramp.join().toLowerCase() === range.join().toLowerCase();\n      }\n\n      if (!ramp) {\n        return null;\n      }\n\n      return {\n        selected: isSelected,\n        name: name,\n        val: ramp\n      };\n    }, this);\n\n    this.collection = new CustomListCollection(_.compact(ramps), { silent: false });\n\n    if (!this.collection.getSelectedItem()) {\n      this._customRamp.set('range', this.model.get('range'));\n    }\n  },\n\n  _onClickCustomize: function (e) {\n    this.killEvent(e);\n    var ramp = this.collection.getSelectedItem();\n    this._customRamp.set('range', ramp);\n    this.trigger(EVENTS.CUSTOMIZE, ramp, this);\n  },\n\n  _onClickClear: function (e) {\n    this.killEvent(e);\n\n    this._customRamp.set('range', null);\n\n    if (!this.collection.getSelectedItem()) {\n      this.collection.first().set('selected', true, { silent: true });\n    }\n\n    this.render();\n    this._listView.highlight();\n  },\n\n  _onClickCustomRamp: function (e) {\n    this.killEvent(e);\n\n    if (this._customRamp.get('range')) {\n      this.trigger('customize', this.collection.getSelectedItem(), this);\n    }\n  }\n},\n{\n  EVENTS: EVENTS\n});\n","var _ = require('underscore');\nvar cdb = require('internal-carto.js');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar mainViewTemplate = require('./main-view.tpl');\n\nvar StackLayoutView = require('builder/components/stack-layout/stack-layout-view');\nvar AssetPickerView = require('../assets-picker/input-asset-picker-view');\n\nvar ColorRampsListView = require('./color-ramps-list/list-view/color-ramps-list-view');\nvar CategoriesListView = require('./categories-list/list-view/input-categories-list-view');\nvar InputColorPickerView = require('../input-color-picker/input-color-picker-view');\nvar FillConstants = require('builder/components/form-components/_constants/_fill');\n\nvar CartoColor = require('cartocolor');\nvar MAX_VALUES = 10;\nvar DEFAULT_COLORS = _.clone(CartoColor.Prism[MAX_VALUES + 1]); // max values + \"others\" color\n\nvar queryTemplate = _.template('SELECT <%= column %>, count(<%= column %>) FROM (<%= sql %>) _table_sql GROUP BY <%= column %> ORDER BY count DESC, <%= column %> ASC LIMIT <%= max_values %>');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'columns',\n  'configModel',\n  'modals',\n  'query',\n  'userModel'\n];\n\nvar STEPS = {\n  CATEGORIES_RAMPS_VIEW: 0,\n  CATEGORIES_LIST_VIEW: 1,\n  COLOR_PICKER_VIEW: 2,\n  IMAGE_PICKER_VIEW: 3\n};\n\nmodule.exports = CoreView.extend({\n  module: 'components:form-components:editors:fill:input-color:input-qualitative-ramps:main-view',\n\n  events: {\n    'click .js-back': '_onClickBack',\n    'click .js-quantification': '_onClickQuantification'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n    this._imageEnabled = opts.imageEnabled;\n    this._hideTabs = opts.hideTabs;\n    this._query = opts.query;\n    this._viewModel = new Backbone.Model({\n      step: 0,\n      status: 'idle'\n    });\n\n    this.listenTo(this.model, 'change:attribute', this._fetchColumns);\n    this.listenTo(this._viewModel, 'change:status', this.render);\n\n    if (this.model.hasChanged('quantification')) {\n      this._fetchColumns();\n    }\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    var column = this._getColumn();\n    var columnType = column && column.type;\n    var hideQuantification = !!(this._hideTabs && _.contains(this._hideTabs, FillConstants.Tabs.QUANTIFICATION));\n\n    this.$el.append(mainViewTemplate({\n      status: this._viewModel.get('status'),\n      columnType: columnType,\n      attribute: this.model.get('attribute'),\n      quantification: this.model.get('quantification') || 'category',\n      hideQuantification: hideQuantification\n    }));\n\n    this._generateStackLayoutView();\n\n    return this;\n  },\n\n  _generateStackLayoutView: function () {\n    var currentStep = this._viewModel.get('step');\n    var stackViewCollection = new Backbone.Collection([\n      {\n        selected: currentStep === STEPS.CATEGORIES_RAMPS_VIEW,\n        createStackView: this._createCategoriesRampsListView.bind(this)\n      },\n      {\n        selected: currentStep === STEPS.CATEGORIES_LIST_VIEW,\n        createStackView: this._createRangeListView.bind(this)\n      },\n      {\n        selected: currentStep === STEPS.COLOR_PICKER_VIEW,\n        createStackView: this._createColorPickerView.bind(this)\n      }\n    ]);\n\n    if (this._iconStylingEnabled()) {\n      stackViewCollection.add({\n        selected: currentStep === STEPS.IMAGE_PICKER_VIEW,\n        createStackView: this._createImagePickerView.bind(this)\n      });\n    }\n\n    this._stackLayoutView = new StackLayoutView({ collection: stackViewCollection });\n    this._stackLayoutView.bind('positionChanged', this._onStackLayoutPositionChange, this);\n\n    this.$('.js-content').append(this._stackLayoutView.render().$el);\n    this.addView(this._stackLayoutView);\n  },\n\n  _computeRequiredNumberOfColors: function () {\n    return this.model.get('domain')\n      ? Math.min(this.model.get('domain').length, MAX_VALUES + 1)\n      : MAX_VALUES + 1;\n  },\n\n  _onStackLayoutPositionChange: function () {\n    this.$('.js-prevStep').toggle(this._stackLayoutView.getCurrentPosition() === 0);\n  },\n\n  _iconStylingEnabled: function () {\n    return this._imageEnabled;\n  },\n\n  _getColumn: function () {\n    return _.find(this._columns, function (column) {\n      return column.label === this.model.get('attribute');\n    }, this);\n  },\n\n  _fetchColumns: function () {\n    if (!this.model.get('attribute')) {\n      return;\n    }\n\n    if (this._query) {\n      this._setViewStatus('loading');\n\n      var sql = new cdb.SQL({\n        user: this._configModel.get('user_name'),\n        sql_api_template: this._configModel.get('sql_api_template'),\n        api_key: this._configModel.get('api_key')\n      });\n\n      sql.execute(\n        queryTemplate({\n          sql: this._query,\n          column: this.model.get('attribute'),\n          max_values: MAX_VALUES + 1\n        }),\n        null,\n        {\n          success: this._onQueryDone.bind(this),\n          error: function () {\n            this._setViewStatus('error');\n          }.bind(this)\n        }\n      );\n    } else {\n      this._onQueryDone();\n    }\n  },\n\n  _onQueryDone: function (data) {\n    data = data || {};\n    this._updateRangeAndDomain(data.rows);\n    this._setViewStatus('idle');\n  },\n\n  _updateRangeAndDomain: function (rows) {\n    rows = rows || [];\n    var categoryNames = _.pluck(rows, this.model.get('attribute'));\n\n    var domain = _.map(categoryNames, function (name, i) {\n      return name;\n    }).slice(0, MAX_VALUES);\n\n    if (this.model.get('attribute_type') !== 'number') {\n      domain = domain.filter(function (item, pos, self) {\n        return self.indexOf(item) === pos;\n      }).map(_quote);\n    }\n\n    var range = _.map(categoryNames, function (name, i) {\n      return (i < MAX_VALUES) ? DEFAULT_COLORS[i] : DEFAULT_COLORS[MAX_VALUES + 1];\n    });\n\n    if (this._iconStylingEnabled()) {\n      var images = _.map(categoryNames, function () {\n        return '';\n      });\n\n      this.model.attributes.images = images;\n    }\n\n    this.model.set({\n      range: range,\n      domain: domain\n    });\n  },\n\n  _setViewStatus: function (status) {\n    var attrs = {\n      status: status\n    };\n\n    if (status === 'loading') {\n      attrs.step = 0;\n    }\n\n    this._viewModel.set(attrs);\n  },\n\n  _getRange: function () {\n    return _.map(this.model.get('range'), function (color, i) {\n      var range = {\n        val: color,\n        color: color,\n        title: this.model.get('domain')[i]\n      };\n\n      if (this._iconStylingEnabled()) {\n        range.image = this.model.get('images')[i];\n      }\n\n      return range;\n    }, this);\n  },\n\n  _updateRange: function (categories) {\n    var range = _.clone(this.model.get('range'));\n    range[this._index] = categories[this._index].color;\n    this.model.set('range', range);\n  },\n\n  _createColorPickerView: function (stackLayoutModel, opts) {\n    var range = this._getRange();\n\n    var opacity = typeof this.model.get('opacity') !== 'undefined' ? this.model.get('opacity') : 1;\n    var imageEnabled = this.options.imageEnabled && this._index < MAX_VALUES; // Disable image for the last item (\"Others\")\n\n    var view = new InputColorPickerView({\n      index: this._index,\n      ramp: range,\n      opacity: opacity,\n      imageEnabled: imageEnabled\n    });\n\n    view.bind('back', function (value) {\n      stackLayoutModel.prevStep();\n    }, this);\n\n    view.bind('goToAssetPicker', function () {\n      stackLayoutModel.nextStep();\n    }, this);\n\n    view.bind('change', this._updateRange, this);\n\n    view.bind('changeIndex', function (index) {\n      this._index = index;\n      this.model.set('index', index);\n    }, this);\n\n    view.bind('change:opacity', function (opacity) {\n      this.model.set('opacity', opacity);\n    }, this);\n\n    return view;\n  },\n\n  _createRangeListView: function (stackLayoutModel, opts) {\n    var view = new CategoriesListView({\n      model: this.model,\n      maxValues: MAX_VALUES,\n      imageEnabled: this._iconStylingEnabled(),\n      requiredNumberOfColors: this._computeRequiredNumberOfColors()\n    });\n\n    view.bind('back', function (value) {\n      stackLayoutModel.prevStep();\n    }, this);\n\n    view.bind('selectItem', function (item) {\n      this._index = item.index;\n\n      if (item.target === 'asset') {\n        stackLayoutModel.goToStep(STEPS.IMAGE_PICKER_VIEW);\n      } else {\n        stackLayoutModel.goToStep(STEPS.COLOR_PICKER_VIEW);\n      }\n    }, this);\n\n    return view;\n  },\n\n  _createCategoriesRampsListView: function (stackLayoutModel, opts) {\n    var view = new ColorRampsListView({\n      model: this.model,\n      maxValues: MAX_VALUES,\n      requiredNumberOfColors: this._computeRequiredNumberOfColors()\n    });\n\n    var eventsToListen = [\n      ColorRampsListView.EVENTS.RAMP_SELECTED,\n      ColorRampsListView.EVENTS.CUSTOMIZE,\n      ColorRampsListView.EVENTS.CUSTOM_COLOR\n    ].join(' ');\n\n    view.on(eventsToListen, function () {\n      stackLayoutModel.goToStep(STEPS.CATEGORIES_LIST_VIEW);\n    }, this);\n\n    return view;\n  },\n\n  _createImagePickerView: function (stackLayoutModel, opts) {\n    var range = this._getRange();\n\n    var view = new AssetPickerView({\n      userModel: this._userModel,\n      configModel: this._configModel,\n      index: this._index,\n      ramp: range,\n      modals: this._modals,\n      imageEnabled: this._iconStylingEnabled()\n    });\n\n    view.bind('back', function (value) {\n      stackLayoutModel.goToStep(STEPS.CATEGORIES_LIST_VIEW);\n    }, this);\n\n    view.bind('goToColorPicker', function () {\n      stackLayoutModel.prevStep();\n    }, this);\n\n    view.bind('changeIndex', function (index) {\n      this._index = index;\n    }, this);\n\n    if (this._iconStylingEnabled()) {\n      view.bind('change:image', this._onImageChanged, this);\n    }\n\n    return view;\n  },\n\n  _onImageChanged: function (data) {\n    var images = _.clone(this.model.get('images'));\n    images[this._index] = data.url;\n    this.model.set('images', images);\n  },\n\n  _onClickQuantification: function (e) {\n    this.killEvent(e);\n    this.trigger('selectQuantification', this);\n  },\n\n  _onClickBack: function (e) {\n    this.killEvent(e);\n    this.trigger('back', this);\n  }\n}, {\n  MAX_VALUES: MAX_VALUES\n});\n\nfunction _quote (c) {\n  if (c && c !== true) {\n    return '\"' + c.toString().replace(/\"/g, '\\\\\"').replace(/\\n/g, '\\\\n') + '\"';\n  }\n  return c;\n}\n","var Backbone = require('backbone');\nvar _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar InputRampListView = require('./input-ramp-list-view');\nvar StackLayoutView = require('builder/components/stack-layout/stack-layout-view');\nvar InputColorPickerView = require('../input-color-picker/input-color-picker-view');\n\nmodule.exports = CoreView.extend({\n  module: 'components:form-components:editors:fill:input-color:input-quantitative-ramps:input-ramp-content-view',\n\n  events: {\n    'click .js-back': '_onClickBack'\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n    return this;\n  },\n\n  _initViews: function () {\n    var self = this;\n\n    var stackViewCollection = new Backbone.Collection([{\n      createStackView: function (stackLayoutModel, opts) {\n        return self._createInputRampListView(stackLayoutModel, opts).bind(self);\n      }\n    }, {\n      createStackView: function (stackLayoutModel, opts) {\n        return self._createColorPickerView(stackLayoutModel, opts).bind(self);\n      }\n    }]);\n\n    this._stackLayoutView = new StackLayoutView({\n      collection: stackViewCollection\n    });\n\n    this.$el.append(this._stackLayoutView.render().$el);\n    this.addView(this._stackLayoutView);\n  },\n\n  _createColorPickerView: function (stackLayoutModel, opts) {\n    var range = _.map(this.model.get('range'), function (color, i) {\n      return {\n        val: color,\n        color: color,\n        title: this.model.get('attribute')\n      };\n    }, this);\n\n    var opacity = (typeof this.model.get('opacity') !== 'undefined') ? this.model.get('opacity') : 1;\n\n    var view = new InputColorPickerView({\n      index: 0,\n      ramp: range,\n      opacity: opacity\n    });\n\n    view.bind('back', function (value) {\n      stackLayoutModel.prevStep();\n    }, this);\n\n    view.bind('change', this._updateRange, this);\n    view.bind('change:opacity', function (opacity) {\n      this.model.set('opacity', opacity);\n    }, this);\n\n    return view;\n  },\n\n  _createInputRampListView: function (stackLayoutModel, opts) {\n    var view = new InputRampListView({\n      model: this.model,\n      showSearch: this.options.showSearch || false,\n      typeLabel: this.options.typeLabel\n    });\n\n    view.bind('customize', function (value) {\n      stackLayoutModel.nextStep();\n    }, this);\n\n    view.bind('change_ramp', this._updateRamp, this);\n    view.bind('change', this._updateRange, this);\n\n    view.bind('back', function (value) {\n      this.trigger('back', this);\n    }, this);\n\n    view.bind('switch', function (value) {\n      this.trigger('switch', this);\n    }, this);\n\n    view.bind('selectItem', function (item) {\n      this.trigger('selectItem', item.get('val'), this);\n    }, this);\n\n    view.bind('selectBins', function (item) {\n      this.trigger('selectBins', this);\n    }, this);\n\n    view.bind('selectQuantification', function (item) {\n      this.trigger('selectQuantification', this);\n    }, this);\n\n    return view;\n  },\n\n  _updateRamp: function (ramp) {\n    this.model.set('range', ramp);\n  },\n\n  _updateRange: function (categories) {\n    this.model.set('range', _.pluck(categories, 'color'));\n  },\n\n  _onClickBack: function (e) {\n    this.killEvent(e);\n    this.trigger('back', this);\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\n\nmodule.exports = CoreView.extend({\n\n  className: 'CDB-ListDecoration-item CustomList-item CustomList-item--invert js-listItem',\n  tagName: 'li',\n\n  events: {\n    'mouseenter': '_onMouseEnter',\n    'mouseleave': '_onMouseLeave',\n    'click .js-listItemLink': '_onClick',\n    'click .js-invert': '_onClickInvert'\n  },\n\n  initialize: function (opts) {\n    this.options = _.extend({}, this.options, opts);\n    this.listenTo(this.model, 'change', this.render);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    this.$el.append(\n      this.options.template(\n        _.extend({\n          typeLabel: this.options.typeLabel,\n          isSelected: this.model.get('selected'),\n          isInverted: this.model.get('inverted'),\n          isDisabled: this.model.get('disabled'),\n          isDestructive: this.model.get('destructive'),\n          name: this.model.getName(),\n          val: this.model.getValue(),\n          options: this.model.get('renderOptions')\n        })\n      )\n    );\n\n    this.$el\n      .attr('data-val', this.model.getValue())\n      .toggleClass('is-disabled', !!this.model.get('disabled'))\n      .toggleClass('is-selected', !!this.model.get('selected'))\n      .toggleClass('is-inverted', !!this.model.get('inverted'));\n\n    return this;\n  },\n\n  _onMouseLeave: function () {\n    this.$el.removeClass('is-highlighted');\n  },\n\n  _onMouseEnter: function () {\n    this.$el.addClass('is-highlighted');\n  },\n\n  _onClick: function (ev) {\n    this.killEvent(ev);\n\n    if (this.model.get('selected')) {\n      this.trigger('customEvent', 'customize', this.model.get('val'), this);\n    } else {\n      this.model.set('selected', true);\n    }\n  },\n\n  _onClickInvert: function (e) {\n    this.killEvent(e);\n    this.model.set('inverted', !this.model.get('inverted'));\n    this.trigger('customEvent', 'invert', this.model, this);\n  }\n});\n","var _ = require('underscore');\nvar cdb = require('internal-carto.js');\nvar CoreView = require('backbone/core-view');\nvar CustomListView = require('builder/components/custom-list/custom-view');\nvar CustomListCollection = require('builder/components/custom-list/custom-list-collection');\nvar rampItemTemplate = require('./input-ramp-list-item-template.tpl');\nvar rampItemView = require('./input-ramp-list-item-view');\nvar customRampTemplate = require('./custom-ramp-template.tpl');\nvar rampList = require('cartocolor');\nvar template = require('./input-ramp-content-view.tpl');\n\nvar DEFAULT_RAMP_ITEM_COLOR = '#CCCCCC';\n\nmodule.exports = CoreView.extend({\n  module: 'components:form-components:editors:fill:input-color:input-quantitative-ramps:input-ramp-list-view',\n\n  events: {\n    'click .js-customize': '_onClickCustomize',\n    'click .js-clear': '_onClickClear',\n    'click .js-customRamp': '_onClickCustomRamp',\n    'click .js-back': '_onClickBack',\n    'click .js-switch': '_onClickSwitch',\n    'click .js-quantification': '_onClickQuantification',\n    'click .js-bins': '_onClickBins'\n  },\n\n  initialize: function (opts) {\n    this._showSearch = opts.showSearch || false;\n    this._typeLabel = opts.typeLabel;\n\n    this._initModels();\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    this.$el.append(template({\n      bins: this.model.get('bins'),\n      attribute: this.model.get('attribute'),\n      quantification: this.model.get('quantification')\n    }));\n\n    this._initViews();\n\n    var customRamp = this._customRamp.get('range');\n\n    if (customRamp && customRamp.length) {\n      this.$('.js-customList').addClass('is-customized');\n      this.$('.js-customList').prepend(customRampTemplate({\n        customRamp: customRamp\n      }));\n    } else {\n      var selectedRamp = this.collection.getSelectedItem();\n\n      if (!selectedRamp) {\n        selectedRamp = this.collection.first();\n      }\n\n      this._selectRamp(selectedRamp);\n    }\n\n    return this;\n  },\n\n  _initModels: function () {\n    this._customRamp = new cdb.core.Model();\n    this._setupCollection();\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.model, 'change:bins', this._onChangeBins);\n    this.listenTo(this.model, 'change:attribute_type', this._updateRampOnAttributeChange);\n    this.listenTo(this.collection, 'change:selected', this._onSelectItem);\n  },\n\n  _initViews: function () {\n    this._listView = new CustomListView({\n      collection: this.collection,\n      showSearch: this._showSearch,\n      typeLabel: this._typeLabel,\n      itemTemplate: rampItemTemplate,\n      itemView: rampItemView\n    });\n\n    this._listView.bind('invert', this._invertRamp, this);\n    this._listView.bind('customize', function (ramp) {\n      this.trigger('customize', ramp, this);\n    }, this);\n\n    this.$('.js-content').append(this._listView.render().el);\n    this.addView(this._listView);\n  },\n\n  _getRamps: function () {\n    var attributeType = this.model.get('attribute_type');\n    // select only suitable ramps for the data type\n    // number -> ramps\n    // string -> category\n    var rampTypeFromType = {\n      number: ['quantitative', 'diverging'],\n      string: ['qualitative']\n    };\n    var ramps = rampList;\n    if (rampTypeFromType[attributeType]) {\n      ramps = _.filter(ramps, function (r) {\n        // ramp without tags is discarded\n        if (r.tags) {\n          return _.contains(rampTypeFromType[attributeType], r.tags[0]);\n        }\n        return false;\n      });\n    }\n\n    ramps = _.map(ramps, function (rampItem, name) {\n      var ramp = rampItem[this.model.get('bins')];\n      var range = this.model.get('range');\n      var isSelected = false;\n      var isInverted = false;\n\n      if (ramp && ramp.length && range && range.length) {\n        isSelected = ramp.join().toLowerCase() === range.join().toLowerCase();\n\n        if (!isSelected) {\n          isSelected = _.clone(ramp).reverse().join().toLowerCase() === range.join().toLowerCase();\n          isInverted = isSelected;\n        }\n      }\n\n      if (!ramp) {\n        return null;\n      }\n\n      return {\n        selected: isSelected,\n        inverted: isInverted,\n        name: name,\n        val: ramp\n      };\n    }, this);\n\n    return ramps;\n  },\n\n  _setupCollection: function () {\n    var ramps = this._getRamps();\n    this.collection = new CustomListCollection(_.compact(ramps), { silent: false });\n    if (!this.collection.getSelectedItem()) {\n      this._customRamp.set('range', this.model.get('range'));\n    }\n  },\n\n  _updateRampOnAttributeChange: function (m, type) {\n    var ramps = this._getRamps();\n    // Update the ramps when the attribute changes\n    this.collection.reset(_.compact(ramps), {silent: true});\n    // and delete the custom ramp\n    this._customRamp.set('range', false);\n\n    // apply the first ramp\n    var first = this.collection.first();\n    first && first.set('selected', true);\n    this.render();\n  },\n\n  _invertRamp: function (item) {\n    if (!item) {\n      return;\n    }\n\n    this._customRamp.set('range', null);\n    item.set('selected', false);\n    var ramp = [].concat(item.get('val')).reverse();\n    item.set({ val: ramp, selected: true });\n    this.model.set('range', ramp);\n  },\n\n  _selectRamp: function (item) {\n    if (!item) {\n      return;\n    }\n\n    var range = item.get('val');\n    // 'manually' select the item to preserve scroll position\n    this.$('.js-listItemLink').removeClass('is-selected');\n    this.$('.js-listItem[data-val=\"' + range.join(',') + '\"] .js-listItemLink').addClass('is-selected');\n  },\n\n  _onClickClear: function (e) {\n    this.killEvent(e);\n\n    this._customRamp.set('range', null);\n\n    if (!this.collection.getSelectedItem()) {\n      this.collection.first().set('selected', true);\n    }\n\n    this.render();\n    this._listView.highlight();\n  },\n\n  _onClickCustomRamp: function (e) {\n    this.killEvent(e);\n\n    if (this.model.get('range') === this._customRamp.get('range')) {\n      this.trigger('customize', this.collection.getSelectedItem(), this);\n    } else {\n      this.model.set('range', this._customRamp.get('range'));\n    }\n\n    this.$('.js-listItemLink').removeClass('is-selected');\n    this.$('.js-customRamp').addClass('is-selected');\n  },\n\n  _onClickCustomize: function (e) {\n    this.killEvent(e);\n    var ramp = this.collection.getSelectedItem();\n    this._customRamp.set('range', ramp);\n    this.trigger('customize', ramp, this);\n  },\n\n  _onChangeBins: function () {\n    var customRange = this._customRamp.get('range');\n\n    if (customRange) {\n      if (this.model.get('bins') > customRange.length) {\n        customRange = _.range(this.model.get('bins')).map(function (i) {\n          return i >= customRange.length ? DEFAULT_RAMP_ITEM_COLOR : customRange[i];\n        });\n      } else {\n        customRange = customRange.slice(0, this.model.get('bins'));\n      }\n\n      this.model.set('range', customRange);\n      this._customRamp.set('range', customRange);\n    }\n  },\n\n  _onSelectItem: function (item) {\n    this._selectRamp(item);\n    this.trigger('selectItem', item, this);\n  },\n\n  _onClickSwitch: function (e) {\n    this.killEvent(e);\n    this.trigger('switch', this);\n  },\n\n  _onClickBack: function (e) {\n    this.killEvent(e);\n    this.trigger('back', this);\n  },\n\n  _onClickQuantification: function (e) {\n    this.killEvent(e);\n    this.trigger('selectQuantification', this);\n  },\n\n  _onClickBins: function (e) {\n    this.killEvent(e);\n    this.trigger('selectBins', this);\n  }\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar StackLayoutView = require('builder/components/stack-layout/stack-layout-view');\nvar ColumnListView = require('builder/components/custom-list/column-list/column-list-view');\nvar columnListQuantificationMethodItemTemplate = require('builder/components/custom-list/column-list/column-list-quantification-method-item.tpl');\nvar InputRampContentView = require('./input-ramp-content-view');\nvar rampList = require('cartocolor');\nvar FillConstants = require('builder/components/form-components/_constants/_fill');\n\nmodule.exports = CoreView.extend({\n  module: 'components:form-components:editors:fill:input-color:input-quantitative-ramps:main-view',\n\n  initialize: function (opts) {\n    this._settings = opts.settings || FillConstants.Settings.COLOR_RAMPS;\n\n    this._setupModel();\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n    return this;\n  },\n\n  _setupModel: function () {\n    var options = {};\n\n    if (!this.model.get('quantification')) {\n      options.quantification = this._settings.quantifications.items[this._settings.quantifications.defaultIndex];\n    }\n\n    if (!this.model.get('bins')) {\n      options.bins = this._settings.bins.items[this._settings.bins.defaultIndex];\n    }\n\n    if (+this.model.get('bins') > +this._settings.bins.items[this._settings.bins.items.length - 1]) {\n      options.bins = this._settings.bins.items[this._settings.bins.items.length - 1];\n    }\n\n    this.model.set(options);\n  },\n\n  _initBinds: function () {\n    var range = this.model.get('range');\n\n    this.listenTo(this.model, 'change:bins', this._updateRange);\n    this.listenTo(this.model, 'change:attribute', this.render);\n    this.listenTo(this.model, 'change:quantification', this._onChangeQuantification);\n\n    this.model.unset('fixed');\n\n    if (!range || !this._isValidRange(range)) {\n      this.model.set('range', this._getDefaultRamp());\n    }\n  },\n\n  // range minimun size should be 2\n  _isValidRange: function (range) {\n    return range && range.length > 1 || false;\n  },\n\n  _initViews: function () {\n    var self = this;\n\n    var collectionOptions = [\n      {\n        createStackView: function (stackLayoutModel, opts) {\n          return self._createInputRampContentView(stackLayoutModel, opts).bind(self);\n        }\n      }\n    ];\n\n    if (!this.options.hideTabs || !_.contains(this.options.hideTabs, FillConstants.Tabs.QUANTIFICATION)) {\n      collectionOptions.push(\n        {\n          createStackView: function (stackLayoutModel, opts) {\n            return self._createQuantificationListView(stackLayoutModel, opts).bind(self);\n          }\n        }\n      );\n    }\n\n    if (!this.options.hideTabs || !_.contains(this.options.hideTabs, FillConstants.Tabs.BINS)) {\n      collectionOptions.push(\n        {\n          createStackView: function (stackLayoutModel, opts) {\n            return self._createBinsListView(stackLayoutModel, opts).bind(self);\n          }\n        }\n      );\n    }\n\n    var stackViewCollection = new Backbone.Collection(collectionOptions);\n\n    this._stackLayoutView = new StackLayoutView({\n      collection: stackViewCollection\n    });\n\n    this.$el.append(this._stackLayoutView.render().$el);\n    this.addView(this._stackLayoutView);\n  },\n\n  _updateRange: function () {\n    var previousBins = this.model.previous('bins');\n\n    if (!previousBins) {\n      return;\n    }\n\n    var previousRamps = _.find(rampList, function (ramp) {\n      var previousRamp = ramp[previousBins];\n      var range = this.model.get('range');\n      return previousRamp && range && previousRamp.join('').toLowerCase() === range.join('').toLowerCase();\n    }, this);\n\n    if (previousRamps) {\n      var bins = this.model.get('bins');\n      this.model.set('range', previousRamps[bins]);\n    }\n  },\n\n  _createInputRampContentView: function (stackLayoutModel, opts) {\n    var view = new InputRampContentView({\n      stackLayoutModel: stackLayoutModel,\n      model: this.model\n    });\n\n    view.bind('back', function (value) {\n      this.trigger('back');\n    }, this);\n\n    view.bind('selectItem', function (value) {\n      this.model.unset('domain');\n      this.model.set('range', value);\n    }, this);\n\n    view.bind('selectQuantification', function (value) {\n      stackLayoutModel.goToStep(1);\n    }, this);\n\n    view.bind('selectBins', function (value) {\n      stackLayoutModel.goToStep(2);\n    }, this);\n\n    return view;\n  },\n\n  _createBinsListView: function (stackLayoutModel, opts) {\n    var view = new ColumnListView({\n      headerTitle: _t('form-components.editors.fill.bins'),\n      stackLayoutModel: stackLayoutModel,\n      columns: this._settings.bins.items\n    });\n\n    view.bind('selectItem', function (item) {\n      this.model.set('bins', item.get('val'));\n      stackLayoutModel.goToStep(0);\n    }, this);\n\n    view.bind('back', function (value) {\n      stackLayoutModel.goToStep(0);\n    }, this);\n\n    return view;\n  },\n\n  _createQuantificationListView: function (stackLayoutModel, opts) {\n    var view = new ColumnListView({\n      headerTitle: _t('form-components.editors.fill.quantification.title'),\n      stackLayoutModel: stackLayoutModel,\n      itemTemplate: columnListQuantificationMethodItemTemplate,\n      columns: this._settings.quantifications.items,\n      showSearch: false\n    });\n\n    view.bind('selectItem', function (item) {\n      this.model.set('quantification', item.get('val'));\n      stackLayoutModel.prevStep();\n    }, this);\n\n    view.bind('back', function (value) {\n      stackLayoutModel.goToStep(0);\n    }, this);\n\n    return view;\n  },\n\n  _getDefaultRamp: function () {\n    return _.map(rampList, function (ramp) {\n      return ramp[this.model.get('bins')];\n    }, this)[0];\n  },\n\n  _onChangeQuantification: function () {\n    if (this.model.get('quantification') === 'category') {\n      this.trigger('switch', this);\n    }\n  },\n\n  remove: function () {\n    CoreView.prototype.remove.apply(this);\n  }\n});\n","module.exports = {\n  green: {\n    '3': ['#E5F5F9', '#99D8C9', '#2CA25F'],\n    '4': ['#EDF8FB', '#B2E2E2', '#66C2A4', '#238B45'],\n    '5': ['#EDF8FB', '#B2E2E2', '#66C2A4', '#2CA25F', '#006D2C'],\n    '6': ['#EDF8FB', '#CCECE6', '#99D8C9', '#66C2A4', '#2CA25F', '#006D2C'],\n    '7': ['#EDF8FB', '#D7FAF4', '#CCECE6', '#66C2A4', '#41AE76', '#238B45', '#005824']\n  },\n  blue: {\n    '3': ['#EDF8B1', '#7FCDBB', '#2C7FB8'],\n    '4': ['#FFFFCC', '#A1DAB4', '#41B6C4', '#225EA8'],\n    '5': ['#FFFFCC', '#A1DAB4', '#41B6C4', '#2C7FB8', '#253494'],\n    '6': ['#FFFFCC', '#C7E9B4', '#7FCDBB', '#41B6C4', '#2C7FB8', '#253494'],\n    '7': ['#FFFFCC', '#C7E9B4', '#7FCDBB', '#41B6C4', '#1D91C0', '#225EA8', '#0C2C84']\n  },\n  pink: {\n    '3': ['#E7E1EF', '#C994C7', '#DD1C77'],\n    '4': ['#F1EEF6', '#D7B5D8', '#DF65B0', '#CE1256'],\n    '5': ['#F1EEF6', '#D7B5D8', '#DF65B0', '#DD1C77', '#980043'],\n    '6': ['#F1EEF6', '#D4B9DA', '#C994C7', '#DF65B0', '#DD1C77', '#980043'],\n    '7': ['#F1EEF6', '#D4B9DA', '#C994C7', '#DF65B0', '#E7298A', '#CE1256', '#91003F']\n  },\n  black: {\n    '3': ['#F0F0F0', '#BDBDBD', '#636363'],\n    '4': ['#F7F7F7', '#CCCCCC', '#969696', '#525252'],\n    '5': ['#F7F7F7', '#CCCCCC', '#969696', '#636363', '#252525'],\n    '6': ['#F7F7F7', '#D9D9D9', '#BDBDBD', '#969696', '#636363', '#252525'],\n    '7': ['#F7F7F7', '#D9D9D9', '#BDBDBD', '#969696', '#737373', '#525252', '#252525']\n  },\n  red: {\n    '3': ['#FFEDA0', '#FEB24C', '#F03B20'],\n    '4': ['#FFFFB2', '#FECC5C', '#FD8D3C', '#E31A1C'],\n    '5': ['#FFFFB2', '#FECC5C', '#FD8D3C', '#F03B20', '#BD0026'],\n    '6': ['#FFFFB2', '#FED976', '#FEB24C', '#FD8D3C', '#F03B20', '#BD0026'],\n    '7': ['#FFFFB2', '#FED976', '#FEB24C', '#FD8D3C', '#FC4E2A', '#E31A1C', '#B10026']\n  },\n  inverted_green: {\n    '3': ['#2CA25F', '#99D8C9', '#E5F5F9'],\n    '4': ['#238B45', '#66C2A4', '#B2E2E2', '#EDF8FB'],\n    '5': ['#006D2C', '#2CA25F', '#66C2A4', '#B2E2E2', '#EDF8FB'],\n    '6': ['#006D2C', '#2CA25F', '#66C2A4', '#99D8C9', '#CCECE6', '#EDF8FB'],\n    '7': ['#005824', '#238B45', '#41AE76', '#66C2A4', '#CCECE6', '#D7FAF4', '#EDF8FB']\n  },\n  inverted_blue: {\n    '3': ['#2C7FB8', '#7FCDBB', '#EDF8B1'],\n    '4': ['#225EA8', '#41B6C4', '#A1DAB4', '#FFFFCC'],\n    '5': ['#253494', '#2C7FB8', '#41B6C4', '#A1DAB4', '#FFFFCC'],\n    '6': ['#253494', '#2C7FB8', '#41B6C4', '#7FCDBB', '#C7E9B4', '#FFFFCC'],\n    '7': ['#0C2C84', '#225EA8', '#1D91C0', '#41B6C4', '#7FCDBB', '#C7E9B4', '#FFFFCC']\n  },\n  inverted_pink: {\n    '3': ['#DD1C77', '#C994C7', '#E7E1EF'],\n    '4': ['#CE1256', '#DF65B0', '#D7B5D8', '#F1EEF6'],\n    '5': ['#980043', '#DD1C77', '#DF65B0', '#D7B5D8', '#F1EEF6'],\n    '6': ['#980043', '#DD1C77', '#DF65B0', '#C994C7', '#D4B9DA', '#F1EEF6'],\n    '7': ['#91003F', '#CE1256', '#E7298A', '#DF65B0', '#C994C7', '#D4B9DA', '#F1EEF6']\n  },\n  inverted_black: {\n    '3': ['#636363', '#BDBDBD', '#F0F0F0'],\n    '4': ['#525252', '#969696', '#CCCCCC', '#F7F7F7'],\n    '5': ['#252525', '#636363', '#969696', '#CCCCCC', '#F7F7F7'],\n    '6': ['#252525', '#636363', '#969696', '#BDBDBD', '#D9D9D9', '#F7F7F7'],\n    '7': ['#252525', '#525252', '#737373', '#969696', '#BDBDBD', '#D9D9D9', '#F7F7F7']\n  },\n  inverted_red: {\n    '3': ['#F03B20', '#FEB24C', '#FFEDA0'],\n    '4': ['#E31A1C', '#FD8D3C', '#FECC5C', '#FFFFB2'],\n    '5': ['#BD0026', '#F03B20', '#FD8D3C', '#FECC5C', '#FFFFB2'],\n    '6': ['#BD0026', '#F03B20', '#FD8D3C', '#FEB24C', '#FED976', '#FFFFB2'],\n    '7': ['#B10026', '#E31A1C', '#FC4E2A', '#FD8D3C', '#FEB24C', '#FED976', '#FFFFB2']\n  },\n  spectrum1: {\n    '3': ['#1a9850', '#fff2cc', '#d73027'],\n    '4': ['#1a9850', '#d2ecb4', '#fed6b0', '#d73027'],\n    '5': ['#1a9850', '#8cce8a', '#fff2cc', '#f79272', '#d73027'],\n    '6': ['#1a9850', '#8cce8a', '#d2ecb4', '#fed6b0', '#f79272', '#d73027'],\n    '7': ['#1a9850', '#8cce8a', '#d2ecb4', '#fff2cc', '#fed6b0', '#f79272', '#d73027']\n  },\n  spectrum2: {\n    '3': ['#0080ff', '#fff2cc', '#ff4d4d'],\n    '4': ['#0080ff', '#7fbfff', '#ffa6a6', '#ff4d4d'],\n    '5': ['#0080ff', '#40a0ff', '#fff2cc', '#ff7a7a', '#ff4d4d'],\n    '6': ['#0080ff', '#40a0ff', '#7fbfff', '#ffa6a6', '#ff7a7a', '#ff4d4d'],\n    '7': ['#0080ff', '#40a0ff', '#7fbfff', '#fff2cc', '#ffa6a6', '#ff7a7a', '#ff4d4d']\n  },\n  purple_states: {\n    '3': ['#F1E6F1', '#B379B3', '#8A4E8A'],\n    '4': ['#F1E6F1', '#D8BBD8', '#A05AA0', '#8A4E8A'],\n    '5': ['#F1E6F1', '#D8BBD8', '#B379B3', '#A05AA0', '#8A4E8A'],\n    '6': ['#F1E6F1', '#D8BBD8', '#CCA5CC', '#B379B3', '#A05AA0', '#8A4E8A'],\n    '7': ['#F1E6F1', '#D8BBD8', '#CCA5CC', '#C08FC0', '#B379B3', '#A05AA0', '#8A4E8A']\n  },\n  red_states: {\n    '3': ['#F2D2D3', '#D4686C', '#C1373C'],\n    '4': ['#F2D2D3', '#EBB7B9', '#CC4E52', '#C1373C'],\n    '5': ['#F2D2D3', '#EBB7B9', '#D4686C', '#CC4E52', '#C1373C'],\n    '6': ['#F2D2D3', '#EBB7B9', '#E39D9F', '#D4686C', '#CC4E52', '#C1373C'],\n    '7': ['#F2D2D3', '#EBB7B9', '#E39D9F', '#DB8286', '#D4686C', '#CC4E52', '#C1373C']\n  },\n  blue_states: {\n    '3': ['#ECF0F6', '#6182B5', '#43618F'],\n    '4': ['#ECF0F6', '#B2C2DB', '#4E71A6', '#43618F'],\n    '5': ['#ECF0F6', '#B2C2DB', '#6182B5', '#4E71A6', '#43618F'],\n    '6': ['#ECF0F6', '#B2C2DB', '#9BB0D0', '#6182B5', '#4E71A6', '#43618F'],\n    '7': ['#ECF0F6', '#B2C2DB', '#9BB0D0', '#849EC5', '#6182B5', '#4E71A6', '#43618F']\n  },\n  inverted_purple_states: {\n    '3': ['#8A4E8A', '#B379B3', '#F1E6F1'],\n    '4': ['#8A4E8A', '#A05AA0', '#D8BBD8', '#F1E6F1'],\n    '5': ['#8A4E8A', '#A05AA0', '#B379B3', '#D8BBD8', '#F1E6F1'],\n    '6': ['#8A4E8A', '#A05AA0', '#B379B3', '#CCA5CC', '#D8BBD8', '#F1E6F1'],\n    '7': ['#8A4E8A', '#A05AA0', '#B379B3', '#C08FC0', '#CCA5CC', '#D8BBD8', '#F1E6F1']\n  },\n  inverted_red_states: {\n    '3': ['#C1373C', '#D4686C', '#F2D2D3'],\n    '4': ['#C1373C', '#CC4E52', '#EBB7B9', '#F2D2D3'],\n    '5': ['#C1373C', '#CC4E52', '#D4686C', '#EBB7B9', '#F2D2D3'],\n    '6': ['#C1373C', '#CC4E52', '#D4686C', '#E39D9F', '#EBB7B9', '#F2D2D3'],\n    '7': ['#C1373C', '#CC4E52', '#D4686C', '#DB8286', '#E39D9F', '#EBB7B9', '#F2D2D3']\n  },\n  inverted_blue_states: {\n    '3': ['#43618F', '#6182B5', '#ECF0F6'],\n    '4': ['#43618F', '#4E71A6', '#B2C2DB', '#ECF0F6'],\n    '5': ['#43618F', '#4E71A6', '#6182B5', '#B2C2DB', '#ECF0F6'],\n    '6': ['#43618F', '#4E71A6', '#6182B5', '#9BB0D0', '#B2C2DB', '#ECF0F6'],\n    '7': ['#43618F', '#4E71A6', '#6182B5', '#849EC5', '#9BB0D0', '#B2C2DB', '#ECF0F6']\n  }\n};\n","var CoreView = require('backbone/core-view');\nvar PopupManager = require('builder/components/popup-manager');\nvar FillTemplate = require('builder/components/input-fill/input-fill.tpl');\nvar DialogModel = require('builder/components/dialog/dialog-model');\nvar DialogView = require('builder/components/dialog/dialog-view');\nvar InputCollection = require('builder/components/input-collection/input-collection');\n\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'columns',\n  'query',\n  'configModel',\n  'userModel',\n  'editorAttrs',\n  'modals',\n  'dialogMode',\n  'popupConfig'\n];\n\nmodule.exports = CoreView.extend({\n  className: 'Form-InputFill CDB-OptionInput CDB-Text js-input',\n\n  events: {\n    focus: function () {\n      this.trigger('focus', this);\n    },\n    blur: function () {\n      this.trigger('blur', this);\n    }\n  },\n\n  focus: function () {\n    if (this.hasFocus) return;\n    this.$('.js-fillInput').focus();\n  },\n\n  blur: function () {\n    if (!this.hasFocus) return;\n    this.$('.js-fillInput').blur();\n  },\n\n  initialize: function (options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n\n    this._initViews();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n\n    return this;\n  },\n\n  clean: function () {\n    this.removeDialog();\n    this._popupManager && this._popupManager.destroy();\n\n    CoreView.prototype.clean.call(this);\n  },\n\n  removeDialog: function () {\n    if (!this._dialogView) return;\n\n    this._popupManager.untrack();\n    this._inputCollection.unselect();\n    this._dialogView.clean();\n  },\n\n  _initViews: function () {\n    this.$el.append(FillTemplate());\n\n    if (this.options.editorAttrs && this.options.editorAttrs.disabled) {\n      this.$el.addClass('is-disabled');\n    }\n\n    this._initFillDialog();\n    this._initInputFields();\n\n    this._popupManager = new PopupManager(\n      this._popupConfig.cid,\n      this._popupConfig.$el,\n      this._dialogView.$el\n    );\n  },\n\n  _initInputFields: function () {\n    this._inputCollection = new InputCollection();\n    this._inputCollection.bind('onInputChanged', this._onInputChanged, this);\n  },\n\n  _onInputChanged: function () {\n    this.trigger('onInputChanged', this);\n  },\n\n  _initFillDialog: function () {\n    var dialogModel = new DialogModel();\n\n    this.listenToOnce(dialogModel, 'destroy', function () {\n      this._dialogView = null;\n      this.stopListening(dialogModel);\n    });\n\n    this._dialogView = new DialogView({\n      model: dialogModel\n    });\n  },\n\n  _onInputClick: function (inputModel) {\n    if (inputModel.get('selected')) {\n      this.removeDialog();\n      return;\n    }\n\n    inputModel.set('selected', true);\n    this._dialogView.model.set('createContentView', inputModel.get('createContentView'));\n    this._dialogView.render();\n    this._dialogView.show();\n\n    this._popupManager.append(this._dialogMode);\n    this._popupManager.track();\n  }\n});\n","var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar template = require('./input-number-value-content-view.tpl');\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-back': '_onClickBack',\n    'click .js-bins': '_onClickBins',\n    'click .js-quantification': '_onClickQuantification'\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this._removeForm();\n    this.$el.empty();\n\n    this.$el.append(template({\n      bins: this.model.get('bins'),\n      attribute: this.model.get('attribute'),\n      quantification: this.model.get('quantification')\n    }));\n\n    this._initForm();\n\n    return this;\n  },\n\n  _calculateRangeFromFixed: function (fixed, percent) {\n    percent = percent || 30;\n\n    var span = this.options.max - this.options.min;\n    var delta = fixed / span;\n\n    return [\n      Math.floor(Math.max(this.options.min, fixed - percent * delta)),\n      Math.floor(Math.min(this.options.max, fixed + percent * delta))\n    ];\n  },\n\n  _initForm: function () {\n    var self = this;\n\n    if (this._formView) {\n      this._formView.remove();\n    }\n\n    // when range min === max means we come from a fixed value, probably\n    // calculate the range values based on this\n    var range = this.model.get('range');\n    var min, max;\n\n    min = max = this.model.get('fixed');\n\n    if (range) {\n      min = +range[0];\n      max = +range[1];\n    }\n\n    if (min === max) {\n      var r = this._calculateRangeFromFixed(min);\n      // set the range so changes are propagated\n      min = r[0];\n      max = r[1];\n      this.model.set('range', r);\n    }\n\n    this._formModel = new Backbone.Model({\n      min: min,\n      max: max\n    });\n\n    this._formModel.schema = {\n      min: {\n        type: 'Number',\n        validators: ['required', {\n          type: 'interval',\n          min: self.options.min,\n          max: self.options.max\n        }]\n      },\n      max: {\n        type: 'Number',\n        validators: ['required', {\n          type: 'interval',\n          min: self.options.min,\n          max: self.options.max\n        }]\n      }\n    };\n\n    this._formModel.bind('change', function (input) {\n      this.model.set('range', [(+input.get('min')), (+input.get('max'))]);\n    }, this);\n\n    this._formView = new Backbone.Form({\n      className: 'Editor-boxList',\n      model: this._formModel\n    });\n\n    this._formView.bind('change', function () {\n      this.commit();\n    });\n\n    this.$('.js-content').append(this._formView.render().$el);\n  },\n\n  _removeForm: function () {\n    // Backbone.Form removes the view with the following method\n    this._formView && this._formView.remove();\n  },\n\n  _onClickBack: function (e) {\n    this.killEvent(e);\n    this.trigger('back', this);\n  },\n\n  _onClickQuantification: function (e) {\n    this.killEvent(e);\n    this.trigger('selectQuantification', this);\n  },\n\n  _onClickBins: function (e) {\n    this.killEvent(e);\n    this.trigger('selectBins', this);\n  },\n\n  clean: function () {\n    this._removeForm();\n    CoreView.prototype.clean.call(this);\n  }\n});\n","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar tabPaneTemplate = require('builder/components/form-components/editors/fill/fill-tab-pane.tpl');\nvar createTextLabelsTabPane = require('builder/components/tab-pane/create-text-labels-tab-pane');\nvar InputNumberFixedContentView = require('./input-number-fixed-content-view');\nvar InputNumberValueContentView = require('./input-number-value-content-view');\nvar FillConstants = require('builder/components/form-components/_constants/_fill');\n\nvar DEFAULT_INPUT_MIN_VALUE = 0;\nvar DEFAULT_INPUT_MAX_VALUE = 100;\nvar DEFAULT_INPUT_STEP_VALUE = 1;\n\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    if (!opts.columns) throw new Error('columns param is required');\n    this._columns = opts.columns;\n\n    this.listenTo(this.model, 'change:attribute', this._updateRangeValue);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n    return this;\n  },\n\n  _initViews: function () {\n    var self = this;\n\n    var fixedPane = {\n      name: 'fixed',\n      label: _t('form-components.editors.fill.input-number.fixed'),\n      createContentView: function () {\n        return self._generateFixedContentView();\n      }\n    };\n\n    var valuePane = {\n      name: 'value',\n      label: _t('form-components.editors.fill.input-number.by-value'),\n      createContentView: function () {\n        return self._generateValueContentView();\n      }\n    };\n\n    this._tabPaneTabs = [];\n\n    if (this.options.editorAttrs && this.options.editorAttrs.hidePanes) {\n      var hidePanes = this.options.editorAttrs.hidePanes;\n      if (!_.contains(hidePanes, FillConstants.Panes.FIXED)) {\n        this._tabPaneTabs.push(fixedPane);\n      }\n      if (!_.contains(hidePanes, FillConstants.Panes.BY_VALUE)) {\n        this._tabPaneTabs.push(valuePane);\n      }\n    } else {\n      this._tabPaneTabs = [fixedPane, valuePane];\n    }\n\n    var tabPaneOptions = {\n      tabPaneOptions: {\n        template: tabPaneTemplate,\n        tabPaneItemOptions: {\n          tagName: 'li',\n          klassName: 'CDB-NavMenu-item'\n        }\n      },\n      tabPaneItemLabelOptions: {\n        tagName: 'button',\n        className: 'CDB-NavMenu-link u-upperCase'\n      }\n    };\n\n    if (this.model.get('range') && this._tabPaneTabs.length > 1) {\n      this._tabPaneTabs[1].selected = true;\n    }\n\n    this._tabPaneView = createTextLabelsTabPane(this._tabPaneTabs, tabPaneOptions);\n    this.listenTo(this._tabPaneView.collection, 'change:selected', this._onChangeTabPaneViewTab);\n    this.addView(this._tabPaneView);\n    this.$el.append(this._tabPaneView.render().$el);\n  },\n\n  _onChangeTabPaneViewTab: function () {\n    var selectedTabPaneName = this._tabPaneView.getSelectedTabPaneName();\n\n    if (selectedTabPaneName === 'fixed') {\n      this._updateFixedValue();\n    } else {\n      this._updateRangeValue();\n    }\n\n    this.trigger('change', selectedTabPaneName, this);\n  },\n\n  _updateFixedValue: function () {\n    if (this.model.get('range')) {\n      // when coming from range calculate the average\n      var r = this.model.get('range');\n      var avg = 0.5 * (+r[0] + +r[1]);\n      this.model.set('fixed', avg);\n      this.model.unset('range');\n    }\n  },\n\n  _updateRangeValue: function () {\n    if (this.model.get('fixed') !== null && this.model.get('fixed') !== undefined && this.model.get('attribute')) {\n      var editorAttrs = this.options.editorAttrs;\n      var range = (editorAttrs && editorAttrs.defaultRange) || [this.model.get('fixed'), this.model.get('fixed')];\n      this.model.set('range', range);\n      this.model.unset('fixed');\n    }\n  },\n\n  _generateFixedContentView: function () {\n    var editorAttrs = this.options.editorAttrs;\n    return new InputNumberFixedContentView({\n      model: this.model,\n      min: (editorAttrs && editorAttrs.min) || DEFAULT_INPUT_MIN_VALUE,\n      max: (editorAttrs && editorAttrs.max) || DEFAULT_INPUT_MAX_VALUE,\n      step: (editorAttrs && editorAttrs.step) || DEFAULT_INPUT_STEP_VALUE\n    });\n  },\n\n  _generateValueContentView: function () {\n    var editorAttrs = this.options.editorAttrs;\n    return new InputNumberValueContentView({\n      model: this.model,\n      columns: this._columns,\n      min: (editorAttrs && editorAttrs.min) || DEFAULT_INPUT_MIN_VALUE,\n      max: (editorAttrs && editorAttrs.max) || DEFAULT_INPUT_MAX_VALUE\n    });\n  },\n\n  _onChangeValue: function (input) {\n    this.model.set('fixed', input.value);\n  }\n});\n","var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\n\nmodule.exports = CoreView.extend({\n  render: function () {\n    this.clearSubViews();\n    this._removeForm();\n    this.$el.empty();\n    this._initForm();\n    return this;\n  },\n\n  _initForm: function () {\n    this._formModel = new Backbone.Model({\n      value: this.model.get('fixed')\n    });\n\n    this._formModel.schema = {\n      value: {\n        type: 'Number',\n        validators: ['required', {\n          type: 'interval',\n          min: this.options.min,\n          max: this.options.max,\n          step: this.options.step\n        }]\n      }\n    };\n\n    this._formModel.bind('change', function (input) {\n      this.model.set('fixed', input.get('value'));\n    }, this);\n\n    this._formView = new Backbone.Form({\n      className: 'CDB-ListDecoration-itemPadding',\n      model: this._formModel\n    });\n\n    this._formView.bind('change', function () {\n      this.commit();\n    });\n\n    this.$el.append(this._formView.render().$el);\n  },\n\n  _removeForm: function () {\n    // Backbone.Form removes the view with the following method\n    this._formView && this._formView.remove();\n  },\n\n  clean: function () {\n    this._removeForm();\n    CoreView.prototype.clean.call(this);\n  }\n});\n","var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar StackLayoutView = require('builder/components/stack-layout/stack-layout-view');\nvar ColumnListView = require('builder/components/custom-list/column-list/column-list-view');\nvar columnListQuantificationMethodItemTemplate = require('builder/components/custom-list/column-list/column-list-quantification-method-item.tpl');\nvar InputNumberContentView = require('./input-number-content-view');\nvar FillConstants = require('builder/components/form-components/_constants/_fill');\n\n/**\n * add the number of classes\n * change the max depending on the min\n * smaller values on top\n */\nvar COLUMN_PANE_INDEX = 0;\nvar MAIN_PAIN_INDEX = 1;\nvar QUANTIFICATION_PANE_INDEX = 2;\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-back': '_onClickBack'\n  },\n\n  initialize: function (opts) {\n    if (!opts.columns) throw new Error('columns param is required');\n    this._columns = opts.columns;\n\n    this._settings = FillConstants.Settings.NUMBER;\n\n    this._setupModel();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n    return this;\n  },\n\n  _setupModel: function () {\n    var options = {};\n\n    if (!this.model.get('quantification')) {\n      options.quantification = this._settings.quantifications.items[this._settings.quantifications.defaultIndex];\n    }\n\n    if (!this.model.get('bins')) {\n      options.bins = this._settings.bins.items[this._settings.bins.defaultIndex];\n    }\n\n    if (+this.model.get('bins') > +this._settings.bins.items[this._settings.bins.items.length - 1]) {\n      options.bins = this._settings.bins.items[this._settings.bins.items.length - 1];\n    }\n\n    this.model.set(options);\n  },\n\n  _initViews: function () {\n    var self = this;\n\n    var stackViewCollection = new Backbone.Collection([{\n      createStackView: function (stackLayoutModel, opts) {\n        return self._createInputRampContentView(stackLayoutModel, opts).bind(self);\n      }\n    }, {\n      createStackView: function (stackLayoutModel, opts) {\n        return self._createInputNumberContentView(stackLayoutModel, opts).bind(self);\n      }\n    }, {\n      createStackView: function (stackLayoutModel, opts) {\n        return self._createQuantificationListView(stackLayoutModel, opts).bind(self);\n      }\n    }, {\n      createStackView: function (stackLayoutModel, opts) {\n        return self._createBinsListView(stackLayoutModel, opts).bind(self);\n      }\n    }]);\n\n    this._stackLayoutView = new StackLayoutView({\n      collection: stackViewCollection\n    });\n\n    var position = MAIN_PAIN_INDEX;\n\n    if (!this.model.get('attribute')) {\n      position = COLUMN_PANE_INDEX;\n    } else if (!this.model.get('quantification')) {\n      position = QUANTIFICATION_PANE_INDEX;\n    }\n\n    this._stackLayoutView.model.set('position', position);\n    this.$el.append(this._stackLayoutView.render().$el);\n    this.addView(this._stackLayoutView);\n  },\n\n  _createInputRampContentView: function (stackLayoutModel, opts) {\n    var view = new ColumnListView({\n      stackLayoutModel: stackLayoutModel,\n      columns: this._columns.filter(function (f) {\n        return f.type === 'number';\n      }),\n      showSearch: true,\n      typeLabel: 'column'\n    });\n\n    view.bind('selectItem', function (item) {\n      this.model.set('attribute', item.get('val'));\n      var step = MAIN_PAIN_INDEX;\n      if (!this.model.get('quantification')) {\n        step = QUANTIFICATION_PANE_INDEX;\n      }\n      this._stackLayoutView.model.goToStep(step);\n    }, this);\n\n    return view;\n  },\n\n  _createInputNumberContentView: function (stackLayoutModel, opts) {\n    var view = new InputNumberContentView({\n      stackLayoutModel: stackLayoutModel,\n      model: this.model,\n      min: this.options.min,\n      max: this.options.max\n    });\n\n    view.bind('back', function (value) {\n      stackLayoutModel.prevStep();\n    }, this);\n\n    view.bind('selectQuantification', function (value) {\n      stackLayoutModel.goToStep(2);\n    }, this);\n\n    view.bind('selectBins', function (value) {\n      stackLayoutModel.goToStep(3);\n    }, this);\n\n    return view;\n  },\n\n  _createQuantificationListView: function (stackLayoutModel, opts) {\n    var view = new ColumnListView({\n      headerTitle: _t('form-components.editors.fill.quantification.title'),\n      stackLayoutModel: stackLayoutModel,\n      columns: this._settings.quantifications.items,\n      itemTemplate: columnListQuantificationMethodItemTemplate,\n      showSearch: false\n    });\n\n    view.bind('selectItem', function (item) {\n      this.model.set('quantification', item.get('val'));\n      stackLayoutModel.prevStep();\n    }, this);\n\n    view.bind('back', function (value) {\n      stackLayoutModel.prevStep();\n    }, this);\n\n    return view;\n  },\n\n  _createBinsListView: function (stackLayoutModel, opts) {\n    var view = new ColumnListView({\n      headerTitle: _t('form-components.editors.fill.bins'),\n      stackLayoutModel: stackLayoutModel,\n      columns: this._settings.bins.items\n    });\n\n    view.bind('selectItem', function (item) {\n      this.model.set('bins', item.get('val'));\n      stackLayoutModel.goToStep(1);\n    }, this);\n\n    view.bind('back', function (value) {\n      stackLayoutModel.goToStep(1);\n    }, this);\n\n    return view;\n  },\n\n  _onClickBack: function (e) {\n    this.killEvent(e);\n  }\n});\n","var $ = require('jquery');\nvar CoreView = require('backbone/core-view');\nvar template = require('./input-number.tpl');\nvar InputDialogContent = require('./input-number-dialog-content');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\n\nmodule.exports = CoreView.extend({\n  tagName: 'li',\n  className: 'CDB-OptionInput-item',\n\n  events: {\n    'click': '_onClick'\n  },\n\n  initialize: function (opts) {\n    if (!opts.columns) throw new Error('columns is required');\n    this._columns = opts.columns;\n\n    if (this.options.editorAttrs && this.options.editorAttrs.help) {\n      this._help = this.options.editorAttrs.help;\n    }\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    if (this.options.disabled) {\n      this.$el.addClass('is-disabled');\n    }\n\n    this.$el.html(template({\n      help: this._help || '',\n      value: this._getValue()\n    }));\n\n    this._initViews();\n\n    return this;\n  },\n\n  _initViews: function () {\n    if (this._help) {\n      var tooltip = new TipsyTooltipView({\n        el: this.$('.js-help'),\n        gravity: 'w',\n        title: function () {\n          return $(this).data('tooltip');\n        }\n      });\n      this.addView(tooltip);\n    }\n  },\n\n  _createContentView: function () {\n    var view = new InputDialogContent({\n      model: this.model,\n      columns: this._columns,\n      editorAttrs: this.options.editorAttrs\n    });\n\n    view.bind('change', this.render, this);\n\n    return view;\n  },\n\n  _onClick: function (e) {\n    if (this.options.disabled) {\n      return;\n    }\n    this.trigger('click', this.model);\n  },\n\n  _initBinds: function () {\n    this.model.set('createContentView', function () {\n      return this._createContentView();\n    }.bind(this));\n\n    this.listenTo(this.model, 'change:selected', this._onToggleSelected);\n    this.listenTo(this.model, 'change:fixed', this._onChangeValue);\n    this.listenTo(this.model, 'change:range', this._onChangeValue);\n  },\n\n  _getValue: function () {\n    // 1.0 -> 1\n    function dropDecimal (f) {\n      return f.replace(/\\.0$/, '');\n    }\n\n    if (this.model.get('range')) {\n      return this.model.get('range').map(function (v) {\n        return dropDecimal((+v).toFixed(1));\n      }).join('..');\n    }\n    return dropDecimal((+this.model.get('fixed')).toFixed(1));\n  },\n\n  _onChangeValue: function () {\n    this.$('.js-value').text(this._getValue());\n  },\n\n  _onToggleSelected: function () {\n    this.$el.toggleClass('is-active', this.model.get('selected'));\n  }\n});\n","var template = require('./quote.tpl');\n\nvar QUOTES = [\n  { quote: 'Geographers never get lost. They just do accidental field work.', author: 'Nicholas Chrisman' },\n  { quote: 'Geography is just physics slowed down, with a couple of trees stuck in it.', author: 'Terry Pratchett' },\n  { quote: 'Not all those who wander are lost.', author: 'J. R. R. Tolkien' },\n  { quote: 'In that Empire, the Art of Cartography attained such Perfection that the map of a single Province occupied the entirety of a City.', author: 'Jorge Luis Borges' },\n  { quote: 'X marks the spot', author: 'Indiana Jones' },\n  { quote: \"It's turtles all the way down.\", author: null },\n  { quote: 'Remember: no matter where you go, there you are.', author: null },\n  { quote: \"Without geography, you're nowhere!\", author: 'Jimmy Buffett' },\n  { quote: 'our earth is a globe / whose surface we probe /<br />no map can replace her / but just try to trace her', author: 'Steve Waterman' },\n  { quote: 'Everything happens somewhere.', author: 'Doctor Who' },\n  { quote: 'A map is the greatest of all epic poems. Its lines and colors show the realization of great dreams.', author: 'Gilbert H. Grosvenor' },\n  { quote: 'Everything is related to everything else,<br />but near things are more related than distant things.', author: \"Tobler's first law of geography\" },\n  { quote: 'Hic Sunt Dracones', author: null },\n  { quote: 'Here be dragons', author: null },\n  { quote: \"Stand in the place where you live / Now face North /<br/>Think about direction / Wonder why you haven't before\", author: 'R.E.M' },\n  { quote: 'The virtue of maps, they show what can be done with limited space, they foresee that everything can happen therein.', author: 'Jos Saramago' }\n];\n\n/**\n * Random quote\n */\nmodule.exports = function () {\n  var idx = Math.round(Math.random() * (QUOTES.length - 1));\n\n  return template(QUOTES[idx]);\n};\n","var cdb = require('internal-carto.js');\nvar template = require('./loading.tpl');\nvar randomQuote = require('./random-quote');\n\n/**\n * @param {Object} opts\n * @param {String=} opts.title\n * @param {String=} opts.desc\n */\nmodule.exports = function (opts) {\n  var customDesc = opts.desc && cdb.core.sanitize(opts.desc);\n\n  return template({\n    title: opts.title || '',\n    descHTML: customDesc || randomQuote()\n  });\n};\n","var Backbone = require('backbone');\nvar _ = require('underscore');\n\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    eventName: '',\n    eventProperties: {}\n  },\n\n  url: function () {\n    return this._configModel.get('base_url') + '/api/v3/metrics';\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.configModel) { throw new Error('configModel is required'); }\n\n    this._userId = opts.userId;\n    this._visId = opts.visId;\n    this._configModel = opts.configModel;\n  },\n\n  toJSON: function () {\n    return {\n      name: this.get('eventName'),\n      properties: _.extend(\n        {},\n        this.get('eventProperties'),\n        {\n          visualization_id: this._visId,\n          user_id: this._userId\n        }\n      )\n    };\n  }\n});\n","var _ = require('underscore');\nvar MetricsModel = require('./metrics-model');\nvar MetricsTypes = require('./metrics-types');\n\n/**\n *  Metrics singleton tracker.\n *  It sends any event to metrics endpoint.\n */\n\nmodule.exports = (function () {\n  return {\n    init: function (opts) {\n      if (!opts || !opts.configModel) { throw new Error('configModel is required'); }\n\n      this._userId = opts.userId;\n      this._visId = opts.visId;\n      this._configModel = opts.configModel;\n    },\n\n    track: function (eventName, eventProperties) {\n      if (!eventName) { throw new Error('eventName is required'); }\n      this._checkEventIsConfigured(eventName);\n\n      var metricModel = new MetricsModel({\n        eventName: eventName,\n        eventProperties: eventProperties\n      }, {\n        userId: this._userId,\n        visId: this._visId,\n        configModel: this._configModel\n      });\n\n      metricModel.save();\n    },\n\n    _checkEventIsConfigured: function (eventName) {\n      var allowed = _.values(MetricsTypes);\n      if (!_.contains(allowed, eventName)) {\n        throw new Error(`\"${eventName}\" is not an allowed event type`);\n      }\n    }\n  };\n})();\n","// IMPORTANT: Events must be kept in sync with backend!\n// See `/lib/carto/tracking/events.rb`\n\nvar METRIC_TYPES = {\n  STYLED_BY_VALUE: 'Styled by value',\n  DOWNLOADED_LAYER: 'Downloaded layer',\n  CREATED_LAYER: 'Created Layer',\n  MODIFIED_ANALYSIS: 'Modified analysis',\n  CREATED_ANALYSIS: 'Created analysis',\n  DELETED_ANALYSIS: 'Deleted analysis',\n  DRAGGED_NODE: 'Dragged node',\n  APPLIED_SQL: 'Applied sql',\n  WEBGL_STATS: 'WebGL stats',\n  USED_ADVANCED_MODE: 'Used advanced mode',\n  AGGREGATED_GEOMETRIES: 'Aggregated geometries',\n  MODIFIED_STYLE_FORM: 'Modified Style Form',\n  CHANGED_DEFAULT_GEOMETRY: 'Changed default geometry',\n  APPLIED_CARTOCSS: 'Applied Cartocss',\n  VISITED_PRIVATE_PAGE: 'visited_private_page'\n};\n\nmodule.exports = METRIC_TYPES;\n","var CoreView = require('backbone/core-view');\nvar randomQuote = require('builder/components/loading/random-quote');\n\n/*\n *  Content result default view\n */\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-connect': '_onConnectClick'\n  },\n\n  initialize: function (opts) {\n    if (!opts.routerModel) throw new Error('routerModel is required');\n    if (!opts.tablesCollection) throw new Error('tablesCollection is required');\n    if (!opts.userModel) throw new Error('userModel is required');\n    if (!opts.template) throw new Error('template is required');\n\n    this._userModel = opts.userModel;\n    this._routerModel = opts.routerModel;\n    this._tablesCollection = opts.tablesCollection;\n    this.template = opts.template;\n\n    this._initBinds();\n  },\n\n  render: function () {\n    var type = this._routerModel.get('content_type');\n\n    this.$el.html(this.template({\n      page: this._routerModel.get('page'),\n      tag: this._routerModel.get('tag'),\n      q: this._routerModel.get('q'),\n      shared: this._routerModel.get('shared'),\n      locked: this._routerModel.get('locked'),\n      library: this._routerModel.get('library'),\n      quote: randomQuote(),\n      type: type,\n      totalItems: this._tablesCollection.size(),\n      totalEntries: this._tablesCollection.getTotalStat('total_entries')\n    }));\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this._routerModel.bind('change', this.render, this);\n    this._tablesCollection.bind('sync', this.render, this);\n    this.add_related_model(this._routerModel);\n    this.add_related_model(this._tablesCollection);\n  },\n\n  _onConnectClick: function () {\n    this.trigger('connectDataset', this);\n  }\n\n});\n","var cdb = require('internal-carto.js');\nvar CoreView = require('backbone/core-view');\nvar $ = require('jquery');\nvar _ = require('underscore');\nvar moment = require('moment');\nvar Utils = require('builder/helpers/utils');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\nvar template = require('./dataset-item.tpl');\n\n/**\n * View representing an item in the list under datasets route.\n */\nmodule.exports = CoreView.extend({\n  tagName: 'li',\n  className: 'ModalBlockList-item ModalBlockList-item--full',\n\n  events: {\n    'click .js-tag-link': '_onTagClick',\n    'click': '_toggleSelected'\n  },\n\n  initialize: function (opts) {\n    if (!opts.createModel) throw new Error('createModel is required');\n    if (!opts.userModel) throw new Error('userModel is required');\n\n    this._createModel = opts.createModel;\n    this._userModel = opts.userModel;\n    this._routerModel = this._createModel.getVisualizationFetchModel();\n\n    this.model.on('change', this.render, this);\n  },\n\n  render: function () {\n    var tableModel = this.model.getTableModel();\n    var permissionModel = this.model.getPermissionModel();\n    var synchronizationModel = this.model.getSynchronizationModel();\n    var tags = this.model.get('tags') || [];\n    var description = cdb.core.sanitize.html(this.model.get('description'));\n    var tableGeomColumnTypes = (tableModel.getGeometryType ? tableModel.getGeometryType() : tableModel.geomColumnTypes()) || [];\n\n    var d = {\n      isRaster: this.model.isRaster(),\n      geometryType: tableGeomColumnTypes.length > 0 ? tableGeomColumnTypes[0] : '',\n      title: this.model.get('name'),\n      isOwner: permissionModel.isOwner(this._userModel),\n      owner: permissionModel.getOwner().renderData(this._userModel),\n      showPermissionIndicator: !permissionModel.hasWriteAccess(this._userModel),\n      description: description,\n      privacy: this.model.get('privacy').toLowerCase(),\n      timeDiff: moment(this.model.get('updated_at')).fromNow(),\n      tags: tags,\n      tagsCount: tags.length,\n      maxTagsToShow: 3,\n      rowCount: undefined,\n      datasetSize: undefined,\n      syncStatus: undefined,\n      syncRanAt: undefined\n    };\n\n    var rowCount = tableModel.get('row_count');\n    if (rowCount >= 0) {\n      d.rowCount = rowCount;\n      d.rowCountFormatted = (rowCount < 10000 ? Utils.formatNumber(rowCount) : Utils.readizableNumber(rowCount));\n    }\n\n    var datasetSize = tableModel.get('size');\n    if (datasetSize >= 0) {\n      d.datasetSize = Utils.readablizeBytes(datasetSize, true);\n    }\n\n    if (!_.isEmpty(synchronizationModel)) {\n      d.syncRanAt = moment(synchronizationModel.get('ran_at') || new Date()).fromNow();\n      d.syncStatus = synchronizationModel.get('state');\n    }\n\n    this.$el.html(template(d));\n\n    this._renderTooltips();\n\n    // Item selected?\n    this.$el.toggleClass('is-selected', !!this.model.get('selected'));\n\n    return this;\n  },\n\n  _renderTooltips: function () {\n    if (!_.isEmpty(this.model.get('synchronization'))) {\n      this.addView(\n        new TipsyTooltipView({\n          el: this.$('.DatasetsList-itemStatus'),\n          title: function (e) {\n            return $(this).attr('data-title');\n          }\n        })\n      );\n    }\n  },\n\n  _onTagClick: function (ev) {\n    var tag = $(ev.target).val();\n\n    if (tag) {\n      this._routerModel.set('tag', tag);\n    }\n  },\n\n  _toggleSelected: function (ev) {\n    // Let links use default behaviour\n    if (ev.target.tagName !== 'A') {\n      this.killEvent(ev);\n      if (this._createModel.canSelect(this.model)) {\n        this.model.set('selected', !this.model.get('selected'));\n      }\n    }\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar DATASETS_ITEMS = {\n  'datasets': require('./dataset-item-view'),\n  'remotes': require('./remote-dataset-item-view')\n};\n\n/**\n * View representing the list of datasets\n */\nmodule.exports = CoreView.extend({\n\n  tagName: 'ul',\n  className: 'DatasetsList fs-DatasetsList',\n\n  initialize: function (opts) {\n    if (!opts.createModel) throw new Error('createModel is required');\n    if (!opts.userModel) throw new Error('userModel is required');\n\n    this._createModel = opts.createModel;\n    this._userModel = opts.userModel;\n    this._tablesCollection = this._createModel.getTablesCollection();\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this._tablesCollection.each(this._addItem, this);\n    return this;\n  },\n\n  _initBinds: function () {\n    this._tablesCollection.bind('sync', this.render, this);\n    this.add_related_model(this._tablesCollection);\n  },\n\n  _addItem: function (m, i) {\n    var type = m.get('type') === 'remote' ? 'remotes' : 'datasets';\n\n    var item = new DATASETS_ITEMS[type]({\n      model: m,\n      createModel: this._createModel,\n      userModel: this._userModel\n    });\n\n    this.addView(item);\n    this.$el.append(item.render().el);\n  },\n\n  show: function () {\n    this.$el.removeClass('is-hidden');\n  },\n\n  hide: function () {\n    this.$el.addClass('is-hidden');\n  }\n\n});\n","var CoreView = require('backbone/core-view');\nvar PaginationModel = require('builder/components/pagination/pagination-model');\nvar PaginationView = require('builder/components/pagination/pagination-view');\n\n/**\n * Responsible for the datasets paginator\n *  ___________________________________________________________________________\n * |                                                                           |\n * |                                             Page 2 of 42 [1] 2 [3][4][5]  |\n * |___________________________________________________________________________|\n *\n */\n\nmodule.exports = CoreView.extend({\n  className: 'DatasetsPaginator',\n\n  initialize: function (opts) {\n    if (!opts.routerModel) throw new TypeError('routerModel is required');\n    if (!opts.tablesCollection) throw new TypeError('tablesCollection is required');\n\n    this._routerModel = opts.routerModel;\n    this._tablesCollection = opts.tablesCollection;\n\n    this.model = new PaginationModel({\n      current_page: this._routerModel.get('page')\n    });\n\n    this._initBinds();\n    this._initViews();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html('');\n    if (this.model.shouldBeVisible()) {\n      this.$el.append(this.paginationView.render().el);\n    }\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.bind('change', this.render, this);\n    this.model.bind('change:current_page', function () {\n      this._routerModel.set('page', this.model.get('current_page'));\n    }, this);\n    this._tablesCollection.bind('sync', this._updatePaginationModelByCollection, this);\n    this._routerModel.bind('change:page', this._updatePaginationModelByRouterModel, this);\n\n    this.add_related_model(this._routerModel);\n    this.add_related_model(this._tablesCollection);\n    this.add_related_model(this.model);\n  },\n\n  _initViews: function () {\n    this.paginationView = new PaginationView({\n      model: this.model\n    });\n    this.addView(this.paginationView);\n  },\n\n  _updatePaginationModelByCollection: function () {\n    this.model.set({\n      per_page: this._tablesCollection.getDefaultParam('per_page'),\n      total_count: this._tablesCollection.getTotalStat('total_entries')\n    });\n  },\n\n  _updatePaginationModelByRouterModel: function () {\n    this.model.set('current_page', this._routerModel.get('page'));\n  }\n\n});\n","var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar ContentResultView = require('./content-result-view');\nvar DatasetsListView = require('./datasets-list-view');\nvar DatasetsPaginationView = require('./datasets-pagination-view');\nvar noResultsTemplate = require('./no-datasets.tpl');\nvar datasetsNoResultTemplate = require('./datasets-no-result.tpl');\nvar datasetsErrorTemplate = require('./datasets-error.tpl');\nvar datasetsLoaderTemplate = require('./datasets-loader.tpl');\n\n/**\n *  Datasets list view\n *\n *  Show datasets view to select them for\n *  creating a map or importing a dataset\n *\n */\n\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    if (!opts.createModel) throw new Error('createModel is required');\n    if (!opts.userModel) throw new Error('userModel is required');\n\n    this._createModel = opts.createModel;\n    this._userModel = opts.userModel;\n    this._routerModel = this._createModel.getVisualizationFetchModel();\n    this._tablesCollection = this._createModel.getTablesCollection();\n\n    this._initViews();\n    this._initBinds();\n    this._onDataLoading();\n  },\n\n  _initBinds: function () {\n    this._routerModel.bind('change', this._onRouterChange, this);\n    this._tablesCollection.bind('loading', this._onDataLoading, this);\n    this._tablesCollection.bind('sync', this._onDataFetched, this);\n    this._tablesCollection.bind('error', function (e) {\n      // Old requests can be stopped, so aborted requests are not\n      // considered as an error\n      if (!e || (e && e.statusText !== 'abort')) {\n        this._onDataError();\n      }\n    }, this);\n    this.add_related_model(this._routerModel);\n    this.add_related_model(this._tablesCollection);\n  },\n\n  _initViews: function () {\n    this.controlledViews = {}; // All available views\n    this.enabledViews = []; // Visible views\n\n    var noDatasetsView = new ContentResultView({\n      className: 'ContentResult no-datasets',\n      userModel: this._userModel,\n      routerModel: this._routerModel,\n      tablesCollection: this._tablesCollection,\n      template: noResultsTemplate\n    });\n    noDatasetsView.bind('connectDataset', function () {\n      if (this._userModel.canCreateDatasets()) {\n        this._createModel.set('listing', 'import');\n      }\n    }, this);\n    noDatasetsView.render().hide();\n    this.controlledViews['no_datasets'] = noDatasetsView;\n    this.$el.append(noDatasetsView.el);\n    this.addView(noDatasetsView);\n\n    var listView = new DatasetsListView({\n      userModel: this._userModel,\n      createModel: this._createModel\n    });\n    this.controlledViews.list = listView;\n    this.$el.append(listView.render().el);\n    this.addView(listView);\n\n    var noResultsView = new ContentResultView({\n      userModel: this._userModel,\n      routerModel: this._routerModel,\n      tablesCollection: this._tablesCollection,\n      template: datasetsNoResultTemplate\n    });\n    noResultsView.render().hide();\n    this.controlledViews.no_results = noResultsView;\n    this.$el.append(noResultsView.el);\n    this.addView(noResultsView);\n\n    var errorView = new ContentResultView({\n      userModel: this._userModel,\n      routerModel: this._routerModel,\n      tablesCollection: this._tablesCollection,\n      template: datasetsErrorTemplate\n    });\n    errorView.render().hide();\n    this.controlledViews.error = errorView;\n    this.$el.append(errorView.el);\n    this.addView(errorView);\n\n    var mainLoaderView = new ContentResultView({\n      userModel: this._userModel,\n      routerModel: this._routerModel,\n      tablesCollection: this._tablesCollection,\n      template: datasetsLoaderTemplate\n    });\n    this.controlledViews.main_loader = mainLoaderView;\n    this.$el.append(mainLoaderView.render().el);\n    this.addView(mainLoaderView);\n\n    var datasetsPaginationView = new DatasetsPaginationView({\n      routerModel: this._routerModel,\n      tablesCollection: this._tablesCollection\n    });\n    this.controlledViews.content_footer = datasetsPaginationView;\n    this.$el.append(datasetsPaginationView.render().el);\n    this.addView(datasetsPaginationView);\n  },\n\n  _onRouterChange: function () {\n    this._hideBlocks();\n    this._showBlocks([ 'main_loader' ]);\n  },\n\n  /**\n   * Arguments may vary, depending on if it's the collection or a model that triggers the event callback.\n   * @private\n   */\n  _onDataFetched: function () {\n    var activeViews = [ 'content_footer' ];\n    var tag = this._routerModel.get('tag');\n    var q = this._routerModel.get('q');\n    var shared = this._routerModel.get('shared');\n    var locked = this._routerModel.get('locked');\n    var library = this._routerModel.get('library');\n\n    if (library && this._tablesCollection.getTotalStat('total_user_entries') === 0) {\n      activeViews.push('no_datasets');\n    }\n\n    if (this._tablesCollection.size() === 0) {\n      if (!tag && !q && shared === 'no' && !locked) {\n        if (!library) {\n          this._goToLibrary();\n          return;\n        } else {\n          activeViews.push('no_results');\n        }\n      } else {\n        activeViews.push('no_results');\n      }\n    } else {\n      activeViews.push('list');\n    }\n\n    this._hideBlocks();\n    this._showBlocks(activeViews);\n  },\n\n  _onDataLoading: function () {\n    this._hideBlocks();\n    this._showBlocks([ 'main_loader' ]);\n  },\n\n  _onDataError: function (e) {\n    this._hideBlocks();\n    this._showBlocks([ 'error' ]);\n  },\n\n  _showBlocks: function (views) {\n    var self = this;\n    if (views) {\n      _.each(views, function (v) {\n        if (self.controlledViews[v]) {\n          self.controlledViews[v].show();\n          self.enabledViews.push(v);\n        }\n      });\n    } else {\n      self.enabledViews = [];\n      _.each(this.controlledViews, function (v) {\n        v.show();\n        self.enabledViews.push(v);\n      });\n    }\n  },\n\n  _goToLibrary: function () {\n    this._routerModel.set({\n      shared: 'no',\n      library: true,\n      page: 1\n    });\n  },\n\n  _hideBlocks: function (views) {\n    var self = this;\n    if (views) {\n      _.each(views, function (v) {\n        if (self.controlledViews[v]) {\n          self.controlledViews[v].hide();\n          self.enabledViews = _.without(self.enabledViews, v);\n        }\n      });\n    } else {\n      _.each(this.controlledViews, function (v) {\n        v.hide();\n      });\n      self.enabledViews = [];\n    }\n  },\n\n  _isBlockEnabled: function (name) {\n    if (name) {\n      return _.contains(this.enabledViews, name);\n    }\n    return false;\n  }\n});\n","var cdb = require('internal-carto.js');\nvar $ = require('jquery');\nvar DatasetItem = require('./dataset-item-view');\nvar moment = require('moment');\nvar markdown = require('markdown');\nvar Utils = require('builder/helpers/utils');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\nvar UploadConfig = require('builder/config/upload-config');\nvar template = require('./remote-dataset-item.tpl');\n\n/**\n *  Remote dataset item view\n *\n */\n\nmodule.exports = DatasetItem.extend({\n  tagName: 'li',\n  className: 'ModalBlockList-item ModalBlockList-item--full',\n\n  events: {\n    'click .js-tag-link': '_onTagClick',\n    'click': '_toggleSelected'\n  },\n\n  render: function () {\n    var tableModel = this.model.getTableModel();\n    var tags = this.model.get('tags') || [];\n    var description = cdb.core.sanitize.html(this.model.get('description') || '');\n    var source = markdown.toHTML(this.model.get('source') || '');\n    var tableGeomColumnTypes = tableModel.getGeometryType() || [];\n\n    var d = {\n      isRaster: this.model.isRaster(),\n      geometryType: tableGeomColumnTypes.length > 0 ? tableGeomColumnTypes[0] : '',\n      title: this.model.get('display_name') || this.model.get('name'),\n      source: source,\n      description: description,\n      timeDiff: moment(this.model.get('updated_at')).fromNow(),\n      tags: tags,\n      tagsCount: tags.length,\n      routerModel: this._routerModel,\n      maxTagsToShow: 3,\n      canImportDataset: this._canImportDataset(),\n      rowCount: undefined,\n      datasetSize: undefined\n    };\n\n    var rowCount = tableModel.get('row_count');\n    if (rowCount >= 0) {\n      d.rowCount = rowCount;\n      d.rowCountFormatted = (rowCount < 10000 ? Utils.formatNumber(rowCount) : Utils.readizableNumber(rowCount));\n    }\n\n    var datasetSize = tableModel.get('size');\n    if (datasetSize >= 0) {\n      d.datasetSize = Utils.readablizeBytes(\n        datasetSize,\n        datasetSize.toString().length > 9\n      );\n    }\n\n    this.$el.html(template(d));\n    this._setItemClasses();\n    this._renderTooltips();\n\n    return this;\n  },\n\n  _setItemClasses: function () {\n    // Item selected?\n    this.$el.toggleClass('is-selected', !!this.model.get('selected'));\n    // Check if it is selectable\n    this.$el.toggleClass('is-selectable', !!this._canImportDataset());\n    // Check if it is importable\n    this.$el.toggleClass('is-banned', !this._canImportDataset());\n  },\n\n  _renderTooltips: function () {\n    this.addView(\n      new TipsyTooltipView({\n        el: this.$('.DatasetsList-itemStatus'),\n        title: function (e) {\n          return $(this).attr('data-title');\n        }\n      })\n    );\n  },\n\n  _onTagClick: function (ev) {\n    if (ev) {\n      this.killEvent(ev);\n    }\n\n    var tag = $(ev.target).val();\n\n    if (tag) {\n      this._routerModel.set({\n        tag: tag,\n        library: true\n      });\n    }\n  },\n\n  _canImportDataset: function () {\n    var tableModel = this.model.getTableModel();\n    var tableSize = tableModel.get('size') || 0;\n    return (\n      this._userModel.get('remaining_byte_quota') * UploadConfig.fileTimesBigger >= tableSize &&\n      this._userModel.get('limits')['import_file_size'] > tableSize\n    );\n  },\n\n  _toggleSelected: function (ev) {\n    // Let links use default behaviour\n    if (ev.target.tagName !== 'A') {\n      this.killEvent(ev);\n      if (this._canImportDataset() && this._createModel.canSelect(this.model)) {\n        this.model.set('selected', !this.model.get('selected'));\n      }\n    }\n  }\n\n});\n","var Utils = require('builder/helpers/utils');\nvar SelectedDatasetView = require('builder/components/modals/add-layer/content/imports/import-selected-dataset-view');\nvar template = require('builder/components/modals/add-layer/content/imports/import-selected-dataset.tpl');\n\n/**\n *  Selected ArcGIS dataset\n *\n *  - Displays the result when an ArcGIS url/dataset is selected, no matter the type.\n *  - It will show available sync options if user can and the url is an ArcGIS layer.\n *  - Upgrade link for people who don't have sync permissions.\n *\n */\n\nmodule.exports = SelectedDatasetView.extend({\n  render: function () {\n    var title = this.options.fileAttrs.title && this.model.get('value')[this.options.fileAttrs.title] || this.model.get('value');\n    var description = this._genDescription();\n    var ext = this.options.fileAttrs.ext ? Utils.getFileExtension(title) : '';\n\n    if (this.options.fileAttrs.ext) {\n      title = title && title.replace('.' + ext, '');\n    }\n\n    var upgradeUrl = window.upgrade_url;\n    var userCanSync = this._userModel.isActionEnabled('sync_tables');\n    var customInstall = this._configModel.get('cartodb_com_hosted');\n\n    this.$el.html(\n      template({\n        title: title,\n        description: description,\n        ext: ext,\n        interval: this.model.get('interval'),\n        importCanSync: this.options.acceptSync && this._isArcGISLayer(title),\n        userCanSync: userCanSync,\n        showTrial: this._userModel.canStartTrial(),\n        showUpgrade: !userCanSync && !customInstall && upgradeUrl && !this._userModel.isInsideOrg(),\n        upgradeUrl: upgradeUrl\n      })\n    );\n    return this;\n  },\n\n  _isArcGISLayer: function (url) {\n    return url.search(/([0-9]+\\/|[0-9]+)/) !== -1;\n  }\n\n});\n","var FormView = require('builder/components/modals/add-layer/content/imports/import-data/import-data-form-view');\nvar HeaderView = require('builder/components/modals/add-layer/content/imports/import-data/import-data-header-view');\nvar SelectedDatasetView = require('./import-arcgis-selected-dataset-view');\nvar ImportDataView = require('builder/components/modals/add-layer/content/imports/import-data/import-data-view');\nvar headerTemplate = require('./import-arcgis-header.tpl');\nvar formTemplate = require('./import-arcgis-form.tpl');\n\n/**\n *  Import ArcGIS panel\n *\n *  - It only accepts an url, and it could be a map or a layer.\n *\n */\n\nmodule.exports = ImportDataView.extend({\n  options: {\n    fileExtensions: [],\n    type: 'service',\n    service: 'arcgis',\n    acceptSync: true,\n    fileEnabled: false,\n    fileAttrs: {\n      ext: false,\n      title: '',\n      description: ''\n    }\n  },\n\n  _initViews: function () {\n    var headerView = new HeaderView({\n      el: this.$('.ImportPanel-header'),\n      model: this.model,\n      userModel: this._userModel,\n      collection: this.collection,\n      fileEnabled: this.options.fileEnabled,\n      acceptSync: this.options.acceptSync,\n      template: headerTemplate\n    });\n    headerView.render();\n    this.addView(headerView);\n\n    var selected = new SelectedDatasetView({\n      el: this.$('.DatasetSelected'),\n      userModel: this._userModel,\n      model: this.model,\n      acceptSync: this.options.acceptSync,\n      fileAttrs: this.options.fileAttrs,\n      configModel: this._configModel\n    });\n    selected.render();\n    this.addView(selected);\n\n    var formView = new FormView({\n      el: this.$('.ImportPanel-form'),\n      userModel: this._userModel,\n      model: this.model,\n      template: formTemplate,\n      fileEnabled: this.options.fileEnabled\n    });\n\n    formView.render();\n    this.addView(formView);\n  }\n});\n","require('dragster');\nvar Dropzone = require('dropzone');\nvar $ = require('jquery');\nvar CoreView = require('backbone/core-view');\nvar template = require('./import-data-form.tpl');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\n/**\n *  Form view for url import for example\n *\n *  - It accepts an url\n *  - It checks if it is valid\n *  - It could have a file option\n *\n */\n\nvar REQUIRED_OPTS = [\n  'userModel'\n];\n\nmodule.exports = CoreView.extend({\n  options: {\n    template: '',\n    fileEnabled: false\n  },\n\n  events: {\n    'keyup .js-textInput': '_onTextChanged',\n    'submit .js-form': '_onSubmitForm'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this.template = opts.template || template;\n\n    this._initBinds();\n    this._checkVisibility();\n  },\n\n  render: function () {\n    this.$el.html(\n      this.template(this.options)\n    );\n    this._initViews();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.bind('change:state', this._checkVisibility, this);\n  },\n\n  _initViews: function () {\n    if (this.options.fileEnabled) {\n      var self = this;\n      this.$('.js-fileInput').bind('change', function (e) {\n        if (this.files && this.files.length > 0) {\n          self._onFileChanged(this.files);\n        }\n        this.value = '';\n      });\n\n      this._initDropzone();\n    }\n  },\n\n  _initDropzone: function () {\n    var el = $('html')[0]; // :(\n    var self = this;\n\n    this.dragster = new Dragster(el); // eslint-disable-line\n\n    $(el).bind('dragster:enter', function (e) {\n      self._showDropzone();\n    });\n\n    $(el).bind('dragster:leave', function (e) {\n      self._hideDropzone();\n    });\n\n    if (el.dropzone) { // avoid loading the dropzone twice\n      el.dropzone.destroy();\n    }\n\n    this.dropzone = new Dropzone(el, {\n      url: ':)',\n      autoProcessQueue: false,\n      previewsContainer: false\n    });\n\n    this.dropzone.on('dragover', function () {\n      self._showDropzone();\n    });\n\n    this.dropzone.on('drop', function (ev) {\n      var files = ev.dataTransfer.files;\n      self._onFileChanged(files);\n      self._hideDropzone();\n    });\n  },\n\n  _destroyDropzone: function () {\n    var el = $('html')[0]; // :(\n\n    if (this.dragster) {\n      this.dragster.removeListeners();\n      this.dragster.reset();\n      $(el).unbind('dragster:enter dragster:leave');\n    }\n\n    if (this.dropzone) {\n      this.dropzone.destroy();\n    }\n  },\n\n  _setValidFileExtensions: function (list) {\n    return RegExp('(\\.|\\/)(' + list.join('|') + ')$', 'i');\n  },\n\n  _onTextChanged: function () {\n    var value = this.$('.js-textInput').val();\n    if (!value) {\n      this._hideTextError();\n    }\n  },\n\n  _onFileChanged: function (files) {\n    this.trigger('fileSelected', this);\n\n    if (files && files.length === 1) {\n      files = files[0];\n    }\n\n    this.model.setUpload({\n      type: 'file',\n      value: files\n    });\n\n    if (this.model.get('state') !== 'error') {\n      this._hideFileError();\n      this.model.set('state', 'selected');\n    } else {\n      this._showFileError();\n    }\n  },\n\n  _showTextError: function () {\n    this.$('.Form-inputError').addClass('is-visible');\n  },\n\n  _hideTextError: function () {\n    this.$('.Form-inputError').removeClass('is-visible');\n  },\n\n  _showDropzone: function () {\n    this.$('.Form-upload').addClass('is-dropping');\n    this._hideFileError();\n  },\n\n  _hideDropzone: function () {\n    this.$('.Form-upload').removeClass('is-dropping');\n  },\n\n  _showFileError: function () {\n    if (this.model.get('state') === 'error') {\n      this.$('.js-fileError')\n        .text(this.model.get('get_error_text').what_about)\n        .show();\n      this.$('.js-fileLabel').hide();\n      this.$('.js-fileButton').addClass('Button--negative');\n    }\n  },\n\n  _hideFileError: function () {\n    this.$('.js-fileError').hide();\n    this.$('.js-fileLabel').show();\n    this.$('.js-fileButton').removeClass('Button--negative');\n  },\n\n  _onSubmitForm: function (e) {\n    if (e) this.killEvent(e);\n\n    var value = this.$('.js-textInput').val();\n\n    if (!value) {\n      this._hideTextError();\n      return;\n    }\n\n    // Change file attributes :S\n    this.trigger('urlSelected', this);\n\n    // Change model\n    var importType = this.model.get('service_name') ? 'service' : 'url';\n    this.model.setUpload({\n      type: importType,\n      value: value,\n      service_item_id: value,\n      state: 'idle'\n    });\n\n    if (this.model.get('state') !== 'error') {\n      this._hideFileError();\n      this._hideTextError();\n      this.model.set('state', 'selected');\n\n      this.trigger('urlSubmitted', this);\n    } else {\n      this._showTextError();\n    }\n  },\n\n  _checkVisibility: function () {\n    var state = this.model.get('state');\n    this[ state !== 'selected' ? 'show' : 'hide' ]();\n  },\n\n  clean: function () {\n    this._destroyDropzone();\n    this.$('.js-fileInput').unbind('change');\n    CoreView.prototype.clean.apply(this);\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar template = require('./import-data-header.tpl');\n\n/**\n *  Data header view\n *\n *  - It will change when upload state changes\n *  - Possibility to change state with a header button\n *\n */\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-back': '_goToStart'\n  },\n\n  options: {\n    fileEnabled: false,\n    acceptSync: false\n  },\n\n  initialize: function (opts) {\n    if (!opts.userModel) throw new Error('userModel is required');\n\n    this._userModel = opts.userModel;\n    this.template = opts.template || template;\n    this._initBinds();\n    this._checkVisibility();\n  },\n\n  render: function () {\n    var acceptSync = this.options.acceptSync && this._userModel.get('actions') && this._userModel.isActionEnabled('sync_tables') && this.model.get('type') !== 'file';\n\n    this.$el.html(\n      this.template({\n        type: this.model.get('type'),\n        fileEnabled: this.options.fileEnabled,\n        acceptSync: acceptSync,\n        state: this.model.get('state')\n      })\n    );\n    this._checkVisibility();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.bind('change:state', this.render, this);\n  },\n\n  _checkVisibility: function () {\n    this.show();\n  },\n\n  _goToStart: function () {\n    this.model.set('state', 'idle');\n  }\n\n});\n","var ImportView = require('builder/components/modals/add-layer/content/imports/import-view');\nvar UploadModel = require('builder/data/upload-model');\nvar FormView = require('./import-data-form-view');\nvar HeaderView = require('./import-data-header-view');\nvar SelectedDatasetView = require('builder/components/modals/add-layer/content/imports/import-selected-dataset-view');\nvar template = require('./import-data.tpl');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\n/**\n *  Import data panel\n *\n *  - It accepts an url\n *  - It checks if it is valid\n *\n */\n\nvar REQUIRED_OPTS = [\n  'userModel',\n  'configModel',\n  'createModel',\n  'privacyModel',\n  'guessingModel'\n];\n\nmodule.exports = ImportView.extend({\n  options: {\n    fileExtensions: [],\n    type: 'url',\n    service: '',\n    acceptSync: false,\n    fileEnabled: false,\n    formTemplate: '',\n    headerTemplate: '',\n    fileAttrs: {}\n  },\n\n  className: 'ImportPanel ImportDataPanel',\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._initModels();\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template());\n    this._initViews();\n    this._initBinds();\n    return this;\n  },\n\n  _initModels: function () {\n    this.model = new UploadModel({\n      type: this.options.type,\n      service_name: this.options.service\n    }, {\n      userModel: this._userModel,\n      configModel: this._configModel\n    });\n  },\n\n  _initViews: function () {\n    this.model.setFresh();\n\n    var headerView = new HeaderView({\n      el: this.$('.ImportPanel-header'),\n      model: this.model,\n      userModel: this._userModel,\n      fileEnabled: this.options.fileEnabled,\n      acceptSync: this.options.acceptSync,\n      template: this.options.headerTemplate\n    });\n    headerView.render();\n    this.addView(headerView);\n\n    var selected = new SelectedDatasetView({\n      el: this.$('.DatasetSelected'),\n      userModel: this._userModel,\n      model: this.model,\n      acceptSync: this.options.acceptSync,\n      fileAttrs: this.options.fileAttrs,\n      configModel: this._configModel\n    });\n    selected.render();\n    this.addView(selected);\n\n    var formView = new FormView({\n      el: this.$('.ImportPanel-form'),\n      userModel: this._userModel,\n      model: this.model,\n      template: this.options.formTemplate,\n      fileEnabled: this.options.fileEnabled\n    });\n\n    formView.bind('fileSelected', function () {\n      selected.setOptions({\n        acceptSync: false,\n        fileAttrs: {\n          ext: true,\n          title: 'name',\n          description: {\n            content: [{\n              name: 'size',\n              format: 'size'\n            }]\n          }\n        }\n      });\n    });\n\n    formView.bind('urlSelected', function () {\n      selected.setOptions({\n        acceptSync: true,\n        fileAttrs: {\n          ext: false,\n          title: '',\n          description: ''\n        }\n      });\n    });\n\n    formView.bind('urlSubmitted', function () {\n      this._finish();\n    }.bind(this));\n\n    formView.render();\n    this.addView(formView);\n  },\n\n  _finish: function () {\n    if (this._createModel.canFinish()) {\n      this.model.setPrivacy(this._privacyModel.get('privacy'));\n      this.model.setGuessing(this._guessingModel.get('guessing'));\n\n      this._createModel.finish();\n    }\n  },\n\n  _initBinds: function () {\n    this.model.unbind('change:state', this._checkState, this);\n    this.model.unbind('change', this._triggerChange, this);\n\n    this.model.bind('change:state', this._checkState, this);\n    this.model.bind('change', this._triggerChange, this);\n  },\n\n  _checkState: function () {\n    if (this.model.previous('state') === 'selected') {\n      this.model.set({\n        type: undefined,\n        value: '',\n        service_name: '',\n        service_item_id: '',\n        interval: 0\n      });\n    }\n  }\n\n});\n","var ImportDataView = require('./import-data/import-data-view');\nvar ImportServiceView = require('./import-service/import-service-view');\nvar ImportArcGISView = require('./import-arcgis/import-arcgis-view');\nvar ImportTwitterView = require('./import-twitter/import-twitter-view');\n\n/**\n * Attributes:\n *\n *  view: import pane class view\n *  enabled: function that takes configModel and returns whether the service is enabled\n *  fallbackClassName: ...\n *  name: local name\n *  title: text for tab link\n *  options:\n *    - service:\n *    - fileExtensions:\n *    - showAvailableFormats:\n *    - acceptSync:\n *    - fileAttrs:\n *\n */\n\nmodule.exports = {\n\n  File: {\n    view: ImportDataView,\n    enabled: function (config, userModel) { return true; },\n    name: 'file',\n    title: 'Data file',\n    options: {\n      type: 'url',\n      fileEnabled: true,\n      acceptSync: true\n    }\n  },\n  GDrive: {\n    view: ImportServiceView,\n    enabled: function (config, userModel) { return !!config.get('oauth_gdrive'); },\n    name: 'gdrive',\n    title: 'Google Drive',\n    options: {\n      service: 'gdrive',\n      fileExtensions: ['Google SpreadSheet', 'CSV'],\n      showAvailableFormats: false,\n      acceptSync: true,\n      fileAttrs: {\n        ext: true,\n        title: 'filename',\n        description: {\n          content: [{\n            name: 'size',\n            format: 'size',\n            key: true\n          }]\n        }\n      }\n    }\n  },\n  Dropbox: {\n    view: ImportServiceView,\n    enabled: function (config, userModel) { return !!config.get('oauth_dropbox'); },\n    name: 'dropbox',\n    title: 'Dropbox',\n    options: {\n      service: 'dropbox',\n      fileExtensions: ['CSV', 'XLS'],\n      showAvailableFormats: false,\n      acceptSync: true,\n      fileAttrs: {\n        ext: true,\n        title: 'filename',\n        description: {\n          content: [\n            {\n              name: 'id',\n              format: ''\n            },\n            {\n              name: 'size',\n              format: 'size',\n              key: true\n            }\n          ],\n          separator: '-'\n        }\n      }\n    }\n  },\n  Box: {\n    view: ImportServiceView,\n    enabled: function (config, userModel) { return !!config.get('oauth_box'); },\n    name: 'box',\n    title: 'Box',\n    fallback: require('./fallbacks/import-box-fallback.tpl'),\n    options: {\n      service: 'box',\n      fileExtensions: ['CSV', 'XLS'],\n      showAvailableFormats: false,\n      acceptSync: true,\n      fileAttrs: {\n        ext: true,\n        title: 'filename',\n        description: {\n          content: [\n            {\n              name: 'size',\n              format: 'size',\n              key: true\n            }\n          ],\n          separator: '-'\n        }\n      }\n    }\n  },\n  Twitter: {\n    view: ImportTwitterView,\n    enabled: function (config, userModel) { return userModel.get('twitter').enabled && !!config.get('datasource_search_twitter'); },\n    fallback: require('./fallbacks/import-twitter-fallback.tpl'),\n    name: 'twitter',\n    title: 'Twitter'\n  },\n  Mailchimp: {\n    view: ImportServiceView,\n    enabled: function (config, userModel) { return userModel.get('mailchimp').enabled && !!config.get('oauth_mailchimp'); },\n    fallback: require('./fallbacks/import-mailchimp-fallback.tpl'),\n    name: 'mailchimp',\n    title: 'MailChimp',\n    options: {\n      service: 'mailchimp',\n      fileExtensions: [],\n      acceptSync: true,\n      showAvailableFormats: false,\n      headerTemplate: require('./import-mailchimp/import-data-header-mailchimp.tpl'),\n      fileAttrs: {\n        ext: true,\n        title: 'filename',\n        description: {\n          content: [{\n            name: 'member_count',\n            format: 'number',\n            key: true\n          }],\n          itemName: 'member',\n          separator: ''\n        }\n      }\n    }\n  },\n  // Instagram: {\n  //   view: ImportServiceView,\n  //   fallback: require('./fallbacks/import-instagram-fallback.tpl'),\n  //   name: 'instagram',\n  //   title: 'Instagram',\n  //   options: {\n  //     service: 'instagram',\n  //     fileExtensions: [],\n  //     acceptSync: false,\n  //     showAvailableFormats: false,\n  //     fileAttrs: {\n  //       ext: false,\n  //       title: 'title'\n  //     }\n  //   }\n  // },\n  Arcgis: {\n    view: ImportArcGISView,\n    enabled: function (config, userModel) { return config.get('arcgis_enabled'); },\n    fallback: require('./fallbacks/import-arcgis-fallback.tpl'),\n    name: 'arcgis',\n    title: 'ArcGIS Server&trade;'\n  },\n  Salesforce: {\n    view: ImportDataView,\n    enabled: function (config, userModel) { return config.get('salesforce_enabled'); },\n    fallback: require('./fallbacks/import-salesforce-fallback.tpl'),\n    name: 'salesforce',\n    title: 'Salesforce'\n    // options: {\n    //   type: 'service',\n    //   service_name: 'salesforce',\n    //   acceptSync: true,\n    //   formTemplate: require('./import-salesforce/import-data-form-salesforce.tpl'),\n    //   headerTemplate: require('./import-salesforce/import-data-header-salesforce.tpl')\n    // }\n  }\n};\n","var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar Utils = require('builder/helpers/utils');\nvar template = require('./import-selected-dataset.tpl');\n\n/**\n *  Selected dataset\n *\n *  - Displays the result when a dataset is selected, no matter the type.\n *  - It will show available sync options if that import lets it.\n *  - Upgrade link for people who don't have sync permissions.\n *\n */\n\nmodule.exports = CoreView.extend({\n  className: 'DatasetSelected',\n\n  _FORMATTERS: {\n    'size': Utils.readablizeBytes,\n    'number': Utils.formatNumber\n  },\n\n  options: {\n    acceptSync: false,\n    fileAttrs: {\n      ext: false,\n      title: '',\n      description: {\n        content: [{\n          name: 'id',\n          format: ''\n        }],\n        itemName: '',\n        separator: ''\n      }\n    }\n  },\n\n  events: {\n    'click .js-interval-0': '_onIntervalZero',\n    'click .js-interval-1': '_onIntervalHour',\n    'click .js-interval-2': '_onIntervalDay',\n    'click .js-interval-3': '_onIntervalWeek',\n    'click .js-interval-4': '_onIntervalMonth'\n  },\n\n  initialize: function (opts) {\n    if (!opts.userModel) throw new TypeError('userModel is required');\n    if (!opts.configModel) throw new TypeError('configModel is required');\n\n    this._configModel = opts.configModel;\n    this._userModel = opts.userModel;\n    this._initBinds();\n    this._checkVisibility();\n  },\n\n  render: function () {\n    var title = this.options.fileAttrs.title && this.model.get('value')[this.options.fileAttrs.title] || this.model.get('value');\n    var description = this._genDescription();\n    var ext = this.options.fileAttrs.ext ? Utils.getFileExtension(title) : '';\n\n    if (this.options.fileAttrs.ext) {\n      title = title && title.replace('.' + ext, '');\n    }\n\n    var upgradeUrl = window.upgrade_url;\n    var userCanSync = this._userModel.isActionEnabled('sync_tables');\n    var customInstall = this._configModel.get('cartodb_com_hosted');\n\n    this.$el.html(\n      template({\n        title: title,\n        description: description,\n        ext: ext,\n        interval: this.model.get('interval'),\n        importCanSync: this.options.acceptSync,\n        userCanSync: userCanSync,\n        showTrial: this._userModel.canStartTrial(),\n        showUpgrade: !userCanSync && !customInstall && upgradeUrl && !this._userModel.isInsideOrg(),\n        upgradeUrl: upgradeUrl\n      })\n    );\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.bind('change:value', this.render, this);\n    this.model.bind('change:interval', this.render, this);\n    this.model.bind('change:state', this._checkVisibility, this);\n  },\n\n  _genDescription: function () {\n    if (this.options.fileAttrs && this.options.fileAttrs.description) {\n      var descriptionOpts = this.options.fileAttrs.description;\n      var descriptionKeyValue = '';\n      var descriptionStr = '';\n      var self = this;\n\n      if (descriptionOpts.content && descriptionOpts.content.length > 0) {\n        _.each(descriptionOpts.content, function (item, i) {\n          if (i > 0 && descriptionOpts.separator) {\n            descriptionStr += ' ' + descriptionOpts.separator + ' ';\n          }\n\n          var value = self.model.get('value')[item.name];\n          var format = item.format && self._FORMATTERS[item.format];\n          descriptionStr += format && format(value) || value;\n\n          if (item.key) {\n            descriptionKeyValue = item.name;\n          }\n        });\n      }\n\n      if (descriptionOpts.itemName && descriptionKeyValue) {\n        descriptionStr += ' ' + (descriptionOpts.itemName && _t('components.modals.add-layer.imports.' + descriptionOpts.itemName + '-pluralize', { smart_count: descriptionKeyValue }) || '');\n      }\n\n      return descriptionStr;\n    }\n\n    return '';\n  },\n\n  _onIntervalZero: function () {\n    this.model.set('interval', 0);\n  },\n\n  _onIntervalHour: function () {\n    if (this.options.acceptSync && this._userModel.isActionEnabled('sync_tables')) {\n      this.model.set('interval', 3600);\n    }\n  },\n\n  _onIntervalDay: function () {\n    if (this.options.acceptSync && this._userModel.isActionEnabled('sync_tables')) {\n      this.model.set('interval', 86400);\n    }\n  },\n\n  _onIntervalWeek: function () {\n    if (this.options.acceptSync && this._userModel.isActionEnabled('sync_tables')) {\n      this.model.set('interval', 604800);\n    }\n  },\n\n  _onIntervalMonth: function () {\n    if (this.options.acceptSync && this._userModel.isActionEnabled('sync_tables')) {\n      this.model.set('interval', 2592000);\n    }\n  },\n\n  setOptions: function (d) {\n    if (d && !_.isEmpty(d)) {\n      _.extend(this.options, d);\n    }\n  },\n\n  _checkVisibility: function () {\n    var state = this.model.get('state');\n    if (state === 'selected') {\n      this.show();\n    } else {\n      this.hide();\n    }\n  }\n\n});\n","var CoreView = require('backbone/core-view');\nvar template = require('./import-service-header.tpl');\n\n/**\n *  Service header\n *\n *  - It will change when upload state changes\n *  - Possibility to change state with a header button\n *\n */\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-back': '_goToList'\n  },\n\n  options: {\n    title: 'Service',\n    showAvailableFormats: false,\n    acceptSync: false,\n    fileExtensions: [],\n    template: ''\n  },\n\n  initialize: function (opts) {\n    if (!opts.userModel) throw new Error('userModel is required');\n    this._userModel = opts.userModel;\n    this.template = opts.template || template;\n    this._initBinds();\n  },\n\n  render: function () {\n    this.$el.html(\n      this.template({\n        items: this.collection.size(),\n        service_name: this.model.get('service_name'),\n        showAvailableFormats: this.options.showAvailableFormats,\n        fileExtensions: this.options.fileExtensions,\n        acceptSync: this.options.acceptSync && this._userModel.isActionEnabled('sync_tables'),\n        state: this.model.get('state'),\n        title: this.options.title\n      })\n    );\n    this._checkVisibility();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.bind('change:state', this.render, this);\n  },\n\n  _checkVisibility: function () {\n    var state = this.model.get('state');\n    this[ state !== 'list' ? 'show' : 'hide' ]();\n  },\n\n  _goToList: function () {\n    this.model.set('state', 'list');\n  }\n\n});\n","var Utils = require('builder/helpers/utils');\n\n/**\n *  Service list item format utils\n *\n *  - Create customized functions for service list items.\n *\n */\n\nmodule.exports = {\n  // Due to the fact that backend data source service\n  // returns 0 size when it doesn't know it\n  formatSize: function (s) {\n    if (s && s > 0) {\n      return Utils.readablizeBytes(s);\n    } else {\n      return 'Unknown';\n    }\n  }\n};\n","var Backbone = require('backbone');\n\n/**\n *  Service item model\n *\n */\n\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    id: '',\n    filename: '',\n    checksum: '',\n    service: '',\n    size: '',\n    title: ''\n  }\n});\n","var ServiceItem = require('./import-service-item-model');\nvar Backbone = require('backbone');\n\n/**\n *  Service item model + Service items collection\n *\n *  - It needs a datasource name or it won't work.\n *\n */\n\nmodule.exports = Backbone.Collection.extend({\n\n  _DATASOURCE_NAME: 'dropbox',\n\n  model: ServiceItem,\n\n  url: function (method) {\n    var version = this._configModel.urlVersion('imports_service');\n    var baseUrl = this._configModel.get('base_url');\n    return baseUrl + '/api/' + version + '/imports/service/' + this._DATASOURCE_NAME + '/list_files';\n  },\n\n  initialize: function (coll, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n    if (!opts.datasourceName) throw new Error('datasourceName is required');\n    this._configModel = opts.configModel;\n    this._DATASOURCE_NAME = opts.datasourceName;\n  },\n\n  fetch: function () {\n    this.trigger('fetch', this);\n    return Backbone.Collection.prototype.fetch.apply(this, arguments);\n  },\n\n  parse: function (r) {\n    return r.files;\n  }\n\n});\n","var CoreView = require('backbone/core-view');\nvar Utils = require('builder/helpers/utils');\nvar ServiceUtilsFormat = require('./import-service-item-description-format');\nvar template = require('./import-service-list-item.tpl');\nvar _ = require('underscore');\n\n/**\n *  Service list item view\n *\n *  - Displays the item info.\n *  - It lets user to select the item for a future import.\n *\n */\n\nmodule.exports = CoreView.extend({\n  options: {\n    title: '',\n    fileAttrs: {\n      ext: false,\n      title: 'filename',\n      description: 'size',\n      itemName: 'file',\n      formatDescription: ''\n    }\n  },\n\n  _FORMATTERS: {\n    'size': ServiceUtilsFormat.formatSize,\n    'number': Utils.formatNumber\n  },\n\n  className: 'ServiceList-item',\n  tagName: 'li',\n\n  events: {\n    'click .js-choose': '_onSelectItem'\n  },\n\n  render: function () {\n    var title = this.model.get(this.options.fileAttrs.title);\n    var description = this._genDescription();\n    var ext = this.options.fileAttrs.ext ? Utils.getFileExtension(title) : '';\n\n    if (this.options.fileAttrs.ext) {\n      title = title && title.replace('.' + ext, '');\n    }\n\n    this.$el.html(\n      template({\n        name: this.options.title,\n        ext: ext,\n        title: title,\n        description: description\n      })\n    );\n    return this;\n  },\n\n  _genDescription: function () {\n    if (this.options.fileAttrs && this.options.fileAttrs.description) {\n      var descriptionOpts = this.options.fileAttrs.description;\n      var descriptionKeyValue = '';\n      var descriptionStr = '';\n      var self = this;\n\n      if (descriptionOpts.content && descriptionOpts.content.length > 0) {\n        _.each(descriptionOpts.content, function (item, i) {\n          if (i > 0 && descriptionOpts.separator) {\n            descriptionStr += ' ' + descriptionOpts.separator + ' ';\n          }\n\n          var value = self.model.get(item.name);\n          var format = item.format && self._FORMATTERS[item.format];\n          descriptionStr += format && format(value) || value;\n\n          if (item.key) {\n            descriptionKeyValue = item.name;\n          }\n        });\n      }\n\n      if (descriptionOpts.itemName && descriptionKeyValue) {\n        descriptionStr += ' ' + (descriptionOpts.itemName && _t('components.modals.add-layer.imports.' + descriptionOpts.itemName + '-pluralize', { smart_count: descriptionKeyValue }) || '');\n      }\n\n      return descriptionStr;\n    }\n\n    return '';\n  },\n\n  _onSelectItem: function () {\n    this.trigger('selected', this.model, this);\n  }\n\n});\n","var CoreView = require('backbone/core-view');\nvar ServiceListItemView = require('./import-service-list-item-view');\nvar template = require('./import-service-list.tpl');\n\n/**\n *  Service list view\n *\n *  - It will display all the items available under\n *  the service and the possibility to chose one of\n *  them.\n *\n */\n\nmodule.exports = CoreView.extend({\n  options: {\n    title: 'service',\n    fileAttrs: {}\n  },\n\n  initialize: function () {\n    this._initBinds();\n    this._checkVisibility();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    var size = this.collection.size();\n    this.$el.html(\n      template({\n        size: size,\n        title: this.options.title,\n        pluralize: _t('components.modals.add-layer.imports.item-pluralize', { smart_count: size })\n      })\n    );\n    if (this.collection.size() > 0) {\n      this.collection.each(this._addItem, this);\n    }\n    return this;\n  },\n\n  _initBinds: function () {\n    this.collection.bind('sync', this.render, this);\n    this.model.bind('change:state', this._checkVisibility, this);\n    this.add_related_model(this.collection);\n  },\n\n  _addItem: function (m) {\n    var item = new ServiceListItemView({\n      model: m,\n      title: this.options.title,\n      fileAttrs: this.options.fileAttrs\n    });\n    item.bind('selected', this._onSelectedItem, this);\n    this.$('.ServiceList-items').append(item.render().el);\n    this.addView(item);\n  },\n\n  _onSelectedItem: function (mdl) {\n    this.model.setUpload({\n      state: 'selected',\n      value: mdl.toJSON(),\n      service_item_id: mdl.get('id')\n    });\n  },\n\n  _checkVisibility: function () {\n    var state = this.model.get('state');\n    if (state === 'list') {\n      this.show();\n    } else {\n      this.hide();\n    }\n  }\n\n});\n","var CoreView = require('backbone/core-view');\nvar template = require('./import-service-loader.tpl');\n\n/**\n *  Service loader view\n *\n *  - It will be on charge to make token and oauth petitions\n *\n */\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-connect': '_checkToken'\n  },\n\n  initialize: function (opts) {\n    if (!opts.serviceTokenModel) throw new Error('serviceTokenModel provider is required');\n    if (!opts.serviceOauthModel) throw new Error('serviceOauthModel is required');\n\n    this._serviceTokenModel = opts.serviceTokenModel;\n    this._serviceOauthModel = opts.serviceOauthModel;\n    this._initBinds();\n    this._checkVisibility();\n  },\n\n  render: function () {\n    this.$el.html(\n      template({\n        state: this.model.get('state')\n      })\n    );\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.bind('change:state', function () {\n      this.render();\n      this._checkVisibility();\n    }, this);\n  },\n\n  _checkToken: function () {\n    var self = this;\n    this.model.set('state', 'token');\n    this._serviceTokenModel.fetch({\n      success: function (r) {\n        if (!r.get('oauth_valid')) {\n          self._getOauthURL();\n        }\n      },\n      error: function (e) {\n        self._getOauthURL();\n      }\n    });\n  },\n\n  _checkVisibility: function () {\n    var state = this.model.get('state');\n    if (state !== 'list' && state !== 'selected') {\n      this.show();\n    } else {\n      this.hide();\n    }\n  },\n\n  _getOauthURL: function () {\n    var self = this;\n    this.model.set('state', 'oauth');\n    this._serviceOauthModel.set({ url: '' }, { silent: true });\n    this._serviceOauthModel.fetch({\n      error: function () {\n        self.model.set('state', 'error');\n      }\n    });\n  }\n\n});\n","var Backbone = require('backbone');\n\n/**\n *  Get oauth url from the service requested\n *\n *  - It needs a datasource name or it won't work.\n *\n *  new ServiceOauthModel({ datasourceName: 'dropbox', configModel: configModel })\n */\n\nmodule.exports = Backbone.Model.extend({\n\n  _DATASOURCE_NAME: 'dropbox',\n\n  url: function (method) {\n    var version = this._configModel.urlVersion('imports_service');\n    var baseUrl = this._configModel.get('base_url');\n    return baseUrl + '/api/' + version + '/imports/service/' + this._DATASOURCE_NAME + '/auth_url';\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n    if (!opts.datasourceName) throw new Error('datasource_name is required');\n    this._configModel = opts.configModel;\n    this._DATASOURCE_NAME = opts.datasourceName;\n  }\n\n});\n","var Backbone = require('backbone');\n\n/**\n *  Model to check if oAuth token is valid or not\n *\n *  - It needs a datasource name or it won't work.\n *\n *  new ServiceTokenModel({ datasourceName: 'dropbox', configModel: configModel })\n */\n\nmodule.exports = Backbone.Model.extend({\n\n  _DATASOURCE_NAME: 'dropbox',\n\n  url: function (method) {\n    var version = this._configModel.urlVersion('imports_service');\n    var baseUrl = this._configModel.get('base_url');\n    return baseUrl + '/api/' + version + '/imports/service/' + this._DATASOURCE_NAME + '/token_valid';\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n    if (!opts.datasourceName) throw new Error('datasource_name is required');\n    this._configModel = opts.configModel;\n    this._DATASOURCE_NAME = opts.datasourceName;\n  }\n\n});\n","var ImportView = require('builder/components/modals/add-layer/content/imports/import-view');\nvar UploadModel = require('builder/data/upload-model');\nvar ServiceHeaderView = require('./import-service-header-view');\nvar ServiceLoaderView = require('./import-service-loader-view');\nvar ServiceListView = require('./import-service-list-view');\nvar ServiceSelectedFileView = require('builder/components/modals/add-layer/content/imports/import-selected-dataset-view');\nvar ServiceTokenModel = require('./import-service-token-model');\nvar ServiceOauthModel = require('./import-service-oauth-model');\nvar ServiceCollection = require('./import-service-items-collection');\nvar template = require('./import-service.tpl');\nvar WINDOW_INTERVAL = 1000; // miliseconds\n\n/**\n *  Import service view\n *\n *  - Use a service import panel\n *  - It will request login to the service\n *  - If it works, a list of available files will appear.\n *  - Once a file is selected, sync options will appear.\n *\n */\n\nmodule.exports = ImportView.extend({\n  _DATASOURCE_NAME: 'dropbox',\n\n  className: 'ImportPanel ImportPanelService',\n\n  options: {\n    service: '', // Name of the service\n    showAvailableFormats: false, // If all available format link should appear or not\n    fileExtensions: [], // File extensions\n    acceptSync: false, // Accept sync this service?\n    fileAttrs: { // Attributes or changes for service list or selected file:\n      ext: false, // If files should show extension\n      title: 'filename', // Title attribute\n      description: '<%- size %>', // Description attribute\n      formatDescription: 'size', // If any format function should be applied over the description\n      headerTemplate: '' // Header template\n    }\n  },\n\n  initialize: function (opts) {\n    if (!opts.service) throw new Error('service prodiver is required');\n    if (!opts.userModel) throw new Error('userModel is required');\n    if (!opts.configModel) throw new Error('configModel is required');\n\n    this._userModel = opts.userModel;\n    this._configModel = opts.configModel;\n    this._DATASOURCE_NAME = this.options.service;\n\n    this.model = new UploadModel({\n      type: 'service',\n      service_name: this._DATASOURCE_NAME\n    }, {\n      userModel: this._userModel,\n      configModel: this._configModel\n    });\n\n    this._initModels();\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template(this.options));\n    this._initViews();\n    return this;\n  },\n\n  _initModels: function () {\n    this._serviceTokenModel = new ServiceTokenModel(null, {\n      datasourceName: this._DATASOURCE_NAME,\n      configModel: this._configModel\n    });\n    this._serviceOauthModel = new ServiceOauthModel(null, {\n      datasourceName: this._DATASOURCE_NAME,\n      configModel: this._configModel\n    });\n    this.collection = new ServiceCollection(null, {\n      datasourceName: this._DATASOURCE_NAME,\n      configModel: this._configModel\n    });\n  },\n\n  _initBinds: function () {\n    this.model.bind('change', this._triggerChange, this);\n    this.model.bind('change:state', this._checkState, this);\n    this._serviceTokenModel.bind('change:oauth_valid', this._onOauthChange, this);\n    this._serviceOauthModel.bind('change:url', this._openWindow, this);\n    this.add_related_model(this._serviceOauthModel);\n    this.add_related_model(this._serviceTokenModel);\n  },\n\n  _initViews: function () {\n    var header = new ServiceHeaderView({\n      el: this.$('.ImportPanel-header'),\n      userModel: this._userModel,\n      model: this.model,\n      collection: this.collection,\n      title: this.options.title,\n      showAvailableFormats: this.options.showAvailableFormats,\n      fileExtensions: this.options.fileExtensions,\n      acceptSync: this.options.acceptSync,\n      template: this.options.headerTemplate\n    });\n    header.render();\n    this.addView(header);\n\n    var loader = new ServiceLoaderView({\n      el: this.$('.ServiceLoader'),\n      model: this.model,\n      serviceTokenModel: this._serviceTokenModel,\n      serviceOauthModel: this._serviceOauthModel\n    });\n    loader.render();\n    this.addView(loader);\n\n    var list = new ServiceListView({\n      el: this.$('.ServiceList'),\n      model: this.model,\n      collection: this.collection,\n      title: this.options.title,\n      fileAttrs: this.options.fileAttrs\n    });\n    list.render();\n    this.addView(list);\n\n    var selected = new ServiceSelectedFileView({\n      el: this.$('.ServiceSelected'),\n      userModel: this._userModel,\n      model: this.model,\n      acceptSync: this.options.acceptSync,\n      fileAttrs: this.options.fileAttrs,\n      configModel: this._configModel\n    });\n    selected.render();\n    this.addView(selected);\n  },\n\n  _onOauthChange: function () {\n    if (this._serviceTokenModel.get('oauth_valid')) {\n      this._getFiles();\n    }\n  },\n\n  _getFiles: function () {\n    var self = this;\n\n    this.model.set('state', 'retrieving');\n\n    this.collection.fetch({\n      error: function () {\n        self.model.set('state', 'error');\n      },\n      success: function () {\n        self.model.set('state', 'list');\n      }\n    });\n  },\n\n  _checkState: function () {\n    if (this.model.get('state') === 'list') {\n      if (this.collection.size() === 1) {\n        var item = this.collection.at(0);\n        this.model.setUpload({\n          state: 'selected',\n          value: item.toJSON(),\n          service_item_id: item.get('id')\n        });\n      }\n    }\n    if (this.model.get('state') !== 'selected') {\n      this.model.set({\n        value: '',\n        service_item_id: '',\n        interval: 0\n      });\n    }\n  },\n\n  _openWindow: function () {\n    var url = this._serviceOauthModel.get('url');\n    var self = this;\n    var i = window.open(url, null, 'menubar=no,toolbar=no,width=600,height=495');\n    var e = window.setInterval(function () {\n      if (i && i.closed) {\n        self._getFiles();\n        clearInterval(e);\n      } else if (!i) {\n        self.model.set('state', 'error');\n        clearInterval(e);\n      }\n    }, WINDOW_INTERVAL);\n  }\n\n});\n","var CoreView = require('backbone/core-view');\nvar Utils = require('builder/helpers/utils');\nvar template = require('./credits-info.tpl');\n\n/**\n *  Credits info view\n *\n *  - Percentage of use\n *  - Possible money spent\n *\n */\n\nmodule.exports = CoreView.extend({\n\n  initialize: function (opts) {\n    this._userModel = opts.userModel;\n    this._initBinds();\n  },\n\n  render: function () {\n    var twitterData = this._userModel.get('twitter');\n    var remaining = twitterData.quota - twitterData.monthly_use;\n    var per = Math.min(100, Math.ceil((this.model.get('value') * 100) / remaining));\n\n    this.$el.html(\n      template({\n        value: this.model.get('value'),\n        remaining: remaining,\n        per: per,\n        hardLimit: twitterData.hard_limit,\n        remainingFormatted: Utils.formatNumber(remaining),\n        quota: twitterData.quota,\n        block_price: twitterData.block_price,\n        block_size: Utils.readizableNumber(twitterData.block_size)\n      })\n    );\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.bind('change', this.render, this);\n  }\n\n});\n","var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nrequire('jquery-ui');\nvar CreditsInfoView = require('./credits-info-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'userModel'\n];\n\nvar DEFAULT_PER_VALUE = 80;\nvar MIN_PER_VALUE = 1;\n\n/**\n *  Set max use of credits for Twitter\n *\n *  - Slider range = 1000 credits\n *  - Last step should be infinite if user doesn't\n *    have \"soft_limit\".\n *\n */\n\nmodule.exports = CoreView.extend({\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n    this._disabled = (opts && opts.disabled) ? opts.disabled : false;\n\n    this.model = new Backbone.Model();\n    this._initBinds();\n    this._setModel();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this._destroySlider();\n    this._initViews();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.bind('change:value', this._onValueChange, this);\n  },\n\n  _setModel: function () {\n    var twitterData = this._userModel.get('twitter');\n    var max = twitterData.quota - twitterData.monthly_use;\n    var min = (MIN_PER_VALUE * max) / 100; // Just 1% of the quota\n    var defaultValue = (max * DEFAULT_PER_VALUE) / 100;\n    var value = max > 0 ? defaultValue : (max + 1);\n\n    var self = this;\n    this.model.set({\n      max: (twitterData.hard_limit ? max : max + 1),\n      min: min,\n      step: min,\n      value: max > 0 ? value : twitterData.quota,\n      disabled: self._disabled || max <= 0\n    });\n  },\n\n  _initViews: function () {\n    this._setModel();\n    this.$('.js-slider').slider(\n      _.extend({\n        range: 'min',\n        orientation: 'horizontal',\n        slide: this._onSlideChange.bind(this),\n        change: this._onSlideChange.bind(this)\n      },\n      this.model.attributes\n      )\n    );\n\n    var creditsInfo = new CreditsInfoView({\n      el: this.$('.js-info'),\n      userModel: this._userModel,\n      model: this.model\n    });\n    creditsInfo.render();\n    this.addView(creditsInfo);\n  },\n\n  _onSlideChange: function (ev, ui) {\n    this.model.set('value', ui.value);\n  },\n\n  _onValueChange: function () {\n    this.trigger('maxCreditsChange', this.getMaxCredits(), this);\n  },\n\n  getMaxCredits: function () {\n    var twitterData = this._userModel.get('twitter');\n    var max = twitterData.quota - twitterData.monthly_use;\n    var value = this.model.get('value');\n    return value > max ? 0 : value;\n  },\n\n  _destroySlider: function () {\n    if (this.$('.js-slider').data('ui-slider')) {\n      this.$('.js-slider').slider('destroy');\n    }\n  },\n\n  clean: function () {\n    this._destroySlider();\n    CoreView.prototype.clean.call(this);\n  }\n\n});\n","var _ = require('underscore');\nvar moment = require('moment');\nvar ImportView = require('builder/components/modals/add-layer/content/imports/import-view');\nvar UploadModel = require('builder/data/upload-model');\nvar DatesRangePickerView = require('builder/components/date-picker-range/date-picker-range-view');\nvar TwitterCategoriesView = require('./twitter-categories/twitter-categories-view');\nvar CreditsUsageView = require('./credits-usage-view.js');\nvar template = require('./import-twitter.tpl');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'configModel',\n  'userModel'\n];\n\n/**\n *  Import twitter panel\n *\n *  - It accepts up to 3 categories\n *  - Date range can't be longer than 30 days\n *\n */\n\nmodule.exports = ImportView.extend({\n  options: {\n    acceptSync: false,\n    type: 'service',\n    service: 'twitter_search'\n  },\n\n  className: 'ImportPanel ImportTwitterPanel',\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this.model = new UploadModel({\n      type: this.options.type,\n      service_name: this.options.service\n    }, {\n      userModel: this._userModel,\n      configModel: this._configModel\n    });\n\n    this._initBinds();\n  },\n\n  _disabledDueLackOfCredentials: function () {\n    return !this._userModel.hasOwnTwitterCredentials();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(\n      template({\n        currentGMT: moment().format('Z')\n      })\n    );\n    this._initViews();\n    return this;\n  },\n\n  _initViews: function () {\n    // Categories\n    var categories = this.categories = new TwitterCategoriesView({\n      disabled: this._disabledDueLackOfCredentials()\n    });\n    categories.bind('changeCategory', this._setModel, this);\n    this.$('.ImportTwitterPanel-categories').append(categories.render().el);\n    this.addView(categories);\n\n    // Date picker\n    var datepicker = this.datepicker = new DatesRangePickerView({\n      className: 'DatePicker DatePicker--withBorder',\n      disabled: this._disabledDueLackOfCredentials()\n    });\n    datepicker.bind('changeDate', this._setModel, this);\n    this.$('.js-picker').append(datepicker.render().el);\n    this.addView(datepicker);\n\n    // Use slider\n    var creditsUsage = this.creditsUsage = new CreditsUsageView({\n      el: this.$('.CreditsUsage'),\n      userModel: this._userModel,\n      disabled: this._disabledDueLackOfCredentials()\n    });\n    creditsUsage.bind('maxCreditsChange', this._setModel, this);\n    creditsUsage.render();\n    this.addView(creditsUsage);\n\n    this._setModel();\n  },\n\n  _initBinds: function () {\n    this.model.bind('change', this._triggerChange, this);\n  },\n\n  _getCategories: function () {\n    var categories = this.categories.getCategories();\n    return _.filter(categories, function (c) {\n      return c.category && c.terms.length > 0;\n    });\n  },\n\n  _getDates: function () {\n    return this.datepicker.getDates();\n  },\n\n  _getMaxCredits: function () {\n    return this.creditsUsage.getMaxCredits();\n  },\n\n  _setModel: function () {\n    var categories = this._getCategories();\n    var dates = this._getDates();\n    var maxCredits = this._getMaxCredits();\n    var d = {\n      categories: categories,\n      dates: dates\n    };\n\n    this.model.setUpload({\n      value: d,\n      service_item_id: d,\n      user_defined_limits: {\n        twitter_credits_limit: maxCredits\n      }\n    });\n  }\n\n});\n","var Backbone = require('backbone');\nvar TwitterCategoryModel = require('./twitter-category-model');\n\n// Twitter categories collection\n\nmodule.exports = Backbone.Collection.extend({\n  model: TwitterCategoryModel\n});\n","var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar $ = require('jquery');\nvar TwitterCategoriesCollection = require('./twitter-categories-collection');\nvar TwitterCategoryModel = require('./twitter-category-model');\nvar TwitterCategoryView = require('./twitter-category-view');\n\n/**\n *  Twitter category list view\n *  - It will generate a collection to store all the\n *    terms added.\n */\n\nmodule.exports = CoreView.extend({\n  _MAX_CATEGORIES: 4,\n  _MAX_TERMS: 29,\n\n  initialize: function (opts) {\n    this._disabled = (opts && opts.disabled) ? opts.disabled : false;\n\n    // Add a first empty model\n    var m = this._generateCategory();\n    this.collection = new TwitterCategoriesCollection([ m ]);\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.collection.each(this._addCategory, this);\n    return this;\n  },\n\n  _initBinds: function () {\n    this.collection.bind('change', this._manageCategories, this);\n    this.collection.bind('change', this._onCategoryChange, this);\n    this.add_related_model(this.collection);\n  },\n\n  _manageCategories: function () {\n    var collection_size = this.collection.size();\n\n    // Check if already created models are completed\n    var nonFilled = this.collection.filter(function (m) {\n      return m.get('terms').length === 0;\n    });\n\n    // if so, generate new one\n    if (nonFilled.length === 0 && collection_size < this._MAX_CATEGORIES) {\n      var categoryModel = this._generateCategory();\n      this.collection.add(categoryModel);\n      this._addCategory(categoryModel);\n      return false;\n    }\n\n    // else, let's check\n    if (nonFilled.length > 0) {\n      var mdl = _.first(nonFilled);\n      var view = _.find(this._subviews, function (view) {\n        return mdl.cid === view.model.cid;\n      });\n      var pos = view.$el.index();\n\n      // Only one item in the collection, do nothing\n      if (collection_size === 1) return false;\n\n      // If it is the last item but there is no more items, do nothing\n      if (pos === (collection_size - 1)) return false;\n\n      // If it is not the last item and there is another non-filled element\n      // let's remove that one.\n      if (pos !== (collection_size - 1) && nonFilled.length > 1) {\n        mdl = nonFilled[1];\n        view = _.find(this._subviews, function (view) {\n          return mdl.cid === view.model.cid;\n        });\n        this._removeCategory(view);\n      }\n\n      // Reorder category indexes :(\n      this._sortCategoryIndex();\n    }\n  },\n\n  // Set proper index after any category removed\n  _sortCategoryIndex: function () {\n    var self = this;\n\n    // Hack to set properly category numbers\n    this.$('.twitter-category').each(function (i, el) {\n      // Get category, removing Category word\n      var category = $(el).find('.js-category').text().replace(_t('components.modals.add-layer.imports.twitter.category') + ' ', '');\n\n      if (category !== (i + 1)) {\n        // Find model\n        var m = self.collection.find(function (m) { return m.get('category') === category; });\n        // Find view\n        m.set('category', (i + 1).toString());\n      }\n    });\n  },\n\n  _generateCategory: function () {\n    return new TwitterCategoryModel({\n      disabled: this._disabled,\n      terms: [],\n      category: (this.collection ? (this.collection.size() + 1) : 1).toString()\n    });\n  },\n\n  _addCategory: function (m) {\n    var category = new TwitterCategoryView({ model: m });\n\n    category.bind('submit', this._onCategorySubmit, this);\n    category.bind('limit', this._onCategoryLimit, this);\n    category.bind('nolimit', this._onCategoryNoLimit, this);\n\n    this.$el.append(category.render().el);\n\n    this.addView(category);\n    this.trigger('addCategory');\n  },\n\n  _removeCategory: function (v) {\n    v.hide();\n    v.clean();\n    v.model.destroy();\n    this.trigger('removeCategory');\n  },\n\n  _onCategorySubmit: function () {\n    this.trigger('submitCategory', this.collection.toJSON(), this);\n  },\n\n  _onCategoryLimit: function () {\n    this.trigger('limitCategory', this.collection.toJSON(), this);\n  },\n\n  _onCategoryNoLimit: function () {\n    this.trigger('noLimitCategory', this.collection.toJSON(), this);\n  },\n\n  _onCategoryChange: function () {\n    this.trigger('changeCategory', this.collection.toJSON(), this);\n  },\n\n  getCategories: function () {\n    return this.collection.toJSON();\n  }\n\n});\n","var Backbone = require('backbone');\nvar _ = require('underscore');\nvar TERMS_CHARS = 4;\n\n// Twitter category model\n\nmodule.exports = Backbone.Model.extend({\n  _MAX_COUNTER: 1014,\n\n  _CHAR_MAP: {\n    ' ': 2,\n    '-': 2,\n    '_': 2,\n    '.': 2\n  },\n\n  defaults: {\n    terms: [],\n    category: '',\n    counter: 1014\n  },\n\n  initialize: function () {\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.bind('change:terms', this._setCounter, this);\n  },\n\n  _setCounter: function () {\n    var count = this._MAX_COUNTER;\n    var self = this;\n\n    // Check terms number\n    if (this.get('terms').length > 1) {\n      count = count - ((this.get('terms').length - 1) * TERMS_CHARS);\n    }\n\n    // Count characters\n    _.each(this.get('terms'), function (term) {\n      _.each(term, function (c) {\n        if (self._CHAR_MAP[c] !== undefined) {\n          count = count - self._CHAR_MAP[c];\n        } else {\n          count--;\n        }\n      });\n    });\n\n    // Count never should be less than 0 please!\n    this.set('counter', Math.max(0, count));\n  }\n\n});\n","var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar $ = require('jquery');\nvar template = require('./twitter-category.tpl');\n\n/**\n *  Twitter category item view\n *  - It just needs a twitter category model\n */\n\nmodule.exports = CoreView.extend({\n  className: 'TwitterCategory',\n\n  _MAX_CATEGORIES: 4,\n  _MAX_TERMS: 29,\n\n  events: {\n    'keydown .js-terms': '_onInputChange',\n    'keypress .js-terms': '_onInputChange',\n    'keyup .js-terms': '_onInputChange'\n  },\n\n  initialize: function () {\n    this._initBinds();\n  },\n\n  render: function () {\n    this.$el.empty();\n    this.$el.append(\n      template({\n        disabled: this.model.get('disabled'),\n        terms: this.model.get('terms'),\n        category: this.model.get('category'),\n        counter: this.model.get('counter')\n      })\n    );\n\n    this.show();\n\n    return this;\n  },\n\n  _initBinds: function () {\n    _.bindAll(this, '_onInputChange');\n    this.model.bind('change:category', this._onCategoryChange, this);\n  },\n\n  _onCategoryChange: function () {\n    this.$('.js-category').text(_t('components.modals.add-layer.imports.twitter.category') + ' ' + this.model.get('category'));\n  },\n\n  _onInputChange: function (e) {\n    var value = $(e.target).val();\n    var d = {};\n\n    if (e.keyCode === 13/* ENTER */) {\n      e.preventDefault();\n      this.trigger('submit', this.model, this);\n      return false;\n    }\n\n    this.$('.CDB-IconFont-twitter').toggleClass('is-highlighted', value.length > 0);\n\n    // Check if it is possible to add new characters\n    // if not, stop the action, unless user is deleting\n    // any previous character\n    if ((this.model.get('counter') === 0 || this.model.get('terms').length > this._MAX_TERMS) &&\n      e.keyCode !== 37 /* left */ && e.keyCode !== 39 /* right */ && e.keyCode !== 8 && value.length > 0) {\n      this.killEvent(e);\n      this.trigger('limit', this.model, this);\n      return false;\n    } else {\n      this.trigger('nolimit', this.model, this);\n    }\n\n    // Get valid terms array\n    if (!value) {\n      value = [];\n    } else {\n      value = value.split(',');\n    }\n\n    d['terms'] = value;\n\n    this.model.set(d);\n  },\n\n  show: function () {\n    this.$el.addClass('enabled');\n  },\n\n  hide: function () {\n    this.$el.removeClass('enabled');\n  }\n\n});\n","var CoreView = require('backbone/core-view');\nvar UploadModel = require('builder/data/upload-model');\n\n/**\n *  Default view for an import item\n *\n *  - It is based in an upload model.\n *  - Will trigger a change when model changes.\n *  - It returns their data if it is requested with a method.\n */\n\nmodule.exports = CoreView.extend({\n\n  initialize: function (opts) {\n    if (!opts.userModel) throw new Error('userModel is required');\n    if (!opts.configModel) throw new Error('configModel is required');\n\n    this._configModel = opts.configModel;\n    this._userModel = opts.userModel;\n    this.model = new UploadModel(null, {\n      configModel: this._configModel,\n      userModel: this._userModel\n    });\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.model.bind('change', this._triggerChange, this);\n  },\n\n  _triggerChange: function () {\n    this.trigger('change', this.model.toJSON(), this);\n  },\n\n  getModelData: function () {\n    if (this.model) {\n      return this.model.toJSON();\n    }\n    return {};\n  }\n\n});\n","var cdb = require('internal-carto.js');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar ViewFactory = require('builder/components/view-factory');\nvar importViewTemplate = require('./imports.tpl');\nvar importTabViewTemplate = require('./import-tab.tpl');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\nvar TabPaneView = require('builder/components/tab-pane/tab-pane-view');\nvar TabPaneCollection = require('builder/components/tab-pane/tab-pane-collection');\nvar _ = require('underscore');\nvar IMPORT_OPTIONS = require('./import-options');\nvar TABS_PER_ROW = 5;\nvar DEFAULT_IMPORT = 'file';\nvar ROW_WIDTH = 800;\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'createModel',\n  'userModel',\n  'configModel',\n  'privacyModel',\n  'guessingModel'\n];\n\n/**\n *  Imports view\n *\n *  Displays all the import options available\n *  through new create dialog.\n *\n *  IMPORTANT!!\n *\n *  If you need to add a new import pane:\n *\n *  - Create the proper class within imports folder and its tests.\n *  - Add necessary info in import_options file.\n *  - Create a check function here if needed, if not will appear\n *    always enabled (for everybody!).\n *\n */\n\nmodule.exports = CoreView.extend({\n  className: 'ImportOptions',\n\n  events: {\n    'click .js-goNext': '_moveToNextTabs',\n    'click .js-goPrev': '_moveToPrevTabs'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._initModels();\n  },\n\n  render: function () {\n    this._destroyBinds();\n    this.clearSubViews();\n    this.$el.empty();\n\n    this._generateContent();\n    this._generateNavigationTabs();\n    this._initBinds();\n    this._setOption();\n\n    return this;\n  },\n\n  _initModels: function () {\n    this.model = new Backbone.Model({\n      page: 1,\n      maxPages: 0\n    });\n  },\n\n  // //////////////////\n  // TABS && PANES!  //\n  // //////////////////\n\n  _generateContent: function () {\n    var paneItems = [];\n\n    _.each(IMPORT_OPTIONS, function (importConfig, i) {\n      var obj = {};\n      if (!_.isEmpty(importConfig) && importConfig.enabled(this._configModel, this._userModel)) {\n        obj = {\n          name: importConfig.name,\n          selected: importConfig.name === 'file'\n        };\n\n        obj.createButtonView = function () {\n          return ViewFactory.createByTemplate(\n            importTabViewTemplate,\n            {\n              title: cdb.core.sanitize.html(importConfig.title || importConfig.name),\n              name: importConfig.name\n            },\n            {\n              tagName: 'button',\n              className: 'TabLink ' + 'js-' + importConfig.name + 'Tab'\n            }\n          );\n        };\n\n        var pane;\n\n        // Check if import option function exists\n        var fn = this['_check' + i + 'Import'];\n        var isEnabled;\n\n        if (fn) {\n          isEnabled = fn.bind(this)();\n        }\n\n        if ((isEnabled || isEnabled === undefined) && !_.isEmpty(importConfig)) {\n          var ImportView = importConfig.view;\n          pane = new ImportView(\n            _.extend(\n              importConfig.options || {},\n              {\n                userModel: this._userModel,\n                configModel: this._configModel,\n                title: importConfig.title,\n                createModel: this._createModel,\n                privacyModel: this._privacyModel,\n                guessingModel: this._guessingModel\n              }\n            )\n          );\n        } else if (importConfig.fallback) {\n          pane = ViewFactory.createByTemplate(importConfig.fallback);\n        }\n\n        if (pane) {\n          pane.render();\n          pane.bind('change', this._setUploadModel, this);\n          obj.createContentView = function () {\n            return pane;\n          };\n        }\n\n        paneItems.push(obj);\n      }\n    }, this);\n\n    this._tabPaneCollection = new TabPaneCollection(paneItems);\n    this._tabPaneView = new TabPaneView({\n      template: importViewTemplate,\n      collection: this._tabPaneCollection,\n      tabPaneItemOptions: {\n        tagName: 'li',\n        klassName: 'ImportOptions-tab'\n      }\n    });\n    this.$el.append(this._tabPaneView.render().el);\n  },\n\n  _generateNavigationTabs: function () {\n    var numTabs = this.$('.ImportOptions-tab').size();\n    if (numTabs <= 1) {\n      this.$('.AddLayer-tabs').hide();\n    }\n\n    this.model.set('maxPages', Math.ceil(numTabs / TABS_PER_ROW));\n    this._checkNavigationTabs();\n    if (this.model.get('maxPages') <= 1) {\n      this.$('.ImportOptions-navigation').hide();\n    }\n  },\n\n  _moveToNextTabs: function () {\n    var page = this.model.get('page');\n    var maxPages = this.model.get('maxPages');\n\n    if (page < maxPages) {\n      this.model.set('page', page + 1);\n    }\n  },\n\n  _moveToPrevTabs: function () {\n    var page = this.model.get('page');\n    if (page > 1) {\n      this.model.set('page', page - 1);\n    }\n  },\n\n  _moveNavigationTabs: function () {\n    var page = this.model.get('page');\n    var rowWidth = ROW_WIDTH;\n\n    this.$('.js-menu').css('margin-left', '-' + (rowWidth * (page - 1)) + 'px');\n    this._checkNavigationTabs();\n  },\n\n  _checkNavigationTabs: function () {\n    var page = this.model.get('page');\n    var maxPages = this.model.get('maxPages');\n    this.$('.js-goPrev').toggleClass('is-disabled', page < 2);\n    this.$('.js-goNext').toggleClass('is-disabled', page >= maxPages);\n  },\n\n  _checkGDriveImport: function () {\n    if (!this._configModel.get('oauth_gdrive')) {\n      this._setFailedTab('gdrive', 'key');\n      return false;\n    }\n    return true;\n  },\n\n  _checkDropboxImport: function () {\n    if (!this._configModel.get('oauth_dropbox')) {\n      this._setFailedTab('dropbox', 'key');\n      return false;\n    }\n    return true;\n  },\n\n  _checkBoxImport: function () {\n    if (!this._configModel.get('oauth_box')) {\n      this._setFailedTab('box', 'key');\n      return false;\n    }\n    return true;\n  },\n\n  _checkTwitterImport: function () {\n    if (!this._configModel.get('datasource_search_twitter')) {\n      this._setFailedTab('twitter', 'key');\n      return false;\n    }\n\n    if (!this._userModel.get('twitter').enabled) {\n      return false;\n    }\n\n    if (!this._userModel.canCreateTwitterDataset()) {\n      this._setFailedTab('twitter', 'credits');\n      return false;\n    }\n    return true;\n  },\n\n  _checkInstagramImport: function () {\n    if (!this._userModel.featureEnabled('instagram_import')) {\n      return false;\n    }\n    if (!this._configModel.get('oauth_instagram')) {\n      this._setFailedTab('instagram', 'key');\n      return false;\n    }\n    return true;\n  },\n\n  _checkSalesforceImport: function () {\n    // Connector is now disabled for everyone.\n    // You might be able to use the following check to determine\n    // if user/org has this connector enabled:\n    // this._userModel.get('salesforce').enabled\n    return false;\n  },\n\n  _checkMailchimpImport: function () {\n    if (!this._configModel.get('oauth_mailchimp')) {\n      this._setFailedTab('mailchimp', 'key');\n      return false;\n    }\n\n    if (!this._userModel.featureEnabled('mailchimp_import')) {\n      return false;\n    }\n    return true;\n  },\n\n  _setFailedTab: function (tabName, type) {\n    var $tab = this.$('.js-' + tabName + 'Tab');\n    $tab.addClass('disabled');\n\n    var tooltip = new TipsyTooltipView({\n      el: $tab,\n      title: function () {\n        return _t('components.modals.add-layer.imports.tab-options-error.' + type, { name: tabName });\n      }\n    });\n    this.addView(tooltip);\n  },\n\n  _setUploadModel: function (d) {\n    var uploadModel = this._createModel.getUploadModel();\n    uploadModel.setFresh(d);\n  },\n\n  _initBinds: function () {\n    this.model.bind('change:page', this._moveNavigationTabs, this);\n    if (this._tabPaneCollection) {\n      this._tabPaneCollection.bind('change:selected', this._onTabChange, this);\n    }\n  },\n\n  _destroyBinds: function () {\n    if (this._tabPaneCollection) {\n      this._tabPaneCollection.bind('change:selected', null, this);\n    }\n  },\n\n  _setOption: function () {\n    // First option > data file\n    var tabPaneModel = _.first(this._tabPaneCollection.where({ name: DEFAULT_IMPORT }));\n    if (tabPaneModel) {\n      tabPaneModel.set('selected', true);\n      this._updateImportOption();\n    }\n  },\n\n  _updateImportOption: function () {\n    this._createModel.setActiveImportPane(this._tabPaneView.getSelectedTabPaneName());\n  },\n\n  // //////////\n  // Events //\n  // //////////\n\n  _onTabChange: function (tabModel) {\n    // When the tab changes we lose all event listeners\n    this._tabPaneCollection.each(function (model) {\n      if (!model.get('selected')) return;\n      const pane = model.attributes.createContentView();\n      pane.unbind('change', this._setUploadModel, this);\n      pane.bind('change', this._setUploadModel, this);\n    }, this);\n    this._updateImportOption();\n  },\n\n  clean: function () {\n    this._destroyBinds();\n    CoreView.prototype.clean.call(this);\n  }\n\n});\n","var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar DatasetsView = require('./datasets/datasets-view');\nvar ImportsView = require('./imports/imports-view');\nvar TabPaneView = require('builder/components/tab-pane/tab-pane-view');\nvar TabPaneCollection = require('builder/components/tab-pane/tab-pane-collection');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'createModel',\n  'userModel',\n  'configModel',\n  'privacyModel',\n  'guessingModel'\n];\n\n/**\n *  Create listing view\n *\n *  It will display all the possibilities to select\n *  any of your current datasets or connect a new dataset.\n *\n */\nmodule.exports = CoreView.extend({\n  className: 'CreateDialog-listing CreateDialog-listing--noPaddingTop',\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._initBinds();\n    this._onChangeListing();\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this._initViews();\n\n    return this;\n  },\n\n  _initBinds: function () {\n    // Bug with binding... do not work with the usual one for some reason :(\n    this.listenTo(this._createModel, 'change:listing', this._onChangeListing);\n  },\n\n  _initViews: function () {\n    var self = this;\n    var paneModels = [];\n\n    paneModels.push({\n      name: 'datasets',\n      selected: false,\n      createContentView: function () {\n        return new DatasetsView({\n          userModel: self._userModel,\n          createModel: self._createModel\n        });\n      }\n    });\n\n    if (this._userModel.canCreateDatasets()) {\n      paneModels.push({\n        name: 'import',\n        selected: false,\n        createContentView: function () {\n          return new ImportsView({\n            userModel: self._userModel,\n            configModel: self._configModel,\n            createModel: self._createModel,\n            privacyModel: self._privacyModel,\n            guessingModel: self._guessingModel\n          });\n        }\n      });\n    }\n\n    this._tabPaneCollection = new TabPaneCollection(paneModels);\n    var paneTabPaneView = new TabPaneView({\n      collection: this._tabPaneCollection\n    });\n    this.addView(paneTabPaneView);\n    this.$el.append(paneTabPaneView.render().el);\n  },\n\n  _onChangeListing: function () {\n    if (this._tabPaneCollection) {\n      var context = this._createModel.get('listing');\n      var paneModel = _.first(this._tabPaneCollection.where({ name: context }));\n      paneModel.set('selected', true);\n    }\n  }\n});\n","var cdb = require('internal-carto.js');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar $ = require('jquery');\nvar _ = require('underscore');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar template = require('./navigation.tpl');\n\nvar REQUIRED_OPTS = [\n  'configModel',\n  'createModel',\n  'userModel',\n  'routerModel',\n  'tablesCollection'\n];\n\n/**\n *  Listing datasets navigation.\n *\n *  - 'Filter by' datasets.\n *  - 'Search' any pattern within dataset collection.\n *\n */\nmodule.exports = CoreView.extend({\n  events: {\n    'submit .js-search-form': '_submitSearch',\n    'keydown .js-search-form': '_onSearchKeyDown',\n    'click .js-search-form': 'killEvent',\n    'click .js-search-link': '_onSearchClick',\n    'click .js-clean-search': '_onCleanSearchClick',\n    'click .js-shared': '_onSharedClick',\n    'click .js-library': '_onLibraryClick',\n    'click .js-connect': '_onConnectClick',\n    'click .js-datasets': '_onDatasetsClick',\n    'click .js-create-empty': '_onCreateEmptyClick'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n    this.model = new Backbone.Model();\n\n    this._preRender();\n    this._initBinds();\n  },\n\n  // It is necessary to add two static elements because\n  // they can't be removed/replaced using render method\n  // each time a change (in a model or a collection) happens.\n  // This is due to the behaviour of the CSS animations.\n  _preRender: function () {\n    var $uInner = $('<div>').addClass('u-inner');\n    var $filtersInner = $('<div>').addClass('Filters-inner');\n    this.$el.append($uInner.append($filtersInner));\n  },\n\n  render: function (m, c) {\n    this.clearSubViews();\n\n    this.$('.Filters-inner').html(\n      template(\n        _.extend(\n          {\n            showDatasets: this._createModel.showDatasets(),\n            createModelType: this._createModel.get('type'),\n            canCreateDataset: this._userModel.canCreateDatasets(),\n            listingType: this._createModel.get('listing'),\n            isInsideOrg: this._userModel.isInsideOrg(),\n            totalShared: this._tablesCollection.getTotalStat('total_shared'),\n            selectedItemsCount: this._selectedItems().length,\n            hasDataLibrary: this._configModel.dataLibraryEnabled()\n          },\n          this._routerModel.attributes\n        )\n      )\n    );\n\n    this._animate();\n    if (this._routerModel.isSearching()) {\n      this._focusSearchInput();\n    }\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.model, 'change:isSearchEnabled', this._onChangeIsSearchEnabled, this);\n    this.listenTo(this._createModel, 'change:listing', this.render, this);\n    this.listenTo(this._routerModel, 'change', this.render, this);\n    this.listenTo(this._tablesCollection, 'sync', this.render, this);\n  },\n\n  _onChangeIsSearchEnabled: function (model, isSearchEnabled) {\n    this._enableSearchUI(isSearchEnabled);\n\n    if (this._routerModel.isSearching()) {\n      this._cleanSearch();\n    } else if (isSearchEnabled) {\n      this._$searchInput().val('');\n      this._focusSearchInput();\n    }\n  },\n\n  _$searchInput: function () {\n    return this.$('.js-search-input');\n  },\n\n  _focusSearchInput: function () {\n    this._$searchInput()\n      .select()\n      .focus();\n  },\n\n  _onSearchKeyDown: function (e) {\n    if (e.keyCode === 27) { // ESC\n      this.killEvent(e);\n      this._cleanSearch();\n    }\n  },\n\n  _selectedItems: function () {\n    return this._tablesCollection.where({ selected: true });\n  },\n\n  _animate: function () {\n    this._enableSearchUI(!!this._routerModel.isSearching());\n\n    // Check if user doesn't have any table and it is in library section\n    // to remove useless shadow\n    var inLibrarySection = this._routerModel.get('library');\n    var inDatasetsSection = this._createModel.get('listing') === 'datasets';\n    var hasDatasets = this._tablesCollection.getTotalStat('total_user_entries') > 0;\n    this.$el.toggleClass('no-shadow', inLibrarySection && !hasDatasets && inDatasetsSection);\n  },\n\n  _enableSearchUI: function (enable) {\n    this.$('.js-search-field').toggle(enable);\n    this.$('.js-links-list').toggleClass('is-hidden', enable);\n    this.$('.js-order-list').toggleClass('is-hidden', enable);\n  },\n\n  _onDatasetsClick: function () {\n    this._routerModel.set({\n      shared: 'no',\n      library: false,\n      page: 1\n    });\n    this._routerModel.trigger('change', this._routerModel);\n    this._createModel.set('listing', 'datasets');\n  },\n\n  _onSharedClick: function () {\n    this._routerModel.set({\n      shared: 'only',\n      library: false,\n      page: 1\n    });\n    this._routerModel.trigger('change', this._routerModel);\n    this._createModel.set('listing', 'datasets');\n  },\n\n  _onLibraryClick: function () {\n    this._routerModel.set({\n      shared: 'no',\n      library: true,\n      page: 1\n    });\n    this._routerModel.trigger('change', this._routerModel);\n    this._createModel.set('listing', 'datasets');\n  },\n\n  _onConnectClick: function () {\n    if (this._userModel.canCreateDatasets()) {\n      this._createModel.set('listing', 'import');\n    }\n  },\n\n  _onCreateEmptyClick: function () {\n    if (this._userModel.canCreateDatasets()) {\n      this._createModel.createFromScratch();\n    }\n  },\n\n  // Selection actions\n  _onSearchClick: function (e) {\n    this.killEvent(e);\n    this.model.set('isSearchEnabled', !this.model.get('isSearchEnabled'));\n  },\n\n  // Filter actions\n  _onCleanSearchClick: function (e) {\n    if (e) {\n      e.preventDefault();\n    }\n    this._cleanSearch();\n  },\n\n  _cleanSearch: function () {\n    this._routerModel.set({\n      q: '',\n      tag: '',\n      shared: 'no',\n      library: this._createModel.showLibrary()\n    });\n    this.model.set('isSearchEnabled', false);\n  },\n\n  _submitSearch: function (e) {\n    this.killEvent(e);\n    var val = cdb.core.sanitize.html(this.$('.js-search-input').val().trim());\n    var tag = val.search(':') === 0 ? val.replace(':', '') : '';\n    var q = val.search(':') !== 0 ? val : '';\n\n    this._routerModel.set({\n      page: 1,\n      tag: tag,\n      q: q,\n      shared: 'yes'\n    });\n\n    this._createModel.set('listing', 'datasets');\n  }\n\n});\n","var CoreView = require('backbone/core-view');\nvar template = require('./guessing-toggler.tpl');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'createModel',\n  'guessingModel',\n  'configModel',\n  'userModel'\n];\n\n/**\n* Manages if upcoming import should guess or not.\n * Expected to be rendered in the footer of a create dialog.\n */\n\nmodule.exports = CoreView.extend({\n\n  events: {\n    'click .js-toggle': '_toggle'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._initBinds();\n  },\n\n  render: function () {\n    var htmlStr = '';\n    if (this._createModel.showGuessingToggler()) {\n      var uploadModel = this._createModel.getUploadModel();\n      htmlStr = template({\n        isGuessingEnabled: this._guessingModel.get('guessing'),\n        importState: this._createModel.getImportState(),\n        isUploadValid: uploadModel.isValidToUpload(),\n        customHosted: this._configModel.get('cartodb_com_hosted'),\n        isTwitterDeprecatedForUser: !this._userModel.hasOwnTwitterCredentials()\n      });\n    }\n    this.$el.html(htmlStr);\n    return this;\n  },\n\n  _initBinds: function () {\n    this._createModel.bind('change', this.render, this);\n    this._guessingModel.bind('change', this.render, this);\n    this.add_related_model(this._createModel);\n  },\n\n  _toggle: function () {\n    var value = !this._guessingModel.get('guessing');\n    this._guessingModel.set('guessing', value);\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar $ = require('jquery');\nvar template = require('./privacy-toggler.tpl');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar publicPrivacy = 'PUBLIC';\nvar privatePrivacy = 'PRIVATE';\n\nvar REQUIRED_OPTS = [\n  'createModel',\n  'privacyModel',\n  'configModel',\n  'userModel'\n];\n\n/**\n *  Change the privacy of the new dataset.\n *  - If the user can't change the privacy, it will refer to the upgrade page\n *   unless app is the \"open source\" version\n *\n */\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click': '_onClick'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    if (this._createModel.showPrivacyToggler()) {\n      var canChangePrivacy = this._userModel.canCreatePrivateDatasets();\n      var privacy = this._privacyModel.get('privacy');\n      var isPublic = privacy === publicPrivacy;\n      var nextPrivacy = isPublic ? privatePrivacy : publicPrivacy;\n      var icon = isPublic ? 'unlock' : 'lock';\n      var upgradeUrl = this._configModel.get('upgrade_url') || window.upgrade_url;\n      var canUpgrade = !this._configModel.get('cartodb_com_hosted') && !canChangePrivacy && upgradeUrl;\n\n      this.$el.html(\n        template({\n          privacy: privacy,\n          isDisabled: !canChangePrivacy,\n          canUpgrade: canUpgrade,\n          nextPrivacy: nextPrivacy,\n          upgradeUrl: upgradeUrl,\n          icon: icon\n        })\n      );\n\n      this._initViews();\n    }\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this._privacyModel.bind('change:privacy', this.render, this);\n  },\n\n  _initViews: function () {\n    // Tooltip\n    this.addView(\n      new TipsyTooltipView({\n        el: this.$('.js-toggler'),\n        html: true,\n        title: function () {\n          return $(this).attr('data-title');\n        }\n      })\n    );\n  },\n\n  _onClick: function () {\n    if (this._userModel.canCreatePrivateDatasets()) {\n      var privacy = this._privacyModel.get('privacy');\n      this._privacyModel.set('privacy', privacy === publicPrivacy ? privatePrivacy : publicPrivacy);\n    }\n  }\n\n});\n","var CoreView = require('backbone/core-view');\nvar $ = require('jquery');\nvar _ = require('underscore');\nvar renderLoading = require('builder/components/loading/render-loading');\nvar ENTER_KEY_CODE = 13;\nvar REQUIRED_OPTS = [\n  'template',\n  'runAction',\n  'modalModel'\n];\n\n/**\n *  Confirmation modal dialog\n */\n\nmodule.exports = CoreView.extend({\n  className: 'Dialog-content',\n\n  events: {\n    'click .js-confirm': '_onConfirm',\n    'click .js-cancel': '_onCancel'\n  },\n\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (!opts[item]) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n\n    if (opts.loadingTitle) {\n      this._hasLoading = true;\n      this._loadingTitle = opts.loadingTitle;\n    }\n\n    if (opts.renderOpts) {\n      this._hasRenderOpts = true;\n      this._renderOpts = opts.renderOpts;\n    }\n\n    this._onKeyDown = this._onKeyDown.bind(this);\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    var html = this._hasRenderOpts ? this._template(this._renderOpts) : this._template();\n    this.$el.html(html);\n\n    return this;\n  },\n\n  _initBinds: function () {\n    $(document).bind('keydown', this._onKeyDown);\n  },\n\n  _disableBinds: function () {\n    $(document).unbind('keydown', this._onKeyDown);\n  },\n\n  _onKeyDown: function (ev) {\n    var keyCode = ev.which;\n    if (keyCode === ENTER_KEY_CODE) {\n      this._onConfirm();\n    }\n  },\n\n  _renderLoadingView: function () {\n    this.$el.html(\n      renderLoading({\n        title: this._loadingTitle\n      })\n    );\n  },\n\n  _$content: function () {\n    return this.$('.js-content');\n  },\n\n  _onConfirm: function () {\n    if (this._hasLoading) {\n      this._renderLoadingView();\n    } else {\n      this._modalModel.destroy();\n    }\n\n    this._runAction();\n  },\n\n  _onCancel: function () {\n    this._modalModel.destroy();\n  },\n\n  clean: function () {\n    this._disableBinds();\n    CoreView.prototype.clean.apply(this);\n  }\n\n});\n","var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar renderLoading = require('builder/components/loading/render-loading');\nvar ErrorView = require('builder/components/error/error-view');\nvar REQUIRED_OPTS = [\n  'errorTitle',\n  'loadingTitle',\n  'runAction',\n  'modalModel'\n];\n\n/**\n *  Remove confirmation dialog\n */\nmodule.exports = CoreView.extend({\n  className: 'Dialog-content',\n\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (!opts[item]) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(\n      renderLoading({\n        title: this._loadingTitle\n      })\n    );\n    this._runAction({\n      error: this._renderErrorView.bind(this)\n    });\n    return this;\n  },\n\n  _renderErrorView: function (errorMessage) {\n    var errorView = new ErrorView({\n      title: this._errorTitle,\n      desc: errorMessage\n    });\n    this.$el.html(errorView.render().el);\n    this.addView(errorView);\n  }\n\n});\n","var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar VisMetadataModel = require('builder/data/vis-metadata-model');\nvar template = require('./dataset-metadata.tpl');\nvar FooterView = require('./footer/footer-view');\nvar templateError = require('./dataset-metadata-error.tpl');\nvar templateLoading = require('builder/components/loading/render-loading');\nvar FormView = require('./form/form-view');\nvar saveMetadata = require('./save-metadata-dataset');\nvar errorParser = require('builder/helpers/error-parser');\nvar Notifier = require('builder/components/notifier/notifier');\nvar utils = require('builder/helpers/utils');\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-back': '_onBackFromError'\n  },\n\n  className: 'Dialog-content Dialog-content--expanded',\n\n  initialize: function (opts) {\n    if (!opts.modalModel) throw new TypeError('modalModel is required');\n    if (!opts.visDefinitionModel) throw new TypeError('visDefinitionModel is required');\n    if (!opts.configModel) throw new TypeError('configModel is required');\n    if (opts.isLocked === undefined) throw new TypeError('isLocked is required');\n\n    this._modalModel = opts.modalModel;\n    this._visDefinitionModel = opts.visDefinitionModel;\n    this._configModel = opts.configModel;\n    this._isLocked = opts.isLocked;\n\n    this._visMetadataModel = new VisMetadataModel({\n      name: this._visDefinitionModel.get('name'),\n      description: this._visDefinitionModel.get('description'),\n      license: this._visDefinitionModel.get('license'),\n      source: this._visDefinitionModel.get('source'),\n      attributions: this._visDefinitionModel.get('attributions'),\n      tags: this._visDefinitionModel.get('tags')\n    });\n\n    this._stateModel = new Backbone.Model({\n      status: 'show'\n    });\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    if (this._hasError()) {\n      this._renderError();\n    } else if (this._isLoading()) {\n      this._renderLoading();\n    } else {\n      this.$el.html(template());\n      this._initViews();\n    }\n    return this;\n  },\n\n  _initViews: function () {\n    var formView = new FormView({\n      visDefinitionModel: this._visDefinitionModel,\n      visMetadataModel: this._visMetadataModel,\n      configModel: this._configModel,\n      isLocked: this._isLocked\n    });\n\n    this.$('.js-content').append(formView.render().el);\n    this.addView(formView);\n\n    var footerView = new FooterView({\n      visMetadataModel: this._visMetadataModel,\n      onSaveAction: this._onSave.bind(this),\n      onCloseAction: this._onClose.bind(this)\n    });\n\n    this.$('.js-footer').append(footerView.render().el);\n    this.addView(footerView);\n  },\n\n  _renderError: function () {\n    var error = this._stateModel.get('error');\n    this.$el.html(templateError({\n      error: _t('components.modals.dataset-metadata.error.subtitle', {error: error})\n    }));\n  },\n\n  _renderLoading: function () {\n    this.$el.html(\n      templateLoading({\n        title: _t('components.modals.dataset-metadata.loading')\n      })\n    );\n  },\n\n  _initBinds: function () {\n    this._stateModel.on('change:status', this.render, this);\n    this.add_related_model(this._stateModel);\n  },\n\n  _hasError: function () {\n    return this._stateModel.get('status') === 'error';\n  },\n\n  _isLoading: function () {\n    return this._stateModel.get('status') === 'loading';\n  },\n\n  _onSave: function () {\n    this._stateModel.set({status: 'loading'});\n\n    saveMetadata({\n      onSuccess: this._onSuccessSave.bind(this),\n      onError: this._onErrorSave.bind(this),\n      visDefinitionModel: this._visDefinitionModel,\n      name: this._getMetadataName(),\n      description: this._getMetadataDescription(),\n      tags: this._getMetadataTags(),\n      source: this._visMetadataModel.get('source'),\n      attributions: this._visMetadataModel.get('attributions'),\n      license: this._visMetadataModel.get('license')\n    });\n  },\n\n  _onSuccessSave: function () {\n    var self = this;\n    Notifier.addNotification({\n      status: 'success',\n      info: _t('components.modals.dataset-metadata.success', {\n        name: self._getMetadataName()\n      }),\n      closable: true,\n      delay: Notifier.DEFAULT_DELAY\n    });\n\n    this._modalModel.destroy();\n  },\n\n  _onClose: function () {\n    this._modalModel.destroy();\n  },\n\n  _onErrorSave: function (e) {\n    this._stateModel.set({\n      status: 'error',\n      error: errorParser(e)\n    });\n  },\n\n  _onBackFromError: function () {\n    this._stateModel.set({status: 'show'});\n  },\n\n  _getMetadataName: function () {\n    return utils.sanitizeHtml(this._visMetadataModel.get('name'));\n  },\n\n  _getMetadataDescription: function () {\n    return utils.sanitizeHtml(this._visMetadataModel.get('description'));\n  },\n\n  _getMetadataTags: function () {\n    return _.map(this._visMetadataModel.get('tags'), function (tag) {\n      return utils.sanitizeHtml(tag);\n    });\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar template = require('./footer.tpl');\n\nmodule.exports = CoreView.extend({\n\n  tagName: 'ul',\n  className: 'Modal-listActions u-flex u-alignCenter ',\n\n  events: {\n    'click .js-save': '_save',\n    'click .js-close': '_close'\n  },\n\n  initialize: function (opts) {\n    if (!opts.visMetadataModel) throw new Error('visMetadataModel is required');\n    if (!opts.onSaveAction) throw new Error('onSaveAction is required');\n\n    this._visMetadataModel = opts.visMetadataModel;\n    this._onSaveAction = opts.onSaveAction;\n    this._onCloseAction = opts.onCloseAction;\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this._visMetadataModel.on('change', this.render, this);\n  },\n\n  render: function () {\n    this.$el.html(\n      template({\n        canFinish: this._visMetadataModel.isValid()\n      })\n    );\n    return this;\n  },\n\n  _save: function () {\n    this._visMetadataModel.isValid() && this._onSaveAction();\n  },\n\n  _close: function () {\n    this._onCloseAction && this._onCloseAction();\n  }\n\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar templateForm = require('./form.tpl');\nrequire('builder/components/form-components/index');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\nvar utils = require('builder/helpers/utils');\n\nvar REQUIRED_OPTS = [\n  'visDefinitionModel',\n  'visMetadataModel',\n  'configModel'\n];\n\nmodule.exports = CoreView.extend({\n  className: 'Metadata-form',\n\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (!opts[item]) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n\n    if (opts.isLocked === undefined) throw new TypeError('isLocked is required');\n    this._isLocked = opts.isLocked;\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(templateForm());\n    this._initViews();\n    return this;\n  },\n\n  _initViews: function () {\n    this._addNameView();\n    this._addDescriptionView();\n    this._addSourceView();\n    this._addAttributionView();\n    this._addLicenseView();\n    this._addTagsView();\n    this._addTooltip();\n  },\n\n  _addInputView: function (key, view, placeholder, container, disabled) {\n    var obj = '_' + view;\n    var $view = new Backbone.Form.editors.Text({\n      key: key,\n      model: this._visMetadataModel,\n      schema: {\n        options: this._visDefinitionModel.get(key),\n        editorAttrs: {\n          placeholder: placeholder,\n          disabled: disabled || false\n        }\n      }\n    });\n    $view.on('change', this._commitView, this);\n    this[obj] = $view;\n    container.append($view.render().$el);\n  },\n\n  _addNameView: function () {\n    this._addInputView('name', 'nameInput', _t('components.modals.dataset-metadata.form.name-placeholder'), this.$('.js-name-field'), this._isLocked);\n  },\n\n  _addSourceView: function () {\n    this._addInputView('source', 'sourceInput', _t('components.modals.dataset-metadata.form.source-placeholder'), this.$('.js-source-field'));\n  },\n\n  _addAttributionView: function () {\n    this._addInputView('attributions', 'attributionInput', _t('components.modals.dataset-metadata.form.attributions-placeholder'), this.$('.js-attributions-field'));\n  },\n\n  _buildLicenseOptions: function () {\n    var items = this._configModel.get('licenses');\n    var emptyOption = [{\n      id: '',\n      name: '-'\n    }];\n    return _.chain(emptyOption.concat(items))\n      .compact()\n      .map(function (d) {\n        return {\n          val: d.id,\n          label: d.name\n        };\n      })\n      .value();\n  },\n\n  _addLicenseView: function () {\n    var options = this._buildLicenseOptions();\n\n    this._selectView = new Backbone.Form.editors.Select({\n      className: 'u-flex u-alignCenter',\n      key: 'license',\n      schema: {\n        options: options\n      },\n      model: this._visMetadataModel,\n      showSearch: false\n    });\n\n    this._selectView.on('change', this._commitView, this);\n    this._selectView.setValue(this._visMetadataModel.get('license') || 0);\n    this.$('.js-license-field').append(this._selectView.render().$el);\n  },\n\n  _addDescriptionView: function () {\n    this._descriptionView = new Backbone.Form.editors.TextArea({\n      className: 'CDB-Textarea Metadata-textarea',\n      key: 'description',\n      model: this._visMetadataModel,\n      schema: {\n        options: this._visDefinitionModel.get('description'),\n        editorAttrs: {\n          placeholder: _t('components.modals.dataset-metadata.form.description-placeholder')\n        }\n      }\n    });\n\n    this._descriptionView.on('change', this._commitView, this);\n\n    this.$('.js-description-field').append(this._descriptionView.render().$el);\n  },\n\n  _addTagsView: function () {\n    this._taglistView = new Backbone.Form.editors.Taglist({\n      key: 'tags',\n      model: this._visMetadataModel,\n      schema: {\n        options: {\n          tags: this._visDefinitionModel.get('tags') || []\n        }\n      }\n    });\n\n    this._taglistView.on('change', this._commitView, this);\n\n    this.$('.js-tags-field').append(this._taglistView.render().$el);\n    this.addView(this._taglistView);\n  },\n\n  _addTooltip: function () {\n    var title = this.$('.js-markdown').data('tooltip');\n    this._removeTooltip();\n\n    this._tooltip = new TipsyTooltipView({\n      el: this.$('.js-markdown'),\n      html: true,\n      title: function () {\n        return title;\n      }\n    });\n  },\n\n  _commitView: function (view) {\n    view.commit();\n    // Commit moves values from form to model. We need to override model value after commit()\n    if (view.model.changed.hasOwnProperty('name')) {\n      this._sanitizeName(view.model.get('name'));\n    }\n  },\n\n  _sanitizeName: function (name) {\n    this._visMetadataModel.set('name', utils.sanitizeHtml(name));\n  },\n\n  _removeTooltip: function () {\n    if (this._tooltip) {\n      this._tooltip.clean();\n    }\n  },\n\n  _removeBinds: function () {\n    this._nameView && this._nameView.off('change', this._commitView, this);\n    this._descriptionView && this._descriptionView.off('change', this._commitView, this);\n    this._taglistView && this._taglistView.off('change', this._commitView, this);\n    this._sourceInput && this._sourceInput.off('change', this._commitView, this);\n    this._attributionView && this._attributionView.off('change', this._commitView, this);\n    this._selectView && this._selectView.off('change', this._commitView, this);\n  },\n\n  clean: function () {\n    this._removeBinds();\n    CoreView.prototype.clean.call(this);\n  }\n});\n","var TITLE_SUFIX = require('builder/components/modals/visualization-title-suffix-metadata');\n\nmodule.exports = function (opts) {\n  if (!opts.visDefinitionModel) throw new Error('visDefinitionModel is required');\n  if (!opts.name) throw new Error('name is required');\n\n  var visDefinitionModel = opts.visDefinitionModel;\n  var successCallback = opts.onSuccess;\n  var errorCallback = opts.onError;\n  var name = opts.name;\n  var description = opts.description;\n  var tags = opts.tags;\n  var source = opts.source;\n  var license = opts.license;\n  var attributions = opts.attributions;\n\n  var oldName = visDefinitionModel.get('name');\n\n  visDefinitionModel.save({\n    name: name,\n    description: description,\n    tags: tags,\n    source: source,\n    license: license,\n    attributions: attributions\n  }, {\n    wait: true,\n    success: function (mdl, attrs) {\n      document.title = name + TITLE_SUFIX;\n      successCallback && successCallback();\n    },\n    error: function (mdl, e) {\n      document.title = oldName + TITLE_SUFIX;\n      errorCallback && errorCallback(e);\n    }\n  });\n};\n","var CoreView = require('backbone/core-view');\nvar template = require('./modal-export-data-format.tpl');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'format',\n  'isDisabled',\n  'isChecked'\n];\n\nmodule.exports = CoreView.extend({\n  tagName: 'li',\n  className: 'Modal-listFormItem',\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n    return this;\n  },\n\n  _initViews: function () {\n    this.$el.html(\n      template({\n        format: this._format,\n        isDisabled: this._isDisabled,\n        isChecked: this._isChecked\n      })\n    );\n\n    this.$el.toggleClass('is-disabled', this._isDisabled);\n  }\n});\n","var $ = require('jquery');\nvar _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar renderLoading = require('builder/components/loading/render-loading');\nvar ErrorView = require('builder/components/error/error-view');\nvar template = require('./modal-export-data.tpl');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar MetricsTracker = require('builder/components/metrics/metrics-tracker');\nvar MetricsTypes = require('builder/components/metrics/metrics-types');\n\nvar FormatView = require('./modal-export-data-format-view');\n\nvar MAX_SQL_GET_LENGTH = 1000;\nvar CSV_FILTER = 'SELECT * FROM (%%sql%%) as subq ';\nvar FORMATS = [\n  {\n    format: 'csv',\n    fetcher: 'fetchCSV',\n    geomRequired: false\n  }, {\n    format: 'shp',\n    fetcher: 'fetch',\n    geomRequired: true\n  }, {\n    format: 'kml',\n    fetcher: 'fetch',\n    geomRequired: true\n  }, {\n    format: 'geojson',\n    label: 'geo json',\n    fetcher: 'fetch',\n    geomRequired: true\n  }, {\n    format: 'svg',\n    fetcher: 'fetchSVG',\n    geomRequired: true\n  }, {\n    format: 'gpkg',\n    fetcher: 'fetch',\n    geomRequired: true\n  }\n];\n\nvar REQUIRED_OPTS = [\n  'configModel',\n  'queryGeometryModel',\n  'querySchemaModel',\n  'canHideColumns',\n  'modalModel',\n  'fromView'\n];\n\nmodule.exports = CoreView.extend({\n  className: 'Dialog-content',\n\n  events: {\n    'click .js-confirm': '_onConfirm',\n    'click .js-cancel': '_close'\n  },\n\n  options: {\n    autoClose: true\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n    this._layerModel = opts.layerModel;\n    this._filename = opts.filename;\n\n    this._initBinds();\n\n    if (this._queryGeometryModel.get('status') === 'unfetched') {\n      this._queryGeometryModel.fetch();\n    }\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    if (this._queryGeometryModel.get('status') === 'fetched' || this._queryGeometryModel.get('status') === 'unavailable') {\n      this._renderFormats();\n    } else {\n      this._renderLoadingContent(_t('components.modals.export-data.loading.geometry'));\n    }\n\n    return this;\n  },\n\n  _renderFormats: function () {\n    var geometry = this._queryGeometryModel.get('simple_geom');\n    var isGeoreferenced = !!geometry;\n\n    this.$el.html(\n      template({\n        isGeoreferenced: isGeoreferenced,\n        url: this._configModel.getSqlApiUrl()\n      })\n    );\n\n    var isChecked = true;\n\n    _.each(FORMATS, function (format) {\n      var isDisabled = (isGeoreferenced === false && format.geomRequired === true);\n      if (isGeoreferenced === true && format.geomRestricted != null && !isDisabled) {\n        isDisabled = !_.contains(format.geomRestricted, geometry);\n      }\n\n      this._renderFormat(format, isDisabled, !isDisabled && isChecked);\n\n      if (!isDisabled) {\n        isChecked = false;\n      }\n    }, this);\n  },\n\n  _renderFormat: function (format, isDisabled, isChecked) {\n    var view = new FormatView({\n      format: format,\n      isDisabled: isDisabled,\n      isChecked: isChecked\n    });\n\n    this.$('.js-formats').append(view.render().el);\n    this.addView(view);\n  },\n\n  _initBinds: function () {\n    this._queryGeometryModel.bind('change:status', function () {\n      if (this._queryGeometryModel.get('status') !== 'unavailable') {\n        this.render();\n      } else {\n        this.showError(_t('components.modals.export-data.error.geometry-error'));\n      }\n    }, this);\n    this.add_related_model(this._queryGeometryModel);\n  },\n\n  /**\n   * search a format based on its name in the format array\n   * @param  {string} format Format name\n   * @return {Object}\n   */\n  _getFormat: function (format) {\n    for (var n in FORMATS) {\n      if (FORMATS[n].format === format) {\n        return FORMATS[n];\n      }\n    }\n  },\n\n  _onConfirm: function () {\n    this._form = this.$('.js-form');\n    var formatName = $('.js-format[name=format]:checked', this._form).data('format');\n    var format = this._getFormat(formatName);\n\n    if (this._layerModel) {\n      MetricsTracker.track(MetricsTypes.DOWNLOADED_LAYER, {\n        format: formatName,\n        layer_id: this._layerModel.get('id'),\n        source: this._layerModel.get('source'),\n        visible: this._layerModel.get('visible'),\n        table_name: this._layerModel.get('table_name'),\n        from_view: this._fromView\n      });\n    }\n\n    this[format.fetcher](formatName);\n  },\n\n  /**\n   * Create a dictionary with the options shared between all the methods\n   * @return {Object}\n   */\n  getBaseOptions: function () {\n    return {\n      filename: this._filename,\n      apiKey: this._configModel.get('api_key')\n    };\n  },\n\n  /**\n   * Returns a specific sql filtered by the_geom, used on CSV exports\n   * @return {string}\n   */\n  getGeomFilteredSql: function () {\n    var sql = this._queryGeometryModel.get('query');\n    var geom = this._queryGeometryModel.get('simple_geom');\n\n    // if we have \"the_geom\" in our current schema, we apply a custom sql\n    if (geom) {\n      return CSV_FILTER.replace(/%%sql%%/g, sql);\n    }\n    // Otherwise, we apply regular sql\n    return sql;\n  },\n\n  /**\n   * Populates the hidden form with the format related values and submits them to get the file\n   * @param  {Object} options Base options\n   * @param  {String} sql Sql of the document to be retrieved\n   */\n  _fetch: function (options, sql) {\n    this.$('.js-format').val(options.format);\n    this.$('.js-q').val(sql);\n    this.$('.js-filename').val(options.filename);\n    this.$('.js-apiKey').val(options.apiKey);\n\n    var skipFields = ['the_geom_webmercator'];\n\n    if (options.format !== 'csv') {\n      skipFields.push('the_geom');\n    }\n\n    // We remove the center column only if there's a time buffer analysis on this layer\n    // and not a deprecated SQL function analysis. Time buffer always adds this column, but\n    // a SQL analysis might add arbitrary columns.\n    if (this._canHideColumns) {\n      const columnNames = this._querySchemaModel.getColumnNames();\n      // Skip column center if it's of type geometry\n      if (columnNames.indexOf('center') !== -1 && this._querySchemaModel.getColumnType('center') === 'geometry') {\n        skipFields.push('center');\n      }\n    }\n\n    this.$('.js-skipfields').val(skipFields.join(','));\n\n    // TODO: track metrics\n\n    // check if the sql is big or not, and send the request as a verb or other. This is a HACK.\n    if (sql.length < MAX_SQL_GET_LENGTH) {\n      var location = this.$('.js-form').attr('action') + '?' + this.$('.js-form').serialize();\n      this._fetchGET(location);\n    } else {\n      // I can't find a way of making the iframe trigger load event when its get a form posted,\n      // so we need to leave like it was until\n      this.submit();\n    }\n\n    this.$('.js-skipfields').attr('disabled', 'disabled');\n\n    if (this.options.autoClose) {\n      this._close();\n    } else {\n      this._renderLoadingContent(_t('components.modals.export-data.loading.preparing'));\n    }\n  },\n\n  showError: function (errorMessage) {\n    var errorView = new ErrorView({\n      title: _t('hello'),\n      desc: errorMessage\n    });\n    this.$el.html(errorView.render().el);\n    this.addView(errorView);\n  },\n\n  _fetchGET: function (url) {\n    function getError (content) {\n      // sql api returns a json when it fails\n      // but if the browser is running some plugin that\n      // formats it, the window content is the html\n      // so search for the word \"error\"\n      var error = null;\n      try {\n        var json = JSON.parse(content);\n        error = json.error[0];\n      } catch (e) {\n        if (content && content.indexOf('error') !== -1) {\n          error = _t('components.modals.export-data.error.unknown');\n        }\n      }\n      return error;\n    }\n\n    var self = this;\n    var checkInterval;\n\n    var w = window.open(url);\n    w.onload = function () {\n      clearInterval(checkInterval);\n      var error = getError(w.document.body.textContent);\n      if (error) {\n        self.showError(error);\n      } else {\n        self._close();\n      }\n      w.close();\n    };\n    window.focus();\n    checkInterval = setInterval(function check () {\n      // safari needs to check the body because it never\n      // calls onload\n      if (w.closed || (w.document && w.document.body.textContent.length === 0)) {\n        self._close();\n        clearInterval(checkInterval);\n      }\n    }, 100);\n  },\n\n  /**\n   * Base fetch, for the formats that don't require special threatment\n   * @param  {String} formatName\n   */\n  fetch: function (formatName) {\n    var options = this.getBaseOptions();\n    options.format = formatName;\n    var sql = this._queryGeometryModel.get('query');\n    this._fetch(options, sql);\n  },\n\n  /**\n   * Gets the options needed for csv format and fetch the document\n   * @param  {String} formatName\n   */\n  fetchCSV: function () {\n    var options = this.getBaseOptions();\n    options.format = 'csv';\n    var sql = this.getGeomFilteredSql();\n    this.$('.js-skipfields').removeAttr('disabled');\n    this._fetch(options, sql);\n  },\n  /**\n   * Gets the options needed for svg format and fetch the document\n   * @param  {String} formatName\n   */\n  fetchSVG: function () {\n    this.fetch('svg');\n  },\n\n  /**\n   * Submits the form. This method is separated to ease the testing\n   */\n  submit: function () {\n    this.$('.js-form').submit();\n  },\n\n  _renderLoadingContent: function (title) {\n    this.$el.html(\n      renderLoading({\n        title: title\n      })\n    );\n  },\n\n  _close: function () {\n    this._modalModel.destroy();\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar template = require('./footer.tpl');\n\nmodule.exports = CoreView.extend({\n\n  tagName: 'ul',\n  className: 'Modal-listActions u-flex u-alignCenter ',\n\n  events: {\n    'click .js-save': '_save',\n    'click .js-close': '_close'\n  },\n\n  initialize: function (opts) {\n    if (!opts.visMetadataModel) throw new Error('visMetadataModel is required');\n    if (!opts.onSaveAction) throw new Error('onSaveAction is required');\n\n    this._visMetadataModel = opts.visMetadataModel;\n    this._onSaveAction = opts.onSaveAction;\n    this._onCloseAction = opts.onCloseAction;\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this._visMetadataModel.on('change', this.render, this);\n  },\n\n  render: function () {\n    this.$el.html(\n      template({\n        canFinish: this._visMetadataModel.isValid()\n      })\n    );\n    return this;\n  },\n\n  _save: function () {\n    this._visMetadataModel.isValid() && this._onSaveAction();\n  },\n\n  _close: function () {\n    this._onCloseAction && this._onCloseAction();\n  }\n\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar templateForm = require('./form.tpl');\nrequire('builder/components/form-components/index');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\nvar utils = require('builder/helpers/utils');\n\nvar REQUIRED_OPTS = [\n  'visDefinitionModel',\n  'visMetadataModel'\n];\n\nmodule.exports = CoreView.extend({\n  className: 'Metadata-form',\n\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (!opts[item]) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(templateForm());\n    this._initViews();\n    return this;\n  },\n\n  _initViews: function () {\n    this._addInputView();\n    this._addTextareaView();\n    this._addTagsView();\n    this._addTooltip();\n  },\n\n  _addInputView: function () {\n    this._inputView = new Backbone.Form.editors.Text({\n      key: 'name',\n      model: this._visMetadataModel,\n      schema: {\n        options: this._visDefinitionModel.get('name'),\n        editorAttrs: {\n          placeholder: _t('components.modals.maps-metadata.form.name-placeholder')\n        }\n      }\n    });\n    this._inputView.on('change', this._commitView, this);\n\n    this.$('.js-name-field').append(this._inputView.render().$el);\n  },\n\n  _addTextareaView: function () {\n    this._textareaView = new Backbone.Form.editors.TextArea({\n      className: 'CDB-Textarea Metadata-textarea',\n      key: 'description',\n      model: this._visMetadataModel,\n      schema: {\n        options: this._visDefinitionModel.get('description'),\n        editorAttrs: {\n          placeholder: _t('components.modals.maps-metadata.form.description-placeholder')\n        }\n      }\n    });\n\n    this._textareaView.on('change', this._commitView, this);\n\n    this.$('.js-description-field').append(this._textareaView.render().$el);\n  },\n\n  _addTagsView: function () {\n    this._taglistView = new Backbone.Form.editors.Taglist({\n      key: 'tags',\n      model: this._visMetadataModel,\n      schema: {\n        options: {\n          tags: this._visDefinitionModel.get('tags') || []\n        }\n      }\n    });\n\n    this._taglistView.on('change', this._commitView, this);\n\n    this.$('.js-tags-field').append(this._taglistView.render().$el);\n    this.addView(this._taglistView);\n  },\n\n  _addTooltip: function () {\n    var title = this.$('.js-markdown').data('tooltip');\n    this._removeTooltip();\n\n    this._tooltip = new TipsyTooltipView({\n      el: this.$('.js-markdown'),\n      html: true,\n      title: function () {\n        return title;\n      }\n    });\n  },\n\n  _commitView: function (view) {\n    view.commit();\n    // Commit moves values from form to model. We need to override model value after commit()\n    if (view.model.changed.hasOwnProperty('name')) {\n      this._sanitizeName(view.model.get('name'));\n    }\n  },\n\n  _sanitizeName: function (name) {\n    this._visMetadataModel.set('name', utils.sanitizeHtml(name));\n  },\n\n  _removeTooltip: function () {\n    if (this._tooltip) {\n      this._tooltip.clean();\n    }\n  },\n\n  _removeBinds: function () {\n    this._inputView && this._inputView.off('change', this._commitView, this);\n    this._textareaView && this._textareaView.off('change', this._commitView, this);\n    this._taglistView && this._taglistView.off('change', this._commitView, this);\n  },\n\n  clean: function () {\n    this._removeBinds();\n    CoreView.prototype.clean.call(this);\n  }\n});\n","var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar VisMetadataModel = require('builder/data/vis-metadata-model');\nvar template = require('./map-metadata.tpl');\nvar FooterView = require('./footer/footer-view');\nvar templateError = require('./map-metadata-error.tpl');\nvar templateLoading = require('builder/components/loading/render-loading');\nvar FormView = require('./form/form-view');\nvar saveMetadata = require('./save-metadata-map');\nvar errorParser = require('builder/helpers/error-parser');\nvar Notifier = require('builder/components/notifier/notifier');\nvar utils = require('builder/helpers/utils');\n\n/**\n * Add layer dialog, typically used from editor\n */\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-back': '_onBackFromError'\n  },\n\n  className: 'Dialog-content Dialog-content--expanded',\n\n  initialize: function (opts) {\n    if (!opts.modalModel) throw new TypeError('modalModel is required');\n    if (!opts.visDefinitionModel) throw new TypeError('visDefinitionModel is required');\n\n    this._modalModel = opts.modalModel;\n    this._visDefinitionModel = opts.visDefinitionModel;\n\n    this._visMetadataModel = new VisMetadataModel({\n      name: this._visDefinitionModel.get('name'),\n      description: this._visDefinitionModel.get('description'),\n      tags: this._visDefinitionModel.get('tags')\n    });\n\n    this._stateModel = new Backbone.Model({\n      status: 'show'\n    });\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    if (this._hasError()) {\n      this._renderError();\n    } else if (this._isLoading()) {\n      this._renderLoading();\n    } else {\n      this.$el.html(template());\n      this._initViews();\n    }\n    return this;\n  },\n\n  _initViews: function () {\n    var formView = new FormView({\n      visDefinitionModel: this._visDefinitionModel,\n      visMetadataModel: this._visMetadataModel\n    });\n\n    this.$('.js-content').append(formView.render().el);\n    this.addView(formView);\n\n    var footerView = new FooterView({\n      visMetadataModel: this._visMetadataModel,\n      onSaveAction: this._onSave.bind(this),\n      onCloseAction: this._onClose.bind(this)\n    });\n\n    this.$('.js-footer').append(footerView.render().el);\n    this.addView(footerView);\n  },\n\n  _renderError: function () {\n    var error = this._stateModel.get('error');\n    this.$el.html(templateError({\n      error: _t('components.modals.maps-metadata.error.subtitle', {error: error})\n    }));\n  },\n\n  _renderLoading: function () {\n    this.$el.html(\n      templateLoading({\n        title: _t('components.modals.maps-metadata.loading')\n      })\n    );\n  },\n\n  _initBinds: function () {\n    this._stateModel.on('change:status', this.render, this);\n    this.add_related_model(this._stateModel);\n  },\n\n  _hasError: function () {\n    return this._stateModel.get('status') === 'error';\n  },\n\n  _isLoading: function () {\n    return this._stateModel.get('status') === 'loading';\n  },\n\n  _onSave: function () {\n    this._stateModel.set({status: 'loading'});\n\n    saveMetadata({\n      onSuccess: this._onSuccessSave.bind(this),\n      onError: this._onErrorSave.bind(this),\n      visDefinitionModel: this._visDefinitionModel,\n      name: this._getMetadataName(),\n      description: this._getMetadataDescription(),\n      tags: this._getMetadataTags()\n    });\n  },\n\n  _onSuccessSave: function () {\n    var self = this;\n    Notifier.addNotification({\n      status: 'success',\n      info: _t('components.modals.maps-metadata.success', {\n        name: self._getMetadataName()\n      }),\n      closable: true,\n      delay: Notifier.DEFAULT_DELAY\n    });\n\n    this._modalModel.destroy();\n  },\n\n  _onClose: function () {\n    this._modalModel.destroy();\n  },\n\n  _onErrorSave: function (e) {\n    this._stateModel.set({\n      status: 'error',\n      error: errorParser(e)\n    });\n  },\n\n  _onBackFromError: function () {\n    this._stateModel.set({status: 'show'});\n  },\n\n  _getMetadataName: function () {\n    return utils.sanitizeHtml(this._visMetadataModel.get('name'));\n  },\n\n  _getMetadataDescription: function () {\n    return utils.sanitizeHtml(this._visMetadataModel.get('description'));\n  },\n\n  _getMetadataTags: function () {\n    return _.map(this._visMetadataModel.get('tags'), function (tag) {\n      return utils.sanitizeHtml(tag);\n    });\n  }\n});\n","var TITLE_SUFIX = require('builder/components/modals/visualization-title-suffix-metadata');\n\nmodule.exports = function (opts) {\n  if (!opts.visDefinitionModel) throw new Error('visDefinitionModel is required');\n  if (!opts.name) throw new Error('name is required');\n\n  var visDefinitionModel = opts.visDefinitionModel;\n  var successCallback = opts.onSuccess;\n  var errorCallback = opts.onError;\n  var name = opts.name;\n  var description = opts.description;\n  var tags = opts.tags;\n\n  var oldName = visDefinitionModel.get('name');\n\n  visDefinitionModel.save({\n    name: name,\n    description: description,\n    tags: tags\n  }, {\n    wait: true,\n    success: function (mdl, attrs) {\n      document.title = name + TITLE_SUFIX;\n      successCallback && successCallback();\n    },\n    error: function (mdl, e) {\n      document.title = oldName + TITLE_SUFIX;\n      errorCallback && errorCallback(e);\n    }\n  });\n};\n","var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\n\n/**\n * View model of a modal\n */\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    show: true,\n    createContentView: function () {\n      return new CoreView();\n    }\n  },\n\n  createContentView: function () {\n    return this.get('createContentView')(this);\n  },\n\n  show: function () {\n    this.set('show', true);\n  },\n\n  hide: function () {\n    this.set('show', false);\n  },\n\n  isHidden: function () {\n    return !this.get('show');\n  },\n\n  /**\n   * @override {Backbone.Model.prototype.destroy}\n   */\n  destroy: function () {\n    var args = Array.prototype.slice.call(arguments);\n    this.trigger.apply(this, ['destroy'].concat(args));\n  }\n});\n","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar template = require('./modal.tpl');\n\n// Ought to match the duration of the .Dialog.is-closing animation.\nvar CLOSE_DELAY_MS = 120;\n\nmodule.exports = CoreView.extend({\n  className: function () {\n    var classes = ['Dialog', 'is-white'];\n    if (!this.options.escapeOptionsDisabled) {\n      classes.push('is-opening');\n    }\n\n    if (this.options.breadcrumbsEnabled) {\n      classes.push('Dialog--withBreadcrumbs');\n    }\n\n    return classes.join(' ');\n  },\n\n  events: {\n    'click .js-close': '_onClose'\n  },\n\n  initialize: function () {\n    this.listenTo(this.model, 'change:show', this._onShowChange);\n    this.listenTo(this.model, 'destroy', this._onDestroy);\n\n    this._escapeOptionsDisabled = this.options.escapeOptionsDisabled;\n    this._breadcrumbsEnabled = this.options.breadcrumbsEnabled;\n    this._keepOpenOnRouteChange = this.options.keepOpenOnRouteChange;\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this.$el.html(\n      template({\n        escapeOptionsDisabled: this._escapeOptionsDisabled || false,\n        breadcrumbsEnabled: this._breadcrumbsEnabled || false\n      })\n    );\n\n    var view = this.model.createContentView();\n    this.addView(view);\n\n    view.render();\n\n    this.$('.js-content').append(view.el);\n\n    return this;\n  },\n\n  show: function () {\n    this.model.show();\n  },\n\n  hide: function () {\n    this.model.hide();\n  },\n\n  destroy: function () {\n    // 'remove' would be a better name ofc, but there is already an internal method with that name in CoreView\n    this.model.destroy();\n  },\n\n  keepOpenOnRouteChange: function () {\n    return this.model.get('keepOpenOnRouteChange');\n  },\n\n  _onShowChange: function (m, show) {\n    if (show) {\n      this.$el.show();\n      this.$el.removeClass('is-closing').addClass('is-opening');\n    } else {\n      this.$el.removeClass('is-opening').addClass('is-closing');\n      this._delayDueToAnimation(function () {\n        this.$el.hide();\n      });\n    }\n  },\n\n  _onClose: function (e) {\n    e.stopPropagation();\n    this.destroy();\n  },\n\n  _onDestroy: function () {\n    this.hide();\n    _.invoke(this._subviews, 'allOff');\n    this._delayDueToAnimation(function () {\n      this.clean();\n    });\n  },\n\n  _delayDueToAnimation: function (fn) {\n    setTimeout(fn.bind(this), CLOSE_DELAY_MS);\n  }\n\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar ModalView = require('./modal-view');\nvar ModalViewModel = require('./modal-view-model');\n\nvar DESTROYED_MODAL_EVENT = 'destroyedModal';\n\n/**\n * Top-level API to handle modals.\n * Is intended to be instantiated and registered in some top-level namespace to be accessible within the lifecycle of\n * an client-side application.\n *\n * Example:\n * // In some entry-point:\n * cdb.modals = new ModalsServiceModel();\n *\n * // Later, in any view, calling create will create a new modal viewModel\n * var modalView = cdb.modals.create(fn)\n *\n * You will probably see the name of \"Dialog\" here and there, it's the old nomenclature for the concept of Modal.\n */\nmodule.exports = Backbone.Model.extend({\n\n  /**\n   * Creates a new modal view\n   *\n   * @param {Function} createContentView\n   * @return {View} the new modal view\n   */\n  create: function (createContentView, options) {\n    if (!_.isFunction(createContentView)) throw new Error('createContentView is required');\n\n    if (!this._modalView) {\n      this.trigger('willCreateModal');\n      this._modalView = this._newModalView(options);\n      this.trigger('didCreateModal', this._modalView);\n      document.body.appendChild(this._modalView.el);\n    }\n\n    this._modalView.model.set('createContentView', createContentView);\n    this._modalView.render();\n\n    return this._modalView;\n  },\n\n  /**\n   * Convenience method to add a listener when current modal is destroyed\n   *\n   * This is the same as doing\n   * modals.create(function (model) {\n   *   model.once('destroy', callback, context); // <-- same as modals.onDestroyOnce(callback, context);\n   *   return new MyView({  });\n   * });\n   *\n   * @param {Function} callback\n   * @param {Object} [context = undefined]\n   */\n  onDestroyOnce: function (callback, context) {\n    this.once(DESTROYED_MODAL_EVENT, callback, context);\n  },\n\n  destroy: function () {\n    if (this._modalView) {\n      this._modalView.model.destroy();\n    }\n  },\n\n  keepOpenOnRouteChange: function () {\n    return this._modalView && this._modalView.keepOpenOnRouteChange();\n  },\n\n  _newModalView: function (options) {\n    var viewModel = new ModalViewModel({\n      keepOpenOnRouteChange: options && options.keepOpenOnRouteChange\n    });\n\n    this._handleBodyClass(viewModel);\n\n    var escapeOptionsDisabled = options && options.escapeOptionsDisabled;\n    var breadcrumbsEnabled = options && options.breadcrumbsEnabled;\n\n    if (!escapeOptionsDisabled) {\n      this._destroyOnEsc(viewModel);\n    }\n\n    this.listenToOnce(viewModel, 'destroy', function () {\n      this._modalView = null;\n      this.trigger.apply(this, [DESTROYED_MODAL_EVENT].concat(Array.prototype.slice.call(arguments)));\n      this.stopListening(viewModel);\n    });\n\n    return new ModalView({\n      model: viewModel,\n      escapeOptionsDisabled: escapeOptionsDisabled,\n      breadcrumbsEnabled: breadcrumbsEnabled\n    });\n  },\n\n  _destroyOnEsc: function (viewModel) {\n    var destroyOnEsc = function (ev) {\n      if (ev.keyCode === 27) {\n        ev.stopPropagation();\n        viewModel.destroy();\n      }\n    };\n    document.addEventListener('keydown', destroyOnEsc);\n    this.listenToOnce(viewModel, 'destroy', function () {\n      document.removeEventListener('keydown', destroyOnEsc);\n    });\n  },\n\n  /**\n   * TL;DR this method manages document.body class state, to enable scroll inside of an open modal.\n   *\n   * Some modal content have too much content that can be displayed in the viewport the scroll needs to be enabled.\n   * Since the modal is implemented as a fixed positioned element the body needs to be fixated too, for the scroll to\n   * be enabled inside the modal instead.\n   */\n  _handleBodyClass: function (viewModel) {\n    var bodyClass = 'is-inDialog';\n    document.body.classList.add(bodyClass);\n    this.set('open', true);\n\n    this.listenTo(viewModel, 'change:show', function (m, show) {\n      document.body.classList[show ? 'add' : 'remove'](bodyClass);\n      this.set('open', show);\n    });\n\n    this.listenToOnce(viewModel, 'destroy', function () {\n      document.body.classList.remove(bodyClass);\n      this.set('open', false);\n    });\n  },\n\n  isOpen: function () {\n    return this.get('open') === true;\n  }\n\n});\n","var ConfirmationView = require('builder/components/modals/confirmation/modal-confirmation-view');\nvar IconView = require('builder/components/icon/icon-view');\nvar template = require('./privacy-warning.tpl');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'modalModel',\n  'privacyType'\n];\n\n/**\n *  Privacy Warning modal dialog\n */\nmodule.exports = ConfirmationView.extend({\n  className: 'Dialog-content',\n\n  events: {\n    'click .js-confirm': '_onConfirm',\n    'click .js-cancel': '_onDismiss'\n  },\n\n  initialize: function (options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n\n    if (this.options.onConfirm) {\n      this._onConfirmCallback = this.options.onConfirm;\n    }\n\n    if (this.options.onDismiss) {\n      this._onDismissCallback = this.options.onDismiss;\n    }\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template({\n      type: this.options.type || 'visualization',\n      selectedPrivacyType: this._privacyType\n    }));\n\n    var warningIcon = new IconView({\n      placeholder: this.$el.find('.js-icon-warning'),\n      icon: 'warning'\n    });\n    warningIcon.render();\n    this.addView(warningIcon);\n\n    return this;\n  },\n\n  _onConfirm: function () {\n    this._modalModel.destroy();\n    this._onConfirmCallback && this._onConfirmCallback();\n  },\n\n  _onDismiss: function () {\n    this._modalModel.destroy();\n    this._onDismissCallback && this._onDismissCallback();\n  }\n});\n","var _ = require('underscore');\n\n/**\n * type property should match the value given from the API.\n */\nvar ALL_OPTIONS = [{\n  privacy: 'PUBLIC',\n  title: _t('components.modals.publish.privacy.public.title'),\n  desc: _t('components.modals.publish.privacy.public.body'),\n  alwaysEnabled: true,\n  cssClass: 'green'\n}, {\n  privacy: 'LINK',\n  title: _t('components.modals.publish.privacy.link.title'),\n  desc: _t('components.modals.publish.privacy.link.body'),\n  cssClass: 'orange'\n}, {\n  privacy: 'PASSWORD',\n  title: _t('components.modals.publish.privacy.password.title'),\n  desc: _t('components.modals.publish.privacy.password.body'),\n  cssClass: 'orange-dark'\n}, {\n  privacy: 'PRIVATE',\n  title: _t('components.modals.publish.privacy.private.title'),\n  desc: _t('components.modals.publish.privacy.private.body'),\n  cssClass: 'red'\n}];\n\nmodule.exports = function (visDefinitionModel, userModel) {\n  var isVisualization = visDefinitionModel.isVisualization();\n  var actions = userModel.get('actions');\n  var canSelectPremiumOptions = actions[ isVisualization ? 'private_maps' : 'private_tables' ];\n  var currentPrivacy = visDefinitionModel.get('privacy');\n  var availableOptions = visDefinitionModel.privacyOptions();\n\n  return _.chain(ALL_OPTIONS)\n    .filter(function (option) {\n      return _.contains(availableOptions, option.privacy);\n    })\n    .map(function (option) {\n      // Set state that depends on vis and user attrs, they should not vary during the lifecycle of this collection\n      return _.defaults({\n        selected: option.privacy === currentPrivacy,\n        disabled: !(option.alwaysEnabled || canSelectPremiumOptions)\n      }, option);\n    })\n    .value();\n};\n","var Backbone = require('backbone');\nvar PrivacyModel = require('./privacy-model');\nvar PasswordModel = require('./privacy-password-model');\n\n/**\n * Collection that holds the different privacy options.\n */\nmodule.exports = Backbone.Collection.extend({\n\n  model: function (attrs, options) {\n    if (attrs.privacy === 'PASSWORD') {\n      return new PasswordModel(attrs, options);\n    } else {\n      return new PrivacyModel(attrs, options);\n    }\n  },\n\n  initialize: function () {\n    this.bind('change:selected', this._deselectLastSelected, this);\n  },\n\n  searchByPrivacy: function (privacy) {\n    return this.findWhere({privacy: privacy});\n  },\n\n  selectedOption: function () {\n    return this.find(function (option) {\n      return option.get('selected');\n    });\n  },\n\n  passwordOption: function () {\n    return this.find(function (option) {\n      return option.get('privacy') === 'PASSWORD';\n    });\n  },\n\n  _deselectLastSelected: function (m, isSelected) {\n    if (isSelected) {\n      this.each(function (option) {\n        if (option !== m) {\n          option.set({selected: false});\n        }\n      });\n    }\n  }\n});\n","var Backbone = require('backbone');\nvar _ = require('underscore');\n\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    privacy: 'PUBLIC',\n    disabled: false,\n    selected: false,\n    password: undefined\n  },\n\n  validate: function (attrs) {\n    if (attrs.disabled && attrs.selected) {\n      return 'Option can not be disabled and selected at the same time';\n    }\n  },\n\n  classNames: function () {\n    return _.chain(['disabled', 'selected'])\n      .map(function (attr) { return this.attributes[attr] !== undefined ? 'is-' + attr : undefined; }, this)\n      .compact().value().join(' ');\n  },\n\n  canSave: function () {\n    return !this.get('disabled');\n  },\n\n  isPassword: function () {\n    return false;\n  },\n\n  isSelected: function () {\n    return this.get('selected') === true;\n  },\n\n  saveToVis: function (vis, callbacks) {\n    return vis.save(this._attrsToSave(), _.extend({ wait: true }, callbacks));\n  },\n\n  _attrsToSave: function () {\n    return _.pick(this.attributes, 'privacy', 'password');\n  }\n});\n","var _ = require('underscore');\nvar PrivacyModel = require('./privacy-model');\n\nvar FAKE_PASSWORD = '!@#!@#';\n\n/**\n * View model for the special privacy option representing a password protected map.\n * It handles the logic related to the password that needs to be set for the option.\n */\nmodule.exports = PrivacyModel.extend({\n\n  initialize: function () {\n    PrivacyModel.prototype.initialize.apply(this, arguments);\n    this.set('password', FAKE_PASSWORD);\n  },\n\n  /**\n   * @override OptionModel.attrsToSave\n   */\n  _attrsToSave: function () {\n    var attrs = PrivacyModel.prototype._attrsToSave.call(this);\n\n    if (attrs.password === FAKE_PASSWORD) {\n      delete attrs.password;\n    }\n\n    return attrs;\n  },\n\n  canSave: function () {\n    return !this.get('disabled') && !_.isEmpty(this.get('password'));\n  },\n\n  isPassword: function () {\n    return true;\n  }\n});\n","var $ = require('jquery');\nvar moment = require('moment');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar PrivacyWarningView = require('builder/components/modals/privacy-warning/privacy-warning-view');\nvar ModalsServiceModel = require('builder/components/modals/modals-service-model');\nvar VisDefinitionModel = require('builder/data/vis-definition-model');\nvar template = require('./publish-button.tpl');\n\nvar REQUIRED_OPTS = [\n  'visDefinitionModel',\n  'mapcapsCollection',\n  'configModel',\n  'userModel'\n];\n\nmodule.exports = CoreView.extend({\n\n  events: {\n    'click .js-button': '_onUpdate'\n  },\n\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (opts[item] === undefined) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n\n    // We recreate this modal stack to be able to\n    // have two modals stacked on screen\n    this._modals = new ModalsServiceModel();\n\n    this.model = new Backbone.Model({\n      status: 'idle'\n    });\n\n    this._initBinds();\n  },\n\n  render: function () {\n    var publishedOn = this._mapcapsCollection.length > 0\n      ? _t('components.modals.publish.share.last-published', { date:\n                        this.model.get('status') === 'updated'\n                          ? moment(this._mapcapsCollection.first().get('created_at')).fromNow()\n                          : moment(this._mapcapsCollection.first().get('created_at')).format('Do MMMM YYYY, HH:mm')\n      })\n      : _t('components.modals.publish.share.unpublished');\n\n    this.clearSubViews();\n    this.$el.html(template({\n      isPublished: this._isPublished(),\n      isLoading: this._isLoading(),\n      isDisabled: this._isDisabled(),\n      publishedOn: publishedOn\n    }));\n    return this;\n  },\n\n  _initBinds: function () {\n    this._mapcapsCollection.on('reset', this.render, this);\n    this.add_related_model(this._mapcapsCollection);\n    this.model.on('change:status', this.render, this);\n  },\n\n  _isPublished: function () {\n    return this._mapcapsCollection.length > 0;\n  },\n\n  _isLoading: function () {\n    return this.model.get('status') === 'loading';\n  },\n\n  _isDisabled: function () {\n    return this.model.get('status') === 'updated';\n  },\n\n  _onUpdate: function () {\n    var self = this;\n    var url = this._visDefinitionModel.mapcapsURL();\n    var data = {\n      api_key: this._configModel.get('api_key')\n    };\n\n    if (this._isDisabled()) return false;\n\n    if (this._shouldShowPrivacyWarning()) {\n      this._checkPrivacyChange(\n        this._visDefinitionModel.get('privacy'),\n        function () { self._createMapCap(url, data); }\n      );\n    } else {\n      this._createMapCap(url, data);\n    }\n  },\n\n  _checkPrivacyChange: function (newPrivacyStatus, confirmCallback, dismissCallback) {\n    this._modals.create(function (modalModel) {\n      return new PrivacyWarningView({\n        modalModel: modalModel,\n        privacyType: newPrivacyStatus,\n        onConfirm: confirmCallback,\n        onDismiss: dismissCallback\n      });\n    });\n  },\n\n  _createMapCap: function (url, data) {\n    var self = this;\n    this.model.set({status: 'loading'});\n\n    $.post(url, data)\n      .done(function (data) {\n        self._visDefinitionModel.set('visChanges', 0);\n        self._mapcapsCollection.add(data, {at: 0});\n        self.model.set({status: 'updated'});\n      })\n      .fail(function () {\n        self.model.set({status: 'error'});\n      });\n  },\n\n  _shouldShowPrivacyWarning: function () {\n    return this._userModel.canSelectPremiumOptions(this._visDefinitionModel) &&\n      !this._isPublished() &&\n      VisDefinitionModel.isPubliclyAvailable(this._visDefinitionModel.get('privacy'));\n  },\n\n  clean: function () {\n    this._modals.destroy();\n    CoreView.prototype.clean.apply(this, arguments);\n  }\n});\n","var moment = require('moment');\nvar CoreView = require('backbone/core-view');\nvar template = require('./publish.tpl');\nvar TabPaneTemplate = require('./tab-pane-submenu.tpl');\nvar createTextLabelsTabPane = require('builder/components/tab-pane/create-text-labels-tab-pane');\nvar PublishView = require('./publish/publish-view');\nvar ShareView = require('./share/share-view');\nvar PrivacyDropdown = require('builder/components/privacy-dropdown/privacy-dropdown-view');\nvar PublishButton = require('./publish-button-view');\nvar ShareWith = require('./share-with-view');\nvar UpgradeView = require('./upgrade-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'modalModel',\n  'visDefinitionModel',\n  'privacyCollection',\n  'userModel',\n  'configModel',\n  'isOwner'\n];\n\nvar MODE_FULL = 'full';\nvar MODE_SHARE = 'share';\nvar MODE_PUBLISH = 'publish';\n\nmodule.exports = CoreView.extend({\n  className: 'Publish-modal',\n\n  events: {\n    'click .js-done': '_onDone'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    // Optional options\n    this._mapcapsCollection = opts.mapcapsCollection;\n    this.mode = opts.mode || MODE_FULL;\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template({\n      name: this._visDefinitionModel.get('name'),\n      isSimple: !this._hasTabs(),\n      hasShareStats: this._hasShareStats()\n    }));\n\n    this._initViews();\n\n    if (this.mode === MODE_FULL) {\n      if (!this._hasOrganization()) {\n        this._makePublishView();\n      } else {\n        this._initTabsViews();\n      }\n    } else if (this.mode === MODE_SHARE) {\n      this._makeShareView();\n    } else if (this.mode === MODE_PUBLISH) {\n      this._makePublishView();\n    }\n\n    return this;\n  },\n\n  _hasShareStats: function () {\n    return this.mode !== MODE_PUBLISH && this._hasOrganization();\n  },\n\n  _hasOrganization: function () {\n    return this._userModel.isInsideOrg();\n  },\n\n  _hasTabs: function () {\n    var hasOrganization = this._hasOrganization();\n    return hasOrganization && this.mode === MODE_FULL;\n  },\n\n  _makePublishView: function () {\n    var view = this._createPublishView();\n    this.$('.js-panes').append(view.render().el);\n    this.addView(view);\n  },\n\n  _makeShareView: function () {\n    var view = this._createShareView();\n    this.$('.js-panes').append(view.render().el);\n    this.addView(view);\n  },\n\n  _initViews: function () {\n    var dropdown;\n    var publishButton;\n    var shareWith;\n    var upgradeView;\n    var publishedOn;\n\n    dropdown = new PrivacyDropdown({\n      privacyCollection: this._privacyCollection,\n      visDefinitionModel: this._visDefinitionModel,\n      mapcapsCollection: this._mapcapsCollection,\n      userModel: this._userModel,\n      configModel: this._configModel,\n      isOwner: this._isOwner\n    });\n\n    this.$('.js-dropdown').append(dropdown.render().el);\n    this.addView(dropdown);\n\n    if (this._mapcapsCollection !== undefined) {\n      publishButton = new PublishButton({\n        visDefinitionModel: this._visDefinitionModel,\n        mapcapsCollection: this._mapcapsCollection,\n        configModel: this._configModel,\n        userModel: this._userModel\n      });\n\n      this.$('.js-update').append(publishButton.render().el);\n      this.addView(publishButton);\n    } else {\n      publishedOn = _t('components.modals.publish.share.last-published', { date:\n                      moment(this._visDefinitionModel.get('updated_at')).format('Do MMMM YYYY, HH:mm')\n      });\n\n      this.$('.js-update').html(publishedOn);\n    }\n\n    if (this._hasShareStats()) {\n      shareWith = new ShareWith({\n        visDefinitionModel: this._visDefinitionModel,\n        userModel: this._userModel,\n        avatarClass: 'Share-user--big',\n        separationClass: 'u-rSpace--xl'\n      });\n      this.$('.js-share-users').append(shareWith.render().el);\n      this.addView(shareWith);\n    }\n\n    if (!this._hasOrganization()) {\n      upgradeView = new UpgradeView();\n      this.$('.js-upgrade').append(upgradeView.render().el);\n      this.addView(upgradeView);\n    }\n  },\n\n  _initTabsViews: function () {\n    var self = this;\n\n    var tabPaneTabs = [{\n      name: 'share',\n      label: _t('components.modals.publish.menu.share'),\n      createContentView: self._createShareView.bind(self)\n    }, {\n      name: 'publish',\n      label: _t('components.modals.publish.menu.publish'),\n      createContentView: self._createPublishView.bind(self)\n    }];\n\n    var tabPaneOptions = {\n      tabPaneOptions: {\n        template: TabPaneTemplate,\n        tabPaneItemOptions: {\n          tagName: 'li',\n          klassName: 'CDB-NavSubmenu-item'\n        }\n      },\n      tabPaneItemLabelOptions: {\n        tagName: 'button',\n        className: 'CDB-NavSubmenu-link u-upperCase Publish-modalLink'\n      }\n    };\n\n    this._layerTabPaneView = createTextLabelsTabPane(tabPaneTabs, tabPaneOptions);\n    this.$('.js-panes').append(this._layerTabPaneView.render().$el);\n    this.addView(this._layerTabPaneView);\n  },\n\n  _createShareView: function () {\n    return new ShareView({\n      className: 'Share-wrapper',\n      currentUserId: this._userModel.id,\n      visDefinitionModel: this._visDefinitionModel,\n      organization: this._userModel._organizationModel,\n      configModel: this._configModel\n    });\n  },\n\n  _createPublishView: function () {\n    return new PublishView({\n      visDefinitionModel: this._visDefinitionModel,\n      mapcapsCollection: this._mapcapsCollection,\n      userModel: this._userModel\n    });\n  },\n\n  _onDone: function () {\n    this._modalModel.destroy();\n  }\n});\n","var linkIconTemplate = require('./icon-link.tpl');\nvar embedIconTemplate = require('./icon-embed.tpl');\n\nmodule.exports = function (visDefinitionModel) {\n  return [{\n    createIcon: function () {\n      return linkIconTemplate();\n    },\n    type: 'get-link',\n    content: visDefinitionModel.embedURL(),\n    private: visDefinitionModel.get('privacy') === 'PRIVATE'\n  }, {\n    createIcon: function () {\n      return embedIconTemplate();\n    },\n    type: 'embed',\n    content: '<iframe width=\"100%\" height=\"520\" frameborder=\"0\" src=\"' + encodeURI(visDefinitionModel.embedURL()) + '\" allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen></iframe>',\n    url: encodeURI(visDefinitionModel.embedURL()),\n    private: visDefinitionModel.get('privacy') === 'PRIVATE'\n  }];\n};\n","var CoreView = require('backbone/core-view');\nvar CreateShareOptions = require('./create-share-options');\nvar ShareCollection = require('./share-collection');\nvar ShareItemView = require('./share-item-view');\nvar template = require('./publish.tpl');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'visDefinitionModel',\n  'mapcapsCollection',\n  'userModel'\n];\n\nmodule.exports = CoreView.extend({\n  className: 'Publish-modalShare u-inner',\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this.hasOrganization = this._userModel.isInsideOrg();\n\n    var shareOptions = CreateShareOptions(this._visDefinitionModel);\n    this._shareCollection = new ShareCollection(shareOptions);\n\n    this._initBinds();\n  },\n\n  render: function () {\n    var isPublished = this._mapcapsCollection.length > 0;\n    this.clearSubViews();\n    this.$el.html(template({\n      isPublished: isPublished\n    }));\n    this._initViews();\n    return this;\n  },\n\n  _initViews: function () {\n    var renderItemView = this._renderItemView.bind(this);\n    this._shareCollection.each(renderItemView);\n  },\n\n  _renderItemView: function (model) {\n    var self = this;\n    var isPublished = this._mapcapsCollection.length > 0;\n    var view = new ShareItemView({\n      model: model,\n      isPublished: isPublished,\n      hasOrganization: self.hasOrganization\n    });\n\n    this.$('.js-list').append(view.render().el);\n    this.addView(view);\n  },\n\n  _revampPrivacyOptions: function () {\n    var shareOptions = CreateShareOptions(this._visDefinitionModel);\n    this._shareCollection.reset(shareOptions);\n  },\n\n  _initBinds: function () {\n    this._visDefinitionModel.on('sync', this._revampPrivacyOptions, this);\n    this.add_related_model(this._visDefinitionModel);\n\n    this._shareCollection.on('reset', this.render, this);\n    this.add_related_model(this._shareCollection);\n\n    this._mapcapsCollection.on('reset add', this.render, this);\n    this.add_related_model(this._mapcapsCollection);\n  }\n});\n","var Backbone = require('backbone');\nvar ShareModel = require('./share-model');\n\nmodule.exports = Backbone.Collection.extend({\n  model: ShareModel\n});\n","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar Clipboard = require('clipboard');\nvar template = require('./share-item.tpl');\nvar browserDetect = require('builder/helpers/browser-detect');\n\nvar PRIVATE_LABEL_TEMPLATE = _.template(\"<span class='CDB-Text CDB-Size-small is-semibold u-errorTextColor'><%- private %></span>.<br>\")({\n  private: _t('components.modals.publish.share.private')\n});\n\nmodule.exports = CoreView.extend({\n  className: 'Card',\n  tagName: 'li',\n\n  events: {\n    'click .js-change-privacy': '_onChangePrivacyClick'\n  },\n\n  initialize: function (opts) {\n    if (!opts.model) throw new Error('model is required');\n    if (opts.isPublished == null) throw new Error('isPublished is required');\n\n    this._isPublished = opts.isPublished;\n    this._type = this.model.type();\n    this._hasOrganization = opts.hasOrganization;\n    this._title = _t('components.modals.publish.share.' + this._type + '.title');\n\n    if (this.model.isPrivate()) {\n      this._body = _t('components.modals.publish.share.' + this._type + '.private.body', {\n        private: PRIVATE_LABEL_TEMPLATE\n      });\n    } else {\n      this._body = _t('components.modals.publish.share.' + this._type + '.body');\n    }\n\n    this._link = _t('components.modals.publish.share.' + this._type + '.link');\n    this._copy = this._getButtonLabel();\n    this.$el.toggleClass('is-disabled', this.model.isPrivate());\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n    if (!this.model.isPrivate() && this._isPublished) {\n      this._initClipboard();\n    }\n    return this;\n  },\n\n  _getButtonLabel: function () {\n    var browser = browserDetect();\n    var label = _t('components.modals.publish.share.' + this._type + '.copy');\n    if (browser.name === 'Safari') {\n      label = _t('components.modals.publish.share.' + this._type + '.select');\n    }\n\n    return label;\n  },\n\n  getValue: function () {\n    return this.$('.js-input').val();\n  },\n\n  _initViews: function () {\n    var view = template({\n      id: this.cid,\n      isPrivate: this.model.isPrivate(),\n      type: this._type,\n      title: this._title,\n      body: this._body,\n      content: this.model.content(),\n      link: this._link,\n      copy: this._copy,\n      url: this.model.url(),\n      isPublished: this._isPublished\n    });\n\n    this.$el.append(view);\n\n    var iconTemplate = this.model.createIcon();\n    this.$('.js-icon').append(iconTemplate());\n  },\n\n  _initClipboard: function () {\n    if (this._clipboard) {\n      this._clipboard.destroy();\n    }\n\n    var btn = this.$('.js-copy');\n    this._clipboard = new Clipboard(btn.get(0));\n  },\n\n  _onChangePrivacyClick: function (e) {\n    this.killEvent(e);\n    this.options.onChangePrivacy && this.options.onChangePrivacy();\n  },\n\n  clean: function () {\n    this._clipboard && this._clipboard.destroy();\n    CoreView.prototype.clean.call(this);\n  }\n});\n","var Backbone = require('backbone');\n\nmodule.exports = Backbone.Model.extend({\n  createIcon: function () {\n    return this.get('createIcon');\n  },\n\n  type: function () {\n    return this.get('type');\n  },\n\n  content: function () {\n    return this.get('content');\n  },\n\n  url: function () {\n    return this.get('url');\n  },\n\n  isPrivate: function () {\n    return this.get('private');\n  }\n});\n","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar template = require('./share-with.tpl');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'visDefinitionModel',\n  'userModel'\n];\n\nmodule.exports = CoreView.extend({\n  className: 'Share-with u-flex u-alignCenter',\n\n  events: {\n    'click': '_onClick'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this.separationClass = opts.separationClass || '';\n    this.avatarClass = opts.avatarClass || '';\n\n    if (this.options.clickPrivacyAction) {\n      this._clickPrivacyAction = this.options.clickPrivacyAction;\n    }\n\n    this._acl = this._visDefinitionModel.getPermissionModel().acl;\n    this._initBinds();\n  },\n\n  render: function () {\n    var people = this._getPeople();\n\n    this.clearSubViews();\n    this.$el.html(template({\n      avatar: this._userModel.get('avatar_url'),\n      people: people,\n      avatarClass: this.avatarClass,\n      separationClass: this.separationClass,\n      hasAction: !!this._clickPrivacyAction\n    }));\n    this.$el.toggleClass('is-pointer', !!this._clickPrivacyAction);\n\n    return this;\n  },\n\n  _getPeople: function () {\n    var types = this._acl.pluck('type');\n    if (types.indexOf('org') > -1) {\n      return this._userModel.getOrganization().get('user_count') - 1;\n    } else {\n      var users = [];\n\n      // Grab all ids from every group\n      _.each(this._acl.where({type: 'group'}), function (group) {\n        var entity = group.get('entity');\n        Array.prototype.push.apply(users, entity.users.pluck('id'));\n      }, this);\n\n      // Grab all ids from every user\n      _.each(this._acl.where({type: 'user'}), function (group) {\n        var entity = group.get('entity');\n        users.push(entity.get('id'));\n      }, this);\n\n      // remove current user id because it can be part of a group\n      users = _.without(users, this._userModel.id);\n\n      // counts unique ids\n      return _.unique(users).length;\n    }\n  },\n\n  _initBinds: function () {\n    this._acl.on('fetch', this.render, this);\n    this.add_related_model(this._acl);\n  },\n\n  _onClick: function () {\n    this._clickPrivacyAction && this._clickPrivacyAction();\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar PermissionView = require('./share-permission-view');\n\nvar REQUIRED_OPTS = [\n  'collection',\n  'currentUserId',\n  'organization',\n  'hasOrganization',\n  'sharePermissionModel',\n  'isVisualization'\n];\n\nmodule.exports = CoreView.extend({\n  className: 'Share-list',\n\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (opts[item] === undefined) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n\n    // To avoid jumps in rendering when the user gets permission\n    // we sort the collection only the first time\n    this._sortedCollection = this._sortCollection();\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n    return this;\n  },\n\n  _initBinds: function () {\n    this._sharePermissionModel.acl.on('add remove reset change', this.render, this);\n    this.add_related_model(this._sharePermissionModel);\n  },\n\n  _initViews: function () {\n    if (this._hasOrganization) {\n      this._renderOrganization();\n    }\n\n    _.each(this._sortedCollection, this._renderItem, this);\n  },\n\n  _sortCollection: function () {\n    // sharing first\n    var sharing = this._collection.filter(function (model) {\n      var permission = this._sharePermissionModel;\n      var hasWriteAccess = permission.hasWriteAccess(model);\n      var hasReadAccess = permission.hasReadAccess(model);\n      return hasWriteAccess || hasReadAccess;\n    }, this);\n\n    var noSharing = this._collection.filter(function (model) {\n      var permission = this._sharePermissionModel;\n      var hasWriteAccess = permission.hasWriteAccess(model);\n      var hasReadAccess = permission.hasReadAccess(model);\n      return !hasWriteAccess && !hasReadAccess;\n    }, this);\n\n    return sharing.concat(noSharing);\n  },\n\n  _renderOrganization: function () {\n    var self = this;\n    var organization = this._organization;\n    var permission = this._sharePermissionModel;\n    var hasWriteAccessAvailable = !self._isVisualization;\n    var canChangeWriteAccess = permission.canChangeWriteAccess(organization);\n    var hasWriteAccess = permission.hasWriteAccess(organization);\n    var canChangeReadAccess = permission.canChangeReadAccess(organization);\n    var hasReadAccess = permission.hasReadAccess(organization);\n\n    var view = new PermissionView({\n      model: organization,\n      permission: permission,\n      avatar: organization.get('avatar_url'),\n      description: _t('components.modals.publish.share.organization.desc'),\n      name: _t('components.modals.publish.share.organization.title'),\n      canChangeReadAccess: canChangeReadAccess,\n      hasReadAccess: hasReadAccess,\n      hasWriteAccessAvailable: hasWriteAccessAvailable,\n      canChangeWriteAccess: canChangeWriteAccess,\n      hasWriteAccess: hasWriteAccess,\n      isSelected: hasReadAccess || hasWriteAccess\n    });\n\n    this.$el.append(view.render().$el);\n    this.addView(view);\n  },\n\n  _renderItem: function (model) {\n    var self = this;\n    var view;\n    var o = model.get('model');\n    var permission = this._sharePermissionModel;\n    var hasWriteAccessAvailable = !self._isVisualization;\n    var canChangeWriteAccess = permission.canChangeWriteAccess(model);\n    var hasWriteAccess = permission.hasWriteAccess(model);\n    var canChangeReadAccess = permission.canChangeReadAccess(model);\n    var hasReadAccess = permission.hasReadAccess(model);\n    var role = this._getRole(o);\n\n    if (model.id !== this._currentUserId) {\n      view = new PermissionView({\n        model: model,\n        permission: permission,\n        name: model.get('name') || model.get('username'),\n        avatar: model.get('avatar_url'),\n        role: role,\n        users: o.users,\n        canChangeReadAccess: canChangeReadAccess,\n        hasReadAccess: hasReadAccess,\n        hasWriteAccessAvailable: hasWriteAccessAvailable,\n        canChangeWriteAccess: canChangeWriteAccess,\n        hasWriteAccess: hasWriteAccess,\n        isSelected: hasReadAccess || hasWriteAccess\n      });\n\n      this.$el.append(view.render().$el);\n      this.addView(view);\n    }\n  },\n\n  _getRole: function (d) {\n    if (d.viewer !== undefined) {\n      return d.viewer === true ? _t('components.modals.publish.share.role.viewer')\n        : _t('components.modals.publish.share.role.builder');\n    }\n\n    return false;\n  }\n});\n","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar template = require('./share-permission.tpl');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view.js');\nvar $ = require('jquery');\nvar UsersGroup = require('./users-group-view');\n\nvar REQUIRED_OPTS = [\n  'model',\n  'permission',\n  'name',\n  'canChangeReadAccess',\n  'hasReadAccess',\n  'hasWriteAccessAvailable',\n  'canChangeWriteAccess',\n  'hasWriteAccess',\n  'isSelected'\n];\n\nvar OPTIONALS_OPT = [\n  'description',\n  'role',\n  'avatar',\n  'users'\n];\n\nmodule.exports = CoreView.extend({\n  className: 'Share-permission',\n\n  events: {\n    'change .js-read': '_onChangeRead',\n    'change .js-write': '_onChangeWrite',\n    'mouseover .js-toggler.is-disabled': '_onHoverDisabledToggler',\n    'mouseout .js-toggler': '_destroyTooltip',\n    'mouseleave .js-toggler': '_destroyTooltip'\n  },\n\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (opts[item] === undefined) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n\n    _.each(OPTIONALS_OPT, function (item) {\n      this['_' + item] = opts[item];\n    }, this);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template({\n      name: this._name,\n      avatar: this._avatar,\n      role: this._role,\n      users: this._users,\n      description: this._description,\n      canChangeReadAccess: this._canChangeReadAccess,\n      hasReadAccess: this._hasReadAccess,\n      hasWriteAccessAvailable: this._hasWriteAccessAvailable,\n      canChangeWriteAccess: this._canChangeWriteAccess,\n      hasWriteAccess: this._hasWriteAccess\n    }));\n\n    if (this._users) {\n      this._renderUsers();\n    }\n\n    this.$el.toggleClass('is-selected', this._isSelected);\n    return this;\n  },\n\n  _renderUsers: function () {\n    var view = new UsersGroup({\n      className: 'u-flex u-alignCenter',\n      users: this._users\n    });\n\n    this.$('.js-users').append(view.render().el);\n    this.addView(view);\n  },\n\n  _onChangeWrite: function () {\n    var p = this._permission;\n    if (p.canChangeWriteAccess(this._model)) {\n      if (p.hasWriteAccess(this._model)) {\n        p.revokeWriteAccess(this._model);\n      } else {\n        p.grantWriteAccess(this._model);\n      }\n    }\n  },\n\n  _onChangeRead: function () {\n    var p = this._permission;\n    if (p.canChangeReadAccess(this._model)) {\n      if (p.hasReadAccess(this._model)) {\n        p.revokeAccess(this._model);\n      } else {\n        p.grantReadAccess(this._model);\n      }\n    }\n  },\n\n  _onHoverDisabledToggler: function (e) {\n    var aclItem = this._permission.findRepresentableAclItem(this._model);\n    var msg;\n    var $el;\n\n    if (aclItem && !aclItem.isOwn(this._model)) {\n      msg = this._inheritedAccessTooltipText(aclItem);\n      $el = $(e.currentTarget);\n\n      this._tooltip = this._createTooltip({\n        $el: $el,\n        msg: msg\n      });\n      this._tooltip.showTipsy();\n    }\n  },\n\n  _createTooltip: function (opts) {\n    return new TipsyTooltipView({\n      el: opts.$el,\n      title: function () {\n        return opts.msg;\n      }\n    });\n  },\n\n  _destroyTooltip: function () {\n    if (this._tooltip) {\n      this._tooltip.hideTipsy();\n      this._tooltip.destroyTipsy();\n    }\n  },\n\n  _inheritedAccessTooltipText: function (aclItem) {\n    var type = aclItem.get('type');\n\n    switch (type) {\n      case 'group':\n        return _t('components.modals.publish.share.tooltip.group', {\n          name: aclItem.get('entity').get('name')\n        });\n      case 'org':\n        return _t('components.modals.publish.share.tooltip.org');\n      default:\n        console.error('Trying to display inherited access for an unrecognized type ' + type);\n        return '';\n    }\n  }\n\n});\n","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar template = require('./share.tpl');\nvar GrantableCollection = require('builder/data/grantables-collection');\nvar SearchPaginationView = require('builder/components/pagination-search/pagination-search-view');\nvar ListView = require('./share-list-view');\n\nvar REQUIRED_OPTS = [\n  'configModel',\n  'currentUserId',\n  'organization',\n  'visDefinitionModel'\n];\n\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (!opts[item]) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n\n    this._grantablesCollection = new GrantableCollection([], {\n      currentUserId: this._currentUserId,\n      organization: this._organization,\n      configModel: this._configModel\n    });\n\n    this._sharePermissionModel = this._visDefinitionModel.getPermissionModel().clone();\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template({\n      name: this._visDefinitionModel.get('name')\n    }));\n    this._initViews();\n    return this;\n  },\n\n  _initBinds: function () {\n    this._sharePermissionModel.acl.on('add remove reset change', this._onSave, this);\n    this.add_related_model(this._sharePermissionModel.acl);\n  },\n\n  _initViews: function () {\n    var self = this;\n\n    this._searchPaginationView = new SearchPaginationView({\n      className: 'u-inner',\n      listCollection: this._grantablesCollection,\n      createContentView: function (opts) {\n        return new ListView(_.extend({}, opts, {\n          collection: self._grantablesCollection,\n          currentUserId: self._currentUserId,\n          sharePermissionModel: self._sharePermissionModel,\n          organization: self._organization,\n          isVisualization: self._visDefinitionModel.isVisualization()\n        }));\n      }\n    });\n    this.addView(this._searchPaginationView);\n    this.$('.js-body').html(this._searchPaginationView.render().el);\n  },\n\n  _onCancel: function () {\n    this._modalModel.destroy();\n  },\n\n  _onBack: function () {\n    this._modalModel.destroy();\n    this._onBack();\n  },\n\n  _onSave: function () {\n    var permission = this._visDefinitionModel.getPermissionModel();\n    permission.overwriteAcl(this._sharePermissionModel);\n    // Show loading here\n    permission.save()\n      .fail(this._searchPaginationView.showError.bind(this._searchPaginationView));\n  }\n});\n","var $ = require('jquery');\nvar _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar template = require('./user.tpl');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\n\nvar REQUIRED_OPTS = [\n  'username',\n  'avatar'\n];\n\nmodule.exports = CoreView.extend({\n\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (opts[item] === undefined) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template({\n      avatar: this._avatar,\n      username: this._username\n    }));\n\n    this._initViews();\n    return this;\n  },\n\n  _initViews: function () {\n    var tooltip = new TipsyTooltipView({\n      el: this.$('.js-avatar'),\n      title: function () {\n        return $(this).attr('data-title');\n      }\n    });\n\n    this.addView(tooltip);\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar template = require('./users-group.tpl');\nvar UserView = require('./user-view');\n\nvar REQUIRED_OPTS = [\n  'users'\n];\n\nvar MAX_USERS_TO_SHOW = 3;\n\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (!opts[item]) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template({\n      people: this._getRemainsPeople()\n    }));\n    this._renderUsers();\n    return this;\n  },\n\n  _getRemainsPeople: function () {\n    return Math.max(0, this._users.length - MAX_USERS_TO_SHOW);\n  },\n\n  _renderUsers: function () {\n    _.each(this._users.slice(0, MAX_USERS_TO_SHOW), this._renderUser, this);\n  },\n\n  _renderUser: function (user) {\n    var view = new UserView({\n      username: user.username,\n      avatar: user.avatar_url\n    });\n\n    this.$('.js-content').append(view.render().el);\n    this.addView(view);\n  }\n});\n","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar template = require('./upgrade.tpl');\n\nvar CONTACT_LINK_TEMPLATE = _.template(\"<a href='mailto:<%- mail %>'><%- contact %></a>\")({\n  contact: _t('components.modals.publish.privacy.upgrade.contact'),\n  mail: _t('components.modals.publish.privacy.upgrade.mail')\n});\n\nmodule.exports = CoreView.extend({\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n    return this;\n  },\n\n  _initViews: function () {\n    var html = template({\n      title: _t('components.modals.publish.privacy.upgrade.title'),\n      desc: _t('components.modals.publish.privacy.upgrade.desc', {\n        contact: CONTACT_LINK_TEMPLATE\n      })\n    });\n    this.$el.html(html);\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar template = require('./sync-options-modal.tpl');\nvar renderLoading = require('builder/components/loading/render-loading');\nvar ErrorView = require('builder/components/error/error-view');\nvar errorParser = require('builder/helpers/error-parser');\n\nmodule.exports = CoreView.extend({\n  className: 'Dialog-content',\n\n  events: {\n    'click .js-confirm': '_onConfirm',\n    'click .js-cancel': '_onCancel'\n  },\n\n  initialize: function (opts) {\n    if (!opts.modalModel) throw new Error('modalModel is required');\n    if (!opts.syncModel) throw new Error('syncModel is required');\n    if (!opts.tableName) throw new Error('tableName is required');\n\n    this._syncModel = opts.syncModel;\n    this._modalModel = opts.modalModel;\n    this._tableName = opts.tableName;\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(\n      template({\n        interval: this._syncModel.get('interval'),\n        service: this._syncModel.get('service_name') || '',\n        isExternalSource: this._syncModel.get('from_external_source'),\n        url: this._getServiceURL()\n      })\n    );\n  },\n\n  _renderErrorView: function (errorMessage) {\n    var errorView = new ErrorView({\n      title: _t('dataset.sync.error'),\n      desc: errorMessage\n    });\n    this.$el.html(errorView.render().el);\n    this.addView(errorView);\n  },\n\n  _renderLoadingView: function () {\n    this.$el.html(\n      renderLoading({\n        title: _t('dataset.sync.loading', { tableName: this._tableName })\n      })\n    );\n  },\n\n  _getServiceURL: function () {\n    var serviceName = this._syncModel.get('service_name');\n    var serviceItemId = this._syncModel.get('service_item_id');\n    if (serviceName || serviceItemId) {\n      if (serviceName === 'connector') {\n        return this._obfuscatePassword(serviceItemId);\n      }\n      return serviceItemId;\n    }\n    return this._syncModel.get('url');\n  },\n\n  _onConfirm: function () {\n    var interval = parseInt(this.$('[name=\"interval\"]:checked').val(), 10);\n    var opts = {\n      wait: true,\n      success: function () {\n        this._modalModel.destroy();\n      }.bind(this),\n      error: function (mdl, e) {\n        this._renderErrorView(errorParser(e));\n      }.bind(this)\n    };\n\n    this._renderLoadingView();\n\n    if (this._syncModel.get('interval') !== interval) {\n      if (!interval) {\n        this._syncModel.destroy(opts);\n      } else {\n        this._syncModel.save({\n          interval: interval\n        }, opts);\n      }\n    } else {\n      this._modalModel.destroy();\n    }\n  },\n\n  _onCancel: function () {\n    this._modalModel.destroy();\n  },\n\n  _obfuscatePassword: function (text) {\n    var pattern = /\"password\"\\s*:\\s*\"[^\"]*\"/g;\n    return text.replace(pattern, '\"password\":\"******\"');\n  }\n\n});\n","module.exports = ' | CARTO';\n","var template = require('./no-results.tpl');\n\n/**\n * @param {Object} opts\n * @param {String=} opts.icon\n * @param {String=} opts.title\n * @param {String=} opts.desc\n */\n\nmodule.exports = function (opts) {\n  return template({\n    icon: opts.icon || 'CDB-IconFont-cockroach',\n    title: opts.title || '',\n    desc: opts.desc\n  });\n};\n","var CoreView = require('backbone/core-view');\n\nmodule.exports = CoreView.extend({\n  tagName: 'button',\n\n  initialize: function (opts) {\n    if (!opts.template) throw new Error('template is required');\n    if (!opts.editorModel) throw new Error('editorModel is required');\n    this.template = opts.template;\n    this._editorModel = opts.editorModel;\n    this._data = {};\n    if (opts.model) {\n      this._data = opts.model.toJSON();\n    }\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._editorModel, 'change:edition', this._changeStyle);\n    this.add_related_model(this._editorModel);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this.$el.append(this.template(this._data));\n    return this;\n  },\n\n  _changeStyle: function () {\n    this.$('.js-theme').toggleClass('is-white', this._editorModel.isEditing());\n  }\n});\n","var Backbone = require('backbone');\nvar NotifierModel = require('./notifier-model');\n\nmodule.exports = Backbone.Collection.extend({\n  model: function (attrs, opts) {\n    return new NotifierModel(attrs, opts);\n  },\n\n  findById: function (id) {\n    return this.findWhere({id: id});\n  },\n\n  addNotification: function (attrs, options) {\n    var notification = this._findNotificationByAttrs(attrs);\n\n    return notification ? notification.update(attrs) : this.add(attrs, options);\n  },\n\n  _findNotificationByAttrs: function (attrs) {\n    return this.findWhere({ info: attrs.info });\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar Template = require('./notifier-item.tpl');\nvar ActionView = require('./notifier-action-view');\nvar closeTemplate = require('./notifier-close.tpl');\nvar actionTemplate = require('./notifier-action.tpl');\n\nmodule.exports = CoreView.extend({\n  className: 'Notifier-inner',\n  tagName: 'li',\n  events: {\n    'click .js-close': '_closeHandler',\n    'click .js-action': '_actionHandler'\n  },\n\n  initialize: function (opts) {\n    if (!opts.notifierModel) throw new Error('notifierModel is required');\n    if (!opts.editorModel) throw new Error('editorModel is required');\n\n    this._editorModel = opts.editorModel;\n    this.template = this.options.template || Template;\n    this._notifierModel = opts.notifierModel;\n    this.$el.attr('id', this._notifierModel.get('id'));\n\n    this._delay = this._notifierModel.get('delay') || this._notifierModel.get('defaultDelay');\n\n    if (this._notifierModel.get('delay') && this._notifierModel.get('closable') !== false) {\n      this._timeout = setTimeout(this._autoClose.bind(this), this._delay);\n    }\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this._initViews();\n    this._changeStyle();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._notifierModel, 'change', this.render);\n    this.listenTo(this._notifierModel, 'change:status', this._onChangeStatus);\n    this.add_related_model(this._notifierModel);\n\n    this.listenTo(this._editorModel, 'change:edition', this._changeStyle);\n    this.add_related_model(this._editorModel);\n  },\n\n  _initViews: function () {\n    var actionable = this._notifierModel.getButton();\n    var closable = this._notifierModel.isClosable();\n    var view = this.template({\n      status: this._notifierModel.getStatus(),\n      info: this._notifierModel.getInfo(),\n      isActionable: actionable,\n      isClosable: closable\n    });\n\n    this.$el.append(view);\n\n    if (actionable) {\n      this._createActionView(actionable);\n    }\n\n    if (closable) {\n      this._createCloseView();\n    }\n  },\n\n  _createActionView: function (action) {\n    var actionView = new ActionView({\n      template: actionTemplate,\n      className: 'js-action',\n      model: this._notifierModel,\n      editorModel: this._editorModel\n    });\n\n    this.$('.js-actionButton').append(actionView.render().el);\n    this.addView(actionView);\n  },\n\n  _createCloseView: function () {\n    var actionView = new ActionView({\n      template: closeTemplate,\n      className: 'CDB-Shape js-close',\n      editorModel: this._editorModel\n    });\n\n    this.$('.js-closeButton').append(actionView.render().el);\n    this.addView(actionView);\n  },\n\n  _closeHandler: function () {\n    var status = this._notifierModel.getStatus();\n    var action = this._notifierModel.getAction();\n    this._notifierModel.trigger('notification:close', action || status);\n    clearTimeout(this._timeout);\n    if (this._notifierModel && this._notifierModel.collection) {\n      this._notifierModel.collection.remove(this._notifierModel);\n    }\n  },\n\n  _actionHandler: function () {\n    var status = this._notifierModel.getStatus();\n    var action = this._notifierModel.getAction();\n    this._notifierModel.trigger('notification:action', action || status);\n  },\n\n  _changeStyle: function () {\n    this.$('.Notifier-info').toggleClass('u-whiteTextColor', this._editorModel.isEditing());\n    this.$('.Notifier-actions .CDB-Shape-close').toggleClass('is-blue', !this._editorModel.isEditing());\n    this.$('.Notifier-actions .CDB-Shape-close').toggleClass('is-white', this._editorModel.isEditing());\n  },\n\n  _autoClose: function () {\n    this._notifierModel.set({action: 'autoclose'}, {silent: true});\n    this._closeHandler();\n  },\n\n  _onChangeStatus: function (model, status) {\n    if ((status === 'success' || status === 'error') && this._notifierModel.get('closable') !== false && this._notifierModel.get('autoclosable') !== false) {\n      this._timeout = setTimeout(this._autoClose.bind(this), this._delay);\n    }\n  }\n});\n","var Backbone = require('backbone');\n\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    status: 'idle',\n    info: '',\n    closable: true\n  },\n\n  initialize: function (attrs, opts) {\n    if (attrs.id === undefined) {\n      this.set('id', 'notifier' + this.cid);\n    }\n\n    this.set('defaultDelay', opts.delay);\n\n    if (opts.visDefinitionModel) {\n      this._retriggerEvent(opts.visDefinitionModel, 'vis:reload');\n      this._retriggerEvent(opts.visDefinitionModel, 'vis:error');\n    }\n  },\n\n  isClosable: function () {\n    return this.get('closable') === true;\n  },\n\n  updateClosable: function (val) {\n    this.set({closable: val});\n  },\n\n  getButton: function () {\n    return this.get('button');\n  },\n\n  updateButton: function (val) {\n    this.set({button: val});\n  },\n\n  getStatus: function () {\n    return this.get('status');\n  },\n\n  updateStatus: function (val) {\n    this.set({status: val});\n  },\n\n  getInfo: function () {\n    return this.get('info');\n  },\n\n  getAction: function () {\n    return this.get('action');\n  },\n\n  setAction: function (val) {\n    this.set({action: val});\n  },\n\n  updateInfo: function (val) {\n    this.set({info: val});\n  },\n\n  update: function (state) {\n    this.set(state);\n  },\n\n  _retriggerEvent: function (model, event) {\n    model.on(event, function () {\n      this.trigger(event, arguments);\n    }, this);\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar NotifierItemView = require('./notifier-item-view');\nvar template = require('./notifier.tpl');\n\nmodule.exports = CoreView.extend({\n  className: 'Notifier',\n\n  initialize: function (opts) {\n    if (!opts.collection) throw new Error('collection is mandatory');\n    if (!opts.editorModel) throw new Error('editorModel is mandatory');\n\n    this._editorModel = opts.editorModel;\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template());\n    this._renderAllSubviews();\n    this._renderLoading();\n    return this;\n  },\n\n  rebindEvents: function () {\n    // Just in case\n    this.stopListening(this.collection);\n    this.stopListening(this._editorModel);\n    this._initBinds();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.collection, 'reset update change:status', this.render);\n    this.add_related_model(this.collection);\n\n    this.listenTo(this._editorModel, 'change:edition', this._changeStyle);\n    this.add_related_model(this._editorModel);\n  },\n\n  _renderAllSubviews: function () {\n    this.collection.each(this._renderSubview, this);\n  },\n\n  _renderSubview: function (model) {\n    var view = new NotifierItemView({\n      notifierModel: model,\n      editorModel: this._editorModel\n    });\n\n    var status = model.get('status');\n    var container = (status === 'success' || status === 'error')\n      ? this._getDoneContainer()\n      : this._getLoadingContainer();\n    container.append(view.render().el);\n    this.addView(view);\n  },\n\n  _removeSubview: function (model) {\n    var id = model.get('id');\n    var view = _.first(_.filter(this._subviews, function (subview) {\n      return subview._notifierModel.get('id') === id;\n    }));\n\n    if (view) {\n      this.removeView(view);\n      view.remove();\n    }\n  },\n\n  _renderLoading: function () {\n    this._getLoader().toggleClass('is-visible', this._anyNotificationLoading());\n  },\n\n  _anyNotificationLoading: function () {\n    return this.collection.any(function (model) {\n      return !_.contains(['success', 'error', 'warning'], model.get('status'));\n    });\n  },\n\n  _changeStyle: function () {\n    this.$el.toggleClass('is-dark', this._editorModel.isEditing());\n  },\n\n  _getDoneContainer: function () {\n    return this.$('.js-status-done');\n  },\n\n  _getLoadingContainer: function () {\n    return this.$('.js-status-loading');\n  },\n\n  _getLoader: function () {\n    return this.$('.js-loader');\n  }\n});\n","var NotifierView = require('./notifier-view');\nvar NotifierCollection = require('./notifier-collection');\n\nvar manager = (function () {\n  var initialized = false;\n  var notifierView;\n  var collection = new NotifierCollection();\n  var editorModel;\n\n  function init (opts) {\n    if (!editorModel && !opts) {\n      throw new Error('editorModel is required');\n    }\n\n    if (!editorModel && opts && opts.editorModel) {\n      editorModel = opts.editorModel;\n    }\n\n    initialized = true;\n    notifierView = new NotifierView({\n      collection: collection,\n      editorModel: editorModel\n    });\n  }\n\n  return {\n    DEFAULT_DELAY: 5000,\n    init: function (opts) {\n      if (opts.visDefinitionModel) {\n        this._visDefinitionModel = opts.visDefinitionModel;\n      }\n      init(opts);\n    },\n\n    // For testing porposes only\n    off: function () {\n      if (__ENV__ === 'test') {\n        collection.reset();\n        initialized = false;\n        notifierView.remove();\n        notifierView = null;\n      }\n    },\n\n    getView: function () {\n      if (!initialized) init();\n      return notifierView.rebindEvents();\n    },\n\n    getCollection: function () {\n      return collection;\n    },\n\n    getCount: function () {\n      return collection.size();\n    },\n\n    getNotification: function (model) {\n      return typeof model === 'string'\n        ? collection.findById(model)\n        : collection.findById(model.id);\n    },\n\n    addNotification: function (attrs) {\n      return collection.addNotification(attrs, {\n        visDefinitionModel: this._visDefinitionModel,\n        delay: this.DEFAULT_DELAY\n      });\n    },\n\n    removeNotification: function (model) {\n      var notification = typeof model === 'string'\n        ? collection.findById(model)\n        : collection.findById(model.id);\n\n      return collection.remove(notification);\n    }\n  };\n})();\n\nmodule.exports = manager;\n","var Backbone = require('backbone');\n\n/**\n * Model representing the query string params for a \"paged search\" of a collection (matching the server-side APIs).\n *\n * @example usage\n *   pagedSearch = new PaginationSearchModel({  })\n *   pagedSearch.fetch(collection) // => jqXHR, GET /collection/123?page=1&per_page20\n *   pagedSearch.set({ page: 2, per_page: 10, q: 'test' });\n *   pagedSearch.fetch(collection) // => GET /collection/123?page=2&per_page10&q=test\n */\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    per_page: 20,\n    page: 1,\n    q: ''\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.collection) throw new Error('collection is required');\n    if (!opts.collection.totalCount) throw new Error('collection requires to implement totalCount method');\n\n    this.collection = opts.collection;\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.collection.on('sync', this._updateStateFetched, this);\n    this.collection.on('error', this._updateStateError, this);\n  },\n\n  fetch: function () {\n    this.trigger('fetching', this);\n    return this.collection.fetch({\n      data: this.attributes\n    }, {reset: true});\n  },\n\n  _updateStateFetched: function () {\n    this.trigger('fetched', this);\n  },\n\n  _updateStateError: function () {\n    this.trigger('error', this);\n  }\n});\n","var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar PaginationModel = require('builder/components/pagination/pagination-model');\nvar PaginationSearchModel = require('./pagination-search-model');\nvar renderLoading = require('builder/components/loading/render-loading');\nvar renderNoResults = require('builder/components/no-results/render-no-results');\nvar ErrorView = require('builder/components/error/error-view');\nvar template = require('./pagination-search.tpl');\nvar Utils = require('builder/helpers/utils');\nvar PaginationView = require('builder/components/pagination/pagination-view');\nvar paginationTemplate = require('./pagination.tpl');\n\n/**\n * View to render a searchable/pageable collection.\n * Also allows to filter/search list.\n *\n */\n\nvar REQUIRED_OPTS = [\n  'listCollection',\n  'createContentView'\n];\n\nvar ENTER_KEY_CODE = 13;\nvar ESCAPE_KEY_CODE = 27;\n\nmodule.exports = CoreView.extend({\n\n  events: {\n    'click .js-search-link': '_onSearchClick',\n    'click .js-clean-search': '_onCleanSearchClick',\n    'keydown .js-search-input': '_onKeyDown'\n  },\n\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (opts[item] === undefined) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n\n    this._paginationModel = new PaginationModel({\n      current_page: 1\n    });\n\n    this._paginationSearchModel = new PaginationSearchModel({}, {\n      collection: this._listCollection\n    });\n\n    this._stateModel = new Backbone.Model({\n      state: 'idle'\n    });\n\n    this._initBinds();\n    this._initPagination();\n    this._paginationSearchModel.fetch();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template({\n      q: this._paginationSearchModel.get('q')\n    }));\n    this._initViews();\n    return this;\n  },\n\n  _initBinds: function () {\n    this._paginationSearchModel.on('fetching', this.showLoading, this);\n    this._paginationSearchModel.on('fetched', this._updateStateFetched, this);\n    this._paginationSearchModel.on('error', this.showError, this);\n\n    this._paginationModel.bind('change:current_page', this._fetchByPagination, this);\n\n    this._stateModel.on('change:state', this.render, this);\n\n    this.add_related_model(this._paginationModel);\n    this.add_related_model(this._stateModel);\n    this.add_related_model(this._stateModel);\n  },\n\n  _fetchByPagination: function () {\n    this._paginationSearchModel.set('page', this._paginationModel.get('current_page'));\n    this._paginationSearchModel.fetch();\n  },\n\n  showError: function () {\n    this._stateModel.set('state', 'error');\n  },\n\n  showLoading: function () {\n    this._stateModel.set('state', 'loading');\n  },\n\n  _updateStateFetched: function () {\n    this._paginationModel.set({\n      per_page: this._paginationSearchModel.get('per_page'),\n      total_count: this._listCollection.totalCount()\n    });\n    if (this._listCollection.length > 0) {\n      this._stateModel.set('state', 'show');\n    } else {\n      this._stateModel.set('state', 'no-results');\n    }\n  },\n\n  _initPagination: function () {\n    this._paginationView = new PaginationView({\n      className: 'Pagination Pagination--search Pagination--searchShare',\n      model: this._paginationModel,\n      template: paginationTemplate\n    });\n    this.addView(this._paginationView);\n  },\n\n  _initViews: function () {\n    var state = this._stateModel.get('state');\n    var view;\n\n    this.$el.append(this._paginationView.render().el);\n\n    if (state === 'loading') {\n      this._content().html(renderLoading({\n        title: _t('components.pagination-search.loading.title')\n      }));\n    }\n\n    if (state === 'error') {\n      var errorView = new ErrorView({\n        title: _t('components.pagination-search.error.title'),\n        desc: _t('components.pagination-search.error.desc')\n      });\n      this._content().html(errorView.render().el);\n      this.addView(errorView);\n    }\n\n    if (state === 'show') {\n      view = this._createContentView({\n        hasOrganization: this._paginationSearchModel.get('q') === ''\n      });\n      this._content().html(view.render().el);\n      this.addView(view);\n    }\n\n    if (state === 'no-results') {\n      this._content().html(renderNoResults({\n        icon: 'CDB-IconFont-defaultUser',\n        title: _t('components.pagination-search.no-results.title'),\n        desc: _t('components.pagination-search.no-results.desc')\n      }));\n    }\n  },\n\n  _focusSearchInput: function () {\n    this._searchInput().focus().val();\n  },\n\n  _onSearchClick: function (e) {\n    this.killEvent(e);\n    this._searchInput().focus();\n  },\n\n  _onCleanSearchClick: function (e) {\n    this.killEvent(e);\n    this._cleanSearch();\n  },\n\n  _onKeyDown: function (e) {\n    if (e.which === ENTER_KEY_CODE) {\n      this.killEvent(e);\n      this._submitSearch();\n    } else if (e.which === ESCAPE_KEY_CODE) {\n      if (this._paginationSearchModel.get('q')) {\n        this.killEvent(e);\n        this._cleanSearch();\n      }\n    }\n  },\n\n  _submitSearch: function (e) {\n    this._makeNewSearch(Utils.stripHTML(this._searchInput().val().trim()));\n  },\n\n  _cleanSearch: function () {\n    this._searchInput().val('');\n    this._makeNewSearch('');\n  },\n\n  _makeNewSearch: function (query) {\n    this._paginationSearchModel.set({\n      q: query,\n      page: 1\n    });\n\n    this._paginationSearchModel.fetch();\n  },\n\n  _searchInput: function () {\n    return this.$('.js-search-input');\n  },\n\n  _cleanSearchBtn: function () {\n    return this.$('.js-clean-search');\n  },\n\n  _content: function () {\n    return this.$('.js-content');\n  }\n\n});\n","var Backbone = require('backbone');\nvar _ = require('underscore');\n\n/**\n * View model intended to be responsible for pagination logic, and to be used in conjunction with a Pagination view.\n */\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    total_count: 0,\n    per_page: 10,\n    current_page: 1,\n    display_count: 5,\n    extras_display_count: 1,\n    url_to: undefined\n  },\n\n  pagesCount: function () {\n    return Math.max(\n      Math.ceil(\n        this.get('total_count') / this.get('per_page')\n      ), 1);\n  },\n\n  isCurrentPage: function (page) {\n    return this.get('current_page') === page;\n  },\n\n  shouldBeVisible: function () {\n    var pagesCount = this.pagesCount();\n    return this.get('total_count') > 0 && pagesCount > 1 && this.get('current_page') <= pagesCount;\n  },\n\n  urlTo: function (page) {\n    if (this.hasUrl()) {\n      return this.get('url_to')(page);\n    }\n  },\n\n  hasUrl: function () {\n    return typeof this.get('url_to') === 'function';\n  },\n\n  /**\n   * Get the pages that are expected to be displayed.\n   * The current page will be in the middle of the returned sequence.\n   *\n   * @returns {number[]} a sequence of Numbers\n   */\n  pagesToDisplay: function () {\n    var rangeStart;\n\n    if (this._inLowRange()) {\n      rangeStart = 1;\n    } else if (this._inHighRange()) {\n      rangeStart = this.get('current_page') - this._startOffset();\n    } else {\n      // Somewhere between the low and high boundary\n      rangeStart = this.pagesCount() - this.get('display_count') + 1;\n    }\n    rangeStart = Math.max(rangeStart, 1);\n\n    return this._withExtraPages(\n      _.range(rangeStart, this._rangeEnd(rangeStart))\n    );\n  },\n\n  _withExtraPages: function (pagesRelativeToCurrentPage) {\n    var lastPage = this.pagesCount();\n    var extraCount = this.get('extras_display_count');\n    var extraStartPages = _.range(1, extraCount + 1);\n    var extraEndPages = _.range(lastPage - extraCount + 1, lastPage + 1);\n\n    var startPagesDiff = pagesRelativeToCurrentPage[0] - extraStartPages.slice(-1)[0];\n    if (startPagesDiff === 2) {\n      // There is only one missing page in the gap, so add it\n      extraStartPages.push(pagesRelativeToCurrentPage[0] - 1);\n    } else if (startPagesDiff > 2) {\n      // There are more hidden pages at low range, add padding at end\n      extraStartPages.push(-1);\n    }\n\n    var endPagesDiff = extraEndPages[0] - pagesRelativeToCurrentPage.slice(-1);\n    if (endPagesDiff === 2) {\n      // There is only one missing page in the gap, so add it\n      extraEndPages.unshift(extraEndPages[0] - 1);\n    } if (endPagesDiff > 2) {\n      // There are more hidden pages at high range, add padding at beginning\n      extraEndPages.unshift(-2);\n    }\n\n    return _.union(extraStartPages, pagesRelativeToCurrentPage, extraEndPages);\n  },\n\n  _inLowRange: function () {\n    return this.get('current_page') < this._startOffset();\n  },\n\n  _inHighRange: function () {\n    return this.get('current_page') < this._highBoundary();\n  },\n\n  _highBoundary: function () {\n    return this.pagesCount() - this._startOffset();\n  },\n\n  _startOffset: function () {\n    return Math.floor(this.get('display_count') / 2);\n  },\n\n  _rangeEnd: function (rangeStart) {\n    // If we are too close to the range end then cap to the pages count.\n    return Math.min(rangeStart + this.get('display_count'), this.pagesCount() + 1);\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar $ = require('jquery');\nvar navigateThroughRouter = require('builder/helpers/navigate-through-router');\nvar template = require('./pagination.tpl');\n\n/**\n * Responsible for pagination.\n *\n * Expected to be created with a pagination model, see the model for available params, here we create w/ the minimum:\n *   new PaginationView({\n *     model: new PaginationModel({\n *       // Compulsory:\n *       urlTo:  function(page) { return '/?page='+ page },\n\n         // Optional, to router clicks on <a> tags through router.navigate by default\n *       routerModel: new Router(...)\n *     })\n *   });\n */\nmodule.exports = CoreView.extend({\n  className: 'Pagination',\n\n  events: {\n    'click .js-listItem': '_paginate'\n  },\n\n  initialize: function (opts) {\n    this._routerModel = opts.routerModel; // Optional\n\n    if (this.router && !this.model.hasUrl()) {\n      throw new Error('since router is set the model must have a url method set too');\n    }\n\n    this.template = opts.template || template;\n    this.model.bind('change', this.render, this);\n  },\n\n  render: function () {\n    if (this.model.shouldBeVisible()) {\n      this.$el.html(\n        this.template({\n          m: this.model,\n          pagesCount: this.model.pagesCount(),\n          currentPage: this.model.get('current_page')\n        })\n      );\n      this.$el.addClass(this.className);\n      this.delegateEvents();\n    } else {\n      this.$el.html('');\n    }\n\n    return this;\n  },\n\n  _paginate: function (ev) {\n    if (this._routerModel) {\n      navigateThroughRouter.apply(this, arguments);\n    } else if (!this.model.hasUrl()) {\n      this.killEvent(ev);\n    }\n\n    var page = $(ev.target).data('page');\n    this.model.set('current_page', page);\n  }\n});\n","var _ = require('underscore');\nvar $ = require('jquery');\n\nvar MutationObserver = window.MutationObserver;\n\nvar MARGINS = {\n  top: 8,\n  bottom: 8\n};\n\nvar initObserver = function (popup, onChangeMutation) {\n  var config = {\n    childList: true,\n    subtree: true\n  };\n\n  if (!MutationObserver) {\n    return;\n  }\n\n  var observer = new MutationObserver(onChangeMutation);\n  observer.observe(popup.get ? popup.get(0) : popup, config);\n  return observer;\n};\n\nvar initScroll = function (reference) {\n  return reference.closest('.js-perfect-scroll');\n};\n\nvar Manager = function (id, reference, popup) {\n  this.id = id;\n  this.reference = reference;\n  this.popup = popup;\n  this.state = {\n    position: 'bottom',\n    scroll: 0\n  };\n\n  // to capture click events and avoid close the dialog\n  popup.attr('data-cid', id);\n  popup.attr('data-dialog', id);\n};\n\nManager.prototype = {\n  append: function (mode) {\n    this.mode = mode;\n    var popup = this.popup.get(0);\n    var ref = this.reference.get(0);\n    if (mode === 'float') {\n      document.body.appendChild(popup);\n    } else {\n      ref.appendChild(popup);\n    }\n  },\n\n  track: function () {\n    if (this.mode !== 'float') {\n      return;\n    }\n\n    // we need to watch when the dialog's height changes in order to reposition it again\n    this.observer = initObserver(this.popup, this.onChangeMutation.bind(this));\n    this.emitter = initScroll(this.reference);\n    this.repositionBinded = _.throttle(this.reposition.bind(this), 15);\n\n    if (this.emitter) {\n      this.emitter\n        .on('ps-scroll-x', this.repositionBinded)\n        .on('ps-scroll-y', this.repositionBinded);\n    }\n\n    this.reposition();\n  },\n\n  onChangeMutation: function (mutations) {\n    _.each(mutations, function (mutation) {\n      var target = $(mutation.target);\n      var id = target.attr('data-cid');\n\n      if (!id) {\n        id = target.closest('[data-cid]').attr('data-cid');\n      }\n\n      if (id === this.id) {\n        this.repositionBinded();\n      }\n    }, this);\n  },\n\n  reposition: function () {\n    if (this.mode !== 'float' || !this.emitter) {\n      return;\n    }\n\n    var scroll = this.emitter.get(0).scrollTop;\n\n    var dh = $(window).height();\n    var ref = this.reference;\n    var popup = this.popup;\n    var state = this.state;\n\n    var refPosition = ref.offset();\n    var ph = popup.outerHeight();\n\n    var onBottom = refPosition.top + ref.outerHeight() + MARGINS.top;\n    var onTop = refPosition.top - ph - MARGINS.bottom;\n    var top;\n\n    // If this condition matches, the dialog has changed its size\n    if (state.scroll === scroll) {\n      // We maintain position unless there is no space\n      if (state.position === 'top') {\n        if (onTop <= 0) {\n          top = onBottom;\n          state.position = 'bottom';\n        } else {\n          top = onTop;\n        }\n      } else {\n        if (onBottom + ph + MARGINS.bottom >= dh) {\n          top = onTop;\n          state.position = 'top';\n        } else {\n          top = onBottom;\n        }\n      }\n    } else {\n      if (onBottom + ph + MARGINS.bottom >= dh) {\n        top = onTop;\n        state.position = 'top';\n      } else {\n        top = onBottom;\n        state.position = 'bottom';\n      }\n    }\n\n    // Boundries come from document height to avoid scroll\n    if (top < 0) {\n      top = MARGINS.top;\n    } else {\n      top = Math.min(top, dh - ph - MARGINS.bottom);\n    }\n\n    popup.css({\n      top: top,\n      left: refPosition.left\n    });\n\n    state.scroll = scroll;\n  },\n\n  untrack: function () {\n    this.observer && this.observer.disconnect();\n    if (this.emitter) {\n      this.emitter\n        .off('ps-scroll-x', this.repositionBinded)\n        .off('ps-scroll-y', this.repositionBinded);\n    }\n  },\n\n  destroy: function () {\n    this.untrack();\n\n    var el = document.querySelector('[data-dialog=' + this.id + ']');\n    if (el) {\n      el.parentNode.removeChild(el);\n    }\n\n    this.emitter = null;\n    this.reference = null;\n    this.popup = null;\n  }\n};\n\nmodule.exports = Manager;\n","var CoreView = require('backbone/core-view');\nvar template = require('./password-dialog.tpl');\nvar _ = require('underscore');\n\nvar REQUIRED_OPTS = [\n  'onBack',\n  'onEdit'\n];\n\nvar ESCAPE_KEY_CODE = 27;\nvar ENTER_KEY_CODE = 13;\n\nmodule.exports = CoreView.extend({\n  className: 'Editor-boxModal Editor-PrivacyDialog',\n\n  events: {\n    'click .js-back': '_onClickBack',\n    'keyup .js-input': '_onKeyUpInput'\n  },\n\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (opts[item] === undefined) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n  },\n\n  render: function () {\n    this.$el.empty();\n    this.$el.html(template());\n    return this;\n  },\n\n  _onKeyUpInput: function (e) {\n    if (e.which === ESCAPE_KEY_CODE) {\n      this._onBack();\n    }\n\n    if (e.which === ENTER_KEY_CODE) {\n      this._onEdit && this._onEdit(this.getValue());\n    }\n  },\n\n  _onClickBack: function () {\n    this._onBack();\n  },\n\n  getValue: function () {\n    return this.$('.js-input').val();\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar CustomListView = require('builder/components/custom-list/custom-list-view');\nvar CustomListItemView = require('builder/components/custom-list/custom-list-item-view');\nvar privacyCTATemplate = require('./privacy-cta.tpl');\nvar _ = require('underscore');\n\nvar REQUIRED_OPTS = [\n  'model',\n  'collection',\n  'userModel',\n  'configModel'\n];\n\nmodule.exports = CoreView.extend({\n  className: 'Editor-boxModal Privacy-dialog',\n\n  initialize: function (opts) {\n    _.each(REQUIRED_OPTS, function (item) {\n      if (opts[item] === undefined) throw new Error(item + ' is required');\n      this['_' + item] = opts[item];\n    }, this);\n  },\n\n  render: function () {\n    this.$el.empty();\n    this.clearSubViews();\n    this._renderList();\n    return this;\n  },\n\n  _renderList: function () {\n    var disabledOptions = this._collection.where({ disabled: true });\n    var customInstall = this._configModel.get('cartodb_com_hosted');\n    var upgradeURL = this._configModel.get('upgrade_url');\n\n    var listView = new CustomListView({\n      model: this._model,\n      collection: this._collection,\n      itemView: CustomListItemView\n    });\n    this.$el.append(listView.render().el);\n    this.addView(listView);\n\n    if (disabledOptions.length > 0 && !customInstall && upgradeURL) {\n      this.$el.append(\n        privacyCTATemplate({\n          upgradeURL: upgradeURL,\n          showTrial: this._userModel.canStartTrial()\n        })\n      );\n    }\n  }\n});\n","var $ = require('jquery');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar PrivacyDialogView = require('./privacy-dialog-view');\nvar PrivacyWarningView = require('builder/components/modals/privacy-warning/privacy-warning-view');\nvar PasswordDialogView = require('./password-dialog-view');\nvar TabPaneView = require('builder/components/tab-pane/tab-pane-view');\nvar TabPaneCollection = require('builder/components/tab-pane/tab-pane-collection');\nvar CustomListCollection = require('builder/components/custom-list/custom-list-collection');\nvar ModalsServiceModel = require('builder/components/modals/modals-service-model');\nvar template = require('./privacy-dropdown.tpl');\nvar templateTabPane = require('./tab-pane.tpl');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\nvar VisDefinitionModel = require('builder/data/vis-definition-model');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar ErrorDetailsView = require('builder/components/background-importer/error-details-view');\n\nvar ESCAPE_KEY_CODE = 27;\n\nvar REQUIRED_OPTS = [\n  'visDefinitionModel',\n  'userModel',\n  'privacyCollection',\n  'configModel',\n  'isOwner'\n];\n\nvar PRIVACY_MAP = {\n  public: 'green',\n  link: 'orange',\n  password: 'orange-dark',\n  private: 'red'\n};\n\nmodule.exports = CoreView.extend({\n\n  events: {\n    'click .js-toggle': '_onToggleDialogClicked'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    if (this._visDefinitionModel.isVisualization() && !this.options.mapcapsCollection) {\n      throw new Error('mapcapsCollection is required for visualizations');\n    }\n\n    this._triggerElementID = 'toggle' + this.cid;\n\n    this._modals = new ModalsServiceModel();\n    this.model = new Backbone.Model({\n      privacy: opts.visDefinitionModel.get('privacy'),\n      state: 'show'\n    });\n\n    this._onEscapePressed = this._onEscapePressed.bind(this);\n    this._onDocumentElementClicked = this._onDocumentElementClicked.bind(this);\n\n    if (this.options.ownerName) {\n      this._ownerName = this.options.ownerName;\n    }\n\n    if (this.options.mapcapsCollection) {\n      this._mapcapsCollection = this.options.mapcapsCollection;\n    }\n\n    this._configPrivacyCollection();\n    this._configPanes();\n    this._initBinds();\n  },\n\n  render: function () {\n    var privacy = this.model.get('privacy');\n    if (this.model.get('state') === 'error') {\n      privacy = this.options.visDefinitionModel.get('privacy');\n    }\n    var cssClass = PRIVACY_MAP[privacy.toLowerCase()];\n    var canChangePrivacy = this._canChangePrivacy(privacy);\n\n    this.clearSubViews();\n    this._hideDialog();\n    this.$el.html(template({\n      privacy: privacy,\n      cssClass: cssClass,\n      isLoading: this.model.get('state') === 'loading',\n      isOwner: this._isOwner,\n      canChangePrivacy: canChangePrivacy\n    }));\n    this._initViews();\n    return this;\n  },\n\n  _canChangePrivacy: function (privacy) {\n    var isIndividualUser = this.options.userModel.isIndividualUser();\n    var isMap = this.options.visDefinitionModel.isVisualization();\n    var hasRemainingPublicMaps = this.options.userModel.hasRemainingPublicMaps();\n    if (isIndividualUser && isMap && !hasRemainingPublicMaps && privacy === 'PRIVATE') {\n      return false;\n    }\n    return true;\n  },\n\n  _initBinds: function () {\n    this._customCollection.on('change:selected', function (menuItem) {\n      if (menuItem.get('disabled')) {\n        return;\n      }\n\n      if (menuItem.get('val') === 'password') {\n        this._showPasswordDialog();\n      } else {\n        this._onToggleDialogClicked();\n        this._setPrivacy(menuItem.get('val'));\n      }\n    }, this);\n\n    this.add_related_model(this._customCollection);\n\n    this.model.on('change:state', this.render, this);\n    this.add_related_model(this.model); // explicit\n  },\n\n  _makePrivacyDialog: function () {\n    return new PrivacyDialogView({\n      model: this.model,\n      collection: this._customCollection,\n      userModel: this._userModel,\n      configModel: this._configModel\n    });\n  },\n\n  _makePasswordDialog: function () {\n    return new PasswordDialogView({\n      onBack: this._showPrivacyDialog.bind(this),\n      onEdit: this._setPassword.bind(this)\n    });\n  },\n\n  _setPassword: function (password) {\n    if (password !== '') {\n      this._privacyCollection.passwordOption().set({\n        password: password\n      });\n\n      this.model.set({ password: password });\n      this._setPrivacy('password');\n    }\n  },\n\n  _setPrivacy: function (privacyStatus) {\n    var newPrivacyStatus = privacyStatus.toUpperCase();\n\n    this.model.set(\n      { privacy: newPrivacyStatus },\n      { silent: true }\n    );\n\n    if (this._shouldShowPrivacyWarning(newPrivacyStatus)) {\n      this._checkPrivacyChange(\n        newPrivacyStatus,\n        this._savePrivacy.bind(this),\n        this._discardPrivacyChange.bind(this)\n      );\n    } else {\n      this._savePrivacy();\n    }\n  },\n\n  _savePrivacy: function () {\n    var self = this;\n    var vis = this._visDefinitionModel;\n\n    this.model.set({ state: 'loading' });\n\n    this._privacyCollection.searchByPrivacy(this.model.get('privacy'))\n      .saveToVis(vis, {\n        success: function () {\n          self.model.set({state: 'show'});\n        },\n        error: function (req, resp) {\n          if (resp.responseText.indexOf('over account public map quota') !== -1) {\n            self._modals.create(function () {\n              return new ErrorDetailsView({\n                error: { errorCode: 8007 },\n                userModel: self._userModel,\n                configModel: self._configModel\n              });\n            });\n          }\n          self.model.set({state: 'error'});\n        }\n      });\n  },\n\n  _checkPrivacyChange: function (newPrivacyStatus, confirmCallback, dismissCallback) {\n    var self = this;\n\n    this._modals.create(function (modalModel) {\n      return new PrivacyWarningView({\n        modalModel: modalModel,\n        privacyType: newPrivacyStatus,\n        type: self._visDefinitionModel.isVisualization() ? 'visualization' : 'dataset',\n        onConfirm: confirmCallback,\n        onDismiss: dismissCallback\n      });\n    });\n  },\n\n  _discardPrivacyChange: function () {\n    var previousPrivacy = this.model.previous('privacy');\n\n    this.model.set('privacy', previousPrivacy, { silent: true });\n    this.model.set('state', 'show');\n  },\n\n  _shouldShowPrivacyWarning: function (privacyStatus) {\n    if (!this._userModel.canSelectPremiumOptions(this._visDefinitionModel)) {\n      return false;\n    }\n\n    var isPubliclyAvailable = VisDefinitionModel.isPubliclyAvailable(privacyStatus);\n\n    if (this._visDefinitionModel.isVisualization()) {\n      return !!this._mapcapsCollection.length && isPubliclyAvailable;\n    }\n\n    return isPubliclyAvailable;\n  },\n\n  _transformPrivacyOptions: function () {\n    return this._privacyCollection.map(function (item) {\n      return {\n        label: item.get('title'),\n        val: item.get('privacy').toLowerCase(),\n        disabled: item.get('disabled'),\n        selected: item.get('selected'),\n        renderOptions: {\n          cssClass: item.get('cssClass')\n        }\n      };\n    }).filter(Boolean);\n  },\n\n  _configPrivacyCollection: function () {\n    var models = this._transformPrivacyOptions();\n    this._customCollection = new CustomListCollection(models);\n  },\n\n  _configPanes: function () {\n    var self = this;\n    var tabPaneTabs = [{\n      createContentView: self._showNoneDialog\n    }, {\n      createContentView: self._makePrivacyDialog.bind(self)\n    }, {\n      createContentView: self._makePasswordDialog.bind(self)\n    }];\n\n    this._collectionPane = new TabPaneCollection(tabPaneTabs);\n  },\n\n  _showNoneDialog: function () {\n    return false;\n  },\n\n  _showPasswordDialog: function () {\n    this._collectionPane.at(2).set({selected: true});\n  },\n\n  _showPrivacyDialog: function () {\n    this._customCollection.each(function (m) {\n      m.set({selected: false}, {silent: true});\n    });\n\n    this._collectionPane.at(1).set({selected: true});\n  },\n\n  _onToggleDialogClicked: function () {\n    if (this._isDialogVisible()) {\n      this._hideDialog();\n    } else {\n      this._onMouseClick();\n      this._initDocumentBinds();\n      this._showPrivacyDialog();\n    }\n  },\n\n  _isDialogVisible: function () {\n    return this._collectionPane.at(0).get('selected') === false;\n  },\n\n  _hideDialog: function () {\n    this._destroyDocumentBinds();\n    this._collectionPane.at(0).set({selected: true});\n  },\n\n  _showDialog: function () {\n    this._showPrivacyDialog();\n  },\n\n  _initViews: function () {\n    var view = new TabPaneView({\n      collection: this._collectionPane,\n      template: templateTabPane,\n      mouseOverAction: this._onMouseClick.bind(this)\n    });\n    this.$('.js-dialog').append(view.render().$el);\n    this.addView(view);\n\n    this._privacyTooltip = new TipsyTooltipView({\n      el: this.$('.js-tooltip'),\n      gravity: 'w',\n      html: true,\n      title: function () {\n        return this._getPrivacyInfo();\n      }.bind(this)\n    });\n    this.addView(this._privacyTooltip);\n  },\n\n  _getPrivacyInfo: function () {\n    var privacyInfo = _t('change-privacy');\n\n    if (this._ownerName) {\n      privacyInfo = _t('dataset.privacy.info', { name: this._ownerName });\n    }\n\n    return privacyInfo;\n  },\n\n  _initDocumentBinds: function () {\n    $(document).on('keydown', this._onEscapePressed);\n    $(document).on('mousedown', this._onDocumentElementClicked);\n  },\n\n  _destroyDocumentBinds: function () {\n    $(document).off('keydown', this._onEscapePressed);\n    $(document).off('mousedown', this._onDocumentElementClicked);\n  },\n\n  _onEscapePressed: function (ev) {\n    if (ev.which === ESCAPE_KEY_CODE) {\n      this._hideDialog();\n    }\n  },\n\n  _onDocumentElementClicked: function (ev) {\n    var $el = $(ev.target);\n    if ($el.closest(this.$el).length === 0 && $el.closest($('#' + this._triggerElementID)).length === 0) {\n      this._hideDialog();\n    }\n  },\n\n  _onMouseClick: function () {\n    this._privacyTooltip.hideTipsy();\n  },\n\n  clean: function () {\n    this._destroyDocumentBinds();\n    CoreView.prototype.clean.apply(this);\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar Ps = require('perfect-scrollbar');\nvar template = require('./scroll.tpl');\nvar MutationObserver = window.MutationObserver;\n\nmodule.exports = CoreView.extend({\n  tagName: 'div',\n  className: 'ScrollView',\n\n  initialize: function (opts) {\n    if (!opts.createContentView) throw new Error('A factory createContentView function is required');\n    this.options = opts || {};\n    this._type = opts.type || 'vertical'; // vertical or horizontal\n    this._maxScroll = 0;\n    this._bindedCheckShadows = this._checkShadows.bind(this);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this._html();\n\n    var view = this.options.createContentView.call(this);\n    this._contentContainer().append(view.render().el);\n    this.addView(view);\n    this._applyScroll();\n    this._updateScrollWhenExist();\n    return this;\n  },\n\n  _html: function () {\n    this.$el.html(template({\n      type: this._type\n    }));\n\n    (this._type === 'horizontal') && this.$el.addClass('ScrollView--horizontal');\n  },\n\n  _contentContainer: function () {\n    return this.$('.js-content');\n  },\n\n  _wrapperContainer: function () {\n    return this.$('.js-wrapper');\n  },\n\n  _updateScrollWhenExist: function () {\n    // Phantom doesn't provide this api for window.\n    if (!MutationObserver) return;\n\n    // even with the changes in PS, we need to check when this element is added to the dom\n    // in order to trigger manually an update.\n    var element = document.body;\n    var self = this._wrapperContainer().get(0);\n    var onMutationObserver = function () {\n      if (element.contains(self)) {\n        Ps.update(self);\n        observer.disconnect();\n      }\n    };\n\n    var observer = new MutationObserver(onMutationObserver);\n    onMutationObserver();\n\n    var config = { subtree: true, childList: true };\n    observer.observe(element, config);\n  },\n\n  _applyScroll: function () {\n    Ps.initialize(this._wrapperContainer().get(0), {\n      wheelSpeed: 2,\n      wheelPropagation: true,\n      stopPropagationOnClick: false,\n      minScrollbarLength: 20,\n      suppressScrollX: this._type === 'vertical',\n      suppressScrollY: this._type === 'horizontal'\n    });\n\n    this._bindScroll();\n  },\n\n  _bindScroll: function () {\n    this._wrapperContainer()\n      .on('ps-dom-change', this._bindedCheckShadows)\n      .on('ps-x-reach-start', this._bindedCheckShadows)\n      .on('ps-x-reach-end', this._bindedCheckShadows)\n      .on('ps-y-reach-start', this._bindedCheckShadows)\n      .on('ps-y-reach-end', this._bindedCheckShadows)\n      .on('ps-scroll-x', this._bindedCheckShadows)\n      .on('ps-scroll-y', this._bindedCheckShadows);\n  },\n\n  _unbindScroll: function () {\n    this._wrapperContainer()\n      .off('ps-dom-change', this._bindedCheckShadows)\n      .off('ps-x-reach-start', this._bindedCheckShadows)\n      .off('ps-x-reach-end', this._bindedCheckShadows)\n      .off('ps-y-reach-start', this._bindedCheckShadows)\n      .off('ps-y-reach-end', this._bindedCheckShadows)\n      .off('ps-scroll-x', this._bindedCheckShadows)\n      .off('ps-scroll-y', this._bindedCheckShadows);\n  },\n\n  _checkShadows: function () {\n    var currentPos;\n    var max;\n    var width;\n    var height;\n    var maxPos;\n\n    if (this._type === 'horizontal') {\n      currentPos = this._wrapperContainer().scrollLeft();\n      max = this._wrapperContainer().get(0).scrollWidth;\n      width = this._wrapperContainer().outerWidth();\n      maxPos = max - width;\n\n      this.$('> .js-leftShadow').toggleClass('is-visible', currentPos > 0);\n      this.$('> .js-rightShadow').toggleClass('is-visible', currentPos < maxPos);\n    } else {\n      currentPos = this._wrapperContainer().scrollTop();\n      max = this._wrapperContainer().get(0).scrollHeight;\n      height = this._wrapperContainer().outerHeight();\n      maxPos = max - height;\n\n      // We use the direct descendant selector to avoid affect others nested view with scroll\n      this.$('> .js-topShadow').toggleClass('is-visible', currentPos > 0);\n      this.$('> .js-bottomShadow').toggleClass('is-visible', currentPos < maxPos);\n    }\n  },\n\n  destroyScroll: function () {\n    if (this._wrapperContainer().length) {\n      this._unbindScroll();\n      Ps.destroy(this._wrapperContainer().get(0));\n    }\n  },\n\n  clean: function () {\n    this.destroyScroll();\n    CoreView.prototype.clean.apply(this, arguments);\n  }\n});\n","var Backbone = require('backbone');\n\n/**\n *  Stack layout model checks and decides if next or previous\n *  positions are possible.\n */\n\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    position: 0\n  },\n\n  initialize: function (attrs, opts) {\n    this.stackLayoutItems = opts.stackLayoutItems;\n  },\n\n  goToStep: function (position) {\n    var stackLayoutItemsSize = this.stackLayoutItems.size();\n\n    if (position >= stackLayoutItemsSize) {\n      throw new Error('There is no ' + position + ' stack view in the collection');\n    } else {\n      this.set({\n        position: position\n      }, {\n        silent: true\n      });\n      this._rememberStep.apply(this, arguments);\n      this._triggerPositionChanged(position, Array.prototype.slice.call(arguments, 1));\n    }\n  },\n\n  nextStep: function () {\n    var currentPos = this.get('position');\n    var nextPosition = ++currentPos;\n    this.goToStep.apply(this, Array.prototype.concat.apply([nextPosition], arguments));\n  },\n\n  prevStep: function () {\n    var currentPos = this.get('position');\n    var prevPosition = --currentPos;\n    this.goToStep.apply(this, Array.prototype.concat.apply([prevPosition], arguments));\n  },\n\n  goBack: function () {\n    if (this._goBackToArguments) {\n      this.goToStep.apply(this, this._goBackToArguments);\n    }\n  },\n\n  _triggerPositionChanged: function (position, args) {\n    this.trigger('positionChanged', position, Array.prototype.slice.call(args));\n  },\n\n  _rememberStep: function () {\n    this._goBackToArguments = this._lastStepArguments || [ 0 ];\n    this._lastStepArguments = arguments;\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar StackLayoutModel = require('./stack-layout-model');\nvar _ = require('underscore');\n\n/**\n *  Stack layout view manages a \"carousel\" of views.\n *  They can go forward or backward.\n */\n\nmodule.exports = CoreView.extend({\n  module: 'components:stack-layout:stack-layout-view',\n\n  initialize: function (opts) {\n    if (!this.collection || !this.collection.size()) {\n      throw new Error('A collection of stack views should be provided');\n    }\n    this.model = new StackLayoutModel({}, {\n      stackLayoutItems: this.collection\n    });\n    this.model.bind('positionChanged', this._onPositionChange, this);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this._genNewStackView();\n    return this;\n  },\n\n  _onPositionChange: function (newPos, opts) {\n    this._removeOldStackView();\n    this._genNewStackView(_.flatten(opts));\n    this.trigger('positionChanged', this);\n  },\n\n  getCurrentPosition: function () {\n    return this.model.get('position');\n  },\n\n  _removeOldStackView: function () {\n    var oldView = this._getCurrentView();\n    if (oldView) {\n      oldView.clean();\n      this.removeView(oldView);\n    }\n  },\n\n  _getCurrentView: function () {\n    for (var key in this._subviews) break;\n    return this._subviews[key];\n  },\n\n  _genNewStackView: function () {\n    var args = [this.model].concat([_.flatten(arguments)]);\n    var nextView = this.collection.at(this.model.get('position')).get('createStackView').apply(this, args);\n    this.addView(nextView);\n\n    this.$el.html(nextView.render().el);\n  }\n});\n","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar TabPaneView = require('./tab-pane-view.js');\nvar TabPaneCollection = require('./tab-pane-collection');\nvar MixedLabelView = require('./tab-pane-mixed-view');\nvar ColorView = require('./tab-pane-color-view');\n\n/**\n * Creates a tab pane, where the menu consists of text labels.\n *\n * Example usage:\n * {\n *   label: 'My label',\n *   createContentView: CoreView(),\n *   selected: false\n * }\n *\n * @param {Array} paneItems\n * @param {Object} options\n * @return {Object} instance of CoreView\n */\nmodule.exports = function (paneItems, options) {\n  options = options || {};\n  var tabPaneItemLabelOptions = options.tabPaneItemLabelOptions;\n\n  var items = paneItems.map(function (paneItem) {\n    ['label', 'createContentView'].forEach(function (check) {\n      if (!paneItem[check]) {\n        throw new Error(check + ' should be provided');\n      }\n    });\n\n    return {\n      name: paneItem.name,\n      selected: paneItem.selected,\n      label: paneItem.label,\n      color: paneItem.color,\n      kind: paneItem.kind,\n      selectedChild: paneItem.selectedChild,\n      createButtonView: function () {\n        if (paneItem.type === 'color') {\n          return new ColorView(_.extend({ model: this }, tabPaneItemLabelOptions));\n        } else {\n          return new MixedLabelView(_.extend({ model: this, type: paneItem.type }, tabPaneItemLabelOptions));\n        }\n      },\n      createContentView: function () {\n        return paneItem.createContentView && paneItem.createContentView() || new CoreView();\n      }\n    };\n  });\n\n  var collection = new TabPaneCollection(items);\n\n  var tabPaneOptions = options.tabPaneOptions;\n\n  return new TabPaneView(\n    _.extend(\n      { collection: collection },\n      tabPaneOptions\n    )\n  );\n};\n","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar TabPaneView = require('./tab-pane-view.js');\nvar TabPaneCollection = require('./tab-pane-collection');\nvar RadioLabelView = require('./tab-pane-radio-label-view');\n\n/**\n * Creates a tab pane, where the menu consists of radio inputs with labels.\n *\n * Example usage:\n * {\n *   label: 'My label',\n *   createContentView: CoreView(),\n *   selected: false\n * }\n *\n * @param {Array} paneItems\n * @param {Object} options\n * @return {Object} instance of CoreView\n */\nmodule.exports = function (paneItems, options) {\n  options = options || {};\n  var tabPaneItemLabelOptions = options.tabPaneItemLabelOptions;\n\n  var items = paneItems.map(function (paneItem) {\n    ['label', 'createContentView'].forEach(function (check) {\n      if (!paneItem[check]) {\n        throw new Error(check + ' should be provided');\n      }\n    });\n\n    return {\n      name: paneItem.name,\n      selected: paneItem.selected,\n      disabled: paneItem.disabled,\n      tooltip: paneItem.tooltip,\n      tooltipGravity: paneItem.tooltipGravity,\n      label: paneItem.label,\n      selectedChild: paneItem.selectedChild,\n      createButtonView: function () {\n        return new RadioLabelView(_.extend({ model: this }, tabPaneItemLabelOptions));\n      },\n      createContentView: function () {\n        return paneItem.createContentView && paneItem.createContentView() || new CoreView();\n      }\n    };\n  });\n\n  var collection = new TabPaneCollection(items);\n\n  var tabPaneOptions = options.tabPaneOptions;\n\n  return new TabPaneView(\n    _.extend(\n      { collection: collection },\n      tabPaneOptions\n    )\n  );\n};\n","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar TabPaneView = require('./tab-pane-view.js');\nvar TabPaneCollection = require('./tab-pane-collection');\nvar LabelView = require('./tab-pane-label-view');\n\n/**\n * Creates a tab pane, where the menu consists of text labels.\n *\n * Example usage:\n * {\n *   label: 'My label',\n *   createContentView: CoreView(),\n *   selected: false\n * }\n *\n * @param {Array} paneItems\n * @param {Object} options\n * @return {Object} instance of CoreView\n */\nmodule.exports = function (paneItems, options) {\n  options = options || {};\n  var tabPaneItemLabelOptions = options.tabPaneItemLabelOptions;\n\n  var items = paneItems.map(function (paneItem) {\n    ['label', 'createContentView'].forEach(function (check) {\n      if (!paneItem[check]) {\n        throw new Error(check + ' should be provided');\n      }\n    });\n\n    return {\n      name: paneItem.name,\n      selected: paneItem.selected,\n      disabled: paneItem.disabled,\n      tooltip: paneItem.tooltip,\n      label: paneItem.label,\n      selectedChild: paneItem.selectedChild,\n      createButtonView: function () {\n        return new LabelView(_.extend({ model: this }, tabPaneItemLabelOptions));\n      },\n      createContentView: function () {\n        return paneItem.createContentView && paneItem.createContentView() || new CoreView();\n      }\n    };\n  });\n\n  var collection = new TabPaneCollection(items);\n\n  var tabPaneOptions = options.tabPaneOptions;\n\n  return new TabPaneView(\n    _.extend(\n      { collection: collection },\n      tabPaneOptions\n    )\n  );\n};\n","var Backbone = require('backbone');\nvar _ = require('underscore');\n\nmodule.exports = Backbone.Collection.extend({\n  constructor: function (models, options) {\n    options = _.extend(options || {}, { silent: false });\n    Backbone.Collection.prototype.constructor.call(this, models, options);\n  },\n\n  initialize: function (models, options) {\n    this._disabledTabs = options.disabledTabs;\n\n    this._initBinds();\n\n    this._setSelected();\n  },\n\n  _initBinds: function () {\n    this.bind('reset', this._setSelected, this);\n    this.bind('change:selected', this._onSelectedChange, this);\n  },\n\n  getSelected: function () {\n    return this.find(function (model) {\n      return model.get('selected');\n    });\n  },\n\n  getDefault: function () {\n    return this.find(function (model) {\n      return model.get('name') === this.getDefaultName();\n    }, this);\n  },\n\n  getDisabledTabs: function () {\n    return this._disabledTabs || [];\n  },\n\n  getDefaultName: function () {\n    return this._defaultTab;\n  },\n\n  isDisabledTab: function (name) {\n    var disabledTab = this.find(function (model) {\n      return model.get('disabled') && model.get('name') === name;\n    });\n\n    return !!disabledTab;\n  },\n\n  _setSelected: function () {\n    var isSelected = this.getSelected();\n\n    if (!isSelected && this.size() > 0) {\n      this.at(0).set('selected', true);\n    }\n  },\n\n  _onSelectedChange: function (itemModel, isSelected) {\n    if (!isSelected) {\n      return;\n    }\n\n    this.each(function (model) {\n      if (model !== itemModel) {\n        model.set('selected', false);\n      }\n    }, this);\n  },\n\n  select: function (name, value) {\n    var model = this.find(function (m) {\n      return m.get(name) === value;\n    }, this);\n\n    if (model) {\n      model.set('selected', true);\n    }\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar template = require('./tab-pane-color.tpl');\n\n/**\n *  Label component\n */\n\nmodule.exports = CoreView.extend({\n  className: 'Label',\n\n  initialize: function () {\n    if (!this.model) {\n      throw new Error('A model should be provided');\n    }\n    this.model.bind('change:label', this.render, this);\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this.$el.html(template({\n      color: this.model.get('label'),\n      selectedChild: this.model.get('selectedChild') || ''\n    }));\n    return this;\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\n\n/**\n *  TabPaneItem component\n */\n\nmodule.exports = CoreView.extend({\n  module: 'components:tab-pane:tab-pane-item-view',\n\n  tagName: 'button',\n\n  className: function () {\n    var classes = [this.options.klassName];\n\n    if (this.model.get('selected')) {\n      classes.push('is-selected');\n    }\n\n    if (this.model.get('disabled')) {\n      classes.push('is-disabled');\n    }\n\n    return classes.join(' ');\n  },\n\n  events: {\n    'click': '_onButtonClicked'\n  },\n\n  initialize: function () {\n    if (!this.model) {\n      throw new Error('A model should be provided');\n    }\n\n    this.model.bind('change:selected', this._onChangeSelected, this);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this._initViews();\n    return this;\n  },\n\n  _initViews: function () {\n    this._initButton();\n    this._initTooltip();\n  },\n\n  _initButton: function () {\n    var view = this.model.get('createButtonView').call(this.model);\n    this.addView(view);\n    this.$el.append(view.render().$el);\n  },\n\n  _initTooltip: function () {\n    var tooltip = this.model.get('tooltip');\n    if (tooltip) {\n      var buttonTooltip = new TipsyTooltipView({\n        el: this.$el,\n        title: function () {\n          return _t(tooltip);\n        },\n        gravity: this.model.get('tooltipGravity') || 'w'\n      });\n      this._buttonTooltip = buttonTooltip;\n      this.addView(buttonTooltip);\n    }\n  },\n\n  _onChangeSelected: function () {\n    var isSelected = !!this.model.get('selected');\n    if (!isSelected) {\n      this._buttonTooltip && this._buttonTooltip.hideTipsy();\n    }\n    this.$el.toggleClass('is-selected', isSelected);\n  },\n\n  _onButtonClicked: function (event) {\n    event.preventDefault();\n    if (this.model.get('disabled')) return;\n\n    this.model.set('selected', true);\n    _.isFunction(this.model.get('onClick')) && this.model.get('onClick')();\n  },\n\n  clean: function () {\n    this._buttonTooltip && this._buttonTooltip.clean();\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar template = require('./tab-pane-label.tpl');\n\n/**\n *  Label component\n */\n\nmodule.exports = CoreView.extend({\n  className: 'Label',\n\n  initialize: function () {\n    if (!this.model) {\n      throw new Error('A model should be provided');\n    }\n\n    this.model.on('change:label', this.render, this);\n  },\n\n  render: function () {\n    this.$el.html(template({\n      label: this.model.get('label'),\n      selectedChild: this.model.get('selectedChild') || ''\n    }));\n    return this;\n  }\n});\n","var template = require('./tab-pane-file.tpl');\nvar CoreView = require('backbone/core-view');\nvar ImageLoaderView = require('builder/components/img-loader-view');\n\n/**\n *  File component\n */\n\nmodule.exports = CoreView.extend({\n  tagName: 'i',\n\n  className: 'CDB-IconFont',\n\n  initialize: function (options) {\n    if (!this.model) throw new Error('A model should be provided');\n\n    this.model.bind('change:label', this.render, this);\n    this.model.bind('change:color', this._updateColor, this);\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    var labelType = this._getLabelType();\n\n    this.$el.html(template({\n      type: labelType,\n      label: this.model.get('label'),\n      kind: this.model.get('kind'),\n      selectedChild: this.model.get('selectedChild') || ''\n    }));\n\n    if (labelType === 'file') {\n      this._loadImages();\n    }\n\n    return this;\n  },\n\n  _loadImages: function () {\n    this.iconView = new ImageLoaderView({\n      imageClass: 'Tab-paneLabelImage',\n      imageUrl: this._getImageURL(),\n      color: this.model.get('color')\n    });\n    this.addView(this.iconView);\n    this.$('.js-image-container').append(this.iconView.render().el);\n  },\n\n  _updateColor: function () {\n    this.iconView && this.iconView.updateImageColor(this.model.get('color'));\n  },\n\n  _getLabelType: function () {\n    var label = this.model.get('label');\n    return label && label.match(/^http/) ? 'file' : 'text';\n  },\n\n  _getImageURL: function () {\n    return this.model.get('label');\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar template = require('./tab-pane-radio-label.tpl');\n\n/**\n *  Label component with a Radio button\n */\n\nmodule.exports = CoreView.extend({\n  className: 'Label',\n\n  initialize: function () {\n    if (!this.model) {\n      throw new Error('A model should be provided');\n    }\n\n    this.model.on('change:label', this.render, this);\n    this.model.on('change:selected', this.render, this);\n  },\n\n  render: function () {\n    this.$el.html(template({\n      customId: this.model.cid + this.model.get('name'),\n      label: this.model.get('label'),\n      name: this.model.get('name'),\n      help: this.model.get('help') || '',\n      selected: this.model.get('selected'),\n      selectedChild: this.model.get('selectedChild') || ''\n    }));\n    return this;\n  }\n\n});\n","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar TabPaneItem = require('./tab-pane-item-view.js');\nvar Template = require('./tab-pane.tpl');\n\n/**\n *  TabPane component\n */\n\nmodule.exports = CoreView.extend({\n  className: 'Tab-pane',\n\n  events: {\n    'mouseover': '_onMouseOver'\n  },\n\n  initialize: function (options) {\n    if (!this.collection) {\n      throw new Error('A TabPaneCollection should be provided');\n    }\n\n    this._tabPaneItemOptions = this.options.tabPaneItemOptions;\n    this._createContentKey = this.options.createContentKey || 'createContentView';\n    this.template = this.options.template || Template;\n\n    if (this.options.mouseOverAction) {\n      this._mouseOverAction = this.options.mouseOverAction;\n    }\n\n    this.collection.bind('change:selected', this._renderSelected, this);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    this.$el.html(this.template(this.options));\n\n    this._renderCollection();\n\n    var model = this.getSelectedTabPane();\n\n    if (model) {\n      this._renderSelected(model, true);\n    }\n\n    return this;\n  },\n\n  getTabPaneCollection: function () {\n    return this.collection;\n  },\n\n  getSelectedTabPane: function () {\n    return this.collection.getSelected();\n  },\n\n  getTabPane: function (name) {\n    return _.first(this.collection.where({ name: name }));\n  },\n\n  getSelectedTabPaneName: function () {\n    var selectedTab = this.getSelectedTabPane();\n    return selectedTab ? selectedTab.get('name') : null;\n  },\n\n  setSelectedTabPaneByName: function (name) {\n    return this.collection.select('name', name);\n  },\n\n  _renderSelected: function (model, isSelected) {\n    if (isSelected) {\n      if (this._selectedView) {\n        this._selectedView.clean();\n        this.removeView(this._selectedView);\n      }\n\n      this._selectedView = this._renderTabPaneContentView(model);\n    }\n  },\n\n  _renderCollection: function () {\n    this.collection.each(function (paneModel) {\n      if (paneModel.get('createButtonView')) {\n        this._renderTabPaneItemView(paneModel);\n      }\n    }, this);\n  },\n\n  _renderTabPaneItemView: function (model) {\n    var tabPaneItemView = new TabPaneItem(_.extend({ model: model }, this._tabPaneItemOptions));\n    this.addView(tabPaneItemView);\n    this.$('.js-menu').append(tabPaneItemView.render().el);\n  },\n\n  _renderTabPaneContentView: function (model) {\n    var tabPaneContentView = model.get(this._createContentKey).call(model);\n    if (tabPaneContentView) {\n      this.addView(tabPaneContentView);\n      this.$('.js-content').append(tabPaneContentView.render().el);\n      if (typeof tabPaneContentView.afterRender === 'function') {\n        tabPaneContentView.afterRender();\n      }\n    }\n    return tabPaneContentView;\n  },\n\n  changeStyleMenu: function (m) {\n    this.$('.js-theme').toggleClass('is-dark', m.isEditing());\n  },\n\n  _onMouseOver: function () {\n    this._mouseOverAction && this._mouseOverAction();\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar cellTemplate = require('./table-body-cell.tpl');\nvar pointGeojsonParser = require('builder/helpers/point-geojson-parser');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar FORMATTED_TYPE_VALUES = {\n  'geometry': pointGeojsonParser\n};\n\nvar REQUIRED_OPTS = [\n  'columnsCollection',\n  'tableViewModel',\n  'canHideColumns'\n];\n\n/*\n *  Table body row view\n */\n\nmodule.exports = CoreView.extend({\n\n  className: 'Table-row',\n  tagName: 'tr',\n\n  options: {\n    simpleGeometry: ''\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this.el.setAttribute('data-model', this.model.cid);\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.$el.empty();\n    this._generateRowsHTML();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.bind('change', this.render, this);\n    this.model.bind('destroy', this.remove, this);\n  },\n\n  _generateRowsHTML: function () {\n    var r = [];\n\n    for (var i = 0, l = this._columnsCollection.size(); i < l; i++) {\n      var model = this._columnsCollection.at(i);\n      var columnName = model.get('name');\n\n      if (!this._tableViewModel.isCustomQueryApplied() && columnName === 'the_geom_webmercator') {\n        continue;\n      }\n\n      if (this._canHideColumns && columnName === 'center' && model.isGeometryColumn()) {\n        continue;\n      }\n\n      r[i] = this._generateCellHTML(columnName);\n    }\n\n    this.el.innerHTML = r.join('');\n  },\n\n  _generateCellHTML: function (columnName) {\n    var simpleGeometry = this.options.simpleGeometry;\n    var columnModel = _.first(this._columnsCollection.where({ name: columnName }));\n    var columnType = columnModel.get('type');\n    var value = this.model.get(columnName);\n    var formattedValue = value;\n\n    if (columnType === 'geometry') {\n      if (simpleGeometry === 'point') {\n        formattedValue = FORMATTED_TYPE_VALUES[columnType](value);\n      } else {\n        formattedValue = simpleGeometry && (simpleGeometry.charAt(0).toUpperCase() + simpleGeometry.slice(1));\n      }\n    } else if (FORMATTED_TYPE_VALUES[columnType]) {\n      formattedValue = FORMATTED_TYPE_VALUES[columnType](value);\n    }\n\n    return cellTemplate({\n      value: value,\n      formattedValue: formattedValue,\n      type: columnType,\n      columnName: columnName,\n      geometry: simpleGeometry\n    });\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar $ = require('jquery');\nvar _ = require('underscore');\nvar Clipboard = require('clipboard');\nvar TableBodyRowView = require('./table-body-row-view');\nvar ContextMenuView = require('builder/components/context-menu/context-menu-view');\nvar CustomListCollection = require('builder/components/custom-list/custom-list-collection');\nvar addTableRowOperation = require('builder/components/table/operations/table-add-row');\nvar removeTableRowOperation = require('builder/components/table/operations/table-remove-row');\nvar editCellOperation = require('builder/components/table/operations/table-edit-cell');\nvar ConfirmationModalView = require('builder/components/modals/confirmation/modal-confirmation-view');\nvar TablePaginatorView = require('builder/components/table/paginator/table-paginator-view');\nvar tableBodyTemplate = require('./table-body.tpl');\nvar renderLoading = require('builder/components/loading/render-loading');\nvar ErrorView = require('builder/components/error/error-view');\nvar tableNoRowsTemplate = require('./table-no-rows.tpl');\nvar EditorsServiceModel = require('builder/components/table/editors/editors-service-model');\nvar EditorsModel = require('builder/components/table/editors/types/editor-model');\nvar errorParser = require('builder/helpers/error-parser');\nvar magicPositioner = require('builder/helpers/magic-positioner');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar EDITORS_MAP = {\n  'string': require('builder/components/table/editors/types/editor-string-view'),\n  'number': require('builder/components/table/editors/types/editor-base-view'),\n  'boolean': require('builder/components/table/editors/types/editor-boolean-view'),\n  'date': require('builder/components/table/editors/types/editor-date-view'),\n  'default': require('builder/components/table/editors/types/editor-string-view')\n};\n\nvar REQUIRED_OPTS = [\n  'columnsCollection',\n  'modals',\n  'queryGeometryModel',\n  'querySchemaModel',\n  'rowsCollection',\n  'canHideColumns',\n  'tableViewModel'\n];\n\n/*\n *  Table body view\n */\n\nmodule.exports = CoreView.extend({\n\n  className: 'Table-body',\n  tagName: 'div',\n\n  events: {\n    'click': '_onClick',\n    'dblclick': '_onDblClick'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._editors = new EditorsServiceModel();\n\n    this._closeEditor = this._closeEditor.bind(this);\n    this._hideContextMenu = this._hideContextMenu.bind(this);\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this._destroyScrollBinding();\n    this.$el.empty();\n\n    // Render results when we have the schema and goemetry is not being fetched\n    if (this._querySchemaModel.isFetched() && !this._queryGeometryModel.isFetching() && !this._rowsCollection.isFetching()) {\n      if (!this._rowsCollection.size()) {\n        this._renderNoRows();\n      } else {\n        this.$el.html(tableBodyTemplate());\n        this._rowsCollection.each(this._renderBodyRow, this);\n        this._initPaginator();\n      }\n    } else {\n      this._renderQueryState();\n    }\n\n    this.$el.toggleClass('Table-body--relative', !!this._tableViewModel.get('relativePositionated'));\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this._queryGeometryModel.bind('change:status', this.render, this);\n    this._querySchemaModel.bind('change:status', this.render, this);\n    this._rowsCollection.bind('reset', _.debounce(this.render.bind(this), 20), this);\n    this._rowsCollection.bind('add', function (model) {\n      if (this._rowsCollection.size() === 1) {\n        this.render();\n      } else {\n        this._renderBodyRow(model);\n      }\n    }, this);\n    this._rowsCollection.bind('remove', this._onRemoveRow, this);\n    this._rowsCollection.bind('fail', function (mdl, response) {\n      if (!response || (response && response.statusText !== 'abort')) {\n        this._renderError(errorParser(response));\n      }\n    }, this);\n    this.add_related_model(this._queryGeometryModel);\n    this.add_related_model(this._querySchemaModel);\n    this.add_related_model(this._rowsCollection);\n  },\n\n  _renderQueryState: function () {\n    var querySchemaStatus = this._querySchemaModel.get('status');\n    var nodeReady = this._querySchemaModel.get('ready');\n    var geometryStatus = this._queryGeometryModel.get('status');\n    var rowsCollectionStatus = this._rowsCollection.getStatusValue();\n\n    if (nodeReady) {\n      if (querySchemaStatus === 'unavailable' && geometryStatus === 'unavailable' ||\n          rowsCollectionStatus === 'unavailable') {\n        this._renderError(this._querySchemaModel.get('query_errors'));\n      } else {\n        this._renderLoading();\n      }\n    } else {\n      this._renderLoading();\n    }\n  },\n\n  _renderLoading: function () {\n    this.$el.html(\n      renderLoading({\n        title: _t('components.table.rows.loading.title')\n      })\n    );\n  },\n\n  _renderError: function (desc) {\n    var view = new ErrorView({\n      title: _t('components.table.rows.error.title'),\n      desc: desc || _t('components.table.rows.error.desc')\n    });\n    this.addView(view);\n    this.$el.html(view.render().el);\n  },\n\n  _renderNoRows: function () {\n    this.$el.html(\n      tableNoRowsTemplate({\n        page: this._tableViewModel.get('page'),\n        customQuery: this._tableViewModel.isCustomQueryApplied()\n      })\n    );\n  },\n\n  _initPaginator: function () {\n    var paginatorView = new TablePaginatorView({\n      rowsCollection: this._rowsCollection,\n      tableViewModel: this._tableViewModel,\n      scrollToBottom: this._scrollToBottom.bind(this)\n    });\n\n    // Bug in Chrome with position:fixed :(, so we have to choose body as\n    // parent\n    var $el = $('body');\n    // But if we have chosen relativePositionated, we should add close\n    // to the table view\n    if (this._tableViewModel.get('relativePositionated')) {\n      $el = this.$el.closest('.Table').parent();\n    }\n\n    $el.append(paginatorView.render().el);\n    this.addView(paginatorView);\n  },\n\n  _initScrollBinding: function () {\n    $('.Table').scroll(this._hideContextMenu);\n    this.$('.js-tbody').scroll(this._hideContextMenu);\n  },\n\n  _destroyScrollBinding: function () {\n    $('.Table').off('scroll', this._hideContextMenu);\n    this.$('.js-tbody').off('scroll', this._hideContextMenu);\n  },\n\n  _renderBodyRow: function (mdl) {\n    var view = new TableBodyRowView({\n      model: mdl,\n      columnsCollection: this._columnsCollection,\n      simpleGeometry: this._queryGeometryModel.get('simple_geom'),\n      canHideColumns: this._canHideColumns,\n      tableViewModel: this._tableViewModel\n    });\n    this.addView(view);\n    this.$('.js-tbody').append(view.render().el);\n  },\n\n  _onRemoveRow: function () {\n    if (!this._rowsCollection.size()) {\n      this._rowsCollection.resetFetch();\n      this._queryGeometryModel.resetFetch();\n\n      var page = this._tableViewModel.get('page');\n      if (page > 0) {\n        this._tableViewModel.set('page', page - 1);\n      } else {\n        this.render();\n      }\n    }\n  },\n\n  _hasContextMenu: function () {\n    return this._menuView;\n  },\n\n  _hideContextMenu: function () {\n    this._unhighlightCell();\n    this._destroyScrollBinding();\n    this._menuView.collection.unbind(null, null, this);\n    this.removeView(this._menuView);\n    this._menuView.clean();\n    delete this._menuView;\n  },\n\n  _highlightCell: function ($tableCellItem, $tableRow) {\n    $tableCellItem.addClass('is-highlighted');\n    $tableRow.addClass('is-highlighted');\n  },\n\n  _unhighlightCell: function () {\n    this.$('.Table-cellItem.is-highlighted, .Table-row.is-highlighted').removeClass('is-highlighted');\n  },\n\n  _showContextMenu: function (ev) {\n    var self = this;\n    var position = { x: ev.clientX, y: ev.clientY };\n    var $tableRow = $(ev.target).closest('.Table-row');\n    var $tableCellItem = $(ev.target).closest('.Table-cellItem');\n    var modelCID = $tableRow.data('model');\n    var attribute = $tableCellItem.data('attribute');\n    var rowModel = self._rowsCollection.get({ cid: modelCID });\n    var menuItems = [];\n\n    menuItems.push({\n      label: _t('components.table.rows.options.copy'),\n      val: 'copy',\n      action: function () {\n        self._copyValue($tableCellItem);\n      }\n    });\n\n    if (!this._tableViewModel.isDisabled()) {\n      menuItems = [\n        {\n          label: _t('components.table.rows.options.edit'),\n          val: 'edit',\n          action: function () {\n            self._editCell(rowModel, attribute);\n          }\n        }, {\n          label: _t('components.table.rows.options.create'),\n          val: 'create',\n          action: function () {\n            self._addRow();\n          }\n        }\n      ].concat(menuItems);\n\n      menuItems.push({\n        label: _t('components.table.rows.options.delete'),\n        val: 'delete',\n        destructive: true,\n        action: function () {\n          self._removeRow(rowModel);\n        }\n      });\n    }\n\n    // No options?, don't open anything\n    if (!menuItems.length) {\n      return false;\n    }\n\n    var collection = new CustomListCollection(menuItems);\n\n    this._menuView = new ContextMenuView({\n      className: 'Table-rowMenu ' + ContextMenuView.prototype.className,\n      collection: collection,\n      triggerElementID: modelCID,\n      position: position\n    });\n\n    this._menuView.$el.css(\n      magicPositioner({\n        parentView: $('body'),\n        posX: position.x,\n        posY: position.y\n      })\n    );\n\n    collection.bind('change:selected', function (menuItem) {\n      var action = menuItem.get('action');\n      action && action();\n    }, this);\n\n    this._menuView.model.bind('change:visible', function (model, isContextMenuVisible) {\n      if (this._hasContextMenu() && !isContextMenuVisible) {\n        this._hideContextMenu();\n      }\n    }, this);\n\n    this._menuView.show();\n    this.addView(this._menuView);\n\n    this._highlightCell($tableCellItem, $tableRow);\n    this._initScrollBinding();\n  },\n\n  _onClick: function (ev) {\n    var isCellOptions = $(ev.target).hasClass('js-cellOptions');\n    if (isCellOptions) {\n      if (this._hasContextMenu()) {\n        this._hideContextMenu();\n      } else {\n        this._showContextMenu(ev);\n      }\n    }\n  },\n\n  _onDblClick: function (ev) {\n    var $tableCellItem = $(ev.target).closest('.Table-cellItem');\n    var isCellOptions = $(ev.target).hasClass('js-cellOptions');\n\n    if ($tableCellItem && !isCellOptions) {\n      var $tableRow = $tableCellItem.closest('.Table-row');\n      var modelCID = $tableRow.data('model');\n      var attribute = $tableCellItem.data('attribute');\n      var rowModel = this._rowsCollection.get({ cid: modelCID });\n\n      if (!this._tableViewModel.isDisabled() && rowModel && attribute && attribute !== 'cartodb_id') {\n        this._editCell(rowModel, attribute);\n      }\n    }\n  },\n\n  _copyValue: function ($el) {\n    // Work-around for Clipboard \\o/\n    this._clipboard = new Clipboard($el.get(0));\n    $el.click();\n    this._clipboard.destroy();\n  },\n\n  _addRow: function () {\n    addTableRowOperation({\n      rowsCollection: this._rowsCollection\n    });\n  },\n\n  _initEditorScrollBinding: function () {\n    $('.Table').scroll(this._closeEditor);\n    this.$('.js-tbody').scroll(this._closeEditor);\n  },\n\n  _destroyEditorScrollBinding: function () {\n    $('.Table').unbind('scroll', this._closeEditor);\n    this.$('.js-tbody').unbind('scroll', this._closeEditor);\n  },\n\n  _closeEditor: function () {\n    this._unhighlightCell();\n    this._destroyEditorScrollBinding();\n    this._editors.unbind(null, null, this);\n    this._editors.destroy();\n  },\n\n  _saveValue: function (rowModel, attribute, newValue) {\n    if (rowModel.get(attribute) !== newValue) {\n      editCellOperation({\n        rowModel: rowModel,\n        attribute: attribute,\n        newValue: newValue\n      });\n    }\n  },\n\n  _doCellEdition: function (rowModel, attribute) {\n    var $tableRow = this.$('[data-model=\"' + rowModel.cid + '\"]');\n    var $tableCell = $tableRow.find('[data-attribute=\"' + attribute + '\"]');\n    var $options = $tableCell.find('.js-cellOptions');\n    var columnModel = _.first(this._columnsCollection.where({ name: attribute }));\n    var type = columnModel.get('type');\n\n    this._highlightCell($tableCell, $tableRow);\n    this._initEditorScrollBinding();\n\n    var model = new EditorsModel({\n      type: type,\n      value: rowModel.get(attribute)\n    });\n\n    this._editors.bind('destroyedEditor', this._closeEditor, this);\n    this._editors.bind('confirmedEditor', function () {\n      if (model.isValid()) {\n        this._saveValue(\n          rowModel,\n          attribute,\n          model.get('value')\n        );\n      }\n    }, this);\n\n    var position = $options.offset();\n\n    if ($tableCell.index() > 1) {\n      position.right = window.innerWidth - position.left;\n      delete position.left;\n    }\n\n    if (this._rowsCollection.size() > 4 && ($tableRow.index() + 2) >= (this._rowsCollection.size() - 1)) {\n      position.bottom = window.innerHeight - position.top;\n      delete position.top;\n    } else {\n      position.top = position.top + 20;\n    }\n\n    var View = EDITORS_MAP[type];\n\n    if (!View) {\n      View = EDITORS_MAP['default'];\n    }\n\n    this._editors.create(\n      function (editorModel) {\n        return new View({\n          editorModel: editorModel,\n          model: model\n        });\n      },\n      position\n    );\n  },\n\n  _editCell: function (rowModel, attribute) {\n    var callback = this._doCellEdition.bind(this, rowModel, attribute);\n    rowModel.fetchRowIfGeomIsNotLoaded(callback);\n  },\n\n  _removeRow: function (rowModel) {\n    var self = this;\n\n    this._modals.create(\n      function (modalModel) {\n        return new ConfirmationModalView({\n          modalModel: modalModel,\n          template: require('./modals-templates/remove-table-row.tpl'),\n          renderOpts: {\n            cartodb_id: rowModel.get('cartodb_id')\n          },\n          loadingTitle: _t('components.table.rows.destroy.loading', {\n            cartodb_id: rowModel.get('cartodb_id')\n          }),\n          runAction: function () {\n            removeTableRowOperation({\n              tableViewModel: self._tableViewModel,\n              rowModel: rowModel,\n              onSuccess: function () {\n                modalModel.destroy();\n              },\n              onError: function (e) {\n                modalModel.destroy();\n              }\n            });\n          }\n        });\n      }\n    );\n  },\n\n  _scrollToBottom: function () {\n    var tbodyHeight = this.$('.js-tbody').get(0).scrollHeight;\n    this.$('.js-tbody').animate({\n      scrollTop: tbodyHeight\n    }, 'slow');\n  },\n\n  clean: function () {\n    this._destroyScrollBinding();\n    CoreView.prototype.clean.apply(this);\n  }\n\n});\n","var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\n\n/**\n * View model of an editor\n */\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    show: true,\n    createContentView: function () {\n      return new CoreView();\n    }\n  },\n\n  createContentView: function () {\n    return this.get('createContentView')(this);\n  },\n\n  show: function () {\n    this.set('show', true);\n  },\n\n  hide: function () {\n    this.set('show', false);\n  },\n\n  isHidden: function () {\n    return !this.get('show');\n  },\n\n  confirm: function () {\n    var args = Array.prototype.slice.call(arguments);\n    this.trigger.apply(this, ['confirm'].concat(args));\n  },\n\n  /**\n   * @override {Backbone.Model.prototype.destroy}\n   */\n  destroy: function () {\n    var args = Array.prototype.slice.call(arguments);\n    this.trigger.apply(this, ['destroy'].concat(args));\n  }\n});\n","var CoreView = require('backbone/core-view');\n\nmodule.exports = CoreView.extend({\n  className: 'CDB-Box-modal Table-editor',\n\n  initialize: function () {\n    this.listenTo(this.model, 'change:show', this._onShowChange);\n    this.listenTo(this.model, 'destroy', this._onDestroy);\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    var view = this.model.createContentView();\n    this.addView(view);\n    view.render();\n    this.$el.append(view.el);\n    this.$el.css(this.options.position);\n\n    return this;\n  },\n\n  show: function () {\n    this.model.show();\n  },\n\n  hide: function () {\n    this.model.hide();\n  },\n\n  destroy: function () {\n    this.model.destroy();\n  },\n\n  _onShowChange: function (m, show) {\n    this.$el[show ? 'show' : 'hide']();\n  },\n\n  _onClose: function () {\n    this.destroy();\n  },\n\n  _onDestroy: function () {\n    this.hide();\n    this.clean();\n  }\n\n});\n","var _ = require('underscore');\nvar $ = require('jquery');\nvar Backbone = require('backbone');\nvar EditorView = require('./editor-view');\nvar EditorViewModel = require('./editor-view-model');\nvar ESC_KEY_CODE = 27;\nvar DESTROYED_EDITOR_EVENT = 'destroyedEditor';\nvar CONFIRMED_EDITOR_EVENT = 'confirmedEditor';\n\n/**\n * Top-level API to handle editor views.\n *\n * Example:\n * // In some entry-point:\n * table.editors = new EditorsServiceModel();\n *\n * // Later, in any view, calling create will create a new editor viewModel\n * var editorView = table.editors.create(fn);\n *\n * Same concept @viddo introduced with Modals.\n */\nmodule.exports = Backbone.Model.extend({\n\n  /**\n   * Creates a new editor view\n   *\n   * @param {Function} createContentView\n   * @return {View} the new editor view\n   */\n  create: function (createContentView, position) {\n    if (!_.isFunction(createContentView)) throw new Error('createContentView is required');\n    position = position || {\n      left: '50%',\n      top: '50%'\n    };\n\n    if (!this._editorView) {\n      this._editorView = this._newEditorView(position);\n      document.body.appendChild(this._editorView.el);\n    }\n\n    this._editorView.model.set('createContentView', createContentView);\n    this._editorView.render();\n\n    return this._editorView;\n  },\n\n  /**\n   * Convenience method to add a listener when current editor is destroyed\n   *\n   * This is the same as doing\n   * editors.create(function (model) {\n   *   model.once('destroy', callback, context);\n   *   return new MyView({  });\n   * });\n   *\n   * @param {Function} callback\n   * @param {Object} [context = undefined]\n   */\n\n  confirm: function () {\n    if (this._editorView) {\n      this._editorView.model.confirm();\n    }\n  },\n\n  destroy: function () {\n    if (this._editorView) {\n      this._editorView.model.destroy();\n    }\n  },\n\n  _newEditorView: function (position) {\n    var viewModel = new EditorViewModel();\n    this._destroyOnEsc(viewModel);\n    this.listenToOnce(viewModel, 'destroy', function () {\n      this._editorView = null;\n      this.trigger.apply(this, [DESTROYED_EDITOR_EVENT].concat(Array.prototype.slice.call(arguments)));\n      this.stopListening(viewModel);\n    });\n    this.listenToOnce(viewModel, 'confirm', function () {\n      this.trigger.apply(this, [CONFIRMED_EDITOR_EVENT].concat(Array.prototype.slice.call(arguments)));\n      this.destroy();\n    });\n    var view = new EditorView({\n      model: viewModel,\n      position: position\n    });\n    this._destroyOnClickOutside(view);\n    return view;\n  },\n\n  _destroyOnClickOutside: function (view) {\n    var destroyOnClickOutside = function (ev) {\n      if ($(ev.target).closest(view.el).length === 0) {\n        view.model.confirm();\n      }\n    };\n    document.addEventListener('click', destroyOnClickOutside);\n    this.listenToOnce(view.model, 'destroy', function () {\n      document.removeEventListener('click', destroyOnClickOutside);\n    });\n  },\n\n  _destroyOnEsc: function (viewModel) {\n    var destroyOnEsc = function (ev) {\n      if (ev.which === ESC_KEY_CODE) {\n        viewModel.destroy();\n      }\n    };\n    document.addEventListener('keydown', destroyOnEsc);\n    this.listenToOnce(viewModel, 'destroy', function () {\n      document.removeEventListener('keydown', destroyOnEsc);\n    });\n  }\n\n});\n","var CoreView = require('backbone/core-view');\nvar $ = require('jquery');\nvar ENTER_KEY_CODE = 13;\n\nmodule.exports = CoreView.extend({\n\n  tagName: 'input',\n  className: 'CDB-InputText CDB-Text',\n\n  events: {\n    'keyup': '_onValueChange',\n    'change': '_onValueChange'\n  },\n\n  initialize: function (opts) {\n    if (!opts.editorModel) throw new Error('editorModel is required');\n    this._editorModel = opts.editorModel;\n    this._onKeyPressed = this._onKeyPressed.bind(this);\n    this._onValueChange = this._onValueChange.bind(this);\n  },\n\n  render: function () {\n    this.$el.val(\n      this.model.get('value')\n    );\n    this._setFocus();\n    this._initDocumentBind();\n    return this;\n  },\n\n  _setFocus: function () {\n    setTimeout(function () {\n      this.$el.focus();\n    }.bind(this), 100);\n  },\n\n  _initDocumentBind: function () {\n    $(document).bind('keydown', this._onKeyPressed);\n  },\n\n  _destroyDocumentBind: function () {\n    $(document).unbind('keydown', this._onKeyPressed);\n  },\n\n  _onKeyPressed: function (ev) {\n    if (ev.which === ENTER_KEY_CODE) {\n      if (this.model.isValid()) {\n        this._editorModel.confirm();\n      } else {\n        return false;\n      }\n    }\n  },\n\n  _onValueChange: function () {\n    this._setValue();\n    this._checkValidity();\n  },\n\n  _setValue: function () {\n    this.model.set('value', this.$el.val());\n  },\n\n  _checkValidity: function () {\n    this.$el.toggleClass('has-error', !this.model.isValid());\n  },\n\n  clean: function () {\n    this._destroyDocumentBind();\n    CoreView.prototype.clean.apply(this);\n  }\n\n});\n","var EditorBaseView = require('./editor-base-view');\nvar $ = require('jquery');\nvar template = require('./editor-boolean.tpl');\n\nmodule.exports = EditorBaseView.extend({\n\n  tagName: 'div',\n  className: 'u-flex',\n\n  events: {\n    'change input:radio': '_onRadioChanged'\n  },\n\n  render: function () {\n    var value = this.model.get('value');\n    this.$el.html(\n      template({\n        value: value !== null ? value.toString() : 'null'\n      })\n    );\n    return this;\n  },\n\n  _onRadioChanged: function (ev) {\n    var value = $(ev.target).val();\n    switch (value) {\n      case 'true':\n        value = true;\n        break;\n      case 'false':\n        value = false;\n        break;\n      default:\n        value = null;\n    }\n    this.model.set('value', value);\n    this._editorModel.confirm();\n  }\n\n});\n","var Backbone = require('backbone');\nvar moment = require('moment');\nvar Utils = require('builder/helpers/utils');\nvar MONTHS = [\n  {\n    val: 0,\n    label: _t('months.january')\n  }, {\n    val: 1,\n    label: _t('months.february')\n  }, {\n    val: 2,\n    label: _t('months.march')\n  }, {\n    val: 3,\n    label: _t('months.april')\n  }, {\n    val: 4,\n    label: _t('months.may')\n  }, {\n    val: 5,\n    label: _t('months.june')\n  }, {\n    val: 6,\n    label: _t('months.july')\n  }, {\n    val: 7,\n    label: _t('months.august')\n  }, {\n    val: 8,\n    label: _t('months.september')\n  }, {\n    val: 9,\n    label: _t('months.october')\n  }, {\n    val: 10,\n    label: _t('months.november')\n  }, {\n    val: 11,\n    label: _t('months.december')\n  }\n];\n\nmodule.exports = Backbone.Model.extend({\n\n  parse: function (attrs) {\n    var date;\n\n    if (!attrs.date) {\n      date = moment().utc();\n    } else {\n      date = moment(attrs.date).utc();\n    }\n\n    return {\n      day: date.date(),\n      month: date.month(),\n      year: date.year(),\n      time: date.format('HH:mm:ss'),\n      utcOffset: date.utcOffset()\n    };\n  },\n\n  initialize: function () {\n    this.schema = {\n      day: {\n        title: '',\n        type: 'Text',\n        validators: [\n          'required',\n          /^([12]?\\d{0,1}|3[01]{0,2})$/,\n          function (value, formValues) {\n            var date = moment(Utils.formatDate(formValues));\n            if (!date.isValid()) {\n              return {\n                type: 'date',\n                message: _t('components.datepicker.invalid-date')\n              };\n            }\n          }\n        ]\n      },\n      month: {\n        type: 'Select',\n        title: '',\n        options: MONTHS\n      },\n      year: {\n        title: '',\n        type: 'Text',\n        validators: ['required', /^([0-9]{0,4})$/]\n      },\n      time: {\n        title: '',\n        type: 'Text',\n        validators: ['required', /^([01]{1}[0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]$/]\n      }\n    };\n  },\n\n  getFormattedDate: function () {\n    return Utils.formatDate(this.toJSON());\n  }\n\n});\n","var Backbone = require('backbone');\nvar EditorBaseView = require('./editor-base-view');\nvar EditorDateFormModel = require('./editor-date-form-model');\nrequire('builder/components/form-components/index');\n\nmodule.exports = EditorBaseView.extend({\n\n  tagName: 'div',\n  className: 'Table-editorDate',\n\n  initialize: function (opts) {\n    EditorBaseView.prototype.initialize.apply(this, arguments);\n\n    this._formModel = new EditorDateFormModel({\n      date: this.model.get('value')\n    }, {\n      parse: true\n    });\n\n    this._setValue();\n    this._formModel.bind('change', this._setValue, this);\n    this.add_related_model(this._formModel);\n  },\n\n  render: function () {\n    this._formView = new Backbone.Form({\n      model: this._formModel\n    });\n\n    this._formView.bind('change', function () {\n      this.commit();\n    });\n\n    this.$el.html(this._formView.render().el);\n\n    return this;\n  },\n\n  _setValue: function () {\n    this.model.set('value', this._formModel.getFormattedDate());\n  },\n\n  clean: function () {\n    this._formView.remove();\n    EditorBaseView.prototype.clean.apply(this);\n  }\n\n});\n","var Backbone = require('backbone');\nvar _ = require('underscore');\n\nmodule.exports = Backbone.Model.extend({\n\n  // Error labels will not be showed, not needed to be translated\n  validate: function (attrs, opts) {\n    if (attrs.type === 'number' && isNaN(attrs.value)) {\n      return 'Number not valid';\n    }\n\n    if (attrs.type === 'boolean' && (!_.isBoolean(attrs.value) && attrs.value !== null)) {\n      return 'Boolean not valid';\n    }\n  }\n\n});\n","var EditorBaseView = require('./editor-base-view');\nvar ENTER_KEY_CODE = 13;\n\nmodule.exports = EditorBaseView.extend({\n\n  tagName: 'textarea',\n  className: 'Table-editorTextarea CDB-Textarea CDB-Text',\n\n  _onKeyPressed: function (ev) {\n    if (!ev.shiftKey && ev.which === ENTER_KEY_CODE) {\n      this._onValueChange();\n      this._editorModel.confirm();\n    }\n  }\n\n});\n","var $ = require('jquery');\nvar CoreView = require('backbone/core-view');\nvar template = require('./table-head-item.tpl');\nvar ContextMenuView = require('builder/components/context-menu/context-menu-view');\nvar CustomListCollection = require('builder/components/custom-list/custom-list-collection');\nvar TableHeadOptionsItemView = require('./table-head-options-item-view');\nvar tableHeadOptionsItemTemplate = require('./table-head-options-item.tpl');\nvar ConfirmationModalView = require('builder/components/modals/confirmation/modal-confirmation-view');\nvar QueryColumnModel = require('builder/data/query-column-model');\nvar addColumnOperation = require('builder/components/table/operations/table-add-column');\nvar renameColumnOperation = require('builder/components/table/operations/table-rename-column');\nvar changeColumnTypeOperation = require('builder/components/table/operations/table-change-column-type');\nvar removeTableColumnOperation = require('builder/components/table/operations/table-remove-column');\n\nvar ENTER_KEY_CODE = 13;\nvar ESC_KEY_CODE = 27;\n\n/*\n *  Main table view\n */\n\nmodule.exports = CoreView.extend({\n\n  className: 'Table-headItem',\n  tagName: 'th',\n\n  events: {\n    'dblclick .js-attribute': '_onAttributeDblClicked',\n    'focusout .js-attribute': '_saveNewName',\n    'click .js-columnOptions': '_showContextMenu'\n  },\n\n  initialize: function (opts) {\n    if (!opts.tableViewModel) throw new Error('tableViewModel is required');\n    if (!opts.columnsCollection) throw new Error('columnsCollection is required');\n    if (!opts.modals) throw new Error('modals is required');\n\n    this._tableViewModel = opts.tableViewModel;\n    this._columnsCollection = opts.columnsCollection;\n    this._modals = opts.modals;\n\n    this._hideContextMenu = this._hideContextMenu.bind(this);\n    this._onKeyDown = this._onKeyDown.bind(this);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    var columnName = this.model.get('name');\n    this.$el.html(\n      template({\n        name: columnName,\n        type: this.model.get('type'),\n        isOrderBy: this._tableViewModel.get('order_by') === columnName,\n        sortBy: this._tableViewModel.get('sort_order'),\n        geometry: this.options.simpleGeometry\n      })\n    );\n    return this;\n  },\n\n  _hasContextMenu: function () {\n    return this._menuView;\n  },\n\n  _hideContextMenu: function () {\n    this._unhighlightHead();\n    this._destroyScrollBinding();\n    this._menuView.collection.unbind(null, null, this);\n    this.removeView(this._menuView);\n    this._menuView.clean();\n    delete this._menuView;\n  },\n\n  _highlightHead: function () {\n    this.$el.addClass('is-highlighted');\n  },\n\n  _unhighlightHead: function () {\n    this.$el.removeClass('is-highlighted');\n  },\n\n  _initScrollBinding: function () {\n    $('.Table').scroll(this._hideContextMenu);\n  },\n\n  _destroyScrollBinding: function () {\n    $('.Table').off('scroll', this._hideContextMenu);\n  },\n\n  _showContextMenu: function (ev) {\n    var self = this;\n    var position = { x: ev.clientX, y: ev.clientY };\n    var elementIndex = this.$el.index();\n    var modelCID = this.model.cid;\n    var columnName = this.model.get('name');\n\n    this._highlightHead();\n\n    var menuItems = [{\n      label: _t('components.table.columns.options.order'),\n      val: 'order',\n      isOrderBy: this._tableViewModel.get('order_by') === columnName,\n      sortBy: this._tableViewModel.get('sort_order'),\n      action: function (model) {\n        self._tableViewModel.set({\n          sort_order: model.get('sort'),\n          order_by: columnName\n        });\n      }\n    }];\n\n    if (!this._tableViewModel.isDisabled()) {\n      if (!this.model.isCartoDBIDColumn() && !this.model.isGeometryColumn()) {\n        menuItems = menuItems.concat([\n          {\n            label: _t('components.table.columns.options.rename'),\n            val: 'rename',\n            action: function () {\n              self._startEditing();\n            }\n          }, {\n            label: _t('components.table.columns.options.change'),\n            type: this.model.get('type'),\n            isLastColumns: (this._columnsCollection.size() - elementIndex) < 3,\n            val: 'change',\n            action: function (model) {\n              self._changeColumnType(model.get('type'));\n            }\n          }\n        ]);\n      }\n\n      menuItems.push({\n        label: _t('components.table.columns.options.create'),\n        val: 'create',\n        action: function () {\n          self._addColumn();\n        }\n      });\n\n      if (!this.model.isCartoDBIDColumn() && !this.model.isGeometryColumn()) {\n        menuItems.push(\n          {\n            label: _t('components.table.columns.options.delete'),\n            val: 'delete',\n            destructive: true,\n            action: function () {\n              self._removeColumn();\n            }\n          }\n        );\n      }\n    }\n\n    var collection = new CustomListCollection(menuItems);\n\n    this._menuView = new ContextMenuView({\n      className: ContextMenuView.prototype.className + ' Table-columnMenu',\n      collection: collection,\n      itemTemplate: tableHeadOptionsItemTemplate,\n      itemView: TableHeadOptionsItemView,\n      triggerElementID: modelCID,\n      position: position\n    });\n\n    collection.bind('change:selected', function (menuItem) {\n      var action = menuItem.get('action');\n      action && action(menuItem);\n    }, this);\n\n    this._menuView.model.bind('change:visible', function (model, isContextMenuVisible) {\n      if (this._hasContextMenu() && !isContextMenuVisible) {\n        this._hideContextMenu();\n      }\n    }, this);\n\n    this._menuView.show();\n    this.addView(this._menuView);\n\n    this._initScrollBinding();\n  },\n\n  _addColumn: function () {\n    addColumnOperation({\n      columnsCollection: this._columnsCollection\n    });\n  },\n\n  _changeColumnType: function (newType) {\n    var self = this;\n    var oldType = this.model.get('type');\n    var isTypeChangeDestructive = QueryColumnModel.isTypeChangeDestructive(oldType, newType);\n    if (!isTypeChangeDestructive) {\n      changeColumnTypeOperation({\n        columnModel: this.model,\n        newType: newType\n      });\n    } else {\n      this._modals.create(\n        function (modalModel) {\n          return new ConfirmationModalView({\n            modalModel: modalModel,\n            template: require('./modals-templates/change-table-column-type.tpl'),\n            renderOpts: {\n              columnName: self.model.get('name'),\n              newType: newType\n            },\n            loadingTitle: _t('components.table.columns.change-type.loading', {\n              columnName: self.model.get('name')\n            }),\n            runAction: function () {\n              changeColumnTypeOperation({\n                columnModel: self.model,\n                newType: newType,\n                onSuccess: function () {\n                  modalModel.destroy();\n                },\n                onError: function (e) {\n                  modalModel.destroy();\n                }\n              });\n            }\n          });\n        }\n      );\n    }\n  },\n\n  _removeColumn: function () {\n    var self = this;\n    this._modals.create(\n      function (modalModel) {\n        return new ConfirmationModalView({\n          modalModel: modalModel,\n          template: require('./modals-templates/remove-table-column.tpl'),\n          renderOpts: {\n            name: self.model.get('name')\n          },\n          loadingTitle: _t('components.table.columns.destroy.loading', {\n            columnName: self.model.get('name')\n          }),\n          runAction: function () {\n            removeTableColumnOperation({\n              columnModel: self.model,\n              onSuccess: function () {\n                modalModel.destroy();\n              },\n              onError: function (e) {\n                modalModel.destroy();\n              }\n            });\n          }\n        });\n      }\n    );\n  },\n\n  _onAttributeDblClicked: function () {\n    if (this.model.isEditable() && !this._tableViewModel.isDisabled()) {\n      this._startEditing();\n    }\n  },\n\n  _initRenameBinds: function () {\n    $(document).bind('keydown', this._onKeyDown);\n  },\n\n  _destroyRenameBinds: function () {\n    $(document).unbind('keydown', this._onKeyDown);\n  },\n\n  _onKeyDown: function (ev) {\n    var keyCode = ev.which;\n    if (keyCode === ENTER_KEY_CODE) {\n      this._saveNewName();\n    } else if (keyCode === ESC_KEY_CODE) {\n      this._finishEditing();\n    }\n  },\n\n  _startEditing: function () {\n    this.$('.js-attribute')\n      .addClass('is-active')\n      .removeAttr('readonly');\n\n    this._initRenameBinds();\n  },\n\n  _finishEditing: function () {\n    this.$('.js-attribute')\n      .val(this.model.get('name'))\n      .removeClass('is-active')\n      .attr('readonly', '');\n\n    this._destroyRenameBinds();\n  },\n\n  _saveNewName: function () {\n    if (this.model.isEditable()) {\n      var newName = this.$('.js-attribute').val();\n      var columnModel = this.model;\n      var oldName = columnModel.get('name');\n\n      if (oldName !== newName && newName !== '') {\n        this._modals.create(\n          function (modalModel) {\n            return new ConfirmationModalView({\n              modalModel: modalModel,\n              template: require('./modals-templates/rename-table-column.tpl'),\n              renderOpts: {\n                columnName: oldName,\n                newName: newName\n              },\n              loadingTitle: _t('components.table.columns.rename.loading', {\n                columnName: oldName,\n                newName: newName\n              }),\n              runAction: function () {\n                renameColumnOperation({\n                  columnModel: columnModel,\n                  newName: newName,\n                  onSuccess: function () {\n                    modalModel.destroy();\n                  },\n                  onError: function (e) {\n                    modalModel.destroy();\n                  }\n                });\n              }\n            });\n          }\n        );\n      }\n    }\n\n    // Setting old name just in case user cancel it\n    this._finishEditing();\n  },\n\n  focusInput: function () {\n    this._startEditing();\n    this.$('.js-attribute').select();\n  },\n\n  clean: function () {\n    this._destroyRenameBinds();\n    this._destroyScrollBinding();\n    CoreView.prototype.clean.apply(this);\n  }\n});\n","var _ = require('underscore');\nvar CustomListItemView = require('builder/components/custom-list/custom-list-item-view');\nvar CustomListView = require('builder/components/custom-list/custom-view');\nvar QueryColumnModel = require('builder/data/query-column-model');\n\nmodule.exports = CustomListItemView.extend({\n\n  events: _.extend(\n    CustomListItemView.prototype.events,\n    {\n      'click .js-desc': '_onDescClick',\n      'click .js-asc': '_onAscClick',\n      'click .js-order': 'killEvent'\n    }\n  ),\n\n  render: function () {\n    this.$el.empty();\n    this.clearSubViews();\n\n    this.$el.append(\n      this.options.template(\n        {\n          typeLabel: this.options.typeLabel,\n          isSelected: this.model.get('selected'),\n          isDisabled: this.model.get('disabled'),\n          isDestructive: this.model.get('destructive'),\n          isOrderBy: this.model.get('isOrderBy'),\n          sortBy: this.model.get('sortBy'),\n          name: this.model.getName(),\n          val: this.model.getValue()\n        }\n      )\n    );\n\n    this.$el\n      .attr('data-val', this.model.getValue())\n      .toggleClass('is-disabled', !!this.model.get('disabled'));\n\n    return this;\n  },\n\n  _onClick: function (ev) {\n    this.killEvent(ev);\n\n    if (this.model.getValue() === 'change') {\n      this._openSubContextMenu(ev);\n    } else {\n      this.model.set('selected', true);\n    }\n  },\n\n  _hideSubContextMenu: function () {\n    if (this._subContextMenu) {\n      this._subContextMenu.clean();\n      this.removeView(this._subContextMenu);\n      delete this.collection;\n      delete this._subContextMenu;\n    }\n  },\n\n  _openSubContextMenu: function (ev) {\n    if (this._subContextMenu) {\n      this._hideSubContextMenu();\n    }\n\n    var subContextClassName = 'Table-columnTypeMenu ';\n    if (this.model.get('isLastColumns')) {\n      subContextClassName += ' Table-columnTypeMenu--toLeft ';\n    }\n\n    this._subContextMenu = new CustomListView({\n      className: subContextClassName + CustomListView.prototype.className,\n      options: [\n        {\n          label: _t('components.table.columns.types.number'),\n          disabled: !QueryColumnModel.isTypeChangeAllowed(this.model.get('type'), 'number'),\n          val: 'number'\n        }, {\n          label: _t('components.table.columns.types.string'),\n          disabled: !QueryColumnModel.isTypeChangeAllowed(this.model.get('type'), 'string'),\n          val: 'string'\n        }, {\n          label: _t('components.table.columns.types.date'),\n          disabled: !QueryColumnModel.isTypeChangeAllowed(this.model.get('type'), 'date'),\n          val: 'date'\n        }, {\n          label: _t('components.table.columns.types.boolean'),\n          disabled: !QueryColumnModel.isTypeChangeAllowed(this.model.get('type'), 'boolean'),\n          val: 'boolean'\n        }\n      ],\n      showSearch: false,\n      typeLabel: ''\n    });\n\n    this._subContextMenu.collection.bind('change:selected', function (menuItem) {\n      if (!menuItem.get('disabled')) {\n        this.model.set({\n          type: menuItem.getValue(),\n          selected: true\n        });\n      }\n    }, this);\n\n    this.$el.closest('.Table-columnMenu').append(this._subContextMenu.render().el);\n    this._subContextMenu.show();\n    this.addView(this._subContextMenu);\n  },\n\n  _onAscClick: function (ev) {\n    this.killEvent(ev);\n    this.model.set({\n      sort: 'asc',\n      selected: true\n    });\n  },\n\n  _onDescClick: function (ev) {\n    this.killEvent(ev);\n    this.model.set({\n      sort: 'desc',\n      selected: true\n    });\n  }\n\n});\n","var $ = require('jquery');\nvar CoreView = require('backbone/core-view');\nvar TableHeadItemView = require('./table-head-item-view');\nvar template = require('./table-head.tpl');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'columnsCollection',\n  'tableViewModel',\n  'queryGeometryModel',\n  'canHideColumns',\n  'modals'\n];\n\n/*\n *  Main table head view\n */\nmodule.exports = CoreView.extend({\n  className: 'Table-head',\n  tagName: 'table',\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n    this._lastHeadItemView = null;\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    this.$el.append(template());\n    this._columnsCollection.each(this._renderColumnHead, this);\n    return this;\n  },\n\n  _initBinds: function () {\n    this._queryGeometryModel.bind('change:simple_geom', this.render, this);\n    this.add_related_model(this._queryGeometryModel);\n    this._tableViewModel.bind('change:sort_order change:order_by', this.render, this);\n    this.add_related_model(this._tableViewModel);\n    this._columnsCollection.bind('reset', function () {\n      this.render();\n\n      if (this._newColumn) {\n        var scrollWidth = this.$el.get(0).scrollWidth;\n\n        setTimeout(function () {\n          this._scrollToLeft({\n            pos: scrollWidth\n          });\n          this._focusLastHeadItem();\n        }.bind(this), 500);\n\n        delete this._newColumn;\n      }\n    }, this);\n    this._columnsCollection.bind('add', function (model) {\n      this._newColumn = model;\n    }, this);\n    this.add_related_model(this._columnsCollection);\n  },\n\n  _renderColumnHead: function (model) {\n    var columnName = model.get('name');\n\n    if (!this._tableViewModel.isCustomQueryApplied() && columnName === 'the_geom_webmercator') {\n      return;\n    }\n\n    if (this._canHideColumns && columnName === 'center' && model.isGeometryColumn()) {\n      return;\n    }\n\n    var view = new TableHeadItemView({\n      model: model,\n      modals: this._modals,\n      columnsCollection: this._columnsCollection,\n      tableViewModel: this._tableViewModel,\n      simpleGeometry: this._queryGeometryModel.get('simple_geom')\n    });\n    this.$('.js-headRow').append(view.render().el);\n    this.addView(view);\n\n    this._lastHeadItemView = view;\n  },\n\n  _scrollToLeft: function (opts) {\n    opts = opts || {};\n    $('.Table').animate({\n      scrollLeft: opts.pos || 0\n    }, opts.speed || 'slow');\n  },\n\n  _focusLastHeadItem: function () {\n    if (this._lastHeadItemView) {\n      this._lastHeadItemView.focusInput();\n    }\n  }\n});\n","var Notifier = require('builder/components/notifier/notifier');\nvar errorParser = require('builder/helpers/error-parser');\n\nmodule.exports = function (opts) {\n  if (!opts.columnsCollection) throw new Error('columnsCollection is required');\n\n  var columnsCollection = opts.columnsCollection;\n  var successCallback = opts.onSuccess;\n  var errorCallback = opts.onError;\n  var notification = Notifier.addNotification({\n    status: 'loading',\n    info: _t('components.table.columns.create.loading'),\n    closable: false\n  });\n\n  columnsCollection.addColumn({\n    success: function (model, attrs) {\n      successCallback && successCallback(model, attrs);\n      notification.set({\n        status: 'success',\n        info: _t('components.table.columns.create.success', { columnName: attrs.name }),\n        closable: true\n      });\n    },\n    error: function (model, err) {\n      errorCallback && errorCallback(model, err);\n      notification.set({\n        status: 'error',\n        info: _t('components.table.columns.create.error', { error: errorParser(err) }),\n        closable: true\n      });\n    }\n  });\n};\n","var Notifier = require('builder/components/notifier/notifier');\nvar errorParser = require('builder/helpers/error-parser');\n\nmodule.exports = function (opts) {\n  if (!opts.rowsCollection) { throw new Error('rowsCollection is required'); }\n\n  var rowsCollection = opts.rowsCollection;\n  var successCallback = opts.onSuccess;\n  var errorCallback = opts.onError;\n  var notification = Notifier.addNotification({\n    status: 'loading',\n    info: _t('components.table.rows.create.loading'),\n    closable: false\n  });\n\n  rowsCollection.addRow({\n    success: function (model, attrs) {\n      successCallback && successCallback(model, attrs);\n      notification.set({\n        status: 'success',\n        info: _t('components.table.rows.create.success'),\n        closable: true\n      });\n    },\n    error: function (model, err) {\n      errorCallback && errorCallback(model, err);\n      notification.set({\n        status: 'error',\n        info: _t('components.table.rows.create.error', { error: errorParser(err) }),\n        closable: true\n      });\n    }\n  });\n};\n","var Notifier = require('builder/components/notifier/notifier');\nvar errorParser = require('builder/helpers/error-parser');\n\nmodule.exports = function (opts) {\n  if (!opts.columnModel) { throw new Error('columnModel is required'); }\n  if (!opts.newType) { throw new Error('newType is required'); }\n\n  var columnModel = opts.columnModel;\n  var newType = opts.newType;\n\n  var successCallback = opts.onSuccess;\n  var errorCallback = opts.onError;\n\n  var notification = Notifier.addNotification({\n    status: 'loading',\n    info: _t('components.table.columns.change-type.loading', {\n      columnName: columnModel.get('name')\n    }),\n    closable: false\n  });\n\n  columnModel.save({\n    type: newType\n  }, {\n    wait: true,\n    success: function (model, attrs) {\n      successCallback && successCallback(model, attrs);\n      notification.set({\n        status: 'success',\n        info: _t('components.table.columns.change-type.success', {\n          columnName: columnModel.get('name'),\n          newType: newType\n        }),\n        closable: true\n      });\n    },\n    error: function (model, err) {\n      errorCallback && errorCallback(model, err);\n      notification.set({\n        status: 'error',\n        info: _t('components.table.columns.change-type.error', {\n          columnName: columnModel.get('name'),\n          newType: newType,\n          error: errorParser(err)\n        }),\n        closable: true\n      });\n    }\n  });\n};\n","var Notifier = require('builder/components/notifier/notifier');\nvar errorParser = require('builder/helpers/error-parser');\n\nmodule.exports = function (opts) {\n  if (!opts.rowModel) throw new Error('rowModel is required');\n  if (opts.newValue === undefined) throw new Error('newValue is required');\n  if (!opts.attribute) throw new Error('attribute is required');\n\n  var rowModel = opts.rowModel;\n  var newValue = opts.newValue;\n  var attribute = opts.attribute;\n  var cartodbId = rowModel.get('cartodb_id');\n  var successCallback = opts.onSuccess;\n  var errorCallback = opts.onError;\n  var notification = Notifier.addNotification({\n    status: 'loading',\n    info: _t('components.table.rows.edit.loading', {\n      attribute: attribute,\n      cartodbId: cartodbId\n    }),\n    closable: false\n  });\n\n  // In order to preserve \"previous\" attribute\n  rowModel.set(attribute, newValue);\n  rowModel.save(null, {\n    success: function (model, attrs) {\n      successCallback && successCallback(model, attrs);\n      notification.set({\n        status: 'success',\n        info: _t('components.table.rows.edit.success', {\n          attribute: attribute,\n          cartodbId: cartodbId\n        }),\n        closable: true\n      });\n    },\n    error: function (model, err) {\n      errorCallback && errorCallback(model, err);\n      notification.set({\n        status: 'error',\n        info: _t('components.table.rows.edit.error', {\n          attribute: attribute,\n          cartodbId: cartodbId,\n          error: errorParser(err)\n        }),\n        closable: true\n      });\n    }\n  });\n};\n","var Notifier = require('builder/components/notifier/notifier');\nvar errorParser = require('builder/helpers/error-parser');\n\nmodule.exports = function (opts) {\n  if (!opts.columnModel) { throw new Error('columnModel is required'); }\n\n  var columnModel = opts.columnModel;\n  var successCallback = opts.onSuccess;\n  var errorCallback = opts.onError;\n  var notification = Notifier.addNotification({\n    status: 'loading',\n    info: _t('components.table.columns.destroy.loading', { columnName: columnModel.get('name') }),\n    closable: false\n  });\n\n  columnModel.destroy({\n    wait: true,\n    success: function (model, attrs) {\n      successCallback && successCallback(model, attrs);\n      notification.set({\n        status: 'success',\n        info: _t('components.table.columns.destroy.success', { columnName: columnModel.get('name') }),\n        closable: true\n      });\n    },\n    error: function (model, err) {\n      errorCallback && errorCallback(model, err);\n      notification.set({\n        status: 'error',\n        info: _t('components.table.columns.destroy.error', {\n          columnName: columnModel.get('name'),\n          error: errorParser(err)\n        }),\n        closable: true\n      });\n    }\n  });\n};\n","var Notifier = require('builder/components/notifier/notifier');\nvar errorParser = require('builder/helpers/error-parser');\n\nmodule.exports = function (opts) {\n  if (!opts.rowModel) { throw new Error('rowModel is required'); }\n\n  var rowModel = opts.rowModel;\n  var successCallback = opts.onSuccess;\n  var errorCallback = opts.onError;\n  var cartodbId = rowModel.get('cartodb_id');\n  var notification = Notifier.addNotification({\n    status: 'loading',\n    info: _t('components.table.rows.destroy.loading', { cartodb_id: cartodbId }),\n    closable: false\n  });\n\n  rowModel.destroy({\n    wait: true,\n    success: function (model, attrs) {\n      successCallback && successCallback(model, attrs);\n      notification.set({\n        status: 'success',\n        info: _t('components.table.rows.destroy.success', { cartodb_id: cartodbId }),\n        closable: true\n      });\n    },\n    error: function (model, err) {\n      errorCallback && errorCallback(model, err);\n      notification.set({\n        status: 'error',\n        info: _t('components.table.rows.destroy.error', { cartodb_id: cartodbId, error: errorParser(err) }),\n        closable: true\n      });\n    }\n  });\n};\n","var Notifier = require('builder/components/notifier/notifier');\nvar errorParser = require('builder/helpers/error-parser');\n\nmodule.exports = function (opts) {\n  if (!opts.columnModel) { throw new Error('columnModel is required'); }\n  if (!opts.newName) { throw new Error('newName is required'); }\n\n  var columnModel = opts.columnModel;\n  var oldName = columnModel.get('name');\n  var newName = opts.newName;\n\n  var successCallback = opts.onSuccess;\n  var errorCallback = opts.onError;\n\n  var notification = Notifier.addNotification({\n    status: 'loading',\n    info: _t('components.table.columns.rename.loading', { oldName: oldName, newName: newName }),\n    closable: false\n  });\n\n  columnModel.save({\n    new_name: newName,\n    old_name: columnModel.get('name')\n  }, {\n    wait: true,\n    success: function (model, attrs) {\n      successCallback && successCallback(model, attrs);\n      notification.set({\n        status: 'success',\n        info: _t('components.table.columns.rename.success', {\n          columnName: oldName,\n          newName: newName\n        }),\n        closable: true\n      });\n    },\n    error: function (model, err) {\n      errorCallback && errorCallback(model, err);\n      notification.set({\n        status: 'error',\n        info: _t('components.table.columns.rename.error', {\n          columnName: oldName,\n          newName: newName,\n          error: errorParser(err)\n        }),\n        closable: true\n      });\n    }\n  });\n};\n","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar template = require('./table-paginator.tpl');\nvar templateLoader = require('./table-paginator-loader.tpl');\nvar Notifier = require('builder/components/notifier/notifier');\nvar errorParser = require('builder/helpers/error-parser');\nvar QueryUtilsModel = require('builder/helpers/query-utils-model');\n\nmodule.exports = CoreView.extend({\n\n  tagName: 'div',\n  className: 'Table-paginator js-tablePaginator',\n\n  events: {\n    'click .js-prev': '_onPrevPage',\n    'click .js-next': '_onNextPage'\n  },\n\n  initialize: function (opts) {\n    if (!opts.rowsCollection) throw new Error('rowsCollection is required');\n    if (!opts.tableViewModel) throw new Error('tableViewModel is required');\n\n    this._tableViewModel = opts.tableViewModel;\n    this._rowsCollection = opts.rowsCollection;\n    this._scrollToBottom = opts.scrollToBottom;\n    this._numRows = -1;\n\n    this._queryUtilsModel = opts.queryUtilsModel || new QueryUtilsModel({\n      subquery: this._rowsCollection._querySchemaModel.get('query'),\n      configModel: this._rowsCollection._configModel\n    });\n\n    this._queryUtilsModel.fetchCount(function (numRows) {\n      // Check total number of rows to evaluate\n      // if there is a next page available\n      this._numRows = numRows;\n      this.render();\n    }.bind(this));\n\n    this._rowsCollection.bind('loading', function (item) {\n      // Don't take into account row model loading triggers\n      if (item.models) {\n        this._isLoading = true;\n      }\n    }, this);\n    this._rowsCollection.bind('add', this._onRowAdded, this);\n    this._rowsCollection.bind('remove', this._onRowRemoved, this);\n    this._tableViewModel.bind('change:page', this._onTablePageChange, this);\n    this.add_related_model(this._tableViewModel);\n    this.add_related_model(this._rowsCollection);\n  },\n\n  render: function () {\n    var rowsSize = this._rowsCollection.size();\n    var page = this._tableViewModel.get('page');\n    var maxRowsPerPage = this._rowsCollection.DEFAULT_FETCH_OPTIONS.rows_per_page;\n\n    this.$el.html(\n      template({\n        page: this._tableViewModel.get('page'),\n        size: rowsSize,\n        isNextAvailable: this._numRows > (page + 1) * maxRowsPerPage,\n        isPrevAvailable: page > 0\n      })\n    );\n\n    this.$el.toggleClass('Table-paginator--relative', !!this._tableViewModel.get('relativePositionated'));\n    return this;\n  },\n\n  _onRowAdded: function () {\n    this._queryUtilsModel.fetchCount(function (numRows) {\n      if (numRows > -1) {\n        // Go to the last page\n        var maxRowsPerPage = this._rowsCollection.DEFAULT_FETCH_OPTIONS.rows_per_page;\n        var lastPage = Math.ceil(numRows / maxRowsPerPage) - 1;\n        if (lastPage !== this._tableViewModel.get('page')) {\n          this._tableViewModel.set('page', lastPage);\n        } else {\n          this.render();\n        }\n        setTimeout(this._scrollToBottom, 200);\n      }\n    }.bind(this));\n  },\n\n  _onRowRemoved: function () {\n    this._rowsCollection.fetch({\n      data: this._getData()\n    });\n  },\n\n  _onTablePageChange: function () {\n    this._rowsCollection.fetch({\n      data: this._getData(),\n      error: function (mdl, response) {\n        this._isLoading = false;\n        this.render();\n\n        Notifier.addNotification({\n          status: 'error',\n          info: _t('components.table.rows.paginator.error', { error: errorParser(response) }),\n          closable: true\n        });\n      }.bind(this)\n    });\n  },\n\n  _getData: function () {\n    return _.extend(\n      this._tableViewModel.pick('page', 'order_by', 'sort_order'),\n      {\n        exclude: !this._tableViewModel.isCustomQueryApplied() ? ['the_geom_webmercator'] : []\n      }\n    );\n  },\n\n  _onPrevPage: function (ev) {\n    if (!this._isLoading) {\n      this.$('.js-prev').html(templateLoader());\n      this._tableViewModel.set('page', this._tableViewModel.get('page') - 1);\n    }\n  },\n\n  _onNextPage: function (ev) {\n    if (!this._isLoading) {\n      this.$('.js-next').html(templateLoader());\n      this._tableViewModel.set('page', this._tableViewModel.get('page') + 1);\n    }\n  }\n\n});\n","var TableView = require('./table-view');\nvar QueryColumnsCollection = require('builder/data/query-columns-collection');\nvar TableNameUtils = require('builder/helpers/table-name-utils');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'analysisDefinitionNodeModel',\n  'configModel',\n  'modals',\n  'userModel'\n];\n\n/**\n *  Table manager that generates necessary models/collections\n *  for the view\n *\n */\n\nmodule.exports = {\n  create: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    // Adds the owner username if it's in an organization and the table name is not already qualified\n    var tableName = this._analysisDefinitionNodeModel.get('table_name');\n    var userName = TableNameUtils.getUsername(tableName) || this._userModel.get('username');\n    tableName = TableNameUtils.getQualifiedTableName(\n      tableName,\n      userName,\n      this._userModel.isInsideOrg()\n    );\n\n    var querySchemaModel = this._analysisDefinitionNodeModel.querySchemaModel;\n\n    var columnsCollection = new QueryColumnsCollection(\n      querySchemaModel.columnsCollection.toJSON(),\n      {\n        configModel: this._configModel,\n        tableName: tableName,\n        querySchemaModel: querySchemaModel\n      }\n    );\n\n    return new TableView({\n      relativePositionated: opts.relativePositionated,\n      modals: this._modals,\n      analysisDefinitionNodeModel: this._analysisDefinitionNodeModel,\n      columnsCollection: columnsCollection,\n      tableName: tableName\n    });\n  },\n\n  destroy: function (tableView) {\n    if (!tableView) throw new Error('tableView object is needed');\n    tableView.clean();\n  }\n};\n","var Backbone = require('backbone');\n\n/**\n *  Table view model\n */\n\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    page: 0,\n    order_by: '',\n    sort_order: '',\n    readonly: false,\n    tableName: ''\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.analysisDefinitionNodeModel) throw new Error('analysisDefinitionNodeModel is required');\n    if (!opts.columnsCollection) throw new Error('columnsCollection is required');\n\n    this._analysisDefinitionNodeModel = opts.analysisDefinitionNodeModel;\n    this._columnsCollection = opts.columnsCollection;\n\n    this._setOrderAndSort();\n\n    this.listenTo(this._columnsCollection, 'reset', this._setOrderAndSort);\n  },\n\n  _setOrderAndSort: function () {\n    var hasCartodbId = this._columnsCollection.where({name: 'cartodb_id'}).length;\n\n    if (hasCartodbId && !this.isCustomQueryApplied()) {\n      this.set({\n        'order_by': 'cartodb_id',\n        'sort_order': 'asc'\n      }, {\n        silent: true\n      });\n    }\n  },\n\n  resetFetchDefaults: function () {\n    this.set({\n      page: this.defaults.page,\n      order_by: '',\n      sort_order: ''\n    }, {\n      silent: true\n    });\n  },\n\n  isDisabled: function () {\n    return this._analysisDefinitionNodeModel.isReadOnly();\n  },\n\n  isCustomQueryApplied: function () {\n    return this._analysisDefinitionNodeModel.isCustomQueryApplied();\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar $ = require('jquery');\nvar TableViewModel = require('./table-view-model.js');\nvar TableHeadView = require('./head/table-head-view');\nvar TableBodyView = require('./body/table-body-view');\nvar addTableRow = require('./operations/table-add-row');\nvar addTableColumn = require('./operations/table-add-column');\nvar SQLUtils = require('builder/helpers/sql-utils');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nconst { nodeHasTradeArea, nodeHasSQLFunction } = require('builder/helpers/analysis-node-utils');\n\nvar REQUIRED_OPTS = [\n  'analysisDefinitionNodeModel',\n  'columnsCollection',\n  'modals'\n];\n\n/*\n *  Main table view\n */\n\nmodule.exports = CoreView.extend({\n\n  className: 'Table-wrapper',\n  tagName: 'div',\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this._rowsCollection = this._analysisDefinitionNodeModel.queryRowsCollection;\n    this._queryGeometryModel = this._analysisDefinitionNodeModel.queryGeometryModel;\n    this._querySchemaModel = this._analysisDefinitionNodeModel.querySchemaModel;\n    this._tableModel = this._analysisDefinitionNodeModel.isSourceType() && this._analysisDefinitionNodeModel.getTableModel();\n\n    this._tableViewModel = new TableViewModel({\n      relativePositionated: opts.relativePositionated,\n      tableName: opts.tableName\n    }, {\n      analysisDefinitionNodeModel: this._analysisDefinitionNodeModel,\n      columnsCollection: this._columnsCollection\n    });\n\n    this._initBinds();\n\n    if (this._querySchemaModel.shouldFetch()) {\n      this._querySchemaModel.fetch();\n    } else if (this._rowsCollection.shouldFetch()) {\n      this._fetchRowsData();\n    }\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    var tableElement = $('<div>').addClass('Table js-table');\n    this.$el.append(tableElement);\n    this._initViews();\n\n    this.$('.js-table').toggleClass('Table--relative', !!this._tableViewModel.get('relativePositionated'));\n    this._setDisableState();\n    return this;\n  },\n\n  _initBinds: function () {\n    this._onChangeQueryOrStatus = this._onChangeQueryOrStatus.bind(this);\n\n    this.listenTo(this._querySchemaModel, 'change:query change:status', _.debounce(this._onChangeQueryOrStatus, 100));\n    this.listenTo(this._querySchemaModel, 'change:status', this._setDisableState);\n    this.listenTo(this._querySchemaModel, 'change:query', this._onQueryChanged);\n    this.listenTo(this._querySchemaModel, 'change:status', this._fetchRowsData);\n    this.listenTo(this._tableViewModel, 'change:sort_order change:order_by', this._fetchRowsData);\n\n    if (this._tableModel && this._tableModel.isSync()) {\n      var syncModel = this._tableModel.getSyncModel();\n      this.listenTo(syncModel, 'destroy', this.render);\n    }\n  },\n\n  _setDisableState: function () {\n    this.$('.js-table').toggleClass('is-disabled', !!this._tableViewModel.isDisabled());\n  },\n\n  _fetchRowsData: function (model) {\n    var attrsChanged = model && _.keys(model.changed);\n    var altersData = SQLUtils.altersData(this._querySchemaModel.get('query'));\n    var isCustomQueryApplied = this._tableViewModel.isCustomQueryApplied();\n    var changeComeFromSortOrOrder = false;\n\n    if (attrsChanged && (_.contains(attrsChanged, 'sort_order') || _.contains(attrsChanged, 'order_by'))) {\n      changeComeFromSortOrOrder = true;\n    }\n\n    if (this._querySchemaModel.isFetched() && !altersData) {\n      this._rowsCollection.fetch({\n        data: {\n          page: this._tableViewModel.get('page'),\n          order_by: !isCustomQueryApplied || changeComeFromSortOrOrder ? this._tableViewModel.get('order_by') : '',\n          sort_order: !isCustomQueryApplied || changeComeFromSortOrOrder ? this._tableViewModel.get('sort_order') : '',\n          exclude: !isCustomQueryApplied || changeComeFromSortOrOrder ? ['the_geom_webmercator'] : []\n        }\n      });\n    }\n  },\n\n  _initViews: function () {\n    const canHideColumns = nodeHasTradeArea(this._analysisDefinitionNodeModel) &&\n      !nodeHasSQLFunction(this._analysisDefinitionNodeModel);\n\n    var tableHeadView = new TableHeadView({\n      modals: this._modals,\n      queryGeometryModel: this._queryGeometryModel,\n      columnsCollection: this._columnsCollection,\n      tableViewModel: this._tableViewModel,\n      canHideColumns\n    });\n\n    this.addView(tableHeadView);\n    this.$('.js-table').append(tableHeadView.render().el);\n\n    var tableBodyView = new TableBodyView({\n      modals: this._modals,\n      columnsCollection: this._columnsCollection,\n      rowsCollection: this._rowsCollection,\n      queryGeometryModel: this._queryGeometryModel,\n      querySchemaModel: this._querySchemaModel,\n      canHideColumns,\n      tableViewModel: this._tableViewModel\n    });\n\n    this.addView(tableBodyView);\n    this.$('.js-table').append(tableBodyView.render().el);\n  },\n\n  _onChangeQueryOrStatus: function () {\n    var schemaStatus = this._querySchemaModel.get('status');\n    var geometryStatus = this._queryGeometryModel.get('status');\n\n    if (schemaStatus === 'unfetched' && this._querySchemaModel.canFetch()) {\n      this._querySchemaModel.fetch();\n    }\n\n    if (geometryStatus === 'unfetched' && this._queryGeometryModel.canFetch()) {\n      this._queryGeometryModel.fetch();\n    }\n  },\n\n  addRow: function () {\n    addTableRow({\n      rowsCollection: this._rowsCollection\n    });\n  },\n\n  addColumn: function () {\n    addTableColumn({\n      columnsCollection: this._columnsCollection\n    });\n  },\n\n  getColumnsCollection: function () {\n    return this._columnsCollection;\n  },\n\n  _onQueryChanged: function () {\n    this._tableViewModel.resetFetchDefaults();\n  },\n\n  // Remove elements that are not applied in the view\n  remove: function () {\n    $('.Table-paginator').remove();\n    CoreView.prototype.remove.apply(this);\n  }\n});\n","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nrequire('tipsy');\n\n/**\n *  Tipsy tooltip view.\n *\n *  - Needs an element to work.\n *  - Inits tipsy library.\n *  - Clean bastard tipsy bindings easily.\n *\n */\n\nmodule.exports = CoreView.extend({\n  options: {\n    gravity: 's',\n    opacity: 1,\n    fade: true\n  },\n\n  events: {\n    'mouseenter': '_onMouseEnter',\n    'mouseleave': '_onMouseLeave'\n  },\n\n  initialize: function (opts) {\n    if (!opts.el) throw new Error('Element is needed to have tipsy tooltip working');\n\n    this._mouseEnterAction = opts.mouseEnterAction;\n    this._mouseLeaveAction = opts.mouseLeaveAction;\n    this._tipsyOpenedManually = opts.trigger === 'manual';\n\n    this._initTipsy();\n  },\n\n  _initTipsy: function () {\n    var options = _.clone(this.options);\n\n    if (options.gravity === 'auto') {\n      options.gravity = this.getOptimalGravity(\n        options.gravityConfiguration && options.gravityConfiguration.preferredGravities || ['s', 'n', 'e', 'w'],\n        options.gravityConfiguration && options.gravityConfiguration.margin || 0,\n        window\n      );\n    }\n\n    if (!options.title) {\n      options.title = this.getTitleFromDataAttribute;\n    }\n\n    this.$el.tipsy(options);\n    this.tipsy = this.$el.data('tipsy');\n  },\n\n  _onMouseEnter: function () {\n    this._mouseEnterAction && this._mouseEnterAction();\n  },\n\n  _onMouseLeave: function () {\n    this._mouseLeaveAction && this._mouseLeaveAction();\n  },\n\n  setOffset: function (offset) {\n    this.tipsy.options.offset = offset;\n  },\n\n  showTipsy: function () {\n    this.$el.tipsy('show');\n  },\n\n  hideTipsy: function () {\n    this.$el.tipsy('hide');\n  },\n\n  getElement: function () {\n    return this.el;\n  },\n\n  getOptimalGravity: function (preferredGravities, margin, browserWindow) {\n    return function (tooltipElement) {\n      if (!tooltipElement) {\n        return preferredGravities[0] || 'n';\n      }\n\n      var tooltipContainer = this;\n      var tooltipContainerBoundingRect = tooltipContainer.getBoundingClientRect();\n      var gravityOptions = { n: 'bottom', s: 'top', w: 'right', e: 'left' };\n\n      var viewportBoundaries = {\n        top: browserWindow.pageYOffset + margin,\n        right: browserWindow.innerWidth + browserWindow.pageXOffset - margin,\n        bottom: browserWindow.innerHeight + browserWindow.pageYOffset - margin,\n        left: browserWindow.pageXOffset + margin\n      };\n\n      var tooltipBoundaries = {\n        top: tooltipContainerBoundingRect.top - tooltipElement.offsetHeight,\n        right: tooltipContainerBoundingRect.left + tooltipContainerBoundingRect.width + tooltipElement.offsetWidth,\n        bottom: tooltipContainerBoundingRect.top + tooltipContainerBoundingRect.height + tooltipElement.offsetHeight,\n        left: tooltipContainerBoundingRect.left - tooltipElement.offsetWidth\n      };\n\n      var tooltipBodyGravity = '';\n      var optimalGravity = _.find(preferredGravities, function (gravity) {\n        var position = gravityOptions[gravity];\n        var tooltipFitsPosition = isTooltipInsideViewport(position, viewportBoundaries[position], tooltipBoundaries[position]);\n\n        if (tooltipFitsPosition && (position === 'top' || position === 'bottom')) {\n          tooltipBodyGravity = getTooltipBodyGravity(gravityOptions, viewportBoundaries, tooltipBoundaries);\n        }\n\n        return tooltipFitsPosition;\n      });\n\n      return optimalGravity ? optimalGravity + tooltipBodyGravity : preferredGravities[0];\n    };\n  },\n\n  getTitleFromDataAttribute: function () {\n    return this.getAttribute('data-tooltip');\n  },\n\n  destroyTipsy: function () {\n    if (this.tipsy) {\n      // tipsy does not return this\n      this.tipsy.hide();\n      this.$el.unbind('mouseleave mouseenter');\n    }\n\n    if (this._tipsyOpenedManually) {\n      this.hideTipsy();\n    }\n\n    this.$el.removeData('tipsy');\n    delete this.tipsy;\n  },\n\n  clean: function () {\n    this.destroyTipsy();\n  }\n});\n\nvar isTooltipInsideViewport = function (bound, viewportBound, tooltipBound) {\n  if (bound === 'top' || bound === 'left') {\n    return viewportBound <= tooltipBound;\n  }\n\n  if (bound === 'right' || bound === 'bottom') {\n    return viewportBound >= tooltipBound;\n  }\n};\n\nvar getTooltipBodyGravity = function (gravityOptions, viewportBoundaries, tooltipBoundaries) {\n  var nonCollisioningEdges = _.filter(['e', 'w'], function (edge) {\n    var bound = gravityOptions[edge];\n    return isTooltipInsideViewport(bound, viewportBoundaries[bound], tooltipBoundaries[bound]);\n  });\n\n  if (nonCollisioningEdges.length === 1) {\n    return nonCollisioningEdges[0];\n  }\n\n  return '';\n};\n","var CoreView = require('backbone/core-view');\nvar template = require('./toggler.tpl');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\n\nmodule.exports = CoreView.extend({\n\n  className: 'Toggle',\n\n  events: {\n    'click .js-input': '_onClick'\n  },\n\n  initialize: function (opts) {\n    if (!opts.model) throw new Error('togglerModel should be provided');\n\n    this.model = opts.model;\n    this._onChange = this.model.get('onChange');\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    this.$el.append(\n      template({\n        labels: this.model.get('labels'),\n        checked: this.model.get('active'),\n        disabled: this.model.get('disabled') && this.model.get('isDisableable')\n      })\n    );\n\n    this._initViews();\n\n    return this;\n  },\n\n  _initViews: function () {\n    if (this.model.get('tooltip')) {\n      var helpTooltip = new TipsyTooltipView({\n        el: this.$('.js-input'),\n        gravity: 's',\n        offset: 0,\n        title: function () {\n          return this.model.get('tooltip');\n        }.bind(this)\n      });\n      this.addView(helpTooltip);\n    }\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.model, 'change:active', this.render);\n    this.listenTo(this.model, 'change:disabled', this.render);\n  },\n\n  _onClick: function () {\n    this.model.set('active', !this.model.get('active'));\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar template = require('./undo-redo.tpl');\nvar TipsyTooltipView = require('builder/components/tipsy-tooltip-view');\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-redo': '_onRedoClick',\n    'click .js-undo': '_onUndoClick',\n    'click .js-apply': '_onApplyClick',\n    'click .js-clear': '_onClearClick'\n  },\n\n  options: {\n    applyButton: false,\n    cancelButton: false\n  },\n\n  initialize: function (opts) {\n    if (!opts.editorModel) throw new Error('editorModel is required');\n    if (!opts.trackModel) throw new Error('trackModel is required');\n\n    this._trackModel = opts.trackModel;\n    this._editorModel = opts.editorModel;\n    this._clearModel = opts.clearModel;\n    this._applyStatusModel = opts.applyStatusModel;\n    this._overlayModel = opts.overlayModel;\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    var canClear = false;\n    if (this._clearModel) {\n      canClear = this._clearModel.get('visible') === true;\n    }\n\n    this.$el.html(\n      template({\n        canUndo: this._canUndo(),\n        canRedo: this._canRedo(),\n        canApply: this.options.applyButton && this._editorModel.isEditing(),\n        canClear: canClear,\n        isDisabled: this._isDisabled(),\n        isLoading: this._applyStatusModel && this._applyStatusModel.get('loading')\n      })\n    );\n\n    this._initViews();\n    this._checkButtonsStyle();\n\n    return this;\n  },\n\n  _initViews: function () {\n    if (this._canUndo()) {\n      var undoTooltip = new TipsyTooltipView({\n        el: this.$('.js-undo'),\n        gravity: 's',\n        title: function () {\n          return _t('components.undo-redo.undo');\n        }\n      });\n      this.addView(undoTooltip);\n    }\n\n    if (this._canRedo()) {\n      var redoTooltip = new TipsyTooltipView({\n        el: this.$('.js-redo'),\n        gravity: 's',\n        title: function () {\n          return _t('components.undo-redo.redo');\n        }\n      });\n      this.addView(redoTooltip);\n    }\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._trackModel, 'undo redo', this.render);\n    this.listenTo(this._trackModel, 'unredoChanged', this.render);\n\n    this.listenTo(this._editorModel, 'change:edition', this._checkButtonsStyle);\n\n    if (this._overlayModel) {\n      this.listenTo(this._overlayModel, 'change:visible', this.render);\n    }\n\n    if (this._clearModel) {\n      this.listenTo(this._clearModel, 'change', this.render);\n    }\n\n    if (this._applyStatusModel) {\n      this.listenTo(this._applyStatusModel, 'change:loading', this._applyStatusChanged);\n    }\n  },\n\n  _isDisabled: function () {\n    return this._overlayModel && this._overlayModel.get('visible');\n  },\n\n  _canRedo: function () {\n    return this._trackModel.canRedo() && !this._isDisabled();\n  },\n\n  _canUndo: function () {\n    return this._trackModel.canUndo() && !this._isDisabled();\n  },\n\n  _onUndoClick: function () {\n    if (this._trackModel.canUndo()) {\n      this._trackModel.undo();\n    }\n  },\n\n  _onRedoClick: function () {\n    if (this._trackModel.canRedo()) {\n      this._trackModel.redo();\n    }\n  },\n\n  _onApplyClick: function () {\n    if (this.options.applyButton && this.options.onApplyClick && !this._isDisabled()) {\n      this.options.onApplyClick();\n    }\n  },\n\n  _onClearClick: function () {\n    if (this.options.clearButton && this.options.onClearClick) {\n      this.options.onClearClick();\n    }\n  },\n\n  _checkButtonsStyle: function (m) {\n    var editing = this._editorModel.isEditing();\n    this._getIcons().toggleClass('u-actionTextColor', !editing);\n    this._getIcons().toggleClass('u-whiteTextColor', editing);\n  },\n\n  _getIcons: function () {\n    return this.$('.js-theme');\n  },\n\n  _applyStatusChanged: function () {\n    this.render();\n  }\n});\n","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\n\n/**\n * Convenient factory to create views without having to create new files.\n */\nmodule.exports = {\n\n  /**\n   * @param {String} html e.g. '<div>whatever</div>'\n   * @param {Object,undefined} viewOpts view options, .e.g {className: 'Whatever'}\n   * @return {Object} instance of CoreView, which takes two params of template and templateData\n   */\n  createByHTML: function (html, viewOpts) {\n    var view = new CoreView(viewOpts);\n    view.render = function () {\n      this.$el.html(html);\n      return this;\n    };\n\n    return view;\n  },\n\n  /**\n   * @param {Function} template e.g. from a `require('-/my-template.tpl')`\n   * @param {Object,undefined} templatedata\n   * @param {Object,undefined} viewOpts view options, .e.g {className: 'Whatever'}\n   * @return {Object} instance of CoreView, which takes two params of template and templateData\n   */\n  createByTemplate: function (template, templateData, viewOpts) {\n    var view = new CoreView(viewOpts);\n    view.render = function () {\n      this.$el.html(\n        template(templateData)\n      );\n      return this;\n    };\n\n    return view;\n  },\n\n  /**\n   * Creates an anonymous view to render a list of views as one.\n   * Useful when wanting to interact with other components that requires a single view as content.\n   *\n   * @example\n   *   var createViewList = [\n   *     function() { return new HeaderView({}); },\n   *     function() { return new ItemsView({}); },\n   *     function() { return new FooterView({}); }\n   *   ]\n   *   viewFactory.createListView(createViewList, {className: 'jsdoc-example'})\n   *\n   * @param {Array} fns - list of functions, each which should return a view representing an item in the list\n   * @param {Object} viewOpts\n   * @return {Object} A view\n   */\n  createListView: function (createViewFns, viewOpts) {\n    if (!(createViewFns && createViewFns.forEach)) throw new Error('createViewFns is required as an iterable list');\n    if (!_.all(createViewFns, _.isFunction)) throw new Error('createViewFns must only contain functions');\n\n    var listView = new CoreView(viewOpts);\n\n    listView.render = function () {\n      this.clearSubViews();\n\n      createViewFns.forEach(function (createItemView) {\n        var view = createItemView();\n        this.addView(view);\n        this.$el.append(view.render().el);\n      }, this);\n\n      return this;\n    };\n\n    return listView;\n  }\n};\n","var CoreView = require('backbone/core-view');\nvar template = require('./panel-with-options.tpl');\nvar InfoboxView = require('builder/components/infobox/infobox-view');\n\nmodule.exports = CoreView.extend({\n  initialize: function (opts) {\n    if (!opts.createContentView) throw new Error('createContentView factory function is mandatory');\n    if (!opts.editorModel) throw new Error('editorModel is required');\n\n    this.template = this.options.template || template;\n\n    this._createContentView = opts.createContentView;\n    this._editorModel = opts.editorModel;\n    this._createControlView = opts.createControlView;\n    this._createActionView = opts.createActionView;\n    this._infoboxModel = opts.infoboxModel;\n    this._infoboxCollection = opts.infoboxCollection;\n\n    this._editorModel.on('change:edition', this._setStyleMenu, this);\n    this.add_related_model(this._editorModel);\n  },\n\n  render: function () {\n    var contentView;\n    var controlView;\n    var actionView;\n    var infoboxView;\n\n    this.clearSubViews();\n    this.$el.empty();\n\n    this.$el.html(this.template());\n\n    contentView = this._createContentView();\n\n    this._content().html(contentView.render().el);\n    this.addView(contentView);\n\n    if (this._infoboxModel) {\n      infoboxView = new InfoboxView({\n        infoboxModel: this._infoboxModel,\n        infoboxCollection: this._infoboxCollection\n      });\n\n      this._info().html(infoboxView.render().el);\n      this.addView(infoboxView);\n    }\n\n    if (this._createControlView) {\n      controlView = this._createControlView();\n      this._controls().html(controlView.render().el);\n      this.addView(controlView);\n    }\n\n    if (this._createActionView) {\n      actionView = this._createActionView();\n      this._actions().html(actionView.render().el);\n      this.addView(actionView);\n    }\n\n    this._setStyleMenu();\n\n    return this;\n  },\n\n  _content: function () {\n    return this.$('.js-content');\n  },\n\n  _controls: function () {\n    return this.$('.js-controls');\n  },\n\n  _actions: function () {\n    return this.$('.js-actions');\n  },\n\n  _info: function () {\n    return this.$('.js-info');\n  },\n\n  _setStyleMenu: function () {\n    this.$('.js-theme').toggleClass('is-dark', this._editorModel.isEditing());\n  }\n});\n","/**\n *  Default upload config\n */\n\nmodule.exports = {\n  uploadStates: [\n    'pending',\n    'enqueued',\n    'uploading',\n    'unpacking',\n    'importing',\n    'guessing',\n    'complete'\n  ],\n  fileExtensions: [\n    'bz2',\n    'csv',\n    'gpkg',\n    'geojson',\n    'gz',\n    'json',\n    'kml',\n    'kmz',\n    'gpx',\n    'ods',\n    'osm',\n    'rar',\n    'tar',\n    'tgz',\n    'tif',\n    'tiff',\n    'tsv',\n    'txt',\n    'xls',\n    'xlsx',\n    'zip'\n  ],\n  // How big should the file be?\n  fileTimesBigger: 3\n};\n","var Backbone = require('backbone');\nvar _ = require('underscore');\nvar PermissionModel = require('./permission-model');\nvar OWN_ATTR_NAMES = ['id', 'username', 'avatar_url', 'name'];\n\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    access: 'r'\n  },\n\n  isOwn: function (model) {\n    return model.id === this.get('entity').id;\n  },\n\n  validate: function (attrs, options) {\n    if (attrs.access !== PermissionModel.READ_ONLY && attrs.access !== PermissionModel.READ_WRITE) {\n      return \"access can't take 'r' or 'rw' values\";\n    }\n  },\n\n  toJSON: function () {\n    var entity = _.pick(this.get('entity').toJSON(), OWN_ATTR_NAMES);\n    // translate name to username\n    if (!entity.username) {\n      entity.username = entity.name;\n      delete entity.name;\n    }\n    return {\n      type: this.get('type') || 'user',\n      entity: entity,\n      access: this.get('access')\n    };\n  }\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar camshaftReference = require('./camshaft-reference');\nvar QueryGeometryModel = require('./query-geometry-model');\nvar QuerySchemaModel = require('./query-schema-model');\nvar nodeIds = require('builder/value-objects/analysis-node-ids');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar QueryRowsCollection = require('./query-rows-collection');\nvar fetchAllQueryObjects = require('builder/helpers/fetch-all-query-objects');\nvar layerColors = require('builder/data/layer-colors');\n\nvar REQUIRED_OPTS = [\n  'configModel'\n];\n\n/**\n *  Base model for an analysis definition node.\n *  May point to one or multiple nodes in turn (referenced by ids).\n *\n *\n *  Analysis-definition-node-model\n *    Query-Schema-Model\n *    Query-Geometry-Model\n *    Query-Rows-Collection\n */\nmodule.exports = Backbone.Model.extend({\n\n  initialize: function (attrs, opts) {\n    if (!this.id) throw new Error('id is required');\n\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    var modelOpts = {\n      configModel: this._configModel,\n      userModel: opts.userModel\n    };\n\n    var simpleGeom = this.get('simple_geom');\n\n    this.querySchemaModel = new QuerySchemaModel(undefined, modelOpts);\n\n    this.queryGeometryModel = new QueryGeometryModel({\n      simple_geom: simpleGeom,\n      status: simpleGeom ? 'fetched' : 'unfetched'\n    }, modelOpts);\n\n    this.queryRowsCollection = new QueryRowsCollection([], {\n      configModel: this._configModel,\n      userModel: opts.userModel,\n      tableName: '',\n      querySchemaModel: this.querySchemaModel\n    });\n\n    this.listenTo(this.queryGeometryModel, 'change:simple_geom', this._onGeometryTypeChanged);\n  },\n\n  fetchQueryObjects: function () {\n    if (this.get('status') === 'ready' && !this.get('error')) {\n      fetchAllQueryObjects({\n        queryGeometryModel: this.queryGeometryModel,\n        querySchemaModel: this.querySchemaModel,\n        queryRowsCollection: this.queryRowsCollection\n      });\n    }\n  },\n\n  /**\n   * @override {Backbone.prototype.parse}  flatten the provided analysis data and create source nodes if there are any.\n   */\n  parse: function (r, opts) {\n    // Allow omitting type when merging into an existing node\n    var sourceNames = (!r.type && opts.merge) ? [] : camshaftReference.getSourceNamesForAnalysisType(r.type);\n\n    var parsedParams = _.reduce(r.params, function (memo, val, name) {\n      var sourceName = sourceNames[sourceNames.indexOf(name)];\n\n      if (sourceName) {\n        this.collection.add(val, opts);\n        memo[name] = val.id;\n      } else {\n        memo[name] = val;\n      }\n\n      return memo;\n    }, {}, this);\n\n    var parsedOptions = _.reduce(r.options, function (memo, val, name) {\n      memo[name] = val;\n      return memo;\n    }, {}, this);\n\n    return _.defaults(\n      _.omit(r, 'params', 'options'),\n      parsedOptions,\n      parsedParams\n    );\n  },\n\n  /**\n   * @override {Backbone.prototype.toJSON} unflatten the internal structure to the expected nested JSON data structure.\n   * @param {Object} options\n   * @param {Boolean} options.skipOptions - Add or not analysis options to the definition\n   */\n  toJSON: function (options) {\n    options = options || {};\n\n    var analysisParams = [];\n    var paramsforJSON = {};\n    var paramsForType = camshaftReference.paramsForType(this.get('type'));\n\n    // Undo the parsing of the params previously done in .parse() (when model was created)\n    for (var name in paramsForType) {\n      var param = paramsForType[name];\n      var val = this.get(name);\n      var includeParamInJSON = true;\n\n      if (param.type === 'node') {\n        var node = this.collection.get(val);\n        if (node) {\n          val = node.toJSON(options);\n        } else if (param.optional) { // Node has no value but is optional. We don't serialize it.\n          includeParamInJSON = false;\n        } else { // Node has no value and is required. Throw error.\n          throw new Error('no node found for param \"' + name + '\" with id \"' + val + '\" in node ' + JSON.stringify(this.attributes));\n        }\n      }\n\n      if (includeParamInJSON) {\n        paramsforJSON[name] = val;\n        analysisParams.push(name);\n      }\n    }\n\n    var json = {\n      id: this.get('id'),\n      type: this.get('type'),\n      params: paramsforJSON\n    };\n\n    // style_history is not sent at all (neither inside params nor options). It is always set by the backend.\n    var optionsAttrs = _.omit(this.attributes, analysisParams.concat('id', 'type', 'status', 'style_history'));\n    if (!(options.skipOptions || _.isEmpty(optionsAttrs))) {\n      json['options'] = optionsAttrs;\n    }\n\n    return json;\n  },\n\n  /**\n   * @override {Backbone.prototype.isNew} for this.destroy() to work (not try to send DELETE request)\n   */\n  isNew: function () {\n    return true;\n  },\n\n  isReadOnly: function () {\n    // By default, any node should be read only by default, except the source node (with exceptions)\n    return true;\n  },\n\n  isCustomQueryApplied: function () {\n    // By default, any node shouldn't have a custom query applied, except the source node\n    return false;\n  },\n\n  canBeDeletedByUser: function () {\n    return this.hasPrimarySource();\n  },\n\n  hasFailed: function () {\n    return this.get('status') === 'failed';\n  },\n\n  isDone: function () {\n    return this.get('status') === 'ready';\n  },\n\n  destroy: function () {\n    if (this.querySchemaModel) {\n      this.querySchemaModel.destroy();\n      this.querySchemaModel = null;\n    }\n\n    return Backbone.Model.prototype.destroy.apply(this, arguments);\n  },\n\n  /**\n   * Creates a new node that have same params as the current node, with only the id differing.\n   * @param {String} newId - e.g. 'b1'\n   * @return {Object} instance of analysis-definition-node-model\n   */\n  clone: function (newId) {\n    if (!newId) throw new Error('newId is required');\n    if (!_.isString(newId) || newId.length < 2) throw new Error('newId is required as a non-empty string');\n    if (newId === this.id) throw new Error('newId must be different from current id, ' + this.id);\n\n    var attrs = this.toJSON();\n    attrs.id = newId;\n    return this.collection.add(attrs);\n  },\n\n  linkedListBySameLetter: function () {\n    var list = [this];\n    var prev = this;\n    var letter = this.letter();\n\n    while (true) {\n      var current = prev.getPrimarySource();\n      if (current && current.letter() === letter) {\n        list.push(current);\n        prev = current;\n      } else {\n        break;\n      }\n    }\n\n    return list;\n  },\n\n  /**\n   * @return {Boolean, null} null if the geoemtry type of this node is not known,\n   *   this is to indicate that the query model is not ready yet, up to caller to make the call or not\n   */\n  isValidAsInputForType: function (analysisType) {\n    if (analysisType === 'source') return false;\n\n    var geometry = this.queryGeometryModel.get('simple_geom');\n    return geometry\n      ? camshaftReference.isValidInputGeometryForType(geometry, analysisType)\n      : null;\n  },\n\n  containsNode: function (other) {\n    if (!other) return false;\n    return this.id === other.id || this._sourcesContains(other);\n  },\n\n  hasPrimarySource: function () {\n    return !!this.getPrimarySource();\n  },\n\n  hasSecondarySource: function () {\n    return !!this.getSecondarySource();\n  },\n\n  getPrimarySource: function () {\n    return this.collection.get(this._getPrimarySourceId());\n  },\n\n  getSecondarySource: function () {\n    // Assumption: there are only 1-2 sources, so secondary is the one that's not the primary\n    var primarySourceId = this._getPrimarySourceId();\n    var secondarySourceId = _.find(this.sourceIds(), function (sourceId) {\n      return sourceId !== primarySourceId;\n    });\n    return this.collection.get(secondarySourceId);\n  },\n\n  // Default query by default is the query already applied in the node.\n  // For source node is totally different\n  getDefaultQuery: function () {\n    return this.get('query');\n  },\n\n  /**\n   * @return {Array} e.g. ['c3', 'b2']\n   */\n  sourceIds: function () {\n    return _.map(this._sourceNames(), function (sourceName) {\n      return this.get(sourceName);\n    }, this);\n  },\n\n  changeSourceIds: function (currentId, newId, silenty) {\n    this._sourceNames().forEach(function (sourceName) {\n      if (this.get(sourceName) === currentId) {\n        this.set(sourceName, newId, { silent: silenty });\n      }\n    }, this);\n  },\n\n  isSourceType: function () {\n    return this.get('type') === 'source';\n  },\n\n  letter: function () {\n    return nodeIds.letter(this.id);\n  },\n\n  getColor: function () {\n    var letter = nodeIds.letter(this.id);\n    return layerColors.getColorForLetter(letter);\n  },\n\n  getStyleHistoryForLayer: function (layer_id) {\n    var styleHistory = this.get('style_history');\n    return styleHistory && styleHistory[layer_id];\n  },\n\n  // Private methods\n\n  _sourcesContains: function (other) {\n    var primarySource = this.getPrimarySource();\n    var secondarySource = this.getSecondarySource();\n    return !!(\n      (primarySource && primarySource.containsNode(other)) ||\n      (secondarySource && secondarySource.containsNode(other))\n    );\n  },\n\n  _getPrimarySourceId: function () {\n    var primarySourceName = this.get('primary_source_name') || this._sourceNames()[0];\n    return this.get(primarySourceName);\n  },\n\n  /**\n   * @return {Array} e.g. ['polygons_source', 'points_source']\n   */\n  _sourceNames: function () {\n    return camshaftReference.getSourceNamesForAnalysisType(this.get('type'));\n  },\n\n  _onGeometryTypeChanged: function (model, value) {\n    this.set('simple_geom', value);\n  }\n\n});\n","var AnalysisDefinitionNodeModel = require('./analysis-definition-node-model');\nvar TableModel = require('./table-model');\nvar SQLUtils = require('builder/helpers/sql-utils');\n\n/**\n *  Case of a node model representing a source node.\n *  - It should provide new info about if the node is read only or not.\n *\n *  Analysis-definition-node-source-model\n *    Query-Schema-Model\n *    Query-Geometry-Model\n *    Table-Model\n */\nmodule.exports = AnalysisDefinitionNodeModel.extend({\n\n  defaults: {\n    status: 'ready'\n  },\n\n  /**\n   * @override AnalysisDefinitionNodeModel.prototype.initialize\n   */\n  initialize: function (attrs, opts) {\n    if (!opts.userModel) throw new Error('userModel is required');\n\n    this._userModel = opts.userModel;\n    AnalysisDefinitionNodeModel.prototype.initialize.apply(this, arguments);\n\n    var query = this.get('query');\n    this.querySchemaModel.set({\n      query: query,\n      ready: true\n    }, { silent: true });\n\n    this.queryGeometryModel.set({\n      query: query,\n      ready: true\n    }, { silent: true });\n\n    // TODO: we should check if it is necessary to check if we have to overwrite the whole\n    //       initialize or with this change is enough.\n    this.queryRowsCollection._tableName = this.get('table_name');\n\n    var tableData = opts.tableData || { name: this.get('table_name') };\n    this.tableModel = new TableModel(tableData, {\n      configModel: opts.configModel,\n      parse: true\n    });\n  },\n\n  getDefaultQuery: function () {\n    return SQLUtils.getDefaultSQL(\n      this.get('table_name'),\n      this.tableModel.getOwnerName(),\n      this._userModel.isInsideOrg()\n    );\n  },\n\n  isCustomQueryApplied: function () {\n    return !SQLUtils.isSameQuery(\n      this.querySchemaModel.get('query'),\n      this.getDefaultQuery()\n    );\n  },\n\n  isReadOnly: function () {\n    var isTableReadOnly = this.tableModel.isReadOnly(this._userModel);\n    var hasCustomQuery = this.isCustomQueryApplied();\n    return isTableReadOnly || hasCustomQuery;\n  },\n\n  getTableModel: function () {\n    return this.tableModel;\n  },\n\n  fetchTable: function () {\n    if (!this.tableModel.get('id')) {\n      this.tableModel.fetch();\n    }\n  },\n\n  setTableName: function (name) {\n    if (!name) throw new Error('name is required');\n\n    this.set('table_name', name);\n    this.tableModel.set('name', name);\n    this.queryRowsCollection.setTableName(name);\n    this.querySchemaModel.set({\n      status: 'unfetched',\n      query: this.getDefaultQuery()\n    });\n  }\n\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar Utils = require('builder/helpers/utils');\n\nrequire('backbone-model-file-upload');\n\nmodule.exports = Backbone.Model.extend({\n  fileAttribute: 'filename',\n\n  defaults: {\n    type: '',\n    filename: '',\n    interval: 0,\n    progress: 0,\n    state: 'idle',\n    option: ''\n  },\n\n  _initBinds: function () {\n    this.bind('progress', function (progress) {\n      this.set({\n        progress: progress * 100,\n        state: 'uploading'\n      });\n    }, this);\n\n    this.bind('change:filename change:url', function () {\n      if (this.get('state') === 'error') {\n        this.set({ state: 'idle' });\n        this.unset('get_error_text', { silent: true });\n      }\n    }, this);\n\n    this.bind('error invalid', function (m, d) {\n      this.set({\n        state: 'error',\n        error_code: (d && d.error_code) || '',\n        get_error_text: {\n          title: _t('componentes.data.asset-model.invalid-import'),\n          what_about: (d && d.msg) || ''\n        }\n      }, { silent: true });\n      // We need this, if not validate will run again and again and again... :(\n      this.trigger('change');\n    }, this);\n  },\n\n  validate: function (attrs) {\n    if (!attrs) {\n      return;\n    }\n\n    if (attrs.type === 'filename') { // Number of files\n      if (attrs.filename && attrs.filename.length) {\n        return {\n          msg: _t('componentes.data.asset-model.one-file-per-upload')\n        };\n      }\n      // File extension\n      var name = attrs.filename.name;\n      var ext = name.substr(name.lastIndexOf('.') + 1);\n\n      if (ext) {\n        ext = ext.toLowerCase();\n      }\n\n      if (!_.contains(['jpg', 'png', 'gif', 'svg'], ext)) {\n        return {\n          msg: _t('componentes.data.asset-model.invalid-extension')\n        };\n      }\n    }\n\n    if (attrs.type === 'url') { // Valid URL?\n      if (!Utils.isURL(attrs.url)) {\n        return {\n          msg: _t('componentes.data.asset-model.invalid-url')\n        };\n      }\n    }\n  },\n\n  isValid: function () {\n    return (this.get('filename') || this.get('url')) && this.get('state') !== 'error';\n  },\n\n  upload: function () {\n    var self = this;\n\n    var options = {\n      kind: this.get('kind')\n    };\n\n    if (this.get('type') === 'file') {\n      options.filename = this.get('filename');\n    } else if (this.get('type') === 'url') {\n      options.filename = this.get('filename');\n    }\n\n    this.xhr = this.save(options, {\n      success: function (m) {\n        m.set('state', 'uploaded');\n      },\n\n      error: function (m, msg) {\n        var response;\n        var message = _t('componentes.data.asset-model.connection-error');\n\n        if (msg && msg.status === 429) {\n          response = JSON.parse(msg.responseText);\n          message = response.error;\n        } else if (msg && msg.status === 400) {\n          response = JSON.parse(msg.responseText);\n          message = response.error;\n        }\n\n        self.set({\n          state: 'error',\n          get_error_text: { title: _t('componentes.data.asset-model.error'), what_about: message }\n        });\n      },\n\n      complete: function () {\n        delete self.xhr;\n      }\n    });\n  },\n\n  stopUpload: function () {\n    if (this.xhr) this.xhr.abort();\n  }\n});\n","var Backbone = require('backbone');\nvar AssetModel = require('./asset-model');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'configModel',\n  'userModel'\n];\n\nmodule.exports = Backbone.Collection.extend({\n  model: AssetModel,\n\n  url: function (method) {\n    var baseUrl = this._configModel.get('base_url');\n    var version = this._configModel.urlVersion('asset', method);\n    return baseUrl + '/api/' + version + '/users/' + this._userModel.get('id') + '/assets';\n  },\n\n  initialize: function (models, opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n  },\n\n  parse: function (resp, xhr) {\n    return resp.assets;\n  },\n\n  selectAll: function () {\n    this.each(function (mdl) {\n      mdl.set('state', 'selected');\n    });\n  },\n\n  deselectAll: function (m) {\n    this.each(function (mdl) {\n      if (mdl !== m && mdl.get('state') === 'selected') {\n        mdl.set('state', '');\n      }\n    });\n  }\n});\n","const $ = require('jquery');\nconst _ = require('underscore');\n\n/**\n * Network Interceptors\n *\n * Tool to easily intercept network responses in order\n * to override or add behaviours on top of the usual ones\n */\n\nfunction NetworkResponseInterceptor () {\n  this._originalAjax = $.ajax;\n  this._successInterceptors = [];\n  this._errorInterceptors = [];\n  this._urlPatterns = [];\n}\n\nNetworkResponseInterceptor.prototype.start = function () {\n  let onRequestStart = this._onRequestStart.bind(this);\n\n  this._onRequestStart = onRequestStart;\n  $.ajax = onRequestStart;\n};\n\nNetworkResponseInterceptor.prototype.stop = function () {\n  $.ajax = this._originalAjax;\n};\n\nNetworkResponseInterceptor.prototype.addURLPattern = function (pattern) {\n  this._urlPatterns.push(pattern);\n};\n\nNetworkResponseInterceptor.prototype.addSuccessInterceptor = function (interceptorFn) {\n  this._successInterceptors.push(interceptorFn);\n};\n\nNetworkResponseInterceptor.prototype.addErrorInterceptor = function (interceptorFn) {\n  this._errorInterceptors.push(interceptorFn);\n};\n\nNetworkResponseInterceptor.prototype._shouldListenToRequest = function (url) {\n  let patternChecks = this._urlPatterns.map(function (pattern) {\n    return url.indexOf(pattern) > -1;\n  });\n\n  return _.some(patternChecks);\n};\n\nNetworkResponseInterceptor.prototype._onRequestStart = function (url, options) {\n  let requestUrl = null;\n  let requestOptions = {};\n\n  if (typeof url === 'string') {\n    requestUrl = url;\n  } else if (typeof url === 'object' && url.url) {\n    requestUrl = url.url;\n  }\n\n  if (options) {\n    requestOptions = options;\n  } else if (typeof url === 'object') {\n    requestOptions = url;\n  }\n\n  if (!this._shouldListenToRequest(requestUrl)) {\n    return this._originalAjax.apply(this, arguments);\n  }\n\n  if (requestOptions.error || requestOptions.success) {\n    const errorCallback = requestOptions.error;\n    const successCallback = requestOptions.success;\n\n    const interceptErrorFn = function () {\n      this._applyErrorInterceptors.apply(this, arguments);\n      errorCallback && errorCallback.apply(this, arguments);\n    };\n\n    const interceptSuccessFn = function () {\n      this._applySuccessInterceptors.apply(this, arguments);\n      successCallback && successCallback.apply(this, arguments);\n    };\n\n    requestOptions.error = interceptErrorFn.bind(this);\n    requestOptions.success = interceptSuccessFn.bind(this);\n  }\n\n  return this._originalAjax(requestUrl, requestOptions);\n};\n\nNetworkResponseInterceptor.prototype._applyErrorInterceptors = function (xhr, textStatus, errorThrown) {\n  if (!this._errorInterceptors.length) {\n    return;\n  }\n\n  this._errorInterceptors.map(function (interceptorFunction) {\n    interceptorFunction(xhr, textStatus, errorThrown);\n  });\n};\n\nNetworkResponseInterceptor.prototype._applySuccessInterceptors = function (response, textStatus, xhr) {\n  if (!this._successInterceptors.length) {\n    return;\n  }\n\n  this._successInterceptors.map(function (interceptorFunction) {\n    interceptorFunction(response, textStatus, xhr);\n  });\n};\n\nmodule.exports = new NetworkResponseInterceptor();\nmodule.exports.NetworkResponseInterceptor = NetworkResponseInterceptor;\n","/**\n * 403 Forbidden Network Error Interceptor\n *\n * This interceptor redirects 403 errors\n * to their corresponding routes\n */\n\nconst LOGIN_ROUTE = '/login?error=session_expired';\nconst SESSION_EXPIRED = 'session_expired';\nconst MFA_REQUIRED = 'mfa_required';\nconst MFA_ROUTE = '/multifactor_authentication';\nconst MAINTENANCE_MODE = 'maintenance_mode';\nconst MAINTENANCE_MODE_ROUTE = '/maintenance_mode';\nconst LOCKOUT = 'lockout';\nconst LOCKOUT_ROUTE = '/lockout';\n\nconst subdomainMatch = /https?:\\/\\/([^.]+)/;\n\nconst redirectRoutes = {\n  [SESSION_EXPIRED]: LOGIN_ROUTE,\n  [MFA_REQUIRED]: MFA_ROUTE,\n  [MAINTENANCE_MODE]: MAINTENANCE_MODE_ROUTE,\n  [LOCKOUT]: LOCKOUT_ROUTE\n};\n\nmodule.exports = function (username) {\n  return function (xhr, textStatus, errorThrown) {\n    if (xhr.status !== 403) return;\n\n    const error = xhr.responseJSON && xhr.responseJSON.error;\n    const redirectRoute = redirectRoutes[error];\n\n    if (!redirectRoute) {\n      return;\n    }\n\n    URLFunctions.redirectTo(\n      URLFunctions.getRedirectURL(window.location.origin, redirectRoute, username)\n    );\n  };\n};\n\nconst URLFunctions = {\n  getRedirectURL: function getRedirectURL (currentURLOrigin, route, username) {\n    if (!username) {\n      return currentURLOrigin + route;\n    }\n\n    const newURL = currentURLOrigin.replace(subdomainMatch, function () {\n      return username;\n    });\n\n    return `${window.location.protocol}//${newURL}${route}`;\n  },\n\n  redirectTo: function redirectTo (url) {\n    window.location = url;\n  }\n};\n\nmodule.exports.URLFunctions = URLFunctions;\n","var Backbone = require('backbone');\n\n/**\n * Custom sync method to only allow a single request at a time,\n * any prev ongoing request at a time of a sync call will be aborted.\n *\n * @example\n *   var MyModel = Backbone.Model.extend({\n *     // \n *     sync: syncAbort,\n */\nmodule.exports = function (method, self, opts) {\n  if (this._xhr) {\n    this._xhr.abort();\n  }\n\n  var xhr = this._xhr = Backbone.Model.prototype.sync.apply(this, arguments);\n  xhr.always(function () {\n    self._xhr = null;\n  });\n\n  return xhr;\n};\n","var _ = require('underscore');\nvar Poller = require('./poller');\n\nvar ImportModelPoller = function (model) {\n  var POLLING_INTERVAL = 2000; // Interval time between poll checkings\n  var POLLING_INTERVAL_MULTIPLIER = 2.5; // Multiply interval by this number\n  var POLLING_REQUESTS_BEFORE_INTERVAL_CHANGE = 30; // Max tries until interval change\n\n  var options = {\n    interval: function (numberOfRequests) {\n      if (numberOfRequests >= POLLING_REQUESTS_BEFORE_INTERVAL_CHANGE) {\n        return POLLING_INTERVAL * POLLING_INTERVAL_MULTIPLIER;\n      }\n      return POLLING_INTERVAL;\n    },\n    stopWhen: function (model) {\n      var state = model.get('state');\n      return (state === 'complete' || state === 'failure');\n    }\n  };\n\n  Poller.call(this, model, options);\n};\n\nImportModelPoller.prototype = _.extend({}, Poller.prototype);\n\nmodule.exports = ImportModelPoller;\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar ImportModelPoller = require('./import-model-poller');\nvar SynchronizationModel = require('builder/data/synchronization-model');\n\n/**\n *  New import model that controls\n *  the state of an import\n *\n */\nmodule.exports = Backbone.Model.extend({\n\n  idAttribute: 'item_queue_id',\n\n  initialize: function (attrs, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n\n    this._configModel = opts.configModel;\n\n    this._initBinds();\n    this.poller = new ImportModelPoller(this);\n  },\n\n  urlRoot: function () {\n    var version = this._configModel.urlVersion('import');\n    var baseUrl = this._configModel.get('base_url');\n\n    return baseUrl + '/api/' + version + '/imports';\n  },\n\n  _initBinds: function () {\n    this.bind('change:item_queue_id', this._checkQueueId, this);\n  },\n\n  createImport: function (data) {\n    var d = this._prepareData(data);\n    this[d.interval === 0 ? '_createRegularImport' : '_createSyncImport'](d);\n  },\n\n  _checkQueueId: function () {\n    if (this.get('item_queue_id')) {\n      this.pollCheck();\n    }\n  },\n\n  _prepareData: function (data) {\n    var d = {\n      create_vis: data.create_vis,\n      privacy: data.privacy\n    };\n\n    var type = data.type;\n\n    if (type !== 'remote') {\n      _.extend(d, {\n        type_guessing: data.type_guessing,\n        content_guessing: data.content_guessing,\n        interval: data.interval\n      });\n    }\n\n    var service = data.service_name;\n\n    if (type === 'url') {\n      _.extend(d, {\n        url: data.value\n      });\n    }\n\n    if (type === 'remote') {\n      _.extend(d, {\n        type: 'remote',\n        interval: null,\n        remote_visualization_id: data.remote_visualization_id,\n        create_vis: false,\n        value: data.value\n      });\n    }\n\n    if (type === 'sql') {\n      _.extend(d, {\n        table_name: data.table_name,\n        sql: data.value\n      });\n    }\n\n    if (type === 'duplication') {\n      _.extend(d, {\n        table_name: data.table_name,\n        table_copy: data.value\n      });\n    }\n\n    if (type === 'service') {\n      // If service is Twitter, service_item_id should be\n      // sent stringified\n      var service_item_id = (service === 'twitter_search') ? JSON.stringify(data.service_item_id) : data.service_item_id;\n\n      if (data.user_defined_limits) {\n        d.user_defined_limits = data.user_defined_limits;\n      }\n\n      _.extend(d, {\n        value: data.value,\n        service_name: data.service_name,\n        service_item_id: service_item_id\n      });\n    }\n\n    return d;\n  },\n\n  _createSyncImport: function (d) {\n    var self = this;\n    this._synchronizationModel = new SynchronizationModel(d, {\n      configModel: this._configModel\n    });\n\n    this._synchronizationModel.save(null, {\n      success: function (m) {\n        self.set('item_queue_id', m.get('data_import').item_queue_id);\n      },\n      error: function (mdl, r, opts) {\n        self._setErrorState(r);\n      }\n    });\n  },\n\n  _createRegularImport: function (d) {\n    var self = this;\n\n    this.save(d, {\n      error: function (mdl, r, opts) {\n        self._setErrorState(r);\n      }\n    });\n  },\n\n  _setErrorState: function (r) {\n    var msg;\n    try {\n      msg = r && JSON.parse(r.responseText).errors.imports;\n    } catch (err) {\n      msg = _t('data.import-model.error-starting-import');\n    }\n    this.set({\n      state: 'failure',\n      get_error_text: {\n        title: _t('data.import-model.error-title'),\n        what_about: msg\n      }\n    });\n  },\n\n  pollCheck: function () {\n    this.poller.start();\n  },\n\n  destroyCheck: function () {\n    this.poller.stop();\n  }\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar ImportModel = require('./import-model');\nvar UploadModel = require('builder/data/upload-model');\nvar VisDefinitionModel = require('builder/data/vis-definition-model');\nvar PermissionModel = require('builder/data/permission-model');\n\n/**\n *  Upload/import model\n *\n *  It takes the control of the upload and import,\n *  listening the change of any of these steps.\n *\n *  Steps:\n *  - upload\n *  - import\n *\n */\n\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    step: 'upload',\n    state: ''\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.userModel) throw new Error('userModel is required');\n    if (!opts.configModel) throw new Error('configModel is required');\n\n    this._userModel = opts.userModel;\n    this._configModel = opts.configModel;\n\n    this._uploadModel = new UploadModel(opts.upload, {\n      userModel: this._userModel,\n      configModel: this._configModel\n    });\n\n    if (_.isEmpty(opts)) {\n      opts = {};\n    }\n\n    this._importModel = new ImportModel(opts.import, {\n      configModel: this._configModel\n    });\n    this._initBinds();\n    this._checkStatus();\n  },\n\n  _initBinds: function () {\n    this.bind('change:import', this._onImportChange, this);\n    this.bind('change:upload', this._onUploadChange, this);\n    this.bind('change:id', this._onIdChange, this);\n\n    this._importModel.bind('change', function () {\n      this.trigger('change:import', this);\n      this.trigger('change', this);\n    }, this);\n\n    this._uploadModel.bind('change', function () {\n      this.trigger('change:upload', this);\n      this.trigger('change', this);\n    }, this);\n  },\n\n  _destroyBinds: function () {\n    this._uploadModel.unbind(null, null, this);\n    this._importModel.unbind(null, null, this);\n  },\n\n  _onIdChange: function () {\n    var item_queue_id = this.get('id');\n    if (item_queue_id) this._importModel.set('item_queue_id', item_queue_id);\n    this.set('step', 'import');\n  },\n\n  _onUploadChange: function (m, i) {\n    if (this.get('step') === 'upload') {\n      var item_queue_id = this._uploadModel.get('item_queue_id');\n      var state = this._uploadModel.get('state');\n\n      if (item_queue_id) this.set('id', item_queue_id);\n      if (state) this.set('state', state);\n    }\n  },\n\n  _onImportChange: function () {\n    if (this.get('step') === 'import') {\n      var state = this._importModel.get('state');\n      if (state) this.set('state', state);\n    }\n  },\n\n  _checkStatus: function () {\n    if (!this.get('id') && !this._uploadModel.isValid()) {\n      this.trigger('change:upload');\n      return;\n    }\n\n    if (this._uploadModel.get('type') === 'file') {\n      this._uploadModel.upload();\n    } else if (this.get('id')) {\n      this.set('step', 'import');\n      this._importModel.set('item_queue_id', this.get('id'));\n    } else if (!this._importModel.get('item_queue_id') && this._uploadModel.get('type') !== '') {\n      this.set('step', 'import');\n      this._importModel.createImport(this._uploadModel.toJSON());\n    }\n  },\n\n  getImportModel: function () {\n    return this._importModel;\n  },\n\n  pause: function () {\n    this.stopUpload();\n    this.stopImport();\n  },\n\n  hasFailed: function () {\n    var state = this.get('state');\n    var step = this.get('step');\n\n    return (step === 'import' && state === 'failure') || (step === 'upload' && state === 'error');\n  },\n\n  hasCompleted: function () {\n    return this.get('step') === 'import' && this._importModel && this._importModel.get('state') === 'complete';\n  },\n\n  getWarnings: function () {\n    return this.get('step') === 'import' ? this._importModel.get('warnings') : '';\n  },\n\n  getError: function () {\n    if (this.hasFailed()) {\n      var step = this.get('step');\n      return _.extend(\n        {\n          errorCode: this[step === 'upload' ? '_uploadModel' : '_importModel'].get('error_code'),\n          itemQueueId: step === 'import' ? this._importModel.get('id') : '',\n          originalUrl: step === 'import' ? this._importModel.get('original_url') : '',\n          dataType: step === 'import' ? this._importModel.get('data_type') : '',\n          httpResponseCode: step === 'import' ? this._importModel.get('http_response_code') : '',\n          httpResponseCodeMessage: step === 'import' ? this._importModel.get('http_response_code_message') : ''\n        },\n        this[step === 'upload' ? '_uploadModel' : '_importModel'].get('get_error_text'));\n    }\n\n    return {\n      title: '',\n      what_about: '',\n      error_code: ''\n    };\n  },\n\n  importedVis: function () {\n    if (this.get('import').derived_visualization_id) {\n      return this._getMapVis();\n    } else {\n      return this._getDatasetVis();\n    }\n  },\n\n  getNumberOfTablesCreated: function () {\n    return this._importModel.get('tables_created_count');\n  },\n\n  _getServiceName: function () {\n    return this._importModel.get('service_name');\n  },\n\n  isTwitterImport: function () {\n    return this._getServiceName() === 'twitter_search';\n  },\n\n  isCartoImport: function () {\n    return this._getDisplayName() && this._getDisplayName().match(/\\.carto$/i);\n  },\n\n  _getDisplayName: function () {\n    return this._importModel.get('display_name');\n  },\n\n  _getMapVis: function () {\n    var derivedVisId = this._importModel.get('derived_visualization_id');\n\n    if (!derivedVisId) {\n      return false;\n    }\n\n    return this._createVis({\n      type: 'derived',\n      id: derivedVisId\n    });\n  },\n\n  _getDatasetVis: function () {\n    var tableName = this._importModel.get('table_name');\n\n    if (!tableName) {\n      return false;\n    }\n\n    return this._createVis({\n      type: 'table',\n      table: {\n        name: tableName\n      }\n    });\n  },\n\n  _createVis: function (attrs) {\n    var vis = new VisDefinitionModel(attrs, {\n      configModel: this._configModel\n    });\n\n    vis.permission = new PermissionModel({\n      // TODO: check that this works in builder\n      owner: this._userModel.attributes\n    }, {\n      configModel: this._configModel,\n      userModel: this._userModel\n    });\n\n    return vis;\n  },\n\n  setError: function (opts) {\n    var stepModel = this[this.get('step') === 'upload' ? '_uploadModel' : '_importModel'];\n\n    this.stopUpload();\n    this.stopImport();\n\n    stepModel.set(opts);\n\n    this.set('state', 'error');\n  },\n\n  stopUpload: function () {\n    this._uploadModel.stopUpload();\n  },\n\n  stopImport: function () {\n    this._importModel.destroyCheck();\n  },\n\n  get: function (attr) {\n    if (attr === 'upload') {\n      return this._uploadModel.toJSON();\n    }\n\n    if (attr === 'import') {\n      return this._importModel.toJSON();\n    }\n\n    return Backbone.Model.prototype.get.call(this, attr);\n  },\n\n  getRedirectUrl: function (user) {\n    var vis = this.importedVis();\n    if (vis) {\n      return encodeURI(vis.viewUrl(user).edit());\n    }\n  },\n\n  toJSON: function () {\n    return {\n      step: this.get('step'),\n      id: this.get('id'),\n      state: this.get('state'),\n      upload: this._uploadModel.toJSON(),\n      import: this._importModel.toJSON()\n    };\n  }\n});\n","var _ = require('underscore');\n\n/*\n * Periodically fetches a model/collection. It waits for ongoing\n * fetch requests before trying to fetch again. A stop condition\n * can be specified.\n *\n * Usage example:\n *\n * var poller = new Poller(model, {\n *   interval: 1000,\n *   stopWhen: function (model) {\n *     return model.get('state') === 'completed';\n *   }\n * });\n *\n * poller.start();\n *\n * // ...\n *\n * poller.stop();\n *\n */\nvar Poller = function (model, opts) {\n  this.model = model;\n  this.numberOfRequests = 0;\n  this.polling = false;\n  this.interval = opts.interval;\n  if (typeof this.interval !== 'function') {\n    this.interval = function () { return opts.interval; };\n  }\n  this.stopWhen = opts.stopWhen;\n  this.error = opts.error;\n  this.autoStart = opts.autoStart;\n\n  if (this.autoStart) {\n    this.start();\n  }\n};\n\nPoller.prototype.start = function () {\n  if (this.timeout) {\n    return;\n  }\n\n  this._scheduleFetch();\n};\n\nPoller.prototype._scheduleFetch = function () {\n  this.timeout = setTimeout(this._fetch.bind(this), this.interval(this.numberOfRequests));\n};\n\nPoller.prototype._fetch = function () {\n  var self = this;\n  if (!self.polling) {\n    self.polling = true;\n    self.model.fetch({\n      success: function () {\n        self.polling = false;\n        self.numberOfRequests++;\n        if (self._continuePolling()) {\n          self._scheduleFetch();\n        }\n      },\n      error: function (e) {\n        _.isFunction(self.error) && self.error(self.model);\n      }\n    });\n  }\n};\n\nPoller.prototype._continuePolling = function () {\n  return !this.stopWhen ||\n    (_.isFunction(this.stopWhen) && !this.stopWhen(this.model));\n};\n\nPoller.prototype.stop = function () {\n  this.polling = false;\n  clearTimeout(this.timeout);\n  delete this.timeout;\n};\n\nmodule.exports = Poller;\n","var _ = require('underscore');\nvar camshaftReference = require('camshaft-reference').getVersion('latest');\nvar DefaultCartography = require('./default-cartography.json');\n\nvar SOURCE_NAMES_MAP = {}; // string -> array, e.g. {'intersection': ['source', 'target']}\nvar DEFAULT_MISSING_PARAM_VALUES = [undefined, null, '', NaN];\n\nmodule.exports = {\n  hasType: function (type) {\n    return !!camshaftReference.analyses[type];\n  },\n\n  paramsForType: function (type) {\n    if (!this.hasType(type)) throw new Error('no analysis params found for type: ' + type);\n\n    return _.clone(camshaftReference.analyses[type].params);\n  },\n\n  /**\n   * Validate raw form attrs\n   * @param {Object} formAttrs - e.g. {type: 'buffer', source: 'a0', radius: 'meh'}\n   * @return {Object, undefined} returns an object with keys as faulty input, e.g. {radius: 'invalid-value'} for above\n   */\n  validate: function (formAttrs) {\n    var errors = {};\n\n    var parsedAttrs = this.parse(formAttrs);\n    var params = this.paramsForType(formAttrs.type);\n\n    for (var name in params) {\n      var param = params[name];\n      var val = parsedAttrs[name];\n\n      if (!param.optional || val !== undefined) {\n        switch (param.type) {\n          case 'node':\n            if (!val) {\n              errors[name] = _t('data.analysis-definition-node-model.validation.invalid-source');\n            }\n            break;\n          case 'number':\n            if (isNaN(val)) {\n              errors[name] = _t('data.analysis-definition-node-model.validation.invalid-value');\n            }\n            break;\n          case 'enum':\n            if (!_.contains(param.values, val)) {\n              errors[name] = _t('data.analysis-definition-node-model.validation.invalid-enum', {expectedValues: JSON.stringify(param.values)});\n            }\n            break;\n          default:\n            if (val === null) {\n              errors[name] = _t('data.analysis-definition-node-model.validation.missing-required');\n            }\n        }\n      }\n    }\n\n    if (!_.isEmpty(errors)) {\n      return errors;\n    }\n  },\n\n  /**\n   * Get type-parsed attrs from the raw form attrs\n   * @param {Object} formAttrs - e.g. {type: 'buffer', source: 'a0 ', radius: '123', dissolved: 'false'}\n   * @return {Object} e.g. {type: 'buffer', source: 'a0', radius: 123, dissolved: false}\n   */\n  parse: function (formAttrs) {\n    var parsedAttrs = _.extend({}, formAttrs);\n    var params = this.paramsForType(formAttrs.type);\n\n    for (var name in params) {\n      var param = params[name];\n      var val = parsedAttrs[name];\n\n      if (param.optional && _.contains(DEFAULT_MISSING_PARAM_VALUES, val)) {\n        delete parsedAttrs[name];\n      } else {\n        switch (param.type) {\n          case 'node':\n            parsedAttrs[name] = (val || '').trim();\n            break;\n          case 'number':\n            parsedAttrs[name] = parseFloat(val, 10);\n            break;\n          case 'boolean':\n            parsedAttrs[name] = val === 'true' || val === true;\n            break;\n          default:\n            if (_.contains(DEFAULT_MISSING_PARAM_VALUES, val)) {\n              parsedAttrs[name] = null;\n            } else if (_.isString(val)) {\n              parsedAttrs[name] = val.trim();\n            }\n        }\n      }\n    }\n\n    return parsedAttrs;\n  },\n\n  getSourceNamesForAnalysisType: function (type) {\n    if (!SOURCE_NAMES_MAP[type]) {\n      var sourceNames = [];\n      var params = this.paramsForType(type);\n\n      for (var name in params) {\n        var param = params[name];\n        if (param.type === 'node') {\n          sourceNames.push(name);\n        }\n      }\n\n      SOURCE_NAMES_MAP[type] = sourceNames;\n    }\n\n    return SOURCE_NAMES_MAP[type];\n  },\n\n  getDefaultCartoCSSForType: function () {\n    return _.template([\n      \"#layer['mapnik::geometry_type'=1] {\",\n      '  marker-width: <%= point.fill.size.fixed %>;',\n      '  marker-fill: <%= point.fill.color.fixed %>;',\n      '  marker-fill-opacity: <%= point.fill.color.opacity %>;',\n      '  marker-line-color: <%= point.stroke.color.fixed %>;',\n      '  marker-line-width: <%= point.stroke.size.fixed %>;',\n      '  marker-line-opacity: <%= point.stroke.color.opacity %>;',\n      '  marker-type: ellipse;',\n      '  marker-allow-overlap: true;',\n      '}',\n      \"#layer['mapnik::geometry_type'=2] {\",\n      '  line-color: <%= line.stroke.color.fixed %>;',\n      '  line-width: <%= line.stroke.size.fixed %>;',\n      '  line-opacity: 1;',\n      '}',\n      \"#layer['mapnik::geometry_type'=3] {\",\n      '  polygon-fill: <%= polygon.fill.color.fixed %>;',\n      '  polygon-opacity: <%= polygon.fill.color.opacity %>;',\n      '  ::outline {',\n      '    line-color: <%= polygon.stroke.color.fixed%>;',\n      '    line-width: <%= polygon.stroke.size.fixed %>;',\n      '    line-opacity: <%= polygon.stroke.color.opacity %>;',\n      '  }',\n      '}'\n    ].join('\\n'))(DefaultCartography.simple);\n  },\n\n  isValidInputGeometryForType: function (simpleGeometryType, analysisType) {\n    var validGeometries = this.getValidInputGeometriesForType(analysisType);\n    return _.contains(validGeometries, simpleGeometryType) || _.contains(validGeometries, '*');\n  },\n\n  getValidInputGeometriesForType: function (analysisType) {\n    var params = this.paramsForType(analysisType);\n\n    var geometries = [];\n\n    for (var name in params) {\n      var param = params[name];\n      if (param.type === 'node') {\n        geometries = _.union(geometries, param.geometry);\n      }\n    }\n\n    return geometries;\n  }\n};\n","var Backbone = require('backbone');\n\nmodule.exports = Backbone.Model.extend({\n  idAttribute: 'name'\n});\n","var Backbone = require('backbone');\nvar _ = require('underscore');\n\n/**\n * Model for general frontend configuration.\n * Ported from old cdb.config, since we can't reuse the older model that's tied to v3 of cartodb.js\n *\n * Also, rather than putting it as a global object, it's intended to be instantiated at the entry point and passed as\n * a collaborator object the models that needs it, e.g.:\n * var myModel = new MyModel({ id: 123,  }, {\n *   configModel: configModel\n * })\n */\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    base_url: '/CHANGEME' // expected to be set when model is created\n  },\n\n  urlVersion: function (modelName, method, defaultVersion) {\n    method = method || '';\n    var version = this.get(modelName + '_' + method + '_url_version');\n    return version || defaultVersion || 'v1';\n  },\n\n  /**\n   * @param {String} [version=v2] Version of API to use\n   * @return {String} the full sql api url, including the api endpoint, e.g. http://user.carto.com/api/v2/sql\n   */\n  getSqlApiUrl: function (version) {\n    version = version || 'v2';\n    return this._getSqlApiBaseUrl() + '/api/' + version + '/sql';\n  },\n\n  /**\n   * @return {String} returns the base url to compose the final url, e.g. http://user.carto.com/\n   */\n  _getSqlApiBaseUrl: function () {\n    var url;\n    if (this.get('sql_api_template')) {\n      url = this.get('sql_api_template').replace('{user}', this.get('user_name'));\n    } else {\n      url = this.get('sql_api_protocol') + '://' +\n        this.get('user_name') + '.' +\n        this.get('sql_api_domain') + ':' +\n        this.get('sql_api_port');\n    }\n    return url;\n  },\n\n  dataServiceEnabled: function (name) {\n    var dataServices = this.get('dataservices_enabled');\n    if (!dataServices || !_.size(dataServices) || !name) {\n      return false;\n    }\n    return !!dataServices[name];\n  },\n\n  dataLibraryEnabled: function () {\n    return this.get('data_library_enabled');\n  },\n\n  isHosted: function () {\n    return this.get('cartodb_com_hosted');\n  }\n});\n","/* global Image */\n\nvar Backbone = require('backbone');\nvar _ = require('underscore');\n\nmodule.exports = Backbone.Model.extend({\n\n  getAttributes: function () {\n    return JSON.parse(JSON.stringify(this.attributes));\n  },\n\n  _generateClassName: function (urlTemplate) {\n    if (urlTemplate) {\n      return urlTemplate.replace(/\\s+/g, '').replace(/[^a-zA-Z_0-9 ]/g, '').toLowerCase();\n    } else return '';\n  },\n\n  parse: function (data) {\n    var attrs = {};\n\n    _.extend(attrs, data.options, {\n      id: data.id,\n      className: this._generateClassName(data.options.urlTemplate),\n      type: 'Tiled',\n      order: data.order,\n      parent_id: data.parent_id\n    });\n\n    return attrs;\n  },\n\n  toJSON: function () {\n    var layerOptions = _.clone(_.omit(this.attributes, ['order', 'id']));\n    var json = {\n      kind: 'tiled',\n      options: layerOptions,\n      order: this.get('order'),\n      id: this.id\n    };\n\n    return json;\n  },\n\n  getValue: function () {\n    return this.get('val');\n  },\n\n  /**\n   * validateTemplateURL - Validates current urlTemplate of layer.\n   *\n   * @param {Object} callbacks with success and error functions defined to be called depending on validation outcome.\n   */\n  validateTemplateURL: function (callbacks) {\n    var subdomains = ['a', 'b', 'c'];\n    var image = new Image();\n    image.onload = callbacks.success;\n    image.onerror = callbacks.error;\n    image.src = this.get('urlTemplate').replace(/\\{s\\}/g, function () {\n      return subdomains[Math.floor(Math.random() * 3)];\n    })\n      .replace(/\\{x\\}/g, '0')\n      .replace(/\\{y\\}/g, '0')\n      .replace(/\\{z\\}/g, '0');\n  }\n\n});\n","var Backbone = require('backbone');\nvar CustomBaselayerModel = require('./custom-baselayer-model');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'configModel',\n  'currentUserId'\n];\n\nmodule.exports = Backbone.Collection.extend({\n\n  model: function (d, opts) {\n    var self = opts.collection;\n\n    var m = new CustomBaselayerModel(d, {\n      parse: true,\n      collection: self\n    });\n\n    return m;\n  },\n\n  url: function () {\n    var baseUrl = this._configModel.get('base_url');\n    var version = this._configModel.urlVersion('user');\n    return baseUrl + '/api/' + version + '/users/' + this._currentUserId + '/layers';\n  },\n\n  initialize: function (models, opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n  },\n\n  isCustomCategory: function () {\n    var custom = this.where(function (mdl) {\n      return ['NASA', 'TileJSON', 'WMS', 'Mapbox', 'Custom', undefined].some(function (category) {\n        return mdl.get('category') === category;\n      });\n    });\n    return custom;\n  },\n\n  getSelected: function () {\n    return this.findWhere({ selected: true });\n  },\n\n  hasCustomBaseLayer: function (className) {\n    if (!className) return;\n\n    var customBaseLayer = this.where({ className: className });\n\n    return customBaseLayer.length > 0;\n  }\n\n});\n","var Backbone = require('backbone');\nvar _ = require('underscore');\nvar $ = require('jquery');\nvar cdb = require('internal-carto.js');\nvar errorParse = require('builder/helpers/error-parser');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar CustomListCollection = require('builder/components/custom-list/custom-list-collection');\n\nvar REQUIRED_OPTS = [\n  'configModel',\n  'nodeDefModel'\n];\n\nmodule.exports = CustomListCollection.extend({\n  initialize: function (models, options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n    this._querySchemaModel = this._nodeDefModel.querySchemaModel;\n\n    var configModel = options.configModel;\n    this.SQL = new cdb.SQL({\n      user: configModel.get('user_name'),\n      sql_api_template: configModel.get('sql_api_template'),\n      api_key: configModel.get('api_key')\n    });\n\n    this.stateModel = new Backbone.Model({\n      state: 'unfetched'\n    });\n\n    CustomListCollection.prototype.initialize.call(this, models, options);\n  },\n\n  _onSelectedChange: function (changedModel, isSelected) {\n    if (this.type === 'multiple') {\n      return;\n    }\n\n    if (isSelected) {\n      this.each(function (m) {\n        if (m.cid !== changedModel.cid) {\n          m.set({ selected: false }, { silent: true });\n        }\n      }, this);\n    }\n  },\n\n  buildQuery: function () {\n    throw new Error('subclasses of DataObservatoryBaseCollection must implement buildQuery');\n  },\n\n  fetch: function (options) {\n    this._success = options && options.success;\n    this._error = options && options.error;\n\n    var defaults = {\n      filters: null,\n      measurement: null,\n      normalize: null,\n      timespan: null,\n      query: this._querySchemaModel.get('query')\n    };\n\n    this.deferred = $.Deferred();\n    var queryOptions = _.defaults(options, defaults);\n    var sqlQuery = this.buildQuery(queryOptions);\n\n    this.stateModel.set('state', 'fetching');\n    this.SQL.execute(sqlQuery, queryOptions, {\n      success: function (data) {\n        this._onFetchSuccess(data);\n        this.stateModel.set('state', 'fetched');\n        this.deferred.resolve();\n        this._success && this._success();\n      }.bind(this),\n      error: function (err) {\n        this.stateModel.set('state', 'error');\n        this.deferred.reject();\n        this._error && this._error(errorParse(err));\n      }.bind(this)\n    });\n\n    return this.deferred.promise();\n  },\n\n  _onFetchSuccess: function (data) {\n    var models = data.rows;\n    this.reset(models);\n  },\n\n  isFetching: function () {\n    return this.getState() === 'fetching';\n  },\n\n  getState: function () {\n    return this.stateModel.get('state');\n  },\n\n  getItem: function (value) {\n    return this.findWhere({ val: value });\n  },\n\n  isAsync: function () {\n    return true;\n  }\n});\n","var _ = require('underscore');\nvar BaseCollection = require('./data-observatory-base-collection');\nvar BaseModel = require('builder/components/custom-list/custom-list-item-model');\n\nvar FILTERS_QUERY_WITH_REGION = \"SELECT count(*) num_measurements, tag.key subsection_id, tag.value subsection_name FROM OBS_GetAvailableNumerators((SELECT ST_SetSRID(ST_Extent(the_geom), 4326) FROM ({{{ query }}}) q), {{{ region }}}) numers, Jsonb_Each(numers.numer_tags) tag WHERE tag.key like 'subsection%' GROUP BY tag.key, tag.value\";\n\nmodule.exports = BaseCollection.extend({\n  initialize: function (models, options) {\n    this.type = 'multiple';\n\n    BaseCollection.prototype.initialize.call(this, models, options);\n  },\n\n  model: function (attrs, opts) {\n    // label and val to custom list compatibility\n    var o = {};\n    o.val = attrs.subsection_id;\n    o.label = attrs.subsection_name;\n    o.items = attrs.num_measurements;\n\n    return new BaseModel(o);\n  },\n\n  setSelected: function (value) {\n    var silentTrue = { silent: true };\n\n    if (_.isArray(value)) {\n      this.each(function (mdl) {\n        if (_.contains(value, mdl.getValue())) {\n          mdl.set({\n            selected: true\n          }, silentTrue);\n        } else {\n          mdl.set({\n            selected: false\n          }, silentTrue);\n        }\n      });\n    } else {\n      this.each(function (mdl) {\n        if (mdl.getValue() === value) {\n          mdl.set({\n            selected: true\n          }, silentTrue);\n        } else {\n          mdl.set({\n            selected: false\n          }, silentTrue);\n        }\n      });\n    }\n  },\n\n  getSelected: function () {\n    return this.filter(function (mdl) {\n      return mdl.get('selected') === true;\n    });\n  },\n\n  buildQuery: function (options) {\n    return FILTERS_QUERY_WITH_REGION;\n  }\n});\n","var _ = require('underscore');\nvar BaseCollection = require('./data-observatory-base-collection');\nvar BaseModel = require('builder/components/custom-list/custom-list-item-model');\n\nvar MEASUREMENTS_QUERY_WITH_REGION = 'SELECT numer_id, numer_name, numer_description, numer_type, numer_aggregate, numer_tags FROM _OBS_GetNumerators((SELECT ST_SetSRID(ST_Extent(the_geom), 4326) FROM ({{{ query }}}) q), section_tags => {{{ region }}}) ORDER BY numer_name ASC';\n\nvar MEASUREMENTS_QUERY_WITH_FILTERS = 'SELECT numer_id, numer_name, numer_description, numer_type, numer_aggregate, numer_tags FROM _OBS_GetNumerators((SELECT ST_SetSRID(ST_Extent(the_geom), 4326) FROM ({{{ query }}}) q), section_tags => {{{ region }}}, subsection_tags => {{{ filters }}})';\n\nvar MEASUREMENTS_QUERY_SEARCH = \"SELECT numer_id, numer_name, numer_description, numer_type, numer_aggregate, numer_tags FROM _OBS_GetNumerators((SELECT ST_SetSRID(ST_Extent(the_geom), 4326) FROM ({{{ query }}}) q), section_tags => {{{ region }}}, name => '{{{ search }}}')\";\n\nvar MEASUREMENTS_QUERY_SEARCH_AND_FILTERS = \"SELECT numer_id, numer_name, numer_description, numer_type, numer_aggregate, numer_tags FROM _OBS_GetNumerators((SELECT ST_SetSRID(ST_Extent(the_geom), 4326) FROM ({{{ query }}}) q), section_tags => {{{ region }}} , name => '{{{ search }}}', subsection_tags => {{{ filters }}})\";\n\nmodule.exports = BaseCollection.extend({\n  model: function (attrs, opts) {\n    return new BaseModel(attrs, opts);\n  },\n\n  _onFetchSuccess: function (data) {\n    var models = data.rows;\n\n    models = _.map(models, function (model) {\n      var o = {};\n      // label and val to custom list compatibility\n      o.val = model.numer_id;\n      o.label = model.numer_name;\n      o.description = model.numer_description;\n      o.type = model.numer_type;\n      o.aggregate = model.numer_aggregate;\n      // a measurement can belong to more than one category (filter)\n      o.filter = [];\n      var tags = model.numer_tags;\n      if (!_.isObject(tags)) {\n        tags = JSON.parse(tags);\n      }\n\n      for (var key in tags) {\n        if (/^subsection/.test(key)) {\n          o.filter.push({\n            id: key,\n            name: tags[key]\n          });\n        }\n\n        if (/^license/.test(key)) {\n          o.license = tags[key];\n        }\n      }\n\n      return o;\n    }).filter(function (model) {\n      return model.filter.length > 0;\n    });\n\n    this.reset(models);\n  },\n\n  buildQuery: function (options) {\n    if (options && options.search && options.filters) {\n      return MEASUREMENTS_QUERY_SEARCH_AND_FILTERS;\n    } else if (options && options.filters) {\n      return MEASUREMENTS_QUERY_WITH_FILTERS;\n    } else if (options && options.search) {\n      return MEASUREMENTS_QUERY_SEARCH;\n    } else {\n      return MEASUREMENTS_QUERY_WITH_REGION;\n    }\n  },\n\n  search: function () {\n    return this;\n  }\n});\n","var Backbone = require('backbone');\n\n/**\n * Model for general editor configuration.\n */\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    edition: false,\n    disabled: false\n  },\n  isEditing: function () {\n    return !!this.get('edition');\n  },\n  isDisabled: function () {\n    return !!this.get('disabled');\n  }\n});\n","var MAP = {\n  'st_multipolygon': 'polygon',\n  'st_polygon': 'polygon',\n  'st_multilinestring': 'line',\n  'st_linestring': 'line',\n  'st_multipoint': 'point',\n  'st_point': 'point'\n};\n\n/**\n * @param {String} val e.g. 'ST_MultiPoint'\n * @return {String} e.g. 'point'\n */\nmodule.exports = function (val) {\n  return MAP[val.toLowerCase()];\n};\n","var Backbone = require('backbone');\nvar _ = require('underscore');\nvar syncAbort = require('./backbone/sync-abort');\nvar UserModel = require('./user-model');\nvar GroupModel = require('./group-model');\n\n/**\n * A collection of Grantable objects.\n */\nmodule.exports = Backbone.Collection.extend({\n\n  model: function (attrs, options) {\n    var type = attrs.type;\n    var configModel = attrs.configModel;\n    options = _.extend(options, {\n      configModel: configModel\n    });\n\n    if (attrs.model) {\n      attrs = _.extend({}, attrs, attrs.model);\n    }\n\n    if (type === 'user') {\n      return new UserModel(_.omit(attrs, 'configModel'), options);\n    } else if (type === 'group') {\n      return new GroupModel(_.omit(attrs, 'configModel'), options);\n    }\n  },\n\n  sync: syncAbort,\n\n  url: function (method) {\n    var baseUrl = this.configModel.get('base_url');\n    var version = this.configModel.urlVersion('organizationGrantables', method);\n    return baseUrl + '/api/' + version + '/organization/' + this.organization.id + '/grantables';\n  },\n\n  initialize: function (users, opts) {\n    if (!opts.organization) throw new Error('Organization is required');\n    if (!opts.currentUserId) throw new Error('currentUserId is required');\n    if (!opts.configModel) throw new Error('configModel is required');\n\n    this.configModel = opts.configModel;\n    this.organization = opts.organization;\n    this.currentUserId = opts.currentUserId;\n  },\n\n  parse: function (response) {\n    this.trigger('fetched', this);\n    this.total_entries = response.total_entries;\n\n    return _.reduce(response.grantables, function (memo, m) {\n      if (m.id === this.currentUserId) {\n        this.total_entries--;\n      } else {\n        m.organization = this.organization;\n        m.configModel = this.configModel;\n        memo.push(m);\n      }\n      return memo;\n    }, [], this);\n  },\n\n  fetch: function (opts) {\n    opts = opts || {};\n    this.trigger('fetching', this);\n    opts.error = function (model, response) {\n      this.trigger('error', this);\n    }.bind(this);\n\n    return Backbone.Collection.prototype.fetch.call(this, opts);\n  },\n\n  totalCount: function () {\n    return this.total_entries;\n  }\n\n});\n","var Backbone = require('backbone');\nvar UsersGroup = require('./users-group-collection');\n\n/**\n * Model representing a group.\n * Expected to be used in the context of a groups collection (e.g. OrganizationGroups),\n * which defines its API endpoint path.\n */\n\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    display_name: ''\n  },\n\n  initialize: function (attrs, opts) {\n    this.parse(attrs || {}, opts); // handle given attrs in the same way as for .fetch()\n  },\n\n  parse: function (attrs, opts) {\n    this.users = new UsersGroup(attrs.users, {\n      group: this,\n      configModel: opts.configModel,\n      organization: opts.organization\n    });\n\n    return attrs;\n  }\n});\n","var InfowindowDefinitionModel = require('./infowindow-definition-model');\n\nmodule.exports = InfowindowDefinitionModel.extend({\n\n  defaults: {\n    template_name: '',\n    latlng: [0, 0],\n    offset: [28, 0], // offset of the tip calculated from the bottom left corner\n    maxHeight: 180, // max height of the content, not the whole infowindow\n    autoPan: true,\n    template: '',\n    content: '',\n    visibility: false,\n    alternative_names: { },\n    fields: null, // contains the fields displayed in the infowindow,\n    width: 226,\n    headerColor: {\n      color: {\n        fixed: '#35AAE5',\n        opacity: 1\n      }\n    }\n  },\n\n  TEMPLATES: {\n    infowindow_light: require('builder/mustache-templates/infowindows/infowindow_light.jst.mustache'),\n    infowindow_dark: require('builder/mustache-templates/infowindows/infowindow_dark.jst.mustache'),\n    infowindow_color: require('builder/mustache-templates/infowindows/infowindow_color.jst.mustache'),\n    infowindow_header_with_image: require('builder/mustache-templates/infowindows/infowindow_header_with_image.jst.mustache'),\n    custom_infowindow_light: require('builder/mustache-templates/infowindows_custom/infowindow_light.jst.mustache'),\n    custom_infowindow_dark: require('builder/mustache-templates/infowindows_custom/infowindow_dark.jst.mustache'),\n    custom_infowindow_color: require('builder/mustache-templates/infowindows_custom/infowindow_color.jst.mustache'),\n    custom_infowindow_header_with_image: require('builder/mustache-templates/infowindows_custom/infowindow_header_with_image.jst.mustache')\n  },\n\n  _transformTemplate: function (template) {\n    var fixed = this.get('headerColor').color.fixed;\n\n    return template.replace('background: #35AAE5', 'background: ' + fixed);\n  },\n\n  setTemplate: function (templateName) {\n    var template = (typeof (this.TEMPLATES[templateName]) === 'undefined') ? '' : this.TEMPLATES[templateName];\n\n    if (templateName === 'infowindow_color') {\n      template = this._transformTemplate(template);\n    }\n\n    var attrs = {\n      'template_name': templateName,\n      'template': template,\n      'template_type': 'mustache'\n    };\n\n    if (templateName === '') {\n      attrs.fields = [];\n    }\n\n    this.set(attrs);\n  },\n\n  isEmptyTemplate: function () {\n    var isEmpty = this.fieldCount() === 0;\n    return this.hasTemplate() && isEmpty;\n  },\n\n  setDefault: function () {\n    this.setTemplate(this.defaults.template_name);\n  }\n\n});\n","var Backbone = require('backbone');\nvar _ = require('underscore');\nvar $ = require('jquery');\n\nmodule.exports = Backbone.Model.extend({\n\n  SYSTEM_COLUMNS: ['the_geom', 'the_geom_webmercator', 'created_at', 'updated_at', 'cartodb_id', 'cartodb_georef_status'],\n\n  TEMPLATES: {},\n\n  initialize: function (attrs, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n\n    this._configModel = opts.configModel;\n  },\n\n  clearFields: function () {\n    this.set({ 'fields': [] });\n  },\n\n  saveFields: function (where) {\n    where = where || 'old_fields';\n    this.set(where, _.clone(this.get('fields')));\n  },\n\n  fieldCount: function () {\n    var fields = this.get('fields');\n    if (!fields) return 0;\n    return fields.length;\n  },\n\n  restoreFields: function (whiteList, from) {\n    from = from || 'old_fields';\n    var fields = this.get(from);\n    if (whiteList) {\n      fields = fields.filter(function (f) {\n        return _.contains(whiteList, f.name);\n      });\n    }\n    if (fields && fields.length) {\n      this._setFields(fields);\n    }\n    this.unset(from);\n  },\n\n  containsField: function (fieldName) {\n    var fields = this.get('fields') || [];\n    return _.contains(_(fields).pluck('name'), fieldName);\n  },\n\n  getFieldProperty: function (fieldName, k) {\n    if (this.containsField(fieldName)) {\n      var fields = this.get('fields') || [];\n      var idx = _.indexOf(_(fields).pluck('name'), fieldName);\n      return fields[idx][k];\n    }\n    return null;\n  },\n\n  setFieldProperty: function (fieldName, k, v) {\n    if (this.containsField(fieldName)) {\n      var fields = this._cloneFields() || [];\n      var idx = _.indexOf(_(fields).pluck('name'), fieldName);\n      fields[idx][k] = v;\n      this._setFields(fields);\n    }\n    return this;\n  },\n\n  _cloneFields: function () {\n    return _(this.get('fields')).map(function (v) {\n      return _.clone(v);\n    });\n  },\n\n  _setFields: function (f) {\n    f.sort(function (a, b) { return a.position - b.position; });\n    this.set({ 'fields': f });\n  },\n\n  sortFields: function () {\n    this.get('fields').sort(function (a, b) { return a.position - b.position; });\n  },\n\n  _addField: function (fieldName, at) {\n    var dfd = $.Deferred();\n    if (!this.containsField(fieldName)) {\n      var fields = this.get('fields');\n\n      if (fields) {\n        at = at === undefined ? fields.length : at;\n        fields.push({ name: fieldName, title: true, position: at });\n      } else {\n        at = at === undefined ? 0 : at;\n        this.set('fields', [{ name: fieldName, title: true, position: at }], { silent: true });\n      }\n    }\n    dfd.resolve();\n    return dfd.promise();\n  },\n\n  addField: function (fieldName, at) {\n    var self = this;\n    $.when(this._addField(fieldName, at)).then(function () {\n      self.sortFields();\n      self.trigger('add:fields');\n      self.trigger('change:fields', self, self.get('fields'));\n      self.trigger('change', self);\n    });\n    return this;\n  },\n\n  removeField: function (fieldName) {\n    if (this.containsField(fieldName)) {\n      var fields = this._cloneFields() || [];\n      var idx = _.indexOf(_(fields).pluck('name'), fieldName);\n      if (idx >= 0) {\n        fields.splice(idx, 1);\n      }\n      this._setFields(fields);\n      this.trigger('remove:fields');\n    }\n    return this;\n  },\n\n  getAlternativeName: function (fieldName) {\n    return this.get('alternative_names') && this.get('alternative_names')[fieldName];\n  },\n\n  setAlternativeName: function (fieldName, alternativeName) {\n    var alternativeNames = _.clone(this.get('alternative_names') || {});\n\n    alternativeNames[fieldName] = alternativeName;\n    this.set({ 'alternative_names': alternativeNames });\n    this.trigger('change:alternative_names');\n  },\n\n  getFieldPos: function (fieldName) {\n    var p = this.getFieldProperty(fieldName, 'position');\n    if (p === undefined) {\n      return Number.MAX_VALUE;\n    }\n    return p;\n  },\n\n  unsetTemplate: function () {\n    this.setTemplate('');\n  },\n\n  setTemplate: function (templateName) {\n    var template = (typeof (this.TEMPLATES[templateName]) === 'undefined') ? '' : this.TEMPLATES[templateName];\n\n    var attrs = {\n      'template_name': templateName,\n      'template': template,\n      'template_type': 'mustache'\n    };\n\n    if (templateName === '') {\n      attrs.fields = [];\n    }\n\n    this.set(attrs);\n  },\n\n  getTemplate: function () {\n    var template_name = this.get('template_name');\n\n    if (template_name !== '') {\n      return this.TEMPLATES['custom_' + template_name];\n    } else {\n      return this.get('template');\n    }\n  },\n\n  hasTemplate: function () {\n    return !!this.get('template_name') && this.TEMPLATES[this.get('template_name')];\n  },\n\n  isCustomTemplate: function () {\n    return this.get('template_name') === '' && this.get('template') !== '';\n  }\n\n});\n","var InfowindowDefinitionModel = require('./infowindow-definition-model');\n\nmodule.exports = InfowindowDefinitionModel.extend({\n\n  defaults: {\n    vertical_offset: 0,\n    horizontal_offset: 0,\n    position: 'top|center',\n    template_name: '',\n    template: ''\n  },\n\n  TEMPLATES: {\n    tooltip_dark: require('builder/mustache-templates/tooltips/tooltip_dark.jst.mustache'),\n    tooltip_light: require('builder/mustache-templates/tooltips/tooltip_light.jst.mustache'),\n    custom_tooltip_dark: require('builder/mustache-templates/tooltips_custom/tooltip_dark.jst.mustache'),\n    custom_tooltip_light: require('builder/mustache-templates/tooltips_custom/tooltip_light.jst.mustache')\n  },\n\n  setDefault: function () {\n    this.setTemplate(this.defaults.template_name);\n  }\n\n});\n","module.exports = {\n  COLORS: [\n    '#11A579',\n    '#E83f74',\n    '#9F5DC8',\n    '#EF8205',\n    '#29B3B2',\n    '#E54F3B',\n    '#59BB12',\n    '#EF57BA',\n    '#E2AF00',\n    '#12AADE'\n  ],\n\n  /**\n   * Returns a color given a letter\n   * @param  {String} Letter. eg: 'a', 'b', 'c', etc.\n   * @return {String} Hex color code: eg: '#7F3C8D'\n   */\n  getColorForLetter: function (letter) {\n    if (!letter) {\n      return this.COLORS[0];\n    }\n\n    var letterNumber = letter.charCodeAt(0) - 97;\n    var colorIndex = ((letterNumber / this.COLORS.length % 1) * 10).toFixed();\n    return this.COLORS[colorIndex] || this.COLORS[0];\n  }\n};\n","var Backbone = require('backbone');\nvar _ = require('underscore');\nvar syncAbort = require('./backbone/sync-abort');\nvar StyleDefinitionModel = require('builder/editor/style/style-definition-model');\nvar StyleCartoCSSModel = require('builder/editor/style/style-cartocss-model');\nvar DataSQLModel = require('builder/editor/layers/layer-content-views/data/data-sql-model');\nvar layerTypesAndKinds = require('./layer-types-and-kinds');\nvar InfowindowModel = require('./infowindow-click-model');\nvar TooltipModel = require('./infowindow-hover-model');\nvar TableNameUtils = require('builder/helpers/table-name-utils');\nvar layerColors = require('./layer-colors');\n\n// from_layer_id and from_letter are not attributes for the model, but are sent to the layer creation\n// endpoint when creating a layer from an existing analysis node (see user-actions)\nvar ATTR_NAMES = ['id', 'order', 'infowindow', 'tooltip', 'error', 'from_layer_id', 'from_letter'];\n\n/**\n * Model to edit a layer definition.\n * Should always exist as part of a LayerDefinitionsCollection, so its URL is given from there.\n */\nmodule.exports = Backbone.Model.extend({\n\n  /**\n   * @override {Backbone.prototype.sync} abort ongoing request if there is any\n   */\n  sync: syncAbort,\n\n  parse: function (response, opts) {\n    response.options = response.options || {};\n\n    // Flatten the attrs, to avoid having this.get('options').foobar internally\n    var attrs = _\n      .defaults(\n        _.pick(response, ATTR_NAMES),\n        _.omit(response.options, ['query', 'tile_style'])\n      );\n\n    // Only use type on the frontend, it will be mapped back when the model is serialized (see .toJSON)\n    attrs.type = attrs.type || layerTypesAndKinds.getType(response.kind);\n\n    // Map API endpoint attrs to the new names used client-side (cartodb.js in particular)\n    if (response.options.tile_style) {\n      attrs.cartocss = response.options.tile_style;\n    }\n    if (response.options.query) {\n      attrs.sql = response.options.query;\n    }\n\n    if (response.infowindow) {\n      if (!this.infowindowModel) {\n        this.infowindowModel = new InfowindowModel(response.infowindow, {\n          configModel: opts.configModel || this._configModel\n        });\n      }\n    }\n    if (response.tooltip) {\n      if (!this.tooltipModel) {\n        this.tooltipModel = new TooltipModel(response.tooltip, {\n          configModel: opts.configModel || this._configModel\n        });\n      }\n    }\n    if (response.options.table_name) {\n      // Set autostyle as false if it doesn't contain any id\n      attrs.autoStyle = attrs.autoStyle || false;\n\n      if (!this.styleModel) {\n        this.styleModel = new StyleDefinitionModel(response.options.style_properties, {\n          parse: true\n        });\n\n        this.cartocssModel = new StyleCartoCSSModel({\n          content: attrs.cartocss\n        }, {\n          history: response.options.cartocss_history || response.options.tile_style_history\n        });\n      }\n\n      if (!this.sqlModel) {\n        this.sqlModel = new DataSQLModel({\n          content: attrs.sql\n        }, {\n          history: response.options.sql_history\n        });\n      }\n    }\n\n    // Flatten the rest of the attributes\n    return attrs;\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n\n    this._configModel = opts.configModel;\n\n    this.on('change:source change:sql', this._onPosibleLayerSchemaChanged, this);\n\n    if (this.styleModel) {\n      this.styleModel.bind('change:type change:animated', function () {\n        if (this.styleModel.isAggregatedType() || this.styleModel.isAnimation()) {\n          // setTemplate will clear fields\n          this.infowindowModel && this.infowindowModel.unsetTemplate();\n          this.tooltipModel && this.tooltipModel.unsetTemplate();\n        }\n      }, this);\n    }\n  },\n\n  save: function (attrs, options) {\n    attrs = attrs || {};\n    options = options || {};\n\n    // We assume that if the layer is saved, we have to disable autostyle\n    var autoStyleAttrs = {\n      autoStyle: false\n    };\n\n    // But if the layer is saved with shouldPreserveAutoStyle option, we should preserve autostyle\n    if (options && options.shouldPreserveAutoStyle) {\n      delete autoStyleAttrs.autoStyle;\n    } else if (this.get('autoStyle')) {\n      this.styleModel && this.styleModel.resetPropertiesFromAutoStyle();\n    }\n\n    attrs = _.extend(\n      {},\n      autoStyleAttrs,\n      attrs\n    );\n\n    return Backbone.Model.prototype.save.call(this, attrs, options);\n  },\n\n  toJSON: function () {\n    // Un-flatten the internal attrs to the datastructure that's expected by the API endpoint\n    var options = _.omit(this.attributes, ATTR_NAMES.concat(['cartocss', 'sql', 'autoStyle']));\n\n    // Map back internal attrs to the expected attrs names by the API endpoint\n    var cartocss = this.get('cartocss');\n\n    if (cartocss) {\n      options.tile_style = cartocss;\n    }\n    var sql = this.get('sql');\n    if (sql) {\n      options.query = sql;\n    }\n\n    var defaultAttributes = {\n      kind: layerTypesAndKinds.getKind(this.get('type')),\n      options: options\n    };\n\n    var infowindowData = this.infowindowModel && this.infowindowModel.toJSON();\n    if (!_.isEmpty(infowindowData)) {\n      defaultAttributes.infowindow = this.infowindowModel.toJSON();\n    }\n\n    var tooltipData = this.tooltipModel && this.tooltipModel.toJSON();\n    if (!_.isEmpty(tooltipData)) {\n      defaultAttributes.tooltip = this.tooltipModel.toJSON();\n    }\n\n    if (this.styleModel && !this.styleModel.isAutogenerated()) {\n      defaultAttributes.options.style_properties = this.styleModel.toJSON();\n    }\n\n    if (this.cartocssModel) {\n      defaultAttributes.options.cartocss_history = this.cartocssModel.getHistory();\n    }\n\n    if (this.sqlModel) {\n      defaultAttributes.options.sql_history = this.sqlModel.getHistory();\n    }\n\n    var attributes = _.omit(this.attributes, 'infowindow', 'tooltip', 'options', 'error', 'autoStyle');\n\n    return _.defaults(\n      defaultAttributes,\n      _.pick(attributes, ATTR_NAMES)\n    );\n  },\n\n  canBeDeletedByUser: function () {\n    return this.collection.getNumberOfDataLayers() > 1 && this.isDataLayer() &&\n      (this._canBeFoldedUnderAnotherLayer() || !this._isAllDataLayersDependingOnAnyAnalysisOfThisLayer());\n  },\n\n  isOwnerOfAnalysisNode: function (nodeModel) {\n    return nodeModel && nodeModel.letter() === this.get('letter');\n  },\n\n  ownedPrimaryAnalysisNodes: function () {\n    var nodeDefModel = this.getAnalysisDefinitionNodeModel();\n    return this.isOwnerOfAnalysisNode(nodeDefModel)\n      ? nodeDefModel.linkedListBySameLetter()\n      : [];\n  },\n\n  getName: function () {\n    return this.get('name') ||\n      this.get('table_name_alias') ||\n      this.get('table_name');\n  },\n\n  getTableName: function () {\n    return this.get('table_name') || '';\n  },\n\n  getColor: function () {\n    return layerColors.getColorForLetter(this.get('letter'));\n  },\n\n  containsNode: function (other) {\n    var nodeDefModel = this.getAnalysisDefinitionNodeModel();\n    return nodeDefModel && nodeDefModel.containsNode(other);\n  },\n\n  getAnalysisDefinitionNodeModel: function () {\n    return this.findAnalysisDefinitionNodeModel(this.get('source'));\n  },\n\n  findAnalysisDefinitionNodeModel: function (id) {\n    return this.collection && this.collection.findAnalysisDefinitionNodeModel(id);\n  },\n\n  _onPosibleLayerSchemaChanged: function (eventName, attrs, options) {\n    // Used to avoid resetting styles on source_id changes when we have saved styles for the node\n    if (options && options.ignoreSchemaChange) {\n      return;\n    }\n\n    if (this.infowindowModel) {\n      this.infowindowModel.clearFields();\n    }\n    if (this.tooltipModel) {\n      this.tooltipModel.clearFields();\n    }\n    if (this.styleModel) {\n      this.styleModel.resetStyles();\n    }\n  },\n\n  toggleVisible: function () {\n    this.set('visible', !this.get('visible'));\n  },\n\n  toggleCollapse: function () {\n    this.set('collapsed', !this.get('collapsed'));\n  },\n\n  hasAnalyses: function () {\n    return this.getNumberOfAnalyses() > 0;\n  },\n\n  hasAggregatedStyles: function () {\n    return this.styleModel && this.styleModel.isAggregatedType();\n  },\n\n  getNumberOfAnalyses: function () {\n    var analysisNode = this.getAnalysisDefinitionNodeModel();\n    var count = 0;\n\n    while (analysisNode && this.isOwnerOfAnalysisNode(analysisNode)) {\n      analysisNode = analysisNode.getPrimarySource();\n\n      if (analysisNode) {\n        count += 1;\n      }\n    }\n\n    return count;\n  },\n\n  getQualifiedTableName: function () {\n    var userName = this.get('user_name') || this.collection.userModel.get('username');\n    return TableNameUtils.getQualifiedTableName(\n      this.getTableName(),\n      userName,\n      this.collection.userModel.isInsideOrg()\n    );\n  },\n\n  getColumnNamesFromSchema: function () {\n    return this._getQuerySchemaModel().getColumnNames();\n  },\n\n  _getQuerySchemaModel: function () {\n    var nodeDefModel = this.getAnalysisDefinitionNodeModel();\n    return nodeDefModel.querySchemaModel;\n  },\n\n  isDataLayer: function () {\n    var layerType = this.get('type');\n    return layerTypesAndKinds.isCartoDBType(layerType) ||\n      layerTypesAndKinds.isTorqueType(layerType);\n  },\n\n  isTorqueLayer: function () {\n    return this.get('type') === 'torque';\n  },\n\n  isAutoStyleApplied: function () {\n    var autoStyle = this.get('autoStyle');\n    return (autoStyle != null && autoStyle !== false);\n  },\n\n  _canBeFoldedUnderAnotherLayer: function () {\n    var thisNodeDefModel = this.getAnalysisDefinitionNodeModel();\n\n    return this.collection.any(function (m) {\n      if (m !== this && m.isDataLayer()) {\n        var otherNodeDefModel = m.getAnalysisDefinitionNodeModel();\n        if (otherNodeDefModel === thisNodeDefModel) return true;\n\n        var lastNode = _.last(otherNodeDefModel.linkedListBySameLetter());\n        return lastNode.getPrimarySource() === thisNodeDefModel;\n      }\n    }, this);\n  },\n\n  _isAllDataLayersDependingOnAnyAnalysisOfThisLayer: function () {\n    var nodeDefModel = this.getAnalysisDefinitionNodeModel();\n    if (!nodeDefModel) return false;\n    if (!this.isOwnerOfAnalysisNode(nodeDefModel)) return false;\n\n    var linkedNodesList = nodeDefModel.linkedListBySameLetter();\n\n    return this.collection.chain()\n      .filter(function (m) {\n        return m !== this && !!m.get('source');\n      }, this)\n      .all(function (m) {\n        return _.any(linkedNodesList, function (node) {\n          return m.containsNode(node);\n        });\n      }, this)\n      .value();\n  },\n\n  getAllDependentLayers: function () {\n    var self = this;\n    var layersCount = 0;\n\n    var layerDefinitionsCollectionModels = self.collection.models;\n\n    for (var i = 0; i < layerDefinitionsCollectionModels.length; i++) {\n      var layer = layerDefinitionsCollectionModels[i];\n      var dependentAnalysis = false;\n\n      if (layer !== self) {\n        var analysisNode = layer.getAnalysisDefinitionNodeModel();\n\n        while (analysisNode) {\n          if (self.isOwnerOfAnalysisNode(analysisNode)) {\n            dependentAnalysis = true;\n          }\n          analysisNode = analysisNode.getPrimarySource();\n        }\n\n        if (dependentAnalysis) {\n          layersCount += 1;\n        }\n      }\n    }\n    return layersCount;\n  },\n\n  matchesAttrs: function (otherAttrs) {\n    if (this.get('type') !== otherAttrs.type) {\n      return false;\n    }\n\n    if (layerTypesAndKinds.isTiledType(otherAttrs.type)) {\n      return this.get('name') === otherAttrs.name &&\n        this.get('urlTemplate') === otherAttrs.urlTemplate;\n    }\n\n    if (layerTypesAndKinds.isGMapsBase(otherAttrs.type)) {\n      return this.get('name') === otherAttrs.name &&\n        this.get('baseType') === otherAttrs.baseType &&\n        this.get('style') === otherAttrs.style;\n    }\n\n    if (layerTypesAndKinds.isPlainType(otherAttrs.type)) {\n      return this.get('color') === otherAttrs.color;\n    }\n\n    return false;\n  },\n\n  hasGeocodingAnalysisApplied: function () {\n    var analysisNode = this.getAnalysisDefinitionNodeModel();\n\n    if (analysisNode && analysisNode.get('type') === 'geocoding') {\n      return true;\n    }\n\n    while (analysisNode && this.isOwnerOfAnalysisNode(analysisNode)) {\n      analysisNode = analysisNode.getPrimarySource();\n\n      if (analysisNode && analysisNode.get('type') === 'geocoding') {\n        return true;\n      }\n    }\n\n    return false;\n  },\n\n  _hasAnyAnalysisApplied: function () {\n    var analysisNode = this.getAnalysisDefinitionNodeModel();\n\n    return analysisNode.get('type') !== 'source';\n  },\n\n  isEmpty: function () {\n    throw new Error('LayerDefinitionModel.isEmpty() is an async operation. Use `.isEmptyAsync` instead.');\n  },\n\n  isEmptyAsync: function () {\n    var nodeModel = this.getAnalysisDefinitionNodeModel();\n    var hasAnyAnalysisApplied = this._hasAnyAnalysisApplied();\n    var hasCustomQueryApplied = nodeModel.isCustomQueryApplied();\n\n    return new Promise(function (resolve, reject) {\n      nodeModel.queryRowsCollection.isEmptyAsync()\n        .then(function (isEmpty) {\n          resolve(!hasAnyAnalysisApplied && !hasCustomQueryApplied && isEmpty);\n        });\n    });\n  },\n\n  isDataFiltered: function () {\n    var nodeModel = this.getAnalysisDefinitionNodeModel();\n    var hasAnyAnalysisApplied = this._hasAnyAnalysisApplied();\n    var hasCustomQueryApplied = nodeModel.isCustomQueryApplied();\n    return new Promise(function (resolve, reject) {\n      nodeModel.queryRowsCollection.isEmptyAsync()\n        .then(function (isEmpty) {\n          resolve((hasAnyAnalysisApplied || hasCustomQueryApplied) && isEmpty);\n        });\n    });\n  },\n\n  isDone: function () {\n    var nodeModel = this.getAnalysisDefinitionNodeModel();\n    return nodeModel.queryRowsCollection.isDone() &&\n      nodeModel.queryGeometryModel.isDone() &&\n      nodeModel.querySchemaModel.isDone();\n  },\n\n  canBeGeoreferenced: function () {\n    var self = this;\n    var analysisDefinitionNodeModel = this.getAnalysisDefinitionNodeModel();\n    var emptyPromise = self.isEmptyAsync();\n    var geomPromise = analysisDefinitionNodeModel.queryGeometryModel.hasValueAsync();\n\n    return Promise.all([emptyPromise, geomPromise])\n      .then(function (values) {\n        var isEmpty = values[0];\n        var hasGeom = values[1];\n\n        var canBeGeoreferenced =\n          !isEmpty &&\n          !hasGeom &&\n          !self.hasGeocodingAnalysisApplied() &&\n          !self._hasAnyAnalysisApplied() &&\n          !analysisDefinitionNodeModel.isCustomQueryApplied();\n\n        return canBeGeoreferenced;\n      });\n  },\n\n  fetchQueryRowsIfRequired: function () {\n    var self = this;\n    var analysisDefinitionNodeModel = this.getAnalysisDefinitionNodeModel();\n\n    analysisDefinitionNodeModel.queryGeometryModel.hasValueAsync()\n      .then(function (geomHasValue) {\n        if (!self.hasGeocodingAnalysisApplied() &&\n          !geomHasValue &&\n          !analysisDefinitionNodeModel.isCustomQueryApplied() &&\n          analysisDefinitionNodeModel.queryRowsCollection.isUnavailable()) {\n          analysisDefinitionNodeModel.queryRowsCollection.fetch();\n        }\n      });\n  }\n});\n","// Types\nvar PLAIN = 'Plain';\nvar CARTODB = 'CartoDB';\nvar TILED = 'Tiled';\nvar TORQUE = 'torque';\nvar GMAPSBASE = 'GMapsBase';\nvar WMS = 'WMS';\n\n// Values of `kind` attribute that the backend/DB knows about\nvar KIND_TO_TYPE_MAP = {\n  'background': PLAIN,\n  'carto': CARTODB,\n  'gmapsbase': GMAPSBASE,\n  'tiled': TILED,\n  'torque': TORQUE,\n  'wms': WMS\n};\n\nmodule.exports = {\n  getType: function (kind) {\n    var type = KIND_TO_TYPE_MAP[kind];\n\n    if (!type) {\n      throw new Error('no type found for given kind ' + kind);\n    }\n\n    return type;\n  },\n\n  getKind: function (type) {\n    if (!type) {\n      throw new Error('no kind found for given type ' + type);\n    }\n\n    var kind;\n    for (kind in KIND_TO_TYPE_MAP) {\n      if (KIND_TO_TYPE_MAP[kind] === type) {\n        break;\n      }\n    }\n\n    return kind;\n  },\n\n  isKindDataLayer: function (kind) {\n    var type = KIND_TO_TYPE_MAP[kind];\n    return this.isTypeDataLayer(type);\n  },\n\n  isTypeDataLayer: function (type) {\n    return this.isCartoDBType(type) || this.isTorqueType(type);\n  },\n\n  isCartoDBType: function (type) {\n    return type === CARTODB;\n  },\n\n  isTorqueType: function (type) {\n    return type === TORQUE;\n  },\n\n  isTiledType: function (type) {\n    return type === TILED;\n  },\n\n  isPlainType: function (type) {\n    return type === PLAIN;\n  },\n\n  isGMapsBase: function (type) {\n    return type === GMAPSBASE;\n  }\n};\n","var LEGENDS_METADATA = {\n  bubble: {\n    legendType: 'size'\n  },\n  category: {\n    legendType: 'color'\n  },\n  choropleth: {\n    legendType: 'color'\n  },\n  custom: {\n    legendType: 'color'\n  },\n  custom_choropleth: {\n    legendType: 'color'\n  }\n};\n\nmodule.exports = LEGENDS_METADATA;\n","var Backbone = require('backbone');\n\nmodule.exports = Backbone.Collection.extend({\n\n  initialize: function (models, opts) {\n    if (!opts.visDefinitionModel) throw new Error('visDefinitionModel is required');\n    this.url = opts.visDefinitionModel.mapcapsURL();\n  }\n});\n","var Backbone = require('backbone');\nvar AssetModel = require('./asset-model');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'configModel',\n  'orgId'\n];\n\nmodule.exports = Backbone.Collection.extend({\n  model: AssetModel,\n\n  url: function (method) {\n    var baseUrl = this._configModel.get('base_url');\n    var version = this._configModel.urlVersion('organization-assets', method);\n    return baseUrl + '/api/' + version + '/organization/' + this._orgId + '/assets';\n  },\n\n  initialize: function (models, opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n  },\n\n  deselectAll: function (m) {\n    this.each(function (mdl) {\n      if (mdl !== m && mdl.get('state') === 'selected') {\n        mdl.set('state', '');\n      }\n    });\n  }\n\n});\n","var Backbone = require('backbone');\nvar _ = require('underscore');\n\n/**\n *  Organization info model\n *\n */\nmodule.exports = Backbone.Model.extend({\n\n  url: function () {\n    var baseUrl = this._configModel.get('base_url');\n    return baseUrl + '/api/v1/org';\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n\n    this._configModel = opts.configModel;\n\n    if (!_.isEmpty(this.get('owner'))) {\n      this._ownerModel = new Backbone.Model(\n        _.omit(this.get('owner'), 'organization')\n      );\n    }\n  },\n\n  getOwnerId: function () {\n    return this._ownerModel && this._ownerModel.get('id');\n  },\n\n  getOwnerEmail: function () {\n    return this._ownerModel && this._ownerModel.get('email');\n  },\n\n  isOrgAdmin: function (user) {\n    return this.getOwnerId() === user.get('id') || !!_.find(this.get('admins'), function (u) {\n      return u.id === user.get('id');\n    });\n  }\n});\n","var Backbone = require('backbone');\nvar _ = require('underscore');\nvar Utils = require('builder/helpers/utils');\nvar UserModel = require('./user-model');\nvar OrganizationModel = require('./organization-model');\nvar GroupModel = require('./group-model');\nvar ACLItemModel = require('./acl-item-model');\nvar READ_ONLY = 'r';\nvar READ_WRITE = 'rw';\n\n/**\n * manages a cartodb permission object, it contains:\n * - owner: an UserModel instance\n * - acl: a collection which includes the user and their permission.\n *\n *   see https://github.com/Vizzuality/cartodb-management/wiki/multiuser-REST-API#permissions-object\n *\n *   this object is not created to work alone, it should be a member of\n *   an object like visualization table\n *\n */\nvar PermissionModel = module.exports = Backbone.Model.extend({\n  urlRoot: function () {\n    var baseUrl = this._configModel.get('base_url');\n    var version = this._configModel.urlVersion('perm');\n    return baseUrl + '/api/' + version + '/perm';\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n\n    this._configModel = opts.configModel;\n    this.acl = new Backbone.Collection();\n    this.owner = opts._userModel;\n    this._generateOwner();\n    this._generateAcl();\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.bind('change:owner', this._generateOwner, this);\n    this.bind('change:acl', this._generateAcl, this);\n  },\n\n  _generateOwner: function () {\n    if (!this.owner) {\n      this.owner = new UserModel(null, {\n        configModel: this._configModel\n      });\n    }\n    this.owner.set(this.get('owner'));\n  },\n\n  getOwner: function () {\n    return this.owner;\n  },\n\n  _generateAcl: function () {\n    var self = this;\n    this.acl.reset([], { silent: true });\n    _.each(this.get('acl'), function (aclItem) {\n      var model;\n      switch (aclItem.type) {\n        case 'user':\n          model = new UserModel(aclItem.entity, {\n            configModel: self._configModel\n          });\n          break;\n        case 'org':\n          model = new OrganizationModel(aclItem.entity, {\n            configModel: self._configModel\n          });\n          break;\n        case 'group':\n          model = new GroupModel(aclItem.entity, {\n            configModel: self._configModel\n          });\n          break;\n        default:\n          throw new Error('Unknown ACL item type: ' + aclItem.type);\n      }\n      this._grantAccess(model, aclItem.access);\n    }, this);\n  },\n\n  cleanPermissions: function () {\n    this.acl.reset();\n  },\n\n  hasAccess: function (model) {\n    // Having at least read access is the same as having any access\n    return this.hasReadAccess(model);\n  },\n\n  hasReadAccess: function (model) {\n    // If there is a representable ACL item it must be one of at least READ_ONLY access\n    return !!this.findRepresentableAclItem(model);\n  },\n\n  hasWriteAccess: function (model) {\n    var access = Utils.result(this.findRepresentableAclItem(model), 'get', 'access');\n    return access === READ_WRITE;\n  },\n\n  canChangeReadAccess: function (model) {\n    return this._canChangeAccess(model);\n  },\n\n  canChangeWriteAccess: function (model) {\n    return (!model.isBuilder || model.isBuilder()) && this._canChangeAccess(model, function (representableAclItem) {\n      return Utils.result(representableAclItem, 'get', 'access') !== READ_WRITE;\n    });\n  },\n\n  _canChangeAccess: function (model) {\n    var representableAclItem = this.findRepresentableAclItem(model);\n    return this.isOwner(model) || !representableAclItem ||\n    representableAclItem === this._ownAclItem(model) || Utils.result(arguments, 1, representableAclItem) || false;\n  },\n\n  grantWriteAccess: function (model) {\n    this._grantAccess(model, READ_WRITE);\n  },\n\n  grantReadAccess: function (model) {\n    this._grantAccess(model, READ_ONLY);\n  },\n\n  revokeWriteAccess: function (model) {\n    // Effectively \"downgrades\" to READ_ONLY\n    this.grantReadAccess(model);\n  },\n\n  /**\n   * Revokes access to a set of items\n   * @param {Object} model A single model or an array of models\n   */\n  revokeAccess: function (model) {\n    var aclItem = this._ownAclItem(model);\n    if (aclItem) {\n      this.acl.remove(aclItem);\n    }\n  },\n\n  isOwner: function (model) {\n    return _.result(this.owner, 'id') === _.result(model, 'id');\n  },\n\n  toJSON: function () {\n    return {\n      entity: this.get('entity'),\n      acl: this.acl.toJSON()\n    };\n  },\n\n  getUsersWithAnyPermission: function () {\n    return this.acl.chain()\n      .filter(this._hasTypeUser)\n      .map(this._getEntity)\n      .value();\n  },\n\n  isSharedWithOrganization: function () {\n    return this.acl.any(this._hasTypeOrg);\n  },\n\n  clone: function () {\n    var attrs = _.clone(this.attributes);\n    delete attrs.id;\n    return new PermissionModel(attrs, {\n      configModel: this._configModel\n    });\n  },\n\n  /**\n   * Overwrite this ACL list from other permission object\n   * @param otherPermission {Object} instance of PermissionModel\n   */\n  overwriteAcl: function (otherPermission) {\n    this.acl.reset(otherPermission.acl.models);\n  },\n\n  // Note that this may return an inherited ACL item\n  // use ._ownAclItem instead if only model's own is wanted (if there is any)\n  findRepresentableAclItem: function (model) {\n    if (this.isOwner(model)) {\n      return this._newAclItem(model, READ_WRITE);\n    } else {\n      var checkList = ['_ownAclItem', '_organizationAclItem', '_mostPrivilegedGroupAclItem'];\n\n      return this._findMostPrivilegedAclItem(checkList, function (fnName) {\n        return this[fnName](model);\n      });\n    }\n  },\n\n  _hasTypeUser: function (m) {\n    return m.get('type') === 'user';\n  },\n\n  _getEntity: function (m) {\n    return m.get('entity');\n  },\n\n  _hasTypeOrg: function (m) {\n    return m.get('type') === 'org';\n  },\n\n  _isOrganization: function (object) {\n    return object instanceof OrganizationModel;\n  },\n\n  _ownAclItem: function (model) {\n    if (!model || !_.isFunction(model.isNew)) {\n      console.log('model is required to find an ACL item');\n    }\n\n    if (!model.isNew()) {\n      return this.acl.find(function (aclItem) {\n        return aclItem.get('entity').id === model.id;\n      });\n    }\n  },\n\n  _organizationAclItem: function (m) {\n    // try to get the organization from the user groups collection,\n    // then from the user model (Editor),\n    // and finally from the user model (Builder)\n    var org = _.result(m.collection, 'organization') || m.organization || m._organizationModel;\n\n    if (org) {\n      return this._ownAclItem(org);\n    }\n  },\n\n  _mostPrivilegedGroupAclItem: function (m) {\n    var groups = _.result(m.groups, 'models');\n\n    if (groups) {\n      return this._findMostPrivilegedAclItem(groups, this._ownAclItem);\n    }\n  },\n\n  /**\n   * Iterates over a items in given list using the iteratee, stops and returns when found the ACL item with best access (i.e. READ_WRITE), or the\n   * list is completed.\n   * @param {Array} list\n   * @param {Function} iteratee that takes an item from list and returns an access\n   *   iteratee is called in context of this model.\n   * @Return {String} 'r', 'rw', or undefined if there were no access for given item\n   */\n  _findMostPrivilegedAclItem: function (list, iteratee) {\n    var aclItem;\n    for (var i = 0, x = list[i]; x && Utils.result(aclItem, 'get', 'access') !== READ_WRITE; x = list[++i]) {\n      // Keep last ACL item if iteratee returns nothing\n      aclItem = iteratee.call(this, x) || aclItem;\n    }\n    return aclItem;\n  },\n\n  /**\n   * Grants access to a set of items\n   * @param {Object} model\n   * @param {String} access can take the following values:\n   * - 'r': read only\n   * - 'rw': read and write permission\n   */\n  _grantAccess: function (model, access) {\n    var aclItem = this._ownAclItem(model);\n    if (aclItem) {\n      aclItem.set('access', access);\n    } else {\n      aclItem = this._newAclItem(model, access);\n      if (aclItem.isValid()) {\n        this.acl.add(aclItem);\n      } else {\n        throw new Error(access + ' is not a valid ACL access');\n      }\n    }\n  },\n\n  _newAclItem: function (model, access) {\n    var type;\n    if (model instanceof UserModel) {\n      type = 'user';\n    } else if (model instanceof GroupModel) {\n      type = 'group';\n    } else if (this._isOrganization(model)) {\n      type = 'org';\n    } else {\n      throw new Error('model not recognized as a valid ACL entity ' + model);\n    }\n\n    return new ACLItemModel({\n      type: type,\n      entity: model,\n      access: access\n    });\n  }\n});\n\nexports.READ_ONLY = READ_ONLY;\nexports.READ_WRITE = READ_WRITE;\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar syncAbort = require('./backbone/sync-abort');\nvar STATUS = require('./query-base-status');\nvar MAX_GET_LENGTH = 1024;\nvar MAX_REPEATED_ERRORS = 3;\n\nmodule.exports = Backbone.Model.extend({\n  initialize: function (attrs, options) {\n    this.repeatedErrors = 0;\n\n    this.listenTo(this, 'change:status', this._onStatusChanged);\n    this.listenTo(this, 'change:ready', this._onReadyChanged);\n  },\n\n  /**\n   * @override {Backbone.prototype.sync} abort ongoing request if there is any\n   */\n  sync: syncAbort,\n\n  getStatusValue: function () {\n    return this.get('status');\n  },\n\n  isInInitialStatus: function () {\n    return this.get('status') === STATUS.initial;\n  },\n\n  isFetched: function () {\n    return this.get('status') === STATUS.fetched;\n  },\n\n  isFetching: function () {\n    return this.get('status') === STATUS.fetching;\n  },\n\n  isErrored: function () {\n    return this.get('status') === STATUS.errored;\n  },\n\n  isUnavailable: function () {\n    return this.get('status') === STATUS.unavailable;\n  },\n\n  isDone: function () {\n    return this.isFetched() || this.isErrored();\n  },\n\n  isInFinalStatus: function () {\n    var finalStatuses = [STATUS.unavailable, STATUS.fetched, STATUS.errored];\n    return _.contains(finalStatuses, this.get('status'));\n  },\n\n  canFetch: function () {\n    var hasQuery = this.hasQuery();\n    var isReady = this.get('ready');\n\n    return hasQuery && isReady;\n  },\n\n  hasQuery: function () {\n    return !!this.get('query');\n  },\n\n  shouldFetch: function () {\n    return this.canFetch() && !this.isFetched() && !this.isFetching() && !this.isErrored();\n  },\n\n  resetFetch: function () {\n    this.set('status', STATUS.unfetched);\n  },\n\n  /**\n   * @override {Backbone.prototype.isNew} for this.destroy() to work (not try to send DELETE request)\n   */\n  isNew: function () {\n    return true;\n  },\n\n  hasRepeatedErrors: function () {\n    return this.repeatedErrors >= MAX_REPEATED_ERRORS;\n  },\n\n  _onStatusChanged: function () {\n    if (this.isInFinalStatus()) {\n      this.trigger('inFinalStatus');\n    }\n  },\n\n  _addChangeListener: function () {\n    this.bind('change', this._onChange, this);\n  },\n\n  _removeChangeListener: function () {\n    this.unbind('change', this._onChange, this);\n  },\n\n  _httpMethod: function () {\n    return this._getSqlApiQueryParam().length > MAX_GET_LENGTH\n      ? 'POST'\n      : 'GET';\n  },\n\n  _incrementRepeatedError: function () {\n    this.repeatedErrors++;\n  },\n\n  _resetRepeatedError: function () {\n    this.repeatedErrors = 0;\n  },\n\n  _onReadyChanged: function () {\n    if (this.get('ready') && this.shouldFetch()) {\n      this.fetch();\n    }\n  }\n});\n","module.exports = {\n  initial: 'initial',\n  unavailable: 'unavailable',\n  unfetched: 'unfetched',\n  fetching: 'fetching',\n  fetched: 'fetched',\n  errored: 'errored'\n};\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar DEACTIVATE_MATRIX = {\n  'number': ['date'],\n  'boolean': ['date'],\n  'date': ['boolean']\n};\nvar DESTRUCTIVE_MATRIX = {\n  'string': {\n    'string': false,\n    'number': true,\n    'date': true,\n    'boolean': true\n  },\n  'number': {\n    'string': false,\n    'number': false,\n    'date': true,\n    'boolean': true\n  },\n  'date': {\n    'string': false,\n    'number': true,\n    'date': false,\n    'boolean': true\n  },\n  'boolean': {\n    'string': false,\n    'number': false,\n    'date': true,\n    'boolean': false\n  }\n};\nvar NON_EDITABLE_ATTRIBUTES = [\n  'the_geom_webmercator',\n  'cartodb_id',\n  'the_geom'\n];\n\nmodule.exports = Backbone.Model.extend({\n\n  url: function () {\n    if (this._tableName) {\n      var baseUrl = this._configModel.get('base_url');\n      var version = this._configModel.urlVersion('column');\n      var url = baseUrl + '/api/' + version + '/tables/' + this._tableName + '/columns/';\n\n      if (!this.isNew()) {\n        // If name changes, we should point to the \"old\" name\n        // in order to make the correct call\n        url += this.previous('name') || this.get('name');\n      }\n\n      return url;\n    }\n\n    return false;\n  },\n\n  parse: function (attrs) {\n    return {\n      name: attrs.name,\n      type: attrs.cartodb_type || attrs.type,\n      isNew: false\n    };\n  },\n\n  initialize: function (models, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n\n    this._tableName = opts.tableName;\n    this._configModel = opts.configModel;\n  },\n\n  isNew: function () {\n    return this.get('isNew');\n  },\n\n  isEditable: function () {\n    return !_.contains(NON_EDITABLE_ATTRIBUTES, this.get('name'));\n  },\n\n  // This is relative becuase we could set any value to cartodb_id\n  isCartoDBIDColumn: function () {\n    return this.get('name') === 'cartodb_id' && this.get('type') === 'number';\n  },\n\n  isGeometryColumn: function () {\n    return this.get('type') === 'geometry';\n  }\n}, {\n  isTypeChangeDestructive: function (type, newType) {\n    return DESTRUCTIVE_MATRIX[type][newType];\n  },\n\n  isTypeChangeAllowed: function (type, newType) {\n    var deactivated = DEACTIVATE_MATRIX[type] || [];\n    deactivated = deactivated.concat([type]);\n    return !_.contains(deactivated, newType);\n  }\n});\n","var Backbone = require('backbone');\nvar _ = require('underscore');\nvar QueryColumnModel = require('./query-column-model');\n\nmodule.exports = Backbone.Collection.extend({\n\n  model: function (attrs, opts) {\n    var self = opts.collection;\n    return new QueryColumnModel(attrs, {\n      configModel: self._configModel,\n      tableName: self._tableName\n    });\n  },\n\n  url: function () {\n    if (this._tableName) {\n      var baseUrl = this._configModel.get('base_url');\n      var version = this._configModel.urlVersion('column');\n      return baseUrl + '/api/' + version + '/tables/' + this._tableName + '/columns';\n    }\n\n    return false;\n  },\n\n  initialize: function (models, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n    if (!opts.querySchemaModel) throw new Error('querySchemaModel is required');\n\n    this._tableName = opts.tableName;\n    this._querySchemaModel = opts.querySchemaModel;\n    this._configModel = opts.configModel;\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.bind('add remove change:type change:name', function () {\n      this.reset();\n      this._querySchemaModel.set('status', 'unfetched');\n      this._querySchemaModel.fetch();\n    }, this);\n    this._querySchemaModel.bind('change:status', function (mdl, status) {\n      if (status === 'fetched') {\n        this.reset(this._querySchemaModel.columnsCollection.toJSON());\n      }\n    }, this);\n  },\n\n  setTableName: function (name) {\n    if (!name) return;\n\n    if (this._tableName) {\n      this._tableName = name;\n\n      this.each(function (columnModel) {\n        columnModel._tableName = name;\n      });\n    }\n  },\n\n  addColumn: function (opts) {\n    opts = opts || {};\n    this.create(\n      {\n        name: 'column_' + new Date().getTime(),\n        type: 'string',\n        isNew: true\n      },\n      _.extend(\n        opts,\n        {\n          wait: true,\n          parse: false\n        }\n      )\n    );\n  }\n\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar BaseModel = require('./query-base-model');\nvar STATUS = require('./query-base-status');\n/* eslint-disable */\nvar template = _.template(\"\" +\n\"SELECT CASE LOWER(ST_GeometryType(<%= geom_column %>)) \" +\n\"     WHEN 'st_polygon' THEN 'polygon' \" +\n\"     WHEN 'st_multipolygon' THEN 'polygon' \" +\n\"     WHEN 'st_multilinestring' THEN 'line' \" +\n\"     WHEN 'st_linestring' THEN 'line' \" +\n\"     WHEN 'st_multipoint' THEN 'point' \" +\n\"     WHEN 'st_point' THEN 'point' \" +\n\"     ELSE '' \" +\n\"  END AS the_geom FROM (<%= sql %>) __wrapped WHERE <%= geom_column %> IS NOT NULL\"\n/* eslint-enable */\n);\n\nvar THE_GEOM_NOT_FOUND_ERROR = 'column \\\"the_geom\\\" does not exist';\nvar PARAMS = {\n  sort_order: 'asc',\n  rows_per_page: 40,\n  page: 0\n};\nvar GEOMETRIES = {\n  LINE: 'line',\n  POINT: 'point',\n  POLYGON: 'polygon'\n};\n\n/**\n * Model to represent a schema of a SQL query.\n */\nmodule.exports = BaseModel.extend({\n\n  defaults: {\n    query: '',\n    status: STATUS.initial,\n    simple_geom: '', // , 'point', 'polygon', 'line'\n    ready: false // until true there's no data available on the table(s) used in the query\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n    BaseModel.prototype.initialize.call(this, attrs, opts);\n\n    this._configModel = opts.configModel;\n\n    this._addChangeListener();\n  },\n\n  url: function () {\n    return this._configModel.getSqlApiUrl();\n  },\n\n  fetch: function (opts) {\n    if (!this.canFetch()) return;\n\n    this.set('status', STATUS.fetching);\n\n    opts = opts || {};\n    opts.errorCallback = opts && (opts.originalError || opts.error);\n    var successCallback = opts && (opts.success || opts.complete);\n\n    opts.data = _.extend(\n      opts.data || {},\n      {\n        api_key: this._configModel.get('api_key'),\n        q: this._getSqlApiQueryParam(opts.geomColumnName)\n      },\n      PARAMS\n    );\n\n    opts.method = this._httpMethod();\n\n    opts.success = function (model, response) {\n      this._resetRepeatedError();\n      if (successCallback) { successCallback(response); }\n    }.bind(this);\n\n    opts.error = function (model, response) {\n      if (response && response.statusText !== 'abort') {\n        var error = response.responseText ? JSON.parse(response.responseText).error : [];\n        // in case we get an error of the_geom does not exists try with the_geom_webmercator to get the geometry type\n        if (error.length === 1 && error[0] === THE_GEOM_NOT_FOUND_ERROR) {\n          this.fetch(_.extend({}, _.omit(opts, 'success'), { originalError: opts.errorCallback, geomColumnName: 'the_geom_webmercator' }));\n        } else {\n          this._incrementRepeatedError();\n\n          this.set({\n            simple_geom: '',\n            query_errors: error,\n            status: this.hasRepeatedErrors() ? STATUS.errored : STATUS.unavailable\n          });\n\n          if (opts.errorCallback) {\n            opts.errorCallback({\n              status: response.status || 'Unknown',\n              error: error\n            });\n          }\n        }\n      }\n    }.bind(this);\n\n    return Backbone.Model.prototype.fetch.call(this, opts);\n  },\n\n  parse: function (r) {\n    var simpleGeom;\n\n    _.some(r.rows, function (row) {\n      return !!(simpleGeom = row.the_geom); // to stop when found a valid simple geom\n    });\n\n    return {\n      status: STATUS.fetched,\n      simple_geom: simpleGeom || ''\n    };\n  },\n\n  hasValue: function () {\n    throw new Error('QueryGeometryModel.hasValue() is an async operation. Use `.hasValueAsync` instead.');\n  },\n\n  hasValueAsync: function () {\n    var self = this;\n    if (this.isFetched()) {\n      return Promise.resolve(!!this.get('simple_geom'));\n    } else {\n      return new Promise(function (resolve) {\n        self.listenToOnce(self, 'inFinalStatus', function () {\n          resolve(!!self.get('simple_geom'));\n        });\n      });\n    }\n  },\n\n  _onChange: function () {\n    this._removeChangeListener();\n\n    if (!this.hasChanged('status') && this.get('status') === STATUS.fetching) {\n      // If it is already fetching just redo the fetch with latest attrs\n      // in case the query has changed\n      if (this.hasChanged('query')) {\n        this.fetch();\n      }\n    } else if (this.hasChanged('query') || this.hasChanged('ready')) {\n      this.set('status', this.get('query') ? STATUS.unfetched : STATUS.unavailable, { silent: true });\n    }\n\n    this._addChangeListener();\n  },\n\n  _getSqlApiQueryParam: function (geomColumnName) {\n    return template({\n      geom_column: geomColumnName || 'the_geom',\n      sql: this.get('query')\n    });\n  },\n\n  isPolygon: function () {\n    return this.get('simple_geom') === GEOMETRIES.POLYGON;\n  }\n});\n","var Backbone = require('backbone');\nvar _ = require('underscore');\n\nmodule.exports = Backbone.Model.extend({\n\n  // In case that there is already an id attribute\n  idAttribute: '__id',\n\n  url: function () {\n    if (this._tableName && this._configModel) {\n      var baseUrl = this._configModel.get('base_url');\n      var version = this._configModel.urlVersion('record');\n      var url = baseUrl + '/api/' + version + '/tables/';\n\n      if (this.hasWriteAccess(this._userModel) && !this.isOwner(this._userModel)) {\n        var owner = this._permissionModel.getOwner();\n        var ownerUsername = owner.get('username');\n\n        url += ownerUsername + '.' + this._tableName + '/records';\n      } else {\n        url += this._tableName + '/records';\n      }\n\n      if (!this.isNew()) {\n        url += '/' + this.get('cartodb_id');\n      }\n\n      return url;\n    }\n\n    return false;\n  },\n\n  initialize: function (attrs, opts) {\n    this.collection = this.collection || {};\n\n    this._tableName = opts.tableName || this.collection._tableName;\n    this._configModel = opts.configModel || this.collection._configModel;\n    this._permissionModel = opts.permissionModel || this.collection._permissionModel;\n    this._userModel = opts.userModel || this.collection._userModel;\n\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.bind('error', this._onError, this);\n  },\n\n  hasWriteAccess: function (userModel) {\n    if (!userModel || !this._permissionModel) {\n      return false;\n    }\n    return this._permissionModel.hasWriteAccess(userModel);\n  },\n\n  isOwner: function (userModel) {\n    if (!userModel || !this._permissionModel) {\n      return false;\n    }\n    return this._permissionModel.isOwner(userModel);\n  },\n\n  isNew: function () {\n    return !this.has('cartodb_id');\n  },\n\n  isGeomLoaded: function () {\n    try {\n      JSON.parse(this.get('the_geom'));\n      return true;\n    } catch (e) {\n      return false;\n    }\n  },\n\n  fetchRowIfGeomIsNotLoaded: function (callback) {\n    if (this.isGeomLoaded()) {\n      callback();\n      return;\n    }\n\n    this.fetch({\n      success: callback\n    });\n  },\n\n  _onError: function () {\n    this.set(this.previousAttributes());\n  },\n\n  sync: function () {\n    this.trigger('loading', this);\n    Backbone.Model.prototype.sync.apply(this, arguments);\n  },\n\n  parse: function (attrs) {\n    if (!attrs.__id) {\n      attrs.__id = _.uniqueId();\n    }\n    return attrs;\n  },\n\n  toJSON: function () {\n    return _.omit(\n      this.attributes,\n      '__id',\n      'the_geom_webmercator'\n    );\n  }\n\n});\n","var Backbone = require('backbone');\nvar QueryRowModel = require('./query-row-model');\nvar syncAbort = require('./backbone/sync-abort');\nvar _ = require('underscore');\nvar STATUS = require('./query-base-status');\n\nvar MAX_GET_LENGTH = 1024;\nvar WRAP_SQL_TEMPLATE = 'select <%= selectedColumns %> from (<%= sql %>) __wrapped';\nvar MAX_REPEATED_ERRORS = 3;\n\nmodule.exports = Backbone.Collection.extend({\n  defaults: {\n    empty: true\n  },\n\n  DEFAULT_FETCH_OPTIONS: {\n    rows_per_page: 40,\n    sort_order: 'asc',\n    page: 0\n  },\n\n  // Due to a problem how Backbone checks if there is a duplicated model\n  // or not, we can't create the model with a function + its necessary options\n  model: QueryRowModel,\n\n  sync: syncAbort,\n\n  url: function () {\n    return this._configModel.getSqlApiUrl();\n  },\n\n  initialize: function (models, opts) {\n    opts = opts || {};\n\n    this._repeatedErrors = 0;\n    this._tableName = opts.tableName;\n    this._querySchemaModel = opts.querySchemaModel;\n    this._configModel = opts.configModel;\n\n    this.statusModel = new Backbone.Model({\n      status: STATUS.initial\n    });\n\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._querySchemaModel, 'change:query', this._onQuerySchemaQueryChange);\n\n    if (this._querySchemaModel && this._querySchemaModel.columnsCollection) {\n      this.listenTo(this._querySchemaModel.columnsCollection, 'reset', this._onColumnsCollectionReset);\n    }\n\n    this.listenTo(this.statusModel, 'change:status', this._onStatusChanged);\n  },\n\n  _onColumnsCollectionReset: function () {\n    this._onQuerySchemaQueryChange();\n\n    if (this.shouldFetch()) {\n      this.fetch();\n    }\n  },\n\n  getStatusValue: function () {\n    return this.statusModel.get('status');\n  },\n\n  isInInitialStatus: function () {\n    return this.getStatusValue() === STATUS.initial;\n  },\n\n  isFetched: function () {\n    return this.getStatusValue() === STATUS.fetched;\n  },\n\n  isErrored: function () {\n    return this.getStatusValue() === STATUS.errored;\n  },\n\n  isFetching: function () {\n    return this.getStatusValue() === STATUS.fetching;\n  },\n\n  isDone: function () {\n    return this.isFetched() || this.isErrored();\n  },\n\n  isInFinalStatus: function () {\n    var finalStatuses = [STATUS.unavailable, STATUS.fetched, STATUS.errored];\n    return _.contains(finalStatuses, this.getStatusValue());\n  },\n\n  isUnavailable: function () {\n    return this.getStatusValue() === STATUS.unavailable;\n  },\n\n  canFetch: function () {\n    var hasQuery = !!this._querySchemaModel.get('query');\n    var isReady = this._querySchemaModel.get('ready');\n    var isFetched = this._querySchemaModel.isFetched();\n    var isErrored = this._querySchemaModel.isErrored();\n\n    return hasQuery && isReady && isFetched && !isErrored;\n  },\n\n  shouldFetch: function () {\n    return !this.isFetched() && !this.isFetching() && this.canFetch() && !this.isErrored();\n  },\n\n  resetFetch: function () {\n    this.statusModel.set('status', STATUS.unfetched);\n  },\n\n  isEmpty: function () {\n    throw new Error('QueryRowsCollection.isEmpty() is an async operation. Use `.isEmptyAsync` instead.');\n  },\n\n  isEmptyAsync: function () {\n    if (this.isInFinalStatus()) {\n      return Promise.resolve(this.size() === 0);\n    } else {\n      return new Promise(function (resolve) {\n        this.listenToOnce(this, 'inFinalStatus', function () {\n          resolve(this.size() === 0);\n        });\n      }.bind(this));\n    }\n  },\n\n  _onStatusChanged: function () {\n    if (this.isInFinalStatus()) {\n      this.trigger('inFinalStatus');\n    }\n  },\n\n  _onQuerySchemaQueryChange: function () {\n    this.statusModel.set('status', 'unfetched');\n    this.reset([], { silent: true });\n  },\n\n  _geometryColumnSQL: function (column) {\n    /* eslint-disable */\n    return [\n      \"CASE\",\n      \"WHEN GeometryType(\" + column + \") = 'POINT' THEN\",\n        \"ST_AsGeoJSON(\" + column + \",8)\",\n      \"WHEN (\" + column + \" IS NULL) THEN\",\n        \"NULL\",\n      \"ELSE\",\n        \"GeometryType(\" + column + \")\",\n      \"END \" + column\n    ].join(' ');\n    /* eslint-enable */\n  },\n\n  // return wrapped SQL removing the_geom and the_geom_webmercator\n  // to avoid fetching those columns.\n  // So for a sql like\n  // select * from table the returned value is\n  // select column1, column2, column3... from table\n  _getWrappedSQL: function (excludeColumns) {\n    var self = this;\n    var schema = this._querySchemaModel.columnsCollection.toJSON();\n\n    var selectedColumns = _\n      .chain(schema)\n      .omit(function (item) {\n        return _.contains(excludeColumns, item.name);\n      })\n      .map(function (item, index) {\n        if (item.type === 'geometry') {\n          return self._geometryColumnSQL(item.name);\n        }\n        return '\"' + item.name + '\"';\n      })\n      .value()\n      .join(',');\n\n    return _.template(WRAP_SQL_TEMPLATE)({\n      selectedColumns: selectedColumns,\n      sql: this._querySchemaModel.get('query')\n    });\n  },\n\n  _httpMethod: function () {\n    return this._querySchemaModel.get('query').length > MAX_GET_LENGTH\n      ? 'POST'\n      : 'GET';\n  },\n\n  _incrementRepeatedError: function () {\n    this._repeatedErrors++;\n  },\n\n  _resetRepeatedError: function () {\n    this._repeatedErrors = 0;\n  },\n\n  hasRepeatedErrors: function () {\n    return this._repeatedErrors >= MAX_REPEATED_ERRORS;\n  },\n\n  fetch: function (opts) {\n    opts = opts || {};\n\n    var previousStatus = this.getStatusValue();\n    this.statusModel.set('status', STATUS.fetching);\n\n    var excludeColumns = (opts.data && opts.data.exclude) || [];\n\n    opts = opts || {};\n    opts.data = _.extend(\n      {},\n      this.DEFAULT_FETCH_OPTIONS,\n      opts.data && _.omit(opts.data, 'exclude') || {},\n      {\n        api_key: this._configModel.get('api_key'),\n        q: this._getWrappedSQL(excludeColumns)\n      }\n    );\n\n    opts.method = this._httpMethod();\n    var errorCallback = opts.error;\n    opts.error = function (coll, resp) {\n      if (previousStatus === STATUS.unavailable) {\n        this._incrementRepeatedError();\n      }\n\n      if (resp && resp.error) {\n        this._querySchemaModel.setError(resp.error);\n      }\n\n      this.trigger('fail', coll, resp);\n      this.statusModel.set('status', this.hasRepeatedErrors() ? STATUS.errored : STATUS.unavailable);\n      errorCallback && errorCallback(coll, resp);\n    }.bind(this);\n\n    var successCallback = opts.success;\n    opts.success = function (coll, resp, options) {\n      if (resp && resp.error) {\n        return opts.error.apply(this, arguments);\n      }\n\n      this._resetRepeatedError();\n      this.statusModel.set('status', STATUS.fetched);\n      successCallback && successCallback(coll, resp);\n    }.bind(this);\n\n    // Needed to reset the whole collection when a fetch is done\n    opts.reset = true;\n\n    return Backbone.Collection.prototype.fetch.call(this, opts);\n  },\n\n  parse: function (r) {\n    return this._parseWithID(r.rows);\n  },\n\n  reset: function (result, opts) {\n    var items = [];\n\n    if (result && result.rows) {\n      // If reset comes from a fetch, we need to parse the rows\n      items = result.rows;\n    } else {\n      // If it comes directly from a simple reset function\n      items = result;\n    }\n\n    Backbone.Collection.prototype.reset.apply(this, [this._parseWithID(items)]);\n  },\n\n  _parseWithID: function (array) {\n    return _.map(array, function (attrs) {\n      attrs.__id = _.uniqueId();\n      return attrs;\n    });\n  },\n\n  addRow: function (opts) {\n    opts = opts || {};\n    this.create(\n      {\n        __id: _.uniqueId()\n      },\n      _.extend(\n        opts,\n        {\n          wait: true,\n          parse: true\n        }\n      )\n    );\n  },\n\n  setTableName: function (name) {\n    if (!name) return;\n\n    if (this._tableName) {\n      this._tableName = name;\n\n      this.each(function (rowModel) {\n        rowModel._tableName = name;\n      });\n    }\n  }\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar BaseModel = require('./query-base-model');\nvar QueryRowsCollection = require('./query-rows-collection');\nvar SQLUtils = require('builder/helpers/sql-utils');\nvar STATUS = require('./query-base-status');\n\nvar DEFAULT_TABLE_QUERY_TEMPLATE = _.template('SELECT * FROM <%= tableName %>');\nvar WRAPPED_SQL_QUERY_TEMPLATE = _.template('SELECT * FROM (<%= sql %>) __wrapped');\n\n/**\n * Model to represent a schema of a SQL query.\n */\nmodule.exports = BaseModel.extend({\n\n  defaults: {\n    query: '',\n    sort_order: 'asc',\n    rows_per_page: 0,\n    page: 0,\n    status: STATUS.initial,\n    ready: false // until true there's no data available on the table(s) used in the query\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n    BaseModel.prototype.initialize.call(this, attrs, opts);\n\n    this._configModel = opts.configModel;\n    this.columnsCollection = new Backbone.Collection([]);\n    this.rowsCollection = new QueryRowsCollection([]);\n\n    if (this.get('status') === STATUS.initial) {\n      this._setStatusPerQueryValue();\n    }\n\n    this._addChangeListener();\n  },\n\n  url: function () {\n    return this._configModel.getSqlApiUrl();\n  },\n\n  fetch: function (opts) {\n    if (!this.canFetch()) return;\n\n    this.set('status', STATUS.fetching);\n\n    opts = opts || {};\n    opts.errorCallback = opts && (opts.originalError || opts.error);\n    var successCallback = opts && (opts.success || opts.complete);\n\n    opts.data = _.extend(\n      opts.data || {},\n      {\n        sort_order: this.get('sort_order'),\n        rows_per_page: this.get('rows_per_page'),\n        page: this.get('page'),\n        api_key: this._configModel.get('api_key'),\n        q: this._getSqlApiQueryParam()\n      }\n    );\n\n    opts.method = this._httpMethod();\n\n    opts.success = function (model, response) {\n      this._resetRepeatedError();\n      successCallback && successCallback(response);\n    }.bind(this);\n\n    opts.error = function (model, response) {\n      if (response && response.statusText !== 'abort') {\n        var error = response.responseText ? JSON.parse(response.responseText).error : [];\n\n        this._incrementRepeatedError();\n\n        this.set({\n          query_errors: error,\n          status: this.hasRepeatedErrors() ? STATUS.errored : STATUS.unavailable\n        });\n\n        opts.errorCallback && opts.errorCallback({\n          status: response.status || 'Unknown',\n          error: error\n        });\n      }\n    }.bind(this);\n\n    return Backbone.Model.prototype.fetch.call(this, opts);\n  },\n\n  parse: function (r) {\n    this.rowsCollection.reset(r.rows);\n\n    this.columnsCollection.reset(\n      _.map(r.fields, function (d, name) {\n        return {\n          name: name,\n          type: d.type\n        };\n      })\n    );\n\n    return { status: STATUS.fetched };\n  },\n\n  hasDefaultQueryFor: function (tableName) {\n    if (!this.hasQuery()) {\n      return false;\n    }\n    var defaultQueryForTableName = DEFAULT_TABLE_QUERY_TEMPLATE({ tableName: tableName });\n    return SQLUtils.isSameQuery(this.get('query'), defaultQueryForTableName);\n  },\n\n  getColumnNames: function () {\n    return this.columnsCollection.pluck('name');\n  },\n\n  getColumnType: function (columnName) {\n    return this.isFetched() ? this.columnsCollection.findWhere({ name: columnName }).get('type') : undefined;\n  },\n\n  _onChange: function () {\n    this._removeChangeListener();\n\n    if (!this.hasChanged('status') && this.get('status') === STATUS.fetching) {\n      this.fetch(); // If is already fetching just redo the fetch with latest attrs\n    } else {\n      if (this.hasChanged('query')) {\n        this.columnsCollection.reset();\n        this._setStatusPerQueryValue();\n      }\n    }\n\n    this._addChangeListener();\n  },\n\n  _setStatusPerQueryValue: function () {\n    this.set('status', this.get('query') ? STATUS.unfetched : STATUS.unavailable, { silent: true });\n  },\n\n  setError: function (error) {\n    var queryErrors = this.get('query_errors');\n    if (queryErrors && queryErrors.length) {\n      return;\n    }\n\n    this._incrementRepeatedError();\n\n    this.set({\n      query_errors: error,\n      status: this.hasRepeatedErrors() ? STATUS.errored : STATUS.unavailable\n    });\n  },\n\n  // Basically checks if an schema is different than the current one\n  hasDifferentSchemaThan: function (schemaArray) {\n    return !_.every(schemaArray, function (columnObj) {\n      var columnModel = this.columnsCollection.findWhere({ name: columnObj.name });\n      return columnModel && (columnModel.get('type') === columnObj.type || columnObj.type == null);\n    }, this);\n  },\n\n  resetDueToAlteredData: function () {\n    this.set('status', STATUS.unfetched);\n    this.trigger('resetDueToAlteredData');\n    this.fetch();\n  },\n\n  _getSqlApiQueryParam: function () {\n    return WRAPPED_SQL_QUERY_TEMPLATE({\n      sql: this.get('query')\n    });\n  }\n});\n","var _ = require('underscore');\nvar AssetModel = require('./asset-model');\n\nmodule.exports = AssetModel.extend({\n\n  defaults: {\n    ext: 'svg',\n    folder: 'maki-icons',\n    host: 'https://s3.amazonaws.com',\n    bucket: 'com.cartodb.users-assets.production',\n    kind: 'marker',\n    name: '',\n    public_url: '',\n    size: '18',\n    state: 'idle'\n  },\n\n  getURLFor: function (name) {\n    var url = this.get('host') + '/' + this.get('bucket') + '/' + this.get('folder') + '/' + name;\n    var size = this.get('size') ? '-' + this.get('size') : '';\n    return url + size + '.' + this.get('ext');\n  },\n\n  toJSON: function () {\n    var attributes = _.clone(this.attributes);\n\n    attributes['public_url'] = this.getURLFor(attributes['icon']);\n    return attributes;\n  },\n\n  get: function (attributeName) {\n    var attribute = this.attributes[attributeName];\n\n    if (attributeName === 'public_url') {\n      attribute = this.getURLFor(this.attributes['icon']);\n    }\n\n    return attribute;\n  }\n});\n","var StaticAssetModel = require('./static-asset-model');\nvar AssetsCollection = require('./assets-collection');\n\nmodule.exports = AssetsCollection.extend({\n  model: StaticAssetModel,\n\n  url: function () {\n    return '';\n  },\n\n  initialize: function (models, opts) {\n\n  },\n\n  parse: function (resp, xhr) {\n    return [];\n  }\n});\n","var Backbone = require('backbone');\nvar _ = require('underscore');\nvar $ = require('jquery');\nvar MULTIPLIER = 1.2; // Multiply current interval for this number\nvar INTERVAL = 1500; // Interval time between poll checkings\nvar SYNC_GAP = 900000; // Gap (in ms) necessary to perform next synchronization\nvar POLLING_GAP = 15000; // Gap (in seconds) necessary to start polling and checking synchronization\n\n/**\n *  Synced table model\n */\n\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    name: '',\n    url: '',\n    state: '',\n    run_at: 0,\n    ran_at: 0,\n    retried_times: 0,\n    interval: 0,\n    error_code: 0,\n    error_message: '',\n    service_name: '',\n    service_item_id: '',\n    content_guessing: true,\n    type_guessing: true\n  },\n\n  urlRoot: function () {\n    var version = this._configModel.urlVersion('synchronizations');\n    var baseUrl = this._configModel.get('base_url');\n    return baseUrl + '/api/' + version + '/synchronizations/';\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n    this._configModel = opts.configModel;\n\n    this.bind('destroy', function () {\n      this.unset('id');\n    });\n\n    this._checkState();\n\n    this.bind('change:error_code change:error_message change:state', this._checkState, this);\n  },\n\n  toJSON: function () {\n    var c = _.clone(this.attributes);\n\n    var d = {\n      url: c.url,\n      interval: c.interval,\n      content_guessing: c.content_guessing,\n      type_guessing: c.type_guessing,\n      create_vis: c.create_vis\n    };\n\n    if (c.type === 'remote') {\n      _.extend(d, {\n        remote_visualization_id: c.remote_visualization_id,\n        create_vis: false,\n        value: c.value\n      });\n    }\n\n    if (c.id !== undefined) {\n      d.id = c.id;\n    }\n\n    // Comes from a service?\n    if (c.service_name) {\n      d.service_name = c.service_name;\n      d.service_item_id = c.service_item_id;\n    }\n\n    return d;\n  },\n\n  _checkState: function () {\n    if (this.get('error_code') || this.get('error_message')) {\n      this.set('state', 'failure');\n    }\n  },\n\n  syncNow: function (callback) {\n    if (!callback) throw new Error('callback is required');\n\n    $.ajax({\n      url: this.url() + '/sync_now',\n      type: 'PUT'\n    }).always(callback);\n  },\n\n  // Checks for poll to finish\n  pollCheck: function (i) {\n    var self = this;\n    var interval = INTERVAL;\n\n    this.pollTimer = setInterval(request, interval);\n\n    function request () {\n      self.destroyCheck();\n\n      self.fetch({\n        error: function (m, e) {\n          self.set({\n            error_message: e.statusText || '',\n            state: 'failure'\n          });\n        }\n      });\n\n      interval = interval * MULTIPLIER;\n\n      self.pollTimer = setInterval(request, interval);\n    }\n  },\n\n  destroyCheck: function () {\n    clearInterval(this.pollTimer);\n  },\n\n  isSync: function () {\n    return !this.isNew() && this.get('interval') > 0;\n  },\n\n  isSyncing: function () {\n    return this.get('state') === 'syncing' || this.get('state') === 'queued';\n  },\n\n  canSyncNow: function () {\n    var ranAt = new Date(this.get('ran_at'));\n    var now = new Date();\n    var gap = SYNC_GAP; // Importer needs some time to perform the next sync, set 15 min as default.\n\n    if (this.isSyncing()) {\n      return false;\n    }\n\n    return (now.getTime() - ranAt.getTime()) > gap;\n  },\n\n  linkToTable: function (tableModel) {\n    var self = this;\n    if (tableModel.has('synchronization')) {\n      this.set(tableModel.get('synchronization'));\n    }\n\n    tableModel.bind('change:synchronization', function () {\n      self.set(tableModel.get('synchronization'));\n    }, tableModel);\n\n    tableModel.bind('destroy', function destroy () {\n      self.unbind(null, null, tableModel);\n      self.destroy();\n    }, tableModel);\n  }\n}, {\n  SYNC_GAP: SYNC_GAP,\n  POLLING_GAP: POLLING_GAP\n});\n","var Backbone = require('backbone');\nvar ColumnModel = require('./column-model');\n\n/**\n * A collection of table columns\n */\nmodule.exports = Backbone.Collection.extend({\n\n  model: ColumnModel,\n\n  initialize: function (models, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n    if (!opts.tableModel) throw new Error('tableModel is required');\n\n    this._configModel = opts.configModel;\n    this._tableModel = opts.tableModel;\n  },\n\n  url: function () {\n    var baseUrl = this._configModel.get('base_url');\n    var version = this._configModel.urlVersion('column');\n    return baseUrl + '/api/' + version + '/tables/' + this._tableModel.get('name') + '/columns';\n  }\n\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar TableColumnsCollection = require('./table-columns-collection');\nvar getSimpleGeometryType = require('./get-simple-geometry-type');\nvar PermissionModel = require('./permission-model');\nvar SyncModel = require('./synchronization-model');\nvar TableNameUtils = require('builder/helpers/table-name-utils');\n\n/**\n * Model representing a table.\n */\nmodule.exports = Backbone.Model.extend({\n\n  idAttribute: 'name',\n\n  defaults: {\n    // always not fetched to begin with, since the only way to currently get table data is by an individual request\n    fetched: false,\n    schema: []\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n\n    this._configModel = opts.configModel;\n  },\n\n  urlRoot: function () {\n    var baseUrl = this._configModel.get('base_url');\n    var version = this._configModel.urlVersion('table');\n    return baseUrl + '/api/' + version + '/tables';\n  },\n\n  parse: function (r, opts) {\n    var configModel = (opts && opts.configModel) || this._configModel;\n\n    // \"Sometimes\" table presenter returns the needed data within table_visualization\n    // attribute, because it returns the canonical visualization data. So we have to take\n    // the data from there.\n    if (r.table_visualization && !_.isEmpty(r.table_visualization)) {\n      r = _.extend(\n        {},\n        r.table_visualization,\n        {\n          geometry_types: r.geometry_types\n        }\n      );\n    }\n\n    if (r.synchronization) {\n      if (!this._syncModel) {\n        this._syncModel = new SyncModel(r.synchronization, {\n          configModel: configModel\n        });\n      } else {\n        this._syncModel.set(r.synchronization);\n      }\n    }\n\n    if (r.permission) {\n      if (!this._permissionModel) {\n        this._permissionModel = new PermissionModel(r.permission, {\n          configModel: configModel\n        });\n      } else {\n        this._permissionModel.set(r.permission);\n      }\n    }\n\n    var attrs = _.defaults({\n      fetched: true\n    }, r);\n\n    var columnsAttrs = _.map(r.schema, function (d) {\n      return {\n        name: d[0],\n        type: d[1]\n      };\n    }, this);\n\n    if (!this.columnsCollection) {\n      this.columnsCollection = new TableColumnsCollection(columnsAttrs, {\n        configModel: configModel,\n        tableModel: this\n      });\n    } else {\n      this.columnsCollection.reset(columnsAttrs);\n    }\n\n    return attrs;\n  },\n\n  isOwner: function (userModel) {\n    if (!userModel || !this._permissionModel) {\n      return false;\n    }\n    return this._permissionModel.isOwner(userModel);\n  },\n\n  getUnqualifiedName: function () {\n    return TableNameUtils.getUnqualifiedName(this.get('name'));\n  },\n\n  getOwnerName: function () {\n    var name = this.get('name');\n    if (!name) return null;\n    var tk = name.split('.');\n    if (tk.length === 2) {\n      return tk[0].replace(/\"/g, '');\n    } else if (this._permissionModel) {\n      var ownerModel = this._permissionModel.getOwner();\n      return ownerModel.get('username');\n    } else {\n      return '';\n    }\n  },\n\n  // \"user\".table -> user.table\n  getUnquotedName: function () {\n    var name = this.get('name');\n    return name && name.replace(/\"/g, '');\n  },\n\n  getGeometryType: function () {\n    var types = this.get('geometry_types');\n    var geomTypes = [];\n    if (!_.isArray(types)) {\n      return [];\n    }\n\n    for (var t in types) {\n      var type = types[t];\n      // when there are rows with no geo type null is returned as geotype\n      if (type) {\n        var a = getSimpleGeometryType(type.toLowerCase());\n        if (a) {\n          geomTypes.push(a);\n        }\n      }\n    }\n\n    return _.uniq(geomTypes);\n  },\n\n  getPermissionModel: function () {\n    return this._permissionModel;\n  },\n\n  isReadOnly: function (userModel) {\n    return this.isSync() || !this.hasWriteAccess(userModel);\n  },\n\n  isSync: function () {\n    var syncModel = this.getSyncModel();\n    var isSync = syncModel && syncModel.get('id');\n\n    return !!isSync;\n  },\n\n  hasWriteAccess: function (userModel) {\n    if (!userModel || !this._permissionModel) {\n      return false;\n    }\n    return this._permissionModel.hasWriteAccess(userModel);\n  },\n\n  getSyncModel: function () {\n    return this._syncModel;\n  }\n\n});\n","var _ = require('underscore');\nvar BackboneUndo = require('backbone-undo');\nvar MAXIMUM_STACK_LENGTH = 30;\n\nmodule.exports = {\n  init: function (model, opts) {\n    if (!model) throw new Error('model is required to initialize undoManager');\n\n    opts = opts || {};\n    this.model = model;\n\n    this.model._undoManager = this.undoManager = new BackboneUndo({\n      maximumStackLength: opts.maximumStackLength || MAXIMUM_STACK_LENGTH,\n      register: this.model,\n      track: opts.track\n    });\n\n    this._trackEvents();\n    this._addMethods();\n\n    if (!_.isEmpty(opts.history)) {\n      opts.track && this.undoManager.stopTracking();\n      this._addHistory(opts.history);\n      opts.track && this.undoManager.startTracking();\n    }\n  },\n\n  _trackEvents: function () {\n    _.each(['undo', 'redo'], function (eventType) {\n      this.undoManager.bind(eventType, function () {\n        this.trigger(eventType, this.changed, this);\n      }, this.model);\n    }, this);\n\n    this.undoManager.stack.bind('add remove reset', function () {\n      this.trigger('unredoChanged', this.changed, this);\n    }, this.model);\n  },\n\n  _addHistory: function (history) {\n    var stack = this.undoManager.stack;\n\n    _.each(history, function (attrs, i) {\n      if (history[i + 1]) {\n        stack.add({\n          after: history[i + 1],\n          before: attrs,\n          type: 'change',\n          undoTypes: this.undoManager.undoTypes,\n          object: this.model,\n          magicFusionIndex: 0\n        });\n      }\n    }, this);\n\n    stack.pointer = stack.length - 1;\n  },\n\n  _addMethods: function () {\n    _.extend(\n      this.model,\n      {\n        undo: function () {\n          this._undoManager.undo();\n        },\n\n        redo: function () {\n          this._undoManager.redo();\n        },\n\n        canUndo: function () {\n          return this._undoManager.isAvailable('undo');\n        },\n\n        canRedo: function () {\n          return this._undoManager.isAvailable('redo');\n        },\n\n        getUndoHistory: function () {\n          var list = this._undoManager.stack.toJSON();\n          var data = _.reduce(list, function (memo, attrs, i) {\n            memo.push(attrs.before);\n            return memo;\n          }, [], this);\n          data.push(this.attributes);\n          return data;\n        }\n      }\n    );\n  }\n};\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar UploadConfig = require('builder/config/upload-config');\nvar Utils = require('builder/helpers/utils.js');\nvar moment = require('moment');\nrequire('backbone-model-file-upload');\n\n/**\n * Model that allows uploading files to CartoDB endpoints.\n *\n * NOTE: this model extends Backbone.Model instead of Backbone.Model, because\n * it's required for the vendor/backbone-model-file-upload.\n */\nmodule.exports = Backbone.Model.extend({\n  url: function () {\n    var baseUrl = this._configModel.get('base_url');\n    return baseUrl + '/api/v1/imports';\n  },\n\n  fileAttribute: 'filename',\n\n  defaults: {\n    type: '',\n    value: '',\n    interval: 0,\n    privacy: '',\n    progress: 0,\n    state: 'idle',\n    service_item_id: '',\n    service_name: '',\n    option: '',\n    content_guessing: true,\n    type_guessing: true,\n    create_vis: true\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.userModel) throw new Error('userModel is required');\n    if (!opts.configModel) throw new Error('configModel is required');\n\n    this._userModel = opts.userModel;\n    this._configModel = opts.configModel;\n    this._initBinds();\n    // We need to validate entry attributes\n    this._validate(this.attributes, { validate: true });\n  },\n\n  setUpload: function (d) {\n    this.set(d, {\n      validate: true\n    });\n  },\n\n  isValidToUpload: function () {\n    return this.get('value') && this.get('state') !== 'error';\n  },\n\n  setFresh: function (d) {\n    if (d && !_.isEmpty(d)) {\n      // Set upload properties except create_vis (defined when created)\n      this.set(_.omit(d, 'create_vis'));\n    } else {\n      this.clear();\n    }\n  },\n\n  _initBinds: function () {\n    this.bind('progress', function (progress) {\n      this.set({\n        progress: progress * 100,\n        state: 'uploading'\n      });\n    }, this);\n\n    this.bind('change:value', function () {\n      if (this.get('state') === 'error') {\n        this.set({ state: 'idle' });\n        this.unset('get_error_text', { silent: true });\n      }\n    }, this);\n\n    this.bind('error invalid', function (m, d) {\n      this.set({\n        state: 'error',\n        error_code: (d && d.error_code) || '',\n        get_error_text: {\n          title: _t('data.upload-model.invalid-import'),\n          what_about: (d && d.msg) || ''\n        }\n      });\n    }, this);\n  },\n\n  validate: function (attrs) {\n    if (!attrs) return;\n\n    if (attrs.type === 'file') {\n      // Number of files\n      if (attrs.value && attrs.value.length) {\n        return {\n          msg: _t('data.upload-model.one-file')\n        };\n      }\n\n      // File name\n      var name = attrs.value.name;\n      if (!name) {\n        return {\n          msg: _t('data.upload-model.file-defined')\n        };\n      }\n\n      // File extension\n      var ext = name.substr(name.lastIndexOf('.') + 1);\n      if (ext) {\n        ext = ext.toLowerCase();\n      }\n      if (!_.contains(UploadConfig.fileExtensions, ext)) {\n        return {\n          msg: _t('data.upload-model.file-extension')\n        };\n      }\n      // File size\n      if ((this._userModel.get('remaining_byte_quota') * UploadConfig.fileTimesBigger) < attrs.value.size) {\n        return {\n          msg: _t('data.upload-model.file-size'),\n          error_code: 8001\n        };\n      }\n    }\n\n    if (attrs.type === 'remote') {\n      // Valid remote visualization id?\n      if (!attrs.remote_visualization_id) {\n        return {\n          msg: _t('data.upload-model.visualization-id')\n        };\n      }\n      // Remote size?\n      if (attrs.size && ((this._userModel.get('remaining_byte_quota') * UploadConfig.fileTimesBigger) < attrs.size)) {\n        return {\n          msg: _t('data.upload-model.remote-file-size'),\n          error_code: 8001\n        };\n      }\n    }\n\n    if (attrs.type === 'url') {\n      // Valid URL?\n      if (!Utils.isURL(attrs.value)) {\n        return {\n          msg: _t('data.upload-model.url-invalid')\n        };\n      }\n    }\n\n    if (attrs.type === 'sql') {\n      if (!attrs.value) {\n        return {\n          msg: _t('data.upload-model.query-undefined')\n        };\n      }\n    }\n\n    if (attrs.type === 'duplication') {\n      if (!attrs.value) {\n        return {\n          msg: _t('data.upload-model.dataset-copy-undefined')\n        };\n      }\n    }\n\n    if (attrs.type === 'service' && attrs.service_name === 'twitter_search') {\n      var service_item_id = attrs.service_item_id;\n\n      // Empty?\n      if (!service_item_id || _.isEmpty(service_item_id)) {\n        return {\n          msg: _t('data.upload-model.twitter-data')\n        };\n      }\n\n      // Categories?\n      if (_.isEmpty(service_item_id.categories)) {\n        return {\n          msg: _t('data.upload-model.twitter-categories-invalid')\n        };\n      }\n\n      // Dates?\n      var dates = service_item_id.dates;\n      if (!dates || _.isEmpty(dates)) {\n        return {\n          msg: _t('data.upload-model.twitter-dates-empty')\n        };\n      }\n      var isToDateValid = moment(dates.fromDate) <= moment(new Date());\n      if (!dates.fromDate || !dates.toDate || !isToDateValid) {\n        return {\n          msg: _t('data.upload-model.twitter-dates-invalid')\n        };\n      }\n    }\n  },\n\n  isValid: function () {\n    return this.get('value') && this.get('state') !== 'error';\n  },\n\n  upload: function () {\n    if (this.get('type') === 'file') {\n      var self = this;\n      this.xhr = this.save(\n        {\n          filename: this.get('value')\n        },\n        {\n          success: function (m) {\n            m.set('state', 'uploaded');\n          },\n          error: function (m, msg) {\n            var message = _t('data.upload-model.connection-error');\n\n            if (msg && msg.status === 429) {\n              var response = JSON.parse(msg.responseText);\n              message = response.errors.imports;\n            }\n\n            self.set({\n              state: 'error',\n              get_error_text: {\n                title: _t('data.upload-model.error-happened'),\n                what_about: message\n              }\n            });\n          },\n          complete: function () {\n            delete self.xhr;\n          }\n        }\n      );\n    }\n  },\n\n  stopUpload: function () {\n    if (this.xhr) this.xhr.abort();\n  },\n\n  setGuessing: function (val) {\n    this.set({\n      type_guessing: val,\n      content_guessing: val\n    });\n  },\n\n  setPrivacy: function (val) {\n    this.set('privacy', val);\n  }\n\n});\n","var Backbone = require('backbone');\nvar GroupModel = require('./group-model');\n\n/**\n * Collection of a User's groups.\n */\nmodule.exports = Backbone.Collection.extend({\n  model: GroupModel,\n\n  initialize: function (models, opts) {\n    this.organization = opts.organization;\n  }\n});\n","var Backbone = require('backbone');\nvar _ = require('underscore');\nvar OrganizationModel = require('./organization-model');\nvar UserGroups = require('./user-groups-collection');\nvar CustomBaselayersCollection = require('./custom-baselayers-collection');\n/**\n *  User model\n *\n */\n\nvar UserModel = Backbone.Model.extend({\n  urlRoot: function () {\n    var baseUrl = this._configModel.get('base_url');\n    return baseUrl + '/api/v1/users';\n  },\n\n  defaults: {\n    avatar_url: 'http://cartodb.s3.amazonaws.com/static/public_dashboard_default_avatar.png',\n    username: '',\n    email: ''\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n    this._configModel = opts.configModel;\n    attrs = attrs || {};\n\n    if (!_.isEmpty(this.get('organization'))) {\n      this._organizationModel = new OrganizationModel(\n        this.get('organization'),\n        {\n          configModel: this._configModel,\n          currentUserId: this.id\n        }\n      );\n    }\n\n    if (this.get('layers')) {\n      this.layers = new CustomBaselayersCollection(this.get('layers'), {\n        configModel: this._configModel,\n        currentUserId: this.id\n      });\n    }\n\n    this.groups = new UserGroups(attrs.groups, {\n      organization: this._organizationModel\n    });\n  },\n\n  isViewer: function () {\n    return this.get('viewer') === true;\n  },\n\n  isBuilder: function () {\n    return !this.isViewer();\n  },\n\n  canCreateDatasets: function () {\n    if (this.hasRemainingByteQuota() && this.hasRemainingTableCount()) {\n      return true;\n    }\n    return false;\n  },\n\n  hasRemainingByteQuota: function () {\n    return !(!this.get('remaining_byte_quota') || this.get('remaining_byte_quota') <= 0);\n  },\n\n  isIndividualUser: function () {\n    const proUsers = ['Individual', 'Annual Individual'];\n    return proUsers.indexOf(this.get('account_type')) > -1;\n  },\n\n  hasRemainingTableCount: function () {\n    if (this.isIndividualUser()) {\n      return !(!this.get('table_count') || this.get('table_count') >= this.get('table_quota'));\n    }\n    return true;\n  },\n\n  updateTableCount: function () {\n    var currentTableCount = this.get('table_count');\n    if (currentTableCount) {\n      this.set('table_count', currentTableCount + 1);\n    }\n  },\n\n  hasCreateMapsFeature: function () {\n    return this.isBuilder();\n  },\n\n  hasRemainingPublicMaps: function () {\n    if (this.isIndividualUser()) {\n      return this.get('public_map_quota') > this.getTotalPublicMapsCount();\n    }\n    return true;\n  },\n\n  getTotalPublicMapsCount: function () {\n    var totalPublicPrivacyMapsCount = this.get('public_privacy_map_count') || 0;\n    var totalPasswordPrivacyMapsCount = this.get('password_privacy_map_count') || 0;\n    var totalLinkPrivacyMapsCount = this.get('link_privacy_map_count') || 0;\n\n    return totalPublicPrivacyMapsCount + totalPasswordPrivacyMapsCount + totalLinkPrivacyMapsCount;\n  },\n\n  canCreateTwitterDataset: function () {\n    var twitter = this.get('twitter');\n    return !(twitter.quota - twitter.monthly_use) <= 0 && twitter.hard_limit;\n  },\n\n  hasOwnTwitterCredentials: function () {\n    var twitter = this.get('twitter');\n    return (twitter && twitter.customized_config) || false;\n  },\n\n  canSelectPremiumOptions: function (visModel) {\n    return this.get('actions')[ visModel.isVisualization() ? 'private_maps' : 'private_tables' ];\n  },\n\n  canStartTrial: function () {\n    return !this.isInsideOrg() && this.get('account_type') === 'FREE' && this.get('table_count') > 0;\n  },\n\n  isActionEnabled: function (action) {\n    return this.get('actions') && this.get('actions')[action];\n  },\n\n  canCreatePrivateDatasets: function () {\n    var actions = this.get('actions');\n    return actions && actions.private_tables;\n  },\n\n  isInsideOrg: function () {\n    if (this._organizationModel) {\n      return !!this._organizationModel.id || this.isOrgOwner();\n    }\n    return false;\n  },\n\n  isOrgOwner: function () {\n    if (this._organizationModel) {\n      return this._organizationModel.getOwnerId() === this.get('id');\n    }\n    return false;\n  },\n\n  isOrgAdmin: function () {\n    if (this._organizationModel) {\n      return this._organizationModel.isOrgAdmin(this);\n    }\n    return false;\n  },\n\n  hasAccountType: function (accountType) {\n    return this.get('account_type') === accountType;\n  },\n\n  featureEnabled: function (name) {\n    var featureFlags = this.get('feature_flags');\n    if (!featureFlags || featureFlags.length === 0 || !name) {\n      return false;\n    }\n    return _.contains(featureFlags, name);\n  },\n\n  upgradeContactEmail: function () {\n    if (this.isInsideOrg()) {\n      if (this.isOrgOwner()) {\n        return 'enterprise-support@carto.com';\n      } else {\n        return this._organizationModel.getOwnerEmail();\n      }\n    } else {\n      return 'support@carto.com';\n    }\n  },\n\n  nameOrUsername: function () {\n    return this.fullName() || this.get('username');\n  },\n\n  fullName: function () {\n    var name = this.get('name') || '';\n    var lastName = this.get('last_name') || '';\n    if (name || lastName) {\n      return name + (name && lastName ? ' ' : '') + lastName;\n    }\n    return '';\n  },\n\n  getMaxConcurrentImports: function () {\n    return (this.get('limits') && this.get('limits').concurrent_imports) || 1;\n  },\n\n  getSchemaName: function () {\n    return this.isInsideOrg() ? this.get('username') : 'public';\n  },\n\n  renderData: function (currentUser) {\n    var name = this.get('username');\n    if (currentUser && currentUser.id === this.id) {\n      name = _t('user.you');\n    }\n    return {\n      username: name,\n      avatar_url: this.get('avatar_url')\n    };\n  },\n\n  clone: function () {\n    var attrs = _.clone(this.attributes);\n    delete attrs.id;\n    return new UserModel(attrs, {\n      configModel: this._configModel\n    });\n  },\n\n  getOrganization: function () {\n    return this._organizationModel;\n  }\n});\n\nmodule.exports = UserModel;\n","var Backbone = require('backbone');\nvar syncAbort = require('./backbone/sync-abort');\n\n/**\n * A collection representing a set of users in a group.\n */\nmodule.exports = Backbone.Collection.extend({\n\n  sync: syncAbort,\n\n  initialize: function (models, opts) {\n    if (!opts.group) throw new Error('group is required');\n    this.group = opts.group;\n    this.configModel = opts.configModel;\n    this.organization = opts.organization;\n  },\n\n  url: function (method) {\n    var baseUrl = this.configModel.get('base_url');\n    var version = this.configModel.urlVersion('organizationGroups', method);\n    return baseUrl + '/api/' + version + '/organization/' + this.organization.id + '/groups/' + this.group.id + '/users';\n  },\n\n  parse: function (response) {\n    this.total_entries = response.total_entries;\n    this.total_user_entries = response.total_user_entries;\n\n    return response.users;\n  },\n\n  totalCount: function () {\n    return this.total_user_entries;\n  }\n\n});\n","var $ = require('jquery');\nvar _ = require('underscore');\nvar UsersGroup = require('./users-group-collection');\n\n// This module fetch the user for every group present\n// in the ACL permission collection. The vizjson doesn't\n// provide and we need it for the sharing stats in the header.\n\nmodule.exports = {\n  track: function (opts) {\n    this.acl = opts.acl;\n    this.configModel = opts.configModel;\n    this.userModel = opts.userModel;\n\n    this.acl.on('reset', this.fetchUsers, this);\n    this.fetchUsers();\n  },\n\n  fetchUsers: function () {\n    var self = this;\n    var promises = [];\n\n    promises = _.map(this.acl.where({type: 'group'}), function (group) {\n      var entity = group.get('entity');\n      var deferred = new $.Deferred();\n\n      if (!entity.users || entity.users.length === 0) {\n        entity.users = new UsersGroup([], {\n          group: entity,\n          configModel: self.configModel,\n          organization: self.userModel.getOrganization()\n        });\n\n        entity.users.fetch({\n          success: function () {\n            deferred.resolve();\n          }\n        });\n      } else {\n        deferred.resolve();\n      }\n\n      return deferred.promise();\n    }, this);\n\n    $.when.apply($, promises).done(function () {\n      self.acl.trigger('fetch');\n    });\n  }\n};\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar PermissionModel = require('./permission-model');\n\n/**\n * Model that represents a visualization (v3)\n *\n * Even though a table might be represented as a Visualization in some cases, please use TableModel if you want to work\n * with the table data instead of adding table-specific methods here.\n */\n\nvar PRIVACY_OPTIONS = {\n  public: 'PUBLIC',\n  link: 'LINK',\n  private: 'PRIVATE',\n  password: 'PASSWORD'\n};\n\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    visChanges: 0\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n\n    this._configModel = opts.configModel;\n\n    if (this.get('permission')) {\n      this._permissionModel = new PermissionModel(this.get('permission'), {\n        configModel: opts.configModel\n      });\n      this.unset('permission');\n    }\n  },\n\n  urlRoot: function () {\n    var baseUrl = this._configModel.get('base_url');\n    var version = this._configModel.urlVersion('visualization');\n    return baseUrl + '/api/' + version + '/viz';\n  },\n\n  mapcapsURL: function () {\n    var baseUrl = this._configModel.get('base_url');\n    return baseUrl + '/api/v3/viz/' + this.id + '/mapcaps';\n  },\n\n  embedURL: function () {\n    var baseUrl = this._configModel.get('base_url');\n    return baseUrl + '/builder/' + this.id + '/embed';\n  },\n\n  builderURL: function () {\n    var baseUrl = this._configModel.get('base_url');\n    return baseUrl + '/builder/' + this.id + '/';\n  },\n\n  vizjsonURL: function () {\n    var baseUrl = this._configModel.get('base_url');\n    var version = this._configModel.urlVersion('vizjson', 'read', 'v3');\n    return baseUrl + '/api/' + version + '/viz/' + this.id + '/viz.json';\n  },\n\n  stateURL: function () {\n    var baseUrl = this._configModel.get('base_url');\n    return baseUrl + '/api/v3/viz/' + this.id + '/state';\n  },\n\n  isVisualization: function () {\n    return this.get('type') === 'derived';\n  },\n\n  privacyOptions: function () {\n    return _.values(PRIVACY_OPTIONS);\n  },\n\n  recordChange: function () {\n    var visChanges = this.get('visChanges');\n    this.set('visChanges', visChanges + 1);\n  },\n\n  resetChanges: function () {\n    this.set('visChanges', 0);\n  },\n\n  getPermissionModel: function () {\n    return this._permissionModel;\n  }\n}, {\n  isPubliclyAvailable: function (privacyStatus) {\n    return privacyStatus === PRIVACY_OPTIONS.password ||\n           privacyStatus === PRIVACY_OPTIONS.link ||\n           privacyStatus === PRIVACY_OPTIONS.public;\n  }\n});\n","var Backbone = require('backbone');\n\n/**\n *  Edit vis metadata dialog model\n *  to control if name and metadata\n *  are editable or not.\n *\n */\n\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    name: ''\n  },\n\n  validate: function (attrs) {\n    if (!attrs) return;\n    if (!attrs.name) {\n      return _t('components.modals.maps-metadata.validation.error.name');\n    }\n  }\n});\n","var Backbone = require('backbone');\nvar _ = require('underscore');\nvar TableModel = require('./table-model');\nvar PermissionModel = require('./permission-model');\nvar SynchronizationModel = require('./synchronization-model');\n\n/**\n * Model that represents a table visualization (v3)\n *\n */\n\nvar PRIVACY_OPTIONS = ['PUBLIC', 'LINK', 'PRIVATE'];\n\nmodule.exports = Backbone.Model.extend({\n\n  urlRoot: function () {\n    var baseUrl = this._configModel.get('base_url');\n    var version = this._configModel.urlVersion('visualization');\n    return baseUrl + '/api/' + version + '/viz';\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n    this._configModel = opts.configModel;\n\n    this._initModels();\n  },\n\n  _initModels: function () {\n    var d = this.get('table');\n    if (!_.isEmpty(this.get('external_source'))) {\n      d = this.get('external_source');\n    }\n    this._tableModel = new TableModel(d, {\n      configModel: this._configModel,\n      parse: true\n    });\n\n    if (this.get('permission')) {\n      this._permissionModel = new PermissionModel(this.get('permission'), {\n        configModel: this._configModel\n      });\n      this.unset('permission');\n    }\n\n    if (this.get('synchronization')) {\n      this._synchronizationModel = new SynchronizationModel(this.get('synchronization'), {\n        configModel: this._configModel\n      });\n      this._synchronizationModel.linkToTable(this._tableModel);\n    }\n  },\n\n  isVisualization: function () {\n    return false;\n  },\n\n  getTableModel: function () {\n    return this._tableModel;\n  },\n\n  getPermissionModel: function () {\n    return this._permissionModel;\n  },\n\n  getSynchronizationModel: function () {\n    return this._synchronizationModel;\n  },\n\n  vizjsonURL: function () {\n    var baseUrl = this._configModel.get('base_url');\n    var version = this._configModel.urlVersion('vizjson', 'read', 'v3');\n    return baseUrl + '/api/' + version + '/viz/' + this.id + '/viz.json';\n  },\n\n  isRaster: function () {\n    return this.get('kind') === 'raster';\n  },\n\n  datasetURL: function () {\n    var baseUrl = this._configModel.get('base_url');\n    var tableName = this.getTableModel().getUnquotedName();\n    return baseUrl + '/dataset/' + tableName;\n  },\n\n  privacyOptions: function () {\n    return PRIVACY_OPTIONS;\n  },\n\n  toJSON: function () {\n    return _.omit(this.attributes, 'synchronization', 'stats', 'table');\n  }\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\nvar VisualizationTableModel = require('./visualization-table-model');\nvar VisualizationModel = require('./vis-definition-model');\n\n/**\n * A collection that holds visualization models\n */\nmodule.exports = Backbone.Collection.extend({\n\n  DEFAULT_FETCH_OPTIONS: {\n    type: 'table',\n    order: 'updated_at',\n    page: 1,\n    per_page: 20,\n    exclude_shared: false,\n    exclude_raster: true,\n    tags: '',\n    q: ''\n  },\n\n  model: function (d, opts) {\n    var configModel = opts.collection._configModel;\n    var Klass;\n\n    if (d.type !== 'derived') {\n      Klass = VisualizationTableModel;\n    } else {\n      Klass = VisualizationModel;\n    }\n\n    return new Klass(d, {\n      configModel: configModel\n    });\n  },\n\n  initialize: function (models, opts) {\n    if (!opts.configModel) throw new Error('configModel is required');\n    this._configModel = opts.configModel;\n\n    // this.DEFAULT_FETCH_OPTIONS = _.extendOwn(this.DEFAULT_FETCH_OPTIONS, opts);\n    this._stats = {};\n  },\n\n  url: function () {\n    var version = this._configModel.urlVersion('visualization');\n    var baseUrl = this._configModel.get('base_url');\n    return baseUrl + '/api/' + version + '/viz';\n  },\n\n  // Overrides the default fetch, to use the internal methods to construct parmas\n  fetch: function (opts) {\n    this.trigger('loading', this);\n    opts = opts || {\n      data: {\n        // If reaches this code path it's because there were no opts given, i.e. should do a 'full fetch'\n        // Since there is no current way to really do a full fetch let's just set a really high number to get all\n        // TODO this is obviously bad for organization users, how can we do this differently\n        per_page: 1000\n      }\n    };\n    opts.data = _.extend({}, this.DEFAULT_FETCH_OPTIONS, opts.data);\n    return Backbone.Collection.prototype.fetch.call(this, opts);\n  },\n\n  getDefaultParam: function (param) {\n    return this.DEFAULT_FETCH_OPTIONS[param];\n  },\n\n  getTotalStat: function (attribute) {\n    return this._stats[attribute] || 0;\n  },\n\n  parse: function (res) {\n    this._stats = _.omit(res, 'visualizations');\n    return res.visualizations;\n  }\n});\n","var Backbone = require('backbone');\n\n/**\n * Model that encapsulates params for fetching data in a cdb.admin.Visualizations collection.\n */\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    content_type: '',\n    page: 1,\n    q: '',\n    tag: '',\n    category: '',\n    shared: 'no',\n    locked: false,\n    liked: false,\n    library: false,\n    order: 'updated_at',\n    deepInsights: false\n  },\n\n  isSearching: function () {\n    return this.get('q') || this.get('tag');\n  },\n\n  isDatasets: function () {\n    return this.get('content_type') === 'datasets';\n  },\n\n  isMaps: function () {\n    return this.get('content_type') === 'maps';\n  },\n\n  isDeepInsights: function () {\n    return this.isMaps() && this.get('deepInsights');\n  }\n});\n","var _ = require('underscore');\nvar TableNameUtils = require('builder/helpers/table-name-utils');\n\nvar memo = {};\n\nvar OPTIONAL_OPTS = [\n  'querySchemaModel',\n  'layerDefinitionModel',\n  'tokens'\n];\n\nvar defaults = {\n  tableName: true,\n  columnsName: true,\n  keywords: true\n};\n\nmodule.exports = {\n  init: function (opts) {\n    if (!opts) throw new Error('options are required for hints');\n\n    this.options = _.defaults(\n      _.pick(opts, ['tableName', 'columnsName', 'keywords'])\n      , defaults\n    );\n\n    _.each(OPTIONAL_OPTS, function (item) {\n      this['_' + item] = opts[item];\n    }, this);\n  },\n\n  hints: function () {\n    // array of objects {text, type}\n    return this.hints;\n  },\n\n  reset: function () {\n    this.hints = _.union(this._getTableName(), this._getColumns(), this._getKeywords());\n    return this;\n  },\n\n  _getKeywords: function () {\n    if (this.options.keywords) {\n      return this._tokens && this._memo(this._tokens);\n    } else {\n      return [];\n    }\n  },\n\n  _getColumns: function () {\n    if (!this.options.columnsName) {\n      return [];\n    }\n\n    var columns = this._querySchemaModel.columnsCollection;\n    return columns.map(function (mdl) {\n      var columnName = mdl.get('name');\n      return {\n        text: columnName,\n        type: 'Column_name'\n      };\n    });\n  },\n\n  _getTableName: function () {\n    if (!this.options.tableName) {\n      return [];\n    }\n\n    var tableName = this._layerDefinitionModel.getTableName();\n    tableName = TableNameUtils.getUnqualifiedName(tableName);\n    return [{\n      text: tableName,\n      type: 'Table_name'\n    }];\n  },\n\n  _memo: function (str, type) {\n    if (str in memo) {\n      return memo[str];\n    } else {\n      return (memo[str] = this._make(str, type));\n    }\n  },\n\n  _make: function (str, type) {\n    return _.chain(str).map(function (set) {\n      return set.keywords.split(' ').map(function (item) {\n        return {\n          text: item,\n          type: set.type\n        };\n      });\n    }).flatten().value();\n  }\n};\n","module.exports = [{\n  keywords: 'alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where limit',\n  type: 'Sql'\n}, {\n  keywords: 'ST_GeometryType ST_polygon ST_multipolygon ST_multilinestring ST_linestring ST_multipoint ST_point',\n  type: 'Postgis'\n}];\n","var Backbone = require('backbone');\nvar _ = require('underscore');\nvar UndoManager = require('builder/data/undo-manager.js');\n\n/**\n *  Data SQL Undo-redo model\n */\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    content: ''\n  },\n\n  initialize: function (attrs, opts) {\n    this._history = this._generateHistory(opts && opts.history);\n\n    UndoManager.init(this, {\n      track: true,\n      history: this._history\n    });\n  },\n\n  _generateHistory: function (history) {\n    if (history && history.length) {\n      var data = _.reduce(history, function (memo, sql) {\n        memo.push({\n          content: sql\n        });\n        return memo;\n      }, [], this);\n      return data;\n    }\n\n    return false;\n  },\n\n  getHistory: function () {\n    return _.pluck(\n      this.getUndoHistory(),\n      'content'\n    );\n  }\n});\n","var Backbone = require('backbone');\nvar UndoManager = require('builder/data/undo-manager.js');\nvar _ = require('underscore');\n\n/**\n *  CartoCSS Undo-redo model\n */\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    content: ''\n  },\n\n  initialize: function (attrs, opts) {\n    this._history = this._generateHistory(opts && opts.history);\n\n    UndoManager.init(this, {\n      track: true,\n      history: this._history\n    });\n  },\n\n  _generateHistory: function (history) {\n    if (history && history.length) {\n      var data = _.reduce(history, function (memo, cartocss) {\n        memo.push({\n          content: cartocss\n        });\n        return memo;\n      }, [], this);\n      return data;\n    }\n\n    return false;\n  },\n\n  getHistory: function () {\n    return _.pluck(\n      this.getUndoHistory(),\n      'content'\n    );\n  }\n});\n","var _ = require('underscore');\nvar SimpleStyleDefaults = require('./simple-style-defaults');\n\nmodule.exports = _.defaults({\n\n  generateAttributes: function (geometryType) {\n    return _.extend(\n      this._getStyleTypeAttrs(),\n      this._getFillAttrs(geometryType),\n      this._getStrokeAttrs(geometryType),\n      {\n        blending: 'lighter'\n      },\n      this._getAggrAttrs(geometryType),\n      this._getAnimatedAttrs(geometryType)\n    );\n  },\n\n  _getStyleTypeAttrs: function () {\n    return {\n      style: 'simple'\n    };\n  },\n\n  _getAnimatedAttrs: function (geometryType) {\n    return {\n      animated: {\n        attribute: null,\n        overlap: false,\n        duration: 30,\n        steps: 256,\n        trails: 2,\n        resolution: 4\n      }\n    };\n  },\n\n  _getAggrAttrs: function (geometryType) {\n    return {\n      aggregation: {}\n    };\n  }\n}, SimpleStyleDefaults);\n","var _ = require('underscore');\nvar SimpleStyleDefaults = require('./simple-style-defaults');\nvar rampList = require('cartocolor');\n\nmodule.exports = _.defaults({\n\n  generateAttributes: function (geometryType) {\n    return _.extend(\n      this._getFillAttrs(geometryType),\n      this._getAggrAttrs(),\n      this._getAnimatedAttrs(),\n      this._getLabelsAttrs()\n    );\n  },\n\n  _getFillAttrs: function (geometryType) {\n    var attrs = {\n      fill: {\n        'size': {\n          fixed: 45\n        },\n        'color': {\n          attribute: 'cartodb_id',\n          range: rampList.ag_Sunset[7],\n          bins: 6\n        }\n      }\n    };\n\n    return attrs;\n  },\n\n  _getAggrAttrs: function () {\n    return {\n      aggregation: {}\n    };\n  },\n\n  _getAnimatedAttrs: function (geometryType) {\n    return {\n      animated: {\n        attribute: 'cartodb_id',\n        overlap: false,\n        duration: 30,\n        steps: 1,\n        trails: 0,\n        resolution: 4\n      }\n    };\n  },\n\n  _getLabelsAttrs: function () {\n    return {\n      labels: {}\n    };\n  }\n\n}, SimpleStyleDefaults);\n","var _ = require('underscore');\nvar SimpleStyleDefaults = require('./simple-style-defaults');\nvar DefaultFormValues = require('builder/data/default-form-styles.json');\nvar Utils = require('builder/helpers/utils');\nvar rampList = require('cartocolor');\n\nmodule.exports = _.defaults({\n\n  _getAggrAttrs: function (geometryType) {\n    return {\n      aggregation: {\n        size: 10,\n        value: {\n          operator: 'count',\n          attribute: ''\n        }\n      }\n    };\n  },\n\n  _getStrokeAttrs: function (geometryType) {\n    var strokeAttrs = DefaultFormValues['stroke'];\n    return {\n      stroke: Utils.cloneObject(strokeAttrs)\n    };\n  },\n\n  _getFillAttrs: function (geometryType) {\n    var colors = rampList['ag_GrnYl'][5];\n    return {\n      fill: {\n        'color': {\n          attribute: 'agg_value',\n          bins: '5',\n          quantification: 'quantiles',\n          // TODO: flip the ramp when basemap is black\n          // range: rampList.ag_GrnYl[5].reverse()\n          range: Utils.cloneObject(colors)\n        }\n      }\n    };\n  }\n\n}, SimpleStyleDefaults);\n","var _ = require('underscore');\nvar SimpleStyleDefaults = require('./simple-style-defaults');\nvar rampList = require('cartocolor');\n\nmodule.exports = _.defaults({\n  _getAggrAttrs: function (geometryType) {\n    return {\n      aggregation: {\n        dataset: 'countries',\n        change: 'manual',\n        value: {\n          operator: 'count',\n          attribute: ''\n        }\n      }\n    };\n  },\n\n  _getFillAttrs: function (geometryType) {\n    return {\n      fill: {\n        'color': {\n          attribute: 'agg_value_density',\n          bins: '5',\n          quantification: 'quantiles',\n          range: _.clone(rampList.Emrld[5])\n        }\n      }\n    };\n  }\n\n}, SimpleStyleDefaults);\n","var _ = require('underscore');\nvar StyleDefaults = require('./style-defaults');\nvar DefaultCartography = require('builder/data/default-cartography.json');\nvar DefaultFormValues = require('builder/data/default-form-styles.json');\nvar Utils = require('builder/helpers/utils');\n\nmodule.exports = _.defaults({\n\n  generateAttributes: function (geometryType) {\n    return _.extend(\n      {},\n      this._getFillAttrs(geometryType),\n      this._getStrokeAttrs(geometryType),\n      {\n        blending: DefaultFormValues['blending']\n      },\n      this._getAggrAttrs(geometryType),\n      this._getLabelsAttrs()\n    );\n  },\n\n  _getFillAttrs: function (geometryType) {\n    var fillAttrs = DefaultCartography['simple'][geometryType]['fill'];\n    return {\n      fill: Utils.cloneObject(fillAttrs)\n    };\n  },\n\n  _getStrokeAttrs: function (geometryType) {\n    var strokeAttrs = DefaultCartography['simple'][geometryType]['stroke'];\n    return {\n      stroke: Utils.cloneObject(strokeAttrs)\n    };\n  },\n\n  _getAggrAttrs: function () {\n    var aggrAttrs = DefaultFormValues['aggregation'];\n    return {\n      aggregation: Utils.cloneObject(aggrAttrs)\n    };\n  },\n\n  _getLabelsAttrs: function () {\n    var labelsAttrs = DefaultFormValues['labels'];\n    return {\n      labels: Utils.cloneObject(labelsAttrs)\n    };\n  }\n}, StyleDefaults);\n","var _ = require('underscore');\nvar HexabinsAggregationDefaults = require('./hexabins-aggregation-style-defaults');\n\nmodule.exports = _.defaults({\n\n  _getAggrAttrs: function (geometryType) {\n    return {\n      aggregation: {\n        size: 12,\n        value: {\n          operator: 'count',\n          attribute: ''\n        }\n      }\n    };\n  }\n\n}, HexabinsAggregationDefaults);\n","module.exports = {\n  generateAttributes: function (geometryType) {\n    return {\n      fill: null,\n      stroke: null,\n      blending: null,\n      aggregation: {},\n      labels: {}\n    };\n  }\n};\n","var Backbone = require('backbone');\nvar _ = require('underscore');\nvar StylesFactory = require('./styles-factory');\nvar StyleConstants = require('builder/components/form-components/_constants/_style');\nvar UndoManager = require('builder/data/undo-manager');\n\nmodule.exports = Backbone.Model.extend({\n\n  parse: function (r) {\n    r = r || {};\n    return _.extend(\n      {\n        type: r.type,\n        autogenerated: r && r.autogenerated\n      },\n      r.properties\n    );\n  },\n\n  initialize: function (attrs, opts) {\n    if (!this.get('type')) {\n      this.setDefaultPropertiesByType(StyleConstants.Type.SIMPLE, 'point' /* geometryType */);\n    }\n\n    UndoManager.init(this, { track: true });\n  },\n\n  resetPropertiesFromAutoStyle: function () {\n    if (this._stylesPreAutoStyle) {\n      delete this.attributes.autoStyle;\n      this.set(this._stylesPreAutoStyle);\n      this.removeStylesPreAutoStyle();\n    }\n  },\n\n  removeStylesPreAutoStyle: function () {\n    delete this._stylesPreAutoStyle;\n  },\n\n  setPropertiesFromAutoStyle: function (params) {\n    if (!params.definition) throw new Error('definition is required');\n    if (!params.geometryType) throw new Error('geometryType is required');\n    if (!params.widgetId) throw new Error('widgetId is required');\n\n    if (!this._stylesPreAutoStyle) {\n      this._stylesPreAutoStyle = JSON.parse(JSON.stringify(this.attributes));\n    }\n\n    // In order to trigger a proper change at the end of this function, we have\n    // to make a clear change in the attributes, like delete the autoStyle property.\n    delete this.attributes.autoStyle;\n\n    var extendAutoStyleProperties = function (attribute, newProperties) {\n      var properties = this.get(attribute);\n      // Check domain quotes\n      if (newProperties.color && newProperties.color.domain) {\n        var quotedDomain = _.compact(\n          _.map(newProperties.color.domain, function (name) {\n            if (name && name !== true) {\n              return '\"' + name.toString().replace(/\"/g, '\\\\\"').replace(/\\n/g, '\\\\n') + '\"';\n            } else {\n              return name;\n            }\n          })\n        );\n        newProperties.color.static = true;\n        newProperties.color.domain = quotedDomain;\n        newProperties.color.quantification = 'category';\n        newProperties.color.attribute_type = 'string';\n      } else {\n        newProperties.color.bins = newProperties.color.range.length;\n        newProperties.color.quantification = 'quantiles';\n        newProperties.color.attribute_type = 'number';\n      }\n\n      properties = _.extend(\n        properties,\n        newProperties\n      );\n\n      return properties;\n    }.bind(this);\n\n    var currentAttrs = JSON.parse(JSON.stringify(this.attributes));\n    var geometryType = params.geometryType;\n    var definition = params.definition[geometryType];\n\n    if (definition) {\n      if (geometryType === 'line') {\n        currentAttrs.stroke = extendAutoStyleProperties('stroke', definition);\n      } else {\n        currentAttrs.fill = extendAutoStyleProperties('fill', definition);\n      }\n    }\n\n    this.set(\n      _.extend(\n        {\n          type: StyleConstants.Type.SIMPLE,\n          autoStyle: params.widgetId\n        },\n        currentAttrs\n      )\n    );\n  },\n\n  setDefaultPropertiesByType: function (styleType, geometryType, silently) {\n    // Get default aggregation and properties from factory and apply them\n    this.set(\n      _.extend(\n        {\n          type: styleType\n        },\n        StylesFactory.getDefaultStyleAttrsByType(styleType, geometryType)\n      ), {\n        silently: !!silently\n      }\n    );\n\n    // Although we want to make the change silently, we have several places listening\n    // for style changes, so we trigger this custom event\n    if (silently) {\n      this.trigger('style:update');\n    }\n  },\n\n  setFill: function (type) {\n    var simpleFill = StylesFactory.getDefaultStyleAttrsByType(type, 'point');\n    this.set('fill', simpleFill.fill);\n  },\n\n  applyLastState: function () {\n    this._undoManager.stopTracking();\n    this.trigger('change');\n    this._undoManager.startTracking();\n  },\n\n  resetStyles: function () {\n    this.setDefaultPropertiesByType(StyleConstants.Type.NONE, '');\n  },\n\n  // Backend will migrate current wizard properties to style properties,\n  // providing a flag which indicates if it is generated by them\n  isAutogenerated: function () {\n    return this.get('autogenerated');\n  },\n\n  isAggregatedType: function () {\n    return _.contains(StylesFactory.getAggregationTypes(), this.get('type'));\n  },\n\n  isAnimation: function () {\n    return this.get('type') === StyleConstants.Type.ANIMATION;\n  },\n\n  isHeatmap: function () {\n    return this.get('type') === StyleConstants.Type.HEATMAP;\n  },\n\n  hasNoneStyles: function () {\n    return this.get('type') === StyleConstants.Type.NONE;\n  },\n\n  canApplyAutoStyle: function () {\n    return this.get('type') === StyleConstants.Type.SIMPLE;\n  },\n\n  getColumnsUsedForStyle: function () {\n    var fillColumns = this._getFillColumns();\n    var strokeColumns = this._getStrokeColumns();\n    var labelColumns = this._getLabelColumns();\n    var aggregationColumns = this._getAggregationColumns();\n\n    return [].concat(fillColumns, strokeColumns, labelColumns, aggregationColumns);\n  },\n\n  // Unflatten attributes\n  toJSON: function () {\n    return {\n      type: this.get('type'),\n      properties: _.omit(this.attributes, 'type', 'autogenerated')\n    };\n  },\n\n  _getFillColumns: function () {\n    var columns = [];\n\n    var fill = this.get('fill');\n    if (fill && fill.color && fill.color.attribute) {\n      columns.push({\n        name: fill.color.attribute,\n        type: fill.color.attribute_type || 'string'\n      });\n    }\n\n    if (fill && fill.size && fill.size.attribute) {\n      columns.push({\n        name: fill.size.attribute,\n        type: 'number'\n      });\n    }\n\n    return columns;\n  },\n\n  _getStrokeColumns: function () {\n    var columns = [];\n\n    var stroke = this.get('stroke');\n    if (stroke && stroke.color && stroke.color.attribute) {\n      columns.push({\n        name: stroke.color.attribute,\n        type: stroke.color.attribute_type || 'string'\n      });\n    }\n    if (stroke && stroke.size && stroke.size.attribute) {\n      columns.push({\n        name: stroke.size.attribute,\n        type: 'number'\n      });\n    }\n\n    return columns;\n  },\n\n  _getLabelColumns: function () {\n    var columns = [];\n\n    // Labels\n    var labels = this.get('labels');\n    if (labels && labels.attribute && labels.enabled) {\n      columns.push({\n        name: labels.attribute\n      });\n    }\n\n    return columns;\n  },\n\n  _getAggregationColumns: function () {\n    var columns = [];\n\n    var aggregation = this.get('aggregation');\n    if (aggregation && aggregation.value && aggregation.value.attribute) {\n      columns.push({\n        name: aggregation.value.attribute,\n        type: aggregation.value.attribute_type || 'string'\n      });\n    }\n\n    return columns;\n  }\n});\n","var _ = require('underscore');\nvar StyleDefaults = require('./style-defaults/style-defaults');\nvar SimpleStyleDefaults = require('./style-defaults/simple-style-defaults');\nvar HeatmapDefaults = require('./style-defaults/heatmap-style-defaults');\nvar AnimationDefaults = require('./style-defaults/animation-style-defaults');\nvar SquareAggregationDefaults = require('./style-defaults/squares-aggregation-style-defaults');\nvar HexabinsAggregationDefaults = require('./style-defaults/hexabins-aggregation-style-defaults');\nvar RegionsAggregationDefaults = require('./style-defaults/regions-aggregation-style-defaults');\n\nvar STYLE_MAP = {\n  'none': {\n    tooltipTranslationKey: 'editor.style.tooltip.none',\n    labelTranslationKey: 'editor.style.types.none',\n    checkIfValid: function (geometryType) {\n      return !geometryType;\n    },\n    defaultStyles: StyleDefaults\n  },\n  'simple': {\n    tooltipTranslationKey: 'editor.style.style-form.aggregation.tooltips.simple',\n    labelTranslationKey: 'editor.style.types.simple',\n    iconTemplate: require('./style-icons/points.tpl'),\n    checkIfValid: function (geometryType) {\n      return !!geometryType;\n    },\n    defaultStyles: SimpleStyleDefaults\n  },\n  'squares': {\n    tooltipTranslationKey: 'editor.style.style-form.aggregation.tooltips.squares',\n    labelTranslationKey: 'editor.style.types.squares',\n    iconTemplate: require('./style-icons/squares.tpl'),\n    checkIfValid: function (geometryType) {\n      return geometryType === 'point';\n    },\n    defaultStyles: SquareAggregationDefaults\n  },\n  'hexabins': {\n    tooltipTranslationKey: 'editor.style.style-form.aggregation.tooltips.hexabins',\n    labelTranslationKey: 'editor.style.types.hexabins',\n    iconTemplate: require('./style-icons/hexabins.tpl'),\n    checkIfValid: function (geometryType) {\n      return geometryType === 'point';\n    },\n    defaultStyles: HexabinsAggregationDefaults\n  },\n  'regions': {\n    tooltipTranslationKey: 'editor.style.style-form.aggregation.tooltips.regions',\n    labelTranslationKey: 'editor.style.types.regions',\n    iconTemplate: require('./style-icons/regions.tpl'),\n    checkIfValid: function (geometryType) {\n      return geometryType === 'point';\n    },\n    defaultStyles: RegionsAggregationDefaults\n  },\n  'animation': {\n    tooltipTranslationKey: 'editor.style.style-form.aggregation.tooltips.animation',\n    labelTranslationKey: 'editor.style.types.animation',\n    iconTemplate: require('./style-icons/animated.tpl'),\n    checkIfValid: function (geometryType) {\n      return geometryType === 'point';\n    },\n    defaultStyles: AnimationDefaults\n  },\n  'heatmap': {\n    tooltipTranslationKey: 'editor.style.style-form.aggregation.tooltips.heatmap',\n    labelTranslationKey: 'editor.style.types.heatmap',\n    iconTemplate: require('./style-icons/heatmap.tpl'),\n    checkIfValid: function (geometryType) {\n      return geometryType === 'point';\n    },\n    defaultStyles: HeatmapDefaults\n  }\n};\n\nmodule.exports = {\n  getDefaultStyleAttrsByType: function (styleType, geometryType) {\n    var StyleDefaultsKlass = STYLE_MAP[styleType].defaultStyles;\n    return StyleDefaultsKlass.generateAttributes(geometryType);\n  },\n\n  getStyleTypes: function (currentType, geometryType) {\n    return _.reduce(STYLE_MAP, function (memo, val, key) {\n      if (currentType === key || (val.checkIfValid ? val.checkIfValid(geometryType) : true)) {\n        memo.push({\n          value: key,\n          label: _t(val.labelTranslationKey),\n          tooltip: _t(val.tooltipTranslationKey),\n          iconTemplate: val.iconTemplate\n        });\n      }\n      return memo;\n    }, []);\n  },\n\n  getFormTemplateByType: function (styleType) {\n    return STYLE_MAP[styleType].formTemplate;\n  },\n\n  getAggregationTypes: function () {\n    return ['squares', 'hexabins', 'regions'];\n  }\n};\n","// Get the source node from an analysis node\nfunction getSourceNode (nodeModel) {\n  var source;\n  if (nodeModel.get('type') === 'source') {\n    source = nodeModel;\n  } else {\n    var primarySource = nodeModel.getPrimarySource && nodeModel.getPrimarySource();\n    if (primarySource && primarySource.get('type') === 'source') {\n      source = primarySource;\n    } else {\n      source = getSourceNode(primarySource);\n    }\n  }\n\n  return source;\n}\n\n// Evaluates predicate for the analysis chain from nodeModel\nfunction someNode (nodeModel, predicate) {\n  if (predicate(nodeModel)) {\n    return nodeModel;\n  }\n\n  if (nodeModel.get('type') !== 'source') {\n    const source = nodeModel.getPrimarySource && nodeModel.getPrimarySource();\n\n    if (source) {\n      return someNode(source, predicate);\n    }\n  }\n\n  return false;\n}\n\nfunction hasAnalysisType (type) {\n  return function (node) {\n    return node.get('type') === type;\n  };\n}\n\nconst hasTradeArea = hasAnalysisType('trade-area');\nconst hasSQLFunction = hasAnalysisType('deprecated-sql-function');\n\nmodule.exports = {\n  nodeHasTradeArea: node => someNode(node, hasTradeArea),\n  nodeHasSQLFunction: node => someNode(node, hasSQLFunction),\n\n  // These are defined outside because they're recursive\n  getSourceNode,\n  someNode\n};\n","/**\n * Just provide info about the current browser\n */\n\nmodule.exports = function () {\n  var ua = navigator.userAgent;\n  var tem;\n  var M = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*(\\d+)/i) || [];\n  if (/trident/i.test(M[1])) {\n    tem = /\\brv[ :]+(\\d+)/g.exec(ua) || [];\n    return {\n      name: 'IE ',\n      version: (tem[1] || '')\n    };\n  }\n  if (M[1] === 'Chrome') {\n    tem = ua.match(/\\bOPR\\/(\\d+)/);\n    if (tem != null) {\n      return {\n        name: 'Opera',\n        version: tem[1]\n      };\n    }\n  }\n  M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?'];\n  if ((tem = ua.match(/version\\/(\\d+)/i)) != null) {\n    M.splice(1, 1, tem[1]);\n  }\n\n  return {\n    name: M[0],\n    version: M[1]\n  };\n};\n","var _ = require('underscore');\nvar CartoColors = require('cartocolor');\n\nvar Tags = {\n  COLORBLIND: 'colorblind',\n  DIVERGING: 'diverging',\n  QUALITATIVE: 'qualitative',\n  QUANTITATIVE: 'quantitative'\n};\n\nmodule.exports = {\n  getColorRamps: function (colorsNumber) {\n    if (!colorsNumber) { throw new Error('Number of colors per ramp is required'); }\n\n    var rampColors = [];\n\n    _.each(CartoColors, function (color) {\n      if (color && color[colorsNumber]) {\n        rampColors.push(color[colorsNumber]);\n      }\n    });\n\n    return rampColors;\n  },\n\n  getColorRampsByTag: function (colorsNumber, tag) {\n    if (!colorsNumber) { throw new Error('Number of colors per ramp is required'); }\n\n    var rampColors = [];\n\n    _.each(CartoColors, function (color) {\n      if (color && color[colorsNumber] && _.contains(color.tags, tag)) {\n        rampColors.push(color[colorsNumber]);\n      }\n    });\n\n    return rampColors;\n  },\n\n  getColorblindRamps: function (colorsNumber) {\n    return this.getColorRampsByTag(colorsNumber, Tags.COLORBLIND);\n  },\n\n  getDivergingRamps: function (colorsNumber) {\n    return this.getColorRampsByTag(colorsNumber, Tags.DIVERGING);\n  },\n\n  getQualitativeRamps: function (colorsNumber) {\n    return this.getColorRampsByTag(colorsNumber, Tags.QUALITATIVE);\n  },\n\n  getQuantitativeRamps: function (colorsNumber) {\n    return this.getColorRampsByTag(colorsNumber, Tags.QUANTITATIVE);\n  }\n};\n","module.exports = [\n  'aliceblue', 'antiquewhite', 'aqua', 'aquamarine', 'azure', 'beige',\n  'bisque', 'black', 'blanchedalmond', 'blue', 'blueviolet', 'brown',\n  'burlywood', 'cadetblue', 'chartreuse', 'chocolate', 'coral', 'cornflowerblue',\n  'cornsilk', 'crimson', 'cyan', 'darkblue', 'darkcyan', 'darkgoldenrod',\n  'darkgray', 'darkgreen', 'darkkhaki', 'darkmagenta', 'darkolivegreen',\n  'darkorange', 'darkorchid', 'darkred', 'darksalmon', 'darkseagreen',\n  'darkslateblue', 'darkslategray', 'darkturquoise', 'darkviolet',\n  'deeppink', 'deepskyblue', 'dimgray', 'dodgerblue', 'firebrick',\n  'floralwhite', 'forestgreen', 'fuchsia', 'gainsboro', 'ghostwhite',\n  'gold', 'goldenrod', 'gray', 'grey', 'green', 'greenyellow', 'honeydew',\n  'hotpink', 'indianred', 'indigo', 'ivory', 'khaki', 'lavender',\n  'lavenderblush', 'lawngreen', 'lemonchiffon', 'lightblue', 'lightcoral',\n  'lightcyan', 'lightgoldenrodyellow', 'lightgray', 'lightgreen', 'lightpink',\n  'lightsalmon', 'lightseagreen', 'lightskyblue', 'lightslategray',\n  'lightsteelblue', 'lightyellow', 'lime', 'limegreen', 'linen', 'magenta',\n  'maroon', 'mediumaquamarine', 'mediumblue', 'mediumorchid', 'mediumpurple',\n  'mediumseagreen', 'mediumslateblue', 'mediumspringgreen', 'mediumturquoise',\n  'mediumvioletred', 'midnightblue', 'mintcream', 'mistyrose', 'moccasin',\n  'navajowhite', 'navy', 'oldlace', 'olive', 'olivedrab', 'orange', 'orangered',\n  'orchid', 'palegoldenrod', 'palegreen', 'paleturquoise', 'palevioletred',\n  'papayawhip', 'peachpuff', 'peru', 'pink', 'plum', 'powderblue',\n  'purple', 'red', 'rosybrown', 'royalblue', 'saddlebrown', 'salmon',\n  'sandybrown', 'seagreen', 'seashell', 'sienna', 'silver', 'skyblue',\n  'slateblue', 'slategray', 'snow', 'springgreen', 'steelblue', 'tan',\n  'teal', 'thistle', 'tomato', 'turquoise', 'violet', 'wheat', 'white',\n  'whitesmoke', 'yellow', 'yellowgreen'\n];\n","var _ = require('underscore');\nvar DEFAULT_ERROR_MSG = '';\n\n/**\n *  Return error message when backend request fails\n *  It tries to get responseText > errors and error arrays, if not gets `statusText`.\n */\n\nmodule.exports = function (e) {\n  if (!e) { throw new Error('error is required'); }\n\n  try {\n    var responseText = e.responseText && e.responseText.trim() && JSON.parse(e.responseText);\n    var errorMessage = e.statusText || DEFAULT_ERROR_MSG;\n\n    if (responseText) {\n      var errors = _.compact(\n        _.map(['errors', 'error'], function (type) {\n          return responseText[type] && responseText[type].join(', ');\n        })\n      );\n      errorMessage = errors.join(', ');\n    }\n\n    return errorMessage;\n  } catch (err) {\n    return DEFAULT_ERROR_MSG;\n  }\n};\n","/**\n *  Fetch all query objects (querySchemaModel, queryGeometryModel, queryRowsCollection)\n *  if necessary\n */\n\nmodule.exports = function (params) {\n  if (!params) throw new Error('all query objects are required');\n  if (!params.querySchemaModel) throw new Error('querySchemaModel is required');\n  if (!params.queryGeometryModel) throw new Error('queryGeometryModel is required');\n  if (!params.queryRowsCollection) throw new Error('queryRowsCollection is required');\n\n  function fetchModel (model) {\n    return new Promise(function (resolve, reject) {\n      var subscribeToFinalStatus = false;\n\n      if (model.shouldFetch()) {\n        model.fetch();\n        subscribeToFinalStatus = true;\n      } else if (!model.isInFinalStatus()) {\n        subscribeToFinalStatus = true;\n      } else {\n        resolve();\n      }\n\n      if (subscribeToFinalStatus) {\n        model.once('inFinalStatus', function () {\n          resolve();\n        });\n      }\n    });\n  }\n\n  var schemaModelPromise = fetchModel(params.querySchemaModel);\n  var geometryModelPromise = fetchModel(params.queryGeometryModel);\n\n  return Promise.all([schemaModelPromise, geometryModelPromise])\n    .then(function () {\n      return fetchModel(params.queryRowsCollection); // rows collection depends on schema\n    });\n};\n","var _ = require('underscore');\nvar DEFAULT_VALUES = {\n  top: 0,\n  left: 0\n};\nvar MIN_GAP = 10;\nvar MIN_HEIGHT = 205;\nvar MIN_WIDTH = 244;\n\n/**\n * Would you like to know where to open a context menu?\n * Just provide:\n * @param {Object} options.parentView               Parent element view\n * @param {Number} options.posX                     Position X of the context menu\n * @param {Number} options.posY                     Position Y of the context menu\n * @param {Number} options.elementWidth (optional)  Context menu width\n * @param {Number} options.elementHeight (optional) Context menu height\n * @param {Number} options.offsetX (optional)       Context menu offsetX\n * @param {Number} options.offsetY (optional)       Context menu offsetY\n *\n * By default, it will try to positionate to the right (inside) and to\n * the top (below).\n */\n\nvar MagicPositioner = function (params) {\n  if (!params.parentView) throw new Error('parentView within params is required');\n  if (!_.isNumber(params.posX)) throw new Error('posX within params is required');\n  if (!_.isNumber(params.posY)) throw new Error('posY within params is required');\n\n  var $parentView = params.parentView;\n  var parentViewHeight = $parentView.outerHeight();\n  var parentViewWidth = $parentView.outerWidth();\n  var posX = params.posX;\n  var posY = params.posY;\n  var offsetX = params.offsetX || 0;\n  var offsetY = params.offsetY || 0;\n  var elementWidth = params.elementWidth || MIN_WIDTH;\n  var elementHeight = params.elementHeight || MIN_HEIGHT;\n  var cssProps = DEFAULT_VALUES;\n\n  if ((posX - elementWidth) > MIN_GAP) {\n    cssProps.left = 'auto';\n    cssProps.right = (parentViewWidth - posX + offsetX) + 'px';\n  } else if ((posX + elementWidth) > elementWidth) {\n    cssProps.right = 'auto';\n    cssProps.left = (posX + offsetX) + 'px';\n  }\n\n  if ((posY + elementHeight) < parentViewHeight) {\n    cssProps.bottom = 'auto';\n    cssProps.top = (posY + offsetY) + 'px';\n  } else if ((posY + elementHeight) > parentViewHeight) {\n    cssProps.top = 'auto';\n    cssProps.bottom = (parentViewHeight - posY + offsetY) + 'px';\n  }\n\n  return cssProps;\n};\n\nmodule.exports = MagicPositioner;\n","var $ = require('jquery');\n\n/**\n * Check if Linux user used right/middle click at the time of the event\n *\n * @param ev {Event}\n * @returns {boolean}\n */\nfunction isLinuxMiddleOrRightClick (ev) {\n  return ev.which === 2 || ev.which === 3;\n}\n\n/**\n * Check if Mac user used CMD key at the time of the event Mac user used CMD key at the time of the event.\n *\n * @param ev {Event}\n * @returns {boolean}\n */\nfunction isMacCmdKeyPressed (ev) {\n  return ev.metaKey;\n}\n\nfunction isCtrlKeyPressed (ev) {\n  return ev.ctrlKey;\n}\n\n/**\n * Click handler for a cartodb.js view, to navigate event target's href URL through the view's router.navigate method.\n *\n * The default behavior is:\n * Unless cmd/ctrl keys are pressed it will cancel the default link behavior and instead navigate to the URL set in the\n * target's href attribute.\n *\n * Prerequisities:\n *  - view has a this.router instance.\n *\n * Example of how to use:\n *   - In a template:\n *     <a href=\"/some/uri\" id=\"#my-link\" ...\n *     <a href=\"/special/uri\" id=\"#my-special-link\" ...\n *\n *   - In the view file:\n *     var navigateThroughRouter = require('--/--/common/view_helpers/navigateThroughRouter');\n *     module.exports = new CoreView.extend({\n *       events: {\n *         'click a#my-link': navigateThroughRouter\n *         'click a#my-special-link': this._myCustomRoute\n *       }\n *\n *       _myCustomRoute: function(ev) {\n *         // Here you can do you custom logic before/after the routing, e.g.:\n *         console.log('before changing route');\n *         navigateThroughRouter.apply(this, arguments);\n *         console.log('after changing route');\n *       }\n *\n * @param ev {Event}\n */\nmodule.exports = function (ev) {\n  // We always kill the default behaviour of the event, since container around view might have other click behavior.\n  // In case of a cmd/ctrl click by an user.\n  this.killEvent(ev);\n  var url = $(ev.target).closest('a').attr('href');\n\n  if (!url) {\n    return false;\n  }\n\n  if (!isLinuxMiddleOrRightClick(ev) && !isMacCmdKeyPressed(ev)) {\n    var routerModel = (this.routerModel || this.options.routerModel || this.options.router);\n    if (!routerModel) {\n      throw new Error('routerModel is required');\n    }\n\n    routerModel.navigate(url, { trigger: true });\n  } else if (isCtrlKeyPressed(ev) || isMacCmdKeyPressed(ev)) {\n    window.open(url, '_blank');\n  }\n};\n","// Get coordinates from a GeoJSON\n\nmodule.exports = function (geometry) {\n  try {\n    var geojson = JSON.parse(geometry);\n    return geojson.coordinates.join(', ');\n  } catch (e) {\n    return false;\n  }\n};\n","var _ = require('underscore');\nvar Backbone = require('backbone');\n\nvar COUNT_SQL_TEMPLATE = 'select count(*) from (<%= subquery %>) st';\n\nmodule.exports = Backbone.Collection.extend({\n\n  url: function () {\n    return this._configModel.getSqlApiUrl();\n  },\n\n  initialize: function (opts) {\n    opts = opts || {};\n\n    this._subquery = opts.subquery;\n    this._configModel = opts.configModel;\n  },\n\n  fetchCount: function (callback) {\n    var opts = {};\n    var count = -1;\n\n    opts.data = {\n      api_key: this._configModel.get('api_key'),\n      q: this._getCountSQL()\n    };\n    opts.method = this._httpMethod();\n    opts.error = function (coll, resp) {\n      callback && callback(count);\n    };\n    opts.success = function (coll, resp, options) {\n      if (resp.rows && resp.rows.length) {\n        count = resp.rows[0].count;\n      }\n      callback && callback(count);\n    };\n\n    return Backbone.Collection.prototype.fetch.call(this, opts);\n  },\n\n  _getCountSQL: function (excludeColumns) {\n    return _.template(COUNT_SQL_TEMPLATE)({\n      subquery: this._subquery\n    });\n  },\n\n  _httpMethod: function () {\n    return 'GET';\n  }\n});\n","var _ = require('underscore');\n\nmodule.exports = function checkAndBuildRequiredOpts (actualOpts, requiredOpts, context) {\n  if (requiredOpts === void 0) {\n    throw new Error('Opts are required');\n  }\n\n  _.each(requiredOpts, function (item) {\n    if (actualOpts === void 0 || actualOpts[item] === void 0) throw new Error(item + ' is required');\n    context['_' + item] = actualOpts[item];\n  }, context);\n};\n","/**\n *  Checks properties from a SQL\n */\n\nvar TableNameUtils = require('./table-name-utils');\n\nmodule.exports = {\n  isSameQuery: function (originalQuery, customQuery) {\n    if (originalQuery == null || customQuery == null) { // eslint-disable-line\n      throw new Error('Needed parameters not provided');\n    }\n\n    var parseQuery = function (query) {\n      return query\n        .toLowerCase()\n        .replace(/\\\"/g, '') // Remove quoted things like \"pepe\".tableName\n        .replace(/;/g, '');\n    };\n\n    return parseQuery(originalQuery) === parseQuery(customQuery);\n  },\n\n  // return true if the sql query alters table schema in some way\n  altersSchema: function (sql) {\n    if (!sql) {\n      return false;\n    }\n\n    // Remove all line breaks in order to prevent\n    // search pattern problems\n    sql = this._removeLineBreaks(sql.trim());\n\n    return sql.search(/alter\\s+[\\w\\.\"]+\\s+/i) !== -1 ||\n      sql.search(/drop\\s+[\\w\\.\\\"]+/i) !== -1 ||\n      sql.search(/^vacuum\\s+[\\w\\.\\\"]+/i) !== -1 ||\n      sql.search(/^create\\s+[\\w\\.\\\"]+/i) !== -1 ||\n      sql.search(/^reindex\\s+[\\w\\.\\\"]+/i) !== -1 ||\n      sql.search(/^grant\\s+[\\w\\.\\\"]+/i) !== -1 ||\n      sql.search(/^revoke\\s+[\\w\\.\\\"]+/i) !== -1 ||\n      sql.search(/^cluster\\s+[\\w\\.\\\"]+/i) !== -1 ||\n      sql.search(/^comment\\s+on\\s+[\\w\\.\\\"]+/i) !== -1 ||\n      sql.search(/^explain\\s+[\\w\\.\\\"]+/i) !== -1;\n  },\n\n  // return true if the sql query alters table data\n  altersData: function (sql) {\n    if (!sql) {\n      return false;\n    }\n\n    // Remove all line breaks in order to prevent\n    // search pattern problems\n    sql = this._removeLineBreaks(sql.trim());\n\n    return this.altersSchema(sql) ||\n      sql.search(/^refresh\\s+materialized\\s+view\\s+[\\w\\.\\\"]+/i) !== -1 ||\n      sql.search(/^truncate\\s+[\\w\\.\\\"]+/i) !== -1 ||\n      sql.search(/insert\\s+into/i) !== -1 ||\n      sql.search(/update\\s+[\\w\\.\\-\"]+\\s+.*set/i) !== -1 ||\n      sql.search(/delete\\s+from/i) !== -1;\n  },\n\n  _removeLineBreaks: function (sql) {\n    return sql.replace(/\\r?\\n|\\r/g, ' ');\n  },\n\n  getDefaultSQL: function (tableName, userName, inOrganization) {\n    return this.getDefaultSQLFromTableName(TableNameUtils.getQualifiedTableName(tableName, userName, inOrganization));\n  },\n\n  getDefaultSQLFromTableName: function (tableName) {\n    return 'SELECT * FROM ' + tableName;\n  }\n};\n","/**\n *  Functions to work with SQL table names\n */\n\nmodule.exports = {\n  getUnqualifiedName: function (tablename) {\n    if (!tablename) return null;\n    var tk = tablename.split('.');\n    if (tk.length === 2) {\n      return this._getUnquotedName(tk[1]);\n    }\n    return this._getUnquotedName(tablename);\n  },\n\n  getUsername: function (tablename) {\n    if (!tablename) return null;\n    var tk = tablename.split('.');\n    if (tk.length === 2) {\n      return this._getUnquotedName(tk[0]);\n    }\n    return '';\n  },\n\n  _getUnquotedName: function (tablename) {\n    return tablename && tablename.replace(/\"/g, '');\n  },\n\n  _quoteIfNeeded: function (name) {\n    var VALID_IDENTIFIER = /^[a-zA-Z_][a-zA-Z0-9_$]*$/;\n    name = this._getUnquotedName(name);\n    if (!VALID_IDENTIFIER.test(name)) {\n      name = '\"' + name + '\"';\n    }\n    return name;\n  },\n\n  getQualifiedTableName: function (tableName, userName, inOrganization) {\n    var schemaPrefix = (inOrganization && userName) ? this._quoteIfNeeded(userName) + '.' : '';\n    return schemaPrefix + this._quoteIfNeeded(this.getUnqualifiedName(tableName));\n  },\n\n  isSameTableName: function (firstTableName, secondTableName, ownerUsername) {\n    var firstParts = this._getTableNameParts(firstTableName, ownerUsername);\n    var secondParts = this._getTableNameParts(secondTableName, ownerUsername);\n\n    return firstParts[0] === secondParts[0] && firstParts[1] === secondParts[1];\n  },\n\n  _getTableNameParts: function (tableName, ownerUsername) {\n    var table = this.getUnqualifiedName(tableName);\n    var username = this.getUsername(tableName) || ownerUsername;\n\n    return [username, table];\n  }\n};\n","var _ = require('underscore');\nvar cdb = require('internal-carto.js');\n\n/*\n *  Util functions\n */\n\nmodule.exports = {\n  /*\n   *  Simple regex to check if string is an url/ftp\n   *  input ->  string with input text (example: 'https://carto.com')\n   *\n   *  return -> true\n   */\n  isURL: function (input) {\n    var urlregex = /^((http|https|ftp)\\:\\/\\/)/g;\n    if (input) {\n      return urlregex.test(input);\n    } else {\n      return false;\n    }\n  },\n\n  /*\n   *  check if string is blank (i.e.: str === \"\")\n   *  input ->  string with input text\n   *\n   * @return a boolean\n   */\n  isBlank: function (str) {\n    return (!str || /^\\s*$/.test(str));\n  },\n  /*\n   *  Transform bytes to a readable format, like MB, GB\n   *  input ->  34234244\n   *\n   *  return -> 3 MB\n   */\n  readablizeBytes: function (bytes, round) {\n    if (!bytes || isNaN(bytes)) {\n      return 0;\n    }\n    var s = ['bytes', 'kB', 'MB', 'GB', 'TB', 'PB'];\n    var e = Math.floor(Math.log(bytes) / Math.log(1024));\n    var value = (bytes / Math.pow(1024, Math.floor(e))).toFixed(2);\n\n    if (round) {\n      value = parseInt(value, 10);\n    }\n\n    return value + ' ' + s[e];\n  },\n\n  /**\n   *  Convert long numbers to\n   *  readizable numbers.\n   *\n   */\n  readizableNumber: function (num) {\n    if (num >= 1000000000) return (num / 1000000000).toFixed(1) + 'G';\n    if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';\n    if (num >= 1000) return (num / 1000).toFixed(1) + 'K';\n    return num;\n  },\n\n  /*\n   * formatNumber: adds thousands separators\n   * @return a string\n   *\n   */\n  formatNumber: function (x) {\n    if (!x) return '0';\n    var parts = x.toString().split('.');\n    parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n    return parts.join('.');\n  },\n\n  /**\n   * Similar to _.result, but also allows passing arbitrary arguments to the property if it's function.\n   * This makes code more terse  when one just wants to use a value if it's available, no if-checks required.\n   *\n   * @example Expected output\n   *   model.set('something', 'yay');\n   *   cdb.Utils.result(model, 'get', 'something') // => 'yay'\n   *   cdb.Utils.result(model, 'nonexisting', 'else') // => undefined\n   *   cdb.Utils.result(undefinedVar, 'get') // => null\n   *\n   * @example Of usage\n   *  return cdb.Utils.result(model, 'get', 'mightNotExist') === 'OK'\n   *\n   * @param {*} maybeFn\n   * @return {*} Result from called maybeFn if a function, null otherwise\n   */\n  result: function (object, property) {\n    if (object == null) return null;\n    var value = object[property];\n    return _.isFunction(value) ? value.apply(object, Array.prototype.slice.call(arguments, 2)) : value;\n  },\n\n  /**\n   *  Get the extension of a string\n   *\n   */\n  getFileExtension: function (str) {\n    if (!str) return '';\n    return str.substr(str.lastIndexOf('.') + 1);\n  },\n\n  /**\n   *  Add leading zeros to numbers\n   *\n   */\n  pad: function (num, size) {\n    var s = num + '';\n    while (s.length < size) s = '0' + s;\n    return s;\n  },\n\n  formatDate: function (opts) {\n    if (!opts.time) throw new Error();\n    if (opts.month === undefined) throw new Error();\n    if (opts.year === undefined) throw new Error();\n    if (!opts.day) throw new Error();\n\n    // Month in Date format should be specified as an index\n    var month = parseInt(opts.month + 1, 10);\n    var padZero = function (digit) {\n      digit = String(digit);\n      if (digit < 10 && digit.length === 1) {\n        return '0' + digit;\n      }\n      return digit;\n    };\n\n    return '' +\n      opts.year + '-' +\n      padZero(month) + '-' +\n      padZero(opts.day) + 'T' +\n      opts.time + 'Z';\n    // Not adding any info about timezone\n  },\n\n  /*\n   * rgbToHex\n   *\n   */\n  rgbToHex: function (r, g, b) {\n    function componentToHex (c) {\n      var hex = c.toString(16);\n      return hex.length === 1 ? '0' + hex : hex;\n    }\n\n    return '#' + componentToHex(r) + componentToHex(g) + componentToHex(b);\n  },\n\n  /*\n   *  Returns true if the hex color passed as an input is valid\n   *  input -> hex (#FF00FF)\n   *  output -> true\n   *\n   * @return a boolean\n   */\n  isValidHex: function (hex) {\n    return !!hex.match(/(^#?[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i);\n  },\n\n  /*\n   * Returns #FFFFFF in case the input is not a valid HEX number\n   */\n  sanitizeHex: function (hex) {\n    if (!this.isValidHex(hex)) {\n      return '#FFFFFF';\n    }\n    return hex;\n  },\n\n  /*\n   *  Transforms an hex color into its RGB representation\n   *  input ->  hex (#FF00FF)\n   *  output ->  { r: 255, g: 0, b: 255 }\n   *\n   * @return a hash\n   */\n  hexToRGB: function (hex) {\n    if (!hex) {\n      hex = '#FFFFFF';\n    }\n\n    var shortRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n\n    hex = hex.replace(shortRegex, function (m, r, g, b) {\n      return r + r + g + g + b + b;\n    });\n\n    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n\n    return result ? {\n      r: parseInt(result[1], 16),\n      g: parseInt(result[2], 16),\n      b: parseInt(result[3], 16)\n    } : null;\n  },\n  /*\n   *  Transforms an hex color an a opacity value to a rgba string\n   *  input ->  hex (#FF00FF) and opacity (0.4)\n   *  output -> 'rgba(255,0,255,0.4)'\n   *\n   * @return a string\n   */\n  hexToRGBA: function (hex, opacity) {\n    function roundToTwo (num) {\n      return +(Math.round(num + 'e+2') + 'e-2');\n    }\n\n    var rgb = this.hexToRGB(hex);\n    opacity = opacity != null ? roundToTwo(opacity) : 1;\n    if (rgb) {\n      return 'rgba(' + [rgb.r, rgb.g, rgb.b, opacity].join(', ') + ')';\n    } else {\n      return hex;\n    }\n  },\n\n  /*\n   *  Strip html tags from a value.\n   *  input ->  string with input text (example: '<a href=\"#whoknows\">Jamon</a> </br> <p>Vamos</p>')\n   *  allowed -> allowed html tags in the result (example: '<a>')\n   *\n   *  return -> '<a href=\"#whoknows\">Jamon</a> Vamos'\n   */\n  stripHTML: function (input, allowed) {\n    allowed = (((allowed || '') + '').toLowerCase().match(/<[a-z][a-z0-9]*>/g) || []).join('');\n    var tags = /<\\/?([a-z][a-z0-9]*)\\b[^>]*>/gi;\n    if (!input || (typeof input !== 'string')) return '';\n    return input.replace(tags, function ($0, $1) {\n      return allowed.indexOf('<' + $1.toLowerCase() + '>') > -1 ? $0 : '';\n    });\n  },\n\n  /**\n   *  Replace all HTML characters to display HTML content in HTML\n   *  <h1>Hello</h1> -> &lt;h1&gt;Hello&lt;/h1&gt; displays '<h1>Hello</h1>'\n   *\n   */\n  escapeHTML: function (str) {\n    return _.escape(str);\n  },\n\n  /**\n   *  Remove all non-common characters like spaces, quotes, accents, etc. and\n   *  joins strings with underscore symbols\n   *\n   */\n  sanitizeString: function (str) {\n    return str.replace(/[^a-z0-9\\s]/gi, '').replace(/[_\\s]/g, '_');\n  },\n\n  /**\n   *  Returns true is value is a valid number. Based on jQuery isNumeric\n   */\n  isNumeric: function (value) {\n    return !isNaN(parseFloat(value)) && isFinite(value);\n  },\n\n  /**\n   * Formats a number that to include up to 2 decimal positions if less than 10\n   * and up to 1 if greater than 10.\n   */\n  formatDecimalPositions: function (value) {\n    // we are using here the unary operator because parseInt fails to handle exponential number\n    var converted = +value;\n    var p = 0;\n    var abs_v;\n\n    if (isNaN(converted) || converted === 0) {\n      return value;\n    }\n\n    abs_v = Math.abs(converted);\n\n    if (abs_v > 10) {\n      p = 1;\n    } else if (abs_v > 0.01) {\n      p = Math.min(Math.ceil(Math.abs(Math.log(abs_v) / Math.log(10))) + 2, 2);\n    }\n\n    value = value.toFixed(p);\n    var m = value.match(/(\\.0+)$/);\n    if (m) {\n      value = value.replace(m[0], '');\n    }\n\n    return value;\n  },\n\n  /**\n   *  Remove new lines from string\n   *\n   */\n  removeNewLines: function (str) {\n    return str.replace(/(\\r\\n|\\n|\\r)/gm, '');\n  },\n\n  replaceLastSpaceWithNbsp: function (string) {\n    var nbsp = '\\u00a0';\n    var lastSpace = string.lastIndexOf(' ');\n\n    return string.substr(0, lastSpace) + nbsp + string.substr(lastSpace + 1);\n  },\n\n  /**\n   * Returns true if the string ends with provided suffix\n   */\n  endsWith: function (str, suffix) {\n    return str.indexOf(suffix, str.length - suffix.length) !== -1;\n  },\n\n  cloneObject: function (obj) {\n    if (!obj) {\n      return obj;\n    }\n    return JSON.parse(JSON.stringify(obj));\n  },\n\n  /**\n   *  Capitalize first letter of string\n   *\n   */\n  capitalize: function (str) {\n    if (!str) {\n      return str;\n    }\n    return str.charAt(0).toUpperCase() + str.slice(1);\n  },\n\n  sanitizeHtml: function (text) {\n    return cdb.core.sanitize.sanitize(text || '');\n  },\n\n  /**\n   *  Returns true if the value is present\n   *\n   */\n\n  hasValue: function (value) {\n    return value !== null &&\n      value !== undefined &&\n      value !== '' &&\n      !(typeof value === 'number' && isNaN(value));\n  },\n\n  isValidEmail: function (email) {\n    const EMAIL_REGEX = /^([^@]+)@([^@]+)\\.([^@\\.]+)$/i;\n\n    return EMAIL_REGEX.test(email);\n  }\n};\n","var _ = require('underscore');\nvar Notifier = require('builder/components/notifier/notifier');\n\nvar NOTIFICATION_ERROR_TEMPLATE = _.template(\"<span class='CDB-Text u-errorTextColor'><%- title %></span>\");\nvar NOTIFICATION_PREFIX = 'sql-notifications';\n\nvar SQLNotifications = {\n  track: function (view) {\n    // In order to not bloat the notification center we will create\n    // only one notification, and update it along the way\n    this._notificationId = NOTIFICATION_PREFIX;\n  },\n\n  removeNotification: function () {\n    Notifier.removeNotification(this._notificationId);\n  },\n\n  showNotification: function (attrs) {\n    this._addOrUpdateNotification(this._notificationId, attrs);\n  },\n\n  showErrorNotification: function (errors) {\n    var notificationAttrs = {\n      status: 'error',\n      info: _t('notifications.sql.error.body', {\n        body: NOTIFICATION_ERROR_TEMPLATE({\n          title: _t('notifications.sql.error.title')\n        }),\n        error: this._transformErrors(errors)\n      }),\n      closable: false\n    };\n\n    this._addOrUpdateNotification(this._notificationId, notificationAttrs);\n  },\n\n  _transformErrors: function (errors) {\n    return _.map(errors, function (err) {\n      return err.message;\n    }, this).join('. ');\n  },\n\n  _addOrUpdateNotification: function (notificationId, notificationAttrs) {\n    var notification = this._getNotification(notificationId);\n    if (notification) {\n      notification.set(notificationAttrs);\n    } else {\n      this._addNotification(notificationId, notificationAttrs);\n    }\n  },\n\n  _addNotification: function (notificationId, notificationAttrs) {\n    notificationAttrs = _.extend({\n      id: notificationId\n    }, notificationAttrs);\n    Notifier.addNotification(notificationAttrs);\n  },\n\n  _getNotification: function (notificationId) {\n    return Notifier.getNotification(notificationId);\n  }\n};\n\nmodule.exports = SQLNotifications;\n","var _ = require('underscore');\n\nvar SOURCE_ID_REGEX = /^([a-z]+)(\\d*)$/; // matches a string with one or more letters + numbers, e.g. 'b2'\n\nvar newId = function (id, seqChange) {\n  if (!id || !id.match) throw new Error('invalid id');\n\n  var matches = id.match(SOURCE_ID_REGEX);\n  matches[2] = matches[2] || -1;\n\n  if (matches && matches.length === 3) {\n    // letter + next number\n    var letter = matches[1];\n    var seq = parseInt(matches[2], 10) + seqChange;\n    return letter + Math.max(seq, 0);\n  } else {\n    throw new Error('invalid id');\n  }\n};\n\n/**\n * Encapsulates logic related to the nodes' IDs.\n */\nmodule.exports = {\n\n  /**\n   * Get next id in sequence of given source id.\n   * @param {String} id, e.g. 'c2'\n   * @return {String} e.g. 'c3'\n   */\n  next: function (id) {\n    return newId(id, 1);\n  },\n\n  prev: function (id) {\n    return newId(id, -1);\n  },\n\n  /**\n   * Get the letter representation.\n   * @param {String, Object} sourceId or backbone model that have id. e.g. 'c2'\n   * @return {String} e.g. 'c' or an empty string if there is no letter in the given id\n   */\n  letter: function (sourceId) {\n    if (!sourceId || !_.isString(sourceId)) return '';\n    var match = sourceId.match(/^([a-z]+)/);\n    return _.isArray(match) && match[0] || '';\n  },\n\n  /**\n   * Get the sequence representation.\n   * @param {String, Object} sourceId or backbone model that have id. e.g. 'c2'\n   * @return {Number} e.g. 2 or undefined if there is no sequence\n   */\n  sequence: function (sourceId) {\n    if (!sourceId || !_.isString(sourceId)) return;\n    var match = sourceId.match(/(\\d+$)/);\n    return _.isArray(match) && match[0] || undefined;\n  },\n\n  changeLetter: function (id, newLetter) {\n    var seq = id.match(/(\\d+)$/)[0];\n    return newLetter + seq;\n  }\n\n};\n","module.exports = exports = {\n  PublicClient: require('./lib/clients/public'),\n  AuthenticatedClient: require('./lib/clients/authenticated')\n};\n","const PublicClient = require('./public.js');\n\nclass AuthenticatedClient extends PublicClient {\n  getConfig (callback) {\n    var CONFIG_PATH = 'api/v3/me';\n\n    return this.get([CONFIG_PATH], callback);\n  }\n\n  getVisualization (vizUrl, params, callback) {\n    const VIZ_API_PATH = 'api/v1/viz';\n    const uriParams = this.paramsToURI(params);\n\n    return this.get([VIZ_API_PATH, vizUrl, uriParams], callback);\n  }\n\n  getDerivedVisualizations (options, callback) {\n    const VIZ_API_PATH = `api/v1/viz`;\n    var params = Object.assign({\n      type: 'derived',\n      privacy: 'public'\n    }, options);\n\n    const uriParams = this.paramsToURI(params);\n\n    return this.get([VIZ_API_PATH, uriParams], callback);\n  }\n\n  getMap (mapId, callback) {\n    const MAPS_API_PATH = 'api/v1/maps';\n\n    return this.get([MAPS_API_PATH, mapId], callback);\n  }\n\n  putConfig (payload, callback) {\n    const CONFIG_PATH = 'api/v3/me';\n    var opts = {\n      data: JSON.stringify(payload),\n      dataType: 'json'\n    };\n    return this.put([CONFIG_PATH], opts, callback);\n  }\n\n  deleteUser (payload, callback) {\n    const CONFIG_PATH = 'api/v3/me';\n    var opts = {\n      data: JSON.stringify(payload),\n      dataType: 'json'\n    };\n    return this.delete([CONFIG_PATH], opts, callback);\n  }\n\n  like (itemId, callback) {\n    const CONFIG_PATH = 'api/v1/viz';\n    var opts = {\n      dataType: 'json'\n    };\n    return this.post([CONFIG_PATH, itemId, 'like'], opts, callback);\n  }\n\n  deleteLike (itemId, callback) {\n    const CONFIG_PATH = 'api/v1/viz';\n    var opts = {\n      dataType: 'json'\n    };\n    return this.delete([CONFIG_PATH, itemId, 'like'], opts, callback);\n  }\n\n  updateNotification (userId, apiKey, notification, callback) {\n    const CONFIG_PATH = [`/api/v3/users/${userId}/notifications/${notification.id}?api_key=${apiKey}`];\n    const opts = {\n      data: JSON.stringify({\n        notification\n      }),\n      dataType: 'json'\n    };\n\n    return this.put(CONFIG_PATH, opts, callback);\n  }\n\n  getTags (options, callback) {\n    const URIParts = ['api/v3/tags'];\n    const URLParameters = {\n      q: options.q,\n      page: options.page || 1,\n      per_page: options.perPage || 6,\n      types: options.types || 'derived,table',\n      include_shared: options.include_shared || false\n    };\n\n    const queryOptions = {\n      data: URLParameters\n    };\n\n    return this.get(URIParts, queryOptions, callback);\n  }\n\n  previewSearch (query, callback) {\n    const URIParts = ['api/v3/search_preview'];\n    const URLParameters = {\n      types: 'derived,table,tag',\n      limit: 4\n    };\n\n    const queryOptions = {\n      data: URLParameters\n    };\n\n    return this.get([URIParts, encodeURIComponent(query)], queryOptions, callback);\n  }\n\n  getApiKeys (type, callback) {\n    const URIParts = ['api/v3/api_keys'];\n    const URLParameters = {\n      type: type\n    };\n\n    const queryOptions = {\n      data: URLParameters\n    };\n\n    return this.get(URIParts, queryOptions, callback);\n  }\n\n  getOAuthApps (apiKey, callback) {\n    const CONFIG_PATH = [`api/v4/oauth_apps?api_key=${apiKey}`];\n\n    return this.get(CONFIG_PATH, callback);\n  }\n\n  createApp (apiKey, app, callback) {\n    const CONFIG_PATH = [`api/v4/oauth_apps?api_key=${apiKey}`];\n    const opts = {\n      data: JSON.stringify(app),\n      dataType: 'json'\n    };\n    return this.post(CONFIG_PATH, opts, callback);\n  }\n\n  updateApp (apiKey, app, callback) {\n    const CONFIG_PATH = [`api/v4/oauth_apps/${app.id}?api_key=${apiKey}`];\n    const opts = {\n      data: JSON.stringify(app),\n      dataType: 'json'\n    };\n    return this.put(CONFIG_PATH, opts, callback);\n  }\n\n  deleteApp (apiKey, app, callback) {\n    const CONFIG_PATH = [`api/v4/oauth_apps/${app.id}?api_key=${apiKey}`];\n    const opts = {\n      data: JSON.stringify(app),\n      dataType: 'json'\n    };\n    return this.delete(CONFIG_PATH, opts, callback);\n  }\n\n  regenerateClientSecret (apiKey, app, callback) {\n    const CONFIG_PATH = [`api/v4/oauth_apps/${app.id}/regenerate_secret?api_key=${apiKey}`];\n    const opts = {\n      data: JSON.stringify(app),\n      dataType: 'json'\n    };\n    return this.post(CONFIG_PATH, opts, callback);\n  }\n\n  uploadLogo (apiKey, userId, filename, callback) {\n    const CONFIG_PATH = [`api/v1/users/${userId}/assets?api_key=${apiKey}`];\n\n    const data = new FormData();\n    data.append('kind', 'orgavatar');\n    data.append('filename', filename);\n\n    const opts = {\n      data,\n      doNoSetDefaultContentType: true,\n      processData: false\n    };\n\n    return this.post(CONFIG_PATH, opts, callback);\n  }\n\n  getConnectedApps (apiKey, callback) {\n    const CONFIG_PATH = [`api/v4/granted_oauth_apps?api_key=${apiKey}`];\n\n    return this.get(CONFIG_PATH, callback);\n  }\n\n  revokeOAuthApp (apiKey, app, callback) {\n    const CONFIG_PATH = [`api/v4/oauth_apps/${app.id}/revoke?api_key=${apiKey}`];\n    const opts = {\n      data: JSON.stringify(app),\n      dataType: 'json'\n    };\n    return this.post(CONFIG_PATH, opts, callback);\n  }\n}\n\nmodule.exports = AuthenticatedClient;\n","const $ = require('jquery');\n\nwindow.StaticConfig = window.StaticConfig || {};\n\nclass PublicClient {\n  constructor (apiURI = '') {\n    this.apiURI = apiURI;\n  }\n\n  get (...args) {\n    return this.request('get', ...args);\n  }\n\n  put (...args) {\n    return this.request('put', ...args);\n  }\n\n  post (...args) {\n    return this.request('post', ...args);\n  }\n\n  delete (...args) {\n    return this.request('delete', ...args);\n  }\n\n  addHeaders (obj, additional) {\n    return Object.assign(\n      {},\n      obj.headers,\n      additional\n    );\n  }\n\n  paramsToURI (params) {\n    const DEFAULT_PARAMS = '';\n\n    return this.checkParams(params)\n      ? `?${Object\n        .keys(params)\n        .map(key => `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`)\n        .join('&')}`\n      : DEFAULT_PARAMS;\n  }\n\n  checkParams (params) {\n    const OBJECT_TYPE = '[object Object]';\n\n    return params &&\n      Object.prototype.toString.call(params) === OBJECT_TYPE &&\n      Object.keys(params).length;\n  }\n\n  makeRelativeURI (parts) {\n    return `/${parts.join('/')}`;\n  }\n\n  makeAbsoluteURI (relativeURI) {\n    return `${this.apiURI}${relativeURI}`;\n  }\n\n  successCallback (callback) {\n    return (data, textStatus, jqXHR) => {\n      try {\n        data = JSON.parse(JSON.stringify(data));\n      } catch (e) {\n        data = null;\n      }\n\n      callback(null, textStatus, data);\n    };\n  }\n\n  errorCallback (callback) {\n    return (jqXHR, textStatus, errorThrown) => {\n      const err = errorThrown || new Error('Failed to fetch');\n      callback(err, textStatus, jqXHR);\n    };\n  }\n\n  getAssetsBaseUrl () {\n    const { host, protocol } = window.location;\n\n    const regExp = window.location.href.match(/(\\/(u|user)\\/[a-z0-9\\-]+)\\//);\n    const path = regExp && regExp[1] || '';\n\n    return window.StaticConfig.baseUrl || `${protocol}//${host}${path}`;\n  }\n\n  request (method, uriParts, opts = {}, callback) {\n    if (!callback && typeof opts === 'function') {\n      callback = opts;\n      opts = {};\n    }\n\n    const contentType = opts.doNoSetDefaultContentType\n      ? false\n      : 'application/json; charset=utf-8';\n\n    Object.assign(opts, {\n      contentType: contentType,\n      method: method.toUpperCase()\n    });\n\n    this.addHeaders(opts);\n\n    const baseUrl = opts.baseUrl || this.getAssetsBaseUrl();\n    const url = uriParts.length !== 0\n      ? this.makeAbsoluteURI(this.makeRelativeURI(uriParts))\n      : '';\n\n    const requestOptions = Object.assign({}, opts,\n      {\n        success: this.successCallback(callback),\n        error: this.errorCallback(callback)\n      }\n    );\n\n    $.ajax(`${baseUrl}${url}`, requestOptions);\n  }\n}\n\nmodule.exports = exports = PublicClient;\n","\n/**\n *  Default upload config\n *\n */\n\nmodule.exports = {\n  uploadStates: [\n    'enqueued',\n    'pending',\n    'importing',\n    'uploading',\n    'guessing',\n    'unpacking',\n    'getting',\n    'creating',\n    'complete'\n  ],\n  fileExtensions: [\n    'csv',\n    'xls',\n    'xlsx',\n    'zip',\n    'kml',\n    'geojson',\n    'json',\n    'ods',\n    'kmz',\n    'tsv',\n    'gpx',\n    'tar',\n    'gz',\n    'tgz',\n    'osm',\n    'bz2',\n    'tif',\n    'tiff',\n    'txt',\n    'sql',\n    'rar',\n    'carto',\n    'gpkg'\n  ],\n  // How big should file be?\n  fileTimesBigger: 3\n};\n","module.exports = {\n  types: [\n    'POINT',\n    'LINESTRING',\n    'POLYGON',\n    'MULTIPOINT',\n    'MULTILINESTRING',\n    'MULTIPOLYGON'\n  ]\n};\n","const IconSelectorView = require('dashboard/components/icon-selector/icon-selector-view');\nconst template = require('./avatar-selector.tpl');\n\nmodule.exports = IconSelectorView.extend({\n  options: {\n    acceptedExtensions: ['jpeg', 'jpg', 'png', 'gif'],\n    imageKind: 'orgavatar',\n    imageURLAttribute: 'avatar_url'\n  },\n\n  render: function () {\n    this._destroyFileInput();\n    this.clearSubViews();\n\n    this.$el.html(\n      template({\n        state: this._model.get('state'),\n        name: this._renderModel.get('name'),\n        inputName: this._renderModel.get('inputName'),\n        avatarURL: this._renderModel.get('avatar_url'),\n        username: this._renderModel.get('username'),\n        avatarAcceptedExtensions: this._formatAcceptedExtensions(this.options.acceptedExtensions)\n      })\n    );\n\n    this._renderFileInput();\n    return this;\n  }\n});\n","/* global google */\nconst L = require('leaflet');\nconst NEW_YORK = [40.7127837, -74.0059413];\n\n/**\n * Creates a default fallback map, to be used when an user doesn't have a public map.\n *\n * @param opts {Object} config\n *   el: {HTMLElement} an HTMLElement node where to draw the map\n */\nmodule.exports = function (opts) {\n  if (opts.basemap.urlTemplate) {\n    const map = L.map(opts.el, {\n      zoomControl: false,\n      minZoom: 6,\n      maxZoom: 6,\n      scrollWheelZoom: false\n    });\n\n    map.setView(NEW_YORK, 6);\n\n    map.dragging.disable();\n    map.touchZoom.disable();\n    map.doubleClickZoom.disable();\n\n    map.attributionControl.setPrefix('');\n\n    let url = opts.basemap.urlTemplate;\n\n    if (window.devicePixelRatio > 1) {\n      url = opts.basemap.urlTemplate2x || url;\n    }\n\n    L.tileLayer(url, {\n      attribution: opts.basemap.attribution\n    }).addTo(map);\n  } else if (opts.basemap.className === 'googlemaps' && google.maps !== undefined) {\n    const map = new google.maps.Map(opts.el, { // eslint-disable-line\n      center: { lat: NEW_YORK[0], lng: NEW_YORK[1] },\n      zoom: 6,\n      draggable: false,\n      scrollwheel: false,\n      panControl: false,\n      zoomControl: false,\n      streetViewControl: false,\n      maxZoom: 6,\n      minZoom: 6,\n      mapTypeControl: false,\n      mapTypeId: opts.basemap.baseType || google.maps.MapTypeId.ROADMAP,\n      styles: [\n        {\n          featureType: 'all',\n          elementType: 'labels',\n          stylers: [\n            { visibility: 'off' }\n          ]\n        },\n        {\n          featureType: 'road',\n          elementType: 'geometry',\n          stylers: [\n            { visibility: 'off' }\n          ]\n        },\n        {\n          featureType: 'administrative',\n          elementType: 'geometry.stroke',\n          stylers: [\n            { visibility: 'off' }\n          ]\n        }\n      ]\n    });\n  }\n};\n","const $ = require('jquery');\nconst CoreView = require('backbone/core-view');\nconst checkAndBuildOpts = require('builder/helpers/required-opts');\nconst logoTemplate = require('./dashboard-header/logo.tpl');\nconst dropdownLinkTemplate = require('./dashboard-header/breadcrumbs/dropdown-link.tpl');\nconst SettingsDropdownView = require('./dashboard-header/settings-dropdown-view');\nconst BreadcrumbsDropdown = require('./dashboard-header/breadcrumbs/dropdown-view');\nconst UserNotificationsView = require('./dashboard-header/notifications/user-notifications-view');\n\nconst REQUIRED_OPTS = [\n  'viewModel',\n  'configModel'\n];\n\n/**\n * Responsible for the header part of the layout.\n * It's currently pre-rendered server-side, why the header element is required to be given when instantiating the view.\n */\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-breadcrumb-dropdown': '_createBreadcrumbsDropdown',\n    'click .js-settings-dropdown': '_createSettingsDropdown'\n  },\n\n  initialize: function (options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n\n    if (!this.options.el) {\n      throw new Error('el element is required');\n    }\n\n    this.router = this.options.router;\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this._renderBreadcrumbsDropdownLink();\n    this._renderNotifications();\n    this._renderLogoLink();\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this._viewModel.bind('change', this._renderBreadcrumbsDropdownLink, this);\n    this.listenTo(this._viewModel, 'change', this._renderBreadcrumbsDropdownLink);\n\n    if (this.router) {\n      this.listenTo(this.router.model, 'change', this._onRouterChange);\n    }\n    if (this.collection) {\n      this.listenTo(this.collection, 'reset', this._stopLogoAnimation);\n      this.listenTo(this.collection, 'error', this._onCollectionError);\n    }\n  },\n\n  _onCollectionError: function (col, e, opts) {\n    // Old requests can be stopped, so aborted requests are not\n    // considered as an error\n    if (!e || (e && e.statusText !== 'abort')) {\n      this._stopLogoAnimation();\n    }\n  },\n\n  // TODO: Not sure if the changes made here are correct, because of backbone version changes\n  _onRouterChange: function (m, c) {\n    if (m.changed && !m.changed.content_type && this.collection.total_user_entries > 0) {\n      this._startLogoAnimation();\n    }\n  },\n\n  _startLogoAnimation: function () {\n    this.$('.Logo').addClass('is-loading');\n  },\n\n  _stopLogoAnimation: function () {\n    this.$('.Logo').removeClass('is-loading');\n  },\n\n  _renderBreadcrumbsDropdownLink: function () {\n    this.$('.js-breadcrumb-dropdown').html(\n      dropdownLinkTemplate({\n        title: this._viewModel.breadcrumbTitle(),\n        dropdownEnabled: this._viewModel.isBreadcrumbDropdownEnabled()\n      })\n    );\n  },\n\n  _renderNotifications: function () {\n    var userNotifications = new UserNotificationsView({\n      user: this.model,\n      configModel: this._configModel,\n      organizationNotifications: this.options.organizationNotifications\n    });\n\n    this.$('.js-user-notifications').html(userNotifications.render().el);\n    this.addView(userNotifications);\n  },\n\n  _renderLogoLink: function () {\n    this.$('.js-logo').html(\n      logoTemplate({\n        homeUrl: this.model.viewUrl().dashboard(),\n        googleEnabled: this.model.featureEnabled('google_maps')\n      })\n    );\n  },\n\n  _createSettingsDropdown: function (event) {\n    this.killEvent(event);\n\n    this._setupDropdown(new SettingsDropdownView({\n      target: $(event.target),\n      model: this.model, // a user model\n      configModel: this._configModel,\n      horizontalOffset: 15\n    }));\n  },\n\n  _createBreadcrumbsDropdown: function (ev) {\n    if (this._viewModel.isBreadcrumbDropdownEnabled()) {\n      this.killEvent(ev);\n      this._setupDropdown(new BreadcrumbsDropdown({\n        target: $(ev.target),\n        model: this.model,\n        viewModel: this._viewModel,\n        router: this.router, // optional\n        tick: 'center',\n        template: require('dashboard/components/dashboard-header/breadcrumbs/dropdown.tpl'),\n        horizontalOffset: this.options.breadcrumbsDropdownOffset\n      }));\n    }\n  },\n\n  _setupDropdown: function (dropdownView) {\n    this._closeAnyOtherOpenDialogs();\n    this._previousDropDown = dropdownView;\n    this.addView(dropdownView);\n\n    dropdownView.on('onDropdownHidden', function () {\n      dropdownView.clean();\n    }, this);\n\n    dropdownView.render();\n    dropdownView.open();\n  },\n\n  _closeAnyOtherOpenDialogs: function () {\n    // TODO: This is not how it used to work, it used to listen to a global event\n    if (this._previousDropDown) {\n      this._previousDropDown.hide();\n    }\n  }\n});\n","const $ = require('jquery');\nconst checkAndBuildOpts = require('builder/helpers/required-opts');\nconst navigateThroughRouter = require('builder/helpers/navigate-through-router');\nconst AdminDropdownMenu = require('dashboard/components/dropdown/dropdown-admin-view');\n\nconst REQUIRED_OPTS = [\n  'viewModel'\n];\n\n/**\n * The content of the dropdown menu opened by the link at the end of the breadcrumbs menu, e.g.\n *   username > [Maps]\n *          ______/\\____\n *         |            |\n *         |    this    |\n *         |____________|\n */\n\nmodule.exports = AdminDropdownMenu.extend({\n  className: 'Dropdown BreadcrumbsDropdown',\n\n  events: {\n    'click a': '_navigateToLinksHref'\n  },\n\n  initialize: function (options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n    AdminDropdownMenu.prototype.initialize.apply(this, arguments);\n  },\n\n  render: function () {\n    var dashboardUrl = this.model.viewUrl().dashboard();\n    var datasetsUrl = dashboardUrl.datasets();\n    var deepInsightsUrl = dashboardUrl.deepInsights();\n    var mapsUrl = dashboardUrl.maps();\n\n    this.$el.html(this.template({\n      avatarUrl: this.model.get('avatar_url'),\n      userName: this.model.get('username'),\n      mapsUrl: mapsUrl,\n      datasetsUrl: datasetsUrl,\n      deepInsightsUrl: deepInsightsUrl,\n      lockedDatasetsUrl: datasetsUrl.lockedItems(),\n      lockedMapsUrl: mapsUrl.lockedItems(),\n      isDeepInsights: this._viewModel.isDisplayingDeepInsights(),\n      isDatasets: this._viewModel.isDisplayingDatasets(),\n      isMaps: this._viewModel.isDisplayingMaps(),\n      isLocked: this._viewModel.isDisplayingLockedItems()\n    }));\n\n    // Necessary to hide dialog on click outside popup, for example.\n    // TODO: Handle this\n    // cdb.god.bind('closeDialogs', this.hide, this);\n\n    // TODO: taken from existing code, how should dropdowns really be added to the DOM?\n    $('body').append(this.el);\n\n    return this;\n  },\n\n  _navigateToLinksHref: function () {\n    this.hide(); // Hide must be called before routing for proper deconstruct of dropdown\n\n    if (this.options.router) {\n      navigateThroughRouter.apply(this, arguments);\n    }\n  }\n});\n","const $ = require('jquery');\nconst ScrollView = require('builder/components/scroll/scroll-view');\nconst ViewFactory = require('builder/components/view-factory');\nconst AdminDropdownMenu = require('dashboard/components/dropdown/dropdown-admin-view');\nconst template = require('./templates/dropdown-content.tpl');\n\n/**\n * User notifications dropdown, rendering notifications\n * from the collection\n */\n\nmodule.exports = AdminDropdownMenu.extend({\n  className: 'Dropdown',\n\n  initialize: function (options) {\n    AdminDropdownMenu.prototype.initialize.apply(this, arguments);\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this.$el.html(this.template());\n    this._renderDropdown();\n    this._checkScroll();\n\n    $('body').append(this.el);\n\n    return this;\n  },\n\n  _renderDropdown: function () {\n    this.dropdown_content = ViewFactory.createByTemplate(template, {\n      items: this.collection.toJSON(),\n      unreadItems: this.collection.filter(item => !item.get('opened')).length\n    });\n    this.addView(this.dropdown_content);\n\n    this.$('.js-content').html(this.dropdown_content.render().el);\n  },\n\n  _checkScroll: function () {\n    // we need to wait until dropdown has appeared,\n    // then if it is taller than 300px we wrap the content in a ScrollView,\n    // this is a fix for IE11, which needs a fixed height when using flex in a child element\n    setTimeout(function () {\n      if (this.$el.height() >= 300) {\n        var view = new ScrollView({\n          createContentView: function () {\n            return this.dropdown_content;\n          }.bind(this)\n        });\n        this.addView(view);\n\n        this.$el.addClass('Dropdown--withScroll');\n        this.$('.js-content').html(view.render().el);\n      }\n    }.bind(this), 301);\n  },\n\n  _initBinds: function () {\n    // TODO: Handle event\n    // cdb.god.bind('closeDialogs', this.hide, this);\n  }\n});\n","const Backbone = require('backbone');\nconst UserNotificationModel = require('./user-notification-model');\nconst OrganizationNotificationModel = require('./organization-notification-model');\nconst checkAndBuildOpts = require('builder/helpers/required-opts');\n\nconst REQUIRED_OPTS = [\n  'configModel'\n];\n\n/**\n *  User notification default collection, it will\n *  require the user notification model\n */\n\nmodule.exports = Backbone.Collection.extend({\n  initialize: function (options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n  },\n\n  model: function (attrs, options) {\n    return attrs.type === 'org_notification'\n      ? new OrganizationNotificationModel(attrs, {\n        ...options,\n        configModel: options.collection._configModel\n      })\n      : new UserNotificationModel(attrs);\n  }\n});\n","const UserNotificationModel = require('./user-notification-model');\nconst checkAndBuildOpts = require('builder/helpers/required-opts');\n\nconst REQUIRED_OPTS = [\n  'userId',\n  'configModel',\n  'apiKey'\n];\n\n/**\n *  User notification default model\n */\n\nmodule.exports = UserNotificationModel.extend({\n  url: function () {\n    return `/api/v3/users/${this._userId}/notifications/${this.id}?api_key=${this._apiKey}`;\n  },\n\n  initialize: function (attrs, opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n  },\n\n  markAsRead: function () {\n    this.save({\n      notification: {\n        read_at: new Date()\n      }\n    });\n  }\n});\n","const Backbone = require('backbone');\n\n/**\n *  User notification default model\n */\n\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    type: '',\n    message: '',\n    opened: false\n  }\n});\n","const $ = require('jquery');\nconst moment = require('moment');\nconst CoreView = require('backbone/core-view');\nconst UserNotificationsCollection = require('./notifications-collection');\nconst NotificationsDropdown = require('./dropdown-view');\nconst template = require('./templates/user-notifications.tpl');\nconst dropdownTemplate = require('./templates/dropdown.tpl');\nconst LocalStorage = require('../../../helpers/local-storage');\nconst checkAndBuildOpts = require('../../../../builder/helpers/required-opts');\n\nconst TEMPLATES = {\n  tryTrial: require('./templates/try-trial.tpl'),\n  limitsExceeded: require('./templates/limits-exceeded.tpl'),\n  closeLimits: require('./templates/close-limits.tpl'),\n  upgradedMessage: require('./templates/upgraded-message.tpl'),\n  trialEndsSoon: require('./templates/trial-ends-soon.tpl')\n};\n\nconst REQUIRED_OPTS = [\n  'configModel',\n  'user'\n];\n\n/**\n *  User notifactions view used to show alerts from the application\n *\n *  In storage we will check these attributes, managed by a collection:\n *\n *  try_trial       -> trial_end_at is null && user is not paid user\n *  limits_exceeded -> check table quota size\n *  close_limits    -> check table quota size < 80%\n *  upgraded        -> check upgraded_at less than one week\n *  trial_ends_soon -> trial_end_at is not null and it is close to be finished\n *  new_dashboard   -> new dashboard\n *  notification    -> check notification\n *\n */\n\nmodule.exports = CoreView.extend({\n\n  attributes: {\n    href: '#/notifications'\n  },\n\n  tagName: 'a',\n  className: 'UserNotifications',\n\n  events: {\n    'click': '_openNotifications'\n  },\n\n  initialize: function (options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n\n    this.localStorage = new LocalStorage();\n    this.collection = new UserNotificationsCollection({\n      configModel: options.configModel\n    });\n    this.collection.reset(this._generateCollection(), {\n      userId: this._user.get('id'),\n      apiKey: this._user.get('api_key'),\n      silent: true\n    });\n\n    this._initBinds();\n  },\n\n  render: function () {\n    var notificationsCount = this.collection.filter(item => !item.get('opened')).length;\n\n    this.$el.html(\n      template({\n        notificationsCount: notificationsCount\n      })\n    );\n\n    this.$el.toggleClass('has--alerts', notificationsCount > 0);\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this._user.bind('change', this._onUserChange, this);\n    this.collection.bind('reset', this.render, this);\n    this.collection.bind('remove', this.render, this);\n    this.add_related_model(this._user);\n    this.add_related_model(this.collection);\n  },\n\n  _onUserChange: function () {\n    // When api is ready, we will make a valid fetch :)\n    this.collection.reset(this._generateCollection(), {\n      userId: this._user.get('id'),\n      apiKey: this._user.get('api_key')\n    });\n    this.render();\n  },\n\n  // This method will check notifications and create a collection with them\n  // Also it will check if those have been opened or not with Local Storage.\n  _generateCollection: function () {\n    var arr = [];\n    var data = {}; // data\n    var userUrl = this._user.viewUrl();\n    var comHosted = this._configModel.get('cartodb_com_hosted');\n\n    data.isInsideOrg = this._user.isInsideOrg();\n    data.isOrgOwner = this._user.isOrgOwner();\n    data.accountType = this._user.get('account_type').toLowerCase();\n    data.remainingQuota = this._user.get('remaining_byte_quota');\n    data.publicProfileUrl = userUrl.publicProfile();\n    data.bytesQuota = this._user.get('quota_in_bytes');\n    data.userType = 'regular';\n    data.upgradeUrl = window.upgrade_url || '';\n    data.upgradeContactEmail = this._user.upgradeContactEmail();\n    data.trialEnd = this._user.get('trial_ends_at') && moment(this._user.get('trial_ends_at')).format('YYYY-MM-DD');\n    data.userName = this._user.get('name') || this._user.get('username');\n\n    // Get user type\n    if (data.isInsideOrg && !data.isOrgOwner) {\n      data.userType = 'org';\n    } else if (data.isOrgOwner) {\n      data.userType = 'admin';\n    } else if (data.accountType === 'internal' || data.accountType === 'partner' || data.accountType === 'ambassador') {\n      data.userType = 'internal';\n    }\n\n    // try_trial -> trial_end_at is null && user is not paid user\n    if (!comHosted && !data.isInsideOrg && data.accountType === 'free' && this._user.get('table_count') > 0) {\n      arr.push({\n        iconFont: 'CDB-IconFont-gift',\n        severity: 'NotificationsDropdown-itemIcon--positive',\n        type: 'try_trial',\n        msg: TEMPLATES.tryTrial(data),\n        opened: this.localStorage.get('notification.try_trial')\n      });\n    } else {\n      this.localStorage.remove('notification.try_trial');\n    }\n\n    // limits_exceeded -> check table quota size\n    if (!comHosted && data.bytesQuota > 0 && data.remainingQuota <= 0) {\n      arr.push({\n        iconFont: 'CDB-IconFont-barometer',\n        severity: 'NotificationsDropdown-itemIcon--negative',\n        type: 'limits_exceeded',\n        msg: TEMPLATES.limitsExceeded(data),\n        opened: this.localStorage.get('notification.limits_exceeded')\n      });\n    } else {\n      this.localStorage.remove('notification.limits_exceeded');\n    }\n\n    // close_limits -> check table quota size < 80%\n    if (!comHosted && data.bytesQuota > 0 && ((data.remainingQuota * 100) / data.bytesQuota) < 20) {\n      arr.push({\n        iconFont: 'CDB-IconFont-barometer',\n        severity: 'NotificationsDropdown-itemIcon--alert',\n        type: 'close_limits',\n        msg: TEMPLATES.closeLimits(data),\n        opened: this.localStorage.get('notification.close_limits')\n      });\n    } else {\n      this.localStorage.remove('notification.close_limits');\n    }\n\n    // upgraded -> check upgraded_at less than ... one week?\n    if (!comHosted && this._user.get('show_upgraded_message')) {\n      arr.push({\n        iconFont: 'CDB-IconFont-heartFill',\n        severity: 'NotificationsDropdown-itemIcon--positive',\n        type: 'upgraded_message',\n        msg: TEMPLATES.upgradedMessage(data),\n        opened: this.localStorage.get('notification.upgraded_message')\n      });\n    } else {\n      this.localStorage.remove('notification.upgraded_message');\n    }\n\n    // trial_ends_soon -> show_trial_reminder flag\n    if (this._user.get('show_trial_reminder')) {\n      arr.push({\n        iconFont: 'CDB-IconFont-clock',\n        severity: 'NotificationsDropdown-itemIcon--alert',\n        type: 'trial_ends_soon',\n        msg: TEMPLATES.trialEndsSoon(data),\n        opened: this.localStorage.get('notification.trial_ends_soon')\n      });\n    } else {\n      this.localStorage.remove('notification.trial_ends_soon');\n    }\n\n    const organizationNotifications = window.organization_notifications || this.options.organizationNotifications;\n\n    if (organizationNotifications) {\n      for (var n = 0; n < organizationNotifications.length; n++) {\n        var notification = organizationNotifications[n];\n        var icon = notification.icon ? ('CDB-IconFont-' + notification.icon) : 'CDB-IconFont-alert';\n\n        arr.push({\n          iconFont: icon,\n          severity: 'NotificationsDropdown-itemIcon--alert',\n          id: notification.id,\n          msg: notification.html_body,\n          read_at: notification.read_at,\n          type: 'org_notification'\n        });\n      }\n    }\n\n    return arr;\n  },\n\n  _openNotifications: function (event) {\n    if (event) this.killEvent(event);\n\n    if (this.notification) {\n      this.notification.hide();\n      delete this.notification;\n      return this;\n    }\n\n    var view = this.notification = new NotificationsDropdown({\n      target: this.$el,\n      collection: this.collection,\n      horizontal_offset: 5,\n      vertical_offset: -5,\n      template: dropdownTemplate\n    });\n\n    $(view.options.target).unbind('click', view._handleClick);\n    this._closeAnyOtherOpenDialogs();\n\n    view.on('onDropdownHidden', () => this._onDropdownHidden(view));\n\n    view.render();\n    view.open();\n\n    this.addView(view);\n  },\n\n  _onDropdownHidden: function (view) {\n    // All notifications have been seen, opened -> true\n    this.collection.each(notification => {\n      const notificationType = notification.get('type');\n\n      if (notificationType === 'org_notification') {\n        notification.markAsRead();\n      } else if (notificationType) {\n        notification.set('opened', true);\n        this.localStorage.set({\n          [`notification.${notificationType}`]: true\n        });\n      }\n    });\n\n    // Clean collection because all notifications should\n    // removed from the collection\n    this.collection.reset();\n\n    // Clean dropdown\n    view.clean();\n    // Remove it from subviews\n    this.removeView(view);\n    // Remove count\n    this.$el.removeClass('has--alerts');\n    // No local notification set\n    delete this.notification;\n  },\n\n  _closeAnyOtherOpenDialogs: function () {\n    // cdb.god.trigger(\"closeDialogs\"); TODO: handle event\n  }\n});\n","const _ = require('underscore');\nconst $ = require('jquery');\nconst checkAndBuildOpts = require('builder/helpers/required-opts');\nconst DropdownAdminView = require('dashboard/components/dropdown/dropdown-admin-view');\nconst Utils = require('builder/helpers/utils');\nconst template = require('./settings-dropdown.tpl');\n\nconst REQUIRED_OPTS = [\n  'model',\n  'configModel'\n];\n\n/**\n * The content of the dropdown menu opened by the user avatar in the top-right of the header, e.g.:\n *   Explore, Learn, \n *             ______/\\____\n *            |            |\n *            |    this    |\n *            |____________|\n */\n\nmodule.exports = DropdownAdminView.extend({\n  className: 'Dropdown',\n\n  initialize: function (options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n    DropdownAdminView.prototype.initialize.apply(this, arguments);\n  },\n\n  shortDisplayName: function (user) {\n    // This changes should also be done in Central, ./app/assets/javascripts/dashboard/users/views/user_avatar.js\n    var accountTypeDisplayName = user.get('account_type_display_name');\n    var displayName = _.isUndefined(accountTypeDisplayName) ? user.get('account_type') : accountTypeDisplayName;\n\n    if (_.isUndefined(displayName)) {\n      return displayName;\n    }\n\n    displayName = displayName.toLowerCase();\n\n    if (displayName === 'organization user') {\n      return 'org. user';\n    } else {\n      return displayName.replace(/lump-sum/gi, '- A')\n        .replace(/academic/gi, 'aca.')\n        .replace(/ - Monthly/i, ' - M')\n        .replace(/ - Annual/i, ' - A')\n        .replace(/Non-Profit/i, 'NP')\n        .replace(/On-premises/i, 'OP')\n        .replace(/Internal use engine/i, 'engine')\n        .replace(/Lite/i, 'L')\n        .replace(/Cloud Engine &/i, 'C. Engine &')\n        .replace(/& Enterprise Builder/i, '& E. Builder')\n        .replace(/CARTO for /i, '')\n        .replace(/CARTO /i, '');\n    }\n  },\n\n  render: function () {\n    var user = this.model;\n    var usedDataBytes = user.get('db_size_in_bytes');\n    var quotaInBytes = user.get('quota_in_bytes');\n    var usedDataPct = Math.round(usedDataBytes / quotaInBytes * 100);\n    var progressBarClass = '';\n\n    if (usedDataPct > 80 && usedDataPct < 90) {\n      progressBarClass = 'is--inAlert';\n    } else if (usedDataPct > 89) {\n      progressBarClass = 'is--inDanger';\n    }\n\n    var accountType = this.shortDisplayName(user);\n\n    var userUrl = this.model.viewUrl();\n    var upgradeUrl = window.upgrade_url || this._configModel.get('upgrade_url') || '';\n\n    this.$el.html(template({\n      name: user.fullName() || user.get('username'),\n      email: user.get('email'),\n      accountType: accountType,\n      isOrgAdmin: user.isOrgAdmin(),\n      usedDataStr: Utils.readablizeBytes(usedDataBytes),\n      usedDataPct: usedDataPct,\n      progressBarClass: progressBarClass,\n      availableDataStr: Utils.readablizeBytes(quotaInBytes),\n      showUpgradeLink: upgradeUrl && (user.isOrgOwner() || !user.isInsideOrg()) && !this._configModel.get('cartodb_com_hosted'),\n      upgradeUrl: upgradeUrl,\n      publicProfileUrl: userUrl.publicProfile(),\n      apiKeysUrl: userUrl.apiKeys(),\n      organizationUrl: userUrl.organization(),\n      accountProfileUrl: userUrl.accountProfile(),\n      logoutUrl: userUrl.logout(),\n      isViewer: user.isViewer(),\n      isBuilder: user.isBuilder(),\n      orgDisplayEmail: user.isInsideOrg() ? user.organization.display_email : null,\n      engineEnabled: user.get('actions').engine_enabled,\n      mobileAppsEnabled: user.get('actions').mobile_sdk_enabled\n    }));\n\n    // Necessary to hide dialog on click outside popup, for example.\n    // TODO: Handle closeDialogs\n    // cdb.god.bind('closeDialogs', this.hide, this);\n\n    // TODO: taken from existing code, how should dropdowns really be added to the DOM?\n    $('body').append(this.el);\n\n    return this;\n  }\n});\n","const CoreView = require('backbone/core-view');\nconst template = require('./delete-account.tpl');\nconst checkAndBuildOpts = require('builder/helpers/required-opts');\n\nconst REQUIRED_OPTS = [\n  'modalModel',\n  'userModel',\n  'client'\n];\n\n/**\n *  When user wants to delete his own account\n */\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-ok': '_onClickDelete',\n    'click .js-cancel': '_closeDialog',\n    'submit .js-form': '_closeDialog'\n  },\n\n  initialize: function (options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n    CoreView.prototype.initialize.apply(this);\n\n    this._onError = options.onError;\n    this._error = '';\n\n    this._isLoading = false;\n  },\n\n  render: function () {\n    this.$el.html(\n      template({\n        passwordNeeded: !!this._userModel.get('needs_password_confirmation'),\n        isLoading: this._isLoading,\n        error: this._error\n      })\n    );\n\n    return this;\n  },\n\n  _onClickDelete: function (event) {\n    this.killEvent(event);\n\n    const params = {\n      deletion_password_confirmation: this.$('#deletion_password_confirmation').val()\n    };\n\n    this._isLoading = true;\n    this._error = '';\n\n    this.render();\n\n    this._client.deleteUser(params, (errors, response, data) => {\n      this._isLoading = false;\n      this.render();\n\n      if (errors) {\n        this._handleError(data, errors);\n      } else {\n        this._onSuccess(data);\n      }\n    });\n  },\n\n  _handleError: function (data, errors) {\n    if (this._onError) {\n      this._closeDialog();\n      this._onError(data, errors);\n    } else {\n      const jsonData = data && data.responseJSON || {};\n\n      this._error = jsonData.message;\n      this.render();\n    }\n  },\n\n  _setHref: function (href) {\n    window.location.href = href;\n  },\n\n  _onSuccess: function (data) {\n    this._setHref(data.logout_url);\n    this._closeDialog();\n  },\n\n  _onFormError: function (data, errors) {\n    this._onError(data, errors);\n    this._closeDialog();\n  },\n\n  _closeDialog: function () {\n    this._modalModel.destroy();\n  }\n});\n","var $ = require('jquery');\nvar DropdownBaseView = require('./dropdown-base-view');\n\nmodule.exports = DropdownBaseView.extend({\n\n  show: function () {\n    var dfd = $.Deferred();\n    var self = this;\n    // sometimes this dialog is child of a node that is removed\n    // for that reason we link again DOM events just in case\n    this.delegateEvents();\n    this.$el\n      .css({\n        marginTop: self.options.verticalPosition === 'down' ? '-10px' : '10px',\n        opacity: 0,\n        display: 'block'\n      })\n      .animate({\n        margin: '0',\n        opacity: 1\n      }, {\n        'duration': this.options.speedIn,\n        'complete': function () {\n          dfd.resolve();\n        }\n      });\n    this.trigger('onDropdownShown', this.el);\n\n    return dfd.promise();\n  },\n\n  /**\n   * open the dialog at x, y\n   */\n  openAt: function (x, y) {\n    var dfd = $.Deferred();\n\n    this.$el.css({\n      top: y,\n      left: x,\n      width: this.options.width\n    })\n      .addClass(\n        (this.options.verticalPosition === 'up' ? 'vertical_top' : 'vertical_bottom') + ' ' +\n        (this.options.horizontalPosition === 'right' ? 'horizontal_right' : 'horizontal_left') + ' ' +\n        // Add tick class\n        'tick_' + this.options.tick\n      );\n\n    this.modelView.set({open: true});\n\n    // Show\n    $.when(this.show()).done(function () {\n      dfd.resolve();\n    });\n    // xabel: I've add the deferred to make it easily testable\n\n    return dfd.promise();\n  },\n\n  hide: function (done) {\n    // don't attempt to hide the dropdown if it's already hidden\n    if (!this.isOpen) { done && done(); return; }\n\n    var self = this;\n\n    this.$el.animate({\n      marginTop: self.options.verticalPosition === 'down' ? '10px' : '-10px',\n      opacity: 0\n    }, this.options.speedOut, function () {\n      // Remove selected class\n      $(self.options.target).removeClass('selected');\n\n      // And hide it\n      self.$el.hide();\n      done && done();\n\n      self.trigger('onDropdownHidden', self.el);\n    });\n  }\n});\n","var $ = require('jquery');\nvar _ = require('underscore');\nvar Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\n\nvar DEFAULTS = {\n  width: 160,\n  speedIn: 150,\n  speedOut: 300,\n  verticalPosition: 'down',\n  horizontalPosition: 'right',\n  tick: 'right',\n  verticalOffset: 0,\n  horizontalOffset: 0\n};\n\nmodule.exports = CoreView.extend({\n  className: 'dropdown',\n\n  initialize: function (options) {\n    _.bindAll(this, 'open', 'hide', '_handleClick', '_keydown', '_onDocumentClick');\n\n    this.options = {};\n    // Extend options\n    _.defaults(this.options, options, DEFAULTS);\n\n    if (options.template) {\n      this.template = options.template;\n    }\n\n    // Bind to target\n    $(options.target).on('click', this._handleClick);\n    $(document).on('keydown', this._keydown);\n    $(document).on('click', this._onDocumentClick);\n\n    this.modelView = new Backbone.Model({\n      open: false\n    });\n\n    this.modelView.on('change:open', function (model, isOpen) {\n      isOpen ? this.hide() : this.open();\n    }, this);\n  },\n\n  render: function () {\n    // Render\n    var $el = this.$el;\n    $el\n      .html(this.template && this.template(this.options))\n      .css({\n        width: this.options.width\n      });\n    return this;\n  },\n\n  _handleClick: function (event) {\n    if (event) {\n      event.preventDefault();\n    }\n\n    var isOpen = this.modelView.get('open');\n    this.modelView.set('open', !isOpen);\n  },\n\n  _onDocumentClick: function (e) {\n    var $el = $(e.target);\n    var $target = $(this.options.target);\n    var isTarget = $el.get(0) === $target.get(0);\n    if (!isTarget && $el.closest('.Dropdown').length === 0) {\n      this.modelView.set({open: false}, {silent: true});\n      this.hide();\n    }\n  },\n\n  _keydown: function (event) {\n    if (event.keyCode === 27) {\n      this.modelView.set('open', false);\n    }\n  },\n\n  hide: function () {\n    this.$el.hide();\n  },\n\n  show: function () {\n    this.$el.css({\n      display: 'block',\n      opacity: 1\n    });\n  },\n\n  open: function (event, target) {\n    // Target\n    var $target = target && $(target) || this.options.target;\n    this.options.target = $target;\n\n    // Positionate\n    var targetPos = $target[this.options.position || 'offset']();\n    var targetWidth = $target.outerWidth();\n    var targetHeight = $target.outerHeight();\n    var elementWidth = this.$el.outerWidth();\n    var elementHeight = this.$el.outerHeight();\n    var verticalPosition = this.options.verticalPosition;\n    var verticalOffset = this.options.verticalOffset;\n    var horizontalPosition = this.options.horizontalPosition;\n    var horizontalOffset = this.options.horizontalOffset;\n\n    this.$el.css({\n      top: targetPos.top + parseInt((verticalPosition === 'up') ? (-elementHeight - 10 - verticalOffset) : (targetHeight + 10 - verticalOffset)),\n      left: targetPos.left + parseInt((horizontalPosition === 'left') ? (horizontalOffset - 15) : (targetWidth - elementWidth + 15 - horizontalOffset))\n    })\n      .addClass(\n        // Add vertical and horizontal position class\n        (verticalPosition === 'up' ? 'vertical_top' : 'vertical_bottom') +\n        ' ' +\n        (horizontalPosition === 'right' ? 'horizontal_right' : 'horizontal_left') +\n        ' ' +\n        // Add tick class\n        'tick_' + this.options.tick\n      );\n\n    this.show();\n  },\n\n  isOpen: function () {\n    return this.modelView.get('open');\n  },\n\n  clean: function () {\n    const target = $(this.options.target);\n    this.options.target && target.off('click', this._handleClick);\n    $(document).off('keydown', this._keydown);\n    $(document).off('click', this._onDocumentClick);\n    CoreView.prototype.clean.apply(this);\n  }\n});\n","const CoreView = require('backbone/core-view');\nconst template = require('./flash-message.tpl');\nconst checkAndBuildOpts = require('builder/helpers/required-opts');\n\nconst REQUIRED_OPTS = [\n  'model'\n];\n\n/**\n * View for a flash message to be displayed at the header.\n */\nmodule.exports = CoreView.extend({\n  initialize: function (options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n\n    this.listenTo(this.model, 'change', this.render);\n  },\n\n  render: function () {\n    this.$el.toggle(this.model.shouldDisplay());\n\n    this.$el.html(\n      template({\n        str: this.model.get('msg'),\n        type: this.model.get('type')\n      })\n    );\n\n    return this;\n  }\n});\n","const _ = require('underscore');\nconst Backbone = require('backbone');\nconst CoreView = require('backbone/core-view');\nconst template = require('./icon-selector.tpl');\nconst checkAndBuildOpts = require('builder/helpers/required-opts');\nrequire('filestyle');\n\nvar AssetModel = require('dashboard/data/asset-model.js');\n\nconst REQUIRED_OPTS = [\n  'configModel',\n  'renderModel'\n];\n\n/**\n *  Change and preview new mobile app icon\n *\n */\n\nmodule.exports = CoreView.extend({\n  options: {\n    acceptedExtensions: ['jpeg', 'jpg', 'png', 'gif'],\n    imageKind: 'mobileAppIcon',\n    imageURLAttribute: 'icon_url'\n  },\n\n  initialize: function (options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n\n    this._model = new Backbone.Model({ state: 'idle' });\n    this._initBinds();\n  },\n\n  render: function () {\n    this._destroyFileInput();\n    this.clearSubViews();\n\n    this.$el.html(\n      template({\n        state: this._model.get('state'),\n        name: this._renderModel.get('name'),\n        inputName: this._renderModel.get('inputName'),\n        iconURL: this._renderModel.get('icon_url'),\n        iconAcceptedExtensions: this._formatAcceptedExtensions(this.options.acceptedExtensions)\n      })\n    );\n    this._renderFileInput();\n    return this;\n  },\n\n  _initBinds: function () {\n    _.bindAll(this, '_onInputChange', '_onSuccess', '_onError');\n    this.listenTo(this._model, 'change', this.render);\n  },\n\n  _destroyFileInput: function () {\n    var $file = this.$(':file');\n    $file.unbind('change', this._onInputChange, this);\n    $file.filestyle('destroy');\n  },\n\n  _renderFileInput: function () {\n    var $file = this.$(':file');\n    var opts = { buttonText: 'Choose image' };\n\n    // If we set disabled, no mather if it is true\n    // or false, it turns into disabled\n    if (this._model.get('state') === 'loading') {\n      opts.disabled = true;\n    }\n\n    $file.filestyle(opts);\n    $file.bind('change', this._onInputChange);\n  },\n\n  _onInputChange: function () {\n    var file = this.$(':file').prop('files');\n    var iconUpload = new AssetModel(\n      null, {\n        userId: this._renderModel.get('id'),\n        configModel: this._configModel\n      }\n    );\n\n    iconUpload.save({\n      kind: this.options.imageKind,\n      filename: file\n    }, {\n      success: this._onSuccess,\n      error: this._onError\n    });\n\n    // If we move \"loading\" state before starting the upload,\n    // it would trigger a new render and \"remove\" file value :S\n    this._model.set('state', 'loading');\n  },\n\n  _onSuccess: function (model, data) {\n    this._renderModel.set(this.options.imageURLAttribute, data.public_url);\n    this._model.set('state', 'success');\n  },\n\n  _onError: function () {\n    this._model.set('state', 'error');\n  },\n\n  clean: function () {\n    this._destroyFileInput();\n    CoreView.prototype.clean.apply(this);\n  },\n\n  _formatAcceptedExtensions: function (acceptedExtensions) {\n    var formattedExtensions = [];\n\n    for (var i = 0; i < acceptedExtensions.length; i++) {\n      formattedExtensions[i] = 'image/' + acceptedExtensions[i];\n    }\n\n    return formattedExtensions.join(',');\n  }\n\n});\n","var $ = require('jquery');\nvar _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar TEMPLATES = {\n  // Using <%= %> instead of <%- %> because if not / characters (for example) will be escaped\n  regular: '<%- protocol %>://<%= mapsApiResource %>/api/v1/map/static/named/<%- tpl %>/<%- width %>/<%- height %>.png<%= authTokens %>',\n  cdn: '<%- protocol %>://<%- cdn %>/<%- username %>/api/v1/map/static/named/<%- tpl %>/<%- width %>/<%- height %>.png<%= authTokens %>'\n};\n\nvar REQUIRED_OPTS = [\n  'config',\n  'visId',\n  'mapsApiResource',\n  'username'\n];\n\n/**\n *  MapCard previews\n *\n */\n\nmodule.exports = CoreView.extend({\n  options: {\n    width: 300,\n    height: 170,\n    privacy: 'PUBLIC',\n    className: '',\n    authTokens: []\n  },\n\n  initialize: function (options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n  },\n\n  load: function () {\n    this._startLoader();\n    this._loadFromVisId();\n\n    return this;\n  },\n\n  _generateImageTemplate: function () {\n    return 'tpl_' + this._visId.replace(/-/g, '_');\n  },\n\n  _loadFromVisId: function () {\n    var protocol = this._isHTTPS() ? 'https' : 'http';\n    var cdnConfig = this._config.get('cdn_url');\n    var template = _.template(cdnConfig ? TEMPLATES['cdn'] : TEMPLATES['regular']);\n\n    var options = {\n      protocol: protocol,\n      username: this._username,\n      mapsApiResource: this._mapsApiResource,\n      tpl: this._generateImageTemplate(),\n      width: this.options.width,\n      height: this.options.height,\n      authTokens: this._generateAuthTokensParams()\n    };\n\n    if (cdnConfig) {\n      options = _.extend(options, {\n        cdn: cdnConfig[protocol]\n      });\n    }\n\n    var url = template(options);\n\n    this._loadImage({}, url);\n  },\n\n  _generateAuthTokensParams: function () {\n    var authTokens = this.options.authTokens;\n    if (authTokens && authTokens.length > 0) {\n      return '?' + _.map(authTokens, function (t) { return 'auth_token=' + t; }).join('&');\n    } else {\n      return '';\n    }\n  },\n\n  _isHTTPS: function () {\n    return location.protocol.indexOf('https') === 0;\n  },\n\n  loadURL: function (url) {\n    var $img = $('<img class=\"MapCard-preview\" src=\"' + url + '\" />');\n    this.$el.append($img);\n\n    if (this.options.className) {\n      $img.addClass(this.options.className);\n    }\n\n    $img.fadeIn(250);\n  },\n\n  showError: function () {\n    this._onError();\n  },\n\n  _startLoader: function () {\n    this.$el.addClass('is-loading');\n  },\n\n  _stopLoader: function () {\n    this.$el.removeClass('is-loading');\n  },\n\n  _onSuccess: function (url) {\n    this._stopLoader();\n    this.loadURL(url);\n    this.trigger('loaded', url);\n  },\n\n  _onError: function () {\n    this._stopLoader();\n    this.$el.addClass('has-error');\n    var $error = $('<div class=\"MapCard-error\" />');\n    this.$el.append($error);\n    $error.fadeIn(250);\n    this.trigger('error');\n  },\n\n  _loadImage: function (error, url) {\n    var self = this;\n    var img = new Image();\n\n    img.onerror = function () {\n      self._onError(error);\n    };\n\n    img.onload = function () {\n      self._onSuccess(url);\n    };\n\n    try {\n      img.src = url;\n    } catch (err) {\n      this._onError(err);\n    }\n  }\n\n});\n","var $ = require('jquery');\nvar CoreView = require('backbone/core-view');\nvar IndustriesDropdown = require('./user-industries/dropdown-view');\n\n/**\n * View to render the user settings section in the header.\n * Expected to be created from existing DOM element.\n */\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-dropdown-target': '_createDropdown'\n  },\n\n  _createDropdown: function (event) {\n    if (event) {\n      event.preventDefault();\n    }\n\n    var $target = $(event.target);\n\n    var view = new IndustriesDropdown({\n      target: $target,\n      verticalOffset: -10,\n      horizontalOffset: $target.width() - 100,\n      horizontalPosition: 'left',\n      tick: 'center'\n    });\n\n    view.render();\n\n    view.on('onDropdownHidden', function () {\n      view.clean();\n    }, this);\n\n    view.open();\n  }\n});\n","var $ = require('jquery');\nvar DropdownAdminView = require('dashboard/components/dropdown/dropdown-admin-view');\nvar template = require('./dropdown.tpl');\n\n/**\n * The content of the dropdown menu opened by the industries link in the header, e.g.:\n *   CartoDB, Industries, Explore, Pricing\n *             ______/\\____\n *            |            |\n *            |    this    |\n *            |____________|\n */\nmodule.exports = DropdownAdminView.extend({\n  className: 'CDB-Text Dropdown Dropdown--public',\n\n  render: function () {\n    this.$el.html(template());\n\n    // TODO: taken from existing code, how should dropdowns really be added to the DOM?\n    $('body').append(this.el);\n\n    return this;\n  }\n});\n","var $ = require('jquery');\nvar CoreView = require('backbone/core-view');\nvar SettingsDropdownView = require('./user-settings/dropdown-view');\nvar userSettingsTemplate = require('./user-settings.tpl');\n\n/**\n * View to render the user settings section in the header.\n * Expected to be created from existing DOM element.\n */\nmodule.exports = CoreView.extend({\n\n  events: {\n    'click .js-dropdown-target': '_createDropdown'\n  },\n\n  render: function () {\n    var dashboardUrl = this.model.viewUrl().dashboard();\n    var datasetsUrl = dashboardUrl.datasets();\n    var mapsUrl = dashboardUrl.maps();\n\n    this.$el.html(\n      userSettingsTemplate({\n        avatarUrl: this.model.get('avatar_url'),\n        mapsUrl: mapsUrl,\n        datasetsUrl: datasetsUrl\n      })\n    );\n\n    return this;\n  },\n\n  _createDropdown: function (event) {\n    var view = new SettingsDropdownView({\n      target: $(event.target),\n      model: this.model, // user\n      horizontalOffset: 18\n    });\n    view.render();\n\n    view.on('onDropdownHidden', function () {\n      view.clean();\n    }, this);\n\n    view.open();\n  }\n\n});\n","var $ = require('jquery');\nvar template = require('./dropdown.tpl');\nvar DropdownAdminView = require('dashboard/components/dropdown/dropdown-admin-view');\n\n/**\n * The content of the dropdown menu opened by the user avatar in the top-right of the header, e.g.:\n *   Explore, Learn, \n *             ______/\\____\n *            |            |\n *            |    this    |\n *            |____________|\n */\n\nmodule.exports = DropdownAdminView.extend({\n  className: 'CDB-Text Dropdown',\n\n  render: function () {\n    var user = this.model;\n    var userUrl = user.viewUrl();\n\n    this.$el.html(template({\n      name: user.fullName() || user.get('username'),\n      email: user.get('email'),\n      isOrgOwner: user.isOrgOwner(),\n      dashboardUrl: userUrl.dashboard(),\n      publicProfileUrl: userUrl.publicProfile(),\n      accountProfileUrl: userUrl.accountProfile(),\n      logoutUrl: userUrl.logout()\n    }));\n\n    // TODO: taken from existing code, how should dropdowns really be added to the DOM?\n    $('body').append(this.el);\n\n    return this;\n  }\n});\n","const CoreView = require('backbone/core-view');\nconst template = require('./pages-subheader.tpl');\nconst checkAndBuildOpts = require('builder/helpers/required-opts');\nconst bytesToSize = require('dashboard/helpers/bytes-to-size');\n\nconst REQUIRED_OPTS = [\n  'userModel',\n  'configModel'\n];\n\nmodule.exports = CoreView.extend({\n  initialize: function (options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n  },\n\n  render: function () {\n    const usedDataBytes = this._userModel.get('db_size_in_bytes');\n    const quotaInBytes = this._userModel.get('quota_in_bytes');\n    const usedDataPct = Math.round(usedDataBytes / quotaInBytes * 100);\n    let progressBarClass = '';\n\n    if (usedDataPct > 80 && usedDataPct < 90) {\n      progressBarClass = 'caution';\n    } else if (usedDataPct > 89) {\n      progressBarClass = 'danger';\n    }\n\n    this.$el.html(template({\n      isCartoDBHosted: this._configModel.get('cartodb_com_hosted'),\n      usedDataStr: bytesToSize(usedDataBytes).toString(2),\n      usedDataPct: usedDataPct,\n      progressBarClass: progressBarClass,\n      availableDataStr: bytesToSize(quotaInBytes).toString(2),\n      profileUrl: this._userModel.viewUrl().accountProfile().pathname(),\n      accountUrl: this._userModel.viewUrl().accountSettings().pathname(),\n      apiKeysUrl: this._userModel.viewUrl().apiKeys().pathname(),\n      connectedAppsUrl: this._userModel.viewUrl().connectedApps().pathname(),\n      isInsideOrg: this._userModel.isInsideOrg(),\n      planUrl: this._userModel.get('plan_url'),\n      isOrgAdmin: this._userModel.isOrgAdmin(),\n      organizationUrl: this._userModel.viewUrl().organization().pathname(),\n      isOrgOwner: this._userModel.isOrgOwner(),\n      upgradeContactEmail: this._userModel.upgradeContactEmail(),\n      path: this.getPath()\n    }));\n\n    return this;\n  },\n\n  getPath: function () {\n    return window.location.pathname;\n  }\n});\n","const _ = require('underscore');\nconst CoreView = require('backbone/core-view');\nconst template = require('./password-confirmation.tpl');\nconst checkAndBuildOpts = require('builder/helpers/required-opts');\n\nconst REQUIRED_OPTS = [\n  'modalModel',\n  'onPasswordTyped'\n];\n\n/**\n * Password Confirmation Modal\n *\n * Modal used for password validated forms, so\n * the user needs to type the password in to\n * save form changes\n */\n\nmodule.exports = CoreView.extend({\n  events: {\n    'click .js-ok': '_onConfirm',\n    'click .js-cancel': '_closeDialog',\n    'keydown #password-confirmation-form': '_onEnterPressed',\n    'input .js-password': '_toggleConfirmButton'\n  },\n\n  initialize: function (options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n    this._isConfirmDisabled = true;\n  },\n\n  render: function () {\n    this.$el.html(\n      template({\n        isConfirmDisabled: this._isConfirmDisabled\n      })\n    );\n\n    this._okButton = this.$('.js-ok');\n    return this;\n  },\n\n  _toggleConfirmButton: function (event) {\n    const passwordInput = event.target;\n    this._isConfirmDisabled = _.isEmpty(passwordInput.value);\n    this._okButton.toggleClass('is-disabled', this._isConfirmDisabled);\n  },\n\n  _onConfirm: function (event) {\n    this.killEvent(event);\n\n    if (this._isConfirmDisabled) {\n      return;\n    }\n\n    const passwordValue = this.$('#password-confirmation').val();\n    this._onPasswordTyped && this._onPasswordTyped(passwordValue);\n    this._closeDialog();\n  },\n\n  _onEnterPressed: function (event) {\n    if (event.keyCode !== 13) {\n      return;\n    }\n\n    this._onConfirm(event);\n  },\n\n  _closeDialog: function () {\n    this._modalModel.destroy();\n  }\n});\n","const _ = require('underscore');\nconst CoreView = require('backbone/core-view');\n\nmodule.exports = CoreView.extend({\n\n  initialize: function () {\n    this.tabs = {};\n    this.activeTab = null;\n    this.activePane = null;\n  },\n\n  addTab: function (name, view, options) {\n    options = options || { active: true };\n    if (this.tabs[name] !== undefined) {\n      console.debug(name + 'already added');\n    } else {\n      this.tabs[name] = view.cid;\n      this.addView(view);\n      if (options.after !== undefined) {\n        var e = this.$el.children()[options.after];\n        view.$el.insertAfter(e);\n      } else if (options.prepend) {\n        this.$el.prepend(view.el);\n      } else {\n        this.$el.append(view.el);\n      }\n      this.trigger('tabAdded', name, view);\n      if (options.active) {\n        this.active(name);\n      } else {\n        view.hide();\n      }\n    }\n  },\n\n  getPreviousPane: function () {\n    var tabs = _.toArray(this.tabs);\n    var panes = _.toArray(this._subviews);\n\n    var i = _.indexOf(tabs, this.activePane.cid) - 1;\n    if (i < 0) i = panes.length - 1;\n\n    return panes[i];\n  },\n\n  getNextPane: function () {\n    var tabs = _.toArray(this.tabs);\n    var panes = _.toArray(this._subviews);\n\n    var i = 1 + _.indexOf(tabs, this.activePane.cid);\n    if (i > panes.length - 1) i = 0;\n\n    return panes[i];\n  },\n\n  getPane: function (name) {\n    var vid = this.tabs[name];\n    return this._subviews[vid];\n  },\n\n  getActivePane: function () {\n    return this.activePane;\n  },\n\n  size: function () {\n    return _.size(this.tabs);\n  },\n\n  clean: function () {\n    this.removeTabs();\n    CoreView.prototype.clean.call(this);\n  },\n\n  removeTab: function (name) {\n    if (this.tabs[name] !== undefined) {\n      var vid = this.tabs[name];\n      this._subviews[vid].clean();\n      delete this.tabs[name];\n\n      if (this.activeTab == name) { // eslint-disable-line eqeqeq\n        this.activeTab = null;\n      }\n\n      if (_.size(this.tabs)) {\n        this.active(_.keys(this.tabs)[0]);\n      }\n    }\n  },\n\n  removeTabs: function () {\n    for (var name in this.tabs) {\n      var vid = this.tabs[name];\n      this._subviews[vid].clean();\n      delete this.tabs[name];\n    }\n    this.activeTab = null;\n  },\n\n  active: function (name) {\n    const vid = this.tabs[name];\n\n    if (vid !== undefined) {\n      if (this.activeTab !== name) {\n        var v = this._subviews[vid];\n\n        if (this.activeTab) {\n          var vid_old = this._subviews[this.tabs[this.activeTab]];\n\n          vid_old.hide();\n          this.trigger('tabDisabled', this.activeTab, vid_old);\n          this.trigger('tabDisabled:' + this.activeTab, vid_old);\n          if (vid_old.deactivated) {\n            vid_old.deactivated();\n          }\n        }\n\n        v.show();\n        if (v.activated) {\n          v.activated();\n        }\n\n        this.activeTab = name;\n        this.activePane = v;\n\n        this.trigger('tabEnabled', name, v);\n        this.trigger('tabEnabled:' + name, v);\n      }\n\n      return this.activePane;\n    }\n  },\n\n  render: function () {\n    return this;\n  },\n\n  each: function (fn) {\n    _.each(this.tabs, (cid, tab) => {\n      fn(tab, this.getPane(tab));\n    });\n  }\n\n});\n","const CoreView = require('backbone/core-view');\nconst template = require('./trial-notification.tpl');\nconst checkAndBuildOpts = require('builder/helpers/required-opts');\n\nconst REQUIRED_OPTS = [\n  'userModel',\n  'upgradeUrl',\n  'trialDays'\n];\n\nmodule.exports = CoreView.extend({\n  initialize: function (options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n\n    this.userAccount = this._userModel.get('account_type');\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this.$el.html(\n      template({\n        upgradeUrl: this._upgradeUrl,\n        trialDays: this._trialDays\n      })\n    );\n\n    return this;\n  }\n});\n","const CoreView = require('backbone/core-view');\nconst template = require('./upgrade-message.tpl');\nconst checkAndBuildOpts = require('builder/helpers/required-opts');\n\nconst REQUIRED_OPTS = [\n  'configModel',\n  'userModel'\n];\n\n/**\n *  Upgrade message for settings pages\n *\n */\n\nmodule.exports = CoreView.extend({\n\n  initialize: function (options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n\n    this._initBinds();\n  },\n\n  render: function () {\n    var upgradeUrl = this._configModel.get('upgrade_url');\n    var canUpgrade = upgradeUrl && !this._configModel.get('cartodb_com_hosted') && (!this._userModel.isInsideOrg() || this._userModel.isOrgOwner());\n\n    this.$el.html(\n      template({\n        canUpgrade: canUpgrade,\n        closeToLimits: this._userModel.isCloseToLimits(),\n        upgradeableWithoutContactingSales: !this._userModel.isEnterprise(),\n        quotaPer: (this._userModel.get('remaining_byte_quota') * 100) / this._userModel.get('quota_in_bytes'),\n        upgradeUrl: upgradeUrl,\n        showTrial: this._userModel.canStartTrial()\n      })\n    );\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._userModel, 'change', this.render);\n  }\n});\n","var DropdownAdminView = require('dashboard/components/dropdown/dropdown-admin-view');\n\n/**\n * The content of the dropdown menu opened by the link at the end of the breadcrumbs menu, e.g.\n *   username / Maps v\n *            ______/\\____\n *           |            |\n *           |    this    |\n *           |____________|\n */\nmodule.exports = DropdownAdminView.extend({\n  className: 'Dropdown',\n\n  hide: function () {\n    this.$el.css({\n      opacity: 0\n    });\n  }\n});\n","const $ = require('jquery');\nconst CoreView = require('backbone/core-view');\nconst BreadcrumbDropdown = require('./dropdown-view.js');\n\n/**\n * View to render the user info section.\n * Expected to be created from existing DOM element.\n */\nmodule.exports = CoreView.extend({\n\n  events: {\n    'click .js-breadcrumb-dropdown-target': '_createBreadcrumbDropdown'\n  },\n\n  _previousDropDown: null,\n\n  _createBreadcrumbDropdown: function (ev) {\n    ev.preventDefault();\n\n    if (this._previousDropDown) {\n      this._previousDropDown.open();\n      return;\n    }\n\n    var dropdown = new BreadcrumbDropdown({\n      target: $(ev.target),\n      el: $('.js-breadcrumb-dropdown-content'),\n      horizontal_offset: 3, // to match the dropdown indicator/arrow\n      horizontal_position: 'right',\n      tick: 'right'\n    });\n\n    this._previousDropDown = dropdown;\n    this.addView(dropdown);\n    dropdown.on('onDropdownHidden', function () {\n      dropdown.clean();\n    }, this);\n\n    dropdown.render();\n    dropdown.open();\n  },\n\n  _closeAnyOtherOpenDialogs: function () {\n    if (this._previousDropDown) {\n      this._previousDropDown.hide();\n    }\n  }\n});\n","const CoreView = require('backbone/core-view');\nconst template = require('./vendor-scripts.tpl');\nconst checkAndBuildOpts = require('builder/helpers/required-opts');\n\nconst REQUIRED_OPTS = [\n  'configModel',\n  'userModel',\n  'assetsVersion'\n];\n\nmodule.exports = CoreView.extend({\n  initialize: function (options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n  },\n\n  render: function () {\n    this.$el.html(\n      template({\n        assetsVersion: this._assetsVersion,\n        googleTagManagerId: this._configModel.get('google_tag_manager_id'),\n        hubspotIds: this._configModel.get('hubspot_ids'),\n        hubspotToken: this._configModel.get('hubspot_token'),\n        intercomAppId: this._configModel.get('intercom_app_id'),\n        intercomEnabled: !!this._userModel.featureEnabled('intercom'),\n        trackjsAppKey: this._configModel.get('trackjs_app_key'),\n        trackjsCustomer: this._configModel.get('trackjs_customer'),\n        trackjsEnabled: !!this._configModel.get('trackjs_enabled'),\n        fullstoryEnabled: !!this._configModel.get('fullstory_enabled'),\n        fullstoryOrg: this._configModel.get('fullstoryOrg'),\n        userEmail: this._userModel.get('email'),\n        userName: this._userModel.get('username'),\n        userId: this._userModel.get('id'),\n        userAccountType: this._userModel.get('account_type'),\n        userCreatedAtInSeconds: Date.parse(this._userModel.get('created_at')) / 1000,\n        userJobRole: this._userModel.get('job_role'),\n        userInTrialPeriod: this._userModel.get('show_trial_reminder')\n      })\n    );\n\n    return this;\n  }\n});\n","const Backbone = require('backbone');\nconst checkAndBuildOpts = require('builder/helpers/required-opts');\n\n/**\n *  Model that let user upload files\n *  to our endpoints\n */\n\nrequire('backbone-model-file-upload');\n\nconst REQUIRED_OPTS = [\n  'configModel',\n  'userId'\n];\n\nmodule.exports = Backbone.Model.extend({\n  url: function (method) {\n    var version = this._configModel.urlVersion('asset', method);\n    return `/api/${version}/users/${this._userId}/assets`;\n  },\n\n  fileAttribute: 'filename',\n\n  initialize: function (attributes, options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n  }\n});\n","var Backbone = require('backbone');\n\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    username: '',\n    avatar_url: ''\n  },\n\n  url: function () {\n    return `//${this.getHost()}/api/v1/get_authenticated_users`;\n  },\n\n  getHost: function () {\n    var currentHost = window.location.host;\n    return this.get('host') ? this.get('host') : currentHost;\n  }\n});\n","var Backbone = require('backbone');\n\n/**\n * Custom sync method to only allow a single request at a time,\n * any prev ongoing request at a time of a sync call will be aborted.\n *\n * @example\n *   var MyModel = Backbone.Model.extend({\n *     // \n *     sync: syncAbort,\n */\nmodule.exports = function (method, self, opts) {\n  if (this._xhr) {\n    this._xhr.abort();\n  }\n\n  var xhr = this._xhr = Backbone.Model.prototype.sync.apply(this, arguments);\n  xhr.always(function () {\n    self._xhr = null;\n  });\n\n  return xhr;\n};\n","var _ = require('underscore');\nvar Backbone = require('backbone');\n\n(function () {\n  // helper functions needed from backbone (they are not exported)\n  var getValue = function (object, prop, method) {\n    if (!(object && object[prop])) return null;\n    return _.isFunction(object[prop]) ? object[prop](method) : object[prop];\n  };\n\n  // Throw an error when a URL is needed, and none is supplied.\n  var urlError = function () {\n    throw new Error('A \"url\" property or function must be specified');\n  };\n\n  // backbone.sync replacement to control url prefix\n  Backbone.originalSync = Backbone.sync;\n  Backbone.sync = function (method, model, options) {\n    var url = options.url || getValue(model, 'url', method) || urlError();\n    // prefix if http is not present\n    var absoluteUrl = url.indexOf('http') === 0 || url.indexOf('//') === 0;\n    if (!absoluteUrl) {\n      // We need to fix this\n      // this comes from cdb.config.prefixUrl\n      options.url = (model._configModel || model._config || model).get('base_url') + url;\n    } else {\n      options.url = url;\n    }\n    if (method !== 'read') {\n      // remove everything related\n      if (model.surrogateKeys) {\n        Backbone.cachedSync.invalidateSurrogateKeys(getValue(model, 'surrogateKeys'));\n      }\n    }\n    return Backbone.originalSync(method, model, options);\n  };\n\n  Backbone.currentSync = Backbone.sync;\n  Backbone.withCORS = function (method, model, options) {\n    if (!options) {\n      options = {};\n    }\n\n    if (!options.crossDomain) {\n      options.crossDomain = true;\n    }\n\n    if (!options.xhrFields) {\n      options.xhrFields = { withCredentials: true };\n    }\n\n    return Backbone.currentSync(method, model, options);\n  };\n\n  // this method returns a cached version of backbone sync\n  // take a look at https://github.com/teambox/backbone.memoized_sync/blob/master/backbone.memoized_sync.js\n  // this is the same concept but implemented as a wrapper for ``Backbone.sync``\n  // usage:\n  // initialize: function () {\n  //    this.sync = Backbone.cachedSync(this.user_name);\n  // }\n  Backbone.cachedSync = function (namespace, sync) {\n    if (!namespace) {\n      throw new Error('cachedSync needs a namespace as argument');\n    }\n\n    var surrogateKey = namespace;\n    var session = window.user_data && window.user_data.username;\n    // no user session, no cache\n    // there should be a session to have cache so we avoid\n    // cache collision for someone with more than one account\n    if (session) {\n      namespace += '-' + session;\n    } else {\n      return Backbone.sync;\n    }\n\n    var namespaceKey = 'cdb-cache/' + namespace;\n\n    // saves all the localstore references to the namespace\n    // inside localstore. It allows to remove all the references\n    // at a time\n    var index = {\n      // return a list of references for the namespace\n      _keys: function () {\n        return JSON.parse(localStorage.getItem(namespaceKey) || '{}');\n      },\n\n      // add a new reference for the namespace\n      add: function (key) {\n        var keys = this._keys();\n        keys[key] = +new Date();\n        localStorage.setItem(namespaceKey, JSON.stringify(keys));\n      },\n\n      // remove all the references for the namespace\n      invalidate: function () {\n        var keys = this._keys();\n        _.each(keys, function (v, k) {\n          localStorage.removeItem(k);\n        });\n        localStorage.removeItem(namespaceKey);\n      }\n    };\n\n    // localstore-like cache wrapper\n    var cache = {\n      setItem: function (key, value) {\n        localStorage.setItem(key, value);\n        index.add(key);\n        return this;\n      },\n\n      // this is async in case the data needs to be compressed\n      getItem: function (key, callback) {\n        var val = localStorage.getItem(key);\n        _.defer(function () {\n          callback(val);\n        });\n      },\n\n      removeItem: function (key) {\n        localStorage.removeItem(key);\n        index.invalidate();\n      }\n    };\n\n    var cached = function (method, model, options) {\n      var url = options.url || getValue(model, 'url') || urlError();\n      var key = namespaceKey + '/' + url;\n\n      if (method === 'read') {\n        var success = options.success;\n        var cachedValue = null;\n\n        options.success = function (resp, status, xhr) {\n          // if cached value is ok\n          if (cachedValue && xhr.responseText === cachedValue) {\n            return;\n          }\n          cache.setItem(key, xhr.responseText);\n          success(resp, status, xhr);\n        };\n\n        cache.getItem(key, function (val) {\n          cachedValue = val;\n          if (val) {\n            success(JSON.parse(val), 'success');\n          }\n        });\n      } else {\n        cache.removeItem(key);\n      }\n      return (sync || Backbone.sync)(method, model, options);\n    };\n\n    // create a public function to invalidate all the namespace\n    // items\n    cached.invalidate = function () {\n      index.invalidate();\n    };\n\n    // for testing and debugging porpuposes\n    cached.cache = cache;\n\n    // have a global namespace -> sync function in order to avoid invalidation\n    Backbone.cachedSync.surrogateKeys[surrogateKey] = cached;\n\n    return cached;\n  };\n\n  Backbone.cachedSync.surrogateKeys = {};\n\n  Backbone.cachedSync.invalidateSurrogateKeys = function (keys) {\n    _.each(keys, function (k) {\n      var s = Backbone.cachedSync.surrogateKeys[k];\n      if (s) {\n        s.invalidate();\n      } else {\n        console.error('Backbone sync options: surrogate key not found: ' + k);\n      }\n    });\n  };\n\n  Backbone.syncAbort = function () {\n    var self = arguments[1];\n    if (self._xhr) {\n      self._xhr.abort();\n    }\n    self._xhr = Backbone.sync.apply(this, arguments);\n    self._xhr.always(function () { self._xhr = null; });\n    return self._xhr;\n  };\n\n  Backbone.delayedSaveSync = function (sync, delay) {\n    var dsync = _.debounce(sync, delay);\n    return function (method, model, options) {\n      if (method === 'create' || method === 'update') {\n        return dsync(method, model, options);\n      } else {\n        return sync(method, model, options);\n      }\n    };\n  };\n\n  Backbone.saveAbort = function () {\n    var self = this;\n    if (this._saving && this._xhr) {\n      this._xhr.abort();\n    }\n    this._saving = true;\n    var xhr = Backbone.Model.prototype.save.apply(this, arguments);\n    this._xhr = xhr;\n    xhr.always(function () { self._saving = false; });\n    return xhr;\n  };\n})();\n","const Backbone = require('backbone');\nconst ImportsCollection = require('dashboard/data/imports-collection');\nconst checkAndBuildOpts = require('builder/helpers/required-opts');\nconst pollingsTimer = 3000;\n\nconst REQUIRED_OPTS = [\n  'userModel',\n  'configModel'\n];\n\n/**\n *  Background polling default model\n *\n */\n\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    showGeocodingDatasetURLButton: false,\n    showSuccessDetailsButton: true,\n    geocodingsPolling: false, // enable geocodings polling\n    importsPolling: false // enable imports polling\n  },\n\n  initialize: function (attributes, options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n\n    this.importsCollection = options.importsCollection || new ImportsCollection(null, {\n      userModel: this._userModel,\n      configModel: this._configModel\n    });\n    this._initBinds();\n    this.startPollings();\n  },\n\n  _initBinds: function () {\n    this.importsCollection.bind('change:state', function (mdl) {\n      this.trigger('change', mdl, this);\n      this._onImportsStateChange(mdl);\n    }, this);\n    this.importsCollection.bind('remove', function (mdl) {\n      this.trigger('importRemoved', mdl, this);\n    }, this);\n    this.importsCollection.bind('add', function (mdl) {\n      this.trigger('importAdded', mdl, this);\n    }, this);\n  },\n\n  // Helper functions\n\n  getTotalFailedItems: function () {\n    return this.importsCollection.failedItems().length;\n  },\n\n  removeImportItem: function (mdl) {\n    if (!mdl) {\n      return false;\n    }\n    this.importsCollection.remove(mdl);\n  },\n\n  addImportItem: function (mdl) {\n    if (!mdl) {\n      return false;\n    }\n    this.importsCollection.add(mdl);\n  },\n\n  canAddImport: function () {\n    return this.importsCollection.canImport();\n  },\n\n  getTotalImports: function () {\n    return this.importsCollection.size();\n  },\n\n  getTotalPollings: function () {\n    return this.importsCollection.size();\n  },\n\n  stopPollings: function () {\n    if (this.get('importsPolling')) {\n      this.importsCollection.destroyCheck();\n    }\n  },\n\n  startPollings: function () {\n    // Don't start pollings inmediately,\n    // wait some seconds\n    setTimeout(() => {\n      if (this.get('importsPolling')) {\n        this.importsCollection.pollCheck();\n      }\n    }, pollingsTimer);\n  },\n\n  // onChange functions\n  _onImportsStateChange: function () {},\n\n  clean: function () {\n    this.importsCollection.unbind(null, null, this);\n    Backbone.Model.prototype.clean.apply(this);\n  }\n\n});\n","const BackgroundPollingModel = require('dashboard/data/background-polling/background-polling-model');\n\n/**\n *  Background polling model for the dashboard context.\n */\nmodule.exports = BackgroundPollingModel.extend({\n\n  _onImportsStateChange: function (importsModel) {\n    if (this._shouldRedirect(importsModel)) {\n      this._redirectTo(importsModel.getRedirectUrl(this._userModel));\n      return;\n    }\n\n    if (importsModel.hasCompleted()) {\n      this.trigger('importCompleted', importsModel, this);\n    }\n  },\n\n  /**\n   * Determines if the user can be redirected after the given\n   * import has been completed. The following conditions must be true:\n   *   - Import has been completed\n   *   - No imports are still running\n   *   - No other imports have been previously completed\n   *   - Import has a redirect URL for the given user\n   *   - Import was NOT a twitter import\n   *   - Number of tables created:\n   *     - n if import was a .carto file\n   *     - 1 otherwise\n   */\n  _shouldRedirect: function (importsModel) {\n    return importsModel.hasCompleted() &&\n      this.importsCollection.allImportsCompletedOrFailed() &&\n      this.importsCollection.getCompletedItemsCount() === 1 &&\n      !importsModel.isTwitterImport() &&\n      importsModel.getRedirectUrl(this._userModel) &&\n      (importsModel.getNumberOfTablesCreated() === 1 ||\n        importsModel.isCartoImport());\n  },\n\n  _redirectTo: function (url) {\n    window.location = url;\n  }\n});\n","var Backbone = require('backbone');\n\n/**\n * Model for general frontend configuration.\n * Ported from old cdb.config, since we can't reuse the older model that's tied to v3 of cartodb.js\n *\n * Also, rather than putting it as a global object, it's intended to be instantiated at the entry point and passed as\n * a collaborator object the models that needs it, e.g.:\n * var myModel = new MyModel({ id: 123,  }, {\n *   configModel: configModel\n * })\n */\nmodule.exports = Backbone.Model.extend({\n\n  VERSION: 2,\n\n  initialize: function () {\n    this.modules = new Backbone.Collection();\n    this.modules.on('add', function (model) {\n      this.trigger('moduleLoaded');\n      this.trigger('moduleLoaded:' + model.get('name'));\n    }, this);\n  },\n\n  // error track\n  REPORT_ERROR_URL: '/api/v0/error',\n  ERROR_TRACK_ENABLED: false,\n\n  /**\n   * returns the base url to compose the final url\n   * http://user.carto.com/\n   */\n  getSqlApiBaseUrl: function () {\n    var url;\n    if (this.get('sql_api_template')) {\n      url = this.get('sql_api_template').replace('{user}', this.get('user_name'));\n    } else {\n      url = this.get('sql_api_protocol') + '://' +\n        this.get('user_name') + '.' +\n        this.get('sql_api_domain') + ':' +\n        this.get('sql_api_port');\n    }\n    return url;\n  },\n\n  /**\n   * returns the full sql api url, including the api endpoint\n   * allos to specify the version\n   * http://user.carto.com/api/v1/sql\n   */\n  getSqlApiUrl: function (version) {\n    version = version || 'v2';\n    return this.getSqlApiBaseUrl() + '/api/' + version + '/sql';\n  },\n\n  /**\n   *  returns the maps api host, removing user template\n   *  and the protocol.\n   *  carto.com:3333\n   */\n  getMapsApiHost: function () {\n    var url;\n    var mapsApiTemplate = this.get('maps_api_template');\n    if (mapsApiTemplate) {\n      url = mapsApiTemplate.replace(/https?:\\/\\/{user}\\./, '');\n    }\n    return url;\n  },\n\n  setUrlVersion: function (modelName, method, v) {\n    this.set(modelName + '_' + method + '_url_version', v || 'v1');\n  },\n\n  urlVersion: function (modelName, method, defaultVersion) {\n    method = method || '';\n    var version = this.get(modelName + '_' + method + '_url_version');\n    return version || defaultVersion || 'v1';\n  },\n\n  prefixUrl: function () {\n    return this.get('url_prefix') || '';\n  },\n\n  prefixUrlPathname: function () {\n    var prefix = this.prefixUrl();\n    if (prefix !== '') {\n      try {\n        if (prefix && prefix.indexOf('/') === -1) throw new TypeError('invalid URL');\n        var a = document.createElement('a');\n        a.href = prefix;\n        var url = a.pathname;\n        // remove trailing slash\n        return url.replace(/\\/$/, '');\n      } catch (e) {\n        // not an url\n      }\n    }\n    return prefix;\n  },\n\n  getMapsResourceName: function (username) {\n    var url;\n    var mapsApiTemplate = this.get('maps_api_template');\n    if (mapsApiTemplate) {\n      url = mapsApiTemplate.replace(/(http|https)?:\\/\\//, '').replace(/{user}/g, username);\n    }\n    return url;\n  },\n\n  dataLibraryEnabled: function () {\n    return this.get('data_library_enabled');\n  },\n\n  isHosted: function () {\n    return this.get('cartodb_com_hosted');\n  }\n});\n","var DashboardVisUrlModel = require('dashboard/data/dashboard-vis-url-model');\n\n/**\n * URL representing dashboard datasets\n */\nvar DashboardDatasetsUrlModel = DashboardVisUrlModel.extend({\n\n  dataLibrary: function () {\n    return this.urlToPath('library');\n  }\n});\n\nmodule.exports = DashboardDatasetsUrlModel;\n","var UrlModel = require('dashboard/data/url-model');\nvar DashboardVisUrlModel = require('dashboard/data/dashboard-vis-url-model');\nvar DashboardDatasetsUrlModel = require('dashboard/data/dashboard-datasets-url-model');\n/**\n * URLs associated with the dashboard.\n */\nvar DashboardUrlModel = UrlModel.extend({\n\n  datasets: function () {\n    return new DashboardDatasetsUrlModel({\n      base_url: this.urlToPath('datasets')\n    });\n  },\n\n  maps: function () {\n    return new DashboardVisUrlModel({\n      base_url: this.urlToPath('maps')\n    });\n  },\n\n  deepInsights: function () {\n    return new DashboardVisUrlModel({\n      base_url: this.urlToPath('deep-insights')\n    });\n  }\n});\n\nmodule.exports = DashboardUrlModel;\n","var UrlModel = require('dashboard/data/url-model');\n\n/**\n * URLs associated with the dashboard visualizations.\n */\nvar DashboardVisUrl = UrlModel.extend({\n  lockedItems: function () {\n    return this.urlToPath('locked');\n  },\n\n  sharedItems: function () {\n    return this.urlToPath('shared');\n  },\n\n  likedItems: function () {\n    return this.urlToPath('liked');\n  }\n});\n\nmodule.exports = DashboardVisUrl;\n","const UrlModel = require('dashboard/data/url-model');\n\n/**\n * URL for a dataset (standard vis).\n */\nconst DatasetUrlModel = UrlModel.extend({\n\n  edit: function () {\n    return this.urlToPath();\n  },\n\n  public: function () {\n    return this.urlToPath('public');\n  }\n});\n\nmodule.exports = DatasetUrlModel;\n","const Backbone = require('backbone');\n\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    msg: '',\n    type: 'error',\n    display: false\n  },\n\n  shouldDisplay: function () {\n    return this.get('display') && !!this.get('msg') && !!this.get('type');\n  },\n\n  show: function (message, type) {\n    return this.set({\n      display: true,\n      msg: message,\n      type: type\n    });\n  },\n\n  hide: function () {\n    this.set('display', false);\n  }\n});\n","const Backbone = require('backbone');\nconst _ = require('underscore');\nconst checkAndBuildOpts = require('builder/helpers/required-opts');\n\nconst UserModel = require('dashboard/data/user-model');\nconst GroupModel = require('dashboard/data/group-model');\n\nconst REQUIRED_OPTS = [\n  'configModel'\n];\n\n/**\n * A collection of Grantable objects.\n */\nmodule.exports = Backbone.Collection.extend({\n\n  model: function (attrs, { collection }) {\n    // This used to be in its own file, but we took the same approach as builder\n\n    // This used to have:\n    // new cdb.admin[className](this.get('model'));\n    // We took grantable_presenter types as the truth.\n\n    const { _configModel: configModel, organization } = collection;\n\n    let model;\n    if (attrs.type === 'user') {\n      model = new UserModel(attrs, { configModel, collection });\n    } else {\n      model = new GroupModel(attrs, { configModel, collection });\n    }\n    model.organization = organization;\n    model.entity = model; // legacy (see grantable.js), left in case someone uses it\n    return model;\n  },\n\n  url: function (method) {\n    var version = this._configModel.urlVersion('organizationGrantables', method);\n    return '/api/' + version + '/organization/' + this.organization.id + '/grantables';\n  },\n\n  initialize: function (users, opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n    if (!opts.organization) throw new Error('organization is required');\n    this.organization = opts.organization;\n    this.currentUserId = opts.currentUserId;\n    this.sync = require('dashboard/data/backbone/sync-abort'); // adds abort behaviour\n  },\n\n  parse: function (response) {\n    this.total_entries = response.total_entries;\n\n    return _.reduce(response.grantables, function (memo, m) {\n      if (m.id === this.currentUserId) {\n        this.total_entries--;\n      } else {\n        memo.push(m);\n      }\n\n      return memo;\n    }, [], this);\n  },\n\n  // @return {Number, undefined} may be undefined until a first fetch is done\n  totalCount: function () {\n    return this.total_entries;\n  }\n\n});\n","var Backbone = require('backbone');\nvar GroupUsersCollection = require('dashboard/data/group-users-collection');\nconst checkAndBuildOpts = require('builder/helpers/required-opts');\n\nconst REQUIRED_OPTS = [\n  'configModel'\n];\n\n/**\n * Model representing a group.\n * Expected to be used in the context of a groups collection (e.g. cdb.admin.OrganizationGroups),\n * which defines its API endpoint path.\n */\nmodule.exports = Backbone.Model.extend({\n  defaults: {\n    display_name: '' // UI name, as given by\n    // name: '', // internal alphanumeric representation, converted from display_name internally\n    // organization_id: '',\n  },\n\n  initialize: function (attrs, options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n    this.parse(attrs || {}); // handle given attrs in the same way as for .fetch()\n  },\n\n  parse: function (attrs, options) {\n    this.users = new GroupUsersCollection(attrs.users, {\n      group: this,\n      configModel: this._configModel\n    });\n    return attrs;\n  },\n\n  getModelType: () => 'group'\n});\n","const _ = require('underscore');\nconst $ = require('jquery');\nconst Backbone = require('backbone');\nconst User = require('dashboard/data/user-model');\nconst checkAndBuildOpts = require('builder/helpers/required-opts');\n\nconst REQUIRED_OPTS = [\n  'configModel'\n];\n\n/**\n * A collection representing a set of users in a group.\n */\nmodule.exports = Backbone.Collection.extend({\n\n  model: User,\n\n  initialize: function (models, opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n    if (!opts.group) throw new Error('group is required');\n    this.group = opts.group;\n  },\n\n  url: function () {\n    return this.group.url.apply(this.group, arguments) + '/users';\n  },\n\n  parse: function (response) {\n    this.total_entries = response.total_entries;\n    this.total_user_entries = response.total_user_entries;\n\n    return response.users;\n  },\n\n  /**\n   * Batch add users\n   * @param {Array} userIds\n   * @return {Object} a deferred jqXHR object\n   */\n  addInBatch: function (userIds, password) {\n    return this._batchAsyncProcessUsers('POST', userIds, password);\n  },\n\n  removeInBatch: function (userIds, password) {\n    var self = this;\n    return this._batchAsyncProcessUsers('DELETE', userIds, password)\n      .done(function () {\n        _.each(userIds, self.remove.bind(self));\n      });\n  },\n\n  _batchAsyncProcessUsers: function (method, ids, password) {\n    var self = this;\n\n    // postpone relving promise since the fetch is requries for collection to have accurate state\n    var deferred = $.Deferred();\n    $.ajax({\n      type: method,\n      url: this._configModel.get('base_url') + this.url(),\n      data: {\n        users: ids,\n        password_confirmation: password\n      },\n      success: function () {\n        var args = arguments;\n\n        // because add/remove don't return any data, so need to fetch to get accurate state\n        self.fetch({\n          success: function () {\n            deferred.resolve.apply(deferred, args);\n          },\n          error: function () {\n            // could not update state, but resolve anyway since batch operation worked\n            // might have inconsistent state though\n            deferred.resolve.apply(deferred, args);\n          }\n        });\n      },\n      error: function () {\n        deferred.reject.apply(deferred, arguments);\n      }\n    });\n\n    return deferred;\n  },\n\n  // @return {Number, undefined} may be undefined until a first fetch is done\n  totalCount: function () {\n    return this.total_user_entries;\n  }\n\n});\n","const Backbone = require('backbone');\n\nmodule.exports = Backbone.Model.extend({\n\n  idAttribute: 'item_queue_id',\n\n  urlRoot: '/api/v1/imports',\n\n  initialize: function () {\n    this.bind('change', this._checkFinish, this);\n  },\n\n  setUrlRoot: function (urlRoot) {\n    this.urlRoot = urlRoot;\n  },\n\n  /**\n   * checks for poll to finish\n   */\n  pollCheck: function (i) {\n    var self = this;\n    this.pollTimer = setInterval(function () {\n      // cdb.log.debug(\"checking job for finish: \" + tries);\n      self.fetch({\n        error: function (e) {\n          self.trigger('change');\n        }\n      });\n    }, i || 1500);\n  },\n\n  destroyCheck: function () {\n    clearInterval(this.pollTimer);\n  },\n\n  _checkFinish: function () {\n    // cdb.log.info(\"state: \" + this.get('state'), \"success: \" + this.get(\"success\"));\n\n    if (this.get('success') === true) {\n      // cdb.log.debug(\"job finished\");\n      clearInterval(this.pollTimer);\n      this.trigger('importComplete', this);\n    } else if (this.get('success') === false) {\n      // cdb.log.debug(\"job failure\");\n      clearInterval(this.pollTimer);\n      this.trigger('importError', this);\n    } else {\n      this.trigger('importChange', this);\n    }\n  }\n});\n","const _ = require('underscore');\nconst Backbone = require('backbone');\nconst ImportsModel = require('dashboard/data/imports-model');\nconst checkAndBuildOpts = require('builder/helpers/required-opts');\nconst pollTimer = 30000;\n\nconst REQUIRED_OPTS = [\n  'configModel',\n  'userModel'\n];\n\n/**\n *  Imports collection\n *\n *  If it is fetched, it will add the import\n *\n */\n\nmodule.exports = Backbone.Collection.extend({\n\n  model: function (attrs, options) {\n    return new ImportsModel(attrs, {\n      userModel: options.collection._userModel,\n      configModel: options.collection._configModel\n    });\n  },\n\n  url: function (method) {\n    const version = this._configModel.urlVersion('import', method);\n    return '/api/' + version + '/imports';\n  },\n\n  initialize: function (models, options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n  },\n\n  parse: function (r) {\n    if (r.imports.length === 0) {\n      this.destroyCheck();\n    } else {\n      _.each(r.imports, id => {\n        // Check if that import exists...\n        var imports = this.filter(mdl => mdl._importModel.get('item_queue_id') === id);\n\n        if (imports.length === 0) {\n          this.add(new ImportsModel({ id: id }, {\n            userModel: this._userModel,\n            configModel: this._configModel\n          }));\n        }\n      });\n    }\n\n    return this.models;\n  },\n\n  canImport: function () {\n    const importQuota = this._userModel.getMaxConcurrentImports();\n    const total = this.size();\n    let finished = 0;\n\n    this.each(function (m) {\n      if (m.hasFailed() || m.hasCompleted()) {\n        ++finished;\n      }\n    });\n\n    return (total - finished) < importQuota;\n  },\n\n  pollCheck: function (i) {\n    if (this.pollTimer) return;\n\n    this.pollTimer = setInterval(() => {\n      this.fetch();\n    }, pollTimer || 2000);\n\n    // Start doing a fetch\n    this.fetch();\n  },\n\n  destroyCheck: function () {\n    clearInterval(this.pollTimer);\n    delete this.pollTimer;\n  },\n\n  completedItems: function () {\n    return this.filter(function (item) {\n      return item.hasCompleted();\n    });\n  },\n\n  getCompletedItemsCount: function () {\n    return this.completedItems().length;\n  },\n\n  failedItems: function () {\n    return this.filter(function (item) {\n      return item.hasFailed();\n    });\n  },\n\n  getFailedItemsCount: function () {\n    return this.failedItems().length;\n  },\n\n  allImportsCompletedOrFailed: function () {\n    return this.all(function (item) {\n      return item.hasCompleted() ||\n        item.hasFailed();\n    });\n  }\n});\n","// TODO: Hacer un extend del archivo de builder\nvar _ = require('underscore');\nvar Backbone = require('backbone');\nvar ImportModel = require('builder/data/background-importer/import-model');\nvar UploadModel = require('dashboard/data/upload-model');\nvar VisualizationModel = require('dashboard/data/visualization-model');\nvar PermissionModel = require('dashboard/data/permission-model');\n\n/**\n *  Upload/import model\n *\n *  It takes the control of the upload and import,\n *  listening the change of any of these steps.\n *\n *  Steps:\n *  - upload\n *  - import\n *\n */\n\nmodule.exports = Backbone.Model.extend({\n\n  defaults: {\n    step: 'upload',\n    state: ''\n  },\n\n  initialize: function (attrs, opts) {\n    if (!opts.userModel) throw new Error('userModel is required');\n    if (!opts.configModel) throw new Error('configModel is required');\n\n    this._userModel = opts.userModel;\n    this._configModel = opts.configModel;\n\n    this._uploadModel = new UploadModel(opts.upload, {\n      userModel: this._userModel,\n      configModel: this._configModel\n    });\n\n    if (_.isEmpty(opts)) {\n      opts = {};\n    }\n\n    this._importModel = new ImportModel(opts.import, {\n      configModel: this._configModel\n    });\n    this._initBinds();\n    this._checkStatus();\n  },\n\n  _initBinds: function () {\n    this.bind('change:import', this._onImportChange, this);\n    this.bind('change:upload', this._onUploadChange, this);\n    this.bind('change:id', this._onIdChange, this);\n\n    this._importModel.bind('change', function () {\n      this.trigger('change:import', this);\n      this.trigger('change', this);\n    }, this);\n\n    this._uploadModel.bind('change', function () {\n      this.trigger('change:upload', this);\n      this.trigger('change', this);\n    }, this);\n  },\n\n  _destroyBinds: function () {\n    this._uploadModel.unbind(null, null, this);\n    this._importModel.unbind(null, null, this);\n  },\n\n  _onIdChange: function () {\n    var item_queue_id = this.get('id');\n    if (item_queue_id) this._importModel.set('item_queue_id', item_queue_id);\n    this.set('step', 'import');\n  },\n\n  _onUploadChange: function (m, i) {\n    if (this.get('step') === 'upload') {\n      var item_queue_id = this._uploadModel.get('item_queue_id');\n      var state = this._uploadModel.get('state');\n\n      if (item_queue_id) this.set('id', item_queue_id);\n      if (state) this.set('state', state);\n    }\n  },\n\n  _onImportChange: function () {\n    if (this.get('step') === 'import') {\n      var state = this._importModel.get('state');\n      if (state) this.set('state', state);\n    }\n  },\n\n  _checkStatus: function () {\n    if (!this.get('id') && !this._uploadModel.isValid()) {\n      this.trigger('change:upload');\n      return;\n    }\n\n    if (this._uploadModel.get('type') === 'file') {\n      this._uploadModel.upload();\n    } else if (this.get('id')) {\n      this.set('step', 'import');\n      this._importModel.set('item_queue_id', this.get('id'));\n    } else if (!this._importModel.get('item_queue_id') && this._uploadModel.get('type') !== '') {\n      this.set('step', 'import');\n      this._importModel.createImport(this._uploadModel.toJSON());\n    }\n  },\n\n  getImportModel: function () {\n    return this._importModel;\n  },\n\n  pause: function () {\n    this.stopUpload();\n    this.stopImport();\n  },\n\n  hasFailed: function () {\n    var state = this.get('state');\n    var step = this.get('step');\n\n    return (step === 'import' && state === 'failure') || (step === 'upload' && state === 'error');\n  },\n\n  hasCompleted: function () {\n    return this.get('step') === 'import' && this._importModel && this._importModel.get('state') === 'complete';\n  },\n\n  getWarnings: function () {\n    return this.get('step') === 'import' ? this._importModel.get('warnings') : '';\n  },\n\n  getError: function () {\n    if (this.hasFailed()) {\n      var step = this.get('step');\n      return _.extend(\n        {\n          errorCode: this[step === 'upload' ? '_uploadModel' : '_importModel'].get('error_code'),\n          itemQueueId: step === 'import' ? this._importModel.get('id') : '',\n          originalUrl: step === 'import' ? this._importModel.get('original_url') : '',\n          dataType: step === 'import' ? this._importModel.get('data_type') : '',\n          httpResponseCode: step === 'import' ? this._importModel.get('http_response_code') : '',\n          httpResponseCodeMessage: step === 'import' ? this._importModel.get('http_response_code_message') : ''\n        },\n        this[step === 'upload' ? '_uploadModel' : '_importModel'].get('get_error_text'));\n    }\n\n    return {\n      title: '',\n      what_about: '',\n      error_code: ''\n    };\n  },\n\n  importedVis: function () {\n    if (this.get('import').derived_visualization_id) {\n      return this._getMapVis();\n    } else {\n      return this._getDatasetVis();\n    }\n  },\n\n  getNumberOfTablesCreated: function () {\n    return this._importModel.get('tables_created_count');\n  },\n\n  _getServiceName: function () {\n    return this._importModel.get('service_name');\n  },\n\n  isTwitterImport: function () {\n    return this._getServiceName() === 'twitter_search';\n  },\n\n  isCartoImport: function () {\n    return this._getDisplayName() && this._getDisplayName().match(/\\.carto$/i);\n  },\n\n  _getDisplayName: function () {\n    return this._importModel.get('display_name');\n  },\n\n  _getMapVis: function () {\n    var derivedVisId = this._importModel.get('derived_visualization_id');\n\n    if (!derivedVisId) {\n      return false;\n    }\n\n    return this._createVis({\n      type: 'derived',\n      id: derivedVisId\n    });\n  },\n\n  _getDatasetVis: function () {\n    var tableName = this._importModel.get('table_name');\n\n    if (!tableName) {\n      return false;\n    }\n\n    return this._createVis({\n      type: 'table',\n      table: {\n        name: tableName\n      }\n    });\n  },\n\n  _createVis: function (attrs) {\n    var vis = new VisualizationModel(attrs, {\n      configModel: this._configModel\n    });\n\n    vis.permission = new PermissionModel({\n      owner: this._userModel.attributes\n    }, {\n      configModel: this._configModel,\n      userModel: this._userModel\n    });\n\n    return vis;\n  },\n\n  setError: function (opts) {\n    var stepModel = this[this.get('step') === 'upload' ? '_uploadModel' : '_importModel'];\n\n    this.stopUpload();\n    this.stopImport();\n\n    stepModel.set(opts);\n\n    this.set('state', 'error');\n  },\n\n  stopUpload: function () {\n    this._uploadModel.stopUpload();\n  },\n\n  stopImport: function () {\n    this._importModel.destroyCheck();\n  },\n\n  get: function (attr) {\n    if (attr === 'upload') {\n      return this._uploadModel.toJSON();\n    }\n\n    if (attr === 'import') {\n      return this._importModel.toJSON();\n    }\n\n    return Backbone.Model.prototype.get.call(this, attr);\n  },\n\n  getRedirectUrl: function (user) {\n    var vis = this.importedVis();\n    if (vis) {\n      return encodeURI(vis.viewUrl(user).edit());\n    }\n  },\n\n  toJSON: function () {\n    return {\n      step: this.get('step'),\n      id: this.get('id'),\n      state: this.get('state'),\n      upload: this._uploadModel.toJSON(),\n      import: this._importModel.toJSON()\n    };\n  }\n});\n","const Backbone = require('backbone');\nconst MapLayer = require('dashboard/data/map-layer-model');\nconst checkAndBuildOpts = require('builder/helpers/required-opts');\n\nconst TILED_LAYER_TYPE = 'Tiled';\nconst CARTODB_LAYER_TYPE = 'CartoDB';\nconst TORQUE_LAYER_TYPE = 'torque';\n\nconst REQUIRED_OPTS = [\n  'configModel'\n];\n\nconst LayersCollection = Backbone.Collection.extend({\n  model: MapLayer,\n\n  initialize: function (models, options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n\n    this.comparator = function (m) {\n      return parseInt(m.get('order'), 10);\n    };\n    this.bind('add', this._assignIndexes);\n    this.bind('remove', this._assignIndexes);\n  },\n\n  url: function (method) {\n    var version = this._configModel.urlVersion('layer', method);\n    return `/api/${version}/maps/${this.map.id}/layers`;\n  },\n\n  parse: function (data) {\n    return data.layers;\n  },\n\n  /**\n   * each time a layer is added or removed\n   * the index should be recalculated\n   */\n  _assignIndexes: function (model, col, options) {\n    if (this.size() > 0) {\n      // Assign an order of 0 to the first layer\n      this.at(0).set({ order: 0 });\n\n      if (this.size() > 1) {\n        var layersByType = {};\n        for (var i = 1; i < this.size(); ++i) {\n          var layer = this.at(i);\n          var layerType = layer.get('type');\n          layersByType[layerType] = layersByType[layerType] || [];\n          layersByType[layerType].push(layer);\n        }\n\n        var lastOrder = 0;\n        var sortedTypes = [CARTODB_LAYER_TYPE, TORQUE_LAYER_TYPE, TILED_LAYER_TYPE];\n        for (var index = 0; index < sortedTypes.length; ++index) {\n          var type = sortedTypes[index];\n          var layers = layersByType[type] || [];\n          for (var j = 0; j < layers.length; ++j) {\n            var layerModel = layers[j];\n            layerModel.set({\n              order: ++lastOrder\n            });\n          }\n        }\n      }\n    }\n  }\n});\n\nmodule.exports = LayersCollection;\n","var Backbone = require('backbone');\nvar _ = require('underscore');\nconst checkAndBuildOpts = require('builder/helpers/required-opts');\n\nconst REQUIRED_OPTS = [\n  'config'\n];\n\nvar LikeModel = Backbone.Model.extend({\n\n  defaults: {\n    likeable: true\n  },\n\n  url: function (method) {\n    var version = this._config.urlVersion('like', method);\n    return `${this._config.get('base_url')}/api/${version}/viz/${this.get('vis_id')}/like`;\n  },\n\n  initialize: function (attrs, options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n\n    _.bindAll(this, '_onSaveError');\n\n    this.on('destroy', function () {\n      this.set({\n        liked: false,\n        likes: this.get('likes') - 1\n      });\n    }, this);\n  },\n\n  _onSaveError: function (model, response) {\n    this.trigger('error', {\n      status: response.status,\n      statusText: response.statusText\n    });\n  },\n\n  toggleLiked: function () {\n    if (this.get('liked')) {\n      this.destroy();\n    } else {\n      this.set({ id: null }, { silent: true });\n      this.save({}, { error: this._onSaveError });\n    }\n  }\n\n}, {\n\n  newByVisData: function (opts) {\n    var d = _.defaults({\n      id: opts.liked ? opts.vis_id : null\n    }, _.omit(opts, 'url', 'config'));\n\n    var model = new LikeModel(d, {\n      config: opts.config\n    });\n\n    if (opts.url) {\n      model.url = opts.url;\n    }\n\n    return model;\n  }\n});\n\nmodule.exports = LikeModel;\n","const Backbone = require('backbone');\n\nconst MapLayer = Backbone.Model.extend({\n  defaults: {\n    visible: true,\n    type: 'Tiled'\n  }\n});\n\nmodule.exports = MapLayer;\n","const Backbone = require('backbone');\nconst LayersCollection = require('dashboard/data/layers-collection');\nconst checkAndBuildOpts = require('builder/helpers/required-opts');\n\nconst REQUIRED_OPTS = [\n  'configModel'\n];\n\nconst MapModel = Backbone.Model.extend({\n  urlRoot: '/api/v1/maps',\n\n  initialize: function (options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n    this.bind('change:id', this._fetchLayers, this);\n\n    this.layers = new LayersCollection(null, { configModel: this._configModel });\n    this.layers.map = this;\n  },\n\n  // fetch related layers\n  _fetchLayers: function () {\n    this.layers.fetch();\n  }\n});\n\nmodule.exports = MapModel;\n","const UrlModel = require('dashboard/data/url-model');\n\n/**\n * URL for a map (derived vis).\n */\nconst MapUrlModel = UrlModel.extend({\n\n  edit: function () {\n    return this.urlToPath('map');\n  },\n\n  public: function () {\n    return this.urlToPath('public_map');\n  },\n\n  deepInsights: function () {\n    return this.urlToPath('deep-insights');\n  }\n});\n\nmodule.exports = MapUrlModel;\n","const Backbone = require('backbone');\nconst GroupModel = require('dashboard/data/group-model');\nconst checkAndBuildOpts = require('builder/helpers/required-opts');\n\nconst REQUIRED_OPTS = [\n  'configModel'\n];\n\n/**\n * A collection that holds a set of organization groups\n */\nmodule.exports = Backbone.Collection.extend({\n\n  model: function (attrs, { collection }) {\n    return new GroupModel(attrs, {\n      collection,\n      configModel: collection._configModel\n    });\n  },\n\n  url: function (method) {\n    var version = this._configModel.urlVersion('organizationGroups', method);\n    return '/api/' + version + '/organization/' + this.organization.id + '/groups';\n  },\n\n  initialize: function (models, opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n    if (!opts.organization) throw new Error('organization is required');\n    this.organization = opts.organization;\n  },\n\n  parse: function (response) {\n    this.total_entries = response.total_entries;\n    return response.groups;\n  },\n\n  // @return {Object} A instance of cdb.admin.Group. If group wasn't already present a new model with id and collection\n  //  set will be returned, i.e. group.fetch() will be required to get the data or handle the err case (e.g. non-existing)\n  newGroupById: function (id) {\n    var group = this.get(id);\n    if (!group) {\n      group = new GroupModel({\n        id: id\n      }, { configModel: this._configModel, collection: this });\n    }\n    return group;\n  },\n\n  // @return {Number, undefined} may be undefined until a first fetch is done\n  totalCount: function () {\n    return this.total_entries;\n  }\n\n});\n","const _ = require('underscore');\nconst Backbone = require('backbone');\nconst OrganizationUsersCollection = require('dashboard/data/organization-users-collection');\nconst GrantablesCollection = require('dashboard/data/grantables-collection');\nconst OrganizationGroupsCollection = require('dashboard/data/organization-groups-collection');\nconst OrganizationUrl = require('dashboard/data/organization-url-model');\nconst UserModel = require('dashboard/data/user-model');\nconst checkAndBuildOpts = require('builder/helpers/required-opts');\n\nconst REQUIRED_OPTS = [\n  'configModel'\n];\n\n/**\n * this model contains information about the organization for\n * the current user and the users who are inside the organizacion.\n *\n * Attributes:\n * - users: collection with user instances within the organization (see cdb.admin.Organization.Users\n */\nmodule.exports = Backbone.Model.extend({\n\n  url: '/api/v1/org/',\n\n  initialize: function (attrs, opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n    attrs = attrs || {};\n\n    this.owner = new UserModel(this.get('owner'));\n\n    // ESlint errors on the below line ported as they were (== instead of ===)\n    this.display_email = (typeof attrs.admin_email !== 'undefined') && attrs.admin_email != null && (attrs.admin_email == '' ? this.owner.email : attrs.admin_email); // eslint-disable-line\n\n    var collectionOpts = {\n      organization: this,\n      currentUserId: opts && opts.currentUserId,\n      configModel: this._configModel\n    };\n    this.users = new OrganizationUsersCollection(attrs.users, collectionOpts);\n    this.groups = new OrganizationGroupsCollection(attrs.groups, collectionOpts);\n    this.grantables = new GrantablesCollection(undefined, collectionOpts);\n\n    // make sure all the users/groups have a reference to this organization\n    this.users.each(this._setOrganizationOnModel, this);\n    this.groups.each(this._setOrganizationOnModel, this);\n  },\n\n  _setOrganizationOnModel: function (m) {\n    m.organization = this;\n  },\n\n  fetch: function () {\n    throw new Error('organization should not be fetch, should be static');\n  },\n\n  containsUser: function (user) {\n    return !!this.users.find(function (u) {\n      return u.id === user.id;\n    });\n  },\n\n  isOrgAdmin: function (user) {\n    return this.owner.id === user.id || !!_.find(this.get('admins'), function (u) {\n      return u.id === user.id;\n    });\n  },\n\n  viewUrl: function () {\n    return new OrganizationUrl({\n      base_url: this.get('base_url')\n    });\n  },\n\n  getModelType: () => 'org'\n\n});\n","var UrlModel = require('dashboard/data/url-model');\n\n/**\n * URL for a map (derived vis).\n */\nvar OrganizationUrlModel = UrlModel.extend({\n  edit: function (user) {\n    if (!user) {\n      throw new Error('User is needed to create the url');\n    }\n    return this.urlToPath(user.get('username') + '/edit');\n  },\n\n  create: function () {\n    return this.urlToPath('new');\n  },\n\n  groups: function () {\n    return this.urlToPath('groups');\n  }\n});\n\nmodule.exports = OrganizationUrlModel;\n","const _ = require('underscore');\nconst Backbone = require('backbone');\nconst UserModel = require('dashboard/data/user-model');\nconst checkAndBuildOpts = require('builder/helpers/required-opts');\n\nconst REQUIRED_OPTS = [\n  'organization',\n  'configModel'\n];\n\n// helper to manage organization users\nmodule.exports = Backbone.Collection.extend({\n  model: UserModel,\n\n  _DEFAULT_EXCLUDE_CURRENT_USER: true,\n\n  url: function () {\n    return '/api/v1/organization/' + this.organization.id + '/users';\n  },\n\n  initialize: function (models, options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n\n    this.organization = this._organization;\n    this.currentUserId = options.currentUserId;\n    this._excludeCurrentUser = this._DEFAULT_EXCLUDE_CURRENT_USER;\n  },\n\n  comparator: function (model) {\n    return model.get('username');\n  },\n\n  excludeCurrentUser: function (exclude) {\n    exclude = !!exclude;\n    this._excludeCurrentUser = exclude;\n    if (exclude && !this.currentUserId) {\n      console.error('set excludeCurrentUser to true, but there is no current user id set to exclude!');\n    }\n  },\n\n  restoreExcludeCurrentUser: function () {\n    this.excludeCurrentUser(this._DEFAULT_EXCLUDE_CURRENT_USER);\n  },\n\n  parse: function (r) {\n    this.total_entries = r.total_entries;\n    this.total_user_entries = r.total_user_entries;\n\n    return _.reduce(r.users, function (memo, user) {\n      if (this._excludeCurrentUser && user.id === this.currentUserId) {\n        this.total_user_entries--;\n        this.total_entries--;\n      } else {\n        memo.push(user);\n      }\n      return memo;\n    }, [], this);\n  },\n\n  // @return {Number, undefined} may be undefined until a first fetch is done\n  totalCount: function () {\n    return this.total_user_entries;\n  }\n});\n","const _ = require('underscore');\nconst result = require('builder/helpers/utils').result;\nconst Backbone = require('backbone');\nconst UserModel = require('dashboard/data/user-model');\nconst OrganizationModel = require('dashboard/data/organization-model');\nconst GroupModel = require('dashboard/data/group-model');\nconst checkAndBuildOpts = require('builder/helpers/required-opts');\n\n// Nobody else uses this, and it would incur on a circular dependency if moved to a file\nconst ACLItemModel = Backbone.Model.extend({\n  defaults: {\n    access: 'r'\n  },\n\n  isOwn: function (model) {\n    return model.id === this.get('entity').id;\n  },\n\n  validate: function (attrs, options) {\n    var p = PermissionModel;\n    if (attrs.access !== p.READ_ONLY && attrs.access !== p.READ_WRITE) {\n      return \"access can't take 'r' or 'rw' values\";\n    }\n  },\n\n  toJSON: function () {\n    var entity = _.pick(this.get('entity').toJSON(), 'id', 'username', 'avatar_url', 'name');\n    // translate name to username\n    if (!entity.username) {\n      entity.username = entity.name;\n      delete entity.name;\n    }\n    return {\n      type: this.get('type') || 'user',\n      entity: entity,\n      access: this.get('access')\n    };\n  }\n});\n\nconst REQUIRED_OPTS = [\n  'configModel'\n];\n\n/**\n * manages a cartodb permission object, it contains:\n * - owner: an cdb.admin.User instance\n * - acl: a collection which includes the user and their permission.\n *\n *   see https://github.com/Vizzuality/cartodb-management/wiki/multiuser-REST-API#permissions-object\n *\n *   this object is not created to work alone, it should be a member of an object like visualization\n *   table\n */\nconst PermissionModel = Backbone.Model.extend({\n  urlRoot: '/api/v1/perm',\n\n  initialize: function (attrs, options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n    this.acl = new Backbone.Collection();\n    this.owner = null;\n    this._generateOwner();\n    this._generateAcl();\n    this.bind('change:owner', this._generateOwner, this);\n    this.bind('change:acl', this._generateAcl, this);\n  },\n\n  _generateOwner: function () {\n    if (!this.owner) {\n      this.owner = new UserModel(undefined, { configModel: this._configModel });\n    }\n    this.owner.set(this.get('owner'));\n  },\n\n  _generateAcl: function () {\n    this.acl.reset([], { silent: true });\n    _.each(this.get('acl'), function (aclItem) {\n      var model;\n      switch (aclItem.type) {\n        case 'user':\n          model = new UserModel(aclItem.entity, { configModel: this._configModel });\n          break;\n        case 'org':\n          model = new OrganizationModel(aclItem.entity, { configModel: this._configModel });\n          break;\n        case 'group':\n          model = new GroupModel(aclItem.entity, { configModel: this._configModel });\n          break;\n        default:\n          throw new Error('Unknown ACL item type: ' + aclItem.type);\n      }\n      this._grantAccess(model, aclItem.access);\n    }, this);\n  },\n\n  cleanPermissions: function () {\n    this.acl.reset();\n  },\n\n  hasAccess: function (model) {\n    // Having at least read access is the same as having any access\n    return this.hasReadAccess(model);\n  },\n\n  hasReadAccess: function (model) {\n    // If there is a representable ACL item it must be one of at least READ_ONLY access\n    return !!this.findRepresentableAclItem(model);\n  },\n\n  hasWriteAccess: function (model) {\n    var access = result(this.findRepresentableAclItem(model), 'get', 'access');\n    return access === PermissionModel.READ_WRITE;\n  },\n\n  canChangeReadAccess: function (model) {\n    return this._canChangeAccess(model);\n  },\n\n  canChangeWriteAccess: function (model) {\n    return (!model.isBuilder || model.isBuilder()) && this._canChangeAccess(model, function (representableAclItem) {\n      return result(representableAclItem, 'get', 'access') !== PermissionModel.READ_WRITE;\n    });\n  },\n\n  _canChangeAccess: function (model) {\n    var representableAclItem = this.findRepresentableAclItem(model);\n    return this.isOwner(model) || !representableAclItem ||\n      representableAclItem === this._ownAclItem(model) || result(arguments, 1, representableAclItem) || false;\n  },\n\n  grantWriteAccess: function (model) {\n    this._grantAccess(model, this.constructor.READ_WRITE);\n  },\n\n  grantReadAccess: function (model) {\n    this._grantAccess(model, this.constructor.READ_ONLY);\n  },\n\n  revokeWriteAccess: function (model) {\n    // Effectively \"downgrades\" to READ_ONLY\n    this.grantReadAccess(model);\n  },\n\n  /**\n   * Revokes access to a set of items\n   * @param {Object} model A single model or an array of models\n   */\n  revokeAccess: function (model) {\n    var aclItem = this._ownAclItem(model);\n    if (aclItem) {\n      this.acl.remove(aclItem);\n    }\n  },\n\n  getOwner: function () {\n    return this.owner;\n  },\n\n  isOwner: function (model) {\n    return _.result(this.owner, 'id') === _.result(model, 'id');\n  },\n\n  toJSON: function () {\n    return {\n      entity: this.get('entity'),\n      acl: this.acl.toJSON()\n    };\n  },\n\n  getUsersWithAnyPermission: function () {\n    return this.acl.chain()\n      .filter(this._hasTypeUser)\n      .map(this._getEntity)\n      .value();\n  },\n\n  isSharedWithOrganization: function () {\n    return this.acl.any(this._hasTypeOrg);\n  },\n\n  clone: function () {\n    var attrs = _.clone(this.attributes);\n    delete attrs.id;\n    return new PermissionModel(attrs, { configModel: this._configModel });\n  },\n\n  /**\n   * Overwrite this ACL list from other permission object\n   * @param otherPermission {Object} instance of PermissionModel\n   */\n  overwriteAcl: function (otherPermission) {\n    this.acl.reset(otherPermission.acl.models);\n  },\n\n  // Note that this may return an inherited ACL item\n  // use ._ownAclItem instead if only model's own is wanted (if there is any)\n  findRepresentableAclItem: function (model) {\n    if (this.isOwner(model)) {\n      return this._newAclItem(model, this.constructor.READ_WRITE);\n    } else {\n      var checkList = ['_ownAclItem', '_organizationAclItem', '_mostPrivilegedGroupAclItem'];\n      return this._findMostPrivilegedAclItem(checkList, function (fnName) {\n        return this[fnName](model);\n      });\n    }\n  },\n\n  _hasTypeUser: function (m) {\n    return m.get('type') === 'user';\n  },\n\n  _getEntity: function (m) {\n    return m.get('entity');\n  },\n\n  _hasTypeOrg: function (m) {\n    return m.get('type') === 'org';\n  },\n\n  _isOrganization: function (object) {\n    return object instanceof OrganizationModel;\n  },\n\n  _ownAclItem: function (model) {\n    if (!model || !_.isFunction(model.isNew)) {\n      console.error('model is required to find an ACL item');\n    }\n    if (!model.isNew()) {\n      return this.acl.find(function (aclItem) {\n        return aclItem.get('entity').id === model.id;\n      });\n    }\n  },\n\n  _organizationAclItem: function (m) {\n    var org = _.result(m.collection, 'organization') || m.organization;\n    if (org) {\n      return this._ownAclItem(org);\n    }\n  },\n\n  _mostPrivilegedGroupAclItem: function (m) {\n    var groups = _.result(m.groups, 'models');\n    if (groups) {\n      return this._findMostPrivilegedAclItem(groups, this._ownAclItem);\n    }\n  },\n\n  /**\n   * Iterates over a items in given list using the iteratee, stops and returns when found the ACL item with best access (i.e. READ_WRITE), or the\n   * list is completed.\n   * @param {Array} list\n   * @param {Function} iteratee that takes an item from list and returns an access\n   *   iteratee is called in context of this model.\n   * @Return {String} 'r', 'rw', or undefined if there were no access for given item\n   */\n  _findMostPrivilegedAclItem: function (list, iteratee) {\n    var aclItem;\n    for (var i = 0, x = list[i]; x && result(aclItem, 'get', 'access') !== PermissionModel.READ_WRITE; x = list[++i]) {\n      // Keep last ACL item if iteratee returns nothing\n      aclItem = iteratee.call(this, x) || aclItem;\n    }\n    return aclItem;\n  },\n\n  /**\n   * Grants access to a set of items\n   * @param {Object} model\n   * @param {String} access can take the following values:\n   * - 'r': read only\n   * - 'rw': read and write permission\n   */\n  _grantAccess: function (model, access) {\n    var aclItem = this._ownAclItem(model);\n    if (aclItem) {\n      aclItem.set('access', access);\n    } else {\n      aclItem = this._newAclItem(model, access);\n      if (aclItem.isValid()) {\n        this.acl.add(aclItem);\n      } else {\n        throw new Error(access + ' is not a valid ACL access');\n      }\n    }\n  },\n\n  _newAclItem: function (model, access) {\n    const type = model.get('type') || model.getModelType();\n\n    return new ACLItemModel({\n      type: type,\n      entity: model,\n      access: access\n    });\n  }\n\n}, {\n\n  READ_ONLY: 'r',\n  READ_WRITE: 'rw'\n\n});\n\nmodule.exports = PermissionModel;\n","const Backbone = require('backbone');\n\n// TODO: Maybe this file is unnecessary\n\nconst SlideTransition = Backbone.Model.extend({\n  defaults: {\n    time: 0\n  }\n});\n\nmodule.exports = SlideTransition;\n","const _ = require('underscore');\nconst $ = require('jquery');\nconst Backbone = require('backbone');\nconst checkAndBuildOpts = require('builder/helpers/required-opts');\n\nconst REQUIRED_OPTS = [\n  'configModel'\n];\n\n/**\n *  Synced table model\n */\n\nmodule.exports = Backbone.Model.extend({\n  _X: 1.2, // Multiply current interval for this number\n  _INTERVAL: 1500, // Interval time between poll checkings\n  _STATES: ['created', 'failure', 'success', 'syncing', 'queued'],\n\n  defaults: {\n    name: '',\n    url: '',\n    state: '',\n    run_at: 0,\n    ran_at: 0,\n    retried_times: 0,\n    interval: 0,\n    error_code: 0,\n    error_message: '',\n    service_name: '',\n    service_item_id: '',\n    content_guessing: true,\n    type_guessing: true\n  },\n\n  url: function (method) {\n    var version = this._configModel.urlVersion('synchronization', method);\n\n    var base = '/api/' + version + '/synchronizations/';\n    if (this.isNew()) {\n      return base;\n    }\n    return base + this.id;\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n    this.bind('destroy', function () {\n      this.unset('id');\n    });\n  },\n\n  toJSON: function () {\n    var c = _.clone(this.attributes);\n\n    var d = {\n      url: c.url,\n      interval: c.interval,\n      content_guessing: c.content_guessing,\n      type_guessing: c.type_guessing,\n      create_vis: c.create_vis\n    };\n\n    if (c.type === 'remote') {\n      _.extend(d, {\n        remote_visualization_id: c.remote_visualization_id,\n        create_vis: false,\n        value: c.value\n      });\n    }\n\n    if (c.id !== undefined) {\n      d.id = c.id;\n    }\n\n    // Comes from a service?\n    if (c.service_name) {\n      d.service_name = c.service_name;\n      d.service_item_id = c.service_item_id;\n    }\n\n    return d;\n  },\n\n  syncNow: function (callback) {\n    $.ajax({\n      url: this._configModel.prefixUrl() + this.url() + '/sync_now',\n      type: 'PUT'\n    }).always(callback);\n  },\n\n  // Checks for poll to finish\n  pollCheck: function (i) {\n    var self = this;\n    var interval = this._INTERVAL;\n\n    this.pollTimer = setInterval(request, interval);\n\n    function request () {\n      self.destroyCheck();\n\n      self.fetch({\n        error: function (m, e) {\n          self.set({\n            error_message: e.statusText || '',\n            state: 'failure'\n          });\n        }\n      });\n\n      interval = interval * self._X;\n\n      self.pollTimer = setInterval(request, interval);\n    }\n  },\n\n  destroyCheck: function () {\n    clearInterval(this.pollTimer);\n  },\n\n  isSync: function () {\n    return !this.isNew();\n  },\n\n  linkToTable: function (table) {\n    var self = this;\n    if (table.has('synchronization')) {\n      this.set(table.get('synchronization'));\n    }\n\n    table.bind('change:synchronization', function () {\n      self.set(table.get('synchronization'));\n    }, table);\n\n    table.bind('destroy', function destroy () {\n      self.unbind(null, null, table);\n      self.destroy();\n    }, table);\n    // TODO: manage table renaming\n  }\n\n});\n","const $ = require('jquery');\nconst Backbone = require('backbone');\nconst _ = require('underscore');\nconst TableDataCollection = require('dashboard/data/table/table-data-collection');\nconst RowModel = require('dashboard/data/table/row-model');\nconst checkAndBuildOpts = require('builder/helpers/required-opts');\nconst WKT = require('dashboard/common/wkt');\nconst safeTableNameQuoting = require('dashboard/helpers/safe-table-name-quoting');\nconst cartoMetadataStatic = require('dashboard/views/public-dataset/carto-table-metadata-static');\n\nconst REQUIRED_OPTS = [\n  'configModel'\n];\n\nmodule.exports = TableDataCollection.extend({\n  _ADDED_ROW_TEXT: 'Row added correctly',\n  _ADDING_ROW_TEXT: 'Adding a new row',\n  _GEOMETRY_UPDATED: 'Table geometry updated',\n\n  model: function (attrs, opts) {\n    var configModel = opts.collection._configModel;\n    return new RowModel(attrs, {\n      configModel,\n      // TODO: Check this\n      collection: opts.collection\n    });\n  },\n\n  initialize: function (models, options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n    this.table = options ? options.table : null;\n    this.model.prototype.idAttribute = 'cartodb_id';\n    this.initOptions();\n    this.filter = null;\n    this._fetching = false;\n    this.pages = [];\n    this.lastPage = false;\n    this.bind('newPage', this.newPage, this);\n    this.bind('reset', function () {\n      var pages = Math.floor(this.size() / this.options.get('rows_per_page'));\n      this.pages = [];\n\n      for (var i = 0; i < pages; ++i) {\n        this.pages.push(i);\n      }\n    }, this);\n\n    if (this.table) {\n      this.bind('add change:the_geom', function (row) {\n        var gt = this.table.get('geometry_types');\n        if (gt && gt.length > 0) return;\n        if (row.get('the_geom')) {\n          // we set it to silent because a change in geometry_types\n          // raises rendering and column feching\n          this.table.addGeomColumnType(row.getGeomType());\n        }\n      }, this);\n    }\n    TableDataCollection.prototype.initialize.call(this);\n  },\n\n  initOptions: function () {\n    this.options = new Backbone.Model({\n      rows_per_page: 40,\n      page: 0,\n      sort_order: 'asc',\n      order_by: 'cartodb_id',\n      filter_column: '',\n      filter_value: ''\n    });\n    this.options.bind('change', () => {\n      if (this._fetching) {\n        return;\n      }\n      this._fetching = true;\n      var opt = {};\n      var previous = this.options.previous('page');\n\n      if (this.options.hasChanged('page')) {\n        opt.add = true;\n        opt.changingPage = true;\n        // if user is going backwards insert new rows at the top\n        if (previous > this.options.get('page')) {\n          opt.at = 0;\n        }\n      } else {\n        if (this.options.hasChanged('mode')) {\n          this.options.set({\n            'page': 0\n          }, { silent: true });\n        }\n      }\n\n      opt.success = (_coll, resp) => {\n        this.trigger('loaded');\n        if (resp.rows && resp.rows.length !== 0) {\n          if (opt.changingPage) {\n            this.trigger('newPage', this.options.get('page'), opt.at === 0 ? 'up' : 'down');\n          }\n        } else {\n          // no data so do not change the page\n          this.options.set({page: previous});//, { silent: true });\n        }\n        this.trigger('endLoadingRows', this.options.get('page'), opt.at === 0 ? 'up' : 'down');\n        this._fetching = false;\n      };\n\n      opt.error = () => {\n        console.error('there was some problem fetching rows');\n        this.trigger('endLoadingRows');\n        this._fetching = false;\n      };\n\n      this.trigger('loadingRows', opt.at === 0 ? 'up' : 'down');\n\n      this.fetch(opt);\n    }, this);\n  },\n\n  parse: function (d) {\n    // when the query modifies the data modified flag is true\n    // TODO: change this when SQL API was able to say if a\n    // query modify some data\n    // HACK, it will fail if using returning sql statement\n    this.modify_rows = d.rows.length === 0 && _.size(d.fields) === 0;\n    this.affected_rows = d.affected_rows;\n    this.lastPage = false;\n    if (d.rows.length < this.options.get('rows_per_page')) {\n      this.lastPage = true;\n    }\n    return d.rows;\n  },\n\n  // given fields array as they come from SQL create a map name -> type\n  _schemaFromQueryFields: function (fields) {\n    var sc = {};\n    for (var k in fields) {\n      sc[k] = fields[k].type;\n    }\n    return sc;\n  },\n\n  _createUrlOptions: function (filter) {\n    var attr;\n    if (filter) {\n      var a = {};\n      for (var k in this.options.attributes) {\n        if (filter(k)) {\n          a[k] = this.options.attributes[k];\n        }\n      }\n      attr = _(a);\n    } else {\n      attr = _(this.options.attributes);\n    }\n    var params = attr.map(function (v, k) {\n      return k + '=' + encodeURIComponent(v);\n    }).join('&');\n    params += '&api_key=' + this._configModel.get('api_key');\n    return params;\n  },\n\n  _geometryColumnSQL: function (c) {\n    return [\n      'CASE',\n      'WHEN GeometryType(' + c + \") = 'POINT' THEN\",\n      'ST_AsGeoJSON(' + c + ',8)',\n      'WHEN (' + c + ' IS NULL) THEN',\n      'NULL',\n      'ELSE',\n      'GeometryType(' + c + ')',\n      'END ' + c\n    ].join(' ');\n  },\n\n  // return wrapped SQL removing the_geom and the_geom_webmercator\n  // to avoid fetching those columns.\n  // So for a sql like\n  // select * from table the returned value is\n  // select column1, column2, column3... from table\n  wrappedSQL: function (schema, exclude, fetchGeometry) {\n    exclude = exclude || ['the_geom_webmercator'];\n    schema = _.clone(schema);\n\n    var select_columns = _.chain(schema).omit(exclude).map((v, k) => {\n      if (v === 'geometry') {\n        if (fetchGeometry) {\n          return 'st_astext(\"' + k + '\") ' + 'as ' + k;\n        }\n        return this._geometryColumnSQL(k);\n      }\n      return '\"' + k + '\"';\n    }).value();\n\n    select_columns = select_columns.join(',');\n\n    var mode = this.options.get('sort_order') === 'desc' ? 'desc' : 'asc';\n\n    var q = 'select ' + select_columns + ' from (' + this.getSQL() + ') __wrapped';\n    var order_by = this.options.get('order_by');\n    if (order_by && order_by.length > 0) {\n      q += ' order by ' + order_by + ' ' + mode;\n    }\n    return q;\n  },\n\n  url: function () {\n    return this.sqlApiUrl();\n  },\n\n  /**\n  * we need to override sync to avoid the sql request to be sent by GET.\n  * For security reasons, we need them to be send as a PUT request.\n  * @method sync\n  * @param method {'save' || 'read' || 'delete' || 'create'}\n  * @param model {Object}\n  * @param options {Object}\n  */\n  sync: function (method, model, options) {\n    if (!options) { options = {}; }\n    options.data = this._createUrlOptions(function (d) {\n      return d !== 'sql';\n    });\n\n    if (cartoMetadataStatic.alterTableData(this.options.get('sql') || '')) {\n      options.data += '&q=' + encodeURIComponent(this.options.get('sql'));\n      options.type = 'POST';\n    } else {\n      // when a geometry can be lazy fetched, don't fetch it\n      var fetchGeometry = 'cartodb_id' in this.query_schema;\n      options.data += '&q=' + encodeURIComponent(this.wrappedSQL(this.query_schema, [], !fetchGeometry));\n\n      if (options.data.length > 2048) {\n        options.type = 'POST';\n      }\n    }\n\n    return Backbone.sync.call(this, method, this, options);\n  },\n\n  sqlApiUrl: function () {\n    return this._configModel.getSqlApiUrl();\n  },\n\n  setOptions: function (opt) {\n    this.options.set(opt);\n  },\n\n  // Refresh all table data\n  refresh: function () {\n    this.fetch();\n  },\n\n  isFetchingPage: function () {\n    return this._fetching;\n  },\n\n  loadPageAtTop: function () {\n    if (!this._fetching) {\n      var first = this.pages[0];\n\n      if (first > 0) {\n        this.options.set('page', first - 1);\n      }\n    }\n  },\n\n  loadPageAtBottom: function () {\n    if (!this._fetching) {\n      var last = this.pages[this.pages.length - 1];\n\n      if (!this.lastPage) {\n        this.options.set('page', last + 1);\n      }\n    }\n  },\n\n  /**\n   * called when a new page is loaded\n   * removes the models to max\n   */\n  newPage: function (currentPage, direction) {\n    if (this.pages.indexOf(currentPage) < 0) {\n      this.pages.push(currentPage);\n    }\n    this.pages.sort(function (a, b) {\n      return Number(a) > Number(b);\n    });\n    // remove blocks if there are more rows than allowed\n    var rowspp = this.options.get('rows_per_page');\n    var max_items = rowspp * 4;\n    if (this.size() > max_items) {\n      if (direction == 'up') { // eslint-disable-line eqeqeq\n        // remove page from the bottom (the user is going up)\n        this.pages.pop();\n        this.remove(this.models.slice(max_items, this.size()));\n      } else {\n        // remove page from the top (the user is going down)\n        this.pages.shift();\n        this.remove(this.models.slice(0, rowspp));\n      }\n    }\n  },\n\n  addRow: function (opts) {\n    this.table.notice(this._ADDING_ROW_TEXT, 'load', 0);\n    opts = opts || {};\n    _.extend(opts, {\n      wait: true,\n      success: () => {\n        this.table.notice(this._ADDED_ROW_TEXT);\n      },\n      error: (e, resp) => {\n        // TODO: notice user\n        this.table.error(this._ADDING_ROW_TEXT, resp);\n      }\n    });\n    return this.create(null, opts);\n  },\n\n  /**\n   * creates a new row model in local, it is NOT serialized to the server\n   */\n  newRow: function (attrs) {\n    var r = new RowModel(attrs, {\n      configModel: this._configModel\n    });\n    r.table = this.table;\n    r.bind('saved', function _saved () {\n      if (r.table.data().length === 0) {\n        r.table.data().fetch();\n        r.unbind('saved', _saved, r.table);\n      }\n    }, r.table);\n    return r;\n  },\n\n  /**\n   * return a model row\n   */\n  getRow: function (id, options) {\n    options = options || {};\n    var r = this.get(id);\n    if (!r) {\n      r = new RowModel({cartodb_id: id}, { configModel: this._configModel });\n    }\n    if (!options.no_add) {\n      this.table._data.add(r);\n    }\n    r.table = this.table;\n    return r;\n  },\n\n  getRowAt: function (index) {\n    var r = this.at(index);\n    r.table = this.table;\n    return r;\n  },\n\n  deleteRow: function (row_id) {\n  },\n\n  isReadOnly: function () {\n    return false;\n  },\n\n  quartiles: function (nslots, column, callback, error) {\n    var tmpl = _.template('select quartile, max(<%= column %>) as maxamount from (select <%= column %>, ntile(<%= slots %>) over (order by <%= column %>) as quartile from (<%= sql %>) _table_sql where <%= column %> is not null) x group by quartile order by quartile');\n    this._sqlQuery(tmpl({\n      slots: nslots,\n      sql: this.getSQL(),\n      column: column\n    }),\n    function (data) {\n      callback(_(data.rows).pluck('maxamount'));\n    },\n    error);\n  },\n\n  equalInterval: function (nslots, column, callback, error) {\n    var tmpl = _.template(`\n      with params as (select min(a), max(a) from ( select <%= column %> as a from (<%= sql %>) _table_sql where <%= column %> is not null ) as foo )\n      select (max-min)/<%= slots %> as s, min, max from params`\n    );\n    this._sqlQuery(tmpl({\n      slots: nslots,\n      sql: this.getSQL(),\n      column: column\n    }),\n    function (data) {\n      var min = data.rows[0].min;\n      var max = data.rows[0].max;\n      var range = data.rows[0].s;\n      var values = [];\n\n      for (var i = 1, l = nslots; i < l; i++) {\n        values.push((range * i) + min);\n      }\n\n      // Add last value\n      values.push(max);\n      // Callback\n      callback(values);\n    },\n    error);\n  },\n\n  _quantificationMethod: function (functionName, nslots, column, distinct, callback, error) {\n    var tmpl = _.template('select unnest(<%= functionName %>(array_agg(<%= simplify_fn %>((<%= column %>::numeric))), <%= slots %>)) as buckets from (<%= sql %>) _table_sql where <%= column %> is not null');\n    this._sqlQuery(tmpl({\n      slots: nslots,\n      sql: this.getSQL(),\n      column: column,\n      functionName: functionName,\n      simplify_fn: 'distinct'\n    }),\n    function (data) {\n      callback(_(data.rows).pluck('buckets'));\n    },\n    error);\n  },\n\n  discreteHistogram: function (nbuckets, column, callback, error) {\n    var query = 'SELECT DISTINCT(<%= column %>) AS bucket, count(*) AS value FROM (<%= sql %>) _table_sql GROUP BY <%= column %> ORDER BY value DESC LIMIT <%= nbuckets %> + 1';\n\n    var sql = _.template(query, {\n      column: column,\n      nbuckets: nbuckets,\n      sql: this.getSQL()\n    });\n\n    this._sqlQuery(sql, function (data) {\n      var count = data.rows.length;\n      var reached_limit = false;\n\n      if (count > nbuckets) {\n        data.rows = data.rows.slice(0, nbuckets);\n        reached_limit = true;\n      }\n\n      callback({ rows: data.rows, reached_limit: reached_limit }); // eslint-disable-line\n    });\n  },\n\n  date_histogram: function (nbuckets, column, callback, error) {\n    column = 'EXTRACT(EPOCH FROM ' + column + '::TIMESTAMP WITH TIME ZONE )';\n\n    var tmpl = _.template(\n      'with bounds as ( ' +\n     'SELECT  ' +\n      'current_timestamp as tz, ' +\n      'min(<%= column %>) as lower,  ' +\n      'max(<%= column %>) as upper,  ' +\n      '(max(<%= column %>) - min(<%= column %>)) as span,  ' +\n      'CASE WHEN ABS((max(<%= column %>) - min(<%= column %>))/<%= nbuckets %>) <= 0 THEN 1 ELSE GREATEST(1.0, pow(10,ceil(log((max(<%= column %>) - min(<%= column %>))/<%= nbuckets %>)))) END as bucket_size ' +\n      'FROM  (<%= sql %>) _table_sql ' +\n    ')  ' +\n    'select array_agg(v) val, array_agg(bucket) buckets, tz, bounds.upper, bounds.lower, bounds.span, bounds.bucket_size from ' +\n    '( ' +\n    'select  ' +\n      'count(<%= column %>) as v,   ' +\n      'round((<%= column %> - bounds.lower)/bounds.bucket_size) as bucket  ' +\n       'from (<%= sql %>) _table_sql, bounds  ' +\n       'where <%= column %> is not null ' +\n       'group by bucket order by bucket ' +\n    ') a, bounds ' +\n     'group by ' +\n    'bounds.upper, bounds.lower, bounds.span, bounds.bucket_size, bounds.tz ');\n\n    // transform array_agg from postgres to a js array\n    function agg_array (a) {\n      return a.map(function (v) { return parseFloat(v); });\n    }\n\n    this._sqlQuery(tmpl({\n      nbuckets: nbuckets,\n      sql: this.getSQL(),\n      column: column\n    }),\n\n    function (data) {\n      if (!data.rows || data.rows.length === 0) {\n        callback(null, null);\n        return;\n      }\n\n      data = data.rows[0];\n      data.val = agg_array(data.val);\n      data.buckets = agg_array(data.buckets);\n\n      var hist = [];\n      var bounds = {};\n\n      // create a sorted array and normalize\n      var upper = data.upper;\n      var lower = data.lower;\n      var tz = data.tz;\n      var bucket_size = data.bucket_size;\n      var max;\n\n      max = data.val[0];\n\n      for (var r = 0; r < data.buckets.length; ++r) {\n        var b = data.buckets[r];\n        var v = hist[b] = data.val[r];\n        max = Math.max(max, v);\n      }\n\n      // var maxBucket = _.max(data.buckets)\n      for (var i = 0; i < hist.length; ++i) {\n        if (hist[i] === undefined) {\n          hist[i] = 0;\n        } else {\n          hist[i] = hist[i] / max;\n        }\n      }\n\n      bounds.upper = parseFloat(upper);\n      bounds.lower = parseFloat(lower);\n      bounds.bucket_size = parseFloat(bucket_size);\n      bounds.tz = tz;\n\n      callback(hist, bounds);\n    },\n\n    error);\n  },\n\n  histogram: function (nbuckets, column, callback, error) {\n    var tmpl = _.template(\n      'with bounds as ( ' +\n     'SELECT  ' +\n      'min(<%= column %>) as lower,  ' +\n      'max(<%= column %>) as upper,  ' +\n      '(max(<%= column %>) - min(<%= column %>)) as span,  ' +\n      'CASE WHEN ABS((max(<%= column %>) - min(<%= column %>))/<%= nbuckets %>) <= 0 THEN 1 ELSE GREATEST(1.0, pow(10,ceil(log((max(<%= column %>) - min(<%= column %>))/<%= nbuckets %>)))) END as bucket_size ' +\n      'FROM  (<%= sql %>) _table_sql  ' +\n    ')  ' +\n    'select array_agg(v) val, array_agg(bucket) buckets, bounds.upper, bounds.lower, bounds.span, bounds.bucket_size from ' +\n    '( ' +\n    'select  ' +\n      'count(<%= column %>) as v,   ' +\n      'round((<%= column %> - bounds.lower)/bounds.bucket_size) as bucket  ' +\n       'from (<%= sql %>) _table_sql, bounds  ' +\n       'where <%= column %> is not null ' +\n       'group by bucket order by bucket ' +\n    ') a, bounds ' +\n     'group by ' +\n    'bounds.upper, ' +\n    'bounds.lower, bounds.span, bounds.bucket_size ');\n\n    // transform array_agg from postgres to a js array\n    function agg_array (a) {\n      return a.map(function (v) { return parseFloat(v); });\n      // return JSON.parse(a.replace('{', '[').replace('}', ']'))\n    }\n\n    this._sqlQuery(tmpl({\n      nbuckets: nbuckets,\n      sql: this.getSQL(),\n      column: column\n    }),\n\n    function (data) {\n      if (!data.rows || data.rows.length === 0) {\n        callback(null, null);\n        return;\n      }\n\n      data = data.rows[0];\n\n      data.val = agg_array(data.val);\n      data.buckets = agg_array(data.buckets);\n\n      var hist = [];\n      var bounds = {};\n\n      // create a sorted array and normalize\n      var upper = data.upper;\n      var lower = data.lower;\n      var bucket_size = data.bucket_size;\n      var max;\n\n      max = data.val[0];\n\n      for (var r = 0; r < data.buckets.length; ++r) {\n        var b = data.buckets[r];\n        var v = hist[b] = data.val[r];\n        max = Math.max(max, v);\n      }\n\n      // var maxBucket = _.max(data.buckets)\n      for (var i = 0; i < hist.length; ++i) {\n        if (hist[i] === undefined) {\n          hist[i] = 0;\n        } else {\n          hist[i] = hist[i] / max;\n        }\n      }\n\n      bounds.upper = parseFloat(upper);\n      bounds.lower = parseFloat(lower);\n      bounds.bucket_size = parseFloat(bucket_size);\n\n      callback(hist, bounds);\n    },\n\n    error);\n  },\n\n  jenkBins: function (nslots, column, callback, error) {\n    this._quantificationMethod('CDB_JenksBins', nslots, column, true, callback, error);\n  },\n\n  headTails: function (nslots, column, callback, error) {\n    this._quantificationMethod('CDB_HeadsTailsBins', nslots, column, false, callback, error);\n  },\n\n  quantileBins: function (nslots, column, callback, error) {\n    this._quantificationMethod('CDB_QuantileBins', nslots, column, false, callback, error);\n  },\n\n  categoriesForColumn: function (max_values, column, callback, error) {\n    var tmpl = _.template('SELECT <%= column %>, count(<%= column %>) FROM (<%= sql %>) _table_sql ' +\n      'GROUP BY <%= column %> ORDER BY count DESC LIMIT <%= max_values %> '\n    );\n\n    this._sqlQuery(tmpl({\n      sql: this.getSQL(),\n      column: column,\n      max_values: max_values + 1\n    }),\n    function (data) {\n      callback({// eslint-disable-line\n        type: data.fields[column].type || 'string',\n        categories: _(data.rows).pluck(column)\n      });\n    },\n    error);\n  },\n\n  /**\n   * call callback with the geometry bounds\n   */\n  geometryBounds: function (callback) {\n    var tmpl = _.template('SELECT ST_XMin(ST_Extent(the_geom)) as minx,ST_YMin(ST_Extent(the_geom)) as miny, ST_XMax(ST_Extent(the_geom)) as maxx,ST_YMax(ST_Extent(the_geom)) as maxy from (<%= sql %>) _table_sql');\n    this._sqlQuery(tmpl({\n      sql: this.getSQL()\n    }),\n    function (result) {\n      var coordinates = result.rows[0];\n\n      var lon0 = coordinates.maxx;\n      var lat0 = coordinates.maxy;\n      var lon1 = coordinates.minx;\n      var lat1 = coordinates.miny;\n\n      var minlat = -85.0511;\n      var maxlat = 85.0511;\n      var minlon = -179;\n      var maxlon = 179;\n\n      var clampNum = function (x, min, max) {\n        return x < min ? min : x > max ? max : x;\n      };\n\n      lon0 = clampNum(lon0, minlon, maxlon);\n      lon1 = clampNum(lon1, minlon, maxlon);\n      lat0 = clampNum(lat0, minlat, maxlat);\n      lat1 = clampNum(lat1, minlat, maxlat);\n      callback([ [lat0, lon0], [lat1, lon1]]); // eslint-disable-line\n    }\n    );\n  },\n\n  _sqlQuery: function (sql, callback, error, type) {\n    var s = encodeURIComponent(sql);\n    return $.ajax({\n      type: type || 'POST',\n      data: 'q=' + s + '&api_key=' + this._configModel.get('api_key'),\n      url: this.url(),\n      success: callback,\n      error: error\n    });\n  },\n\n  getSQL: function () {\n    // use table.id to fetch data because if always contains the real table name\n    return 'select * from ' + safeTableNameQuoting(this.table.get('id'));\n  },\n\n  fetch: function (opts) {\n    opts = opts || {};\n    if (!opts || !opts.add) {\n      this.options.attributes.page = 0;\n      this.options._previousAttributes.page = 0;\n      this.pages = [];\n    }\n    var error = opts.error;\n    opts.error = (model, resp) => {\n      this.fetched = true;\n      this.trigger('error', model, resp);\n      error && error(model, resp);\n    };\n    var success = opts.success;\n    opts.success = (model, resp) => {\n      this.fetched = true;\n      success && success.apply(this, arguments);\n    };\n    this._fetch(opts);\n  },\n\n  _fetch: function (opts) {\n    var MAX_GET_LENGTH = 1024;\n    this.trigger('loading', opts);\n\n    var sql = this.getSQL();\n    // if the query changes the database just send it\n    if (cartoMetadataStatic.alterTableData(sql)) {\n      TableDataCollection.prototype.fetch.call(this, opts);\n      return;\n    }\n\n    // use get to fetch the schema, probably cached\n    this._sqlQuery(_.template('select * from (<%= sql %>) __wrapped limit 0')({ sql: sql }), (data) => {\n      // get schema\n      this.query_schema = this._schemaFromQueryFields(data.fields);\n      if (!this.table.isInSQLView()) {\n        if ('the_geom' in this.query_schema) {\n          delete this.query_schema['the_geom_webmercator'];\n        }\n      }\n      TableDataCollection.prototype.fetch.call(this, opts);\n    }, (err) => {\n      this.trigger('error', this, err);\n    }, sql.length > MAX_GET_LENGTH ? 'POST' : 'GET');\n  },\n\n  /**\n   * with the data from the rows fetch create an schema\n   * if the schema from original table is passed the method\n   * set the column types according to it\n   * return an empty list if no data was fetch\n   */\n  schemaFromData: function (originalTableSchema) {\n    // build schema in format [ [field, type] , ...]\n    return cartoMetadataStatic.sortSchema(_(this.query_schema).map(function (v, k) {\n      return [k, v];\n    }));\n  },\n\n  geometryTypeFromGeoJSON: function (geojson) {\n    try {\n      var geo = JSON.parse(geojson);\n      return geo.type;\n    } catch (e) {\n    }\n  },\n\n  geometryTypeFromWKT: function (wkt) {\n    if (!wkt) return null;\n    var types = WKT.types;\n    wkt = wkt.toUpperCase();\n    for (var i = 0; i < types.length; ++i) {\n      var t = types[i];\n      if (wkt.indexOf(t) !== -1) {\n        return t;\n      }\n    }\n  },\n\n  geometryTypeFromWKB: function (wkb) {\n    if (!wkb) return null;\n\n    var typeMap = {\n      '0001': 'Point',\n      '0002': 'LineString',\n      '0003': 'Polygon',\n      '0004': 'MultiPoint',\n      '0005': 'MultiLineString',\n      '0006': 'MultiPolygon'\n    };\n\n    var bigendian = wkb[0] === '0' && wkb[1] === '0';\n    var type = wkb.substring(2, 6);\n    if (!bigendian) {\n      // swap '0100' => '0001'\n      type = type[2] + type[3] + type[0] + type[1];\n    }\n    return typeMap[type];\n  },\n\n  //\n  // guesses from the first row the geometry types involved\n  // returns an empty array where there is no rows\n  // return postgist types, like st_GEOTYPE\n  //\n  getGeometryTypes: function () {\n    var row = null;\n    var i = this.size();\n    while (i-- && !(row && row.get('the_geom'))) {\n      row = this.at(i);\n    }\n    if (!row) return [];\n    var geom = row.get('the_geom') || row.get('the_geom_webmercator');\n    var geoType = this.geometryTypeFromWKB(geom) || this.geometryTypeFromWKT(geom);\n    if (geoType) {\n      return ['ST_' + geoType[0].toUpperCase() + geoType.substring(1).toLowerCase()];\n    }\n    return [];\n  }\n\n});\n","const _ = require('underscore');\nconst Backbone = require('backbone');\nconst checkAndBuildOpts = require('builder/helpers/required-opts');\n\nconst REQUIRED_OPTS = [\n  'configModel'\n];\n\nmodule.exports = Backbone.Model.extend({\n\n  idAttribute: 'name',\n\n  url: function (method) {\n    var version = this._configModel.urlVersion('column', method);\n    var table = this.table || this.collection.table;\n    if (!table) {\n      console.error('column has no table assigned');\n    }\n\n    var base = '/api/' + version + '/tables/' + table.get('name') + '/columns/';\n    if (this.isNew()) {\n      return base;\n    }\n    return base + this.id;\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n    this.table = this.get('table');\n    if (!this.table) {\n      throw 'you should specify a table model'; // eslint-disable-line\n    }\n    this.unset('table', { silent: true });\n  },\n\n  toJSON: function () {\n    var c = _.clone(this.attributes);\n    // this hack is created to create new column\n    // if you set _name instead name backbone does not get\n    // it as idAttribute so launch a POST instead of a PUT\n    if (c._name) {\n      c.name = c._name;\n      delete c._name;\n    }\n    return c;\n  }\n\n});\n","const _ = require('underscore');\nconst Backbone = require('backbone');\nconst SQL = require('internal-carto.js').SQL;\nconst WKT = require('dashboard/common/wkt');\nconst checkAndBuildOpts = require('builder/helpers/required-opts');\n\nconst REQUIRED_OPTS = [\n  'configModel'\n];\n\nconst RESERVED_COLUMNS = 'the_geom the_geom_webmercator cartodb_id created_at updated_at'.split(' ');\n\nmodule.exports = Backbone.Model.extend({\n\n  _GEOMETRY_TYPES: {\n    'point': 'st_point',\n    'multipoint': 'st_multipoint',\n    'linestring': 'st_linestring',\n    'multilinestring': 'st_multilinestring',\n    'polygon': 'st_polygon',\n    'multipolygon': 'st_multipolygon'\n  },\n\n  initialize: function (attrs, opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n  },\n\n  url: function (method) {\n    var version = this._configModel.urlVersion('record', method);\n    var table = this.table || this.collection.table;\n    if (!table) {\n      console.error('row has no table assigned');\n    }\n\n    var base = '/api/' + version + '/tables/' + table.get('name') + '/records/';\n    if (this.isNew()) {\n      return base;\n    }\n    return base + this.id;\n  },\n\n  fetch: function (opts) {\n    opts = opts || {};\n    var username = (this.options && this.options.user_data) ? this.options.user_data.username\n      : (window.user_data ? window.user_data.username : window.user_name);\n    var api_key = (this.options && this.options.user_data) ? this.options.user_data.api_key\n      : (window.user_data ? window.user_data.api_key : window.api_key);\n\n    var table = this.table || this.collection.table;\n\n    var sqlApi = new SQL({\n      user: username,\n      version: 'v2',\n      api_key: api_key,\n      sql_api_template: this._configModel.getSqlApiBaseUrl(),\n      extra_params: ['skipfields']\n    });\n    // this.trigger('loading')\n    var sql = null;\n    var columns = table.columnNames();\n    if (opts.no_geom) {\n      columns = _.without(columns, 'the_geom', 'the_geom_webmercator');\n    } else {\n      columns = _.without(columns, 'the_geom');\n    }\n    sql = 'SELECT ' + columns.join(',') + ' ';\n    if (table.containsColumn('the_geom') && !opts.no_geom) {\n      sql += ',ST_AsGeoJSON(the_geom, 8) as the_geom ';\n    }\n    sql += ' from (' + table.data().getSQL() + ') _table_sql WHERE cartodb_id = ' + this.get('cartodb_id');\n    // Added opts to sql execute function to apply\n    // parameters ( like cache ) to the ajax request\n    if (opts.no_geom) {\n      opts.skipfields = 'the_geom,the_geom_webmercator';\n    } else {\n      opts.skipfields = 'the_geom_webmercator';\n    }\n    sqlApi.execute(sql, {}, opts).done(function (data) {\n      if (this.parse(data.rows[0])) {\n        this.set(data.rows[0]);//, {silent: silent});\n        this.trigger('sync');\n      }\n    });\n  },\n\n  toJSON: function () {\n    var attr = _.clone(this.attributes);\n    // remove read-only attributes\n    delete attr['updated_at'];\n    delete attr['created_at'];\n    delete attr['the_geom_webmercator'];\n    if (!this.isGeometryGeoJSON()) {\n      delete attr['the_geom'];\n    }\n    return attr;\n  },\n\n  isGeomLoaded: function () {\n    var geojson = this.get('the_geom');\n    var column_types_WKT = WKT.types;\n    return (geojson !== 'GeoJSON' && geojson !== -1 && !_.contains(column_types_WKT, geojson));\n  },\n\n  hasGeometry: function () {\n    var the_geom = this.get('the_geom');\n    return !!(the_geom != null && the_geom != undefined && the_geom != ''); // eslint-disable-line eqeqeq\n  },\n  /**\n   * Checks if the_geom contains a valid geoJson\n   */\n  isGeometryGeoJSON: function () {\n    var the_geom = this.get('the_geom');\n    if (the_geom && typeof the_geom === 'object') {\n      return !!the_geom.coordinates;\n    } else if (typeof the_geom !== 'string') {\n      return false;\n    }\n    // if the geom contains GeoJSON, the row has a valid geometry, but is not loaded yet\n    if (the_geom === 'GeoJSON') {\n      return true;\n    }\n\n    try {\n      var g = JSON.parse(the_geom);\n      return !!g.coordinates;\n    } catch (e) {\n      return false;\n    }\n  },\n\n  getFeatureType: function () {\n    if (this.isGeomLoaded()) {\n      // Problem geometry type from a WKB format\n      // Not possible for the moment\n      try {\n        var geojson = JSON.parse(this.get('the_geom'));\n        return geojson.type.toLowerCase();\n      } catch (e) {\n        console.info('Not possible to parse geometry type');\n      }\n    }\n    return null;\n  },\n\n  getGeomType: function () {\n    try {\n      return this._GEOMETRY_TYPES[this.getFeatureType()];\n    } catch (e) {\n      console.info('Not possible to parse geometry type');\n    }\n  }\n\n}, {\n  RESERVED_COLUMNS,\n  isReservedColumn: function (c) {\n    return _(RESERVED_COLUMNS).indexOf(c) !== -1;\n  }\n});\n","const Backbone = require('backbone');\n\nmodule.exports = Backbone.Collection.extend({\n  fetched: false,\n\n  initialize: function () {\n    this.bind('sync', () => {\n      this.fetched = true;\n    });\n  },\n\n  /**\n   * get value for row index and columnName\n   */\n  getCell: function (index, columnName) {\n    var r = this.at(index);\n    if (!r) {\n      return null;\n    }\n    return r.get(columnName);\n  },\n\n  isEmpty: function () {\n    return this.length === 0;\n  }\n\n});\n","var _ = require('underscore');\nvar UploadConfig = require('dashboard/common/upload-config');\nvar UploadModel = require('builder/data/upload-model');\nvar Utils = require('builder/helpers/utils.js');\nvar moment = require('moment');\n\nmodule.exports = UploadModel.extend({\n  validate: function (attrs) {\n    if (!attrs) return;\n\n    if (attrs.type === 'file') {\n      // Number of files\n      if (attrs.value && attrs.value.length) {\n        return {\n          msg: _t('data.upload-model.one-file')\n        };\n      }\n\n      // File name\n      var name = attrs.value.name;\n      if (!name) {\n        return {\n          msg: _t('data.upload-model.file-defined')\n        };\n      }\n\n      // File extension\n      var ext = name.substr(name.lastIndexOf('.') + 1);\n      if (ext) {\n        ext = ext.toLowerCase();\n      }\n      if (!_.contains(UploadConfig.fileExtensions, ext)) {\n        return {\n          msg: _t('data.upload-model.file-extension')\n        };\n      }\n      // File size\n      if ((this._userModel.get('remaining_byte_quota') * UploadConfig.fileTimesBigger) < attrs.value.size) {\n        return {\n          msg: _t('data.upload-model.file-size'),\n          error_code: 8001\n        };\n      }\n    }\n\n    if (attrs.type === 'remote') {\n      // Valid remote visualization id?\n      if (!attrs.remote_visualization_id) {\n        return {\n          msg: _t('data.upload-model.visualization-id')\n        };\n      }\n      // Remote size?\n      if (attrs.size && ((this._userModel.get('remaining_byte_quota') * UploadConfig.fileTimesBigger) < attrs.size)) {\n        return {\n          msg: _t('data.upload-model.remote-file-size'),\n          error_code: 8001\n        };\n      }\n    }\n\n    if (attrs.type === 'url') {\n      // Valid URL?\n      if (!Utils.isURL(attrs.value)) {\n        return {\n          msg: _t('data.upload-model.url-invalid')\n        };\n      }\n    }\n\n    if (attrs.type === 'sql') {\n      if (!attrs.value) {\n        return {\n          msg: _t('data.upload-model.query-undefined')\n        };\n      }\n    }\n\n    if (attrs.type === 'duplication') {\n      if (!attrs.value) {\n        return {\n          msg: _t('data.upload-model.dataset-copy-undefined')\n        };\n      }\n    }\n\n    if (attrs.type === 'service' && attrs.service_name === 'twitter_search') {\n      var service_item_id = attrs.service_item_id;\n\n      // Empty?\n      if (!service_item_id || _.isEmpty(service_item_id)) {\n        return {\n          msg: _t('data.upload-model.twitter-data')\n        };\n      }\n\n      // Categories?\n      if (_.isEmpty(service_item_id.categories)) {\n        return {\n          msg: _t('data.upload-model.twitter-categories-invalid')\n        };\n      }\n\n      // Dates?\n      var dates = service_item_id.dates;\n      if (!dates || _.isEmpty(dates)) {\n        return {\n          msg: _t('data.upload-model.twitter-dates-empty')\n        };\n      }\n      var isToDateValid = moment(dates.fromDate) <= moment(new Date());\n      if (!dates.fromDate || !dates.toDate || !isToDateValid) {\n        return {\n          msg: _t('data.upload-model.twitter-dates-invalid')\n        };\n      }\n    }\n  }\n});\n","const _ = require('underscore');\nconst Backbone = require('backbone');\n\n/**\n * Represents a URL.\n * Provides common semantics to manipulate a URL without having to resort to manipulating strings manually.\n * Rather don't subclass but you composition if you need to extend some functionality.\n *\n * Can safely be coerced into a string implicitly, e.g.:\n *   const myUrl = UrlModel.byBasePath('http://foobar.com/some/path')\n *   alert(myUrl); // will output 'http://foobar.com/some/path'\n */\n\nconst UrlModel = Backbone.Model.extend({\n  initialize: function (attrs) {\n    if (!attrs.base_url) {\n      throw new Error('base_url is required');\n    }\n  },\n\n  /**\n   * Get a new URL object with new basepath.\n   * @param {String,*} path new sub path. Slashes are not necessary, e.g. 'my_path'\n   * @return {Object} instance of cdb.common.Url\n   */\n  urlToPath: function () {\n    return UrlModel.byBaseUrl(this.toString.apply(this, arguments));\n  },\n\n  /**\n   * @return {String} Path of this URL, e.g. '/some/path'\n   */\n  pathname: function () {\n    return this.toString().match(/^.+\\/\\/[^\\/]+(.*)$/)[1];\n  },\n\n  toString: function () {\n    return this._joinArgumentsWithSlashes(\n      this.get('base_url'),\n      Array.prototype.slice.call(arguments, 0)\n    );\n  },\n\n  _joinArgumentsWithSlashes: function () {\n    return _.chain(arguments).flatten().compact().value().join('/');\n  }\n}, {\n  byBaseUrl: function (url) {\n    return new UrlModel({ base_url: url });\n  }\n});\n\nmodule.exports = UrlModel;\n","const Backbone = require('backbone');\nconst GroupModel = require('dashboard/data/group-model');\nconst checkAndBuildOpts = require('builder/helpers/required-opts');\n\nconst REQUIRED_OPTS = [\n  'configModel'\n];\n\nmodule.exports = Backbone.Collection.extend({\n\n  model: function (attrs, { collection }) {\n    return new GroupModel(attrs, {\n      collection,\n      configModel: collection._configModel\n    });\n  },\n\n  initialize: function (models, opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n    this.organization = opts.organization;\n  }\n\n});\n","const _ = require('underscore');\nconst Backbone = require('backbone');\nconst UserUrlModel = require('dashboard/data/user-url-model');\n\nconst UserModel = Backbone.Model.extend({\n  urlRoot: '/api/v1/users',\n\n  defaults: {\n    avatar_url: 'http://cartodb.s3.amazonaws.com/static/public_dashboard_default_avatar.png',\n    username: ''\n  },\n\n  initialize: function (attrs, opts) {\n    attrs = attrs || {};\n    opts = opts || {};\n    this.tables = [];\n    // Removing avatar_url attribute if it comes as null\n    // Due to a Backbone Model constructor uses _.extends\n    // instead of _.defaults\n    if (this.get('avatar_url') === null) {\n      this.set('avatar_url', this.defaults.avatar_url);\n    }\n\n    this.email = (typeof attrs.email !== 'undefined') ? attrs.email : '';\n\n    if (opts.groups) {\n      this.setGroups(opts.groups);\n    }\n\n    if (opts.organization) {\n      this.setOrganization(opts.organization);\n    }\n  },\n\n  setGroups: function (groups) {\n    this.groups = groups;\n  },\n\n  setOrganization: function (organization) {\n    this.organization = organization;\n\n    if (this.groups) {\n      this.groups.organization = organization;\n    }\n  },\n\n  isInsideOrg: function () {\n    if (this.organization) {\n      return this.organization.id !== false || this.isOrgOwner();\n    }\n    return false;\n  },\n\n  isAuthUsernamePasswordEnabled: function () {\n    if (this.organization) {\n      return this.organization.get('auth_username_password_enabled');\n    }\n    return false;\n  },\n\n  isOrgOwner: function () {\n    if (this.organization) {\n      return this.organization.owner.get('id') === this.get('id');\n    }\n    return false;\n  },\n\n  isOrgAdmin: function () {\n    if (this.organization) {\n      return this.organization.isOrgAdmin(this);\n    }\n    return false;\n  },\n\n  isViewer: function () {\n    return this.get('viewer') === true;\n  },\n\n  isBuilder: function () {\n    return !this.isViewer();\n  },\n\n  nameOrUsername: function () {\n    return this.fullName() || this.get('username');\n  },\n\n  fullName: function () {\n    var name = this.get('name') || '';\n    var lastName = this.get('last_name') || '';\n    if (name || lastName) {\n      return name + (name && lastName ? ' ' : '') + lastName;\n    }\n    return '';\n  },\n\n  renderData: function (currentUser) {\n    var name = this.get('username');\n\n    if (currentUser && currentUser.id === this.id) {\n      name = _t('You');\n    }\n\n    return {\n      username: name,\n      avatar_url: this.get('avatar_url')\n    };\n  },\n\n  hasCreateDatasetsFeature: function () {\n    return this.isBuilder();\n  },\n\n  canCreateDatasets: function () {\n    if (!this.get('remaining_byte_quota') || this.get('remaining_byte_quota') <= 0) {\n      return false;\n    }\n\n    return this.hasCreateDatasetsFeature();\n  },\n\n  hasCreateMapsFeature: function () {\n    return this.isBuilder();\n  },\n\n  canAddLayerTo: function (map) {\n    if (!map || !map.layers || !map.layers.getDataLayers) {\n      throw new Error('Map model is not defined or wrong');\n    }\n    var dataLayers = map.layers.getDataLayers();\n    return dataLayers.length < this.getMaxLayers();\n  },\n\n  getMaxLayers: function () {\n    return (this.get('limits') && this.get('limits').max_layers) || 5;\n  },\n\n  getMaxConcurrentImports: function () {\n    return (this.get('limits') && this.get('limits').concurrent_imports) || 1;\n  },\n\n  featureEnabled: function (name) {\n    var featureFlags = this.get('feature_flags');\n\n    if (!featureFlags || featureFlags.length === 0 || !name) {\n      return false;\n    }\n\n    return _.contains(featureFlags, name);\n  },\n\n  isCloseToLimits: function () {\n    var quota = this.get('quota_in_bytes');\n    var remainingQuota = this.get('remaining_byte_quota');\n\n    return ((remainingQuota * 100) / quota) < 20;\n  },\n\n  isEnterprise: function () {\n    return this.get('account_type').toLowerCase().indexOf('enterprise') != -1; // eslint-disable-line\n  },\n\n  getOrganizationName: function () {\n    return this.isInsideOrg() ? this.organization.get('name') : '';\n  },\n\n  getOrgName: function () {\n    return this.isInsideOrg() ? this.organization.get('name') : '';\n  },\n\n  getMaxLayersPerMap: function () {\n    return this.get('max_layers') || 4;\n  },\n\n  canStartTrial: function () {\n    return !this.isInsideOrg() && this.get('account_type') === 'FREE' && this.get('table_count') > 0;\n  },\n\n  canCreatePrivateDatasets: function () {\n    var actions = this.get('actions');\n    return actions && actions.private_tables;\n  },\n\n  canCreateTwitterDataset: function () {\n    var twitter = this.get('twitter');\n    return !(twitter.quota - twitter.monthly_use) <= 0 && twitter.hard_limit;\n  },\n\n  canSelectPremiumOptions: function (visModel) {\n    return this.get('actions')[ visModel.isVisualization() ? 'private_maps' : 'private_tables' ];\n  },\n\n  hasOwnTwitterCredentials: function () {\n    var twitter = this.get('twitter');\n    return (twitter && twitter.customized_config) || false;\n  },\n\n  equals: function (otherUser) {\n    if (otherUser.get) {\n      return this.get('id') === otherUser.get('id');\n    }\n  },\n\n  viewUrl: function () {\n    return new UserUrlModel({\n      base_url: this.get('base_url'),\n      is_org_admin: this.isOrgAdmin()\n    });\n  },\n\n  upgradeContactEmail: function () {\n    if (this.isInsideOrg()) {\n      if (this.isOrgOwner()) {\n        return 'enterprise-support@carto.com';\n      } else {\n        return this.organization.owner.get('email');\n      }\n    } else {\n      return 'support@carto.com';\n    }\n  },\n\n  needsPasswordConfirmation: function () {\n    return this.get('needs_password_confirmation');\n  },\n\n  usedQuotaPercentage: function () {\n    return (this.get('db_size_in_bytes') * 100) / this.organization.get('available_quota_for_user');\n  },\n\n  assignedQuotaInRoundedMb: function () {\n    return Math.floor(this.get('quota_in_bytes') / 1024 / 1024).toFixed(0);\n  },\n\n  assignedQuotaPercentage: function () {\n    return (this.get('quota_in_bytes') * 100) / this.organization.get('available_quota_for_user');\n  },\n\n  getGoogleApiKey: function () {\n    return this.get('google_maps_private_key');\n  },\n\n  hasGoogleMaps: function () {\n    return !!this.getGoogleApiKey();\n  },\n\n  showGoogleApiKeys: function () {\n    return this.hasGoogleMaps() && (!this.isInsideOrg() || this.isOrgOwner());\n  },\n\n  getSchema: function () {\n    return this.isInsideOrg() ? this.get('username') : 'public';\n  },\n\n  getAuthToken: function () {\n    return btoa(`${this.get('username')}:${this.get('api_key')}`);\n  },\n\n  getModelType: () => 'user',\n\n  isActionEnabled: function (action) {\n    return this.get('actions') && this.get('actions')[action];\n  },\n\n  hasAccountType: function (accountType) {\n    return this.get('account_type') === accountType;\n  }\n});\n\nmodule.exports = UserModel;\n","var _ = require('underscore');\nvar UrlModel = require('dashboard/data/url-model');\nvar DashboardUrlModel = require('dashboard/data/dashboard-url-model');\nvar OrganizationUrlModel = require('dashboard/data/organization-url-model');\n\n/**\n * URLs associated with a particular user.\n */\nvar UserUrlModel = UrlModel.extend({\n  initialize: function (attrs) {\n    UrlModel.prototype.initialize.apply(this, arguments);\n\n    if (_.isUndefined(attrs.is_org_admin)) {\n      throw new Error('is_org_admin is required');\n    }\n  },\n\n  organization: function () {\n    if (this.get('is_org_admin')) {\n      return new OrganizationUrlModel({\n        base_url: this.urlToPath('organization')\n      });\n    } else {\n      return this.urlToPath('account');\n    }\n  },\n\n  accountProfile: function () {\n    return this.urlToPath('profile');\n  },\n\n  accountSettings: function () {\n    return this.urlToPath('account');\n  },\n\n  publicProfile: function () {\n    return this.urlToPath('me');\n  },\n\n  apiKeys: function () {\n    return this.urlToPath('your_apps');\n  },\n\n  logout: function () {\n    return this.urlToPath('logout');\n  },\n\n  dashboard: function () {\n    return new DashboardUrlModel({\n      base_url: this.urlToPath('dashboard')\n    });\n  },\n\n  connectedApps: function () {\n    return new DashboardUrlModel({\n      base_url: this.urlToPath('dashboard/connected_apps')\n    });\n  }\n});\n\nmodule.exports = UserUrlModel;\n","const Backbone = require('backbone');\nconst _ = require('underscore');\nconst LikeModel = require('dashboard/data/like-model');\nconst UserModel = require('dashboard/data/user-model');\nconst PermissionModel = require('dashboard/data/permission-model');\nconst MapModel = require('dashboard/data/map-model');\nconst VisualizationOrderModel = require('dashboard/data/visualization-order-model');\nconst SlideTransition = require('dashboard/data/slide-transition-model');\nconst MapUrlModel = require('dashboard/data/map-url-model');\nconst DatasetUrlModel = require('dashboard/data/dataset-url-model');\nconst CartoTableMetadata = require('dashboard/views/public-dataset/carto-table-metadata');\nconst checkAndBuildOpts = require('builder/helpers/required-opts');\n\nconst REQUIRED_OPTS = [\n  'configModel'\n];\n\nconst PRIVACY_OPTIONS = {\n  public: 'PUBLIC',\n  link: 'LINK',\n  private: 'PRIVATE',\n  password: 'PASSWORD'\n};\n\nconst VisualizationModel = Backbone.Model.extend({\n\n  defaults: {\n    bindMap: true\n  },\n\n  INHERIT_TABLE_ATTRIBUTES: [\n    'name', 'description', 'privacy'\n  ],\n\n  initialize: function (attrs, opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    this.map = new MapModel({ configModel: this._configModel });\n    this.permission = new PermissionModel(this.get('permission'), { configModel: this._configModel });\n    this.order = new VisualizationOrderModel({ visualization: this });\n    this.transition = new SlideTransition(this.get('transition_options'), { parse: true });\n\n    this.like = LikeModel.newByVisData({\n      vis_id: this.id,\n      liked: this.get('liked'),\n      likes: this.get('likes'),\n      config: this._configModel\n    });\n\n    if (this.get('bindMap')) this._bindMap();\n\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.permission.acl.bind('reset', function () {\n      // Sync the local permission object w/ the raw data, so vis.save don't accidentally overwrites permissions changes\n      this.set('permission', this.permission.attributes, { silent: true });\n      this.trigger('change:permission', this);\n    }, this);\n\n    // Keep permission model in sync, e.g. on vis.save\n    this.bind('change:permission', function () {\n      this.permission.set(this.get('permission'));\n    }, this);\n  },\n\n  _bindMap: function () {\n    this.on('change:map_id', this._fetchMap, this);\n\n    this.map.bind('change:id', function () {\n      this.set('map_id', this.map.id);\n    }, this);\n\n    this.map.set('id', this.get('map_id'));\n  },\n\n  url: function (method) {\n    var version = this._configModel.urlVersion('visualization', method);\n    var base = '/api/' + version + '/viz';\n    if (this.isNew()) {\n      return base;\n    }\n    return base + '/' + this.id;\n  },\n\n  parse: function (data) {\n    if (this.transition && data.transition_options) {\n      this.transition.set(this.transition.parse(data.transition_options));\n    }\n\n    if (this.like) {\n      this.like.set({\n        vis_id: this.id,\n        likes: this.get('likes'),\n        liked: this.get('liked')\n      });\n    }\n\n    if (this.owner) {\n      this.owner = new UserModel(this.owner);\n    }\n\n    return data;\n  },\n\n  toJSON: function () {\n    var attr = _.clone(this.attributes);\n\n    delete attr.bindMap;\n    delete attr.stats;\n    delete attr.related_tables;\n    delete attr.children;\n\n    attr.transition_options = this.transition.toJSON();\n\n    return attr;\n  },\n\n  getLikesModel: function () {\n    return this.like;\n  },\n\n  /**\n   *  Create a copy of the visualization model\n   */\n  copy: function (attrs, options) {\n    attrs = attrs || {};\n    options = options || {};\n    var vis = new VisualizationModel(\n      _.extend({\n        source_visualization_id: this.id\n      },\n      attrs\n      ),\n      { configModel: this._configModel }\n    );\n    vis.save(null, options);\n    return vis;\n  },\n\n  /**\n   *  Fetch map information\n   */\n  _fetchMap: function () {\n    this.map\n      .set('id', this.get('map_id'))\n      .fetch();\n  },\n\n  /**\n   * Get the URL for current instance.\n   * @param {Object} currentUser (Optional) Get the URL from the perspective of the current user, necessary to\n   *   correctly setup URLs to tables.\n   * @return {Object} instance of cdb.common.Url\n   */\n  viewUrl: function (currentUser) {\n    const owner = this.permission.owner;\n    let userUrl = this.permission.owner.viewUrl();\n\n    // the undefined check is required for backward compability, in some cases (e.g. dependant visualizations) the type\n    // is not available on the attrs, if so assume the old behavior (e.g. it's a visualization/derived/map).\n    if (this.isVisualization() || _.isUndefined(this.get('type'))) {\n      let id = this.get('id');\n\n      if (currentUser && currentUser.id !== owner.id && this.permission.hasAccess(currentUser)) {\n        userUrl = currentUser.viewUrl();\n        id = owner.get('username') + '.' + id;\n      }\n\n      return new MapUrlModel({\n        base_url: userUrl.urlToPath('viz', id)\n      });\n    } else {\n      if (currentUser && this.permission.hasAccess(currentUser)) {\n        userUrl = currentUser.viewUrl();\n      }\n      return new DatasetUrlModel({\n        base_url: userUrl.urlToPath('tables', this.tableMetadata().getUnquotedName())\n      });\n    }\n  },\n\n  // return: Array of entities (user or organizations) this vis is shared with\n  sharedWithEntities: function () {\n    return _.map((this.permission.acl.toArray() || []), function (aclItem) {\n      return aclItem.get('entity');\n    });\n  },\n\n  /**\n   *  Is this model a true visualization?\n   */\n  isVisualization: function () {\n    return this.get('type') === 'derived' || this.get('type') === 'slide';\n  },\n\n  /**\n   * Get table metadata related to this vis.\n   * Note that you might need to do a {metadata.fetch()} to get full data.\n   *\n   * @returns {CartoTableMetadata} if this vis represents a table\n   * TODO: when and when isn't it required to do a fetch really?\n   */\n  tableMetadata: function () {\n    if (!this._metadata) {\n      this._metadata = new CartoTableMetadata(this.get('table'), { configModel: this._configModel });\n    }\n    return this._metadata;\n  },\n\n  getTableModel: function () {\n    if (!this._metadata) {\n      this._metadata = new CartoTableMetadata(this.get('table'), { configModel: this._configModel });\n    }\n    return this._metadata;\n  },\n\n  privacyOptions: function () {\n    const privacyOptions = _.values(PRIVACY_OPTIONS);\n\n    if (this.isVisualization()) {\n      return privacyOptions;\n    } else {\n      return _.filter(privacyOptions, option => option !== 'PASSWORD');\n    }\n  },\n\n  isRaster: function () {\n    return this.get('kind') === 'raster';\n  },\n\n  getPermissionModel: function () {\n    return this.permission;\n  },\n\n  getSynchronizationModel: function () {\n    return this._synchronizationModel;\n  },\n\n  mapcapsURL: function () {\n    var baseUrl = this._configModel.get('base_url');\n    return baseUrl + '/api/v3/viz/' + this.id + '/mapcaps';\n  }\n}, {\n  isPubliclyAvailable: function (privacyStatus) {\n    return privacyStatus === PRIVACY_OPTIONS.password ||\n           privacyStatus === PRIVACY_OPTIONS.link ||\n           privacyStatus === PRIVACY_OPTIONS.public;\n  }\n});\n\nmodule.exports = VisualizationModel;\n","const Backbone = require('backbone');\n\nmodule.exports = Backbone.Model.extend({\n\n  url: function (method) {\n    return this.visualization.url(method) + '/next_id';\n  },\n\n  initialize: function () {\n    this.visualization = this.get('visualization');\n    this.set('id', this.visualization.id);\n    this.unset('visualization');\n  }\n});\n","const Backbone = require('backbone');\nconst _ = require('underscore');\nconst $ = require('jquery');\nconst VisualizationModel = require('dashboard/data/visualization-model');\nconst checkAndBuildOpts = require('builder/helpers/required-opts');\n\nconst REQUIRED_OPTS = [\n  'configModel'\n];\n\n/**\n * Visualizations endpoint available for a given user.\n *\n * Usage:\n *\n *   const visualizations = new VisualizationsCollection();\n *   visualizations.fetch();\n *\n */\n\nmodule.exports = Backbone.Collection.extend({\n\n  _PREVIEW_TABLES_PER_PAGE: 10,\n  _TABLES_PER_PAGE: 20,\n  _PREVIEW_ITEMS_PER_PAGE: 3,\n  _ITEMS_PER_PAGE: 9,\n\n  sync: require('dashboard/data/backbone/sync-abort'),\n\n  initialize: function (models, opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n\n    var default_options = new Backbone.Model({\n      tag_name: '',\n      q: '',\n      page: 1,\n      type: 'derived',\n      exclude_shared: false,\n      per_page: this._ITEMS_PER_PAGE\n    });\n\n    this.options = _.extend(default_options, this.options);\n\n    this.total_entries = 0;\n\n    this.bind('reset', this._checkPage, this);\n  },\n\n  model: function (attrs, opts) {\n    const options = { ...opts, configModel: opts.collection._configModel };\n\n    return new VisualizationModel(attrs, options);\n  },\n\n  getTotalPages: function () {\n    return Math.ceil(this.total_entries / this.options.get('per_page'));\n  },\n\n  _checkPage: function () {\n    const total = this.getTotalPages();\n\n    if (this.options.get('page') > total) {\n      this.options.set({ page: total + 1 });\n    } else if (this.options.get('page') < 1) {\n      this.options.set({ page: 1 });\n    }\n  },\n\n  _createUrlOptions: function () {\n    const urlParams = _(this.options.attributes).map((v, k) => `${k}=${encodeURIComponent(v)}`);\n\n    return _.compact(urlParams).join('&');\n  },\n\n  url: function (method) {\n    const version = this._configModel.urlVersion('visualizations', method);\n\n    return `/api/${version}/viz?${this._createUrlOptions()}`;\n  },\n\n  remove: function (options) {\n    this.total_entries--;\n\n    Backbone.Collection.prototype.remove.apply(this, arguments);\n  },\n\n  // add bindMap: false for all the visulizations\n  // vis model does not need map information in dashboard\n  parse: function (response) {\n    this.total_entries = response.total_entries;\n    this.slides && this.slides.reset(response.children);\n    this.total_shared = response.total_shared;\n    this.total_likes = response.total_likes;\n    this.total_user_entries = response.total_user_entries;\n\n    return response.visualizations.map(vis => ({ ...vis, bindMap: false }));\n  },\n\n  create: function (model) {\n    const deferred = $.Deferred();\n\n    Backbone.Collection.prototype.create.call(this,\n      model,\n      {\n        wait: true,\n        success: () => deferred.resolve(),\n        error: () => deferred.reject()\n      }\n    );\n\n    return deferred.promise();\n  },\n\n  fetch: function (opts) {\n    var deferred = $.Deferred();\n    var self = this;\n\n    this.trigger('loading', this);\n\n    $.when(Backbone.Collection.prototype.fetch.call(this, opts))\n      .done(function (res) {\n        self.trigger('loaded');\n        deferred.resolve();\n      })\n      .fail(function (res) {\n        self.trigger('loadFailed');\n        deferred.reject(res);\n      });\n\n    return deferred.promise();\n  },\n\n  getTotalStat: function (attribute) {\n    return this[attribute] || 0;\n  },\n\n  getDefaultParam: function (param) {\n    return this.options.get(param);\n  }\n});\n","module.exports = {\n  getAssetsVersion: function (version) {\n    const query = window.location.search.substring(1);\n    const vars = query.split('&');\n    let i = 0;\n\n    for (i; i < vars.length; i++) {\n      const pair = vars[i].split('=');\n\n      if (pair[0] === 'v') {\n        return pair[1];\n      }\n    }\n\n    return window.StaticConfig.assetVersion || window.CartoConfig.data.user_frontend_version || version;\n  },\n\n  getAssetsBaseUrl: function () {\n    const data = window.CartoConfig.data;\n    const dataAssetsHost = data.asset_host && data.asset_host + '/assets';\n\n    const assetsBaseUrl =\n      window.StaticConfig.assetsBaseUrl ||\n      dataAssetsHost ||\n      data.config.app_assets_base_url;\n\n    return assetsBaseUrl + '/';\n  },\n\n  getAssetsUrl: function (version) {\n    return this.getAssetsBaseUrl() + this.getAssetsVersion(version);\n  }\n};\n","/**\n * Object representing human-readable version of a given number of bytes.\n *\n * (Extracted logic from an old dashboard view)\n *\n * @param bytes {Number}\n * @returns {Object}\n */\nconst BytesToSize = function (bytes) {\n  if (!(this instanceof BytesToSize)) return new BytesToSize(bytes);\n\n  this.bytes = bytes;\n  if (bytes === 0) {\n    this.unit = 0;\n  } else {\n    this.unit = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));\n  }\n\n  return this;\n};\n\nBytesToSize.prototype.size = function () {\n  return (this.bytes / Math.pow(1024, this.unit));\n};\n\nBytesToSize.prototype.UNIT_SUFFIXES = ['B', 'kB', 'MB', 'GB', 'TB'];\nBytesToSize.prototype.suffix = function () {\n  return this.UNIT_SUFFIXES[this.unit];\n};\n\nBytesToSize.prototype.toString = function (decimals) {\n  let size = this.size();\n  if (decimals) {\n    // 1 decimal: 9.995 => 9.9\n    const round = Math.pow(10, decimals);\n    size = Math.floor(size * round) / round;\n  } else {\n    size = Math.floor(size);\n  }\n  return size + this.suffix();\n};\n\nmodule.exports = BytesToSize;\n","var _ = require('underscore');\n\n/**\n *  Local storage wrapper\n *\n *  - It should be used within 'cartodb' key, for example:\n *\n *  var loc_sto = new cdb.common.LocalStorage();\n *  loc_sto.set({ 'dashboard.order': 'create_at' });\n *  loc_sto.get('dashboard.order');\n *\n */\n\nvar LocalStorageWrapper = function (name) {\n  this.name = name || 'cartodb';\n  if (!localStorage.getItem(this.name) && this.isEnabled()) {\n    localStorage.setItem(this.name, '{}');\n  }\n};\n\n// Some browsers with private mode don't allow to use\n// local storage\nLocalStorageWrapper.prototype.isEnabled = function () {\n  try {\n    localStorage.setItem('checking', 'test');\n    localStorage.removeItem('checking');\n    return true;\n  } catch (e) {\n    return false;\n  }\n};\n\nLocalStorageWrapper.prototype.get = function (n) {\n  if (!this.isEnabled()) return false;\n\n  if (n === undefined) {\n    return JSON.parse(localStorage.getItem(this.name));\n  } else {\n    var data = JSON.parse(localStorage.getItem(this.name));\n    return data[n];\n  }\n};\n\nLocalStorageWrapper.prototype.search = function (searchTerm) {\n  if (!this.isEnabled()) return null;\n\n  var wholeArray = JSON.parse(localStorage.getItem(this.name));\n\n  for (var i in wholeArray) {\n    if (wholeArray[i][searchTerm]) {\n      return wholeArray[i][searchTerm];\n    }\n  }\n  return null;\n};\n\nLocalStorageWrapper.prototype.set = function (data) {\n  if (!this.isEnabled()) return null;\n  var d = _.extend(this.get(), data);\n  return localStorage.setItem(this.name, JSON.stringify(d));\n};\n\nLocalStorageWrapper.prototype.add = function (obj) {\n  return this.set(obj);\n};\n\nLocalStorageWrapper.prototype.remove = function (n) {\n  if (!this.isEnabled()) return null;\n  var d = _.omit(this.get(), n);\n  return localStorage.setItem(this.name, JSON.stringify(d));\n};\n\nLocalStorageWrapper.prototype.destroy = function () {\n  delete localStorage.removeItem(this.name);\n};\n\nmodule.exports = LocalStorageWrapper;\n","const $ = require('jquery');\nconst ConfirmPasswordModal = require('dashboard/components/password-confirmation/password-confirmation-view.js');\n\nclass PasswordValidatedForm {\n  static bindEventTo (formSelector, options) {\n    const form = $(formSelector);\n    const saveButton = form.find('.js-save');\n\n    saveButton.bind('click', event => {\n      event.preventDefault();\n      event.stopPropagation();\n\n      if (!options.passwordConfirmationNeeded) {\n        return options.onPasswordTyped ? options.onPasswordTyped() : this.addPasswordToForm(form);\n      }\n\n      this.showPasswordModal({\n        modalService: options.modals,\n        onPasswordTyped: options.onPasswordTyped || this.addPasswordToForm.bind(this, form)\n      });\n    });\n  }\n\n  static showPasswordModal (options) {\n    options.modalService.create(modalModel => {\n      return new ConfirmPasswordModal({\n        modalModel,\n        onPasswordTyped: options.onPasswordTyped\n      });\n    });\n  }\n\n  static addPasswordToForm (form, password, options = {}) {\n    const passwordInput = document.createElement('input');\n    passwordInput.setAttribute('type', 'hidden');\n    passwordInput.setAttribute('name', 'password_confirmation');\n    passwordInput.setAttribute('value', password);\n\n    form.prepend(passwordInput);\n    if (!options.doNotSubmit) {\n      form.submit();\n    }\n  }\n}\n\nmodule.exports = PasswordValidatedForm;\n","const pluralize = function (singular, plural, count) {\n  if (arguments.length === 2) {\n    // Backward compability with prev usages, retrofit to the new params signature\n    // pluralize('foobar' , 3) // => foobars\n    return pluralize.call(this, arguments[0], arguments[0] + 's', arguments[1]);\n  }\n\n  return count === 1 ? singular : plural;\n};\n\npluralize.prefixWithCount = function (singular, plural, count) {\n  return pluralize(\n    `1 ${singular}`, // e.g. 1 item\n    `${count} ${plural}`, // e.g. 123 items\n    count\n  );\n};\n\nmodule.exports = pluralize;\n","// This used to be on core-model\n/**\n  * Listen for an event on another object and triggers on itself, with the same name or a new one\n  * @method retrigger\n  * @param ev {String} event who triggers the action\n  * @param obj {Object} object where the event happens\n  * @param obj {Object} [optional] name of the retriggered event\n  * @todo [xabel]: This method is repeated here and in the base view definition. There's should be a way to make it unique\n  */\nmodule.exports = function (ev, obj, retrigEvent) {\n  if (!retrigEvent) {\n    retrigEvent = ev;\n  }\n  obj.bind && obj.bind(ev, () => {\n    this.trigger(retrigEvent);\n  }, this);\n};\n","/*\n* Returns a (double) quoted table name if needed (if it contains a dash, for example).\n* Coupled to backend lib/carto/table_utils.rb#safe_table_name_quoting.\n* Duplicated at lib/assets/javascripts/builder/helpers/utils.js to make it available for older models.\n*/\nmodule.exports = function (table_name) {\n  if (table_name === undefined || table_name.indexOf('-') === -1 || table_name[0] === '\"' || table_name[table_name.length - 1] === '\"') {\n    return table_name;\n  } else {\n    return '\"' + table_name + '\"';\n  }\n};\n","var $ = require('jquery');\nvar CoreView = require('backbone/core-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\n\nvar REQUIRED_OPTS = [\n  'el'\n];\n\nmodule.exports = CoreView.extend({\n\n  events: {\n    'click .js-foo': '_fooHandler'\n  },\n\n  initialize: function (opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n    this._onWindowScroll = this._onWindowScroll.bind(this);\n\n    this._topBoundary = this.$el.offset().top;\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this._bindScroll();\n  },\n\n  _onWindowScroll: function () {\n    this.$el.toggleClass('is-fixed', $(window).scrollTop() > this._topBoundary);\n  },\n\n  _unbindScroll: function () {\n    $(window).unbind('scroll', this._onWindowScroll);\n  },\n\n  _bindScroll: function () {\n    this._unbindScroll();\n    $(window).bind('scroll', this._onWindowScroll);\n  },\n\n  clean: function () {\n    this._unbindScroll();\n  }\n});\n","const _ = require('underscore');\n\nmodule.exports = {\n  sortSchema: function (schema) {\n    var priorities = {\n      'cartodb_id': 1,\n      'the_geom': 2,\n      '__default__': 3,\n      'created_at': 4,\n      'updated_at': 5\n    };\n\n    function priority (v) {\n      return priorities[v] || priorities['__default__'];\n    }\n\n    return _.chain(schema)\n      .clone()\n      .sort(function (a, b) { // ..and then re-sort by priorities defined above\n        var prioA = priority(a[0]);\n        var prioB = priority(b[0]);\n        if (prioA < prioB) {\n          return -1;\n        } else if (prioA > prioB) {\n          return 1;\n        } else { // priority is the same (i.e. __default__), so compare alphabetically\n          return a[0] < b[0] ? -1 : 1;\n        }\n      })\n      .value();\n  },\n\n  /**\n   * return true if the sql query alters table schema in some way\n   */\n  alterTable: function (sql) {\n    sql = sql.trim();\n    return sql.search(/alter\\s+[\\w\\.\"]+\\s+/i) !== -1 ||\n           sql.search(/drop\\s+[\\w\\.\\\"]+/i) !== -1 ||\n           sql.search(/^vacuum\\s+[\\w\\.\\\"]+/i) !== -1 ||\n           sql.search(/^create\\s+[\\w\\.\\\"]+/i) !== -1 ||\n           sql.search(/^reindex\\s+[\\w\\.\\\"]+/i) !== -1 ||\n           sql.search(/^grant\\s+[\\w\\.\\\"]+/i) !== -1 ||\n           sql.search(/^revoke\\s+[\\w\\.\\\"]+/i) !== -1 ||\n           sql.search(/^cluster\\s+[\\w\\.\\\"]+/i) !== -1 ||\n           sql.search(/^comment\\s+on\\s+[\\w\\.\\\"]+/i) !== -1 ||\n           sql.search(/^explain\\s+[\\w\\.\\\"]+/i) !== -1;\n  },\n\n  /**\n   * return true if the sql query alters table data\n   */\n  alterTableData: function (sql) {\n    return this.alterTable(sql) ||\n           sql.search(/^refresh\\s+materialized\\s+view\\s+[\\w\\.\\\"]+/i) !== -1 ||\n           sql.search(/^truncate\\s+[\\w\\.\\\"]+/i) !== -1 ||\n           sql.search(/insert\\s+into/i) !== -1 ||\n           sql.search(/update\\s+[\\w\\.\\-\"]+\\s+.*set/i) !== -1 ||\n           sql.search(/delete\\s+from/i) !== -1;\n  }\n\n};\n","const _ = require('underscore');\nconst $ = require('jquery');\nconst Backbone = require('backbone');\nconst SQL = require('internal-carto.js').SQL;\nconst safeTableNameQuoting = require('dashboard/helpers/safe-table-name-quoting');\nconst cartoMetadataStatic = require('./carto-table-metadata-static');\nconst checkAndBuildOpts = require('builder/helpers/required-opts');\nconst CartoTableData = require('dashboard/data/table/carto-table-data');\nconst ColumnModel = require('dashboard/data/table/column-model');\nconst RowModel = require('dashboard/data/table/row-model');\nconst PermissionModel = require('dashboard/data/permission-model');\nconst ImportModel = require('dashboard/data/import-model');\nconst TableSynchronizationModel = require('dashboard/data/table-synchronization-model');\nconst getSimpleGeometryType = require('builder/data/get-simple-geometry-type');\nconst retrigger = require('dashboard/helpers/retrigger');\n\nconst REQUIRED_OPTS = [\n  'configModel'\n];\n\nconst Base = Backbone.Model.extend({\n\n  columnNames: function () {\n    return _.map(this.get('schema'), function (c) {\n      return c[0];\n    });\n  },\n\n  columnName: function (idx) {\n    return this.columnNames()[idx];\n  }\n});\n\nconst CartoTableMetadata = Base.extend({\n  currentLoading: 0, // class variable (shared). I'm still not sure if this is messy as hell or powerfull as a transformer\n\n  _TEXTS: {\n    columnDeleted: 'Your column has been deleted',\n    columnDeleting: 'Deleting your column',\n    columnAdded: 'Your column has been added',\n    columnAdding: 'Adding new column'\n  },\n\n  hiddenColumns: [\n    'the_geom',\n    'the_geom_webmercator',\n    'cartodb_georef_status',\n    'created_at',\n    'updated_at',\n    'cartodb_id'\n  ],\n\n  initialize: function (attrs, opts) {\n    checkAndBuildOpts(opts, REQUIRED_OPTS, this);\n    _.bindAll(this, 'notice');\n    this.readOnly = false;\n    this.bind('change:schema', this._prepareSchema, this);\n    this._prepareSchema();\n    this.sqlView = null;\n    this.synchronization = new TableSynchronizationModel({ configModel: opts.configModel });\n    this.synchronization.linkToTable(this);\n    this.synchronization.bind('change:id', function isSyncChanged () {\n      this.trigger('change:isSync', this, this.synchronization.isSync());\n    }, this);\n    if (this.get('no_data_fetch')) {\n      this.no_data_fetch = true;\n      delete this.attributes.no_data_fetch;\n    }\n    this.data();\n    this.bind('error', function (e, resp) {\n      this.error('', resp);\n    }, this);\n    this._data.bind('error', function (e, resp) {\n      this.notice('error loading rows, check your SQL query', 'error', 5000);\n    }, this);\n\n    this._data.bind('reset', function () {\n      var view = this._data;\n      this.set({\n        schema: view.schemaFromData(this.get('schema')),\n        geometry_types: view.getGeometryTypes()\n      });\n    }, this);\n\n    retrigger.call(this, 'change', this._data, 'data:changed');\n    retrigger.call(this, 'saved', this._data, 'data:saved');\n\n    this.bind('change:table_visualization', function () {\n      this.permission = new PermissionModel(this.get('table_visualization').permission, { configModel: this._configModel });\n      this.trigger('change:permission', this, this.permission);\n    }, this);\n\n    // create permission if permission is set\n    this.permission = new PermissionModel(this.get('permission'), { configModel: this._configModel });\n  },\n\n  url: function (method) {\n    var version = this._configModel.urlVersion('table', method);\n    var base = '/api/' + version + '/tables';\n    if (this.isNew()) {\n      return base;\n    }\n    return base + '/' + this.id;\n  },\n\n  // use the name as the id since the api works\n  // in the same way to table name and id\n  parse: function (resp, xhr) {\n    if (resp.name) {\n      resp.id = resp.name;\n    }\n    // move geometry_types to stats one\n    // geometry_types from backend are not reliable anymore and it can only be used\n    // for non editing stuff (showing icons, general checks on table list)\n    resp.stats_geometry_types = resp.geometry_types;\n    delete resp.geometry_types;\n    delete resp.schema;\n    return resp;\n  },\n\n  notice: function (msg, type, timeout) {\n    this.trigger('notice', msg, type, timeout);\n  },\n\n  setReadOnly: function (_) {\n    var trigger = false;\n    if (this.readOnly !== _) {\n      trigger = true;\n    }\n    this.readOnly = _;\n    if (trigger) {\n      this.trigger('change:readOnly', this, _);\n    }\n  },\n\n  isReadOnly: function () {\n    return this.readOnly || this.data().isReadOnly() || this.synchronization.isSync();\n  },\n\n  isSync: function () {\n    return this.synchronization.isSync();\n  },\n\n  getUnqualifiedName: function () {\n    var name = this.get('name');\n    if (!name) return null;\n    var tk = name.split('.');\n    if (tk.length == 2) { // eslint-disable-line eqeqeq\n      return tk[1];\n    }\n    return name;\n  },\n\n  // \"user\".table -> user.table\n  getUnquotedName: function () {\n    var name = this.get('name');\n    return name && name.replace(/\"/g, '');\n  },\n\n  sortSchema: function () {\n    this.set('schema', CartoTableMetadata.sortSchema(this.get('schema')));\n  },\n\n  error: function (msg, resp) {\n    let err = '';\n    try {\n      err = resp && resp.responseText && JSON.parse(resp.responseText).errors[0];\n    } catch (e) {\n    } finally {\n      this.trigger('notice', msg + ': ' + err, 'error');\n    }\n  },\n\n  _prepareSchema: function () {\n    this._columnType = {};\n\n    _(this.get('schema')).each((schema) => {\n      this._columnType[schema[0]] = schema[1];\n    });\n\n    if (!this.isInSQLView()) {\n      this.set('original_schema', this.get('schema'));\n    }\n  },\n\n  columnNames: function (sc) {\n    sc = sc || 'schema';\n    return _(this.get(sc)).pluck(0);\n  },\n\n  containsColumn: function (name) {\n    return _.contains(this.columnNames(), name);\n  },\n\n  columnNamesByType: function (type, sc) {\n    sc = sc || 'schema';\n    var t = _(this.get(sc)).filter(function (c) {\n      return c[1] == type; // eslint-disable-line eqeqeq\n    });\n    return _(t).pluck(0);\n  },\n\n  // return geometry columns calculated backend stats\n  // use geomColumnTypes if you need something reliable (but slower and async)\n  statsGeomColumnTypes: function (geometryTypes) {\n    return this.geomColumnTypes(this.get('stats_geometry_types'));\n  },\n\n  // return the current column types in an array\n  // the values inside the array can be:\n  //  'point', 'line', 'polygon'\n  geomColumnTypes: function (geometryTypes) {\n    var types = geometryTypes || this.get('geometry_types');\n    var geomTypes = [];\n    if (!_.isArray(types)) {\n      return [];\n    }\n    var _map = {\n      'st_multipolygon': 'polygon',\n      'st_polygon': 'polygon',\n      'st_multilinestring': 'line',\n      'st_linestring': 'line',\n      'st_multipoint': 'point',\n      'st_point': 'point'\n    };\n    for (var t in types) {\n      var type = types[t];\n      // when there are rows with no geo type null is returned as geotype\n      if (type) {\n        var a = _map[type.toLowerCase()];\n        if (a) {\n          geomTypes.push(a);\n        }\n      }\n    }\n    return _.uniq(geomTypes);\n  },\n\n  /**\n   *  Adding a new geometry type to the table\n   *  @param geom type {st_polygon, st_point,...}\n   *  @param set options\n   */\n  addGeomColumnType: function (t, opts) {\n    if (!t) return;\n    var types = _.clone(this.get('geometry_types')) || [];\n    if (!_.contains(types, t)) {\n      types.push(t);\n\n      this.set({\n        'geometry_types': types\n      }, opts);\n    }\n  },\n\n  nonReservedColumnNames: function () {\n    return _.filter(this.columnNames(), (columnName) => {\n      return !this.isReservedColumn(columnName);\n    });\n  },\n\n  columnTypes: function () {\n    return _.clone(this._columnType);\n  },\n\n  _getColumn: function (columnName) {\n    if (this._columnType[columnName] === undefined) {\n      return;\n      // throw \"the column does not exists\";\n    }\n    var c = new ColumnModel({\n      table: this,\n      name: columnName,\n      type: this._columnType[columnName],\n      configModel: this._configModel\n    }, { configModel: this._configModel });\n    return c;\n  },\n\n  getColumnType: function (columnName, sc) {\n    sc = sc || 'schema';\n    var t = _(this.get(sc)).filter(function (c) {\n      return c[0] == columnName;// eslint-disable-line eqeqeq\n    });\n    if (t.length > 0) {\n      return t[0][1];\n    }\n  },\n\n  addColumn: function (columnName, columnType, opts) {\n    var c = new ColumnModel({\n      table: this,\n      _name: columnName,\n      type: columnType || 'string',\n      configModel: this._configModel\n    }, { configModel: this._configModel });\n    this.notice(this._TEXTS.columnAdding, 'load', 0);\n    c.save(null, {\n      success: (model, obj) => {\n        this.notice(this._TEXTS.columnAdded, 'info');\n        this.trigger('columnAdd', columnName);\n        this.data().fetch();\n        opts && opts.success && opts.success(model, obj);\n      },\n      error: (error, resp) => {\n        this.error('error adding column', resp);\n        opts && opts.error && opts.error(error);\n      },\n      wait: true\n    });\n  },\n\n  deleteColumn: function (columnName, opts) {\n    var c = this._getColumn(columnName);\n    if (c !== undefined) {\n      this.notice(this._TEXTS.columnDeleting, 'load', 0);\n      c.destroy({\n        success: () => {\n          this.trigger('columnDelete', columnName);\n          this.notice(this._TEXTS.columnDeleted, 'info');\n          this.data().fetch();\n          opts && opts.success && opts.success();\n        },\n        error: (e, resp) => {\n          this.error('error deleting column', resp);\n          opts && opts.error && opts.error();\n        },\n        wait: true\n      });\n    }\n  },\n\n  renameColumn: function (columnName, newName, opts) {\n    if (columnName == newName) return; // eslint-disable-line eqeqeq\n    var c = this._getColumn(columnName);\n    var oldName = c.get('name');\n    c.set({\n      new_name: newName,\n      old_name: c.get('name')\n    });\n    this.notice('renaming column', 'load', 0);\n    c.save(null, {\n      success: (mdl, data) => {\n        this.notice('Column has been renamed', 'info');\n        this.trigger('columnRename', newName, oldName);\n        this.data().fetch();\n        opts && opts.success && opts.success(mdl, data);\n      },\n      error: (e, resp) => {\n        console.error(\"can't rename column\");\n        this.error('error renaming column', resp);\n        opts && opts.error && opts.error(e, resp);\n      },\n      wait: true\n    });\n  },\n\n  isTypeChangeAllowed: function (columnName, newType) {\n    var deactivateMatrix = {\n      'number': ['date'],\n      'boolean': ['date'],\n      'date': ['boolean']\n    };\n    var c = this._getColumn(columnName);\n    if (!c) {\n      return true;\n    }\n    var type = c.get('type');\n    var deactivated = deactivateMatrix[type] || [];\n    deactivated = deactivated.concat([type]);\n    return !_.contains(deactivated, newType);\n  },\n\n  isTypeChangeDestructive: function (columnName, newType) {\n    var columnType = this.getColumnType(columnName);\n\n    var destructiveMatrix = {\n      'string': {\n        'string': false,\n        'number': true,\n        'date': true,\n        'boolean': true\n      },\n      'number': {\n        'string': false,\n        'number': false,\n        'date': true,\n        'boolean': true\n      },\n      'date': {\n        'string': false,\n        'number': true,\n        'date': false,\n        'boolean': true\n      },\n      'boolean': {\n        'string': false,\n        'number': false,\n        'date': true,\n        'boolean': false\n      }\n    };\n    return destructiveMatrix[columnType][newType];\n  },\n\n  changeColumnType: function (columnName, newType, opts) {\n    var c = this._getColumn(columnName);\n\n    if (this.getColumnType(columnName) == newType) { // eslint-disable-line eqeqeq\n      opts && opts.success && opts.success();\n      return;\n    }\n    this.saveNewColumnType(c, newType, opts);\n  },\n\n  saveNewColumnType: function (column, newType, opts) {\n    column.set({ type: newType });\n    this.notice('Changing column type', 'load', 0);\n    column.save(null, {\n      success: () => {\n        this.notice('Column type has been changed', 'info');\n        this.trigger('typeChanged', newType); // to make it testable\n        this.data().fetch();\n        opts && opts.success && opts.success();\n      },\n      error: (e, resp) => {\n        this.trigger('typeChangeFailed', newType, e); // to make it testable\n        this.error('error changing column type', resp);\n        opts && opts.error && opts.error(e, resp);\n      },\n      wait: true\n    });\n  },\n\n  /**\n   * returns the original data for the table not the current applied view\n   */\n  originalData: function () {\n    return this._data;\n  },\n\n  data: function () {\n    if (this._data === undefined) {\n      this._data = new CartoTableData(null, {\n        table: this,\n        configModel: this._configModel\n      });\n      this.bindData();\n    }\n    if (this.sqlView) {\n      return this.sqlView;\n    }\n    return this._data;\n  },\n\n  bindData: function (data) {\n    if (this._data && !this._data.bindedReset) {\n      retrigger.call(this, 'sync', this._data, 'dataLoaded');\n      retrigger.call(this, 'add', this._data, 'dataAdded');\n      this._data.bindedReset = true;\n    }\n    if (this.sqlView && !this.sqlView.bindedReset) {\n      retrigger.call(this, 'sync', this.sqlView, 'dataLoaded');\n      retrigger.call(this, 'add', this.sqlView, 'dataAdded');\n      this.sqlView.bindedReset = true;\n    }\n  },\n\n  useSQLView: function (view, options) {\n    if (!view && !this.sqlView) return;\n    options = options || {};\n\n    if (this.sqlView) {\n      this.sqlView.unbind(null, null, this);\n      this.sqlView.unbind(null, null, this._data);\n    }\n\n    // reset previous\n    if (!view && this.sqlView) {\n      this.sqlView.table = null;\n    }\n\n    this.sqlView = view;\n    this.bindData();\n\n    if (view) {\n      view.bind('sync reset', function () {\n        if (!view.modify_rows) {\n          this.set({\n            schema: view.schemaFromData(this.get('schema')),\n            geometry_types: view.getGeometryTypes()\n          });\n        }\n      }, this);\n      // listen for errors\n      view.bind('error', function (e, resp) {\n        this.notice('error loading rows, check your SQL query', 'error', 5000);\n      }, this);\n\n      view.bind('loading', function () {\n        // this.notice(_t('loading query'), 'load', 0);\n      }, this);\n\n      view.bind('reset loaded', function () {\n        if (view.modify_rows) {\n          this.notice(view.affected_rows + ' rows affected');\n          this.useSQLView(null);\n        } else {\n          this.notice(_t('loaded'));\n        }\n      }, this);\n\n      // swicth source data\n      this.dataModel = this.sqlView;\n      view.table = this;\n    } else {\n      this.dataModel = this._data;\n      // get the original schema\n      this.set({\n        'schema': this.get('original_schema')\n      });/// *, { silent: true });\n      this.data().fetch();\n    }\n    this.trigger('change:dataSource', this.dataModel, this);\n  },\n\n  isInSQLView: function () {\n    return !!this.sqlView;\n  },\n\n  /**\n   * replace fetch functionally to add some extra call for logging\n   * it can be used in the same way fetch is\n   */\n  fetch: function (opts) {\n    const silent = opts ? opts.silent : false;\n    if (!silent) {\n      this.notice('loading table', 'load', this, 0, 0);\n    }\n    var xhr = Base.prototype.fetch.call(this, opts);\n    $.when(xhr).done(() => {\n      opts && opts.success && opts.success.old_success && opts.success.old_success();\n      if (!silent) {\n        this.notice('loaded');\n      }\n    }).fail(() => {\n      if (!silent) {\n        this.notice('error loading the table');\n      }\n    });\n    return xhr;\n  },\n\n  isReservedColumn: function (c) {\n    return RowModel.isReservedColumn(c);\n  },\n\n  /**\n   * when a table is linked to a infowindow each time a column\n   * is renamed or removed the table pings to infowindow to remove\n   * or rename the fields\n   */\n  linkToInfowindow: function (infowindow) {\n    this.bind('columnRename', function (newName, oldName) {\n      if (infowindow.containsField(oldName)) {\n        infowindow.removeField(oldName);\n        infowindow.addField(newName);\n      }\n    }, infowindow);\n    this.bind('columnDelete', function (oldName, newName) {\n      infowindow.removeField(oldName);\n    }, infowindow);\n\n    this.bind('change:schema', function () {\n      var columns = _(this.columnNames()).filter(function (c) {\n        return !_.contains(infowindow.SYSTEM_COLUMNS, c);\n      });\n\n      function _hash (str) {\n        var hash = 0;\n        var c;\n        var i;\n        for (i = 0; i < str.length; i++) {\n          c = str.charCodeAt(i);\n          hash = c + (hash << 6) + (hash << 16) - hash;\n        }\n        return hash;\n      }\n\n      if (this.isInSQLView()) {\n        if (!infowindow.has('defaul_schema_fields')) {\n          infowindow.saveFields('defaul_schema_fields');\n        }\n        var current_schema_key = 'schema_' + _hash(this.columnNames().sort().join(''));\n        var previous_schema_key = 'schema_' + _hash(\n          _(this.previous('schema')).pluck(0).sort().join('')\n        );\n\n        if (!infowindow.has(previous_schema_key)) {\n          infowindow.saveFields(previous_schema_key);\n        }\n        if (infowindow.has(current_schema_key)) {\n          infowindow.restoreFields(null, current_schema_key);\n        }\n      } else {\n        infowindow.restoreFields(null, 'defaul_schema_fields');\n      }\n\n      if (infowindow.get('template')) {\n        // merge fields checking actual schema\n        infowindow.mergeFields(columns);\n      } else {\n        // remove fields that no longer exist\n        infowindow.removeMissingFields(columns);\n      }\n    }, this);\n  },\n\n  embedURL: function () {\n    return '/tables/' + this.get('name') + '/embed_map';\n  },\n\n  /**\n   * @deprecated use vis.viewUrl() or vis.viewUrl(currentUser) instead.\n   */\n  viewUrl: function () {\n    return this._configModel.prefixUrl() + '/tables/' + this.getUnqualifiedName();\n  },\n\n  hasTheGeom: function () {\n    var currentSchema = this.get('schema');\n    // if we have \"the_geom\" in our current schema, returnstrue\n    for (var n in currentSchema) {\n      if (currentSchema[n][0] === 'the_geom') {\n        return true;\n      }\n    }\n    return false;\n  },\n\n  /**\n   * Checks the server to see if the table has any georeferenced row, independently of the applyed query\n   * @return {promise}\n   */\n  fetchGeoreferenceStatus: function () {\n    var dfd = $.Deferred();\n    var username = (this.options && this.options.user_data) ? this.options.user_data.username\n      : (window.user_data ? window.user_data.username : window.user_name);\n    var api_key = (this.options && this.options.user_data) ? this.options.user_data.api_key\n      : (window.user_data ? window.user_data.api_key : window.api_key);\n\n    this.sqlApi = new SQL({\n      user: username,\n      version: 'v1',\n      api_key: api_key,\n      sql_api_template: this._configModel.getSqlApiBaseUrl()\n    });\n\n    var sql = 'SELECT the_geom FROM ' + this.get('name') + ' WHERE the_geom is not null';\n    this.sqlApi.execute(sql).done(function (data) {\n      if (data.rows.length > 0) {\n        dfd.resolve(true);\n      } else {\n        dfd.resolve(false);\n      }\n    });\n\n    return dfd.promise();\n  },\n\n  /**\n   * Checks the current loaded records to see if they are georeferenced\n   * @return {boolean}\n   */\n  isGeoreferenced: function () {\n    var geoColumns = this.geomColumnTypes();\n    if (geoColumns && geoColumns.length > 0) {\n      return true;\n    } else {\n      if (!this.isInSQLView()) {\n        // sometimes the columns are changed in the frontend site\n        // and the geocolumns are not updated.\n        // check the columns in local\n        return this._data.any(function (row) {\n          return row.hasGeometry();\n        });\n      }\n    }\n    return false;\n  },\n\n  /**\n   * this function can only be called during change event\n   * returns true if the geometry type has changed\n   * for this method multipolygon and polygon are the same geometry type\n   */\n  geometryTypeChanged: function () {\n    if (!('geometry_types' in this.changed)) return false;\n    var geoTypes = this.get('geometry_types');\n    var prevGeoTypes = this.previousAttributes().geometry_types;\n    function normalize (e) {\n      e = e.toLowerCase();\n      if (e === 'st_multipolygon') {\n        return 'st_polygon';\n      }\n      if (e === 'st_multilinestring') {\n        return 'st_linestring';\n      }\n      if (e === 'st_multipoint') {\n        return 'st_point';\n      }\n      return e;\n    }\n\n    if (!geoTypes ||\n      geoTypes.length === 0 ||\n      !prevGeoTypes ||\n      prevGeoTypes.length === 0) {\n      return true;\n    }\n\n    var n = normalize(geoTypes[0]);\n    var o = normalize(prevGeoTypes[0]);\n    return n !== o;\n  },\n\n  /**\n   * Get necessary data create a duplicated dataset from this table.\n   *\n   * @param {Object} newName name of new dataset.\n   * @param {Object} callbacks\n   * @returns {Object}\n   */\n  duplicate: function (newName, callbacks) {\n    callbacks = callbacks || {};\n\n    // Extracted from duplicate_table_dialog\n    var data = {\n      table_name: newName\n    };\n\n    // Set correct data object, depending on if the app has a query applied or not\n    if (this.isInSQLView()) {\n      var query = this.data().getSQL();\n      data.sql = (!query || query == '') ? 'SELECT * FROM ' + safeTableNameQuoting(this.get('name')) : query; // eslint-disable-line eqeqeq\n    } else {\n      data.table_copy = this.get('name');\n    }\n\n    var importModel = new ImportModel();\n    importModel.save(data, {\n      error: callbacks.error,\n      success: (model, changes) => {\n        var checkImportModel = new ImportModel({\n          item_queue_id: changes.item_queue_id\n        });\n\n        checkImportModel.bind('importComplete', () => {\n          checkImportModel.unbind();\n\n          // So import is done, create new table object from the new table and fetch, callback once finished.\n          var newTable = new CartoTableMetadata({\n            id: checkImportModel.get('table_id')\n          }, { configModel: this._configModel });\n\n          newTable.fetch({\n            success: function () {\n              callbacks.success(newTable);\n            },\n            error: callbacks.error\n          });\n        });\n\n        checkImportModel.bind('importError', function () {\n          checkImportModel.unbind();\n          callbacks.error.apply(this, arguments);\n        });\n\n        checkImportModel.pollCheck();\n      }\n    });\n  },\n\n  /**\n   * Get the visualizations that are using this table dataset.\n   * Note! a .fetch() is required to be sure the data to be available.\n   * @return {Array}\n   */\n  dependentVisualizations: function () {\n    // dependent = visualizations with a single layer\n    // non-dependant = have more than this dataset as a layer\n    return _.chain(this.get('dependent_visualizations'))\n      .union(this.get('non_dependent_visualizations'))\n      .compact()\n      .value() || [];\n  },\n\n  getGeometryType: function () {\n    var types = this.get('geometry_types');\n    var geomTypes = [];\n    if (!_.isArray(types)) {\n      return [];\n    }\n\n    for (var t in types) {\n      var type = types[t];\n      // when there are rows with no geo type null is returned as geotype\n      if (type) {\n        var a = getSimpleGeometryType(type.toLowerCase());\n        if (a) {\n          geomTypes.push(a);\n        }\n      }\n    }\n\n    return _.uniq(geomTypes);\n  }\n\n}, {\n  /**\n   * creates a new table from query\n   * the called is responsable of calling save to create\n   * the table in the server\n   */\n  createFromQuery: function (name, query, configModel) {\n    return new CartoTableMetadata({\n      sql: query,\n      name: name\n    }, { configModel });\n  },\n\n  ...cartoMetadataStatic\n});\n\nmodule.exports = CartoTableMetadata;\n","var carto = require('internal-carto.js');\nvar _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar createDefaultFallbackMap = require('dashboard/components/create-fallback-map');\n\n/**\n * View to render the \"favourite\" map, either a user's map visualization, or a default fallback map.\n */\nmodule.exports = CoreView.extend({\n\n  render: function () {\n    this.$el.removeClass('is-pre-loading').addClass('is-loading');\n\n    var promise;\n    if (this.options.createVis) {\n      promise = this._createVisMap(this.options.createVis);\n    } else {\n      promise = this._createFallbackMap();\n    }\n\n    var self = this;\n    promise.done(function () {\n      self.$el.removeClass('is-loading');\n      self.$('.js-spinner').remove();\n    });\n\n    return this;\n  },\n\n  _createVisMap: function (createVis) {\n    return carto.createVis(this.el, createVis.url || createVis.vizJson, _.defaults(createVis.opts, {\n      authToken: 'default_public',\n      title: false,\n      header: false,\n      description: false,\n      searchControl: false,\n      layer_selector: false,\n      text: false,\n      image: false,\n      zoomControl: false,\n      logo: false,\n      scrollwheel: false,\n      mobile_layout: true,\n      legends: false,\n      loader: false,\n      fullscreen: false,\n      no_cdn: false\n    }));\n  },\n\n  _createFallbackMap: function () {\n    createDefaultFallbackMap({\n      el: this.el,\n      basemap: this.options.fallbackBaselayer\n    });\n\n    // Fake promise, to keep the render method consistent with how the vis map would have been handled (async)\n    return {\n      done: function (fn) {\n        fn();\n      }\n    };\n  }\n\n});\n","var _ = require('underscore');\nvar cdb = require('internal-carto.js');\nvar Dashboard = require('deep-insights/api/dashboard.js');\nvar DashboardView = require('deep-insights/dashboard-view');\nvar WidgetsCollection = require('deep-insights/widgets/widgets-collection');\nvar WidgetsService = require('deep-insights/widgets-service');\nvar URLHelper = require('deep-insights/api/url-helper');\n\n/**\n * Translates a vizJSON v3 datastructure into a working dashboard which will be rendered in given selector.\n *\n * @param {String} selector e.g. \"#foobar-id\", \".some-class\"\n * @param {Object} vizJSON JSON datastructure\n * @param {Object} opts (Optional) flags, see 3rd param for cdb.createVis for available ones. Keys used here:\n *   renderMenu: {Boolean} If true (default), render a top-level menu on the left side.\n * @return {Object} with keys:\n *   dashboardView: root (backbone) view of the dashboard\n *   vis: the instantiated vis map, same result as given from cdb.createVis()\n */\nvar createDashboard = function (selector, vizJSON, opts, callback) {\n  var dashboardEl = document.querySelector(selector);\n  if (!dashboardEl) throw new Error('no element found with selector ' + selector);\n\n  // Default options\n  opts = opts || {};\n  opts.renderMenu = _.isBoolean(opts.renderMenu)\n    ? opts.renderMenu\n    : true;\n  opts.autoStyle = _.isBoolean(opts.autoStyle)\n    ? opts.autoStyle\n    : false;\n\n  var widgets = new WidgetsCollection();\n\n  var model = new cdb.core.Model({\n    title: vizJSON.title,\n    description: vizJSON.description,\n    updatedAt: vizJSON.updated_at,\n    userName: vizJSON.user.fullname,\n    userProfileURL: vizJSON.user.profile_url,\n    userAvatarURL: vizJSON.user.avatar_url,\n    renderMenu: opts.renderMenu,\n    autoStyle: opts.autoStyle,\n    showLogo: opts.cartodb_logo,\n    initialPosition: {\n      bounds: vizJSON.bounds\n    }\n  });\n  var dashboardView = new DashboardView({\n    el: dashboardEl,\n    widgets: widgets,\n    model: model\n  });\n  var dashboardState = opts.state || URLHelper.getStateFromCurrentURL();\n  if (dashboardState && !_.isEmpty(dashboardState.map)) {\n    if (_.isArray(dashboardState.map.center)) {\n      vizJSON.center = dashboardState.map.center;\n    }\n    if (_.isNumber(dashboardState.map.zoom)) {\n      vizJSON.zoom = dashboardState.map.zoom;\n    }\n    if (dashboardState.map.ne && dashboardState.map.sw) {\n      vizJSON.bounds = [dashboardState.map.ne, dashboardState.map.sw];\n    }\n  }\n\n  var vis = cdb.createVis(dashboardView.$('#map'), vizJSON, _.extend(opts, {\n    skipMapInstantiation: true\n  }));\n\n  vis.once('load', function (vis) {\n    var widgetsState = (dashboardState && dashboardState.widgets) || {};\n\n    // Create widgets\n    var widgetsService = new WidgetsService(widgets, vis.dataviews);\n\n    var widgetModelsMap = {\n      formula: widgetsService.createFormulaModel.bind(widgetsService),\n      histogram: widgetsService.createHistogramModel.bind(widgetsService),\n      'time-series': widgetsService.createTimeSeriesModel.bind(widgetsService),\n      category: widgetsService.createCategoryModel.bind(widgetsService)\n    };\n    vizJSON.widgets.forEach(function (widget) {\n      // Flatten the data structure given in vizJSON, the widgetsService will use whatever it needs and ignore the rest\n      var attrs = _.extend({}, widget, widget.options);\n      var newWidgetModel = widgetModelsMap[widget.type];\n      var state = widgetsState[widget.id];\n\n      if (_.isFunction(newWidgetModel)) {\n        // Find the Layer that the Widget should be created for.\n        var layer;\n        var source;\n        if (widget.layer_id) {\n          layer = vis.map.layers.get(widget.layer_id);\n        } else if (Number.isInteger(widget.layerIndex)) {\n          // TODO Since namedmap doesn't have ids we need to map in another way, here using index\n          //   should we solve this in another way?\n          layer = vis.map.layers.at(widget.layerIndex);\n        }\n        if (widget.source && widget.source.id) {\n          source = vis.analysis.findNodeById(widget.source.id);\n          attrs.source = source;\n        }\n\n        newWidgetModel(attrs, layer, state);\n      } else {\n        cdb.log.error('No widget found for type ' + widget.type);\n      }\n    });\n\n    dashboardView.render();\n\n    var callbackObj = {\n      dashboardView: dashboardView,\n      widgets: widgetsService,\n      areWidgetsInitialised: function () {\n        var widgetsCollection = widgetsService.getCollection();\n        if (widgetsCollection.size() > 0) {\n          return widgetsCollection.hasInitialState();\n        }\n        return true;\n      },\n      vis: vis\n    };\n\n    vis.instantiateMap({\n      success: function () {\n        callback && callback(null, callbackObj);\n      },\n      error: function (errorMessage) {\n        callback && callback(new Error(errorMessage), callbackObj);\n      }\n    });\n  });\n};\n\nmodule.exports = function (selector, vizJSON, opts, callback) {\n  var args = arguments;\n  var fn = args[args.length - 1];\n\n  if (_.isFunction(fn)) {\n    callback = fn;\n  }\n\n  function _load (vizJSON) {\n    createDashboard(selector, vizJSON, opts, function (error, dashboard) {\n      var _dashboard = new Dashboard(dashboard);\n\n      if (opts.share_urls) {\n        _dashboard.onStateChanged(\n          _.debounce(\n            function (state, url) {\n              window.history.replaceState('Object', 'Title', url);\n            },\n            500\n          )\n        );\n      }\n\n      callback && callback(error, _dashboard);\n    });\n  }\n\n  if (typeof vizJSON === 'string') {\n    cdb.core.Loader.get(vizJSON, function (data) {\n      if (data) {\n        _load(data, opts);\n      } else {\n        callback && callback(new Error('Error fetching viz.json file: ' + vizJSON));\n      }\n    });\n  } else {\n    _load(vizJSON, opts);\n  }\n};\n","var URLHelper = require('./url-helper');\nvar _ = require('underscore');\n\nfunction Dashboard (dashboard) {\n  this._dashboard = dashboard;\n\n  this.onDataviewsFetched(function () {\n    dashboard.widgets._widgetsCollection.initialState();\n    dashboard.widgets._widgetsCollection.each(function (m) {\n      m && m.applyInitialState && m.applyInitialState();\n    });\n  });\n}\n\nDashboard.prototype = {\n\n  /**\n   * @return {View} used in the dashboard\n   */\n  getView: function () {\n    return this._dashboard.dashboardView;\n  },\n\n  /**\n   * @return {Map} the map used in the dashboard\n   */\n  getMap: function () {\n    return this._dashboard.vis;\n  },\n\n  reloadMap: function () {\n    this.getMap().reload();\n  },\n\n  forceResize: function () {\n    this._dashboard.widgets.getCollection()\n      .each(function (widget) {\n        widget.forceResize();\n      });\n  },\n\n  /**\n   * @return {Array} of widgets in the dashboard\n   */\n  getWidgets: function () {\n    return this._dashboard.widgets.getList();\n  },\n\n  getDashboardURL: function () {\n    return URLHelper.getURLFromState(this.getState());\n  },\n\n  getState: function () {\n    var state = {};\n    var mapState = this.getMapState();\n    if (!_.isEmpty(mapState)) state.map = mapState;\n\n    var widgetsCollection = this._dashboard.widgets.getCollection();\n    var widgetsState = widgetsCollection.getStates();\n    if (!_.isEmpty(widgetsState)) state.widgets = widgetsState;\n    return state;\n  },\n\n  getMapState: function () {\n    var map = this._dashboard.vis.map;\n    var currentBoundingBox = map.getViewBounds();\n    var center = map.get('center');\n    var zoom = map.get('zoom');\n\n    return {\n      ne: currentBoundingBox[0],\n      sw: currentBoundingBox[1],\n      center: center,\n      zoom: zoom\n    };\n  },\n\n  setState: function (state) {\n    // todo: set map state\n    this._dashboard.widgets.setWidgetsState(state.widgets);\n    this._dashboard.vis.mapvis.map.setBounds([state.map.ne, state.map.sw]);\n  },\n\n  onDataviewsFetched: function (callback) {\n    var areWidgetsInitialized = this._dashboard.areWidgetsInitialised();\n    if (areWidgetsInitialized) {\n      callback && callback();\n    } else {\n      this._dashboard.vis.once('dataviewsFetched', function () {\n        callback && callback();\n      });\n    }\n  },\n\n  onStateChanged: function (callback) {\n    this.onDataviewsFetched(function () {\n      callback && this._bindChange(callback);\n    }.bind(this));\n  },\n\n  _bindChange: function (callback) {\n    var widgetsCollection = this._dashboard.widgets.getCollection();\n    widgetsCollection.bind('change', function () {\n      callback(this.getState(), this.getDashboardURL());\n    }, this);\n\n    this._dashboard.vis.map.bind('change', function () {\n      callback(this.getState(), this.getDashboardURL());\n    }, this);\n  },\n\n  /**\n   * @param {Integer} id - widget id\n   * @return a widget object\n   */\n  getWidget: function (id) {\n    return this._dashboard.widgets.get(id);\n  },\n\n  /**\n   * Create a category widget.\n   * @param {Object} widgetAttrs - attributes for the new widget\n   * @param {string} widgetAttrs.id - id (required)\n   * @param {string} widgetAttrs.title - title (required)\n   * @param {number} widgetAttrs.order - index of the widget (optional)\n   * @param ...\n   * @return {CategoryWidget} The new widget\n   */\n  createCategoryWidget: function (widgetAttrs, layer) {\n    return this._dashboard.widgets.createCategoryModel(widgetAttrs, layer, null);\n  },\n\n  /**\n   * Create a histogram widget\n   * @param {Object} widgetAttrs - attributes for the new widget\n   * @param {string} widgetAttrs.id - id (required)\n   * @param {string} widgetAttrs.title - title (required)\n   * @param {number} widgetAttrs.order - index of the widget (optional)\n   * @param ...\n   * @return {HistogramWidget} The new widget\n   */\n  createHistogramWidget: function (widgetAttrs, layer) {\n    return this._dashboard.widgets.createHistogramModel(widgetAttrs, layer, null);\n  },\n\n  /**\n   * Create a formula widget\n   * @param {Object} widgetAttrs - attributes for the new widget\n   * @param {string} widgetAttrs.id - id (required)\n   * @param {string} widgetAttrs.title - title (required)\n   * @param {number} widgetAttrs.order - index of the widget (optional)\n   * @param ...\n   * @return {FormulaWidget} The new widget\n   */\n  createFormulaWidget: function (widgetAttrs, layer) {\n    return this._dashboard.widgets.createFormulaModel(widgetAttrs, layer, null);\n  },\n\n  /**\n   * Create a timesier es widget\n   * @param {Object} widgetAttrs - attributes for the new widget\n   * @param {string} widgetAttrs.id - id (required)\n   * @param {string} widgetAttrs.title - title (required)\n   * @param {number} widgetAttrs.order - index of the widget (optional)\n   * @param ...\n   * @return {TimeSeriesWidget} The new widget\n   */\n  createTimeSeriesWidget: function (widgetAttrs, layer) {\n    return this._dashboard.widgets.createTimeSeriesModel(widgetAttrs, layer, null);\n  }\n\n};\n\nmodule.exports = Dashboard;\n","var URI = require('urijs');\nvar _ = require('underscore');\n\nmodule.exports = {\n  getURLFromState: function (state) {\n    var thisURL = new URI(this.getLocalURL());\n    thisURL.removeQuery('state');\n    if (!_.isEmpty(state)) {\n      var statesString = JSON.stringify(state);\n      thisURL.setQuery('state', statesString);\n    }\n    return thisURL.toString();\n  },\n  getStateFromCurrentURL: function () {\n    var currentURL = this.getLocalURL();\n    return this.getStateFromURL(currentURL);\n  },\n  getStateFromURL: function (url) {\n    var uri = new URI(url);\n    var state;\n    var result = {};\n    if (uri.hasQuery('state')) {\n      state = uri.query(true)['state'];\n      if (!_.isEmpty(state)) {\n        result = JSON.parse(decodeURIComponent(state));\n      }\n    }\n    return result;\n  },\n  getLocalURL: _.constant(window.location.href)\n};\n","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar WidgetViewFactory = require('./widgets/widget-view-factory');\nvar TimeSeriesContentView = require('./widgets/time-series/content-view');\nvar TorqueTimeSeriesContentView = require('./widgets/time-series/torque-content-view');\n\nvar TIME_SERIES_TYPE = 'time-series';\n\nmodule.exports = CoreView.extend({\n  className: 'CDB-Dashboard-belowMap',\n\n  initialize: function (options) {\n    this._widgetViewFactory = new WidgetViewFactory([\n      {\n        // same type as below, but also check if the associated layer is a a torque layer\n        match: function (widgetModel) {\n          if (widgetModel.get('type') === TIME_SERIES_TYPE) {\n            var dataviewModel = widgetModel.dataviewModel;\n            var layerModel = widgetModel.layerModel;\n            return dataviewModel && layerModel.get('type') === 'torque' && widgetModel.get('animated') === true;\n          }\n          return false;\n        },\n        createContentView: function (widgetModel) {\n          return new TorqueTimeSeriesContentView({\n            model: widgetModel\n          });\n        },\n        customizeWidgetAttrs: function (attrs) {\n          attrs.className += ' CDB-Widget--timeSeries';\n          return attrs;\n        }\n      }, {\n        type: TIME_SERIES_TYPE,\n        createContentView: function (widgetModel) {\n          return new TimeSeriesContentView({\n            model: widgetModel\n          });\n        },\n        customizeWidgetAttrs: function (attrs) {\n          attrs.className += ' CDB-Widget--timeSeries';\n          return attrs;\n        }\n      }\n    ]);\n\n    this._widgets = options.widgets;\n    this._widgets.bind('add', this._maybeRenderWidgetView, this);\n    this._widgets.bind('reset', this.render, this);\n    this._widgets.bind('add reset remove', this._onWidgetsChange, this);\n    this.add_related_model(this._widgets);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    this._widgets.each(this._maybeRenderWidgetView, this);\n    this._toggleVisiblity();\n\n    return this;\n  },\n\n  _maybeRenderWidgetView: function (widgetModel) {\n    var view = this._widgetViewFactory.createWidgetView(widgetModel);\n    if (view) {\n      this.addView(view);\n      this.$el.append(view.render().el);\n    }\n  },\n\n  _toggleVisiblity: function () {\n    this.$el.toggle(!_.isEmpty(this._subviews));\n  },\n\n  _onWidgetsChange: function () {\n    this._widgets.each(function (widget) {\n      widget.forceResize();\n    });\n    this._toggleVisiblity();\n  }\n});\n","var cdb = require('internal-carto.js');\nvar CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar $ = require('jquery');\nvar template = require('./dashboard-menu-view.tpl');\nvar moment = require('moment');\nvar Ps = require('perfect-scrollbar');\n\nvar BREAKPOINT = 1201;\n\nvar DashboardMenuView = CoreView.extend({\n  className: 'CDB-Dashboard-menu',\n\n  events: {\n    'click .js-toggle-view': '_toogleView'\n  },\n\n  initialize: function () {\n    this.viewModel = new cdb.core.Model({\n      open: false,\n      footer: $(window).width() < BREAKPOINT\n    });\n\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.viewModel, 'change', this.render);\n    this._resize = _.debounce(this._onResizeWindow.bind(this), 20);\n    $(window).on('resize', this._resize);\n  },\n\n  render: function () {\n    var shortTitle = this.model.get('title');\n    var isOpen = this.viewModel.get('open');\n    var isFooter = this.viewModel.get('footer');\n\n    if (shortTitle && shortTitle.length > 120) {\n      shortTitle = shortTitle.slice(0, 110) + '...' + ' %23 map';\n    }\n\n    this.$el.html(\n      template({\n        hasTranslation: isOpen || isFooter,\n        showLogo: this.model.get('showLogo'),\n        title: this.model.get('title'),\n        description: this.model.get('description'),\n        updatedAt: moment(this.model.get('updatedAt')).fromNow(),\n        userName: this.model.get('userName'),\n        url: window.location.href,\n        urlWithoutParams: window.location.protocol + '//' + window.location.host + window.location.pathname,\n        inIframe: (window.location !== window.parent.location),\n        shortTitle: shortTitle,\n        userAvatarURL: this.model.get('userAvatarURL'),\n        userProfileURL: this.model.get('userProfileURL')\n      })\n    );\n\n    this.$el.toggleClass('is-active', isOpen);\n\n    var content = this._getDescription().get(0);\n    Ps.initialize(content, {\n      wheelSpeed: 2,\n      suppressScrollX: true\n    });\n\n    return this;\n  },\n\n  _getDescription: function () {\n    return this.$('.js-scroll-wrapper');\n  },\n\n  _toogleView: function () {\n    var open = this.viewModel.get('open');\n    this.viewModel.set({open: !open});\n  },\n\n  _onResizeWindow: function () {\n    this.viewModel.set({\n      footer: $(window).width() < BREAKPOINT\n    });\n  },\n\n  clean: function () {\n    $(window).off('resize', this._resize);\n    CoreView.prototype.clean.call(this);\n  }\n});\n\nmodule.exports = DashboardMenuView;\n","var _ = require('underscore');\nvar $ = require('jquery');\nvar Ps = require('perfect-scrollbar');\nvar CoreView = require('backbone/core-view');\nvar CategoryContentView = require('./widgets/category/content-view');\nvar FormulaContentView = require('./widgets/formula/content-view');\nvar HistogramContentView = require('./widgets/histogram/content-view');\nvar WidgetViewFactory = require('./widgets/widget-view-factory');\nvar template = require('./dashboard-sidebar.tpl');\nvar matchMedia = window.matchMedia;\n\nmodule.exports = CoreView.extend({\n  className: 'CDB-Widget-canvas',\n\n  initialize: function (options) {\n    this._widgetViewFactory = new WidgetViewFactory([\n      {\n        type: 'formula',\n        createContentView: function (widgetModel) {\n          return new FormulaContentView({\n            model: widgetModel\n          });\n        }\n      }, {\n        type: 'histogram',\n        createContentView: function (widgetModel) {\n          return new HistogramContentView({\n            model: widgetModel\n          });\n        }\n      }, {\n        type: 'category',\n        createContentView: function (widgetModel) {\n          return new CategoryContentView({\n            model: widgetModel\n          });\n        }\n      }\n    ]);\n\n    this._widgets = options.widgets;\n\n    this._widgets.bind('add', this._maybeRenderWidgetView, this);\n    this._widgets.bind('reset', this.render, this);\n    this._widgets.bind('orderChanged', this.render, this);\n    this._widgets.bind('change:collapsed', this._onWidgetUpdate, this);\n    this._widgets.bind('add remove reset', this._onWidgetsChange, this);\n    this.add_related_model(this._widgets);\n\n    this._resizeHandler = this._onResize.bind(this);\n  },\n\n  render: function () {\n    this._cleanScroll();\n    this._observer && this._observer.disconnect();\n    this.clearSubViews();\n\n    this.$el.html(template());\n    this.$el.toggleClass('CDB-Widget-canvas--withMenu', this.model.get('renderMenu'));\n    this._widgets.each(this._maybeRenderWidgetView, this);\n    this._toggleVisiblity();\n\n    this._renderScroll();\n    this._renderShadows();\n    this._bindScroll();\n    this._initResize();\n\n    return this;\n  },\n\n  _initResize: function () {\n    var breakpoints = ['(max-width: 1600px)', '(max-width: 1280px)', '(max-width: 759px)'];\n    breakpoints.forEach(function (breakpoint) {\n      var mq = matchMedia(breakpoint);\n      mq.addListener(this._resizeHandler);\n    }, this);\n  },\n\n  _updateScrollCss: function () {\n    this._onWidgetUpdate();\n\n    var element = this._container();\n    if (!element) return;\n\n    var containerWidth = element.clientWidth;\n    var containerHeight = element.clientHeight;\n    var contentWidth = element.scrollWidth;\n    var contentHeight = element.scrollHeight;\n    var xScroll = containerWidth < contentWidth;\n    var yScroll = containerHeight < contentHeight;\n\n    this._$container().toggleClass('hasXScroll', xScroll);\n    this._$container().toggleClass('hasYScroll', yScroll);\n  },\n\n  _$container: function () {\n    return $(this._container());\n  },\n\n  _container: function () {\n    return this.el.querySelector('.js-container');\n  },\n\n  _maybeRenderWidgetView: function (widgetModel) {\n    var view = this._widgetViewFactory.createWidgetView(widgetModel);\n\n    if (view) {\n      this.addView(view);\n      this._$container().append(view.render().el);\n    }\n  },\n\n  _bindScroll: function () {\n    this._$container()\n      .on('ps-y-reach-start', _.bind(this._onScrollTop, this))\n      .on('ps-y-reach-end', _.bind(this._onScrollBottom, this))\n      .on('ps-scroll-y', _.bind(this._onScroll, this));\n  },\n\n  _renderScroll: function () {\n    Ps.initialize(this._container(), {\n      wheelSpeed: 1,\n      wheelPropagation: false,\n      swipePropagation: true,\n      stopPropagationOnClick: false,\n      minScrollbarLength: 20,\n      useBothWheelAxes: true\n    });\n  },\n\n  _onWidgetUpdate: function () {\n    Ps.update(this._container());\n  },\n\n  _renderShadows: function () {\n    this.$shadowTop = $('<div>').addClass('CDB-Widget-canvasShadow CDB-Widget-canvasShadow--top');\n    this.$shadowBottom = $('<div>').addClass('CDB-Widget-canvasShadow CDB-Widget-canvasShadow--bottom');\n    this.$el.append(this.$shadowTop);\n    this.$el.append(this.$shadowBottom);\n  },\n\n  _onScrollTop: function () {\n    this.$shadowTop.removeClass('is-visible');\n  },\n\n  _onScroll: function () {\n    var $el = this._$container();\n    var currentPos = $el.scrollTop();\n    var max = $el.get(0).scrollHeight;\n    var height = $el.outerHeight();\n    var maxPos = max - height;\n\n    this.$shadowTop.toggleClass('is-visible', currentPos > 0);\n    this.$shadowBottom.toggleClass('is-visible', currentPos < maxPos);\n  },\n\n  _updateScroll: function () {\n    this._$container().scrollLeft = 0;\n    this._$container().scrollTop = 0;\n  },\n\n  _onResize: function (mediaQuery) {\n    // we don't use mediaQuery.matches\n    // trigger actions always if breakpoints changes\n    this._updateScroll();\n    this._onScroll();\n  },\n\n  _onScrollBottom: function () {\n    this.$shadowBottom.removeClass('is-visible');\n  },\n\n  _cleanScroll: function () {\n    $(window).off('resize', this._resizeHandler);\n    if (this._container()) {\n      this._$container().off('ps-scroll-y');\n      Ps.destroy(this._container());\n    }\n  },\n\n  _toggleVisiblity: function () {\n    this.$el.toggle(!_.isEmpty(this._subviews));\n  },\n\n  _onWidgetsChange: function () {\n    this._toggleVisiblity();\n    this.render();\n  },\n\n  clean: function () {\n    this._cleanScroll();\n    this._observer && this._observer.disconnect();\n    CoreView.prototype.clean.call(this);\n  }\n\n});\n","var $ = require('jquery');\nvar CoreView = require('backbone/core-view');\nvar template = require('./dashboard.tpl');\nvar DashboardBelowMapView = require('./dashboard-below-map-view');\nvar DashboardMenuView = require('./dashboard-menu-view');\nvar DashboardSidebarView = require('./dashboard-sidebar-view');\n\n/**\n * Dashboard is a wrapper around the map canvas, which contains widget views for the map contdxt\n * Widgets may be rendered in two areas, in the \"sidebar\" or \"below-map\".\n */\nmodule.exports = CoreView.extend({\n  className: 'CDB-Dashboard-canvas',\n\n  initialize: function (options) {\n    this._widgets = options.widgets;\n    this._infoView = options.infoView;\n\n    // TODO parent context requires some markup to be present already, but NOT the other views\n    this.el.classList.add(this.className);\n    this.$el.html(template());\n\n    this._onWindowResize = this._onWindowResize.bind(this);\n    $(window).bind('resize', this._onWindowResize);\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    var view;\n    var doRenderMenu = this.model.get('renderMenu');\n\n    this.$el.toggleClass('CDB-Dashboard-canvas--withMenu', doRenderMenu);\n\n    if (doRenderMenu) {\n      view = new DashboardMenuView({\n        model: this.model\n      });\n      this.addView(view);\n      this.$el.append(view.render().el);\n    }\n\n    const hasTimeSeries = this._widgets.some(function (model) {\n      return model.get('type') === 'time-series';\n    });\n\n    if (hasTimeSeries) {\n      this.$el.toggleClass('CDB-Dashboard-canvas--withTimeSeries');\n    }\n\n    view = new DashboardBelowMapView({\n      widgets: this._widgets\n    });\n    this.addView(view);\n    this.$('.js-map-wrapper')\n      .toggleClass('CDB-Dashboard-mapWrapper--withMenu', doRenderMenu)\n      .append(view.render().el);\n\n    if (this._widgets && this._widgets.length) {\n      this.$el.toggleClass('CDB-Dashboard-canvas--withWidgets');\n    }\n\n    view = new DashboardSidebarView({\n      widgets: this._widgets,\n      model: this.model\n    });\n    this.addView(view);\n    this.$el.append(view.render().el);\n\n    return this;\n  },\n\n  getInitialMapState: function () {\n    return {\n      bounds: this.model.get('initialPosition').bounds\n    };\n  },\n\n  _onWindowResize: function () {\n    this._widgets.each(function (widget) {\n      widget.forceResize();\n    });\n  },\n\n  clean: function () {\n    $(window).unbind('resize', this._onWindowResize);\n    CoreView.prototype.clean.call(this);\n  }\n});\n","var ACTIVE_LOCALE = 'en';\nvar Locale = require('locale/index');\nvar Polyglot = require('node-polyglot');\nvar polyglot = new Polyglot({\n  locale: ACTIVE_LOCALE, // Needed for pluralize behaviour\n  phrases: Locale[ACTIVE_LOCALE]\n});\nvar _t = polyglot.t.bind(polyglot);\n\nvar MAP = {\n  'aggregate-intersection': {\n    title: _t('analyses.aggregate-intersection.short-title')\n  },\n  'bounding-box': {\n    title: _t('analyses.bounding-box.short-title')\n  },\n  'bounding-circle': {\n    title: _t('analyses.bounding-circle.short-title')\n  },\n  'buffer': {\n    title: _t('analyses.area-of-influence.short-title')\n  },\n  'centroid': {\n    title: _t('analyses.centroid.short-title')\n  },\n  'convex-hull': {\n    title: _t('analyses.convex-hull.short-title')\n  },\n  'concave-hull': {\n    title: _t('analyses.concave-hull.short-title')\n  },\n  'data-observatory-measure': {\n    title: _t('analyses.data-observatory-measure.short-title')\n  },\n  'data-observatory-multiple-measures': {\n    title: _t('analyses.data-observatory-multiple-measures.short-title')\n  },\n  'filter-by-node-column': {\n    title: _t('analyses.filter-by-node-column.short-title')\n  },\n  'filter-category': {\n    title: _t('analyses.filter.short-title')\n  },\n  'filter-range': {\n    title: _t('analyses.filter.short-title')\n  },\n  'georeference-city': {\n    title: _t('analyses.georeference.short-title')\n  },\n  'georeference-ip-address': {\n    title: _t('analyses.georeference.short-title')\n  },\n  'georeference-country': {\n    title: _t('analyses.georeference.short-title')\n  },\n  'georeference-long-lat': {\n    title: _t('analyses.georeference.short-title')\n  },\n  'georeference-postal-code': {\n    title: _t('analyses.georeference.short-title')\n  },\n  'georeference-street-address': {\n    title: _t('analyses.georeference.short-title')\n  },\n  'georeference-admin-region': {\n    title: _t('analyses.georeference.short-title')\n  },\n  'intersection': {\n    title: _t('analyses.filter-intersection.short-title')\n  },\n  'kmeans': {\n    title: _t('analyses.kmeans.short-title')\n  },\n  'line-to-single-point': {\n    title: _t('analyses.connect-with-lines.short-title')\n  },\n  'line-source-to-target': {\n    title: _t('analyses.connect-with-lines.short-title')\n  },\n  'line-sequential': {\n    title: _t('analyses.connect-with-lines.short-title')\n  },\n  'merge': {\n    title: _t('analyses.merge.short-title')\n  },\n  'moran': {\n    title: _t('analyses.moran-cluster.short-title')\n  },\n  'routing-sequential': {\n    title: _t('analyses.routing.short-title')\n  },\n  'routing-to-layer-all-to-all': {\n    title: _t('analyses.routing.short-title')\n  },\n  'routing-to-single-point': {\n    title: _t('analyses.routing.short-title')\n  },\n  'sampling': {\n    title: _t('analyses.sampling.short-title')\n  },\n  'spatial-markov-trend': {\n    title: _t('analyses.spatial-markov-trend.short-title')\n  },\n  'trade-area': {\n    title: _t('analyses.area-of-influence.short-title')\n  },\n  'weighted-centroid': {\n    title: _t('analyses.centroid.short-title')\n  },\n  'closest': {\n    title: _t('analyses.find-nearest.short-title')\n  },\n  'deprecated-sql-function': {\n    title: _t('analyses.deprecated-sql-function.short-title')\n  }\n};\n\nvar getAnalysisByType = function (type) {\n  var safeType = type === '' ? 'unknown' : type;\n  return MAP[safeType] || {\n    title: _t('analyses.' + safeType)\n  };\n};\n\nmodule.exports = {\n  MAP: MAP,\n\n  title: function (type) {\n    return getAnalysisByType(type).title;\n  }\n};\n","var _ = require('underscore');\nvar d3 = require('d3');\nvar moment = require('moment');\n\nvar AGGREGATION_FORMATS = {\n  second: {\n    display: 'HH:mm:ss',\n    unit: 's'\n  },\n  minute: {\n    display: 'HH:mm - MMM Do, YYYY',\n    unit: 'm'\n  },\n  hour: {\n    display: 'HH:00 - MMM Do, YYYY',\n    unit: 'h'\n  },\n  day: {\n    display: 'MMM Do, YYYY',\n    unit: 'd'\n  },\n  week: {\n    display: 'MMM Do, YYYY',\n    unit: 'w'\n  },\n  month: {\n    display: 'MMM YYYY',\n    unit: 'M'\n  },\n  quarter: {\n    display: '[Q]Q YYYY',\n    unit: 'Q'\n  },\n  year: {\n    display: 'YYYY',\n    unit: 'y'\n  },\n  decade: {\n    display: 'YYYY',\n    unit: 'y'\n  }\n};\n\nvar format = {};\n\nformat.formatNumber = function (value, unit) {\n  if (!_.isNumber(value) || value === 0) {\n    return value;\n  }\n\n  var format = d3.format('.2s');\n  var p = 0;\n  var absV = Math.abs(value);\n\n  if (value > 1000) {\n    value = format(value) + (unit ? ' ' + unit : '');\n    return value;\n  }\n\n  if (absV > 100) {\n    p = 0;\n  } else if (absV > 10) {\n    p = 1;\n  } else if (absV > 1) {\n    p = 2;\n  } else if (absV > 0) {\n    p = Math.max(Math.ceil(Math.abs(Math.log(absV) / Math.log(10))) + 2, 3);\n  }\n\n  value = value.toFixed(p);\n  var m = value.match(/(\\.0+)$/);\n  if (m) {\n    value = value.replace(m[0], '');\n  }\n\n  return value;\n};\n\nformat.formatDate = function (value) {\n  return d3.time.format('%Y-%m-%d')(value);\n};\n\nformat.formatTime = function (value) {\n  return d3.time.format('%H:%M:%S %d/%m/%Y')(value);\n};\n\nformat.timeFactory = function (format) {\n  return d3.time.format(format);\n};\n\nformat.formatValue = function (value) {\n  if (_.isNumber(value)) {\n    return format.formatNumber(value);\n  }\n  if (_.isDate(value)) {\n    return format.formatDate(value);\n  }\n  return value;\n};\n\nformat.timestampFactory = function (aggregation, offset) {\n  return function (timestamp) {\n    if (!_.has(AGGREGATION_FORMATS, aggregation)) {\n      return '-';\n    }\n    var format = AGGREGATION_FORMATS[aggregation];\n    var date = moment.unix(timestamp).utc();\n    if (_.isFinite(offset)) {\n      date.utcOffset(offset / 60);\n    }\n    var formatted = date.format(format.display);\n    return formatted;\n  };\n};\n\nmodule.exports = format;\n","module.exports = {\n  VERSION: '',\n  createDashboard: require('./api/create-dashboard')\n};\n","var _ = require('underscore');\n\nvar ERRORS = {\n  generic: {\n    level: 'error',\n    refresh: true\n  },\n  limit: {\n    level: 'error',\n    error: 'Timeout',\n    message: 'The server is taking too long to respond, due to poor conectivity or a temporary error with our servers. Please try again soon.',\n    refresh: true\n  },\n  no_data_available: {\n    level: 'alert',\n    error: 'No data available',\n    message: 'There are no results for the combination of filters applied to your data. Try tweaking your filters, or zoom and pan the map to adjust the Map View.',\n    refresh: false\n  },\n  too_many_bins: {\n    level: 'error',\n    error: 'Too many bins returned',\n    message: 'There are too many bins returned. Try selecting a less granular aggregation or filtering the data source.',\n    refresh: false\n  },\n  dataview: {\n    level: 'error',\n    refresh: false\n  }\n};\n\nmodule.exports = function (error) {\n  var type = error && error.type && _.has(ERRORS, error.type)\n    ? error.type\n    : 'generic';\n  return _.extend({}, error, ERRORS[type]);\n};\n","var _ = require('underscore');\n\nmodule.exports = function escapeHTML (str) {\n  return _.escape(str);\n};\n","/**\n  * Gets the value at path of object. If the resolved value is undefined, the defaultValue is returned in its place.\n  * @param {Object} object The object to query.\n  * @param {String} path The path of the property to get.\n  * @param {Any} defaultValue The value returned for undefined resolved values.\n  * @return {Any} Returns the resolved value.\n  */\nmodule.exports = function (object, path, defaultValue) {\n  var keys = path.split('.');\n  var value = keys.reduce(function (a, b) {\n    return (a || {})[b];\n  }, object);\n\n  return value || defaultValue;\n};\n","var _ = require('underscore');\n\nmodule.exports = {\n  COLORS: [\n    '#11A579',\n    '#E83f74',\n    '#9F5DC8',\n    '#EF8205',\n    '#29B3B2',\n    '#E54F3B',\n    '#59BB12',\n    '#EF57BA',\n    '#E2AF00',\n    '#12AADE'\n  ],\n\n  /**\n   * Get the letter representation.\n   * @param {String, Object} sourceId or backbone model that have id. e.g. 'c2'\n   * @return {String} e.g. 'c' or an empty string if there is no letter in the given id\n   */\n  letter: function (sourceId) {\n    if (!sourceId || !_.isString(sourceId)) return '';\n    var match = sourceId.match(/^([a-z]+)/);\n    return (_.isArray(match) && match[0]) || '';\n  },\n\n  /**\n   * Returns a color given a letter\n   * @param  {String} Letter. eg: 'a', 'b', 'c', etc.\n   * @return {String} Hex color code: eg: '#7F3C8D'\n   */\n  getColorForLetter: function (letter) {\n    if (!letter) {\n      return this.COLORS[0];\n    }\n\n    var letterNumber = letter.charCodeAt(0) - 97;\n    var colorIndex = ((letterNumber / this.COLORS.length % 1) * 10).toFixed();\n    return this.COLORS[colorIndex] || this.COLORS[0];\n  }\n};\n","var moment = require('moment');\nvar _ = require('underscore');\nvar helper = {};\n\nhelper.substractOneUnit = function (timestamp, aggregation) {\n  if (!_.isNumber(timestamp)) {\n    return timestamp;\n  }\n\n  var result = moment.unix(timestamp).utc();\n  aggregation && aggregation === 'week'\n    ? result.subtract(1, 'day')\n    : result.subtract(1, aggregation);\n\n  return result.unix();\n};\n\nmodule.exports = helper;\n","var _ = require('underscore');\n\nmodule.exports = function unescapeHTML (str) {\n  return _.unescape(str);\n};\n","var $ = require('jquery');\n\nvar TABLET_WIDTH = 760;\nvar MOBILE_WIDTH = 480;\n\nvar utils = {};\n\nutils._isViewport = function (vp) {\n  return $(window).width() < vp;\n};\n\nutils.isMobileViewport = function () {\n  return this._isViewport(MOBILE_WIDTH);\n};\n\nutils.isTabletViewport = function () {\n  return this._isViewport(TABLET_WIDTH);\n};\n\nmodule.exports = utils;\n","var _ = require('underscore');\nvar WidgetModel = require('./widgets/widget-model');\nvar CategoryWidgetModel = require('./widgets/category/category-widget-model');\nvar HistogramWidgetModel = require('./widgets/histogram/histogram-widget-model');\nvar TimeSeriesWidgetModel = require('./widgets/time-series/time-series-widget-model');\n\nvar WIDGETSTYLEPARAMS = {\n  auto_style_allowed: 'autoStyleEnabled'\n};\n\n// We create an object with options off the attributes\nvar makeWidgetStyleOptions = function (attrs) {\n  return _.reduce(WIDGETSTYLEPARAMS, function (memo, value, key) {\n    if (attrs[key] !== undefined) {\n      memo[value] = attrs[key];\n      return memo;\n    }\n  }, {});\n};\n\nvar _checkProperties = function (obj, propertiesArray) {\n  _.each(propertiesArray, function (prop) {\n    if (obj[prop] === undefined) {\n      throw new Error(prop + ' is required');\n    }\n  });\n};\n\nvar extendAttrs = function (attrs, state, hasInitialState) {\n  return _.extend(attrs, state, { hasInitialState: hasInitialState }); // Will overwrite preset attributes with the ones passed on the state\n};\n\nvar checkAnalysisModel = function (attrs) {\n  if (!(attrs.source instanceof Object) || !attrs.source.cid) {\n    throw new Error('Source must be defined and be an instance of AnalysisModel.');\n  }\n};\n\n/**\n * Public API to interact with dashboard widgets.\n */\nvar WidgetsService = function (widgetsCollection, dataviews) {\n  this._widgetsCollection = widgetsCollection;\n  this._dataviews = dataviews;\n};\n\nWidgetsService.prototype.getCollection = function () {\n  return this._widgetsCollection;\n};\n\nWidgetsService.prototype.get = function (id) {\n  return this._widgetsCollection.get(id);\n};\n\nWidgetsService.prototype.getList = function () {\n  return this._widgetsCollection.models;\n};\n\n/**\n * @param {Object} attrs\n * @param {String} attrs.title Title rendered on the widget view\n * @param {String} attrs.column Name of column to use to aggregate\n * @param {String} attrs.aggregation Name of aggregation operation to apply to get categories\n *   can be any of ['sum', 'count']. Default is 'count'\n * @param {String} attrs.aggregation_column column to be used for the aggregation operation\n *  it only applies for sum operations.\n * @param {Object} attrs.source Object with the id of the source analysis node that the widget points to\n * @param {Object} layer Instance of a layer model (cartodb.js)\n * @return {CategoryWidgetModel}\n */\nWidgetsService.prototype.createCategoryModel = function (attrs, layer, state) {\n  _checkProperties(attrs, ['title']);\n  var extendedAttrs = extendAttrs(attrs, state, this._widgetsCollection.hasInitialState());\n  checkAnalysisModel(extendedAttrs);\n\n  var dataviewModel = this._dataviews.createCategoryModel(extendedAttrs);\n\n  var ATTRS_NAMES = ['id', 'title', 'order', 'collapsed', 'prefix', 'suffix', 'show_stats', 'show_source', 'style', 'hasInitialState'];\n  var widgetAttrs = _.pick(extendedAttrs, ATTRS_NAMES);\n  var options = makeWidgetStyleOptions(extendedAttrs);\n\n  widgetAttrs.attrsNames = ATTRS_NAMES;\n\n  var widgetModel = new CategoryWidgetModel(widgetAttrs, {\n    dataviewModel: dataviewModel,\n    layerModel: layer\n  }, options);\n  widgetModel.setInitialState(state);\n  this._widgetsCollection.add(widgetModel);\n\n  return widgetModel;\n};\n\n/**\n * @param {Object} attrs\n * @param {String} attrs.title Title rendered on the widget view\n * @param {String} attrs.column Name of column\n * @param {Number} attrs.bins Count of bins\n * @param {Object} layer Instance of a layer model (cartodb.js)\n * @return {WidgetModel}\n */\nWidgetsService.prototype.createHistogramModel = function (attrs, layer, state, opts) {\n  _checkProperties(attrs, ['title']);\n  var extendedAttrs = extendAttrs(attrs, state, this._widgetsCollection.hasInitialState());\n  checkAnalysisModel(extendedAttrs);\n  var dataviewModel = this._dataviews.createHistogramModel(extendedAttrs);\n\n  // Default bins attribute was removed from dataViewModel because of time-series aggregation.\n  // Just in case it's needed for histogram models we added it here.\n  if (!dataviewModel.has('bins')) {\n    dataviewModel.set('bins', 10, { silent: true });\n  }\n\n  var attrsNames = ['id', 'title', 'order', 'collapsed', 'bins', 'show_stats', 'show_source', 'normalized', 'style', 'hasInitialState', 'table_name'];\n  var widgetAttrs = _.pick(extendedAttrs, attrsNames);\n  var options = makeWidgetStyleOptions(extendedAttrs);\n\n  widgetAttrs.type = 'histogram';\n  widgetAttrs.attrsNames = attrsNames;\n\n  var widgetModel = new HistogramWidgetModel(widgetAttrs, {\n    dataviewModel: dataviewModel,\n    layerModel: layer\n  }, options);\n  widgetModel.setInitialState(state);\n  this._widgetsCollection.add(widgetModel);\n\n  return widgetModel;\n};\n\n/**\n * @param {Object} attrs\n * @param {String} attrs.title Title rendered on the widget view\n * @param {String} attrs.column Name of column\n * @param {String} attrs.operation Name of operation to use, can be any of ['min', 'max', 'avg', 'sum']\n * @param {Object} layer Instance of a layer model (cartodb.js)\n * @return {CategoryWidgetModel}\n */\nWidgetsService.prototype.createFormulaModel = function (attrs, layer, state) {\n  _checkProperties(attrs, ['title']);\n  var extendedAttrs = extendAttrs(attrs, state, this._widgetsCollection.hasInitialState());\n  checkAnalysisModel(extendedAttrs);\n  var dataviewModel = this._dataviews.createFormulaModel(extendedAttrs);\n\n  var ATTRS_NAMES = ['id', 'title', 'order', 'collapsed', 'prefix', 'suffix', 'show_stats', 'show_source', 'description', 'hasInitialState'];\n  var widgetAttrs = _.pick(extendedAttrs, ATTRS_NAMES);\n  widgetAttrs.type = 'formula';\n  widgetAttrs.attrsNames = ATTRS_NAMES;\n\n  var widgetModel = new WidgetModel(widgetAttrs, {\n    dataviewModel: dataviewModel,\n    layerModel: layer\n  });\n  widgetModel.setInitialState(state);\n  this._widgetsCollection.add(widgetModel);\n\n  return widgetModel;\n};\n\n/**\n * @param {Object} attrs\n * @param {String} attrs.column Name of column that contains\n * @param {Object} layer Instance of a layer model (cartodb.js)\n * @param {Number} bins\n * @return {WidgetModel}\n */\nWidgetsService.prototype.createTimeSeriesModel = function (attrs, layer, state, opts) {\n  // TODO will other kind really work for a time-series?\n  attrs.column_type = attrs.column_type || 'date';\n  checkAnalysisModel(attrs);\n  var dataviewModel = this._dataviews.createHistogramModel(attrs);\n\n  var ATTRS_NAMES = ['id', 'style', 'title', 'normalized', 'animated', 'timezone'];\n  var widgetAttrs = _.pick(attrs, ATTRS_NAMES);\n  widgetAttrs.type = 'time-series';\n  widgetAttrs.attrsNames = ATTRS_NAMES;\n\n  var widgetModel = new TimeSeriesWidgetModel(widgetAttrs, {\n    dataviewModel: dataviewModel,\n    layerModel: layer\n  }, opts);\n  widgetModel.setInitialState(state);\n  this._widgetsCollection.add(widgetModel);\n\n  return widgetModel;\n};\n\nWidgetsService.prototype.setWidgetsState = function (state) {\n  this._widgetsCollection.setStates(state);\n};\n\nmodule.exports = WidgetsService;\n","var _ = require('underscore');\nvar d3 = require('d3');\nvar CoreView = require('backbone/core-view');\n\n/**\n * Animate between two values\n */\nmodule.exports = CoreView.extend({\n  animateFromValues: function (from, to, className, template, opts) {\n    var $el = this.$(className);\n    var options = opts || {};\n    var formatter = options.formatter || d3.format('0,000');\n    var templateData = options.templateData || {};\n    var debounceWait = options.debounceWait || 500;\n\n    var hasDecimals = (to % 1 === 0);\n\n    var stepValue = function (i) {\n      i = hasDecimals ? Math.round(i) : i;\n      var value = (_.isNaN(i) || i === undefined) ? (options.defaultValue || 0) : formatter(i);\n      var data = _.extend({ value: value }, templateData);\n      $el.text(template(data));\n    };\n\n    if (options.animationSpeed === 0) {\n      stepValue(to);\n      return;\n    }\n\n    stepValue(from);\n\n    var animate = _.debounce(function () {\n      $el.prop('counter', from).stop().animate({ counter: to }, {\n        duration: options.animationSpeed || 500,\n        easing: options.easingMethod || 'swing',\n        step: stepValue\n      });\n    }, debounceWait);\n\n    animate();\n  },\n\n  animateFromCurrentValue: function (value, className, template, opts) {\n    var $el = this.$(className);\n\n    var options = opts || {};\n    var debounceWait = options.debounceWait || 500;\n\n    var to = value;\n    var from = +this.$(className).text();\n\n    var formatter = options.formatter || d3.format('0,000');\n    var templateData = options.templateData || {};\n\n    var hasDecimals = (to % 1 === 0);\n\n    var stepValue = function (i) {\n      i = hasDecimals ? Math.round(i) : i;\n      value = (_.isNaN(i) || i === undefined) ? (options.defaultValue || 0) : formatter(i);\n      var data = _.extend({ value: value }, templateData);\n      $el.text(template(data));\n    };\n\n    if (options.animationSpeed === 0) {\n      stepValue(to);\n      return;\n    }\n\n    stepValue(from);\n\n    var animate = _.debounce(function () {\n      $el.prop('counter', from).stop().animate({ counter: to }, {\n        duration: options.animationSpeed || 500,\n        easing: options.easingMethod || 'swing',\n        step: stepValue\n      });\n    }, debounceWait);\n\n    animate();\n  },\n\n  animateValue: function (model, what, className, template, opts) {\n    var $el = this.$(className);\n\n    var options = opts || {};\n    var debounceWait = options.debounceWait || 500;\n\n    var to = model.get(what);\n    var from = model.previous(what) || 0;\n\n    var formatter = options.formatter || d3.format('0,000');\n    var templateData = options.templateData || {};\n\n    var hasDecimals = (to % 1 === 0);\n\n    var stepValue = function (i) {\n      i = hasDecimals ? Math.round(i) : i;\n      var value = (_.isNaN(i) || i === undefined) ? (options.defaultValue || 0) : formatter(i);\n      var data = _.extend({ value: value }, templateData);\n      $el.text(template(data));\n    };\n\n    if (options.animationSpeed === 0) {\n      stepValue(to);\n      return;\n    }\n\n    stepValue(from);\n\n    var animate = _.debounce(function () {\n      $el.prop('counter', from).stop().animate({ counter: to }, {\n        duration: options.animationSpeed || 500,\n        easing: options.easingMethod || 'swing',\n        step: stepValue\n      });\n    }, debounceWait);\n\n    animate();\n  }\n});\n","var cdb = require('internal-carto.js');\nvar StyleUtils = require('./style-utils');\nvar CategoryColors = require('./category-colors');\nvar getValue = require('../../util/get-object-value');\n\nvar AutoStyler = cdb.core.Model.extend({\n  initialize: function (dataviewModel, layerModel, options) {\n    this.options = options || {};\n    this.styles = options && options.auto_style;\n    this.dataviewModel = dataviewModel;\n    this.colors = new CategoryColors(this.styles);\n    this.layer = layerModel;\n  },\n\n  getStyle: function () {\n    var style = this.layer.get('initialStyle');\n    if (!style) return;\n\n    AutoStyler.FILL_SELECTORS.forEach(function (item) {\n      style = StyleUtils.changeStyle(style, item, this._getFillColor(item));\n    }.bind(this));\n\n    AutoStyler.OPACITY_SELECTORS.forEach(function (item) {\n      style = StyleUtils.changeStyle(style, item, this._getOpacity());\n    }.bind(this));\n\n    return StyleUtils.replaceWrongSpaceChar(style);\n  },\n\n  _getColor: function () {\n    return getValue(this.styles, 'definition.color');\n  },\n\n  _getOpacity: function () {\n    return getValue(this.styles, 'definition.color.opacity');\n  }\n});\n\nAutoStyler.FILL_SELECTORS = ['marker-fill', 'polygon-fill', 'line-color'];\nAutoStyler.OPACITY_SELECTORS = ['marker-fill-opacity', 'polygon-opacity', 'line-opacity'];\n\nmodule.exports = AutoStyler;\n","var _ = require('underscore');\nvar colorScales = [\n  '#7F3C8D',\n  '#11A579',\n  '#3969AC',\n  '#F2B701',\n  '#E73F74'\n]; // Demo colors\n\nfunction getColorRange (styles) {\n  var colorRange = styles && styles.definition &&\n      styles.definition.color &&\n      styles.definition.color.range;\n\n  return colorRange || colorScales;\n}\n\n/**\n *  Class to set categories to each color\n *  - Right now, there is a relation 1 color to 1 category.\n *  - If that category is not available in the new data, that\n *    color will be freed.\n *\n */\n\nfunction CategoryColors (styles) {\n  this.updateColors(styles);\n}\n\nCategoryColors.prototype.updateColors = function (styles) {\n  var colorRange = getColorRange(styles);\n  this.colors = {};\n  _.each(colorRange, function (c) {\n    this.colors[c] = null;\n  }, this);\n};\n\nCategoryColors.prototype.updateData = function (d) {\n  // Remove categories from colors where they are not present anymore\n  _.each(this.colors, function (value, key) {\n    if (!_.contains(d, value)) {\n      this.colors[key] = null;\n    } else {\n      d = _.without(d, value);\n    }\n  }, this);\n\n  // Set colors by new categories\n  _.each(d, function (category) {\n    var nextFreeColor = this.getNextAvailableColor();\n    if (nextFreeColor) {\n      this.colors[nextFreeColor] = category;\n    }\n  }, this);\n};\n\nCategoryColors.prototype.getNextAvailableColor = function () {\n  for (var i in this.colors) {\n    if (this.colors[i] === null) {\n      return i;\n    }\n  }\n  return null;\n};\n\nCategoryColors.prototype.getColorByCategory = function (category) {\n  for (var i in this.colors) {\n    if (this.colors[i] === category) {\n      return i;\n    }\n  }\n  return '#A5AA99';\n};\n\nCategoryColors.prototype.getCategoryByColor = function (color) {\n  return this.colors[color];\n};\n\nmodule.exports = CategoryColors;\n","var _ = require('underscore');\nvar AutoStyler = require('./auto-styler');\n\nmodule.exports = AutoStyler.extend({\n  updateStyle: function (style) {\n    this.styles = style.auto_style;\n    this.colors.updateColors(style.auto_style);\n    this.colors.updateData(_.pluck(this.dataviewModel.get('data'), 'name'));\n  },\n\n  _getRange: function () {\n    return _.map(this.dataviewModel.get('data'), function (category) {\n      return this.colors.getColorByCategory(category.name);\n    }, this);\n  },\n\n  getDef: function () {\n    var model = this.dataviewModel;\n    var categories = model.get('data');\n    var range = this._getRange();\n    var definitions = {};\n\n    AutoStyler.FILL_SELECTORS.forEach(function (item) {\n      var definition = {};\n      var geom = item.substring(0, item.indexOf('-'));\n      definition = { color:\n        { domain: _.pluck(categories, 'name'), range: range, attribute: model.get('column') }\n      };\n      definitions[geom === 'marker' ? 'point' : geom] = definition;\n    });\n\n    return definitions;\n  },\n\n  _getFillColor: function () {\n    var model = this.dataviewModel;\n    var categories = model.get('data');\n    var column = model.get('column');\n\n    return this._getCategoryRamp(categories, column);\n  },\n\n  _getCategoryRamp: function (categories, column) {\n    var ramp = 'ramp([' + column + '], ';\n\n    var catListColors = '';\n    var catListValues = '';\n\n    for (var i = 0; i < categories.length; i++) {\n      var cat = categories[i];\n      var next = i !== categories.length - 1 ? ', ' : '';\n\n      catListColors += '\"' + this.colors.getColorByCategory(cat.name) + '\"' + next;\n      if (!cat.agg) {\n        if (typeof cat.name !== 'string') {\n          catListValues += cat.name + next;\n        } else {\n          catListValues += '\"' + String(cat.name).replace(/\"/g, '\\\\\"') + '\"' + next;\n        }\n      } else if (i === categories.length - 1) {\n        catListValues = catListValues.substring(0, catListValues.length - 2);\n      }\n    }\n\n    return ramp + '(' + catListColors + '), (' + catListValues + '), \\'=\\')';\n  }\n});\n","var Stylers = {\n  category: require('./category'),\n  histogram: require('./histogram')\n};\n\nmodule.exports = {\n  get: function (dataviewModel, layerModel, style) {\n    var AutoStyler = Stylers[dataviewModel.get('type')];\n    if (AutoStyler) {\n      return new AutoStyler(dataviewModel, layerModel, style);\n    } else {\n      throw new Error('dataview type not supported');\n    }\n  }\n};\n","var _ = require('underscore');\nvar cartocolor = require('cartocolor');\nvar AutoStyler = require('./auto-styler');\nvar StyleUtils = require('./style-utils');\n\nvar HistogramAutoStyler = AutoStyler.extend({\n  updateStyle: function (style) {\n    this.styles = style.auto_style;\n  },\n\n  _getFillColor: function (sym) {\n    var custom = this._getColor();\n    var scales = custom || {};\n\n    if (!custom) {\n      var shape = this.dataviewModel.getDistributionType(\n        this.dataviewModel.getUnfilteredDataModel().get('data')\n      );\n\n      scales = HistogramAutoStyler.SCALES_MAP[sym][shape];\n    }\n\n    var ramp = 'ramp([' + this.dataviewModel.get('column') + '], ';\n    var colors = custom\n      ? \"('\" + scales.range.join(\"', '\") + \"'), \"\n      : 'cartocolor(' + scales.palette + ', ' + this.dataviewModel.get('bins') + '), ';\n    var cuantification = scales.quantification + ')';\n\n    return ramp + colors + cuantification;\n  },\n\n  getDef: function (cartocss) {\n    var definitions = {};\n    var shape = this.dataviewModel.getDistributionType(\n      this.dataviewModel.getUnfilteredDataModel().get('data')\n    );\n    var bins = this.dataviewModel.get('bins');\n    var attr = this.dataviewModel.get('column');\n    var styles = this.styles;\n    var isCustomDefinition = (this.styles && this.styles.custom) || false;\n\n    AutoStyler.FILL_SELECTORS.forEach(function (item) {\n      if (StyleUtils.isPropertyIncluded(cartocss, item)) {\n        var scales = HistogramAutoStyler.SCALES_MAP[item][shape];\n        var geom = item.substring(0, item.indexOf('-'));\n        var definition = {};\n\n        if (scales) {\n          if (isCustomDefinition === true) {\n            definition = _.extend(definition, styles.definition);\n          } else {\n            definition = {\n              color: {\n                range: cartocolor[scales.palette][bins] || cartocolor[scales.palette][Object.keys(cartocolor[scales.palette]).length],\n                quantification: scales.quantification,\n                attribute: attr\n              }\n            };\n          }\n        }\n\n        definitions[geom === 'marker' ? 'point' : geom] = definition;\n      }\n    });\n\n    return definitions;\n  }\n\n});\n\nHistogramAutoStyler.SCALES_MAP = {\n  'polygon-fill': {\n    'F': {\n      palette: 'PinkYl',\n      quantification: 'equal'\n    },\n    'L': {\n      palette: 'Emrld',\n      quantification: 'headtails'\n    },\n    'J': {\n      palette: 'Emrld',\n      quantification: 'headtails'\n    },\n    'A': {\n      palette: 'Geyser',\n      quantification: 'quantiles'\n    },\n    'C': {\n      palette: 'Sunset',\n      quantification: 'jenks'\n    },\n    'U': {\n      palette: 'Sunset',\n      quantification: 'jenks'\n    }\n  },\n  'line-color': {\n    'F': {\n      palette: 'PinkYl',\n      quantification: 'equal'\n    },\n    'L': {\n      palette: 'Emrld',\n      quantification: 'headtails'\n    },\n    'J': {\n      palette: 'Emrld',\n      quantification: 'headtails'\n    },\n    'A': {\n      palette: 'Geyser',\n      quantification: 'quantiles'\n    },\n    'C': {\n      palette: 'Sunset',\n      quantification: 'jenks'\n    },\n    'U': {\n      palette: 'Sunset',\n      quantification: 'jenks'\n    }\n  },\n  'marker-fill': {\n    'F': {\n      palette: 'RedOr',\n      quantification: 'equal'\n    },\n    'L': {\n      palette: 'BluYl',\n      quantification: 'headtails'\n    },\n    'J': {\n      palette: 'BluYl',\n      quantification: 'headtails'\n    },\n    'A': {\n      palette: 'Geyser',\n      quantification: 'quantiles'\n    },\n    'C': {\n      palette: 'SunsetDark',\n      quantification: 'jenks'\n    },\n    'U': {\n      palette: 'SunsetDark',\n      quantification: 'jenks'\n    }\n  }\n};\n\nmodule.exports = HistogramAutoStyler;\n","var _ = require('underscore');\nvar postcss = require('postcss');\nvar stripInlineComments = require('postcss-strip-inline-comments');\nvar SCSSsyntax = require('postcss-scss');\n\nvar OUTLINE_ATTRS = ['line-color', 'line-opacity'];\n\nfunction generateCSSTreeFromCartoCSS (cartocss) {\n  return postcss()\n    .use(stripInlineComments)\n    .process(cartocss, { syntax: SCSSsyntax });\n}\n\nfunction isPropertyIncluded (cartocss, attr) {\n  var cssTree = generateCSSTreeFromCartoCSS(cartocss);\n  var root = cssTree.result.root;\n  var propertyIncluded = false;\n\n  if (root) {\n    root.walkDecls(attr, function (node) {\n      var parentNode = node.parent;\n\n      if (!isSelectorRule(parentNode) || isMapnikGeometrySelectorRule(parentNode)) {\n        propertyIncluded = true;\n      }\n    });\n  }\n\n  return propertyIncluded;\n}\n\nfunction isSelectorRule (node) {\n  return node.type === 'rule' && node.selector.search(/\\[(.)+\\]/g) !== -1;\n}\n\nfunction isMapnikGeometrySelectorRule (node) {\n  return isSelectorRule(node) && node.selector.search('mapnik::geometry_type') !== -1;\n}\n\nfunction isOutlineRule (node) {\n  return node.type === 'rule' && node.selector.search('::outline') !== -1;\n}\n\nfunction replaceWrongSpaceChar (cartocss) {\n  return cartocss.replace(new RegExp(String.fromCharCode(160), 'g'), ' ');\n}\n\n/**\n * Change attr style and remove all the duplicates\n * @param  {String} cartocss cartocss original String\n * @param  {String} attr     CSS Attribute ex, polygon-fill\n * @param  {String} newStyle New style value ex, red;\n * @return {String}          Cartocss modified String\n */\nfunction changeStyle (cartocss, attr, newStyle) {\n  if (_.isUndefined(newStyle)) return cartocss;\n\n  var cssTree = generateCSSTreeFromCartoCSS(cartocss);\n  var root = cssTree.result.root;\n  var attributeAlreadyChanged = false;\n\n  if (root) {\n    root.walkDecls(attr, function (node) {\n      var parentNode = node.parent;\n\n      if (!(isOutlineRule(parentNode) && _.contains(OUTLINE_ATTRS, attr))) {\n        if (isSelectorRule(parentNode) || attributeAlreadyChanged) {\n          // If the attribute is inside a conditional selection, it has to be removed\n          node.remove();\n        } else {\n          // If the attribute is inside a regular root (or symbolizer), it just\n          // changes the value\n          node.value = newStyle;\n          attributeAlreadyChanged = true;\n        }\n      }\n    });\n\n    return cssTree.css;\n  }\n\n  return cartocss;\n}\n\nmodule.exports = {\n  changeStyle: _.memoize(changeStyle, function (css, attr, style) {\n    return css + attr + style;\n  }),\n  isPropertyIncluded: isPropertyIncluded,\n  replaceWrongSpaceChar: replaceWrongSpaceChar\n};\n","var _ = require('underscore');\nvar WidgetModel = require('../widget-model');\nvar LockedCategoriesCollection = require('./locked-categories-collection');\n\n/**\n * Model for a category widget\n */\nmodule.exports = WidgetModel.extend({\n\n  defaults: _.extend({\n    type: 'category',\n    search: false,\n    locked: false\n  },\n  WidgetModel.prototype.defaults\n  ),\n\n  defaultState: _.extend({\n    acceptedCategories: [],\n    locked: false,\n    autoStyle: false\n  },\n  WidgetModel.prototype.defaultState\n  ),\n\n  initialize: function () {\n    WidgetModel.prototype.initialize.apply(this, arguments);\n    this.lockedCategories = new LockedCategoriesCollection();\n\n    this.listenTo(this.dataviewModel, 'change:allCategoryNames', this._onDataviewAllCategoryNamesChange);\n\n    this.on('change:locked', this._onLockedChange, this);\n    this.on('change:collapsed', this._onCollapsedChange, this);\n\n    if (this.isAutoStyleEnabled()) {\n      this.on('change:style', this._updateAutoStyle, this);\n    }\n\n    this.dataviewModel.filter.on('change', function () {\n      this.set('acceptedCategories', this._acceptedCategories().pluck('name'));\n    }, this);\n    this.dataviewModel.once('change:allCategoryNames', function () {\n      if (this.get('autoStyle')) {\n        this.autoStyle();\n      }\n    }, this);\n  },\n\n  setupSearch: function () {\n    this.dataviewModel.setupSearch();\n    this.lockedCategories.addItems(this._acceptedCategories().toJSON());\n    this.toggleSearch();\n  },\n\n  toggleSearch: function () {\n    this.set('search', !this.get('search'));\n  },\n\n  enableSearch: function () {\n    this.set('search', true);\n  },\n\n  disableSearch: function () {\n    this.set('search', false);\n  },\n\n  isSearchEnabled: function () {\n    return this.get('search');\n  },\n\n  cleanSearch: function () {\n    this.dataviewModel.cleanSearch();\n    this.lockedCategories.reset([]);\n  },\n\n  autoStyle: function () {\n    // NOTE: maybe not pre-assing colors to categories?\n    this.autoStyler.colors.updateData(this.dataviewModel.get('allCategoryNames'));\n    WidgetModel.prototype.autoStyle.call(this);\n  },\n\n  isLocked: function () {\n    return this.get('locked');\n  },\n\n  canBeLocked: function () {\n    return this.isLocked() || this._acceptedCategories().size() > 0;\n  },\n\n  canApplyLocked: function () {\n    if (this._acceptedCategories().size() !== this.lockedCategories.size()) {\n      return true;\n    }\n\n    return this._acceptedCategories().any(function (m) {\n      return !this.lockedCategories.isItemLocked(m.get('name'));\n    }, this);\n  },\n\n  applyLocked: function () {\n    var currentLocked = this.lockedCategories.getItemsName();\n    if (!currentLocked.length) {\n      this.unlockCategories();\n      return false;\n    }\n\n    this.set('locked', true);\n\n    var f = this.dataviewModel.filter;\n    f.cleanFilter(false);\n    f.accept(currentLocked);\n    f.applyFilter();\n\n    this.cleanSearch();\n  },\n\n  lockCategories: function () {\n    this.set('locked', true);\n    this.dataviewModel.fetch();\n  },\n\n  unlockCategories: function () {\n    this.set('locked', false);\n    this.dataviewModel.filter.acceptAll();\n  },\n\n  _onDataviewAllCategoryNamesChange: function (m, names) {\n    if (this.isAutoStyleEnabled()) {\n      if (!this.isAutoStyle()) {\n        this.autoStyler.colors.updateData(names);\n      }\n    }\n  },\n\n  _onLockedChange: function (m, isLocked) {\n    if (isLocked) {\n      this.dataviewModel.enableFilter();\n    } else {\n      this.dataviewModel.disableFilter();\n    }\n  },\n\n  _acceptedCategories: function () {\n    return this.dataviewModel.filter.acceptedCategories;\n  },\n\n  _onCollapsedChange: function (m, isCollapsed) {\n    this.dataviewModel.set('enabled', !isCollapsed);\n  }\n\n});\n","var Backbone = require('backbone');\nvar CoreView = require('backbone/core-view');\nvar SearchTitleView = require('./title/search-title-view');\nvar CategoryOptionsView = require('./options/options-view');\nvar CategoryItemsView = require('./list/items-view');\nvar CategoryStatsView = require('./stats/stats-view');\nvar CategoryPaginatorView = require('./paginator/paginator-view');\nvar SearchCategoryItemsView = require('./list/search-items-view');\nvar SearchCategoryPaginatorView = require('./paginator/search-paginator-view');\nvar template = require('./content-template.tpl');\n\nvar STARTING_PAGE = 1;\n\n/**\n * Content view for category widget\n */\nmodule.exports = CoreView.extend({\n  className: 'CDB-Widget-body',\n\n  _ITEMS_PER_PAGE: 6,\n\n  initialize: function () {\n    this._dataviewModel = this.model.dataviewModel;\n    this._layerModel = this.model.layerModel;\n\n    this._paginatorModel = new Backbone.Model({\n      page: STARTING_PAGE\n    });\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    this.$el.toggleClass('is-collapsed', !!this.model.get('collapsed'));\n\n    this.$el.html(template());\n\n    this._initViews();\n\n    return this;\n  },\n\n  _initBinds: function () {\n    if (this.model.get('hasInitialState') === true) {\n      this._onInitialState();\n    } else {\n      this.model.bind('change:hasInitialState', this._onInitialState, this);\n    }\n    this.model.bind('change:collapsed', function (mdl, isCollapsed) {\n      this.$el.toggleClass('is-collapsed', !!isCollapsed);\n    }, this);\n  },\n\n  _onInitialState: function () {\n    this.render();\n\n    if (this.model.get('autoStyle') === true) {\n      this.model.autoStyle();\n    }\n  },\n\n  _initViews: function () {\n    var searchTitle = new SearchTitleView({\n      widgetModel: this.model,\n      dataviewModel: this._dataviewModel,\n      layerModel: this._layerModel\n    });\n    this.$('.js-header').append(searchTitle.render().el);\n    this.addView(searchTitle);\n\n    var stats = new CategoryStatsView({\n      widgetModel: this.model,\n      dataviewModel: this._dataviewModel\n    });\n    this.$('.js-header').append(stats.render().el);\n    this.addView(stats);\n\n    var options = new CategoryOptionsView({\n      widgetModel: this.model,\n      dataviewModel: this._dataviewModel\n    });\n    this.$('.js-content').html(options.render().el);\n    this.addView(options);\n\n    var dataList = new CategoryItemsView({\n      widgetModel: this.model,\n      dataviewModel: this._dataviewModel,\n      itemsPerPage: this._ITEMS_PER_PAGE,\n      paginatorModel: this._paginatorModel\n    });\n    this.$('.js-content').append(dataList.render().el);\n    this.addView(dataList);\n\n    var pagination = new CategoryPaginatorView({\n      widgetModel: this.model,\n      dataviewModel: this._dataviewModel,\n      itemsPerPage: this._ITEMS_PER_PAGE,\n      paginatorModel: this._paginatorModel\n    });\n    this.$('.js-footer').append(pagination.render().el);\n    this.addView(pagination);\n\n    var searchList = new SearchCategoryItemsView({\n      widgetModel: this.model,\n      dataviewModel: this._dataviewModel,\n      itemsPerPage: this._ITEMS_PER_PAGE,\n      paginator: true,\n      paginatorModel: this._paginatorModel\n    });\n    this.$('.js-content').append(searchList.render().el);\n    this.addView(searchList);\n\n    var searchPagination = new SearchCategoryPaginatorView({\n      widgetModel: this.model,\n      dataviewModel: this._dataviewModel,\n      itemsPerPage: this._ITEMS_PER_PAGE,\n      paginator: true,\n      paginatorModel: this._paginatorModel\n    });\n    this.$('.js-footer').append(searchPagination.render().el);\n    this.addView(searchPagination);\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar formatter = require('../../../../formatter');\nvar _ = require('underscore');\nvar clickableTemplate = require('./item-clickable-template.tpl');\nvar unclickableTemplate = require('./item-unclickable-template.tpl');\n\n/**\n * Category list item view\n */\nmodule.exports = CoreView.extend({\n  tagName: 'li',\n  className: 'CDB-Widget-listItem',\n\n  events: {\n    'click .js-button': '_onItemClick'\n  },\n\n  initialize: function (options) {\n    this.widgetModel = this.options.widgetModel;\n    this.dataviewModel = this.options.dataviewModel;\n    this._initBinds();\n  },\n\n  render: function () {\n    var name = this.model.get('name');\n    var value = this.model.get('value');\n    var template = this.model.get('agg') || this.widgetModel.isLocked()\n      ? unclickableTemplate\n      : clickableTemplate;\n    var acceptedCategories = this.dataviewModel.filter.getAcceptedCategoryNames();\n    var isAccepted = _.contains(acceptedCategories, name);\n\n    this.$el.html(\n      template({\n        isAggregated: this.model.get('agg'),\n        name: name,\n        value: value,\n        formattedValue: formatter.formatNumber(value),\n        percentage: ((value / this.dataviewModel.get('max')) * 100),\n        color: this.widgetModel.getColor(name),\n        isDisabled: !this.model.get('selected') ? 'is-disabled' : '',\n        isAccepted: isAccepted,\n        prefix: this.widgetModel.get('prefix'),\n        suffix: this.widgetModel.get('suffix')\n      })\n    );\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.bind('change', this.render, this);\n    this.widgetModel.bind('change:search change:prefix change:suffix change:autoStyle', this.render, this);\n    this.add_related_model(this.widgetModel);\n  },\n\n  _onItemClick: function () {\n    this.trigger('itemClicked', this.model, this);\n  }\n\n});\n","var CoreView = require('backbone/core-view');\nvar formatter = require('../../../../formatter');\nvar template = require('./search-item-clickable-template.tpl');\n\n/**\n * Category search list view\n */\nmodule.exports = CoreView.extend({\n  tagName: 'li',\n  className: 'CDB-Widget-listItem',\n\n  events: {\n    'click .js-button': '_onItemClick'\n  },\n\n  initialize: function (options) {\n    // This data model comes from the original data in order to get\n    // the max value and set properly the progress bar and add the\n    // necessary suffix and prefix for the item.\n    this.dataviewModel = this.options.dataviewModel;\n    this.widgetModel = this.options.widgetModel;\n    this._initBinds();\n  },\n\n  render: function () {\n    var value = this.model.get('value');\n\n    this.$el.html(\n      template({\n        name: this.model.get('name'),\n        value: value,\n        formattedValue: formatter.formatNumber(value),\n        percentage: ((value / this.dataviewModel.get('max')) * 100),\n        isDisabled: !this.model.get('selected'),\n        prefix: this.widgetModel.get('prefix'),\n        suffix: this.widgetModel.get('suffix')\n      })\n    );\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.bind('change:selected', this.render, this);\n\n    this.widgetModel.bind('change:prefix change:suffix', this.render, this);\n    this.add_related_model(this.widgetModel);\n  },\n\n  _onItemClick: function () {\n    this.model.set('selected', !this.model.get('selected'));\n  }\n\n});\n","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar CategoryItemView = require('./item/item-view');\nvar placeholder = require('./items-placeholder-template.tpl');\n\nvar REQUIRED_OPTS = [\n  'dataviewModel',\n  'widgetModel',\n  'paginatorModel'\n];\n\n/**\n * Category list view\n */\nmodule.exports = CoreView.extend({\n  options: {\n    paginator: false,\n    itemsPerPage: 6\n  },\n\n  className: 'CDB-Widget-list js-list',\n\n  tagName: 'ul',\n\n  initialize: function (options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n\n    if (!this._dataviewModel.get('sync_on_bbox_change')) {\n      this.$el.addClass('CDB-Widget-list--nodynamic');\n    }\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    var data = this._dataviewModel.getData();\n    var isDataEmpty = _.isEmpty(data) || _.size(data) === 0;\n\n    if (isDataEmpty) {\n      this._renderPlaceholder();\n    } else {\n      this._renderList();\n    }\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._paginatorModel, 'change:page', this.render);\n\n    this.listenTo(this._widgetModel, 'change:search', this.toggle);\n    this.listenTo(this._widgetModel, 'change:style change:autoStyle', this.render);\n\n    this.listenTo(this._dataviewModel, 'change:data', this.render);\n    this.listenTo(this._dataviewModel, 'change:sync_on_bbox_change', this.blockFiltering);\n  },\n\n  _renderPlaceholder: function () {\n    // Change view classes\n    this.$el.addClass('CDB-Widget-list--withBorders CDB-Widget-list--fake');\n    this.$el.append(placeholder());\n  },\n\n  _renderList: function () {\n    this._createList();\n\n    this.$el.removeClass('CDB-Widget-list--withBorders CDB-Widget-list--fake CDB-Widget-list--noresults');\n\n    this._renderItems();\n  },\n\n  _renderItems: function () {\n    var currentPage = this._paginatorModel.get('page');\n    var pageIndex = currentPage - 1; // Transform from 1-based index to zero-based index\n    var items = this.pagesData[pageIndex];\n\n    _.each(items, function (model) {\n      this._addItem(model);\n    }.bind(this));\n  },\n\n  _createList: function () {\n    this.pagesData = {};\n\n    var data = this._getData();\n    var currentIndex = 0;\n\n    data.each(function (model, index) {\n      if (index % this.options.itemsPerPage === 0) {\n        if (index !== 0) {\n          currentIndex += 1;\n        }\n        this.pagesData[currentIndex] = [];\n      }\n\n      this.pagesData[currentIndex].push(model);\n    }, this);\n  },\n\n  _getData: function () {\n    return this._dataviewModel.getData();\n  },\n\n  _addItem: function (model) {\n    var view = new CategoryItemView({\n      model: model,\n      widgetModel: this._widgetModel,\n      dataviewModel: this._dataviewModel\n    });\n\n    view.bind('itemClicked', this._setFilters, this);\n\n    this.addView(view);\n    this.$el.append(view.render().el);\n  },\n\n  _setFilters: function (mdl) {\n    var isSelected = mdl.get('selected');\n    var filter = this._dataviewModel.filter;\n    var clickedName = mdl.get('name');\n\n    if (isSelected) {\n      // If there isn't any filter applied,\n      // clicking over one will turn rest into as \"unselected\"\n      if (filter.rejectedCategories.size() === 0 &&\n          filter.acceptedCategories.size() === 0\n      ) {\n        var data = this._dataviewModel.getData();\n        // Make elements \"unselected\"\n        data.each(function (m) {\n          var name = m.get('name');\n          if (name !== clickedName) {\n            m.set('selected', false);\n          }\n        });\n        filter.accept(mdl.get('name'));\n      } else {\n        mdl.set('selected', false);\n        filter.reject(clickedName);\n      }\n    } else {\n      mdl.set('selected', true);\n      filter.accept(clickedName);\n    }\n    this._widgetModel.set('acceptedCategories', this._widgetModel._acceptedCategories().pluck('name'));\n  },\n\n  blockFiltering: function (e) {\n    if (e.changed['sync_on_bbox_change']) { // Is dynamic\n      this.$el.removeClass('CDB-Widget-list--nodynamic');\n    } else { // It is not\n      this.$el.addClass('CDB-Widget-list--nodynamic');\n      this._dataviewModel.filter.acceptAll();\n    }\n  },\n\n  removeSelections: function () {\n    this._dataviewModel.filter.acceptAll();\n  },\n\n  toggle: function () {\n    this[!this._widgetModel.isSearchEnabled() ? 'show' : 'hide']();\n  },\n\n  show: function () {\n    this.$el.removeClass('is-hidden');\n  },\n\n  hide: function () {\n    this.$el.addClass('is-hidden');\n  }\n\n});\n","var CategoryItemsView = require('./items-view');\nvar WidgetSearchCategoryItemView = require('./item/search-item-view');\nvar placeholder = require('./search-items-no-results-template.tpl');\n\n/**\n * Category list view\n */\nmodule.exports = CategoryItemsView.extend({\n  className: 'CDB-Widget-list is-hidden js-list',\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    var data = this._searchResultsCollection;\n    var isDataEmpty = data.isEmpty() || data.size() === 0;\n\n    if (isDataEmpty) {\n      this._renderPlaceholder();\n    } else {\n      this._renderList();\n    }\n    return this;\n  },\n\n  _initBinds: function () {\n    CategoryItemsView.prototype._initBinds.apply(this, arguments);\n    this._searchResultsCollection = this._dataviewModel.getSearchResult();\n    this.listenTo(this._searchResultsCollection, 'change:selected', this._onSelectedItemChange);\n    this.listenTo(this._searchResultsCollection, 'reset', this.render);\n  },\n\n  _getData: function () {\n    return this._searchResultsCollection;\n  },\n\n  _renderPlaceholder: function () {\n    this.$el.addClass('CDB-Widget-list--noresults');\n\n    this.$el.html(\n      placeholder({\n        q: this._dataviewModel.getSearchQuery()\n      })\n    );\n  },\n\n  _addItem: function (model) {\n    var view = new WidgetSearchCategoryItemView({\n      model: model,\n      widgetModel: this._widgetModel,\n      dataviewModel: this._dataviewModel\n    });\n    this.addView(view);\n    this.$el.append(view.render().el);\n  },\n\n  toggle: function () {\n    this[this._widgetModel.isSearchEnabled() ? 'show' : 'hide']();\n  },\n\n  _onSelectedItemChange: function (model, isSelected) {\n    this._widgetModel.lockedCategories[isSelected ? 'addItem' : 'removeItem'](model);\n  }\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\n\n/**\n *  Locked categories collection\n *\n */\nmodule.exports = Backbone.Collection.extend({\n\n  addItem: function (mdl) {\n    if (!this.isItemLocked(mdl.get('name'))) {\n      this.add(mdl);\n    }\n  },\n\n  addItems: function (mdls) {\n    _.each(mdls, function (m) {\n      if (!this.isItemLocked(m.name)) {\n        this.add(m);\n      }\n    }, this);\n  },\n\n  resetItems: function (mdls) {\n    this.reset(mdls);\n  },\n\n  removeItem: function (mdl) {\n    var lockedItem = this.isItemLocked(mdl.get('name'));\n    if (lockedItem) {\n      this.remove(lockedItem);\n    }\n  },\n\n  removeItems: function () {\n    this.reset([]);\n  },\n\n  isItemLocked: function (name) {\n    return this.find(function (d) {\n      return d.get('name') === name;\n    });\n  },\n\n  getItemsName: function () {\n    return this.pluck('name');\n  }\n\n});\n","var CoreView = require('backbone/core-view');\nvar template = require('./options-template.tpl');\n\n/**\n * Category filter view\n *\n */\nmodule.exports = CoreView.extend({\n  className: 'CDB-Widget-filter CDB-Widget-contentSpaced CDB-Widget-contentSpaced--sideMargins',\n\n  events: {\n    'click .js-all': '_onSelectAll',\n    'click .js-lock': '_lockCategories',\n    'click .js-unlock': '_unlockCategories'\n  },\n\n  initialize: function () {\n    this.dataviewModel = this.options.dataviewModel;\n    this.widgetModel = this.options.widgetModel;\n    this._initBinds();\n  },\n\n  render: function () {\n    var acceptedCats = this.dataviewModel.filter.acceptedCategories.size();\n    var rejectedCats = this.dataviewModel.filter.rejectedCategories.size();\n    var areAllRejected = this.dataviewModel.filter.areAllRejected();\n    var totalCats = this.dataviewModel.getData().size();\n    var isLocked = this.widgetModel.isLocked();\n\n    this.$el.html(\n      template({\n        isSearchEnabled: this.widgetModel.isSearchEnabled(),\n        isSearchApplied: this.dataviewModel.isSearchApplied(),\n        isLocked: isLocked,\n        canBeLocked: this.widgetModel.canBeLocked(),\n        allSelected: (rejectedCats === 0 && acceptedCats === 0 && !areAllRejected),\n        canSelectAll: !isLocked && (rejectedCats > 0 || acceptedCats > 0 || areAllRejected),\n        noneSelected: areAllRejected || (!totalCats && !acceptedCats),\n        acceptedCats: acceptedCats,\n        totalLocked: this.widgetModel.lockedCategories.size(),\n        totalCats: totalCats\n      })\n    );\n    return this;\n  },\n\n  _initBinds: function () {\n    this.widgetModel.bind('change:search change:locked', this.render, this);\n    this.widgetModel.lockedCategories.bind('change add remove', this.render, this);\n    this.add_related_model(this.widgetModel);\n    this.add_related_model(this.widgetModel.lockedCategories);\n\n    this.dataviewModel.bind('change:data', this.render, this);\n    this.add_related_model(this.dataviewModel);\n\n    var f = this.dataviewModel.filter;\n    f.acceptedCategories.bind('add remove reset', this.render, this);\n    f.rejectedCategories.bind('add remove reset', this.render, this);\n    this.add_related_model(f.rejectedCategories);\n    this.add_related_model(f.acceptedCategories);\n  },\n\n  _lockCategories: function () {\n    this.widgetModel.lockCategories();\n  },\n\n  _unlockCategories: function () {\n    this.widgetModel.unlockCategories();\n  },\n\n  _onSelectAll: function () {\n    this.dataviewModel.filter.acceptAll();\n  }\n\n});\n","var $ = require('jquery');\nvar CoreView = require('backbone/core-view');\nvar checkAndBuildOpts = require('builder/helpers/required-opts');\nvar defaultTemplate = require('./paginator-template.tpl');\nvar paginationTemplate = require('./pagination-template.tpl');\n\nvar MIN_CATEGORIES = 5;\nvar STARTING_PAGE = 1;\nvar PAGINATION_STEP = 1;\n\nvar REQUIRED_OPTS = [\n  'dataviewModel',\n  'widgetModel',\n  'paginatorModel'\n];\n\n/**\n *  Display paginator for category widget\n *\n */\n\nmodule.exports = CoreView.extend({\n  options: {\n    itemsPerPage: 6,\n    template: defaultTemplate,\n    paginator: false\n  },\n\n  className: 'CDB-Widget-nav CDB-Widget-contentSpaced',\n\n  events: {\n    'click .js-searchToggle': '_onSearchClicked',\n    'click .js-next': '_onNextPage',\n    'click .js-prev': '_onPrevPage'\n  },\n\n  initialize: function (options) {\n    checkAndBuildOpts(options, REQUIRED_OPTS, this);\n\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    this._initViews();\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._paginatorModel, 'change:page', this.render);\n\n    this.listenTo(this._dataviewModel, 'change:categoriesCount', this.render);\n    this.listenTo(this._dataviewModel, 'change:data change:searchData', this._onDataChanged);\n\n    this.listenTo(this._widgetModel, 'change:search', this.toggle);\n  },\n\n  _initViews: function () {\n    var categoriesCount = this._dataviewModel.getCount();\n\n    if (categoriesCount > MIN_CATEGORIES) {\n      var template = this.options.template;\n\n      this.$el.html(template({\n        categoriesCount: categoriesCount\n      }));\n\n      if (this.options.paginator) {\n        this.$el.append(paginationTemplate({\n          currentPage: this._paginatorModel.get('page'),\n          pages: this._totalPages()\n        }));\n      }\n    } else {\n      this._paginatorModel.set('page', STARTING_PAGE);\n    }\n  },\n\n  // If current page doesn't exist due to a data change, we should reset it\n  _setPage: function () {\n    var pages = this._totalPages();\n\n    if (this._paginatorModel.get('page') > pages || this._paginatorModel.get('page') < STARTING_PAGE) {\n      this._paginatorModel.set({ page: STARTING_PAGE }, { silent: true });\n    }\n  },\n\n  _onSearchClicked: function () {\n    this._widgetModel.setupSearch();\n  },\n\n  _onDataChanged: function () {\n    this._setPage();\n    this.render();\n  },\n\n  _onPrevPage: function () {\n    this._changePage(-PAGINATION_STEP);\n  },\n\n  _onNextPage: function () {\n    this._changePage(PAGINATION_STEP);\n  },\n\n  _changePage: function (step) {\n    var totalPages = this._totalPages();\n    var currentPage = this._paginatorModel.get('page');\n    var nextPage = currentPage + step;\n\n    if (nextPage > totalPages) {\n      nextPage = STARTING_PAGE;\n    }\n\n    if (nextPage < STARTING_PAGE) {\n      nextPage = totalPages;\n    }\n\n    this._paginatorModel.set('page', nextPage);\n  },\n\n  _totalPages: function () {\n    return Math.ceil(this._dataviewModel.getSize() / this.options.itemsPerPage);\n  },\n\n  toggle: function () {\n    this[ this._widgetModel.isSearchEnabled() ? 'hide' : 'show' ]();\n  },\n\n  hide: function () {\n    this.$el.addClass('is-hidden');\n  },\n\n  show: function () {\n    this.$el.removeClass('is-hidden');\n  },\n\n  clean: function () {\n    $(window).unbind('resize.' + this.cid);\n    CoreView.prototype.clean.call(this);\n  }\n});\n","var PaginatorView = require('./paginator-view');\nvar searchTemplate = require('./search-paginator-template.tpl');\nvar paginationTemplate = require('./pagination-template.tpl');\n\nmodule.exports = PaginatorView.extend({\n  className: 'CDB-Widget-nav is-hidden CDB-Widget-contentSpaced',\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    var pages = this._totalPages();\n\n    this.$el.html(searchTemplate());\n\n    if (pages > 1) {\n      this.$el.append(paginationTemplate({\n        currentPage: this._paginatorModel.get('page'),\n        pages: pages\n      }));\n    }\n    return this;\n  },\n\n  _totalPages: function () {\n    return Math.ceil(this._dataviewModel.getSearchCount() / this.options.itemsPerPage);\n  },\n\n  toggle: function () {\n    this[ !this._widgetModel.isSearchEnabled() ? 'hide' : 'show' ]();\n  },\n\n  _onSearchClicked: function () {\n    this._widgetModel.cleanSearch();\n    this._widgetModel.toggleSearch();\n  }\n});\n","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar formatter = require('../../../formatter');\nvar template = require('./stats-template.tpl');\nvar animationTemplate = require('./cats-template.tpl');\nvar AnimateValues = require('../../animate-values');\n\n/**\n * Category stats info view\n *\n */\n\nmodule.exports = CoreView.extend({\n  className: 'CDB-Widget-info CDB-Text CDB-Size-small u-secondaryTextColor u-upperCase u-tSpace',\n  tagName: 'dl',\n\n  initialize: function () {\n    this.widgetModel = this.options.widgetModel;\n    this.dataviewModel = this.options.dataviewModel;\n    this._initBinds();\n  },\n\n  render: function () {\n    this.$el.html(\n      template({\n        isSearchEnabled: this.widgetModel.isSearchEnabled(),\n        isSearchApplied: this.dataviewModel.isSearchApplied(),\n        isLocked: this.widgetModel.isLocked(),\n        isOtherAvailable: this.dataviewModel.isOtherAvailable(),\n        resultsCount: this.dataviewModel.getSearchCount(),\n        totalCats: this._getCategoriesSize(),\n        nullsPer: this._getNullPercentage(),\n        catsPer: this._getCurrentCategoriesPercentage()\n      })\n    );\n\n    var animator = new AnimateValues({\n      el: this.$el\n    });\n\n    animator.animateFromValues(this._getPreviousCategoriesPercentage(), this._getCurrentCategoriesPercentage(), '.js-cats',\n      animationTemplate, { defaultValue: '-', animationSpeed: 700, formatter: formatter.formatValue }\n    );\n\n    this._checkVisibility();\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.dataviewModel.bind('change:data change:totalCount', this.render, this);\n    this.widgetModel.bind('change:search change:locked', this.render, this);\n    this.widgetModel.bind('change:show_stats change:collapsed', this._checkVisibility, this);\n    this.add_related_model(this.dataviewModel);\n    this.add_related_model(this.widgetModel);\n  },\n\n  _getNullPercentage: function () {\n    var nulls = this.dataviewModel.get('nulls');\n    var total = this.dataviewModel.get('totalCount') || 0;\n    return !nulls ? 0 : ((nulls / total) * 100).toFixed(2);\n  },\n\n  _getPreviousCategoriesPercentage: function () {\n    var total = this.dataviewModel.previous('totalCount') || 0;\n    var data = this.dataviewModel.getPreviousData();\n    return this._getCategoriesPercentage(data, total);\n  },\n\n  _getCurrentCategoriesPercentage: function () {\n    var total = this.dataviewModel.get('totalCount') || 0;\n    var data = this.dataviewModel.getData().toJSON();\n    return this._getCategoriesPercentage(data, total);\n  },\n\n  _getCategoriesPercentage: function (data, total) {\n    if (!total) {\n      return 0;\n    }\n\n    var currentTotal = data.reduce(function (memo, mdl) {\n      return !mdl.agg ? (memo + parseFloat(mdl.value)) : memo;\n    }, 0);\n\n    if (!currentTotal) {\n      return 0;\n    }\n\n    return ((currentTotal / total) * 100).toFixed(2);\n  },\n\n  _getCategoriesSize: function () {\n    return _.pluck(\n      this.dataviewModel.getData().reject(function (mdl) {\n        return mdl.get('agg');\n      }), 'name').length;\n  },\n\n  _checkVisibility: function () {\n    var isVisible = !!this.widgetModel.get('show_stats') && !this.widgetModel.get('collapsed');\n    this.$el.toggle(isVisible);\n  }\n});\n","var _ = require('underscore');\nvar $ = require('jquery');\nvar CoreView = require('backbone/core-view');\nvar DropdownView = require('../../dropdown/widget-dropdown-view');\nvar TipsyTooltipView = require('../../../../builder/components/tipsy-tooltip-view');\nvar template = require('./search-title-template.tpl');\nvar layerColors = require('../../../util/layer-colors');\nvar analyses = require('../../../data/analyses');\nvar escapeHTML = require('../../../util/escape-html');\n\n/**\n *  Show category title or search any category\n *  + another options for this widget, as in,\n *  colorize categories, lock defined categories...\n *\n */\n\nmodule.exports = CoreView.extend({\n  events: {\n    'keyup .js-textInput': '_onKeyupInput',\n    'submit .js-form': '_onSubmitForm',\n    'click .js-applyLocked': '_applyLocked',\n    'click .js-autoStyle': '_autoStyle',\n    'click .js-cancelAutoStyle': '_cancelAutoStyle'\n  },\n\n  initialize: function () {\n    if (!this.options.widgetModel) throw new Error('widgetModel is required');\n    if (!this.options.dataviewModel) throw new Error('dataviewModel is required');\n    if (!this.options.layerModel) throw new Error('layerModel is required');\n\n    this.model = this.options.widgetModel;\n    this.dataviewModel = this.options.dataviewModel;\n    this.layerModel = this.options.layerModel;\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    var sourceId = this.dataviewModel.get('source').id;\n    var letter = layerColors.letter(sourceId);\n    var sourceColor = layerColors.getColorForLetter(letter);\n    var sourceType = this.dataviewModel.getSourceType() || '';\n    var isSourceType = this.dataviewModel.isSourceType();\n    var layerName = isSourceType\n      ? this.model.get('table_name')\n      : this.layerModel.get('layer_name');\n\n    this.$el.html(\n      template({\n        isCollapsed: this.model.get('collapsed'),\n        isAutoStyleEnabled: this._isAutoStyleButtonVisible(),\n        isAutoStyle: this.model.isAutoStyle(),\n        title: this.model.get('title'),\n        sourceId: sourceId,\n        sourceType: analyses.title(sourceType),\n        isSourceType: isSourceType,\n        showSource: this.model.get('show_source') && letter !== '',\n        sourceColor: sourceColor,\n        layerName: escapeHTML(layerName),\n        columnName: this.dataviewModel.get('column'),\n        q: this.dataviewModel.getSearchQuery(),\n        isLocked: this.model.isLocked(),\n        canBeLocked: this.model.canBeLocked(),\n        isSearchEnabled: this.model.isSearchEnabled(),\n        canShowApply: this.model.canApplyLocked()\n      })\n    );\n    this._initViews();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.model, 'change:search', this._onSearchToggled);\n    this.listenTo(this.model, 'change:title change:collapsed change:autoStyle change:style', this.render);\n    this.listenTo(this.model.lockedCategories, 'change add remove', this.render);\n    this.listenTo(this.dataviewModel, 'change:column', this.render);\n    this.listenTo(this.dataviewModel.filter, 'change', this.render);\n    this.listenTo(this.layerModel, 'change:visible change:cartocss change:layer_name', this.render);\n  },\n\n  _initViews: function () {\n    var dropdown = new DropdownView({\n      model: this.model,\n      target: '.js-actions',\n      container: this.$el\n    });\n    this.addView(dropdown);\n\n    var colorsTooltip = new TipsyTooltipView({\n      el: this.$el.find('.js-colors'),\n      gravity: 'auto'\n    });\n    this.addView(colorsTooltip);\n\n    var actionsTooltip = new TipsyTooltipView({\n      el: this.$el.find('.js-actions'),\n      gravity: 'auto'\n    });\n    this.addView(actionsTooltip);\n  },\n\n  _isAutoStyleButtonVisible: function () {\n    return this.model.isAutoStyleEnabled() &&\n      this.layerModel.get('visible') &&\n      this.model.hasColorsAutoStyle();\n  },\n\n  _onSearchToggled: function () {\n    var isSearchEnabled = this.model.isSearchEnabled();\n    this[isSearchEnabled ? '_bindESC' : '_unbindESC']();\n    this.render();\n    if (isSearchEnabled) {\n      this._focusOnInput();\n    }\n  },\n\n  _onSubmitForm: function (ev) {\n    if (ev) {\n      ev.preventDefault();\n    }\n    var q = this.$('.js-textInput').val();\n    if (this.dataviewModel.getSearchQuery() !== q) {\n      this.dataviewModel.setSearchQuery(q);\n      if (this.dataviewModel.isSearchValid()) {\n        this.dataviewModel.applySearch();\n      }\n    }\n  },\n\n  _focusOnInput: function () {\n    var self = this;\n    setTimeout(function () {\n      self.$('.js-textInput').focus();\n    }, 0);\n  },\n\n  _onKeyupInput: _.debounce(\n    function (ev) {\n      var q = this.$('.js-textInput').val();\n      if (ev.keyCode !== 13 && ev.keyCode !== 27 && q !== '') {\n        this._onSubmitForm();\n      }\n    }, 250\n  ),\n\n  _bindESC: function () {\n    $(document).bind('keyup.' + this.cid, _.bind(this._onKeyUp, this));\n  },\n\n  _unbindESC: function () {\n    $(document).unbind('keyup.' + this.cid);\n  },\n\n  _onKeyUp: function (ev) {\n    if (ev.keyCode === 27) {\n      this._cancelSearch();\n      return false;\n    }\n  },\n\n  _applyLocked: function () {\n    this.model.toggleSearch();\n    this.model.applyLocked();\n  },\n\n  _autoStyle: function () {\n    this.model.autoStyle();\n  },\n\n  _cancelAutoStyle: function () {\n    this.model.cancelAutoStyle();\n  },\n\n  _cancelSearch: function () {\n    this.model.cleanSearch();\n    this.model.disableSearch();\n  },\n\n  clean: function () {\n    this._unbindESC();\n    CoreView.prototype.clean.call(this);\n  }\n\n});\n","var $ = require('jquery');\nvar _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar template = require('./template.tpl');\nvar DropdownOverlay = require('../../../builder/components/dropdown-overlay/dropdown-overlay-view');\n\n/**\n * Standard widget dropdown view\n *\n */\nmodule.exports = CoreView.extend({\n\n  className: 'CDB-Dropdown',\n\n  events: {\n    'click .js-toggleLocalTimezone': '_toggleLocalTimezone',\n    'click .js-toggleNormalized': '_toggleNormalized',\n    'click .js-toggleCollapsed': '_toggleCollapsed',\n    'click .js-removeWidget': '_removeWidget',\n    'click .js-editWidget': '_editWidget'\n  },\n\n  initialize: function (opts) {\n    if (!opts.target) {\n      throw new Error('target is not defined');\n    }\n\n    this._target = this.options.target;\n    this._$container = this.options.container;\n\n    this._initBinds();\n  },\n\n  render: function () {\n    var flags = _.defaults(\n      this.options.flags || {}, {\n        canCollapse: true\n      }\n    );\n\n    var templateData = _.defaults({},\n      this.model.attributes, {\n        flags: flags\n      }, {\n        'local_timezone': false,\n        'normalized': false,\n        'collapsed': false,\n        'show_options': false\n      }\n    );\n\n    this.$el.html(template(templateData));\n\n    this._dropdownOverlay = new DropdownOverlay({\n      visible: true,\n      onClickAction: this._onGlobalClick.bind(this)\n    });\n    this.addView(this._dropdownOverlay);\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.add_related_model(this.model);\n\n    this.model.bind('change:widget_dropdown_open', this._onChangeOpen, this);\n\n    this._$container.delegate(this._target, 'click', _.bind(this._toggle, this));\n  },\n\n  _removeWidget: function () {\n    this.model.trigger('removeWidget', this.model);\n    this._toggle();\n  },\n\n  _editWidget: function () {\n    this.model.trigger('editWidget', this.model);\n    this._toggle();\n  },\n\n  _bindESC: function () {\n    $(document).bind('keyup.' + this.cid, _.bind(this._onKeyUp, this));\n  },\n\n  _unbindESC: function () {\n    $(document).unbind('keyup.' + this.cid);\n  },\n\n  _onGlobalClick: function (ev) {\n    this.model.set('widget_dropdown_open', false);\n  },\n\n  _onKeyUp: function (ev) {\n    if (ev.keyCode === 27) {\n      this.model.set('widget_dropdown_open', false);\n      return false;\n    }\n  },\n\n  _onChangeOpen: function () {\n    if (this.model.get('widget_dropdown_open')) {\n      this._open();\n    } else {\n      this._close();\n    }\n  },\n\n  _toggleCollapsed: function () {\n    var collapsed = !this.model.get('collapsed');\n    this.model.set('collapsed', collapsed);\n    this._toggle();\n  },\n\n  _toggleNormalized: function () {\n    var normalized = !this.model.get('normalized');\n    this.model.set('normalized', normalized);\n    this._toggle();\n  },\n\n  _toggleLocalTimezone: function () {\n    var localTimezone = !this.model.get('local_timezone');\n    this.model.set('local_timezone', localTimezone);\n    this._toggle();\n  },\n\n  _open: function () {\n    this._bindESC();\n\n    this.render();\n    this._$container.append(this.$el);\n    this.$el.show();\n\n    this._adjustVerticalPosition();\n  },\n\n  _adjustVerticalPosition: function () {\n    if (this._getDropdownBottom() > this._getBodyHeight()) {\n      this.$el.addClass('has-top-position');\n    }\n  },\n\n  _getDropdownBottom: function () {\n    return this.$el.offset().top + this.$el.height();\n  },\n\n  _getBodyHeight: function () {\n    return $('body').height();\n  },\n\n  _close: function () {\n    this._unbindESC();\n    this._dropdownOverlay && this._dropdownOverlay.clean();\n    this.$el.hide();\n    this.$el.removeClass('has-top-position');\n  },\n\n  _toggle: function () {\n    this.model.set('widget_dropdown_open', !this.model.get('widget_dropdown_open'));\n  },\n\n  clean: function () {\n    this.model.set('widget_dropdown_open', false);\n    this._unbindESC();\n    this._dropdownOverlay && this._dropdownOverlay.clean();\n    this._$container.undelegate(this._target, 'click');\n    CoreView.prototype.clean.call(this);\n  }\n});\n","var _ = require('underscore');\nvar d3 = require('d3');\nvar CoreView = require('backbone/core-view');\nvar formatter = require('../../formatter');\nvar template = require('./template.tpl');\nvar DropdownView = require('../dropdown/widget-dropdown-view');\nvar animationTemplate = require('./animation-template.tpl');\nvar AnimateValues = require('../animate-values.js');\nvar layerColors = require('../../util/layer-colors');\nvar Analyses = require('../../data/analyses');\nvar escapeHTML = require('../../util/escape-html');\nvar unescapeHTML = require('../../util/unescape-html');\nvar TipsyTooltipView = require('../../../builder/components/tipsy-tooltip-view');\n\n/**\n * Default widget content view:\n */\nmodule.exports = CoreView.extend({\n  className: 'CDB-Widget-body',\n\n  initialize: function () {\n    this._dataviewModel = this.model.dataviewModel;\n    this._layerModel = this.model.layerModel;\n\n    if (this.model.get('hasInitialState') === true) {\n      this._initBinds();\n    } else {\n      this.listenToOnce(this.model, 'change:hasInitialState', this._onInitialState);\n    }\n  },\n\n  _onInitialState: function () {\n    this._initBinds();\n    this.render();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    var value = this._dataviewModel.get('data');\n\n    var format = function (value) {\n      var formatter = d3.format('0,000');\n\n      if (_.isNumber(value)) {\n        return formatter(value.toFixed(2));\n      }\n      return 0;\n    };\n\n    var nulls = (!_.isUndefined(this._dataviewModel.get('nulls')) && formatter.formatNumber(this._dataviewModel.get('nulls'))) || '-';\n    var isCollapsed = this.model.get('collapsed');\n\n    var prefix = this.model.get('prefix');\n    var suffix = this.model.get('suffix');\n\n    var sourceId = this._dataviewModel.get('source').id;\n    var letter = layerColors.letter(sourceId);\n    var sourceColor = layerColors.getColorForLetter(letter);\n    var sourceType = this._dataviewModel.getSourceType() || '';\n    var isSourceType = this._dataviewModel.isSourceType();\n    var layerName = isSourceType\n      ? this.model.get('table_name')\n      : this._layerModel.get('layer_name');\n\n    this.$el.html(\n      template({\n        title: this.model.get('title'),\n        sourceId: sourceId,\n        sourceType: Analyses.title(sourceType),\n        isSourceType: isSourceType,\n        showStats: this.model.get('show_stats'),\n        showSource: this.model.get('show_source') && letter !== '',\n        operation: this._dataviewModel.get('operation'),\n        value: value,\n        formatedValue: format(value),\n        description: this.model.get('description'),\n        nulls: nulls,\n        prefix: unescapeHTML(prefix),\n        suffix: unescapeHTML(suffix),\n        isCollapsed: isCollapsed,\n        sourceColor: sourceColor,\n        layerName: escapeHTML(layerName)\n      })\n    );\n\n    var animator = new AnimateValues({\n      el: this.$el\n    });\n\n    animator.animateValue(\n      this._dataviewModel,\n      'data',\n      '.js-value',\n      animationTemplate,\n      {\n        animationSpeed: 700,\n        formatter: format,\n        templateData: {\n          prefix: unescapeHTML(prefix),\n          suffix: unescapeHTML(suffix)\n        }\n      }\n    );\n\n    this.$el.toggleClass('is-collapsed', !!isCollapsed);\n\n    this._initViews();\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.model, 'change:title change:description change:collapsed change:prefix change:suffix', this.render);\n    this.listenTo(this._dataviewModel, 'change:data', this.render);\n    this.listenTo(this._layerModel, 'change:layer_name', this.render);\n  },\n\n  _initViews: function () {\n    var dropdown = new DropdownView({\n      model: this.model,\n      target: '.js-actions',\n      container: this.$('.js-header')\n    });\n    this.addView(dropdown);\n\n    var actionsTooltip = new TipsyTooltipView({\n      el: this.$el.find('.js-actions'),\n      gravity: 'auto'\n    });\n    this.addView(actionsTooltip);\n  }\n});\n","var $ = require('jquery');\nvar _ = require('underscore');\nvar d3 = require('d3');\nvar d3Interpolate = require('d3-interpolate');\nvar CoreModel = require('backbone/core-model');\nvar CoreView = require('backbone/core-view');\nvar formatter = require('../../formatter');\nvar timestampHelper = require('../../util/timestamp-helper');\nvar viewportUtils = require('../../viewport-utils');\n\nvar FILTERED_COLOR = '#2E3C43';\nvar UNFILTERED_COLOR = 'rgba(0, 0, 0, 0.06)';\nvar TIP_RECT_HEIGHT = 17;\nvar TIP_H_PADDING = 6;\nvar TRIANGLE_SIDE = 14;\nvar TRIANGLE_HEIGHT = 7;\n// How much lower (based on height) will the triangle be on the right side\nvar TRIANGLE_RIGHT_FACTOR = 1.3;\nvar TOOLTIP_MARGIN = 2;\nvar DASH_WIDTH = 2;\nvar MOBILE_BAR_HEIGHT = 3;\n\nvar BEZIER_MARGIN_X = 0.1;\nvar BEZIER_MARGIN_Y = 1;\n\nvar trianglePath = function (x1, y1, x2, y2, x3, y3, yFactor) {\n  // Bezier Control point y\n  var cy = y3 + (yFactor * BEZIER_MARGIN_Y);\n  // Bezier Control point x 1\n  var cx1 = x3 + BEZIER_MARGIN_X;\n  var cx2 = x3 - BEZIER_MARGIN_X;\n  return 'M ' + x1 + ' ' + y1 + ' L ' + x2 + ' ' + y2 + ' C ' + cx1 + ' ' + cy + ' ' + cx2 + ' ' + cy + ' ' + x1 + ' ' + y1 + ' z';\n};\n\nmodule.exports = CoreView.extend({\n  options: {\n    // render the chart once the width is set as default, provide false value for this prop to disable this behavior\n    // e.g. for \"mini\" histogram behavior\n    showOnWidthChange: true,\n    chartBarColor: '#F2CC8F',\n    labelsMargin: 16, // px\n    hasAxisTip: false,\n    minimumBarHeight: 2,\n    animationSpeed: 750,\n    handleWidth: 8,\n    handleRadius: 3,\n    divisionWidth: 80,\n    animationBarDelay: function (d, i) {\n      return Math.random() * (100 + (i * 10));\n    },\n    transitionType: 'elastic'\n  },\n\n  initialize: function () {\n    this._originalData = this.options.originalData;\n\n    if (!_.isNumber(this.options.height)) throw new Error('height is required');\n    if (!this.options.dataviewModel) throw new Error('dataviewModel is required');\n    if (!this.options.layerModel) throw new Error('layerModel is required');\n    if (!this.options.type) throw new Error('type is required');\n\n    _.bindAll(this, '_selectBars', '_adjustBrushHandles', '_onBrushMove', '_onBrushEnd', '_onMouseMove', '_onMouseOut');\n\n    // Use this special setup for each view instance ot have its own debounced listener\n    // TODO in theory there's the possiblity that the callback is called before the view is rendered in the DOM,\n    //  which would lead to the view not being visible until an explicit window resize.\n    //  a wasAddedToDOM event would've been nice to have\n    this.forceResize = _.debounce(this._resizeToParentElement.bind(this), 50);\n\n    // using tagName: 'svg' doesn't work,\n    // and w/o class=\"\" d3 won't instantiate properly\n    this.setElement($('<svg class=\"\"></svg>')[0]);\n\n    this._widgetModel = this.options.widgetModel;\n    this._dataviewModel = this.options.dataviewModel;\n    this._layerModel = this.options.layerModel;\n\n    this.canvas = d3.select(this.el)\n      .style('overflow', 'visible')\n      .attr('width', 0)\n      .attr('height', this.options.height);\n\n    this.canvas\n      .append('g')\n      .attr('class', 'CDB-WidgetCanvas');\n\n    this._setupModel();\n    this._setupBindings();\n    this._setupDimensions();\n    this._setupD3Bindings();\n    this._setupFillColor();\n\n    this.hide(); // will be toggled on width change\n\n    this._tooltipFormatter = formatter.formatNumber; // Tooltips are always numbers\n    this._createFormatter();\n  },\n\n  render: function () {\n    this._generateChart();\n    this._generateChartContent();\n    return this;\n  },\n\n  replaceData: function (data) {\n    this.model.set({ data: data });\n  },\n\n  toggleLabels: function (show) {\n    this.model.set('showLabels', show);\n  },\n\n  chartWidth: function () {\n    var margin = this.model.get('margin');\n\n    // Get max because width might be negative initially\n    return Math.max(0, this.model.get('width') - margin.left - margin.right);\n  },\n\n  chartHeight: function () {\n    var m = this.model.get('margin');\n    var labelsMargin = this.model.get('showLabels')\n      ? this.options.labelsMargin\n      : 0;\n\n    return this.model.get('height') - m.top - m.bottom - labelsMargin;\n  },\n\n  getSelectionExtent: function () {\n    if (this.brush && this.brush.extent()) {\n      var extent = this.brush.extent();\n\n      return extent[1] - extent[0];\n    }\n\n    return 0;\n  },\n\n  _resizeToParentElement: function () {\n    if (this.$el.parent()) {\n      // Hide this view temporarily to get actual size of the parent container\n      var wasHidden = this.isHidden();\n\n      this.hide();\n\n      var parent = this.$el.parent();\n      var grandParent = parent.parent && parent.parent() && parent.parent().length > 0\n        ? parent.parent()\n        : null;\n      var width = parent.width() || 0;\n\n      if (this.model.get('animated')) {\n        // We could just substract 24, width of play/pause but imho this is more future proof\n        this.$el.siblings().each(function () {\n          width -= $(this).width();\n        });\n      }\n\n      if (grandParent && grandParent.outerWidth && this._isTabletViewport()) {\n        width -= grandParent.outerWidth(true) - grandParent.width();\n      }\n\n      if (wasHidden) {\n        this.hide();\n      } else {\n        this.show();\n      }\n\n      this.model.set('width', width);\n    }\n  },\n\n  _onChangeLeftAxisTip: function () {\n    this._updateAxisTip('left');\n  },\n\n  _onChangeRightAxisTip: function () {\n    this._updateAxisTip('right');\n  },\n\n  _overlap: function (first, second) {\n    var bFirst = first.node().getBoundingClientRect();\n    var bSecond = second.node().getBoundingClientRect();\n\n    return !(bFirst.right < bSecond.left ||\n    bFirst.left > bSecond.right ||\n    bFirst.bottom < bSecond.top ||\n    bFirst.top > bSecond.bottom);\n  },\n\n  _updateTriangle: function (isRight, triangle, start, center, rectWidth) {\n    var ySign = isRight && !(this._isTabletViewport() && this._isTimeSeries()) ? -1 : 1;\n\n    var transform = d3.transform(triangle.attr('transform'));\n    var side = Math.min(TRIANGLE_SIDE, rectWidth);\n    var translate = center - (side / 2);\n\n    var offset = isRight\n      ? Math.min((start + rectWidth) - (translate + side), 0)\n      : Math.abs(Math.min(translate - start, 0));\n\n    var p0 = [0, 0];\n    var p1 = [side, 0];\n    var p2 = [side / 2 - offset, TRIANGLE_HEIGHT * ySign];\n\n    triangle.attr('d', trianglePath(p0[0], p0[1], p1[0], p1[1], p2[0], p2[1], ySign));\n    transform.translate[0] = center - (side / 2) + offset;\n\n    triangle.attr('transform', transform.toString());\n  },\n\n  _updateAxisTip: function (className) {\n    var leftTip = 'left_axis_tip';\n    var rightTip = 'right_axis_tip';\n    var attr = className + '_axis_tip';\n    var isRight = className === 'right';\n    var isLeft = !isRight;\n    var isWeek = this._dataviewModel.get('aggregation') === 'week';\n    var model = this.model.get(attr);\n    if (model === undefined) { return; }\n\n    var leftValue = this.model.get(leftTip);\n    var rightValue = this.model.get(rightTip);\n\n    var textLabel = this.chart.select('.CDB-Chart-axisTipText.CDB-Chart-axisTip-' + className);\n    var axisTip = this.chart.select('.CDB-Chart-axisTip.CDB-Chart-axisTip-' + className);\n    var rectLabel = this.chart.select('.CDB-Chart-axisTipRect.CDB-Chart-axisTip-' + className);\n    var handle = this.chart.select('.CDB-Chart-handle.CDB-Chart-handle-' + className);\n    var triangle = handle.select('.CDB-Chart-axisTipTriangle');\n\n    textLabel.data([model]).text(function (d) {\n      var text = this.formatter(d);\n\n      this._dataviewModel.trigger('on_update_axis_tip', {\n        attr: attr,\n        text: text\n      });\n\n      return text;\n    }.bind(this));\n\n    if (!textLabel.node()) {\n      return;\n    }\n\n    var textBBox = textLabel.node().getBBox();\n    var width = textBBox.width;\n    var rectWidth = width + TIP_H_PADDING;\n    var handleWidth = this.options.handleWidth;\n    var barWidth = this.barWidth;\n    var chartWidth = this.chartWidth();\n\n    rectLabel.attr('width', rectWidth);\n    textLabel.attr('dx', TIP_H_PADDING / 2);\n    textLabel.attr('dy', textBBox.height - Math.abs((textBBox.height - TIP_RECT_HEIGHT) / 2));\n\n    var parts = d3.transform(handle.attr('transform')).translate;\n    var xPos = +parts[0] + (this.options.handleWidth / 2);\n\n    var yPos = isRight && !(this._isMobileViewport() && this._isTimeSeries())\n      ? this.chartHeight() + (TRIANGLE_HEIGHT * TRIANGLE_RIGHT_FACTOR) - 1\n      : -(TRIANGLE_HEIGHT + TIP_RECT_HEIGHT + TOOLTIP_MARGIN);\n    yPos = Math.floor(yPos);\n\n    // Align rect and bar centers\n    var rectCenter = rectWidth / 2;\n    var barCenter = (handleWidth + barWidth) / 2;\n    barCenter -= (isRight ? barWidth : 0); // right tip should center to the previous bin\n    if (!this._isDateTimeSeries() || isWeek) { // In numeric and week histograms, axis should point to the handler\n      barCenter = handleWidth / 2;\n    }\n    var translate = barCenter - rectCenter;\n\n    // Check if rect if out of bounds and clip translate if that happens\n    var leftPos = xPos + translate;\n    var rightPos = leftPos + rectWidth;\n    var translatedCenter = translate + rectCenter;\n    var rightExceed = rightPos - (chartWidth + handleWidth);\n\n    // Do we exceed left?\n    if (leftPos < 0) {\n      translate -= leftPos;\n    }\n\n    // Do we exceed right?\n    if (rightExceed > 0) {\n      translate -= rightExceed;\n    }\n\n    // Show / hide labels depending on their values\n    var showTip = isLeft\n      ? leftValue <= rightValue\n      : (leftValue <= rightValue && !(leftValue === rightValue && this._isDateTimeSeries()));\n\n    this._showAxisTip(className, showTip);\n\n    // Translate axis tip\n    axisTip.attr('transform', 'translate(' + translate + ', ' + yPos + ')');\n\n    // Update triangle position\n    this._updateTriangle(isRight, triangle, translate, translatedCenter, rectWidth);\n\n    if (this.model.get('dragging') && this._isMobileViewport() && this._isTimeSeries()) {\n      this._showAxisTip(className, true);\n    }\n  },\n\n  _onChangeData: function () {\n    if (this.model.previous('data').length !== this.model.get('data').length) {\n      this.reset();\n    } else {\n      this.refresh();\n    }\n\n    this._setupFillColor();\n    this._refreshBarsColor();\n  },\n\n  _onChangeRange: function () {\n    var loIndex = this.model.get('lo_index');\n    var hiIndex = this.model.get('hi_index');\n    if ((loIndex === 0 && hiIndex === 0) || (loIndex === null && hiIndex === null)) {\n      return;\n    }\n\n    this.selectRange(loIndex, hiIndex);\n    this._adjustBrushHandles();\n    this._setAxisTipAccordingToBins();\n    this._selectBars();\n    this.trigger('on_brush_end', loIndex, hiIndex);\n  },\n\n  _onChangeWidth: function () {\n    var width = this.model.get('width');\n    this.canvas.attr('width', width);\n    this.chart.attr('width', width);\n    if (this.options.showOnWidthChange && width > 0) {\n      this.show();\n    }\n    this.reset();\n\n    var loBarIndex = this.model.get('lo_index');\n    var hiBarIndex = this.model.get('hi_index');\n    this.selectRange(loBarIndex, hiBarIndex);\n    this._updateAxisTip('left');\n    this._updateAxisTip('right');\n  },\n\n  _onChangeNormalized: function () {\n    // do not show shadow bars if they are not enabled\n    this.model.set('show_shadow_bars', !this.model.get('normalized'));\n    this._generateShadowBars();\n    this.updateYScale();\n    this.refresh();\n  },\n\n  _onChangeHeight: function () {\n    var height = this.model.get('height');\n\n    this.$el.height(height);\n    this.chart.attr('height', height);\n    this.leftHandle.attr('height', height);\n    this.rightHandle.attr('height', height);\n    this.updateYScale();\n\n    this.reset();\n  },\n\n  _onChangeShowLabels: function () {\n    this._axis.style('opacity', this.model.get('showLabels') ? 1 : 0);\n  },\n\n  _onChangePos: function () {\n    var pos = this.model.get('pos');\n    var margin = this.model.get('margin');\n\n    var x = +pos.x;\n    var y = +pos.y;\n\n    this.chart\n      .transition()\n      .duration(150)\n      .attr('transform', 'translate(' + (margin.left + x) + ', ' + (margin.top + y) + ')');\n  },\n\n  _onChangeDragging: function () {\n    this.chart.classed('is-dragging', this.model.get('dragging'));\n\n    if (!this.model.get('dragging') && this._isMobileViewport() && this._isTimeSeries()) {\n      this._showAxisTip('right', false);\n      this._showAxisTip('left', false);\n    }\n  },\n\n  _toggleAxisTip: function (className, show) {\n    var textLabel = this.chart.select('.CDB-Chart-axisTipText.CDB-Chart-axisTip-' + className);\n    var rectLabel = this.chart.select('.CDB-Chart-axisTipRect.CDB-Chart-axisTip-' + className);\n    var handle = this.chart.select('.CDB-Chart-handle.CDB-Chart-handle-' + className);\n    var triangle = handle.select('.CDB-Chart-axisTipTriangle');\n    var duration = 60;\n\n    if (textLabel) {\n      textLabel.transition().duration(duration).attr('opacity', show);\n    }\n    if (rectLabel) {\n      rectLabel.transition().duration(duration).attr('opacity', show);\n    }\n    if (triangle) {\n      triangle.transition().duration(duration).style('opacity', show);\n    }\n  },\n\n  _showAxisTip: function (className, show) {\n    this._toggleAxisTip(className, show ? 1 : 0);\n  },\n\n  _setAxisTipAccordingToBins: function () {\n    var left = this._getValueFromBinIndex(this._getLoBarIndex());\n    var right = this._getValueFromBinIndex(this._getHiBarIndex());\n    if (this._isDateTimeSeries()) {\n      right = timestampHelper.substractOneUnit(right, this._dataviewModel.get('aggregation'));\n    }\n    this._setAxisTip(left, right);\n  },\n\n  _setAxisTip: function (left, right) {\n    if (this.options.hasAxisTip) {\n      this.model.set({\n        left_axis_tip: left,\n        right_axis_tip: right\n      });\n    }\n  },\n\n  reset: function () {\n    this._removeChartContent();\n    this._setupDimensions();\n    this._calcBarWidth();\n    this._generateChartContent();\n    this._generateShadowBars();\n  },\n\n  refresh: function () {\n    this._createFormatter();\n    this._setupDimensions();\n    this._removeAxis();\n    this._generateAxis();\n    this._updateChart();\n    this._refreshBarsColor();\n\n    this.chart.select('.CDB-Chart-handles').moveToFront();\n    this.chart.select('.Brush').moveToFront();\n  },\n\n  resetIndexes: function () {\n    this.model.set({ lo_index: null, hi_index: null });\n  },\n\n  removeShadowBars: function () {\n    this.model.set('show_shadow_bars', false);\n  },\n\n  _removeShadowBars: function () {\n    this.chart.selectAll('.CDB-Chart-shadowBars').remove();\n  },\n\n  _removeBars: function () {\n    this.chart.selectAll('.CDB-Chart-bars').remove();\n  },\n\n  _removeBrush: function () {\n    this.chart.selectAll('.Brush').remove();\n    this.chart.classed('is-selectable', false);\n    this._axis.classed('is-disabled', false);\n  },\n\n  _removeLines: function () {\n    this.chart.select('.CDB-Chart-lines').remove();\n    this.chart.select('.CDB-Chart-line--bottom').remove();\n  },\n\n  _removeChartContent: function () {\n    this._removeBrush();\n    this._removeHandles();\n    this._removeBars();\n    this._removeAxis();\n    this._removeLines();\n  },\n\n  _generateChartContent: function () {\n    this._generateAxis();\n\n    if (!(this._isTabletViewport() && this._isTimeSeries())) {\n      this._generateLines();\n    }\n\n    this._generateBars();\n\n    if (!(this._isMobileViewport() && this._isTimeSeries())) {\n      this._generateBottomLine();\n    }\n\n    this._generateHandles();\n    this._setupBrush();\n  },\n\n  _generateLines: function () {\n    this._generateHorizontalLines();\n    this._generateVerticalLines();\n  },\n\n  _generateVerticalLines: function () {\n    var lines = this.chart.select('.CDB-Chart-lines');\n\n    lines.append('g')\n      .selectAll('.CDB-Chart-line')\n      .data(this.verticalRange.slice(1, this.verticalRange.length - 1))\n      .enter().append('svg:line')\n      .attr('class', 'CDB-Chart-line')\n      .attr('y1', 0)\n      .attr('x1', function (d) { return d; })\n      .attr('y2', this.chartHeight())\n      .attr('x2', function (d) { return d; });\n  },\n\n  _generateHorizontalLines: function () {\n    var lines = this.chart.append('g')\n      .attr('class', 'CDB-Chart-lines');\n\n    lines.append('g')\n      .attr('class', 'y')\n      .selectAll('.CDB-Chart-line')\n      .data(this.horizontalRange.slice(0, this.horizontalRange.length - 1))\n      .enter().append('svg:line')\n      .attr('class', 'CDB-Chart-line')\n      .attr('x1', 0)\n      .attr('y1', function (d) { return d; })\n      .attr('x2', this.chartWidth())\n      .attr('y2', function (d) { return d; });\n  },\n\n  _generateBottomLine: function () {\n    this.chart.append('line')\n      .attr('class', 'CDB-Chart-line CDB-Chart-line--bottom')\n      .attr('x1', 0)\n      .attr('y1', this.chartHeight() - 1)\n      .attr('x2', this.chartWidth() - 1)\n      .attr('y2', this.chartHeight() - 1);\n  },\n\n  _setupD3Bindings: function () { // TODO: move to a helper\n    d3.selection.prototype.moveToBack = function () {\n      return this.each(function () {\n        var firstChild = this.parentNode.firstChild;\n        if (firstChild) {\n          this.parentNode.insertBefore(this, firstChild);\n        }\n      });\n    };\n\n    d3.selection.prototype.moveToFront = function () {\n      return this.each(function () {\n        this.parentNode.appendChild(this);\n      });\n    };\n  },\n\n  _setupModel: function () {\n    this.model = new CoreModel({\n      bounded: false,\n      showLabels: true,\n      data: this.options.data,\n      height: this.options.height,\n      display: true,\n      show_shadow_bars: this.options.displayShadowBars,\n      margin: _.clone(this.options.margin),\n      width: 0, // will be set on resize listener\n      pos: { x: 0, y: 0 },\n      normalized: this.options.normalized,\n      local_timezone: this.options.local_timezone\n    });\n  },\n\n  _setupBindings: function () {\n    this.listenTo(this.model, 'change:data', this._onChangeData);\n    this.listenTo(this.model, 'change:display', this._onChangeDisplay);\n    this.listenTo(this.model, 'change:dragging', this._onChangeDragging);\n    this.listenTo(this.model, 'change:height', this._onChangeHeight);\n    this.listenTo(this.model, 'change:left_axis_tip', this._onChangeLeftAxisTip);\n    this.listenTo(this.model, 'change:lo_index change:hi_index', this._onChangeRange);\n    this.listenTo(this.model, 'change:pos', this._onChangePos);\n    this.listenTo(this.model, 'change:right_axis_tip', this._onChangeRightAxisTip);\n    this.listenTo(this.model, 'change:showLabels', this._onChangeShowLabels);\n    this.listenTo(this.model, 'change:show_shadow_bars', this._onChangeShowShadowBars);\n    this.listenTo(this.model, 'change:width', this._onChangeWidth);\n    this.listenTo(this.model, 'change:normalized', this._onChangeNormalized);\n\n    if (this._widgetModel) {\n      this.listenTo(this._widgetModel, 'change:autoStyle', this._refreshBarsColor);\n      this.listenTo(this._widgetModel, 'change:style', function () {\n        this._setupFillColor();\n        this._refreshBarsColor();\n      });\n    }\n\n    if (this._dataviewModel) {\n      this.listenTo(this._dataviewModel, 'change:offset change:localTimezone', function () {\n        this.refresh();\n      });\n    }\n\n    this.listenTo(this._layerModel, 'change:cartocss', function () {\n      if (!this._areGradientsAlreadyGenerated()) {\n        this._setupFillColor();\n      }\n    });\n\n    if (this._originalData) {\n      this.listenTo(this._originalData, 'change:data', function () {\n        this.updateYScale();\n        this._removeShadowBars();\n        this._generateShadowBars();\n      });\n    }\n  },\n\n  _setupDimensions: function () {\n    this._setupScales();\n    this._setupRanges();\n    this.forceResize();\n  },\n\n  _getData: function () {\n    return (this._originalData && this._originalData.getData()) || this.model.get('data');\n  },\n\n  _getMaxData: function (data) {\n    return d3.max(data, function (d) { return _.isEmpty(d) ? 0 : d.freq; });\n  },\n\n  _getXScale: function () {\n    return d3.scale.linear().domain([0, 100]).range([0, this.chartWidth()]);\n  },\n\n  _getYScale: function () {\n    var data = this.model.get('normalized') ? this.model.get('data') : this._getData();\n    return d3.scale.linear().domain([0, this._getMaxData(data)]).range([this.chartHeight(), 0]);\n  },\n\n  updateXScale: function () {\n    this.xScale = this._getXScale();\n  },\n\n  updateYScale: function () {\n    this.yScale = this._getYScale();\n  },\n\n  resetYScale: function () {\n    this.yScale = this._originalYScale;\n  },\n\n  _getDataForScales: function () {\n    if (!this.model.get('bounded') && this._originalData) {\n      return this._originalData.getData();\n    } else {\n      return this.model.get('data');\n    }\n  },\n\n  _setupScales: function () {\n    var data = this._getDataForScales();\n    this.updateXScale();\n\n    if (!this._originalYScale || this.model.get('normalized')) {\n      this._originalYScale = this.yScale = this._getYScale();\n    }\n\n    if (!data || !data.length) {\n      return;\n    }\n\n    var start = data[0].start;\n    var end = data[data.length - 1].end;\n\n    this.xAxisScale = d3.scale.linear().range([start, end]).domain([0, this.chartWidth()]);\n  },\n\n  _setupRanges: function () {\n    this.verticalRange = this._calculateVerticalRangeDivisions();\n    this.horizontalRange = d3.range(0, this.chartHeight() + this.chartHeight() / 2, this.chartHeight() / 2);\n  },\n\n  _calculateVerticalRangeDivisions: function () {\n    if (this._isDateTimeSeries() && this.model.get('data').length > 0) {\n      return this._calculateTimelySpacedDivisions();\n    }\n    return this._calculateEvenlySpacedDivisions();\n  },\n\n  _calculateTimelySpacedDivisions: function () {\n    this._calcBarWidth();\n    var divisions = Math.round(this.chartWidth() / this.options.divisionWidth);\n    var bucketsPerDivision = Math.ceil(this.model.get('data').length / divisions);\n    var range = [0];\n    var index = 0;\n\n    for (var i = 0; i < divisions; i++) {\n      index = (i < (divisions - 1)) ? index + bucketsPerDivision : this.model.get('data').length;\n      range.push(Math.ceil(this.xAxisScale.invert(this._getValueFromBinIndex(index))));\n    }\n\n    range = _.uniq(range);\n\n    // Sometimes the last two ticks are too close. In those cases, we get rid of the second to last\n    if (range.length >= 3) {\n      var lastTwo = _.last(range, 2);\n      if ((lastTwo[1] - lastTwo[0]) < this.options.divisionWidth) {\n        range = _.without(range, lastTwo[0]);\n      }\n    }\n\n    return range;\n  },\n\n  _calculateEvenlySpacedDivisions: function () {\n    var divisions = Math.round(this.chartWidth() / this.options.divisionWidth);\n    var step = this.chartWidth() / divisions;\n    var stop = this.chartWidth() + step;\n    var range = d3.range(0, stop, step).slice(0, divisions + 1);\n    return range;\n  },\n\n  _calcBarWidth: function () {\n    this.barWidth = this.chartWidth() / this.model.get('data').length;\n  },\n\n  _generateChart: function () {\n    var margin = this.model.get('margin');\n\n    this.chart = d3.select(this.el)\n      .selectAll('.CDB-WidgetCanvas')\n      .append('g')\n      .attr('class', 'CDB-Chart')\n      .attr('transform', 'translate(' + margin.left + ', ' + margin.top + ')');\n\n    this.chart.classed(this.options.className || '', true);\n  },\n\n  _onChangeShowShadowBars: function () {\n    if (this.model.get('show_shadow_bars')) {\n      this._generateShadowBars();\n    } else {\n      this._removeShadowBars();\n    }\n  },\n\n  _onChangeDisplay: function () {\n    if (this.model.get('display')) {\n      this._show();\n    } else {\n      this._hide();\n    }\n  },\n\n  hide: function () {\n    this.model.set('display', false);\n  },\n\n  show: function () {\n    this.model.set('display', true);\n  },\n\n  _hide: function () {\n    this.$el.hide();\n  },\n\n  _show: function () {\n    this.$el.show();\n  },\n\n  isHidden: function () {\n    return !this.model.get('display');\n  },\n\n  _selectBars: function () {\n    this.chart\n      .selectAll('.CDB-Chart-bar')\n      .classed({\n        'is-selected': function (d, i) {\n          return this._isBarChartWithinFilter(i);\n        }.bind(this),\n        'is-filtered': function (d, i) {\n          return !this._isBarChartWithinFilter(i);\n        }.bind(this)\n      });\n  },\n\n  _isBarChartWithinFilter: function (i) {\n    var extent = this.brush.extent();\n    var lo = extent[0];\n    var hi = extent[1];\n    var a = Math.floor(i * this.barWidth);\n    var b = Math.floor(a + this.barWidth);\n    var LO = Math.floor(this.xScale(lo));\n    var HI = Math.floor(this.xScale(hi));\n\n    return (a > LO && a < HI) || (b > LO && b < HI) || (a <= LO && b >= HI);\n  },\n\n  _isDragging: function () {\n    return this.model.get('dragging');\n  },\n\n  setAnimated: function () {\n    return this.model.set('animated', true);\n  },\n\n  _isAnimated: function () {\n    return this.model.get('animated');\n  },\n\n  _move: function (pos) {\n    this.model.set({ pos: pos });\n  },\n\n  expand: function (height) {\n    this.canvas.attr('height', this.model.get('height') + height);\n    this._move({ x: 0, y: height });\n  },\n\n  contract: function (height) {\n    this.canvas.attr('height', height);\n    this._move({ x: 0, y: 0 });\n  },\n\n  resizeHeight: function (height) {\n    this.model.set('height', height);\n  },\n\n  setNormalized: function (normalized) {\n    this.model.set('normalized', !!normalized);\n    return this;\n  },\n\n  removeSelection: function () {\n    this.resetIndexes();\n    this.chart.selectAll('.CDB-Chart-bar').classed({'is-selected': false, 'is-filtered': false});\n    this._refreshBarsColor();\n    this._removeBrush();\n    this._setupBrush();\n  },\n\n  selectRange: function (loBarIndex, hiBarIndex) {\n    if (!loBarIndex && !hiBarIndex) {\n      return;\n    }\n\n    // -- HACK: Reset filter if any of the indexes is out of the scope\n    var data = this._dataviewModel.get('data');\n    if (!data[loBarIndex] || !data[hiBarIndex - 1]) {\n      return this.trigger('on_reset_filter');\n    }\n\n    var loPosition = this._getBarPosition(loBarIndex);\n    var hiPosition = this._getBarPosition(hiBarIndex);\n\n    this.model.set({ lo_index: loBarIndex, hi_index: hiBarIndex });\n    this._selectRange(loPosition, hiPosition);\n  },\n\n  _selectRange: function (loPosition, hiPosition) {\n    this.chart.select('.Brush').transition()\n      .duration(this.brush.empty() ? 0 : 150)\n      .call(this.brush.extent([loPosition, hiPosition]))\n      .call(this.brush.event);\n  },\n\n  _getLoBarIndex: function () {\n    var extent = this.brush.extent();\n    return Math.round(this.xScale(extent[0]) / this.barWidth);\n  },\n\n  _getHiBarIndex: function () {\n    var extent = this.brush.extent();\n    return Math.round(this.xScale(extent[1]) / this.barWidth);\n  },\n\n  _getBarIndex: function () {\n    var x = d3.event.sourceEvent.layerX;\n    return Math.floor(x / this.barWidth);\n  },\n\n  _getBarPosition: function (index) {\n    var data = this.model.get('data');\n    return index * (100 / data.length);\n  },\n\n  _setupBrush: function () {\n    // define brush control element and its events\n    var brush = d3.svg.brush()\n      .x(this.xScale)\n      .on('brush', this._onBrushMove)\n      .on('brushend', this._onBrushEnd);\n\n    // create svg group with class brush and call brush on it\n    var brushg = this.chart.append('g')\n      .attr('class', 'Brush')\n      .call(brush);\n\n    var height = this._isTabletViewport() && this._isTimeSeries() ? this.chartHeight() * 2 : this.chartHeight();\n    // set brush extent to rect and define objects height\n    brushg.selectAll('rect')\n      .attr('y', 0)\n      .attr('height', height);\n\n    // Only bind on the background element\n    brushg.selectAll('rect.background')\n      .on('mouseout', this._onMouseOut)\n      .on('mousemove', this._onMouseMove);\n\n    // Prevent scroll while touching selections\n    brushg.selectAll('rect')\n      .classed('ps-prevent-touchmove', true);\n    brushg.selectAll('g')\n      .classed('ps-prevent-touchmove', true);\n\n    this.brush = brush;\n\n    // Make grabby handles as big as the display handles\n    this.chart.selectAll('g.resize rect')\n      .attr('width', this.options.handleWidth)\n      .attr('x', -this.options.handleWidth / 2);\n  },\n\n  _onBrushMove: function () {\n    if (!this.brush.empty()) {\n      this.chart.classed('is-selectable', true);\n      this._axis.classed('is-disabled', true);\n      this.model.set({ dragging: true });\n      this._selectBars();\n      this._setupFillColor();\n      this._refreshBarsColor();\n      this._adjustBrushHandles();\n      this._updateAxisTip('left');\n      this._updateAxisTip('right');\n    }\n  },\n\n  _onBrushEnd: function () {\n    var data = this.model.get('data');\n    var brush = this.brush;\n    var loPosition, hiPosition;\n\n    var loBarIndex = this._getLoBarIndex();\n    var hiBarIndex = this._getHiBarIndex();\n\n    this.model.set({ dragging: false });\n\n    // click in animated histogram\n    if (brush.empty() && this._isAnimated()) {\n      // Send 0..1 factor of position of click in graph\n      this.trigger('on_brush_click', brush.extent()[0] / 100);\n\n      return;\n    } else {\n      loPosition = this._getBarPosition(loBarIndex);\n      hiPosition = this._getBarPosition(hiBarIndex);\n\n      // for some reason d3 launches several brushend events\n      if (!d3.event.sourceEvent) {\n        return;\n      }\n\n      // click in first and last indexes\n      if (loBarIndex === hiBarIndex) {\n        if (hiBarIndex >= data.length) {\n          loBarIndex = data.length - 1;\n          hiBarIndex = data.length;\n        } else {\n          hiBarIndex = hiBarIndex + 1;\n        }\n      }\n\n      this.model.set({ lo_index: loBarIndex, hi_index: hiBarIndex }, { silent: true });\n      // Maybe the indexes don't change, and the handlers end up stuck in the middle of the\n      // bucket because the event doesn't trigger, so let's trigger it manually\n      this.model.trigger('change:lo_index');\n    }\n\n    // click in non animated histogram\n    if (d3.event.sourceEvent && loPosition === undefined && hiPosition === undefined) {\n      var barIndex = this._getBarIndex();\n      this.model.set({ lo_index: barIndex, hi_index: barIndex + 1 });\n    }\n\n    this._setupFillColor();\n    this._refreshBarsColor();\n  },\n\n  _onMouseOut: function () {\n    var bars = this.chart.selectAll('.CDB-Chart-bar');\n\n    bars\n      .classed('is-highlighted', false)\n      .attr('fill', this._getFillColor.bind(this));\n\n    this.trigger('hover', { target: null });\n  },\n\n  _onMouseMove: function () {\n    var x = d3.event.offsetX - this.model.get('margin').left;\n\n    var barIndex = Math.floor(x / this.barWidth);\n    var data = this.model.get('data');\n\n    if (data[barIndex] === undefined || data[barIndex] === null) {\n      return;\n    }\n\n    var freq = data[barIndex].freq;\n    var hoverProperties = {};\n\n    var bar = this.chart.select('.CDB-Chart-bar:nth-child(' + (barIndex + 1) + ')');\n\n    if (bar && bar.node() && !bar.classed('is-selected')) {\n      var left = (barIndex * this.barWidth) + (this.barWidth / 2);\n      var top = this.yScale(freq);\n      var h = this.chartHeight() - this.yScale(freq);\n\n      if (h < this.options.minimumBarHeight && h > 0) {\n        top = this.chartHeight() - this.options.minimumBarHeight;\n      }\n\n      if (!this._isDragging() && freq > 0) {\n        var d = this.formatter(freq);\n        hoverProperties = { target: bar[0][0], top: top, left: left, data: d };\n      } else {\n        hoverProperties = null;\n      }\n    } else {\n      hoverProperties = null;\n    }\n\n    this.trigger('hover', hoverProperties);\n\n    this.chart.selectAll('.CDB-Chart-bar')\n      .classed('is-highlighted', false)\n      .attr('fill', this._getFillColor.bind(this));\n\n    if (bar && bar.node()) {\n      bar.attr('fill', function () {\n        return this._getHoverFillColor(data[barIndex], barIndex);\n      }.bind(this));\n      bar.classed('is-highlighted', true);\n    }\n  },\n\n  _adjustBrushHandles: function () {\n    var extent = this.brush.extent();\n\n    var loExtent = extent[0];\n    var hiExtent = extent[1];\n\n    this._moveHandle(loExtent, 'left');\n    this._moveHandle(hiExtent, 'right');\n\n    this._setAxisTipAccordingToBins();\n  },\n\n  _moveHandle: function (position, selector) {\n    var handle = this.chart.select('.CDB-Chart-handle-' + selector);\n    var fixedPosition = position.toFixed(5);\n    var x = this.xScale(fixedPosition) - this.options.handleWidth / 2;\n    var display = (fixedPosition >= 0 && fixedPosition <= 100) ? 'inline' : 'none';\n\n    handle\n      .style('display', display)\n      .attr('transform', 'translate(' + x + ', 0)');\n  },\n\n  _generateAxisTip: function (className) {\n    var handle = this.chart.select('.CDB-Chart-handle.CDB-Chart-handle-' + className);\n\n    var yPos = className === 'right' && !(this._isMobileViewport() && this._isTimeSeries())\n      ? this.chartHeight() + (TRIANGLE_HEIGHT * TRIANGLE_RIGHT_FACTOR) : -(TRIANGLE_HEIGHT + TIP_RECT_HEIGHT + TOOLTIP_MARGIN);\n    yPos = Math.floor(yPos);\n\n    var yTriangle = className === 'right' && !(this._isMobileViewport() && this._isTimeSeries())\n      ? this.chartHeight() + (TRIANGLE_HEIGHT * TRIANGLE_RIGHT_FACTOR) + 2 : -(TRIANGLE_HEIGHT + TOOLTIP_MARGIN) - 2;\n    var yFactor = className === 'right' ? -1 : 1;\n    var triangleHeight = TRIANGLE_HEIGHT * yFactor;\n\n    var axisTip = handle.selectAll('g')\n      .data([''])\n      .enter().append('g')\n      .attr('class', 'CDB-Chart-axisTip CDB-Chart-axisTip-' + className)\n      .attr('transform', 'translate(0,' + yPos + ')');\n\n    handle.append('path')\n      .attr('class', 'CDB-Chart-axisTipRect CDB-Chart-axisTipTriangle')\n      .attr('transform', 'translate(' + ((this.options.handleWidth / 2) - (TRIANGLE_SIDE / 2)) + ', ' + yTriangle + ')')\n      .attr('d', trianglePath(0, 0, TRIANGLE_SIDE, 0, (TRIANGLE_SIDE / 2), triangleHeight, yFactor))\n      .style('opacity', '1');\n\n    axisTip.append('rect')\n      .attr('class', 'CDB-Chart-axisTipRect CDB-Chart-axisTip-' + className)\n      .attr('rx', '2')\n      .attr('ry', '2')\n      .attr('opacity', '1')\n      .attr('height', TIP_RECT_HEIGHT);\n\n    axisTip.append('text')\n      .attr('class', 'CDB-Text CDB-Size-small CDB-Chart-axisTipText CDB-Chart-axisTip-' + className)\n      .attr('dy', '11')\n      .attr('dx', '0')\n      .attr('opacity', '1')\n      .text(function (d) { return d; });\n  },\n\n  _isTabletViewport: function () {\n    return viewportUtils.isTabletViewport();\n  },\n\n  _generateHandle: function (className) {\n    var height = this._isTabletViewport() && this._isTimeSeries() ? this.chartHeight() * 2 : this.chartHeight();\n    var opts = { width: this.options.handleWidth, height: height, radius: this.options.handleRadius };\n\n    var handle = this.chart.select('.CDB-Chart-handles')\n      .append('g')\n      .attr('class', 'CDB-Chart-handle CDB-Chart-handle-' + className);\n\n    if (this.options.hasAxisTip) {\n      this._generateAxisTip(className);\n    }\n\n    if (this.options.hasHandles) {\n      handle\n        .append('rect')\n        .attr('class', 'CDB-Chart-handleRect')\n        .attr('width', opts.width)\n        .attr('height', opts.height)\n        .attr('rx', opts.radius)\n        .attr('ry', opts.radius);\n\n      var y = this._isTabletViewport() && this._isTimeSeries() ? this.chartHeight() : this.chartHeight() / 2;\n      y -= 3;\n      var x1 = (opts.width - DASH_WIDTH) / 2;\n\n      for (var i = 0; i < 3; i++) {\n        handle\n          .append('line')\n          .attr('class', 'CDB-Chart-handleGrip')\n          .attr('x1', x1)\n          .attr('y1', y + i * 3)\n          .attr('x2', x1 + DASH_WIDTH)\n          .attr('y2', y + i * 3);\n      }\n    }\n\n    return handle;\n  },\n\n  _generateHandles: function () {\n    this.chart.append('g').attr('class', 'CDB-Chart-handles');\n    this.leftHandle = this._generateHandle('left');\n    this.rightHandle = this._generateHandle('right');\n  },\n\n  _removeHandles: function () {\n    this.chart.select('.CDB-Chart-handles').remove();\n  },\n\n  _removeAxis: function () {\n    this.canvas.select('.CDB-Chart-axis').remove();\n  },\n\n  _generateAdjustAnchorMethod: function (ticks) {\n    return function (d, i) {\n      if (i === 0) {\n        return 'start';\n      } else if (i === (ticks.length - 1)) {\n        return 'end';\n      } else {\n        return 'middle';\n      }\n    };\n  },\n\n  _generateAxis: function () {\n    this._axis = this._generateNumericAxis();\n\n    this._onChangeShowLabels();\n  },\n\n  _generateNumericAxis: function () {\n    var self = this;\n    var adjustTextAnchor = this._generateAdjustAnchorMethod(this.verticalRange);\n\n    var axis = this.chart.append('g')\n      .attr('class', 'CDB-Chart-axis CDB-Text CDB-Size-small');\n\n    function verticalToValue (d) {\n      return self.xAxisScale\n        ? self.xAxisScale(d)\n        : null;\n    }\n\n    axis\n      .append('g')\n      .selectAll('.Label')\n      .data(this.verticalRange)\n      .enter().append('text')\n      .attr('x', function (d) {\n        return d;\n      })\n      .attr('y', function () { return self.chartHeight() + 15; })\n      .attr('text-anchor', adjustTextAnchor)\n      .text(function (d) {\n        var value = verticalToValue(d);\n        if (_.isFinite(value)) {\n          return self.formatter(value);\n        }\n      });\n\n    return axis;\n  },\n\n  _getMinValueFromBinIndex: function (binIndex) {\n    var data = this.model.get('data');\n    var dataBin = data[binIndex];\n    if (dataBin) {\n      return dataBin.min != null ? dataBin.min : dataBin.start;\n    } else {\n      return null;\n    }\n  },\n\n  _getMaxValueFromBinIndex: function (binIndex) {\n    var result = null;\n    var data = this.model.get('data');\n    var dataBin = data[binIndex];\n    if (dataBin) {\n      if (this._isDateTimeSeries() && !_.isUndefined(dataBin.next)) {\n        result = dataBin.next;\n      } else {\n        result = dataBin.min != null ? dataBin.max : dataBin.end;\n      }\n    }\n\n    return result;\n  },\n\n  _getValueFromBinIndex: function (index) {\n    if (!_.isNumber(index)) {\n      return null;\n    }\n    var result = null;\n    var fromStart = true;\n    var data = this.model.get('data');\n    if (index >= data.length) {\n      index = data.length - 1;\n      fromStart = false;\n    }\n    var dataBin = data[index];\n    if (dataBin) {\n      result = fromStart ? dataBin.start : _.isFinite(dataBin.next) ? dataBin.next : dataBin.end;\n    }\n\n    return result;\n  },\n\n  _getIndexFromValue: function (value) {\n    var index = _.findIndex(this.model.get('data'), function (bin) {\n      return bin.start <= value && value <= bin.end;\n    });\n    return index;\n  },\n\n  _getMaxFromData: function () {\n    return this.model.get('data').length > 0\n      ? _.last(this.model.get('data')).end\n      : null;\n  },\n\n  // Calculates the domain ([ min, max ]) of the selected data. If there is no selection ongoing,\n  // it will take the first and last buckets with frequency.\n  _calculateDataDomain: function () {\n    var data = _.clone(this.model.get('data'));\n    var minBin;\n    var maxBin;\n    var minValue;\n    var maxValue;\n\n    if (!this._hasFilterApplied()) {\n      minValue = this._getMinValueFromBinIndex(0);\n      maxValue = this._getMaxValueFromBinIndex(data.length - 1);\n\n      minBin = _.find(data, function (d) {\n        return d.freq !== 0;\n      });\n\n      maxBin = _.find(data.reverse(), function (d) {\n        return d.freq !== 0;\n      });\n    } else {\n      var loBarIndex = this._getLoBarIndex();\n      var hiBarIndex = this._getHiBarIndex() - 1;\n      var filteredData = data.slice(loBarIndex, hiBarIndex);\n\n      if (_.isNaN(loBarIndex) || _.isNaN(hiBarIndex)) {\n        return [0, 0];\n      }\n\n      minValue = this._getMinValueFromBinIndex(loBarIndex);\n      maxValue = this._getMaxValueFromBinIndex(hiBarIndex);\n\n      if (data[loBarIndex] && data[loBarIndex].freq === 0) {\n        minBin = _.find(filteredData, function (d) {\n          return d.freq !== 0;\n        }, this);\n      }\n\n      if (data[hiBarIndex] && data[hiBarIndex].freq === 0) {\n        var reversedData = filteredData.reverse();\n        maxBin = _.find(reversedData, function (d) {\n          return d.freq !== 0;\n        }, this);\n      }\n    }\n\n    minValue = minBin ? (minBin.min != null ? minBin.min : minBin.start) : minValue;\n    maxValue = maxBin ? (maxBin.max != null ? maxBin.max : maxBin.end) : maxValue;\n\n    return [minValue, maxValue];\n  },\n\n  _removeFillGradients: function () {\n    var defs = d3.select(this.el).select('defs');\n    defs.remove();\n    delete this._linearGradients;\n  },\n\n  _areGradientsAlreadyGenerated: function () {\n    return !!this._linearGradients;\n  },\n\n  // Generate a linear-gradient with several stops for each bar\n  // in order to generate the proper colors ramp. It will depend\n  // of the domain of the selected data.\n  _generateFillGradients: function () {\n    if (!this._widgetModel || !this._widgetModel.isAutoStyleEnabled()) {\n      return false;\n    }\n\n    var obj = this._widgetModel.getAutoStyle();\n\n    if (_.isEmpty(obj) || _.isEmpty(obj.definition)) {\n      return false;\n    }\n\n    var self = this;\n    var geometryDefinition = obj.definition[Object.keys(obj.definition)[0]]; // Gets first definition by geometry\n    var colorsRange = geometryDefinition && geometryDefinition.color && geometryDefinition.color.range;\n    var interpolatedColors = d3Interpolate.interpolateRgbBasis(colorsRange);\n    var colorsRangeHover = _.map(colorsRange, function (color) {\n      return d3.rgb(color).darker(0.3).toString();\n    });\n    var interpolatedHoverColors = d3Interpolate.interpolateRgbBasis(colorsRangeHover);\n    var data = this.model.get('data');\n    var domain = this._calculateDataDomain();\n    var domainScale = d3.scale.linear().domain(domain).range([0, 1]);\n    var defs = d3.select(this.el).append('defs');\n    var stopsNumber = 4; // It is not necessary to create as many stops as colors\n\n    this._linearGradients = defs\n      .selectAll('.gradient')\n      .data(data)\n      .enter()\n      .append('linearGradient')\n      .attr('class', 'gradient')\n      .attr('id', function (d, i) {\n        // This is the scale for each bin, used in each stop within this gradient\n        this.__scale__ = d3.scale.linear()\n          .range([ self._getMinValueFromBinIndex(i), self._getMaxValueFromBinIndex(i) ])\n          .domain([0, 1]);\n        return 'bar-' + self.cid + '-' + i;\n      })\n      .attr('x1', '0%')\n      .attr('y1', '0%')\n      .attr('x2', '100%')\n      .attr('y2', '0%');\n\n    this._linearGradientsHover = defs\n      .selectAll('.gradient-hover')\n      .data(data)\n      .enter()\n      .append('linearGradient')\n      .attr('class', 'gradient-hover')\n      .attr('id', function (d, i) {\n        // This is the scale for each bin, used in each stop within this gradient\n        this.__scale__ = d3.scale.linear()\n          .range([self._getMinValueFromBinIndex(i), self._getMaxValueFromBinIndex(i)])\n          .domain([0, 1]);\n        return 'bar-' + self.cid + '-' + i + '-hover';\n      })\n      .attr('x1', '0%')\n      .attr('y1', '0%')\n      .attr('x2', '100%')\n      .attr('y2', '0%');\n\n    this._linearGradients\n      .selectAll('stop')\n      .data(d3.range(stopsNumber + 1))\n      .enter()\n      .append('stop')\n      .attr('offset', function (d, i) {\n        var offset = this.__offset__ = Math.floor(((i) / stopsNumber) * 100);\n        return (offset + '%');\n      })\n      .attr('stop-color', function () {\n        var localScale = this.parentNode.__scale__;\n        var interpolateValue = domainScale(localScale(this.__offset__ / 100));\n        return interpolatedColors(interpolateValue);\n      });\n\n    this._linearGradientsHover\n      .selectAll('stop')\n      .data(d3.range(stopsNumber + 1))\n      .enter()\n      .append('stop')\n      .attr('offset', function (d, i) {\n        var offset = this.__offset__ = Math.floor(((i) / stopsNumber) * 100);\n        return (offset + '%');\n      })\n      .attr('stop-color', function () {\n        var localScale = this.parentNode.__scale__;\n        var interpolateValue = domainScale(localScale(this.__offset__ / 100));\n        return interpolatedHoverColors(interpolateValue);\n      });\n  },\n\n  _setupFillColor: function () {\n    this._removeFillGradients();\n    this._generateFillGradients();\n  },\n\n  _getFillColor: function (d, i) {\n    if (this._widgetModel) {\n      if (this._widgetModel.isAutoStyle()) {\n        if (this._hasFilterApplied()) {\n          if (!this._isBarChartWithinFilter(i)) {\n            return UNFILTERED_COLOR;\n          }\n        }\n\n        return 'url(#bar-' + this.cid + '-' + i + ')';\n      } else {\n        if (this._hasFilterApplied()) {\n          if (this._isBarChartWithinFilter(i)) {\n            return FILTERED_COLOR;\n          } else {\n            return UNFILTERED_COLOR;\n          }\n        }\n\n        return this._widgetModel.getWidgetColor() || this.options.chartBarColor;\n      }\n    }\n\n    return this.options.chartBarColor;\n  },\n\n  _getHoverFillColor: function (d, i) {\n    var currentFillColor = this._getFillColor(d, i);\n\n    if (this._widgetModel) {\n      if (this._widgetModel.isAutoStyle()) {\n        return 'url(#bar-' + this.cid + '-' + i + '-hover)';\n      }\n    }\n\n    return d3.rgb(currentFillColor).darker(0.3).toString();\n  },\n\n  _updateChart: function () {\n    var self = this;\n    var data = this.model.get('data');\n\n    var bars = this.chart.selectAll('.CDB-Chart-bar')\n      .data(data);\n\n    bars\n      .enter()\n      .append('rect')\n      .attr('class', 'CDB-Chart-bar')\n      .attr('fill', this._getFillColor.bind(this))\n      .attr('x', function (d, i) {\n        return i * self.barWidth;\n      })\n      .attr('y', self.chartHeight())\n      .attr('height', 0)\n      .attr('width', Math.max(0, this.barWidth - 1));\n\n    bars\n      .attr('data-tooltip', function (d) {\n        return self._tooltipFormatter(d.freq);\n      })\n      .transition()\n      .duration(200)\n      .attr('height', function (d) {\n        if (_.isEmpty(d)) {\n          return 0;\n        }\n\n        if (self._isMobileViewport() && self._isTimeSeries()) {\n          return MOBILE_BAR_HEIGHT;\n        }\n\n        var h = self.chartHeight() - self.yScale(d.freq);\n\n        if (h < self.options.minimumBarHeight && h > 0) {\n          h = self.options.minimumBarHeight;\n        }\n        return h;\n      })\n      .attr('y', function (d) {\n        if (_.isEmpty(d)) {\n          return self.chartHeight();\n        }\n\n        if (self._isMobileViewport() && self._isTimeSeries()) {\n          return self.chartHeight() / 2 + MOBILE_BAR_HEIGHT;\n        }\n\n        var h = self.chartHeight() - self.yScale(d.freq);\n\n        if (h < self.options.minimumBarHeight && h > 0) {\n          return self.chartHeight() - self.options.minimumBarHeight;\n        } else {\n          return self.yScale(d.freq);\n        }\n      });\n\n    bars\n      .exit()\n      .transition()\n      .duration(200)\n      .attr('height', function () {\n        return 0;\n      })\n      .attr('y', function () {\n        return self.chartHeight();\n      });\n  },\n\n  _refreshBarsColor: function () {\n    this.chart\n      .selectAll('.CDB-Chart-bar')\n      .classed('is-highlighted', false)\n      .attr('fill', this._getFillColor.bind(this));\n  },\n\n  _isMobileViewport: function () {\n    return viewportUtils.isMobileViewport();\n  },\n\n  _generateBars: function () {\n    var self = this;\n    var data = this.model.get('data');\n\n    this._calcBarWidth();\n    // Remove spacing if not enough room for the smallest case, or mobile viewport\n    var spacing = ((((data.length * 2) - 1) > this.chartWidth() || this._isMobileViewport()) && this._isDateTimeSeries()) ? 0 : 1;\n\n    var bars = this.chart.append('g')\n      .attr('transform', 'translate(0, 0)')\n      .attr('class', 'CDB-Chart-bars')\n      .selectAll('.CDB-Chart-bar')\n      .data(data);\n\n    bars\n      .enter()\n      .append('rect')\n      .attr('class', 'CDB-Chart-bar')\n      .attr('fill', this._getFillColor.bind(self))\n      .attr('x', function (d, i) {\n        return i * self.barWidth;\n      })\n      .attr('y', self.chartHeight())\n      .attr('height', 0)\n      .attr('data-tooltip', function (d) {\n        return self._tooltipFormatter(d.freq);\n      })\n      .attr('width', Math.max(1, this.barWidth - spacing));\n\n    bars\n      .attr('data-tooltip', function (d) {\n        return self._tooltipFormatter(d.freq);\n      })\n      .transition()\n      .ease(this.options.transitionType)\n      .duration(this.options.animationSpeed)\n      .delay(this.options.animationBarDelay)\n      .transition()\n      .attr('height', function (d) {\n        if (_.isEmpty(d)) {\n          return 0;\n        }\n\n        if (self._isMobileViewport() && self._isTimeSeries()) {\n          return MOBILE_BAR_HEIGHT;\n        }\n\n        var h = self.chartHeight() - self.yScale(d.freq);\n        if (h < self.options.minimumBarHeight && h > 0) {\n          h = self.options.minimumBarHeight;\n        }\n\n        return h;\n      })\n      .attr('y', function (d) {\n        if (_.isEmpty(d)) {\n          return self.chartHeight();\n        }\n\n        if (self._isMobileViewport() && self._isTimeSeries()) {\n          return self.chartHeight() / 2 + MOBILE_BAR_HEIGHT;\n        }\n\n        var h = self.chartHeight() - self.yScale(d.freq);\n\n        if (h < self.options.minimumBarHeight && h > 0) {\n          return self.chartHeight() - self.options.minimumBarHeight;\n        } else {\n          return self.yScale(d.freq);\n        }\n      });\n  },\n\n  showShadowBars: function () {\n    if (this.options.displayShadowBars) {\n      this.model.set('show_shadow_bars', true);\n    }\n  },\n\n  _generateShadowBars: function () {\n    var data = this._getData();\n\n    if (!data || !data.length || !this.model.get('show_shadow_bars') || this.model.get('normalized')) {\n      this._removeShadowBars();\n      return;\n    }\n\n    this._removeShadowBars();\n\n    var self = this;\n\n    var yScale = d3.scale.linear().domain([0, this._getMaxData(data)]).range([this.chartHeight(), 0]);\n\n    var barWidth = this.chartWidth() / data.length;\n\n    this.chart.append('g')\n      .attr('transform', 'translate(0, 0)')\n      .attr('class', 'CDB-Chart-shadowBars')\n      .selectAll('.CDB-Chart-shadowBar')\n      .data(data)\n      .enter()\n      .append('rect')\n      .attr('class', 'CDB-Chart-shadowBar')\n      .attr('x', function (d, i) {\n        return i * barWidth;\n      })\n      .attr('y', function (d) {\n        if (_.isEmpty(d)) {\n          return self.chartHeight();\n        }\n\n        var h = self.chartHeight() - yScale(d.freq);\n\n        if (h < self.options.minimumBarHeight && h > 0) {\n          return self.chartHeight() - self.options.minimumBarHeight;\n        } else {\n          return yScale(d.freq);\n        }\n      })\n      .attr('width', Math.max(0.5, barWidth - 1))\n      .attr('height', function (d) {\n        if (_.isEmpty(d)) {\n          return 0;\n        }\n\n        var h = self.chartHeight() - yScale(d.freq);\n\n        if (h < self.options.minimumBarHeight && h > 0) {\n          h = self.options.minimumBarHeight;\n        }\n        return h;\n      });\n\n    // We need to explicitly move the lines of the grid behind the shadow bars\n    this.chart.selectAll('.CDB-Chart-shadowBars').moveToBack();\n    this.chart.selectAll('.CDB-Chart-lines').moveToBack();\n  },\n\n  _hasFilterApplied: function () {\n    return this.model.get('lo_index') != null && this.model.get('hi_index') != null;\n  },\n\n  _isTimeSeries: function () {\n    return this.options.type.indexOf('time') === 0;\n  },\n\n  _isDateTimeSeries: function () {\n    return this.options.type === 'time-date';\n  },\n\n  _calculateDivisionWithByAggregation: function (aggregation) {\n    switch (aggregation) {\n      case 'year':\n        return 50;\n      case 'quarter':\n      case 'month':\n        return 80;\n      case 'week':\n      case 'day':\n        return 120;\n      default:\n        return 140;\n    }\n  },\n\n  _createFormatter: function () {\n    this.formatter = formatter.formatNumber;\n\n    if (this._isDateTimeSeries()) {\n      this.formatter = formatter.timestampFactory(this._dataviewModel.get('aggregation'), this._dataviewModel.getCurrentOffset());\n      this.options.divisionWidth = this._calculateDivisionWithByAggregation(this._dataviewModel.get('aggregation'));\n    }\n  },\n\n  unsetBounds: function () {\n    this.model.set('bounded', false);\n    this.updateYScale();\n    this.contract(this.options.height);\n    this.resetIndexes();\n    this.removeSelection();\n    this._setupFillColor();\n  },\n\n  setBounds: function () {\n    this.model.set('bounded', true);\n    this.updateYScale();\n    this.expand(4);\n    this.removeShadowBars();\n  }\n});\n","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar formatter = require('../../formatter');\nvar HistogramTitleView = require('./histogram-title-view');\nvar HistogramChartView = require('./chart');\nvar placeholder = require('./placeholder.tpl');\nvar template = require('./content.tpl');\nvar DropdownView = require('../dropdown/widget-dropdown-view');\nvar TipsyTooltipView = require('../../../builder/components/tipsy-tooltip-view');\nvar AnimateValues = require('../animate-values.js');\nvar animationTemplate = require('./animation-template.tpl');\nvar layerColors = require('../../util/layer-colors');\nvar analyses = require('../../data/analyses');\nvar escapeHTML = require('../../util/escape-html');\n\nvar TABLET_VIEWPORT_BREAKPOINT = 1200;\n\n/**\n * Widget content view for a histogram\n */\nmodule.exports = CoreView.extend({\n  className: 'CDB-Widget-body',\n\n  defaults: {\n    chartHeight: 48 + 20 + 4\n  },\n\n  events: {\n    'click .js-clear': '_resetWidget',\n    'click .js-zoom': '_zoom'\n  },\n\n  initialize: function () {\n    this._dataviewModel = this.model.dataviewModel;\n    this._layerModel = this.model.layerModel;\n    this._originalData = this._dataviewModel.getUnfilteredDataModel();\n    this.filter = this._dataviewModel.filter;\n    this.lockedByUser = false;\n    this._numberOfFilters = 0;\n    this._initStateApplied = false;\n\n    if (this._originalData.get('hasBeenFetched')) {\n      this._initBinds();\n    } else {\n      this.listenToOnce(this._originalData, 'change:hasBeenFetched', function () {\n        this._initBinds();\n      });\n    }\n\n    window.addEventListener('resize', this._onWindowResized.bind(this), { passive: true });\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this._unbinds();\n\n    this.$el.toggleClass('is-collapsed', !!this.model.get('collapsed'));\n\n    var data = this._dataviewModel.getData();\n    var hasNulls = this._dataviewModel.hasNulls();\n    var originalData = this._originalData.getData();\n    var isDataEmpty = !_.size(data) && !_.size(originalData);\n\n    var sourceId = this._dataviewModel.get('source').id;\n    var letter = layerColors.letter(sourceId);\n    var sourceColor = layerColors.getColorForLetter(letter);\n    var sourceType = this._dataviewModel.getSourceType() || '';\n    var isSourceType = this._dataviewModel.isSourceType();\n    var layerName = isSourceType\n      ? this.model.get('table_name')\n      : this._layerModel.get('layer_name');\n\n    this.$el.html(\n      template({\n        title: this.model.get('title'),\n        sourceId: sourceId,\n        sourceType: analyses.title(sourceType),\n        isSourceType: isSourceType,\n        showStats: this.model.get('show_stats'),\n        showNulls: hasNulls,\n        showSource: this.model.get('show_source') && letter !== '',\n        itemsCount: !isDataEmpty ? data.length : '-',\n        isCollapsed: !!this.model.get('collapsed'),\n        sourceColor: sourceColor,\n        layerName: escapeHTML(layerName)\n      })\n    );\n\n    if (isDataEmpty) {\n      this._addPlaceholder();\n      this._initTitleView();\n    } else {\n      this._setupBindings();\n      this._initViews();\n    }\n\n    return this;\n  },\n\n  _initViews: function () {\n    this._initTitleView();\n    this._initDropdownView();\n    this._renderMiniChart();\n    this._renderMainChart();\n    this._renderAllValues();\n  },\n\n  _onWindowResized: function () {\n    if (window.innerWidth < TABLET_VIEWPORT_BREAKPOINT) {\n      this.histogramChartView && this.histogramChartView.forceResize();\n    }\n  },\n\n  _initDropdownView: function () {\n    var dropdown = new DropdownView({\n      model: this.model,\n      target: '.js-actions',\n      container: this.$('.js-header'),\n      flags: {\n        normalizeHistogram: true\n      }\n    });\n\n    this.addView(dropdown);\n  },\n\n  _toggleTooltip: function (event) {\n    if (!event || !event.target) {\n      return this._clearTooltip();\n    }\n\n    this._showTooltip(event);\n  },\n\n  _showTooltip: function (event) {\n    if (this.tooltip && event && this.tooltip.getElement() === event.target) {\n      return;\n    }\n\n    this._clearTooltip();\n\n    this.tooltip = new TipsyTooltipView({\n      el: event.target,\n      title: 'data-tooltip',\n      trigger: 'manual'\n    });\n\n    this.tooltip.showTipsy();\n    this.addView(this.tooltip);\n  },\n\n  _clearTooltip: function () {\n    if (!this.tooltip) return;\n\n    this.tooltip.hideTipsy();\n    this.removeView(this.tooltip);\n    this.tooltip = undefined;\n  },\n\n  _initTitleView: function () {\n    var titleView = new HistogramTitleView({\n      widgetModel: this.model,\n      dataviewModel: this._dataviewModel,\n      layerModel: this._layerModel\n    });\n\n    this.$('.js-title').append(titleView.render().el);\n    this.addView(titleView);\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.model, 'change:collapsed', this.render);\n    this.listenTo(this.model, 'change:normalized', this._onNormalizedChanged);\n\n    if (this.model.get('hasInitialState') === true) {\n      this._setInitialState();\n    } else {\n      this.listenTo(this.model, 'change:hasInitialState', this._setInitialState);\n    }\n\n    this.listenTo(this._layerModel, 'change:layer_name', this.render);\n  },\n\n  _setInitialState: function () {\n    var data = this._dataviewModel.getData();\n    if (data.length === 0) {\n      this._dataviewModel.once('change:data', this._onInitialState, this);\n    } else {\n      this._onInitialState();\n    }\n  },\n\n  _onNormalizedChanged: function () {\n    var normalized = this.model.get('normalized');\n    this.histogramChartView.setNormalized(normalized);\n    this.miniHistogramChartView.setNormalized(normalized);\n  },\n\n  _onInitialState: function () {\n    this.add_related_model(this._dataviewModel);\n    this.render();\n\n    if (this.model.get('autoStyle') === true) {\n      this.model.autoStyle();\n    }\n\n    if (this._hasRange()) {\n      this._numberOfFilters = 1;\n    }\n\n    // in order to calculate the stats right, we simulate the full zommmed range\n    if (this._isZoomed()) {\n      this._numberOfFilters = 2;\n    }\n\n    if (this._numberOfFilters !== 0) {\n      this._setInitialRange();\n    } else {\n      this._completeInitialState();\n    }\n  },\n\n  _setupRange: function (data, min, max, updateCallback) {\n    var lo = 0;\n    var hi = data.length;\n    var startMin;\n    var startMax;\n\n    if (_.isNumber(min)) {\n      startMin = _.findWhere(data, {start: min});\n      lo = startMin ? startMin.bin : 0;\n    }\n\n    if (_.isNumber(max)) {\n      startMax = _.findWhere(data, {end: max});\n      hi = startMax ? startMax.bin + 1 : data.length;\n    }\n\n    if ((lo && lo !== 0) || (hi && hi !== data.length)) {\n      this.filter.setRange(\n        data[lo].start,\n        data[hi - 1].end\n      );\n      this._onChangeFilterEnabled();\n      this.histogramChartView.selectRange(lo, hi);\n    }\n\n    updateCallback && updateCallback(lo, hi);\n  },\n\n  _setInitialRange: function () {\n    var data = this._dataviewModel.getData();\n    var min = this.model.get('min');\n    var max = this.model.get('max');\n    var filterEnabled = (min !== undefined || max !== undefined);\n\n    this._setupRange(data, min, max, function (lo, hi) {\n      this.model.set({ filter_enabled: filterEnabled, lo_index: lo, hi_index: hi });\n      this._dataviewModel.bind('change:data', this._onHistogramDataChanged, this);\n      this._initStateApplied = true;\n\n      // If zoomed, we open the zoom level. Internally it does a fetch, so a change:data is triggered\n      // and the _onHistogramDataChanged callback will do the _updateStats call.\n      if (this._isZoomed()) {\n        this._onChangeZoomEnabled();\n        this._onZoomIn();\n      } else {\n        this._updateStats();\n      }\n    }.bind(this));\n  },\n\n  _completeInitialState: function () {\n    this._dataviewModel.bind('change:data', this._onHistogramDataChanged, this);\n    this._initStateApplied = true;\n    this._updateStats();\n  },\n\n  _isZoomed: function () {\n    return this.model.get('zoomed');\n  },\n\n  _hasRange: function () {\n    var min = this.model.get('min');\n    var max = this.model.get('max');\n\n    return (min != null || max != null);\n  },\n\n  _onHistogramDataChanged: function () {\n    // When the histogram is zoomed, we don't need to rely\n    // on the change url to update the histogram\n    // TODO the widget should not know about the URL could this state be got from the dataview model somehow?\n    if (this._dataviewModel.changed.url && this._isZoomed()) {\n      return;\n    }\n\n    // if the action was initiated by the user\n    // don't replace the stored data\n    if (this.lockedByUser) {\n      this.lockedByUser = false;\n    } else {\n      if (!this._isZoomed()) {\n        this.histogramChartView.showShadowBars();\n        this.miniHistogramChartView.replaceData(this._dataviewModel.getData());\n      } else {\n        this._filteredData = this._dataviewModel.getData();\n      }\n      this.histogramChartView.replaceData(this._dataviewModel.getData());\n    }\n\n    if (this.unsettingRange) {\n      this._unsetRange();\n    }\n\n    this._updateStats();\n  },\n\n  _unsetRange: function () {\n    this.unsettingRange = false;\n    this.histogramChartView.replaceData(this._dataviewModel.getData());\n    this.model.set({ lo_index: null, hi_index: null });\n\n    if (!this._isZoomed()) {\n      this.histogramChartView.showShadowBars();\n    }\n  },\n\n  _addPlaceholder: function () {\n    this.$('.js-content').append(placeholder());\n  },\n\n  _renderMainChart: function () {\n    this.histogramChartView = new HistogramChartView(({\n      type: 'histogram',\n      margin: { top: 4, right: 4, bottom: 4, left: 4 },\n      hasHandles: true,\n      hasAxisTip: true,\n      chartBarColor: this.model.getColor() || '#9DE0AD',\n      width: this.canvasWidth,\n      height: this.defaults.chartHeight,\n      data: this._dataviewModel.getData(),\n      dataviewModel: this._dataviewModel,\n      layerModel: this._layerModel,\n      originalData: this._originalData,\n      displayShadowBars: !this.model.get('normalized'),\n      normalized: this.model.get('normalized'),\n      widgetModel: this.model\n    }));\n\n    this.$('.js-chart').append(this.histogramChartView.el);\n    this.addView(this.histogramChartView);\n\n    this.histogramChartView.bind('on_brush_end', this._onBrushEnd, this);\n    this.histogramChartView.bind('hover', this._toggleTooltip, this);\n    this.histogramChartView.render().show();\n\n    this._updateStats();\n  },\n\n  _renderMiniChart: function () {\n    this.miniHistogramChartView = new HistogramChartView(({\n      type: 'histogram',\n      className: 'CDB-Chart--mini',\n      mini: true,\n      margin: { top: 0, right: 4, bottom: 4, left: 4 },\n      height: 40,\n      showOnWidthChange: false,\n      dataviewModel: this._dataviewModel,\n      layerModel: this._layerModel,\n      data: this._dataviewModel.getData(),\n      normalized: this.model.get('normalized'),\n      chartBarColor: this.model.getColor() || '#9DE0AD',\n      originalData: this._originalData,\n      widgetModel: this.model\n    }));\n\n    this.addView(this.miniHistogramChartView);\n    this.$('.js-mini-chart').append(this.miniHistogramChartView.el);\n    this.miniHistogramChartView.bind('on_brush_end', this._onMiniRangeUpdated, this);\n    this.miniHistogramChartView.render();\n  },\n\n  _setupBindings: function () {\n    this._dataviewModel.bind('change:bins', this._onChangeBins, this);\n    this.model.bind('change:zoomed', this._onChangeZoomed, this);\n    this.model.bind('change:zoom_enabled', this._onChangeZoomEnabled, this);\n    this.model.bind('change:filter_enabled', this._onChangeFilterEnabled, this);\n    this.model.bind('change:total', this._onChangeTotal, this);\n    this.model.bind('change:nulls', this._onChangeNulls, this);\n    this.model.bind('change:max', this._onChangeMax, this);\n    this.model.bind('change:min', this._onChangeMin, this);\n    this.model.bind('change:avg', this._onChangeAvg, this);\n  },\n\n  _unbinds: function () {\n    this._dataviewModel.off('change:bins', this._onChangeBins, this);\n    this.model.off('change:zoomed', this._onChangeZoomed, this);\n    this.model.off('change:zoom_enabled', this._onChangeZoomEnabled, this);\n    this.model.off('change:filter_enabled', this._onChangeFilterEnabled, this);\n    this.model.off('change:total', this._onChangeTotal, this);\n    this.model.off('change:nulls', this._onChangeNulls, this);\n    this.model.off('change:max', this._onChangeMax, this);\n    this.model.off('change:min', this._onChangeMin, this);\n    this.model.off('change:avg', this._onChangeAvg, this);\n  },\n\n  _onMiniRangeUpdated: function (loBarIndex, hiBarIndex) {\n    this.lockedByUser = false;\n\n    this._clearTooltip();\n    this.histogramChartView.removeSelection();\n\n    var data = this._originalData.getData();\n\n    this.model.set({lo_index: loBarIndex, hi_index: hiBarIndex, zlo_index: null, zhi_index: null});\n    this._applyBrushFilter(data, loBarIndex, hiBarIndex);\n  },\n\n  _onBrushEnd: function (loBarIndex, hiBarIndex) {\n    if (this._isZoomed()) {\n      this._onBrushEndFiltered(loBarIndex, hiBarIndex);\n    } else {\n      this._onBrushEndUnfiltered(loBarIndex, hiBarIndex);\n    }\n  },\n\n  _onBrushEndFiltered: function (loBarIndex, hiBarIndex) {\n    var data = this._filteredData;\n    if ((!data || !data.length) || (this.model.get('zlo_index') === loBarIndex && this.model.get('zhi_index') === hiBarIndex)) {\n      return;\n    }\n\n    this._numberOfFilters = 2;\n    this.lockedByUser = true;\n    this.model.set({filter_enabled: true, zlo_index: loBarIndex, zhi_index: hiBarIndex});\n    this._applyBrushFilter(data, loBarIndex, hiBarIndex);\n  },\n\n  _onBrushEndUnfiltered: function (loBarIndex, hiBarIndex) {\n    var data = this._dataviewModel.getData();\n    if ((!data || !data.length) || (this.model.get('lo_index') === loBarIndex && this.model.get('hi_index') === hiBarIndex)) {\n      return;\n    }\n    this._numberOfFilters = 1;\n    this.model.set({filter_enabled: true, zoom_enabled: true, lo_index: loBarIndex, hi_index: hiBarIndex});\n    this._applyBrushFilter(data, loBarIndex, hiBarIndex);\n  },\n\n  _applyBrushFilter: function (data, loBarIndex, hiBarIndex) {\n    if (loBarIndex !== hiBarIndex && loBarIndex >= 0 && loBarIndex < data.length && (hiBarIndex - 1) >= 0 && (hiBarIndex - 1) < data.length) {\n      this.filter.setRange(\n        data[loBarIndex].start,\n        data[hiBarIndex - 1].end\n      );\n      this._updateStats();\n    } else {\n      console.error('Error accessing array bounds', loBarIndex, hiBarIndex, data);\n    }\n  },\n\n  _onChangeFilterEnabled: function () {\n    this.$('.js-filter').toggleClass('is-hidden', !this.model.get('filter_enabled'));\n  },\n\n  _onChangeBins: function (mdl, bins) {\n    this._resetWidget();\n  },\n\n  _onChangeZoomEnabled: function () {\n    this.$('.js-zoom').toggleClass('is-hidden', !this.model.get('zoom_enabled'));\n  },\n\n  _renderAllValues: function () {\n    this._changeHeaderValue('.js-nulls', 'nulls', '');\n    this._changeHeaderValue('.js-val', 'total', 'SELECTED');\n    this._changeHeaderValue('.js-max', 'max', '');\n    this._changeHeaderValue('.js-min', 'min', '');\n    this._changeHeaderValue('.js-avg', 'avg', '');\n  },\n\n  _changeHeaderValue: function (className, what, suffix) {\n    if (this.model.get(what) == null) {\n      this.$(className).text('0 ' + suffix);\n      return;\n    }\n\n    this._addTitleForValue(className, what, suffix);\n\n    var animator = new AnimateValues({\n      el: this.$el\n    });\n\n    animator.animateValue(this.model, what, className, animationTemplate, {\n      formatter: formatter.formatNumber,\n      templateData: { suffix: ' ' + suffix }\n    });\n  },\n\n  _onChangeNulls: function () {\n    this._changeHeaderValue('.js-nulls', 'nulls', '');\n  },\n\n  _onChangeTotal: function () {\n    this._changeHeaderValue('.js-val', 'total', 'SELECTED');\n  },\n\n  _onChangeMax: function () {\n    this._changeHeaderValue('.js-max', 'max', '');\n  },\n\n  _onChangeMin: function () {\n    this._changeHeaderValue('.js-min', 'min', '');\n  },\n\n  _onChangeAvg: function () {\n    this._changeHeaderValue('.js-avg', 'avg', '');\n  },\n\n  _addTitleForValue: function (className, what, unit) {\n    this.$(className).attr('title', this._formatNumberWithCommas(this.model.get(what).toFixed(2)) + ' ' + unit);\n  },\n\n  _formatNumberWithCommas: function (x) {\n    return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n  },\n\n  _calculateBars: function (data) {\n    var min;\n    var max;\n    var loBarIndex;\n    var hiBarIndex;\n    var startMin;\n    var startMax;\n\n    if (this._isZoomed() && this._numberOfFilters === 2) {\n      min = this.model.get('zmin');\n      max = this.model.get('zmax');\n      loBarIndex = this.model.get('zlo_index');\n      hiBarIndex = this.model.get('zhi_index');\n    } else if (this._numberOfFilters === 1) {\n      min = this.model.get('min');\n      max = this.model.get('max');\n      loBarIndex = this.model.get('lo_index');\n      hiBarIndex = this.model.get('hi_index');\n    }\n\n    if (data.length > 0) {\n      if (!_.isNumber(min) && !_.isNumber(loBarIndex)) {\n        loBarIndex = 0;\n      } else if (_.isNumber(min) && !_.isNumber(loBarIndex)) {\n        startMin = _.findWhere(data, {start: min});\n        loBarIndex = (startMin && startMin.bin) || 0;\n      }\n\n      if (!_.isNumber(max) && !_.isNumber(hiBarIndex)) {\n        hiBarIndex = data.length;\n      } else if (_.isNumber(max) && !_.isNumber(hiBarIndex)) {\n        startMax = _.findWhere(data, {end: max});\n        hiBarIndex = (startMax && startMax.bin + 1) || data.length;\n      }\n    } else {\n      loBarIndex = 0;\n      hiBarIndex = data.length;\n    }\n\n    return {\n      loBarIndex: loBarIndex,\n      hiBarIndex: hiBarIndex\n    };\n  },\n\n  _updateStats: function () {\n    if (!this._initStateApplied) return;\n    var data;\n\n    if (!this._isZoomed() || (this._isZoomed() && this._numberOfFilters === 2)) {\n      data = this.histogramChartView.model.get('data');\n    } else {\n      data = this.miniHistogramChartView.model.get('data');\n    }\n\n    if (data == null) {\n      return;\n    }\n\n    var nulls = this._dataviewModel.get('nulls');\n    var bars = this._calculateBars(data);\n    var loBarIndex = bars.loBarIndex;\n    var hiBarIndex = bars.hiBarIndex;\n    var sum, avg, min, max;\n    var attrs;\n\n    if (data && data.length) {\n      sum = this._calcSum(data, loBarIndex, hiBarIndex);\n      avg = this._calcAvg(data, loBarIndex, hiBarIndex);\n\n      if (loBarIndex >= 0 && loBarIndex < data.length) {\n        min = data[loBarIndex].start;\n      }\n\n      if (hiBarIndex >= 0 && hiBarIndex - 1 < data.length) {\n        max = data[Math.max(0, hiBarIndex - 1)].end;\n      }\n\n      if (this._isZoomed() && this._numberOfFilters === 2) {\n        attrs = {zmin: min, zmax: max, zlo_index: loBarIndex, zhi_index: hiBarIndex};\n      } else if (!this._isZoomed() && this._numberOfFilters === 1) {\n        attrs = {min: min, max: max, lo_index: loBarIndex, hi_index: hiBarIndex};\n      }\n\n      attrs = _.extend(\n        { total: sum, nulls: nulls, avg: avg },\n        attrs);\n\n      this.model.set(attrs);\n    }\n  },\n\n  _calcAvg: function (data, start, end) {\n    var selectedData = data.slice(start, end);\n\n    var total = this._calcSum(data, start, end);\n\n    if (!total) {\n      return 0;\n    }\n\n    var area = _.reduce(selectedData, function (memo, d) {\n      return (d.avg && d.freq) ? (d.avg * d.freq) + memo : memo;\n    }, 0);\n\n    return area / total;\n  },\n\n  _calcSum: function (data, start, end) {\n    return _.reduce(data.slice(start, end), function (memo, d) {\n      return d.freq + memo;\n    }, 0);\n  },\n\n  _onChangeZoomed: function () {\n    if (this.model.get('zoomed')) {\n      this._onZoomIn();\n    } else {\n      this._resetWidget();\n      this._dataviewModel.fetch();\n    }\n  },\n\n  _showMiniRange: function () {\n    var loBarIndex = this.model.get('lo_index');\n    var hiBarIndex = this.model.get('hi_index');\n\n    this.miniHistogramChartView.selectRange(loBarIndex, hiBarIndex);\n    this.miniHistogramChartView.show();\n  },\n\n  _zoom: function () {\n    this.model.set({ zoomed: true, zoom_enabled: false });\n    this.histogramChartView.removeSelection();\n  },\n\n  _onZoomIn: function () {\n    this.lockedByUser = false;\n    this._showMiniRange();\n    this.histogramChartView.setBounds();\n    this._dataviewModel.enableFilter();\n    this._dataviewModel.fetch();\n  },\n\n  _resetWidget: function () {\n    this._numberOfFilters = 0;\n    this.model.set({\n      zoomed: false,\n      zoom_enabled: false,\n      filter_enabled: false,\n      lo_index: null,\n      hi_index: null,\n      min: null,\n      max: null,\n      zlo_index: null,\n      zhi_index: null,\n      zmin: null,\n      zmax: null\n    });\n    this.filter.unsetRange();\n    this._dataviewModel.disableFilter();\n    this.histogramChartView.unsetBounds();\n    this.miniHistogramChartView.hide();\n    this._clearTooltip();\n    this._updateStats();\n  },\n\n  clean: function () {\n    window.removeEventListener('resize', this._onWindowResized.bind(this));\n    CoreView.prototype.clean.apply(this);\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar TipsyTooltipView = require('../../../builder/components/tipsy-tooltip-view');\nvar template = require('./histogram-title-template.tpl');\n\n/**\n *  Show title + show if histogram sizes are applied or not\n *\n */\n\nmodule.exports = CoreView.extend({\n  className: 'CDB-Widget-title CDB-Widget-contentSpaced',\n\n  events: {\n    'click .js-autoStyle': '_autoStyle',\n    'click .js-cancelAutoStyle': '_cancelAutoStyle'\n  },\n\n  initialize: function (opts) {\n    if (!opts.widgetModel) throw new Error('widgetModel is required');\n    if (!opts.dataviewModel) throw new Error('dataviewModel is required');\n    if (!opts.layerModel) throw new Error('layerModel is required');\n\n    this.widgetModel = opts.widgetModel;\n    this.dataviewModel = opts.dataviewModel;\n    this._layerModel = opts.layerModel;\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(\n      template({\n        title: this.widgetModel.get('title'),\n        isAutoStyleEnabled: this._isAutoStyleButtonVisible(),\n        isAutoStyle: this.widgetModel.get('autoStyle'),\n        isCollapsed: this.widgetModel.get('collapsed')\n      })\n    );\n    this._initViews();\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.widgetModel.bind('change:title change:collapsed change:autoStyle change:style', this.render, this);\n    this.add_related_model(this.widgetModel);\n\n    this._layerModel.bind('change:visible change:cartocss', this.render, this);\n    this.add_related_model(this._layerModel);\n  },\n\n  _initViews: function () {\n    var sizesTooltip = new TipsyTooltipView({\n      el: this.$el.find('.js-sizes'),\n      gravity: 'auto'\n    });\n    this.addView(sizesTooltip);\n\n    var actionsTooltip = new TipsyTooltipView({\n      el: this.$el.find('.js-actions'),\n      gravity: 'auto'\n    });\n    this.addView(actionsTooltip);\n  },\n\n  _isAutoStyleButtonVisible: function () {\n    var layerModelMeta = this._layerModel.get('meta');\n    var cartocss = this._layerModel.get('cartocss') || (layerModelMeta && layerModelMeta.cartocss);\n    var hasColorsAutoStyle = cartocss && this.widgetModel.hasColorsAutoStyle();\n\n    return this.widgetModel.isAutoStyleEnabled() &&\n      this._layerModel.get('visible') &&\n      hasColorsAutoStyle;\n  },\n\n  _autoStyle: function () {\n    this.widgetModel.autoStyle();\n  },\n\n  _cancelAutoStyle: function () {\n    this.widgetModel.cancelAutoStyle();\n  }\n\n});\n","var _ = require('underscore');\nvar WidgetModel = require('../widget-model');\n\n/**\n * Model for a histogram widget\n */\nmodule.exports = WidgetModel.extend({\n  defaults: {\n    normalized: true\n  },\n\n  defaultState: _.extend(\n    {\n      autoStyle: false,\n      normalized: false\n    },\n    WidgetModel.prototype.defaultState\n  ),\n\n  initialize: function (attrs, opts) {\n    WidgetModel.prototype.initialize.apply(this, arguments);\n    this.on('change:collapsed', this._onCollapsedChange, this);\n    this.on('change:style', this._updateAutoStyle, this);\n    this.dataviewModel.once('change', function () {\n      if (this.get('autoStyle')) {\n        this.autoStyle();\n      }\n    }, this);\n  },\n\n  _onCollapsedChange: function (m, isCollapsed) {\n    this.dataviewModel.set('enabled', !isCollapsed);\n  },\n\n  getState: function () {\n    var state = WidgetModel.prototype.getState.call(this);\n    var start = this.dataviewModel.get('start');\n    var end = this.dataviewModel.get('end');\n    var min = this.get('min');\n    var max = this.get('max');\n\n    var checkRoughEqual = function (a, b) {\n      if (_.isNumber(a) && _.isNumber(b) && (a !== b) && Math.abs(a - b) > Math.abs(start - end) * 0.01) {\n        return true;\n      }\n      return false;\n    };\n\n    if (checkRoughEqual(start, min)) {\n      state.min = min;\n    } else {\n      delete state.min;\n    }\n\n    if (checkRoughEqual(end, max)) {\n      state.max = max;\n    } else {\n      delete state.max;\n    }\n\n    if (this.get('zoomed') === true) {\n      state.zoomed = true;\n    }\n\n    return state;\n  }\n\n});\n","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar placeholderTemplate = require('./placeholder.tpl');\nvar contentTemplate = require('./content.tpl');\nvar HistogramView = require('./histogram-view');\nvar TimeSeriesHeaderView = require('./time-series-header-view');\nvar DropdownView = require('../dropdown/widget-dropdown-view');\nvar layerColors = require('../../util/layer-colors');\nvar analyses = require('../../data/analyses');\nvar escapeHTML = require('../../util/escape-html');\n\n/**\n * Widget content view for a time-series\n */\nmodule.exports = CoreView.extend({\n  className: 'CDB-Widget-body CDB-Widget-body--timeSeries',\n\n  initialize: function () {\n    if (!this.model.dataviewModel) throw new Error('dataviewModel is required');\n    if (!this.model.layerModel) throw new Error('layerModel is required');\n\n    this._dataviewModel = this.model.dataviewModel;\n    this._layerModel = this.model.layerModel;\n    this._selectedAmount = 0;\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    var sourceId = this._dataviewModel.get('source').id;\n    var letter = layerColors.letter(sourceId);\n    var sourceColor = layerColors.getColorForLetter(letter);\n    var sourceType = this._dataviewModel.getSourceType() || '';\n    var isSourceType = this._dataviewModel.isSourceType();\n    var layerName = isSourceType\n      ? this.model.get('table_name')\n      : this._layerModel.get('layer_name');\n\n    if (this._isDataEmpty() || this._hasError()) {\n      this.$el.append(placeholderTemplate({\n        hasTorqueLayer: false\n      }));\n    } else {\n      this.$el.append(contentTemplate({\n        sourceId: sourceId,\n        sourceType: analyses.title(sourceType),\n        isSourceType: isSourceType,\n        showSource: this.model.get('show_source') && letter !== '',\n        sourceColor: sourceColor,\n        layerName: escapeHTML(layerName)\n      }));\n      this._createHistogramView();\n      this._createHeaderView();\n      this._createDropdownView();\n      this._updateRange();\n    }\n    return this;\n  },\n\n  _initBinds: function () {\n    this._dataviewModel.once('error', function () {\n      console.log('the tiler does not support non-torque layers just yet');\n    });\n\n    this.listenTo(this._dataviewModel, 'change:data', this.render);\n    this.listenToOnce(this.model, 'change:hasInitialState', this.render);\n\n    this.listenTo(this._layerModel, 'change:layer_name', this.render);\n    this.add_related_model(this._layerModel);\n  },\n\n  _createHistogramView: function () {\n    if (this._histogramView) {\n      this._histogramView.remove();\n    }\n\n    this._histogramView = new HistogramView({\n      timeSeriesModel: this.model,\n      dataviewModel: this._dataviewModel,\n      layerModel: this._layerModel,\n      rangeFilter: this._dataviewModel.filter,\n      displayShadowBars: !this.model.get('normalized'),\n      normalized: !!this.model.get('normalized')\n    });\n\n    this.addView(this._histogramView);\n    this.$('.js-content').append(this._histogramView.render().el);\n  },\n\n  _createHeaderView: function () {\n    if (this._headerView) {\n      this._headerView.remove();\n    }\n\n    this._headerView = new TimeSeriesHeaderView({\n      dataviewModel: this._dataviewModel,\n      layerModel: this._layerModel,\n      rangeFilter: this._dataviewModel.filter,\n      timeSeriesModel: this.model,\n      showClearButton: true,\n      selectedAmount: this._selectedAmount\n    });\n\n    if (!this._histogramView) {\n      throw new Error('Histogram view must be instantiated before the header view');\n    }\n    this._headerView.bind('resetFilter', this._histogramView.resetFilter, this._histogramView);\n    this.addView(this._headerView);\n    this.$('.js-title').append(this._headerView.render().el);\n  },\n\n  _createDropdownView: function () {\n    if (this._dropdownView) {\n      this._dropdownView.remove();\n    }\n\n    this._dropdownView = new DropdownView({\n      model: this.model,\n      target: '.js-actions',\n      container: this.$('.js-header'),\n      flags: {\n        localTimezone: this._dataviewModel.getColumnType() === 'date',\n        normalizeHistogram: true,\n        canCollapse: false\n      }\n    });\n\n    this.addView(this._dropdownView);\n  },\n\n  _updateRange: function () {\n    var bars = this._calculateBars();\n    var bins = this._dataviewModel.get('bins');\n    var lo = Math.max(bars.loBarIndex, 0);\n    var hi = Math.min(bars.hiBarIndex, bins);\n    if (lo > 0 || hi < bins) {\n      this._histogramView.selectRange(lo, hi);\n    }\n  },\n\n  _calculateBars: function () {\n    var data = this._dataviewModel.getData();\n    var min = this.model.get('min');\n    var max = this.model.get('max');\n    var loBarIndex = this.model.get('lo_index');\n    var hiBarIndex = this.model.get('hi_index');\n    var startMin;\n    var startMax;\n\n    if (data.length > 0) {\n      if (!_.isNumber(min) && !_.isNumber(loBarIndex)) {\n        loBarIndex = 0;\n      } else if (_.isNumber(min) && !_.isNumber(loBarIndex)) {\n        startMin = _.findWhere(data, {start: min});\n        loBarIndex = (startMin && startMin.bin) || 0;\n      }\n\n      if (!_.isNumber(max) && !_.isNumber(hiBarIndex)) {\n        hiBarIndex = data.length;\n      } else if (_.isNumber(max) && !_.isNumber(hiBarIndex)) {\n        startMax = _.findWhere(data, {end: max});\n        hiBarIndex = (startMax && startMax.bin + 1) || data.length;\n      }\n    } else {\n      loBarIndex = 0;\n      hiBarIndex = data.length;\n    }\n\n    return {\n      loBarIndex: loBarIndex,\n      hiBarIndex: hiBarIndex\n    };\n  },\n\n  _appendView: function (view) {\n    this.addView(view);\n    this.$el.append(view.render().el);\n  },\n\n  _isDataEmpty: function () {\n    var data = this._dataviewModel.getUnfilteredData();\n    return _.isEmpty(data) || _.size(data) === 0;\n  },\n\n  _hasError: function () {\n    return this._dataviewModel.has('error');\n  }\n});\n","var $ = require('jquery');\nvar CoreView = require('backbone/core-view');\nvar HistogramChartView = require('../histogram/chart');\nvar viewportUtils = require('../../viewport-utils');\nvar TipsyTooltipView = require('../../../builder/components/tipsy-tooltip-view');\n\n/**\n * Time-series histogram view.\n */\n\nvar INLINE_BARS_HEIGHT_PX = 48;\nvar BOTTOM_MARGIN_PX = 4;\nvar LABELS_PX = 16;\nvar MARGINS_PX = 4;\nvar INLINE_BARS_HEIGHT_WITHOUT_BOTTOM_PX = 16;\n\nmodule.exports = CoreView.extend({\n  className: 'CDB-Chart--histogram',\n\n  options: {\n    tooltipDataAttribute: 'data-tooltip'\n  },\n\n  defaults: {\n    histogramChartHeight: INLINE_BARS_HEIGHT_PX +\n      BOTTOM_MARGIN_PX +\n      LABELS_PX +\n      MARGINS_PX,\n    histogramChartMobileHeight: INLINE_BARS_HEIGHT_WITHOUT_BOTTOM_PX\n  },\n\n  initialize: function () {\n    if (!this.options.dataviewModel) throw new Error('dataviewModel is required');\n    if (!this.options.layerModel) throw new Error('layerModel is required');\n\n    this._timeSeriesModel = this.options.timeSeriesModel;\n    this._dataviewModel = this.options.dataviewModel;\n    this._layerModel = this.options.layerModel;\n    this._rangeFilter = this.options.rangeFilter;\n    this._originalData = this._dataviewModel.getUnfilteredDataModel();\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this._createHistogramView();\n    return this;\n  },\n\n  selectRange: function (loBarIndex, hiBarIndex) {\n    this._chartView.selectRange(loBarIndex, hiBarIndex);\n  },\n\n  resetFilter: function () {\n    this._rangeFilter.unsetRange();\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._dataviewModel, 'change:data', this._onChangeData, this);\n    this.listenTo(this._dataviewModel, 'change:column', this.resetFilter, this);\n    this.listenTo(this._timeSeriesModel, 'change:normalized', this._onNormalizedChanged);\n    this.listenTo(this._timeSeriesModel, 'change:local_timezone', this._onChangeLocalTimezone);\n    this.listenTo(this._timeSeriesModel, 'forceResize', this._onForceResize);\n    this.listenTo(this._rangeFilter, 'change', this._onFilterChanged);\n  },\n\n  _toggleTooltip: function (event) {\n    if (!event || !event.target) {\n      return this._clearTooltip();\n    }\n\n    this._showTooltip(event);\n  },\n\n  _showTooltip: function (event) {\n    if (this.tooltip && event && this.tooltip.getElement() === event.target) {\n      return;\n    }\n\n    this._clearTooltip();\n\n    this.tooltip = new TipsyTooltipView({\n      el: event.target,\n      title: function () {\n        return this._getTooltipTitle(event);\n      }.bind(this),\n      trigger: 'manual'\n    });\n\n    this.tooltip.showTipsy();\n    this.addView(this.tooltip);\n  },\n\n  _getTooltipTitle: function (event) {\n    return $(event.target).attr(this.options.tooltipDataAttribute);\n  },\n\n  _clearTooltip: function () {\n    if (!this.tooltip) return;\n\n    this.tooltip.hideTipsy();\n    this.removeView(this.tooltip);\n    this.tooltip = undefined;\n  },\n\n  _createHistogramView: function () {\n    this._chartView = this._instantiateChartView();\n    this.addView(this._chartView);\n    this.$el.append(this._chartView.render().el);\n    this._chartView.show();\n\n    this.listenTo(this._chartView, 'on_brush_end', this._onBrushEnd, this);\n    this.listenTo(this._chartView, 'on_reset_filter', this.resetFilter, this);\n    this.listenTo(this._chartView, 'hover', this._toggleTooltip, this);\n    this.listenTo(this._chartView.model, 'change:width', this._onChangeChartWidth, this);\n  },\n\n  _instantiateChartView: function () {\n    return new HistogramChartView({\n      type: this._getChartType(),\n      chartBarColor: this._timeSeriesModel.getWidgetColor() || '#F2CC8F',\n      animationSpeed: 100,\n      margin: {\n        top: this._getMarginTop(),\n        right: 4,\n        bottom: 4,\n        left: this._getMarginLeft()\n      },\n      hasHandles: true,\n      handleWidth: 8,\n      hasAxisTip: true,\n      animationBarDelay: function (d, i) {\n        return (i * 3);\n      },\n      height: this.defaults.histogramChartHeight,\n      dataviewModel: this._dataviewModel,\n      layerModel: this._layerModel,\n      data: this._dataviewModel.getData(),\n      originalData: this._originalData,\n      displayShadowBars: !this._timeSeriesModel.get('normalized'),\n      normalized: !!this._timeSeriesModel.get('normalized'),\n      widgetModel: this._timeSeriesModel,\n      local_timezone: !!this._timeSeriesModel.get('local_timezone')\n    });\n  },\n\n  _getChartType: function () {\n    return 'time-' + this._dataviewModel.getColumnType();\n  },\n\n  _onChangeData: function () {\n    if (this._chartView) {\n      this._chartView.replaceData(this._dataviewModel.getData());\n      this._chartView.updateXScale();\n      this._chartView.updateYScale();\n    }\n  },\n\n  _onBrushEnd: function (loBarIndex, hiBarIndex) {\n    var data = this._dataviewModel.getData();\n    this._rangeFilter.setRange(\n      data[loBarIndex].start,\n      data[hiBarIndex - 1].end\n    );\n    this._timeSeriesModel.set({lo_index: loBarIndex, hi_index: hiBarIndex});\n  },\n\n  _onChangeChartWidth: function () {\n    var isTablet = viewportUtils.isTabletViewport();\n    this._chartView.toggleLabels(!isTablet);\n\n    var height = isTablet\n      ? this.defaults.histogramChartMobileHeight : this.defaults.histogramChartHeight;\n\n    this._chartView.model.set('height', height);\n  },\n\n  _onNormalizedChanged: function () {\n    if (this._chartView) {\n      this._chartView.setNormalized(this._timeSeriesModel.get('normalized'));\n    }\n  },\n\n  _onChangeLocalTimezone: function () {\n    this._dataviewModel.set('localTimezone', this._timeSeriesModel.get('local_timezone'));\n  },\n\n  _onForceResize: function () {\n    this._chartView.forceResize();\n  },\n\n  _resetFilterInDI: function () {\n    this._timeSeriesModel.set({\n      min: undefined,\n      max: undefined,\n      lo_index: undefined,\n      hi_index: undefined\n    });\n    this._chartView.removeSelection();\n  },\n\n  _onFilterChanged: function () {\n    if (!this._rangeFilter.has('min') && !this._rangeFilter.has('max')) {\n      this._resetFilterInDI();\n    }\n  },\n\n  _getMarginLeft: function () {\n    return 4;\n  },\n\n  _getMarginTop: function () {\n    return viewportUtils.isTabletViewport() ? 0 : 4;\n  }\n});\n","var cdb = require('internal-carto.js');\nvar CoreView = require('backbone/core-view');\nvar d3 = require('d3');\nvar template = require('./time-series-header.tpl');\nvar formatter = require('../../formatter');\nvar AnimateValues = require('../animate-values.js');\nvar animationTemplate = require('./animation-template.tpl');\nvar TipsyTooltipView = require('../../../builder/components/tipsy-tooltip-view');\n\n/**\n * View to reset render range.\n */\nmodule.exports = CoreView.extend({\n  className: 'CDB-Widget-contentSpaced CDB-Widget-contentFull',\n\n  events: {\n    'click .js-clear': '_onClick'\n  },\n\n  options: {\n    showClearButton: true\n  },\n\n  initialize: function (opts) {\n    if (!opts.dataviewModel) throw new Error('dataviewModel is required');\n    if (!opts.layerModel) throw new Error('layerModel is required');\n    if (!opts.rangeFilter) throw new Error('rangeFilter is required');\n    if (!opts.timeSeriesModel) throw new Error('timeSeriesModel is required');\n    if (opts.selectedAmount === void 0) throw new Error('selectedAmount is required');\n\n    this._timeSeriesModel = opts.timeSeriesModel;\n    this._dataviewModel = opts.dataviewModel;\n    this._rangeFilter = opts.rangeFilter;\n    this._selectedAmount = opts.selectedAmount;\n    this._layerModel = opts.layerModel;\n\n    this.model = new cdb.core.Model();\n\n    this._createFormatter();\n    this._initBinds();\n  },\n\n  render: function () {\n    var title = this._timeSeriesModel.get('title');\n    var showSelection = !this._rangeFilter.isEmpty();\n\n    this.$el.html(\n      template({\n        start: this.model.get('left_axis_tip') || this.formatter(this._rangeFilter.get('min')),\n        end: this.model.get('right_axis_tip') || this.formatter(this._rangeFilter.get('max')),\n        title: title,\n        showClearButton: this.options.showClearButton && showSelection,\n        showSelection: showSelection\n      })\n    );\n\n    this._animateValue();\n    this._initViews();\n\n    return this;\n  },\n\n  _initViews: function () {\n    var actionsTooltip = new TipsyTooltipView({\n      el: this.$el.find('.js-actions'),\n      gravity: 'auto'\n    });\n    this.addView(actionsTooltip);\n  },\n\n  _createFormatter: function () {\n    this.formatter = formatter.formatNumber;\n\n    if (this._dataviewModel.getColumnType() === 'date') {\n      this.formatter = formatter.timestampFactory(this._dataviewModel.get('aggregation'), this._dataviewModel.getCurrentOffset());\n    }\n  },\n\n  _onLocalTimezoneChanged: function () {\n    this._createFormatter();\n    this.render();\n  },\n\n  _animateValue: function () {\n    var animator = new AnimateValues({\n      el: this.$el\n    });\n    var property = this._rangeFilter.isEmpty() ? 'totalAmount' : 'filteredAmount';\n    var to = this._dataviewModel.get(property);\n\n    animator.animateFromValues.call(this, this._selectedAmount, to, '.js-val', animationTemplate, {\n      formatter: formatter.formatNumber,\n      templateData: { suffix: ' Selected' }\n    });\n\n    this._selectedAmount = to;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.model, 'change:left_axis_tip change:right_axis_tip', this.render);\n    this.listenTo(this._timeSeriesModel, 'change:title', this.render);\n    this.listenTo(this._timeSeriesModel, 'change:local_timezone', this._onLocalTimezoneChanged);\n    this.listenTo(this._dataviewModel, 'change:totalAmount', this._animateValue);\n    this.listenTo(this._dataviewModel, 'on_update_axis_tip', this._onUpdateAxisTip);\n    this.listenTo(this._rangeFilter, 'change', this.render);\n  },\n\n  _onUpdateAxisTip: function (axisTip) {\n    this.model.set(axisTip.attr, axisTip.text);\n  },\n\n  _setupScales: function () {\n    var data = this._dataviewModel.get('data');\n    var columnType = this._dataviewModel.getColumnType();\n\n    if (columnType === 'date') {\n      this._scale = d3.time.scale()\n        .domain([data[0].start * 1000, data[data.length - 1].end * 1000])\n        .range([this._dataviewModel.get('start'), this._dataviewModel.get('end')]);\n    } else {\n      this._scale = d3.scale.linear()\n        .domain([data[0].start, data[data.length - 1].end])\n        .range([this._dataviewModel.get('start'), this._dataviewModel.get('end')]);\n    }\n  },\n\n  _onClick: function () {\n    this.trigger('resetFilter', this);\n  }\n});\n","var WidgetModel = require('../widget-model');\nvar _ = require('underscore');\n\n/**\n * Model for a time-series widget\n */\nmodule.exports = WidgetModel.extend({\n  defaults: {\n    normalized: true,\n    animated: false\n  },\n\n  defaultState: _.extend(\n    {\n      normalized: false\n    },\n    WidgetModel.prototype.defaultState\n  ),\n\n  getState: function () {\n    var state = WidgetModel.prototype.getState.call(this);\n    var start = this.dataviewModel.get('start');\n    var end = this.dataviewModel.get('end');\n    var data = this.dataviewModel.get('data');\n    var lo = this.get('lo_index');\n    var hi = this.get('hi_index');\n    var l;\n    var m;\n\n    var checkRoughEqual = function (a, b) {\n      if (_.isNumber(a) && _.isNumber(b) && (a !== b) && Math.abs(a - b) > Math.abs(start - end) * 0.01) {\n        return true;\n      }\n      return false;\n    };\n\n    if (_.isNumber(lo) && _.isNumber(hi) && lo < data.length && (hi - 1) < data.length) {\n      l = data[lo].start;\n      m = data[hi - 1].end;\n    } else {\n      l = start;\n      m = end;\n    }\n\n    if (checkRoughEqual(start, l)) {\n      state.min = l;\n    }\n    if (checkRoughEqual(end, m)) {\n      state.max = m;\n    }\n\n    return state;\n  }\n});\n","var _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar torqueTemplate = require('./torque-template.tpl');\nvar placeholderTemplate = require('./placeholder.tpl');\nvar TorqueHistogramView = require('./torque-histogram-view');\nvar TorqueHeaderView = require('./torque-header-view');\nvar DropdownView = require('../dropdown/widget-dropdown-view');\nvar layerColors = require('../../util/layer-colors');\nvar analyses = require('../../data/analyses');\nvar escapeHTML = require('../../util/escape-html');\n\n/**\n * Widget content view for a Torque time-series\n */\nmodule.exports = CoreView.extend({\n  className: 'CDB-Widget-body CDB-Widget-body--timeSeries',\n\n  initialize: function () {\n    if (!this.model.dataviewModel) throw new Error('dataviewModel is required');\n    if (!this.model.layerModel) throw new Error('layerModel is required');\n\n    this._dataviewModel = this.model.dataviewModel;\n    this._layerModel = this.model.layerModel;\n    this._originalData = this._dataviewModel.getUnfilteredDataModel();\n    this._selectedAmount = 0;\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    var sourceId = this._dataviewModel.get('source').id;\n    var letter = layerColors.letter(sourceId);\n    var sourceColor = layerColors.getColorForLetter(letter);\n    var sourceType = this._dataviewModel.getSourceType() || '';\n    var isSourceType = this._dataviewModel.isSourceType();\n    var layerName = isSourceType\n      ? this.model.get('table_name')\n      : this._layerModel.get('layer_name');\n\n    if (this._isDataEmpty()) {\n      this.$el.html(placeholderTemplate({\n        hasTorqueLayer: true\n      }));\n    } else {\n      this.$el.html(torqueTemplate({\n        sourceId: sourceId,\n        sourceType: analyses.title(sourceType),\n        isSourceType: isSourceType,\n        showSource: this.model.get('show_source') && letter !== '',\n        sourceColor: sourceColor,\n        layerName: escapeHTML(layerName)\n      }));\n      this._createHeaderView();\n      this._createTorqueHistogramView();\n      this._createDropdownView();\n    }\n\n    return this;\n  },\n\n  _createHeaderView: function () {\n    if (this._headerView) {\n      this._headerView.remove();\n    }\n\n    this._headerView = new TorqueHeaderView({\n      el: this.$('.js-torque-header'),\n      dataviewModel: this._dataviewModel,\n      torqueLayerModel: this._layerModel,\n      timeSeriesModel: this.model,\n      selectedAmount: this._selectedAmount\n    });\n\n    this.addView(this._headerView);\n    this._headerView.render();\n  },\n\n  _createTorqueHistogramView: function () {\n    if (this._histogramView) {\n      this._histogramView.remove();\n    }\n\n    this._histogramView = new TorqueHistogramView({\n      timeSeriesModel: this.model,\n      dataviewModel: this._dataviewModel,\n      rangeFilter: this._dataviewModel.filter,\n      torqueLayerModel: this._layerModel,\n      layerModel: this._layerModel,\n      displayShadowBars: !this.model.get('normalized'),\n      normalized: !!this.model.get('normalized')\n    });\n    this.addView(this._histogramView);\n    this.$el.append(this._histogramView.render().el);\n  },\n\n  _createDropdownView: function () {\n    if (this._dropdownView) {\n      this._dropdownView.remove();\n    }\n\n    this._dropdownView = new DropdownView({\n      model: this.model,\n      target: '.js-actions',\n      container: this.$('.js-header'),\n      flags: {\n        localTimezone: this._dataviewModel.getColumnType() === 'date',\n        normalizeHistogram: !!this.model.get('normalized'),\n        canCollapse: false\n      }\n    });\n    this.addView(this._dropdownView);\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._originalData, 'change:data', this._onOriginalDataChange);\n\n    this.listenTo(this._dataviewModel, 'change:data', this.render);\n    this.listenTo(this._dataviewModel, 'change:bins', this._onChangeBins);\n\n    this.listenTo(this._layerModel, 'change:layer_name', this.render);\n    this.add_related_model(this._layerModel);\n  },\n\n  _isDataEmpty: function () {\n    var data = this._dataviewModel.getData();\n    return _.isEmpty(data) || _.size(data) === 0;\n  },\n\n  _onOriginalDataChange: function () {\n    // do an explicit fetch in order to get actual data\n    // with the filters applied (e.g. bbox)\n    this._dataviewModel.fetch();\n  },\n\n  _onChangeBins: function (mdl, bins) {\n    this._originalData.setBins(bins);\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar template = require('./torque-controls.tpl');\n\n/**\n * Torque animation controls, to manage run state\n */\nmodule.exports = CoreView.extend({\n  events: {\n    'click .CDB-Widget-controlButton': '_onClick'\n  },\n\n  initialize: function () {\n    this._torqueLayerModel = this.options.torqueLayerModel;\n    this._rangeFilter = this.options.rangeFilter;\n    this.listenTo(this._torqueLayerModel, 'change:isRunning', this.render);\n    this.listenTo(this._torqueLayerModel, 'change:start change.end', this.render);\n  },\n\n  render: function () {\n    this.$el.html(\n      template({\n        running: this._torqueLayerModel.get('isRunning'),\n        disabled: !this._rangeFilter.isEmpty()\n      })\n    );\n\n    return this;\n  },\n\n  _onClick: function () {\n    if (this._torqueLayerModel.get('isRunning')) {\n      this._torqueLayerModel.pause();\n    } else {\n      this._torqueLayerModel.play();\n    }\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar TorqueTimeInfoView = require('./torque-time-info-view');\nvar TimeSeriesHeaderView = require('./time-series-header-view');\nvar template = require('./torque-header-view.tpl');\n\n/**\n * View for the header in the torque time-series view\n */\nmodule.exports = CoreView.extend({\n  className: 'CDB-Widget-contentSpaced',\n\n  initialize: function () {\n    this._dataviewModel = this.options.dataviewModel;\n    this._torqueLayerModel = this.options.torqueLayerModel;\n    this._rangeFilter = this._dataviewModel.filter;\n    this._selectedAmount = this.options.selectedAmount;\n    this._timeSeriesModel = this.options.timeSeriesModel;\n\n    this.listenTo(this._rangeFilter, 'change', this.render);\n  },\n\n  render: function () {\n    var showClearButton = true;\n    this.clearSubViews();\n    this.$el.addClass(this.className);\n    this.$el.html(template());\n\n    if (this._rangeFilter.isEmpty()) {\n      this._appendView('.js-torque-controls',\n        new TorqueTimeInfoView({\n          dataviewModel: this._dataviewModel,\n          torqueLayerModel: this._torqueLayerModel,\n          timeSeriesModel: this._timeSeriesModel\n        })\n      );\n      showClearButton = false;\n    }\n    this._createTimeSeriesHeaderView(showClearButton);\n\n    return this;\n  },\n\n  _createTimeSeriesHeaderView: function (showClearButton) {\n    var headerView = new TimeSeriesHeaderView({\n      dataviewModel: this._dataviewModel,\n      layerModel: this._torqueLayerModel,\n      rangeFilter: this._dataviewModel.filter,\n      showClearButton: showClearButton,\n      timeSeriesModel: this._timeSeriesModel,\n      selectedAmount: this._selectedAmount\n    });\n    this._appendView('.js-time-series-header', headerView);\n    headerView.on('resetFilter', this._resetFilter, this);\n  },\n\n  _resetFilter: function () {\n    // Move it to 0 so it doesn't stutter as much\n    this._torqueLayerModel.set({ step: 0 });\n    this._torqueLayerModel.resetRenderRange();\n  },\n\n  _appendView: function (selector, view) {\n    this.addView(view);\n    this.$(selector).append(view.render().el);\n  }\n});\n","var _ = require('underscore');\nvar HistogramView = require('./histogram-view');\nvar TorqueTimeSliderView = require('./torque-time-slider-view');\nvar TorqueControlsView = require('./torque-controls-view');\n\n/**\n * Torque time-series histogram view.\n * Extends the common histogram chart view with time-control\n * this.dataviewModel is a histogram model\n */\nmodule.exports = HistogramView.extend({\n  defaults: _.extend({}, HistogramView.prototype.defaults, {offsetLeft: 34}),\n\n  className: function () {\n    return HistogramView.prototype.className + ' CDB-Widget-content CDB-Widget-content--torqueTimeSeries u-flex';\n  },\n\n  initialize: function () {\n    if (!this.options.torqueLayerModel) throw new Error('torqeLayerModel is required');\n    if (!this.options.rangeFilter) throw new Error('rangeFilter is required');\n    if (!this.options.dataviewModel) throw new Error('dataviewModel is required');\n    if (!this.options.timeSeriesModel) throw new Error('timeSeriesModel is required');\n\n    this._torqueLayerModel = this.options.torqueLayerModel;\n    this._dataviewModel = this.options.dataviewModel;\n    this._timeSeriesModel = this.options.timeSeriesModel;\n    HistogramView.prototype.initialize.call(this);\n  },\n\n  _initBinds: function () {\n    HistogramView.prototype._initBinds.call(this);\n\n    this.listenTo(this._torqueLayerModel, 'change:renderRange', this._onRenderRangeChanged);\n    this.listenTo(this._torqueLayerModel, 'change:steps change:start change:end', this._reSelectRange);\n    this.listenTo(this._torqueLayerModel, 'change:cartocss', this._onUpdateCartocss);\n  },\n\n  _createHistogramView: function () {\n    this._chartType = this._torqueLayerModel.get('column_type') === 'date' ? 'time' : 'number';\n    HistogramView.prototype._createHistogramView.call(this);\n\n    this._torqueControls = new TorqueControlsView({\n      torqueLayerModel: this._torqueLayerModel,\n      rangeFilter: this._rangeFilter\n    });\n    this.addView(this._torqueControls);\n\n    this.$el.prepend(this._torqueControls.render().el);\n\n    this._chartView.setAnimated();\n    this._chartView.bind('on_brush_click', this._onBrushClick, this);\n\n    this._timeSliderView = new TorqueTimeSliderView({\n      dataviewModel: this._dataviewModel, // a histogram model\n      chartView: this._chartView,\n      torqueLayerModel: this._torqueLayerModel,\n      timeSeriesModel: this._timeSeriesModel,\n      rangeFilter: this._rangeFilter\n    });\n    this.addView(this._timeSliderView);\n    this._timeSliderView.render();\n  },\n\n  _onChangeData: function () {\n    HistogramView.prototype._onChangeData.call(this);\n\n    if (this._chartView) {\n      this._reSelectRange();\n    }\n  },\n\n  _onRenderRangeChanged: function (_model, range) {\n    if (range.start === undefined && range.end === undefined) {\n      this._chartView.removeSelection();\n      this._rangeFilter.unsetRange();\n    }\n  },\n\n  _onBrushClick: function (indexPct) {\n    var steps = this._torqueLayerModel.get('steps');\n    var step = Math.round(steps * indexPct);\n\n    // Going to the last step causes a jump to the beginning immediately\n    if (step === steps) step -= 1;\n\n    HistogramView.prototype.resetFilter.apply(this);\n\n    this._torqueLayerModel.set({ step: step });\n  },\n\n  _onBrushEnd: function () {\n    HistogramView.prototype._onBrushEnd.apply(this, arguments);\n    this._reSelectRange();\n  },\n\n  _timeToStep: function (timestamp, place) {\n    var steps = this._torqueLayerModel.get('steps');\n    var start = this._torqueLayerModel.get('start');\n    var end = this._torqueLayerModel.get('end');\n    var step = (end - start) === 0\n      ? place === 'max'\n        ? steps\n        : 0\n      : (steps * (1000 * timestamp - start)) / (end - start);\n    step = Number(step.toFixed(2));\n\n    return step;\n  },\n\n  _reSelectRange: function (model) {\n    if (!this._rangeFilter.isEmpty()) {\n      this._torqueLayerModel.pause();\n\n      var min = this._rangeFilter.get('min');\n      var max = this._rangeFilter.get('max');\n      var loStep = this._timeToStep(min, 'min');\n      var hiStep = this._timeToStep(max, 'max');\n\n      // -- HACK: Reset filter if the min/max values are out of the scope\n      var data = this._dataviewModel.get('data');\n      var loBar = _.findWhere(data, { start: min });\n      var hiBar = _.findWhere(data, { end: max });\n      if (!loBar || !hiBar) {\n        return this._torqueLayerModel.resetRenderRange();\n      }\n\n      // clamp values since the range can be outside of the current torque thing\n      var steps = this._torqueLayerModel.get('steps');\n      var ratio = this._chartView.getSelectionExtent() / 100;\n      this._updateDuration(ratio);\n      this._torqueLayerModel.renderRange(\n        this._clampRangeVal(0, steps, loStep), // start\n        this._clampRangeVal(0, steps, hiStep) // end\n      );\n    } else {\n      this._torqueLayerModel.play();\n      this._updateDuration(1);\n    }\n  },\n\n  _updateDuration: function (ratio, cartocss) {\n    if (!this._torqueLayerModel.getAnimationDuration) return;\n    var duration = this._torqueLayerModel.getAnimationDuration(cartocss || this._torqueLayerModel.get('cartocss'));\n\n    this._torqueLayerModel.set('customDuration', Math.round(duration * ratio));\n  },\n\n  _onUpdateCartocss: function (m, cartocss) {\n    var ratio;\n    if (!this._rangeFilter.isEmpty()) {\n      var loStep = this._timeToStep(this._rangeFilter.get('min'));\n      var hiStep = this._timeToStep(this._rangeFilter.get('max'));\n      var steps = this._torqueLayerModel.get('steps');\n      ratio = (hiStep - loStep) / steps;\n    } else {\n      ratio = 1;\n    }\n\n    // Update silently, when carto.js updates the cartoCSS for torque, it will apply the new duration.\n    this._updateDuration(ratio, cartocss, { silent: true });\n  },\n\n  _clampRangeVal: function (a, b, t) {\n    return Math.max(a, Math.min(b, t));\n  },\n\n  _getMarginLeft: function () {\n    return 16;\n  }\n});\n","var d3 = require('d3');\nvar CoreView = require('backbone/core-view');\nvar moment = require('moment');\nvar formatter = require('../../formatter');\nvar template = require('./torque-time-info.tpl');\n\n/**\n * View rendering the current step time\n */\nmodule.exports = CoreView.extend({\n  className: 'CDB-Widget-timeSeriesTimeInfo',\n\n  initialize: function (opts) {\n    if (!opts.torqueLayerModel) throw new Error('torqueLayerModel is required');\n    if (!opts.dataviewModel) throw new Error('dataviewModel is required');\n    if (!opts.timeSeriesModel) throw new Error('timeSeriesModel is required');\n\n    this._torqueLayerModel = this.options.torqueLayerModel;\n    this._dataviewModel = this.options.dataviewModel;\n    this._timeSeriesModel = this.options.timeSeriesModel;\n\n    this._initBinds();\n  },\n\n  render: function () {\n    var time = this._torqueLayerModel.get('time');\n    var columnType = this._torqueLayerModel.get('column_type');\n    var scale = d3.scale.linear()\n      .domain([0, this._dataviewModel.get('data').length])\n      .range([this._dataviewModel.get('start'), this._dataviewModel.get('end')]);\n    var html = '';\n    var timeFormatter = formatter.formatNumber;\n\n    if (columnType === 'number') {\n      html = template({\n        time: timeFormatter(scale(this._torqueLayerModel.get('step')))\n      });\n    } else if (columnType === 'date' && !isNaN(time && time.getTime())) {\n      timeFormatter = formatter.timestampFactory(this._dataviewModel.get('aggregation'), this._dataviewModel.getCurrentOffset());\n\n      html = template({\n        time: timeFormatter(moment(time).unix())\n      });\n    }\n\n    this.$el.html(html);\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._torqueLayerModel, 'change:step', this.render);\n  }\n});\n","var d3 = require('d3');\nvar cdb = require('internal-carto.js');\nvar CoreView = require('backbone/core-view');\nvar moment = require('moment');\nvar formatter = require('../../formatter');\nvar viewportUtils = require('../../viewport-utils');\n\nvar TIP_RECT_HEIGHT = 17;\nvar TIP_H_PADDING = 6;\nvar CHART_MARGIN = 16;\nvar MOBILE_BAR_HEIGHT = 3;\nvar TOOLTIP_MARGIN = 2;\n\n/**\n * Time-slider, expected to be used in a histogram view\n */\nmodule.exports = CoreView.extend({\n  defaults: {\n    width: 6,\n    height: 8\n  },\n\n  initialize: function () {\n    if (!this.options.chartView) throw new Error('chartView is required');\n    if (!this.options.torqueLayerModel) throw new Error('torqeLayerModel is required');\n    if (!this.options.timeSeriesModel) throw new Error('timeSeriesModel is required');\n\n    this.model = new cdb.core.Model();\n\n    this._dataviewModel = this.options.dataviewModel;\n    this._chartView = this.options.chartView;\n    this._torqueLayerModel = this.options.torqueLayerModel;\n    this._timeSeriesModel = this.options.timeSeriesModel;\n\n    this._chartMargins = this._chartView.model.get('margin');\n\n    this._initBinds();\n    this._updateXScale();\n    this._createFormatter();\n  },\n\n  render: function () {\n    // Make the render call idempotent; only create time slider once\n    if (!this.timeSlider) {\n      var dragBehavior = d3.behavior.drag()\n        .on('dragstart', this._onDragStart.bind(this))\n        .on('drag', this._onDrag.bind(this))\n        .on('dragend', this._onDragEnd.bind(this));\n\n      var d3el = this._chartView.canvas.append('rect');\n      this.timeSlider = d3el\n        .attr('class', 'CDB-TimeSlider')\n        .attr('width', this.defaults.width)\n        .attr('height', this._calcHeight())\n        .attr('rx', 3)\n        .attr('ry', 3)\n        .data([{ x: 0, y: 0 }])\n        .attr('transform', this._translateXY)\n        .call(dragBehavior);\n\n      this.setElement(d3el.node());\n    }\n\n    if (this._isTabletViewport()) {\n      this._generateTimeSliderTip();\n    }\n\n    return this;\n  },\n\n  _isTabletViewport: function () {\n    return viewportUtils.isTabletViewport();\n  },\n\n  _generateTimeSliderTip: function () {\n    var yPos = this._calcHeight() / 2 + MOBILE_BAR_HEIGHT + TOOLTIP_MARGIN;\n    yPos = Math.floor(yPos);\n\n    this.timeSliderTip = this._chartView.canvas.select('.CDB-WidgetCanvas').append('g')\n      .attr('class', 'CDB-Chart-timeSliderTip')\n      .data([{ x: CHART_MARGIN, y: yPos }])\n      .attr('transform', this._translateXY);\n\n    this.timeSliderTip.append('rect')\n      .attr('class', 'CDB-Chart-timeSliderTipRect')\n      .attr('rx', '2')\n      .attr('ry', '2')\n      .attr('height', TIP_RECT_HEIGHT);\n\n    this.timeSliderTip.append('text')\n      .attr('class', 'CDB-Text CDB-Size-small CDB-Chart-timeSliderTipText')\n      .attr('dy', '11')\n      .attr('dx', '0');\n  },\n\n  _onLocalTimezoneChanged: function () {\n    this._createFormatter();\n    this._updateTimeSliderTip();\n  },\n\n  _updateTimeSliderTip: function () {\n    var self = this;\n\n    var textLabelData = this._isDateTimeSeries() ? this._torqueLayerModel.get('time') : this._torqueLayerModel.get('step');\n\n    if (textLabelData === void 0) {\n      return;\n    }\n\n    var chart = this._chartView.canvas;\n    var textLabel = chart.select('.CDB-Chart-timeSliderTipText');\n\n    var scale = d3.scale.linear()\n      .domain([0, this._dataviewModel.get('data').length])\n      .range([this._dataviewModel.get('start'), this._dataviewModel.get('end')]);\n\n    textLabel\n      .data([textLabelData])\n      .text(function (d) {\n        return self._isDateTimeSeries() ? this.formatter(moment(d).unix()) : this.formatter(scale(d));\n      }.bind(this));\n\n    if (!textLabel.node()) {\n      return;\n    }\n\n    var rectLabel = chart.select('.CDB-Chart-timeSliderTipRect');\n    var textBBox = textLabel.node().getBBox();\n    var width = textBBox.width;\n    var rectWidth = width + TIP_H_PADDING;\n    var chartWidth = this._chartView.chartWidth() + CHART_MARGIN;\n\n    rectLabel.attr('width', rectWidth);\n    textLabel.attr('dx', TIP_H_PADDING / 2);\n    textLabel.attr('dy', textBBox.height - Math.abs((textBBox.height - TIP_RECT_HEIGHT) / 2));\n\n    var timeSliderX = this._xScale(this._torqueLayerModel.get('step'));\n    var xPos = timeSliderX + this.defaults.width - rectWidth / 2;\n    var yPos = this._calcHeight() / 2 + MOBILE_BAR_HEIGHT + TOOLTIP_MARGIN;\n    yPos = Math.floor(yPos);\n\n    var timeSliderTipData = this.timeSliderTip.data();\n    timeSliderTipData[0].y = yPos;\n\n    var newX = xPos;\n\n    if (xPos < CHART_MARGIN) {\n      newX = CHART_MARGIN;\n    } else if ((xPos + rectWidth) >= chartWidth) {\n      newX = chartWidth - rectWidth;\n    }\n\n    if (!isNaN(newX)) {\n      timeSliderTipData[0].x = newX;\n\n      this.timeSliderTip\n        .data(timeSliderTipData)\n        .transition()\n        .ease('linear')\n        .attr('transform', this._translateXY);\n    }\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._torqueLayerModel, 'change:start change:end', this._updateChartandTimeslider);\n    this.listenTo(this._torqueLayerModel, 'change:step', this._onChangeStep);\n    this.listenTo(this._torqueLayerModel, 'change:time', this._onChangeTime);\n    this.listenTo(this._torqueLayerModel, 'change:steps', this._updateChartandTimeslider);\n\n    this.listenTo(this._chartView.model, 'change:width', this._updateChartandTimeslider);\n    this.listenTo(this._chartView.model, 'change:height', this._onChangeChartHeight);\n\n    this.listenTo(this._dataviewModel, 'change:bins', this._updateChartandTimeslider);\n    this.listenTo(this._dataviewModel, 'change:column_type', this._createFormatter);\n    this.listenTo(this._dataviewModel.filter, 'change:min change:max', this._onFilterMinMaxChange);\n\n    this.listenTo(this._timeSeriesModel, 'change:local_timezone', this._onLocalTimezoneChanged);\n\n    this.listenTo(this._dataviewModel, 'change:start change:end', this._updateChartandTimeslider);\n  },\n\n  clean: function () {\n    if (this.timeSlider) {\n      this.timeSlider.remove();\n    }\n    CoreView.prototype.clean.call(this);\n  },\n\n  _onFilterMinMaxChange: function (m, isFiltering) {\n    this.$el.toggle(!isFiltering);\n  },\n\n  _onDragStart: function () {\n    var isRunning = this._torqueLayerModel.get('isRunning');\n    if (isRunning) {\n      this._torqueLayerModel.pause();\n    }\n    this.model.set({\n      isDragging: true,\n      wasRunning: isRunning\n    });\n  },\n\n  _onDrag: function (d, i) {\n    var nextX = d.x + d3.event.dx;\n    if (this._isWithinRange(nextX)) {\n      d.x = nextX;\n      this.timeSlider.attr('transform', this._translateXY);\n\n      var step = Math.round(this._xScale.invert(d.x));\n      this._torqueLayerModel.setStep(step);\n    }\n  },\n\n  _onDragEnd: function () {\n    this.model.set('isDragging', false);\n    if (this.model.get('wasRunning')) {\n      this._torqueLayerModel.play();\n    }\n  },\n\n  _translateXY: function (d) {\n    return 'translate(' + [d.x, d.y] + ')';\n  },\n\n  _isWithinRange: function (x) {\n    return x >= this._chartMargins.left && x <= this._width() - this._chartMargins.right;\n  },\n\n  _onChangeStep: function () {\n    // Time slider might not be created when this method is first called\n    if (this.timeSlider && !this.model.get('isDragging')) {\n      var data = this.timeSlider.data();\n      var newX = this._xScale(this._torqueLayerModel.get('step'));\n\n      if (!isNaN(newX)) {\n        data[0].x = newX;\n\n        this.timeSlider\n          .data(data)\n          .transition()\n          .ease('linear')\n          .attr('transform', this._translateXY);\n      }\n    }\n  },\n\n  _onChangeChartHeight: function () {\n    var height = this._isTabletViewport() ? this._calcHeight() / 2 + MOBILE_BAR_HEIGHT : this._calcHeight();\n\n    this.timeSlider.attr('height', height);\n  },\n\n  _onChangeTime: function () {\n    if (this._dataviewModel.filter.isEmpty() && this._isTabletViewport()) {\n      var timeSliderTip = this._chartView.canvas.select('.CDB-Chart-timeSliderTip');\n\n      if (!timeSliderTip.node()) {\n        this._generateTimeSliderTip();\n      }\n\n      this._updateTimeSliderTip();\n    } else {\n      this._removeTimeSliderTip();\n    }\n  },\n\n  _removeTimeSliderTip: function () {\n    var timeSliderTip = this._chartView.canvas.select('.CDB-Chart-timeSliderTip');\n\n    if (timeSliderTip.node()) {\n      timeSliderTip.remove();\n    }\n  },\n\n  _updateChartandTimeslider: function () {\n    this._updateXScale();\n    this._onChangeStep();\n  },\n\n  _calcHeight: function () {\n    return this._chartView.chartHeight() + this.defaults.height;\n  },\n\n  _createFormatter: function () {\n    this.formatter = formatter.formatNumber;\n\n    if (this._isDateTimeSeries()) {\n      this.formatter = formatter.timestampFactory(this._dataviewModel.get('aggregation'), this._dataviewModel.getCurrentOffset());\n    }\n  },\n\n  _isDateTimeSeries: function () {\n    return this._dataviewModel.getColumnType() === 'date';\n  },\n\n  _updateXScale: function () {\n    // calculate range based on the torque layer bounds (that are not the same than the histogram ones)\n    var range = 1000 * (this._dataviewModel.get('end') - this._dataviewModel.get('start'));\n    // get normalized start and end\n    var start = (this._torqueLayerModel.get('start') - 1000 * this._dataviewModel.get('start')) / range;\n    var end = (this._torqueLayerModel.get('end') - 1000 * this._dataviewModel.get('start')) / range;\n\n    // This function might be called in-between state changes, so just to be safe let's keep the range sane\n    var scaleRangeMin = (start * this._width()) + this._chartMargins.left;\n    var scaleRangeMax = (end * this._width()) - this._chartMargins.right;\n\n    scaleRangeMin = scaleRangeMin < 0\n      ? this._chartMargins.left\n      : scaleRangeMin;\n\n    scaleRangeMax = scaleRangeMax > this._width()\n      ? this._width() - this._chartMargins.right\n      : scaleRangeMax;\n\n    this._xScale = d3.scale.linear()\n      .domain([0, this._torqueLayerModel.get('steps')])\n      .range([scaleRangeMin, scaleRangeMax]);\n  },\n\n  _width: function () {\n    return this._chartView.model.get('width');\n  }\n});\n","var CoreView = require('backbone/core-view');\nvar _ = require('underscore');\nvar errorButtonTemplate = require('./widget-error-button-template.tpl');\nvar errorTextTemplate = require('./widget-error-text-template.tpl');\n\n/**\n * Default widget error view:\n *\n * It will listen or not to dataviewModel changes when first load is done.\n */\nmodule.exports = CoreView.extend({\n  className: 'CDB-Widget-body is-hidden',\n\n  events: {\n    'click .js-refresh': '_onRefreshClick'\n  },\n\n  initialize: function (opts) {\n    this._title = opts.title;\n    this._errorModel = opts.errorModel;\n\n    this.listenTo(this._errorModel, 'change', this._onErrorModelChanged);\n  },\n\n  render: function () {\n    var error = this._errorModel.get('error');\n\n    if (error) {\n      var placeholderTemplate = this._errorModel.get('placeholder');\n      var placeholder = _.isFunction(placeholderTemplate) ? placeholderTemplate() : '';\n      this.$el.addClass('CDB-Widget--' + error.level);\n\n      var body = error.type\n        ? errorTextTemplate({\n          placeholder: placeholder,\n          error: error.error,\n          title: this._title,\n          message: error.message,\n          refresh: error.refresh\n        })\n        : errorButtonTemplate({ placeholder: placeholder });\n\n      this.$el.html(body);\n    }\n\n    return this;\n  },\n\n  _onErrorModelChanged: function () {\n    this._reset();\n\n    _.isEmpty(this._errorModel.get('error'))\n      ? this.$el.addClass('is-hidden')\n      : this.$el.removeClass('is-hidden');\n\n    this.render();\n  },\n\n  _onRefreshClick: function () {\n    this._errorModel.get('model').refresh();\n  },\n\n  _reset: function () {\n    this.$el.removeClass('CDB-Widget--alert CDB-Widget--error');\n    this.$el.html('');\n  }\n});\n","var CoreView = require('backbone/core-view');\n\n/**\n *  Default widget loader view:\n *\n *  It will listen or not to dataviewModel changes when\n *  first load is done.\n */\nmodule.exports = CoreView.extend({\n  className: 'CDB-Widget-loader',\n\n  initialize: function () {\n    this._initBinds();\n  },\n\n  render: function () {\n    this.$el.append('<div class=\"CDB-Loader js-loader\"></div>');\n    return this;\n  },\n\n  show: function () {\n    this.$('.js-loader').addClass('is-visible');\n    clearTimeout(this._timeout);\n  },\n\n  hide: function () {\n    var self = this;\n    this._timeout = setTimeout(function () {\n      self.$('.js-loader').removeClass('is-visible');\n    }, 500);\n  },\n\n  _initBinds: function () {\n    this.model.bind('loading', this.show, this);\n    this.model.bind('error', function (mdl, err) {\n      if (!err || (err && err.statusText !== 'abort')) {\n        this.hide();\n      }\n    }, this);\n    this.model.bind('loaded', this.hide, this);\n  }\n});\n","var _ = require('underscore');\nvar cdb = require('internal-carto.js');\nvar AutoStylerFactory = require('./auto-style/factory');\n\nvar TIME_SERIES_TYPE = 'time-series';\nvar HISTOGRAM_TYPE = 'histogram';\n\n/**\n * Default widget model\n *\n * Note: Currently all widgets have a dependency on a dataview, why it makes sense to have it here.\n * If you need a widget model that's backed up by a dataview model please implement your own model and adhere to the\n * public interface instead of extending/hacking this one.\n */\nmodule.exports = cdb.core.Model.extend({\n  defaults: {\n    attrsNames: [],\n    show_stats: false,\n    show_source: false\n  },\n\n  defaultState: {\n    'collapsed': false\n  },\n\n  initialize: function (attrs, models, opts) {\n    opts = opts || {};\n    if (!models.dataviewModel) throw new Error('dataviewModel is required.');\n    if (!models.layerModel) throw new Error('layerModel is required.');\n\n    this.dataviewModel = models.dataviewModel;\n    this.layerModel = models.layerModel;\n\n    // Autostyle could be disabled initially if the styles have an aggregation\n    // If no option, autoStyleEnabled by default\n    this._autoStyleEnabledWhenCreated = opts.autoStyleEnabled === undefined ? true : opts.autoStyleEnabled;\n\n    this.activeAutoStyler();\n    this.listenTo(this, 'change:style', this.activeAutoStyler);\n  },\n\n  activeAutoStyler: function () {\n    if (this.isAutoStyleEnabled() && !this.autoStyler) {\n      this.autoStyler = AutoStylerFactory.get(this.dataviewModel, this.layerModel, this.get('style'));\n    }\n  },\n\n  /**\n   * @public\n   * @param {Object} attrs, not that it should be\n   * @return {Boolean} true if at least one attribute was changed\n   * @throws {Error} Should throw an error if the attrs are invalid or inconsistent\n   */\n  update: function (attrs) {\n    var wAttrs = _.pick(attrs, this.get('attrsNames'));\n    this.set(wAttrs);\n    this.dataviewModel.update(attrs);\n    this._triggerChangesInAutoStyle();\n    return !!(this.changedAttributes() || this.dataviewModel.changedAttributes());\n  },\n\n  _triggerChangesInAutoStyle: function () {\n    var changed = this.changed && this.changed.style && this.changed.style.auto_style && this.changed.style.auto_style.definition;\n    var previous = this.previousAttributes();\n    var former = previous.style && previous.style.auto_style && previous.style.auto_style.definition;\n\n    if (!_.isEqual(changed, former)) {\n      this.trigger('customAutoStyle', this);\n    }\n  },\n\n  /**\n   * @public\n   */\n  remove: function () {\n    this.dataviewModel.remove();\n    this.trigger('destroy', this);\n    this.stopListening();\n  },\n\n  isAutoStyleEnabled: function () {\n    var styles = this.get('style');\n\n    if (this.get('type') === 'category' || this.get('type') === 'histogram') {\n      if (!styles || !styles.auto_style) {\n        // Only when styles are undefined we check the autostyle option\n        return this._autoStyleEnabledWhenCreated;\n      }\n\n      return styles && styles.auto_style && styles.auto_style.allowed;\n    } else {\n      return false;\n    }\n  },\n\n  getWidgetColor: function () {\n    var styles = this.get('style');\n    var widgetStyle = styles && styles.widget_style;\n    var widgetColor = widgetStyle && widgetStyle.definition &&\n      widgetStyle.definition.color &&\n      widgetStyle.definition.color.fixed;\n    var widgetColorChanged = (widgetStyle && widgetStyle.widget_color_changed) ||\n      (widgetStyle && !widgetStyle.widget_color_changed && widgetColor !== '#9DE0AD');\n\n    return widgetColorChanged && widgetColor;\n  },\n\n  hasColorsAutoStyle: function () {\n    var autoStyle = this.getAutoStyle();\n    var hasDefinedColors = false;\n\n    if (!autoStyle || _.isEmpty(autoStyle) || _.isEmpty(autoStyle.definition)) {\n      return false;\n    }\n\n    // Check colors in all geometries\n    _.each(autoStyle.definition, function (geometryStyle) {\n      if (geometryStyle.color && geometryStyle.color.range && geometryStyle.color.range.length > 0) {\n        hasDefinedColors = true;\n      }\n    }, this);\n\n    return hasDefinedColors;\n  },\n\n  getColor: function (name) {\n    if (this.isAutoStyleEnabled() && this.isAutoStyle() && this.get('type') === 'category') {\n      return this.autoStyler.colors.getColorByCategory(name);\n    } else {\n      return this.getWidgetColor();\n    }\n  },\n\n  isAutoStyle: function () {\n    return this.get('autoStyle');\n  },\n\n  autoStyle: function () {\n    if (!this.isAutoStyleEnabled()) return;\n    if (!this.dataForAutoStyle()) return;\n\n    var layer = this.layerModel;\n    var initialStyle = layer.get('cartocss');\n    if (!initialStyle && layer.get('meta')) {\n      initialStyle = layer.get('meta').cartocss;\n    }\n    layer.set('initialStyle', initialStyle);\n\n    var style = this.autoStyler.getStyle();\n    layer.set('cartocss', style);\n    this.set('autoStyle', true);\n  },\n\n  dataForAutoStyle: function () {\n    return this.dataviewModel.get('data').length > 0;\n  },\n\n  reapplyAutoStyle: function () {\n    var style = this.autoStyler.getStyle();\n    this.layerModel.set('cartocss', style);\n    this.set('autoStyle', true);\n  },\n\n  cancelAutoStyle: function (noRestore) {\n    if (!noRestore) {\n      this.layerModel.restoreCartoCSS();\n    }\n    this.set('autoStyle', false);\n  },\n\n  getAutoStyle: function () {\n    var style = this.get('style');\n    var layerModel = this.layerModel;\n    var cartocss = layerModel.get('cartocss') || (layerModel.get('meta') && layerModel.get('meta').cartocss);\n\n    if (this.isAutoStyleEnabled() && this.autoStyler) {\n      if (style && style.auto_style && style.auto_style.definition) {\n        var toRet = _.extend(style.auto_style, {cartocss: cartocss});\n        return _.extend({}, toRet, {definition: this.autoStyler.getDef(cartocss)});\n      } else {\n        return {\n          definition: this.autoStyler.getDef(cartocss),\n          cartocss: cartocss\n        };\n      }\n    }\n\n    return {};\n  },\n\n  _updateAutoStyle: function (_model, style) {\n    if (this.autoStyler) {\n      this.autoStyler.updateStyle(style);\n    }\n    if (this.isAutoStyle()) {\n      this.reapplyAutoStyle();\n    }\n  },\n\n  setInitialState: function (state) {\n    this.initialState = state || {};\n  },\n\n  applyInitialState: function () {\n    var attrs = _.extend(\n      this.initialState,\n      {hasInitialState: true}\n    );\n\n    this.setState(attrs);\n  },\n\n  setState: function (state) {\n    this.set(state);\n  },\n\n  getState: function () {\n    var state = {};\n    for (var key in this.defaultState) {\n      var attribute = this.get(key);\n      var defaultValue = this.defaultState[key];\n      if (typeof defaultValue !== 'undefined' && typeof attribute !== 'undefined' && !_.isEqual(attribute, defaultValue)) {\n        state[key] = attribute;\n      }\n    }\n    return state;\n  },\n\n  forceResize: function () {\n    var type = this.get('type');\n    if (type === TIME_SERIES_TYPE ||\n        type === HISTOGRAM_TYPE) {\n      this.trigger('forceResize');\n    }\n  }\n});\n","var _ = require('underscore');\nvar WidgetView = require('./widget-view');\n\nvar WidgetViewFactory = function (defs) {\n  this.defs = [];\n  _.each(defs, function (def) {\n    this.addType(def);\n  }, this);\n};\n\nWidgetViewFactory.prototype.DEFAULT_CLASS_NAMES = 'CDB-Widget CDB-Widget--light';\n\nWidgetViewFactory.prototype.addType = function (def) {\n  if (!def.match) {\n    if (def.type) {\n      def.match = function (widget) {\n        return widget.get('type') === this.type;\n      };\n    } else {\n      throw new Error('def.type or def.match must be provided for createContentView to work');\n    }\n  }\n  if (!_.isFunction(def.createContentView)) throw new Error('def.createContentView must be a function');\n  this.defs.push(def);\n};\n\n/**\n * @returns {Object, undefined} Returns nothing if there is not matching view for the given model\n */\nWidgetViewFactory.prototype.createWidgetView = function (widget) {\n  var def = _.find(this.defs, function (def) {\n    return def.match(widget);\n  });\n\n  if (def) {\n    var attrs = {\n      className: this.DEFAULT_CLASS_NAMES,\n      model: widget,\n      contentView: def.createContentView(widget)\n    };\n\n    return new WidgetView(\n      _.isFunction(def.customizeWidgetAttrs)\n        ? def.customizeWidgetAttrs(attrs)\n        : attrs\n    );\n  }\n};\n\nmodule.exports = WidgetViewFactory;\n","var Backbone = require('backbone');\nvar _ = require('underscore');\nvar CoreView = require('backbone/core-view');\nvar WidgetLoaderView = require('./widget-loader-view');\nvar WidgetErrorView = require('./widget-error-view');\nvar errorEnhancer = require('../util/error-enhancer');\nvar getValue = require('../util/get-object-value');\nvar Utils = require('builder/helpers/utils');\n\nvar PLACEHOLDER_TEMPLATES = {\n  category: require('./category/list/items-placeholder-template.tpl'),\n  formula: require('./formula/placeholder.tpl'),\n  histogram: require('./histogram/placeholder.tpl')\n};\n\nvar MAX_BUCKETS = 367;\n\n/**\n * Default widget view\n * The model is a expected to be widget model\n */\nmodule.exports = CoreView.extend({\n  className: 'CDB-Widget CDB-Widget--light',\n\n  options: {\n    columns_title: []\n  },\n\n  initialize: function () {\n    this.errorModel = new Backbone.Model({});\n    var dataviewModel = this.model.dataviewModel;\n\n    this.listenTo(this.model, 'destroy', this.clean);\n    this.listenTo(this.model, 'error', this._onError);\n    this.listenTo(this.model, 'setDisabled', this._setDisabled);\n    this.listenTo(dataviewModel, 'statusError', this._onError);\n    this.listenTo(dataviewModel, 'sync change:data', this._onDataChanged);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    this._appendView(new WidgetLoaderView({\n      model: this.model.dataviewModel\n    }));\n\n    this._appendView(new WidgetErrorView({\n      title: this.model.get('title'),\n      errorModel: this.errorModel\n    }));\n\n    this._appendView(this.options.contentView);\n\n    return this;\n  },\n\n  _onDataChanged: function (model) {\n    if (this._noDataAvailable()) {\n      this.options.contentView.$el.addClass('is-hidden');\n      return this.errorModel.set({\n        model: model,\n        error: errorEnhancer({ type: 'no_data_available' }),\n        placeholder: this._getPlaceholder()\n      });\n    }\n\n    if (this._dataHasTooManyBins()) {\n      this.options.contentView.$el.addClass('is-hidden');\n      return this.errorModel.set({\n        model: model,\n        error: errorEnhancer({ type: 'too_many_bins' }),\n        placeholder: this._getPlaceholder()\n      });\n    }\n\n    if (!_.isEmpty(this.errorModel.get('error'))) {\n      this.errorModel.clear();\n      this.options.contentView.render();\n      this.options.contentView.$el.removeClass('is-hidden');\n    }\n  },\n\n  _onError: function (model, error) {\n    if (error && error.message === 'abort') {\n      return;\n    }\n\n    var enhancedError = errorEnhancer(error);\n\n    this.options.contentView.$el.addClass('is-hidden');\n    this.errorModel.set({\n      model: model,\n      error: enhancedError,\n      placeholder: this._getPlaceholder()\n    });\n  },\n\n  _appendView: function (view) {\n    this.$el.append(view.render().el);\n    this.addView(view);\n  },\n\n  _noDataAvailable: function () {\n    var valueToCheck = this._isHistogram() ? 'totalAmount' : 'data';\n    var data = this.model.dataviewModel.get(valueToCheck);\n\n    return !Utils.hasValue(data) || (_.isArray(data) && _.isEmpty(data));\n  },\n\n  _dataHasTooManyBins: function () {\n    if (this._isHistogram()) {\n      var data = this.model.dataviewModel.getUnfilteredData && this.model.dataviewModel.getUnfilteredData();\n      return !_.isEmpty(data) && _.size(data) > MAX_BUCKETS;\n    }\n    return false;\n  },\n\n  _isHistogram: function () {\n    return this.model.dataviewModel.get('type') === 'histogram';\n  },\n\n  _extractError: function (response) {\n    // XmlHttpRequest error?\n    var errors = getValue(response, 'responseJSON.errors_with_context', []);\n    if (errors.length > 0) {\n      return errors[0];\n    } else if (response && response.message) {\n      response.type = response.type || 'generic';\n      return response;\n    }\n    return {};\n  },\n\n  _getPlaceholder: function () {\n    var widgetType = this.model.dataviewModel.get('type');\n    return PLACEHOLDER_TEMPLATES[widgetType];\n  },\n\n  _setDisabled: function (model, selectedWidgetId) {\n    var differentWidget = model.get('id') !== selectedWidgetId;\n\n    if (selectedWidgetId && !differentWidget) {\n      this.el.scrollIntoView && this.el.scrollIntoView();\n    }\n\n    this.$el.toggleClass('is-disabled', selectedWidgetId !== null && differentWidget);\n  }\n});\n","var _ = require('underscore');\nvar Backbone = require('backbone');\n\n/**\n * Collection of Dataviews\n */\nmodule.exports = Backbone.Collection.extend({\n  comparator: 'order',\n\n  initialize: function () {\n    this._allDataviewsFetched = false;\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.bind('change:order', _.debounce(this._onChangeOrder.bind(this), 10), this);\n    // If a category model applies the category colors, rest should remove/disable\n    // the category colors applied before.\n    this.bind('change:autoStyle', function (changedWidgetModel, autoStyle) {\n      if (autoStyle) {\n        this.each(function (widgetModel) {\n          // Only set if model actually has the attr (i.e. it's a category model)\n          if (widgetModel.layerModel && widgetModel !== changedWidgetModel && widgetModel.layerModel.get('layer_name') === changedWidgetModel.layerModel.get('layer_name') && widgetModel.get('autoStyle')) {\n            widgetModel.set('autoStyle', false);\n          }\n        });\n      }\n    }, this);\n  },\n\n  _onChangeOrder: function () {\n    this.sort();\n    this.trigger('orderChanged', this);\n  },\n\n  getStates: function () {\n    var state = {};\n    this.each(function (widgetModel) {\n      var widgetState = widgetModel.getState();\n      if (!_.isEmpty(widgetState)) {\n        state[widgetModel.get('id')] = widgetState;\n      }\n    });\n    return state;\n  },\n\n  setStates: function (states) {\n    for (var i in states) {\n      var widget = this.at(i);\n      widget.setState(states[i]);\n    }\n  },\n\n  hasInitialState: function () {\n    return this._allDataviewsFetched;\n  },\n\n  initialState: function () {\n    this._allDataviewsFetched = true;\n  }\n});\n","module.exports = {\n  en: require('./en.json'),\n  sw: require('./sw.json'),\n  es: require('./es.json')\n};\n","const defaultParams = {\n  exclude_shared: false,\n  per_page: 12,\n  shared: 'no',\n  locked: false,\n  only_liked: false,\n  deepInsights: false\n};\n\nconst mine = {\n  ...defaultParams\n};\n\nconst locked = {\n  ...defaultParams,\n  locked: true\n};\n\nconst shared = {\n  ...defaultParams,\n  shared: 'only'\n};\n\nconst favorited = {\n  ...defaultParams,\n  only_liked: true\n};\n\nconst publicPrivacy = {\n  ...defaultParams,\n  privacy: 'public'\n};\n\nconst linkPrivacy = {\n  ...defaultParams,\n  privacy: 'link'\n};\n\nconst passwordPrivacy = {\n  ...defaultParams,\n  privacy: 'password'\n};\n\nconst privatePrivacy = {\n  ...defaultParams,\n  privacy: 'private'\n};\n\nconst filters = {\n  mine,\n  locked,\n  shared,\n  favorited,\n  public: publicPrivacy,\n  link: linkPrivacy,\n  password: passwordPrivacy,\n  private: privatePrivacy\n};\n\nconst allowedFilters = Object.keys(filters);\n\nexport default filters;\n\nexport { defaultParams };\n\nexport function isAllowed (filter) {\n  return allowedFilters.includes(filter);\n}\n","import PermissionModel from 'dashboard/data/permission-model';\n\nexport function isSharedWithMe (visualizationData, models) {\n  return models.user.get('id') !== visualizationData.permission.owner.id;\n}\n\nexport function getURL (visualizationData, models) {\n  const loggedUserBackboneModel = models.user;\n  const loggedUserId = loggedUserBackboneModel.id || loggedUserBackboneModel.get('id');\n  const permissionModel = new PermissionModel(\n    visualizationData.permission, { configModel: models.config }\n  );\n\n  let id = visualizationData.id;\n  let userUrl = permissionModel.owner.viewUrl();\n\n  const isVisualization = visualizationData.type === 'derived' || typeof visualizationData.type === 'undefined';\n  if (isVisualization) {\n    if (loggedUserBackboneModel &&\n        loggedUserId !== permissionModel.owner.get('id') &&\n        permissionModel.hasAccess(loggedUserBackboneModel)) {\n      userUrl = loggedUserBackboneModel.viewUrl();\n      id = `${permissionModel.owner.get('username')}.${id}`;\n    }\n\n    return userUrl.urlToPath('viz', id).get('base_url');\n  } else {\n    if (loggedUserBackboneModel && permissionModel.hasAccess(loggedUserBackboneModel)) {\n      userUrl = loggedUserBackboneModel.viewUrl();\n    }\n\n    return userUrl.urlToPath('tables', getUnquotedName(visualizationData.table.name)).get('base_url');\n  }\n}\n\nexport function getThumbnailUrl (visualizationData, models, options) {\n  const protocol = isHTTPS() ? 'https' : 'http';\n  const cdnConfig = models.config.get('cdn_url');\n  const username = visualizationData.permission.owner.username || models.user.get('username');\n  const thumbnailOptions = {\n    protocol,\n    username,\n    mapsApiResource: models.config.getMapsResourceName(username),\n    tpl: _generateImageTemplate(visualizationData.id),\n    width: options.width,\n    height: options.height,\n    authTokens: _generateAuthTokensParams(visualizationData.auth_tokens)\n  };\n\n  if (cdnConfig) {\n    Object.assign(thumbnailOptions, { cdn: cdnConfig[protocol] });\n  }\n\n  return interpolateTemplateUrl(cdnConfig ? 'cdn' : 'regular', thumbnailOptions);\n}\n\nconst interpolateTemplateUrl = function (type, options) {\n  if (type === 'regular') {\n    return `${options.protocol}://${options.mapsApiResource}/api/v1/map/static/named/${options.tpl}/${options.width}/${options.height}.png${options.authTokens}`;\n  }\n\n  if (type === 'cdn') {\n    return `${options.protocol}://${options.cdn}/${options.username}/api/v1/map/static/named/${options.tpl}/${options.width}/${options.height}.png${options.authTokens}`;\n  }\n};\n\nconst _generateAuthTokensParams = function (authTokens) {\n  if (authTokens && authTokens.length > 0) {\n    return '?' + authTokens.map(t => `auth_token=${t}`).join('&');\n  }\n\n  return '';\n};\n\nconst _generateImageTemplate = function (visualizationId) {\n  return `tpl_${visualizationId.replace(/-/g, '_')}`;\n};\n\nconst isHTTPS = function () {\n  return location.protocol.indexOf('https') === 0;\n};\n\nconst getUnquotedName = function (name = '') {\n  return name.replace(/\"/g, '');\n};\n","import Vue from 'vue';\n\nVue.directive('clickOutside', {\n  bind: function (element, binding, vnode) {\n    element.clickOutsideEvent = function (event) {\n      if (!element.contains(event.target)) {\n        vnode.context[binding.expression](event);\n      }\n    };\n\n    element.addClickEvent = function (event) {\n      document.body.addEventListener('click', element.clickOutsideEvent, { passive: true });\n    };\n\n    element.addEventListener('click', element.addClickEvent, { passive: true });\n  },\n  unbind: function (element) {\n    document.body.removeEventListener('click', element.clickOutsideEvent, { passive: true });\n    element.removeEventListener('click', element.addClickEvent, { passive: true });\n  }\n});\n","import deepObjectExtend from 'new-dashboard/utils/deep-object-extend';\n\nvar ACTIVE_LOCALE = 'en';\nif (ACTIVE_LOCALE !== 'en') {\n  require('moment/locale/' + ACTIVE_LOCALE);\n}\n\nvar Locale = require('locale/index');\nvar Polyglot = require('node-polyglot');\n\n// Override original translation strings\nconst overrideTranslationStrings = require('./locales/en.overrides.json');\nLocale.en = deepObjectExtend(Locale.en, overrideTranslationStrings);\n\nvar polyglot = new Polyglot({\n  locale: ACTIVE_LOCALE, // Needed for pluralize behaviour\n  phrases: Locale[ACTIVE_LOCALE]\n});\n\nwindow._t = polyglot.t.bind(polyglot);\n","import Vue from 'vue';\nimport VueI18n from 'vue-i18n';\nimport './backbone-i18n';\n\n// Locales\nimport en from 'new-dashboard/i18n/locales/en';\n\nVue.use(VueI18n);\n\n// Create VueI18n instance with options\nconst i18n = new VueI18n({\n  locale: 'en',\n  messages: {\n    en\n  }\n});\n\nexport default i18n;\n","import Vue from 'vue';\n\n// Backbone Models\nimport ConfigModel from 'dashboard/data/config-model';\nimport UserModel from 'dashboard/data/user-model';\nimport OrganizationModel from 'dashboard/data/organization-model';\nimport UserGroupsCollection from 'dashboard/data/user-groups-collection';\nimport BackgroundPollingModel from 'dashboard/data/background-polling/dashboard-background-polling-model';\nimport getCARTOData from 'new-dashboard/store/utils/getCARTOData';\n\nconst BackboneCoreModels = {};\n\nBackboneCoreModels.install = function (Vue, options) {\n  Vue.mixin({\n    beforeCreate () {\n      this.$cartoModels = options;\n    }\n  });\n};\n\nconst CARTOData = getCARTOData();\n\nconst configModel = new ConfigModel({\n  ...CARTOData.config,\n  base_url: CARTOData.user_data.base_url\n});\nconst userModel = configureUserModel(CARTOData.user_data);\n\nconst backgroundPollingModel = new BackgroundPollingModel({\n  showGeocodingDatasetURLButton: true,\n  geocodingsPolling: true,\n  importsPolling: true\n}, { configModel, userModel });\n\nVue.use(BackboneCoreModels, {\n  config: configModel,\n  user: userModel,\n  backgroundPolling: backgroundPollingModel\n});\n\nfunction configureUserModel (userData) {\n  const userModel = new UserModel(userData);\n\n  if (userData.organization) {\n    userModel.setOrganization(new OrganizationModel(userData.organization, { configModel }));\n  }\n\n  if (userData.groups) {\n    userModel.setGroups(new UserGroupsCollection(userData.groups, { configModel }));\n  }\n\n  return userModel;\n}\n","export default function createModalModel (handlers) {\n  return {\n    create: handlers.create,\n    destroy: handlers.destroy\n  };\n}\n","export function fetch (fetchFunctionName) {\n  return function (context) {\n    const { api_key: apiKey } = context.rootState.user;\n    context.commit('setFetchingState');\n\n    context.rootState.client[fetchFunctionName](apiKey, function (err, _, data) {\n      if (err) {\n        const error = data.responseJSON && data.responseJSON.errors ||\n          { message: data.responseText || data.statusText };\n        context.commit('setRequestError', error);\n        return;\n      }\n\n      context.commit('setApps', data.result);\n    });\n  };\n}\n\nexport function createOAuth (context, app) {\n  const { api_key: apiKey } = context.rootState.user;\n\n  return new Promise((resolve, reject) => {\n    context.rootState.client.createApp(apiKey, app, function (err, _, data) {\n      if (err) {\n        const error = data.responseJSON && data.responseJSON.errors ||\n          { message: data.responseText || data.statusText };\n        return reject(error);\n      }\n\n      context.commit('addApp', data);\n      resolve(data);\n    });\n  });\n}\n\nexport function updateOAuth (context, app) {\n  const { api_key: apiKey } = context.rootState.user;\n\n  return new Promise((resolve, reject) => {\n    context.rootState.client.updateApp(apiKey, app, function (err, _, data) {\n      if (err) {\n        const error = data.responseJSON && data.responseJSON.errors ||\n          { message: data.responseText || data.statusText };\n        return reject(error);\n      }\n\n      context.commit('updateOAuthApp', data);\n      resolve(data);\n    });\n  });\n}\n\nexport function regenerateCredentials (context, app) {\n  const { api_key: apiKey } = context.rootState.user;\n\n  context.rootState.client.regenerateClientSecret(apiKey, app, function (err, _, data) {\n    if (err) {\n      context.commit('setRequestError', [data.responseText]);\n      return;\n    }\n\n    context.commit('updateOAuthApp', data);\n  });\n}\n","export function fetchCategories (context) {\n  context.commit('setFetchingState');\n\n  /* Using SQL API with observatory account\n  https://{username}.carto.com/api/v2/sql?q={SQL statement} */\n  const CONFIG_PATH = [`api/v2/sql?q=`];\n  const q = `SELECT\n    DISTINCT category\n    FROM carto_do_catalog_master_datasets\n    WHERE include_in_public_web = true`;\n  const PATH = CONFIG_PATH + q;\n  const opts = {\n    baseUrl: 'https://observatory.carto.com',\n    doNoSetDefaultContentType: true\n  };\n\n  return new Promise((resolve, reject) => {\n    context.rootState.client.get([PATH], opts, function (err, _, data) {\n      if (err) {\n        context.commit('setRequestError', err);\n        return reject(err);\n      }\n      context.commit('setCategories', data.rows);\n      resolve();\n    });\n  });\n}\n\nexport function fetchCountries (context, category) {\n  context.commit('setFetchingState');\n\n  /* Using SQL API with observatory account\n  https://{username}.carto.com/api/v2/sql?q={SQL statement} */\n  const CONFIG_PATH = [`api/v2/sql?q=`];\n  const q = `SELECT\n    country\n    FROM carto_do_catalog_master_datasets\n    WHERE category='${category}'\n    and include_in_public_web = true\n    GROUP BY country\n    ORDER BY country ASC`;\n  const PATH = CONFIG_PATH + q;\n  const opts = {\n    baseUrl: 'https://observatory.carto.com',\n    doNoSetDefaultContentType: true\n  };\n\n  return new Promise((resolve, reject) => {\n    context.rootState.client.get([PATH], opts, function (err, _, data) {\n      if (err) {\n        context.commit('setRequestError', err);\n        return reject(err);\n      }\n      context.commit('setCountries', data.rows);\n      resolve();\n    });\n  });\n}\n\nexport function fetchDatasets (context, params) {\n  context.commit('setFetchingState');\n\n  /* Using SQL API with observatory account\n  https://{username}.carto.com/api/v2/sql?q={SQL statement} */\n  const CONFIG_PATH = [`api/v2/sql?q=`];\n  const q = `SELECT dataset AS name,\n    category,\n    description,\n    country,\n    ARRAY_AGG(DISTINCT spatial_aggregations) AS spatial_aggregations,\n    ARRAY_AGG(DISTINCT temporal_aggregations) AS frequency,\n    ARRAY_AGG(DISTINCT provider) AS source,\n    ARRAY_AGG(DISTINCT variable_name) AS variable_name,\n    MIN(cartodb_id) AS id\n    FROM carto_do_catalog_master_datasets\n    WHERE category='${params.category}'\n    and country='${params.country}'\n    and include_in_public_web = true\n    GROUP BY(dataset, category, country, description)`;\n  const PATH = CONFIG_PATH + q;\n  const opts = {\n    baseUrl: 'https://observatory.carto.com',\n    doNoSetDefaultContentType: true\n  };\n\n  return new Promise((resolve, reject) => {\n    context.rootState.client.get([PATH], opts, function (err, _, data) {\n      if (err) {\n        context.commit('setRequestError', err);\n        return reject(err);\n      }\n      context.commit('setDatasets', data.rows);\n      context.commit('setPagination', context.state.page);\n      resolve();\n    });\n  });\n}\n\nexport function setURLOptions (context, options) {\n  context.commit('setPagination', parseInt(options.page || 1));\n  context.commit('setOrder', { order: options.order, direction: options.order_direction });\n}\n\nexport function order (context, orderOptions) {\n  context.commit('setPagination', 1);\n  context.commit('setOrder', orderOptions);\n  context.commit('orderDatasets');\n}\n\nexport function clearList (context) {\n  context.commit('setDatasets', []);\n  context.commit('setPagination', 1);\n}\n\nexport function requestDataset (context, { user, dataset }) {\n  /* Using V3 hubspot API\n  https://api.hsforms.com/submissions/v3/integration/submit/:portalId/:formGuid */\n  const hubspot_id = '474999';\n  const form_id = '507ead6f-06d9-434a-95e1-a9616c576796';\n  const CONFIG_PATH = [`submissions/v3/integration/submit/${hubspot_id}/${form_id}`];\n\n  const data = getFormData(user, dataset);\n\n  const opts = {\n    data,\n    baseUrl: 'https://api.hsforms.com'\n  };\n\n  return new Promise((resolve, reject) => {\n    context.rootState.client.post([CONFIG_PATH], opts, function (err, _, data) {\n      if (err) {\n        return reject(err);\n      }\n      resolve();\n    });\n  });\n}\n\nfunction getFormData (user, dataset) {\n  return JSON.stringify({\n    'fields': [\n      {\n        'name': 'email',\n        'value': user.email\n      },\n      {\n        'name': 'lastname',\n        'value': user.last_name || 'no_last_name'\n      },\n      {\n        'name': 'firstname',\n        'value': user.name || 'no_firstname'\n      },\n      {\n        'name': 'jobtitle',\n        'value': user.job_role || 'no_jobtitle'\n      },\n      {\n        'name': 'company',\n        'value': user.company || 'no_company'\n      },\n      {\n        'name': 'phone',\n        'value': user.phone || 'no_phone'\n      },\n      {\n        'name': 'country_data',\n        'value': dataset.country\n      },\n      {\n        'name': 'data_category',\n        'value': dataset.category\n      },\n      {\n        'name': 'datastream_name',\n        'value': dataset.name\n      },\n      {\n        'name': 'data_purpose',\n        'value': 'no_data_purpose'\n      }\n    ],\n    'context': {\n      'pageUri': 'www.carto.com/dashboard/catalog',\n      'pageName': 'Catalog page in Dashboard'\n    }\n  });\n}\n","export function deleteLike (context, visualization) {\n  const currentLikeStatus = visualization.liked;\n\n  context.dispatch('updateVisualization', {\n    visualizationId: visualization.id,\n    visualizationAttributes: {\n      liked: false\n    }\n  });\n\n  context.rootState.client.deleteLike(visualization.id,\n    function (err, _, data) {\n      if (err) {\n        context.dispatch('updateVisualization', {\n          visualizationId: visualization.id,\n          visualizationAttributes: {\n            liked: currentLikeStatus\n          }\n        });\n        return;\n      }\n\n      context.commit('updateNumberLikes', {\n        visualizationId: visualization.id,\n        visualizationAttributes: {\n          liked: data.liked\n        }\n      });\n    }\n  );\n}\n\nexport function fetchVisualizations (context, parameters) {\n  context.commit('setFetchingState');\n\n  context.rootState.client.getVisualization('',\n    parameters,\n    function (err, _, data) {\n      if (err) {\n        context.commit('setRequestError', err);\n        return;\n      }\n      context.commit('setVisualizations', data);\n      context.commit('setPagination', context.state.page);\n    });\n}\n\nexport function filter (context, filter) {\n  context.commit('setPagination', 1);\n  context.commit('setFilterType', filter);\n  context.dispatch('fetch');\n}\n\nexport function like (context, visualization) {\n  const currentLikeStatus = visualization.liked;\n\n  context.dispatch('updateVisualization', {\n    visualizationId: visualization.id,\n    visualizationAttributes: {\n      liked: true\n    }\n  });\n\n  context.rootState.client.like(visualization.id,\n    function (err, _, data) {\n      if (err) {\n        context.dispatch('updateVisualization', {\n          visualizationId: visualization.id,\n          visualizationAttributes: {\n            liked: currentLikeStatus\n          }\n        });\n\n        return;\n      }\n\n      context.commit('updateNumberLikes', {\n        visualizationId: visualization.id,\n        visualizationAttributes: {\n          liked: data.liked\n        }\n      });\n    }\n  );\n}\n\nexport function order (context, orderOptions) {\n  context.commit('setPagination', 1);\n  context.commit('setOrder', orderOptions);\n  context.dispatch('fetch');\n}\n\nexport function resetFilters (DEFAULT_VALUES) {\n  return function (context) {\n    context.commit('setPagination', 1);\n    context.commit('setFilterType', 'mine');\n    context.commit('setResultsPerPage', 12);\n    context.commit('setOrder', { order: DEFAULT_VALUES.order, direction: DEFAULT_VALUES.orderDirection });\n  };\n}\n\nexport function setResultsPerPage (context, perPage) {\n  context.commit('setResultsPerPage', perPage);\n}\n\nexport function setURLOptions (context, options) {\n  context.commit('setPagination', parseInt(options.page || 1));\n  context.commit('setFilterType', options.filter);\n  context.commit('setOrder', { order: options.order, direction: options.order_direction });\n  context.dispatch('fetch');\n}\n\nexport function updateVisualization (context, visualizationOptions) {\n  context.commit('maps/updateVisualization', visualizationOptions, { root: true });\n  context.commit('datasets/updateVisualization', visualizationOptions, { root: true });\n  context.commit('recentContent/updateVisualization', visualizationOptions, { root: true });\n  context.commit('search/updateVisualization', visualizationOptions, { root: true });\n}\n","import Vue from 'vue';\nimport Vuex from 'vuex';\nimport CartoNode from 'carto-node';\n\n// Store Modules\nimport user from './modules/user';\nimport config from './modules/config';\nimport maps from './modules/maps';\nimport datasets from './modules/data/datasets';\nimport catalog from './modules/data/catalog';\nimport search from './modules/search';\nimport notifications from './modules/notifications';\nimport recentContent from './modules/recent-content';\nimport oAuthApps from './modules/apps/oAuth';\nimport connectedApps from './modules/apps/connected';\n\nVue.use(Vuex);\n\nconst storeOptions = {\n  state: {\n    client: new CartoNode.AuthenticatedClient()\n  },\n  getters: {},\n  modules: {\n    config,\n    user,\n    maps,\n    datasets,\n    catalog,\n    search,\n    notifications,\n    recentContent,\n    oAuthApps,\n    connectedApps\n  }\n};\n\nexport default new Vuex.Store(storeOptions);\n","import * as AppsMutations from '../../../mutations/apps';\nimport * as AppsActions from '../../../actions/apps';\n\nconst connectedApps = {\n  namespaced: true,\n  state: {\n    isFetching: false,\n    isErrored: false,\n    error: [],\n    list: {}\n  },\n  computed: {},\n  getters: {},\n  mutations: {\n    setApps: AppsMutations.setApps,\n    setRequestError: AppsMutations.setRequestError,\n    setFetchingState: AppsMutations.setFetchingState\n  },\n  actions: {\n    fetch: AppsActions.fetch('getConnectedApps'),\n\n    revoke (context, app) {\n      const { api_key: apiKey } = context.rootState.user;\n\n      return new Promise((resolve, reject) => {\n        context.rootState.client.revokeOAuthApp(apiKey, app, function (err, _, data) {\n          if (err) {\n            return reject(data.responseJSON.errors);\n          }\n          resolve();\n        });\n      });\n    }\n  }\n};\n\nexport default connectedApps;\n","import * as AppsMutations from '../../../mutations/apps';\nimport * as AppsActions from '../../../actions/apps';\n\nconst oAuthApps = {\n  namespaced: true,\n  state: {\n    isFetching: false,\n    isErrored: false,\n    error: [],\n    list: {}\n  },\n  computed: {},\n  getters: {},\n  mutations: {\n    setApps: AppsMutations.setApps,\n    addApp: AppsMutations.addApp,\n    setFetchingState: AppsMutations.setFetchingState,\n    setRequestError: AppsMutations.setRequestError,\n    updateOAuthApp: AppsMutations.updateOAuthApp\n  },\n  actions: {\n    fetch: AppsActions.fetch('getOAuthApps'),\n    create: AppsActions.createOAuth,\n    update: AppsActions.updateOAuth,\n    setApps: AppsMutations.setApps,\n    regenerateCredentials: AppsActions.regenerateCredentials,\n\n    delete (context, app) {\n      const { api_key: apiKey } = context.rootState.user;\n\n      return new Promise((resolve, reject) => {\n        context.rootState.client.deleteApp(apiKey, app, function (err, _, data) {\n          if (err) {\n            return reject(data.responseJSON.errors);\n          }\n          resolve();\n        });\n      });\n    }\n  }\n};\n\nexport default oAuthApps;\n","import getCARTOData from 'new-dashboard/store/utils/getCARTOData';\n\n// Data coming from Static Page Loading,\n// which requests user and config data from\n// /me API endpoint.\nconst CARTOData = getCARTOData();\nconst CARTOUserData = CARTOData.user_data;\n\nconst config = {\n  namespaced: true,\n  state: {\n    ...CARTOData.config,\n    base_url: CARTOUserData.base_url,\n    default_fallback_basemap: CARTOData.default_fallback_basemap,\n    isFirstTimeViewingDashboard: CARTOData.is_first_time_viewing_dashboard,\n    url_prefix: CARTOUserData.base_url,\n    plan_url: CARTOData.plan_url\n  },\n  getters: {},\n  mutations: {},\n  actions: {}\n};\n\nexport default config;\n","import * as CatalogActions from '../../../actions/catalog';\nimport * as CatalogMutations from '../../../mutations/catalog';\n\nconst DEFAULT_VALUES = {\n  order: '',\n  orderDirection: ''\n};\n\nconst catalog = {\n  namespaced: true,\n  state: {\n    isFetching: false,\n    isErrored: false,\n    error: [],\n    list: [],\n    categories: [],\n    countries: [],\n    page: 1,\n    numPages: 1,\n    resultsPerPage: 12,\n    order: DEFAULT_VALUES.order,\n    orderDirection: DEFAULT_VALUES.orderDirection\n  },\n  computed: {},\n  getters: {},\n  mutations: {\n    setDatasets: CatalogMutations.setDatasets,\n    setCategories: CatalogMutations.setCategories,\n    setCountries: CatalogMutations.setCountries,\n    setFetchingState: CatalogMutations.setFetchingState,\n    setRequestError: CatalogMutations.setRequestError,\n    setPagination: CatalogMutations.setPagination,\n    setResultsPerPage: CatalogMutations.setResultsPerPage,\n    setOrder: CatalogMutations.setOrder(DEFAULT_VALUES),\n    orderDatasets: CatalogMutations.orderDatasets\n  },\n  actions: {\n    setURLOptions: CatalogActions.setURLOptions,\n    order: CatalogActions.order,\n    fetchCountries: CatalogActions.fetchCountries,\n    fetchDatasets: CatalogActions.fetchDatasets,\n    clearList: CatalogActions.clearList,\n    fetchCategories: CatalogActions.fetchCategories,\n    requestDataset: CatalogActions.requestDataset\n  }\n};\n\nexport default catalog;\n","import Filters from 'new-dashboard/core/configuration/filters';\n\nimport * as VisualizationActions from '../../../actions/visualizations';\nimport * as VisualizationMutations from '../../../mutations/visualizations';\n\nconst DEFAULT_VALUES = {\n  filter: 'mine',\n  order: 'favorited,updated_at',\n  orderDirection: 'desc,desc'\n};\n\nconst datasets = {\n  namespaced: true,\n  state: {\n    isFetching: false,\n    isFiltered: false,\n    isErrored: false,\n    error: {},\n    filterType: DEFAULT_VALUES.filter,\n    order: DEFAULT_VALUES.order,\n    orderDirection: DEFAULT_VALUES.orderDirection,\n    list: {},\n    metadata: {},\n    page: 1,\n    numPages: 1,\n    resultsPerPage: 1\n  },\n  mutations: {\n    setFetchingState: VisualizationMutations.setFetchingState,\n    setFilterType: VisualizationMutations.setFilterType,\n    setOrder: VisualizationMutations.setOrder(DEFAULT_VALUES),\n    setPagination: VisualizationMutations.setPagination,\n    setResultsPerPage: VisualizationMutations.setResultsPerPage,\n    setRequestError: VisualizationMutations.setRequestError,\n    setVisualizations: VisualizationMutations.setVisualizations,\n    updateNumberLikes: VisualizationMutations.updateNumberLikes,\n    updateVisualization: VisualizationMutations.updateVisualization\n  },\n  actions: {\n    deleteLike: VisualizationActions.deleteLike,\n    filter: VisualizationActions.filter,\n    like: VisualizationActions.like,\n    order: VisualizationActions.order,\n    resetFilters: VisualizationActions.resetFilters(DEFAULT_VALUES),\n    setResultsPerPage: VisualizationActions.setResultsPerPage,\n    setURLOptions: VisualizationActions.setURLOptions,\n    updateVisualization: VisualizationActions.updateVisualization,\n\n    fetch (context) {\n      const params = {\n        ...Filters[context.state.filterType],\n        types: 'table',\n        page: context.state.page,\n        order: context.state.order,\n        order_direction: context.state.orderDirection,\n        per_page: context.state.resultsPerPage,\n        with_dependent_visualizations: 10\n      };\n\n      VisualizationActions.fetchVisualizations(context, params);\n    }\n  }\n};\n\nexport default datasets;\n","import CartoNode from 'carto-node';\nimport toObject from 'new-dashboard/utils/to-object';\nimport { defaultParams as filtersDefaultParams } from 'new-dashboard/core/configuration/filters';\n\nconst client = new CartoNode.AuthenticatedClient();\n\nconst featuredFavoritedMaps = {\n  namespaced: true,\n  state: {\n    isFetching: false,\n    isFiltered: false,\n    isErrored: false,\n    error: {},\n    list: {},\n    metadata: {},\n    order: 'updated_at',\n    params: {\n      per_page: 2,\n      only_liked: true\n    }\n  },\n  getters: {},\n  mutations: {\n    setRequestError (state, error) {\n      state.isFetching = false;\n      state.isErrored = true;\n      state.error = error;\n    },\n\n    setFeaturedFavoritedMaps (state, maps) {\n      state.list = toObject(maps.visualizations, 'id');\n      state.metadata = {\n        total_entries: maps.total_entries,\n        total_likes: maps.total_likes,\n        total_shared: maps.total_shared,\n        total_user_entries: maps.total_user_entries\n      };\n      state.isFetching = false;\n    },\n\n    setFetchingState (state) {\n      state.isFetching = true;\n      state.isErrored = false;\n      state.error = {};\n    }\n  },\n  actions: {\n    fetchMaps (context) {\n      const favoritedParams = {\n        ...filtersDefaultParams,\n        ...context.state.params,\n        order: context.state.order\n      };\n\n      context.commit('setFetchingState');\n\n      client.getVisualization('',\n        favoritedParams,\n        function (err, _, data) {\n          if (err) {\n            context.commit('setRequestError', err);\n            return;\n          }\n\n          context.commit('setFeaturedFavoritedMaps', data);\n        }\n      );\n    }\n  }\n};\n\nexport default featuredFavoritedMaps;\n","\nimport featuredFavoritedMaps from 'new-dashboard/store/modules/maps/featured-favorited-maps';\nimport Filters from 'new-dashboard/core/configuration/filters';\n\nimport * as VisualizationActions from '../../actions/visualizations';\nimport * as VisualizationMutations from '../../mutations/visualizations';\n\nconst DEFAULT_VALUES = {\n  filter: 'mine',\n  order: 'favorited,updated_at',\n  orderDirection: 'desc,desc'\n};\n\nconst maps = {\n  namespaced: true,\n  modules: {\n    featuredFavoritedMaps\n  },\n  state: {\n    isFetching: false,\n    isFiltered: false,\n    isErrored: false,\n    error: {},\n    filterType: DEFAULT_VALUES.filter,\n    order: DEFAULT_VALUES.order,\n    orderDirection: DEFAULT_VALUES.orderDirection,\n    list: {},\n    metadata: {},\n    page: 1,\n    numPages: 1,\n    resultsPerPage: 12\n  },\n  getters: {},\n  mutations: {\n    setFetchingState: VisualizationMutations.setFetchingState,\n    setFilterType: VisualizationMutations.setFilterType,\n    setOrder: VisualizationMutations.setOrder(DEFAULT_VALUES),\n    setPagination: VisualizationMutations.setPagination,\n    setResultsPerPage: VisualizationMutations.setResultsPerPage,\n    setRequestError: VisualizationMutations.setRequestError,\n    setVisualizations: VisualizationMutations.setVisualizations,\n    updateNumberLikes: VisualizationMutations.updateNumberLikes,\n    updateVisualization: VisualizationMutations.updateVisualization\n  },\n  actions: {\n    deleteLike: VisualizationActions.deleteLike,\n    filter: VisualizationActions.filter,\n    like: VisualizationActions.like,\n    order: VisualizationActions.order,\n    resetFilters: VisualizationActions.resetFilters(DEFAULT_VALUES),\n    setResultsPerPage: VisualizationActions.setResultsPerPage,\n    setURLOptions: VisualizationActions.setURLOptions,\n    updateVisualization: VisualizationActions.updateVisualization,\n\n    fetch (context) {\n      const params = {\n        ...Filters[context.state.filterType],\n        types: 'derived',\n        page: context.state.page,\n        order: context.state.order,\n        order_direction: context.state.orderDirection,\n        per_page: context.state.resultsPerPage\n      };\n\n      VisualizationActions.fetchVisualizations(context, params);\n    }\n  }\n};\n\nexport default maps;\n","const notifications = {\n  namespaced: true,\n  state: {\n    isFetching: false,\n    isErrored: false,\n    error: {},\n    notifications: []\n  },\n  computed: {},\n  getters: {},\n  mutations: {\n    setNotifications (state, notifications) {\n      state.notifications = notifications;\n      state.isFetching = false;\n      state.isErrored = false;\n      state.error = [];\n    },\n\n    setRequestError (state, error) {\n      state.isFetching = false;\n      state.isErrored = true;\n      state.error = error;\n      state.notifications = [];\n    },\n\n    setFetchingState (state) {\n      state.isFetching = true;\n      state.isErrored = false;\n      state.error = [];\n      state.notifications = [];\n    }\n  },\n  actions: {\n    fetchNotifications (context, options) {\n      context.commit('setFetchingState');\n      context.rootState.client.getConfig(function (err, _, data) {\n        if (err) {\n          context.commit('setRequestError', err);\n          return;\n        }\n\n        context.commit('setNotifications', data.unfiltered_organization_notifications);\n        context.dispatch('markNotificationsAsRead', options);\n      });\n    },\n    markNotificationsAsRead (context, options) {\n      const nowString = new Date().toISOString();\n      context.state.notifications.forEach(notification => {\n        const { userId, apiKey } = options;\n        if (!notification.read_at) {\n          const notificationCopy = { ...notification, read_at: nowString };\n          context.rootState.client.updateNotification(userId, apiKey, notificationCopy, () => {});\n        }\n      });\n    }\n  }\n};\n\nexport default notifications;\n","import { defaultParams as filtersDefaultParams } from 'new-dashboard/core/configuration/filters';\nimport toObject from 'new-dashboard/utils/to-object';\n\nimport * as VisualizationActions from '../../actions/visualizations';\nimport * as VisualizationMutations from '../../mutations/visualizations';\n\nconst recentContent = {\n  namespaced: true,\n  state: {\n    isFetching: false,\n    isErrored: false,\n    error: {},\n    list: {},\n    metadata: {\n      total_entries: 0\n    }\n  },\n  getters: {\n    hasRecentContent (state) {\n      return state.metadata.total_entries > 0;\n    }\n  },\n  mutations: {\n    setFetchingState: VisualizationMutations.setFetchingState,\n    setRequestError: VisualizationMutations.setRequestError,\n    updateNumberLikes: VisualizationMutations.updateNumberLikes,\n    updateVisualization: VisualizationMutations.updateVisualization,\n\n    setRecentContent (state, recentContent) {\n      state.list = toObject(recentContent.visualizations, 'id');\n      state.metadata = { total_entries: recentContent.total_entries };\n      state.isFetching = false;\n    }\n  },\n  actions: {\n    like: VisualizationActions.like,\n    deleteLike: VisualizationActions.deleteLike,\n    updateVisualization: VisualizationActions.updateVisualization,\n\n    fetch (context) {\n      context.commit('setFetchingState');\n\n      const params = {\n        ...filtersDefaultParams,\n        order: 'updated_at',\n        order_direction: 'desc',\n        types: 'table,derived',\n        per_page: 3,\n        page: 1\n      };\n\n      context.rootState.client.getVisualization('',\n        params,\n        function (err, _, data) {\n          if (err) {\n            context.commit('setRequestError', err);\n            return;\n          }\n\n          context.commit('setRecentContent', data);\n        }\n      );\n    }\n  }\n};\n\nexport default recentContent;\n","import toObject from 'new-dashboard/utils/to-object';\nimport * as VisualizationActions from '../../actions/visualizations';\n\nconst search = {\n  namespaced: true,\n  state: {\n    searchTerm: '',\n    tag: '',\n    resultsPerPage: 6,\n    maps: {\n      isFetching: false,\n      isErrored: false,\n      results: {},\n      error: {},\n      page: 1,\n      numPages: 1,\n      numResults: 0\n    },\n    datasets: {\n      isFetching: false,\n      isErrored: false,\n      results: {},\n      error: {},\n      page: 1,\n      numPages: 1,\n      numResults: 0\n    },\n    tags: {\n      isFetching: false,\n      isErrored: false,\n      results: [],\n      error: {},\n      page: 1,\n      numPages: 1,\n      numResults: 0\n    }\n  },\n  getters: {\n    requestParameters (state) {\n      const parameters = {\n        per_page: state.resultsPerPage,\n        shared: 'yes',\n        exclude_shared: false\n      };\n\n      if (state.searchTerm) {\n        parameters.q = state.searchTerm;\n      }\n\n      if (state.tag) {\n        parameters.tags = state.tag;\n      }\n\n      return parameters;\n    }\n  },\n  mutations: {\n    updatePage (state, { section, page }) {\n      state[section].page = page;\n    },\n    updateSearchTerm (state, { query, tag }) {\n      state.searchTerm = query;\n      state.tag = tag;\n    },\n    setFetchingState (state, section) {\n      state[section].isFetching = true;\n    },\n    setRequestError (state, { requestType, error }) {\n      state[requestType].error = error;\n    },\n    setMaps (state, maps) {\n      state.maps.results = toObject(maps.visualizations, 'id');\n      state.maps.numResults = maps.total_entries;\n      state.maps.numPages = Math.ceil(maps.total_entries / state.resultsPerPage);\n\n      state.maps.isFetching = false;\n    },\n    setDatasets (state, datasets) {\n      state.datasets.results = toObject(datasets.visualizations, 'id');\n      state.datasets.numResults = datasets.total_entries;\n      state.datasets.numPages = Math.ceil(datasets.total_entries / state.resultsPerPage);\n\n      state.datasets.isFetching = false;\n    },\n    setTags (state, tags) {\n      state.tags.results = tags.result;\n      state.tags.numResults = tags.total;\n      state.tags.numPages = Math.ceil(tags.total / state.resultsPerPage);\n\n      state.tags.isFetching = false;\n    },\n    updateNumberLikes () {\n      // NOOP. This method avoids action not finding mutation.\n    },\n    updateVisualization (state, { visualizationId, visualizationAttributes }) {\n      const visualization = state.maps.results[visualizationId] || state.datasets.results[visualizationId];\n\n      if (visualization) {\n        Object.assign(visualization, visualizationAttributes);\n      }\n    },\n    resetState (state) {\n      state.searchTerm = '';\n      state.tag = '';\n\n      state.maps = {\n        isFetching: false,\n        isErrored: false,\n        results: {},\n        error: {},\n        page: 1,\n        numPages: 1,\n        numResults: 0\n      };\n\n      state.datasets = {\n        isFetching: false,\n        isErrored: false,\n        results: {},\n        error: {},\n        page: 1,\n        numPages: 1,\n        numResults: 0\n      };\n\n      state.tags = {\n        isFetching: false,\n        isErrored: false,\n        results: [],\n        error: {},\n        page: 1,\n        numPages: 1,\n        numResults: 0\n      };\n    }\n  },\n  actions: {\n    deleteLike: VisualizationActions.deleteLike,\n    like: VisualizationActions.like,\n    doSearch (context, searchParameters) {\n      context.commit('updateSearchTerm', searchParameters);\n      context.commit('setFetchingState', 'maps');\n      context.commit('setFetchingState', 'datasets');\n\n      context.dispatch('fetchMaps', context.getters.requestParameters);\n      context.dispatch('fetchDatasets', context.getters.requestParameters);\n\n      if (searchParameters.query) {\n        context.dispatch('fetchTags', context.getters.requestParameters);\n        context.commit('setFetchingState', 'tags');\n      }\n    },\n    changeSectionPage (context, pageOptions) {\n      context.commit('setFetchingState', pageOptions.section);\n\n      const sectionCapitalized = pageOptions.section[0].toUpperCase() + pageOptions.section.substr(1);\n      context.commit('updatePage', pageOptions);\n\n      context.dispatch(`fetch${sectionCapitalized}`, context.getters.requestParameters);\n    },\n    fetchMaps (context, parameters) {\n      context.rootState.client.getVisualization('',\n        { ...parameters,\n          type: 'derived',\n          page: context.state.maps.page },\n        function (error, _, data) {\n          if (error) {\n            return context.commit('setRequestError', { requestType: 'maps', error });\n          }\n\n          context.commit('setMaps', data);\n        }\n      );\n    },\n    fetchDatasets (context, parameters) {\n      context.rootState.client.getVisualization('',\n        { ...parameters,\n          type: 'table',\n          page: context.state.datasets.page,\n          with_dependent_visualizations: 10\n        },\n        function (error, _, data) {\n          if (error) {\n            return context.commit('setRequestError', { requestType: 'datasets', error });\n          }\n\n          context.commit('setDatasets', data);\n        }\n      );\n    },\n    fetchTags (context, parameters) {\n      context.rootState.client.getTags(\n        { ...parameters,\n          types: 'table,derived',\n          page: context.state.tags.page,\n          include_shared: true\n        },\n        function (error, _, data) {\n          if (error) {\n            return context.commit('setRequestError', { requestType: 'tags', error });\n          }\n\n          context.commit('setTags', data);\n        }\n      );\n    },\n    resetState (context) {\n      context.commit('resetState');\n    }\n  }\n};\n\nexport default search;\n","export function canCreateDatasets (state) {\n  if (!state.remaining_byte_quota || state.remaining_byte_quota <= 0 || isOutOfDatasetsQuota(state)) {\n    return false;\n  }\n\n  return hasCreateDatasetsFeature(state);\n}\n\nexport function hasCreateDatasetsFeature (state) {\n  return isBuilder(state);\n}\n\nexport function isBuilder (state) {\n  return !isViewer(state);\n}\n\nexport function isViewer (state) {\n  return state.viewer === true;\n}\n\nexport function hasEngine (state) {\n  return state.actions.engine_enabled === true;\n}\n\nexport function isNotificationVisible (state) {\n  return state.notification && state.showNotification;\n}\n\nexport function userNotification (state) {\n  return state.notification ? state.notification : null;\n}\n\nexport function getPublicMapsCount (state) {\n  return (state.link_privacy_map_count + state.password_privacy_map_count + state.public_privacy_map_count) || 0;\n}\n\nexport function getPublicMapsQuota (state) {\n  return state.public_map_quota;\n}\n\nexport function isOutOfPublicMapsQuota (state) {\n  return getPublicMapsQuota(state) && getPublicMapsCount(state) >= getPublicMapsQuota(state);\n}\n\nexport function getDatasetsCount (state) {\n  return state.table_count;\n}\n\nexport function getDatasetsQuota (state) {\n  return state.table_quota;\n}\n\nexport function isOutOfDatasetsQuota (state) {\n  return getDatasetsQuota(state) && getDatasetsCount(state) >= getDatasetsQuota(state);\n}\n\nexport function isOrganizationUser (state) {\n  return Boolean(state.organization);\n}\n","import CartoNode from 'carto-node';\nimport getCARTOData from 'new-dashboard/store/utils/getCARTOData';\n\nimport * as getters from './getters';\n\nconst client = new CartoNode.AuthenticatedClient();\n\n// Data coming from Static Page Loading,\n// which requests user and config data from\n// /me API endpoint.\nconst CARTOData = getCARTOData();\n\nconst user = {\n  namespaced: true,\n  state: {\n    ...CARTOData.user_data,\n    organizationNotifications: CARTOData.organization_notifications || [],\n    showNotification: true\n  },\n  getters: {\n    canCreateDatasets: getters.canCreateDatasets,\n    isViewer: getters.isViewer,\n    hasEngine: getters.hasEngine,\n    userNotification: getters.userNotification,\n    isNotificationVisible: getters.isNotificationVisible,\n    publicMapsCount: getters.getPublicMapsCount,\n    publicMapsQuota: getters.getPublicMapsQuota,\n    isOutOfPublicMapsQuota: getters.isOutOfPublicMapsQuota,\n    datasetsCount: getters.getDatasetsCount,\n    datasetsQuota: getters.getDatasetsQuota,\n    isOutOfDatasetsQuota: getters.isOutOfDatasetsQuota,\n    isOrganizationUser: getters.isOrganizationUser\n  },\n  mutations: {\n    setUserData (state, userData) {\n      Object.assign(state, userData);\n    },\n    setOrganizationNotifications (state, organizationNotifications) {\n      state.organizationNotifications = organizationNotifications;\n    },\n    setShowNotification (state, showNotification) {\n      state.showNotification = showNotification;\n    },\n    updateTableCount (state, newTableCount) {\n      state.table_count = newTableCount;\n    }\n  },\n  actions: {\n    updateData (context) {\n      client.getConfig(function (err, _, data) {\n        if (err) {\n          return;\n        }\n\n        context.commit('setUserData', data.user_data);\n      });\n    },\n    resetOrganizationNotifications (context) {\n      context.commit('setOrganizationNotifications', []);\n    },\n    hideUserNotification (context) {\n      context.commit('setShowNotification', false);\n    },\n    updateTableCount (context, newTableCount) {\n      context.commit('updateTableCount', newTableCount);\n    }\n  }\n};\n\nexport default user;\n","import toObject from 'new-dashboard/utils/to-object';\n\nexport function setApps (state, apps) {\n  state.list = toObject(apps, 'id');\n  state.isFetching = false;\n  state.isErrored = false;\n  state.error = [];\n}\n\nexport function addApp (state, app) {\n  state.list = { ...state.list, [app.id]: app };\n}\n\nexport function updateOAuthApp (state, app) {\n  const isOAuthAppPresent = state.list.hasOwnProperty(app.id);\n\n  if (isOAuthAppPresent) {\n    Object.assign(state.list[app.id], app);\n  }\n}\n\nexport function setRequestError (state, error) {\n  state.isFetching = false;\n  state.isErrored = true;\n  state.error = error;\n  state.list = {};\n}\n\nexport function setFetchingState (state) {\n  state.isFetching = true;\n  state.isErrored = false;\n  state.error = [];\n  state.list = {};\n}\n","export function setCategories (state, data) {\n  state.categories = data.map(c => c.category);\n  state.isFetching = false;\n  state.isErrored = false;\n  state.error = [];\n}\n\nexport function setCountries (state, data) {\n  state.countries = data.map(c => c.country);\n  state.isFetching = false;\n  state.isErrored = false;\n  state.error = [];\n}\n\nexport function setDatasets (state, datasets) {\n  state.list = datasets;\n  state.isFetching = false;\n  state.isErrored = false;\n  state.error = [];\n  state.numResults = datasets.length;\n}\n\nexport function setRequestError (state, error) {\n  state.isFetching = false;\n  state.isErrored = true;\n  state.error = error;\n  state.list = {};\n  state.numResults = 0;\n}\n\nexport function setFetchingState (state) {\n  state.isFetching = true;\n  state.isErrored = false;\n  state.error = [];\n  state.list = {};\n}\n\nexport function setPagination (state, page = 1) {\n  state.page = page;\n  state.numPages = Math.ceil(state.numResults / state.resultsPerPage) || 1;\n}\n\nexport function setResultsPerPage (state, resultsPerPage = 12) {\n  state.resultsPerPage = resultsPerPage;\n}\n\nexport function setOrder (DEFAULT_VALUES) {\n  return function (state, orderOptions) {\n    state.order = orderOptions.order || DEFAULT_VALUES.order;\n    state.orderDirection = orderOptions.direction || DEFAULT_VALUES.orderDirection;\n  };\n}\n\nexport function orderDatasets (state) {\n  const orderAsc = (list, order) => {\n    list.sort((a, b) => (a[order] > b[order]) ? 1 : -1);\n  };\n  const orderDesc = (list, order) => {\n    list.sort((a, b) => (a[order] < b[order]) ? 1 : -1);\n  };\n\n  const orderByDirection = {\n    'asc': () => orderAsc(state.list, state.order),\n    'desc': () => orderDesc(state.list, state.order)\n  };\n  return orderByDirection[state.orderDirection]();\n}\n","import toObject from 'new-dashboard/utils/to-object';\n\nexport function setFetchingState (state) {\n  state.isFetching = true;\n  state.isErrored = false;\n  state.error = {};\n}\n\nexport function setFilterType (state, filterType = 'mine') {\n  state.filterType = filterType;\n}\n\nexport function setPagination (state, page = 1) {\n  state.page = page;\n  state.numPages = Math.ceil(state.metadata.total_entries / state.resultsPerPage) || 1;\n}\n\nexport function setOrder (DEFAULT_VALUES) {\n  return function (state, orderOptions) {\n    state.order = orderOptions.order || DEFAULT_VALUES.order;\n    state.orderDirection = orderOptions.direction || DEFAULT_VALUES.orderDirection;\n  };\n}\n\nexport function setResultsPerPage (state, resultsPerPage = 12) {\n  state.resultsPerPage = resultsPerPage;\n}\n\nexport function setRequestError (state, error) {\n  state.isFetching = false;\n  state.isErrored = true;\n  state.error = error;\n}\n\nexport function setVisualizations (state, visualizationsData) {\n  state.list = toObject(visualizationsData.visualizations, 'id');\n  state.metadata = {\n    total_entries: visualizationsData.total_entries,\n    total_likes: visualizationsData.total_likes,\n    total_shared: visualizationsData.total_shared,\n    total_locked: visualizationsData.total_locked,\n    total_user_entries: visualizationsData.total_user_entries\n  };\n\n  state.isFetching = false;\n}\n\nexport function updateNumberLikes (state, {visualizationAttributes}) {\n  state.metadata.total_likes += visualizationAttributes.liked ? 1 : -1;\n}\n\nexport function updateVisualization (state, {visualizationId, visualizationAttributes}) {\n  const isVisualizationPresent = state.list.hasOwnProperty(visualizationId);\n\n  if (isVisualizationPresent) {\n    Object.assign(state.list[visualizationId], visualizationAttributes);\n  }\n}\n","export default function getCARTOData () {\n  if (window.CartoConfig) {\n    return window.CartoConfig.data;\n  }\n\n  return {\n    user_data: window.user_data,\n    notification: window.user_data.notification,\n    organization_notifications: window.organization_notifications || []\n  };\n}\n","// Copied from https://stackoverflow.com/questions/38345937/object-assign-vs-extend/42740894#42740894\n\nfunction isObject (item) {\n  return (item && typeof item === 'object' && !Array.isArray(item));\n}\n\nexport default function deepObjectExtend (target, ...sources) {\n  if (!sources.length) return target;\n  const source = sources.shift();\n\n  if (isObject(target) && isObject(source)) {\n    for (const key in source) {\n      if (isObject(source[key])) {\n        if (!target[key]) Object.assign(target, { [key]: {} });\n        deepObjectExtend(target[key], source[key]);\n      } else {\n        Object.assign(target, { [key]: source[key] });\n      }\n    }\n  }\n\n  return deepObjectExtend(target, ...sources);\n}\n","export default function storageAvailable (type) {\n  try {\n    var storage = window[type];\n    var x = '__storage_test__';\n\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return true;\n  } catch (e) {\n    return e instanceof DOMException && (\n      // everything except Firefox\n      e.code === 22 ||\n      // Firefox\n      e.code === 1014 ||\n      // test name field too, because code might not be present\n      // everything except Firefox\n      e.name === 'QuotaExceededError' ||\n      // Firefox\n      e.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&\n      // acknowledge QuotaExceededError only if there's something already stored\n      storage.length !== 0;\n  }\n}\n","const toObject = function toObject (array, property) {\n  return array.reduce((finalObject, currentElement) => {\n    finalObject[currentElement[property]] = currentElement;\n    return finalObject;\n  }, {});\n};\n\nexport default toObject;\n","var $ = require('jquery');\nvar _ = require('underscore');\nvar Backbone = require('backbone');\n\n/**\n * Base Model for all CartoDB model.\n * DO NOT USE Backbone.Model directly\n */\nvar Model = Backbone.Model.extend({\n\n  initialize: function (options) {\n    _.bindAll(this, 'fetch', 'save', 'retrigger');\n    return Backbone.Model.prototype.initialize.call(this, options);\n  },\n  /**\n  * We are redefining fetch to be able to trigger an event when the ajax call ends, no matter if there's\n  * a change in the data or not. Why don't backbone does this by default? ahh, my friend, who knows.\n  * @method fetch\n  * @param args {Object}\n  */\n  fetch: function (args) {\n    var self = this;\n    // var date = new Date();\n    this.trigger('loadModelStarted');\n    $.when(Backbone.Model.prototype.fetch.call(this, args)).done(function (ev) {\n      self.trigger('loadModelCompleted', ev, self);\n      // var dateComplete = new Date()\n      // console.log('completed in '+(dateComplete - date));\n    }).fail(function (ev) {\n      self.trigger('loadModelFailed', ev, self);\n    });\n  },\n  /**\n  * Changes the attribute used as Id\n  * @method setIdAttribute\n  * @param attr {String}\n  */\n  setIdAttribute: function (attr) {\n    this.idAttribute = attr;\n  },\n  /**\n  * Listen for an event on another object and triggers on itself, with the same name or a new one\n  * @method retrigger\n  * @param ev {String} event who triggers the action\n  * @param obj {Object} object where the event happens\n  * @param obj {Object} [optional] name of the retriggered event\n  * @todo [xabel]: This method is repeated here and in the base view definition. There's should be a way to make it unique\n  */\n  retrigger: function (ev, obj, retrigEvent) {\n    if (!retrigEvent) {\n      retrigEvent = ev;\n    }\n    var self = this;\n    obj.bind && obj.bind(ev, function () {\n      self.trigger(retrigEvent);\n    }, self);\n  },\n\n  /**\n   * We need to override backbone save method to be able to introduce new kind of triggers that\n   * for some reason are not present in the original library. Because you know, it would be nice\n   * to be able to differenciate \"a model has been updated\" of \"a model is being saved\".\n   * TODO: remove jquery from here\n   * @param  {object} opt1\n   * @param  {object} opt2\n   * @return {$.Deferred}\n   */\n  save: function (opt1, opt2) {\n    var self = this;\n    if (!opt2 || !opt2.silent) this.trigger('saving');\n    var promise = Backbone.Model.prototype.save.apply(this, arguments);\n    $.when(promise).done(function () {\n      if (!opt2 || !opt2.silent) self.trigger('saved');\n    }).fail(function () {\n      if (!opt2 || !opt2.silent) self.trigger('errorSaving');\n    });\n    return promise;\n  }\n});\n\nmodule.exports = Model;\n","var _ = require('underscore');\nvar Backbone = require('backbone');\n\n/**\n * NOTE! Migrated as-is from https://github.com/CartoDB/cartodb.js/blob/470399abb12b40d5476ab6bbfd792d95aa819f50/src/core/view.js 2016-06-03\n * Base View for all CartoDB views.\n * DO NOT USE Backbone.View directly\n */\nvar View = Backbone.View.extend({\n  classLabel: 'cdb.core.View',\n\n  constructor: function (options) {\n    this.options = _.defaults(options, this.options);\n    this._models = [];\n    this._subviews = {};\n    Backbone.View.call(this, options);\n    View.viewCount++;\n    View.views[this.cid] = this;\n    this._created_at = new Date();\n    if (typeof __IN_DEV__ !== 'undefined' && __IN_DEV__ && this.module) { // eslint-disable-line\n      this.$el.attr('data-module', this.module);\n    }\n  },\n\n  add_related_model: function (m) {\n    if (!m) throw new Error('added non valid model');\n    this._models.push(m);\n  },\n\n  addView: function (v) {\n    this._subviews[v.cid] = v;\n    v._parent = this;\n  },\n\n  removeView: function (v) {\n    delete this._subviews[v.cid];\n  },\n\n  clearSubViews: function () {\n    _(this._subviews).each(function (v) {\n      v.clean();\n    });\n    this._subviews = {};\n  },\n\n  /**\n   * this methid clean removes the view\n   * and clean and events associated. call it when\n   * the view is not going to be used anymore\n   */\n  clean: function () {\n    this.trigger('clean');\n    this.clearSubViews();\n    // remove from parent\n    if (this._parent) {\n      this._parent.removeView(this);\n      this._parent = null;\n    }\n    this.remove();\n    this.allOff();\n    View.viewCount--;\n    delete View.views[this.cid];\n    return this;\n  },\n\n  /**\n   * Remove all event listeners on related models\n   */\n  allOff: function () {\n    this.off();\n\n    if (this.model && this.model.off) this.model.off(null, null, this);\n\n    var self = this;\n    _(this._models).each(function (m) {\n      m.off(null, null, self);\n    });\n    this._models = [];\n  },\n\n  show: function () {\n    this.$el.show();\n  },\n\n  hide: function () {\n    this.$el.hide();\n  },\n\n  /**\n  * Listen for an event on another object and triggers on itself, with the same name or a new one\n  * @method retrigger\n  * @param ev {String} event who triggers the action\n  * @param obj {Object} object where the event happens\n  * @param obj {Object} [optional] name of the retriggered event\n  */\n  retrigger: function (ev, obj, retrigEvent) {\n    if (!retrigEvent) {\n      retrigEvent = ev;\n    }\n    var self = this;\n    obj.bind && obj.bind(ev, function () {\n      self.trigger(retrigEvent);\n    }, self);\n    // add it as related model//object\n    this.add_related_model(obj);\n  },\n  /**\n  * Captures an event and prevents the default behaviour and stops it from bubbling\n  * @method killEvent\n  * @param event {Event}\n  */\n  killEvent: function (ev) {\n    if (ev && ev.preventDefault) {\n      ev.preventDefault();\n    }\n    if (ev && ev.stopPropagation) {\n      ev.stopPropagation();\n    }\n  },\n\n  /**\n  * Remove all the tipsy tooltips from the document\n  * @method cleanTooltips\n  */\n  cleanTooltips: function () {\n    this.$('.tipsy').remove();\n  }\n\n}, {\n  viewCount: 0,\n  views: {},\n\n  /**\n   * when a view with events is inherit and you want to add more events\n   * this helper can be used:\n   * var MyView = new core.View({\n   *  events: View.extendEvents({\n   *      'click': 'fn'\n   *  })\n   * })\n   */\n  extendEvents: function (newEvents) {\n    return function () {\n      return _.extend(newEvents, this.constructor.__super__.events);\n    };\n  },\n\n  /**\n   * search for views in a view and check if they are added as subviews\n   */\n  runChecker: function () {\n    _.each(View.views, function (view) {\n      _.each(view, function (prop, k) {\n        if (k !== '_parent' &&\n          view.hasOwnProperty(k) &&\n          prop instanceof View &&\n          view._subviews[prop.cid] === undefined) {\n          console.log('=========');\n          console.log('untracked view: ');\n          console.log(prop.el);\n          console.log('parent');\n          console.log(view.el);\n          console.log(' ');\n        }\n      });\n    });\n  }\n});\n\nmodule.exports = View;\n","/*! jQuery UI - v1.11.4 - 2015-03-11\n* http://jqueryui.com\n* Includes: core.js, widget.js, mouse.js, position.js, accordion.js, autocomplete.js, button.js, datepicker.js, dialog.js, draggable.js, droppable.js, effect.js, effect-blind.js, effect-bounce.js, effect-clip.js, effect-drop.js, effect-explode.js, effect-fade.js, effect-fold.js, effect-highlight.js, effect-puff.js, effect-pulsate.js, effect-scale.js, effect-shake.js, effect-size.js, effect-slide.js, effect-transfer.js, menu.js, progressbar.js, resizable.js, selectable.js, selectmenu.js, slider.js, sortable.js, spinner.js, tabs.js, tooltip.js\n* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */\n\n(function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine([ \"jquery\" ], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n}(function( $ ) {\n/*!\n * jQuery UI Core 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/category/ui-core/\n */\n\n\n// $.ui might exist from components with no dependencies, e.g., $.ui.position\n$.ui = $.ui || {};\n\n$.extend( $.ui, {\n\tversion: \"1.11.4\",\n\n\tkeyCode: {\n\t\tBACKSPACE: 8,\n\t\tCOMMA: 188,\n\t\tDELETE: 46,\n\t\tDOWN: 40,\n\t\tEND: 35,\n\t\tENTER: 13,\n\t\tESCAPE: 27,\n\t\tHOME: 36,\n\t\tLEFT: 37,\n\t\tPAGE_DOWN: 34,\n\t\tPAGE_UP: 33,\n\t\tPERIOD: 190,\n\t\tRIGHT: 39,\n\t\tSPACE: 32,\n\t\tTAB: 9,\n\t\tUP: 38\n\t}\n});\n\n// plugins\n$.fn.extend({\n\tscrollParent: function( includeHidden ) {\n\t\tvar position = this.css( \"position\" ),\n\t\t\texcludeStaticParent = position === \"absolute\",\n\t\t\toverflowRegex = includeHidden ? /(auto|scroll|hidden)/ : /(auto|scroll)/,\n\t\t\tscrollParent = this.parents().filter( function() {\n\t\t\t\tvar parent = $( this );\n\t\t\t\tif ( excludeStaticParent && parent.css( \"position\" ) === \"static\" ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn overflowRegex.test( parent.css( \"overflow\" ) + parent.css( \"overflow-y\" ) + parent.css( \"overflow-x\" ) );\n\t\t\t}).eq( 0 );\n\n\t\treturn position === \"fixed\" || !scrollParent.length ? $( this[ 0 ].ownerDocument || document ) : scrollParent;\n\t},\n\n\tuniqueId: (function() {\n\t\tvar uuid = 0;\n\n\t\treturn function() {\n\t\t\treturn this.each(function() {\n\t\t\t\tif ( !this.id ) {\n\t\t\t\t\tthis.id = \"ui-id-\" + ( ++uuid );\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t})(),\n\n\tremoveUniqueId: function() {\n\t\treturn this.each(function() {\n\t\t\tif ( /^ui-id-\\d+$/.test( this.id ) ) {\n\t\t\t\t$( this ).removeAttr( \"id\" );\n\t\t\t}\n\t\t});\n\t}\n});\n\n// selectors\nfunction focusable( element, isTabIndexNotNaN ) {\n\tvar map, mapName, img,\n\t\tnodeName = element.nodeName.toLowerCase();\n\tif ( \"area\" === nodeName ) {\n\t\tmap = element.parentNode;\n\t\tmapName = map.name;\n\t\tif ( !element.href || !mapName || map.nodeName.toLowerCase() !== \"map\" ) {\n\t\t\treturn false;\n\t\t}\n\t\timg = $( \"img[usemap='#\" + mapName + \"']\" )[ 0 ];\n\t\treturn !!img && visible( img );\n\t}\n\treturn ( /^(input|select|textarea|button|object)$/.test( nodeName ) ?\n\t\t!element.disabled :\n\t\t\"a\" === nodeName ?\n\t\t\telement.href || isTabIndexNotNaN :\n\t\t\tisTabIndexNotNaN) &&\n\t\t// the element and all of its ancestors must be visible\n\t\tvisible( element );\n}\n\nfunction visible( element ) {\n\treturn $.expr.filters.visible( element ) &&\n\t\t!$( element ).parents().addBack().filter(function() {\n\t\t\treturn $.css( this, \"visibility\" ) === \"hidden\";\n\t\t}).length;\n}\n\n$.extend( $.expr[ \":\" ], {\n\tdata: $.expr.createPseudo ?\n\t\t$.expr.createPseudo(function( dataName ) {\n\t\t\treturn function( elem ) {\n\t\t\t\treturn !!$.data( elem, dataName );\n\t\t\t};\n\t\t}) :\n\t\t// support: jQuery <1.8\n\t\tfunction( elem, i, match ) {\n\t\t\treturn !!$.data( elem, match[ 3 ] );\n\t\t},\n\n\tfocusable: function( element ) {\n\t\treturn focusable( element, !isNaN( $.attr( element, \"tabindex\" ) ) );\n\t},\n\n\ttabbable: function( element ) {\n\t\tvar tabIndex = $.attr( element, \"tabindex\" ),\n\t\t\tisTabIndexNaN = isNaN( tabIndex );\n\t\treturn ( isTabIndexNaN || tabIndex >= 0 ) && focusable( element, !isTabIndexNaN );\n\t}\n});\n\n// support: jQuery <1.8\nif ( !$( \"<a>\" ).outerWidth( 1 ).jquery ) {\n\t$.each( [ \"Width\", \"Height\" ], function( i, name ) {\n\t\tvar side = name === \"Width\" ? [ \"Left\", \"Right\" ] : [ \"Top\", \"Bottom\" ],\n\t\t\ttype = name.toLowerCase(),\n\t\t\torig = {\n\t\t\t\tinnerWidth: $.fn.innerWidth,\n\t\t\t\tinnerHeight: $.fn.innerHeight,\n\t\t\t\touterWidth: $.fn.outerWidth,\n\t\t\t\touterHeight: $.fn.outerHeight\n\t\t\t};\n\n\t\tfunction reduce( elem, size, border, margin ) {\n\t\t\t$.each( side, function() {\n\t\t\t\tsize -= parseFloat( $.css( elem, \"padding\" + this ) ) || 0;\n\t\t\t\tif ( border ) {\n\t\t\t\t\tsize -= parseFloat( $.css( elem, \"border\" + this + \"Width\" ) ) || 0;\n\t\t\t\t}\n\t\t\t\tif ( margin ) {\n\t\t\t\t\tsize -= parseFloat( $.css( elem, \"margin\" + this ) ) || 0;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn size;\n\t\t}\n\n\t\t$.fn[ \"inner\" + name ] = function( size ) {\n\t\t\tif ( size === undefined ) {\n\t\t\t\treturn orig[ \"inner\" + name ].call( this );\n\t\t\t}\n\n\t\t\treturn this.each(function() {\n\t\t\t\t$( this ).css( type, reduce( this, size ) + \"px\" );\n\t\t\t});\n\t\t};\n\n\t\t$.fn[ \"outer\" + name] = function( size, margin ) {\n\t\t\tif ( typeof size !== \"number\" ) {\n\t\t\t\treturn orig[ \"outer\" + name ].call( this, size );\n\t\t\t}\n\n\t\t\treturn this.each(function() {\n\t\t\t\t$( this).css( type, reduce( this, size, true, margin ) + \"px\" );\n\t\t\t});\n\t\t};\n\t});\n}\n\n// support: jQuery <1.8\nif ( !$.fn.addBack ) {\n\t$.fn.addBack = function( selector ) {\n\t\treturn this.add( selector == null ?\n\t\t\tthis.prevObject : this.prevObject.filter( selector )\n\t\t);\n\t};\n}\n\n// support: jQuery 1.6.1, 1.6.2 (http://bugs.jquery.com/ticket/9413)\nif ( $( \"<a>\" ).data( \"a-b\", \"a\" ).removeData( \"a-b\" ).data( \"a-b\" ) ) {\n\t$.fn.removeData = (function( removeData ) {\n\t\treturn function( key ) {\n\t\t\tif ( arguments.length ) {\n\t\t\t\treturn removeData.call( this, $.camelCase( key ) );\n\t\t\t} else {\n\t\t\t\treturn removeData.call( this );\n\t\t\t}\n\t\t};\n\t})( $.fn.removeData );\n}\n\n// deprecated\n$.ui.ie = !!/msie [\\w.]+/.exec( navigator.userAgent.toLowerCase() );\n\n$.fn.extend({\n\tfocus: (function( orig ) {\n\t\treturn function( delay, fn ) {\n\t\t\treturn typeof delay === \"number\" ?\n\t\t\t\tthis.each(function() {\n\t\t\t\t\tvar elem = this;\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t$( elem ).focus();\n\t\t\t\t\t\tif ( fn ) {\n\t\t\t\t\t\t\tfn.call( elem );\n\t\t\t\t\t\t}\n\t\t\t\t\t}, delay );\n\t\t\t\t}) :\n\t\t\t\torig.apply( this, arguments );\n\t\t};\n\t})( $.fn.focus ),\n\n\tdisableSelection: (function() {\n\t\tvar eventType = \"onselectstart\" in document.createElement( \"div\" ) ?\n\t\t\t\"selectstart\" :\n\t\t\t\"mousedown\";\n\n\t\treturn function() {\n\t\t\treturn this.bind( eventType + \".ui-disableSelection\", function( event ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t});\n\t\t};\n\t})(),\n\n\tenableSelection: function() {\n\t\treturn this.unbind( \".ui-disableSelection\" );\n\t},\n\n\tzIndex: function( zIndex ) {\n\t\tif ( zIndex !== undefined ) {\n\t\t\treturn this.css( \"zIndex\", zIndex );\n\t\t}\n\n\t\tif ( this.length ) {\n\t\t\tvar elem = $( this[ 0 ] ), position, value;\n\t\t\twhile ( elem.length && elem[ 0 ] !== document ) {\n\t\t\t\t// Ignore z-index if position is set to a value where z-index is ignored by the browser\n\t\t\t\t// This makes behavior of this function consistent across browsers\n\t\t\t\t// WebKit always returns auto if the element is positioned\n\t\t\t\tposition = elem.css( \"position\" );\n\t\t\t\tif ( position === \"absolute\" || position === \"relative\" || position === \"fixed\" ) {\n\t\t\t\t\t// IE returns 0 when zIndex is not specified\n\t\t\t\t\t// other browsers return a string\n\t\t\t\t\t// we ignore the case of nested elements with an explicit value of 0\n\t\t\t\t\t// <div style=\"z-index: -10;\"><div style=\"z-index: 0;\"></div></div>\n\t\t\t\t\tvalue = parseInt( elem.css( \"zIndex\" ), 10 );\n\t\t\t\t\tif ( !isNaN( value ) && value !== 0 ) {\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telem = elem.parent();\n\t\t\t}\n\t\t}\n\n\t\treturn 0;\n\t}\n});\n\n// $.ui.plugin is deprecated. Use $.widget() extensions instead.\n$.ui.plugin = {\n\tadd: function( module, option, set ) {\n\t\tvar i,\n\t\t\tproto = $.ui[ module ].prototype;\n\t\tfor ( i in set ) {\n\t\t\tproto.plugins[ i ] = proto.plugins[ i ] || [];\n\t\t\tproto.plugins[ i ].push( [ option, set[ i ] ] );\n\t\t}\n\t},\n\tcall: function( instance, name, args, allowDisconnected ) {\n\t\tvar i,\n\t\t\tset = instance.plugins[ name ];\n\n\t\tif ( !set ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !allowDisconnected && ( !instance.element[ 0 ].parentNode || instance.element[ 0 ].parentNode.nodeType === 11 ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor ( i = 0; i < set.length; i++ ) {\n\t\t\tif ( instance.options[ set[ i ][ 0 ] ] ) {\n\t\t\t\tset[ i ][ 1 ].apply( instance.element, args );\n\t\t\t}\n\t\t}\n\t}\n};\n\n\n/*!\n * jQuery UI Widget 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/jQuery.widget/\n */\n\n\nvar widget_uuid = 0,\n\twidget_slice = Array.prototype.slice;\n\n$.cleanData = (function( orig ) {\n\treturn function( elems ) {\n\t\tvar events, elem, i;\n\t\tfor ( i = 0; (elem = elems[i]) != null; i++ ) {\n\t\t\ttry {\n\n\t\t\t\t// Only trigger remove when necessary to save time\n\t\t\t\tevents = $._data( elem, \"events\" );\n\t\t\t\tif ( events && events.remove ) {\n\t\t\t\t\t$( elem ).triggerHandler( \"remove\" );\n\t\t\t\t}\n\n\t\t\t// http://bugs.jquery.com/ticket/8235\n\t\t\t} catch ( e ) {}\n\t\t}\n\t\torig( elems );\n\t};\n})( $.cleanData );\n\n$.widget = function( name, base, prototype ) {\n\tvar fullName, existingConstructor, constructor, basePrototype,\n\t\t// proxiedPrototype allows the provided prototype to remain unmodified\n\t\t// so that it can be used as a mixin for multiple widgets (#8876)\n\t\tproxiedPrototype = {},\n\t\tnamespace = name.split( \".\" )[ 0 ];\n\n\tname = name.split( \".\" )[ 1 ];\n\tfullName = namespace + \"-\" + name;\n\n\tif ( !prototype ) {\n\t\tprototype = base;\n\t\tbase = $.Widget;\n\t}\n\n\t// create selector for plugin\n\t$.expr[ \":\" ][ fullName.toLowerCase() ] = function( elem ) {\n\t\treturn !!$.data( elem, fullName );\n\t};\n\n\t$[ namespace ] = $[ namespace ] || {};\n\texistingConstructor = $[ namespace ][ name ];\n\tconstructor = $[ namespace ][ name ] = function( options, element ) {\n\t\t// allow instantiation without \"new\" keyword\n\t\tif ( !this._createWidget ) {\n\t\t\treturn new constructor( options, element );\n\t\t}\n\n\t\t// allow instantiation without initializing for simple inheritance\n\t\t// must use \"new\" keyword (the code above always passes args)\n\t\tif ( arguments.length ) {\n\t\t\tthis._createWidget( options, element );\n\t\t}\n\t};\n\t// extend with the existing constructor to carry over any static properties\n\t$.extend( constructor, existingConstructor, {\n\t\tversion: prototype.version,\n\t\t// copy the object used to create the prototype in case we need to\n\t\t// redefine the widget later\n\t\t_proto: $.extend( {}, prototype ),\n\t\t// track widgets that inherit from this widget in case this widget is\n\t\t// redefined after a widget inherits from it\n\t\t_childConstructors: []\n\t});\n\n\tbasePrototype = new base();\n\t// we need to make the options hash a property directly on the new instance\n\t// otherwise we'll modify the options hash on the prototype that we're\n\t// inheriting from\n\tbasePrototype.options = $.widget.extend( {}, basePrototype.options );\n\t$.each( prototype, function( prop, value ) {\n\t\tif ( !$.isFunction( value ) ) {\n\t\t\tproxiedPrototype[ prop ] = value;\n\t\t\treturn;\n\t\t}\n\t\tproxiedPrototype[ prop ] = (function() {\n\t\t\tvar _super = function() {\n\t\t\t\t\treturn base.prototype[ prop ].apply( this, arguments );\n\t\t\t\t},\n\t\t\t\t_superApply = function( args ) {\n\t\t\t\t\treturn base.prototype[ prop ].apply( this, args );\n\t\t\t\t};\n\t\t\treturn function() {\n\t\t\t\tvar __super = this._super,\n\t\t\t\t\t__superApply = this._superApply,\n\t\t\t\t\treturnValue;\n\n\t\t\t\tthis._super = _super;\n\t\t\t\tthis._superApply = _superApply;\n\n\t\t\t\treturnValue = value.apply( this, arguments );\n\n\t\t\t\tthis._super = __super;\n\t\t\t\tthis._superApply = __superApply;\n\n\t\t\t\treturn returnValue;\n\t\t\t};\n\t\t})();\n\t});\n\tconstructor.prototype = $.widget.extend( basePrototype, {\n\t\t// TODO: remove support for widgetEventPrefix\n\t\t// always use the name + a colon as the prefix, e.g., draggable:start\n\t\t// don't prefix for widgets that aren't DOM-based\n\t\twidgetEventPrefix: existingConstructor ? (basePrototype.widgetEventPrefix || name) : name\n\t}, proxiedPrototype, {\n\t\tconstructor: constructor,\n\t\tnamespace: namespace,\n\t\twidgetName: name,\n\t\twidgetFullName: fullName\n\t});\n\n\t// If this widget is being redefined then we need to find all widgets that\n\t// are inheriting from it and redefine all of them so that they inherit from\n\t// the new version of this widget. We're essentially trying to replace one\n\t// level in the prototype chain.\n\tif ( existingConstructor ) {\n\t\t$.each( existingConstructor._childConstructors, function( i, child ) {\n\t\t\tvar childPrototype = child.prototype;\n\n\t\t\t// redefine the child widget using the same prototype that was\n\t\t\t// originally used, but inherit from the new version of the base\n\t\t\t$.widget( childPrototype.namespace + \".\" + childPrototype.widgetName, constructor, child._proto );\n\t\t});\n\t\t// remove the list of existing child constructors from the old constructor\n\t\t// so the old child constructors can be garbage collected\n\t\tdelete existingConstructor._childConstructors;\n\t} else {\n\t\tbase._childConstructors.push( constructor );\n\t}\n\n\t$.widget.bridge( name, constructor );\n\n\treturn constructor;\n};\n\n$.widget.extend = function( target ) {\n\tvar input = widget_slice.call( arguments, 1 ),\n\t\tinputIndex = 0,\n\t\tinputLength = input.length,\n\t\tkey,\n\t\tvalue;\n\tfor ( ; inputIndex < inputLength; inputIndex++ ) {\n\t\tfor ( key in input[ inputIndex ] ) {\n\t\t\tvalue = input[ inputIndex ][ key ];\n\t\t\tif ( input[ inputIndex ].hasOwnProperty( key ) && value !== undefined ) {\n\t\t\t\t// Clone objects\n\t\t\t\tif ( $.isPlainObject( value ) ) {\n\t\t\t\t\ttarget[ key ] = $.isPlainObject( target[ key ] ) ?\n\t\t\t\t\t\t$.widget.extend( {}, target[ key ], value ) :\n\t\t\t\t\t\t// Don't extend strings, arrays, etc. with objects\n\t\t\t\t\t\t$.widget.extend( {}, value );\n\t\t\t\t// Copy everything else by reference\n\t\t\t\t} else {\n\t\t\t\t\ttarget[ key ] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn target;\n};\n\n$.widget.bridge = function( name, object ) {\n\tvar fullName = object.prototype.widgetFullName || name;\n\t$.fn[ name ] = function( options ) {\n\t\tvar isMethodCall = typeof options === \"string\",\n\t\t\targs = widget_slice.call( arguments, 1 ),\n\t\t\treturnValue = this;\n\n\t\tif ( isMethodCall ) {\n\t\t\tthis.each(function() {\n\t\t\t\tvar methodValue,\n\t\t\t\t\tinstance = $.data( this, fullName );\n\t\t\t\tif ( options === \"instance\" ) {\n\t\t\t\t\treturnValue = instance;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif ( !instance ) {\n\t\t\t\t\treturn $.error( \"cannot call methods on \" + name + \" prior to initialization; \" +\n\t\t\t\t\t\t\"attempted to call method '\" + options + \"'\" );\n\t\t\t\t}\n\t\t\t\tif ( !$.isFunction( instance[options] ) || options.charAt( 0 ) === \"_\" ) {\n\t\t\t\t\treturn $.error( \"no such method '\" + options + \"' for \" + name + \" widget instance\" );\n\t\t\t\t}\n\t\t\t\tmethodValue = instance[ options ].apply( instance, args );\n\t\t\t\tif ( methodValue !== instance && methodValue !== undefined ) {\n\t\t\t\t\treturnValue = methodValue && methodValue.jquery ?\n\t\t\t\t\t\treturnValue.pushStack( methodValue.get() ) :\n\t\t\t\t\t\tmethodValue;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\n\t\t\t// Allow multiple hashes to be passed on init\n\t\t\tif ( args.length ) {\n\t\t\t\toptions = $.widget.extend.apply( null, [ options ].concat(args) );\n\t\t\t}\n\n\t\t\tthis.each(function() {\n\t\t\t\tvar instance = $.data( this, fullName );\n\t\t\t\tif ( instance ) {\n\t\t\t\t\tinstance.option( options || {} );\n\t\t\t\t\tif ( instance._init ) {\n\t\t\t\t\t\tinstance._init();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t$.data( this, fullName, new object( options, this ) );\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn returnValue;\n\t};\n};\n\n$.Widget = function( /* options, element */ ) {};\n$.Widget._childConstructors = [];\n\n$.Widget.prototype = {\n\twidgetName: \"widget\",\n\twidgetEventPrefix: \"\",\n\tdefaultElement: \"<div>\",\n\toptions: {\n\t\tdisabled: false,\n\n\t\t// callbacks\n\t\tcreate: null\n\t},\n\t_createWidget: function( options, element ) {\n\t\telement = $( element || this.defaultElement || this )[ 0 ];\n\t\tthis.element = $( element );\n\t\tthis.uuid = widget_uuid++;\n\t\tthis.eventNamespace = \".\" + this.widgetName + this.uuid;\n\n\t\tthis.bindings = $();\n\t\tthis.hoverable = $();\n\t\tthis.focusable = $();\n\n\t\tif ( element !== this ) {\n\t\t\t$.data( element, this.widgetFullName, this );\n\t\t\tthis._on( true, this.element, {\n\t\t\t\tremove: function( event ) {\n\t\t\t\t\tif ( event.target === element ) {\n\t\t\t\t\t\tthis.destroy();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.document = $( element.style ?\n\t\t\t\t// element within the document\n\t\t\t\telement.ownerDocument :\n\t\t\t\t// element is window or document\n\t\t\t\telement.document || element );\n\t\t\tthis.window = $( this.document[0].defaultView || this.document[0].parentWindow );\n\t\t}\n\n\t\tthis.options = $.widget.extend( {},\n\t\t\tthis.options,\n\t\t\tthis._getCreateOptions(),\n\t\t\toptions );\n\n\t\tthis._create();\n\t\tthis._trigger( \"create\", null, this._getCreateEventData() );\n\t\tthis._init();\n\t},\n\t_getCreateOptions: $.noop,\n\t_getCreateEventData: $.noop,\n\t_create: $.noop,\n\t_init: $.noop,\n\n\tdestroy: function() {\n\t\tthis._destroy();\n\t\t// we can probably remove the unbind calls in 2.0\n\t\t// all event bindings should go through this._on()\n\t\tthis.element\n\t\t\t.unbind( this.eventNamespace )\n\t\t\t.removeData( this.widgetFullName )\n\t\t\t// support: jquery <1.6.3\n\t\t\t// http://bugs.jquery.com/ticket/9413\n\t\t\t.removeData( $.camelCase( this.widgetFullName ) );\n\t\tthis.widget()\n\t\t\t.unbind( this.eventNamespace )\n\t\t\t.removeAttr( \"aria-disabled\" )\n\t\t\t.removeClass(\n\t\t\t\tthis.widgetFullName + \"-disabled \" +\n\t\t\t\t\"ui-state-disabled\" );\n\n\t\t// clean up events and states\n\t\tthis.bindings.unbind( this.eventNamespace );\n\t\tthis.hoverable.removeClass( \"ui-state-hover\" );\n\t\tthis.focusable.removeClass( \"ui-state-focus\" );\n\t},\n\t_destroy: $.noop,\n\n\twidget: function() {\n\t\treturn this.element;\n\t},\n\n\toption: function( key, value ) {\n\t\tvar options = key,\n\t\t\tparts,\n\t\t\tcurOption,\n\t\t\ti;\n\n\t\tif ( arguments.length === 0 ) {\n\t\t\t// don't return a reference to the internal hash\n\t\t\treturn $.widget.extend( {}, this.options );\n\t\t}\n\n\t\tif ( typeof key === \"string\" ) {\n\t\t\t// handle nested keys, e.g., \"foo.bar\" => { foo: { bar: ___ } }\n\t\t\toptions = {};\n\t\t\tparts = key.split( \".\" );\n\t\t\tkey = parts.shift();\n\t\t\tif ( parts.length ) {\n\t\t\t\tcurOption = options[ key ] = $.widget.extend( {}, this.options[ key ] );\n\t\t\t\tfor ( i = 0; i < parts.length - 1; i++ ) {\n\t\t\t\t\tcurOption[ parts[ i ] ] = curOption[ parts[ i ] ] || {};\n\t\t\t\t\tcurOption = curOption[ parts[ i ] ];\n\t\t\t\t}\n\t\t\t\tkey = parts.pop();\n\t\t\t\tif ( arguments.length === 1 ) {\n\t\t\t\t\treturn curOption[ key ] === undefined ? null : curOption[ key ];\n\t\t\t\t}\n\t\t\t\tcurOption[ key ] = value;\n\t\t\t} else {\n\t\t\t\tif ( arguments.length === 1 ) {\n\t\t\t\t\treturn this.options[ key ] === undefined ? null : this.options[ key ];\n\t\t\t\t}\n\t\t\t\toptions[ key ] = value;\n\t\t\t}\n\t\t}\n\n\t\tthis._setOptions( options );\n\n\t\treturn this;\n\t},\n\t_setOptions: function( options ) {\n\t\tvar key;\n\n\t\tfor ( key in options ) {\n\t\t\tthis._setOption( key, options[ key ] );\n\t\t}\n\n\t\treturn this;\n\t},\n\t_setOption: function( key, value ) {\n\t\tthis.options[ key ] = value;\n\n\t\tif ( key === \"disabled\" ) {\n\t\t\tthis.widget()\n\t\t\t\t.toggleClass( this.widgetFullName + \"-disabled\", !!value );\n\n\t\t\t// If the widget is becoming disabled, then nothing is interactive\n\t\t\tif ( value ) {\n\t\t\t\tthis.hoverable.removeClass( \"ui-state-hover\" );\n\t\t\t\tthis.focusable.removeClass( \"ui-state-focus\" );\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tenable: function() {\n\t\treturn this._setOptions({ disabled: false });\n\t},\n\tdisable: function() {\n\t\treturn this._setOptions({ disabled: true });\n\t},\n\n\t_on: function( suppressDisabledCheck, element, handlers ) {\n\t\tvar delegateElement,\n\t\t\tinstance = this;\n\n\t\t// no suppressDisabledCheck flag, shuffle arguments\n\t\tif ( typeof suppressDisabledCheck !== \"boolean\" ) {\n\t\t\thandlers = element;\n\t\t\telement = suppressDisabledCheck;\n\t\t\tsuppressDisabledCheck = false;\n\t\t}\n\n\t\t// no element argument, shuffle and use this.element\n\t\tif ( !handlers ) {\n\t\t\thandlers = element;\n\t\t\telement = this.element;\n\t\t\tdelegateElement = this.widget();\n\t\t} else {\n\t\t\telement = delegateElement = $( element );\n\t\t\tthis.bindings = this.bindings.add( element );\n\t\t}\n\n\t\t$.each( handlers, function( event, handler ) {\n\t\t\tfunction handlerProxy() {\n\t\t\t\t// allow widgets to customize the disabled handling\n\t\t\t\t// - disabled as an array instead of boolean\n\t\t\t\t// - disabled class as method for disabling individual parts\n\t\t\t\tif ( !suppressDisabledCheck &&\n\t\t\t\t\t\t( instance.options.disabled === true ||\n\t\t\t\t\t\t\t$( this ).hasClass( \"ui-state-disabled\" ) ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\treturn ( typeof handler === \"string\" ? instance[ handler ] : handler )\n\t\t\t\t\t.apply( instance, arguments );\n\t\t\t}\n\n\t\t\t// copy the guid so direct unbinding works\n\t\t\tif ( typeof handler !== \"string\" ) {\n\t\t\t\thandlerProxy.guid = handler.guid =\n\t\t\t\t\thandler.guid || handlerProxy.guid || $.guid++;\n\t\t\t}\n\n\t\t\tvar match = event.match( /^([\\w:-]*)\\s*(.*)$/ ),\n\t\t\t\teventName = match[1] + instance.eventNamespace,\n\t\t\t\tselector = match[2];\n\t\t\tif ( selector ) {\n\t\t\t\tdelegateElement.delegate( selector, eventName, handlerProxy );\n\t\t\t} else {\n\t\t\t\telement.bind( eventName, handlerProxy );\n\t\t\t}\n\t\t});\n\t},\n\n\t_off: function( element, eventName ) {\n\t\teventName = (eventName || \"\").split( \" \" ).join( this.eventNamespace + \" \" ) +\n\t\t\tthis.eventNamespace;\n\t\telement.unbind( eventName ).undelegate( eventName );\n\n\t\t// Clear the stack to avoid memory leaks (#10056)\n\t\tthis.bindings = $( this.bindings.not( element ).get() );\n\t\tthis.focusable = $( this.focusable.not( element ).get() );\n\t\tthis.hoverable = $( this.hoverable.not( element ).get() );\n\t},\n\n\t_delay: function( handler, delay ) {\n\t\tfunction handlerProxy() {\n\t\t\treturn ( typeof handler === \"string\" ? instance[ handler ] : handler )\n\t\t\t\t.apply( instance, arguments );\n\t\t}\n\t\tvar instance = this;\n\t\treturn setTimeout( handlerProxy, delay || 0 );\n\t},\n\n\t_hoverable: function( element ) {\n\t\tthis.hoverable = this.hoverable.add( element );\n\t\tthis._on( element, {\n\t\t\tmouseenter: function( event ) {\n\t\t\t\t$( event.currentTarget ).addClass( \"ui-state-hover\" );\n\t\t\t},\n\t\t\tmouseleave: function( event ) {\n\t\t\t\t$( event.currentTarget ).removeClass( \"ui-state-hover\" );\n\t\t\t}\n\t\t});\n\t},\n\n\t_focusable: function( element ) {\n\t\tthis.focusable = this.focusable.add( element );\n\t\tthis._on( element, {\n\t\t\tfocusin: function( event ) {\n\t\t\t\t$( event.currentTarget ).addClass( \"ui-state-focus\" );\n\t\t\t},\n\t\t\tfocusout: function( event ) {\n\t\t\t\t$( event.currentTarget ).removeClass( \"ui-state-focus\" );\n\t\t\t}\n\t\t});\n\t},\n\n\t_trigger: function( type, event, data ) {\n\t\tvar prop, orig,\n\t\t\tcallback = this.options[ type ];\n\n\t\tdata = data || {};\n\t\tevent = $.Event( event );\n\t\tevent.type = ( type === this.widgetEventPrefix ?\n\t\t\ttype :\n\t\t\tthis.widgetEventPrefix + type ).toLowerCase();\n\t\t// the original event may come from any element\n\t\t// so we need to reset the target on the new event\n\t\tevent.target = this.element[ 0 ];\n\n\t\t// copy original event properties over to the new event\n\t\torig = event.originalEvent;\n\t\tif ( orig ) {\n\t\t\tfor ( prop in orig ) {\n\t\t\t\tif ( !( prop in event ) ) {\n\t\t\t\t\tevent[ prop ] = orig[ prop ];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.element.trigger( event, data );\n\t\treturn !( $.isFunction( callback ) &&\n\t\t\tcallback.apply( this.element[0], [ event ].concat( data ) ) === false ||\n\t\t\tevent.isDefaultPrevented() );\n\t}\n};\n\n$.each( { show: \"fadeIn\", hide: \"fadeOut\" }, function( method, defaultEffect ) {\n\t$.Widget.prototype[ \"_\" + method ] = function( element, options, callback ) {\n\t\tif ( typeof options === \"string\" ) {\n\t\t\toptions = { effect: options };\n\t\t}\n\t\tvar hasOptions,\n\t\t\teffectName = !options ?\n\t\t\t\tmethod :\n\t\t\t\toptions === true || typeof options === \"number\" ?\n\t\t\t\t\tdefaultEffect :\n\t\t\t\t\toptions.effect || defaultEffect;\n\t\toptions = options || {};\n\t\tif ( typeof options === \"number\" ) {\n\t\t\toptions = { duration: options };\n\t\t}\n\t\thasOptions = !$.isEmptyObject( options );\n\t\toptions.complete = callback;\n\t\tif ( options.delay ) {\n\t\t\telement.delay( options.delay );\n\t\t}\n\t\tif ( hasOptions && $.effects && $.effects.effect[ effectName ] ) {\n\t\t\telement[ method ]( options );\n\t\t} else if ( effectName !== method && element[ effectName ] ) {\n\t\t\telement[ effectName ]( options.duration, options.easing, callback );\n\t\t} else {\n\t\t\telement.queue(function( next ) {\n\t\t\t\t$( this )[ method ]();\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback.call( element[ 0 ] );\n\t\t\t\t}\n\t\t\t\tnext();\n\t\t\t});\n\t\t}\n\t};\n});\n\nvar widget = $.widget;\n\n\n/*!\n * jQuery UI Mouse 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/mouse/\n */\n\n\nvar mouseHandled = false;\n$( document ).mouseup( function() {\n\tmouseHandled = false;\n});\n\nvar mouse = $.widget(\"ui.mouse\", {\n\tversion: \"1.11.4\",\n\toptions: {\n\t\tcancel: \"input,textarea,button,select,option\",\n\t\tdistance: 1,\n\t\tdelay: 0\n\t},\n\t_mouseInit: function() {\n\t\tvar that = this;\n\n\t\tthis.element\n\t\t\t.bind(\"mousedown.\" + this.widgetName, function(event) {\n\t\t\t\treturn that._mouseDown(event);\n\t\t\t})\n\t\t\t.bind(\"click.\" + this.widgetName, function(event) {\n\t\t\t\tif (true === $.data(event.target, that.widgetName + \".preventClickEvent\")) {\n\t\t\t\t\t$.removeData(event.target, that.widgetName + \".preventClickEvent\");\n\t\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\n\t\tthis.started = false;\n\t},\n\n\t// TODO: make sure destroying one instance of mouse doesn't mess with\n\t// other instances of mouse\n\t_mouseDestroy: function() {\n\t\tthis.element.unbind(\".\" + this.widgetName);\n\t\tif ( this._mouseMoveDelegate ) {\n\t\t\tthis.document\n\t\t\t\t.unbind(\"mousemove.\" + this.widgetName, this._mouseMoveDelegate)\n\t\t\t\t.unbind(\"mouseup.\" + this.widgetName, this._mouseUpDelegate);\n\t\t}\n\t},\n\n\t_mouseDown: function(event) {\n\t\t// don't let more than one widget handle mouseStart\n\t\tif ( mouseHandled ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._mouseMoved = false;\n\n\t\t// we may have missed mouseup (out of window)\n\t\t(this._mouseStarted && this._mouseUp(event));\n\n\t\tthis._mouseDownEvent = event;\n\n\t\tvar that = this,\n\t\t\tbtnIsLeft = (event.which === 1),\n\t\t\t// event.target.nodeName works around a bug in IE 8 with\n\t\t\t// disabled inputs (#7620)\n\t\t\telIsCancel = (typeof this.options.cancel === \"string\" && event.target.nodeName ? $(event.target).closest(this.options.cancel).length : false);\n\t\tif (!btnIsLeft || elIsCancel || !this._mouseCapture(event)) {\n\t\t\treturn true;\n\t\t}\n\n\t\tthis.mouseDelayMet = !this.options.delay;\n\t\tif (!this.mouseDelayMet) {\n\t\t\tthis._mouseDelayTimer = setTimeout(function() {\n\t\t\t\tthat.mouseDelayMet = true;\n\t\t\t}, this.options.delay);\n\t\t}\n\n\t\tif (this._mouseDistanceMet(event) && this._mouseDelayMet(event)) {\n\t\t\tthis._mouseStarted = (this._mouseStart(event) !== false);\n\t\t\tif (!this._mouseStarted) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\t// Click event may never have fired (Gecko & Opera)\n\t\tif (true === $.data(event.target, this.widgetName + \".preventClickEvent\")) {\n\t\t\t$.removeData(event.target, this.widgetName + \".preventClickEvent\");\n\t\t}\n\n\t\t// these delegates are required to keep context\n\t\tthis._mouseMoveDelegate = function(event) {\n\t\t\treturn that._mouseMove(event);\n\t\t};\n\t\tthis._mouseUpDelegate = function(event) {\n\t\t\treturn that._mouseUp(event);\n\t\t};\n\n\t\tthis.document\n\t\t\t.bind( \"mousemove.\" + this.widgetName, this._mouseMoveDelegate )\n\t\t\t.bind( \"mouseup.\" + this.widgetName, this._mouseUpDelegate );\n\n\t\tevent.preventDefault();\n\n\t\tmouseHandled = true;\n\t\treturn true;\n\t},\n\n\t_mouseMove: function(event) {\n\t\t// Only check for mouseups outside the document if you've moved inside the document\n\t\t// at least once. This prevents the firing of mouseup in the case of IE<9, which will\n\t\t// fire a mousemove event if content is placed under the cursor. See #7778\n\t\t// Support: IE <9\n\t\tif ( this._mouseMoved ) {\n\t\t\t// IE mouseup check - mouseup happened when mouse was out of window\n\t\t\tif ($.ui.ie && ( !document.documentMode || document.documentMode < 9 ) && !event.button) {\n\t\t\t\treturn this._mouseUp(event);\n\n\t\t\t// Iframe mouseup check - mouseup occurred in another document\n\t\t\t} else if ( !event.which ) {\n\t\t\t\treturn this._mouseUp( event );\n\t\t\t}\n\t\t}\n\n\t\tif ( event.which || event.button ) {\n\t\t\tthis._mouseMoved = true;\n\t\t}\n\n\t\tif (this._mouseStarted) {\n\t\t\tthis._mouseDrag(event);\n\t\t\treturn event.preventDefault();\n\t\t}\n\n\t\tif (this._mouseDistanceMet(event) && this._mouseDelayMet(event)) {\n\t\t\tthis._mouseStarted =\n\t\t\t\t(this._mouseStart(this._mouseDownEvent, event) !== false);\n\t\t\t(this._mouseStarted ? this._mouseDrag(event) : this._mouseUp(event));\n\t\t}\n\n\t\treturn !this._mouseStarted;\n\t},\n\n\t_mouseUp: function(event) {\n\t\tthis.document\n\t\t\t.unbind( \"mousemove.\" + this.widgetName, this._mouseMoveDelegate )\n\t\t\t.unbind( \"mouseup.\" + this.widgetName, this._mouseUpDelegate );\n\n\t\tif (this._mouseStarted) {\n\t\t\tthis._mouseStarted = false;\n\n\t\t\tif (event.target === this._mouseDownEvent.target) {\n\t\t\t\t$.data(event.target, this.widgetName + \".preventClickEvent\", true);\n\t\t\t}\n\n\t\t\tthis._mouseStop(event);\n\t\t}\n\n\t\tmouseHandled = false;\n\t\treturn false;\n\t},\n\n\t_mouseDistanceMet: function(event) {\n\t\treturn (Math.max(\n\t\t\t\tMath.abs(this._mouseDownEvent.pageX - event.pageX),\n\t\t\t\tMath.abs(this._mouseDownEvent.pageY - event.pageY)\n\t\t\t) >= this.options.distance\n\t\t);\n\t},\n\n\t_mouseDelayMet: function(/* event */) {\n\t\treturn this.mouseDelayMet;\n\t},\n\n\t// These are placeholder methods, to be overriden by extending plugin\n\t_mouseStart: function(/* event */) {},\n\t_mouseDrag: function(/* event */) {},\n\t_mouseStop: function(/* event */) {},\n\t_mouseCapture: function(/* event */) { return true; }\n});\n\n\n/*!\n * jQuery UI Position 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/position/\n */\n\n(function() {\n\n$.ui = $.ui || {};\n\nvar cachedScrollbarWidth, supportsOffsetFractions,\n\tmax = Math.max,\n\tabs = Math.abs,\n\tround = Math.round,\n\trhorizontal = /left|center|right/,\n\trvertical = /top|center|bottom/,\n\troffset = /[\\+\\-]\\d+(\\.[\\d]+)?%?/,\n\trposition = /^\\w+/,\n\trpercent = /%$/,\n\t_position = $.fn.position;\n\nfunction getOffsets( offsets, width, height ) {\n\treturn [\n\t\tparseFloat( offsets[ 0 ] ) * ( rpercent.test( offsets[ 0 ] ) ? width / 100 : 1 ),\n\t\tparseFloat( offsets[ 1 ] ) * ( rpercent.test( offsets[ 1 ] ) ? height / 100 : 1 )\n\t];\n}\n\nfunction parseCss( element, property ) {\n\treturn parseInt( $.css( element, property ), 10 ) || 0;\n}\n\nfunction getDimensions( elem ) {\n\tvar raw = elem[0];\n\tif ( raw.nodeType === 9 ) {\n\t\treturn {\n\t\t\twidth: elem.width(),\n\t\t\theight: elem.height(),\n\t\t\toffset: { top: 0, left: 0 }\n\t\t};\n\t}\n\tif ( $.isWindow( raw ) ) {\n\t\treturn {\n\t\t\twidth: elem.width(),\n\t\t\theight: elem.height(),\n\t\t\toffset: { top: elem.scrollTop(), left: elem.scrollLeft() }\n\t\t};\n\t}\n\tif ( raw.preventDefault ) {\n\t\treturn {\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t\toffset: { top: raw.pageY, left: raw.pageX }\n\t\t};\n\t}\n\treturn {\n\t\twidth: elem.outerWidth(),\n\t\theight: elem.outerHeight(),\n\t\toffset: elem.offset()\n\t};\n}\n\n$.position = {\n\tscrollbarWidth: function() {\n\t\tif ( cachedScrollbarWidth !== undefined ) {\n\t\t\treturn cachedScrollbarWidth;\n\t\t}\n\t\tvar w1, w2,\n\t\t\tdiv = $( \"<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>\" ),\n\t\t\tinnerDiv = div.children()[0];\n\n\t\t$( \"body\" ).append( div );\n\t\tw1 = innerDiv.offsetWidth;\n\t\tdiv.css( \"overflow\", \"scroll\" );\n\n\t\tw2 = innerDiv.offsetWidth;\n\n\t\tif ( w1 === w2 ) {\n\t\t\tw2 = div[0].clientWidth;\n\t\t}\n\n\t\tdiv.remove();\n\n\t\treturn (cachedScrollbarWidth = w1 - w2);\n\t},\n\tgetScrollInfo: function( within ) {\n\t\tvar overflowX = within.isWindow || within.isDocument ? \"\" :\n\t\t\t\twithin.element.css( \"overflow-x\" ),\n\t\t\toverflowY = within.isWindow || within.isDocument ? \"\" :\n\t\t\t\twithin.element.css( \"overflow-y\" ),\n\t\t\thasOverflowX = overflowX === \"scroll\" ||\n\t\t\t\t( overflowX === \"auto\" && within.width < within.element[0].scrollWidth ),\n\t\t\thasOverflowY = overflowY === \"scroll\" ||\n\t\t\t\t( overflowY === \"auto\" && within.height < within.element[0].scrollHeight );\n\t\treturn {\n\t\t\twidth: hasOverflowY ? $.position.scrollbarWidth() : 0,\n\t\t\theight: hasOverflowX ? $.position.scrollbarWidth() : 0\n\t\t};\n\t},\n\tgetWithinInfo: function( element ) {\n\t\tvar withinElement = $( element || window ),\n\t\t\tisWindow = $.isWindow( withinElement[0] ),\n\t\t\tisDocument = !!withinElement[ 0 ] && withinElement[ 0 ].nodeType === 9;\n\t\treturn {\n\t\t\telement: withinElement,\n\t\t\tisWindow: isWindow,\n\t\t\tisDocument: isDocument,\n\t\t\toffset: withinElement.offset() || { left: 0, top: 0 },\n\t\t\tscrollLeft: withinElement.scrollLeft(),\n\t\t\tscrollTop: withinElement.scrollTop(),\n\n\t\t\t// support: jQuery 1.6.x\n\t\t\t// jQuery 1.6 doesn't support .outerWidth/Height() on documents or windows\n\t\t\twidth: isWindow || isDocument ? withinElement.width() : withinElement.outerWidth(),\n\t\t\theight: isWindow || isDocument ? withinElement.height() : withinElement.outerHeight()\n\t\t};\n\t}\n};\n\n$.fn.position = function( options ) {\n\tif ( !options || !options.of ) {\n\t\treturn _position.apply( this, arguments );\n\t}\n\n\t// make a copy, we don't want to modify arguments\n\toptions = $.extend( {}, options );\n\n\tvar atOffset, targetWidth, targetHeight, targetOffset, basePosition, dimensions,\n\t\ttarget = $( options.of ),\n\t\twithin = $.position.getWithinInfo( options.within ),\n\t\tscrollInfo = $.position.getScrollInfo( within ),\n\t\tcollision = ( options.collision || \"flip\" ).split( \" \" ),\n\t\toffsets = {};\n\n\tdimensions = getDimensions( target );\n\tif ( target[0].preventDefault ) {\n\t\t// force left top to allow flipping\n\t\toptions.at = \"left top\";\n\t}\n\ttargetWidth = dimensions.width;\n\ttargetHeight = dimensions.height;\n\ttargetOffset = dimensions.offset;\n\t// clone to reuse original targetOffset later\n\tbasePosition = $.extend( {}, targetOffset );\n\n\t// force my and at to have valid horizontal and vertical positions\n\t// if a value is missing or invalid, it will be converted to center\n\t$.each( [ \"my\", \"at\" ], function() {\n\t\tvar pos = ( options[ this ] || \"\" ).split( \" \" ),\n\t\t\thorizontalOffset,\n\t\t\tverticalOffset;\n\n\t\tif ( pos.length === 1) {\n\t\t\tpos = rhorizontal.test( pos[ 0 ] ) ?\n\t\t\t\tpos.concat( [ \"center\" ] ) :\n\t\t\t\trvertical.test( pos[ 0 ] ) ?\n\t\t\t\t\t[ \"center\" ].concat( pos ) :\n\t\t\t\t\t[ \"center\", \"center\" ];\n\t\t}\n\t\tpos[ 0 ] = rhorizontal.test( pos[ 0 ] ) ? pos[ 0 ] : \"center\";\n\t\tpos[ 1 ] = rvertical.test( pos[ 1 ] ) ? pos[ 1 ] : \"center\";\n\n\t\t// calculate offsets\n\t\thorizontalOffset = roffset.exec( pos[ 0 ] );\n\t\tverticalOffset = roffset.exec( pos[ 1 ] );\n\t\toffsets[ this ] = [\n\t\t\thorizontalOffset ? horizontalOffset[ 0 ] : 0,\n\t\t\tverticalOffset ? verticalOffset[ 0 ] : 0\n\t\t];\n\n\t\t// reduce to just the positions without the offsets\n\t\toptions[ this ] = [\n\t\t\trposition.exec( pos[ 0 ] )[ 0 ],\n\t\t\trposition.exec( pos[ 1 ] )[ 0 ]\n\t\t];\n\t});\n\n\t// normalize collision option\n\tif ( collision.length === 1 ) {\n\t\tcollision[ 1 ] = collision[ 0 ];\n\t}\n\n\tif ( options.at[ 0 ] === \"right\" ) {\n\t\tbasePosition.left += targetWidth;\n\t} else if ( options.at[ 0 ] === \"center\" ) {\n\t\tbasePosition.left += targetWidth / 2;\n\t}\n\n\tif ( options.at[ 1 ] === \"bottom\" ) {\n\t\tbasePosition.top += targetHeight;\n\t} else if ( options.at[ 1 ] === \"center\" ) {\n\t\tbasePosition.top += targetHeight / 2;\n\t}\n\n\tatOffset = getOffsets( offsets.at, targetWidth, targetHeight );\n\tbasePosition.left += atOffset[ 0 ];\n\tbasePosition.top += atOffset[ 1 ];\n\n\treturn this.each(function() {\n\t\tvar collisionPosition, using,\n\t\t\telem = $( this ),\n\t\t\telemWidth = elem.outerWidth(),\n\t\t\telemHeight = elem.outerHeight(),\n\t\t\tmarginLeft = parseCss( this, \"marginLeft\" ),\n\t\t\tmarginTop = parseCss( this, \"marginTop\" ),\n\t\t\tcollisionWidth = elemWidth + marginLeft + parseCss( this, \"marginRight\" ) + scrollInfo.width,\n\t\t\tcollisionHeight = elemHeight + marginTop + parseCss( this, \"marginBottom\" ) + scrollInfo.height,\n\t\t\tposition = $.extend( {}, basePosition ),\n\t\t\tmyOffset = getOffsets( offsets.my, elem.outerWidth(), elem.outerHeight() );\n\n\t\tif ( options.my[ 0 ] === \"right\" ) {\n\t\t\tposition.left -= elemWidth;\n\t\t} else if ( options.my[ 0 ] === \"center\" ) {\n\t\t\tposition.left -= elemWidth / 2;\n\t\t}\n\n\t\tif ( options.my[ 1 ] === \"bottom\" ) {\n\t\t\tposition.top -= elemHeight;\n\t\t} else if ( options.my[ 1 ] === \"center\" ) {\n\t\t\tposition.top -= elemHeight / 2;\n\t\t}\n\n\t\tposition.left += myOffset[ 0 ];\n\t\tposition.top += myOffset[ 1 ];\n\n\t\t// if the browser doesn't support fractions, then round for consistent results\n\t\tif ( !supportsOffsetFractions ) {\n\t\t\tposition.left = round( position.left );\n\t\t\tposition.top = round( position.top );\n\t\t}\n\n\t\tcollisionPosition = {\n\t\t\tmarginLeft: marginLeft,\n\t\t\tmarginTop: marginTop\n\t\t};\n\n\t\t$.each( [ \"left\", \"top\" ], function( i, dir ) {\n\t\t\tif ( $.ui.position[ collision[ i ] ] ) {\n\t\t\t\t$.ui.position[ collision[ i ] ][ dir ]( position, {\n\t\t\t\t\ttargetWidth: targetWidth,\n\t\t\t\t\ttargetHeight: targetHeight,\n\t\t\t\t\telemWidth: elemWidth,\n\t\t\t\t\telemHeight: elemHeight,\n\t\t\t\t\tcollisionPosition: collisionPosition,\n\t\t\t\t\tcollisionWidth: collisionWidth,\n\t\t\t\t\tcollisionHeight: collisionHeight,\n\t\t\t\t\toffset: [ atOffset[ 0 ] + myOffset[ 0 ], atOffset [ 1 ] + myOffset[ 1 ] ],\n\t\t\t\t\tmy: options.my,\n\t\t\t\t\tat: options.at,\n\t\t\t\t\twithin: within,\n\t\t\t\t\telem: elem\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tif ( options.using ) {\n\t\t\t// adds feedback as second argument to using callback, if present\n\t\t\tusing = function( props ) {\n\t\t\t\tvar left = targetOffset.left - position.left,\n\t\t\t\t\tright = left + targetWidth - elemWidth,\n\t\t\t\t\ttop = targetOffset.top - position.top,\n\t\t\t\t\tbottom = top + targetHeight - elemHeight,\n\t\t\t\t\tfeedback = {\n\t\t\t\t\t\ttarget: {\n\t\t\t\t\t\t\telement: target,\n\t\t\t\t\t\t\tleft: targetOffset.left,\n\t\t\t\t\t\t\ttop: targetOffset.top,\n\t\t\t\t\t\t\twidth: targetWidth,\n\t\t\t\t\t\t\theight: targetHeight\n\t\t\t\t\t\t},\n\t\t\t\t\t\telement: {\n\t\t\t\t\t\t\telement: elem,\n\t\t\t\t\t\t\tleft: position.left,\n\t\t\t\t\t\t\ttop: position.top,\n\t\t\t\t\t\t\twidth: elemWidth,\n\t\t\t\t\t\t\theight: elemHeight\n\t\t\t\t\t\t},\n\t\t\t\t\t\thorizontal: right < 0 ? \"left\" : left > 0 ? \"right\" : \"center\",\n\t\t\t\t\t\tvertical: bottom < 0 ? \"top\" : top > 0 ? \"bottom\" : \"middle\"\n\t\t\t\t\t};\n\t\t\t\tif ( targetWidth < elemWidth && abs( left + right ) < targetWidth ) {\n\t\t\t\t\tfeedback.horizontal = \"center\";\n\t\t\t\t}\n\t\t\t\tif ( targetHeight < elemHeight && abs( top + bottom ) < targetHeight ) {\n\t\t\t\t\tfeedback.vertical = \"middle\";\n\t\t\t\t}\n\t\t\t\tif ( max( abs( left ), abs( right ) ) > max( abs( top ), abs( bottom ) ) ) {\n\t\t\t\t\tfeedback.important = \"horizontal\";\n\t\t\t\t} else {\n\t\t\t\t\tfeedback.important = \"vertical\";\n\t\t\t\t}\n\t\t\t\toptions.using.call( this, props, feedback );\n\t\t\t};\n\t\t}\n\n\t\telem.offset( $.extend( position, { using: using } ) );\n\t});\n};\n\n$.ui.position = {\n\tfit: {\n\t\tleft: function( position, data ) {\n\t\t\tvar within = data.within,\n\t\t\t\twithinOffset = within.isWindow ? within.scrollLeft : within.offset.left,\n\t\t\t\touterWidth = within.width,\n\t\t\t\tcollisionPosLeft = position.left - data.collisionPosition.marginLeft,\n\t\t\t\toverLeft = withinOffset - collisionPosLeft,\n\t\t\t\toverRight = collisionPosLeft + data.collisionWidth - outerWidth - withinOffset,\n\t\t\t\tnewOverRight;\n\n\t\t\t// element is wider than within\n\t\t\tif ( data.collisionWidth > outerWidth ) {\n\t\t\t\t// element is initially over the left side of within\n\t\t\t\tif ( overLeft > 0 && overRight <= 0 ) {\n\t\t\t\t\tnewOverRight = position.left + overLeft + data.collisionWidth - outerWidth - withinOffset;\n\t\t\t\t\tposition.left += overLeft - newOverRight;\n\t\t\t\t// element is initially over right side of within\n\t\t\t\t} else if ( overRight > 0 && overLeft <= 0 ) {\n\t\t\t\t\tposition.left = withinOffset;\n\t\t\t\t// element is initially over both left and right sides of within\n\t\t\t\t} else {\n\t\t\t\t\tif ( overLeft > overRight ) {\n\t\t\t\t\t\tposition.left = withinOffset + outerWidth - data.collisionWidth;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tposition.left = withinOffset;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t// too far left -> align with left edge\n\t\t\t} else if ( overLeft > 0 ) {\n\t\t\t\tposition.left += overLeft;\n\t\t\t// too far right -> align with right edge\n\t\t\t} else if ( overRight > 0 ) {\n\t\t\t\tposition.left -= overRight;\n\t\t\t// adjust based on position and margin\n\t\t\t} else {\n\t\t\t\tposition.left = max( position.left - collisionPosLeft, position.left );\n\t\t\t}\n\t\t},\n\t\ttop: function( position, data ) {\n\t\t\tvar within = data.within,\n\t\t\t\twithinOffset = within.isWindow ? within.scrollTop : within.offset.top,\n\t\t\t\touterHeight = data.within.height,\n\t\t\t\tcollisionPosTop = position.top - data.collisionPosition.marginTop,\n\t\t\t\toverTop = withinOffset - collisionPosTop,\n\t\t\t\toverBottom = collisionPosTop + data.collisionHeight - outerHeight - withinOffset,\n\t\t\t\tnewOverBottom;\n\n\t\t\t// element is taller than within\n\t\t\tif ( data.collisionHeight > outerHeight ) {\n\t\t\t\t// element is initially over the top of within\n\t\t\t\tif ( overTop > 0 && overBottom <= 0 ) {\n\t\t\t\t\tnewOverBottom = position.top + overTop + data.collisionHeight - outerHeight - withinOffset;\n\t\t\t\t\tposition.top += overTop - newOverBottom;\n\t\t\t\t// element is initially over bottom of within\n\t\t\t\t} else if ( overBottom > 0 && overTop <= 0 ) {\n\t\t\t\t\tposition.top = withinOffset;\n\t\t\t\t// element is initially over both top and bottom of within\n\t\t\t\t} else {\n\t\t\t\t\tif ( overTop > overBottom ) {\n\t\t\t\t\t\tposition.top = withinOffset + outerHeight - data.collisionHeight;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tposition.top = withinOffset;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t// too far up -> align with top\n\t\t\t} else if ( overTop > 0 ) {\n\t\t\t\tposition.top += overTop;\n\t\t\t// too far down -> align with bottom edge\n\t\t\t} else if ( overBottom > 0 ) {\n\t\t\t\tposition.top -= overBottom;\n\t\t\t// adjust based on position and margin\n\t\t\t} else {\n\t\t\t\tposition.top = max( position.top - collisionPosTop, position.top );\n\t\t\t}\n\t\t}\n\t},\n\tflip: {\n\t\tleft: function( position, data ) {\n\t\t\tvar within = data.within,\n\t\t\t\twithinOffset = within.offset.left + within.scrollLeft,\n\t\t\t\touterWidth = within.width,\n\t\t\t\toffsetLeft = within.isWindow ? within.scrollLeft : within.offset.left,\n\t\t\t\tcollisionPosLeft = position.left - data.collisionPosition.marginLeft,\n\t\t\t\toverLeft = collisionPosLeft - offsetLeft,\n\t\t\t\toverRight = collisionPosLeft + data.collisionWidth - outerWidth - offsetLeft,\n\t\t\t\tmyOffset = data.my[ 0 ] === \"left\" ?\n\t\t\t\t\t-data.elemWidth :\n\t\t\t\t\tdata.my[ 0 ] === \"right\" ?\n\t\t\t\t\t\tdata.elemWidth :\n\t\t\t\t\t\t0,\n\t\t\t\tatOffset = data.at[ 0 ] === \"left\" ?\n\t\t\t\t\tdata.targetWidth :\n\t\t\t\t\tdata.at[ 0 ] === \"right\" ?\n\t\t\t\t\t\t-data.targetWidth :\n\t\t\t\t\t\t0,\n\t\t\t\toffset = -2 * data.offset[ 0 ],\n\t\t\t\tnewOverRight,\n\t\t\t\tnewOverLeft;\n\n\t\t\tif ( overLeft < 0 ) {\n\t\t\t\tnewOverRight = position.left + myOffset + atOffset + offset + data.collisionWidth - outerWidth - withinOffset;\n\t\t\t\tif ( newOverRight < 0 || newOverRight < abs( overLeft ) ) {\n\t\t\t\t\tposition.left += myOffset + atOffset + offset;\n\t\t\t\t}\n\t\t\t} else if ( overRight > 0 ) {\n\t\t\t\tnewOverLeft = position.left - data.collisionPosition.marginLeft + myOffset + atOffset + offset - offsetLeft;\n\t\t\t\tif ( newOverLeft > 0 || abs( newOverLeft ) < overRight ) {\n\t\t\t\t\tposition.left += myOffset + atOffset + offset;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\ttop: function( position, data ) {\n\t\t\tvar within = data.within,\n\t\t\t\twithinOffset = within.offset.top + within.scrollTop,\n\t\t\t\touterHeight = within.height,\n\t\t\t\toffsetTop = within.isWindow ? within.scrollTop : within.offset.top,\n\t\t\t\tcollisionPosTop = position.top - data.collisionPosition.marginTop,\n\t\t\t\toverTop = collisionPosTop - offsetTop,\n\t\t\t\toverBottom = collisionPosTop + data.collisionHeight - outerHeight - offsetTop,\n\t\t\t\ttop = data.my[ 1 ] === \"top\",\n\t\t\t\tmyOffset = top ?\n\t\t\t\t\t-data.elemHeight :\n\t\t\t\t\tdata.my[ 1 ] === \"bottom\" ?\n\t\t\t\t\t\tdata.elemHeight :\n\t\t\t\t\t\t0,\n\t\t\t\tatOffset = data.at[ 1 ] === \"top\" ?\n\t\t\t\t\tdata.targetHeight :\n\t\t\t\t\tdata.at[ 1 ] === \"bottom\" ?\n\t\t\t\t\t\t-data.targetHeight :\n\t\t\t\t\t\t0,\n\t\t\t\toffset = -2 * data.offset[ 1 ],\n\t\t\t\tnewOverTop,\n\t\t\t\tnewOverBottom;\n\t\t\tif ( overTop < 0 ) {\n\t\t\t\tnewOverBottom = position.top + myOffset + atOffset + offset + data.collisionHeight - outerHeight - withinOffset;\n\t\t\t\tif ( newOverBottom < 0 || newOverBottom < abs( overTop ) ) {\n\t\t\t\t\tposition.top += myOffset + atOffset + offset;\n\t\t\t\t}\n\t\t\t} else if ( overBottom > 0 ) {\n\t\t\t\tnewOverTop = position.top - data.collisionPosition.marginTop + myOffset + atOffset + offset - offsetTop;\n\t\t\t\tif ( newOverTop > 0 || abs( newOverTop ) < overBottom ) {\n\t\t\t\t\tposition.top += myOffset + atOffset + offset;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tflipfit: {\n\t\tleft: function() {\n\t\t\t$.ui.position.flip.left.apply( this, arguments );\n\t\t\t$.ui.position.fit.left.apply( this, arguments );\n\t\t},\n\t\ttop: function() {\n\t\t\t$.ui.position.flip.top.apply( this, arguments );\n\t\t\t$.ui.position.fit.top.apply( this, arguments );\n\t\t}\n\t}\n};\n\n// fraction support test\n(function() {\n\tvar testElement, testElementParent, testElementStyle, offsetLeft, i,\n\t\tbody = document.getElementsByTagName( \"body\" )[ 0 ],\n\t\tdiv = document.createElement( \"div\" );\n\n\t//Create a \"fake body\" for testing based on method used in jQuery.support\n\ttestElement = document.createElement( body ? \"div\" : \"body\" );\n\ttestElementStyle = {\n\t\tvisibility: \"hidden\",\n\t\twidth: 0,\n\t\theight: 0,\n\t\tborder: 0,\n\t\tmargin: 0,\n\t\tbackground: \"none\"\n\t};\n\tif ( body ) {\n\t\t$.extend( testElementStyle, {\n\t\t\tposition: \"absolute\",\n\t\t\tleft: \"-1000px\",\n\t\t\ttop: \"-1000px\"\n\t\t});\n\t}\n\tfor ( i in testElementStyle ) {\n\t\ttestElement.style[ i ] = testElementStyle[ i ];\n\t}\n\ttestElement.appendChild( div );\n\ttestElementParent = body || document.documentElement;\n\ttestElementParent.insertBefore( testElement, testElementParent.firstChild );\n\n\tdiv.style.cssText = \"position: absolute; left: 10.7432222px;\";\n\n\toffsetLeft = $( div ).offset().left;\n\tsupportsOffsetFractions = offsetLeft > 10 && offsetLeft < 11;\n\n\ttestElement.innerHTML = \"\";\n\ttestElementParent.removeChild( testElement );\n})();\n\n})();\n\nvar position = $.ui.position;\n\n\n/*!\n * jQuery UI Accordion 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/accordion/\n */\n\n\nvar accordion = $.widget( \"ui.accordion\", {\n\tversion: \"1.11.4\",\n\toptions: {\n\t\tactive: 0,\n\t\tanimate: {},\n\t\tcollapsible: false,\n\t\tevent: \"click\",\n\t\theader: \"> li > :first-child,> :not(li):even\",\n\t\theightStyle: \"auto\",\n\t\ticons: {\n\t\t\tactiveHeader: \"ui-icon-triangle-1-s\",\n\t\t\theader: \"ui-icon-triangle-1-e\"\n\t\t},\n\n\t\t// callbacks\n\t\tactivate: null,\n\t\tbeforeActivate: null\n\t},\n\n\thideProps: {\n\t\tborderTopWidth: \"hide\",\n\t\tborderBottomWidth: \"hide\",\n\t\tpaddingTop: \"hide\",\n\t\tpaddingBottom: \"hide\",\n\t\theight: \"hide\"\n\t},\n\n\tshowProps: {\n\t\tborderTopWidth: \"show\",\n\t\tborderBottomWidth: \"show\",\n\t\tpaddingTop: \"show\",\n\t\tpaddingBottom: \"show\",\n\t\theight: \"show\"\n\t},\n\n\t_create: function() {\n\t\tvar options = this.options;\n\t\tthis.prevShow = this.prevHide = $();\n\t\tthis.element.addClass( \"ui-accordion ui-widget ui-helper-reset\" )\n\t\t\t// ARIA\n\t\t\t.attr( \"role\", \"tablist\" );\n\n\t\t// don't allow collapsible: false and active: false / null\n\t\tif ( !options.collapsible && (options.active === false || options.active == null) ) {\n\t\t\toptions.active = 0;\n\t\t}\n\n\t\tthis._processPanels();\n\t\t// handle negative values\n\t\tif ( options.active < 0 ) {\n\t\t\toptions.active += this.headers.length;\n\t\t}\n\t\tthis._refresh();\n\t},\n\n\t_getCreateEventData: function() {\n\t\treturn {\n\t\t\theader: this.active,\n\t\t\tpanel: !this.active.length ? $() : this.active.next()\n\t\t};\n\t},\n\n\t_createIcons: function() {\n\t\tvar icons = this.options.icons;\n\t\tif ( icons ) {\n\t\t\t$( \"<span>\" )\n\t\t\t\t.addClass( \"ui-accordion-header-icon ui-icon \" + icons.header )\n\t\t\t\t.prependTo( this.headers );\n\t\t\tthis.active.children( \".ui-accordion-header-icon\" )\n\t\t\t\t.removeClass( icons.header )\n\t\t\t\t.addClass( icons.activeHeader );\n\t\t\tthis.headers.addClass( \"ui-accordion-icons\" );\n\t\t}\n\t},\n\n\t_destroyIcons: function() {\n\t\tthis.headers\n\t\t\t.removeClass( \"ui-accordion-icons\" )\n\t\t\t.children( \".ui-accordion-header-icon\" )\n\t\t\t\t.remove();\n\t},\n\n\t_destroy: function() {\n\t\tvar contents;\n\n\t\t// clean up main element\n\t\tthis.element\n\t\t\t.removeClass( \"ui-accordion ui-widget ui-helper-reset\" )\n\t\t\t.removeAttr( \"role\" );\n\n\t\t// clean up headers\n\t\tthis.headers\n\t\t\t.removeClass( \"ui-accordion-header ui-accordion-header-active ui-state-default \" +\n\t\t\t\t\"ui-corner-all ui-state-active ui-state-disabled ui-corner-top\" )\n\t\t\t.removeAttr( \"role\" )\n\t\t\t.removeAttr( \"aria-expanded\" )\n\t\t\t.removeAttr( \"aria-selected\" )\n\t\t\t.removeAttr( \"aria-controls\" )\n\t\t\t.removeAttr( \"tabIndex\" )\n\t\t\t.removeUniqueId();\n\n\t\tthis._destroyIcons();\n\n\t\t// clean up content panels\n\t\tcontents = this.headers.next()\n\t\t\t.removeClass( \"ui-helper-reset ui-widget-content ui-corner-bottom \" +\n\t\t\t\t\"ui-accordion-content ui-accordion-content-active ui-state-disabled\" )\n\t\t\t.css( \"display\", \"\" )\n\t\t\t.removeAttr( \"role\" )\n\t\t\t.removeAttr( \"aria-hidden\" )\n\t\t\t.removeAttr( \"aria-labelledby\" )\n\t\t\t.removeUniqueId();\n\n\t\tif ( this.options.heightStyle !== \"content\" ) {\n\t\t\tcontents.css( \"height\", \"\" );\n\t\t}\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tif ( key === \"active\" ) {\n\t\t\t// _activate() will handle invalid values and update this.options\n\t\t\tthis._activate( value );\n\t\t\treturn;\n\t\t}\n\n\t\tif ( key === \"event\" ) {\n\t\t\tif ( this.options.event ) {\n\t\t\t\tthis._off( this.headers, this.options.event );\n\t\t\t}\n\t\t\tthis._setupEvents( value );\n\t\t}\n\n\t\tthis._super( key, value );\n\n\t\t// setting collapsible: false while collapsed; open first panel\n\t\tif ( key === \"collapsible\" && !value && this.options.active === false ) {\n\t\t\tthis._activate( 0 );\n\t\t}\n\n\t\tif ( key === \"icons\" ) {\n\t\t\tthis._destroyIcons();\n\t\t\tif ( value ) {\n\t\t\t\tthis._createIcons();\n\t\t\t}\n\t\t}\n\n\t\t// #5332 - opacity doesn't cascade to positioned elements in IE\n\t\t// so we need to add the disabled class to the headers and panels\n\t\tif ( key === \"disabled\" ) {\n\t\t\tthis.element\n\t\t\t\t.toggleClass( \"ui-state-disabled\", !!value )\n\t\t\t\t.attr( \"aria-disabled\", value );\n\t\t\tthis.headers.add( this.headers.next() )\n\t\t\t\t.toggleClass( \"ui-state-disabled\", !!value );\n\t\t}\n\t},\n\n\t_keydown: function( event ) {\n\t\tif ( event.altKey || event.ctrlKey ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar keyCode = $.ui.keyCode,\n\t\t\tlength = this.headers.length,\n\t\t\tcurrentIndex = this.headers.index( event.target ),\n\t\t\ttoFocus = false;\n\n\t\tswitch ( event.keyCode ) {\n\t\t\tcase keyCode.RIGHT:\n\t\t\tcase keyCode.DOWN:\n\t\t\t\ttoFocus = this.headers[ ( currentIndex + 1 ) % length ];\n\t\t\t\tbreak;\n\t\t\tcase keyCode.LEFT:\n\t\t\tcase keyCode.UP:\n\t\t\t\ttoFocus = this.headers[ ( currentIndex - 1 + length ) % length ];\n\t\t\t\tbreak;\n\t\t\tcase keyCode.SPACE:\n\t\t\tcase keyCode.ENTER:\n\t\t\t\tthis._eventHandler( event );\n\t\t\t\tbreak;\n\t\t\tcase keyCode.HOME:\n\t\t\t\ttoFocus = this.headers[ 0 ];\n\t\t\t\tbreak;\n\t\t\tcase keyCode.END:\n\t\t\t\ttoFocus = this.headers[ length - 1 ];\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif ( toFocus ) {\n\t\t\t$( event.target ).attr( \"tabIndex\", -1 );\n\t\t\t$( toFocus ).attr( \"tabIndex\", 0 );\n\t\t\ttoFocus.focus();\n\t\t\tevent.preventDefault();\n\t\t}\n\t},\n\n\t_panelKeyDown: function( event ) {\n\t\tif ( event.keyCode === $.ui.keyCode.UP && event.ctrlKey ) {\n\t\t\t$( event.currentTarget ).prev().focus();\n\t\t}\n\t},\n\n\trefresh: function() {\n\t\tvar options = this.options;\n\t\tthis._processPanels();\n\n\t\t// was collapsed or no panel\n\t\tif ( ( options.active === false && options.collapsible === true ) || !this.headers.length ) {\n\t\t\toptions.active = false;\n\t\t\tthis.active = $();\n\t\t// active false only when collapsible is true\n\t\t} else if ( options.active === false ) {\n\t\t\tthis._activate( 0 );\n\t\t// was active, but active panel is gone\n\t\t} else if ( this.active.length && !$.contains( this.element[ 0 ], this.active[ 0 ] ) ) {\n\t\t\t// all remaining panel are disabled\n\t\t\tif ( this.headers.length === this.headers.find(\".ui-state-disabled\").length ) {\n\t\t\t\toptions.active = false;\n\t\t\t\tthis.active = $();\n\t\t\t// activate previous panel\n\t\t\t} else {\n\t\t\t\tthis._activate( Math.max( 0, options.active - 1 ) );\n\t\t\t}\n\t\t// was active, active panel still exists\n\t\t} else {\n\t\t\t// make sure active index is correct\n\t\t\toptions.active = this.headers.index( this.active );\n\t\t}\n\n\t\tthis._destroyIcons();\n\n\t\tthis._refresh();\n\t},\n\n\t_processPanels: function() {\n\t\tvar prevHeaders = this.headers,\n\t\t\tprevPanels = this.panels;\n\n\t\tthis.headers = this.element.find( this.options.header )\n\t\t\t.addClass( \"ui-accordion-header ui-state-default ui-corner-all\" );\n\n\t\tthis.panels = this.headers.next()\n\t\t\t.addClass( \"ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom\" )\n\t\t\t.filter( \":not(.ui-accordion-content-active)\" )\n\t\t\t.hide();\n\n\t\t// Avoid memory leaks (#10056)\n\t\tif ( prevPanels ) {\n\t\t\tthis._off( prevHeaders.not( this.headers ) );\n\t\t\tthis._off( prevPanels.not( this.panels ) );\n\t\t}\n\t},\n\n\t_refresh: function() {\n\t\tvar maxHeight,\n\t\t\toptions = this.options,\n\t\t\theightStyle = options.heightStyle,\n\t\t\tparent = this.element.parent();\n\n\t\tthis.active = this._findActive( options.active )\n\t\t\t.addClass( \"ui-accordion-header-active ui-state-active ui-corner-top\" )\n\t\t\t.removeClass( \"ui-corner-all\" );\n\t\tthis.active.next()\n\t\t\t.addClass( \"ui-accordion-content-active\" )\n\t\t\t.show();\n\n\t\tthis.headers\n\t\t\t.attr( \"role\", \"tab\" )\n\t\t\t.each(function() {\n\t\t\t\tvar header = $( this ),\n\t\t\t\t\theaderId = header.uniqueId().attr( \"id\" ),\n\t\t\t\t\tpanel = header.next(),\n\t\t\t\t\tpanelId = panel.uniqueId().attr( \"id\" );\n\t\t\t\theader.attr( \"aria-controls\", panelId );\n\t\t\t\tpanel.attr( \"aria-labelledby\", headerId );\n\t\t\t})\n\t\t\t.next()\n\t\t\t\t.attr( \"role\", \"tabpanel\" );\n\n\t\tthis.headers\n\t\t\t.not( this.active )\n\t\t\t.attr({\n\t\t\t\t\"aria-selected\": \"false\",\n\t\t\t\t\"aria-expanded\": \"false\",\n\t\t\t\ttabIndex: -1\n\t\t\t})\n\t\t\t.next()\n\t\t\t\t.attr({\n\t\t\t\t\t\"aria-hidden\": \"true\"\n\t\t\t\t})\n\t\t\t\t.hide();\n\n\t\t// make sure at least one header is in the tab order\n\t\tif ( !this.active.length ) {\n\t\t\tthis.headers.eq( 0 ).attr( \"tabIndex\", 0 );\n\t\t} else {\n\t\t\tthis.active.attr({\n\t\t\t\t\"aria-selected\": \"true\",\n\t\t\t\t\"aria-expanded\": \"true\",\n\t\t\t\ttabIndex: 0\n\t\t\t})\n\t\t\t.next()\n\t\t\t\t.attr({\n\t\t\t\t\t\"aria-hidden\": \"false\"\n\t\t\t\t});\n\t\t}\n\n\t\tthis._createIcons();\n\n\t\tthis._setupEvents( options.event );\n\n\t\tif ( heightStyle === \"fill\" ) {\n\t\t\tmaxHeight = parent.height();\n\t\t\tthis.element.siblings( \":visible\" ).each(function() {\n\t\t\t\tvar elem = $( this ),\n\t\t\t\t\tposition = elem.css( \"position\" );\n\n\t\t\t\tif ( position === \"absolute\" || position === \"fixed\" ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tmaxHeight -= elem.outerHeight( true );\n\t\t\t});\n\n\t\t\tthis.headers.each(function() {\n\t\t\t\tmaxHeight -= $( this ).outerHeight( true );\n\t\t\t});\n\n\t\t\tthis.headers.next()\n\t\t\t\t.each(function() {\n\t\t\t\t\t$( this ).height( Math.max( 0, maxHeight -\n\t\t\t\t\t\t$( this ).innerHeight() + $( this ).height() ) );\n\t\t\t\t})\n\t\t\t\t.css( \"overflow\", \"auto\" );\n\t\t} else if ( heightStyle === \"auto\" ) {\n\t\t\tmaxHeight = 0;\n\t\t\tthis.headers.next()\n\t\t\t\t.each(function() {\n\t\t\t\t\tmaxHeight = Math.max( maxHeight, $( this ).css( \"height\", \"\" ).height() );\n\t\t\t\t})\n\t\t\t\t.height( maxHeight );\n\t\t}\n\t},\n\n\t_activate: function( index ) {\n\t\tvar active = this._findActive( index )[ 0 ];\n\n\t\t// trying to activate the already active panel\n\t\tif ( active === this.active[ 0 ] ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// trying to collapse, simulate a click on the currently active header\n\t\tactive = active || this.active[ 0 ];\n\n\t\tthis._eventHandler({\n\t\t\ttarget: active,\n\t\t\tcurrentTarget: active,\n\t\t\tpreventDefault: $.noop\n\t\t});\n\t},\n\n\t_findActive: function( selector ) {\n\t\treturn typeof selector === \"number\" ? this.headers.eq( selector ) : $();\n\t},\n\n\t_setupEvents: function( event ) {\n\t\tvar events = {\n\t\t\tkeydown: \"_keydown\"\n\t\t};\n\t\tif ( event ) {\n\t\t\t$.each( event.split( \" \" ), function( index, eventName ) {\n\t\t\t\tevents[ eventName ] = \"_eventHandler\";\n\t\t\t});\n\t\t}\n\n\t\tthis._off( this.headers.add( this.headers.next() ) );\n\t\tthis._on( this.headers, events );\n\t\tthis._on( this.headers.next(), { keydown: \"_panelKeyDown\" });\n\t\tthis._hoverable( this.headers );\n\t\tthis._focusable( this.headers );\n\t},\n\n\t_eventHandler: function( event ) {\n\t\tvar options = this.options,\n\t\t\tactive = this.active,\n\t\t\tclicked = $( event.currentTarget ),\n\t\t\tclickedIsActive = clicked[ 0 ] === active[ 0 ],\n\t\t\tcollapsing = clickedIsActive && options.collapsible,\n\t\t\ttoShow = collapsing ? $() : clicked.next(),\n\t\t\ttoHide = active.next(),\n\t\t\teventData = {\n\t\t\t\toldHeader: active,\n\t\t\t\toldPanel: toHide,\n\t\t\t\tnewHeader: collapsing ? $() : clicked,\n\t\t\t\tnewPanel: toShow\n\t\t\t};\n\n\t\tevent.preventDefault();\n\n\t\tif (\n\t\t\t\t// click on active header, but not collapsible\n\t\t\t\t( clickedIsActive && !options.collapsible ) ||\n\t\t\t\t// allow canceling activation\n\t\t\t\t( this._trigger( \"beforeActivate\", event, eventData ) === false ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\toptions.active = collapsing ? false : this.headers.index( clicked );\n\n\t\t// when the call to ._toggle() comes after the class changes\n\t\t// it causes a very odd bug in IE 8 (see #6720)\n\t\tthis.active = clickedIsActive ? $() : clicked;\n\t\tthis._toggle( eventData );\n\n\t\t// switch classes\n\t\t// corner classes on the previously active header stay after the animation\n\t\tactive.removeClass( \"ui-accordion-header-active ui-state-active\" );\n\t\tif ( options.icons ) {\n\t\t\tactive.children( \".ui-accordion-header-icon\" )\n\t\t\t\t.removeClass( options.icons.activeHeader )\n\t\t\t\t.addClass( options.icons.header );\n\t\t}\n\n\t\tif ( !clickedIsActive ) {\n\t\t\tclicked\n\t\t\t\t.removeClass( \"ui-corner-all\" )\n\t\t\t\t.addClass( \"ui-accordion-header-active ui-state-active ui-corner-top\" );\n\t\t\tif ( options.icons ) {\n\t\t\t\tclicked.children( \".ui-accordion-header-icon\" )\n\t\t\t\t\t.removeClass( options.icons.header )\n\t\t\t\t\t.addClass( options.icons.activeHeader );\n\t\t\t}\n\n\t\t\tclicked\n\t\t\t\t.next()\n\t\t\t\t.addClass( \"ui-accordion-content-active\" );\n\t\t}\n\t},\n\n\t_toggle: function( data ) {\n\t\tvar toShow = data.newPanel,\n\t\t\ttoHide = this.prevShow.length ? this.prevShow : data.oldPanel;\n\n\t\t// handle activating a panel during the animation for another activation\n\t\tthis.prevShow.add( this.prevHide ).stop( true, true );\n\t\tthis.prevShow = toShow;\n\t\tthis.prevHide = toHide;\n\n\t\tif ( this.options.animate ) {\n\t\t\tthis._animate( toShow, toHide, data );\n\t\t} else {\n\t\t\ttoHide.hide();\n\t\t\ttoShow.show();\n\t\t\tthis._toggleComplete( data );\n\t\t}\n\n\t\ttoHide.attr({\n\t\t\t\"aria-hidden\": \"true\"\n\t\t});\n\t\ttoHide.prev().attr({\n\t\t\t\"aria-selected\": \"false\",\n\t\t\t\"aria-expanded\": \"false\"\n\t\t});\n\t\t// if we're switching panels, remove the old header from the tab order\n\t\t// if we're opening from collapsed state, remove the previous header from the tab order\n\t\t// if we're collapsing, then keep the collapsing header in the tab order\n\t\tif ( toShow.length && toHide.length ) {\n\t\t\ttoHide.prev().attr({\n\t\t\t\t\"tabIndex\": -1,\n\t\t\t\t\"aria-expanded\": \"false\"\n\t\t\t});\n\t\t} else if ( toShow.length ) {\n\t\t\tthis.headers.filter(function() {\n\t\t\t\treturn parseInt( $( this ).attr( \"tabIndex\" ), 10 ) === 0;\n\t\t\t})\n\t\t\t.attr( \"tabIndex\", -1 );\n\t\t}\n\n\t\ttoShow\n\t\t\t.attr( \"aria-hidden\", \"false\" )\n\t\t\t.prev()\n\t\t\t\t.attr({\n\t\t\t\t\t\"aria-selected\": \"true\",\n\t\t\t\t\t\"aria-expanded\": \"true\",\n\t\t\t\t\ttabIndex: 0\n\t\t\t\t});\n\t},\n\n\t_animate: function( toShow, toHide, data ) {\n\t\tvar total, easing, duration,\n\t\t\tthat = this,\n\t\t\tadjust = 0,\n\t\t\tboxSizing = toShow.css( \"box-sizing\" ),\n\t\t\tdown = toShow.length &&\n\t\t\t\t( !toHide.length || ( toShow.index() < toHide.index() ) ),\n\t\t\tanimate = this.options.animate || {},\n\t\t\toptions = down && animate.down || animate,\n\t\t\tcomplete = function() {\n\t\t\t\tthat._toggleComplete( data );\n\t\t\t};\n\n\t\tif ( typeof options === \"number\" ) {\n\t\t\tduration = options;\n\t\t}\n\t\tif ( typeof options === \"string\" ) {\n\t\t\teasing = options;\n\t\t}\n\t\t// fall back from options to animation in case of partial down settings\n\t\teasing = easing || options.easing || animate.easing;\n\t\tduration = duration || options.duration || animate.duration;\n\n\t\tif ( !toHide.length ) {\n\t\t\treturn toShow.animate( this.showProps, duration, easing, complete );\n\t\t}\n\t\tif ( !toShow.length ) {\n\t\t\treturn toHide.animate( this.hideProps, duration, easing, complete );\n\t\t}\n\n\t\ttotal = toShow.show().outerHeight();\n\t\ttoHide.animate( this.hideProps, {\n\t\t\tduration: duration,\n\t\t\teasing: easing,\n\t\t\tstep: function( now, fx ) {\n\t\t\t\tfx.now = Math.round( now );\n\t\t\t}\n\t\t});\n\t\ttoShow\n\t\t\t.hide()\n\t\t\t.animate( this.showProps, {\n\t\t\t\tduration: duration,\n\t\t\t\teasing: easing,\n\t\t\t\tcomplete: complete,\n\t\t\t\tstep: function( now, fx ) {\n\t\t\t\t\tfx.now = Math.round( now );\n\t\t\t\t\tif ( fx.prop !== \"height\" ) {\n\t\t\t\t\t\tif ( boxSizing === \"content-box\" ) {\n\t\t\t\t\t\t\tadjust += fx.now;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if ( that.options.heightStyle !== \"content\" ) {\n\t\t\t\t\t\tfx.now = Math.round( total - toHide.outerHeight() - adjust );\n\t\t\t\t\t\tadjust = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t},\n\n\t_toggleComplete: function( data ) {\n\t\tvar toHide = data.oldPanel;\n\n\t\ttoHide\n\t\t\t.removeClass( \"ui-accordion-content-active\" )\n\t\t\t.prev()\n\t\t\t\t.removeClass( \"ui-corner-top\" )\n\t\t\t\t.addClass( \"ui-corner-all\" );\n\n\t\t// Work around for rendering bug in IE (#5421)\n\t\tif ( toHide.length ) {\n\t\t\ttoHide.parent()[ 0 ].className = toHide.parent()[ 0 ].className;\n\t\t}\n\t\tthis._trigger( \"activate\", null, data );\n\t}\n});\n\n\n/*!\n * jQuery UI Menu 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/menu/\n */\n\n\nvar menu = $.widget( \"ui.menu\", {\n\tversion: \"1.11.4\",\n\tdefaultElement: \"<ul>\",\n\tdelay: 300,\n\toptions: {\n\t\ticons: {\n\t\t\tsubmenu: \"ui-icon-carat-1-e\"\n\t\t},\n\t\titems: \"> *\",\n\t\tmenus: \"ul\",\n\t\tposition: {\n\t\t\tmy: \"left-1 top\",\n\t\t\tat: \"right top\"\n\t\t},\n\t\trole: \"menu\",\n\n\t\t// callbacks\n\t\tblur: null,\n\t\tfocus: null,\n\t\tselect: null\n\t},\n\n\t_create: function() {\n\t\tthis.activeMenu = this.element;\n\n\t\t// Flag used to prevent firing of the click handler\n\t\t// as the event bubbles up through nested menus\n\t\tthis.mouseHandled = false;\n\t\tthis.element\n\t\t\t.uniqueId()\n\t\t\t.addClass( \"ui-menu ui-widget ui-widget-content\" )\n\t\t\t.toggleClass( \"ui-menu-icons\", !!this.element.find( \".ui-icon\" ).length )\n\t\t\t.attr({\n\t\t\t\trole: this.options.role,\n\t\t\t\ttabIndex: 0\n\t\t\t});\n\n\t\tif ( this.options.disabled ) {\n\t\t\tthis.element\n\t\t\t\t.addClass( \"ui-state-disabled\" )\n\t\t\t\t.attr( \"aria-disabled\", \"true\" );\n\t\t}\n\n\t\tthis._on({\n\t\t\t// Prevent focus from sticking to links inside menu after clicking\n\t\t\t// them (focus should always stay on UL during navigation).\n\t\t\t\"mousedown .ui-menu-item\": function( event ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t},\n\t\t\t\"click .ui-menu-item\": function( event ) {\n\t\t\t\tvar target = $( event.target );\n\t\t\t\tif ( !this.mouseHandled && target.not( \".ui-state-disabled\" ).length ) {\n\t\t\t\t\tthis.select( event );\n\n\t\t\t\t\t// Only set the mouseHandled flag if the event will bubble, see #9469.\n\t\t\t\t\tif ( !event.isPropagationStopped() ) {\n\t\t\t\t\t\tthis.mouseHandled = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Open submenu on click\n\t\t\t\t\tif ( target.has( \".ui-menu\" ).length ) {\n\t\t\t\t\t\tthis.expand( event );\n\t\t\t\t\t} else if ( !this.element.is( \":focus\" ) && $( this.document[ 0 ].activeElement ).closest( \".ui-menu\" ).length ) {\n\n\t\t\t\t\t\t// Redirect focus to the menu\n\t\t\t\t\t\tthis.element.trigger( \"focus\", [ true ] );\n\n\t\t\t\t\t\t// If the active item is on the top level, let it stay active.\n\t\t\t\t\t\t// Otherwise, blur the active item since it is no longer visible.\n\t\t\t\t\t\tif ( this.active && this.active.parents( \".ui-menu\" ).length === 1 ) {\n\t\t\t\t\t\t\tclearTimeout( this.timer );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"mouseenter .ui-menu-item\": function( event ) {\n\t\t\t\t// Ignore mouse events while typeahead is active, see #10458.\n\t\t\t\t// Prevents focusing the wrong item when typeahead causes a scroll while the mouse\n\t\t\t\t// is over an item in the menu\n\t\t\t\tif ( this.previousFilter ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar target = $( event.currentTarget );\n\t\t\t\t// Remove ui-state-active class from siblings of the newly focused menu item\n\t\t\t\t// to avoid a jump caused by adjacent elements both having a class with a border\n\t\t\t\ttarget.siblings( \".ui-state-active\" ).removeClass( \"ui-state-active\" );\n\t\t\t\tthis.focus( event, target );\n\t\t\t},\n\t\t\tmouseleave: \"collapseAll\",\n\t\t\t\"mouseleave .ui-menu\": \"collapseAll\",\n\t\t\tfocus: function( event, keepActiveItem ) {\n\t\t\t\t// If there's already an active item, keep it active\n\t\t\t\t// If not, activate the first item\n\t\t\t\tvar item = this.active || this.element.find( this.options.items ).eq( 0 );\n\n\t\t\t\tif ( !keepActiveItem ) {\n\t\t\t\t\tthis.focus( event, item );\n\t\t\t\t}\n\t\t\t},\n\t\t\tblur: function( event ) {\n\t\t\t\tthis._delay(function() {\n\t\t\t\t\tif ( !$.contains( this.element[0], this.document[0].activeElement ) ) {\n\t\t\t\t\t\tthis.collapseAll( event );\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tkeydown: \"_keydown\"\n\t\t});\n\n\t\tthis.refresh();\n\n\t\t// Clicks outside of a menu collapse any open menus\n\t\tthis._on( this.document, {\n\t\t\tclick: function( event ) {\n\t\t\t\tif ( this._closeOnDocumentClick( event ) ) {\n\t\t\t\t\tthis.collapseAll( event );\n\t\t\t\t}\n\n\t\t\t\t// Reset the mouseHandled flag\n\t\t\t\tthis.mouseHandled = false;\n\t\t\t}\n\t\t});\n\t},\n\n\t_destroy: function() {\n\t\t// Destroy (sub)menus\n\t\tthis.element\n\t\t\t.removeAttr( \"aria-activedescendant\" )\n\t\t\t.find( \".ui-menu\" ).addBack()\n\t\t\t\t.removeClass( \"ui-menu ui-widget ui-widget-content ui-menu-icons ui-front\" )\n\t\t\t\t.removeAttr( \"role\" )\n\t\t\t\t.removeAttr( \"tabIndex\" )\n\t\t\t\t.removeAttr( \"aria-labelledby\" )\n\t\t\t\t.removeAttr( \"aria-expanded\" )\n\t\t\t\t.removeAttr( \"aria-hidden\" )\n\t\t\t\t.removeAttr( \"aria-disabled\" )\n\t\t\t\t.removeUniqueId()\n\t\t\t\t.show();\n\n\t\t// Destroy menu items\n\t\tthis.element.find( \".ui-menu-item\" )\n\t\t\t.removeClass( \"ui-menu-item\" )\n\t\t\t.removeAttr( \"role\" )\n\t\t\t.removeAttr( \"aria-disabled\" )\n\t\t\t.removeUniqueId()\n\t\t\t.removeClass( \"ui-state-hover\" )\n\t\t\t.removeAttr( \"tabIndex\" )\n\t\t\t.removeAttr( \"role\" )\n\t\t\t.removeAttr( \"aria-haspopup\" )\n\t\t\t.children().each( function() {\n\t\t\t\tvar elem = $( this );\n\t\t\t\tif ( elem.data( \"ui-menu-submenu-carat\" ) ) {\n\t\t\t\t\telem.remove();\n\t\t\t\t}\n\t\t\t});\n\n\t\t// Destroy menu dividers\n\t\tthis.element.find( \".ui-menu-divider\" ).removeClass( \"ui-menu-divider ui-widget-content\" );\n\t},\n\n\t_keydown: function( event ) {\n\t\tvar match, prev, character, skip,\n\t\t\tpreventDefault = true;\n\n\t\tswitch ( event.keyCode ) {\n\t\tcase $.ui.keyCode.PAGE_UP:\n\t\t\tthis.previousPage( event );\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.PAGE_DOWN:\n\t\t\tthis.nextPage( event );\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.HOME:\n\t\t\tthis._move( \"first\", \"first\", event );\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.END:\n\t\t\tthis._move( \"last\", \"last\", event );\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.UP:\n\t\t\tthis.previous( event );\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.DOWN:\n\t\t\tthis.next( event );\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.LEFT:\n\t\t\tthis.collapse( event );\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.RIGHT:\n\t\t\tif ( this.active && !this.active.is( \".ui-state-disabled\" ) ) {\n\t\t\t\tthis.expand( event );\n\t\t\t}\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.ENTER:\n\t\tcase $.ui.keyCode.SPACE:\n\t\t\tthis._activate( event );\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.ESCAPE:\n\t\t\tthis.collapse( event );\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tpreventDefault = false;\n\t\t\tprev = this.previousFilter || \"\";\n\t\t\tcharacter = String.fromCharCode( event.keyCode );\n\t\t\tskip = false;\n\n\t\t\tclearTimeout( this.filterTimer );\n\n\t\t\tif ( character === prev ) {\n\t\t\t\tskip = true;\n\t\t\t} else {\n\t\t\t\tcharacter = prev + character;\n\t\t\t}\n\n\t\t\tmatch = this._filterMenuItems( character );\n\t\t\tmatch = skip && match.index( this.active.next() ) !== -1 ?\n\t\t\t\tthis.active.nextAll( \".ui-menu-item\" ) :\n\t\t\t\tmatch;\n\n\t\t\t// If no matches on the current filter, reset to the last character pressed\n\t\t\t// to move down the menu to the first item that starts with that character\n\t\t\tif ( !match.length ) {\n\t\t\t\tcharacter = String.fromCharCode( event.keyCode );\n\t\t\t\tmatch = this._filterMenuItems( character );\n\t\t\t}\n\n\t\t\tif ( match.length ) {\n\t\t\t\tthis.focus( event, match );\n\t\t\t\tthis.previousFilter = character;\n\t\t\t\tthis.filterTimer = this._delay(function() {\n\t\t\t\t\tdelete this.previousFilter;\n\t\t\t\t}, 1000 );\n\t\t\t} else {\n\t\t\t\tdelete this.previousFilter;\n\t\t\t}\n\t\t}\n\n\t\tif ( preventDefault ) {\n\t\t\tevent.preventDefault();\n\t\t}\n\t},\n\n\t_activate: function( event ) {\n\t\tif ( !this.active.is( \".ui-state-disabled\" ) ) {\n\t\t\tif ( this.active.is( \"[aria-haspopup='true']\" ) ) {\n\t\t\t\tthis.expand( event );\n\t\t\t} else {\n\t\t\t\tthis.select( event );\n\t\t\t}\n\t\t}\n\t},\n\n\trefresh: function() {\n\t\tvar menus, items,\n\t\t\tthat = this,\n\t\t\ticon = this.options.icons.submenu,\n\t\t\tsubmenus = this.element.find( this.options.menus );\n\n\t\tthis.element.toggleClass( \"ui-menu-icons\", !!this.element.find( \".ui-icon\" ).length );\n\n\t\t// Initialize nested menus\n\t\tsubmenus.filter( \":not(.ui-menu)\" )\n\t\t\t.addClass( \"ui-menu ui-widget ui-widget-content ui-front\" )\n\t\t\t.hide()\n\t\t\t.attr({\n\t\t\t\trole: this.options.role,\n\t\t\t\t\"aria-hidden\": \"true\",\n\t\t\t\t\"aria-expanded\": \"false\"\n\t\t\t})\n\t\t\t.each(function() {\n\t\t\t\tvar menu = $( this ),\n\t\t\t\t\titem = menu.parent(),\n\t\t\t\t\tsubmenuCarat = $( \"<span>\" )\n\t\t\t\t\t\t.addClass( \"ui-menu-icon ui-icon \" + icon )\n\t\t\t\t\t\t.data( \"ui-menu-submenu-carat\", true );\n\n\t\t\t\titem\n\t\t\t\t\t.attr( \"aria-haspopup\", \"true\" )\n\t\t\t\t\t.prepend( submenuCarat );\n\t\t\t\tmenu.attr( \"aria-labelledby\", item.attr( \"id\" ) );\n\t\t\t});\n\n\t\tmenus = submenus.add( this.element );\n\t\titems = menus.find( this.options.items );\n\n\t\t// Initialize menu-items containing spaces and/or dashes only as dividers\n\t\titems.not( \".ui-menu-item\" ).each(function() {\n\t\t\tvar item = $( this );\n\t\t\tif ( that._isDivider( item ) ) {\n\t\t\t\titem.addClass( \"ui-widget-content ui-menu-divider\" );\n\t\t\t}\n\t\t});\n\n\t\t// Don't refresh list items that are already adapted\n\t\titems.not( \".ui-menu-item, .ui-menu-divider\" )\n\t\t\t.addClass( \"ui-menu-item\" )\n\t\t\t.uniqueId()\n\t\t\t.attr({\n\t\t\t\ttabIndex: -1,\n\t\t\t\trole: this._itemRole()\n\t\t\t});\n\n\t\t// Add aria-disabled attribute to any disabled menu item\n\t\titems.filter( \".ui-state-disabled\" ).attr( \"aria-disabled\", \"true\" );\n\n\t\t// If the active item has been removed, blur the menu\n\t\tif ( this.active && !$.contains( this.element[ 0 ], this.active[ 0 ] ) ) {\n\t\t\tthis.blur();\n\t\t}\n\t},\n\n\t_itemRole: function() {\n\t\treturn {\n\t\t\tmenu: \"menuitem\",\n\t\t\tlistbox: \"option\"\n\t\t}[ this.options.role ];\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tif ( key === \"icons\" ) {\n\t\t\tthis.element.find( \".ui-menu-icon\" )\n\t\t\t\t.removeClass( this.options.icons.submenu )\n\t\t\t\t.addClass( value.submenu );\n\t\t}\n\t\tif ( key === \"disabled\" ) {\n\t\t\tthis.element\n\t\t\t\t.toggleClass( \"ui-state-disabled\", !!value )\n\t\t\t\t.attr( \"aria-disabled\", value );\n\t\t}\n\t\tthis._super( key, value );\n\t},\n\n\tfocus: function( event, item ) {\n\t\tvar nested, focused;\n\t\tthis.blur( event, event && event.type === \"focus\" );\n\n\t\tthis._scrollIntoView( item );\n\n\t\tthis.active = item.first();\n\t\tfocused = this.active.addClass( \"ui-state-focus\" ).removeClass( \"ui-state-active\" );\n\t\t// Only update aria-activedescendant if there's a role\n\t\t// otherwise we assume focus is managed elsewhere\n\t\tif ( this.options.role ) {\n\t\t\tthis.element.attr( \"aria-activedescendant\", focused.attr( \"id\" ) );\n\t\t}\n\n\t\t// Highlight active parent menu item, if any\n\t\tthis.active\n\t\t\t.parent()\n\t\t\t.closest( \".ui-menu-item\" )\n\t\t\t.addClass( \"ui-state-active\" );\n\n\t\tif ( event && event.type === \"keydown\" ) {\n\t\t\tthis._close();\n\t\t} else {\n\t\t\tthis.timer = this._delay(function() {\n\t\t\t\tthis._close();\n\t\t\t}, this.delay );\n\t\t}\n\n\t\tnested = item.children( \".ui-menu\" );\n\t\tif ( nested.length && event && ( /^mouse/.test( event.type ) ) ) {\n\t\t\tthis._startOpening(nested);\n\t\t}\n\t\tthis.activeMenu = item.parent();\n\n\t\tthis._trigger( \"focus\", event, { item: item } );\n\t},\n\n\t_scrollIntoView: function( item ) {\n\t\tvar borderTop, paddingTop, offset, scroll, elementHeight, itemHeight;\n\t\tif ( this._hasScroll() ) {\n\t\t\tborderTop = parseFloat( $.css( this.activeMenu[0], \"borderTopWidth\" ) ) || 0;\n\t\t\tpaddingTop = parseFloat( $.css( this.activeMenu[0], \"paddingTop\" ) ) || 0;\n\t\t\toffset = item.offset().top - this.activeMenu.offset().top - borderTop - paddingTop;\n\t\t\tscroll = this.activeMenu.scrollTop();\n\t\t\telementHeight = this.activeMenu.height();\n\t\t\titemHeight = item.outerHeight();\n\n\t\t\tif ( offset < 0 ) {\n\t\t\t\tthis.activeMenu.scrollTop( scroll + offset );\n\t\t\t} else if ( offset + itemHeight > elementHeight ) {\n\t\t\t\tthis.activeMenu.scrollTop( scroll + offset - elementHeight + itemHeight );\n\t\t\t}\n\t\t}\n\t},\n\n\tblur: function( event, fromFocus ) {\n\t\tif ( !fromFocus ) {\n\t\t\tclearTimeout( this.timer );\n\t\t}\n\n\t\tif ( !this.active ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.active.removeClass( \"ui-state-focus\" );\n\t\tthis.active = null;\n\n\t\tthis._trigger( \"blur\", event, { item: this.active } );\n\t},\n\n\t_startOpening: function( submenu ) {\n\t\tclearTimeout( this.timer );\n\n\t\t// Don't open if already open fixes a Firefox bug that caused a .5 pixel\n\t\t// shift in the submenu position when mousing over the carat icon\n\t\tif ( submenu.attr( \"aria-hidden\" ) !== \"true\" ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.timer = this._delay(function() {\n\t\t\tthis._close();\n\t\t\tthis._open( submenu );\n\t\t}, this.delay );\n\t},\n\n\t_open: function( submenu ) {\n\t\tvar position = $.extend({\n\t\t\tof: this.active\n\t\t}, this.options.position );\n\n\t\tclearTimeout( this.timer );\n\t\tthis.element.find( \".ui-menu\" ).not( submenu.parents( \".ui-menu\" ) )\n\t\t\t.hide()\n\t\t\t.attr( \"aria-hidden\", \"true\" );\n\n\t\tsubmenu\n\t\t\t.show()\n\t\t\t.removeAttr( \"aria-hidden\" )\n\t\t\t.attr( \"aria-expanded\", \"true\" )\n\t\t\t.position( position );\n\t},\n\n\tcollapseAll: function( event, all ) {\n\t\tclearTimeout( this.timer );\n\t\tthis.timer = this._delay(function() {\n\t\t\t// If we were passed an event, look for the submenu that contains the event\n\t\t\tvar currentMenu = all ? this.element :\n\t\t\t\t$( event && event.target ).closest( this.element.find( \".ui-menu\" ) );\n\n\t\t\t// If we found no valid submenu ancestor, use the main menu to close all sub menus anyway\n\t\t\tif ( !currentMenu.length ) {\n\t\t\t\tcurrentMenu = this.element;\n\t\t\t}\n\n\t\t\tthis._close( currentMenu );\n\n\t\t\tthis.blur( event );\n\t\t\tthis.activeMenu = currentMenu;\n\t\t}, this.delay );\n\t},\n\n\t// With no arguments, closes the currently active menu - if nothing is active\n\t// it closes all menus.  If passed an argument, it will search for menus BELOW\n\t_close: function( startMenu ) {\n\t\tif ( !startMenu ) {\n\t\t\tstartMenu = this.active ? this.active.parent() : this.element;\n\t\t}\n\n\t\tstartMenu\n\t\t\t.find( \".ui-menu\" )\n\t\t\t\t.hide()\n\t\t\t\t.attr( \"aria-hidden\", \"true\" )\n\t\t\t\t.attr( \"aria-expanded\", \"false\" )\n\t\t\t.end()\n\t\t\t.find( \".ui-state-active\" ).not( \".ui-state-focus\" )\n\t\t\t\t.removeClass( \"ui-state-active\" );\n\t},\n\n\t_closeOnDocumentClick: function( event ) {\n\t\treturn !$( event.target ).closest( \".ui-menu\" ).length;\n\t},\n\n\t_isDivider: function( item ) {\n\n\t\t// Match hyphen, em dash, en dash\n\t\treturn !/[^\\-\\u2014\\u2013\\s]/.test( item.text() );\n\t},\n\n\tcollapse: function( event ) {\n\t\tvar newItem = this.active &&\n\t\t\tthis.active.parent().closest( \".ui-menu-item\", this.element );\n\t\tif ( newItem && newItem.length ) {\n\t\t\tthis._close();\n\t\t\tthis.focus( event, newItem );\n\t\t}\n\t},\n\n\texpand: function( event ) {\n\t\tvar newItem = this.active &&\n\t\t\tthis.active\n\t\t\t\t.children( \".ui-menu \" )\n\t\t\t\t.find( this.options.items )\n\t\t\t\t.first();\n\n\t\tif ( newItem && newItem.length ) {\n\t\t\tthis._open( newItem.parent() );\n\n\t\t\t// Delay so Firefox will not hide activedescendant change in expanding submenu from AT\n\t\t\tthis._delay(function() {\n\t\t\t\tthis.focus( event, newItem );\n\t\t\t});\n\t\t}\n\t},\n\n\tnext: function( event ) {\n\t\tthis._move( \"next\", \"first\", event );\n\t},\n\n\tprevious: function( event ) {\n\t\tthis._move( \"prev\", \"last\", event );\n\t},\n\n\tisFirstItem: function() {\n\t\treturn this.active && !this.active.prevAll( \".ui-menu-item\" ).length;\n\t},\n\n\tisLastItem: function() {\n\t\treturn this.active && !this.active.nextAll( \".ui-menu-item\" ).length;\n\t},\n\n\t_move: function( direction, filter, event ) {\n\t\tvar next;\n\t\tif ( this.active ) {\n\t\t\tif ( direction === \"first\" || direction === \"last\" ) {\n\t\t\t\tnext = this.active\n\t\t\t\t\t[ direction === \"first\" ? \"prevAll\" : \"nextAll\" ]( \".ui-menu-item\" )\n\t\t\t\t\t.eq( -1 );\n\t\t\t} else {\n\t\t\t\tnext = this.active\n\t\t\t\t\t[ direction + \"All\" ]( \".ui-menu-item\" )\n\t\t\t\t\t.eq( 0 );\n\t\t\t}\n\t\t}\n\t\tif ( !next || !next.length || !this.active ) {\n\t\t\tnext = this.activeMenu.find( this.options.items )[ filter ]();\n\t\t}\n\n\t\tthis.focus( event, next );\n\t},\n\n\tnextPage: function( event ) {\n\t\tvar item, base, height;\n\n\t\tif ( !this.active ) {\n\t\t\tthis.next( event );\n\t\t\treturn;\n\t\t}\n\t\tif ( this.isLastItem() ) {\n\t\t\treturn;\n\t\t}\n\t\tif ( this._hasScroll() ) {\n\t\t\tbase = this.active.offset().top;\n\t\t\theight = this.element.height();\n\t\t\tthis.active.nextAll( \".ui-menu-item\" ).each(function() {\n\t\t\t\titem = $( this );\n\t\t\t\treturn item.offset().top - base - height < 0;\n\t\t\t});\n\n\t\t\tthis.focus( event, item );\n\t\t} else {\n\t\t\tthis.focus( event, this.activeMenu.find( this.options.items )\n\t\t\t\t[ !this.active ? \"first\" : \"last\" ]() );\n\t\t}\n\t},\n\n\tpreviousPage: function( event ) {\n\t\tvar item, base, height;\n\t\tif ( !this.active ) {\n\t\t\tthis.next( event );\n\t\t\treturn;\n\t\t}\n\t\tif ( this.isFirstItem() ) {\n\t\t\treturn;\n\t\t}\n\t\tif ( this._hasScroll() ) {\n\t\t\tbase = this.active.offset().top;\n\t\t\theight = this.element.height();\n\t\t\tthis.active.prevAll( \".ui-menu-item\" ).each(function() {\n\t\t\t\titem = $( this );\n\t\t\t\treturn item.offset().top - base + height > 0;\n\t\t\t});\n\n\t\t\tthis.focus( event, item );\n\t\t} else {\n\t\t\tthis.focus( event, this.activeMenu.find( this.options.items ).first() );\n\t\t}\n\t},\n\n\t_hasScroll: function() {\n\t\treturn this.element.outerHeight() < this.element.prop( \"scrollHeight\" );\n\t},\n\n\tselect: function( event ) {\n\t\t// TODO: It should never be possible to not have an active item at this\n\t\t// point, but the tests don't trigger mouseenter before click.\n\t\tthis.active = this.active || $( event.target ).closest( \".ui-menu-item\" );\n\t\tvar ui = { item: this.active };\n\t\tif ( !this.active.has( \".ui-menu\" ).length ) {\n\t\t\tthis.collapseAll( event, true );\n\t\t}\n\t\tthis._trigger( \"select\", event, ui );\n\t},\n\n\t_filterMenuItems: function(character) {\n\t\tvar escapedCharacter = character.replace( /[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, \"\\\\$&\" ),\n\t\t\tregex = new RegExp( \"^\" + escapedCharacter, \"i\" );\n\n\t\treturn this.activeMenu\n\t\t\t.find( this.options.items )\n\n\t\t\t// Only match on items, not dividers or other content (#10571)\n\t\t\t.filter( \".ui-menu-item\" )\n\t\t\t.filter(function() {\n\t\t\t\treturn regex.test( $.trim( $( this ).text() ) );\n\t\t\t});\n\t}\n});\n\n\n/*!\n * jQuery UI Autocomplete 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/autocomplete/\n */\n\n\n$.widget( \"ui.autocomplete\", {\n\tversion: \"1.11.4\",\n\tdefaultElement: \"<input>\",\n\toptions: {\n\t\tappendTo: null,\n\t\tautoFocus: false,\n\t\tdelay: 300,\n\t\tminLength: 1,\n\t\tposition: {\n\t\t\tmy: \"left top\",\n\t\t\tat: \"left bottom\",\n\t\t\tcollision: \"none\"\n\t\t},\n\t\tsource: null,\n\n\t\t// callbacks\n\t\tchange: null,\n\t\tclose: null,\n\t\tfocus: null,\n\t\topen: null,\n\t\tresponse: null,\n\t\tsearch: null,\n\t\tselect: null\n\t},\n\n\trequestIndex: 0,\n\tpending: 0,\n\n\t_create: function() {\n\t\t// Some browsers only repeat keydown events, not keypress events,\n\t\t// so we use the suppressKeyPress flag to determine if we've already\n\t\t// handled the keydown event. #7269\n\t\t// Unfortunately the code for & in keypress is the same as the up arrow,\n\t\t// so we use the suppressKeyPressRepeat flag to avoid handling keypress\n\t\t// events when we know the keydown event was used to modify the\n\t\t// search term. #7799\n\t\tvar suppressKeyPress, suppressKeyPressRepeat, suppressInput,\n\t\t\tnodeName = this.element[ 0 ].nodeName.toLowerCase(),\n\t\t\tisTextarea = nodeName === \"textarea\",\n\t\t\tisInput = nodeName === \"input\";\n\n\t\tthis.isMultiLine =\n\t\t\t// Textareas are always multi-line\n\t\t\tisTextarea ? true :\n\t\t\t// Inputs are always single-line, even if inside a contentEditable element\n\t\t\t// IE also treats inputs as contentEditable\n\t\t\tisInput ? false :\n\t\t\t// All other element types are determined by whether or not they're contentEditable\n\t\t\tthis.element.prop( \"isContentEditable\" );\n\n\t\tthis.valueMethod = this.element[ isTextarea || isInput ? \"val\" : \"text\" ];\n\t\tthis.isNewMenu = true;\n\n\t\tthis.element\n\t\t\t.addClass( \"ui-autocomplete-input\" )\n\t\t\t.attr( \"autocomplete\", \"off\" );\n\n\t\tthis._on( this.element, {\n\t\t\tkeydown: function( event ) {\n\t\t\t\tif ( this.element.prop( \"readOnly\" ) ) {\n\t\t\t\t\tsuppressKeyPress = true;\n\t\t\t\t\tsuppressInput = true;\n\t\t\t\t\tsuppressKeyPressRepeat = true;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tsuppressKeyPress = false;\n\t\t\t\tsuppressInput = false;\n\t\t\t\tsuppressKeyPressRepeat = false;\n\t\t\t\tvar keyCode = $.ui.keyCode;\n\t\t\t\tswitch ( event.keyCode ) {\n\t\t\t\tcase keyCode.PAGE_UP:\n\t\t\t\t\tsuppressKeyPress = true;\n\t\t\t\t\tthis._move( \"previousPage\", event );\n\t\t\t\t\tbreak;\n\t\t\t\tcase keyCode.PAGE_DOWN:\n\t\t\t\t\tsuppressKeyPress = true;\n\t\t\t\t\tthis._move( \"nextPage\", event );\n\t\t\t\t\tbreak;\n\t\t\t\tcase keyCode.UP:\n\t\t\t\t\tsuppressKeyPress = true;\n\t\t\t\t\tthis._keyEvent( \"previous\", event );\n\t\t\t\t\tbreak;\n\t\t\t\tcase keyCode.DOWN:\n\t\t\t\t\tsuppressKeyPress = true;\n\t\t\t\t\tthis._keyEvent( \"next\", event );\n\t\t\t\t\tbreak;\n\t\t\t\tcase keyCode.ENTER:\n\t\t\t\t\t// when menu is open and has focus\n\t\t\t\t\tif ( this.menu.active ) {\n\t\t\t\t\t\t// #6055 - Opera still allows the keypress to occur\n\t\t\t\t\t\t// which causes forms to submit\n\t\t\t\t\t\tsuppressKeyPress = true;\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tthis.menu.select( event );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase keyCode.TAB:\n\t\t\t\t\tif ( this.menu.active ) {\n\t\t\t\t\t\tthis.menu.select( event );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase keyCode.ESCAPE:\n\t\t\t\t\tif ( this.menu.element.is( \":visible\" ) ) {\n\t\t\t\t\t\tif ( !this.isMultiLine ) {\n\t\t\t\t\t\t\tthis._value( this.term );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.close( event );\n\t\t\t\t\t\t// Different browsers have different default behavior for escape\n\t\t\t\t\t\t// Single press can mean undo or clear\n\t\t\t\t\t\t// Double press in IE means clear the whole form\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tsuppressKeyPressRepeat = true;\n\t\t\t\t\t// search timeout should be triggered before the input value is changed\n\t\t\t\t\tthis._searchTimeout( event );\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t},\n\t\t\tkeypress: function( event ) {\n\t\t\t\tif ( suppressKeyPress ) {\n\t\t\t\t\tsuppressKeyPress = false;\n\t\t\t\t\tif ( !this.isMultiLine || this.menu.element.is( \":visible\" ) ) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif ( suppressKeyPressRepeat ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// replicate some key handlers to allow them to repeat in Firefox and Opera\n\t\t\t\tvar keyCode = $.ui.keyCode;\n\t\t\t\tswitch ( event.keyCode ) {\n\t\t\t\tcase keyCode.PAGE_UP:\n\t\t\t\t\tthis._move( \"previousPage\", event );\n\t\t\t\t\tbreak;\n\t\t\t\tcase keyCode.PAGE_DOWN:\n\t\t\t\t\tthis._move( \"nextPage\", event );\n\t\t\t\t\tbreak;\n\t\t\t\tcase keyCode.UP:\n\t\t\t\t\tthis._keyEvent( \"previous\", event );\n\t\t\t\t\tbreak;\n\t\t\t\tcase keyCode.DOWN:\n\t\t\t\t\tthis._keyEvent( \"next\", event );\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t},\n\t\t\tinput: function( event ) {\n\t\t\t\tif ( suppressInput ) {\n\t\t\t\t\tsuppressInput = false;\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._searchTimeout( event );\n\t\t\t},\n\t\t\tfocus: function() {\n\t\t\t\tthis.selectedItem = null;\n\t\t\t\tthis.previous = this._value();\n\t\t\t},\n\t\t\tblur: function( event ) {\n\t\t\t\tif ( this.cancelBlur ) {\n\t\t\t\t\tdelete this.cancelBlur;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tclearTimeout( this.searching );\n\t\t\t\tthis.close( event );\n\t\t\t\tthis._change( event );\n\t\t\t}\n\t\t});\n\n\t\tthis._initSource();\n\t\tthis.menu = $( \"<ul>\" )\n\t\t\t.addClass( \"ui-autocomplete ui-front\" )\n\t\t\t.appendTo( this._appendTo() )\n\t\t\t.menu({\n\t\t\t\t// disable ARIA support, the live region takes care of that\n\t\t\t\trole: null\n\t\t\t})\n\t\t\t.hide()\n\t\t\t.menu( \"instance\" );\n\n\t\tthis._on( this.menu.element, {\n\t\t\tmousedown: function( event ) {\n\t\t\t\t// prevent moving focus out of the text field\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\t// IE doesn't prevent moving focus even with event.preventDefault()\n\t\t\t\t// so we set a flag to know when we should ignore the blur event\n\t\t\t\tthis.cancelBlur = true;\n\t\t\t\tthis._delay(function() {\n\t\t\t\t\tdelete this.cancelBlur;\n\t\t\t\t});\n\n\t\t\t\t// clicking on the scrollbar causes focus to shift to the body\n\t\t\t\t// but we can't detect a mouseup or a click immediately afterward\n\t\t\t\t// so we have to track the next mousedown and close the menu if\n\t\t\t\t// the user clicks somewhere outside of the autocomplete\n\t\t\t\tvar menuElement = this.menu.element[ 0 ];\n\t\t\t\tif ( !$( event.target ).closest( \".ui-menu-item\" ).length ) {\n\t\t\t\t\tthis._delay(function() {\n\t\t\t\t\t\tvar that = this;\n\t\t\t\t\t\tthis.document.one( \"mousedown\", function( event ) {\n\t\t\t\t\t\t\tif ( event.target !== that.element[ 0 ] &&\n\t\t\t\t\t\t\t\t\tevent.target !== menuElement &&\n\t\t\t\t\t\t\t\t\t!$.contains( menuElement, event.target ) ) {\n\t\t\t\t\t\t\t\tthat.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tmenufocus: function( event, ui ) {\n\t\t\t\tvar label, item;\n\t\t\t\t// support: Firefox\n\t\t\t\t// Prevent accidental activation of menu items in Firefox (#7024 #9118)\n\t\t\t\tif ( this.isNewMenu ) {\n\t\t\t\t\tthis.isNewMenu = false;\n\t\t\t\t\tif ( event.originalEvent && /^mouse/.test( event.originalEvent.type ) ) {\n\t\t\t\t\t\tthis.menu.blur();\n\n\t\t\t\t\t\tthis.document.one( \"mousemove\", function() {\n\t\t\t\t\t\t\t$( event.target ).trigger( event.originalEvent );\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\titem = ui.item.data( \"ui-autocomplete-item\" );\n\t\t\t\tif ( false !== this._trigger( \"focus\", event, { item: item } ) ) {\n\t\t\t\t\t// use value to match what will end up in the input, if it was a key event\n\t\t\t\t\tif ( event.originalEvent && /^key/.test( event.originalEvent.type ) ) {\n\t\t\t\t\t\tthis._value( item.value );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Announce the value in the liveRegion\n\t\t\t\tlabel = ui.item.attr( \"aria-label\" ) || item.value;\n\t\t\t\tif ( label && $.trim( label ).length ) {\n\t\t\t\t\tthis.liveRegion.children().hide();\n\t\t\t\t\t$( \"<div>\" ).text( label ).appendTo( this.liveRegion );\n\t\t\t\t}\n\t\t\t},\n\t\t\tmenuselect: function( event, ui ) {\n\t\t\t\tvar item = ui.item.data( \"ui-autocomplete-item\" ),\n\t\t\t\t\tprevious = this.previous;\n\n\t\t\t\t// only trigger when focus was lost (click on menu)\n\t\t\t\tif ( this.element[ 0 ] !== this.document[ 0 ].activeElement ) {\n\t\t\t\t\tthis.element.focus();\n\t\t\t\t\tthis.previous = previous;\n\t\t\t\t\t// #6109 - IE triggers two focus events and the second\n\t\t\t\t\t// is asynchronous, so we need to reset the previous\n\t\t\t\t\t// term synchronously and asynchronously :-(\n\t\t\t\t\tthis._delay(function() {\n\t\t\t\t\t\tthis.previous = previous;\n\t\t\t\t\t\tthis.selectedItem = item;\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif ( false !== this._trigger( \"select\", event, { item: item } ) ) {\n\t\t\t\t\tthis._value( item.value );\n\t\t\t\t}\n\t\t\t\t// reset the term after the select event\n\t\t\t\t// this allows custom select handling to work properly\n\t\t\t\tthis.term = this._value();\n\n\t\t\t\tthis.close( event );\n\t\t\t\tthis.selectedItem = item;\n\t\t\t}\n\t\t});\n\n\t\tthis.liveRegion = $( \"<span>\", {\n\t\t\t\trole: \"status\",\n\t\t\t\t\"aria-live\": \"assertive\",\n\t\t\t\t\"aria-relevant\": \"additions\"\n\t\t\t})\n\t\t\t.addClass( \"ui-helper-hidden-accessible\" )\n\t\t\t.appendTo( this.document[ 0 ].body );\n\n\t\t// turning off autocomplete prevents the browser from remembering the\n\t\t// value when navigating through history, so we re-enable autocomplete\n\t\t// if the page is unloaded before the widget is destroyed. #7790\n\t\tthis._on( this.window, {\n\t\t\tbeforeunload: function() {\n\t\t\t\tthis.element.removeAttr( \"autocomplete\" );\n\t\t\t}\n\t\t});\n\t},\n\n\t_destroy: function() {\n\t\tclearTimeout( this.searching );\n\t\tthis.element\n\t\t\t.removeClass( \"ui-autocomplete-input\" )\n\t\t\t.removeAttr( \"autocomplete\" );\n\t\tthis.menu.element.remove();\n\t\tthis.liveRegion.remove();\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tthis._super( key, value );\n\t\tif ( key === \"source\" ) {\n\t\t\tthis._initSource();\n\t\t}\n\t\tif ( key === \"appendTo\" ) {\n\t\t\tthis.menu.element.appendTo( this._appendTo() );\n\t\t}\n\t\tif ( key === \"disabled\" && value && this.xhr ) {\n\t\t\tthis.xhr.abort();\n\t\t}\n\t},\n\n\t_appendTo: function() {\n\t\tvar element = this.options.appendTo;\n\n\t\tif ( element ) {\n\t\t\telement = element.jquery || element.nodeType ?\n\t\t\t\t$( element ) :\n\t\t\t\tthis.document.find( element ).eq( 0 );\n\t\t}\n\n\t\tif ( !element || !element[ 0 ] ) {\n\t\t\telement = this.element.closest( \".ui-front\" );\n\t\t}\n\n\t\tif ( !element.length ) {\n\t\t\telement = this.document[ 0 ].body;\n\t\t}\n\n\t\treturn element;\n\t},\n\n\t_initSource: function() {\n\t\tvar array, url,\n\t\t\tthat = this;\n\t\tif ( $.isArray( this.options.source ) ) {\n\t\t\tarray = this.options.source;\n\t\t\tthis.source = function( request, response ) {\n\t\t\t\tresponse( $.ui.autocomplete.filter( array, request.term ) );\n\t\t\t};\n\t\t} else if ( typeof this.options.source === \"string\" ) {\n\t\t\turl = this.options.source;\n\t\t\tthis.source = function( request, response ) {\n\t\t\t\tif ( that.xhr ) {\n\t\t\t\t\tthat.xhr.abort();\n\t\t\t\t}\n\t\t\t\tthat.xhr = $.ajax({\n\t\t\t\t\turl: url,\n\t\t\t\t\tdata: request,\n\t\t\t\t\tdataType: \"json\",\n\t\t\t\t\tsuccess: function( data ) {\n\t\t\t\t\t\tresponse( data );\n\t\t\t\t\t},\n\t\t\t\t\terror: function() {\n\t\t\t\t\t\tresponse([]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\t\t} else {\n\t\t\tthis.source = this.options.source;\n\t\t}\n\t},\n\n\t_searchTimeout: function( event ) {\n\t\tclearTimeout( this.searching );\n\t\tthis.searching = this._delay(function() {\n\n\t\t\t// Search if the value has changed, or if the user retypes the same value (see #7434)\n\t\t\tvar equalValues = this.term === this._value(),\n\t\t\t\tmenuVisible = this.menu.element.is( \":visible\" ),\n\t\t\t\tmodifierKey = event.altKey || event.ctrlKey || event.metaKey || event.shiftKey;\n\n\t\t\tif ( !equalValues || ( equalValues && !menuVisible && !modifierKey ) ) {\n\t\t\t\tthis.selectedItem = null;\n\t\t\t\tthis.search( null, event );\n\t\t\t}\n\t\t}, this.options.delay );\n\t},\n\n\tsearch: function( value, event ) {\n\t\tvalue = value != null ? value : this._value();\n\n\t\t// always save the actual value, not the one passed as an argument\n\t\tthis.term = this._value();\n\n\t\tif ( value.length < this.options.minLength ) {\n\t\t\treturn this.close( event );\n\t\t}\n\n\t\tif ( this._trigger( \"search\", event ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn this._search( value );\n\t},\n\n\t_search: function( value ) {\n\t\tthis.pending++;\n\t\tthis.element.addClass( \"ui-autocomplete-loading\" );\n\t\tthis.cancelSearch = false;\n\n\t\tthis.source( { term: value }, this._response() );\n\t},\n\n\t_response: function() {\n\t\tvar index = ++this.requestIndex;\n\n\t\treturn $.proxy(function( content ) {\n\t\t\tif ( index === this.requestIndex ) {\n\t\t\t\tthis.__response( content );\n\t\t\t}\n\n\t\t\tthis.pending--;\n\t\t\tif ( !this.pending ) {\n\t\t\t\tthis.element.removeClass( \"ui-autocomplete-loading\" );\n\t\t\t}\n\t\t}, this );\n\t},\n\n\t__response: function( content ) {\n\t\tif ( content ) {\n\t\t\tcontent = this._normalize( content );\n\t\t}\n\t\tthis._trigger( \"response\", null, { content: content } );\n\t\tif ( !this.options.disabled && content && content.length && !this.cancelSearch ) {\n\t\t\tthis._suggest( content );\n\t\t\tthis._trigger( \"open\" );\n\t\t} else {\n\t\t\t// use ._close() instead of .close() so we don't cancel future searches\n\t\t\tthis._close();\n\t\t}\n\t},\n\n\tclose: function( event ) {\n\t\tthis.cancelSearch = true;\n\t\tthis._close( event );\n\t},\n\n\t_close: function( event ) {\n\t\tif ( this.menu.element.is( \":visible\" ) ) {\n\t\t\tthis.menu.element.hide();\n\t\t\tthis.menu.blur();\n\t\t\tthis.isNewMenu = true;\n\t\t\tthis._trigger( \"close\", event );\n\t\t}\n\t},\n\n\t_change: function( event ) {\n\t\tif ( this.previous !== this._value() ) {\n\t\t\tthis._trigger( \"change\", event, { item: this.selectedItem } );\n\t\t}\n\t},\n\n\t_normalize: function( items ) {\n\t\t// assume all items have the right format when the first item is complete\n\t\tif ( items.length && items[ 0 ].label && items[ 0 ].value ) {\n\t\t\treturn items;\n\t\t}\n\t\treturn $.map( items, function( item ) {\n\t\t\tif ( typeof item === \"string\" ) {\n\t\t\t\treturn {\n\t\t\t\t\tlabel: item,\n\t\t\t\t\tvalue: item\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn $.extend( {}, item, {\n\t\t\t\tlabel: item.label || item.value,\n\t\t\t\tvalue: item.value || item.label\n\t\t\t});\n\t\t});\n\t},\n\n\t_suggest: function( items ) {\n\t\tvar ul = this.menu.element.empty();\n\t\tthis._renderMenu( ul, items );\n\t\tthis.isNewMenu = true;\n\t\tthis.menu.refresh();\n\n\t\t// size and position menu\n\t\tul.show();\n\t\tthis._resizeMenu();\n\t\tul.position( $.extend({\n\t\t\tof: this.element\n\t\t}, this.options.position ) );\n\n\t\tif ( this.options.autoFocus ) {\n\t\t\tthis.menu.next();\n\t\t}\n\t},\n\n\t_resizeMenu: function() {\n\t\tvar ul = this.menu.element;\n\t\tul.outerWidth( Math.max(\n\t\t\t// Firefox wraps long text (possibly a rounding bug)\n\t\t\t// so we add 1px to avoid the wrapping (#7513)\n\t\t\tul.width( \"\" ).outerWidth() + 1,\n\t\t\tthis.element.outerWidth()\n\t\t) );\n\t},\n\n\t_renderMenu: function( ul, items ) {\n\t\tvar that = this;\n\t\t$.each( items, function( index, item ) {\n\t\t\tthat._renderItemData( ul, item );\n\t\t});\n\t},\n\n\t_renderItemData: function( ul, item ) {\n\t\treturn this._renderItem( ul, item ).data( \"ui-autocomplete-item\", item );\n\t},\n\n\t_renderItem: function( ul, item ) {\n\t\treturn $( \"<li>\" ).text( item.label ).appendTo( ul );\n\t},\n\n\t_move: function( direction, event ) {\n\t\tif ( !this.menu.element.is( \":visible\" ) ) {\n\t\t\tthis.search( null, event );\n\t\t\treturn;\n\t\t}\n\t\tif ( this.menu.isFirstItem() && /^previous/.test( direction ) ||\n\t\t\t\tthis.menu.isLastItem() && /^next/.test( direction ) ) {\n\n\t\t\tif ( !this.isMultiLine ) {\n\t\t\t\tthis._value( this.term );\n\t\t\t}\n\n\t\t\tthis.menu.blur();\n\t\t\treturn;\n\t\t}\n\t\tthis.menu[ direction ]( event );\n\t},\n\n\twidget: function() {\n\t\treturn this.menu.element;\n\t},\n\n\t_value: function() {\n\t\treturn this.valueMethod.apply( this.element, arguments );\n\t},\n\n\t_keyEvent: function( keyEvent, event ) {\n\t\tif ( !this.isMultiLine || this.menu.element.is( \":visible\" ) ) {\n\t\t\tthis._move( keyEvent, event );\n\n\t\t\t// prevents moving cursor to beginning/end of the text field in some browsers\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n});\n\n$.extend( $.ui.autocomplete, {\n\tescapeRegex: function( value ) {\n\t\treturn value.replace( /[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, \"\\\\$&\" );\n\t},\n\tfilter: function( array, term ) {\n\t\tvar matcher = new RegExp( $.ui.autocomplete.escapeRegex( term ), \"i\" );\n\t\treturn $.grep( array, function( value ) {\n\t\t\treturn matcher.test( value.label || value.value || value );\n\t\t});\n\t}\n});\n\n// live region extension, adding a `messages` option\n// NOTE: This is an experimental API. We are still investigating\n// a full solution for string manipulation and internationalization.\n$.widget( \"ui.autocomplete\", $.ui.autocomplete, {\n\toptions: {\n\t\tmessages: {\n\t\t\tnoResults: \"No search results.\",\n\t\t\tresults: function( amount ) {\n\t\t\t\treturn amount + ( amount > 1 ? \" results are\" : \" result is\" ) +\n\t\t\t\t\t\" available, use up and down arrow keys to navigate.\";\n\t\t\t}\n\t\t}\n\t},\n\n\t__response: function( content ) {\n\t\tvar message;\n\t\tthis._superApply( arguments );\n\t\tif ( this.options.disabled || this.cancelSearch ) {\n\t\t\treturn;\n\t\t}\n\t\tif ( content && content.length ) {\n\t\t\tmessage = this.options.messages.results( content.length );\n\t\t} else {\n\t\t\tmessage = this.options.messages.noResults;\n\t\t}\n\t\tthis.liveRegion.children().hide();\n\t\t$( \"<div>\" ).text( message ).appendTo( this.liveRegion );\n\t}\n});\n\nvar autocomplete = $.ui.autocomplete;\n\n\n/*!\n * jQuery UI Button 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/button/\n */\n\n\nvar lastActive,\n\tbaseClasses = \"ui-button ui-widget ui-state-default ui-corner-all\",\n\ttypeClasses = \"ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only\",\n\tformResetHandler = function() {\n\t\tvar form = $( this );\n\t\tsetTimeout(function() {\n\t\t\tform.find( \":ui-button\" ).button( \"refresh\" );\n\t\t}, 1 );\n\t},\n\tradioGroup = function( radio ) {\n\t\tvar name = radio.name,\n\t\t\tform = radio.form,\n\t\t\tradios = $( [] );\n\t\tif ( name ) {\n\t\t\tname = name.replace( /'/g, \"\\\\'\" );\n\t\t\tif ( form ) {\n\t\t\t\tradios = $( form ).find( \"[name='\" + name + \"'][type=radio]\" );\n\t\t\t} else {\n\t\t\t\tradios = $( \"[name='\" + name + \"'][type=radio]\", radio.ownerDocument )\n\t\t\t\t\t.filter(function() {\n\t\t\t\t\t\treturn !this.form;\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn radios;\n\t};\n\n$.widget( \"ui.button\", {\n\tversion: \"1.11.4\",\n\tdefaultElement: \"<button>\",\n\toptions: {\n\t\tdisabled: null,\n\t\ttext: true,\n\t\tlabel: null,\n\t\ticons: {\n\t\t\tprimary: null,\n\t\t\tsecondary: null\n\t\t}\n\t},\n\t_create: function() {\n\t\tthis.element.closest( \"form\" )\n\t\t\t.unbind( \"reset\" + this.eventNamespace )\n\t\t\t.bind( \"reset\" + this.eventNamespace, formResetHandler );\n\n\t\tif ( typeof this.options.disabled !== \"boolean\" ) {\n\t\t\tthis.options.disabled = !!this.element.prop( \"disabled\" );\n\t\t} else {\n\t\t\tthis.element.prop( \"disabled\", this.options.disabled );\n\t\t}\n\n\t\tthis._determineButtonType();\n\t\tthis.hasTitle = !!this.buttonElement.attr( \"title\" );\n\n\t\tvar that = this,\n\t\t\toptions = this.options,\n\t\t\ttoggleButton = this.type === \"checkbox\" || this.type === \"radio\",\n\t\t\tactiveClass = !toggleButton ? \"ui-state-active\" : \"\";\n\n\t\tif ( options.label === null ) {\n\t\t\toptions.label = (this.type === \"input\" ? this.buttonElement.val() : this.buttonElement.html());\n\t\t}\n\n\t\tthis._hoverable( this.buttonElement );\n\n\t\tthis.buttonElement\n\t\t\t.addClass( baseClasses )\n\t\t\t.attr( \"role\", \"button\" )\n\t\t\t.bind( \"mouseenter\" + this.eventNamespace, function() {\n\t\t\t\tif ( options.disabled ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif ( this === lastActive ) {\n\t\t\t\t\t$( this ).addClass( \"ui-state-active\" );\n\t\t\t\t}\n\t\t\t})\n\t\t\t.bind( \"mouseleave\" + this.eventNamespace, function() {\n\t\t\t\tif ( options.disabled ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t$( this ).removeClass( activeClass );\n\t\t\t})\n\t\t\t.bind( \"click\" + this.eventNamespace, function( event ) {\n\t\t\t\tif ( options.disabled ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t\t}\n\t\t\t});\n\n\t\t// Can't use _focusable() because the element that receives focus\n\t\t// and the element that gets the ui-state-focus class are different\n\t\tthis._on({\n\t\t\tfocus: function() {\n\t\t\t\tthis.buttonElement.addClass( \"ui-state-focus\" );\n\t\t\t},\n\t\t\tblur: function() {\n\t\t\t\tthis.buttonElement.removeClass( \"ui-state-focus\" );\n\t\t\t}\n\t\t});\n\n\t\tif ( toggleButton ) {\n\t\t\tthis.element.bind( \"change\" + this.eventNamespace, function() {\n\t\t\t\tthat.refresh();\n\t\t\t});\n\t\t}\n\n\t\tif ( this.type === \"checkbox\" ) {\n\t\t\tthis.buttonElement.bind( \"click\" + this.eventNamespace, function() {\n\t\t\t\tif ( options.disabled ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t} else if ( this.type === \"radio\" ) {\n\t\t\tthis.buttonElement.bind( \"click\" + this.eventNamespace, function() {\n\t\t\t\tif ( options.disabled ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t$( this ).addClass( \"ui-state-active\" );\n\t\t\t\tthat.buttonElement.attr( \"aria-pressed\", \"true\" );\n\n\t\t\t\tvar radio = that.element[ 0 ];\n\t\t\t\tradioGroup( radio )\n\t\t\t\t\t.not( radio )\n\t\t\t\t\t.map(function() {\n\t\t\t\t\t\treturn $( this ).button( \"widget\" )[ 0 ];\n\t\t\t\t\t})\n\t\t\t\t\t.removeClass( \"ui-state-active\" )\n\t\t\t\t\t.attr( \"aria-pressed\", \"false\" );\n\t\t\t});\n\t\t} else {\n\t\t\tthis.buttonElement\n\t\t\t\t.bind( \"mousedown\" + this.eventNamespace, function() {\n\t\t\t\t\tif ( options.disabled ) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\t$( this ).addClass( \"ui-state-active\" );\n\t\t\t\t\tlastActive = this;\n\t\t\t\t\tthat.document.one( \"mouseup\", function() {\n\t\t\t\t\t\tlastActive = null;\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.bind( \"mouseup\" + this.eventNamespace, function() {\n\t\t\t\t\tif ( options.disabled ) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\t$( this ).removeClass( \"ui-state-active\" );\n\t\t\t\t})\n\t\t\t\t.bind( \"keydown\" + this.eventNamespace, function(event) {\n\t\t\t\t\tif ( options.disabled ) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tif ( event.keyCode === $.ui.keyCode.SPACE || event.keyCode === $.ui.keyCode.ENTER ) {\n\t\t\t\t\t\t$( this ).addClass( \"ui-state-active\" );\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t// see #8559, we bind to blur here in case the button element loses\n\t\t\t\t// focus between keydown and keyup, it would be left in an \"active\" state\n\t\t\t\t.bind( \"keyup\" + this.eventNamespace + \" blur\" + this.eventNamespace, function() {\n\t\t\t\t\t$( this ).removeClass( \"ui-state-active\" );\n\t\t\t\t});\n\n\t\t\tif ( this.buttonElement.is(\"a\") ) {\n\t\t\t\tthis.buttonElement.keyup(function(event) {\n\t\t\t\t\tif ( event.keyCode === $.ui.keyCode.SPACE ) {\n\t\t\t\t\t\t// TODO pass through original event correctly (just as 2nd argument doesn't work)\n\t\t\t\t\t\t$( this ).click();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tthis._setOption( \"disabled\", options.disabled );\n\t\tthis._resetButton();\n\t},\n\n\t_determineButtonType: function() {\n\t\tvar ancestor, labelSelector, checked;\n\n\t\tif ( this.element.is(\"[type=checkbox]\") ) {\n\t\t\tthis.type = \"checkbox\";\n\t\t} else if ( this.element.is(\"[type=radio]\") ) {\n\t\t\tthis.type = \"radio\";\n\t\t} else if ( this.element.is(\"input\") ) {\n\t\t\tthis.type = \"input\";\n\t\t} else {\n\t\t\tthis.type = \"button\";\n\t\t}\n\n\t\tif ( this.type === \"checkbox\" || this.type === \"radio\" ) {\n\t\t\t// we don't search against the document in case the element\n\t\t\t// is disconnected from the DOM\n\t\t\tancestor = this.element.parents().last();\n\t\t\tlabelSelector = \"label[for='\" + this.element.attr(\"id\") + \"']\";\n\t\t\tthis.buttonElement = ancestor.find( labelSelector );\n\t\t\tif ( !this.buttonElement.length ) {\n\t\t\t\tancestor = ancestor.length ? ancestor.siblings() : this.element.siblings();\n\t\t\t\tthis.buttonElement = ancestor.filter( labelSelector );\n\t\t\t\tif ( !this.buttonElement.length ) {\n\t\t\t\t\tthis.buttonElement = ancestor.find( labelSelector );\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.element.addClass( \"ui-helper-hidden-accessible\" );\n\n\t\t\tchecked = this.element.is( \":checked\" );\n\t\t\tif ( checked ) {\n\t\t\t\tthis.buttonElement.addClass( \"ui-state-active\" );\n\t\t\t}\n\t\t\tthis.buttonElement.prop( \"aria-pressed\", checked );\n\t\t} else {\n\t\t\tthis.buttonElement = this.element;\n\t\t}\n\t},\n\n\twidget: function() {\n\t\treturn this.buttonElement;\n\t},\n\n\t_destroy: function() {\n\t\tthis.element\n\t\t\t.removeClass( \"ui-helper-hidden-accessible\" );\n\t\tthis.buttonElement\n\t\t\t.removeClass( baseClasses + \" ui-state-active \" + typeClasses )\n\t\t\t.removeAttr( \"role\" )\n\t\t\t.removeAttr( \"aria-pressed\" )\n\t\t\t.html( this.buttonElement.find(\".ui-button-text\").html() );\n\n\t\tif ( !this.hasTitle ) {\n\t\t\tthis.buttonElement.removeAttr( \"title\" );\n\t\t}\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tthis._super( key, value );\n\t\tif ( key === \"disabled\" ) {\n\t\t\tthis.widget().toggleClass( \"ui-state-disabled\", !!value );\n\t\t\tthis.element.prop( \"disabled\", !!value );\n\t\t\tif ( value ) {\n\t\t\t\tif ( this.type === \"checkbox\" || this.type === \"radio\" ) {\n\t\t\t\t\tthis.buttonElement.removeClass( \"ui-state-focus\" );\n\t\t\t\t} else {\n\t\t\t\t\tthis.buttonElement.removeClass( \"ui-state-focus ui-state-active\" );\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tthis._resetButton();\n\t},\n\n\trefresh: function() {\n\t\t//See #8237 & #8828\n\t\tvar isDisabled = this.element.is( \"input, button\" ) ? this.element.is( \":disabled\" ) : this.element.hasClass( \"ui-button-disabled\" );\n\n\t\tif ( isDisabled !== this.options.disabled ) {\n\t\t\tthis._setOption( \"disabled\", isDisabled );\n\t\t}\n\t\tif ( this.type === \"radio\" ) {\n\t\t\tradioGroup( this.element[0] ).each(function() {\n\t\t\t\tif ( $( this ).is( \":checked\" ) ) {\n\t\t\t\t\t$( this ).button( \"widget\" )\n\t\t\t\t\t\t.addClass( \"ui-state-active\" )\n\t\t\t\t\t\t.attr( \"aria-pressed\", \"true\" );\n\t\t\t\t} else {\n\t\t\t\t\t$( this ).button( \"widget\" )\n\t\t\t\t\t\t.removeClass( \"ui-state-active\" )\n\t\t\t\t\t\t.attr( \"aria-pressed\", \"false\" );\n\t\t\t\t}\n\t\t\t});\n\t\t} else if ( this.type === \"checkbox\" ) {\n\t\t\tif ( this.element.is( \":checked\" ) ) {\n\t\t\t\tthis.buttonElement\n\t\t\t\t\t.addClass( \"ui-state-active\" )\n\t\t\t\t\t.attr( \"aria-pressed\", \"true\" );\n\t\t\t} else {\n\t\t\t\tthis.buttonElement\n\t\t\t\t\t.removeClass( \"ui-state-active\" )\n\t\t\t\t\t.attr( \"aria-pressed\", \"false\" );\n\t\t\t}\n\t\t}\n\t},\n\n\t_resetButton: function() {\n\t\tif ( this.type === \"input\" ) {\n\t\t\tif ( this.options.label ) {\n\t\t\t\tthis.element.val( this.options.label );\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tvar buttonElement = this.buttonElement.removeClass( typeClasses ),\n\t\t\tbuttonText = $( \"<span></span>\", this.document[0] )\n\t\t\t\t.addClass( \"ui-button-text\" )\n\t\t\t\t.html( this.options.label )\n\t\t\t\t.appendTo( buttonElement.empty() )\n\t\t\t\t.text(),\n\t\t\ticons = this.options.icons,\n\t\t\tmultipleIcons = icons.primary && icons.secondary,\n\t\t\tbuttonClasses = [];\n\n\t\tif ( icons.primary || icons.secondary ) {\n\t\t\tif ( this.options.text ) {\n\t\t\t\tbuttonClasses.push( \"ui-button-text-icon\" + ( multipleIcons ? \"s\" : ( icons.primary ? \"-primary\" : \"-secondary\" ) ) );\n\t\t\t}\n\n\t\t\tif ( icons.primary ) {\n\t\t\t\tbuttonElement.prepend( \"<span class='ui-button-icon-primary ui-icon \" + icons.primary + \"'></span>\" );\n\t\t\t}\n\n\t\t\tif ( icons.secondary ) {\n\t\t\t\tbuttonElement.append( \"<span class='ui-button-icon-secondary ui-icon \" + icons.secondary + \"'></span>\" );\n\t\t\t}\n\n\t\t\tif ( !this.options.text ) {\n\t\t\t\tbuttonClasses.push( multipleIcons ? \"ui-button-icons-only\" : \"ui-button-icon-only\" );\n\n\t\t\t\tif ( !this.hasTitle ) {\n\t\t\t\t\tbuttonElement.attr( \"title\", $.trim( buttonText ) );\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tbuttonClasses.push( \"ui-button-text-only\" );\n\t\t}\n\t\tbuttonElement.addClass( buttonClasses.join( \" \" ) );\n\t}\n});\n\n$.widget( \"ui.buttonset\", {\n\tversion: \"1.11.4\",\n\toptions: {\n\t\titems: \"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)\"\n\t},\n\n\t_create: function() {\n\t\tthis.element.addClass( \"ui-buttonset\" );\n\t},\n\n\t_init: function() {\n\t\tthis.refresh();\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tif ( key === \"disabled\" ) {\n\t\t\tthis.buttons.button( \"option\", key, value );\n\t\t}\n\n\t\tthis._super( key, value );\n\t},\n\n\trefresh: function() {\n\t\tvar rtl = this.element.css( \"direction\" ) === \"rtl\",\n\t\t\tallButtons = this.element.find( this.options.items ),\n\t\t\texistingButtons = allButtons.filter( \":ui-button\" );\n\n\t\t// Initialize new buttons\n\t\tallButtons.not( \":ui-button\" ).button();\n\n\t\t// Refresh existing buttons\n\t\texistingButtons.button( \"refresh\" );\n\n\t\tthis.buttons = allButtons\n\t\t\t.map(function() {\n\t\t\t\treturn $( this ).button( \"widget\" )[ 0 ];\n\t\t\t})\n\t\t\t\t.removeClass( \"ui-corner-all ui-corner-left ui-corner-right\" )\n\t\t\t\t.filter( \":first\" )\n\t\t\t\t\t.addClass( rtl ? \"ui-corner-right\" : \"ui-corner-left\" )\n\t\t\t\t.end()\n\t\t\t\t.filter( \":last\" )\n\t\t\t\t\t.addClass( rtl ? \"ui-corner-left\" : \"ui-corner-right\" )\n\t\t\t\t.end()\n\t\t\t.end();\n\t},\n\n\t_destroy: function() {\n\t\tthis.element.removeClass( \"ui-buttonset\" );\n\t\tthis.buttons\n\t\t\t.map(function() {\n\t\t\t\treturn $( this ).button( \"widget\" )[ 0 ];\n\t\t\t})\n\t\t\t\t.removeClass( \"ui-corner-left ui-corner-right\" )\n\t\t\t.end()\n\t\t\t.button( \"destroy\" );\n\t}\n});\n\nvar button = $.ui.button;\n\n\n/*!\n * jQuery UI Datepicker 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/datepicker/\n */\n\n\n$.extend($.ui, { datepicker: { version: \"1.11.4\" } });\n\nvar datepicker_instActive;\n\nfunction datepicker_getZindex( elem ) {\n\tvar position, value;\n\twhile ( elem.length && elem[ 0 ] !== document ) {\n\t\t// Ignore z-index if position is set to a value where z-index is ignored by the browser\n\t\t// This makes behavior of this function consistent across browsers\n\t\t// WebKit always returns auto if the element is positioned\n\t\tposition = elem.css( \"position\" );\n\t\tif ( position === \"absolute\" || position === \"relative\" || position === \"fixed\" ) {\n\t\t\t// IE returns 0 when zIndex is not specified\n\t\t\t// other browsers return a string\n\t\t\t// we ignore the case of nested elements with an explicit value of 0\n\t\t\t// <div style=\"z-index: -10;\"><div style=\"z-index: 0;\"></div></div>\n\t\t\tvalue = parseInt( elem.css( \"zIndex\" ), 10 );\n\t\t\tif ( !isNaN( value ) && value !== 0 ) {\n\t\t\t\treturn value;\n\t\t\t}\n\t\t}\n\t\telem = elem.parent();\n\t}\n\n\treturn 0;\n}\n/* Date picker manager.\n   Use the singleton instance of this class, $.datepicker, to interact with the date picker.\n   Settings for (groups of) date pickers are maintained in an instance object,\n   allowing multiple different settings on the same page. */\n\nfunction Datepicker() {\n\tthis._curInst = null; // The current instance in use\n\tthis._keyEvent = false; // If the last event was a key event\n\tthis._disabledInputs = []; // List of date picker inputs that have been disabled\n\tthis._datepickerShowing = false; // True if the popup picker is showing , false if not\n\tthis._inDialog = false; // True if showing within a \"dialog\", false if not\n\tthis._mainDivId = \"ui-datepicker-div\"; // The ID of the main datepicker division\n\tthis._inlineClass = \"ui-datepicker-inline\"; // The name of the inline marker class\n\tthis._appendClass = \"ui-datepicker-append\"; // The name of the append marker class\n\tthis._triggerClass = \"ui-datepicker-trigger\"; // The name of the trigger marker class\n\tthis._dialogClass = \"ui-datepicker-dialog\"; // The name of the dialog marker class\n\tthis._disableClass = \"ui-datepicker-disabled\"; // The name of the disabled covering marker class\n\tthis._unselectableClass = \"ui-datepicker-unselectable\"; // The name of the unselectable cell marker class\n\tthis._currentClass = \"ui-datepicker-current-day\"; // The name of the current day marker class\n\tthis._dayOverClass = \"ui-datepicker-days-cell-over\"; // The name of the day hover marker class\n\tthis.regional = []; // Available regional settings, indexed by language code\n\tthis.regional[\"\"] = { // Default regional settings\n\t\tcloseText: \"Done\", // Display text for close link\n\t\tprevText: \"Prev\", // Display text for previous month link\n\t\tnextText: \"Next\", // Display text for next month link\n\t\tcurrentText: \"Today\", // Display text for current month link\n\t\tmonthNames: [\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\n\t\t\t\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"], // Names of months for drop-down and formatting\n\t\tmonthNamesShort: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"], // For formatting\n\t\tdayNames: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"], // For formatting\n\t\tdayNamesShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"], // For formatting\n\t\tdayNamesMin: [\"Su\",\"Mo\",\"Tu\",\"We\",\"Th\",\"Fr\",\"Sa\"], // Column headings for days starting at Sunday\n\t\tweekHeader: \"Wk\", // Column header for week of the year\n\t\tdateFormat: \"mm/dd/yy\", // See format options on parseDate\n\t\tfirstDay: 0, // The first day of the week, Sun = 0, Mon = 1, ...\n\t\tisRTL: false, // True if right-to-left language, false if left-to-right\n\t\tshowMonthAfterYear: false, // True if the year select precedes month, false for month then year\n\t\tyearSuffix: \"\" // Additional text to append to the year in the month headers\n\t};\n\tthis._defaults = { // Global defaults for all the date picker instances\n\t\tshowOn: \"focus\", // \"focus\" for popup on focus,\n\t\t\t// \"button\" for trigger button, or \"both\" for either\n\t\tshowAnim: \"fadeIn\", // Name of jQuery animation for popup\n\t\tshowOptions: {}, // Options for enhanced animations\n\t\tdefaultDate: null, // Used when field is blank: actual date,\n\t\t\t// +/-number for offset from today, null for today\n\t\tappendText: \"\", // Display text following the input box, e.g. showing the format\n\t\tbuttonText: \"...\", // Text for trigger button\n\t\tbuttonImage: \"\", // URL for trigger button image\n\t\tbuttonImageOnly: false, // True if the image appears alone, false if it appears on a button\n\t\thideIfNoPrevNext: false, // True to hide next/previous month links\n\t\t\t// if not applicable, false to just disable them\n\t\tnavigationAsDateFormat: false, // True if date formatting applied to prev/today/next links\n\t\tgotoCurrent: false, // True if today link goes back to current selection instead\n\t\tchangeMonth: false, // True if month can be selected directly, false if only prev/next\n\t\tchangeYear: false, // True if year can be selected directly, false if only prev/next\n\t\tyearRange: \"c-10:c+10\", // Range of years to display in drop-down,\n\t\t\t// either relative to today's year (-nn:+nn), relative to currently displayed year\n\t\t\t// (c-nn:c+nn), absolute (nnnn:nnnn), or a combination of the above (nnnn:-n)\n\t\tshowOtherMonths: false, // True to show dates in other months, false to leave blank\n\t\tselectOtherMonths: false, // True to allow selection of dates in other months, false for unselectable\n\t\tshowWeek: false, // True to show week of the year, false to not show it\n\t\tcalculateWeek: this.iso8601Week, // How to calculate the week of the year,\n\t\t\t// takes a Date and returns the number of the week for it\n\t\tshortYearCutoff: \"+10\", // Short year values < this are in the current century,\n\t\t\t// > this are in the previous century,\n\t\t\t// string value starting with \"+\" for current year + value\n\t\tminDate: null, // The earliest selectable date, or null for no limit\n\t\tmaxDate: null, // The latest selectable date, or null for no limit\n\t\tduration: \"fast\", // Duration of display/closure\n\t\tbeforeShowDay: null, // Function that takes a date and returns an array with\n\t\t\t// [0] = true if selectable, false if not, [1] = custom CSS class name(s) or \"\",\n\t\t\t// [2] = cell title (optional), e.g. $.datepicker.noWeekends\n\t\tbeforeShow: null, // Function that takes an input field and\n\t\t\t// returns a set of custom settings for the date picker\n\t\tonSelect: null, // Define a callback function when a date is selected\n\t\tonChangeMonthYear: null, // Define a callback function when the month or year is changed\n\t\tonClose: null, // Define a callback function when the datepicker is closed\n\t\tnumberOfMonths: 1, // Number of months to show at a time\n\t\tshowCurrentAtPos: 0, // The position in multipe months at which to show the current month (starting at 0)\n\t\tstepMonths: 1, // Number of months to step back/forward\n\t\tstepBigMonths: 12, // Number of months to step back/forward for the big links\n\t\taltField: \"\", // Selector for an alternate field to store selected dates into\n\t\taltFormat: \"\", // The date format to use for the alternate field\n\t\tconstrainInput: true, // The input is constrained by the current date format\n\t\tshowButtonPanel: false, // True to show button panel, false to not show it\n\t\tautoSize: false, // True to size the input for the date format, false to leave as is\n\t\tdisabled: false // The initial disabled state\n\t};\n\t$.extend(this._defaults, this.regional[\"\"]);\n\tthis.regional.en = $.extend( true, {}, this.regional[ \"\" ]);\n\tthis.regional[ \"en-US\" ] = $.extend( true, {}, this.regional.en );\n\tthis.dpDiv = datepicker_bindHover($(\"<div id='\" + this._mainDivId + \"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>\"));\n}\n\n$.extend(Datepicker.prototype, {\n\t/* Class name added to elements to indicate already configured with a date picker. */\n\tmarkerClassName: \"hasDatepicker\",\n\n\t//Keep track of the maximum number of rows displayed (see #7043)\n\tmaxRows: 4,\n\n\t// TODO rename to \"widget\" when switching to widget factory\n\t_widgetDatepicker: function() {\n\t\treturn this.dpDiv;\n\t},\n\n\t/* Override the default settings for all instances of the date picker.\n\t * @param  settings  object - the new settings to use as defaults (anonymous object)\n\t * @return the manager object\n\t */\n\tsetDefaults: function(settings) {\n\t\tdatepicker_extendRemove(this._defaults, settings || {});\n\t\treturn this;\n\t},\n\n\t/* Attach the date picker to a jQuery selection.\n\t * @param  target\telement - the target input field or division or span\n\t * @param  settings  object - the new settings to use for this date picker instance (anonymous)\n\t */\n\t_attachDatepicker: function(target, settings) {\n\t\tvar nodeName, inline, inst;\n\t\tnodeName = target.nodeName.toLowerCase();\n\t\tinline = (nodeName === \"div\" || nodeName === \"span\");\n\t\tif (!target.id) {\n\t\t\tthis.uuid += 1;\n\t\t\ttarget.id = \"dp\" + this.uuid;\n\t\t}\n\t\tinst = this._newInst($(target), inline);\n\t\tinst.settings = $.extend({}, settings || {});\n\t\tif (nodeName === \"input\") {\n\t\t\tthis._connectDatepicker(target, inst);\n\t\t} else if (inline) {\n\t\t\tthis._inlineDatepicker(target, inst);\n\t\t}\n\t},\n\n\t/* Create a new instance object. */\n\t_newInst: function(target, inline) {\n\t\tvar id = target[0].id.replace(/([^A-Za-z0-9_\\-])/g, \"\\\\\\\\$1\"); // escape jQuery meta chars\n\t\treturn {id: id, input: target, // associated target\n\t\t\tselectedDay: 0, selectedMonth: 0, selectedYear: 0, // current selection\n\t\t\tdrawMonth: 0, drawYear: 0, // month being drawn\n\t\t\tinline: inline, // is datepicker inline or not\n\t\t\tdpDiv: (!inline ? this.dpDiv : // presentation div\n\t\t\tdatepicker_bindHover($(\"<div class='\" + this._inlineClass + \" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>\")))};\n\t},\n\n\t/* Attach the date picker to an input field. */\n\t_connectDatepicker: function(target, inst) {\n\t\tvar input = $(target);\n\t\tinst.append = $([]);\n\t\tinst.trigger = $([]);\n\t\tif (input.hasClass(this.markerClassName)) {\n\t\t\treturn;\n\t\t}\n\t\tthis._attachments(input, inst);\n\t\tinput.addClass(this.markerClassName).keydown(this._doKeyDown).\n\t\t\tkeypress(this._doKeyPress).keyup(this._doKeyUp);\n\t\tthis._autoSize(inst);\n\t\t$.data(target, \"datepicker\", inst);\n\t\t//If disabled option is true, disable the datepicker once it has been attached to the input (see ticket #5665)\n\t\tif( inst.settings.disabled ) {\n\t\t\tthis._disableDatepicker( target );\n\t\t}\n\t},\n\n\t/* Make attachments based on settings. */\n\t_attachments: function(input, inst) {\n\t\tvar showOn, buttonText, buttonImage,\n\t\t\tappendText = this._get(inst, \"appendText\"),\n\t\t\tisRTL = this._get(inst, \"isRTL\");\n\n\t\tif (inst.append) {\n\t\t\tinst.append.remove();\n\t\t}\n\t\tif (appendText) {\n\t\t\tinst.append = $(\"<span class='\" + this._appendClass + \"'>\" + appendText + \"</span>\");\n\t\t\tinput[isRTL ? \"before\" : \"after\"](inst.append);\n\t\t}\n\n\t\tinput.unbind(\"focus\", this._showDatepicker);\n\n\t\tif (inst.trigger) {\n\t\t\tinst.trigger.remove();\n\t\t}\n\n\t\tshowOn = this._get(inst, \"showOn\");\n\t\tif (showOn === \"focus\" || showOn === \"both\") { // pop-up date picker when in the marked field\n\t\t\tinput.focus(this._showDatepicker);\n\t\t}\n\t\tif (showOn === \"button\" || showOn === \"both\") { // pop-up date picker when button clicked\n\t\t\tbuttonText = this._get(inst, \"buttonText\");\n\t\t\tbuttonImage = this._get(inst, \"buttonImage\");\n\t\t\tinst.trigger = $(this._get(inst, \"buttonImageOnly\") ?\n\t\t\t\t$(\"<img/>\").addClass(this._triggerClass).\n\t\t\t\t\tattr({ src: buttonImage, alt: buttonText, title: buttonText }) :\n\t\t\t\t$(\"<button type='button'></button>\").addClass(this._triggerClass).\n\t\t\t\t\thtml(!buttonImage ? buttonText : $(\"<img/>\").attr(\n\t\t\t\t\t{ src:buttonImage, alt:buttonText, title:buttonText })));\n\t\t\tinput[isRTL ? \"before\" : \"after\"](inst.trigger);\n\t\t\tinst.trigger.click(function() {\n\t\t\t\tif ($.datepicker._datepickerShowing && $.datepicker._lastInput === input[0]) {\n\t\t\t\t\t$.datepicker._hideDatepicker();\n\t\t\t\t} else if ($.datepicker._datepickerShowing && $.datepicker._lastInput !== input[0]) {\n\t\t\t\t\t$.datepicker._hideDatepicker();\n\t\t\t\t\t$.datepicker._showDatepicker(input[0]);\n\t\t\t\t} else {\n\t\t\t\t\t$.datepicker._showDatepicker(input[0]);\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\t\t}\n\t},\n\n\t/* Apply the maximum length for the date format. */\n\t_autoSize: function(inst) {\n\t\tif (this._get(inst, \"autoSize\") && !inst.inline) {\n\t\t\tvar findMax, max, maxI, i,\n\t\t\t\tdate = new Date(2009, 12 - 1, 20), // Ensure double digits\n\t\t\t\tdateFormat = this._get(inst, \"dateFormat\");\n\n\t\t\tif (dateFormat.match(/[DM]/)) {\n\t\t\t\tfindMax = function(names) {\n\t\t\t\t\tmax = 0;\n\t\t\t\t\tmaxI = 0;\n\t\t\t\t\tfor (i = 0; i < names.length; i++) {\n\t\t\t\t\t\tif (names[i].length > max) {\n\t\t\t\t\t\t\tmax = names[i].length;\n\t\t\t\t\t\t\tmaxI = i;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn maxI;\n\t\t\t\t};\n\t\t\t\tdate.setMonth(findMax(this._get(inst, (dateFormat.match(/MM/) ?\n\t\t\t\t\t\"monthNames\" : \"monthNamesShort\"))));\n\t\t\t\tdate.setDate(findMax(this._get(inst, (dateFormat.match(/DD/) ?\n\t\t\t\t\t\"dayNames\" : \"dayNamesShort\"))) + 20 - date.getDay());\n\t\t\t}\n\t\t\tinst.input.attr(\"size\", this._formatDate(inst, date).length);\n\t\t}\n\t},\n\n\t/* Attach an inline date picker to a div. */\n\t_inlineDatepicker: function(target, inst) {\n\t\tvar divSpan = $(target);\n\t\tif (divSpan.hasClass(this.markerClassName)) {\n\t\t\treturn;\n\t\t}\n\t\tdivSpan.addClass(this.markerClassName).append(inst.dpDiv);\n\t\t$.data(target, \"datepicker\", inst);\n\t\tthis._setDate(inst, this._getDefaultDate(inst), true);\n\t\tthis._updateDatepicker(inst);\n\t\tthis._updateAlternate(inst);\n\t\t//If disabled option is true, disable the datepicker before showing it (see ticket #5665)\n\t\tif( inst.settings.disabled ) {\n\t\t\tthis._disableDatepicker( target );\n\t\t}\n\t\t// Set display:block in place of inst.dpDiv.show() which won't work on disconnected elements\n\t\t// http://bugs.jqueryui.com/ticket/7552 - A Datepicker created on a detached div has zero height\n\t\tinst.dpDiv.css( \"display\", \"block\" );\n\t},\n\n\t/* Pop-up the date picker in a \"dialog\" box.\n\t * @param  input element - ignored\n\t * @param  date\tstring or Date - the initial date to display\n\t * @param  onSelect  function - the function to call when a date is selected\n\t * @param  settings  object - update the dialog date picker instance's settings (anonymous object)\n\t * @param  pos int[2] - coordinates for the dialog's position within the screen or\n\t *\t\t\t\t\tevent - with x/y coordinates or\n\t *\t\t\t\t\tleave empty for default (screen centre)\n\t * @return the manager object\n\t */\n\t_dialogDatepicker: function(input, date, onSelect, settings, pos) {\n\t\tvar id, browserWidth, browserHeight, scrollX, scrollY,\n\t\t\tinst = this._dialogInst; // internal instance\n\n\t\tif (!inst) {\n\t\t\tthis.uuid += 1;\n\t\t\tid = \"dp\" + this.uuid;\n\t\t\tthis._dialogInput = $(\"<input type='text' id='\" + id +\n\t\t\t\t\"' style='position: absolute; top: -100px; width: 0px;'/>\");\n\t\t\tthis._dialogInput.keydown(this._doKeyDown);\n\t\t\t$(\"body\").append(this._dialogInput);\n\t\t\tinst = this._dialogInst = this._newInst(this._dialogInput, false);\n\t\t\tinst.settings = {};\n\t\t\t$.data(this._dialogInput[0], \"datepicker\", inst);\n\t\t}\n\t\tdatepicker_extendRemove(inst.settings, settings || {});\n\t\tdate = (date && date.constructor === Date ? this._formatDate(inst, date) : date);\n\t\tthis._dialogInput.val(date);\n\n\t\tthis._pos = (pos ? (pos.length ? pos : [pos.pageX, pos.pageY]) : null);\n\t\tif (!this._pos) {\n\t\t\tbrowserWidth = document.documentElement.clientWidth;\n\t\t\tbrowserHeight = document.documentElement.clientHeight;\n\t\t\tscrollX = document.documentElement.scrollLeft || document.body.scrollLeft;\n\t\t\tscrollY = document.documentElement.scrollTop || document.body.scrollTop;\n\t\t\tthis._pos = // should use actual width/height below\n\t\t\t\t[(browserWidth / 2) - 100 + scrollX, (browserHeight / 2) - 150 + scrollY];\n\t\t}\n\n\t\t// move input on screen for focus, but hidden behind dialog\n\t\tthis._dialogInput.css(\"left\", (this._pos[0] + 20) + \"px\").css(\"top\", this._pos[1] + \"px\");\n\t\tinst.settings.onSelect = onSelect;\n\t\tthis._inDialog = true;\n\t\tthis.dpDiv.addClass(this._dialogClass);\n\t\tthis._showDatepicker(this._dialogInput[0]);\n\t\tif ($.blockUI) {\n\t\t\t$.blockUI(this.dpDiv);\n\t\t}\n\t\t$.data(this._dialogInput[0], \"datepicker\", inst);\n\t\treturn this;\n\t},\n\n\t/* Detach a datepicker from its control.\n\t * @param  target\telement - the target input field or division or span\n\t */\n\t_destroyDatepicker: function(target) {\n\t\tvar nodeName,\n\t\t\t$target = $(target),\n\t\t\tinst = $.data(target, \"datepicker\");\n\n\t\tif (!$target.hasClass(this.markerClassName)) {\n\t\t\treturn;\n\t\t}\n\n\t\tnodeName = target.nodeName.toLowerCase();\n\t\t$.removeData(target, \"datepicker\");\n\t\tif (nodeName === \"input\") {\n\t\t\tinst.append.remove();\n\t\t\tinst.trigger.remove();\n\t\t\t$target.removeClass(this.markerClassName).\n\t\t\t\tunbind(\"focus\", this._showDatepicker).\n\t\t\t\tunbind(\"keydown\", this._doKeyDown).\n\t\t\t\tunbind(\"keypress\", this._doKeyPress).\n\t\t\t\tunbind(\"keyup\", this._doKeyUp);\n\t\t} else if (nodeName === \"div\" || nodeName === \"span\") {\n\t\t\t$target.removeClass(this.markerClassName).empty();\n\t\t}\n\n\t\tif ( datepicker_instActive === inst ) {\n\t\t\tdatepicker_instActive = null;\n\t\t}\n\t},\n\n\t/* Enable the date picker to a jQuery selection.\n\t * @param  target\telement - the target input field or division or span\n\t */\n\t_enableDatepicker: function(target) {\n\t\tvar nodeName, inline,\n\t\t\t$target = $(target),\n\t\t\tinst = $.data(target, \"datepicker\");\n\n\t\tif (!$target.hasClass(this.markerClassName)) {\n\t\t\treturn;\n\t\t}\n\n\t\tnodeName = target.nodeName.toLowerCase();\n\t\tif (nodeName === \"input\") {\n\t\t\ttarget.disabled = false;\n\t\t\tinst.trigger.filter(\"button\").\n\t\t\t\teach(function() { this.disabled = false; }).end().\n\t\t\t\tfilter(\"img\").css({opacity: \"1.0\", cursor: \"\"});\n\t\t} else if (nodeName === \"div\" || nodeName === \"span\") {\n\t\t\tinline = $target.children(\".\" + this._inlineClass);\n\t\t\tinline.children().removeClass(\"ui-state-disabled\");\n\t\t\tinline.find(\"select.ui-datepicker-month, select.ui-datepicker-year\").\n\t\t\t\tprop(\"disabled\", false);\n\t\t}\n\t\tthis._disabledInputs = $.map(this._disabledInputs,\n\t\t\tfunction(value) { return (value === target ? null : value); }); // delete entry\n\t},\n\n\t/* Disable the date picker to a jQuery selection.\n\t * @param  target\telement - the target input field or division or span\n\t */\n\t_disableDatepicker: function(target) {\n\t\tvar nodeName, inline,\n\t\t\t$target = $(target),\n\t\t\tinst = $.data(target, \"datepicker\");\n\n\t\tif (!$target.hasClass(this.markerClassName)) {\n\t\t\treturn;\n\t\t}\n\n\t\tnodeName = target.nodeName.toLowerCase();\n\t\tif (nodeName === \"input\") {\n\t\t\ttarget.disabled = true;\n\t\t\tinst.trigger.filter(\"button\").\n\t\t\t\teach(function() { this.disabled = true; }).end().\n\t\t\t\tfilter(\"img\").css({opacity: \"0.5\", cursor: \"default\"});\n\t\t} else if (nodeName === \"div\" || nodeName === \"span\") {\n\t\t\tinline = $target.children(\".\" + this._inlineClass);\n\t\t\tinline.children().addClass(\"ui-state-disabled\");\n\t\t\tinline.find(\"select.ui-datepicker-month, select.ui-datepicker-year\").\n\t\t\t\tprop(\"disabled\", true);\n\t\t}\n\t\tthis._disabledInputs = $.map(this._disabledInputs,\n\t\t\tfunction(value) { return (value === target ? null : value); }); // delete entry\n\t\tthis._disabledInputs[this._disabledInputs.length] = target;\n\t},\n\n\t/* Is the first field in a jQuery collection disabled as a datepicker?\n\t * @param  target\telement - the target input field or division or span\n\t * @return boolean - true if disabled, false if enabled\n\t */\n\t_isDisabledDatepicker: function(target) {\n\t\tif (!target) {\n\t\t\treturn false;\n\t\t}\n\t\tfor (var i = 0; i < this._disabledInputs.length; i++) {\n\t\t\tif (this._disabledInputs[i] === target) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\n\t/* Retrieve the instance data for the target control.\n\t * @param  target  element - the target input field or division or span\n\t * @return  object - the associated instance data\n\t * @throws  error if a jQuery problem getting data\n\t */\n\t_getInst: function(target) {\n\t\ttry {\n\t\t\treturn $.data(target, \"datepicker\");\n\t\t}\n\t\tcatch (err) {\n\t\t\tthrow \"Missing instance data for this datepicker\";\n\t\t}\n\t},\n\n\t/* Update or retrieve the settings for a date picker attached to an input field or division.\n\t * @param  target  element - the target input field or division or span\n\t * @param  name\tobject - the new settings to update or\n\t *\t\t\t\tstring - the name of the setting to change or retrieve,\n\t *\t\t\t\twhen retrieving also \"all\" for all instance settings or\n\t *\t\t\t\t\"defaults\" for all global defaults\n\t * @param  value   any - the new value for the setting\n\t *\t\t\t\t(omit if above is an object or to retrieve a value)\n\t */\n\t_optionDatepicker: function(target, name, value) {\n\t\tvar settings, date, minDate, maxDate,\n\t\t\tinst = this._getInst(target);\n\n\t\tif (arguments.length === 2 && typeof name === \"string\") {\n\t\t\treturn (name === \"defaults\" ? $.extend({}, $.datepicker._defaults) :\n\t\t\t\t(inst ? (name === \"all\" ? $.extend({}, inst.settings) :\n\t\t\t\tthis._get(inst, name)) : null));\n\t\t}\n\n\t\tsettings = name || {};\n\t\tif (typeof name === \"string\") {\n\t\t\tsettings = {};\n\t\t\tsettings[name] = value;\n\t\t}\n\n\t\tif (inst) {\n\t\t\tif (this._curInst === inst) {\n\t\t\t\tthis._hideDatepicker();\n\t\t\t}\n\n\t\t\tdate = this._getDateDatepicker(target, true);\n\t\t\tminDate = this._getMinMaxDate(inst, \"min\");\n\t\t\tmaxDate = this._getMinMaxDate(inst, \"max\");\n\t\t\tdatepicker_extendRemove(inst.settings, settings);\n\t\t\t// reformat the old minDate/maxDate values if dateFormat changes and a new minDate/maxDate isn't provided\n\t\t\tif (minDate !== null && settings.dateFormat !== undefined && settings.minDate === undefined) {\n\t\t\t\tinst.settings.minDate = this._formatDate(inst, minDate);\n\t\t\t}\n\t\t\tif (maxDate !== null && settings.dateFormat !== undefined && settings.maxDate === undefined) {\n\t\t\t\tinst.settings.maxDate = this._formatDate(inst, maxDate);\n\t\t\t}\n\t\t\tif ( \"disabled\" in settings ) {\n\t\t\t\tif ( settings.disabled ) {\n\t\t\t\t\tthis._disableDatepicker(target);\n\t\t\t\t} else {\n\t\t\t\t\tthis._enableDatepicker(target);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._attachments($(target), inst);\n\t\t\tthis._autoSize(inst);\n\t\t\tthis._setDate(inst, date);\n\t\t\tthis._updateAlternate(inst);\n\t\t\tthis._updateDatepicker(inst);\n\t\t}\n\t},\n\n\t// change method deprecated\n\t_changeDatepicker: function(target, name, value) {\n\t\tthis._optionDatepicker(target, name, value);\n\t},\n\n\t/* Redraw the date picker attached to an input field or division.\n\t * @param  target  element - the target input field or division or span\n\t */\n\t_refreshDatepicker: function(target) {\n\t\tvar inst = this._getInst(target);\n\t\tif (inst) {\n\t\t\tthis._updateDatepicker(inst);\n\t\t}\n\t},\n\n\t/* Set the dates for a jQuery selection.\n\t * @param  target element - the target input field or division or span\n\t * @param  date\tDate - the new date\n\t */\n\t_setDateDatepicker: function(target, date) {\n\t\tvar inst = this._getInst(target);\n\t\tif (inst) {\n\t\t\tthis._setDate(inst, date);\n\t\t\tthis._updateDatepicker(inst);\n\t\t\tthis._updateAlternate(inst);\n\t\t}\n\t},\n\n\t/* Get the date(s) for the first entry in a jQuery selection.\n\t * @param  target element - the target input field or division or span\n\t * @param  noDefault boolean - true if no default date is to be used\n\t * @return Date - the current date\n\t */\n\t_getDateDatepicker: function(target, noDefault) {\n\t\tvar inst = this._getInst(target);\n\t\tif (inst && !inst.inline) {\n\t\t\tthis._setDateFromField(inst, noDefault);\n\t\t}\n\t\treturn (inst ? this._getDate(inst) : null);\n\t},\n\n\t/* Handle keystrokes. */\n\t_doKeyDown: function(event) {\n\t\tvar onSelect, dateStr, sel,\n\t\t\tinst = $.datepicker._getInst(event.target),\n\t\t\thandled = true,\n\t\t\tisRTL = inst.dpDiv.is(\".ui-datepicker-rtl\");\n\n\t\tinst._keyEvent = true;\n\t\tif ($.datepicker._datepickerShowing) {\n\t\t\tswitch (event.keyCode) {\n\t\t\t\tcase 9: $.datepicker._hideDatepicker();\n\t\t\t\t\t\thandled = false;\n\t\t\t\t\t\tbreak; // hide on tab out\n\t\t\t\tcase 13: sel = $(\"td.\" + $.datepicker._dayOverClass + \":not(.\" +\n\t\t\t\t\t\t\t\t\t$.datepicker._currentClass + \")\", inst.dpDiv);\n\t\t\t\t\t\tif (sel[0]) {\n\t\t\t\t\t\t\t$.datepicker._selectDay(event.target, inst.selectedMonth, inst.selectedYear, sel[0]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tonSelect = $.datepicker._get(inst, \"onSelect\");\n\t\t\t\t\t\tif (onSelect) {\n\t\t\t\t\t\t\tdateStr = $.datepicker._formatDate(inst);\n\n\t\t\t\t\t\t\t// trigger custom callback\n\t\t\t\t\t\t\tonSelect.apply((inst.input ? inst.input[0] : null), [dateStr, inst]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$.datepicker._hideDatepicker();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn false; // don't submit the form\n\t\t\t\tcase 27: $.datepicker._hideDatepicker();\n\t\t\t\t\t\tbreak; // hide on escape\n\t\t\t\tcase 33: $.datepicker._adjustDate(event.target, (event.ctrlKey ?\n\t\t\t\t\t\t\t-$.datepicker._get(inst, \"stepBigMonths\") :\n\t\t\t\t\t\t\t-$.datepicker._get(inst, \"stepMonths\")), \"M\");\n\t\t\t\t\t\tbreak; // previous month/year on page up/+ ctrl\n\t\t\t\tcase 34: $.datepicker._adjustDate(event.target, (event.ctrlKey ?\n\t\t\t\t\t\t\t+$.datepicker._get(inst, \"stepBigMonths\") :\n\t\t\t\t\t\t\t+$.datepicker._get(inst, \"stepMonths\")), \"M\");\n\t\t\t\t\t\tbreak; // next month/year on page down/+ ctrl\n\t\t\t\tcase 35: if (event.ctrlKey || event.metaKey) {\n\t\t\t\t\t\t\t$.datepicker._clearDate(event.target);\n\t\t\t\t\t\t}\n\t\t\t\t\t\thandled = event.ctrlKey || event.metaKey;\n\t\t\t\t\t\tbreak; // clear on ctrl or command +end\n\t\t\t\tcase 36: if (event.ctrlKey || event.metaKey) {\n\t\t\t\t\t\t\t$.datepicker._gotoToday(event.target);\n\t\t\t\t\t\t}\n\t\t\t\t\t\thandled = event.ctrlKey || event.metaKey;\n\t\t\t\t\t\tbreak; // current on ctrl or command +home\n\t\t\t\tcase 37: if (event.ctrlKey || event.metaKey) {\n\t\t\t\t\t\t\t$.datepicker._adjustDate(event.target, (isRTL ? +1 : -1), \"D\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\thandled = event.ctrlKey || event.metaKey;\n\t\t\t\t\t\t// -1 day on ctrl or command +left\n\t\t\t\t\t\tif (event.originalEvent.altKey) {\n\t\t\t\t\t\t\t$.datepicker._adjustDate(event.target, (event.ctrlKey ?\n\t\t\t\t\t\t\t\t-$.datepicker._get(inst, \"stepBigMonths\") :\n\t\t\t\t\t\t\t\t-$.datepicker._get(inst, \"stepMonths\")), \"M\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// next month/year on alt +left on Mac\n\t\t\t\t\t\tbreak;\n\t\t\t\tcase 38: if (event.ctrlKey || event.metaKey) {\n\t\t\t\t\t\t\t$.datepicker._adjustDate(event.target, -7, \"D\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\thandled = event.ctrlKey || event.metaKey;\n\t\t\t\t\t\tbreak; // -1 week on ctrl or command +up\n\t\t\t\tcase 39: if (event.ctrlKey || event.metaKey) {\n\t\t\t\t\t\t\t$.datepicker._adjustDate(event.target, (isRTL ? -1 : +1), \"D\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\thandled = event.ctrlKey || event.metaKey;\n\t\t\t\t\t\t// +1 day on ctrl or command +right\n\t\t\t\t\t\tif (event.originalEvent.altKey) {\n\t\t\t\t\t\t\t$.datepicker._adjustDate(event.target, (event.ctrlKey ?\n\t\t\t\t\t\t\t\t+$.datepicker._get(inst, \"stepBigMonths\") :\n\t\t\t\t\t\t\t\t+$.datepicker._get(inst, \"stepMonths\")), \"M\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// next month/year on alt +right\n\t\t\t\t\t\tbreak;\n\t\t\t\tcase 40: if (event.ctrlKey || event.metaKey) {\n\t\t\t\t\t\t\t$.datepicker._adjustDate(event.target, +7, \"D\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\thandled = event.ctrlKey || event.metaKey;\n\t\t\t\t\t\tbreak; // +1 week on ctrl or command +down\n\t\t\t\tdefault: handled = false;\n\t\t\t}\n\t\t} else if (event.keyCode === 36 && event.ctrlKey) { // display the date picker on ctrl+home\n\t\t\t$.datepicker._showDatepicker(this);\n\t\t} else {\n\t\t\thandled = false;\n\t\t}\n\n\t\tif (handled) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t}\n\t},\n\n\t/* Filter entered characters - based on date format. */\n\t_doKeyPress: function(event) {\n\t\tvar chars, chr,\n\t\t\tinst = $.datepicker._getInst(event.target);\n\n\t\tif ($.datepicker._get(inst, \"constrainInput\")) {\n\t\t\tchars = $.datepicker._possibleChars($.datepicker._get(inst, \"dateFormat\"));\n\t\t\tchr = String.fromCharCode(event.charCode == null ? event.keyCode : event.charCode);\n\t\t\treturn event.ctrlKey || event.metaKey || (chr < \" \" || !chars || chars.indexOf(chr) > -1);\n\t\t}\n\t},\n\n\t/* Synchronise manual entry and field/alternate field. */\n\t_doKeyUp: function(event) {\n\t\tvar date,\n\t\t\tinst = $.datepicker._getInst(event.target);\n\n\t\tif (inst.input.val() !== inst.lastVal) {\n\t\t\ttry {\n\t\t\t\tdate = $.datepicker.parseDate($.datepicker._get(inst, \"dateFormat\"),\n\t\t\t\t\t(inst.input ? inst.input.val() : null),\n\t\t\t\t\t$.datepicker._getFormatConfig(inst));\n\n\t\t\t\tif (date) { // only if valid\n\t\t\t\t\t$.datepicker._setDateFromField(inst);\n\t\t\t\t\t$.datepicker._updateAlternate(inst);\n\t\t\t\t\t$.datepicker._updateDatepicker(inst);\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (err) {\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t},\n\n\t/* Pop-up the date picker for a given input field.\n\t * If false returned from beforeShow event handler do not show.\n\t * @param  input  element - the input field attached to the date picker or\n\t *\t\t\t\t\tevent - if triggered by focus\n\t */\n\t_showDatepicker: function(input) {\n\t\tinput = input.target || input;\n\t\tif (input.nodeName.toLowerCase() !== \"input\") { // find from button/image trigger\n\t\t\tinput = $(\"input\", input.parentNode)[0];\n\t\t}\n\n\t\tif ($.datepicker._isDisabledDatepicker(input) || $.datepicker._lastInput === input) { // already here\n\t\t\treturn;\n\t\t}\n\n\t\tvar inst, beforeShow, beforeShowSettings, isFixed,\n\t\t\toffset, showAnim, duration;\n\n\t\tinst = $.datepicker._getInst(input);\n\t\tif ($.datepicker._curInst && $.datepicker._curInst !== inst) {\n\t\t\t$.datepicker._curInst.dpDiv.stop(true, true);\n\t\t\tif ( inst && $.datepicker._datepickerShowing ) {\n\t\t\t\t$.datepicker._hideDatepicker( $.datepicker._curInst.input[0] );\n\t\t\t}\n\t\t}\n\n\t\tbeforeShow = $.datepicker._get(inst, \"beforeShow\");\n\t\tbeforeShowSettings = beforeShow ? beforeShow.apply(input, [input, inst]) : {};\n\t\tif(beforeShowSettings === false){\n\t\t\treturn;\n\t\t}\n\t\tdatepicker_extendRemove(inst.settings, beforeShowSettings);\n\n\t\tinst.lastVal = null;\n\t\t$.datepicker._lastInput = input;\n\t\t$.datepicker._setDateFromField(inst);\n\n\t\tif ($.datepicker._inDialog) { // hide cursor\n\t\t\tinput.value = \"\";\n\t\t}\n\t\tif (!$.datepicker._pos) { // position below input\n\t\t\t$.datepicker._pos = $.datepicker._findPos(input);\n\t\t\t$.datepicker._pos[1] += input.offsetHeight; // add the height\n\t\t}\n\n\t\tisFixed = false;\n\t\t$(input).parents().each(function() {\n\t\t\tisFixed |= $(this).css(\"position\") === \"fixed\";\n\t\t\treturn !isFixed;\n\t\t});\n\n\t\toffset = {left: $.datepicker._pos[0], top: $.datepicker._pos[1]};\n\t\t$.datepicker._pos = null;\n\t\t//to avoid flashes on Firefox\n\t\tinst.dpDiv.empty();\n\t\t// determine sizing offscreen\n\t\tinst.dpDiv.css({position: \"absolute\", display: \"block\", top: \"-1000px\"});\n\t\t$.datepicker._updateDatepicker(inst);\n\t\t// fix width for dynamic number of date pickers\n\t\t// and adjust position before showing\n\t\toffset = $.datepicker._checkOffset(inst, offset, isFixed);\n\t\tinst.dpDiv.css({position: ($.datepicker._inDialog && $.blockUI ?\n\t\t\t\"static\" : (isFixed ? \"fixed\" : \"absolute\")), display: \"none\",\n\t\t\tleft: offset.left + \"px\", top: offset.top + \"px\"});\n\n\t\tif (!inst.inline) {\n\t\t\tshowAnim = $.datepicker._get(inst, \"showAnim\");\n\t\t\tduration = $.datepicker._get(inst, \"duration\");\n\t\t\tinst.dpDiv.css( \"z-index\", datepicker_getZindex( $( input ) ) + 1 );\n\t\t\t$.datepicker._datepickerShowing = true;\n\n\t\t\tif ( $.effects && $.effects.effect[ showAnim ] ) {\n\t\t\t\tinst.dpDiv.show(showAnim, $.datepicker._get(inst, \"showOptions\"), duration);\n\t\t\t} else {\n\t\t\t\tinst.dpDiv[showAnim || \"show\"](showAnim ? duration : null);\n\t\t\t}\n\n\t\t\tif ( $.datepicker._shouldFocusInput( inst ) ) {\n\t\t\t\tinst.input.focus();\n\t\t\t}\n\n\t\t\t$.datepicker._curInst = inst;\n\t\t}\n\t},\n\n\t/* Generate the date picker content. */\n\t_updateDatepicker: function(inst) {\n\t\tthis.maxRows = 4; //Reset the max number of rows being displayed (see #7043)\n\t\tdatepicker_instActive = inst; // for delegate hover events\n\t\tinst.dpDiv.empty().append(this._generateHTML(inst));\n\t\tthis._attachHandlers(inst);\n\n\t\tvar origyearshtml,\n\t\t\tnumMonths = this._getNumberOfMonths(inst),\n\t\t\tcols = numMonths[1],\n\t\t\twidth = 17,\n\t\t\tactiveCell = inst.dpDiv.find( \".\" + this._dayOverClass + \" a\" );\n\n\t\tif ( activeCell.length > 0 ) {\n\t\t\tdatepicker_handleMouseover.apply( activeCell.get( 0 ) );\n\t\t}\n\n\t\tinst.dpDiv.removeClass(\"ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4\").width(\"\");\n\t\tif (cols > 1) {\n\t\t\tinst.dpDiv.addClass(\"ui-datepicker-multi-\" + cols).css(\"width\", (width * cols) + \"em\");\n\t\t}\n\t\tinst.dpDiv[(numMonths[0] !== 1 || numMonths[1] !== 1 ? \"add\" : \"remove\") +\n\t\t\t\"Class\"](\"ui-datepicker-multi\");\n\t\tinst.dpDiv[(this._get(inst, \"isRTL\") ? \"add\" : \"remove\") +\n\t\t\t\"Class\"](\"ui-datepicker-rtl\");\n\n\t\tif (inst === $.datepicker._curInst && $.datepicker._datepickerShowing && $.datepicker._shouldFocusInput( inst ) ) {\n\t\t\tinst.input.focus();\n\t\t}\n\n\t\t// deffered render of the years select (to avoid flashes on Firefox)\n\t\tif( inst.yearshtml ){\n\t\t\torigyearshtml = inst.yearshtml;\n\t\t\tsetTimeout(function(){\n\t\t\t\t//assure that inst.yearshtml didn't change.\n\t\t\t\tif( origyearshtml === inst.yearshtml && inst.yearshtml ){\n\t\t\t\t\tinst.dpDiv.find(\"select.ui-datepicker-year:first\").replaceWith(inst.yearshtml);\n\t\t\t\t}\n\t\t\t\torigyearshtml = inst.yearshtml = null;\n\t\t\t}, 0);\n\t\t}\n\t},\n\n\t// #6694 - don't focus the input if it's already focused\n\t// this breaks the change event in IE\n\t// Support: IE and jQuery <1.9\n\t_shouldFocusInput: function( inst ) {\n\t\treturn inst.input && inst.input.is( \":visible\" ) && !inst.input.is( \":disabled\" ) && !inst.input.is( \":focus\" );\n\t},\n\n\t/* Check positioning to remain on screen. */\n\t_checkOffset: function(inst, offset, isFixed) {\n\t\tvar dpWidth = inst.dpDiv.outerWidth(),\n\t\t\tdpHeight = inst.dpDiv.outerHeight(),\n\t\t\tinputWidth = inst.input ? inst.input.outerWidth() : 0,\n\t\t\tinputHeight = inst.input ? inst.input.outerHeight() : 0,\n\t\t\tviewWidth = document.documentElement.clientWidth + (isFixed ? 0 : $(document).scrollLeft()),\n\t\t\tviewHeight = document.documentElement.clientHeight + (isFixed ? 0 : $(document).scrollTop());\n\n\t\toffset.left -= (this._get(inst, \"isRTL\") ? (dpWidth - inputWidth) : 0);\n\t\toffset.left -= (isFixed && offset.left === inst.input.offset().left) ? $(document).scrollLeft() : 0;\n\t\toffset.top -= (isFixed && offset.top === (inst.input.offset().top + inputHeight)) ? $(document).scrollTop() : 0;\n\n\t\t// now check if datepicker is showing outside window viewport - move to a better place if so.\n\t\toffset.left -= Math.min(offset.left, (offset.left + dpWidth > viewWidth && viewWidth > dpWidth) ?\n\t\t\tMath.abs(offset.left + dpWidth - viewWidth) : 0);\n\t\toffset.top -= Math.min(offset.top, (offset.top + dpHeight > viewHeight && viewHeight > dpHeight) ?\n\t\t\tMath.abs(dpHeight + inputHeight) : 0);\n\n\t\treturn offset;\n\t},\n\n\t/* Find an object's position on the screen. */\n\t_findPos: function(obj) {\n\t\tvar position,\n\t\t\tinst = this._getInst(obj),\n\t\t\tisRTL = this._get(inst, \"isRTL\");\n\n\t\twhile (obj && (obj.type === \"hidden\" || obj.nodeType !== 1 || $.expr.filters.hidden(obj))) {\n\t\t\tobj = obj[isRTL ? \"previousSibling\" : \"nextSibling\"];\n\t\t}\n\n\t\tposition = $(obj).offset();\n\t\treturn [position.left, position.top];\n\t},\n\n\t/* Hide the date picker from view.\n\t * @param  input  element - the input field attached to the date picker\n\t */\n\t_hideDatepicker: function(input) {\n\t\tvar showAnim, duration, postProcess, onClose,\n\t\t\tinst = this._curInst;\n\n\t\tif (!inst || (input && inst !== $.data(input, \"datepicker\"))) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._datepickerShowing) {\n\t\t\tshowAnim = this._get(inst, \"showAnim\");\n\t\t\tduration = this._get(inst, \"duration\");\n\t\t\tpostProcess = function() {\n\t\t\t\t$.datepicker._tidyDialog(inst);\n\t\t\t};\n\n\t\t\t// DEPRECATED: after BC for 1.8.x $.effects[ showAnim ] is not needed\n\t\t\tif ( $.effects && ( $.effects.effect[ showAnim ] || $.effects[ showAnim ] ) ) {\n\t\t\t\tinst.dpDiv.hide(showAnim, $.datepicker._get(inst, \"showOptions\"), duration, postProcess);\n\t\t\t} else {\n\t\t\t\tinst.dpDiv[(showAnim === \"slideDown\" ? \"slideUp\" :\n\t\t\t\t\t(showAnim === \"fadeIn\" ? \"fadeOut\" : \"hide\"))]((showAnim ? duration : null), postProcess);\n\t\t\t}\n\n\t\t\tif (!showAnim) {\n\t\t\t\tpostProcess();\n\t\t\t}\n\t\t\tthis._datepickerShowing = false;\n\n\t\t\tonClose = this._get(inst, \"onClose\");\n\t\t\tif (onClose) {\n\t\t\t\tonClose.apply((inst.input ? inst.input[0] : null), [(inst.input ? inst.input.val() : \"\"), inst]);\n\t\t\t}\n\n\t\t\tthis._lastInput = null;\n\t\t\tif (this._inDialog) {\n\t\t\t\tthis._dialogInput.css({ position: \"absolute\", left: \"0\", top: \"-100px\" });\n\t\t\t\tif ($.blockUI) {\n\t\t\t\t\t$.unblockUI();\n\t\t\t\t\t$(\"body\").append(this.dpDiv);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._inDialog = false;\n\t\t}\n\t},\n\n\t/* Tidy up after a dialog display. */\n\t_tidyDialog: function(inst) {\n\t\tinst.dpDiv.removeClass(this._dialogClass).unbind(\".ui-datepicker-calendar\");\n\t},\n\n\t/* Close date picker if clicked elsewhere. */\n\t_checkExternalClick: function(event) {\n\t\tif (!$.datepicker._curInst) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar $target = $(event.target),\n\t\t\tinst = $.datepicker._getInst($target[0]);\n\n\t\tif ( ( ( $target[0].id !== $.datepicker._mainDivId &&\n\t\t\t\t$target.parents(\"#\" + $.datepicker._mainDivId).length === 0 &&\n\t\t\t\t!$target.hasClass($.datepicker.markerClassName) &&\n\t\t\t\t!$target.closest(\".\" + $.datepicker._triggerClass).length &&\n\t\t\t\t$.datepicker._datepickerShowing && !($.datepicker._inDialog && $.blockUI) ) ) ||\n\t\t\t( $target.hasClass($.datepicker.markerClassName) && $.datepicker._curInst !== inst ) ) {\n\t\t\t\t$.datepicker._hideDatepicker();\n\t\t}\n\t},\n\n\t/* Adjust one of the date sub-fields. */\n\t_adjustDate: function(id, offset, period) {\n\t\tvar target = $(id),\n\t\t\tinst = this._getInst(target[0]);\n\n\t\tif (this._isDisabledDatepicker(target[0])) {\n\t\t\treturn;\n\t\t}\n\t\tthis._adjustInstDate(inst, offset +\n\t\t\t(period === \"M\" ? this._get(inst, \"showCurrentAtPos\") : 0), // undo positioning\n\t\t\tperiod);\n\t\tthis._updateDatepicker(inst);\n\t},\n\n\t/* Action for current link. */\n\t_gotoToday: function(id) {\n\t\tvar date,\n\t\t\ttarget = $(id),\n\t\t\tinst = this._getInst(target[0]);\n\n\t\tif (this._get(inst, \"gotoCurrent\") && inst.currentDay) {\n\t\t\tinst.selectedDay = inst.currentDay;\n\t\t\tinst.drawMonth = inst.selectedMonth = inst.currentMonth;\n\t\t\tinst.drawYear = inst.selectedYear = inst.currentYear;\n\t\t} else {\n\t\t\tdate = new Date();\n\t\t\tinst.selectedDay = date.getDate();\n\t\t\tinst.drawMonth = inst.selectedMonth = date.getMonth();\n\t\t\tinst.drawYear = inst.selectedYear = date.getFullYear();\n\t\t}\n\t\tthis._notifyChange(inst);\n\t\tthis._adjustDate(target);\n\t},\n\n\t/* Action for selecting a new month/year. */\n\t_selectMonthYear: function(id, select, period) {\n\t\tvar target = $(id),\n\t\t\tinst = this._getInst(target[0]);\n\n\t\tinst[\"selected\" + (period === \"M\" ? \"Month\" : \"Year\")] =\n\t\tinst[\"draw\" + (period === \"M\" ? \"Month\" : \"Year\")] =\n\t\t\tparseInt(select.options[select.selectedIndex].value,10);\n\n\t\tthis._notifyChange(inst);\n\t\tthis._adjustDate(target);\n\t},\n\n\t/* Action for selecting a day. */\n\t_selectDay: function(id, month, year, td) {\n\t\tvar inst,\n\t\t\ttarget = $(id);\n\n\t\tif ($(td).hasClass(this._unselectableClass) || this._isDisabledDatepicker(target[0])) {\n\t\t\treturn;\n\t\t}\n\n\t\tinst = this._getInst(target[0]);\n\t\tinst.selectedDay = inst.currentDay = $(\"a\", td).html();\n\t\tinst.selectedMonth = inst.currentMonth = month;\n\t\tinst.selectedYear = inst.currentYear = year;\n\t\tthis._selectDate(id, this._formatDate(inst,\n\t\t\tinst.currentDay, inst.currentMonth, inst.currentYear));\n\t},\n\n\t/* Erase the input field and hide the date picker. */\n\t_clearDate: function(id) {\n\t\tvar target = $(id);\n\t\tthis._selectDate(target, \"\");\n\t},\n\n\t/* Update the input field with the selected date. */\n\t_selectDate: function(id, dateStr) {\n\t\tvar onSelect,\n\t\t\ttarget = $(id),\n\t\t\tinst = this._getInst(target[0]);\n\n\t\tdateStr = (dateStr != null ? dateStr : this._formatDate(inst));\n\t\tif (inst.input) {\n\t\t\tinst.input.val(dateStr);\n\t\t}\n\t\tthis._updateAlternate(inst);\n\n\t\tonSelect = this._get(inst, \"onSelect\");\n\t\tif (onSelect) {\n\t\t\tonSelect.apply((inst.input ? inst.input[0] : null), [dateStr, inst]);  // trigger custom callback\n\t\t} else if (inst.input) {\n\t\t\tinst.input.trigger(\"change\"); // fire the change event\n\t\t}\n\n\t\tif (inst.inline){\n\t\t\tthis._updateDatepicker(inst);\n\t\t} else {\n\t\t\tthis._hideDatepicker();\n\t\t\tthis._lastInput = inst.input[0];\n\t\t\tif (typeof(inst.input[0]) !== \"object\") {\n\t\t\t\tinst.input.focus(); // restore focus\n\t\t\t}\n\t\t\tthis._lastInput = null;\n\t\t}\n\t},\n\n\t/* Update any alternate field to synchronise with the main field. */\n\t_updateAlternate: function(inst) {\n\t\tvar altFormat, date, dateStr,\n\t\t\taltField = this._get(inst, \"altField\");\n\n\t\tif (altField) { // update alternate field too\n\t\t\taltFormat = this._get(inst, \"altFormat\") || this._get(inst, \"dateFormat\");\n\t\t\tdate = this._getDate(inst);\n\t\t\tdateStr = this.formatDate(altFormat, date, this._getFormatConfig(inst));\n\t\t\t$(altField).each(function() { $(this).val(dateStr); });\n\t\t}\n\t},\n\n\t/* Set as beforeShowDay function to prevent selection of weekends.\n\t * @param  date  Date - the date to customise\n\t * @return [boolean, string] - is this date selectable?, what is its CSS class?\n\t */\n\tnoWeekends: function(date) {\n\t\tvar day = date.getDay();\n\t\treturn [(day > 0 && day < 6), \"\"];\n\t},\n\n\t/* Set as calculateWeek to determine the week of the year based on the ISO 8601 definition.\n\t * @param  date  Date - the date to get the week for\n\t * @return  number - the number of the week within the year that contains this date\n\t */\n\tiso8601Week: function(date) {\n\t\tvar time,\n\t\t\tcheckDate = new Date(date.getTime());\n\n\t\t// Find Thursday of this week starting on Monday\n\t\tcheckDate.setDate(checkDate.getDate() + 4 - (checkDate.getDay() || 7));\n\n\t\ttime = checkDate.getTime();\n\t\tcheckDate.setMonth(0); // Compare with Jan 1\n\t\tcheckDate.setDate(1);\n\t\treturn Math.floor(Math.round((time - checkDate) / 86400000) / 7) + 1;\n\t},\n\n\t/* Parse a string value into a date object.\n\t * See formatDate below for the possible formats.\n\t *\n\t * @param  format string - the expected format of the date\n\t * @param  value string - the date in the above format\n\t * @param  settings Object - attributes include:\n\t *\t\t\t\t\tshortYearCutoff  number - the cutoff year for determining the century (optional)\n\t *\t\t\t\t\tdayNamesShort\tstring[7] - abbreviated names of the days from Sunday (optional)\n\t *\t\t\t\t\tdayNames\t\tstring[7] - names of the days from Sunday (optional)\n\t *\t\t\t\t\tmonthNamesShort string[12] - abbreviated names of the months (optional)\n\t *\t\t\t\t\tmonthNames\t\tstring[12] - names of the months (optional)\n\t * @return  Date - the extracted date value or null if value is blank\n\t */\n\tparseDate: function (format, value, settings) {\n\t\tif (format == null || value == null) {\n\t\t\tthrow \"Invalid arguments\";\n\t\t}\n\n\t\tvalue = (typeof value === \"object\" ? value.toString() : value + \"\");\n\t\tif (value === \"\") {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar iFormat, dim, extra,\n\t\t\tiValue = 0,\n\t\t\tshortYearCutoffTemp = (settings ? settings.shortYearCutoff : null) || this._defaults.shortYearCutoff,\n\t\t\tshortYearCutoff = (typeof shortYearCutoffTemp !== \"string\" ? shortYearCutoffTemp :\n\t\t\t\tnew Date().getFullYear() % 100 + parseInt(shortYearCutoffTemp, 10)),\n\t\t\tdayNamesShort = (settings ? settings.dayNamesShort : null) || this._defaults.dayNamesShort,\n\t\t\tdayNames = (settings ? settings.dayNames : null) || this._defaults.dayNames,\n\t\t\tmonthNamesShort = (settings ? settings.monthNamesShort : null) || this._defaults.monthNamesShort,\n\t\t\tmonthNames = (settings ? settings.monthNames : null) || this._defaults.monthNames,\n\t\t\tyear = -1,\n\t\t\tmonth = -1,\n\t\t\tday = -1,\n\t\t\tdoy = -1,\n\t\t\tliteral = false,\n\t\t\tdate,\n\t\t\t// Check whether a format character is doubled\n\t\t\tlookAhead = function(match) {\n\t\t\t\tvar matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) === match);\n\t\t\t\tif (matches) {\n\t\t\t\t\tiFormat++;\n\t\t\t\t}\n\t\t\t\treturn matches;\n\t\t\t},\n\t\t\t// Extract a number from the string value\n\t\t\tgetNumber = function(match) {\n\t\t\t\tvar isDoubled = lookAhead(match),\n\t\t\t\t\tsize = (match === \"@\" ? 14 : (match === \"!\" ? 20 :\n\t\t\t\t\t(match === \"y\" && isDoubled ? 4 : (match === \"o\" ? 3 : 2)))),\n\t\t\t\t\tminSize = (match === \"y\" ? size : 1),\n\t\t\t\t\tdigits = new RegExp(\"^\\\\d{\" + minSize + \",\" + size + \"}\"),\n\t\t\t\t\tnum = value.substring(iValue).match(digits);\n\t\t\t\tif (!num) {\n\t\t\t\t\tthrow \"Missing number at position \" + iValue;\n\t\t\t\t}\n\t\t\t\tiValue += num[0].length;\n\t\t\t\treturn parseInt(num[0], 10);\n\t\t\t},\n\t\t\t// Extract a name from the string value and convert to an index\n\t\t\tgetName = function(match, shortNames, longNames) {\n\t\t\t\tvar index = -1,\n\t\t\t\t\tnames = $.map(lookAhead(match) ? longNames : shortNames, function (v, k) {\n\t\t\t\t\t\treturn [ [k, v] ];\n\t\t\t\t\t}).sort(function (a, b) {\n\t\t\t\t\t\treturn -(a[1].length - b[1].length);\n\t\t\t\t\t});\n\n\t\t\t\t$.each(names, function (i, pair) {\n\t\t\t\t\tvar name = pair[1];\n\t\t\t\t\tif (value.substr(iValue, name.length).toLowerCase() === name.toLowerCase()) {\n\t\t\t\t\t\tindex = pair[0];\n\t\t\t\t\t\tiValue += name.length;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\treturn index + 1;\n\t\t\t\t} else {\n\t\t\t\t\tthrow \"Unknown name at position \" + iValue;\n\t\t\t\t}\n\t\t\t},\n\t\t\t// Confirm that a literal character matches the string value\n\t\t\tcheckLiteral = function() {\n\t\t\t\tif (value.charAt(iValue) !== format.charAt(iFormat)) {\n\t\t\t\t\tthrow \"Unexpected literal at position \" + iValue;\n\t\t\t\t}\n\t\t\t\tiValue++;\n\t\t\t};\n\n\t\tfor (iFormat = 0; iFormat < format.length; iFormat++) {\n\t\t\tif (literal) {\n\t\t\t\tif (format.charAt(iFormat) === \"'\" && !lookAhead(\"'\")) {\n\t\t\t\t\tliteral = false;\n\t\t\t\t} else {\n\t\t\t\t\tcheckLiteral();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tswitch (format.charAt(iFormat)) {\n\t\t\t\t\tcase \"d\":\n\t\t\t\t\t\tday = getNumber(\"d\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"D\":\n\t\t\t\t\t\tgetName(\"D\", dayNamesShort, dayNames);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"o\":\n\t\t\t\t\t\tdoy = getNumber(\"o\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"m\":\n\t\t\t\t\t\tmonth = getNumber(\"m\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"M\":\n\t\t\t\t\t\tmonth = getName(\"M\", monthNamesShort, monthNames);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"y\":\n\t\t\t\t\t\tyear = getNumber(\"y\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"@\":\n\t\t\t\t\t\tdate = new Date(getNumber(\"@\"));\n\t\t\t\t\t\tyear = date.getFullYear();\n\t\t\t\t\t\tmonth = date.getMonth() + 1;\n\t\t\t\t\t\tday = date.getDate();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"!\":\n\t\t\t\t\t\tdate = new Date((getNumber(\"!\") - this._ticksTo1970) / 10000);\n\t\t\t\t\t\tyear = date.getFullYear();\n\t\t\t\t\t\tmonth = date.getMonth() + 1;\n\t\t\t\t\t\tday = date.getDate();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"'\":\n\t\t\t\t\t\tif (lookAhead(\"'\")){\n\t\t\t\t\t\t\tcheckLiteral();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tliteral = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tcheckLiteral();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (iValue < value.length){\n\t\t\textra = value.substr(iValue);\n\t\t\tif (!/^\\s+/.test(extra)) {\n\t\t\t\tthrow \"Extra/unparsed characters found in date: \" + extra;\n\t\t\t}\n\t\t}\n\n\t\tif (year === -1) {\n\t\t\tyear = new Date().getFullYear();\n\t\t} else if (year < 100) {\n\t\t\tyear += new Date().getFullYear() - new Date().getFullYear() % 100 +\n\t\t\t\t(year <= shortYearCutoff ? 0 : -100);\n\t\t}\n\n\t\tif (doy > -1) {\n\t\t\tmonth = 1;\n\t\t\tday = doy;\n\t\t\tdo {\n\t\t\t\tdim = this._getDaysInMonth(year, month - 1);\n\t\t\t\tif (day <= dim) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tmonth++;\n\t\t\t\tday -= dim;\n\t\t\t} while (true);\n\t\t}\n\n\t\tdate = this._daylightSavingAdjust(new Date(year, month - 1, day));\n\t\tif (date.getFullYear() !== year || date.getMonth() + 1 !== month || date.getDate() !== day) {\n\t\t\tthrow \"Invalid date\"; // E.g. 31/02/00\n\t\t}\n\t\treturn date;\n\t},\n\n\t/* Standard date formats. */\n\tATOM: \"yy-mm-dd\", // RFC 3339 (ISO 8601)\n\tCOOKIE: \"D, dd M yy\",\n\tISO_8601: \"yy-mm-dd\",\n\tRFC_822: \"D, d M y\",\n\tRFC_850: \"DD, dd-M-y\",\n\tRFC_1036: \"D, d M y\",\n\tRFC_1123: \"D, d M yy\",\n\tRFC_2822: \"D, d M yy\",\n\tRSS: \"D, d M y\", // RFC 822\n\tTICKS: \"!\",\n\tTIMESTAMP: \"@\",\n\tW3C: \"yy-mm-dd\", // ISO 8601\n\n\t_ticksTo1970: (((1970 - 1) * 365 + Math.floor(1970 / 4) - Math.floor(1970 / 100) +\n\t\tMath.floor(1970 / 400)) * 24 * 60 * 60 * 10000000),\n\n\t/* Format a date object into a string value.\n\t * The format can be combinations of the following:\n\t * d  - day of month (no leading zero)\n\t * dd - day of month (two digit)\n\t * o  - day of year (no leading zeros)\n\t * oo - day of year (three digit)\n\t * D  - day name short\n\t * DD - day name long\n\t * m  - month of year (no leading zero)\n\t * mm - month of year (two digit)\n\t * M  - month name short\n\t * MM - month name long\n\t * y  - year (two digit)\n\t * yy - year (four digit)\n\t * @ - Unix timestamp (ms since 01/01/1970)\n\t * ! - Windows ticks (100ns since 01/01/0001)\n\t * \"...\" - literal text\n\t * '' - single quote\n\t *\n\t * @param  format string - the desired format of the date\n\t * @param  date Date - the date value to format\n\t * @param  settings Object - attributes include:\n\t *\t\t\t\t\tdayNamesShort\tstring[7] - abbreviated names of the days from Sunday (optional)\n\t *\t\t\t\t\tdayNames\t\tstring[7] - names of the days from Sunday (optional)\n\t *\t\t\t\t\tmonthNamesShort string[12] - abbreviated names of the months (optional)\n\t *\t\t\t\t\tmonthNames\t\tstring[12] - names of the months (optional)\n\t * @return  string - the date in the above format\n\t */\n\tformatDate: function (format, date, settings) {\n\t\tif (!date) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\tvar iFormat,\n\t\t\tdayNamesShort = (settings ? settings.dayNamesShort : null) || this._defaults.dayNamesShort,\n\t\t\tdayNames = (settings ? settings.dayNames : null) || this._defaults.dayNames,\n\t\t\tmonthNamesShort = (settings ? settings.monthNamesShort : null) || this._defaults.monthNamesShort,\n\t\t\tmonthNames = (settings ? settings.monthNames : null) || this._defaults.monthNames,\n\t\t\t// Check whether a format character is doubled\n\t\t\tlookAhead = function(match) {\n\t\t\t\tvar matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) === match);\n\t\t\t\tif (matches) {\n\t\t\t\t\tiFormat++;\n\t\t\t\t}\n\t\t\t\treturn matches;\n\t\t\t},\n\t\t\t// Format a number, with leading zero if necessary\n\t\t\tformatNumber = function(match, value, len) {\n\t\t\t\tvar num = \"\" + value;\n\t\t\t\tif (lookAhead(match)) {\n\t\t\t\t\twhile (num.length < len) {\n\t\t\t\t\t\tnum = \"0\" + num;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn num;\n\t\t\t},\n\t\t\t// Format a name, short or long as requested\n\t\t\tformatName = function(match, value, shortNames, longNames) {\n\t\t\t\treturn (lookAhead(match) ? longNames[value] : shortNames[value]);\n\t\t\t},\n\t\t\toutput = \"\",\n\t\t\tliteral = false;\n\n\t\tif (date) {\n\t\t\tfor (iFormat = 0; iFormat < format.length; iFormat++) {\n\t\t\t\tif (literal) {\n\t\t\t\t\tif (format.charAt(iFormat) === \"'\" && !lookAhead(\"'\")) {\n\t\t\t\t\t\tliteral = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\toutput += format.charAt(iFormat);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tswitch (format.charAt(iFormat)) {\n\t\t\t\t\t\tcase \"d\":\n\t\t\t\t\t\t\toutput += formatNumber(\"d\", date.getDate(), 2);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"D\":\n\t\t\t\t\t\t\toutput += formatName(\"D\", date.getDay(), dayNamesShort, dayNames);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"o\":\n\t\t\t\t\t\t\toutput += formatNumber(\"o\",\n\t\t\t\t\t\t\t\tMath.round((new Date(date.getFullYear(), date.getMonth(), date.getDate()).getTime() - new Date(date.getFullYear(), 0, 0).getTime()) / 86400000), 3);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"m\":\n\t\t\t\t\t\t\toutput += formatNumber(\"m\", date.getMonth() + 1, 2);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"M\":\n\t\t\t\t\t\t\toutput += formatName(\"M\", date.getMonth(), monthNamesShort, monthNames);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"y\":\n\t\t\t\t\t\t\toutput += (lookAhead(\"y\") ? date.getFullYear() :\n\t\t\t\t\t\t\t\t(date.getYear() % 100 < 10 ? \"0\" : \"\") + date.getYear() % 100);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"@\":\n\t\t\t\t\t\t\toutput += date.getTime();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"!\":\n\t\t\t\t\t\t\toutput += date.getTime() * 10000 + this._ticksTo1970;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"'\":\n\t\t\t\t\t\t\tif (lookAhead(\"'\")) {\n\t\t\t\t\t\t\t\toutput += \"'\";\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tliteral = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\toutput += format.charAt(iFormat);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t},\n\n\t/* Extract all possible characters from the date format. */\n\t_possibleChars: function (format) {\n\t\tvar iFormat,\n\t\t\tchars = \"\",\n\t\t\tliteral = false,\n\t\t\t// Check whether a format character is doubled\n\t\t\tlookAhead = function(match) {\n\t\t\t\tvar matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) === match);\n\t\t\t\tif (matches) {\n\t\t\t\t\tiFormat++;\n\t\t\t\t}\n\t\t\t\treturn matches;\n\t\t\t};\n\n\t\tfor (iFormat = 0; iFormat < format.length; iFormat++) {\n\t\t\tif (literal) {\n\t\t\t\tif (format.charAt(iFormat) === \"'\" && !lookAhead(\"'\")) {\n\t\t\t\t\tliteral = false;\n\t\t\t\t} else {\n\t\t\t\t\tchars += format.charAt(iFormat);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tswitch (format.charAt(iFormat)) {\n\t\t\t\t\tcase \"d\": case \"m\": case \"y\": case \"@\":\n\t\t\t\t\t\tchars += \"0123456789\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"D\": case \"M\":\n\t\t\t\t\t\treturn null; // Accept anything\n\t\t\t\t\tcase \"'\":\n\t\t\t\t\t\tif (lookAhead(\"'\")) {\n\t\t\t\t\t\t\tchars += \"'\";\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tliteral = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tchars += format.charAt(iFormat);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn chars;\n\t},\n\n\t/* Get a setting value, defaulting if necessary. */\n\t_get: function(inst, name) {\n\t\treturn inst.settings[name] !== undefined ?\n\t\t\tinst.settings[name] : this._defaults[name];\n\t},\n\n\t/* Parse existing date and initialise date picker. */\n\t_setDateFromField: function(inst, noDefault) {\n\t\tif (inst.input.val() === inst.lastVal) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar dateFormat = this._get(inst, \"dateFormat\"),\n\t\t\tdates = inst.lastVal = inst.input ? inst.input.val() : null,\n\t\t\tdefaultDate = this._getDefaultDate(inst),\n\t\t\tdate = defaultDate,\n\t\t\tsettings = this._getFormatConfig(inst);\n\n\t\ttry {\n\t\t\tdate = this.parseDate(dateFormat, dates, settings) || defaultDate;\n\t\t} catch (event) {\n\t\t\tdates = (noDefault ? \"\" : dates);\n\t\t}\n\t\tinst.selectedDay = date.getDate();\n\t\tinst.drawMonth = inst.selectedMonth = date.getMonth();\n\t\tinst.drawYear = inst.selectedYear = date.getFullYear();\n\t\tinst.currentDay = (dates ? date.getDate() : 0);\n\t\tinst.currentMonth = (dates ? date.getMonth() : 0);\n\t\tinst.currentYear = (dates ? date.getFullYear() : 0);\n\t\tthis._adjustInstDate(inst);\n\t},\n\n\t/* Retrieve the default date shown on opening. */\n\t_getDefaultDate: function(inst) {\n\t\treturn this._restrictMinMax(inst,\n\t\t\tthis._determineDate(inst, this._get(inst, \"defaultDate\"), new Date()));\n\t},\n\n\t/* A date may be specified as an exact value or a relative one. */\n\t_determineDate: function(inst, date, defaultDate) {\n\t\tvar offsetNumeric = function(offset) {\n\t\t\t\tvar date = new Date();\n\t\t\t\tdate.setDate(date.getDate() + offset);\n\t\t\t\treturn date;\n\t\t\t},\n\t\t\toffsetString = function(offset) {\n\t\t\t\ttry {\n\t\t\t\t\treturn $.datepicker.parseDate($.datepicker._get(inst, \"dateFormat\"),\n\t\t\t\t\t\toffset, $.datepicker._getFormatConfig(inst));\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\t// Ignore\n\t\t\t\t}\n\n\t\t\t\tvar date = (offset.toLowerCase().match(/^c/) ?\n\t\t\t\t\t$.datepicker._getDate(inst) : null) || new Date(),\n\t\t\t\t\tyear = date.getFullYear(),\n\t\t\t\t\tmonth = date.getMonth(),\n\t\t\t\t\tday = date.getDate(),\n\t\t\t\t\tpattern = /([+\\-]?[0-9]+)\\s*(d|D|w|W|m|M|y|Y)?/g,\n\t\t\t\t\tmatches = pattern.exec(offset);\n\n\t\t\t\twhile (matches) {\n\t\t\t\t\tswitch (matches[2] || \"d\") {\n\t\t\t\t\t\tcase \"d\" : case \"D\" :\n\t\t\t\t\t\t\tday += parseInt(matches[1],10); break;\n\t\t\t\t\t\tcase \"w\" : case \"W\" :\n\t\t\t\t\t\t\tday += parseInt(matches[1],10) * 7; break;\n\t\t\t\t\t\tcase \"m\" : case \"M\" :\n\t\t\t\t\t\t\tmonth += parseInt(matches[1],10);\n\t\t\t\t\t\t\tday = Math.min(day, $.datepicker._getDaysInMonth(year, month));\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"y\": case \"Y\" :\n\t\t\t\t\t\t\tyear += parseInt(matches[1],10);\n\t\t\t\t\t\t\tday = Math.min(day, $.datepicker._getDaysInMonth(year, month));\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tmatches = pattern.exec(offset);\n\t\t\t\t}\n\t\t\t\treturn new Date(year, month, day);\n\t\t\t},\n\t\t\tnewDate = (date == null || date === \"\" ? defaultDate : (typeof date === \"string\" ? offsetString(date) :\n\t\t\t\t(typeof date === \"number\" ? (isNaN(date) ? defaultDate : offsetNumeric(date)) : new Date(date.getTime()))));\n\n\t\tnewDate = (newDate && newDate.toString() === \"Invalid Date\" ? defaultDate : newDate);\n\t\tif (newDate) {\n\t\t\tnewDate.setHours(0);\n\t\t\tnewDate.setMinutes(0);\n\t\t\tnewDate.setSeconds(0);\n\t\t\tnewDate.setMilliseconds(0);\n\t\t}\n\t\treturn this._daylightSavingAdjust(newDate);\n\t},\n\n\t/* Handle switch to/from daylight saving.\n\t * Hours may be non-zero on daylight saving cut-over:\n\t * > 12 when midnight changeover, but then cannot generate\n\t * midnight datetime, so jump to 1AM, otherwise reset.\n\t * @param  date  (Date) the date to check\n\t * @return  (Date) the corrected date\n\t */\n\t_daylightSavingAdjust: function(date) {\n\t\tif (!date) {\n\t\t\treturn null;\n\t\t}\n\t\tdate.setHours(date.getHours() > 12 ? date.getHours() + 2 : 0);\n\t\treturn date;\n\t},\n\n\t/* Set the date(s) directly. */\n\t_setDate: function(inst, date, noChange) {\n\t\tvar clear = !date,\n\t\t\torigMonth = inst.selectedMonth,\n\t\t\torigYear = inst.selectedYear,\n\t\t\tnewDate = this._restrictMinMax(inst, this._determineDate(inst, date, new Date()));\n\n\t\tinst.selectedDay = inst.currentDay = newDate.getDate();\n\t\tinst.drawMonth = inst.selectedMonth = inst.currentMonth = newDate.getMonth();\n\t\tinst.drawYear = inst.selectedYear = inst.currentYear = newDate.getFullYear();\n\t\tif ((origMonth !== inst.selectedMonth || origYear !== inst.selectedYear) && !noChange) {\n\t\t\tthis._notifyChange(inst);\n\t\t}\n\t\tthis._adjustInstDate(inst);\n\t\tif (inst.input) {\n\t\t\tinst.input.val(clear ? \"\" : this._formatDate(inst));\n\t\t}\n\t},\n\n\t/* Retrieve the date(s) directly. */\n\t_getDate: function(inst) {\n\t\tvar startDate = (!inst.currentYear || (inst.input && inst.input.val() === \"\") ? null :\n\t\t\tthis._daylightSavingAdjust(new Date(\n\t\t\tinst.currentYear, inst.currentMonth, inst.currentDay)));\n\t\t\treturn startDate;\n\t},\n\n\t/* Attach the onxxx handlers.  These are declared statically so\n\t * they work with static code transformers like Caja.\n\t */\n\t_attachHandlers: function(inst) {\n\t\tvar stepMonths = this._get(inst, \"stepMonths\"),\n\t\t\tid = \"#\" + inst.id.replace( /\\\\\\\\/g, \"\\\\\" );\n\t\tinst.dpDiv.find(\"[data-handler]\").map(function () {\n\t\t\tvar handler = {\n\t\t\t\tprev: function () {\n\t\t\t\t\t$.datepicker._adjustDate(id, -stepMonths, \"M\");\n\t\t\t\t},\n\t\t\t\tnext: function () {\n\t\t\t\t\t$.datepicker._adjustDate(id, +stepMonths, \"M\");\n\t\t\t\t},\n\t\t\t\thide: function () {\n\t\t\t\t\t$.datepicker._hideDatepicker();\n\t\t\t\t},\n\t\t\t\ttoday: function () {\n\t\t\t\t\t$.datepicker._gotoToday(id);\n\t\t\t\t},\n\t\t\t\tselectDay: function () {\n\t\t\t\t\t$.datepicker._selectDay(id, +this.getAttribute(\"data-month\"), +this.getAttribute(\"data-year\"), this);\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\tselectMonth: function () {\n\t\t\t\t\t$.datepicker._selectMonthYear(id, this, \"M\");\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\tselectYear: function () {\n\t\t\t\t\t$.datepicker._selectMonthYear(id, this, \"Y\");\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t};\n\t\t\t$(this).bind(this.getAttribute(\"data-event\"), handler[this.getAttribute(\"data-handler\")]);\n\t\t});\n\t},\n\n\t/* Generate the HTML for the current state of the date picker. */\n\t_generateHTML: function(inst) {\n\t\tvar maxDraw, prevText, prev, nextText, next, currentText, gotoDate,\n\t\t\tcontrols, buttonPanel, firstDay, showWeek, dayNames, dayNamesMin,\n\t\t\tmonthNames, monthNamesShort, beforeShowDay, showOtherMonths,\n\t\t\tselectOtherMonths, defaultDate, html, dow, row, group, col, selectedDate,\n\t\t\tcornerClass, calender, thead, day, daysInMonth, leadDays, curRows, numRows,\n\t\t\tprintDate, dRow, tbody, daySettings, otherMonth, unselectable,\n\t\t\ttempDate = new Date(),\n\t\t\ttoday = this._daylightSavingAdjust(\n\t\t\t\tnew Date(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate())), // clear time\n\t\t\tisRTL = this._get(inst, \"isRTL\"),\n\t\t\tshowButtonPanel = this._get(inst, \"showButtonPanel\"),\n\t\t\thideIfNoPrevNext = this._get(inst, \"hideIfNoPrevNext\"),\n\t\t\tnavigationAsDateFormat = this._get(inst, \"navigationAsDateFormat\"),\n\t\t\tnumMonths = this._getNumberOfMonths(inst),\n\t\t\tshowCurrentAtPos = this._get(inst, \"showCurrentAtPos\"),\n\t\t\tstepMonths = this._get(inst, \"stepMonths\"),\n\t\t\tisMultiMonth = (numMonths[0] !== 1 || numMonths[1] !== 1),\n\t\t\tcurrentDate = this._daylightSavingAdjust((!inst.currentDay ? new Date(9999, 9, 9) :\n\t\t\t\tnew Date(inst.currentYear, inst.currentMonth, inst.currentDay))),\n\t\t\tminDate = this._getMinMaxDate(inst, \"min\"),\n\t\t\tmaxDate = this._getMinMaxDate(inst, \"max\"),\n\t\t\tdrawMonth = inst.drawMonth - showCurrentAtPos,\n\t\t\tdrawYear = inst.drawYear;\n\n\t\tif (drawMonth < 0) {\n\t\t\tdrawMonth += 12;\n\t\t\tdrawYear--;\n\t\t}\n\t\tif (maxDate) {\n\t\t\tmaxDraw = this._daylightSavingAdjust(new Date(maxDate.getFullYear(),\n\t\t\t\tmaxDate.getMonth() - (numMonths[0] * numMonths[1]) + 1, maxDate.getDate()));\n\t\t\tmaxDraw = (minDate && maxDraw < minDate ? minDate : maxDraw);\n\t\t\twhile (this._daylightSavingAdjust(new Date(drawYear, drawMonth, 1)) > maxDraw) {\n\t\t\t\tdrawMonth--;\n\t\t\t\tif (drawMonth < 0) {\n\t\t\t\t\tdrawMonth = 11;\n\t\t\t\t\tdrawYear--;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tinst.drawMonth = drawMonth;\n\t\tinst.drawYear = drawYear;\n\n\t\tprevText = this._get(inst, \"prevText\");\n\t\tprevText = (!navigationAsDateFormat ? prevText : this.formatDate(prevText,\n\t\t\tthis._daylightSavingAdjust(new Date(drawYear, drawMonth - stepMonths, 1)),\n\t\t\tthis._getFormatConfig(inst)));\n\n\t\tprev = (this._canAdjustMonth(inst, -1, drawYear, drawMonth) ?\n\t\t\t\"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click'\" +\n\t\t\t\" title='\" + prevText + \"'><span class='ui-icon ui-icon-circle-triangle-\" + ( isRTL ? \"e\" : \"w\") + \"'>\" + prevText + \"</span></a>\" :\n\t\t\t(hideIfNoPrevNext ? \"\" : \"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='\"+ prevText +\"'><span class='ui-icon ui-icon-circle-triangle-\" + ( isRTL ? \"e\" : \"w\") + \"'>\" + prevText + \"</span></a>\"));\n\n\t\tnextText = this._get(inst, \"nextText\");\n\t\tnextText = (!navigationAsDateFormat ? nextText : this.formatDate(nextText,\n\t\t\tthis._daylightSavingAdjust(new Date(drawYear, drawMonth + stepMonths, 1)),\n\t\t\tthis._getFormatConfig(inst)));\n\n\t\tnext = (this._canAdjustMonth(inst, +1, drawYear, drawMonth) ?\n\t\t\t\"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click'\" +\n\t\t\t\" title='\" + nextText + \"'><span class='ui-icon ui-icon-circle-triangle-\" + ( isRTL ? \"w\" : \"e\") + \"'>\" + nextText + \"</span></a>\" :\n\t\t\t(hideIfNoPrevNext ? \"\" : \"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='\"+ nextText + \"'><span class='ui-icon ui-icon-circle-triangle-\" + ( isRTL ? \"w\" : \"e\") + \"'>\" + nextText + \"</span></a>\"));\n\n\t\tcurrentText = this._get(inst, \"currentText\");\n\t\tgotoDate = (this._get(inst, \"gotoCurrent\") && inst.currentDay ? currentDate : today);\n\t\tcurrentText = (!navigationAsDateFormat ? currentText :\n\t\t\tthis.formatDate(currentText, gotoDate, this._getFormatConfig(inst)));\n\n\t\tcontrols = (!inst.inline ? \"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>\" +\n\t\t\tthis._get(inst, \"closeText\") + \"</button>\" : \"\");\n\n\t\tbuttonPanel = (showButtonPanel) ? \"<div class='ui-datepicker-buttonpane ui-widget-content'>\" + (isRTL ? controls : \"\") +\n\t\t\t(this._isInRange(inst, gotoDate) ? \"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'\" +\n\t\t\t\">\" + currentText + \"</button>\" : \"\") + (isRTL ? \"\" : controls) + \"</div>\" : \"\";\n\n\t\tfirstDay = parseInt(this._get(inst, \"firstDay\"),10);\n\t\tfirstDay = (isNaN(firstDay) ? 0 : firstDay);\n\n\t\tshowWeek = this._get(inst, \"showWeek\");\n\t\tdayNames = this._get(inst, \"dayNames\");\n\t\tdayNamesMin = this._get(inst, \"dayNamesMin\");\n\t\tmonthNames = this._get(inst, \"monthNames\");\n\t\tmonthNamesShort = this._get(inst, \"monthNamesShort\");\n\t\tbeforeShowDay = this._get(inst, \"beforeShowDay\");\n\t\tshowOtherMonths = this._get(inst, \"showOtherMonths\");\n\t\tselectOtherMonths = this._get(inst, \"selectOtherMonths\");\n\t\tdefaultDate = this._getDefaultDate(inst);\n\t\thtml = \"\";\n\t\tdow;\n\t\tfor (row = 0; row < numMonths[0]; row++) {\n\t\t\tgroup = \"\";\n\t\t\tthis.maxRows = 4;\n\t\t\tfor (col = 0; col < numMonths[1]; col++) {\n\t\t\t\tselectedDate = this._daylightSavingAdjust(new Date(drawYear, drawMonth, inst.selectedDay));\n\t\t\t\tcornerClass = \" ui-corner-all\";\n\t\t\t\tcalender = \"\";\n\t\t\t\tif (isMultiMonth) {\n\t\t\t\t\tcalender += \"<div class='ui-datepicker-group\";\n\t\t\t\t\tif (numMonths[1] > 1) {\n\t\t\t\t\t\tswitch (col) {\n\t\t\t\t\t\t\tcase 0: calender += \" ui-datepicker-group-first\";\n\t\t\t\t\t\t\t\tcornerClass = \" ui-corner-\" + (isRTL ? \"right\" : \"left\"); break;\n\t\t\t\t\t\t\tcase numMonths[1]-1: calender += \" ui-datepicker-group-last\";\n\t\t\t\t\t\t\t\tcornerClass = \" ui-corner-\" + (isRTL ? \"left\" : \"right\"); break;\n\t\t\t\t\t\t\tdefault: calender += \" ui-datepicker-group-middle\"; cornerClass = \"\"; break;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcalender += \"'>\";\n\t\t\t\t}\n\t\t\t\tcalender += \"<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix\" + cornerClass + \"'>\" +\n\t\t\t\t\t(/all|left/.test(cornerClass) && row === 0 ? (isRTL ? next : prev) : \"\") +\n\t\t\t\t\t(/all|right/.test(cornerClass) && row === 0 ? (isRTL ? prev : next) : \"\") +\n\t\t\t\t\tthis._generateMonthYearHeader(inst, drawMonth, drawYear, minDate, maxDate,\n\t\t\t\t\trow > 0 || col > 0, monthNames, monthNamesShort) + // draw month headers\n\t\t\t\t\t\"</div><table class='ui-datepicker-calendar'><thead>\" +\n\t\t\t\t\t\"<tr>\";\n\t\t\t\tthead = (showWeek ? \"<th class='ui-datepicker-week-col'>\" + this._get(inst, \"weekHeader\") + \"</th>\" : \"\");\n\t\t\t\tfor (dow = 0; dow < 7; dow++) { // days of the week\n\t\t\t\t\tday = (dow + firstDay) % 7;\n\t\t\t\t\tthead += \"<th scope='col'\" + ((dow + firstDay + 6) % 7 >= 5 ? \" class='ui-datepicker-week-end'\" : \"\") + \">\" +\n\t\t\t\t\t\t\"<span title='\" + dayNames[day] + \"'>\" + dayNamesMin[day] + \"</span></th>\";\n\t\t\t\t}\n\t\t\t\tcalender += thead + \"</tr></thead><tbody>\";\n\t\t\t\tdaysInMonth = this._getDaysInMonth(drawYear, drawMonth);\n\t\t\t\tif (drawYear === inst.selectedYear && drawMonth === inst.selectedMonth) {\n\t\t\t\t\tinst.selectedDay = Math.min(inst.selectedDay, daysInMonth);\n\t\t\t\t}\n\t\t\t\tleadDays = (this._getFirstDayOfMonth(drawYear, drawMonth) - firstDay + 7) % 7;\n\t\t\t\tcurRows = Math.ceil((leadDays + daysInMonth) / 7); // calculate the number of rows to generate\n\t\t\t\tnumRows = (isMultiMonth ? this.maxRows > curRows ? this.maxRows : curRows : curRows); //If multiple months, use the higher number of rows (see #7043)\n\t\t\t\tthis.maxRows = numRows;\n\t\t\t\tprintDate = this._daylightSavingAdjust(new Date(drawYear, drawMonth, 1 - leadDays));\n\t\t\t\tfor (dRow = 0; dRow < numRows; dRow++) { // create date picker rows\n\t\t\t\t\tcalender += \"<tr>\";\n\t\t\t\t\ttbody = (!showWeek ? \"\" : \"<td class='ui-datepicker-week-col'>\" +\n\t\t\t\t\t\tthis._get(inst, \"calculateWeek\")(printDate) + \"</td>\");\n\t\t\t\t\tfor (dow = 0; dow < 7; dow++) { // create date picker days\n\t\t\t\t\t\tdaySettings = (beforeShowDay ?\n\t\t\t\t\t\t\tbeforeShowDay.apply((inst.input ? inst.input[0] : null), [printDate]) : [true, \"\"]);\n\t\t\t\t\t\totherMonth = (printDate.getMonth() !== drawMonth);\n\t\t\t\t\t\tunselectable = (otherMonth && !selectOtherMonths) || !daySettings[0] ||\n\t\t\t\t\t\t\t(minDate && printDate < minDate) || (maxDate && printDate > maxDate);\n\t\t\t\t\t\ttbody += \"<td class='\" +\n\t\t\t\t\t\t\t((dow + firstDay + 6) % 7 >= 5 ? \" ui-datepicker-week-end\" : \"\") + // highlight weekends\n\t\t\t\t\t\t\t(otherMonth ? \" ui-datepicker-other-month\" : \"\") + // highlight days from other months\n\t\t\t\t\t\t\t((printDate.getTime() === selectedDate.getTime() && drawMonth === inst.selectedMonth && inst._keyEvent) || // user pressed key\n\t\t\t\t\t\t\t(defaultDate.getTime() === printDate.getTime() && defaultDate.getTime() === selectedDate.getTime()) ?\n\t\t\t\t\t\t\t// or defaultDate is current printedDate and defaultDate is selectedDate\n\t\t\t\t\t\t\t\" \" + this._dayOverClass : \"\") + // highlight selected day\n\t\t\t\t\t\t\t(unselectable ? \" \" + this._unselectableClass + \" ui-state-disabled\": \"\") +  // highlight unselectable days\n\t\t\t\t\t\t\t(otherMonth && !showOtherMonths ? \"\" : \" \" + daySettings[1] + // highlight custom dates\n\t\t\t\t\t\t\t(printDate.getTime() === currentDate.getTime() ? \" \" + this._currentClass : \"\") + // highlight selected day\n\t\t\t\t\t\t\t(printDate.getTime() === today.getTime() ? \" ui-datepicker-today\" : \"\")) + \"'\" + // highlight today (if different)\n\t\t\t\t\t\t\t((!otherMonth || showOtherMonths) && daySettings[2] ? \" title='\" + daySettings[2].replace(/'/g, \"&#39;\") + \"'\" : \"\") + // cell title\n\t\t\t\t\t\t\t(unselectable ? \"\" : \" data-handler='selectDay' data-event='click' data-month='\" + printDate.getMonth() + \"' data-year='\" + printDate.getFullYear() + \"'\") + \">\" + // actions\n\t\t\t\t\t\t\t(otherMonth && !showOtherMonths ? \"&#xa0;\" : // display for other months\n\t\t\t\t\t\t\t(unselectable ? \"<span class='ui-state-default'>\" + printDate.getDate() + \"</span>\" : \"<a class='ui-state-default\" +\n\t\t\t\t\t\t\t(printDate.getTime() === today.getTime() ? \" ui-state-highlight\" : \"\") +\n\t\t\t\t\t\t\t(printDate.getTime() === currentDate.getTime() ? \" ui-state-active\" : \"\") + // highlight selected day\n\t\t\t\t\t\t\t(otherMonth ? \" ui-priority-secondary\" : \"\") + // distinguish dates from other months\n\t\t\t\t\t\t\t\"' href='#'>\" + printDate.getDate() + \"</a>\")) + \"</td>\"; // display selectable date\n\t\t\t\t\t\tprintDate.setDate(printDate.getDate() + 1);\n\t\t\t\t\t\tprintDate = this._daylightSavingAdjust(printDate);\n\t\t\t\t\t}\n\t\t\t\t\tcalender += tbody + \"</tr>\";\n\t\t\t\t}\n\t\t\t\tdrawMonth++;\n\t\t\t\tif (drawMonth > 11) {\n\t\t\t\t\tdrawMonth = 0;\n\t\t\t\t\tdrawYear++;\n\t\t\t\t}\n\t\t\t\tcalender += \"</tbody></table>\" + (isMultiMonth ? \"</div>\" +\n\t\t\t\t\t\t\t((numMonths[0] > 0 && col === numMonths[1]-1) ? \"<div class='ui-datepicker-row-break'></div>\" : \"\") : \"\");\n\t\t\t\tgroup += calender;\n\t\t\t}\n\t\t\thtml += group;\n\t\t}\n\t\thtml += buttonPanel;\n\t\tinst._keyEvent = false;\n\t\treturn html;\n\t},\n\n\t/* Generate the month and year header. */\n\t_generateMonthYearHeader: function(inst, drawMonth, drawYear, minDate, maxDate,\n\t\t\tsecondary, monthNames, monthNamesShort) {\n\n\t\tvar inMinYear, inMaxYear, month, years, thisYear, determineYear, year, endYear,\n\t\t\tchangeMonth = this._get(inst, \"changeMonth\"),\n\t\t\tchangeYear = this._get(inst, \"changeYear\"),\n\t\t\tshowMonthAfterYear = this._get(inst, \"showMonthAfterYear\"),\n\t\t\thtml = \"<div class='ui-datepicker-title'>\",\n\t\t\tmonthHtml = \"\";\n\n\t\t// month selection\n\t\tif (secondary || !changeMonth) {\n\t\t\tmonthHtml += \"<span class='ui-datepicker-month'>\" + monthNames[drawMonth] + \"</span>\";\n\t\t} else {\n\t\t\tinMinYear = (minDate && minDate.getFullYear() === drawYear);\n\t\t\tinMaxYear = (maxDate && maxDate.getFullYear() === drawYear);\n\t\t\tmonthHtml += \"<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>\";\n\t\t\tfor ( month = 0; month < 12; month++) {\n\t\t\t\tif ((!inMinYear || month >= minDate.getMonth()) && (!inMaxYear || month <= maxDate.getMonth())) {\n\t\t\t\t\tmonthHtml += \"<option value='\" + month + \"'\" +\n\t\t\t\t\t\t(month === drawMonth ? \" selected='selected'\" : \"\") +\n\t\t\t\t\t\t\">\" + monthNamesShort[month] + \"</option>\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tmonthHtml += \"</select>\";\n\t\t}\n\n\t\tif (!showMonthAfterYear) {\n\t\t\thtml += monthHtml + (secondary || !(changeMonth && changeYear) ? \"&#xa0;\" : \"\");\n\t\t}\n\n\t\t// year selection\n\t\tif ( !inst.yearshtml ) {\n\t\t\tinst.yearshtml = \"\";\n\t\t\tif (secondary || !changeYear) {\n\t\t\t\thtml += \"<span class='ui-datepicker-year'>\" + drawYear + \"</span>\";\n\t\t\t} else {\n\t\t\t\t// determine range of years to display\n\t\t\t\tyears = this._get(inst, \"yearRange\").split(\":\");\n\t\t\t\tthisYear = new Date().getFullYear();\n\t\t\t\tdetermineYear = function(value) {\n\t\t\t\t\tvar year = (value.match(/c[+\\-].*/) ? drawYear + parseInt(value.substring(1), 10) :\n\t\t\t\t\t\t(value.match(/[+\\-].*/) ? thisYear + parseInt(value, 10) :\n\t\t\t\t\t\tparseInt(value, 10)));\n\t\t\t\t\treturn (isNaN(year) ? thisYear : year);\n\t\t\t\t};\n\t\t\t\tyear = determineYear(years[0]);\n\t\t\t\tendYear = Math.max(year, determineYear(years[1] || \"\"));\n\t\t\t\tyear = (minDate ? Math.max(year, minDate.getFullYear()) : year);\n\t\t\t\tendYear = (maxDate ? Math.min(endYear, maxDate.getFullYear()) : endYear);\n\t\t\t\tinst.yearshtml += \"<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>\";\n\t\t\t\tfor (; year <= endYear; year++) {\n\t\t\t\t\tinst.yearshtml += \"<option value='\" + year + \"'\" +\n\t\t\t\t\t\t(year === drawYear ? \" selected='selected'\" : \"\") +\n\t\t\t\t\t\t\">\" + year + \"</option>\";\n\t\t\t\t}\n\t\t\t\tinst.yearshtml += \"</select>\";\n\n\t\t\t\thtml += inst.yearshtml;\n\t\t\t\tinst.yearshtml = null;\n\t\t\t}\n\t\t}\n\n\t\thtml += this._get(inst, \"yearSuffix\");\n\t\tif (showMonthAfterYear) {\n\t\t\thtml += (secondary || !(changeMonth && changeYear) ? \"&#xa0;\" : \"\") + monthHtml;\n\t\t}\n\t\thtml += \"</div>\"; // Close datepicker_header\n\t\treturn html;\n\t},\n\n\t/* Adjust one of the date sub-fields. */\n\t_adjustInstDate: function(inst, offset, period) {\n\t\tvar year = inst.drawYear + (period === \"Y\" ? offset : 0),\n\t\t\tmonth = inst.drawMonth + (period === \"M\" ? offset : 0),\n\t\t\tday = Math.min(inst.selectedDay, this._getDaysInMonth(year, month)) + (period === \"D\" ? offset : 0),\n\t\t\tdate = this._restrictMinMax(inst, this._daylightSavingAdjust(new Date(year, month, day)));\n\n\t\tinst.selectedDay = date.getDate();\n\t\tinst.drawMonth = inst.selectedMonth = date.getMonth();\n\t\tinst.drawYear = inst.selectedYear = date.getFullYear();\n\t\tif (period === \"M\" || period === \"Y\") {\n\t\t\tthis._notifyChange(inst);\n\t\t}\n\t},\n\n\t/* Ensure a date is within any min/max bounds. */\n\t_restrictMinMax: function(inst, date) {\n\t\tvar minDate = this._getMinMaxDate(inst, \"min\"),\n\t\t\tmaxDate = this._getMinMaxDate(inst, \"max\"),\n\t\t\tnewDate = (minDate && date < minDate ? minDate : date);\n\t\treturn (maxDate && newDate > maxDate ? maxDate : newDate);\n\t},\n\n\t/* Notify change of month/year. */\n\t_notifyChange: function(inst) {\n\t\tvar onChange = this._get(inst, \"onChangeMonthYear\");\n\t\tif (onChange) {\n\t\t\tonChange.apply((inst.input ? inst.input[0] : null),\n\t\t\t\t[inst.selectedYear, inst.selectedMonth + 1, inst]);\n\t\t}\n\t},\n\n\t/* Determine the number of months to show. */\n\t_getNumberOfMonths: function(inst) {\n\t\tvar numMonths = this._get(inst, \"numberOfMonths\");\n\t\treturn (numMonths == null ? [1, 1] : (typeof numMonths === \"number\" ? [1, numMonths] : numMonths));\n\t},\n\n\t/* Determine the current maximum date - ensure no time components are set. */\n\t_getMinMaxDate: function(inst, minMax) {\n\t\treturn this._determineDate(inst, this._get(inst, minMax + \"Date\"), null);\n\t},\n\n\t/* Find the number of days in a given month. */\n\t_getDaysInMonth: function(year, month) {\n\t\treturn 32 - this._daylightSavingAdjust(new Date(year, month, 32)).getDate();\n\t},\n\n\t/* Find the day of the week of the first of a month. */\n\t_getFirstDayOfMonth: function(year, month) {\n\t\treturn new Date(year, month, 1).getDay();\n\t},\n\n\t/* Determines if we should allow a \"next/prev\" month display change. */\n\t_canAdjustMonth: function(inst, offset, curYear, curMonth) {\n\t\tvar numMonths = this._getNumberOfMonths(inst),\n\t\t\tdate = this._daylightSavingAdjust(new Date(curYear,\n\t\t\tcurMonth + (offset < 0 ? offset : numMonths[0] * numMonths[1]), 1));\n\n\t\tif (offset < 0) {\n\t\t\tdate.setDate(this._getDaysInMonth(date.getFullYear(), date.getMonth()));\n\t\t}\n\t\treturn this._isInRange(inst, date);\n\t},\n\n\t/* Is the given date in the accepted range? */\n\t_isInRange: function(inst, date) {\n\t\tvar yearSplit, currentYear,\n\t\t\tminDate = this._getMinMaxDate(inst, \"min\"),\n\t\t\tmaxDate = this._getMinMaxDate(inst, \"max\"),\n\t\t\tminYear = null,\n\t\t\tmaxYear = null,\n\t\t\tyears = this._get(inst, \"yearRange\");\n\t\t\tif (years){\n\t\t\t\tyearSplit = years.split(\":\");\n\t\t\t\tcurrentYear = new Date().getFullYear();\n\t\t\t\tminYear = parseInt(yearSplit[0], 10);\n\t\t\t\tmaxYear = parseInt(yearSplit[1], 10);\n\t\t\t\tif ( yearSplit[0].match(/[+\\-].*/) ) {\n\t\t\t\t\tminYear += currentYear;\n\t\t\t\t}\n\t\t\t\tif ( yearSplit[1].match(/[+\\-].*/) ) {\n\t\t\t\t\tmaxYear += currentYear;\n\t\t\t\t}\n\t\t\t}\n\n\t\treturn ((!minDate || date.getTime() >= minDate.getTime()) &&\n\t\t\t(!maxDate || date.getTime() <= maxDate.getTime()) &&\n\t\t\t(!minYear || date.getFullYear() >= minYear) &&\n\t\t\t(!maxYear || date.getFullYear() <= maxYear));\n\t},\n\n\t/* Provide the configuration settings for formatting/parsing. */\n\t_getFormatConfig: function(inst) {\n\t\tvar shortYearCutoff = this._get(inst, \"shortYearCutoff\");\n\t\tshortYearCutoff = (typeof shortYearCutoff !== \"string\" ? shortYearCutoff :\n\t\t\tnew Date().getFullYear() % 100 + parseInt(shortYearCutoff, 10));\n\t\treturn {shortYearCutoff: shortYearCutoff,\n\t\t\tdayNamesShort: this._get(inst, \"dayNamesShort\"), dayNames: this._get(inst, \"dayNames\"),\n\t\t\tmonthNamesShort: this._get(inst, \"monthNamesShort\"), monthNames: this._get(inst, \"monthNames\")};\n\t},\n\n\t/* Format the given date for display. */\n\t_formatDate: function(inst, day, month, year) {\n\t\tif (!day) {\n\t\t\tinst.currentDay = inst.selectedDay;\n\t\t\tinst.currentMonth = inst.selectedMonth;\n\t\t\tinst.currentYear = inst.selectedYear;\n\t\t}\n\t\tvar date = (day ? (typeof day === \"object\" ? day :\n\t\t\tthis._daylightSavingAdjust(new Date(year, month, day))) :\n\t\t\tthis._daylightSavingAdjust(new Date(inst.currentYear, inst.currentMonth, inst.currentDay)));\n\t\treturn this.formatDate(this._get(inst, \"dateFormat\"), date, this._getFormatConfig(inst));\n\t}\n});\n\n/*\n * Bind hover events for datepicker elements.\n * Done via delegate so the binding only occurs once in the lifetime of the parent div.\n * Global datepicker_instActive, set by _updateDatepicker allows the handlers to find their way back to the active picker.\n */\nfunction datepicker_bindHover(dpDiv) {\n\tvar selector = \"button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a\";\n\treturn dpDiv.delegate(selector, \"mouseout\", function() {\n\t\t\t$(this).removeClass(\"ui-state-hover\");\n\t\t\tif (this.className.indexOf(\"ui-datepicker-prev\") !== -1) {\n\t\t\t\t$(this).removeClass(\"ui-datepicker-prev-hover\");\n\t\t\t}\n\t\t\tif (this.className.indexOf(\"ui-datepicker-next\") !== -1) {\n\t\t\t\t$(this).removeClass(\"ui-datepicker-next-hover\");\n\t\t\t}\n\t\t})\n\t\t.delegate( selector, \"mouseover\", datepicker_handleMouseover );\n}\n\nfunction datepicker_handleMouseover() {\n\tif (!$.datepicker._isDisabledDatepicker( datepicker_instActive.inline? datepicker_instActive.dpDiv.parent()[0] : datepicker_instActive.input[0])) {\n\t\t$(this).parents(\".ui-datepicker-calendar\").find(\"a\").removeClass(\"ui-state-hover\");\n\t\t$(this).addClass(\"ui-state-hover\");\n\t\tif (this.className.indexOf(\"ui-datepicker-prev\") !== -1) {\n\t\t\t$(this).addClass(\"ui-datepicker-prev-hover\");\n\t\t}\n\t\tif (this.className.indexOf(\"ui-datepicker-next\") !== -1) {\n\t\t\t$(this).addClass(\"ui-datepicker-next-hover\");\n\t\t}\n\t}\n}\n\n/* jQuery extend now ignores nulls! */\nfunction datepicker_extendRemove(target, props) {\n\t$.extend(target, props);\n\tfor (var name in props) {\n\t\tif (props[name] == null) {\n\t\t\ttarget[name] = props[name];\n\t\t}\n\t}\n\treturn target;\n}\n\n/* Invoke the datepicker functionality.\n   @param  options  string - a command, optionally followed by additional parameters or\n\t\t\t\t\tObject - settings for attaching new datepicker functionality\n   @return  jQuery object */\n$.fn.datepicker = function(options){\n\n\t/* Verify an empty collection wasn't passed - Fixes #6976 */\n\tif ( !this.length ) {\n\t\treturn this;\n\t}\n\n\t/* Initialise the date picker. */\n\tif (!$.datepicker.initialized) {\n\t\t$(document).mousedown($.datepicker._checkExternalClick);\n\t\t$.datepicker.initialized = true;\n\t}\n\n\t/* Append datepicker main container to body if not exist. */\n\tif ($(\"#\"+$.datepicker._mainDivId).length === 0) {\n\t\t$(\"body\").append($.datepicker.dpDiv);\n\t}\n\n\tvar otherArgs = Array.prototype.slice.call(arguments, 1);\n\tif (typeof options === \"string\" && (options === \"isDisabled\" || options === \"getDate\" || options === \"widget\")) {\n\t\treturn $.datepicker[\"_\" + options + \"Datepicker\"].\n\t\t\tapply($.datepicker, [this[0]].concat(otherArgs));\n\t}\n\tif (options === \"option\" && arguments.length === 2 && typeof arguments[1] === \"string\") {\n\t\treturn $.datepicker[\"_\" + options + \"Datepicker\"].\n\t\t\tapply($.datepicker, [this[0]].concat(otherArgs));\n\t}\n\treturn this.each(function() {\n\t\ttypeof options === \"string\" ?\n\t\t\t$.datepicker[\"_\" + options + \"Datepicker\"].\n\t\t\t\tapply($.datepicker, [this].concat(otherArgs)) :\n\t\t\t$.datepicker._attachDatepicker(this, options);\n\t});\n};\n\n$.datepicker = new Datepicker(); // singleton instance\n$.datepicker.initialized = false;\n$.datepicker.uuid = new Date().getTime();\n$.datepicker.version = \"1.11.4\";\n\nvar datepicker = $.datepicker;\n\n\n/*!\n * jQuery UI Draggable 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/draggable/\n */\n\n\n$.widget(\"ui.draggable\", $.ui.mouse, {\n\tversion: \"1.11.4\",\n\twidgetEventPrefix: \"drag\",\n\toptions: {\n\t\taddClasses: true,\n\t\tappendTo: \"parent\",\n\t\taxis: false,\n\t\tconnectToSortable: false,\n\t\tcontainment: false,\n\t\tcursor: \"auto\",\n\t\tcursorAt: false,\n\t\tgrid: false,\n\t\thandle: false,\n\t\thelper: \"original\",\n\t\tiframeFix: false,\n\t\topacity: false,\n\t\trefreshPositions: false,\n\t\trevert: false,\n\t\trevertDuration: 500,\n\t\tscope: \"default\",\n\t\tscroll: true,\n\t\tscrollSensitivity: 20,\n\t\tscrollSpeed: 20,\n\t\tsnap: false,\n\t\tsnapMode: \"both\",\n\t\tsnapTolerance: 20,\n\t\tstack: false,\n\t\tzIndex: false,\n\n\t\t// callbacks\n\t\tdrag: null,\n\t\tstart: null,\n\t\tstop: null\n\t},\n\t_create: function() {\n\n\t\tif ( this.options.helper === \"original\" ) {\n\t\t\tthis._setPositionRelative();\n\t\t}\n\t\tif (this.options.addClasses){\n\t\t\tthis.element.addClass(\"ui-draggable\");\n\t\t}\n\t\tif (this.options.disabled){\n\t\t\tthis.element.addClass(\"ui-draggable-disabled\");\n\t\t}\n\t\tthis._setHandleClassName();\n\n\t\tthis._mouseInit();\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tthis._super( key, value );\n\t\tif ( key === \"handle\" ) {\n\t\t\tthis._removeHandleClassName();\n\t\t\tthis._setHandleClassName();\n\t\t}\n\t},\n\n\t_destroy: function() {\n\t\tif ( ( this.helper || this.element ).is( \".ui-draggable-dragging\" ) ) {\n\t\t\tthis.destroyOnClear = true;\n\t\t\treturn;\n\t\t}\n\t\tthis.element.removeClass( \"ui-draggable ui-draggable-dragging ui-draggable-disabled\" );\n\t\tthis._removeHandleClassName();\n\t\tthis._mouseDestroy();\n\t},\n\n\t_mouseCapture: function(event) {\n\t\tvar o = this.options;\n\n\t\tthis._blurActiveElement( event );\n\n\t\t// among others, prevent a drag on a resizable-handle\n\t\tif (this.helper || o.disabled || $(event.target).closest(\".ui-resizable-handle\").length > 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\t//Quit if we're not on a valid handle\n\t\tthis.handle = this._getHandle(event);\n\t\tif (!this.handle) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis._blockFrames( o.iframeFix === true ? \"iframe\" : o.iframeFix );\n\n\t\treturn true;\n\n\t},\n\n\t_blockFrames: function( selector ) {\n\t\tthis.iframeBlocks = this.document.find( selector ).map(function() {\n\t\t\tvar iframe = $( this );\n\n\t\t\treturn $( \"<div>\" )\n\t\t\t\t.css( \"position\", \"absolute\" )\n\t\t\t\t.appendTo( iframe.parent() )\n\t\t\t\t.outerWidth( iframe.outerWidth() )\n\t\t\t\t.outerHeight( iframe.outerHeight() )\n\t\t\t\t.offset( iframe.offset() )[ 0 ];\n\t\t});\n\t},\n\n\t_unblockFrames: function() {\n\t\tif ( this.iframeBlocks ) {\n\t\t\tthis.iframeBlocks.remove();\n\t\t\tdelete this.iframeBlocks;\n\t\t}\n\t},\n\n\t_blurActiveElement: function( event ) {\n\t\tvar document = this.document[ 0 ];\n\n\t\t// Only need to blur if the event occurred on the draggable itself, see #10527\n\t\tif ( !this.handleElement.is( event.target ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// support: IE9\n\t\t// IE9 throws an \"Unspecified error\" accessing document.activeElement from an <iframe>\n\t\ttry {\n\n\t\t\t// Support: IE9, IE10\n\t\t\t// If the <body> is blurred, IE will switch windows, see #9520\n\t\t\tif ( document.activeElement && document.activeElement.nodeName.toLowerCase() !== \"body\" ) {\n\n\t\t\t\t// Blur any element that currently has focus, see #4261\n\t\t\t\t$( document.activeElement ).blur();\n\t\t\t}\n\t\t} catch ( error ) {}\n\t},\n\n\t_mouseStart: function(event) {\n\n\t\tvar o = this.options;\n\n\t\t//Create and append the visible helper\n\t\tthis.helper = this._createHelper(event);\n\n\t\tthis.helper.addClass(\"ui-draggable-dragging\");\n\n\t\t//Cache the helper size\n\t\tthis._cacheHelperProportions();\n\n\t\t//If ddmanager is used for droppables, set the global draggable\n\t\tif ($.ui.ddmanager) {\n\t\t\t$.ui.ddmanager.current = this;\n\t\t}\n\n\t\t/*\n\t\t * - Position generation -\n\t\t * This block generates everything position related - it's the core of draggables.\n\t\t */\n\n\t\t//Cache the margins of the original element\n\t\tthis._cacheMargins();\n\n\t\t//Store the helper's css position\n\t\tthis.cssPosition = this.helper.css( \"position\" );\n\t\tthis.scrollParent = this.helper.scrollParent( true );\n\t\tthis.offsetParent = this.helper.offsetParent();\n\t\tthis.hasFixedAncestor = this.helper.parents().filter(function() {\n\t\t\t\treturn $( this ).css( \"position\" ) === \"fixed\";\n\t\t\t}).length > 0;\n\n\t\t//The element's absolute position on the page minus margins\n\t\tthis.positionAbs = this.element.offset();\n\t\tthis._refreshOffsets( event );\n\n\t\t//Generate the original position\n\t\tthis.originalPosition = this.position = this._generatePosition( event, false );\n\t\tthis.originalPageX = event.pageX;\n\t\tthis.originalPageY = event.pageY;\n\n\t\t//Adjust the mouse offset relative to the helper if \"cursorAt\" is supplied\n\t\t(o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt));\n\n\t\t//Set a containment if given in the options\n\t\tthis._setContainment();\n\n\t\t//Trigger event + callbacks\n\t\tif (this._trigger(\"start\", event) === false) {\n\t\t\tthis._clear();\n\t\t\treturn false;\n\t\t}\n\n\t\t//Recache the helper size\n\t\tthis._cacheHelperProportions();\n\n\t\t//Prepare the droppable offsets\n\t\tif ($.ui.ddmanager && !o.dropBehaviour) {\n\t\t\t$.ui.ddmanager.prepareOffsets(this, event);\n\t\t}\n\n\t\t// Reset helper's right/bottom css if they're set and set explicit width/height instead\n\t\t// as this prevents resizing of elements with right/bottom set (see #7772)\n\t\tthis._normalizeRightBottom();\n\n\t\tthis._mouseDrag(event, true); //Execute the drag once - this causes the helper not to be visible before getting its correct position\n\n\t\t//If the ddmanager is used for droppables, inform the manager that dragging has started (see #5003)\n\t\tif ( $.ui.ddmanager ) {\n\t\t\t$.ui.ddmanager.dragStart(this, event);\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t_refreshOffsets: function( event ) {\n\t\tthis.offset = {\n\t\t\ttop: this.positionAbs.top - this.margins.top,\n\t\t\tleft: this.positionAbs.left - this.margins.left,\n\t\t\tscroll: false,\n\t\t\tparent: this._getParentOffset(),\n\t\t\trelative: this._getRelativeOffset()\n\t\t};\n\n\t\tthis.offset.click = {\n\t\t\tleft: event.pageX - this.offset.left,\n\t\t\ttop: event.pageY - this.offset.top\n\t\t};\n\t},\n\n\t_mouseDrag: function(event, noPropagation) {\n\t\t// reset any necessary cached properties (see #5009)\n\t\tif ( this.hasFixedAncestor ) {\n\t\t\tthis.offset.parent = this._getParentOffset();\n\t\t}\n\n\t\t//Compute the helpers position\n\t\tthis.position = this._generatePosition( event, true );\n\t\tthis.positionAbs = this._convertPositionTo(\"absolute\");\n\n\t\t//Call plugins and callbacks and use the resulting position if something is returned\n\t\tif (!noPropagation) {\n\t\t\tvar ui = this._uiHash();\n\t\t\tif (this._trigger(\"drag\", event, ui) === false) {\n\t\t\t\tthis._mouseUp({});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.position = ui.position;\n\t\t}\n\n\t\tthis.helper[ 0 ].style.left = this.position.left + \"px\";\n\t\tthis.helper[ 0 ].style.top = this.position.top + \"px\";\n\n\t\tif ($.ui.ddmanager) {\n\t\t\t$.ui.ddmanager.drag(this, event);\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t_mouseStop: function(event) {\n\n\t\t//If we are using droppables, inform the manager about the drop\n\t\tvar that = this,\n\t\t\tdropped = false;\n\t\tif ($.ui.ddmanager && !this.options.dropBehaviour) {\n\t\t\tdropped = $.ui.ddmanager.drop(this, event);\n\t\t}\n\n\t\t//if a drop comes from outside (a sortable)\n\t\tif (this.dropped) {\n\t\t\tdropped = this.dropped;\n\t\t\tthis.dropped = false;\n\t\t}\n\n\t\tif ((this.options.revert === \"invalid\" && !dropped) || (this.options.revert === \"valid\" && dropped) || this.options.revert === true || ($.isFunction(this.options.revert) && this.options.revert.call(this.element, dropped))) {\n\t\t\t$(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function() {\n\t\t\t\tif (that._trigger(\"stop\", event) !== false) {\n\t\t\t\t\tthat._clear();\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tif (this._trigger(\"stop\", event) !== false) {\n\t\t\t\tthis._clear();\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t_mouseUp: function( event ) {\n\t\tthis._unblockFrames();\n\n\t\t//If the ddmanager is used for droppables, inform the manager that dragging has stopped (see #5003)\n\t\tif ( $.ui.ddmanager ) {\n\t\t\t$.ui.ddmanager.dragStop(this, event);\n\t\t}\n\n\t\t// Only need to focus if the event occurred on the draggable itself, see #10527\n\t\tif ( this.handleElement.is( event.target ) ) {\n\t\t\t// The interaction is over; whether or not the click resulted in a drag, focus the element\n\t\t\tthis.element.focus();\n\t\t}\n\n\t\treturn $.ui.mouse.prototype._mouseUp.call(this, event);\n\t},\n\n\tcancel: function() {\n\n\t\tif (this.helper.is(\".ui-draggable-dragging\")) {\n\t\t\tthis._mouseUp({});\n\t\t} else {\n\t\t\tthis._clear();\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t_getHandle: function(event) {\n\t\treturn this.options.handle ?\n\t\t\t!!$( event.target ).closest( this.element.find( this.options.handle ) ).length :\n\t\t\ttrue;\n\t},\n\n\t_setHandleClassName: function() {\n\t\tthis.handleElement = this.options.handle ?\n\t\t\tthis.element.find( this.options.handle ) : this.element;\n\t\tthis.handleElement.addClass( \"ui-draggable-handle\" );\n\t},\n\n\t_removeHandleClassName: function() {\n\t\tthis.handleElement.removeClass( \"ui-draggable-handle\" );\n\t},\n\n\t_createHelper: function(event) {\n\n\t\tvar o = this.options,\n\t\t\thelperIsFunction = $.isFunction( o.helper ),\n\t\t\thelper = helperIsFunction ?\n\t\t\t\t$( o.helper.apply( this.element[ 0 ], [ event ] ) ) :\n\t\t\t\t( o.helper === \"clone\" ?\n\t\t\t\t\tthis.element.clone().removeAttr( \"id\" ) :\n\t\t\t\t\tthis.element );\n\n\t\tif (!helper.parents(\"body\").length) {\n\t\t\thelper.appendTo((o.appendTo === \"parent\" ? this.element[0].parentNode : o.appendTo));\n\t\t}\n\n\t\t// http://bugs.jqueryui.com/ticket/9446\n\t\t// a helper function can return the original element\n\t\t// which wouldn't have been set to relative in _create\n\t\tif ( helperIsFunction && helper[ 0 ] === this.element[ 0 ] ) {\n\t\t\tthis._setPositionRelative();\n\t\t}\n\n\t\tif (helper[0] !== this.element[0] && !(/(fixed|absolute)/).test(helper.css(\"position\"))) {\n\t\t\thelper.css(\"position\", \"absolute\");\n\t\t}\n\n\t\treturn helper;\n\n\t},\n\n\t_setPositionRelative: function() {\n\t\tif ( !( /^(?:r|a|f)/ ).test( this.element.css( \"position\" ) ) ) {\n\t\t\tthis.element[ 0 ].style.position = \"relative\";\n\t\t}\n\t},\n\n\t_adjustOffsetFromHelper: function(obj) {\n\t\tif (typeof obj === \"string\") {\n\t\t\tobj = obj.split(\" \");\n\t\t}\n\t\tif ($.isArray(obj)) {\n\t\t\tobj = { left: +obj[0], top: +obj[1] || 0 };\n\t\t}\n\t\tif (\"left\" in obj) {\n\t\t\tthis.offset.click.left = obj.left + this.margins.left;\n\t\t}\n\t\tif (\"right\" in obj) {\n\t\t\tthis.offset.click.left = this.helperProportions.width - obj.right + this.margins.left;\n\t\t}\n\t\tif (\"top\" in obj) {\n\t\t\tthis.offset.click.top = obj.top + this.margins.top;\n\t\t}\n\t\tif (\"bottom\" in obj) {\n\t\t\tthis.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top;\n\t\t}\n\t},\n\n\t_isRootNode: function( element ) {\n\t\treturn ( /(html|body)/i ).test( element.tagName ) || element === this.document[ 0 ];\n\t},\n\n\t_getParentOffset: function() {\n\n\t\t//Get the offsetParent and cache its position\n\t\tvar po = this.offsetParent.offset(),\n\t\t\tdocument = this.document[ 0 ];\n\n\t\t// This is a special case where we need to modify a offset calculated on start, since the following happened:\n\t\t// 1. The position of the helper is absolute, so it's position is calculated based on the next positioned parent\n\t\t// 2. The actual offset parent is a child of the scroll parent, and the scroll parent isn't the document, which means that\n\t\t//    the scroll is included in the initial calculation of the offset of the parent, and never recalculated upon drag\n\t\tif (this.cssPosition === \"absolute\" && this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) {\n\t\t\tpo.left += this.scrollParent.scrollLeft();\n\t\t\tpo.top += this.scrollParent.scrollTop();\n\t\t}\n\n\t\tif ( this._isRootNode( this.offsetParent[ 0 ] ) ) {\n\t\t\tpo = { top: 0, left: 0 };\n\t\t}\n\n\t\treturn {\n\t\t\ttop: po.top + (parseInt(this.offsetParent.css(\"borderTopWidth\"), 10) || 0),\n\t\t\tleft: po.left + (parseInt(this.offsetParent.css(\"borderLeftWidth\"), 10) || 0)\n\t\t};\n\n\t},\n\n\t_getRelativeOffset: function() {\n\t\tif ( this.cssPosition !== \"relative\" ) {\n\t\t\treturn { top: 0, left: 0 };\n\t\t}\n\n\t\tvar p = this.element.position(),\n\t\t\tscrollIsRootNode = this._isRootNode( this.scrollParent[ 0 ] );\n\n\t\treturn {\n\t\t\ttop: p.top - ( parseInt(this.helper.css( \"top\" ), 10) || 0 ) + ( !scrollIsRootNode ? this.scrollParent.scrollTop() : 0 ),\n\t\t\tleft: p.left - ( parseInt(this.helper.css( \"left\" ), 10) || 0 ) + ( !scrollIsRootNode ? this.scrollParent.scrollLeft() : 0 )\n\t\t};\n\n\t},\n\n\t_cacheMargins: function() {\n\t\tthis.margins = {\n\t\t\tleft: (parseInt(this.element.css(\"marginLeft\"), 10) || 0),\n\t\t\ttop: (parseInt(this.element.css(\"marginTop\"), 10) || 0),\n\t\t\tright: (parseInt(this.element.css(\"marginRight\"), 10) || 0),\n\t\t\tbottom: (parseInt(this.element.css(\"marginBottom\"), 10) || 0)\n\t\t};\n\t},\n\n\t_cacheHelperProportions: function() {\n\t\tthis.helperProportions = {\n\t\t\twidth: this.helper.outerWidth(),\n\t\t\theight: this.helper.outerHeight()\n\t\t};\n\t},\n\n\t_setContainment: function() {\n\n\t\tvar isUserScrollable, c, ce,\n\t\t\to = this.options,\n\t\t\tdocument = this.document[ 0 ];\n\n\t\tthis.relativeContainer = null;\n\n\t\tif ( !o.containment ) {\n\t\t\tthis.containment = null;\n\t\t\treturn;\n\t\t}\n\n\t\tif ( o.containment === \"window\" ) {\n\t\t\tthis.containment = [\n\t\t\t\t$( window ).scrollLeft() - this.offset.relative.left - this.offset.parent.left,\n\t\t\t\t$( window ).scrollTop() - this.offset.relative.top - this.offset.parent.top,\n\t\t\t\t$( window ).scrollLeft() + $( window ).width() - this.helperProportions.width - this.margins.left,\n\t\t\t\t$( window ).scrollTop() + ( $( window ).height() || document.body.parentNode.scrollHeight ) - this.helperProportions.height - this.margins.top\n\t\t\t];\n\t\t\treturn;\n\t\t}\n\n\t\tif ( o.containment === \"document\") {\n\t\t\tthis.containment = [\n\t\t\t\t0,\n\t\t\t\t0,\n\t\t\t\t$( document ).width() - this.helperProportions.width - this.margins.left,\n\t\t\t\t( $( document ).height() || document.body.parentNode.scrollHeight ) - this.helperProportions.height - this.margins.top\n\t\t\t];\n\t\t\treturn;\n\t\t}\n\n\t\tif ( o.containment.constructor === Array ) {\n\t\t\tthis.containment = o.containment;\n\t\t\treturn;\n\t\t}\n\n\t\tif ( o.containment === \"parent\" ) {\n\t\t\to.containment = this.helper[ 0 ].parentNode;\n\t\t}\n\n\t\tc = $( o.containment );\n\t\tce = c[ 0 ];\n\n\t\tif ( !ce ) {\n\t\t\treturn;\n\t\t}\n\n\t\tisUserScrollable = /(scroll|auto)/.test( c.css( \"overflow\" ) );\n\n\t\tthis.containment = [\n\t\t\t( parseInt( c.css( \"borderLeftWidth\" ), 10 ) || 0 ) + ( parseInt( c.css( \"paddingLeft\" ), 10 ) || 0 ),\n\t\t\t( parseInt( c.css( \"borderTopWidth\" ), 10 ) || 0 ) + ( parseInt( c.css( \"paddingTop\" ), 10 ) || 0 ),\n\t\t\t( isUserScrollable ? Math.max( ce.scrollWidth, ce.offsetWidth ) : ce.offsetWidth ) -\n\t\t\t\t( parseInt( c.css( \"borderRightWidth\" ), 10 ) || 0 ) -\n\t\t\t\t( parseInt( c.css( \"paddingRight\" ), 10 ) || 0 ) -\n\t\t\t\tthis.helperProportions.width -\n\t\t\t\tthis.margins.left -\n\t\t\t\tthis.margins.right,\n\t\t\t( isUserScrollable ? Math.max( ce.scrollHeight, ce.offsetHeight ) : ce.offsetHeight ) -\n\t\t\t\t( parseInt( c.css( \"borderBottomWidth\" ), 10 ) || 0 ) -\n\t\t\t\t( parseInt( c.css( \"paddingBottom\" ), 10 ) || 0 ) -\n\t\t\t\tthis.helperProportions.height -\n\t\t\t\tthis.margins.top -\n\t\t\t\tthis.margins.bottom\n\t\t];\n\t\tthis.relativeContainer = c;\n\t},\n\n\t_convertPositionTo: function(d, pos) {\n\n\t\tif (!pos) {\n\t\t\tpos = this.position;\n\t\t}\n\n\t\tvar mod = d === \"absolute\" ? 1 : -1,\n\t\t\tscrollIsRootNode = this._isRootNode( this.scrollParent[ 0 ] );\n\n\t\treturn {\n\t\t\ttop: (\n\t\t\t\tpos.top\t+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\n\t\t\t\tthis.offset.relative.top * mod +\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\tthis.offset.parent.top * mod -\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\t( ( this.cssPosition === \"fixed\" ? -this.offset.scroll.top : ( scrollIsRootNode ? 0 : this.offset.scroll.top ) ) * mod)\n\t\t\t),\n\t\t\tleft: (\n\t\t\t\tpos.left +\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\n\t\t\t\tthis.offset.relative.left * mod +\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\tthis.offset.parent.left * mod\t-\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\t( ( this.cssPosition === \"fixed\" ? -this.offset.scroll.left : ( scrollIsRootNode ? 0 : this.offset.scroll.left ) ) * mod)\n\t\t\t)\n\t\t};\n\n\t},\n\n\t_generatePosition: function( event, constrainPosition ) {\n\n\t\tvar containment, co, top, left,\n\t\t\to = this.options,\n\t\t\tscrollIsRootNode = this._isRootNode( this.scrollParent[ 0 ] ),\n\t\t\tpageX = event.pageX,\n\t\t\tpageY = event.pageY;\n\n\t\t// Cache the scroll\n\t\tif ( !scrollIsRootNode || !this.offset.scroll ) {\n\t\t\tthis.offset.scroll = {\n\t\t\t\ttop: this.scrollParent.scrollTop(),\n\t\t\t\tleft: this.scrollParent.scrollLeft()\n\t\t\t};\n\t\t}\n\n\t\t/*\n\t\t * - Position constraining -\n\t\t * Constrain the position to a mix of grid, containment.\n\t\t */\n\n\t\t// If we are not dragging yet, we won't check for options\n\t\tif ( constrainPosition ) {\n\t\t\tif ( this.containment ) {\n\t\t\t\tif ( this.relativeContainer ){\n\t\t\t\t\tco = this.relativeContainer.offset();\n\t\t\t\t\tcontainment = [\n\t\t\t\t\t\tthis.containment[ 0 ] + co.left,\n\t\t\t\t\t\tthis.containment[ 1 ] + co.top,\n\t\t\t\t\t\tthis.containment[ 2 ] + co.left,\n\t\t\t\t\t\tthis.containment[ 3 ] + co.top\n\t\t\t\t\t];\n\t\t\t\t} else {\n\t\t\t\t\tcontainment = this.containment;\n\t\t\t\t}\n\n\t\t\t\tif (event.pageX - this.offset.click.left < containment[0]) {\n\t\t\t\t\tpageX = containment[0] + this.offset.click.left;\n\t\t\t\t}\n\t\t\t\tif (event.pageY - this.offset.click.top < containment[1]) {\n\t\t\t\t\tpageY = containment[1] + this.offset.click.top;\n\t\t\t\t}\n\t\t\t\tif (event.pageX - this.offset.click.left > containment[2]) {\n\t\t\t\t\tpageX = containment[2] + this.offset.click.left;\n\t\t\t\t}\n\t\t\t\tif (event.pageY - this.offset.click.top > containment[3]) {\n\t\t\t\t\tpageY = containment[3] + this.offset.click.top;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (o.grid) {\n\t\t\t\t//Check for grid elements set to 0 to prevent divide by 0 error causing invalid argument errors in IE (see ticket #6950)\n\t\t\t\ttop = o.grid[1] ? this.originalPageY + Math.round((pageY - this.originalPageY) / o.grid[1]) * o.grid[1] : this.originalPageY;\n\t\t\t\tpageY = containment ? ((top - this.offset.click.top >= containment[1] || top - this.offset.click.top > containment[3]) ? top : ((top - this.offset.click.top >= containment[1]) ? top - o.grid[1] : top + o.grid[1])) : top;\n\n\t\t\t\tleft = o.grid[0] ? this.originalPageX + Math.round((pageX - this.originalPageX) / o.grid[0]) * o.grid[0] : this.originalPageX;\n\t\t\t\tpageX = containment ? ((left - this.offset.click.left >= containment[0] || left - this.offset.click.left > containment[2]) ? left : ((left - this.offset.click.left >= containment[0]) ? left - o.grid[0] : left + o.grid[0])) : left;\n\t\t\t}\n\n\t\t\tif ( o.axis === \"y\" ) {\n\t\t\t\tpageX = this.originalPageX;\n\t\t\t}\n\n\t\t\tif ( o.axis === \"x\" ) {\n\t\t\t\tpageY = this.originalPageY;\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\ttop: (\n\t\t\t\tpageY -\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\n\t\t\t\tthis.offset.click.top\t-\t\t\t\t\t\t\t\t\t\t\t\t// Click offset (relative to the element)\n\t\t\t\tthis.offset.relative.top -\t\t\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\tthis.offset.parent.top +\t\t\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\t( this.cssPosition === \"fixed\" ? -this.offset.scroll.top : ( scrollIsRootNode ? 0 : this.offset.scroll.top ) )\n\t\t\t),\n\t\t\tleft: (\n\t\t\t\tpageX -\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\n\t\t\t\tthis.offset.click.left -\t\t\t\t\t\t\t\t\t\t\t\t// Click offset (relative to the element)\n\t\t\t\tthis.offset.relative.left -\t\t\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\tthis.offset.parent.left +\t\t\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\t( this.cssPosition === \"fixed\" ? -this.offset.scroll.left : ( scrollIsRootNode ? 0 : this.offset.scroll.left ) )\n\t\t\t)\n\t\t};\n\n\t},\n\n\t_clear: function() {\n\t\tthis.helper.removeClass(\"ui-draggable-dragging\");\n\t\tif (this.helper[0] !== this.element[0] && !this.cancelHelperRemoval) {\n\t\t\tthis.helper.remove();\n\t\t}\n\t\tthis.helper = null;\n\t\tthis.cancelHelperRemoval = false;\n\t\tif ( this.destroyOnClear ) {\n\t\t\tthis.destroy();\n\t\t}\n\t},\n\n\t_normalizeRightBottom: function() {\n\t\tif ( this.options.axis !== \"y\" && this.helper.css( \"right\" ) !== \"auto\" ) {\n\t\t\tthis.helper.width( this.helper.width() );\n\t\t\tthis.helper.css( \"right\", \"auto\" );\n\t\t}\n\t\tif ( this.options.axis !== \"x\" && this.helper.css( \"bottom\" ) !== \"auto\" ) {\n\t\t\tthis.helper.height( this.helper.height() );\n\t\t\tthis.helper.css( \"bottom\", \"auto\" );\n\t\t}\n\t},\n\n\t// From now on bulk stuff - mainly helpers\n\n\t_trigger: function( type, event, ui ) {\n\t\tui = ui || this._uiHash();\n\t\t$.ui.plugin.call( this, type, [ event, ui, this ], true );\n\n\t\t// Absolute position and offset (see #6884 ) have to be recalculated after plugins\n\t\tif ( /^(drag|start|stop)/.test( type ) ) {\n\t\t\tthis.positionAbs = this._convertPositionTo( \"absolute\" );\n\t\t\tui.offset = this.positionAbs;\n\t\t}\n\t\treturn $.Widget.prototype._trigger.call( this, type, event, ui );\n\t},\n\n\tplugins: {},\n\n\t_uiHash: function() {\n\t\treturn {\n\t\t\thelper: this.helper,\n\t\t\tposition: this.position,\n\t\t\toriginalPosition: this.originalPosition,\n\t\t\toffset: this.positionAbs\n\t\t};\n\t}\n\n});\n\n$.ui.plugin.add( \"draggable\", \"connectToSortable\", {\n\tstart: function( event, ui, draggable ) {\n\t\tvar uiSortable = $.extend( {}, ui, {\n\t\t\titem: draggable.element\n\t\t});\n\n\t\tdraggable.sortables = [];\n\t\t$( draggable.options.connectToSortable ).each(function() {\n\t\t\tvar sortable = $( this ).sortable( \"instance\" );\n\n\t\t\tif ( sortable && !sortable.options.disabled ) {\n\t\t\t\tdraggable.sortables.push( sortable );\n\n\t\t\t\t// refreshPositions is called at drag start to refresh the containerCache\n\t\t\t\t// which is used in drag. This ensures it's initialized and synchronized\n\t\t\t\t// with any changes that might have happened on the page since initialization.\n\t\t\t\tsortable.refreshPositions();\n\t\t\t\tsortable._trigger(\"activate\", event, uiSortable);\n\t\t\t}\n\t\t});\n\t},\n\tstop: function( event, ui, draggable ) {\n\t\tvar uiSortable = $.extend( {}, ui, {\n\t\t\titem: draggable.element\n\t\t});\n\n\t\tdraggable.cancelHelperRemoval = false;\n\n\t\t$.each( draggable.sortables, function() {\n\t\t\tvar sortable = this;\n\n\t\t\tif ( sortable.isOver ) {\n\t\t\t\tsortable.isOver = 0;\n\n\t\t\t\t// Allow this sortable to handle removing the helper\n\t\t\t\tdraggable.cancelHelperRemoval = true;\n\t\t\t\tsortable.cancelHelperRemoval = false;\n\n\t\t\t\t// Use _storedCSS To restore properties in the sortable,\n\t\t\t\t// as this also handles revert (#9675) since the draggable\n\t\t\t\t// may have modified them in unexpected ways (#8809)\n\t\t\t\tsortable._storedCSS = {\n\t\t\t\t\tposition: sortable.placeholder.css( \"position\" ),\n\t\t\t\t\ttop: sortable.placeholder.css( \"top\" ),\n\t\t\t\t\tleft: sortable.placeholder.css( \"left\" )\n\t\t\t\t};\n\n\t\t\t\tsortable._mouseStop(event);\n\n\t\t\t\t// Once drag has ended, the sortable should return to using\n\t\t\t\t// its original helper, not the shared helper from draggable\n\t\t\t\tsortable.options.helper = sortable.options._helper;\n\t\t\t} else {\n\t\t\t\t// Prevent this Sortable from removing the helper.\n\t\t\t\t// However, don't set the draggable to remove the helper\n\t\t\t\t// either as another connected Sortable may yet handle the removal.\n\t\t\t\tsortable.cancelHelperRemoval = true;\n\n\t\t\t\tsortable._trigger( \"deactivate\", event, uiSortable );\n\t\t\t}\n\t\t});\n\t},\n\tdrag: function( event, ui, draggable ) {\n\t\t$.each( draggable.sortables, function() {\n\t\t\tvar innermostIntersecting = false,\n\t\t\t\tsortable = this;\n\n\t\t\t// Copy over variables that sortable's _intersectsWith uses\n\t\t\tsortable.positionAbs = draggable.positionAbs;\n\t\t\tsortable.helperProportions = draggable.helperProportions;\n\t\t\tsortable.offset.click = draggable.offset.click;\n\n\t\t\tif ( sortable._intersectsWith( sortable.containerCache ) ) {\n\t\t\t\tinnermostIntersecting = true;\n\n\t\t\t\t$.each( draggable.sortables, function() {\n\t\t\t\t\t// Copy over variables that sortable's _intersectsWith uses\n\t\t\t\t\tthis.positionAbs = draggable.positionAbs;\n\t\t\t\t\tthis.helperProportions = draggable.helperProportions;\n\t\t\t\t\tthis.offset.click = draggable.offset.click;\n\n\t\t\t\t\tif ( this !== sortable &&\n\t\t\t\t\t\t\tthis._intersectsWith( this.containerCache ) &&\n\t\t\t\t\t\t\t$.contains( sortable.element[ 0 ], this.element[ 0 ] ) ) {\n\t\t\t\t\t\tinnermostIntersecting = false;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn innermostIntersecting;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif ( innermostIntersecting ) {\n\t\t\t\t// If it intersects, we use a little isOver variable and set it once,\n\t\t\t\t// so that the move-in stuff gets fired only once.\n\t\t\t\tif ( !sortable.isOver ) {\n\t\t\t\t\tsortable.isOver = 1;\n\n\t\t\t\t\t// Store draggable's parent in case we need to reappend to it later.\n\t\t\t\t\tdraggable._parent = ui.helper.parent();\n\n\t\t\t\t\tsortable.currentItem = ui.helper\n\t\t\t\t\t\t.appendTo( sortable.element )\n\t\t\t\t\t\t.data( \"ui-sortable-item\", true );\n\n\t\t\t\t\t// Store helper option to later restore it\n\t\t\t\t\tsortable.options._helper = sortable.options.helper;\n\n\t\t\t\t\tsortable.options.helper = function() {\n\t\t\t\t\t\treturn ui.helper[ 0 ];\n\t\t\t\t\t};\n\n\t\t\t\t\t// Fire the start events of the sortable with our passed browser event,\n\t\t\t\t\t// and our own helper (so it doesn't create a new one)\n\t\t\t\t\tevent.target = sortable.currentItem[ 0 ];\n\t\t\t\t\tsortable._mouseCapture( event, true );\n\t\t\t\t\tsortable._mouseStart( event, true, true );\n\n\t\t\t\t\t// Because the browser event is way off the new appended portlet,\n\t\t\t\t\t// modify necessary variables to reflect the changes\n\t\t\t\t\tsortable.offset.click.top = draggable.offset.click.top;\n\t\t\t\t\tsortable.offset.click.left = draggable.offset.click.left;\n\t\t\t\t\tsortable.offset.parent.left -= draggable.offset.parent.left -\n\t\t\t\t\t\tsortable.offset.parent.left;\n\t\t\t\t\tsortable.offset.parent.top -= draggable.offset.parent.top -\n\t\t\t\t\t\tsortable.offset.parent.top;\n\n\t\t\t\t\tdraggable._trigger( \"toSortable\", event );\n\n\t\t\t\t\t// Inform draggable that the helper is in a valid drop zone,\n\t\t\t\t\t// used solely in the revert option to handle \"valid/invalid\".\n\t\t\t\t\tdraggable.dropped = sortable.element;\n\n\t\t\t\t\t// Need to refreshPositions of all sortables in the case that\n\t\t\t\t\t// adding to one sortable changes the location of the other sortables (#9675)\n\t\t\t\t\t$.each( draggable.sortables, function() {\n\t\t\t\t\t\tthis.refreshPositions();\n\t\t\t\t\t});\n\n\t\t\t\t\t// hack so receive/update callbacks work (mostly)\n\t\t\t\t\tdraggable.currentItem = draggable.element;\n\t\t\t\t\tsortable.fromOutside = draggable;\n\t\t\t\t}\n\n\t\t\t\tif ( sortable.currentItem ) {\n\t\t\t\t\tsortable._mouseDrag( event );\n\t\t\t\t\t// Copy the sortable's position because the draggable's can potentially reflect\n\t\t\t\t\t// a relative position, while sortable is always absolute, which the dragged\n\t\t\t\t\t// element has now become. (#8809)\n\t\t\t\t\tui.position = sortable.position;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// If it doesn't intersect with the sortable, and it intersected before,\n\t\t\t\t// we fake the drag stop of the sortable, but make sure it doesn't remove\n\t\t\t\t// the helper by using cancelHelperRemoval.\n\t\t\t\tif ( sortable.isOver ) {\n\n\t\t\t\t\tsortable.isOver = 0;\n\t\t\t\t\tsortable.cancelHelperRemoval = true;\n\n\t\t\t\t\t// Calling sortable's mouseStop would trigger a revert,\n\t\t\t\t\t// so revert must be temporarily false until after mouseStop is called.\n\t\t\t\t\tsortable.options._revert = sortable.options.revert;\n\t\t\t\t\tsortable.options.revert = false;\n\n\t\t\t\t\tsortable._trigger( \"out\", event, sortable._uiHash( sortable ) );\n\t\t\t\t\tsortable._mouseStop( event, true );\n\n\t\t\t\t\t// restore sortable behaviors that were modfied\n\t\t\t\t\t// when the draggable entered the sortable area (#9481)\n\t\t\t\t\tsortable.options.revert = sortable.options._revert;\n\t\t\t\t\tsortable.options.helper = sortable.options._helper;\n\n\t\t\t\t\tif ( sortable.placeholder ) {\n\t\t\t\t\t\tsortable.placeholder.remove();\n\t\t\t\t\t}\n\n\t\t\t\t\t// Restore and recalculate the draggable's offset considering the sortable\n\t\t\t\t\t// may have modified them in unexpected ways. (#8809, #10669)\n\t\t\t\t\tui.helper.appendTo( draggable._parent );\n\t\t\t\t\tdraggable._refreshOffsets( event );\n\t\t\t\t\tui.position = draggable._generatePosition( event, true );\n\n\t\t\t\t\tdraggable._trigger( \"fromSortable\", event );\n\n\t\t\t\t\t// Inform draggable that the helper is no longer in a valid drop zone\n\t\t\t\t\tdraggable.dropped = false;\n\n\t\t\t\t\t// Need to refreshPositions of all sortables just in case removing\n\t\t\t\t\t// from one sortable changes the location of other sortables (#9675)\n\t\t\t\t\t$.each( draggable.sortables, function() {\n\t\t\t\t\t\tthis.refreshPositions();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n});\n\n$.ui.plugin.add(\"draggable\", \"cursor\", {\n\tstart: function( event, ui, instance ) {\n\t\tvar t = $( \"body\" ),\n\t\t\to = instance.options;\n\n\t\tif (t.css(\"cursor\")) {\n\t\t\to._cursor = t.css(\"cursor\");\n\t\t}\n\t\tt.css(\"cursor\", o.cursor);\n\t},\n\tstop: function( event, ui, instance ) {\n\t\tvar o = instance.options;\n\t\tif (o._cursor) {\n\t\t\t$(\"body\").css(\"cursor\", o._cursor);\n\t\t}\n\t}\n});\n\n$.ui.plugin.add(\"draggable\", \"opacity\", {\n\tstart: function( event, ui, instance ) {\n\t\tvar t = $( ui.helper ),\n\t\t\to = instance.options;\n\t\tif (t.css(\"opacity\")) {\n\t\t\to._opacity = t.css(\"opacity\");\n\t\t}\n\t\tt.css(\"opacity\", o.opacity);\n\t},\n\tstop: function( event, ui, instance ) {\n\t\tvar o = instance.options;\n\t\tif (o._opacity) {\n\t\t\t$(ui.helper).css(\"opacity\", o._opacity);\n\t\t}\n\t}\n});\n\n$.ui.plugin.add(\"draggable\", \"scroll\", {\n\tstart: function( event, ui, i ) {\n\t\tif ( !i.scrollParentNotHidden ) {\n\t\t\ti.scrollParentNotHidden = i.helper.scrollParent( false );\n\t\t}\n\n\t\tif ( i.scrollParentNotHidden[ 0 ] !== i.document[ 0 ] && i.scrollParentNotHidden[ 0 ].tagName !== \"HTML\" ) {\n\t\t\ti.overflowOffset = i.scrollParentNotHidden.offset();\n\t\t}\n\t},\n\tdrag: function( event, ui, i  ) {\n\n\t\tvar o = i.options,\n\t\t\tscrolled = false,\n\t\t\tscrollParent = i.scrollParentNotHidden[ 0 ],\n\t\t\tdocument = i.document[ 0 ];\n\n\t\tif ( scrollParent !== document && scrollParent.tagName !== \"HTML\" ) {\n\t\t\tif ( !o.axis || o.axis !== \"x\" ) {\n\t\t\t\tif ( ( i.overflowOffset.top + scrollParent.offsetHeight ) - event.pageY < o.scrollSensitivity ) {\n\t\t\t\t\tscrollParent.scrollTop = scrolled = scrollParent.scrollTop + o.scrollSpeed;\n\t\t\t\t} else if ( event.pageY - i.overflowOffset.top < o.scrollSensitivity ) {\n\t\t\t\t\tscrollParent.scrollTop = scrolled = scrollParent.scrollTop - o.scrollSpeed;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( !o.axis || o.axis !== \"y\" ) {\n\t\t\t\tif ( ( i.overflowOffset.left + scrollParent.offsetWidth ) - event.pageX < o.scrollSensitivity ) {\n\t\t\t\t\tscrollParent.scrollLeft = scrolled = scrollParent.scrollLeft + o.scrollSpeed;\n\t\t\t\t} else if ( event.pageX - i.overflowOffset.left < o.scrollSensitivity ) {\n\t\t\t\t\tscrollParent.scrollLeft = scrolled = scrollParent.scrollLeft - o.scrollSpeed;\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif (!o.axis || o.axis !== \"x\") {\n\t\t\t\tif (event.pageY - $(document).scrollTop() < o.scrollSensitivity) {\n\t\t\t\t\tscrolled = $(document).scrollTop($(document).scrollTop() - o.scrollSpeed);\n\t\t\t\t} else if ($(window).height() - (event.pageY - $(document).scrollTop()) < o.scrollSensitivity) {\n\t\t\t\t\tscrolled = $(document).scrollTop($(document).scrollTop() + o.scrollSpeed);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!o.axis || o.axis !== \"y\") {\n\t\t\t\tif (event.pageX - $(document).scrollLeft() < o.scrollSensitivity) {\n\t\t\t\t\tscrolled = $(document).scrollLeft($(document).scrollLeft() - o.scrollSpeed);\n\t\t\t\t} else if ($(window).width() - (event.pageX - $(document).scrollLeft()) < o.scrollSensitivity) {\n\t\t\t\t\tscrolled = $(document).scrollLeft($(document).scrollLeft() + o.scrollSpeed);\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\tif (scrolled !== false && $.ui.ddmanager && !o.dropBehaviour) {\n\t\t\t$.ui.ddmanager.prepareOffsets(i, event);\n\t\t}\n\n\t}\n});\n\n$.ui.plugin.add(\"draggable\", \"snap\", {\n\tstart: function( event, ui, i ) {\n\n\t\tvar o = i.options;\n\n\t\ti.snapElements = [];\n\n\t\t$(o.snap.constructor !== String ? ( o.snap.items || \":data(ui-draggable)\" ) : o.snap).each(function() {\n\t\t\tvar $t = $(this),\n\t\t\t\t$o = $t.offset();\n\t\t\tif (this !== i.element[0]) {\n\t\t\t\ti.snapElements.push({\n\t\t\t\t\titem: this,\n\t\t\t\t\twidth: $t.outerWidth(), height: $t.outerHeight(),\n\t\t\t\t\ttop: $o.top, left: $o.left\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t},\n\tdrag: function( event, ui, inst ) {\n\n\t\tvar ts, bs, ls, rs, l, r, t, b, i, first,\n\t\t\to = inst.options,\n\t\t\td = o.snapTolerance,\n\t\t\tx1 = ui.offset.left, x2 = x1 + inst.helperProportions.width,\n\t\t\ty1 = ui.offset.top, y2 = y1 + inst.helperProportions.height;\n\n\t\tfor (i = inst.snapElements.length - 1; i >= 0; i--){\n\n\t\t\tl = inst.snapElements[i].left - inst.margins.left;\n\t\t\tr = l + inst.snapElements[i].width;\n\t\t\tt = inst.snapElements[i].top - inst.margins.top;\n\t\t\tb = t + inst.snapElements[i].height;\n\n\t\t\tif ( x2 < l - d || x1 > r + d || y2 < t - d || y1 > b + d || !$.contains( inst.snapElements[ i ].item.ownerDocument, inst.snapElements[ i ].item ) ) {\n\t\t\t\tif (inst.snapElements[i].snapping) {\n\t\t\t\t\t(inst.options.snap.release && inst.options.snap.release.call(inst.element, event, $.extend(inst._uiHash(), { snapItem: inst.snapElements[i].item })));\n\t\t\t\t}\n\t\t\t\tinst.snapElements[i].snapping = false;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (o.snapMode !== \"inner\") {\n\t\t\t\tts = Math.abs(t - y2) <= d;\n\t\t\t\tbs = Math.abs(b - y1) <= d;\n\t\t\t\tls = Math.abs(l - x2) <= d;\n\t\t\t\trs = Math.abs(r - x1) <= d;\n\t\t\t\tif (ts) {\n\t\t\t\t\tui.position.top = inst._convertPositionTo(\"relative\", { top: t - inst.helperProportions.height, left: 0 }).top;\n\t\t\t\t}\n\t\t\t\tif (bs) {\n\t\t\t\t\tui.position.top = inst._convertPositionTo(\"relative\", { top: b, left: 0 }).top;\n\t\t\t\t}\n\t\t\t\tif (ls) {\n\t\t\t\t\tui.position.left = inst._convertPositionTo(\"relative\", { top: 0, left: l - inst.helperProportions.width }).left;\n\t\t\t\t}\n\t\t\t\tif (rs) {\n\t\t\t\t\tui.position.left = inst._convertPositionTo(\"relative\", { top: 0, left: r }).left;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfirst = (ts || bs || ls || rs);\n\n\t\t\tif (o.snapMode !== \"outer\") {\n\t\t\t\tts = Math.abs(t - y1) <= d;\n\t\t\t\tbs = Math.abs(b - y2) <= d;\n\t\t\t\tls = Math.abs(l - x1) <= d;\n\t\t\t\trs = Math.abs(r - x2) <= d;\n\t\t\t\tif (ts) {\n\t\t\t\t\tui.position.top = inst._convertPositionTo(\"relative\", { top: t, left: 0 }).top;\n\t\t\t\t}\n\t\t\t\tif (bs) {\n\t\t\t\t\tui.position.top = inst._convertPositionTo(\"relative\", { top: b - inst.helperProportions.height, left: 0 }).top;\n\t\t\t\t}\n\t\t\t\tif (ls) {\n\t\t\t\t\tui.position.left = inst._convertPositionTo(\"relative\", { top: 0, left: l }).left;\n\t\t\t\t}\n\t\t\t\tif (rs) {\n\t\t\t\t\tui.position.left = inst._convertPositionTo(\"relative\", { top: 0, left: r - inst.helperProportions.width }).left;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!inst.snapElements[i].snapping && (ts || bs || ls || rs || first)) {\n\t\t\t\t(inst.options.snap.snap && inst.options.snap.snap.call(inst.element, event, $.extend(inst._uiHash(), { snapItem: inst.snapElements[i].item })));\n\t\t\t}\n\t\t\tinst.snapElements[i].snapping = (ts || bs || ls || rs || first);\n\n\t\t}\n\n\t}\n});\n\n$.ui.plugin.add(\"draggable\", \"stack\", {\n\tstart: function( event, ui, instance ) {\n\t\tvar min,\n\t\t\to = instance.options,\n\t\t\tgroup = $.makeArray($(o.stack)).sort(function(a, b) {\n\t\t\t\treturn (parseInt($(a).css(\"zIndex\"), 10) || 0) - (parseInt($(b).css(\"zIndex\"), 10) || 0);\n\t\t\t});\n\n\t\tif (!group.length) { return; }\n\n\t\tmin = parseInt($(group[0]).css(\"zIndex\"), 10) || 0;\n\t\t$(group).each(function(i) {\n\t\t\t$(this).css(\"zIndex\", min + i);\n\t\t});\n\t\tthis.css(\"zIndex\", (min + group.length));\n\t}\n});\n\n$.ui.plugin.add(\"draggable\", \"zIndex\", {\n\tstart: function( event, ui, instance ) {\n\t\tvar t = $( ui.helper ),\n\t\t\to = instance.options;\n\n\t\tif (t.css(\"zIndex\")) {\n\t\t\to._zIndex = t.css(\"zIndex\");\n\t\t}\n\t\tt.css(\"zIndex\", o.zIndex);\n\t},\n\tstop: function( event, ui, instance ) {\n\t\tvar o = instance.options;\n\n\t\tif (o._zIndex) {\n\t\t\t$(ui.helper).css(\"zIndex\", o._zIndex);\n\t\t}\n\t}\n});\n\nvar draggable = $.ui.draggable;\n\n\n/*!\n * jQuery UI Resizable 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/resizable/\n */\n\n\n$.widget(\"ui.resizable\", $.ui.mouse, {\n\tversion: \"1.11.4\",\n\twidgetEventPrefix: \"resize\",\n\toptions: {\n\t\talsoResize: false,\n\t\tanimate: false,\n\t\tanimateDuration: \"slow\",\n\t\tanimateEasing: \"swing\",\n\t\taspectRatio: false,\n\t\tautoHide: false,\n\t\tcontainment: false,\n\t\tghost: false,\n\t\tgrid: false,\n\t\thandles: \"e,s,se\",\n\t\thelper: false,\n\t\tmaxHeight: null,\n\t\tmaxWidth: null,\n\t\tminHeight: 10,\n\t\tminWidth: 10,\n\t\t// See #7960\n\t\tzIndex: 90,\n\n\t\t// callbacks\n\t\tresize: null,\n\t\tstart: null,\n\t\tstop: null\n\t},\n\n\t_num: function( value ) {\n\t\treturn parseInt( value, 10 ) || 0;\n\t},\n\n\t_isNumber: function( value ) {\n\t\treturn !isNaN( parseInt( value, 10 ) );\n\t},\n\n\t_hasScroll: function( el, a ) {\n\n\t\tif ( $( el ).css( \"overflow\" ) === \"hidden\") {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar scroll = ( a && a === \"left\" ) ? \"scrollLeft\" : \"scrollTop\",\n\t\t\thas = false;\n\n\t\tif ( el[ scroll ] > 0 ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// TODO: determine which cases actually cause this to happen\n\t\t// if the element doesn't have the scroll set, see if it's possible to\n\t\t// set the scroll\n\t\tel[ scroll ] = 1;\n\t\thas = ( el[ scroll ] > 0 );\n\t\tel[ scroll ] = 0;\n\t\treturn has;\n\t},\n\n\t_create: function() {\n\n\t\tvar n, i, handle, axis, hname,\n\t\t\tthat = this,\n\t\t\to = this.options;\n\t\tthis.element.addClass(\"ui-resizable\");\n\n\t\t$.extend(this, {\n\t\t\t_aspectRatio: !!(o.aspectRatio),\n\t\t\taspectRatio: o.aspectRatio,\n\t\t\toriginalElement: this.element,\n\t\t\t_proportionallyResizeElements: [],\n\t\t\t_helper: o.helper || o.ghost || o.animate ? o.helper || \"ui-resizable-helper\" : null\n\t\t});\n\n\t\t// Wrap the element if it cannot hold child nodes\n\t\tif (this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)) {\n\n\t\t\tthis.element.wrap(\n\t\t\t\t$(\"<div class='ui-wrapper' style='overflow: hidden;'></div>\").css({\n\t\t\t\t\tposition: this.element.css(\"position\"),\n\t\t\t\t\twidth: this.element.outerWidth(),\n\t\t\t\t\theight: this.element.outerHeight(),\n\t\t\t\t\ttop: this.element.css(\"top\"),\n\t\t\t\t\tleft: this.element.css(\"left\")\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tthis.element = this.element.parent().data(\n\t\t\t\t\"ui-resizable\", this.element.resizable( \"instance\" )\n\t\t\t);\n\n\t\t\tthis.elementIsWrapper = true;\n\n\t\t\tthis.element.css({\n\t\t\t\tmarginLeft: this.originalElement.css(\"marginLeft\"),\n\t\t\t\tmarginTop: this.originalElement.css(\"marginTop\"),\n\t\t\t\tmarginRight: this.originalElement.css(\"marginRight\"),\n\t\t\t\tmarginBottom: this.originalElement.css(\"marginBottom\")\n\t\t\t});\n\t\t\tthis.originalElement.css({\n\t\t\t\tmarginLeft: 0,\n\t\t\t\tmarginTop: 0,\n\t\t\t\tmarginRight: 0,\n\t\t\t\tmarginBottom: 0\n\t\t\t});\n\t\t\t// support: Safari\n\t\t\t// Prevent Safari textarea resize\n\t\t\tthis.originalResizeStyle = this.originalElement.css(\"resize\");\n\t\t\tthis.originalElement.css(\"resize\", \"none\");\n\n\t\t\tthis._proportionallyResizeElements.push( this.originalElement.css({\n\t\t\t\tposition: \"static\",\n\t\t\t\tzoom: 1,\n\t\t\t\tdisplay: \"block\"\n\t\t\t}) );\n\n\t\t\t// support: IE9\n\t\t\t// avoid IE jump (hard set the margin)\n\t\t\tthis.originalElement.css({ margin: this.originalElement.css(\"margin\") });\n\n\t\t\tthis._proportionallyResize();\n\t\t}\n\n\t\tthis.handles = o.handles ||\n\t\t\t( !$(\".ui-resizable-handle\", this.element).length ?\n\t\t\t\t\"e,s,se\" : {\n\t\t\t\t\tn: \".ui-resizable-n\",\n\t\t\t\t\te: \".ui-resizable-e\",\n\t\t\t\t\ts: \".ui-resizable-s\",\n\t\t\t\t\tw: \".ui-resizable-w\",\n\t\t\t\t\tse: \".ui-resizable-se\",\n\t\t\t\t\tsw: \".ui-resizable-sw\",\n\t\t\t\t\tne: \".ui-resizable-ne\",\n\t\t\t\t\tnw: \".ui-resizable-nw\"\n\t\t\t\t} );\n\n\t\tthis._handles = $();\n\t\tif ( this.handles.constructor === String ) {\n\n\t\t\tif ( this.handles === \"all\") {\n\t\t\t\tthis.handles = \"n,e,s,w,se,sw,ne,nw\";\n\t\t\t}\n\n\t\t\tn = this.handles.split(\",\");\n\t\t\tthis.handles = {};\n\n\t\t\tfor (i = 0; i < n.length; i++) {\n\n\t\t\t\thandle = $.trim(n[i]);\n\t\t\t\thname = \"ui-resizable-\" + handle;\n\t\t\t\taxis = $(\"<div class='ui-resizable-handle \" + hname + \"'></div>\");\n\n\t\t\t\taxis.css({ zIndex: o.zIndex });\n\n\t\t\t\t// TODO : What's going on here?\n\t\t\t\tif (\"se\" === handle) {\n\t\t\t\t\taxis.addClass(\"ui-icon ui-icon-gripsmall-diagonal-se\");\n\t\t\t\t}\n\n\t\t\t\tthis.handles[handle] = \".ui-resizable-\" + handle;\n\t\t\t\tthis.element.append(axis);\n\t\t\t}\n\n\t\t}\n\n\t\tthis._renderAxis = function(target) {\n\n\t\t\tvar i, axis, padPos, padWrapper;\n\n\t\t\ttarget = target || this.element;\n\n\t\t\tfor (i in this.handles) {\n\n\t\t\t\tif (this.handles[i].constructor === String) {\n\t\t\t\t\tthis.handles[i] = this.element.children( this.handles[ i ] ).first().show();\n\t\t\t\t} else if ( this.handles[ i ].jquery || this.handles[ i ].nodeType ) {\n\t\t\t\t\tthis.handles[ i ] = $( this.handles[ i ] );\n\t\t\t\t\tthis._on( this.handles[ i ], { \"mousedown\": that._mouseDown });\n\t\t\t\t}\n\n\t\t\t\tif (this.elementIsWrapper && this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)) {\n\n\t\t\t\t\taxis = $(this.handles[i], this.element);\n\n\t\t\t\t\tpadWrapper = /sw|ne|nw|se|n|s/.test(i) ? axis.outerHeight() : axis.outerWidth();\n\n\t\t\t\t\tpadPos = [ \"padding\",\n\t\t\t\t\t\t/ne|nw|n/.test(i) ? \"Top\" :\n\t\t\t\t\t\t/se|sw|s/.test(i) ? \"Bottom\" :\n\t\t\t\t\t\t/^e$/.test(i) ? \"Right\" : \"Left\" ].join(\"\");\n\n\t\t\t\t\ttarget.css(padPos, padWrapper);\n\n\t\t\t\t\tthis._proportionallyResize();\n\t\t\t\t}\n\n\t\t\t\tthis._handles = this._handles.add( this.handles[ i ] );\n\t\t\t}\n\t\t};\n\n\t\t// TODO: make renderAxis a prototype function\n\t\tthis._renderAxis(this.element);\n\n\t\tthis._handles = this._handles.add( this.element.find( \".ui-resizable-handle\" ) );\n\t\tthis._handles.disableSelection();\n\n\t\tthis._handles.mouseover(function() {\n\t\t\tif (!that.resizing) {\n\t\t\t\tif (this.className) {\n\t\t\t\t\taxis = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);\n\t\t\t\t}\n\t\t\t\tthat.axis = axis && axis[1] ? axis[1] : \"se\";\n\t\t\t}\n\t\t});\n\n\t\tif (o.autoHide) {\n\t\t\tthis._handles.hide();\n\t\t\t$(this.element)\n\t\t\t\t.addClass(\"ui-resizable-autohide\")\n\t\t\t\t.mouseenter(function() {\n\t\t\t\t\tif (o.disabled) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t$(this).removeClass(\"ui-resizable-autohide\");\n\t\t\t\t\tthat._handles.show();\n\t\t\t\t})\n\t\t\t\t.mouseleave(function() {\n\t\t\t\t\tif (o.disabled) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (!that.resizing) {\n\t\t\t\t\t\t$(this).addClass(\"ui-resizable-autohide\");\n\t\t\t\t\t\tthat._handles.hide();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\n\t\tthis._mouseInit();\n\t},\n\n\t_destroy: function() {\n\n\t\tthis._mouseDestroy();\n\n\t\tvar wrapper,\n\t\t\t_destroy = function(exp) {\n\t\t\t\t$(exp)\n\t\t\t\t\t.removeClass(\"ui-resizable ui-resizable-disabled ui-resizable-resizing\")\n\t\t\t\t\t.removeData(\"resizable\")\n\t\t\t\t\t.removeData(\"ui-resizable\")\n\t\t\t\t\t.unbind(\".resizable\")\n\t\t\t\t\t.find(\".ui-resizable-handle\")\n\t\t\t\t\t\t.remove();\n\t\t\t};\n\n\t\t// TODO: Unwrap at same DOM position\n\t\tif (this.elementIsWrapper) {\n\t\t\t_destroy(this.element);\n\t\t\twrapper = this.element;\n\t\t\tthis.originalElement.css({\n\t\t\t\tposition: wrapper.css(\"position\"),\n\t\t\t\twidth: wrapper.outerWidth(),\n\t\t\t\theight: wrapper.outerHeight(),\n\t\t\t\ttop: wrapper.css(\"top\"),\n\t\t\t\tleft: wrapper.css(\"left\")\n\t\t\t}).insertAfter( wrapper );\n\t\t\twrapper.remove();\n\t\t}\n\n\t\tthis.originalElement.css(\"resize\", this.originalResizeStyle);\n\t\t_destroy(this.originalElement);\n\n\t\treturn this;\n\t},\n\n\t_mouseCapture: function(event) {\n\t\tvar i, handle,\n\t\t\tcapture = false;\n\n\t\tfor (i in this.handles) {\n\t\t\thandle = $(this.handles[i])[0];\n\t\t\tif (handle === event.target || $.contains(handle, event.target)) {\n\t\t\t\tcapture = true;\n\t\t\t}\n\t\t}\n\n\t\treturn !this.options.disabled && capture;\n\t},\n\n\t_mouseStart: function(event) {\n\n\t\tvar curleft, curtop, cursor,\n\t\t\to = this.options,\n\t\t\tel = this.element;\n\n\t\tthis.resizing = true;\n\n\t\tthis._renderProxy();\n\n\t\tcurleft = this._num(this.helper.css(\"left\"));\n\t\tcurtop = this._num(this.helper.css(\"top\"));\n\n\t\tif (o.containment) {\n\t\t\tcurleft += $(o.containment).scrollLeft() || 0;\n\t\t\tcurtop += $(o.containment).scrollTop() || 0;\n\t\t}\n\n\t\tthis.offset = this.helper.offset();\n\t\tthis.position = { left: curleft, top: curtop };\n\n\t\tthis.size = this._helper ? {\n\t\t\t\twidth: this.helper.width(),\n\t\t\t\theight: this.helper.height()\n\t\t\t} : {\n\t\t\t\twidth: el.width(),\n\t\t\t\theight: el.height()\n\t\t\t};\n\n\t\tthis.originalSize = this._helper ? {\n\t\t\t\twidth: el.outerWidth(),\n\t\t\t\theight: el.outerHeight()\n\t\t\t} : {\n\t\t\t\twidth: el.width(),\n\t\t\t\theight: el.height()\n\t\t\t};\n\n\t\tthis.sizeDiff = {\n\t\t\twidth: el.outerWidth() - el.width(),\n\t\t\theight: el.outerHeight() - el.height()\n\t\t};\n\n\t\tthis.originalPosition = { left: curleft, top: curtop };\n\t\tthis.originalMousePosition = { left: event.pageX, top: event.pageY };\n\n\t\tthis.aspectRatio = (typeof o.aspectRatio === \"number\") ?\n\t\t\to.aspectRatio :\n\t\t\t((this.originalSize.width / this.originalSize.height) || 1);\n\n\t\tcursor = $(\".ui-resizable-\" + this.axis).css(\"cursor\");\n\t\t$(\"body\").css(\"cursor\", cursor === \"auto\" ? this.axis + \"-resize\" : cursor);\n\n\t\tel.addClass(\"ui-resizable-resizing\");\n\t\tthis._propagate(\"start\", event);\n\t\treturn true;\n\t},\n\n\t_mouseDrag: function(event) {\n\n\t\tvar data, props,\n\t\t\tsmp = this.originalMousePosition,\n\t\t\ta = this.axis,\n\t\t\tdx = (event.pageX - smp.left) || 0,\n\t\t\tdy = (event.pageY - smp.top) || 0,\n\t\t\ttrigger = this._change[a];\n\n\t\tthis._updatePrevProperties();\n\n\t\tif (!trigger) {\n\t\t\treturn false;\n\t\t}\n\n\t\tdata = trigger.apply(this, [ event, dx, dy ]);\n\n\t\tthis._updateVirtualBoundaries(event.shiftKey);\n\t\tif (this._aspectRatio || event.shiftKey) {\n\t\t\tdata = this._updateRatio(data, event);\n\t\t}\n\n\t\tdata = this._respectSize(data, event);\n\n\t\tthis._updateCache(data);\n\n\t\tthis._propagate(\"resize\", event);\n\n\t\tprops = this._applyChanges();\n\n\t\tif ( !this._helper && this._proportionallyResizeElements.length ) {\n\t\t\tthis._proportionallyResize();\n\t\t}\n\n\t\tif ( !$.isEmptyObject( props ) ) {\n\t\t\tthis._updatePrevProperties();\n\t\t\tthis._trigger( \"resize\", event, this.ui() );\n\t\t\tthis._applyChanges();\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t_mouseStop: function(event) {\n\n\t\tthis.resizing = false;\n\t\tvar pr, ista, soffseth, soffsetw, s, left, top,\n\t\t\to = this.options, that = this;\n\n\t\tif (this._helper) {\n\n\t\t\tpr = this._proportionallyResizeElements;\n\t\t\tista = pr.length && (/textarea/i).test(pr[0].nodeName);\n\t\t\tsoffseth = ista && this._hasScroll(pr[0], \"left\") ? 0 : that.sizeDiff.height;\n\t\t\tsoffsetw = ista ? 0 : that.sizeDiff.width;\n\n\t\t\ts = {\n\t\t\t\twidth: (that.helper.width()  - soffsetw),\n\t\t\t\theight: (that.helper.height() - soffseth)\n\t\t\t};\n\t\t\tleft = (parseInt(that.element.css(\"left\"), 10) +\n\t\t\t\t(that.position.left - that.originalPosition.left)) || null;\n\t\t\ttop = (parseInt(that.element.css(\"top\"), 10) +\n\t\t\t\t(that.position.top - that.originalPosition.top)) || null;\n\n\t\t\tif (!o.animate) {\n\t\t\t\tthis.element.css($.extend(s, { top: top, left: left }));\n\t\t\t}\n\n\t\t\tthat.helper.height(that.size.height);\n\t\t\tthat.helper.width(that.size.width);\n\n\t\t\tif (this._helper && !o.animate) {\n\t\t\t\tthis._proportionallyResize();\n\t\t\t}\n\t\t}\n\n\t\t$(\"body\").css(\"cursor\", \"auto\");\n\n\t\tthis.element.removeClass(\"ui-resizable-resizing\");\n\n\t\tthis._propagate(\"stop\", event);\n\n\t\tif (this._helper) {\n\t\t\tthis.helper.remove();\n\t\t}\n\n\t\treturn false;\n\n\t},\n\n\t_updatePrevProperties: function() {\n\t\tthis.prevPosition = {\n\t\t\ttop: this.position.top,\n\t\t\tleft: this.position.left\n\t\t};\n\t\tthis.prevSize = {\n\t\t\twidth: this.size.width,\n\t\t\theight: this.size.height\n\t\t};\n\t},\n\n\t_applyChanges: function() {\n\t\tvar props = {};\n\n\t\tif ( this.position.top !== this.prevPosition.top ) {\n\t\t\tprops.top = this.position.top + \"px\";\n\t\t}\n\t\tif ( this.position.left !== this.prevPosition.left ) {\n\t\t\tprops.left = this.position.left + \"px\";\n\t\t}\n\t\tif ( this.size.width !== this.prevSize.width ) {\n\t\t\tprops.width = this.size.width + \"px\";\n\t\t}\n\t\tif ( this.size.height !== this.prevSize.height ) {\n\t\t\tprops.height = this.size.height + \"px\";\n\t\t}\n\n\t\tthis.helper.css( props );\n\n\t\treturn props;\n\t},\n\n\t_updateVirtualBoundaries: function(forceAspectRatio) {\n\t\tvar pMinWidth, pMaxWidth, pMinHeight, pMaxHeight, b,\n\t\t\to = this.options;\n\n\t\tb = {\n\t\t\tminWidth: this._isNumber(o.minWidth) ? o.minWidth : 0,\n\t\t\tmaxWidth: this._isNumber(o.maxWidth) ? o.maxWidth : Infinity,\n\t\t\tminHeight: this._isNumber(o.minHeight) ? o.minHeight : 0,\n\t\t\tmaxHeight: this._isNumber(o.maxHeight) ? o.maxHeight : Infinity\n\t\t};\n\n\t\tif (this._aspectRatio || forceAspectRatio) {\n\t\t\tpMinWidth = b.minHeight * this.aspectRatio;\n\t\t\tpMinHeight = b.minWidth / this.aspectRatio;\n\t\t\tpMaxWidth = b.maxHeight * this.aspectRatio;\n\t\t\tpMaxHeight = b.maxWidth / this.aspectRatio;\n\n\t\t\tif (pMinWidth > b.minWidth) {\n\t\t\t\tb.minWidth = pMinWidth;\n\t\t\t}\n\t\t\tif (pMinHeight > b.minHeight) {\n\t\t\t\tb.minHeight = pMinHeight;\n\t\t\t}\n\t\t\tif (pMaxWidth < b.maxWidth) {\n\t\t\t\tb.maxWidth = pMaxWidth;\n\t\t\t}\n\t\t\tif (pMaxHeight < b.maxHeight) {\n\t\t\t\tb.maxHeight = pMaxHeight;\n\t\t\t}\n\t\t}\n\t\tthis._vBoundaries = b;\n\t},\n\n\t_updateCache: function(data) {\n\t\tthis.offset = this.helper.offset();\n\t\tif (this._isNumber(data.left)) {\n\t\t\tthis.position.left = data.left;\n\t\t}\n\t\tif (this._isNumber(data.top)) {\n\t\t\tthis.position.top = data.top;\n\t\t}\n\t\tif (this._isNumber(data.height)) {\n\t\t\tthis.size.height = data.height;\n\t\t}\n\t\tif (this._isNumber(data.width)) {\n\t\t\tthis.size.width = data.width;\n\t\t}\n\t},\n\n\t_updateRatio: function( data ) {\n\n\t\tvar cpos = this.position,\n\t\t\tcsize = this.size,\n\t\t\ta = this.axis;\n\n\t\tif (this._isNumber(data.height)) {\n\t\t\tdata.width = (data.height * this.aspectRatio);\n\t\t} else if (this._isNumber(data.width)) {\n\t\t\tdata.height = (data.width / this.aspectRatio);\n\t\t}\n\n\t\tif (a === \"sw\") {\n\t\t\tdata.left = cpos.left + (csize.width - data.width);\n\t\t\tdata.top = null;\n\t\t}\n\t\tif (a === \"nw\") {\n\t\t\tdata.top = cpos.top + (csize.height - data.height);\n\t\t\tdata.left = cpos.left + (csize.width - data.width);\n\t\t}\n\n\t\treturn data;\n\t},\n\n\t_respectSize: function( data ) {\n\n\t\tvar o = this._vBoundaries,\n\t\t\ta = this.axis,\n\t\t\tismaxw = this._isNumber(data.width) && o.maxWidth && (o.maxWidth < data.width),\n\t\t\tismaxh = this._isNumber(data.height) && o.maxHeight && (o.maxHeight < data.height),\n\t\t\tisminw = this._isNumber(data.width) && o.minWidth && (o.minWidth > data.width),\n\t\t\tisminh = this._isNumber(data.height) && o.minHeight && (o.minHeight > data.height),\n\t\t\tdw = this.originalPosition.left + this.originalSize.width,\n\t\t\tdh = this.position.top + this.size.height,\n\t\t\tcw = /sw|nw|w/.test(a), ch = /nw|ne|n/.test(a);\n\t\tif (isminw) {\n\t\t\tdata.width = o.minWidth;\n\t\t}\n\t\tif (isminh) {\n\t\t\tdata.height = o.minHeight;\n\t\t}\n\t\tif (ismaxw) {\n\t\t\tdata.width = o.maxWidth;\n\t\t}\n\t\tif (ismaxh) {\n\t\t\tdata.height = o.maxHeight;\n\t\t}\n\n\t\tif (isminw && cw) {\n\t\t\tdata.left = dw - o.minWidth;\n\t\t}\n\t\tif (ismaxw && cw) {\n\t\t\tdata.left = dw - o.maxWidth;\n\t\t}\n\t\tif (isminh && ch) {\n\t\t\tdata.top = dh - o.minHeight;\n\t\t}\n\t\tif (ismaxh && ch) {\n\t\t\tdata.top = dh - o.maxHeight;\n\t\t}\n\n\t\t// Fixing jump error on top/left - bug #2330\n\t\tif (!data.width && !data.height && !data.left && data.top) {\n\t\t\tdata.top = null;\n\t\t} else if (!data.width && !data.height && !data.top && data.left) {\n\t\t\tdata.left = null;\n\t\t}\n\n\t\treturn data;\n\t},\n\n\t_getPaddingPlusBorderDimensions: function( element ) {\n\t\tvar i = 0,\n\t\t\twidths = [],\n\t\t\tborders = [\n\t\t\t\telement.css( \"borderTopWidth\" ),\n\t\t\t\telement.css( \"borderRightWidth\" ),\n\t\t\t\telement.css( \"borderBottomWidth\" ),\n\t\t\t\telement.css( \"borderLeftWidth\" )\n\t\t\t],\n\t\t\tpaddings = [\n\t\t\t\telement.css( \"paddingTop\" ),\n\t\t\t\telement.css( \"paddingRight\" ),\n\t\t\t\telement.css( \"paddingBottom\" ),\n\t\t\t\telement.css( \"paddingLeft\" )\n\t\t\t];\n\n\t\tfor ( ; i < 4; i++ ) {\n\t\t\twidths[ i ] = ( parseInt( borders[ i ], 10 ) || 0 );\n\t\t\twidths[ i ] += ( parseInt( paddings[ i ], 10 ) || 0 );\n\t\t}\n\n\t\treturn {\n\t\t\theight: widths[ 0 ] + widths[ 2 ],\n\t\t\twidth: widths[ 1 ] + widths[ 3 ]\n\t\t};\n\t},\n\n\t_proportionallyResize: function() {\n\n\t\tif (!this._proportionallyResizeElements.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar prel,\n\t\t\ti = 0,\n\t\t\telement = this.helper || this.element;\n\n\t\tfor ( ; i < this._proportionallyResizeElements.length; i++) {\n\n\t\t\tprel = this._proportionallyResizeElements[i];\n\n\t\t\t// TODO: Seems like a bug to cache this.outerDimensions\n\t\t\t// considering that we are in a loop.\n\t\t\tif (!this.outerDimensions) {\n\t\t\t\tthis.outerDimensions = this._getPaddingPlusBorderDimensions( prel );\n\t\t\t}\n\n\t\t\tprel.css({\n\t\t\t\theight: (element.height() - this.outerDimensions.height) || 0,\n\t\t\t\twidth: (element.width() - this.outerDimensions.width) || 0\n\t\t\t});\n\n\t\t}\n\n\t},\n\n\t_renderProxy: function() {\n\n\t\tvar el = this.element, o = this.options;\n\t\tthis.elementOffset = el.offset();\n\n\t\tif (this._helper) {\n\n\t\t\tthis.helper = this.helper || $(\"<div style='overflow:hidden;'></div>\");\n\n\t\t\tthis.helper.addClass(this._helper).css({\n\t\t\t\twidth: this.element.outerWidth() - 1,\n\t\t\t\theight: this.element.outerHeight() - 1,\n\t\t\t\tposition: \"absolute\",\n\t\t\t\tleft: this.elementOffset.left + \"px\",\n\t\t\t\ttop: this.elementOffset.top + \"px\",\n\t\t\t\tzIndex: ++o.zIndex //TODO: Don't modify option\n\t\t\t});\n\n\t\t\tthis.helper\n\t\t\t\t.appendTo(\"body\")\n\t\t\t\t.disableSelection();\n\n\t\t} else {\n\t\t\tthis.helper = this.element;\n\t\t}\n\n\t},\n\n\t_change: {\n\t\te: function(event, dx) {\n\t\t\treturn { width: this.originalSize.width + dx };\n\t\t},\n\t\tw: function(event, dx) {\n\t\t\tvar cs = this.originalSize, sp = this.originalPosition;\n\t\t\treturn { left: sp.left + dx, width: cs.width - dx };\n\t\t},\n\t\tn: function(event, dx, dy) {\n\t\t\tvar cs = this.originalSize, sp = this.originalPosition;\n\t\t\treturn { top: sp.top + dy, height: cs.height - dy };\n\t\t},\n\t\ts: function(event, dx, dy) {\n\t\t\treturn { height: this.originalSize.height + dy };\n\t\t},\n\t\tse: function(event, dx, dy) {\n\t\t\treturn $.extend(this._change.s.apply(this, arguments),\n\t\t\t\tthis._change.e.apply(this, [ event, dx, dy ]));\n\t\t},\n\t\tsw: function(event, dx, dy) {\n\t\t\treturn $.extend(this._change.s.apply(this, arguments),\n\t\t\t\tthis._change.w.apply(this, [ event, dx, dy ]));\n\t\t},\n\t\tne: function(event, dx, dy) {\n\t\t\treturn $.extend(this._change.n.apply(this, arguments),\n\t\t\t\tthis._change.e.apply(this, [ event, dx, dy ]));\n\t\t},\n\t\tnw: function(event, dx, dy) {\n\t\t\treturn $.extend(this._change.n.apply(this, arguments),\n\t\t\t\tthis._change.w.apply(this, [ event, dx, dy ]));\n\t\t}\n\t},\n\n\t_propagate: function(n, event) {\n\t\t$.ui.plugin.call(this, n, [ event, this.ui() ]);\n\t\t(n !== \"resize\" && this._trigger(n, event, this.ui()));\n\t},\n\n\tplugins: {},\n\n\tui: function() {\n\t\treturn {\n\t\t\toriginalElement: this.originalElement,\n\t\t\telement: this.element,\n\t\t\thelper: this.helper,\n\t\t\tposition: this.position,\n\t\t\tsize: this.size,\n\t\t\toriginalSize: this.originalSize,\n\t\t\toriginalPosition: this.originalPosition\n\t\t};\n\t}\n\n});\n\n/*\n * Resizable Extensions\n */\n\n$.ui.plugin.add(\"resizable\", \"animate\", {\n\n\tstop: function( event ) {\n\t\tvar that = $(this).resizable( \"instance\" ),\n\t\t\to = that.options,\n\t\t\tpr = that._proportionallyResizeElements,\n\t\t\tista = pr.length && (/textarea/i).test(pr[0].nodeName),\n\t\t\tsoffseth = ista && that._hasScroll(pr[0], \"left\") ? 0 : that.sizeDiff.height,\n\t\t\tsoffsetw = ista ? 0 : that.sizeDiff.width,\n\t\t\tstyle = { width: (that.size.width - soffsetw), height: (that.size.height - soffseth) },\n\t\t\tleft = (parseInt(that.element.css(\"left\"), 10) +\n\t\t\t\t(that.position.left - that.originalPosition.left)) || null,\n\t\t\ttop = (parseInt(that.element.css(\"top\"), 10) +\n\t\t\t\t(that.position.top - that.originalPosition.top)) || null;\n\n\t\tthat.element.animate(\n\t\t\t$.extend(style, top && left ? { top: top, left: left } : {}), {\n\t\t\t\tduration: o.animateDuration,\n\t\t\t\teasing: o.animateEasing,\n\t\t\t\tstep: function() {\n\n\t\t\t\t\tvar data = {\n\t\t\t\t\t\twidth: parseInt(that.element.css(\"width\"), 10),\n\t\t\t\t\t\theight: parseInt(that.element.css(\"height\"), 10),\n\t\t\t\t\t\ttop: parseInt(that.element.css(\"top\"), 10),\n\t\t\t\t\t\tleft: parseInt(that.element.css(\"left\"), 10)\n\t\t\t\t\t};\n\n\t\t\t\t\tif (pr && pr.length) {\n\t\t\t\t\t\t$(pr[0]).css({ width: data.width, height: data.height });\n\t\t\t\t\t}\n\n\t\t\t\t\t// propagating resize, and updating values for each animation step\n\t\t\t\t\tthat._updateCache(data);\n\t\t\t\t\tthat._propagate(\"resize\", event);\n\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n});\n\n$.ui.plugin.add( \"resizable\", \"containment\", {\n\n\tstart: function() {\n\t\tvar element, p, co, ch, cw, width, height,\n\t\t\tthat = $( this ).resizable( \"instance\" ),\n\t\t\to = that.options,\n\t\t\tel = that.element,\n\t\t\toc = o.containment,\n\t\t\tce = ( oc instanceof $ ) ? oc.get( 0 ) : ( /parent/.test( oc ) ) ? el.parent().get( 0 ) : oc;\n\n\t\tif ( !ce ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthat.containerElement = $( ce );\n\n\t\tif ( /document/.test( oc ) || oc === document ) {\n\t\t\tthat.containerOffset = {\n\t\t\t\tleft: 0,\n\t\t\t\ttop: 0\n\t\t\t};\n\t\t\tthat.containerPosition = {\n\t\t\t\tleft: 0,\n\t\t\t\ttop: 0\n\t\t\t};\n\n\t\t\tthat.parentData = {\n\t\t\t\telement: $( document ),\n\t\t\t\tleft: 0,\n\t\t\t\ttop: 0,\n\t\t\t\twidth: $( document ).width(),\n\t\t\t\theight: $( document ).height() || document.body.parentNode.scrollHeight\n\t\t\t};\n\t\t} else {\n\t\t\telement = $( ce );\n\t\t\tp = [];\n\t\t\t$([ \"Top\", \"Right\", \"Left\", \"Bottom\" ]).each(function( i, name ) {\n\t\t\t\tp[ i ] = that._num( element.css( \"padding\" + name ) );\n\t\t\t});\n\n\t\t\tthat.containerOffset = element.offset();\n\t\t\tthat.containerPosition = element.position();\n\t\t\tthat.containerSize = {\n\t\t\t\theight: ( element.innerHeight() - p[ 3 ] ),\n\t\t\t\twidth: ( element.innerWidth() - p[ 1 ] )\n\t\t\t};\n\n\t\t\tco = that.containerOffset;\n\t\t\tch = that.containerSize.height;\n\t\t\tcw = that.containerSize.width;\n\t\t\twidth = ( that._hasScroll ( ce, \"left\" ) ? ce.scrollWidth : cw );\n\t\t\theight = ( that._hasScroll ( ce ) ? ce.scrollHeight : ch ) ;\n\n\t\t\tthat.parentData = {\n\t\t\t\telement: ce,\n\t\t\t\tleft: co.left,\n\t\t\t\ttop: co.top,\n\t\t\t\twidth: width,\n\t\t\t\theight: height\n\t\t\t};\n\t\t}\n\t},\n\n\tresize: function( event ) {\n\t\tvar woset, hoset, isParent, isOffsetRelative,\n\t\t\tthat = $( this ).resizable( \"instance\" ),\n\t\t\to = that.options,\n\t\t\tco = that.containerOffset,\n\t\t\tcp = that.position,\n\t\t\tpRatio = that._aspectRatio || event.shiftKey,\n\t\t\tcop = {\n\t\t\t\ttop: 0,\n\t\t\t\tleft: 0\n\t\t\t},\n\t\t\tce = that.containerElement,\n\t\t\tcontinueResize = true;\n\n\t\tif ( ce[ 0 ] !== document && ( /static/ ).test( ce.css( \"position\" ) ) ) {\n\t\t\tcop = co;\n\t\t}\n\n\t\tif ( cp.left < ( that._helper ? co.left : 0 ) ) {\n\t\t\tthat.size.width = that.size.width +\n\t\t\t\t( that._helper ?\n\t\t\t\t\t( that.position.left - co.left ) :\n\t\t\t\t\t( that.position.left - cop.left ) );\n\n\t\t\tif ( pRatio ) {\n\t\t\t\tthat.size.height = that.size.width / that.aspectRatio;\n\t\t\t\tcontinueResize = false;\n\t\t\t}\n\t\t\tthat.position.left = o.helper ? co.left : 0;\n\t\t}\n\n\t\tif ( cp.top < ( that._helper ? co.top : 0 ) ) {\n\t\t\tthat.size.height = that.size.height +\n\t\t\t\t( that._helper ?\n\t\t\t\t\t( that.position.top - co.top ) :\n\t\t\t\t\tthat.position.top );\n\n\t\t\tif ( pRatio ) {\n\t\t\t\tthat.size.width = that.size.height * that.aspectRatio;\n\t\t\t\tcontinueResize = false;\n\t\t\t}\n\t\t\tthat.position.top = that._helper ? co.top : 0;\n\t\t}\n\n\t\tisParent = that.containerElement.get( 0 ) === that.element.parent().get( 0 );\n\t\tisOffsetRelative = /relative|absolute/.test( that.containerElement.css( \"position\" ) );\n\n\t\tif ( isParent && isOffsetRelative ) {\n\t\t\tthat.offset.left = that.parentData.left + that.position.left;\n\t\t\tthat.offset.top = that.parentData.top + that.position.top;\n\t\t} else {\n\t\t\tthat.offset.left = that.element.offset().left;\n\t\t\tthat.offset.top = that.element.offset().top;\n\t\t}\n\n\t\twoset = Math.abs( that.sizeDiff.width +\n\t\t\t(that._helper ?\n\t\t\t\tthat.offset.left - cop.left :\n\t\t\t\t(that.offset.left - co.left)) );\n\n\t\thoset = Math.abs( that.sizeDiff.height +\n\t\t\t(that._helper ?\n\t\t\t\tthat.offset.top - cop.top :\n\t\t\t\t(that.offset.top - co.top)) );\n\n\t\tif ( woset + that.size.width >= that.parentData.width ) {\n\t\t\tthat.size.width = that.parentData.width - woset;\n\t\t\tif ( pRatio ) {\n\t\t\t\tthat.size.height = that.size.width / that.aspectRatio;\n\t\t\t\tcontinueResize = false;\n\t\t\t}\n\t\t}\n\n\t\tif ( hoset + that.size.height >= that.parentData.height ) {\n\t\t\tthat.size.height = that.parentData.height - hoset;\n\t\t\tif ( pRatio ) {\n\t\t\t\tthat.size.width = that.size.height * that.aspectRatio;\n\t\t\t\tcontinueResize = false;\n\t\t\t}\n\t\t}\n\n\t\tif ( !continueResize ) {\n\t\t\tthat.position.left = that.prevPosition.left;\n\t\t\tthat.position.top = that.prevPosition.top;\n\t\t\tthat.size.width = that.prevSize.width;\n\t\t\tthat.size.height = that.prevSize.height;\n\t\t}\n\t},\n\n\tstop: function() {\n\t\tvar that = $( this ).resizable( \"instance\" ),\n\t\t\to = that.options,\n\t\t\tco = that.containerOffset,\n\t\t\tcop = that.containerPosition,\n\t\t\tce = that.containerElement,\n\t\t\thelper = $( that.helper ),\n\t\t\tho = helper.offset(),\n\t\t\tw = helper.outerWidth() - that.sizeDiff.width,\n\t\t\th = helper.outerHeight() - that.sizeDiff.height;\n\n\t\tif ( that._helper && !o.animate && ( /relative/ ).test( ce.css( \"position\" ) ) ) {\n\t\t\t$( this ).css({\n\t\t\t\tleft: ho.left - cop.left - co.left,\n\t\t\t\twidth: w,\n\t\t\t\theight: h\n\t\t\t});\n\t\t}\n\n\t\tif ( that._helper && !o.animate && ( /static/ ).test( ce.css( \"position\" ) ) ) {\n\t\t\t$( this ).css({\n\t\t\t\tleft: ho.left - cop.left - co.left,\n\t\t\t\twidth: w,\n\t\t\t\theight: h\n\t\t\t});\n\t\t}\n\t}\n});\n\n$.ui.plugin.add(\"resizable\", \"alsoResize\", {\n\n\tstart: function() {\n\t\tvar that = $(this).resizable( \"instance\" ),\n\t\t\to = that.options;\n\n\t\t$(o.alsoResize).each(function() {\n\t\t\tvar el = $(this);\n\t\t\tel.data(\"ui-resizable-alsoresize\", {\n\t\t\t\twidth: parseInt(el.width(), 10), height: parseInt(el.height(), 10),\n\t\t\t\tleft: parseInt(el.css(\"left\"), 10), top: parseInt(el.css(\"top\"), 10)\n\t\t\t});\n\t\t});\n\t},\n\n\tresize: function(event, ui) {\n\t\tvar that = $(this).resizable( \"instance\" ),\n\t\t\to = that.options,\n\t\t\tos = that.originalSize,\n\t\t\top = that.originalPosition,\n\t\t\tdelta = {\n\t\t\t\theight: (that.size.height - os.height) || 0,\n\t\t\t\twidth: (that.size.width - os.width) || 0,\n\t\t\t\ttop: (that.position.top - op.top) || 0,\n\t\t\t\tleft: (that.position.left - op.left) || 0\n\t\t\t};\n\n\t\t\t$(o.alsoResize).each(function() {\n\t\t\t\tvar el = $(this), start = $(this).data(\"ui-resizable-alsoresize\"), style = {},\n\t\t\t\t\tcss = el.parents(ui.originalElement[0]).length ?\n\t\t\t\t\t\t\t[ \"width\", \"height\" ] :\n\t\t\t\t\t\t\t[ \"width\", \"height\", \"top\", \"left\" ];\n\n\t\t\t\t$.each(css, function(i, prop) {\n\t\t\t\t\tvar sum = (start[prop] || 0) + (delta[prop] || 0);\n\t\t\t\t\tif (sum && sum >= 0) {\n\t\t\t\t\t\tstyle[prop] = sum || null;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tel.css(style);\n\t\t\t});\n\t},\n\n\tstop: function() {\n\t\t$(this).removeData(\"resizable-alsoresize\");\n\t}\n});\n\n$.ui.plugin.add(\"resizable\", \"ghost\", {\n\n\tstart: function() {\n\n\t\tvar that = $(this).resizable( \"instance\" ), o = that.options, cs = that.size;\n\n\t\tthat.ghost = that.originalElement.clone();\n\t\tthat.ghost\n\t\t\t.css({\n\t\t\t\topacity: 0.25,\n\t\t\t\tdisplay: \"block\",\n\t\t\t\tposition: \"relative\",\n\t\t\t\theight: cs.height,\n\t\t\t\twidth: cs.width,\n\t\t\t\tmargin: 0,\n\t\t\t\tleft: 0,\n\t\t\t\ttop: 0\n\t\t\t})\n\t\t\t.addClass(\"ui-resizable-ghost\")\n\t\t\t.addClass(typeof o.ghost === \"string\" ? o.ghost : \"\");\n\n\t\tthat.ghost.appendTo(that.helper);\n\n\t},\n\n\tresize: function() {\n\t\tvar that = $(this).resizable( \"instance\" );\n\t\tif (that.ghost) {\n\t\t\tthat.ghost.css({\n\t\t\t\tposition: \"relative\",\n\t\t\t\theight: that.size.height,\n\t\t\t\twidth: that.size.width\n\t\t\t});\n\t\t}\n\t},\n\n\tstop: function() {\n\t\tvar that = $(this).resizable( \"instance\" );\n\t\tif (that.ghost && that.helper) {\n\t\t\tthat.helper.get(0).removeChild(that.ghost.get(0));\n\t\t}\n\t}\n\n});\n\n$.ui.plugin.add(\"resizable\", \"grid\", {\n\n\tresize: function() {\n\t\tvar outerDimensions,\n\t\t\tthat = $(this).resizable( \"instance\" ),\n\t\t\to = that.options,\n\t\t\tcs = that.size,\n\t\t\tos = that.originalSize,\n\t\t\top = that.originalPosition,\n\t\t\ta = that.axis,\n\t\t\tgrid = typeof o.grid === \"number\" ? [ o.grid, o.grid ] : o.grid,\n\t\t\tgridX = (grid[0] || 1),\n\t\t\tgridY = (grid[1] || 1),\n\t\t\tox = Math.round((cs.width - os.width) / gridX) * gridX,\n\t\t\toy = Math.round((cs.height - os.height) / gridY) * gridY,\n\t\t\tnewWidth = os.width + ox,\n\t\t\tnewHeight = os.height + oy,\n\t\t\tisMaxWidth = o.maxWidth && (o.maxWidth < newWidth),\n\t\t\tisMaxHeight = o.maxHeight && (o.maxHeight < newHeight),\n\t\t\tisMinWidth = o.minWidth && (o.minWidth > newWidth),\n\t\t\tisMinHeight = o.minHeight && (o.minHeight > newHeight);\n\n\t\to.grid = grid;\n\n\t\tif (isMinWidth) {\n\t\t\tnewWidth += gridX;\n\t\t}\n\t\tif (isMinHeight) {\n\t\t\tnewHeight += gridY;\n\t\t}\n\t\tif (isMaxWidth) {\n\t\t\tnewWidth -= gridX;\n\t\t}\n\t\tif (isMaxHeight) {\n\t\t\tnewHeight -= gridY;\n\t\t}\n\n\t\tif (/^(se|s|e)$/.test(a)) {\n\t\t\tthat.size.width = newWidth;\n\t\t\tthat.size.height = newHeight;\n\t\t} else if (/^(ne)$/.test(a)) {\n\t\t\tthat.size.width = newWidth;\n\t\t\tthat.size.height = newHeight;\n\t\t\tthat.position.top = op.top - oy;\n\t\t} else if (/^(sw)$/.test(a)) {\n\t\t\tthat.size.width = newWidth;\n\t\t\tthat.size.height = newHeight;\n\t\t\tthat.position.left = op.left - ox;\n\t\t} else {\n\t\t\tif ( newHeight - gridY <= 0 || newWidth - gridX <= 0) {\n\t\t\t\touterDimensions = that._getPaddingPlusBorderDimensions( this );\n\t\t\t}\n\n\t\t\tif ( newHeight - gridY > 0 ) {\n\t\t\t\tthat.size.height = newHeight;\n\t\t\t\tthat.position.top = op.top - oy;\n\t\t\t} else {\n\t\t\t\tnewHeight = gridY - outerDimensions.height;\n\t\t\t\tthat.size.height = newHeight;\n\t\t\t\tthat.position.top = op.top + os.height - newHeight;\n\t\t\t}\n\t\t\tif ( newWidth - gridX > 0 ) {\n\t\t\t\tthat.size.width = newWidth;\n\t\t\t\tthat.position.left = op.left - ox;\n\t\t\t} else {\n\t\t\t\tnewWidth = gridX - outerDimensions.width;\n\t\t\t\tthat.size.width = newWidth;\n\t\t\t\tthat.position.left = op.left + os.width - newWidth;\n\t\t\t}\n\t\t}\n\t}\n\n});\n\nvar resizable = $.ui.resizable;\n\n\n/*!\n * jQuery UI Dialog 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/dialog/\n */\n\n\nvar dialog = $.widget( \"ui.dialog\", {\n\tversion: \"1.11.4\",\n\toptions: {\n\t\tappendTo: \"body\",\n\t\tautoOpen: true,\n\t\tbuttons: [],\n\t\tcloseOnEscape: true,\n\t\tcloseText: \"Close\",\n\t\tdialogClass: \"\",\n\t\tdraggable: true,\n\t\thide: null,\n\t\theight: \"auto\",\n\t\tmaxHeight: null,\n\t\tmaxWidth: null,\n\t\tminHeight: 150,\n\t\tminWidth: 150,\n\t\tmodal: false,\n\t\tposition: {\n\t\t\tmy: \"center\",\n\t\t\tat: \"center\",\n\t\t\tof: window,\n\t\t\tcollision: \"fit\",\n\t\t\t// Ensure the titlebar is always visible\n\t\t\tusing: function( pos ) {\n\t\t\t\tvar topOffset = $( this ).css( pos ).offset().top;\n\t\t\t\tif ( topOffset < 0 ) {\n\t\t\t\t\t$( this ).css( \"top\", pos.top - topOffset );\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tresizable: true,\n\t\tshow: null,\n\t\ttitle: null,\n\t\twidth: 300,\n\n\t\t// callbacks\n\t\tbeforeClose: null,\n\t\tclose: null,\n\t\tdrag: null,\n\t\tdragStart: null,\n\t\tdragStop: null,\n\t\tfocus: null,\n\t\topen: null,\n\t\tresize: null,\n\t\tresizeStart: null,\n\t\tresizeStop: null\n\t},\n\n\tsizeRelatedOptions: {\n\t\tbuttons: true,\n\t\theight: true,\n\t\tmaxHeight: true,\n\t\tmaxWidth: true,\n\t\tminHeight: true,\n\t\tminWidth: true,\n\t\twidth: true\n\t},\n\n\tresizableRelatedOptions: {\n\t\tmaxHeight: true,\n\t\tmaxWidth: true,\n\t\tminHeight: true,\n\t\tminWidth: true\n\t},\n\n\t_create: function() {\n\t\tthis.originalCss = {\n\t\t\tdisplay: this.element[ 0 ].style.display,\n\t\t\twidth: this.element[ 0 ].style.width,\n\t\t\tminHeight: this.element[ 0 ].style.minHeight,\n\t\t\tmaxHeight: this.element[ 0 ].style.maxHeight,\n\t\t\theight: this.element[ 0 ].style.height\n\t\t};\n\t\tthis.originalPosition = {\n\t\t\tparent: this.element.parent(),\n\t\t\tindex: this.element.parent().children().index( this.element )\n\t\t};\n\t\tthis.originalTitle = this.element.attr( \"title\" );\n\t\tthis.options.title = this.options.title || this.originalTitle;\n\n\t\tthis._createWrapper();\n\n\t\tthis.element\n\t\t\t.show()\n\t\t\t.removeAttr( \"title\" )\n\t\t\t.addClass( \"ui-dialog-content ui-widget-content\" )\n\t\t\t.appendTo( this.uiDialog );\n\n\t\tthis._createTitlebar();\n\t\tthis._createButtonPane();\n\n\t\tif ( this.options.draggable && $.fn.draggable ) {\n\t\t\tthis._makeDraggable();\n\t\t}\n\t\tif ( this.options.resizable && $.fn.resizable ) {\n\t\t\tthis._makeResizable();\n\t\t}\n\n\t\tthis._isOpen = false;\n\n\t\tthis._trackFocus();\n\t},\n\n\t_init: function() {\n\t\tif ( this.options.autoOpen ) {\n\t\t\tthis.open();\n\t\t}\n\t},\n\n\t_appendTo: function() {\n\t\tvar element = this.options.appendTo;\n\t\tif ( element && (element.jquery || element.nodeType) ) {\n\t\t\treturn $( element );\n\t\t}\n\t\treturn this.document.find( element || \"body\" ).eq( 0 );\n\t},\n\n\t_destroy: function() {\n\t\tvar next,\n\t\t\toriginalPosition = this.originalPosition;\n\n\t\tthis._untrackInstance();\n\t\tthis._destroyOverlay();\n\n\t\tthis.element\n\t\t\t.removeUniqueId()\n\t\t\t.removeClass( \"ui-dialog-content ui-widget-content\" )\n\t\t\t.css( this.originalCss )\n\t\t\t// Without detaching first, the following becomes really slow\n\t\t\t.detach();\n\n\t\tthis.uiDialog.stop( true, true ).remove();\n\n\t\tif ( this.originalTitle ) {\n\t\t\tthis.element.attr( \"title\", this.originalTitle );\n\t\t}\n\n\t\tnext = originalPosition.parent.children().eq( originalPosition.index );\n\t\t// Don't try to place the dialog next to itself (#8613)\n\t\tif ( next.length && next[ 0 ] !== this.element[ 0 ] ) {\n\t\t\tnext.before( this.element );\n\t\t} else {\n\t\t\toriginalPosition.parent.append( this.element );\n\t\t}\n\t},\n\n\twidget: function() {\n\t\treturn this.uiDialog;\n\t},\n\n\tdisable: $.noop,\n\tenable: $.noop,\n\n\tclose: function( event ) {\n\t\tvar activeElement,\n\t\t\tthat = this;\n\n\t\tif ( !this._isOpen || this._trigger( \"beforeClose\", event ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._isOpen = false;\n\t\tthis._focusedElement = null;\n\t\tthis._destroyOverlay();\n\t\tthis._untrackInstance();\n\n\t\tif ( !this.opener.filter( \":focusable\" ).focus().length ) {\n\n\t\t\t// support: IE9\n\t\t\t// IE9 throws an \"Unspecified error\" accessing document.activeElement from an <iframe>\n\t\t\ttry {\n\t\t\t\tactiveElement = this.document[ 0 ].activeElement;\n\n\t\t\t\t// Support: IE9, IE10\n\t\t\t\t// If the <body> is blurred, IE will switch windows, see #4520\n\t\t\t\tif ( activeElement && activeElement.nodeName.toLowerCase() !== \"body\" ) {\n\n\t\t\t\t\t// Hiding a focused element doesn't trigger blur in WebKit\n\t\t\t\t\t// so in case we have nothing to focus on, explicitly blur the active element\n\t\t\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=47182\n\t\t\t\t\t$( activeElement ).blur();\n\t\t\t\t}\n\t\t\t} catch ( error ) {}\n\t\t}\n\n\t\tthis._hide( this.uiDialog, this.options.hide, function() {\n\t\t\tthat._trigger( \"close\", event );\n\t\t});\n\t},\n\n\tisOpen: function() {\n\t\treturn this._isOpen;\n\t},\n\n\tmoveToTop: function() {\n\t\tthis._moveToTop();\n\t},\n\n\t_moveToTop: function( event, silent ) {\n\t\tvar moved = false,\n\t\t\tzIndices = this.uiDialog.siblings( \".ui-front:visible\" ).map(function() {\n\t\t\t\treturn +$( this ).css( \"z-index\" );\n\t\t\t}).get(),\n\t\t\tzIndexMax = Math.max.apply( null, zIndices );\n\n\t\tif ( zIndexMax >= +this.uiDialog.css( \"z-index\" ) ) {\n\t\t\tthis.uiDialog.css( \"z-index\", zIndexMax + 1 );\n\t\t\tmoved = true;\n\t\t}\n\n\t\tif ( moved && !silent ) {\n\t\t\tthis._trigger( \"focus\", event );\n\t\t}\n\t\treturn moved;\n\t},\n\n\topen: function() {\n\t\tvar that = this;\n\t\tif ( this._isOpen ) {\n\t\t\tif ( this._moveToTop() ) {\n\t\t\t\tthis._focusTabbable();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tthis._isOpen = true;\n\t\tthis.opener = $( this.document[ 0 ].activeElement );\n\n\t\tthis._size();\n\t\tthis._position();\n\t\tthis._createOverlay();\n\t\tthis._moveToTop( null, true );\n\n\t\t// Ensure the overlay is moved to the top with the dialog, but only when\n\t\t// opening. The overlay shouldn't move after the dialog is open so that\n\t\t// modeless dialogs opened after the modal dialog stack properly.\n\t\tif ( this.overlay ) {\n\t\t\tthis.overlay.css( \"z-index\", this.uiDialog.css( \"z-index\" ) - 1 );\n\t\t}\n\n\t\tthis._show( this.uiDialog, this.options.show, function() {\n\t\t\tthat._focusTabbable();\n\t\t\tthat._trigger( \"focus\" );\n\t\t});\n\n\t\t// Track the dialog immediately upon openening in case a focus event\n\t\t// somehow occurs outside of the dialog before an element inside the\n\t\t// dialog is focused (#10152)\n\t\tthis._makeFocusTarget();\n\n\t\tthis._trigger( \"open\" );\n\t},\n\n\t_focusTabbable: function() {\n\t\t// Set focus to the first match:\n\t\t// 1. An element that was focused previously\n\t\t// 2. First element inside the dialog matching [autofocus]\n\t\t// 3. Tabbable element inside the content element\n\t\t// 4. Tabbable element inside the buttonpane\n\t\t// 5. The close button\n\t\t// 6. The dialog itself\n\t\tvar hasFocus = this._focusedElement;\n\t\tif ( !hasFocus ) {\n\t\t\thasFocus = this.element.find( \"[autofocus]\" );\n\t\t}\n\t\tif ( !hasFocus.length ) {\n\t\t\thasFocus = this.element.find( \":tabbable\" );\n\t\t}\n\t\tif ( !hasFocus.length ) {\n\t\t\thasFocus = this.uiDialogButtonPane.find( \":tabbable\" );\n\t\t}\n\t\tif ( !hasFocus.length ) {\n\t\t\thasFocus = this.uiDialogTitlebarClose.filter( \":tabbable\" );\n\t\t}\n\t\tif ( !hasFocus.length ) {\n\t\t\thasFocus = this.uiDialog;\n\t\t}\n\t\thasFocus.eq( 0 ).focus();\n\t},\n\n\t_keepFocus: function( event ) {\n\t\tfunction checkFocus() {\n\t\t\tvar activeElement = this.document[0].activeElement,\n\t\t\t\tisActive = this.uiDialog[0] === activeElement ||\n\t\t\t\t\t$.contains( this.uiDialog[0], activeElement );\n\t\t\tif ( !isActive ) {\n\t\t\t\tthis._focusTabbable();\n\t\t\t}\n\t\t}\n\t\tevent.preventDefault();\n\t\tcheckFocus.call( this );\n\t\t// support: IE\n\t\t// IE <= 8 doesn't prevent moving focus even with event.preventDefault()\n\t\t// so we check again later\n\t\tthis._delay( checkFocus );\n\t},\n\n\t_createWrapper: function() {\n\t\tthis.uiDialog = $(\"<div>\")\n\t\t\t.addClass( \"ui-dialog ui-widget ui-widget-content ui-corner-all ui-front \" +\n\t\t\t\tthis.options.dialogClass )\n\t\t\t.hide()\n\t\t\t.attr({\n\t\t\t\t// Setting tabIndex makes the div focusable\n\t\t\t\ttabIndex: -1,\n\t\t\t\trole: \"dialog\"\n\t\t\t})\n\t\t\t.appendTo( this._appendTo() );\n\n\t\tthis._on( this.uiDialog, {\n\t\t\tkeydown: function( event ) {\n\t\t\t\tif ( this.options.closeOnEscape && !event.isDefaultPrevented() && event.keyCode &&\n\t\t\t\t\t\tevent.keyCode === $.ui.keyCode.ESCAPE ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tthis.close( event );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// prevent tabbing out of dialogs\n\t\t\t\tif ( event.keyCode !== $.ui.keyCode.TAB || event.isDefaultPrevented() ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar tabbables = this.uiDialog.find( \":tabbable\" ),\n\t\t\t\t\tfirst = tabbables.filter( \":first\" ),\n\t\t\t\t\tlast = tabbables.filter( \":last\" );\n\n\t\t\t\tif ( ( event.target === last[0] || event.target === this.uiDialog[0] ) && !event.shiftKey ) {\n\t\t\t\t\tthis._delay(function() {\n\t\t\t\t\t\tfirst.focus();\n\t\t\t\t\t});\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t} else if ( ( event.target === first[0] || event.target === this.uiDialog[0] ) && event.shiftKey ) {\n\t\t\t\t\tthis._delay(function() {\n\t\t\t\t\t\tlast.focus();\n\t\t\t\t\t});\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t},\n\t\t\tmousedown: function( event ) {\n\t\t\t\tif ( this._moveToTop( event ) ) {\n\t\t\t\t\tthis._focusTabbable();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// We assume that any existing aria-describedby attribute means\n\t\t// that the dialog content is marked up properly\n\t\t// otherwise we brute force the content as the description\n\t\tif ( !this.element.find( \"[aria-describedby]\" ).length ) {\n\t\t\tthis.uiDialog.attr({\n\t\t\t\t\"aria-describedby\": this.element.uniqueId().attr( \"id\" )\n\t\t\t});\n\t\t}\n\t},\n\n\t_createTitlebar: function() {\n\t\tvar uiDialogTitle;\n\n\t\tthis.uiDialogTitlebar = $( \"<div>\" )\n\t\t\t.addClass( \"ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix\" )\n\t\t\t.prependTo( this.uiDialog );\n\t\tthis._on( this.uiDialogTitlebar, {\n\t\t\tmousedown: function( event ) {\n\t\t\t\t// Don't prevent click on close button (#8838)\n\t\t\t\t// Focusing a dialog that is partially scrolled out of view\n\t\t\t\t// causes the browser to scroll it into view, preventing the click event\n\t\t\t\tif ( !$( event.target ).closest( \".ui-dialog-titlebar-close\" ) ) {\n\t\t\t\t\t// Dialog isn't getting focus when dragging (#8063)\n\t\t\t\t\tthis.uiDialog.focus();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// support: IE\n\t\t// Use type=\"button\" to prevent enter keypresses in textboxes from closing the\n\t\t// dialog in IE (#9312)\n\t\tthis.uiDialogTitlebarClose = $( \"<button type='button'></button>\" )\n\t\t\t.button({\n\t\t\t\tlabel: this.options.closeText,\n\t\t\t\ticons: {\n\t\t\t\t\tprimary: \"ui-icon-closethick\"\n\t\t\t\t},\n\t\t\t\ttext: false\n\t\t\t})\n\t\t\t.addClass( \"ui-dialog-titlebar-close\" )\n\t\t\t.appendTo( this.uiDialogTitlebar );\n\t\tthis._on( this.uiDialogTitlebarClose, {\n\t\t\tclick: function( event ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.close( event );\n\t\t\t}\n\t\t});\n\n\t\tuiDialogTitle = $( \"<span>\" )\n\t\t\t.uniqueId()\n\t\t\t.addClass( \"ui-dialog-title\" )\n\t\t\t.prependTo( this.uiDialogTitlebar );\n\t\tthis._title( uiDialogTitle );\n\n\t\tthis.uiDialog.attr({\n\t\t\t\"aria-labelledby\": uiDialogTitle.attr( \"id\" )\n\t\t});\n\t},\n\n\t_title: function( title ) {\n\t\tif ( !this.options.title ) {\n\t\t\ttitle.html( \"&#160;\" );\n\t\t}\n\t\ttitle.text( this.options.title );\n\t},\n\n\t_createButtonPane: function() {\n\t\tthis.uiDialogButtonPane = $( \"<div>\" )\n\t\t\t.addClass( \"ui-dialog-buttonpane ui-widget-content ui-helper-clearfix\" );\n\n\t\tthis.uiButtonSet = $( \"<div>\" )\n\t\t\t.addClass( \"ui-dialog-buttonset\" )\n\t\t\t.appendTo( this.uiDialogButtonPane );\n\n\t\tthis._createButtons();\n\t},\n\n\t_createButtons: function() {\n\t\tvar that = this,\n\t\t\tbuttons = this.options.buttons;\n\n\t\t// if we already have a button pane, remove it\n\t\tthis.uiDialogButtonPane.remove();\n\t\tthis.uiButtonSet.empty();\n\n\t\tif ( $.isEmptyObject( buttons ) || ($.isArray( buttons ) && !buttons.length) ) {\n\t\t\tthis.uiDialog.removeClass( \"ui-dialog-buttons\" );\n\t\t\treturn;\n\t\t}\n\n\t\t$.each( buttons, function( name, props ) {\n\t\t\tvar click, buttonOptions;\n\t\t\tprops = $.isFunction( props ) ?\n\t\t\t\t{ click: props, text: name } :\n\t\t\t\tprops;\n\t\t\t// Default to a non-submitting button\n\t\t\tprops = $.extend( { type: \"button\" }, props );\n\t\t\t// Change the context for the click callback to be the main element\n\t\t\tclick = props.click;\n\t\t\tprops.click = function() {\n\t\t\t\tclick.apply( that.element[ 0 ], arguments );\n\t\t\t};\n\t\t\tbuttonOptions = {\n\t\t\t\ticons: props.icons,\n\t\t\t\ttext: props.showText\n\t\t\t};\n\t\t\tdelete props.icons;\n\t\t\tdelete props.showText;\n\t\t\t$( \"<button></button>\", props )\n\t\t\t\t.button( buttonOptions )\n\t\t\t\t.appendTo( that.uiButtonSet );\n\t\t});\n\t\tthis.uiDialog.addClass( \"ui-dialog-buttons\" );\n\t\tthis.uiDialogButtonPane.appendTo( this.uiDialog );\n\t},\n\n\t_makeDraggable: function() {\n\t\tvar that = this,\n\t\t\toptions = this.options;\n\n\t\tfunction filteredUi( ui ) {\n\t\t\treturn {\n\t\t\t\tposition: ui.position,\n\t\t\t\toffset: ui.offset\n\t\t\t};\n\t\t}\n\n\t\tthis.uiDialog.draggable({\n\t\t\tcancel: \".ui-dialog-content, .ui-dialog-titlebar-close\",\n\t\t\thandle: \".ui-dialog-titlebar\",\n\t\t\tcontainment: \"document\",\n\t\t\tstart: function( event, ui ) {\n\t\t\t\t$( this ).addClass( \"ui-dialog-dragging\" );\n\t\t\t\tthat._blockFrames();\n\t\t\t\tthat._trigger( \"dragStart\", event, filteredUi( ui ) );\n\t\t\t},\n\t\t\tdrag: function( event, ui ) {\n\t\t\t\tthat._trigger( \"drag\", event, filteredUi( ui ) );\n\t\t\t},\n\t\t\tstop: function( event, ui ) {\n\t\t\t\tvar left = ui.offset.left - that.document.scrollLeft(),\n\t\t\t\t\ttop = ui.offset.top - that.document.scrollTop();\n\n\t\t\t\toptions.position = {\n\t\t\t\t\tmy: \"left top\",\n\t\t\t\t\tat: \"left\" + (left >= 0 ? \"+\" : \"\") + left + \" \" +\n\t\t\t\t\t\t\"top\" + (top >= 0 ? \"+\" : \"\") + top,\n\t\t\t\t\tof: that.window\n\t\t\t\t};\n\t\t\t\t$( this ).removeClass( \"ui-dialog-dragging\" );\n\t\t\t\tthat._unblockFrames();\n\t\t\t\tthat._trigger( \"dragStop\", event, filteredUi( ui ) );\n\t\t\t}\n\t\t});\n\t},\n\n\t_makeResizable: function() {\n\t\tvar that = this,\n\t\t\toptions = this.options,\n\t\t\thandles = options.resizable,\n\t\t\t// .ui-resizable has position: relative defined in the stylesheet\n\t\t\t// but dialogs have to use absolute or fixed positioning\n\t\t\tposition = this.uiDialog.css(\"position\"),\n\t\t\tresizeHandles = typeof handles === \"string\" ?\n\t\t\t\thandles\t:\n\t\t\t\t\"n,e,s,w,se,sw,ne,nw\";\n\n\t\tfunction filteredUi( ui ) {\n\t\t\treturn {\n\t\t\t\toriginalPosition: ui.originalPosition,\n\t\t\t\toriginalSize: ui.originalSize,\n\t\t\t\tposition: ui.position,\n\t\t\t\tsize: ui.size\n\t\t\t};\n\t\t}\n\n\t\tthis.uiDialog.resizable({\n\t\t\tcancel: \".ui-dialog-content\",\n\t\t\tcontainment: \"document\",\n\t\t\talsoResize: this.element,\n\t\t\tmaxWidth: options.maxWidth,\n\t\t\tmaxHeight: options.maxHeight,\n\t\t\tminWidth: options.minWidth,\n\t\t\tminHeight: this._minHeight(),\n\t\t\thandles: resizeHandles,\n\t\t\tstart: function( event, ui ) {\n\t\t\t\t$( this ).addClass( \"ui-dialog-resizing\" );\n\t\t\t\tthat._blockFrames();\n\t\t\t\tthat._trigger( \"resizeStart\", event, filteredUi( ui ) );\n\t\t\t},\n\t\t\tresize: function( event, ui ) {\n\t\t\t\tthat._trigger( \"resize\", event, filteredUi( ui ) );\n\t\t\t},\n\t\t\tstop: function( event, ui ) {\n\t\t\t\tvar offset = that.uiDialog.offset(),\n\t\t\t\t\tleft = offset.left - that.document.scrollLeft(),\n\t\t\t\t\ttop = offset.top - that.document.scrollTop();\n\n\t\t\t\toptions.height = that.uiDialog.height();\n\t\t\t\toptions.width = that.uiDialog.width();\n\t\t\t\toptions.position = {\n\t\t\t\t\tmy: \"left top\",\n\t\t\t\t\tat: \"left\" + (left >= 0 ? \"+\" : \"\") + left + \" \" +\n\t\t\t\t\t\t\"top\" + (top >= 0 ? \"+\" : \"\") + top,\n\t\t\t\t\tof: that.window\n\t\t\t\t};\n\t\t\t\t$( this ).removeClass( \"ui-dialog-resizing\" );\n\t\t\t\tthat._unblockFrames();\n\t\t\t\tthat._trigger( \"resizeStop\", event, filteredUi( ui ) );\n\t\t\t}\n\t\t})\n\t\t.css( \"position\", position );\n\t},\n\n\t_trackFocus: function() {\n\t\tthis._on( this.widget(), {\n\t\t\tfocusin: function( event ) {\n\t\t\t\tthis._makeFocusTarget();\n\t\t\t\tthis._focusedElement = $( event.target );\n\t\t\t}\n\t\t});\n\t},\n\n\t_makeFocusTarget: function() {\n\t\tthis._untrackInstance();\n\t\tthis._trackingInstances().unshift( this );\n\t},\n\n\t_untrackInstance: function() {\n\t\tvar instances = this._trackingInstances(),\n\t\t\texists = $.inArray( this, instances );\n\t\tif ( exists !== -1 ) {\n\t\t\tinstances.splice( exists, 1 );\n\t\t}\n\t},\n\n\t_trackingInstances: function() {\n\t\tvar instances = this.document.data( \"ui-dialog-instances\" );\n\t\tif ( !instances ) {\n\t\t\tinstances = [];\n\t\t\tthis.document.data( \"ui-dialog-instances\", instances );\n\t\t}\n\t\treturn instances;\n\t},\n\n\t_minHeight: function() {\n\t\tvar options = this.options;\n\n\t\treturn options.height === \"auto\" ?\n\t\t\toptions.minHeight :\n\t\t\tMath.min( options.minHeight, options.height );\n\t},\n\n\t_position: function() {\n\t\t// Need to show the dialog to get the actual offset in the position plugin\n\t\tvar isVisible = this.uiDialog.is( \":visible\" );\n\t\tif ( !isVisible ) {\n\t\t\tthis.uiDialog.show();\n\t\t}\n\t\tthis.uiDialog.position( this.options.position );\n\t\tif ( !isVisible ) {\n\t\t\tthis.uiDialog.hide();\n\t\t}\n\t},\n\n\t_setOptions: function( options ) {\n\t\tvar that = this,\n\t\t\tresize = false,\n\t\t\tresizableOptions = {};\n\n\t\t$.each( options, function( key, value ) {\n\t\t\tthat._setOption( key, value );\n\n\t\t\tif ( key in that.sizeRelatedOptions ) {\n\t\t\t\tresize = true;\n\t\t\t}\n\t\t\tif ( key in that.resizableRelatedOptions ) {\n\t\t\t\tresizableOptions[ key ] = value;\n\t\t\t}\n\t\t});\n\n\t\tif ( resize ) {\n\t\t\tthis._size();\n\t\t\tthis._position();\n\t\t}\n\t\tif ( this.uiDialog.is( \":data(ui-resizable)\" ) ) {\n\t\t\tthis.uiDialog.resizable( \"option\", resizableOptions );\n\t\t}\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tvar isDraggable, isResizable,\n\t\t\tuiDialog = this.uiDialog;\n\n\t\tif ( key === \"dialogClass\" ) {\n\t\t\tuiDialog\n\t\t\t\t.removeClass( this.options.dialogClass )\n\t\t\t\t.addClass( value );\n\t\t}\n\n\t\tif ( key === \"disabled\" ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._super( key, value );\n\n\t\tif ( key === \"appendTo\" ) {\n\t\t\tthis.uiDialog.appendTo( this._appendTo() );\n\t\t}\n\n\t\tif ( key === \"buttons\" ) {\n\t\t\tthis._createButtons();\n\t\t}\n\n\t\tif ( key === \"closeText\" ) {\n\t\t\tthis.uiDialogTitlebarClose.button({\n\t\t\t\t// Ensure that we always pass a string\n\t\t\t\tlabel: \"\" + value\n\t\t\t});\n\t\t}\n\n\t\tif ( key === \"draggable\" ) {\n\t\t\tisDraggable = uiDialog.is( \":data(ui-draggable)\" );\n\t\t\tif ( isDraggable && !value ) {\n\t\t\t\tuiDialog.draggable( \"destroy\" );\n\t\t\t}\n\n\t\t\tif ( !isDraggable && value ) {\n\t\t\t\tthis._makeDraggable();\n\t\t\t}\n\t\t}\n\n\t\tif ( key === \"position\" ) {\n\t\t\tthis._position();\n\t\t}\n\n\t\tif ( key === \"resizable\" ) {\n\t\t\t// currently resizable, becoming non-resizable\n\t\t\tisResizable = uiDialog.is( \":data(ui-resizable)\" );\n\t\t\tif ( isResizable && !value ) {\n\t\t\t\tuiDialog.resizable( \"destroy\" );\n\t\t\t}\n\n\t\t\t// currently resizable, changing handles\n\t\t\tif ( isResizable && typeof value === \"string\" ) {\n\t\t\t\tuiDialog.resizable( \"option\", \"handles\", value );\n\t\t\t}\n\n\t\t\t// currently non-resizable, becoming resizable\n\t\t\tif ( !isResizable && value !== false ) {\n\t\t\t\tthis._makeResizable();\n\t\t\t}\n\t\t}\n\n\t\tif ( key === \"title\" ) {\n\t\t\tthis._title( this.uiDialogTitlebar.find( \".ui-dialog-title\" ) );\n\t\t}\n\t},\n\n\t_size: function() {\n\t\t// If the user has resized the dialog, the .ui-dialog and .ui-dialog-content\n\t\t// divs will both have width and height set, so we need to reset them\n\t\tvar nonContentHeight, minContentHeight, maxContentHeight,\n\t\t\toptions = this.options;\n\n\t\t// Reset content sizing\n\t\tthis.element.show().css({\n\t\t\twidth: \"auto\",\n\t\t\tminHeight: 0,\n\t\t\tmaxHeight: \"none\",\n\t\t\theight: 0\n\t\t});\n\n\t\tif ( options.minWidth > options.width ) {\n\t\t\toptions.width = options.minWidth;\n\t\t}\n\n\t\t// reset wrapper sizing\n\t\t// determine the height of all the non-content elements\n\t\tnonContentHeight = this.uiDialog.css({\n\t\t\t\theight: \"auto\",\n\t\t\t\twidth: options.width\n\t\t\t})\n\t\t\t.outerHeight();\n\t\tminContentHeight = Math.max( 0, options.minHeight - nonContentHeight );\n\t\tmaxContentHeight = typeof options.maxHeight === \"number\" ?\n\t\t\tMath.max( 0, options.maxHeight - nonContentHeight ) :\n\t\t\t\"none\";\n\n\t\tif ( options.height === \"auto\" ) {\n\t\t\tthis.element.css({\n\t\t\t\tminHeight: minContentHeight,\n\t\t\t\tmaxHeight: maxContentHeight,\n\t\t\t\theight: \"auto\"\n\t\t\t});\n\t\t} else {\n\t\t\tthis.element.height( Math.max( 0, options.height - nonContentHeight ) );\n\t\t}\n\n\t\tif ( this.uiDialog.is( \":data(ui-resizable)\" ) ) {\n\t\t\tthis.uiDialog.resizable( \"option\", \"minHeight\", this._minHeight() );\n\t\t}\n\t},\n\n\t_blockFrames: function() {\n\t\tthis.iframeBlocks = this.document.find( \"iframe\" ).map(function() {\n\t\t\tvar iframe = $( this );\n\n\t\t\treturn $( \"<div>\" )\n\t\t\t\t.css({\n\t\t\t\t\tposition: \"absolute\",\n\t\t\t\t\twidth: iframe.outerWidth(),\n\t\t\t\t\theight: iframe.outerHeight()\n\t\t\t\t})\n\t\t\t\t.appendTo( iframe.parent() )\n\t\t\t\t.offset( iframe.offset() )[0];\n\t\t});\n\t},\n\n\t_unblockFrames: function() {\n\t\tif ( this.iframeBlocks ) {\n\t\t\tthis.iframeBlocks.remove();\n\t\t\tdelete this.iframeBlocks;\n\t\t}\n\t},\n\n\t_allowInteraction: function( event ) {\n\t\tif ( $( event.target ).closest( \".ui-dialog\" ).length ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// TODO: Remove hack when datepicker implements\n\t\t// the .ui-front logic (#8989)\n\t\treturn !!$( event.target ).closest( \".ui-datepicker\" ).length;\n\t},\n\n\t_createOverlay: function() {\n\t\tif ( !this.options.modal ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// We use a delay in case the overlay is created from an\n\t\t// event that we're going to be cancelling (#2804)\n\t\tvar isOpening = true;\n\t\tthis._delay(function() {\n\t\t\tisOpening = false;\n\t\t});\n\n\t\tif ( !this.document.data( \"ui-dialog-overlays\" ) ) {\n\n\t\t\t// Prevent use of anchors and inputs\n\t\t\t// Using _on() for an event handler shared across many instances is\n\t\t\t// safe because the dialogs stack and must be closed in reverse order\n\t\t\tthis._on( this.document, {\n\t\t\t\tfocusin: function( event ) {\n\t\t\t\t\tif ( isOpening ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( !this._allowInteraction( event ) ) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tthis._trackingInstances()[ 0 ]._focusTabbable();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.overlay = $( \"<div>\" )\n\t\t\t.addClass( \"ui-widget-overlay ui-front\" )\n\t\t\t.appendTo( this._appendTo() );\n\t\tthis._on( this.overlay, {\n\t\t\tmousedown: \"_keepFocus\"\n\t\t});\n\t\tthis.document.data( \"ui-dialog-overlays\",\n\t\t\t(this.document.data( \"ui-dialog-overlays\" ) || 0) + 1 );\n\t},\n\n\t_destroyOverlay: function() {\n\t\tif ( !this.options.modal ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this.overlay ) {\n\t\t\tvar overlays = this.document.data( \"ui-dialog-overlays\" ) - 1;\n\n\t\t\tif ( !overlays ) {\n\t\t\t\tthis.document\n\t\t\t\t\t.unbind( \"focusin\" )\n\t\t\t\t\t.removeData( \"ui-dialog-overlays\" );\n\t\t\t} else {\n\t\t\t\tthis.document.data( \"ui-dialog-overlays\", overlays );\n\t\t\t}\n\n\t\t\tthis.overlay.remove();\n\t\t\tthis.overlay = null;\n\t\t}\n\t}\n});\n\n\n/*!\n * jQuery UI Droppable 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/droppable/\n */\n\n\n$.widget( \"ui.droppable\", {\n\tversion: \"1.11.4\",\n\twidgetEventPrefix: \"drop\",\n\toptions: {\n\t\taccept: \"*\",\n\t\tactiveClass: false,\n\t\taddClasses: true,\n\t\tgreedy: false,\n\t\thoverClass: false,\n\t\tscope: \"default\",\n\t\ttolerance: \"intersect\",\n\n\t\t// callbacks\n\t\tactivate: null,\n\t\tdeactivate: null,\n\t\tdrop: null,\n\t\tout: null,\n\t\tover: null\n\t},\n\t_create: function() {\n\n\t\tvar proportions,\n\t\t\to = this.options,\n\t\t\taccept = o.accept;\n\n\t\tthis.isover = false;\n\t\tthis.isout = true;\n\n\t\tthis.accept = $.isFunction( accept ) ? accept : function( d ) {\n\t\t\treturn d.is( accept );\n\t\t};\n\n\t\tthis.proportions = function( /* valueToWrite */ ) {\n\t\t\tif ( arguments.length ) {\n\t\t\t\t// Store the droppable's proportions\n\t\t\t\tproportions = arguments[ 0 ];\n\t\t\t} else {\n\t\t\t\t// Retrieve or derive the droppable's proportions\n\t\t\t\treturn proportions ?\n\t\t\t\t\tproportions :\n\t\t\t\t\tproportions = {\n\t\t\t\t\t\twidth: this.element[ 0 ].offsetWidth,\n\t\t\t\t\t\theight: this.element[ 0 ].offsetHeight\n\t\t\t\t\t};\n\t\t\t}\n\t\t};\n\n\t\tthis._addToManager( o.scope );\n\n\t\to.addClasses && this.element.addClass( \"ui-droppable\" );\n\n\t},\n\n\t_addToManager: function( scope ) {\n\t\t// Add the reference and positions to the manager\n\t\t$.ui.ddmanager.droppables[ scope ] = $.ui.ddmanager.droppables[ scope ] || [];\n\t\t$.ui.ddmanager.droppables[ scope ].push( this );\n\t},\n\n\t_splice: function( drop ) {\n\t\tvar i = 0;\n\t\tfor ( ; i < drop.length; i++ ) {\n\t\t\tif ( drop[ i ] === this ) {\n\t\t\t\tdrop.splice( i, 1 );\n\t\t\t}\n\t\t}\n\t},\n\n\t_destroy: function() {\n\t\tvar drop = $.ui.ddmanager.droppables[ this.options.scope ];\n\n\t\tthis._splice( drop );\n\n\t\tthis.element.removeClass( \"ui-droppable ui-droppable-disabled\" );\n\t},\n\n\t_setOption: function( key, value ) {\n\n\t\tif ( key === \"accept\" ) {\n\t\t\tthis.accept = $.isFunction( value ) ? value : function( d ) {\n\t\t\t\treturn d.is( value );\n\t\t\t};\n\t\t} else if ( key === \"scope\" ) {\n\t\t\tvar drop = $.ui.ddmanager.droppables[ this.options.scope ];\n\n\t\t\tthis._splice( drop );\n\t\t\tthis._addToManager( value );\n\t\t}\n\n\t\tthis._super( key, value );\n\t},\n\n\t_activate: function( event ) {\n\t\tvar draggable = $.ui.ddmanager.current;\n\t\tif ( this.options.activeClass ) {\n\t\t\tthis.element.addClass( this.options.activeClass );\n\t\t}\n\t\tif ( draggable ){\n\t\t\tthis._trigger( \"activate\", event, this.ui( draggable ) );\n\t\t}\n\t},\n\n\t_deactivate: function( event ) {\n\t\tvar draggable = $.ui.ddmanager.current;\n\t\tif ( this.options.activeClass ) {\n\t\t\tthis.element.removeClass( this.options.activeClass );\n\t\t}\n\t\tif ( draggable ){\n\t\t\tthis._trigger( \"deactivate\", event, this.ui( draggable ) );\n\t\t}\n\t},\n\n\t_over: function( event ) {\n\n\t\tvar draggable = $.ui.ddmanager.current;\n\n\t\t// Bail if draggable and droppable are same element\n\t\tif ( !draggable || ( draggable.currentItem || draggable.element )[ 0 ] === this.element[ 0 ] ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this.accept.call( this.element[ 0 ], ( draggable.currentItem || draggable.element ) ) ) {\n\t\t\tif ( this.options.hoverClass ) {\n\t\t\t\tthis.element.addClass( this.options.hoverClass );\n\t\t\t}\n\t\t\tthis._trigger( \"over\", event, this.ui( draggable ) );\n\t\t}\n\n\t},\n\n\t_out: function( event ) {\n\n\t\tvar draggable = $.ui.ddmanager.current;\n\n\t\t// Bail if draggable and droppable are same element\n\t\tif ( !draggable || ( draggable.currentItem || draggable.element )[ 0 ] === this.element[ 0 ] ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this.accept.call( this.element[ 0 ], ( draggable.currentItem || draggable.element ) ) ) {\n\t\t\tif ( this.options.hoverClass ) {\n\t\t\t\tthis.element.removeClass( this.options.hoverClass );\n\t\t\t}\n\t\t\tthis._trigger( \"out\", event, this.ui( draggable ) );\n\t\t}\n\n\t},\n\n\t_drop: function( event, custom ) {\n\n\t\tvar draggable = custom || $.ui.ddmanager.current,\n\t\t\tchildrenIntersection = false;\n\n\t\t// Bail if draggable and droppable are same element\n\t\tif ( !draggable || ( draggable.currentItem || draggable.element )[ 0 ] === this.element[ 0 ] ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.element.find( \":data(ui-droppable)\" ).not( \".ui-draggable-dragging\" ).each(function() {\n\t\t\tvar inst = $( this ).droppable( \"instance\" );\n\t\t\tif (\n\t\t\t\tinst.options.greedy &&\n\t\t\t\t!inst.options.disabled &&\n\t\t\t\tinst.options.scope === draggable.options.scope &&\n\t\t\t\tinst.accept.call( inst.element[ 0 ], ( draggable.currentItem || draggable.element ) ) &&\n\t\t\t\t$.ui.intersect( draggable, $.extend( inst, { offset: inst.element.offset() } ), inst.options.tolerance, event )\n\t\t\t) { childrenIntersection = true; return false; }\n\t\t});\n\t\tif ( childrenIntersection ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( this.accept.call( this.element[ 0 ], ( draggable.currentItem || draggable.element ) ) ) {\n\t\t\tif ( this.options.activeClass ) {\n\t\t\t\tthis.element.removeClass( this.options.activeClass );\n\t\t\t}\n\t\t\tif ( this.options.hoverClass ) {\n\t\t\t\tthis.element.removeClass( this.options.hoverClass );\n\t\t\t}\n\t\t\tthis._trigger( \"drop\", event, this.ui( draggable ) );\n\t\t\treturn this.element;\n\t\t}\n\n\t\treturn false;\n\n\t},\n\n\tui: function( c ) {\n\t\treturn {\n\t\t\tdraggable: ( c.currentItem || c.element ),\n\t\t\thelper: c.helper,\n\t\t\tposition: c.position,\n\t\t\toffset: c.positionAbs\n\t\t};\n\t}\n\n});\n\n$.ui.intersect = (function() {\n\tfunction isOverAxis( x, reference, size ) {\n\t\treturn ( x >= reference ) && ( x < ( reference + size ) );\n\t}\n\n\treturn function( draggable, droppable, toleranceMode, event ) {\n\n\t\tif ( !droppable.offset ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar x1 = ( draggable.positionAbs || draggable.position.absolute ).left + draggable.margins.left,\n\t\t\ty1 = ( draggable.positionAbs || draggable.position.absolute ).top + draggable.margins.top,\n\t\t\tx2 = x1 + draggable.helperProportions.width,\n\t\t\ty2 = y1 + draggable.helperProportions.height,\n\t\t\tl = droppable.offset.left,\n\t\t\tt = droppable.offset.top,\n\t\t\tr = l + droppable.proportions().width,\n\t\t\tb = t + droppable.proportions().height;\n\n\t\tswitch ( toleranceMode ) {\n\t\tcase \"fit\":\n\t\t\treturn ( l <= x1 && x2 <= r && t <= y1 && y2 <= b );\n\t\tcase \"intersect\":\n\t\t\treturn ( l < x1 + ( draggable.helperProportions.width / 2 ) && // Right Half\n\t\t\t\tx2 - ( draggable.helperProportions.width / 2 ) < r && // Left Half\n\t\t\t\tt < y1 + ( draggable.helperProportions.height / 2 ) && // Bottom Half\n\t\t\t\ty2 - ( draggable.helperProportions.height / 2 ) < b ); // Top Half\n\t\tcase \"pointer\":\n\t\t\treturn isOverAxis( event.pageY, t, droppable.proportions().height ) && isOverAxis( event.pageX, l, droppable.proportions().width );\n\t\tcase \"touch\":\n\t\t\treturn (\n\t\t\t\t( y1 >= t && y1 <= b ) || // Top edge touching\n\t\t\t\t( y2 >= t && y2 <= b ) || // Bottom edge touching\n\t\t\t\t( y1 < t && y2 > b ) // Surrounded vertically\n\t\t\t) && (\n\t\t\t\t( x1 >= l && x1 <= r ) || // Left edge touching\n\t\t\t\t( x2 >= l && x2 <= r ) || // Right edge touching\n\t\t\t\t( x1 < l && x2 > r ) // Surrounded horizontally\n\t\t\t);\n\t\tdefault:\n\t\t\treturn false;\n\t\t}\n\t};\n})();\n\n/*\n\tThis manager tracks offsets of draggables and droppables\n*/\n$.ui.ddmanager = {\n\tcurrent: null,\n\tdroppables: { \"default\": [] },\n\tprepareOffsets: function( t, event ) {\n\n\t\tvar i, j,\n\t\t\tm = $.ui.ddmanager.droppables[ t.options.scope ] || [],\n\t\t\ttype = event ? event.type : null, // workaround for #2317\n\t\t\tlist = ( t.currentItem || t.element ).find( \":data(ui-droppable)\" ).addBack();\n\n\t\tdroppablesLoop: for ( i = 0; i < m.length; i++ ) {\n\n\t\t\t// No disabled and non-accepted\n\t\t\tif ( m[ i ].options.disabled || ( t && !m[ i ].accept.call( m[ i ].element[ 0 ], ( t.currentItem || t.element ) ) ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Filter out elements in the current dragged item\n\t\t\tfor ( j = 0; j < list.length; j++ ) {\n\t\t\t\tif ( list[ j ] === m[ i ].element[ 0 ] ) {\n\t\t\t\t\tm[ i ].proportions().height = 0;\n\t\t\t\t\tcontinue droppablesLoop;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tm[ i ].visible = m[ i ].element.css( \"display\" ) !== \"none\";\n\t\t\tif ( !m[ i ].visible ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Activate the droppable if used directly from draggables\n\t\t\tif ( type === \"mousedown\" ) {\n\t\t\t\tm[ i ]._activate.call( m[ i ], event );\n\t\t\t}\n\n\t\t\tm[ i ].offset = m[ i ].element.offset();\n\t\t\tm[ i ].proportions({ width: m[ i ].element[ 0 ].offsetWidth, height: m[ i ].element[ 0 ].offsetHeight });\n\n\t\t}\n\n\t},\n\tdrop: function( draggable, event ) {\n\n\t\tvar dropped = false;\n\t\t// Create a copy of the droppables in case the list changes during the drop (#9116)\n\t\t$.each( ( $.ui.ddmanager.droppables[ draggable.options.scope ] || [] ).slice(), function() {\n\n\t\t\tif ( !this.options ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ( !this.options.disabled && this.visible && $.ui.intersect( draggable, this, this.options.tolerance, event ) ) {\n\t\t\t\tdropped = this._drop.call( this, event ) || dropped;\n\t\t\t}\n\n\t\t\tif ( !this.options.disabled && this.visible && this.accept.call( this.element[ 0 ], ( draggable.currentItem || draggable.element ) ) ) {\n\t\t\t\tthis.isout = true;\n\t\t\t\tthis.isover = false;\n\t\t\t\tthis._deactivate.call( this, event );\n\t\t\t}\n\n\t\t});\n\t\treturn dropped;\n\n\t},\n\tdragStart: function( draggable, event ) {\n\t\t// Listen for scrolling so that if the dragging causes scrolling the position of the droppables can be recalculated (see #5003)\n\t\tdraggable.element.parentsUntil( \"body\" ).bind( \"scroll.droppable\", function() {\n\t\t\tif ( !draggable.options.refreshPositions ) {\n\t\t\t\t$.ui.ddmanager.prepareOffsets( draggable, event );\n\t\t\t}\n\t\t});\n\t},\n\tdrag: function( draggable, event ) {\n\n\t\t// If you have a highly dynamic page, you might try this option. It renders positions every time you move the mouse.\n\t\tif ( draggable.options.refreshPositions ) {\n\t\t\t$.ui.ddmanager.prepareOffsets( draggable, event );\n\t\t}\n\n\t\t// Run through all droppables and check their positions based on specific tolerance options\n\t\t$.each( $.ui.ddmanager.droppables[ draggable.options.scope ] || [], function() {\n\n\t\t\tif ( this.options.disabled || this.greedyChild || !this.visible ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar parentInstance, scope, parent,\n\t\t\t\tintersects = $.ui.intersect( draggable, this, this.options.tolerance, event ),\n\t\t\t\tc = !intersects && this.isover ? \"isout\" : ( intersects && !this.isover ? \"isover\" : null );\n\t\t\tif ( !c ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( this.options.greedy ) {\n\t\t\t\t// find droppable parents with same scope\n\t\t\t\tscope = this.options.scope;\n\t\t\t\tparent = this.element.parents( \":data(ui-droppable)\" ).filter(function() {\n\t\t\t\t\treturn $( this ).droppable( \"instance\" ).options.scope === scope;\n\t\t\t\t});\n\n\t\t\t\tif ( parent.length ) {\n\t\t\t\t\tparentInstance = $( parent[ 0 ] ).droppable( \"instance\" );\n\t\t\t\t\tparentInstance.greedyChild = ( c === \"isover\" );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// we just moved into a greedy child\n\t\t\tif ( parentInstance && c === \"isover\" ) {\n\t\t\t\tparentInstance.isover = false;\n\t\t\t\tparentInstance.isout = true;\n\t\t\t\tparentInstance._out.call( parentInstance, event );\n\t\t\t}\n\n\t\t\tthis[ c ] = true;\n\t\t\tthis[c === \"isout\" ? \"isover\" : \"isout\"] = false;\n\t\t\tthis[c === \"isover\" ? \"_over\" : \"_out\"].call( this, event );\n\n\t\t\t// we just moved out of a greedy child\n\t\t\tif ( parentInstance && c === \"isout\" ) {\n\t\t\t\tparentInstance.isout = false;\n\t\t\t\tparentInstance.isover = true;\n\t\t\t\tparentInstance._over.call( parentInstance, event );\n\t\t\t}\n\t\t});\n\n\t},\n\tdragStop: function( draggable, event ) {\n\t\tdraggable.element.parentsUntil( \"body\" ).unbind( \"scroll.droppable\" );\n\t\t// Call prepareOffsets one final time since IE does not fire return scroll events when overflow was caused by drag (see #5003)\n\t\tif ( !draggable.options.refreshPositions ) {\n\t\t\t$.ui.ddmanager.prepareOffsets( draggable, event );\n\t\t}\n\t}\n};\n\nvar droppable = $.ui.droppable;\n\n\n/*!\n * jQuery UI Effects 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/category/effects-core/\n */\n\n\nvar dataSpace = \"ui-effects-\",\n\n\t// Create a local jQuery because jQuery Color relies on it and the\n\t// global may not exist with AMD and a custom build (#10199)\n\tjQuery = $;\n\n$.effects = {\n\teffect: {}\n};\n\n/*!\n * jQuery Color Animations v2.1.2\n * https://github.com/jquery/jquery-color\n *\n * Copyright 2014 jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * Date: Wed Jan 16 08:47:09 2013 -0600\n */\n(function( jQuery, undefined ) {\n\n\tvar stepHooks = \"backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor\",\n\n\t// plusequals test for += 100 -= 100\n\trplusequals = /^([\\-+])=\\s*(\\d+\\.?\\d*)/,\n\t// a set of RE's that can match strings and generate color tuples.\n\tstringParsers = [ {\n\t\t\tre: /rgba?\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*(?:,\\s*(\\d?(?:\\.\\d+)?)\\s*)?\\)/,\n\t\t\tparse: function( execResult ) {\n\t\t\t\treturn [\n\t\t\t\t\texecResult[ 1 ],\n\t\t\t\t\texecResult[ 2 ],\n\t\t\t\t\texecResult[ 3 ],\n\t\t\t\t\texecResult[ 4 ]\n\t\t\t\t];\n\t\t\t}\n\t\t}, {\n\t\t\tre: /rgba?\\(\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*(?:,\\s*(\\d?(?:\\.\\d+)?)\\s*)?\\)/,\n\t\t\tparse: function( execResult ) {\n\t\t\t\treturn [\n\t\t\t\t\texecResult[ 1 ] * 2.55,\n\t\t\t\t\texecResult[ 2 ] * 2.55,\n\t\t\t\t\texecResult[ 3 ] * 2.55,\n\t\t\t\t\texecResult[ 4 ]\n\t\t\t\t];\n\t\t\t}\n\t\t}, {\n\t\t\t// this regex ignores A-F because it's compared against an already lowercased string\n\t\t\tre: /#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,\n\t\t\tparse: function( execResult ) {\n\t\t\t\treturn [\n\t\t\t\t\tparseInt( execResult[ 1 ], 16 ),\n\t\t\t\t\tparseInt( execResult[ 2 ], 16 ),\n\t\t\t\t\tparseInt( execResult[ 3 ], 16 )\n\t\t\t\t];\n\t\t\t}\n\t\t}, {\n\t\t\t// this regex ignores A-F because it's compared against an already lowercased string\n\t\t\tre: /#([a-f0-9])([a-f0-9])([a-f0-9])/,\n\t\t\tparse: function( execResult ) {\n\t\t\t\treturn [\n\t\t\t\t\tparseInt( execResult[ 1 ] + execResult[ 1 ], 16 ),\n\t\t\t\t\tparseInt( execResult[ 2 ] + execResult[ 2 ], 16 ),\n\t\t\t\t\tparseInt( execResult[ 3 ] + execResult[ 3 ], 16 )\n\t\t\t\t];\n\t\t\t}\n\t\t}, {\n\t\t\tre: /hsla?\\(\\s*(\\d+(?:\\.\\d+)?)\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*(?:,\\s*(\\d?(?:\\.\\d+)?)\\s*)?\\)/,\n\t\t\tspace: \"hsla\",\n\t\t\tparse: function( execResult ) {\n\t\t\t\treturn [\n\t\t\t\t\texecResult[ 1 ],\n\t\t\t\t\texecResult[ 2 ] / 100,\n\t\t\t\t\texecResult[ 3 ] / 100,\n\t\t\t\t\texecResult[ 4 ]\n\t\t\t\t];\n\t\t\t}\n\t\t} ],\n\n\t// jQuery.Color( )\n\tcolor = jQuery.Color = function( color, green, blue, alpha ) {\n\t\treturn new jQuery.Color.fn.parse( color, green, blue, alpha );\n\t},\n\tspaces = {\n\t\trgba: {\n\t\t\tprops: {\n\t\t\t\tred: {\n\t\t\t\t\tidx: 0,\n\t\t\t\t\ttype: \"byte\"\n\t\t\t\t},\n\t\t\t\tgreen: {\n\t\t\t\t\tidx: 1,\n\t\t\t\t\ttype: \"byte\"\n\t\t\t\t},\n\t\t\t\tblue: {\n\t\t\t\t\tidx: 2,\n\t\t\t\t\ttype: \"byte\"\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\thsla: {\n\t\t\tprops: {\n\t\t\t\thue: {\n\t\t\t\t\tidx: 0,\n\t\t\t\t\ttype: \"degrees\"\n\t\t\t\t},\n\t\t\t\tsaturation: {\n\t\t\t\t\tidx: 1,\n\t\t\t\t\ttype: \"percent\"\n\t\t\t\t},\n\t\t\t\tlightness: {\n\t\t\t\t\tidx: 2,\n\t\t\t\t\ttype: \"percent\"\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tpropTypes = {\n\t\t\"byte\": {\n\t\t\tfloor: true,\n\t\t\tmax: 255\n\t\t},\n\t\t\"percent\": {\n\t\t\tmax: 1\n\t\t},\n\t\t\"degrees\": {\n\t\t\tmod: 360,\n\t\t\tfloor: true\n\t\t}\n\t},\n\tsupport = color.support = {},\n\n\t// element for support tests\n\tsupportElem = jQuery( \"<p>\" )[ 0 ],\n\n\t// colors = jQuery.Color.names\n\tcolors,\n\n\t// local aliases of functions called often\n\teach = jQuery.each;\n\n// determine rgba support immediately\nsupportElem.style.cssText = \"background-color:rgba(1,1,1,.5)\";\nsupport.rgba = supportElem.style.backgroundColor.indexOf( \"rgba\" ) > -1;\n\n// define cache name and alpha properties\n// for rgba and hsla spaces\neach( spaces, function( spaceName, space ) {\n\tspace.cache = \"_\" + spaceName;\n\tspace.props.alpha = {\n\t\tidx: 3,\n\t\ttype: \"percent\",\n\t\tdef: 1\n\t};\n});\n\nfunction clamp( value, prop, allowEmpty ) {\n\tvar type = propTypes[ prop.type ] || {};\n\n\tif ( value == null ) {\n\t\treturn (allowEmpty || !prop.def) ? null : prop.def;\n\t}\n\n\t// ~~ is an short way of doing floor for positive numbers\n\tvalue = type.floor ? ~~value : parseFloat( value );\n\n\t// IE will pass in empty strings as value for alpha,\n\t// which will hit this case\n\tif ( isNaN( value ) ) {\n\t\treturn prop.def;\n\t}\n\n\tif ( type.mod ) {\n\t\t// we add mod before modding to make sure that negatives values\n\t\t// get converted properly: -10 -> 350\n\t\treturn (value + type.mod) % type.mod;\n\t}\n\n\t// for now all property types without mod have min and max\n\treturn 0 > value ? 0 : type.max < value ? type.max : value;\n}\n\nfunction stringParse( string ) {\n\tvar inst = color(),\n\t\trgba = inst._rgba = [];\n\n\tstring = string.toLowerCase();\n\n\teach( stringParsers, function( i, parser ) {\n\t\tvar parsed,\n\t\t\tmatch = parser.re.exec( string ),\n\t\t\tvalues = match && parser.parse( match ),\n\t\t\tspaceName = parser.space || \"rgba\";\n\n\t\tif ( values ) {\n\t\t\tparsed = inst[ spaceName ]( values );\n\n\t\t\t// if this was an rgba parse the assignment might happen twice\n\t\t\t// oh well....\n\t\t\tinst[ spaces[ spaceName ].cache ] = parsed[ spaces[ spaceName ].cache ];\n\t\t\trgba = inst._rgba = parsed._rgba;\n\n\t\t\t// exit each( stringParsers ) here because we matched\n\t\t\treturn false;\n\t\t}\n\t});\n\n\t// Found a stringParser that handled it\n\tif ( rgba.length ) {\n\n\t\t// if this came from a parsed string, force \"transparent\" when alpha is 0\n\t\t// chrome, (and maybe others) return \"transparent\" as rgba(0,0,0,0)\n\t\tif ( rgba.join() === \"0,0,0,0\" ) {\n\t\t\tjQuery.extend( rgba, colors.transparent );\n\t\t}\n\t\treturn inst;\n\t}\n\n\t// named colors\n\treturn colors[ string ];\n}\n\ncolor.fn = jQuery.extend( color.prototype, {\n\tparse: function( red, green, blue, alpha ) {\n\t\tif ( red === undefined ) {\n\t\t\tthis._rgba = [ null, null, null, null ];\n\t\t\treturn this;\n\t\t}\n\t\tif ( red.jquery || red.nodeType ) {\n\t\t\tred = jQuery( red ).css( green );\n\t\t\tgreen = undefined;\n\t\t}\n\n\t\tvar inst = this,\n\t\t\ttype = jQuery.type( red ),\n\t\t\trgba = this._rgba = [];\n\n\t\t// more than 1 argument specified - assume ( red, green, blue, alpha )\n\t\tif ( green !== undefined ) {\n\t\t\tred = [ red, green, blue, alpha ];\n\t\t\ttype = \"array\";\n\t\t}\n\n\t\tif ( type === \"string\" ) {\n\t\t\treturn this.parse( stringParse( red ) || colors._default );\n\t\t}\n\n\t\tif ( type === \"array\" ) {\n\t\t\teach( spaces.rgba.props, function( key, prop ) {\n\t\t\t\trgba[ prop.idx ] = clamp( red[ prop.idx ], prop );\n\t\t\t});\n\t\t\treturn this;\n\t\t}\n\n\t\tif ( type === \"object\" ) {\n\t\t\tif ( red instanceof color ) {\n\t\t\t\teach( spaces, function( spaceName, space ) {\n\t\t\t\t\tif ( red[ space.cache ] ) {\n\t\t\t\t\t\tinst[ space.cache ] = red[ space.cache ].slice();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\teach( spaces, function( spaceName, space ) {\n\t\t\t\t\tvar cache = space.cache;\n\t\t\t\t\teach( space.props, function( key, prop ) {\n\n\t\t\t\t\t\t// if the cache doesn't exist, and we know how to convert\n\t\t\t\t\t\tif ( !inst[ cache ] && space.to ) {\n\n\t\t\t\t\t\t\t// if the value was null, we don't need to copy it\n\t\t\t\t\t\t\t// if the key was alpha, we don't need to copy it either\n\t\t\t\t\t\t\tif ( key === \"alpha\" || red[ key ] == null ) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tinst[ cache ] = space.to( inst._rgba );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// this is the only case where we allow nulls for ALL properties.\n\t\t\t\t\t\t// call clamp with alwaysAllowEmpty\n\t\t\t\t\t\tinst[ cache ][ prop.idx ] = clamp( red[ key ], prop, true );\n\t\t\t\t\t});\n\n\t\t\t\t\t// everything defined but alpha?\n\t\t\t\t\tif ( inst[ cache ] && jQuery.inArray( null, inst[ cache ].slice( 0, 3 ) ) < 0 ) {\n\t\t\t\t\t\t// use the default of 1\n\t\t\t\t\t\tinst[ cache ][ 3 ] = 1;\n\t\t\t\t\t\tif ( space.from ) {\n\t\t\t\t\t\t\tinst._rgba = space.from( inst[ cache ] );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t},\n\tis: function( compare ) {\n\t\tvar is = color( compare ),\n\t\t\tsame = true,\n\t\t\tinst = this;\n\n\t\teach( spaces, function( _, space ) {\n\t\t\tvar localCache,\n\t\t\t\tisCache = is[ space.cache ];\n\t\t\tif (isCache) {\n\t\t\t\tlocalCache = inst[ space.cache ] || space.to && space.to( inst._rgba ) || [];\n\t\t\t\teach( space.props, function( _, prop ) {\n\t\t\t\t\tif ( isCache[ prop.idx ] != null ) {\n\t\t\t\t\t\tsame = ( isCache[ prop.idx ] === localCache[ prop.idx ] );\n\t\t\t\t\t\treturn same;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn same;\n\t\t});\n\t\treturn same;\n\t},\n\t_space: function() {\n\t\tvar used = [],\n\t\t\tinst = this;\n\t\teach( spaces, function( spaceName, space ) {\n\t\t\tif ( inst[ space.cache ] ) {\n\t\t\t\tused.push( spaceName );\n\t\t\t}\n\t\t});\n\t\treturn used.pop();\n\t},\n\ttransition: function( other, distance ) {\n\t\tvar end = color( other ),\n\t\t\tspaceName = end._space(),\n\t\t\tspace = spaces[ spaceName ],\n\t\t\tstartColor = this.alpha() === 0 ? color( \"transparent\" ) : this,\n\t\t\tstart = startColor[ space.cache ] || space.to( startColor._rgba ),\n\t\t\tresult = start.slice();\n\n\t\tend = end[ space.cache ];\n\t\teach( space.props, function( key, prop ) {\n\t\t\tvar index = prop.idx,\n\t\t\t\tstartValue = start[ index ],\n\t\t\t\tendValue = end[ index ],\n\t\t\t\ttype = propTypes[ prop.type ] || {};\n\n\t\t\t// if null, don't override start value\n\t\t\tif ( endValue === null ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// if null - use end\n\t\t\tif ( startValue === null ) {\n\t\t\t\tresult[ index ] = endValue;\n\t\t\t} else {\n\t\t\t\tif ( type.mod ) {\n\t\t\t\t\tif ( endValue - startValue > type.mod / 2 ) {\n\t\t\t\t\t\tstartValue += type.mod;\n\t\t\t\t\t} else if ( startValue - endValue > type.mod / 2 ) {\n\t\t\t\t\t\tstartValue -= type.mod;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tresult[ index ] = clamp( ( endValue - startValue ) * distance + startValue, prop );\n\t\t\t}\n\t\t});\n\t\treturn this[ spaceName ]( result );\n\t},\n\tblend: function( opaque ) {\n\t\t// if we are already opaque - return ourself\n\t\tif ( this._rgba[ 3 ] === 1 ) {\n\t\t\treturn this;\n\t\t}\n\n\t\tvar rgb = this._rgba.slice(),\n\t\t\ta = rgb.pop(),\n\t\t\tblend = color( opaque )._rgba;\n\n\t\treturn color( jQuery.map( rgb, function( v, i ) {\n\t\t\treturn ( 1 - a ) * blend[ i ] + a * v;\n\t\t}));\n\t},\n\ttoRgbaString: function() {\n\t\tvar prefix = \"rgba(\",\n\t\t\trgba = jQuery.map( this._rgba, function( v, i ) {\n\t\t\t\treturn v == null ? ( i > 2 ? 1 : 0 ) : v;\n\t\t\t});\n\n\t\tif ( rgba[ 3 ] === 1 ) {\n\t\t\trgba.pop();\n\t\t\tprefix = \"rgb(\";\n\t\t}\n\n\t\treturn prefix + rgba.join() + \")\";\n\t},\n\ttoHslaString: function() {\n\t\tvar prefix = \"hsla(\",\n\t\t\thsla = jQuery.map( this.hsla(), function( v, i ) {\n\t\t\t\tif ( v == null ) {\n\t\t\t\t\tv = i > 2 ? 1 : 0;\n\t\t\t\t}\n\n\t\t\t\t// catch 1 and 2\n\t\t\t\tif ( i && i < 3 ) {\n\t\t\t\t\tv = Math.round( v * 100 ) + \"%\";\n\t\t\t\t}\n\t\t\t\treturn v;\n\t\t\t});\n\n\t\tif ( hsla[ 3 ] === 1 ) {\n\t\t\thsla.pop();\n\t\t\tprefix = \"hsl(\";\n\t\t}\n\t\treturn prefix + hsla.join() + \")\";\n\t},\n\ttoHexString: function( includeAlpha ) {\n\t\tvar rgba = this._rgba.slice(),\n\t\t\talpha = rgba.pop();\n\n\t\tif ( includeAlpha ) {\n\t\t\trgba.push( ~~( alpha * 255 ) );\n\t\t}\n\n\t\treturn \"#\" + jQuery.map( rgba, function( v ) {\n\n\t\t\t// default to 0 when nulls exist\n\t\t\tv = ( v || 0 ).toString( 16 );\n\t\t\treturn v.length === 1 ? \"0\" + v : v;\n\t\t}).join(\"\");\n\t},\n\ttoString: function() {\n\t\treturn this._rgba[ 3 ] === 0 ? \"transparent\" : this.toRgbaString();\n\t}\n});\ncolor.fn.parse.prototype = color.fn;\n\n// hsla conversions adapted from:\n// https://code.google.com/p/maashaack/source/browse/packages/graphics/trunk/src/graphics/colors/HUE2RGB.as?r=5021\n\nfunction hue2rgb( p, q, h ) {\n\th = ( h + 1 ) % 1;\n\tif ( h * 6 < 1 ) {\n\t\treturn p + ( q - p ) * h * 6;\n\t}\n\tif ( h * 2 < 1) {\n\t\treturn q;\n\t}\n\tif ( h * 3 < 2 ) {\n\t\treturn p + ( q - p ) * ( ( 2 / 3 ) - h ) * 6;\n\t}\n\treturn p;\n}\n\nspaces.hsla.to = function( rgba ) {\n\tif ( rgba[ 0 ] == null || rgba[ 1 ] == null || rgba[ 2 ] == null ) {\n\t\treturn [ null, null, null, rgba[ 3 ] ];\n\t}\n\tvar r = rgba[ 0 ] / 255,\n\t\tg = rgba[ 1 ] / 255,\n\t\tb = rgba[ 2 ] / 255,\n\t\ta = rgba[ 3 ],\n\t\tmax = Math.max( r, g, b ),\n\t\tmin = Math.min( r, g, b ),\n\t\tdiff = max - min,\n\t\tadd = max + min,\n\t\tl = add * 0.5,\n\t\th, s;\n\n\tif ( min === max ) {\n\t\th = 0;\n\t} else if ( r === max ) {\n\t\th = ( 60 * ( g - b ) / diff ) + 360;\n\t} else if ( g === max ) {\n\t\th = ( 60 * ( b - r ) / diff ) + 120;\n\t} else {\n\t\th = ( 60 * ( r - g ) / diff ) + 240;\n\t}\n\n\t// chroma (diff) == 0 means greyscale which, by definition, saturation = 0%\n\t// otherwise, saturation is based on the ratio of chroma (diff) to lightness (add)\n\tif ( diff === 0 ) {\n\t\ts = 0;\n\t} else if ( l <= 0.5 ) {\n\t\ts = diff / add;\n\t} else {\n\t\ts = diff / ( 2 - add );\n\t}\n\treturn [ Math.round(h) % 360, s, l, a == null ? 1 : a ];\n};\n\nspaces.hsla.from = function( hsla ) {\n\tif ( hsla[ 0 ] == null || hsla[ 1 ] == null || hsla[ 2 ] == null ) {\n\t\treturn [ null, null, null, hsla[ 3 ] ];\n\t}\n\tvar h = hsla[ 0 ] / 360,\n\t\ts = hsla[ 1 ],\n\t\tl = hsla[ 2 ],\n\t\ta = hsla[ 3 ],\n\t\tq = l <= 0.5 ? l * ( 1 + s ) : l + s - l * s,\n\t\tp = 2 * l - q;\n\n\treturn [\n\t\tMath.round( hue2rgb( p, q, h + ( 1 / 3 ) ) * 255 ),\n\t\tMath.round( hue2rgb( p, q, h ) * 255 ),\n\t\tMath.round( hue2rgb( p, q, h - ( 1 / 3 ) ) * 255 ),\n\t\ta\n\t];\n};\n\neach( spaces, function( spaceName, space ) {\n\tvar props = space.props,\n\t\tcache = space.cache,\n\t\tto = space.to,\n\t\tfrom = space.from;\n\n\t// makes rgba() and hsla()\n\tcolor.fn[ spaceName ] = function( value ) {\n\n\t\t// generate a cache for this space if it doesn't exist\n\t\tif ( to && !this[ cache ] ) {\n\t\t\tthis[ cache ] = to( this._rgba );\n\t\t}\n\t\tif ( value === undefined ) {\n\t\t\treturn this[ cache ].slice();\n\t\t}\n\n\t\tvar ret,\n\t\t\ttype = jQuery.type( value ),\n\t\t\tarr = ( type === \"array\" || type === \"object\" ) ? value : arguments,\n\t\t\tlocal = this[ cache ].slice();\n\n\t\teach( props, function( key, prop ) {\n\t\t\tvar val = arr[ type === \"object\" ? key : prop.idx ];\n\t\t\tif ( val == null ) {\n\t\t\t\tval = local[ prop.idx ];\n\t\t\t}\n\t\t\tlocal[ prop.idx ] = clamp( val, prop );\n\t\t});\n\n\t\tif ( from ) {\n\t\t\tret = color( from( local ) );\n\t\t\tret[ cache ] = local;\n\t\t\treturn ret;\n\t\t} else {\n\t\t\treturn color( local );\n\t\t}\n\t};\n\n\t// makes red() green() blue() alpha() hue() saturation() lightness()\n\teach( props, function( key, prop ) {\n\t\t// alpha is included in more than one space\n\t\tif ( color.fn[ key ] ) {\n\t\t\treturn;\n\t\t}\n\t\tcolor.fn[ key ] = function( value ) {\n\t\t\tvar vtype = jQuery.type( value ),\n\t\t\t\tfn = ( key === \"alpha\" ? ( this._hsla ? \"hsla\" : \"rgba\" ) : spaceName ),\n\t\t\t\tlocal = this[ fn ](),\n\t\t\t\tcur = local[ prop.idx ],\n\t\t\t\tmatch;\n\n\t\t\tif ( vtype === \"undefined\" ) {\n\t\t\t\treturn cur;\n\t\t\t}\n\n\t\t\tif ( vtype === \"function\" ) {\n\t\t\t\tvalue = value.call( this, cur );\n\t\t\t\tvtype = jQuery.type( value );\n\t\t\t}\n\t\t\tif ( value == null && prop.empty ) {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\tif ( vtype === \"string\" ) {\n\t\t\t\tmatch = rplusequals.exec( value );\n\t\t\t\tif ( match ) {\n\t\t\t\t\tvalue = cur + parseFloat( match[ 2 ] ) * ( match[ 1 ] === \"+\" ? 1 : -1 );\n\t\t\t\t}\n\t\t\t}\n\t\t\tlocal[ prop.idx ] = value;\n\t\t\treturn this[ fn ]( local );\n\t\t};\n\t});\n});\n\n// add cssHook and .fx.step function for each named hook.\n// accept a space separated string of properties\ncolor.hook = function( hook ) {\n\tvar hooks = hook.split( \" \" );\n\teach( hooks, function( i, hook ) {\n\t\tjQuery.cssHooks[ hook ] = {\n\t\t\tset: function( elem, value ) {\n\t\t\t\tvar parsed, curElem,\n\t\t\t\t\tbackgroundColor = \"\";\n\n\t\t\t\tif ( value !== \"transparent\" && ( jQuery.type( value ) !== \"string\" || ( parsed = stringParse( value ) ) ) ) {\n\t\t\t\t\tvalue = color( parsed || value );\n\t\t\t\t\tif ( !support.rgba && value._rgba[ 3 ] !== 1 ) {\n\t\t\t\t\t\tcurElem = hook === \"backgroundColor\" ? elem.parentNode : elem;\n\t\t\t\t\t\twhile (\n\t\t\t\t\t\t\t(backgroundColor === \"\" || backgroundColor === \"transparent\") &&\n\t\t\t\t\t\t\tcurElem && curElem.style\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tbackgroundColor = jQuery.css( curElem, \"backgroundColor\" );\n\t\t\t\t\t\t\t\tcurElem = curElem.parentNode;\n\t\t\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvalue = value.blend( backgroundColor && backgroundColor !== \"transparent\" ?\n\t\t\t\t\t\t\tbackgroundColor :\n\t\t\t\t\t\t\t\"_default\" );\n\t\t\t\t\t}\n\n\t\t\t\t\tvalue = value.toRgbaString();\n\t\t\t\t}\n\t\t\t\ttry {\n\t\t\t\t\telem.style[ hook ] = value;\n\t\t\t\t} catch ( e ) {\n\t\t\t\t\t// wrapped to prevent IE from throwing errors on \"invalid\" values like 'auto' or 'inherit'\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tjQuery.fx.step[ hook ] = function( fx ) {\n\t\t\tif ( !fx.colorInit ) {\n\t\t\t\tfx.start = color( fx.elem, hook );\n\t\t\t\tfx.end = color( fx.end );\n\t\t\t\tfx.colorInit = true;\n\t\t\t}\n\t\t\tjQuery.cssHooks[ hook ].set( fx.elem, fx.start.transition( fx.end, fx.pos ) );\n\t\t};\n\t});\n\n};\n\ncolor.hook( stepHooks );\n\njQuery.cssHooks.borderColor = {\n\texpand: function( value ) {\n\t\tvar expanded = {};\n\n\t\teach( [ \"Top\", \"Right\", \"Bottom\", \"Left\" ], function( i, part ) {\n\t\t\texpanded[ \"border\" + part + \"Color\" ] = value;\n\t\t});\n\t\treturn expanded;\n\t}\n};\n\n// Basic color names only.\n// Usage of any of the other color names requires adding yourself or including\n// jquery.color.svg-names.js.\ncolors = jQuery.Color.names = {\n\t// 4.1. Basic color keywords\n\taqua: \"#00ffff\",\n\tblack: \"#000000\",\n\tblue: \"#0000ff\",\n\tfuchsia: \"#ff00ff\",\n\tgray: \"#808080\",\n\tgreen: \"#008000\",\n\tlime: \"#00ff00\",\n\tmaroon: \"#800000\",\n\tnavy: \"#000080\",\n\tolive: \"#808000\",\n\tpurple: \"#800080\",\n\tred: \"#ff0000\",\n\tsilver: \"#c0c0c0\",\n\tteal: \"#008080\",\n\twhite: \"#ffffff\",\n\tyellow: \"#ffff00\",\n\n\t// 4.2.3. \"transparent\" color keyword\n\ttransparent: [ null, null, null, 0 ],\n\n\t_default: \"#ffffff\"\n};\n\n})( jQuery );\n\n/******************************************************************************/\n/****************************** CLASS ANIMATIONS ******************************/\n/******************************************************************************/\n(function() {\n\nvar classAnimationActions = [ \"add\", \"remove\", \"toggle\" ],\n\tshorthandStyles = {\n\t\tborder: 1,\n\t\tborderBottom: 1,\n\t\tborderColor: 1,\n\t\tborderLeft: 1,\n\t\tborderRight: 1,\n\t\tborderTop: 1,\n\t\tborderWidth: 1,\n\t\tmargin: 1,\n\t\tpadding: 1\n\t};\n\n$.each([ \"borderLeftStyle\", \"borderRightStyle\", \"borderBottomStyle\", \"borderTopStyle\" ], function( _, prop ) {\n\t$.fx.step[ prop ] = function( fx ) {\n\t\tif ( fx.end !== \"none\" && !fx.setAttr || fx.pos === 1 && !fx.setAttr ) {\n\t\t\tjQuery.style( fx.elem, prop, fx.end );\n\t\t\tfx.setAttr = true;\n\t\t}\n\t};\n});\n\nfunction getElementStyles( elem ) {\n\tvar key, len,\n\t\tstyle = elem.ownerDocument.defaultView ?\n\t\t\telem.ownerDocument.defaultView.getComputedStyle( elem, null ) :\n\t\t\telem.currentStyle,\n\t\tstyles = {};\n\n\tif ( style && style.length && style[ 0 ] && style[ style[ 0 ] ] ) {\n\t\tlen = style.length;\n\t\twhile ( len-- ) {\n\t\t\tkey = style[ len ];\n\t\t\tif ( typeof style[ key ] === \"string\" ) {\n\t\t\t\tstyles[ $.camelCase( key ) ] = style[ key ];\n\t\t\t}\n\t\t}\n\t// support: Opera, IE <9\n\t} else {\n\t\tfor ( key in style ) {\n\t\t\tif ( typeof style[ key ] === \"string\" ) {\n\t\t\t\tstyles[ key ] = style[ key ];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn styles;\n}\n\nfunction styleDifference( oldStyle, newStyle ) {\n\tvar diff = {},\n\t\tname, value;\n\n\tfor ( name in newStyle ) {\n\t\tvalue = newStyle[ name ];\n\t\tif ( oldStyle[ name ] !== value ) {\n\t\t\tif ( !shorthandStyles[ name ] ) {\n\t\t\t\tif ( $.fx.step[ name ] || !isNaN( parseFloat( value ) ) ) {\n\t\t\t\t\tdiff[ name ] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn diff;\n}\n\n// support: jQuery <1.8\nif ( !$.fn.addBack ) {\n\t$.fn.addBack = function( selector ) {\n\t\treturn this.add( selector == null ?\n\t\t\tthis.prevObject : this.prevObject.filter( selector )\n\t\t);\n\t};\n}\n\n$.effects.animateClass = function( value, duration, easing, callback ) {\n\tvar o = $.speed( duration, easing, callback );\n\n\treturn this.queue( function() {\n\t\tvar animated = $( this ),\n\t\t\tbaseClass = animated.attr( \"class\" ) || \"\",\n\t\t\tapplyClassChange,\n\t\t\tallAnimations = o.children ? animated.find( \"*\" ).addBack() : animated;\n\n\t\t// map the animated objects to store the original styles.\n\t\tallAnimations = allAnimations.map(function() {\n\t\t\tvar el = $( this );\n\t\t\treturn {\n\t\t\t\tel: el,\n\t\t\t\tstart: getElementStyles( this )\n\t\t\t};\n\t\t});\n\n\t\t// apply class change\n\t\tapplyClassChange = function() {\n\t\t\t$.each( classAnimationActions, function(i, action) {\n\t\t\t\tif ( value[ action ] ) {\n\t\t\t\t\tanimated[ action + \"Class\" ]( value[ action ] );\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t\tapplyClassChange();\n\n\t\t// map all animated objects again - calculate new styles and diff\n\t\tallAnimations = allAnimations.map(function() {\n\t\t\tthis.end = getElementStyles( this.el[ 0 ] );\n\t\t\tthis.diff = styleDifference( this.start, this.end );\n\t\t\treturn this;\n\t\t});\n\n\t\t// apply original class\n\t\tanimated.attr( \"class\", baseClass );\n\n\t\t// map all animated objects again - this time collecting a promise\n\t\tallAnimations = allAnimations.map(function() {\n\t\t\tvar styleInfo = this,\n\t\t\t\tdfd = $.Deferred(),\n\t\t\t\topts = $.extend({}, o, {\n\t\t\t\t\tqueue: false,\n\t\t\t\t\tcomplete: function() {\n\t\t\t\t\t\tdfd.resolve( styleInfo );\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\tthis.el.animate( this.diff, opts );\n\t\t\treturn dfd.promise();\n\t\t});\n\n\t\t// once all animations have completed:\n\t\t$.when.apply( $, allAnimations.get() ).done(function() {\n\n\t\t\t// set the final class\n\t\t\tapplyClassChange();\n\n\t\t\t// for each animated element,\n\t\t\t// clear all css properties that were animated\n\t\t\t$.each( arguments, function() {\n\t\t\t\tvar el = this.el;\n\t\t\t\t$.each( this.diff, function(key) {\n\t\t\t\t\tel.css( key, \"\" );\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// this is guarnteed to be there if you use jQuery.speed()\n\t\t\t// it also handles dequeuing the next anim...\n\t\t\to.complete.call( animated[ 0 ] );\n\t\t});\n\t});\n};\n\n$.fn.extend({\n\taddClass: (function( orig ) {\n\t\treturn function( classNames, speed, easing, callback ) {\n\t\t\treturn speed ?\n\t\t\t\t$.effects.animateClass.call( this,\n\t\t\t\t\t{ add: classNames }, speed, easing, callback ) :\n\t\t\t\torig.apply( this, arguments );\n\t\t};\n\t})( $.fn.addClass ),\n\n\tremoveClass: (function( orig ) {\n\t\treturn function( classNames, speed, easing, callback ) {\n\t\t\treturn arguments.length > 1 ?\n\t\t\t\t$.effects.animateClass.call( this,\n\t\t\t\t\t{ remove: classNames }, speed, easing, callback ) :\n\t\t\t\torig.apply( this, arguments );\n\t\t};\n\t})( $.fn.removeClass ),\n\n\ttoggleClass: (function( orig ) {\n\t\treturn function( classNames, force, speed, easing, callback ) {\n\t\t\tif ( typeof force === \"boolean\" || force === undefined ) {\n\t\t\t\tif ( !speed ) {\n\t\t\t\t\t// without speed parameter\n\t\t\t\t\treturn orig.apply( this, arguments );\n\t\t\t\t} else {\n\t\t\t\t\treturn $.effects.animateClass.call( this,\n\t\t\t\t\t\t(force ? { add: classNames } : { remove: classNames }),\n\t\t\t\t\t\tspeed, easing, callback );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// without force parameter\n\t\t\t\treturn $.effects.animateClass.call( this,\n\t\t\t\t\t{ toggle: classNames }, force, speed, easing );\n\t\t\t}\n\t\t};\n\t})( $.fn.toggleClass ),\n\n\tswitchClass: function( remove, add, speed, easing, callback) {\n\t\treturn $.effects.animateClass.call( this, {\n\t\t\tadd: add,\n\t\t\tremove: remove\n\t\t}, speed, easing, callback );\n\t}\n});\n\n})();\n\n/******************************************************************************/\n/*********************************** EFFECTS **********************************/\n/******************************************************************************/\n\n(function() {\n\n$.extend( $.effects, {\n\tversion: \"1.11.4\",\n\n\t// Saves a set of properties in a data storage\n\tsave: function( element, set ) {\n\t\tfor ( var i = 0; i < set.length; i++ ) {\n\t\t\tif ( set[ i ] !== null ) {\n\t\t\t\telement.data( dataSpace + set[ i ], element[ 0 ].style[ set[ i ] ] );\n\t\t\t}\n\t\t}\n\t},\n\n\t// Restores a set of previously saved properties from a data storage\n\trestore: function( element, set ) {\n\t\tvar val, i;\n\t\tfor ( i = 0; i < set.length; i++ ) {\n\t\t\tif ( set[ i ] !== null ) {\n\t\t\t\tval = element.data( dataSpace + set[ i ] );\n\t\t\t\t// support: jQuery 1.6.2\n\t\t\t\t// http://bugs.jquery.com/ticket/9917\n\t\t\t\t// jQuery 1.6.2 incorrectly returns undefined for any falsy value.\n\t\t\t\t// We can't differentiate between \"\" and 0 here, so we just assume\n\t\t\t\t// empty string since it's likely to be a more common value...\n\t\t\t\tif ( val === undefined ) {\n\t\t\t\t\tval = \"\";\n\t\t\t\t}\n\t\t\t\telement.css( set[ i ], val );\n\t\t\t}\n\t\t}\n\t},\n\n\tsetMode: function( el, mode ) {\n\t\tif (mode === \"toggle\") {\n\t\t\tmode = el.is( \":hidden\" ) ? \"show\" : \"hide\";\n\t\t}\n\t\treturn mode;\n\t},\n\n\t// Translates a [top,left] array into a baseline value\n\t// this should be a little more flexible in the future to handle a string & hash\n\tgetBaseline: function( origin, original ) {\n\t\tvar y, x;\n\t\tswitch ( origin[ 0 ] ) {\n\t\t\tcase \"top\": y = 0; break;\n\t\t\tcase \"middle\": y = 0.5; break;\n\t\t\tcase \"bottom\": y = 1; break;\n\t\t\tdefault: y = origin[ 0 ] / original.height;\n\t\t}\n\t\tswitch ( origin[ 1 ] ) {\n\t\t\tcase \"left\": x = 0; break;\n\t\t\tcase \"center\": x = 0.5; break;\n\t\t\tcase \"right\": x = 1; break;\n\t\t\tdefault: x = origin[ 1 ] / original.width;\n\t\t}\n\t\treturn {\n\t\t\tx: x,\n\t\t\ty: y\n\t\t};\n\t},\n\n\t// Wraps the element around a wrapper that copies position properties\n\tcreateWrapper: function( element ) {\n\n\t\t// if the element is already wrapped, return it\n\t\tif ( element.parent().is( \".ui-effects-wrapper\" )) {\n\t\t\treturn element.parent();\n\t\t}\n\n\t\t// wrap the element\n\t\tvar props = {\n\t\t\t\twidth: element.outerWidth(true),\n\t\t\t\theight: element.outerHeight(true),\n\t\t\t\t\"float\": element.css( \"float\" )\n\t\t\t},\n\t\t\twrapper = $( \"<div></div>\" )\n\t\t\t\t.addClass( \"ui-effects-wrapper\" )\n\t\t\t\t.css({\n\t\t\t\t\tfontSize: \"100%\",\n\t\t\t\t\tbackground: \"transparent\",\n\t\t\t\t\tborder: \"none\",\n\t\t\t\t\tmargin: 0,\n\t\t\t\t\tpadding: 0\n\t\t\t\t}),\n\t\t\t// Store the size in case width/height are defined in % - Fixes #5245\n\t\t\tsize = {\n\t\t\t\twidth: element.width(),\n\t\t\t\theight: element.height()\n\t\t\t},\n\t\t\tactive = document.activeElement;\n\n\t\t// support: Firefox\n\t\t// Firefox incorrectly exposes anonymous content\n\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=561664\n\t\ttry {\n\t\t\tactive.id;\n\t\t} catch ( e ) {\n\t\t\tactive = document.body;\n\t\t}\n\n\t\telement.wrap( wrapper );\n\n\t\t// Fixes #7595 - Elements lose focus when wrapped.\n\t\tif ( element[ 0 ] === active || $.contains( element[ 0 ], active ) ) {\n\t\t\t$( active ).focus();\n\t\t}\n\n\t\twrapper = element.parent(); //Hotfix for jQuery 1.4 since some change in wrap() seems to actually lose the reference to the wrapped element\n\n\t\t// transfer positioning properties to the wrapper\n\t\tif ( element.css( \"position\" ) === \"static\" ) {\n\t\t\twrapper.css({ position: \"relative\" });\n\t\t\telement.css({ position: \"relative\" });\n\t\t} else {\n\t\t\t$.extend( props, {\n\t\t\t\tposition: element.css( \"position\" ),\n\t\t\t\tzIndex: element.css( \"z-index\" )\n\t\t\t});\n\t\t\t$.each([ \"top\", \"left\", \"bottom\", \"right\" ], function(i, pos) {\n\t\t\t\tprops[ pos ] = element.css( pos );\n\t\t\t\tif ( isNaN( parseInt( props[ pos ], 10 ) ) ) {\n\t\t\t\t\tprops[ pos ] = \"auto\";\n\t\t\t\t}\n\t\t\t});\n\t\t\telement.css({\n\t\t\t\tposition: \"relative\",\n\t\t\t\ttop: 0,\n\t\t\t\tleft: 0,\n\t\t\t\tright: \"auto\",\n\t\t\t\tbottom: \"auto\"\n\t\t\t});\n\t\t}\n\t\telement.css(size);\n\n\t\treturn wrapper.css( props ).show();\n\t},\n\n\tremoveWrapper: function( element ) {\n\t\tvar active = document.activeElement;\n\n\t\tif ( element.parent().is( \".ui-effects-wrapper\" ) ) {\n\t\t\telement.parent().replaceWith( element );\n\n\t\t\t// Fixes #7595 - Elements lose focus when wrapped.\n\t\t\tif ( element[ 0 ] === active || $.contains( element[ 0 ], active ) ) {\n\t\t\t\t$( active ).focus();\n\t\t\t}\n\t\t}\n\n\t\treturn element;\n\t},\n\n\tsetTransition: function( element, list, factor, value ) {\n\t\tvalue = value || {};\n\t\t$.each( list, function( i, x ) {\n\t\t\tvar unit = element.cssUnit( x );\n\t\t\tif ( unit[ 0 ] > 0 ) {\n\t\t\t\tvalue[ x ] = unit[ 0 ] * factor + unit[ 1 ];\n\t\t\t}\n\t\t});\n\t\treturn value;\n\t}\n});\n\n// return an effect options object for the given parameters:\nfunction _normalizeArguments( effect, options, speed, callback ) {\n\n\t// allow passing all options as the first parameter\n\tif ( $.isPlainObject( effect ) ) {\n\t\toptions = effect;\n\t\teffect = effect.effect;\n\t}\n\n\t// convert to an object\n\teffect = { effect: effect };\n\n\t// catch (effect, null, ...)\n\tif ( options == null ) {\n\t\toptions = {};\n\t}\n\n\t// catch (effect, callback)\n\tif ( $.isFunction( options ) ) {\n\t\tcallback = options;\n\t\tspeed = null;\n\t\toptions = {};\n\t}\n\n\t// catch (effect, speed, ?)\n\tif ( typeof options === \"number\" || $.fx.speeds[ options ] ) {\n\t\tcallback = speed;\n\t\tspeed = options;\n\t\toptions = {};\n\t}\n\n\t// catch (effect, options, callback)\n\tif ( $.isFunction( speed ) ) {\n\t\tcallback = speed;\n\t\tspeed = null;\n\t}\n\n\t// add options to effect\n\tif ( options ) {\n\t\t$.extend( effect, options );\n\t}\n\n\tspeed = speed || options.duration;\n\teffect.duration = $.fx.off ? 0 :\n\t\ttypeof speed === \"number\" ? speed :\n\t\tspeed in $.fx.speeds ? $.fx.speeds[ speed ] :\n\t\t$.fx.speeds._default;\n\n\teffect.complete = callback || options.complete;\n\n\treturn effect;\n}\n\nfunction standardAnimationOption( option ) {\n\t// Valid standard speeds (nothing, number, named speed)\n\tif ( !option || typeof option === \"number\" || $.fx.speeds[ option ] ) {\n\t\treturn true;\n\t}\n\n\t// Invalid strings - treat as \"normal\" speed\n\tif ( typeof option === \"string\" && !$.effects.effect[ option ] ) {\n\t\treturn true;\n\t}\n\n\t// Complete callback\n\tif ( $.isFunction( option ) ) {\n\t\treturn true;\n\t}\n\n\t// Options hash (but not naming an effect)\n\tif ( typeof option === \"object\" && !option.effect ) {\n\t\treturn true;\n\t}\n\n\t// Didn't match any standard API\n\treturn false;\n}\n\n$.fn.extend({\n\teffect: function( /* effect, options, speed, callback */ ) {\n\t\tvar args = _normalizeArguments.apply( this, arguments ),\n\t\t\tmode = args.mode,\n\t\t\tqueue = args.queue,\n\t\t\teffectMethod = $.effects.effect[ args.effect ];\n\n\t\tif ( $.fx.off || !effectMethod ) {\n\t\t\t// delegate to the original method (e.g., .show()) if possible\n\t\t\tif ( mode ) {\n\t\t\t\treturn this[ mode ]( args.duration, args.complete );\n\t\t\t} else {\n\t\t\t\treturn this.each( function() {\n\t\t\t\t\tif ( args.complete ) {\n\t\t\t\t\t\targs.complete.call( this );\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tfunction run( next ) {\n\t\t\tvar elem = $( this ),\n\t\t\t\tcomplete = args.complete,\n\t\t\t\tmode = args.mode;\n\n\t\t\tfunction done() {\n\t\t\t\tif ( $.isFunction( complete ) ) {\n\t\t\t\t\tcomplete.call( elem[0] );\n\t\t\t\t}\n\t\t\t\tif ( $.isFunction( next ) ) {\n\t\t\t\t\tnext();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If the element already has the correct final state, delegate to\n\t\t\t// the core methods so the internal tracking of \"olddisplay\" works.\n\t\t\tif ( elem.is( \":hidden\" ) ? mode === \"hide\" : mode === \"show\" ) {\n\t\t\t\telem[ mode ]();\n\t\t\t\tdone();\n\t\t\t} else {\n\t\t\t\teffectMethod.call( elem[0], args, done );\n\t\t\t}\n\t\t}\n\n\t\treturn queue === false ? this.each( run ) : this.queue( queue || \"fx\", run );\n\t},\n\n\tshow: (function( orig ) {\n\t\treturn function( option ) {\n\t\t\tif ( standardAnimationOption( option ) ) {\n\t\t\t\treturn orig.apply( this, arguments );\n\t\t\t} else {\n\t\t\t\tvar args = _normalizeArguments.apply( this, arguments );\n\t\t\t\targs.mode = \"show\";\n\t\t\t\treturn this.effect.call( this, args );\n\t\t\t}\n\t\t};\n\t})( $.fn.show ),\n\n\thide: (function( orig ) {\n\t\treturn function( option ) {\n\t\t\tif ( standardAnimationOption( option ) ) {\n\t\t\t\treturn orig.apply( this, arguments );\n\t\t\t} else {\n\t\t\t\tvar args = _normalizeArguments.apply( this, arguments );\n\t\t\t\targs.mode = \"hide\";\n\t\t\t\treturn this.effect.call( this, args );\n\t\t\t}\n\t\t};\n\t})( $.fn.hide ),\n\n\ttoggle: (function( orig ) {\n\t\treturn function( option ) {\n\t\t\tif ( standardAnimationOption( option ) || typeof option === \"boolean\" ) {\n\t\t\t\treturn orig.apply( this, arguments );\n\t\t\t} else {\n\t\t\t\tvar args = _normalizeArguments.apply( this, arguments );\n\t\t\t\targs.mode = \"toggle\";\n\t\t\t\treturn this.effect.call( this, args );\n\t\t\t}\n\t\t};\n\t})( $.fn.toggle ),\n\n\t// helper functions\n\tcssUnit: function(key) {\n\t\tvar style = this.css( key ),\n\t\t\tval = [];\n\n\t\t$.each( [ \"em\", \"px\", \"%\", \"pt\" ], function( i, unit ) {\n\t\t\tif ( style.indexOf( unit ) > 0 ) {\n\t\t\t\tval = [ parseFloat( style ), unit ];\n\t\t\t}\n\t\t});\n\t\treturn val;\n\t}\n});\n\n})();\n\n/******************************************************************************/\n/*********************************** EASING ***********************************/\n/******************************************************************************/\n\n(function() {\n\n// based on easing equations from Robert Penner (http://www.robertpenner.com/easing)\n\nvar baseEasings = {};\n\n$.each( [ \"Quad\", \"Cubic\", \"Quart\", \"Quint\", \"Expo\" ], function( i, name ) {\n\tbaseEasings[ name ] = function( p ) {\n\t\treturn Math.pow( p, i + 2 );\n\t};\n});\n\n$.extend( baseEasings, {\n\tSine: function( p ) {\n\t\treturn 1 - Math.cos( p * Math.PI / 2 );\n\t},\n\tCirc: function( p ) {\n\t\treturn 1 - Math.sqrt( 1 - p * p );\n\t},\n\tElastic: function( p ) {\n\t\treturn p === 0 || p === 1 ? p :\n\t\t\t-Math.pow( 2, 8 * (p - 1) ) * Math.sin( ( (p - 1) * 80 - 7.5 ) * Math.PI / 15 );\n\t},\n\tBack: function( p ) {\n\t\treturn p * p * ( 3 * p - 2 );\n\t},\n\tBounce: function( p ) {\n\t\tvar pow2,\n\t\t\tbounce = 4;\n\n\t\twhile ( p < ( ( pow2 = Math.pow( 2, --bounce ) ) - 1 ) / 11 ) {}\n\t\treturn 1 / Math.pow( 4, 3 - bounce ) - 7.5625 * Math.pow( ( pow2 * 3 - 2 ) / 22 - p, 2 );\n\t}\n});\n\n$.each( baseEasings, function( name, easeIn ) {\n\t$.easing[ \"easeIn\" + name ] = easeIn;\n\t$.easing[ \"easeOut\" + name ] = function( p ) {\n\t\treturn 1 - easeIn( 1 - p );\n\t};\n\t$.easing[ \"easeInOut\" + name ] = function( p ) {\n\t\treturn p < 0.5 ?\n\t\t\teaseIn( p * 2 ) / 2 :\n\t\t\t1 - easeIn( p * -2 + 2 ) / 2;\n\t};\n});\n\n})();\n\nvar effect = $.effects;\n\n\n/*!\n * jQuery UI Effects Blind 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/blind-effect/\n */\n\n\nvar effectBlind = $.effects.effect.blind = function( o, done ) {\n\t// Create element\n\tvar el = $( this ),\n\t\trvertical = /up|down|vertical/,\n\t\trpositivemotion = /up|left|vertical|horizontal/,\n\t\tprops = [ \"position\", \"top\", \"bottom\", \"left\", \"right\", \"height\", \"width\" ],\n\t\tmode = $.effects.setMode( el, o.mode || \"hide\" ),\n\t\tdirection = o.direction || \"up\",\n\t\tvertical = rvertical.test( direction ),\n\t\tref = vertical ? \"height\" : \"width\",\n\t\tref2 = vertical ? \"top\" : \"left\",\n\t\tmotion = rpositivemotion.test( direction ),\n\t\tanimation = {},\n\t\tshow = mode === \"show\",\n\t\twrapper, distance, margin;\n\n\t// if already wrapped, the wrapper's properties are my property. #6245\n\tif ( el.parent().is( \".ui-effects-wrapper\" ) ) {\n\t\t$.effects.save( el.parent(), props );\n\t} else {\n\t\t$.effects.save( el, props );\n\t}\n\tel.show();\n\twrapper = $.effects.createWrapper( el ).css({\n\t\toverflow: \"hidden\"\n\t});\n\n\tdistance = wrapper[ ref ]();\n\tmargin = parseFloat( wrapper.css( ref2 ) ) || 0;\n\n\tanimation[ ref ] = show ? distance : 0;\n\tif ( !motion ) {\n\t\tel\n\t\t\t.css( vertical ? \"bottom\" : \"right\", 0 )\n\t\t\t.css( vertical ? \"top\" : \"left\", \"auto\" )\n\t\t\t.css({ position: \"absolute\" });\n\n\t\tanimation[ ref2 ] = show ? margin : distance + margin;\n\t}\n\n\t// start at 0 if we are showing\n\tif ( show ) {\n\t\twrapper.css( ref, 0 );\n\t\tif ( !motion ) {\n\t\t\twrapper.css( ref2, margin + distance );\n\t\t}\n\t}\n\n\t// Animate\n\twrapper.animate( animation, {\n\t\tduration: o.duration,\n\t\teasing: o.easing,\n\t\tqueue: false,\n\t\tcomplete: function() {\n\t\t\tif ( mode === \"hide\" ) {\n\t\t\t\tel.hide();\n\t\t\t}\n\t\t\t$.effects.restore( el, props );\n\t\t\t$.effects.removeWrapper( el );\n\t\t\tdone();\n\t\t}\n\t});\n};\n\n\n/*!\n * jQuery UI Effects Bounce 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/bounce-effect/\n */\n\n\nvar effectBounce = $.effects.effect.bounce = function( o, done ) {\n\tvar el = $( this ),\n\t\tprops = [ \"position\", \"top\", \"bottom\", \"left\", \"right\", \"height\", \"width\" ],\n\n\t\t// defaults:\n\t\tmode = $.effects.setMode( el, o.mode || \"effect\" ),\n\t\thide = mode === \"hide\",\n\t\tshow = mode === \"show\",\n\t\tdirection = o.direction || \"up\",\n\t\tdistance = o.distance,\n\t\ttimes = o.times || 5,\n\n\t\t// number of internal animations\n\t\tanims = times * 2 + ( show || hide ? 1 : 0 ),\n\t\tspeed = o.duration / anims,\n\t\teasing = o.easing,\n\n\t\t// utility:\n\t\tref = ( direction === \"up\" || direction === \"down\" ) ? \"top\" : \"left\",\n\t\tmotion = ( direction === \"up\" || direction === \"left\" ),\n\t\ti,\n\t\tupAnim,\n\t\tdownAnim,\n\n\t\t// we will need to re-assemble the queue to stack our animations in place\n\t\tqueue = el.queue(),\n\t\tqueuelen = queue.length;\n\n\t// Avoid touching opacity to prevent clearType and PNG issues in IE\n\tif ( show || hide ) {\n\t\tprops.push( \"opacity\" );\n\t}\n\n\t$.effects.save( el, props );\n\tel.show();\n\t$.effects.createWrapper( el ); // Create Wrapper\n\n\t// default distance for the BIGGEST bounce is the outer Distance / 3\n\tif ( !distance ) {\n\t\tdistance = el[ ref === \"top\" ? \"outerHeight\" : \"outerWidth\" ]() / 3;\n\t}\n\n\tif ( show ) {\n\t\tdownAnim = { opacity: 1 };\n\t\tdownAnim[ ref ] = 0;\n\n\t\t// if we are showing, force opacity 0 and set the initial position\n\t\t// then do the \"first\" animation\n\t\tel.css( \"opacity\", 0 )\n\t\t\t.css( ref, motion ? -distance * 2 : distance * 2 )\n\t\t\t.animate( downAnim, speed, easing );\n\t}\n\n\t// start at the smallest distance if we are hiding\n\tif ( hide ) {\n\t\tdistance = distance / Math.pow( 2, times - 1 );\n\t}\n\n\tdownAnim = {};\n\tdownAnim[ ref ] = 0;\n\t// Bounces up/down/left/right then back to 0 -- times * 2 animations happen here\n\tfor ( i = 0; i < times; i++ ) {\n\t\tupAnim = {};\n\t\tupAnim[ ref ] = ( motion ? \"-=\" : \"+=\" ) + distance;\n\n\t\tel.animate( upAnim, speed, easing )\n\t\t\t.animate( downAnim, speed, easing );\n\n\t\tdistance = hide ? distance * 2 : distance / 2;\n\t}\n\n\t// Last Bounce when Hiding\n\tif ( hide ) {\n\t\tupAnim = { opacity: 0 };\n\t\tupAnim[ ref ] = ( motion ? \"-=\" : \"+=\" ) + distance;\n\n\t\tel.animate( upAnim, speed, easing );\n\t}\n\n\tel.queue(function() {\n\t\tif ( hide ) {\n\t\t\tel.hide();\n\t\t}\n\t\t$.effects.restore( el, props );\n\t\t$.effects.removeWrapper( el );\n\t\tdone();\n\t});\n\n\t// inject all the animations we just queued to be first in line (after \"inprogress\")\n\tif ( queuelen > 1) {\n\t\tqueue.splice.apply( queue,\n\t\t\t[ 1, 0 ].concat( queue.splice( queuelen, anims + 1 ) ) );\n\t}\n\tel.dequeue();\n\n};\n\n\n/*!\n * jQuery UI Effects Clip 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/clip-effect/\n */\n\n\nvar effectClip = $.effects.effect.clip = function( o, done ) {\n\t// Create element\n\tvar el = $( this ),\n\t\tprops = [ \"position\", \"top\", \"bottom\", \"left\", \"right\", \"height\", \"width\" ],\n\t\tmode = $.effects.setMode( el, o.mode || \"hide\" ),\n\t\tshow = mode === \"show\",\n\t\tdirection = o.direction || \"vertical\",\n\t\tvert = direction === \"vertical\",\n\t\tsize = vert ? \"height\" : \"width\",\n\t\tposition = vert ? \"top\" : \"left\",\n\t\tanimation = {},\n\t\twrapper, animate, distance;\n\n\t// Save & Show\n\t$.effects.save( el, props );\n\tel.show();\n\n\t// Create Wrapper\n\twrapper = $.effects.createWrapper( el ).css({\n\t\toverflow: \"hidden\"\n\t});\n\tanimate = ( el[0].tagName === \"IMG\" ) ? wrapper : el;\n\tdistance = animate[ size ]();\n\n\t// Shift\n\tif ( show ) {\n\t\tanimate.css( size, 0 );\n\t\tanimate.css( position, distance / 2 );\n\t}\n\n\t// Create Animation Object:\n\tanimation[ size ] = show ? distance : 0;\n\tanimation[ position ] = show ? 0 : distance / 2;\n\n\t// Animate\n\tanimate.animate( animation, {\n\t\tqueue: false,\n\t\tduration: o.duration,\n\t\teasing: o.easing,\n\t\tcomplete: function() {\n\t\t\tif ( !show ) {\n\t\t\t\tel.hide();\n\t\t\t}\n\t\t\t$.effects.restore( el, props );\n\t\t\t$.effects.removeWrapper( el );\n\t\t\tdone();\n\t\t}\n\t});\n\n};\n\n\n/*!\n * jQuery UI Effects Drop 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/drop-effect/\n */\n\n\nvar effectDrop = $.effects.effect.drop = function( o, done ) {\n\n\tvar el = $( this ),\n\t\tprops = [ \"position\", \"top\", \"bottom\", \"left\", \"right\", \"opacity\", \"height\", \"width\" ],\n\t\tmode = $.effects.setMode( el, o.mode || \"hide\" ),\n\t\tshow = mode === \"show\",\n\t\tdirection = o.direction || \"left\",\n\t\tref = ( direction === \"up\" || direction === \"down\" ) ? \"top\" : \"left\",\n\t\tmotion = ( direction === \"up\" || direction === \"left\" ) ? \"pos\" : \"neg\",\n\t\tanimation = {\n\t\t\topacity: show ? 1 : 0\n\t\t},\n\t\tdistance;\n\n\t// Adjust\n\t$.effects.save( el, props );\n\tel.show();\n\t$.effects.createWrapper( el );\n\n\tdistance = o.distance || el[ ref === \"top\" ? \"outerHeight\" : \"outerWidth\" ]( true ) / 2;\n\n\tif ( show ) {\n\t\tel\n\t\t\t.css( \"opacity\", 0 )\n\t\t\t.css( ref, motion === \"pos\" ? -distance : distance );\n\t}\n\n\t// Animation\n\tanimation[ ref ] = ( show ?\n\t\t( motion === \"pos\" ? \"+=\" : \"-=\" ) :\n\t\t( motion === \"pos\" ? \"-=\" : \"+=\" ) ) +\n\t\tdistance;\n\n\t// Animate\n\tel.animate( animation, {\n\t\tqueue: false,\n\t\tduration: o.duration,\n\t\teasing: o.easing,\n\t\tcomplete: function() {\n\t\t\tif ( mode === \"hide\" ) {\n\t\t\t\tel.hide();\n\t\t\t}\n\t\t\t$.effects.restore( el, props );\n\t\t\t$.effects.removeWrapper( el );\n\t\t\tdone();\n\t\t}\n\t});\n};\n\n\n/*!\n * jQuery UI Effects Explode 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/explode-effect/\n */\n\n\nvar effectExplode = $.effects.effect.explode = function( o, done ) {\n\n\tvar rows = o.pieces ? Math.round( Math.sqrt( o.pieces ) ) : 3,\n\t\tcells = rows,\n\t\tel = $( this ),\n\t\tmode = $.effects.setMode( el, o.mode || \"hide\" ),\n\t\tshow = mode === \"show\",\n\n\t\t// show and then visibility:hidden the element before calculating offset\n\t\toffset = el.show().css( \"visibility\", \"hidden\" ).offset(),\n\n\t\t// width and height of a piece\n\t\twidth = Math.ceil( el.outerWidth() / cells ),\n\t\theight = Math.ceil( el.outerHeight() / rows ),\n\t\tpieces = [],\n\n\t\t// loop\n\t\ti, j, left, top, mx, my;\n\n\t// children animate complete:\n\tfunction childComplete() {\n\t\tpieces.push( this );\n\t\tif ( pieces.length === rows * cells ) {\n\t\t\tanimComplete();\n\t\t}\n\t}\n\n\t// clone the element for each row and cell.\n\tfor ( i = 0; i < rows ; i++ ) { // ===>\n\t\ttop = offset.top + i * height;\n\t\tmy = i - ( rows - 1 ) / 2 ;\n\n\t\tfor ( j = 0; j < cells ; j++ ) { // |||\n\t\t\tleft = offset.left + j * width;\n\t\t\tmx = j - ( cells - 1 ) / 2 ;\n\n\t\t\t// Create a clone of the now hidden main element that will be absolute positioned\n\t\t\t// within a wrapper div off the -left and -top equal to size of our pieces\n\t\t\tel\n\t\t\t\t.clone()\n\t\t\t\t.appendTo( \"body\" )\n\t\t\t\t.wrap( \"<div></div>\" )\n\t\t\t\t.css({\n\t\t\t\t\tposition: \"absolute\",\n\t\t\t\t\tvisibility: \"visible\",\n\t\t\t\t\tleft: -j * width,\n\t\t\t\t\ttop: -i * height\n\t\t\t\t})\n\n\t\t\t// select the wrapper - make it overflow: hidden and absolute positioned based on\n\t\t\t// where the original was located +left and +top equal to the size of pieces\n\t\t\t\t.parent()\n\t\t\t\t.addClass( \"ui-effects-explode\" )\n\t\t\t\t.css({\n\t\t\t\t\tposition: \"absolute\",\n\t\t\t\t\toverflow: \"hidden\",\n\t\t\t\t\twidth: width,\n\t\t\t\t\theight: height,\n\t\t\t\t\tleft: left + ( show ? mx * width : 0 ),\n\t\t\t\t\ttop: top + ( show ? my * height : 0 ),\n\t\t\t\t\topacity: show ? 0 : 1\n\t\t\t\t}).animate({\n\t\t\t\t\tleft: left + ( show ? 0 : mx * width ),\n\t\t\t\t\ttop: top + ( show ? 0 : my * height ),\n\t\t\t\t\topacity: show ? 1 : 0\n\t\t\t\t}, o.duration || 500, o.easing, childComplete );\n\t\t}\n\t}\n\n\tfunction animComplete() {\n\t\tel.css({\n\t\t\tvisibility: \"visible\"\n\t\t});\n\t\t$( pieces ).remove();\n\t\tif ( !show ) {\n\t\t\tel.hide();\n\t\t}\n\t\tdone();\n\t}\n};\n\n\n/*!\n * jQuery UI Effects Fade 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/fade-effect/\n */\n\n\nvar effectFade = $.effects.effect.fade = function( o, done ) {\n\tvar el = $( this ),\n\t\tmode = $.effects.setMode( el, o.mode || \"toggle\" );\n\n\tel.animate({\n\t\topacity: mode\n\t}, {\n\t\tqueue: false,\n\t\tduration: o.duration,\n\t\teasing: o.easing,\n\t\tcomplete: done\n\t});\n};\n\n\n/*!\n * jQuery UI Effects Fold 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/fold-effect/\n */\n\n\nvar effectFold = $.effects.effect.fold = function( o, done ) {\n\n\t// Create element\n\tvar el = $( this ),\n\t\tprops = [ \"position\", \"top\", \"bottom\", \"left\", \"right\", \"height\", \"width\" ],\n\t\tmode = $.effects.setMode( el, o.mode || \"hide\" ),\n\t\tshow = mode === \"show\",\n\t\thide = mode === \"hide\",\n\t\tsize = o.size || 15,\n\t\tpercent = /([0-9]+)%/.exec( size ),\n\t\thorizFirst = !!o.horizFirst,\n\t\twidthFirst = show !== horizFirst,\n\t\tref = widthFirst ? [ \"width\", \"height\" ] : [ \"height\", \"width\" ],\n\t\tduration = o.duration / 2,\n\t\twrapper, distance,\n\t\tanimation1 = {},\n\t\tanimation2 = {};\n\n\t$.effects.save( el, props );\n\tel.show();\n\n\t// Create Wrapper\n\twrapper = $.effects.createWrapper( el ).css({\n\t\toverflow: \"hidden\"\n\t});\n\tdistance = widthFirst ?\n\t\t[ wrapper.width(), wrapper.height() ] :\n\t\t[ wrapper.height(), wrapper.width() ];\n\n\tif ( percent ) {\n\t\tsize = parseInt( percent[ 1 ], 10 ) / 100 * distance[ hide ? 0 : 1 ];\n\t}\n\tif ( show ) {\n\t\twrapper.css( horizFirst ? {\n\t\t\theight: 0,\n\t\t\twidth: size\n\t\t} : {\n\t\t\theight: size,\n\t\t\twidth: 0\n\t\t});\n\t}\n\n\t// Animation\n\tanimation1[ ref[ 0 ] ] = show ? distance[ 0 ] : size;\n\tanimation2[ ref[ 1 ] ] = show ? distance[ 1 ] : 0;\n\n\t// Animate\n\twrapper\n\t\t.animate( animation1, duration, o.easing )\n\t\t.animate( animation2, duration, o.easing, function() {\n\t\t\tif ( hide ) {\n\t\t\t\tel.hide();\n\t\t\t}\n\t\t\t$.effects.restore( el, props );\n\t\t\t$.effects.removeWrapper( el );\n\t\t\tdone();\n\t\t});\n\n};\n\n\n/*!\n * jQuery UI Effects Highlight 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/highlight-effect/\n */\n\n\nvar effectHighlight = $.effects.effect.highlight = function( o, done ) {\n\tvar elem = $( this ),\n\t\tprops = [ \"backgroundImage\", \"backgroundColor\", \"opacity\" ],\n\t\tmode = $.effects.setMode( elem, o.mode || \"show\" ),\n\t\tanimation = {\n\t\t\tbackgroundColor: elem.css( \"backgroundColor\" )\n\t\t};\n\n\tif (mode === \"hide\") {\n\t\tanimation.opacity = 0;\n\t}\n\n\t$.effects.save( elem, props );\n\n\telem\n\t\t.show()\n\t\t.css({\n\t\t\tbackgroundImage: \"none\",\n\t\t\tbackgroundColor: o.color || \"#ffff99\"\n\t\t})\n\t\t.animate( animation, {\n\t\t\tqueue: false,\n\t\t\tduration: o.duration,\n\t\t\teasing: o.easing,\n\t\t\tcomplete: function() {\n\t\t\t\tif ( mode === \"hide\" ) {\n\t\t\t\t\telem.hide();\n\t\t\t\t}\n\t\t\t\t$.effects.restore( elem, props );\n\t\t\t\tdone();\n\t\t\t}\n\t\t});\n};\n\n\n/*!\n * jQuery UI Effects Size 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/size-effect/\n */\n\n\nvar effectSize = $.effects.effect.size = function( o, done ) {\n\n\t// Create element\n\tvar original, baseline, factor,\n\t\tel = $( this ),\n\t\tprops0 = [ \"position\", \"top\", \"bottom\", \"left\", \"right\", \"width\", \"height\", \"overflow\", \"opacity\" ],\n\n\t\t// Always restore\n\t\tprops1 = [ \"position\", \"top\", \"bottom\", \"left\", \"right\", \"overflow\", \"opacity\" ],\n\n\t\t// Copy for children\n\t\tprops2 = [ \"width\", \"height\", \"overflow\" ],\n\t\tcProps = [ \"fontSize\" ],\n\t\tvProps = [ \"borderTopWidth\", \"borderBottomWidth\", \"paddingTop\", \"paddingBottom\" ],\n\t\thProps = [ \"borderLeftWidth\", \"borderRightWidth\", \"paddingLeft\", \"paddingRight\" ],\n\n\t\t// Set options\n\t\tmode = $.effects.setMode( el, o.mode || \"effect\" ),\n\t\trestore = o.restore || mode !== \"effect\",\n\t\tscale = o.scale || \"both\",\n\t\torigin = o.origin || [ \"middle\", \"center\" ],\n\t\tposition = el.css( \"position\" ),\n\t\tprops = restore ? props0 : props1,\n\t\tzero = {\n\t\t\theight: 0,\n\t\t\twidth: 0,\n\t\t\touterHeight: 0,\n\t\t\touterWidth: 0\n\t\t};\n\n\tif ( mode === \"show\" ) {\n\t\tel.show();\n\t}\n\toriginal = {\n\t\theight: el.height(),\n\t\twidth: el.width(),\n\t\touterHeight: el.outerHeight(),\n\t\touterWidth: el.outerWidth()\n\t};\n\n\tif ( o.mode === \"toggle\" && mode === \"show\" ) {\n\t\tel.from = o.to || zero;\n\t\tel.to = o.from || original;\n\t} else {\n\t\tel.from = o.from || ( mode === \"show\" ? zero : original );\n\t\tel.to = o.to || ( mode === \"hide\" ? zero : original );\n\t}\n\n\t// Set scaling factor\n\tfactor = {\n\t\tfrom: {\n\t\t\ty: el.from.height / original.height,\n\t\t\tx: el.from.width / original.width\n\t\t},\n\t\tto: {\n\t\t\ty: el.to.height / original.height,\n\t\t\tx: el.to.width / original.width\n\t\t}\n\t};\n\n\t// Scale the css box\n\tif ( scale === \"box\" || scale === \"both\" ) {\n\n\t\t// Vertical props scaling\n\t\tif ( factor.from.y !== factor.to.y ) {\n\t\t\tprops = props.concat( vProps );\n\t\t\tel.from = $.effects.setTransition( el, vProps, factor.from.y, el.from );\n\t\t\tel.to = $.effects.setTransition( el, vProps, factor.to.y, el.to );\n\t\t}\n\n\t\t// Horizontal props scaling\n\t\tif ( factor.from.x !== factor.to.x ) {\n\t\t\tprops = props.concat( hProps );\n\t\t\tel.from = $.effects.setTransition( el, hProps, factor.from.x, el.from );\n\t\t\tel.to = $.effects.setTransition( el, hProps, factor.to.x, el.to );\n\t\t}\n\t}\n\n\t// Scale the content\n\tif ( scale === \"content\" || scale === \"both\" ) {\n\n\t\t// Vertical props scaling\n\t\tif ( factor.from.y !== factor.to.y ) {\n\t\t\tprops = props.concat( cProps ).concat( props2 );\n\t\t\tel.from = $.effects.setTransition( el, cProps, factor.from.y, el.from );\n\t\t\tel.to = $.effects.setTransition( el, cProps, factor.to.y, el.to );\n\t\t}\n\t}\n\n\t$.effects.save( el, props );\n\tel.show();\n\t$.effects.createWrapper( el );\n\tel.css( \"overflow\", \"hidden\" ).css( el.from );\n\n\t// Adjust\n\tif (origin) { // Calculate baseline shifts\n\t\tbaseline = $.effects.getBaseline( origin, original );\n\t\tel.from.top = ( original.outerHeight - el.outerHeight() ) * baseline.y;\n\t\tel.from.left = ( original.outerWidth - el.outerWidth() ) * baseline.x;\n\t\tel.to.top = ( original.outerHeight - el.to.outerHeight ) * baseline.y;\n\t\tel.to.left = ( original.outerWidth - el.to.outerWidth ) * baseline.x;\n\t}\n\tel.css( el.from ); // set top & left\n\n\t// Animate\n\tif ( scale === \"content\" || scale === \"both\" ) { // Scale the children\n\n\t\t// Add margins/font-size\n\t\tvProps = vProps.concat([ \"marginTop\", \"marginBottom\" ]).concat(cProps);\n\t\thProps = hProps.concat([ \"marginLeft\", \"marginRight\" ]);\n\t\tprops2 = props0.concat(vProps).concat(hProps);\n\n\t\tel.find( \"*[width]\" ).each( function() {\n\t\t\tvar child = $( this ),\n\t\t\t\tc_original = {\n\t\t\t\t\theight: child.height(),\n\t\t\t\t\twidth: child.width(),\n\t\t\t\t\touterHeight: child.outerHeight(),\n\t\t\t\t\touterWidth: child.outerWidth()\n\t\t\t\t};\n\t\t\tif (restore) {\n\t\t\t\t$.effects.save(child, props2);\n\t\t\t}\n\n\t\t\tchild.from = {\n\t\t\t\theight: c_original.height * factor.from.y,\n\t\t\t\twidth: c_original.width * factor.from.x,\n\t\t\t\touterHeight: c_original.outerHeight * factor.from.y,\n\t\t\t\touterWidth: c_original.outerWidth * factor.from.x\n\t\t\t};\n\t\t\tchild.to = {\n\t\t\t\theight: c_original.height * factor.to.y,\n\t\t\t\twidth: c_original.width * factor.to.x,\n\t\t\t\touterHeight: c_original.height * factor.to.y,\n\t\t\t\touterWidth: c_original.width * factor.to.x\n\t\t\t};\n\n\t\t\t// Vertical props scaling\n\t\t\tif ( factor.from.y !== factor.to.y ) {\n\t\t\t\tchild.from = $.effects.setTransition( child, vProps, factor.from.y, child.from );\n\t\t\t\tchild.to = $.effects.setTransition( child, vProps, factor.to.y, child.to );\n\t\t\t}\n\n\t\t\t// Horizontal props scaling\n\t\t\tif ( factor.from.x !== factor.to.x ) {\n\t\t\t\tchild.from = $.effects.setTransition( child, hProps, factor.from.x, child.from );\n\t\t\t\tchild.to = $.effects.setTransition( child, hProps, factor.to.x, child.to );\n\t\t\t}\n\n\t\t\t// Animate children\n\t\t\tchild.css( child.from );\n\t\t\tchild.animate( child.to, o.duration, o.easing, function() {\n\n\t\t\t\t// Restore children\n\t\t\t\tif ( restore ) {\n\t\t\t\t\t$.effects.restore( child, props2 );\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\t// Animate\n\tel.animate( el.to, {\n\t\tqueue: false,\n\t\tduration: o.duration,\n\t\teasing: o.easing,\n\t\tcomplete: function() {\n\t\t\tif ( el.to.opacity === 0 ) {\n\t\t\t\tel.css( \"opacity\", el.from.opacity );\n\t\t\t}\n\t\t\tif ( mode === \"hide\" ) {\n\t\t\t\tel.hide();\n\t\t\t}\n\t\t\t$.effects.restore( el, props );\n\t\t\tif ( !restore ) {\n\n\t\t\t\t// we need to calculate our new positioning based on the scaling\n\t\t\t\tif ( position === \"static\" ) {\n\t\t\t\t\tel.css({\n\t\t\t\t\t\tposition: \"relative\",\n\t\t\t\t\t\ttop: el.to.top,\n\t\t\t\t\t\tleft: el.to.left\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t$.each([ \"top\", \"left\" ], function( idx, pos ) {\n\t\t\t\t\t\tel.css( pos, function( _, str ) {\n\t\t\t\t\t\t\tvar val = parseInt( str, 10 ),\n\t\t\t\t\t\t\t\ttoRef = idx ? el.to.left : el.to.top;\n\n\t\t\t\t\t\t\t// if original was \"auto\", recalculate the new value from wrapper\n\t\t\t\t\t\t\tif ( str === \"auto\" ) {\n\t\t\t\t\t\t\t\treturn toRef + \"px\";\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn val + toRef + \"px\";\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$.effects.removeWrapper( el );\n\t\t\tdone();\n\t\t}\n\t});\n\n};\n\n\n/*!\n * jQuery UI Effects Scale 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/scale-effect/\n */\n\n\nvar effectScale = $.effects.effect.scale = function( o, done ) {\n\n\t// Create element\n\tvar el = $( this ),\n\t\toptions = $.extend( true, {}, o ),\n\t\tmode = $.effects.setMode( el, o.mode || \"effect\" ),\n\t\tpercent = parseInt( o.percent, 10 ) ||\n\t\t\t( parseInt( o.percent, 10 ) === 0 ? 0 : ( mode === \"hide\" ? 0 : 100 ) ),\n\t\tdirection = o.direction || \"both\",\n\t\torigin = o.origin,\n\t\toriginal = {\n\t\t\theight: el.height(),\n\t\t\twidth: el.width(),\n\t\t\touterHeight: el.outerHeight(),\n\t\t\touterWidth: el.outerWidth()\n\t\t},\n\t\tfactor = {\n\t\t\ty: direction !== \"horizontal\" ? (percent / 100) : 1,\n\t\t\tx: direction !== \"vertical\" ? (percent / 100) : 1\n\t\t};\n\n\t// We are going to pass this effect to the size effect:\n\toptions.effect = \"size\";\n\toptions.queue = false;\n\toptions.complete = done;\n\n\t// Set default origin and restore for show/hide\n\tif ( mode !== \"effect\" ) {\n\t\toptions.origin = origin || [ \"middle\", \"center\" ];\n\t\toptions.restore = true;\n\t}\n\n\toptions.from = o.from || ( mode === \"show\" ? {\n\t\theight: 0,\n\t\twidth: 0,\n\t\touterHeight: 0,\n\t\touterWidth: 0\n\t} : original );\n\toptions.to = {\n\t\theight: original.height * factor.y,\n\t\twidth: original.width * factor.x,\n\t\touterHeight: original.outerHeight * factor.y,\n\t\touterWidth: original.outerWidth * factor.x\n\t};\n\n\t// Fade option to support puff\n\tif ( options.fade ) {\n\t\tif ( mode === \"show\" ) {\n\t\t\toptions.from.opacity = 0;\n\t\t\toptions.to.opacity = 1;\n\t\t}\n\t\tif ( mode === \"hide\" ) {\n\t\t\toptions.from.opacity = 1;\n\t\t\toptions.to.opacity = 0;\n\t\t}\n\t}\n\n\t// Animate\n\tel.effect( options );\n\n};\n\n\n/*!\n * jQuery UI Effects Puff 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/puff-effect/\n */\n\n\nvar effectPuff = $.effects.effect.puff = function( o, done ) {\n\tvar elem = $( this ),\n\t\tmode = $.effects.setMode( elem, o.mode || \"hide\" ),\n\t\thide = mode === \"hide\",\n\t\tpercent = parseInt( o.percent, 10 ) || 150,\n\t\tfactor = percent / 100,\n\t\toriginal = {\n\t\t\theight: elem.height(),\n\t\t\twidth: elem.width(),\n\t\t\touterHeight: elem.outerHeight(),\n\t\t\touterWidth: elem.outerWidth()\n\t\t};\n\n\t$.extend( o, {\n\t\teffect: \"scale\",\n\t\tqueue: false,\n\t\tfade: true,\n\t\tmode: mode,\n\t\tcomplete: done,\n\t\tpercent: hide ? percent : 100,\n\t\tfrom: hide ?\n\t\t\toriginal :\n\t\t\t{\n\t\t\t\theight: original.height * factor,\n\t\t\t\twidth: original.width * factor,\n\t\t\t\touterHeight: original.outerHeight * factor,\n\t\t\t\touterWidth: original.outerWidth * factor\n\t\t\t}\n\t});\n\n\telem.effect( o );\n};\n\n\n/*!\n * jQuery UI Effects Pulsate 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/pulsate-effect/\n */\n\n\nvar effectPulsate = $.effects.effect.pulsate = function( o, done ) {\n\tvar elem = $( this ),\n\t\tmode = $.effects.setMode( elem, o.mode || \"show\" ),\n\t\tshow = mode === \"show\",\n\t\thide = mode === \"hide\",\n\t\tshowhide = ( show || mode === \"hide\" ),\n\n\t\t// showing or hiding leaves of the \"last\" animation\n\t\tanims = ( ( o.times || 5 ) * 2 ) + ( showhide ? 1 : 0 ),\n\t\tduration = o.duration / anims,\n\t\tanimateTo = 0,\n\t\tqueue = elem.queue(),\n\t\tqueuelen = queue.length,\n\t\ti;\n\n\tif ( show || !elem.is(\":visible\")) {\n\t\telem.css( \"opacity\", 0 ).show();\n\t\tanimateTo = 1;\n\t}\n\n\t// anims - 1 opacity \"toggles\"\n\tfor ( i = 1; i < anims; i++ ) {\n\t\telem.animate({\n\t\t\topacity: animateTo\n\t\t}, duration, o.easing );\n\t\tanimateTo = 1 - animateTo;\n\t}\n\n\telem.animate({\n\t\topacity: animateTo\n\t}, duration, o.easing);\n\n\telem.queue(function() {\n\t\tif ( hide ) {\n\t\t\telem.hide();\n\t\t}\n\t\tdone();\n\t});\n\n\t// We just queued up \"anims\" animations, we need to put them next in the queue\n\tif ( queuelen > 1 ) {\n\t\tqueue.splice.apply( queue,\n\t\t\t[ 1, 0 ].concat( queue.splice( queuelen, anims + 1 ) ) );\n\t}\n\telem.dequeue();\n};\n\n\n/*!\n * jQuery UI Effects Shake 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/shake-effect/\n */\n\n\nvar effectShake = $.effects.effect.shake = function( o, done ) {\n\n\tvar el = $( this ),\n\t\tprops = [ \"position\", \"top\", \"bottom\", \"left\", \"right\", \"height\", \"width\" ],\n\t\tmode = $.effects.setMode( el, o.mode || \"effect\" ),\n\t\tdirection = o.direction || \"left\",\n\t\tdistance = o.distance || 20,\n\t\ttimes = o.times || 3,\n\t\tanims = times * 2 + 1,\n\t\tspeed = Math.round( o.duration / anims ),\n\t\tref = (direction === \"up\" || direction === \"down\") ? \"top\" : \"left\",\n\t\tpositiveMotion = (direction === \"up\" || direction === \"left\"),\n\t\tanimation = {},\n\t\tanimation1 = {},\n\t\tanimation2 = {},\n\t\ti,\n\n\t\t// we will need to re-assemble the queue to stack our animations in place\n\t\tqueue = el.queue(),\n\t\tqueuelen = queue.length;\n\n\t$.effects.save( el, props );\n\tel.show();\n\t$.effects.createWrapper( el );\n\n\t// Animation\n\tanimation[ ref ] = ( positiveMotion ? \"-=\" : \"+=\" ) + distance;\n\tanimation1[ ref ] = ( positiveMotion ? \"+=\" : \"-=\" ) + distance * 2;\n\tanimation2[ ref ] = ( positiveMotion ? \"-=\" : \"+=\" ) + distance * 2;\n\n\t// Animate\n\tel.animate( animation, speed, o.easing );\n\n\t// Shakes\n\tfor ( i = 1; i < times; i++ ) {\n\t\tel.animate( animation1, speed, o.easing ).animate( animation2, speed, o.easing );\n\t}\n\tel\n\t\t.animate( animation1, speed, o.easing )\n\t\t.animate( animation, speed / 2, o.easing )\n\t\t.queue(function() {\n\t\t\tif ( mode === \"hide\" ) {\n\t\t\t\tel.hide();\n\t\t\t}\n\t\t\t$.effects.restore( el, props );\n\t\t\t$.effects.removeWrapper( el );\n\t\t\tdone();\n\t\t});\n\n\t// inject all the animations we just queued to be first in line (after \"inprogress\")\n\tif ( queuelen > 1) {\n\t\tqueue.splice.apply( queue,\n\t\t\t[ 1, 0 ].concat( queue.splice( queuelen, anims + 1 ) ) );\n\t}\n\tel.dequeue();\n\n};\n\n\n/*!\n * jQuery UI Effects Slide 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/slide-effect/\n */\n\n\nvar effectSlide = $.effects.effect.slide = function( o, done ) {\n\n\t// Create element\n\tvar el = $( this ),\n\t\tprops = [ \"position\", \"top\", \"bottom\", \"left\", \"right\", \"width\", \"height\" ],\n\t\tmode = $.effects.setMode( el, o.mode || \"show\" ),\n\t\tshow = mode === \"show\",\n\t\tdirection = o.direction || \"left\",\n\t\tref = (direction === \"up\" || direction === \"down\") ? \"top\" : \"left\",\n\t\tpositiveMotion = (direction === \"up\" || direction === \"left\"),\n\t\tdistance,\n\t\tanimation = {};\n\n\t// Adjust\n\t$.effects.save( el, props );\n\tel.show();\n\tdistance = o.distance || el[ ref === \"top\" ? \"outerHeight\" : \"outerWidth\" ]( true );\n\n\t$.effects.createWrapper( el ).css({\n\t\toverflow: \"hidden\"\n\t});\n\n\tif ( show ) {\n\t\tel.css( ref, positiveMotion ? (isNaN(distance) ? \"-\" + distance : -distance) : distance );\n\t}\n\n\t// Animation\n\tanimation[ ref ] = ( show ?\n\t\t( positiveMotion ? \"+=\" : \"-=\") :\n\t\t( positiveMotion ? \"-=\" : \"+=\")) +\n\t\tdistance;\n\n\t// Animate\n\tel.animate( animation, {\n\t\tqueue: false,\n\t\tduration: o.duration,\n\t\teasing: o.easing,\n\t\tcomplete: function() {\n\t\t\tif ( mode === \"hide\" ) {\n\t\t\t\tel.hide();\n\t\t\t}\n\t\t\t$.effects.restore( el, props );\n\t\t\t$.effects.removeWrapper( el );\n\t\t\tdone();\n\t\t}\n\t});\n};\n\n\n/*!\n * jQuery UI Effects Transfer 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/transfer-effect/\n */\n\n\nvar effectTransfer = $.effects.effect.transfer = function( o, done ) {\n\tvar elem = $( this ),\n\t\ttarget = $( o.to ),\n\t\ttargetFixed = target.css( \"position\" ) === \"fixed\",\n\t\tbody = $(\"body\"),\n\t\tfixTop = targetFixed ? body.scrollTop() : 0,\n\t\tfixLeft = targetFixed ? body.scrollLeft() : 0,\n\t\tendPosition = target.offset(),\n\t\tanimation = {\n\t\t\ttop: endPosition.top - fixTop,\n\t\t\tleft: endPosition.left - fixLeft,\n\t\t\theight: target.innerHeight(),\n\t\t\twidth: target.innerWidth()\n\t\t},\n\t\tstartPosition = elem.offset(),\n\t\ttransfer = $( \"<div class='ui-effects-transfer'></div>\" )\n\t\t\t.appendTo( document.body )\n\t\t\t.addClass( o.className )\n\t\t\t.css({\n\t\t\t\ttop: startPosition.top - fixTop,\n\t\t\t\tleft: startPosition.left - fixLeft,\n\t\t\t\theight: elem.innerHeight(),\n\t\t\t\twidth: elem.innerWidth(),\n\t\t\t\tposition: targetFixed ? \"fixed\" : \"absolute\"\n\t\t\t})\n\t\t\t.animate( animation, o.duration, o.easing, function() {\n\t\t\t\ttransfer.remove();\n\t\t\t\tdone();\n\t\t\t});\n};\n\n\n/*!\n * jQuery UI Progressbar 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/progressbar/\n */\n\n\nvar progressbar = $.widget( \"ui.progressbar\", {\n\tversion: \"1.11.4\",\n\toptions: {\n\t\tmax: 100,\n\t\tvalue: 0,\n\n\t\tchange: null,\n\t\tcomplete: null\n\t},\n\n\tmin: 0,\n\n\t_create: function() {\n\t\t// Constrain initial value\n\t\tthis.oldValue = this.options.value = this._constrainedValue();\n\n\t\tthis.element\n\t\t\t.addClass( \"ui-progressbar ui-widget ui-widget-content ui-corner-all\" )\n\t\t\t.attr({\n\t\t\t\t// Only set static values, aria-valuenow and aria-valuemax are\n\t\t\t\t// set inside _refreshValue()\n\t\t\t\trole: \"progressbar\",\n\t\t\t\t\"aria-valuemin\": this.min\n\t\t\t});\n\n\t\tthis.valueDiv = $( \"<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>\" )\n\t\t\t.appendTo( this.element );\n\n\t\tthis._refreshValue();\n\t},\n\n\t_destroy: function() {\n\t\tthis.element\n\t\t\t.removeClass( \"ui-progressbar ui-widget ui-widget-content ui-corner-all\" )\n\t\t\t.removeAttr( \"role\" )\n\t\t\t.removeAttr( \"aria-valuemin\" )\n\t\t\t.removeAttr( \"aria-valuemax\" )\n\t\t\t.removeAttr( \"aria-valuenow\" );\n\n\t\tthis.valueDiv.remove();\n\t},\n\n\tvalue: function( newValue ) {\n\t\tif ( newValue === undefined ) {\n\t\t\treturn this.options.value;\n\t\t}\n\n\t\tthis.options.value = this._constrainedValue( newValue );\n\t\tthis._refreshValue();\n\t},\n\n\t_constrainedValue: function( newValue ) {\n\t\tif ( newValue === undefined ) {\n\t\t\tnewValue = this.options.value;\n\t\t}\n\n\t\tthis.indeterminate = newValue === false;\n\n\t\t// sanitize value\n\t\tif ( typeof newValue !== \"number\" ) {\n\t\t\tnewValue = 0;\n\t\t}\n\n\t\treturn this.indeterminate ? false :\n\t\t\tMath.min( this.options.max, Math.max( this.min, newValue ) );\n\t},\n\n\t_setOptions: function( options ) {\n\t\t// Ensure \"value\" option is set after other values (like max)\n\t\tvar value = options.value;\n\t\tdelete options.value;\n\n\t\tthis._super( options );\n\n\t\tthis.options.value = this._constrainedValue( value );\n\t\tthis._refreshValue();\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tif ( key === \"max\" ) {\n\t\t\t// Don't allow a max less than min\n\t\t\tvalue = Math.max( this.min, value );\n\t\t}\n\t\tif ( key === \"disabled\" ) {\n\t\t\tthis.element\n\t\t\t\t.toggleClass( \"ui-state-disabled\", !!value )\n\t\t\t\t.attr( \"aria-disabled\", value );\n\t\t}\n\t\tthis._super( key, value );\n\t},\n\n\t_percentage: function() {\n\t\treturn this.indeterminate ? 100 : 100 * ( this.options.value - this.min ) / ( this.options.max - this.min );\n\t},\n\n\t_refreshValue: function() {\n\t\tvar value = this.options.value,\n\t\t\tpercentage = this._percentage();\n\n\t\tthis.valueDiv\n\t\t\t.toggle( this.indeterminate || value > this.min )\n\t\t\t.toggleClass( \"ui-corner-right\", value === this.options.max )\n\t\t\t.width( percentage.toFixed(0) + \"%\" );\n\n\t\tthis.element.toggleClass( \"ui-progressbar-indeterminate\", this.indeterminate );\n\n\t\tif ( this.indeterminate ) {\n\t\t\tthis.element.removeAttr( \"aria-valuenow\" );\n\t\t\tif ( !this.overlayDiv ) {\n\t\t\t\tthis.overlayDiv = $( \"<div class='ui-progressbar-overlay'></div>\" ).appendTo( this.valueDiv );\n\t\t\t}\n\t\t} else {\n\t\t\tthis.element.attr({\n\t\t\t\t\"aria-valuemax\": this.options.max,\n\t\t\t\t\"aria-valuenow\": value\n\t\t\t});\n\t\t\tif ( this.overlayDiv ) {\n\t\t\t\tthis.overlayDiv.remove();\n\t\t\t\tthis.overlayDiv = null;\n\t\t\t}\n\t\t}\n\n\t\tif ( this.oldValue !== value ) {\n\t\t\tthis.oldValue = value;\n\t\t\tthis._trigger( \"change\" );\n\t\t}\n\t\tif ( value === this.options.max ) {\n\t\t\tthis._trigger( \"complete\" );\n\t\t}\n\t}\n});\n\n\n/*!\n * jQuery UI Selectable 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/selectable/\n */\n\n\nvar selectable = $.widget(\"ui.selectable\", $.ui.mouse, {\n\tversion: \"1.11.4\",\n\toptions: {\n\t\tappendTo: \"body\",\n\t\tautoRefresh: true,\n\t\tdistance: 0,\n\t\tfilter: \"*\",\n\t\ttolerance: \"touch\",\n\n\t\t// callbacks\n\t\tselected: null,\n\t\tselecting: null,\n\t\tstart: null,\n\t\tstop: null,\n\t\tunselected: null,\n\t\tunselecting: null\n\t},\n\t_create: function() {\n\t\tvar selectees,\n\t\t\tthat = this;\n\n\t\tthis.element.addClass(\"ui-selectable\");\n\n\t\tthis.dragged = false;\n\n\t\t// cache selectee children based on filter\n\t\tthis.refresh = function() {\n\t\t\tselectees = $(that.options.filter, that.element[0]);\n\t\t\tselectees.addClass(\"ui-selectee\");\n\t\t\tselectees.each(function() {\n\t\t\t\tvar $this = $(this),\n\t\t\t\t\tpos = $this.offset();\n\t\t\t\t$.data(this, \"selectable-item\", {\n\t\t\t\t\telement: this,\n\t\t\t\t\t$element: $this,\n\t\t\t\t\tleft: pos.left,\n\t\t\t\t\ttop: pos.top,\n\t\t\t\t\tright: pos.left + $this.outerWidth(),\n\t\t\t\t\tbottom: pos.top + $this.outerHeight(),\n\t\t\t\t\tstartselected: false,\n\t\t\t\t\tselected: $this.hasClass(\"ui-selected\"),\n\t\t\t\t\tselecting: $this.hasClass(\"ui-selecting\"),\n\t\t\t\t\tunselecting: $this.hasClass(\"ui-unselecting\")\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\t\tthis.refresh();\n\n\t\tthis.selectees = selectees.addClass(\"ui-selectee\");\n\n\t\tthis._mouseInit();\n\n\t\tthis.helper = $(\"<div class='ui-selectable-helper'></div>\");\n\t},\n\n\t_destroy: function() {\n\t\tthis.selectees\n\t\t\t.removeClass(\"ui-selectee\")\n\t\t\t.removeData(\"selectable-item\");\n\t\tthis.element\n\t\t\t.removeClass(\"ui-selectable ui-selectable-disabled\");\n\t\tthis._mouseDestroy();\n\t},\n\n\t_mouseStart: function(event) {\n\t\tvar that = this,\n\t\t\toptions = this.options;\n\n\t\tthis.opos = [ event.pageX, event.pageY ];\n\n\t\tif (this.options.disabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.selectees = $(options.filter, this.element[0]);\n\n\t\tthis._trigger(\"start\", event);\n\n\t\t$(options.appendTo).append(this.helper);\n\t\t// position helper (lasso)\n\t\tthis.helper.css({\n\t\t\t\"left\": event.pageX,\n\t\t\t\"top\": event.pageY,\n\t\t\t\"width\": 0,\n\t\t\t\"height\": 0\n\t\t});\n\n\t\tif (options.autoRefresh) {\n\t\t\tthis.refresh();\n\t\t}\n\n\t\tthis.selectees.filter(\".ui-selected\").each(function() {\n\t\t\tvar selectee = $.data(this, \"selectable-item\");\n\t\t\tselectee.startselected = true;\n\t\t\tif (!event.metaKey && !event.ctrlKey) {\n\t\t\t\tselectee.$element.removeClass(\"ui-selected\");\n\t\t\t\tselectee.selected = false;\n\t\t\t\tselectee.$element.addClass(\"ui-unselecting\");\n\t\t\t\tselectee.unselecting = true;\n\t\t\t\t// selectable UNSELECTING callback\n\t\t\t\tthat._trigger(\"unselecting\", event, {\n\t\t\t\t\tunselecting: selectee.element\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\t$(event.target).parents().addBack().each(function() {\n\t\t\tvar doSelect,\n\t\t\t\tselectee = $.data(this, \"selectable-item\");\n\t\t\tif (selectee) {\n\t\t\t\tdoSelect = (!event.metaKey && !event.ctrlKey) || !selectee.$element.hasClass(\"ui-selected\");\n\t\t\t\tselectee.$element\n\t\t\t\t\t.removeClass(doSelect ? \"ui-unselecting\" : \"ui-selected\")\n\t\t\t\t\t.addClass(doSelect ? \"ui-selecting\" : \"ui-unselecting\");\n\t\t\t\tselectee.unselecting = !doSelect;\n\t\t\t\tselectee.selecting = doSelect;\n\t\t\t\tselectee.selected = doSelect;\n\t\t\t\t// selectable (UN)SELECTING callback\n\t\t\t\tif (doSelect) {\n\t\t\t\t\tthat._trigger(\"selecting\", event, {\n\t\t\t\t\t\tselecting: selectee.element\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthat._trigger(\"unselecting\", event, {\n\t\t\t\t\t\tunselecting: selectee.element\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\n\t},\n\n\t_mouseDrag: function(event) {\n\n\t\tthis.dragged = true;\n\n\t\tif (this.options.disabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar tmp,\n\t\t\tthat = this,\n\t\t\toptions = this.options,\n\t\t\tx1 = this.opos[0],\n\t\t\ty1 = this.opos[1],\n\t\t\tx2 = event.pageX,\n\t\t\ty2 = event.pageY;\n\n\t\tif (x1 > x2) { tmp = x2; x2 = x1; x1 = tmp; }\n\t\tif (y1 > y2) { tmp = y2; y2 = y1; y1 = tmp; }\n\t\tthis.helper.css({ left: x1, top: y1, width: x2 - x1, height: y2 - y1 });\n\n\t\tthis.selectees.each(function() {\n\t\t\tvar selectee = $.data(this, \"selectable-item\"),\n\t\t\t\thit = false;\n\n\t\t\t//prevent helper from being selected if appendTo: selectable\n\t\t\tif (!selectee || selectee.element === that.element[0]) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (options.tolerance === \"touch\") {\n\t\t\t\thit = ( !(selectee.left > x2 || selectee.right < x1 || selectee.top > y2 || selectee.bottom < y1) );\n\t\t\t} else if (options.tolerance === \"fit\") {\n\t\t\t\thit = (selectee.left > x1 && selectee.right < x2 && selectee.top > y1 && selectee.bottom < y2);\n\t\t\t}\n\n\t\t\tif (hit) {\n\t\t\t\t// SELECT\n\t\t\t\tif (selectee.selected) {\n\t\t\t\t\tselectee.$element.removeClass(\"ui-selected\");\n\t\t\t\t\tselectee.selected = false;\n\t\t\t\t}\n\t\t\t\tif (selectee.unselecting) {\n\t\t\t\t\tselectee.$element.removeClass(\"ui-unselecting\");\n\t\t\t\t\tselectee.unselecting = false;\n\t\t\t\t}\n\t\t\t\tif (!selectee.selecting) {\n\t\t\t\t\tselectee.$element.addClass(\"ui-selecting\");\n\t\t\t\t\tselectee.selecting = true;\n\t\t\t\t\t// selectable SELECTING callback\n\t\t\t\t\tthat._trigger(\"selecting\", event, {\n\t\t\t\t\t\tselecting: selectee.element\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// UNSELECT\n\t\t\t\tif (selectee.selecting) {\n\t\t\t\t\tif ((event.metaKey || event.ctrlKey) && selectee.startselected) {\n\t\t\t\t\t\tselectee.$element.removeClass(\"ui-selecting\");\n\t\t\t\t\t\tselectee.selecting = false;\n\t\t\t\t\t\tselectee.$element.addClass(\"ui-selected\");\n\t\t\t\t\t\tselectee.selected = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tselectee.$element.removeClass(\"ui-selecting\");\n\t\t\t\t\t\tselectee.selecting = false;\n\t\t\t\t\t\tif (selectee.startselected) {\n\t\t\t\t\t\t\tselectee.$element.addClass(\"ui-unselecting\");\n\t\t\t\t\t\t\tselectee.unselecting = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// selectable UNSELECTING callback\n\t\t\t\t\t\tthat._trigger(\"unselecting\", event, {\n\t\t\t\t\t\t\tunselecting: selectee.element\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (selectee.selected) {\n\t\t\t\t\tif (!event.metaKey && !event.ctrlKey && !selectee.startselected) {\n\t\t\t\t\t\tselectee.$element.removeClass(\"ui-selected\");\n\t\t\t\t\t\tselectee.selected = false;\n\n\t\t\t\t\t\tselectee.$element.addClass(\"ui-unselecting\");\n\t\t\t\t\t\tselectee.unselecting = true;\n\t\t\t\t\t\t// selectable UNSELECTING callback\n\t\t\t\t\t\tthat._trigger(\"unselecting\", event, {\n\t\t\t\t\t\t\tunselecting: selectee.element\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn false;\n\t},\n\n\t_mouseStop: function(event) {\n\t\tvar that = this;\n\n\t\tthis.dragged = false;\n\n\t\t$(\".ui-unselecting\", this.element[0]).each(function() {\n\t\t\tvar selectee = $.data(this, \"selectable-item\");\n\t\t\tselectee.$element.removeClass(\"ui-unselecting\");\n\t\t\tselectee.unselecting = false;\n\t\t\tselectee.startselected = false;\n\t\t\tthat._trigger(\"unselected\", event, {\n\t\t\t\tunselected: selectee.element\n\t\t\t});\n\t\t});\n\t\t$(\".ui-selecting\", this.element[0]).each(function() {\n\t\t\tvar selectee = $.data(this, \"selectable-item\");\n\t\t\tselectee.$element.removeClass(\"ui-selecting\").addClass(\"ui-selected\");\n\t\t\tselectee.selecting = false;\n\t\t\tselectee.selected = true;\n\t\t\tselectee.startselected = true;\n\t\t\tthat._trigger(\"selected\", event, {\n\t\t\t\tselected: selectee.element\n\t\t\t});\n\t\t});\n\t\tthis._trigger(\"stop\", event);\n\n\t\tthis.helper.remove();\n\n\t\treturn false;\n\t}\n\n});\n\n\n/*!\n * jQuery UI Selectmenu 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/selectmenu\n */\n\n\nvar selectmenu = $.widget( \"ui.selectmenu\", {\n\tversion: \"1.11.4\",\n\tdefaultElement: \"<select>\",\n\toptions: {\n\t\tappendTo: null,\n\t\tdisabled: null,\n\t\ticons: {\n\t\t\tbutton: \"ui-icon-triangle-1-s\"\n\t\t},\n\t\tposition: {\n\t\t\tmy: \"left top\",\n\t\t\tat: \"left bottom\",\n\t\t\tcollision: \"none\"\n\t\t},\n\t\twidth: null,\n\n\t\t// callbacks\n\t\tchange: null,\n\t\tclose: null,\n\t\tfocus: null,\n\t\topen: null,\n\t\tselect: null\n\t},\n\n\t_create: function() {\n\t\tvar selectmenuId = this.element.uniqueId().attr( \"id\" );\n\t\tthis.ids = {\n\t\t\telement: selectmenuId,\n\t\t\tbutton: selectmenuId + \"-button\",\n\t\t\tmenu: selectmenuId + \"-menu\"\n\t\t};\n\n\t\tthis._drawButton();\n\t\tthis._drawMenu();\n\n\t\tif ( this.options.disabled ) {\n\t\t\tthis.disable();\n\t\t}\n\t},\n\n\t_drawButton: function() {\n\t\tvar that = this;\n\n\t\t// Associate existing label with the new button\n\t\tthis.label = $( \"label[for='\" + this.ids.element + \"']\" ).attr( \"for\", this.ids.button );\n\t\tthis._on( this.label, {\n\t\t\tclick: function( event ) {\n\t\t\t\tthis.button.focus();\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t});\n\n\t\t// Hide original select element\n\t\tthis.element.hide();\n\n\t\t// Create button\n\t\tthis.button = $( \"<span>\", {\n\t\t\t\"class\": \"ui-selectmenu-button ui-widget ui-state-default ui-corner-all\",\n\t\t\ttabindex: this.options.disabled ? -1 : 0,\n\t\t\tid: this.ids.button,\n\t\t\trole: \"combobox\",\n\t\t\t\"aria-expanded\": \"false\",\n\t\t\t\"aria-autocomplete\": \"list\",\n\t\t\t\"aria-owns\": this.ids.menu,\n\t\t\t\"aria-haspopup\": \"true\"\n\t\t})\n\t\t\t.insertAfter( this.element );\n\n\t\t$( \"<span>\", {\n\t\t\t\"class\": \"ui-icon \" + this.options.icons.button\n\t\t})\n\t\t\t.prependTo( this.button );\n\n\t\tthis.buttonText = $( \"<span>\", {\n\t\t\t\"class\": \"ui-selectmenu-text\"\n\t\t})\n\t\t\t.appendTo( this.button );\n\n\t\tthis._setText( this.buttonText, this.element.find( \"option:selected\" ).text() );\n\t\tthis._resizeButton();\n\n\t\tthis._on( this.button, this._buttonEvents );\n\t\tthis.button.one( \"focusin\", function() {\n\n\t\t\t// Delay rendering the menu items until the button receives focus.\n\t\t\t// The menu may have already been rendered via a programmatic open.\n\t\t\tif ( !that.menuItems ) {\n\t\t\t\tthat._refreshMenu();\n\t\t\t}\n\t\t});\n\t\tthis._hoverable( this.button );\n\t\tthis._focusable( this.button );\n\t},\n\n\t_drawMenu: function() {\n\t\tvar that = this;\n\n\t\t// Create menu\n\t\tthis.menu = $( \"<ul>\", {\n\t\t\t\"aria-hidden\": \"true\",\n\t\t\t\"aria-labelledby\": this.ids.button,\n\t\t\tid: this.ids.menu\n\t\t});\n\n\t\t// Wrap menu\n\t\tthis.menuWrap = $( \"<div>\", {\n\t\t\t\"class\": \"ui-selectmenu-menu ui-front\"\n\t\t})\n\t\t\t.append( this.menu )\n\t\t\t.appendTo( this._appendTo() );\n\n\t\t// Initialize menu widget\n\t\tthis.menuInstance = this.menu\n\t\t\t.menu({\n\t\t\t\trole: \"listbox\",\n\t\t\t\tselect: function( event, ui ) {\n\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\t// support: IE8\n\t\t\t\t\t// If the item was selected via a click, the text selection\n\t\t\t\t\t// will be destroyed in IE\n\t\t\t\t\tthat._setSelection();\n\n\t\t\t\t\tthat._select( ui.item.data( \"ui-selectmenu-item\" ), event );\n\t\t\t\t},\n\t\t\t\tfocus: function( event, ui ) {\n\t\t\t\t\tvar item = ui.item.data( \"ui-selectmenu-item\" );\n\n\t\t\t\t\t// Prevent inital focus from firing and check if its a newly focused item\n\t\t\t\t\tif ( that.focusIndex != null && item.index !== that.focusIndex ) {\n\t\t\t\t\t\tthat._trigger( \"focus\", event, { item: item } );\n\t\t\t\t\t\tif ( !that.isOpen ) {\n\t\t\t\t\t\t\tthat._select( item, event );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthat.focusIndex = item.index;\n\n\t\t\t\t\tthat.button.attr( \"aria-activedescendant\",\n\t\t\t\t\t\tthat.menuItems.eq( item.index ).attr( \"id\" ) );\n\t\t\t\t}\n\t\t\t})\n\t\t\t.menu( \"instance\" );\n\n\t\t// Adjust menu styles to dropdown\n\t\tthis.menu\n\t\t\t.addClass( \"ui-corner-bottom\" )\n\t\t\t.removeClass( \"ui-corner-all\" );\n\n\t\t// Don't close the menu on mouseleave\n\t\tthis.menuInstance._off( this.menu, \"mouseleave\" );\n\n\t\t// Cancel the menu's collapseAll on document click\n\t\tthis.menuInstance._closeOnDocumentClick = function() {\n\t\t\treturn false;\n\t\t};\n\n\t\t// Selects often contain empty items, but never contain dividers\n\t\tthis.menuInstance._isDivider = function() {\n\t\t\treturn false;\n\t\t};\n\t},\n\n\trefresh: function() {\n\t\tthis._refreshMenu();\n\t\tthis._setText( this.buttonText, this._getSelectedItem().text() );\n\t\tif ( !this.options.width ) {\n\t\t\tthis._resizeButton();\n\t\t}\n\t},\n\n\t_refreshMenu: function() {\n\t\tthis.menu.empty();\n\n\t\tvar item,\n\t\t\toptions = this.element.find( \"option\" );\n\n\t\tif ( !options.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._parseOptions( options );\n\t\tthis._renderMenu( this.menu, this.items );\n\n\t\tthis.menuInstance.refresh();\n\t\tthis.menuItems = this.menu.find( \"li\" ).not( \".ui-selectmenu-optgroup\" );\n\n\t\titem = this._getSelectedItem();\n\n\t\t// Update the menu to have the correct item focused\n\t\tthis.menuInstance.focus( null, item );\n\t\tthis._setAria( item.data( \"ui-selectmenu-item\" ) );\n\n\t\t// Set disabled state\n\t\tthis._setOption( \"disabled\", this.element.prop( \"disabled\" ) );\n\t},\n\n\topen: function( event ) {\n\t\tif ( this.options.disabled ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If this is the first time the menu is being opened, render the items\n\t\tif ( !this.menuItems ) {\n\t\t\tthis._refreshMenu();\n\t\t} else {\n\n\t\t\t// Menu clears focus on close, reset focus to selected item\n\t\t\tthis.menu.find( \".ui-state-focus\" ).removeClass( \"ui-state-focus\" );\n\t\t\tthis.menuInstance.focus( null, this._getSelectedItem() );\n\t\t}\n\n\t\tthis.isOpen = true;\n\t\tthis._toggleAttr();\n\t\tthis._resizeMenu();\n\t\tthis._position();\n\n\t\tthis._on( this.document, this._documentClick );\n\n\t\tthis._trigger( \"open\", event );\n\t},\n\n\t_position: function() {\n\t\tthis.menuWrap.position( $.extend( { of: this.button }, this.options.position ) );\n\t},\n\n\tclose: function( event ) {\n\t\tif ( !this.isOpen ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.isOpen = false;\n\t\tthis._toggleAttr();\n\n\t\tthis.range = null;\n\t\tthis._off( this.document );\n\n\t\tthis._trigger( \"close\", event );\n\t},\n\n\twidget: function() {\n\t\treturn this.button;\n\t},\n\n\tmenuWidget: function() {\n\t\treturn this.menu;\n\t},\n\n\t_renderMenu: function( ul, items ) {\n\t\tvar that = this,\n\t\t\tcurrentOptgroup = \"\";\n\n\t\t$.each( items, function( index, item ) {\n\t\t\tif ( item.optgroup !== currentOptgroup ) {\n\t\t\t\t$( \"<li>\", {\n\t\t\t\t\t\"class\": \"ui-selectmenu-optgroup ui-menu-divider\" +\n\t\t\t\t\t\t( item.element.parent( \"optgroup\" ).prop( \"disabled\" ) ?\n\t\t\t\t\t\t\t\" ui-state-disabled\" :\n\t\t\t\t\t\t\t\"\" ),\n\t\t\t\t\ttext: item.optgroup\n\t\t\t\t})\n\t\t\t\t\t.appendTo( ul );\n\n\t\t\t\tcurrentOptgroup = item.optgroup;\n\t\t\t}\n\n\t\t\tthat._renderItemData( ul, item );\n\t\t});\n\t},\n\n\t_renderItemData: function( ul, item ) {\n\t\treturn this._renderItem( ul, item ).data( \"ui-selectmenu-item\", item );\n\t},\n\n\t_renderItem: function( ul, item ) {\n\t\tvar li = $( \"<li>\" );\n\n\t\tif ( item.disabled ) {\n\t\t\tli.addClass( \"ui-state-disabled\" );\n\t\t}\n\t\tthis._setText( li, item.label );\n\n\t\treturn li.appendTo( ul );\n\t},\n\n\t_setText: function( element, value ) {\n\t\tif ( value ) {\n\t\t\telement.text( value );\n\t\t} else {\n\t\t\telement.html( \"&#160;\" );\n\t\t}\n\t},\n\n\t_move: function( direction, event ) {\n\t\tvar item, next,\n\t\t\tfilter = \".ui-menu-item\";\n\n\t\tif ( this.isOpen ) {\n\t\t\titem = this.menuItems.eq( this.focusIndex );\n\t\t} else {\n\t\t\titem = this.menuItems.eq( this.element[ 0 ].selectedIndex );\n\t\t\tfilter += \":not(.ui-state-disabled)\";\n\t\t}\n\n\t\tif ( direction === \"first\" || direction === \"last\" ) {\n\t\t\tnext = item[ direction === \"first\" ? \"prevAll\" : \"nextAll\" ]( filter ).eq( -1 );\n\t\t} else {\n\t\t\tnext = item[ direction + \"All\" ]( filter ).eq( 0 );\n\t\t}\n\n\t\tif ( next.length ) {\n\t\t\tthis.menuInstance.focus( event, next );\n\t\t}\n\t},\n\n\t_getSelectedItem: function() {\n\t\treturn this.menuItems.eq( this.element[ 0 ].selectedIndex );\n\t},\n\n\t_toggle: function( event ) {\n\t\tthis[ this.isOpen ? \"close\" : \"open\" ]( event );\n\t},\n\n\t_setSelection: function() {\n\t\tvar selection;\n\n\t\tif ( !this.range ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( window.getSelection ) {\n\t\t\tselection = window.getSelection();\n\t\t\tselection.removeAllRanges();\n\t\t\tselection.addRange( this.range );\n\n\t\t// support: IE8\n\t\t} else {\n\t\t\tthis.range.select();\n\t\t}\n\n\t\t// support: IE\n\t\t// Setting the text selection kills the button focus in IE, but\n\t\t// restoring the focus doesn't kill the selection.\n\t\tthis.button.focus();\n\t},\n\n\t_documentClick: {\n\t\tmousedown: function( event ) {\n\t\t\tif ( !this.isOpen ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( !$( event.target ).closest( \".ui-selectmenu-menu, #\" + this.ids.button ).length ) {\n\t\t\t\tthis.close( event );\n\t\t\t}\n\t\t}\n\t},\n\n\t_buttonEvents: {\n\n\t\t// Prevent text selection from being reset when interacting with the selectmenu (#10144)\n\t\tmousedown: function() {\n\t\t\tvar selection;\n\n\t\t\tif ( window.getSelection ) {\n\t\t\t\tselection = window.getSelection();\n\t\t\t\tif ( selection.rangeCount ) {\n\t\t\t\t\tthis.range = selection.getRangeAt( 0 );\n\t\t\t\t}\n\n\t\t\t// support: IE8\n\t\t\t} else {\n\t\t\t\tthis.range = document.selection.createRange();\n\t\t\t}\n\t\t},\n\n\t\tclick: function( event ) {\n\t\t\tthis._setSelection();\n\t\t\tthis._toggle( event );\n\t\t},\n\n\t\tkeydown: function( event ) {\n\t\t\tvar preventDefault = true;\n\t\t\tswitch ( event.keyCode ) {\n\t\t\t\tcase $.ui.keyCode.TAB:\n\t\t\t\tcase $.ui.keyCode.ESCAPE:\n\t\t\t\t\tthis.close( event );\n\t\t\t\t\tpreventDefault = false;\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.ui.keyCode.ENTER:\n\t\t\t\t\tif ( this.isOpen ) {\n\t\t\t\t\t\tthis._selectFocusedItem( event );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.ui.keyCode.UP:\n\t\t\t\t\tif ( event.altKey ) {\n\t\t\t\t\t\tthis._toggle( event );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._move( \"prev\", event );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.ui.keyCode.DOWN:\n\t\t\t\t\tif ( event.altKey ) {\n\t\t\t\t\t\tthis._toggle( event );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._move( \"next\", event );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.ui.keyCode.SPACE:\n\t\t\t\t\tif ( this.isOpen ) {\n\t\t\t\t\t\tthis._selectFocusedItem( event );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._toggle( event );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.ui.keyCode.LEFT:\n\t\t\t\t\tthis._move( \"prev\", event );\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.ui.keyCode.RIGHT:\n\t\t\t\t\tthis._move( \"next\", event );\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.ui.keyCode.HOME:\n\t\t\t\tcase $.ui.keyCode.PAGE_UP:\n\t\t\t\t\tthis._move( \"first\", event );\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.ui.keyCode.END:\n\t\t\t\tcase $.ui.keyCode.PAGE_DOWN:\n\t\t\t\t\tthis._move( \"last\", event );\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.menu.trigger( event );\n\t\t\t\t\tpreventDefault = false;\n\t\t\t}\n\n\t\t\tif ( preventDefault ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t}\n\t},\n\n\t_selectFocusedItem: function( event ) {\n\t\tvar item = this.menuItems.eq( this.focusIndex );\n\t\tif ( !item.hasClass( \"ui-state-disabled\" ) ) {\n\t\t\tthis._select( item.data( \"ui-selectmenu-item\" ), event );\n\t\t}\n\t},\n\n\t_select: function( item, event ) {\n\t\tvar oldIndex = this.element[ 0 ].selectedIndex;\n\n\t\t// Change native select element\n\t\tthis.element[ 0 ].selectedIndex = item.index;\n\t\tthis._setText( this.buttonText, item.label );\n\t\tthis._setAria( item );\n\t\tthis._trigger( \"select\", event, { item: item } );\n\n\t\tif ( item.index !== oldIndex ) {\n\t\t\tthis._trigger( \"change\", event, { item: item } );\n\t\t}\n\n\t\tthis.close( event );\n\t},\n\n\t_setAria: function( item ) {\n\t\tvar id = this.menuItems.eq( item.index ).attr( \"id\" );\n\n\t\tthis.button.attr({\n\t\t\t\"aria-labelledby\": id,\n\t\t\t\"aria-activedescendant\": id\n\t\t});\n\t\tthis.menu.attr( \"aria-activedescendant\", id );\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tif ( key === \"icons\" ) {\n\t\t\tthis.button.find( \"span.ui-icon\" )\n\t\t\t\t.removeClass( this.options.icons.button )\n\t\t\t\t.addClass( value.button );\n\t\t}\n\n\t\tthis._super( key, value );\n\n\t\tif ( key === \"appendTo\" ) {\n\t\t\tthis.menuWrap.appendTo( this._appendTo() );\n\t\t}\n\n\t\tif ( key === \"disabled\" ) {\n\t\t\tthis.menuInstance.option( \"disabled\", value );\n\t\t\tthis.button\n\t\t\t\t.toggleClass( \"ui-state-disabled\", value )\n\t\t\t\t.attr( \"aria-disabled\", value );\n\n\t\t\tthis.element.prop( \"disabled\", value );\n\t\t\tif ( value ) {\n\t\t\t\tthis.button.attr( \"tabindex\", -1 );\n\t\t\t\tthis.close();\n\t\t\t} else {\n\t\t\t\tthis.button.attr( \"tabindex\", 0 );\n\t\t\t}\n\t\t}\n\n\t\tif ( key === \"width\" ) {\n\t\t\tthis._resizeButton();\n\t\t}\n\t},\n\n\t_appendTo: function() {\n\t\tvar element = this.options.appendTo;\n\n\t\tif ( element ) {\n\t\t\telement = element.jquery || element.nodeType ?\n\t\t\t\t$( element ) :\n\t\t\t\tthis.document.find( element ).eq( 0 );\n\t\t}\n\n\t\tif ( !element || !element[ 0 ] ) {\n\t\t\telement = this.element.closest( \".ui-front\" );\n\t\t}\n\n\t\tif ( !element.length ) {\n\t\t\telement = this.document[ 0 ].body;\n\t\t}\n\n\t\treturn element;\n\t},\n\n\t_toggleAttr: function() {\n\t\tthis.button\n\t\t\t.toggleClass( \"ui-corner-top\", this.isOpen )\n\t\t\t.toggleClass( \"ui-corner-all\", !this.isOpen )\n\t\t\t.attr( \"aria-expanded\", this.isOpen );\n\t\tthis.menuWrap.toggleClass( \"ui-selectmenu-open\", this.isOpen );\n\t\tthis.menu.attr( \"aria-hidden\", !this.isOpen );\n\t},\n\n\t_resizeButton: function() {\n\t\tvar width = this.options.width;\n\n\t\tif ( !width ) {\n\t\t\twidth = this.element.show().outerWidth();\n\t\t\tthis.element.hide();\n\t\t}\n\n\t\tthis.button.outerWidth( width );\n\t},\n\n\t_resizeMenu: function() {\n\t\tthis.menu.outerWidth( Math.max(\n\t\t\tthis.button.outerWidth(),\n\n\t\t\t// support: IE10\n\t\t\t// IE10 wraps long text (possibly a rounding bug)\n\t\t\t// so we add 1px to avoid the wrapping\n\t\t\tthis.menu.width( \"\" ).outerWidth() + 1\n\t\t) );\n\t},\n\n\t_getCreateOptions: function() {\n\t\treturn { disabled: this.element.prop( \"disabled\" ) };\n\t},\n\n\t_parseOptions: function( options ) {\n\t\tvar data = [];\n\t\toptions.each(function( index, item ) {\n\t\t\tvar option = $( item ),\n\t\t\t\toptgroup = option.parent( \"optgroup\" );\n\t\t\tdata.push({\n\t\t\t\telement: option,\n\t\t\t\tindex: index,\n\t\t\t\tvalue: option.val(),\n\t\t\t\tlabel: option.text(),\n\t\t\t\toptgroup: optgroup.attr( \"label\" ) || \"\",\n\t\t\t\tdisabled: optgroup.prop( \"disabled\" ) || option.prop( \"disabled\" )\n\t\t\t});\n\t\t});\n\t\tthis.items = data;\n\t},\n\n\t_destroy: function() {\n\t\tthis.menuWrap.remove();\n\t\tthis.button.remove();\n\t\tthis.element.show();\n\t\tthis.element.removeUniqueId();\n\t\tthis.label.attr( \"for\", this.ids.element );\n\t}\n});\n\n\n/*!\n * jQuery UI Slider 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/slider/\n */\n\n\nvar slider = $.widget( \"ui.slider\", $.ui.mouse, {\n\tversion: \"1.11.4\",\n\twidgetEventPrefix: \"slide\",\n\n\toptions: {\n\t\tanimate: false,\n\t\tdistance: 0,\n\t\tmax: 100,\n\t\tmin: 0,\n\t\torientation: \"horizontal\",\n\t\trange: false,\n\t\tstep: 1,\n\t\tvalue: 0,\n\t\tvalues: null,\n\n\t\t// callbacks\n\t\tchange: null,\n\t\tslide: null,\n\t\tstart: null,\n\t\tstop: null\n\t},\n\n\t// number of pages in a slider\n\t// (how many times can you page up/down to go through the whole range)\n\tnumPages: 5,\n\n\t_create: function() {\n\t\tthis._keySliding = false;\n\t\tthis._mouseSliding = false;\n\t\tthis._animateOff = true;\n\t\tthis._handleIndex = null;\n\t\tthis._detectOrientation();\n\t\tthis._mouseInit();\n\t\tthis._calculateNewMax();\n\n\t\tthis.element\n\t\t\t.addClass( \"ui-slider\" +\n\t\t\t\t\" ui-slider-\" + this.orientation +\n\t\t\t\t\" ui-widget\" +\n\t\t\t\t\" ui-widget-content\" +\n\t\t\t\t\" ui-corner-all\");\n\n\t\tthis._refresh();\n\t\tthis._setOption( \"disabled\", this.options.disabled );\n\n\t\tthis._animateOff = false;\n\t},\n\n\t_refresh: function() {\n\t\tthis._createRange();\n\t\tthis._createHandles();\n\t\tthis._setupEvents();\n\t\tthis._refreshValue();\n\t},\n\n\t_createHandles: function() {\n\t\tvar i, handleCount,\n\t\t\toptions = this.options,\n\t\t\texistingHandles = this.element.find( \".ui-slider-handle\" ).addClass( \"ui-state-default ui-corner-all\" ),\n\t\t\thandle = \"<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>\",\n\t\t\thandles = [];\n\n\t\thandleCount = ( options.values && options.values.length ) || 1;\n\n\t\tif ( existingHandles.length > handleCount ) {\n\t\t\texistingHandles.slice( handleCount ).remove();\n\t\t\texistingHandles = existingHandles.slice( 0, handleCount );\n\t\t}\n\n\t\tfor ( i = existingHandles.length; i < handleCount; i++ ) {\n\t\t\thandles.push( handle );\n\t\t}\n\n\t\tthis.handles = existingHandles.add( $( handles.join( \"\" ) ).appendTo( this.element ) );\n\n\t\tthis.handle = this.handles.eq( 0 );\n\n\t\tthis.handles.each(function( i ) {\n\t\t\t$( this ).data( \"ui-slider-handle-index\", i );\n\t\t});\n\t},\n\n\t_createRange: function() {\n\t\tvar options = this.options,\n\t\t\tclasses = \"\";\n\n\t\tif ( options.range ) {\n\t\t\tif ( options.range === true ) {\n\t\t\t\tif ( !options.values ) {\n\t\t\t\t\toptions.values = [ this._valueMin(), this._valueMin() ];\n\t\t\t\t} else if ( options.values.length && options.values.length !== 2 ) {\n\t\t\t\t\toptions.values = [ options.values[0], options.values[0] ];\n\t\t\t\t} else if ( $.isArray( options.values ) ) {\n\t\t\t\t\toptions.values = options.values.slice(0);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( !this.range || !this.range.length ) {\n\t\t\t\tthis.range = $( \"<div></div>\" )\n\t\t\t\t\t.appendTo( this.element );\n\n\t\t\t\tclasses = \"ui-slider-range\" +\n\t\t\t\t// note: this isn't the most fittingly semantic framework class for this element,\n\t\t\t\t// but worked best visually with a variety of themes\n\t\t\t\t\" ui-widget-header ui-corner-all\";\n\t\t\t} else {\n\t\t\t\tthis.range.removeClass( \"ui-slider-range-min ui-slider-range-max\" )\n\t\t\t\t\t// Handle range switching from true to min/max\n\t\t\t\t\t.css({\n\t\t\t\t\t\t\"left\": \"\",\n\t\t\t\t\t\t\"bottom\": \"\"\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.range.addClass( classes +\n\t\t\t\t( ( options.range === \"min\" || options.range === \"max\" ) ? \" ui-slider-range-\" + options.range : \"\" ) );\n\t\t} else {\n\t\t\tif ( this.range ) {\n\t\t\t\tthis.range.remove();\n\t\t\t}\n\t\t\tthis.range = null;\n\t\t}\n\t},\n\n\t_setupEvents: function() {\n\t\tthis._off( this.handles );\n\t\tthis._on( this.handles, this._handleEvents );\n\t\tthis._hoverable( this.handles );\n\t\tthis._focusable( this.handles );\n\t},\n\n\t_destroy: function() {\n\t\tthis.handles.remove();\n\t\tif ( this.range ) {\n\t\t\tthis.range.remove();\n\t\t}\n\n\t\tthis.element\n\t\t\t.removeClass( \"ui-slider\" +\n\t\t\t\t\" ui-slider-horizontal\" +\n\t\t\t\t\" ui-slider-vertical\" +\n\t\t\t\t\" ui-widget\" +\n\t\t\t\t\" ui-widget-content\" +\n\t\t\t\t\" ui-corner-all\" );\n\n\t\tthis._mouseDestroy();\n\t},\n\n\t_mouseCapture: function( event ) {\n\t\tvar position, normValue, distance, closestHandle, index, allowed, offset, mouseOverHandle,\n\t\t\tthat = this,\n\t\t\to = this.options;\n\n\t\tif ( o.disabled ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.elementSize = {\n\t\t\twidth: this.element.outerWidth(),\n\t\t\theight: this.element.outerHeight()\n\t\t};\n\t\tthis.elementOffset = this.element.offset();\n\n\t\tposition = { x: event.pageX, y: event.pageY };\n\t\tnormValue = this._normValueFromMouse( position );\n\t\tdistance = this._valueMax() - this._valueMin() + 1;\n\t\tthis.handles.each(function( i ) {\n\t\t\tvar thisDistance = Math.abs( normValue - that.values(i) );\n\t\t\tif (( distance > thisDistance ) ||\n\t\t\t\t( distance === thisDistance &&\n\t\t\t\t\t(i === that._lastChangedValue || that.values(i) === o.min ))) {\n\t\t\t\tdistance = thisDistance;\n\t\t\t\tclosestHandle = $( this );\n\t\t\t\tindex = i;\n\t\t\t}\n\t\t});\n\n\t\tallowed = this._start( event, index );\n\t\tif ( allowed === false ) {\n\t\t\treturn false;\n\t\t}\n\t\tthis._mouseSliding = true;\n\n\t\tthis._handleIndex = index;\n\n\t\tclosestHandle\n\t\t\t.addClass( \"ui-state-active\" )\n\t\t\t.focus();\n\n\t\toffset = closestHandle.offset();\n\t\tmouseOverHandle = !$( event.target ).parents().addBack().is( \".ui-slider-handle\" );\n\t\tthis._clickOffset = mouseOverHandle ? { left: 0, top: 0 } : {\n\t\t\tleft: event.pageX - offset.left - ( closestHandle.width() / 2 ),\n\t\t\ttop: event.pageY - offset.top -\n\t\t\t\t( closestHandle.height() / 2 ) -\n\t\t\t\t( parseInt( closestHandle.css(\"borderTopWidth\"), 10 ) || 0 ) -\n\t\t\t\t( parseInt( closestHandle.css(\"borderBottomWidth\"), 10 ) || 0) +\n\t\t\t\t( parseInt( closestHandle.css(\"marginTop\"), 10 ) || 0)\n\t\t};\n\n\t\tif ( !this.handles.hasClass( \"ui-state-hover\" ) ) {\n\t\t\tthis._slide( event, index, normValue );\n\t\t}\n\t\tthis._animateOff = true;\n\t\treturn true;\n\t},\n\n\t_mouseStart: function() {\n\t\treturn true;\n\t},\n\n\t_mouseDrag: function( event ) {\n\t\tvar position = { x: event.pageX, y: event.pageY },\n\t\t\tnormValue = this._normValueFromMouse( position );\n\n\t\tthis._slide( event, this._handleIndex, normValue );\n\n\t\treturn false;\n\t},\n\n\t_mouseStop: function( event ) {\n\t\tthis.handles.removeClass( \"ui-state-active\" );\n\t\tthis._mouseSliding = false;\n\n\t\tthis._stop( event, this._handleIndex );\n\t\tthis._change( event, this._handleIndex );\n\n\t\tthis._handleIndex = null;\n\t\tthis._clickOffset = null;\n\t\tthis._animateOff = false;\n\n\t\treturn false;\n\t},\n\n\t_detectOrientation: function() {\n\t\tthis.orientation = ( this.options.orientation === \"vertical\" ) ? \"vertical\" : \"horizontal\";\n\t},\n\n\t_normValueFromMouse: function( position ) {\n\t\tvar pixelTotal,\n\t\t\tpixelMouse,\n\t\t\tpercentMouse,\n\t\t\tvalueTotal,\n\t\t\tvalueMouse;\n\n\t\tif ( this.orientation === \"horizontal\" ) {\n\t\t\tpixelTotal = this.elementSize.width;\n\t\t\tpixelMouse = position.x - this.elementOffset.left - ( this._clickOffset ? this._clickOffset.left : 0 );\n\t\t} else {\n\t\t\tpixelTotal = this.elementSize.height;\n\t\t\tpixelMouse = position.y - this.elementOffset.top - ( this._clickOffset ? this._clickOffset.top : 0 );\n\t\t}\n\n\t\tpercentMouse = ( pixelMouse / pixelTotal );\n\t\tif ( percentMouse > 1 ) {\n\t\t\tpercentMouse = 1;\n\t\t}\n\t\tif ( percentMouse < 0 ) {\n\t\t\tpercentMouse = 0;\n\t\t}\n\t\tif ( this.orientation === \"vertical\" ) {\n\t\t\tpercentMouse = 1 - percentMouse;\n\t\t}\n\n\t\tvalueTotal = this._valueMax() - this._valueMin();\n\t\tvalueMouse = this._valueMin() + percentMouse * valueTotal;\n\n\t\treturn this._trimAlignValue( valueMouse );\n\t},\n\n\t_start: function( event, index ) {\n\t\tvar uiHash = {\n\t\t\thandle: this.handles[ index ],\n\t\t\tvalue: this.value()\n\t\t};\n\t\tif ( this.options.values && this.options.values.length ) {\n\t\t\tuiHash.value = this.values( index );\n\t\t\tuiHash.values = this.values();\n\t\t}\n\t\treturn this._trigger( \"start\", event, uiHash );\n\t},\n\n\t_slide: function( event, index, newVal ) {\n\t\tvar otherVal,\n\t\t\tnewValues,\n\t\t\tallowed;\n\n\t\tif ( this.options.values && this.options.values.length ) {\n\t\t\totherVal = this.values( index ? 0 : 1 );\n\n\t\t\tif ( ( this.options.values.length === 2 && this.options.range === true ) &&\n\t\t\t\t\t( ( index === 0 && newVal > otherVal) || ( index === 1 && newVal < otherVal ) )\n\t\t\t\t) {\n\t\t\t\tnewVal = otherVal;\n\t\t\t}\n\n\t\t\tif ( newVal !== this.values( index ) ) {\n\t\t\t\tnewValues = this.values();\n\t\t\t\tnewValues[ index ] = newVal;\n\t\t\t\t// A slide can be canceled by returning false from the slide callback\n\t\t\t\tallowed = this._trigger( \"slide\", event, {\n\t\t\t\t\thandle: this.handles[ index ],\n\t\t\t\t\tvalue: newVal,\n\t\t\t\t\tvalues: newValues\n\t\t\t\t} );\n\t\t\t\totherVal = this.values( index ? 0 : 1 );\n\t\t\t\tif ( allowed !== false ) {\n\t\t\t\t\tthis.values( index, newVal );\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif ( newVal !== this.value() ) {\n\t\t\t\t// A slide can be canceled by returning false from the slide callback\n\t\t\t\tallowed = this._trigger( \"slide\", event, {\n\t\t\t\t\thandle: this.handles[ index ],\n\t\t\t\t\tvalue: newVal\n\t\t\t\t} );\n\t\t\t\tif ( allowed !== false ) {\n\t\t\t\t\tthis.value( newVal );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t_stop: function( event, index ) {\n\t\tvar uiHash = {\n\t\t\thandle: this.handles[ index ],\n\t\t\tvalue: this.value()\n\t\t};\n\t\tif ( this.options.values && this.options.values.length ) {\n\t\t\tuiHash.value = this.values( index );\n\t\t\tuiHash.values = this.values();\n\t\t}\n\n\t\tthis._trigger( \"stop\", event, uiHash );\n\t},\n\n\t_change: function( event, index ) {\n\t\tif ( !this._keySliding && !this._mouseSliding ) {\n\t\t\tvar uiHash = {\n\t\t\t\thandle: this.handles[ index ],\n\t\t\t\tvalue: this.value()\n\t\t\t};\n\t\t\tif ( this.options.values && this.options.values.length ) {\n\t\t\t\tuiHash.value = this.values( index );\n\t\t\t\tuiHash.values = this.values();\n\t\t\t}\n\n\t\t\t//store the last changed value index for reference when handles overlap\n\t\t\tthis._lastChangedValue = index;\n\n\t\t\tthis._trigger( \"change\", event, uiHash );\n\t\t}\n\t},\n\n\tvalue: function( newValue ) {\n\t\tif ( arguments.length ) {\n\t\t\tthis.options.value = this._trimAlignValue( newValue );\n\t\t\tthis._refreshValue();\n\t\t\tthis._change( null, 0 );\n\t\t\treturn;\n\t\t}\n\n\t\treturn this._value();\n\t},\n\n\tvalues: function( index, newValue ) {\n\t\tvar vals,\n\t\t\tnewValues,\n\t\t\ti;\n\n\t\tif ( arguments.length > 1 ) {\n\t\t\tthis.options.values[ index ] = this._trimAlignValue( newValue );\n\t\t\tthis._refreshValue();\n\t\t\tthis._change( null, index );\n\t\t\treturn;\n\t\t}\n\n\t\tif ( arguments.length ) {\n\t\t\tif ( $.isArray( arguments[ 0 ] ) ) {\n\t\t\t\tvals = this.options.values;\n\t\t\t\tnewValues = arguments[ 0 ];\n\t\t\t\tfor ( i = 0; i < vals.length; i += 1 ) {\n\t\t\t\t\tvals[ i ] = this._trimAlignValue( newValues[ i ] );\n\t\t\t\t\tthis._change( null, i );\n\t\t\t\t}\n\t\t\t\tthis._refreshValue();\n\t\t\t} else {\n\t\t\t\tif ( this.options.values && this.options.values.length ) {\n\t\t\t\t\treturn this._values( index );\n\t\t\t\t} else {\n\t\t\t\t\treturn this.value();\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\treturn this._values();\n\t\t}\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tvar i,\n\t\t\tvalsLength = 0;\n\n\t\tif ( key === \"range\" && this.options.range === true ) {\n\t\t\tif ( value === \"min\" ) {\n\t\t\t\tthis.options.value = this._values( 0 );\n\t\t\t\tthis.options.values = null;\n\t\t\t} else if ( value === \"max\" ) {\n\t\t\t\tthis.options.value = this._values( this.options.values.length - 1 );\n\t\t\t\tthis.options.values = null;\n\t\t\t}\n\t\t}\n\n\t\tif ( $.isArray( this.options.values ) ) {\n\t\t\tvalsLength = this.options.values.length;\n\t\t}\n\n\t\tif ( key === \"disabled\" ) {\n\t\t\tthis.element.toggleClass( \"ui-state-disabled\", !!value );\n\t\t}\n\n\t\tthis._super( key, value );\n\n\t\tswitch ( key ) {\n\t\t\tcase \"orientation\":\n\t\t\t\tthis._detectOrientation();\n\t\t\t\tthis.element\n\t\t\t\t\t.removeClass( \"ui-slider-horizontal ui-slider-vertical\" )\n\t\t\t\t\t.addClass( \"ui-slider-\" + this.orientation );\n\t\t\t\tthis._refreshValue();\n\n\t\t\t\t// Reset positioning from previous orientation\n\t\t\t\tthis.handles.css( value === \"horizontal\" ? \"bottom\" : \"left\", \"\" );\n\t\t\t\tbreak;\n\t\t\tcase \"value\":\n\t\t\t\tthis._animateOff = true;\n\t\t\t\tthis._refreshValue();\n\t\t\t\tthis._change( null, 0 );\n\t\t\t\tthis._animateOff = false;\n\t\t\t\tbreak;\n\t\t\tcase \"values\":\n\t\t\t\tthis._animateOff = true;\n\t\t\t\tthis._refreshValue();\n\t\t\t\tfor ( i = 0; i < valsLength; i += 1 ) {\n\t\t\t\t\tthis._change( null, i );\n\t\t\t\t}\n\t\t\t\tthis._animateOff = false;\n\t\t\t\tbreak;\n\t\t\tcase \"step\":\n\t\t\tcase \"min\":\n\t\t\tcase \"max\":\n\t\t\t\tthis._animateOff = true;\n\t\t\t\tthis._calculateNewMax();\n\t\t\t\tthis._refreshValue();\n\t\t\t\tthis._animateOff = false;\n\t\t\t\tbreak;\n\t\t\tcase \"range\":\n\t\t\t\tthis._animateOff = true;\n\t\t\t\tthis._refresh();\n\t\t\t\tthis._animateOff = false;\n\t\t\t\tbreak;\n\t\t}\n\t},\n\n\t//internal value getter\n\t// _value() returns value trimmed by min and max, aligned by step\n\t_value: function() {\n\t\tvar val = this.options.value;\n\t\tval = this._trimAlignValue( val );\n\n\t\treturn val;\n\t},\n\n\t//internal values getter\n\t// _values() returns array of values trimmed by min and max, aligned by step\n\t// _values( index ) returns single value trimmed by min and max, aligned by step\n\t_values: function( index ) {\n\t\tvar val,\n\t\t\tvals,\n\t\t\ti;\n\n\t\tif ( arguments.length ) {\n\t\t\tval = this.options.values[ index ];\n\t\t\tval = this._trimAlignValue( val );\n\n\t\t\treturn val;\n\t\t} else if ( this.options.values && this.options.values.length ) {\n\t\t\t// .slice() creates a copy of the array\n\t\t\t// this copy gets trimmed by min and max and then returned\n\t\t\tvals = this.options.values.slice();\n\t\t\tfor ( i = 0; i < vals.length; i += 1) {\n\t\t\t\tvals[ i ] = this._trimAlignValue( vals[ i ] );\n\t\t\t}\n\n\t\t\treturn vals;\n\t\t} else {\n\t\t\treturn [];\n\t\t}\n\t},\n\n\t// returns the step-aligned value that val is closest to, between (inclusive) min and max\n\t_trimAlignValue: function( val ) {\n\t\tif ( val <= this._valueMin() ) {\n\t\t\treturn this._valueMin();\n\t\t}\n\t\tif ( val >= this._valueMax() ) {\n\t\t\treturn this._valueMax();\n\t\t}\n\t\tvar step = ( this.options.step > 0 ) ? this.options.step : 1,\n\t\t\tvalModStep = (val - this._valueMin()) % step,\n\t\t\talignValue = val - valModStep;\n\n\t\tif ( Math.abs(valModStep) * 2 >= step ) {\n\t\t\talignValue += ( valModStep > 0 ) ? step : ( -step );\n\t\t}\n\n\t\t// Since JavaScript has problems with large floats, round\n\t\t// the final value to 5 digits after the decimal point (see #4124)\n\t\treturn parseFloat( alignValue.toFixed(5) );\n\t},\n\n\t_calculateNewMax: function() {\n\t\tvar max = this.options.max,\n\t\t\tmin = this._valueMin(),\n\t\t\tstep = this.options.step,\n\t\t\taboveMin = Math.floor( ( +( max - min ).toFixed( this._precision() ) ) / step ) * step;\n\t\tmax = aboveMin + min;\n\t\tthis.max = parseFloat( max.toFixed( this._precision() ) );\n\t},\n\n\t_precision: function() {\n\t\tvar precision = this._precisionOf( this.options.step );\n\t\tif ( this.options.min !== null ) {\n\t\t\tprecision = Math.max( precision, this._precisionOf( this.options.min ) );\n\t\t}\n\t\treturn precision;\n\t},\n\n\t_precisionOf: function( num ) {\n\t\tvar str = num.toString(),\n\t\t\tdecimal = str.indexOf( \".\" );\n\t\treturn decimal === -1 ? 0 : str.length - decimal - 1;\n\t},\n\n\t_valueMin: function() {\n\t\treturn this.options.min;\n\t},\n\n\t_valueMax: function() {\n\t\treturn this.max;\n\t},\n\n\t_refreshValue: function() {\n\t\tvar lastValPercent, valPercent, value, valueMin, valueMax,\n\t\t\toRange = this.options.range,\n\t\t\to = this.options,\n\t\t\tthat = this,\n\t\t\tanimate = ( !this._animateOff ) ? o.animate : false,\n\t\t\t_set = {};\n\n\t\tif ( this.options.values && this.options.values.length ) {\n\t\t\tthis.handles.each(function( i ) {\n\t\t\t\tvalPercent = ( that.values(i) - that._valueMin() ) / ( that._valueMax() - that._valueMin() ) * 100;\n\t\t\t\t_set[ that.orientation === \"horizontal\" ? \"left\" : \"bottom\" ] = valPercent + \"%\";\n\t\t\t\t$( this ).stop( 1, 1 )[ animate ? \"animate\" : \"css\" ]( _set, o.animate );\n\t\t\t\tif ( that.options.range === true ) {\n\t\t\t\t\tif ( that.orientation === \"horizontal\" ) {\n\t\t\t\t\t\tif ( i === 0 ) {\n\t\t\t\t\t\t\tthat.range.stop( 1, 1 )[ animate ? \"animate\" : \"css\" ]( { left: valPercent + \"%\" }, o.animate );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( i === 1 ) {\n\t\t\t\t\t\t\tthat.range[ animate ? \"animate\" : \"css\" ]( { width: ( valPercent - lastValPercent ) + \"%\" }, { queue: false, duration: o.animate } );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif ( i === 0 ) {\n\t\t\t\t\t\t\tthat.range.stop( 1, 1 )[ animate ? \"animate\" : \"css\" ]( { bottom: ( valPercent ) + \"%\" }, o.animate );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( i === 1 ) {\n\t\t\t\t\t\t\tthat.range[ animate ? \"animate\" : \"css\" ]( { height: ( valPercent - lastValPercent ) + \"%\" }, { queue: false, duration: o.animate } );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlastValPercent = valPercent;\n\t\t\t});\n\t\t} else {\n\t\t\tvalue = this.value();\n\t\t\tvalueMin = this._valueMin();\n\t\t\tvalueMax = this._valueMax();\n\t\t\tvalPercent = ( valueMax !== valueMin ) ?\n\t\t\t\t\t( value - valueMin ) / ( valueMax - valueMin ) * 100 :\n\t\t\t\t\t0;\n\t\t\t_set[ this.orientation === \"horizontal\" ? \"left\" : \"bottom\" ] = valPercent + \"%\";\n\t\t\tthis.handle.stop( 1, 1 )[ animate ? \"animate\" : \"css\" ]( _set, o.animate );\n\n\t\t\tif ( oRange === \"min\" && this.orientation === \"horizontal\" ) {\n\t\t\t\tthis.range.stop( 1, 1 )[ animate ? \"animate\" : \"css\" ]( { width: valPercent + \"%\" }, o.animate );\n\t\t\t}\n\t\t\tif ( oRange === \"max\" && this.orientation === \"horizontal\" ) {\n\t\t\t\tthis.range[ animate ? \"animate\" : \"css\" ]( { width: ( 100 - valPercent ) + \"%\" }, { queue: false, duration: o.animate } );\n\t\t\t}\n\t\t\tif ( oRange === \"min\" && this.orientation === \"vertical\" ) {\n\t\t\t\tthis.range.stop( 1, 1 )[ animate ? \"animate\" : \"css\" ]( { height: valPercent + \"%\" }, o.animate );\n\t\t\t}\n\t\t\tif ( oRange === \"max\" && this.orientation === \"vertical\" ) {\n\t\t\t\tthis.range[ animate ? \"animate\" : \"css\" ]( { height: ( 100 - valPercent ) + \"%\" }, { queue: false, duration: o.animate } );\n\t\t\t}\n\t\t}\n\t},\n\n\t_handleEvents: {\n\t\tkeydown: function( event ) {\n\t\t\tvar allowed, curVal, newVal, step,\n\t\t\t\tindex = $( event.target ).data( \"ui-slider-handle-index\" );\n\n\t\t\tswitch ( event.keyCode ) {\n\t\t\t\tcase $.ui.keyCode.HOME:\n\t\t\t\tcase $.ui.keyCode.END:\n\t\t\t\tcase $.ui.keyCode.PAGE_UP:\n\t\t\t\tcase $.ui.keyCode.PAGE_DOWN:\n\t\t\t\tcase $.ui.keyCode.UP:\n\t\t\t\tcase $.ui.keyCode.RIGHT:\n\t\t\t\tcase $.ui.keyCode.DOWN:\n\t\t\t\tcase $.ui.keyCode.LEFT:\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tif ( !this._keySliding ) {\n\t\t\t\t\t\tthis._keySliding = true;\n\t\t\t\t\t\t$( event.target ).addClass( \"ui-state-active\" );\n\t\t\t\t\t\tallowed = this._start( event, index );\n\t\t\t\t\t\tif ( allowed === false ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tstep = this.options.step;\n\t\t\tif ( this.options.values && this.options.values.length ) {\n\t\t\t\tcurVal = newVal = this.values( index );\n\t\t\t} else {\n\t\t\t\tcurVal = newVal = this.value();\n\t\t\t}\n\n\t\t\tswitch ( event.keyCode ) {\n\t\t\t\tcase $.ui.keyCode.HOME:\n\t\t\t\t\tnewVal = this._valueMin();\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.ui.keyCode.END:\n\t\t\t\t\tnewVal = this._valueMax();\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.ui.keyCode.PAGE_UP:\n\t\t\t\t\tnewVal = this._trimAlignValue(\n\t\t\t\t\t\tcurVal + ( ( this._valueMax() - this._valueMin() ) / this.numPages )\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.ui.keyCode.PAGE_DOWN:\n\t\t\t\t\tnewVal = this._trimAlignValue(\n\t\t\t\t\t\tcurVal - ( (this._valueMax() - this._valueMin()) / this.numPages ) );\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.ui.keyCode.UP:\n\t\t\t\tcase $.ui.keyCode.RIGHT:\n\t\t\t\t\tif ( curVal === this._valueMax() ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tnewVal = this._trimAlignValue( curVal + step );\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.ui.keyCode.DOWN:\n\t\t\t\tcase $.ui.keyCode.LEFT:\n\t\t\t\t\tif ( curVal === this._valueMin() ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tnewVal = this._trimAlignValue( curVal - step );\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tthis._slide( event, index, newVal );\n\t\t},\n\t\tkeyup: function( event ) {\n\t\t\tvar index = $( event.target ).data( \"ui-slider-handle-index\" );\n\n\t\t\tif ( this._keySliding ) {\n\t\t\t\tthis._keySliding = false;\n\t\t\t\tthis._stop( event, index );\n\t\t\t\tthis._change( event, index );\n\t\t\t\t$( event.target ).removeClass( \"ui-state-active\" );\n\t\t\t}\n\t\t}\n\t}\n});\n\n\n/*!\n * jQuery UI Sortable 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/sortable/\n */\n\n\nvar sortable = $.widget(\"ui.sortable\", $.ui.mouse, {\n\tversion: \"1.11.4\",\n\twidgetEventPrefix: \"sort\",\n\tready: false,\n\toptions: {\n\t\tappendTo: \"parent\",\n\t\taxis: false,\n\t\tconnectWith: false,\n\t\tcontainment: false,\n\t\tcursor: \"auto\",\n\t\tcursorAt: false,\n\t\tdropOnEmpty: true,\n\t\tforcePlaceholderSize: false,\n\t\tforceHelperSize: false,\n\t\tgrid: false,\n\t\thandle: false,\n\t\thelper: \"original\",\n\t\titems: \"> *\",\n\t\topacity: false,\n\t\tplaceholder: false,\n\t\trevert: false,\n\t\tscroll: true,\n\t\tscrollSensitivity: 20,\n\t\tscrollSpeed: 20,\n\t\tscope: \"default\",\n\t\ttolerance: \"intersect\",\n\t\tzIndex: 1000,\n\n\t\t// callbacks\n\t\tactivate: null,\n\t\tbeforeStop: null,\n\t\tchange: null,\n\t\tdeactivate: null,\n\t\tout: null,\n\t\tover: null,\n\t\treceive: null,\n\t\tremove: null,\n\t\tsort: null,\n\t\tstart: null,\n\t\tstop: null,\n\t\tupdate: null\n\t},\n\n\t_isOverAxis: function( x, reference, size ) {\n\t\treturn ( x >= reference ) && ( x < ( reference + size ) );\n\t},\n\n\t_isFloating: function( item ) {\n\t\treturn (/left|right/).test(item.css(\"float\")) || (/inline|table-cell/).test(item.css(\"display\"));\n\t},\n\n\t_create: function() {\n\t\tthis.containerCache = {};\n\t\tthis.element.addClass(\"ui-sortable\");\n\n\t\t//Get the items\n\t\tthis.refresh();\n\n\t\t//Let's determine the parent's offset\n\t\tthis.offset = this.element.offset();\n\n\t\t//Initialize mouse events for interaction\n\t\tthis._mouseInit();\n\n\t\tthis._setHandleClassName();\n\n\t\t//We're ready to go\n\t\tthis.ready = true;\n\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tthis._super( key, value );\n\n\t\tif ( key === \"handle\" ) {\n\t\t\tthis._setHandleClassName();\n\t\t}\n\t},\n\n\t_setHandleClassName: function() {\n\t\tthis.element.find( \".ui-sortable-handle\" ).removeClass( \"ui-sortable-handle\" );\n\t\t$.each( this.items, function() {\n\t\t\t( this.instance.options.handle ?\n\t\t\t\tthis.item.find( this.instance.options.handle ) : this.item )\n\t\t\t\t.addClass( \"ui-sortable-handle\" );\n\t\t});\n\t},\n\n\t_destroy: function() {\n\t\tthis.element\n\t\t\t.removeClass( \"ui-sortable ui-sortable-disabled\" )\n\t\t\t.find( \".ui-sortable-handle\" )\n\t\t\t\t.removeClass( \"ui-sortable-handle\" );\n\t\tthis._mouseDestroy();\n\n\t\tfor ( var i = this.items.length - 1; i >= 0; i-- ) {\n\t\t\tthis.items[i].item.removeData(this.widgetName + \"-item\");\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t_mouseCapture: function(event, overrideHandle) {\n\t\tvar currentItem = null,\n\t\t\tvalidHandle = false,\n\t\t\tthat = this;\n\n\t\tif (this.reverting) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif(this.options.disabled || this.options.type === \"static\") {\n\t\t\treturn false;\n\t\t}\n\n\t\t//We have to refresh the items data once first\n\t\tthis._refreshItems(event);\n\n\t\t//Find out if the clicked node (or one of its parents) is a actual item in this.items\n\t\t$(event.target).parents().each(function() {\n\t\t\tif($.data(this, that.widgetName + \"-item\") === that) {\n\t\t\t\tcurrentItem = $(this);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t\tif($.data(event.target, that.widgetName + \"-item\") === that) {\n\t\t\tcurrentItem = $(event.target);\n\t\t}\n\n\t\tif(!currentItem) {\n\t\t\treturn false;\n\t\t}\n\t\tif(this.options.handle && !overrideHandle) {\n\t\t\t$(this.options.handle, currentItem).find(\"*\").addBack().each(function() {\n\t\t\t\tif(this === event.target) {\n\t\t\t\t\tvalidHandle = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif(!validHandle) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tthis.currentItem = currentItem;\n\t\tthis._removeCurrentsFromItems();\n\t\treturn true;\n\n\t},\n\n\t_mouseStart: function(event, overrideHandle, noActivation) {\n\n\t\tvar i, body,\n\t\t\to = this.options;\n\n\t\tthis.currentContainer = this;\n\n\t\t//We only need to call refreshPositions, because the refreshItems call has been moved to mouseCapture\n\t\tthis.refreshPositions();\n\n\t\t//Create and append the visible helper\n\t\tthis.helper = this._createHelper(event);\n\n\t\t//Cache the helper size\n\t\tthis._cacheHelperProportions();\n\n\t\t/*\n\t\t * - Position generation -\n\t\t * This block generates everything position related - it's the core of draggables.\n\t\t */\n\n\t\t//Cache the margins of the original element\n\t\tthis._cacheMargins();\n\n\t\t//Get the next scrolling parent\n\t\tthis.scrollParent = this.helper.scrollParent();\n\n\t\t//The element's absolute position on the page minus margins\n\t\tthis.offset = this.currentItem.offset();\n\t\tthis.offset = {\n\t\t\ttop: this.offset.top - this.margins.top,\n\t\t\tleft: this.offset.left - this.margins.left\n\t\t};\n\n\t\t$.extend(this.offset, {\n\t\t\tclick: { //Where the click happened, relative to the element\n\t\t\t\tleft: event.pageX - this.offset.left,\n\t\t\t\ttop: event.pageY - this.offset.top\n\t\t\t},\n\t\t\tparent: this._getParentOffset(),\n\t\t\trelative: this._getRelativeOffset() //This is a relative to absolute position minus the actual position calculation - only used for relative positioned helper\n\t\t});\n\n\t\t// Only after we got the offset, we can change the helper's position to absolute\n\t\t// TODO: Still need to figure out a way to make relative sorting possible\n\t\tthis.helper.css(\"position\", \"absolute\");\n\t\tthis.cssPosition = this.helper.css(\"position\");\n\n\t\t//Generate the original position\n\t\tthis.originalPosition = this._generatePosition(event);\n\t\tthis.originalPageX = event.pageX;\n\t\tthis.originalPageY = event.pageY;\n\n\t\t//Adjust the mouse offset relative to the helper if \"cursorAt\" is supplied\n\t\t(o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt));\n\n\t\t//Cache the former DOM position\n\t\tthis.domPosition = { prev: this.currentItem.prev()[0], parent: this.currentItem.parent()[0] };\n\n\t\t//If the helper is not the original, hide the original so it's not playing any role during the drag, won't cause anything bad this way\n\t\tif(this.helper[0] !== this.currentItem[0]) {\n\t\t\tthis.currentItem.hide();\n\t\t}\n\n\t\t//Create the placeholder\n\t\tthis._createPlaceholder();\n\n\t\t//Set a containment if given in the options\n\t\tif(o.containment) {\n\t\t\tthis._setContainment();\n\t\t}\n\n\t\tif( o.cursor && o.cursor !== \"auto\" ) { // cursor option\n\t\t\tbody = this.document.find( \"body\" );\n\n\t\t\t// support: IE\n\t\t\tthis.storedCursor = body.css( \"cursor\" );\n\t\t\tbody.css( \"cursor\", o.cursor );\n\n\t\t\tthis.storedStylesheet = $( \"<style>*{ cursor: \"+o.cursor+\" !important; }</style>\" ).appendTo( body );\n\t\t}\n\n\t\tif(o.opacity) { // opacity option\n\t\t\tif (this.helper.css(\"opacity\")) {\n\t\t\t\tthis._storedOpacity = this.helper.css(\"opacity\");\n\t\t\t}\n\t\t\tthis.helper.css(\"opacity\", o.opacity);\n\t\t}\n\n\t\tif(o.zIndex) { // zIndex option\n\t\t\tif (this.helper.css(\"zIndex\")) {\n\t\t\t\tthis._storedZIndex = this.helper.css(\"zIndex\");\n\t\t\t}\n\t\t\tthis.helper.css(\"zIndex\", o.zIndex);\n\t\t}\n\n\t\t//Prepare scrolling\n\t\tif(this.scrollParent[0] !== this.document[0] && this.scrollParent[0].tagName !== \"HTML\") {\n\t\t\tthis.overflowOffset = this.scrollParent.offset();\n\t\t}\n\n\t\t//Call callbacks\n\t\tthis._trigger(\"start\", event, this._uiHash());\n\n\t\t//Recache the helper size\n\t\tif(!this._preserveHelperProportions) {\n\t\t\tthis._cacheHelperProportions();\n\t\t}\n\n\n\t\t//Post \"activate\" events to possible containers\n\t\tif( !noActivation ) {\n\t\t\tfor ( i = this.containers.length - 1; i >= 0; i-- ) {\n\t\t\t\tthis.containers[ i ]._trigger( \"activate\", event, this._uiHash( this ) );\n\t\t\t}\n\t\t}\n\n\t\t//Prepare possible droppables\n\t\tif($.ui.ddmanager) {\n\t\t\t$.ui.ddmanager.current = this;\n\t\t}\n\n\t\tif ($.ui.ddmanager && !o.dropBehaviour) {\n\t\t\t$.ui.ddmanager.prepareOffsets(this, event);\n\t\t}\n\n\t\tthis.dragging = true;\n\n\t\tthis.helper.addClass(\"ui-sortable-helper\");\n\t\tthis._mouseDrag(event); //Execute the drag once - this causes the helper not to be visible before getting its correct position\n\t\treturn true;\n\n\t},\n\n\t_mouseDrag: function(event) {\n\t\tvar i, item, itemElement, intersection,\n\t\t\to = this.options,\n\t\t\tscrolled = false;\n\n\t\t//Compute the helpers position\n\t\tthis.position = this._generatePosition(event);\n\t\tthis.positionAbs = this._convertPositionTo(\"absolute\");\n\n\t\tif (!this.lastPositionAbs) {\n\t\t\tthis.lastPositionAbs = this.positionAbs;\n\t\t}\n\n\t\t//Do scrolling\n\t\tif(this.options.scroll) {\n\t\t\tif(this.scrollParent[0] !== this.document[0] && this.scrollParent[0].tagName !== \"HTML\") {\n\n\t\t\t\tif((this.overflowOffset.top + this.scrollParent[0].offsetHeight) - event.pageY < o.scrollSensitivity) {\n\t\t\t\t\tthis.scrollParent[0].scrollTop = scrolled = this.scrollParent[0].scrollTop + o.scrollSpeed;\n\t\t\t\t} else if(event.pageY - this.overflowOffset.top < o.scrollSensitivity) {\n\t\t\t\t\tthis.scrollParent[0].scrollTop = scrolled = this.scrollParent[0].scrollTop - o.scrollSpeed;\n\t\t\t\t}\n\n\t\t\t\tif((this.overflowOffset.left + this.scrollParent[0].offsetWidth) - event.pageX < o.scrollSensitivity) {\n\t\t\t\t\tthis.scrollParent[0].scrollLeft = scrolled = this.scrollParent[0].scrollLeft + o.scrollSpeed;\n\t\t\t\t} else if(event.pageX - this.overflowOffset.left < o.scrollSensitivity) {\n\t\t\t\t\tthis.scrollParent[0].scrollLeft = scrolled = this.scrollParent[0].scrollLeft - o.scrollSpeed;\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif(event.pageY - this.document.scrollTop() < o.scrollSensitivity) {\n\t\t\t\t\tscrolled = this.document.scrollTop(this.document.scrollTop() - o.scrollSpeed);\n\t\t\t\t} else if(this.window.height() - (event.pageY - this.document.scrollTop()) < o.scrollSensitivity) {\n\t\t\t\t\tscrolled = this.document.scrollTop(this.document.scrollTop() + o.scrollSpeed);\n\t\t\t\t}\n\n\t\t\t\tif(event.pageX - this.document.scrollLeft() < o.scrollSensitivity) {\n\t\t\t\t\tscrolled = this.document.scrollLeft(this.document.scrollLeft() - o.scrollSpeed);\n\t\t\t\t} else if(this.window.width() - (event.pageX - this.document.scrollLeft()) < o.scrollSensitivity) {\n\t\t\t\t\tscrolled = this.document.scrollLeft(this.document.scrollLeft() + o.scrollSpeed);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif(scrolled !== false && $.ui.ddmanager && !o.dropBehaviour) {\n\t\t\t\t$.ui.ddmanager.prepareOffsets(this, event);\n\t\t\t}\n\t\t}\n\n\t\t//Regenerate the absolute position used for position checks\n\t\tthis.positionAbs = this._convertPositionTo(\"absolute\");\n\n\t\t//Set the helper position\n\t\tif(!this.options.axis || this.options.axis !== \"y\") {\n\t\t\tthis.helper[0].style.left = this.position.left+\"px\";\n\t\t}\n\t\tif(!this.options.axis || this.options.axis !== \"x\") {\n\t\t\tthis.helper[0].style.top = this.position.top+\"px\";\n\t\t}\n\n\t\t//Rearrange\n\t\tfor (i = this.items.length - 1; i >= 0; i--) {\n\n\t\t\t//Cache variables and intersection, continue if no intersection\n\t\t\titem = this.items[i];\n\t\t\titemElement = item.item[0];\n\t\t\tintersection = this._intersectsWithPointer(item);\n\t\t\tif (!intersection) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Only put the placeholder inside the current Container, skip all\n\t\t\t// items from other containers. This works because when moving\n\t\t\t// an item from one container to another the\n\t\t\t// currentContainer is switched before the placeholder is moved.\n\t\t\t//\n\t\t\t// Without this, moving items in \"sub-sortables\" can cause\n\t\t\t// the placeholder to jitter between the outer and inner container.\n\t\t\tif (item.instance !== this.currentContainer) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// cannot intersect with itself\n\t\t\t// no useless actions that have been done before\n\t\t\t// no action if the item moved is the parent of the item checked\n\t\t\tif (itemElement !== this.currentItem[0] &&\n\t\t\t\tthis.placeholder[intersection === 1 ? \"next\" : \"prev\"]()[0] !== itemElement &&\n\t\t\t\t!$.contains(this.placeholder[0], itemElement) &&\n\t\t\t\t(this.options.type === \"semi-dynamic\" ? !$.contains(this.element[0], itemElement) : true)\n\t\t\t) {\n\n\t\t\t\tthis.direction = intersection === 1 ? \"down\" : \"up\";\n\n\t\t\t\tif (this.options.tolerance === \"pointer\" || this._intersectsWithSides(item)) {\n\t\t\t\t\tthis._rearrange(event, item);\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tthis._trigger(\"change\", event, this._uiHash());\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t//Post events to containers\n\t\tthis._contactContainers(event);\n\n\t\t//Interconnect with droppables\n\t\tif($.ui.ddmanager) {\n\t\t\t$.ui.ddmanager.drag(this, event);\n\t\t}\n\n\t\t//Call callbacks\n\t\tthis._trigger(\"sort\", event, this._uiHash());\n\n\t\tthis.lastPositionAbs = this.positionAbs;\n\t\treturn false;\n\n\t},\n\n\t_mouseStop: function(event, noPropagation) {\n\n\t\tif(!event) {\n\t\t\treturn;\n\t\t}\n\n\t\t//If we are using droppables, inform the manager about the drop\n\t\tif ($.ui.ddmanager && !this.options.dropBehaviour) {\n\t\t\t$.ui.ddmanager.drop(this, event);\n\t\t}\n\n\t\tif(this.options.revert) {\n\t\t\tvar that = this,\n\t\t\t\tcur = this.placeholder.offset(),\n\t\t\t\taxis = this.options.axis,\n\t\t\t\tanimation = {};\n\n\t\t\tif ( !axis || axis === \"x\" ) {\n\t\t\t\tanimation.left = cur.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] === this.document[0].body ? 0 : this.offsetParent[0].scrollLeft);\n\t\t\t}\n\t\t\tif ( !axis || axis === \"y\" ) {\n\t\t\t\tanimation.top = cur.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] === this.document[0].body ? 0 : this.offsetParent[0].scrollTop);\n\t\t\t}\n\t\t\tthis.reverting = true;\n\t\t\t$(this.helper).animate( animation, parseInt(this.options.revert, 10) || 500, function() {\n\t\t\t\tthat._clear(event);\n\t\t\t});\n\t\t} else {\n\t\t\tthis._clear(event, noPropagation);\n\t\t}\n\n\t\treturn false;\n\n\t},\n\n\tcancel: function() {\n\n\t\tif(this.dragging) {\n\n\t\t\tthis._mouseUp({ target: null });\n\n\t\t\tif(this.options.helper === \"original\") {\n\t\t\t\tthis.currentItem.css(this._storedCSS).removeClass(\"ui-sortable-helper\");\n\t\t\t} else {\n\t\t\t\tthis.currentItem.show();\n\t\t\t}\n\n\t\t\t//Post deactivating events to containers\n\t\t\tfor (var i = this.containers.length - 1; i >= 0; i--){\n\t\t\t\tthis.containers[i]._trigger(\"deactivate\", null, this._uiHash(this));\n\t\t\t\tif(this.containers[i].containerCache.over) {\n\t\t\t\t\tthis.containers[i]._trigger(\"out\", null, this._uiHash(this));\n\t\t\t\t\tthis.containers[i].containerCache.over = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\tif (this.placeholder) {\n\t\t\t//$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately, it unbinds ALL events from the original node!\n\t\t\tif(this.placeholder[0].parentNode) {\n\t\t\t\tthis.placeholder[0].parentNode.removeChild(this.placeholder[0]);\n\t\t\t}\n\t\t\tif(this.options.helper !== \"original\" && this.helper && this.helper[0].parentNode) {\n\t\t\t\tthis.helper.remove();\n\t\t\t}\n\n\t\t\t$.extend(this, {\n\t\t\t\thelper: null,\n\t\t\t\tdragging: false,\n\t\t\t\treverting: false,\n\t\t\t\t_noFinalSort: null\n\t\t\t});\n\n\t\t\tif(this.domPosition.prev) {\n\t\t\t\t$(this.domPosition.prev).after(this.currentItem);\n\t\t\t} else {\n\t\t\t\t$(this.domPosition.parent).prepend(this.currentItem);\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tserialize: function(o) {\n\n\t\tvar items = this._getItemsAsjQuery(o && o.connected),\n\t\t\tstr = [];\n\t\to = o || {};\n\n\t\t$(items).each(function() {\n\t\t\tvar res = ($(o.item || this).attr(o.attribute || \"id\") || \"\").match(o.expression || (/(.+)[\\-=_](.+)/));\n\t\t\tif (res) {\n\t\t\t\tstr.push((o.key || res[1]+\"[]\")+\"=\"+(o.key && o.expression ? res[1] : res[2]));\n\t\t\t}\n\t\t});\n\n\t\tif(!str.length && o.key) {\n\t\t\tstr.push(o.key + \"=\");\n\t\t}\n\n\t\treturn str.join(\"&\");\n\n\t},\n\n\ttoArray: function(o) {\n\n\t\tvar items = this._getItemsAsjQuery(o && o.connected),\n\t\t\tret = [];\n\n\t\to = o || {};\n\n\t\titems.each(function() { ret.push($(o.item || this).attr(o.attribute || \"id\") || \"\"); });\n\t\treturn ret;\n\n\t},\n\n\t/* Be careful with the following core functions */\n\t_intersectsWith: function(item) {\n\n\t\tvar x1 = this.positionAbs.left,\n\t\t\tx2 = x1 + this.helperProportions.width,\n\t\t\ty1 = this.positionAbs.top,\n\t\t\ty2 = y1 + this.helperProportions.height,\n\t\t\tl = item.left,\n\t\t\tr = l + item.width,\n\t\t\tt = item.top,\n\t\t\tb = t + item.height,\n\t\t\tdyClick = this.offset.click.top,\n\t\t\tdxClick = this.offset.click.left,\n\t\t\tisOverElementHeight = ( this.options.axis === \"x\" ) || ( ( y1 + dyClick ) > t && ( y1 + dyClick ) < b ),\n\t\t\tisOverElementWidth = ( this.options.axis === \"y\" ) || ( ( x1 + dxClick ) > l && ( x1 + dxClick ) < r ),\n\t\t\tisOverElement = isOverElementHeight && isOverElementWidth;\n\n\t\tif ( this.options.tolerance === \"pointer\" ||\n\t\t\tthis.options.forcePointerForContainers ||\n\t\t\t(this.options.tolerance !== \"pointer\" && this.helperProportions[this.floating ? \"width\" : \"height\"] > item[this.floating ? \"width\" : \"height\"])\n\t\t) {\n\t\t\treturn isOverElement;\n\t\t} else {\n\n\t\t\treturn (l < x1 + (this.helperProportions.width / 2) && // Right Half\n\t\t\t\tx2 - (this.helperProportions.width / 2) < r && // Left Half\n\t\t\t\tt < y1 + (this.helperProportions.height / 2) && // Bottom Half\n\t\t\t\ty2 - (this.helperProportions.height / 2) < b ); // Top Half\n\n\t\t}\n\t},\n\n\t_intersectsWithPointer: function(item) {\n\n\t\tvar isOverElementHeight = (this.options.axis === \"x\") || this._isOverAxis(this.positionAbs.top + this.offset.click.top, item.top, item.height),\n\t\t\tisOverElementWidth = (this.options.axis === \"y\") || this._isOverAxis(this.positionAbs.left + this.offset.click.left, item.left, item.width),\n\t\t\tisOverElement = isOverElementHeight && isOverElementWidth,\n\t\t\tverticalDirection = this._getDragVerticalDirection(),\n\t\t\thorizontalDirection = this._getDragHorizontalDirection();\n\n\t\tif (!isOverElement) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn this.floating ?\n\t\t\t( ((horizontalDirection && horizontalDirection === \"right\") || verticalDirection === \"down\") ? 2 : 1 )\n\t\t\t: ( verticalDirection && (verticalDirection === \"down\" ? 2 : 1) );\n\n\t},\n\n\t_intersectsWithSides: function(item) {\n\n\t\tvar isOverBottomHalf = this._isOverAxis(this.positionAbs.top + this.offset.click.top, item.top + (item.height/2), item.height),\n\t\t\tisOverRightHalf = this._isOverAxis(this.positionAbs.left + this.offset.click.left, item.left + (item.width/2), item.width),\n\t\t\tverticalDirection = this._getDragVerticalDirection(),\n\t\t\thorizontalDirection = this._getDragHorizontalDirection();\n\n\t\tif (this.floating && horizontalDirection) {\n\t\t\treturn ((horizontalDirection === \"right\" && isOverRightHalf) || (horizontalDirection === \"left\" && !isOverRightHalf));\n\t\t} else {\n\t\t\treturn verticalDirection && ((verticalDirection === \"down\" && isOverBottomHalf) || (verticalDirection === \"up\" && !isOverBottomHalf));\n\t\t}\n\n\t},\n\n\t_getDragVerticalDirection: function() {\n\t\tvar delta = this.positionAbs.top - this.lastPositionAbs.top;\n\t\treturn delta !== 0 && (delta > 0 ? \"down\" : \"up\");\n\t},\n\n\t_getDragHorizontalDirection: function() {\n\t\tvar delta = this.positionAbs.left - this.lastPositionAbs.left;\n\t\treturn delta !== 0 && (delta > 0 ? \"right\" : \"left\");\n\t},\n\n\trefresh: function(event) {\n\t\tthis._refreshItems(event);\n\t\tthis._setHandleClassName();\n\t\tthis.refreshPositions();\n\t\treturn this;\n\t},\n\n\t_connectWith: function() {\n\t\tvar options = this.options;\n\t\treturn options.connectWith.constructor === String ? [options.connectWith] : options.connectWith;\n\t},\n\n\t_getItemsAsjQuery: function(connected) {\n\n\t\tvar i, j, cur, inst,\n\t\t\titems = [],\n\t\t\tqueries = [],\n\t\t\tconnectWith = this._connectWith();\n\n\t\tif(connectWith && connected) {\n\t\t\tfor (i = connectWith.length - 1; i >= 0; i--){\n\t\t\t\tcur = $(connectWith[i], this.document[0]);\n\t\t\t\tfor ( j = cur.length - 1; j >= 0; j--){\n\t\t\t\t\tinst = $.data(cur[j], this.widgetFullName);\n\t\t\t\t\tif(inst && inst !== this && !inst.options.disabled) {\n\t\t\t\t\t\tqueries.push([$.isFunction(inst.options.items) ? inst.options.items.call(inst.element) : $(inst.options.items, inst.element).not(\".ui-sortable-helper\").not(\".ui-sortable-placeholder\"), inst]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tqueries.push([$.isFunction(this.options.items) ? this.options.items.call(this.element, null, { options: this.options, item: this.currentItem }) : $(this.options.items, this.element).not(\".ui-sortable-helper\").not(\".ui-sortable-placeholder\"), this]);\n\n\t\tfunction addItems() {\n\t\t\titems.push( this );\n\t\t}\n\t\tfor (i = queries.length - 1; i >= 0; i--){\n\t\t\tqueries[i][0].each( addItems );\n\t\t}\n\n\t\treturn $(items);\n\n\t},\n\n\t_removeCurrentsFromItems: function() {\n\n\t\tvar list = this.currentItem.find(\":data(\" + this.widgetName + \"-item)\");\n\n\t\tthis.items = $.grep(this.items, function (item) {\n\t\t\tfor (var j=0; j < list.length; j++) {\n\t\t\t\tif(list[j] === item.item[0]) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\n\t},\n\n\t_refreshItems: function(event) {\n\n\t\tthis.items = [];\n\t\tthis.containers = [this];\n\n\t\tvar i, j, cur, inst, targetData, _queries, item, queriesLength,\n\t\t\titems = this.items,\n\t\t\tqueries = [[$.isFunction(this.options.items) ? this.options.items.call(this.element[0], event, { item: this.currentItem }) : $(this.options.items, this.element), this]],\n\t\t\tconnectWith = this._connectWith();\n\n\t\tif(connectWith && this.ready) { //Shouldn't be run the first time through due to massive slow-down\n\t\t\tfor (i = connectWith.length - 1; i >= 0; i--){\n\t\t\t\tcur = $(connectWith[i], this.document[0]);\n\t\t\t\tfor (j = cur.length - 1; j >= 0; j--){\n\t\t\t\t\tinst = $.data(cur[j], this.widgetFullName);\n\t\t\t\t\tif(inst && inst !== this && !inst.options.disabled) {\n\t\t\t\t\t\tqueries.push([$.isFunction(inst.options.items) ? inst.options.items.call(inst.element[0], event, { item: this.currentItem }) : $(inst.options.items, inst.element), inst]);\n\t\t\t\t\t\tthis.containers.push(inst);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (i = queries.length - 1; i >= 0; i--) {\n\t\t\ttargetData = queries[i][1];\n\t\t\t_queries = queries[i][0];\n\n\t\t\tfor (j=0, queriesLength = _queries.length; j < queriesLength; j++) {\n\t\t\t\titem = $(_queries[j]);\n\n\t\t\t\titem.data(this.widgetName + \"-item\", targetData); // Data for target checking (mouse manager)\n\n\t\t\t\titems.push({\n\t\t\t\t\titem: item,\n\t\t\t\t\tinstance: targetData,\n\t\t\t\t\twidth: 0, height: 0,\n\t\t\t\t\tleft: 0, top: 0\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t},\n\n\trefreshPositions: function(fast) {\n\n\t\t// Determine whether items are being displayed horizontally\n\t\tthis.floating = this.items.length ?\n\t\t\tthis.options.axis === \"x\" || this._isFloating( this.items[ 0 ].item ) :\n\t\t\tfalse;\n\n\t\t//This has to be redone because due to the item being moved out/into the offsetParent, the offsetParent's position will change\n\t\tif(this.offsetParent && this.helper) {\n\t\t\tthis.offset.parent = this._getParentOffset();\n\t\t}\n\n\t\tvar i, item, t, p;\n\n\t\tfor (i = this.items.length - 1; i >= 0; i--){\n\t\t\titem = this.items[i];\n\n\t\t\t//We ignore calculating positions of all connected containers when we're not over them\n\t\t\tif(item.instance !== this.currentContainer && this.currentContainer && item.item[0] !== this.currentItem[0]) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tt = this.options.toleranceElement ? $(this.options.toleranceElement, item.item) : item.item;\n\n\t\t\tif (!fast) {\n\t\t\t\titem.width = t.outerWidth();\n\t\t\t\titem.height = t.outerHeight();\n\t\t\t}\n\n\t\t\tp = t.offset();\n\t\t\titem.left = p.left;\n\t\t\titem.top = p.top;\n\t\t}\n\n\t\tif(this.options.custom && this.options.custom.refreshContainers) {\n\t\t\tthis.options.custom.refreshContainers.call(this);\n\t\t} else {\n\t\t\tfor (i = this.containers.length - 1; i >= 0; i--){\n\t\t\t\tp = this.containers[i].element.offset();\n\t\t\t\tthis.containers[i].containerCache.left = p.left;\n\t\t\t\tthis.containers[i].containerCache.top = p.top;\n\t\t\t\tthis.containers[i].containerCache.width = this.containers[i].element.outerWidth();\n\t\t\t\tthis.containers[i].containerCache.height = this.containers[i].element.outerHeight();\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t_createPlaceholder: function(that) {\n\t\tthat = that || this;\n\t\tvar className,\n\t\t\to = that.options;\n\n\t\tif(!o.placeholder || o.placeholder.constructor === String) {\n\t\t\tclassName = o.placeholder;\n\t\t\to.placeholder = {\n\t\t\t\telement: function() {\n\n\t\t\t\t\tvar nodeName = that.currentItem[0].nodeName.toLowerCase(),\n\t\t\t\t\t\telement = $( \"<\" + nodeName + \">\", that.document[0] )\n\t\t\t\t\t\t\t.addClass(className || that.currentItem[0].className+\" ui-sortable-placeholder\")\n\t\t\t\t\t\t\t.removeClass(\"ui-sortable-helper\");\n\n\t\t\t\t\tif ( nodeName === \"tbody\" ) {\n\t\t\t\t\t\tthat._createTrPlaceholder(\n\t\t\t\t\t\t\tthat.currentItem.find( \"tr\" ).eq( 0 ),\n\t\t\t\t\t\t\t$( \"<tr>\", that.document[ 0 ] ).appendTo( element )\n\t\t\t\t\t\t);\n\t\t\t\t\t} else if ( nodeName === \"tr\" ) {\n\t\t\t\t\t\tthat._createTrPlaceholder( that.currentItem, element );\n\t\t\t\t\t} else if ( nodeName === \"img\" ) {\n\t\t\t\t\t\telement.attr( \"src\", that.currentItem.attr( \"src\" ) );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( !className ) {\n\t\t\t\t\t\telement.css( \"visibility\", \"hidden\" );\n\t\t\t\t\t}\n\n\t\t\t\t\treturn element;\n\t\t\t\t},\n\t\t\t\tupdate: function(container, p) {\n\n\t\t\t\t\t// 1. If a className is set as 'placeholder option, we don't force sizes - the class is responsible for that\n\t\t\t\t\t// 2. The option 'forcePlaceholderSize can be enabled to force it even if a class name is specified\n\t\t\t\t\tif(className && !o.forcePlaceholderSize) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t//If the element doesn't have a actual height by itself (without styles coming from a stylesheet), it receives the inline height from the dragged item\n\t\t\t\t\tif(!p.height()) { p.height(that.currentItem.innerHeight() - parseInt(that.currentItem.css(\"paddingTop\")||0, 10) - parseInt(that.currentItem.css(\"paddingBottom\")||0, 10)); }\n\t\t\t\t\tif(!p.width()) { p.width(that.currentItem.innerWidth() - parseInt(that.currentItem.css(\"paddingLeft\")||0, 10) - parseInt(that.currentItem.css(\"paddingRight\")||0, 10)); }\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\t//Create the placeholder\n\t\tthat.placeholder = $(o.placeholder.element.call(that.element, that.currentItem));\n\n\t\t//Append it after the actual current item\n\t\tthat.currentItem.after(that.placeholder);\n\n\t\t//Update the size of the placeholder (TODO: Logic to fuzzy, see line 316/317)\n\t\to.placeholder.update(that, that.placeholder);\n\n\t},\n\n\t_createTrPlaceholder: function( sourceTr, targetTr ) {\n\t\tvar that = this;\n\n\t\tsourceTr.children().each(function() {\n\t\t\t$( \"<td>&#160;</td>\", that.document[ 0 ] )\n\t\t\t\t.attr( \"colspan\", $( this ).attr( \"colspan\" ) || 1 )\n\t\t\t\t.appendTo( targetTr );\n\t\t});\n\t},\n\n\t_contactContainers: function(event) {\n\t\tvar i, j, dist, itemWithLeastDistance, posProperty, sizeProperty, cur, nearBottom, floating, axis,\n\t\t\tinnermostContainer = null,\n\t\t\tinnermostIndex = null;\n\n\t\t// get innermost container that intersects with item\n\t\tfor (i = this.containers.length - 1; i >= 0; i--) {\n\n\t\t\t// never consider a container that's located within the item itself\n\t\t\tif($.contains(this.currentItem[0], this.containers[i].element[0])) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif(this._intersectsWith(this.containers[i].containerCache)) {\n\n\t\t\t\t// if we've already found a container and it's more \"inner\" than this, then continue\n\t\t\t\tif(innermostContainer && $.contains(this.containers[i].element[0], innermostContainer.element[0])) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tinnermostContainer = this.containers[i];\n\t\t\t\tinnermostIndex = i;\n\n\t\t\t} else {\n\t\t\t\t// container doesn't intersect. trigger \"out\" event if necessary\n\t\t\t\tif(this.containers[i].containerCache.over) {\n\t\t\t\t\tthis.containers[i]._trigger(\"out\", event, this._uiHash(this));\n\t\t\t\t\tthis.containers[i].containerCache.over = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\t// if no intersecting containers found, return\n\t\tif(!innermostContainer) {\n\t\t\treturn;\n\t\t}\n\n\t\t// move the item into the container if it's not there already\n\t\tif(this.containers.length === 1) {\n\t\t\tif (!this.containers[innermostIndex].containerCache.over) {\n\t\t\t\tthis.containers[innermostIndex]._trigger(\"over\", event, this._uiHash(this));\n\t\t\t\tthis.containers[innermostIndex].containerCache.over = 1;\n\t\t\t}\n\t\t} else {\n\n\t\t\t//When entering a new container, we will find the item with the least distance and append our item near it\n\t\t\tdist = 10000;\n\t\t\titemWithLeastDistance = null;\n\t\t\tfloating = innermostContainer.floating || this._isFloating(this.currentItem);\n\t\t\tposProperty = floating ? \"left\" : \"top\";\n\t\t\tsizeProperty = floating ? \"width\" : \"height\";\n\t\t\taxis = floating ? \"clientX\" : \"clientY\";\n\n\t\t\tfor (j = this.items.length - 1; j >= 0; j--) {\n\t\t\t\tif(!$.contains(this.containers[innermostIndex].element[0], this.items[j].item[0])) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif(this.items[j].item[0] === this.currentItem[0]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tcur = this.items[j].item.offset()[posProperty];\n\t\t\t\tnearBottom = false;\n\t\t\t\tif ( event[ axis ] - cur > this.items[ j ][ sizeProperty ] / 2 ) {\n\t\t\t\t\tnearBottom = true;\n\t\t\t\t}\n\n\t\t\t\tif ( Math.abs( event[ axis ] - cur ) < dist ) {\n\t\t\t\t\tdist = Math.abs( event[ axis ] - cur );\n\t\t\t\t\titemWithLeastDistance = this.items[ j ];\n\t\t\t\t\tthis.direction = nearBottom ? \"up\": \"down\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//Check if dropOnEmpty is enabled\n\t\t\tif(!itemWithLeastDistance && !this.options.dropOnEmpty) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(this.currentContainer === this.containers[innermostIndex]) {\n\t\t\t\tif ( !this.currentContainer.containerCache.over ) {\n\t\t\t\t\tthis.containers[ innermostIndex ]._trigger( \"over\", event, this._uiHash() );\n\t\t\t\t\tthis.currentContainer.containerCache.over = 1;\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\titemWithLeastDistance ? this._rearrange(event, itemWithLeastDistance, null, true) : this._rearrange(event, null, this.containers[innermostIndex].element, true);\n\t\t\tthis._trigger(\"change\", event, this._uiHash());\n\t\t\tthis.containers[innermostIndex]._trigger(\"change\", event, this._uiHash(this));\n\t\t\tthis.currentContainer = this.containers[innermostIndex];\n\n\t\t\t//Update the placeholder\n\t\t\tthis.options.placeholder.update(this.currentContainer, this.placeholder);\n\n\t\t\tthis.containers[innermostIndex]._trigger(\"over\", event, this._uiHash(this));\n\t\t\tthis.containers[innermostIndex].containerCache.over = 1;\n\t\t}\n\n\n\t},\n\n\t_createHelper: function(event) {\n\n\t\tvar o = this.options,\n\t\t\thelper = $.isFunction(o.helper) ? $(o.helper.apply(this.element[0], [event, this.currentItem])) : (o.helper === \"clone\" ? this.currentItem.clone() : this.currentItem);\n\n\t\t//Add the helper to the DOM if that didn't happen already\n\t\tif(!helper.parents(\"body\").length) {\n\t\t\t$(o.appendTo !== \"parent\" ? o.appendTo : this.currentItem[0].parentNode)[0].appendChild(helper[0]);\n\t\t}\n\n\t\tif(helper[0] === this.currentItem[0]) {\n\t\t\tthis._storedCSS = { width: this.currentItem[0].style.width, height: this.currentItem[0].style.height, position: this.currentItem.css(\"position\"), top: this.currentItem.css(\"top\"), left: this.currentItem.css(\"left\") };\n\t\t}\n\n\t\tif(!helper[0].style.width || o.forceHelperSize) {\n\t\t\thelper.width(this.currentItem.width());\n\t\t}\n\t\tif(!helper[0].style.height || o.forceHelperSize) {\n\t\t\thelper.height(this.currentItem.height());\n\t\t}\n\n\t\treturn helper;\n\n\t},\n\n\t_adjustOffsetFromHelper: function(obj) {\n\t\tif (typeof obj === \"string\") {\n\t\t\tobj = obj.split(\" \");\n\t\t}\n\t\tif ($.isArray(obj)) {\n\t\t\tobj = {left: +obj[0], top: +obj[1] || 0};\n\t\t}\n\t\tif (\"left\" in obj) {\n\t\t\tthis.offset.click.left = obj.left + this.margins.left;\n\t\t}\n\t\tif (\"right\" in obj) {\n\t\t\tthis.offset.click.left = this.helperProportions.width - obj.right + this.margins.left;\n\t\t}\n\t\tif (\"top\" in obj) {\n\t\t\tthis.offset.click.top = obj.top + this.margins.top;\n\t\t}\n\t\tif (\"bottom\" in obj) {\n\t\t\tthis.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top;\n\t\t}\n\t},\n\n\t_getParentOffset: function() {\n\n\n\t\t//Get the offsetParent and cache its position\n\t\tthis.offsetParent = this.helper.offsetParent();\n\t\tvar po = this.offsetParent.offset();\n\n\t\t// This is a special case where we need to modify a offset calculated on start, since the following happened:\n\t\t// 1. The position of the helper is absolute, so it's position is calculated based on the next positioned parent\n\t\t// 2. The actual offset parent is a child of the scroll parent, and the scroll parent isn't the document, which means that\n\t\t//    the scroll is included in the initial calculation of the offset of the parent, and never recalculated upon drag\n\t\tif(this.cssPosition === \"absolute\" && this.scrollParent[0] !== this.document[0] && $.contains(this.scrollParent[0], this.offsetParent[0])) {\n\t\t\tpo.left += this.scrollParent.scrollLeft();\n\t\t\tpo.top += this.scrollParent.scrollTop();\n\t\t}\n\n\t\t// This needs to be actually done for all browsers, since pageX/pageY includes this information\n\t\t// with an ugly IE fix\n\t\tif( this.offsetParent[0] === this.document[0].body || (this.offsetParent[0].tagName && this.offsetParent[0].tagName.toLowerCase() === \"html\" && $.ui.ie)) {\n\t\t\tpo = { top: 0, left: 0 };\n\t\t}\n\n\t\treturn {\n\t\t\ttop: po.top + (parseInt(this.offsetParent.css(\"borderTopWidth\"),10) || 0),\n\t\t\tleft: po.left + (parseInt(this.offsetParent.css(\"borderLeftWidth\"),10) || 0)\n\t\t};\n\n\t},\n\n\t_getRelativeOffset: function() {\n\n\t\tif(this.cssPosition === \"relative\") {\n\t\t\tvar p = this.currentItem.position();\n\t\t\treturn {\n\t\t\t\ttop: p.top - (parseInt(this.helper.css(\"top\"),10) || 0) + this.scrollParent.scrollTop(),\n\t\t\t\tleft: p.left - (parseInt(this.helper.css(\"left\"),10) || 0) + this.scrollParent.scrollLeft()\n\t\t\t};\n\t\t} else {\n\t\t\treturn { top: 0, left: 0 };\n\t\t}\n\n\t},\n\n\t_cacheMargins: function() {\n\t\tthis.margins = {\n\t\t\tleft: (parseInt(this.currentItem.css(\"marginLeft\"),10) || 0),\n\t\t\ttop: (parseInt(this.currentItem.css(\"marginTop\"),10) || 0)\n\t\t};\n\t},\n\n\t_cacheHelperProportions: function() {\n\t\tthis.helperProportions = {\n\t\t\twidth: this.helper.outerWidth(),\n\t\t\theight: this.helper.outerHeight()\n\t\t};\n\t},\n\n\t_setContainment: function() {\n\n\t\tvar ce, co, over,\n\t\t\to = this.options;\n\t\tif(o.containment === \"parent\") {\n\t\t\to.containment = this.helper[0].parentNode;\n\t\t}\n\t\tif(o.containment === \"document\" || o.containment === \"window\") {\n\t\t\tthis.containment = [\n\t\t\t\t0 - this.offset.relative.left - this.offset.parent.left,\n\t\t\t\t0 - this.offset.relative.top - this.offset.parent.top,\n\t\t\t\to.containment === \"document\" ? this.document.width() : this.window.width() - this.helperProportions.width - this.margins.left,\n\t\t\t\t(o.containment === \"document\" ? this.document.width() : this.window.height() || this.document[0].body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top\n\t\t\t];\n\t\t}\n\n\t\tif(!(/^(document|window|parent)$/).test(o.containment)) {\n\t\t\tce = $(o.containment)[0];\n\t\t\tco = $(o.containment).offset();\n\t\t\tover = ($(ce).css(\"overflow\") !== \"hidden\");\n\n\t\t\tthis.containment = [\n\t\t\t\tco.left + (parseInt($(ce).css(\"borderLeftWidth\"),10) || 0) + (parseInt($(ce).css(\"paddingLeft\"),10) || 0) - this.margins.left,\n\t\t\t\tco.top + (parseInt($(ce).css(\"borderTopWidth\"),10) || 0) + (parseInt($(ce).css(\"paddingTop\"),10) || 0) - this.margins.top,\n\t\t\t\tco.left+(over ? Math.max(ce.scrollWidth,ce.offsetWidth) : ce.offsetWidth) - (parseInt($(ce).css(\"borderLeftWidth\"),10) || 0) - (parseInt($(ce).css(\"paddingRight\"),10) || 0) - this.helperProportions.width - this.margins.left,\n\t\t\t\tco.top+(over ? Math.max(ce.scrollHeight,ce.offsetHeight) : ce.offsetHeight) - (parseInt($(ce).css(\"borderTopWidth\"),10) || 0) - (parseInt($(ce).css(\"paddingBottom\"),10) || 0) - this.helperProportions.height - this.margins.top\n\t\t\t];\n\t\t}\n\n\t},\n\n\t_convertPositionTo: function(d, pos) {\n\n\t\tif(!pos) {\n\t\t\tpos = this.position;\n\t\t}\n\t\tvar mod = d === \"absolute\" ? 1 : -1,\n\t\t\tscroll = this.cssPosition === \"absolute\" && !(this.scrollParent[0] !== this.document[0] && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent,\n\t\t\tscrollIsRootNode = (/(html|body)/i).test(scroll[0].tagName);\n\n\t\treturn {\n\t\t\ttop: (\n\t\t\t\tpos.top\t+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\n\t\t\t\tthis.offset.relative.top * mod +\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\tthis.offset.parent.top * mod -\t\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\t( ( this.cssPosition === \"fixed\" ? -this.scrollParent.scrollTop() : ( scrollIsRootNode ? 0 : scroll.scrollTop() ) ) * mod)\n\t\t\t),\n\t\t\tleft: (\n\t\t\t\tpos.left +\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\n\t\t\t\tthis.offset.relative.left * mod +\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\tthis.offset.parent.left * mod\t-\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\t( ( this.cssPosition === \"fixed\" ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft() ) * mod)\n\t\t\t)\n\t\t};\n\n\t},\n\n\t_generatePosition: function(event) {\n\n\t\tvar top, left,\n\t\t\to = this.options,\n\t\t\tpageX = event.pageX,\n\t\t\tpageY = event.pageY,\n\t\t\tscroll = this.cssPosition === \"absolute\" && !(this.scrollParent[0] !== this.document[0] && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent, scrollIsRootNode = (/(html|body)/i).test(scroll[0].tagName);\n\n\t\t// This is another very weird special case that only happens for relative elements:\n\t\t// 1. If the css position is relative\n\t\t// 2. and the scroll parent is the document or similar to the offset parent\n\t\t// we have to refresh the relative offset during the scroll so there are no jumps\n\t\tif(this.cssPosition === \"relative\" && !(this.scrollParent[0] !== this.document[0] && this.scrollParent[0] !== this.offsetParent[0])) {\n\t\t\tthis.offset.relative = this._getRelativeOffset();\n\t\t}\n\n\t\t/*\n\t\t * - Position constraining -\n\t\t * Constrain the position to a mix of grid, containment.\n\t\t */\n\n\t\tif(this.originalPosition) { //If we are not dragging yet, we won't check for options\n\n\t\t\tif(this.containment) {\n\t\t\t\tif(event.pageX - this.offset.click.left < this.containment[0]) {\n\t\t\t\t\tpageX = this.containment[0] + this.offset.click.left;\n\t\t\t\t}\n\t\t\t\tif(event.pageY - this.offset.click.top < this.containment[1]) {\n\t\t\t\t\tpageY = this.containment[1] + this.offset.click.top;\n\t\t\t\t}\n\t\t\t\tif(event.pageX - this.offset.click.left > this.containment[2]) {\n\t\t\t\t\tpageX = this.containment[2] + this.offset.click.left;\n\t\t\t\t}\n\t\t\t\tif(event.pageY - this.offset.click.top > this.containment[3]) {\n\t\t\t\t\tpageY = this.containment[3] + this.offset.click.top;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(o.grid) {\n\t\t\t\ttop = this.originalPageY + Math.round((pageY - this.originalPageY) / o.grid[1]) * o.grid[1];\n\t\t\t\tpageY = this.containment ? ( (top - this.offset.click.top >= this.containment[1] && top - this.offset.click.top <= this.containment[3]) ? top : ((top - this.offset.click.top >= this.containment[1]) ? top - o.grid[1] : top + o.grid[1])) : top;\n\n\t\t\t\tleft = this.originalPageX + Math.round((pageX - this.originalPageX) / o.grid[0]) * o.grid[0];\n\t\t\t\tpageX = this.containment ? ( (left - this.offset.click.left >= this.containment[0] && left - this.offset.click.left <= this.containment[2]) ? left : ((left - this.offset.click.left >= this.containment[0]) ? left - o.grid[0] : left + o.grid[0])) : left;\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\t\t\ttop: (\n\t\t\t\tpageY -\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\n\t\t\t\tthis.offset.click.top -\t\t\t\t\t\t\t\t\t\t\t\t\t// Click offset (relative to the element)\n\t\t\t\tthis.offset.relative.top\t-\t\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\tthis.offset.parent.top +\t\t\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\t( ( this.cssPosition === \"fixed\" ? -this.scrollParent.scrollTop() : ( scrollIsRootNode ? 0 : scroll.scrollTop() ) ))\n\t\t\t),\n\t\t\tleft: (\n\t\t\t\tpageX -\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\n\t\t\t\tthis.offset.click.left -\t\t\t\t\t\t\t\t\t\t\t\t// Click offset (relative to the element)\n\t\t\t\tthis.offset.relative.left\t-\t\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\tthis.offset.parent.left +\t\t\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\t( ( this.cssPosition === \"fixed\" ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft() ))\n\t\t\t)\n\t\t};\n\n\t},\n\n\t_rearrange: function(event, i, a, hardRefresh) {\n\n\t\ta ? a[0].appendChild(this.placeholder[0]) : i.item[0].parentNode.insertBefore(this.placeholder[0], (this.direction === \"down\" ? i.item[0] : i.item[0].nextSibling));\n\n\t\t//Various things done here to improve the performance:\n\t\t// 1. we create a setTimeout, that calls refreshPositions\n\t\t// 2. on the instance, we have a counter variable, that get's higher after every append\n\t\t// 3. on the local scope, we copy the counter variable, and check in the timeout, if it's still the same\n\t\t// 4. this lets only the last addition to the timeout stack through\n\t\tthis.counter = this.counter ? ++this.counter : 1;\n\t\tvar counter = this.counter;\n\n\t\tthis._delay(function() {\n\t\t\tif(counter === this.counter) {\n\t\t\t\tthis.refreshPositions(!hardRefresh); //Precompute after each DOM insertion, NOT on mousemove\n\t\t\t}\n\t\t});\n\n\t},\n\n\t_clear: function(event, noPropagation) {\n\n\t\tthis.reverting = false;\n\t\t// We delay all events that have to be triggered to after the point where the placeholder has been removed and\n\t\t// everything else normalized again\n\t\tvar i,\n\t\t\tdelayedTriggers = [];\n\n\t\t// We first have to update the dom position of the actual currentItem\n\t\t// Note: don't do it if the current item is already removed (by a user), or it gets reappended (see #4088)\n\t\tif(!this._noFinalSort && this.currentItem.parent().length) {\n\t\t\tthis.placeholder.before(this.currentItem);\n\t\t}\n\t\tthis._noFinalSort = null;\n\n\t\tif(this.helper[0] === this.currentItem[0]) {\n\t\t\tfor(i in this._storedCSS) {\n\t\t\t\tif(this._storedCSS[i] === \"auto\" || this._storedCSS[i] === \"static\") {\n\t\t\t\t\tthis._storedCSS[i] = \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.currentItem.css(this._storedCSS).removeClass(\"ui-sortable-helper\");\n\t\t} else {\n\t\t\tthis.currentItem.show();\n\t\t}\n\n\t\tif(this.fromOutside && !noPropagation) {\n\t\t\tdelayedTriggers.push(function(event) { this._trigger(\"receive\", event, this._uiHash(this.fromOutside)); });\n\t\t}\n\t\tif((this.fromOutside || this.domPosition.prev !== this.currentItem.prev().not(\".ui-sortable-helper\")[0] || this.domPosition.parent !== this.currentItem.parent()[0]) && !noPropagation) {\n\t\t\tdelayedTriggers.push(function(event) { this._trigger(\"update\", event, this._uiHash()); }); //Trigger update callback if the DOM position has changed\n\t\t}\n\n\t\t// Check if the items Container has Changed and trigger appropriate\n\t\t// events.\n\t\tif (this !== this.currentContainer) {\n\t\t\tif(!noPropagation) {\n\t\t\t\tdelayedTriggers.push(function(event) { this._trigger(\"remove\", event, this._uiHash()); });\n\t\t\t\tdelayedTriggers.push((function(c) { return function(event) { c._trigger(\"receive\", event, this._uiHash(this)); };  }).call(this, this.currentContainer));\n\t\t\t\tdelayedTriggers.push((function(c) { return function(event) { c._trigger(\"update\", event, this._uiHash(this));  }; }).call(this, this.currentContainer));\n\t\t\t}\n\t\t}\n\n\n\t\t//Post events to containers\n\t\tfunction delayEvent( type, instance, container ) {\n\t\t\treturn function( event ) {\n\t\t\t\tcontainer._trigger( type, event, instance._uiHash( instance ) );\n\t\t\t};\n\t\t}\n\t\tfor (i = this.containers.length - 1; i >= 0; i--){\n\t\t\tif (!noPropagation) {\n\t\t\t\tdelayedTriggers.push( delayEvent( \"deactivate\", this, this.containers[ i ] ) );\n\t\t\t}\n\t\t\tif(this.containers[i].containerCache.over) {\n\t\t\t\tdelayedTriggers.push( delayEvent( \"out\", this, this.containers[ i ] ) );\n\t\t\t\tthis.containers[i].containerCache.over = 0;\n\t\t\t}\n\t\t}\n\n\t\t//Do what was originally in plugins\n\t\tif ( this.storedCursor ) {\n\t\t\tthis.document.find( \"body\" ).css( \"cursor\", this.storedCursor );\n\t\t\tthis.storedStylesheet.remove();\n\t\t}\n\t\tif(this._storedOpacity) {\n\t\t\tthis.helper.css(\"opacity\", this._storedOpacity);\n\t\t}\n\t\tif(this._storedZIndex) {\n\t\t\tthis.helper.css(\"zIndex\", this._storedZIndex === \"auto\" ? \"\" : this._storedZIndex);\n\t\t}\n\n\t\tthis.dragging = false;\n\n\t\tif(!noPropagation) {\n\t\t\tthis._trigger(\"beforeStop\", event, this._uiHash());\n\t\t}\n\n\t\t//$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately, it unbinds ALL events from the original node!\n\t\tthis.placeholder[0].parentNode.removeChild(this.placeholder[0]);\n\n\t\tif ( !this.cancelHelperRemoval ) {\n\t\t\tif ( this.helper[ 0 ] !== this.currentItem[ 0 ] ) {\n\t\t\t\tthis.helper.remove();\n\t\t\t}\n\t\t\tthis.helper = null;\n\t\t}\n\n\t\tif(!noPropagation) {\n\t\t\tfor (i=0; i < delayedTriggers.length; i++) {\n\t\t\t\tdelayedTriggers[i].call(this, event);\n\t\t\t} //Trigger all delayed events\n\t\t\tthis._trigger(\"stop\", event, this._uiHash());\n\t\t}\n\n\t\tthis.fromOutside = false;\n\t\treturn !this.cancelHelperRemoval;\n\n\t},\n\n\t_trigger: function() {\n\t\tif ($.Widget.prototype._trigger.apply(this, arguments) === false) {\n\t\t\tthis.cancel();\n\t\t}\n\t},\n\n\t_uiHash: function(_inst) {\n\t\tvar inst = _inst || this;\n\t\treturn {\n\t\t\thelper: inst.helper,\n\t\t\tplaceholder: inst.placeholder || $([]),\n\t\t\tposition: inst.position,\n\t\t\toriginalPosition: inst.originalPosition,\n\t\t\toffset: inst.positionAbs,\n\t\t\titem: inst.currentItem,\n\t\t\tsender: _inst ? _inst.element : null\n\t\t};\n\t}\n\n});\n\n\n/*!\n * jQuery UI Spinner 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/spinner/\n */\n\n\nfunction spinner_modifier( fn ) {\n\treturn function() {\n\t\tvar previous = this.element.val();\n\t\tfn.apply( this, arguments );\n\t\tthis._refresh();\n\t\tif ( previous !== this.element.val() ) {\n\t\t\tthis._trigger( \"change\" );\n\t\t}\n\t};\n}\n\nvar spinner = $.widget( \"ui.spinner\", {\n\tversion: \"1.11.4\",\n\tdefaultElement: \"<input>\",\n\twidgetEventPrefix: \"spin\",\n\toptions: {\n\t\tculture: null,\n\t\ticons: {\n\t\t\tdown: \"ui-icon-triangle-1-s\",\n\t\t\tup: \"ui-icon-triangle-1-n\"\n\t\t},\n\t\tincremental: true,\n\t\tmax: null,\n\t\tmin: null,\n\t\tnumberFormat: null,\n\t\tpage: 10,\n\t\tstep: 1,\n\n\t\tchange: null,\n\t\tspin: null,\n\t\tstart: null,\n\t\tstop: null\n\t},\n\n\t_create: function() {\n\t\t// handle string values that need to be parsed\n\t\tthis._setOption( \"max\", this.options.max );\n\t\tthis._setOption( \"min\", this.options.min );\n\t\tthis._setOption( \"step\", this.options.step );\n\n\t\t// Only format if there is a value, prevents the field from being marked\n\t\t// as invalid in Firefox, see #9573.\n\t\tif ( this.value() !== \"\" ) {\n\t\t\t// Format the value, but don't constrain.\n\t\t\tthis._value( this.element.val(), true );\n\t\t}\n\n\t\tthis._draw();\n\t\tthis._on( this._events );\n\t\tthis._refresh();\n\n\t\t// turning off autocomplete prevents the browser from remembering the\n\t\t// value when navigating through history, so we re-enable autocomplete\n\t\t// if the page is unloaded before the widget is destroyed. #7790\n\t\tthis._on( this.window, {\n\t\t\tbeforeunload: function() {\n\t\t\t\tthis.element.removeAttr( \"autocomplete\" );\n\t\t\t}\n\t\t});\n\t},\n\n\t_getCreateOptions: function() {\n\t\tvar options = {},\n\t\t\telement = this.element;\n\n\t\t$.each( [ \"min\", \"max\", \"step\" ], function( i, option ) {\n\t\t\tvar value = element.attr( option );\n\t\t\tif ( value !== undefined && value.length ) {\n\t\t\t\toptions[ option ] = value;\n\t\t\t}\n\t\t});\n\n\t\treturn options;\n\t},\n\n\t_events: {\n\t\tkeydown: function( event ) {\n\t\t\tif ( this._start( event ) && this._keydown( event ) ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t},\n\t\tkeyup: \"_stop\",\n\t\tfocus: function() {\n\t\t\tthis.previous = this.element.val();\n\t\t},\n\t\tblur: function( event ) {\n\t\t\tif ( this.cancelBlur ) {\n\t\t\t\tdelete this.cancelBlur;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._stop();\n\t\t\tthis._refresh();\n\t\t\tif ( this.previous !== this.element.val() ) {\n\t\t\t\tthis._trigger( \"change\", event );\n\t\t\t}\n\t\t},\n\t\tmousewheel: function( event, delta ) {\n\t\t\tif ( !delta ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ( !this.spinning && !this._start( event ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tthis._spin( (delta > 0 ? 1 : -1) * this.options.step, event );\n\t\t\tclearTimeout( this.mousewheelTimer );\n\t\t\tthis.mousewheelTimer = this._delay(function() {\n\t\t\t\tif ( this.spinning ) {\n\t\t\t\t\tthis._stop( event );\n\t\t\t\t}\n\t\t\t}, 100 );\n\t\t\tevent.preventDefault();\n\t\t},\n\t\t\"mousedown .ui-spinner-button\": function( event ) {\n\t\t\tvar previous;\n\n\t\t\t// We never want the buttons to have focus; whenever the user is\n\t\t\t// interacting with the spinner, the focus should be on the input.\n\t\t\t// If the input is focused then this.previous is properly set from\n\t\t\t// when the input first received focus. If the input is not focused\n\t\t\t// then we need to set this.previous based on the value before spinning.\n\t\t\tprevious = this.element[0] === this.document[0].activeElement ?\n\t\t\t\tthis.previous : this.element.val();\n\t\t\tfunction checkFocus() {\n\t\t\t\tvar isActive = this.element[0] === this.document[0].activeElement;\n\t\t\t\tif ( !isActive ) {\n\t\t\t\t\tthis.element.focus();\n\t\t\t\t\tthis.previous = previous;\n\t\t\t\t\t// support: IE\n\t\t\t\t\t// IE sets focus asynchronously, so we need to check if focus\n\t\t\t\t\t// moved off of the input because the user clicked on the button.\n\t\t\t\t\tthis._delay(function() {\n\t\t\t\t\t\tthis.previous = previous;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// ensure focus is on (or stays on) the text field\n\t\t\tevent.preventDefault();\n\t\t\tcheckFocus.call( this );\n\n\t\t\t// support: IE\n\t\t\t// IE doesn't prevent moving focus even with event.preventDefault()\n\t\t\t// so we set a flag to know when we should ignore the blur event\n\t\t\t// and check (again) if focus moved off of the input.\n\t\t\tthis.cancelBlur = true;\n\t\t\tthis._delay(function() {\n\t\t\t\tdelete this.cancelBlur;\n\t\t\t\tcheckFocus.call( this );\n\t\t\t});\n\n\t\t\tif ( this._start( event ) === false ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._repeat( null, $( event.currentTarget ).hasClass( \"ui-spinner-up\" ) ? 1 : -1, event );\n\t\t},\n\t\t\"mouseup .ui-spinner-button\": \"_stop\",\n\t\t\"mouseenter .ui-spinner-button\": function( event ) {\n\t\t\t// button will add ui-state-active if mouse was down while mouseleave and kept down\n\t\t\tif ( !$( event.currentTarget ).hasClass( \"ui-state-active\" ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( this._start( event ) === false ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis._repeat( null, $( event.currentTarget ).hasClass( \"ui-spinner-up\" ) ? 1 : -1, event );\n\t\t},\n\t\t// TODO: do we really want to consider this a stop?\n\t\t// shouldn't we just stop the repeater and wait until mouseup before\n\t\t// we trigger the stop event?\n\t\t\"mouseleave .ui-spinner-button\": \"_stop\"\n\t},\n\n\t_draw: function() {\n\t\tvar uiSpinner = this.uiSpinner = this.element\n\t\t\t.addClass( \"ui-spinner-input\" )\n\t\t\t.attr( \"autocomplete\", \"off\" )\n\t\t\t.wrap( this._uiSpinnerHtml() )\n\t\t\t.parent()\n\t\t\t\t// add buttons\n\t\t\t\t.append( this._buttonHtml() );\n\n\t\tthis.element.attr( \"role\", \"spinbutton\" );\n\n\t\t// button bindings\n\t\tthis.buttons = uiSpinner.find( \".ui-spinner-button\" )\n\t\t\t.attr( \"tabIndex\", -1 )\n\t\t\t.button()\n\t\t\t.removeClass( \"ui-corner-all\" );\n\n\t\t// IE 6 doesn't understand height: 50% for the buttons\n\t\t// unless the wrapper has an explicit height\n\t\tif ( this.buttons.height() > Math.ceil( uiSpinner.height() * 0.5 ) &&\n\t\t\t\tuiSpinner.height() > 0 ) {\n\t\t\tuiSpinner.height( uiSpinner.height() );\n\t\t}\n\n\t\t// disable spinner if element was already disabled\n\t\tif ( this.options.disabled ) {\n\t\t\tthis.disable();\n\t\t}\n\t},\n\n\t_keydown: function( event ) {\n\t\tvar options = this.options,\n\t\t\tkeyCode = $.ui.keyCode;\n\n\t\tswitch ( event.keyCode ) {\n\t\tcase keyCode.UP:\n\t\t\tthis._repeat( null, 1, event );\n\t\t\treturn true;\n\t\tcase keyCode.DOWN:\n\t\t\tthis._repeat( null, -1, event );\n\t\t\treturn true;\n\t\tcase keyCode.PAGE_UP:\n\t\t\tthis._repeat( null, options.page, event );\n\t\t\treturn true;\n\t\tcase keyCode.PAGE_DOWN:\n\t\t\tthis._repeat( null, -options.page, event );\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t_uiSpinnerHtml: function() {\n\t\treturn \"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>\";\n\t},\n\n\t_buttonHtml: function() {\n\t\treturn \"\" +\n\t\t\t\"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'>\" +\n\t\t\t\t\"<span class='ui-icon \" + this.options.icons.up + \"'>&#9650;</span>\" +\n\t\t\t\"</a>\" +\n\t\t\t\"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>\" +\n\t\t\t\t\"<span class='ui-icon \" + this.options.icons.down + \"'>&#9660;</span>\" +\n\t\t\t\"</a>\";\n\t},\n\n\t_start: function( event ) {\n\t\tif ( !this.spinning && this._trigger( \"start\", event ) === false ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( !this.counter ) {\n\t\t\tthis.counter = 1;\n\t\t}\n\t\tthis.spinning = true;\n\t\treturn true;\n\t},\n\n\t_repeat: function( i, steps, event ) {\n\t\ti = i || 500;\n\n\t\tclearTimeout( this.timer );\n\t\tthis.timer = this._delay(function() {\n\t\t\tthis._repeat( 40, steps, event );\n\t\t}, i );\n\n\t\tthis._spin( steps * this.options.step, event );\n\t},\n\n\t_spin: function( step, event ) {\n\t\tvar value = this.value() || 0;\n\n\t\tif ( !this.counter ) {\n\t\t\tthis.counter = 1;\n\t\t}\n\n\t\tvalue = this._adjustValue( value + step * this._increment( this.counter ) );\n\n\t\tif ( !this.spinning || this._trigger( \"spin\", event, { value: value } ) !== false) {\n\t\t\tthis._value( value );\n\t\t\tthis.counter++;\n\t\t}\n\t},\n\n\t_increment: function( i ) {\n\t\tvar incremental = this.options.incremental;\n\n\t\tif ( incremental ) {\n\t\t\treturn $.isFunction( incremental ) ?\n\t\t\t\tincremental( i ) :\n\t\t\t\tMath.floor( i * i * i / 50000 - i * i / 500 + 17 * i / 200 + 1 );\n\t\t}\n\n\t\treturn 1;\n\t},\n\n\t_precision: function() {\n\t\tvar precision = this._precisionOf( this.options.step );\n\t\tif ( this.options.min !== null ) {\n\t\t\tprecision = Math.max( precision, this._precisionOf( this.options.min ) );\n\t\t}\n\t\treturn precision;\n\t},\n\n\t_precisionOf: function( num ) {\n\t\tvar str = num.toString(),\n\t\t\tdecimal = str.indexOf( \".\" );\n\t\treturn decimal === -1 ? 0 : str.length - decimal - 1;\n\t},\n\n\t_adjustValue: function( value ) {\n\t\tvar base, aboveMin,\n\t\t\toptions = this.options;\n\n\t\t// make sure we're at a valid step\n\t\t// - find out where we are relative to the base (min or 0)\n\t\tbase = options.min !== null ? options.min : 0;\n\t\taboveMin = value - base;\n\t\t// - round to the nearest step\n\t\taboveMin = Math.round(aboveMin / options.step) * options.step;\n\t\t// - rounding is based on 0, so adjust back to our base\n\t\tvalue = base + aboveMin;\n\n\t\t// fix precision from bad JS floating point math\n\t\tvalue = parseFloat( value.toFixed( this._precision() ) );\n\n\t\t// clamp the value\n\t\tif ( options.max !== null && value > options.max) {\n\t\t\treturn options.max;\n\t\t}\n\t\tif ( options.min !== null && value < options.min ) {\n\t\t\treturn options.min;\n\t\t}\n\n\t\treturn value;\n\t},\n\n\t_stop: function( event ) {\n\t\tif ( !this.spinning ) {\n\t\t\treturn;\n\t\t}\n\n\t\tclearTimeout( this.timer );\n\t\tclearTimeout( this.mousewheelTimer );\n\t\tthis.counter = 0;\n\t\tthis.spinning = false;\n\t\tthis._trigger( \"stop\", event );\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tif ( key === \"culture\" || key === \"numberFormat\" ) {\n\t\t\tvar prevValue = this._parse( this.element.val() );\n\t\t\tthis.options[ key ] = value;\n\t\t\tthis.element.val( this._format( prevValue ) );\n\t\t\treturn;\n\t\t}\n\n\t\tif ( key === \"max\" || key === \"min\" || key === \"step\" ) {\n\t\t\tif ( typeof value === \"string\" ) {\n\t\t\t\tvalue = this._parse( value );\n\t\t\t}\n\t\t}\n\t\tif ( key === \"icons\" ) {\n\t\t\tthis.buttons.first().find( \".ui-icon\" )\n\t\t\t\t.removeClass( this.options.icons.up )\n\t\t\t\t.addClass( value.up );\n\t\t\tthis.buttons.last().find( \".ui-icon\" )\n\t\t\t\t.removeClass( this.options.icons.down )\n\t\t\t\t.addClass( value.down );\n\t\t}\n\n\t\tthis._super( key, value );\n\n\t\tif ( key === \"disabled\" ) {\n\t\t\tthis.widget().toggleClass( \"ui-state-disabled\", !!value );\n\t\t\tthis.element.prop( \"disabled\", !!value );\n\t\t\tthis.buttons.button( value ? \"disable\" : \"enable\" );\n\t\t}\n\t},\n\n\t_setOptions: spinner_modifier(function( options ) {\n\t\tthis._super( options );\n\t}),\n\n\t_parse: function( val ) {\n\t\tif ( typeof val === \"string\" && val !== \"\" ) {\n\t\t\tval = window.Globalize && this.options.numberFormat ?\n\t\t\t\tGlobalize.parseFloat( val, 10, this.options.culture ) : +val;\n\t\t}\n\t\treturn val === \"\" || isNaN( val ) ? null : val;\n\t},\n\n\t_format: function( value ) {\n\t\tif ( value === \"\" ) {\n\t\t\treturn \"\";\n\t\t}\n\t\treturn window.Globalize && this.options.numberFormat ?\n\t\t\tGlobalize.format( value, this.options.numberFormat, this.options.culture ) :\n\t\t\tvalue;\n\t},\n\n\t_refresh: function() {\n\t\tthis.element.attr({\n\t\t\t\"aria-valuemin\": this.options.min,\n\t\t\t\"aria-valuemax\": this.options.max,\n\t\t\t// TODO: what should we do with values that can't be parsed?\n\t\t\t\"aria-valuenow\": this._parse( this.element.val() )\n\t\t});\n\t},\n\n\tisValid: function() {\n\t\tvar value = this.value();\n\n\t\t// null is invalid\n\t\tif ( value === null ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// if value gets adjusted, it's invalid\n\t\treturn value === this._adjustValue( value );\n\t},\n\n\t// update the value without triggering change\n\t_value: function( value, allowAny ) {\n\t\tvar parsed;\n\t\tif ( value !== \"\" ) {\n\t\t\tparsed = this._parse( value );\n\t\t\tif ( parsed !== null ) {\n\t\t\t\tif ( !allowAny ) {\n\t\t\t\t\tparsed = this._adjustValue( parsed );\n\t\t\t\t}\n\t\t\t\tvalue = this._format( parsed );\n\t\t\t}\n\t\t}\n\t\tthis.element.val( value );\n\t\tthis._refresh();\n\t},\n\n\t_destroy: function() {\n\t\tthis.element\n\t\t\t.removeClass( \"ui-spinner-input\" )\n\t\t\t.prop( \"disabled\", false )\n\t\t\t.removeAttr( \"autocomplete\" )\n\t\t\t.removeAttr( \"role\" )\n\t\t\t.removeAttr( \"aria-valuemin\" )\n\t\t\t.removeAttr( \"aria-valuemax\" )\n\t\t\t.removeAttr( \"aria-valuenow\" );\n\t\tthis.uiSpinner.replaceWith( this.element );\n\t},\n\n\tstepUp: spinner_modifier(function( steps ) {\n\t\tthis._stepUp( steps );\n\t}),\n\t_stepUp: function( steps ) {\n\t\tif ( this._start() ) {\n\t\t\tthis._spin( (steps || 1) * this.options.step );\n\t\t\tthis._stop();\n\t\t}\n\t},\n\n\tstepDown: spinner_modifier(function( steps ) {\n\t\tthis._stepDown( steps );\n\t}),\n\t_stepDown: function( steps ) {\n\t\tif ( this._start() ) {\n\t\t\tthis._spin( (steps || 1) * -this.options.step );\n\t\t\tthis._stop();\n\t\t}\n\t},\n\n\tpageUp: spinner_modifier(function( pages ) {\n\t\tthis._stepUp( (pages || 1) * this.options.page );\n\t}),\n\n\tpageDown: spinner_modifier(function( pages ) {\n\t\tthis._stepDown( (pages || 1) * this.options.page );\n\t}),\n\n\tvalue: function( newVal ) {\n\t\tif ( !arguments.length ) {\n\t\t\treturn this._parse( this.element.val() );\n\t\t}\n\t\tspinner_modifier( this._value ).call( this, newVal );\n\t},\n\n\twidget: function() {\n\t\treturn this.uiSpinner;\n\t}\n});\n\n\n/*!\n * jQuery UI Tabs 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/tabs/\n */\n\n\nvar tabs = $.widget( \"ui.tabs\", {\n\tversion: \"1.11.4\",\n\tdelay: 300,\n\toptions: {\n\t\tactive: null,\n\t\tcollapsible: false,\n\t\tevent: \"click\",\n\t\theightStyle: \"content\",\n\t\thide: null,\n\t\tshow: null,\n\n\t\t// callbacks\n\t\tactivate: null,\n\t\tbeforeActivate: null,\n\t\tbeforeLoad: null,\n\t\tload: null\n\t},\n\n\t_isLocal: (function() {\n\t\tvar rhash = /#.*$/;\n\n\t\treturn function( anchor ) {\n\t\t\tvar anchorUrl, locationUrl;\n\n\t\t\t// support: IE7\n\t\t\t// IE7 doesn't normalize the href property when set via script (#9317)\n\t\t\tanchor = anchor.cloneNode( false );\n\n\t\t\tanchorUrl = anchor.href.replace( rhash, \"\" );\n\t\t\tlocationUrl = location.href.replace( rhash, \"\" );\n\n\t\t\t// decoding may throw an error if the URL isn't UTF-8 (#9518)\n\t\t\ttry {\n\t\t\t\tanchorUrl = decodeURIComponent( anchorUrl );\n\t\t\t} catch ( error ) {}\n\t\t\ttry {\n\t\t\t\tlocationUrl = decodeURIComponent( locationUrl );\n\t\t\t} catch ( error ) {}\n\n\t\t\treturn anchor.hash.length > 1 && anchorUrl === locationUrl;\n\t\t};\n\t})(),\n\n\t_create: function() {\n\t\tvar that = this,\n\t\t\toptions = this.options;\n\n\t\tthis.running = false;\n\n\t\tthis.element\n\t\t\t.addClass( \"ui-tabs ui-widget ui-widget-content ui-corner-all\" )\n\t\t\t.toggleClass( \"ui-tabs-collapsible\", options.collapsible );\n\n\t\tthis._processTabs();\n\t\toptions.active = this._initialActive();\n\n\t\t// Take disabling tabs via class attribute from HTML\n\t\t// into account and update option properly.\n\t\tif ( $.isArray( options.disabled ) ) {\n\t\t\toptions.disabled = $.unique( options.disabled.concat(\n\t\t\t\t$.map( this.tabs.filter( \".ui-state-disabled\" ), function( li ) {\n\t\t\t\t\treturn that.tabs.index( li );\n\t\t\t\t})\n\t\t\t) ).sort();\n\t\t}\n\n\t\t// check for length avoids error when initializing empty list\n\t\tif ( this.options.active !== false && this.anchors.length ) {\n\t\t\tthis.active = this._findActive( options.active );\n\t\t} else {\n\t\t\tthis.active = $();\n\t\t}\n\n\t\tthis._refresh();\n\n\t\tif ( this.active.length ) {\n\t\t\tthis.load( options.active );\n\t\t}\n\t},\n\n\t_initialActive: function() {\n\t\tvar active = this.options.active,\n\t\t\tcollapsible = this.options.collapsible,\n\t\t\tlocationHash = location.hash.substring( 1 );\n\n\t\tif ( active === null ) {\n\t\t\t// check the fragment identifier in the URL\n\t\t\tif ( locationHash ) {\n\t\t\t\tthis.tabs.each(function( i, tab ) {\n\t\t\t\t\tif ( $( tab ).attr( \"aria-controls\" ) === locationHash ) {\n\t\t\t\t\t\tactive = i;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// check for a tab marked active via a class\n\t\t\tif ( active === null ) {\n\t\t\t\tactive = this.tabs.index( this.tabs.filter( \".ui-tabs-active\" ) );\n\t\t\t}\n\n\t\t\t// no active tab, set to false\n\t\t\tif ( active === null || active === -1 ) {\n\t\t\t\tactive = this.tabs.length ? 0 : false;\n\t\t\t}\n\t\t}\n\n\t\t// handle numbers: negative, out of range\n\t\tif ( active !== false ) {\n\t\t\tactive = this.tabs.index( this.tabs.eq( active ) );\n\t\t\tif ( active === -1 ) {\n\t\t\t\tactive = collapsible ? false : 0;\n\t\t\t}\n\t\t}\n\n\t\t// don't allow collapsible: false and active: false\n\t\tif ( !collapsible && active === false && this.anchors.length ) {\n\t\t\tactive = 0;\n\t\t}\n\n\t\treturn active;\n\t},\n\n\t_getCreateEventData: function() {\n\t\treturn {\n\t\t\ttab: this.active,\n\t\t\tpanel: !this.active.length ? $() : this._getPanelForTab( this.active )\n\t\t};\n\t},\n\n\t_tabKeydown: function( event ) {\n\t\tvar focusedTab = $( this.document[0].activeElement ).closest( \"li\" ),\n\t\t\tselectedIndex = this.tabs.index( focusedTab ),\n\t\t\tgoingForward = true;\n\n\t\tif ( this._handlePageNav( event ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tswitch ( event.keyCode ) {\n\t\t\tcase $.ui.keyCode.RIGHT:\n\t\t\tcase $.ui.keyCode.DOWN:\n\t\t\t\tselectedIndex++;\n\t\t\t\tbreak;\n\t\t\tcase $.ui.keyCode.UP:\n\t\t\tcase $.ui.keyCode.LEFT:\n\t\t\t\tgoingForward = false;\n\t\t\t\tselectedIndex--;\n\t\t\t\tbreak;\n\t\t\tcase $.ui.keyCode.END:\n\t\t\t\tselectedIndex = this.anchors.length - 1;\n\t\t\t\tbreak;\n\t\t\tcase $.ui.keyCode.HOME:\n\t\t\t\tselectedIndex = 0;\n\t\t\t\tbreak;\n\t\t\tcase $.ui.keyCode.SPACE:\n\t\t\t\t// Activate only, no collapsing\n\t\t\t\tevent.preventDefault();\n\t\t\t\tclearTimeout( this.activating );\n\t\t\t\tthis._activate( selectedIndex );\n\t\t\t\treturn;\n\t\t\tcase $.ui.keyCode.ENTER:\n\t\t\t\t// Toggle (cancel delayed activation, allow collapsing)\n\t\t\t\tevent.preventDefault();\n\t\t\t\tclearTimeout( this.activating );\n\t\t\t\t// Determine if we should collapse or activate\n\t\t\t\tthis._activate( selectedIndex === this.options.active ? false : selectedIndex );\n\t\t\t\treturn;\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\n\t\t// Focus the appropriate tab, based on which key was pressed\n\t\tevent.preventDefault();\n\t\tclearTimeout( this.activating );\n\t\tselectedIndex = this._focusNextTab( selectedIndex, goingForward );\n\n\t\t// Navigating with control/command key will prevent automatic activation\n\t\tif ( !event.ctrlKey && !event.metaKey ) {\n\n\t\t\t// Update aria-selected immediately so that AT think the tab is already selected.\n\t\t\t// Otherwise AT may confuse the user by stating that they need to activate the tab,\n\t\t\t// but the tab will already be activated by the time the announcement finishes.\n\t\t\tfocusedTab.attr( \"aria-selected\", \"false\" );\n\t\t\tthis.tabs.eq( selectedIndex ).attr( \"aria-selected\", \"true\" );\n\n\t\t\tthis.activating = this._delay(function() {\n\t\t\t\tthis.option( \"active\", selectedIndex );\n\t\t\t}, this.delay );\n\t\t}\n\t},\n\n\t_panelKeydown: function( event ) {\n\t\tif ( this._handlePageNav( event ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Ctrl+up moves focus to the current tab\n\t\tif ( event.ctrlKey && event.keyCode === $.ui.keyCode.UP ) {\n\t\t\tevent.preventDefault();\n\t\t\tthis.active.focus();\n\t\t}\n\t},\n\n\t// Alt+page up/down moves focus to the previous/next tab (and activates)\n\t_handlePageNav: function( event ) {\n\t\tif ( event.altKey && event.keyCode === $.ui.keyCode.PAGE_UP ) {\n\t\t\tthis._activate( this._focusNextTab( this.options.active - 1, false ) );\n\t\t\treturn true;\n\t\t}\n\t\tif ( event.altKey && event.keyCode === $.ui.keyCode.PAGE_DOWN ) {\n\t\t\tthis._activate( this._focusNextTab( this.options.active + 1, true ) );\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t_findNextTab: function( index, goingForward ) {\n\t\tvar lastTabIndex = this.tabs.length - 1;\n\n\t\tfunction constrain() {\n\t\t\tif ( index > lastTabIndex ) {\n\t\t\t\tindex = 0;\n\t\t\t}\n\t\t\tif ( index < 0 ) {\n\t\t\t\tindex = lastTabIndex;\n\t\t\t}\n\t\t\treturn index;\n\t\t}\n\n\t\twhile ( $.inArray( constrain(), this.options.disabled ) !== -1 ) {\n\t\t\tindex = goingForward ? index + 1 : index - 1;\n\t\t}\n\n\t\treturn index;\n\t},\n\n\t_focusNextTab: function( index, goingForward ) {\n\t\tindex = this._findNextTab( index, goingForward );\n\t\tthis.tabs.eq( index ).focus();\n\t\treturn index;\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tif ( key === \"active\" ) {\n\t\t\t// _activate() will handle invalid values and update this.options\n\t\t\tthis._activate( value );\n\t\t\treturn;\n\t\t}\n\n\t\tif ( key === \"disabled\" ) {\n\t\t\t// don't use the widget factory's disabled handling\n\t\t\tthis._setupDisabled( value );\n\t\t\treturn;\n\t\t}\n\n\t\tthis._super( key, value);\n\n\t\tif ( key === \"collapsible\" ) {\n\t\t\tthis.element.toggleClass( \"ui-tabs-collapsible\", value );\n\t\t\t// Setting collapsible: false while collapsed; open first panel\n\t\t\tif ( !value && this.options.active === false ) {\n\t\t\t\tthis._activate( 0 );\n\t\t\t}\n\t\t}\n\n\t\tif ( key === \"event\" ) {\n\t\t\tthis._setupEvents( value );\n\t\t}\n\n\t\tif ( key === \"heightStyle\" ) {\n\t\t\tthis._setupHeightStyle( value );\n\t\t}\n\t},\n\n\t_sanitizeSelector: function( hash ) {\n\t\treturn hash ? hash.replace( /[!\"$%&'()*+,.\\/:;<=>?@\\[\\]\\^`{|}~]/g, \"\\\\$&\" ) : \"\";\n\t},\n\n\trefresh: function() {\n\t\tvar options = this.options,\n\t\t\tlis = this.tablist.children( \":has(a[href])\" );\n\n\t\t// get disabled tabs from class attribute from HTML\n\t\t// this will get converted to a boolean if needed in _refresh()\n\t\toptions.disabled = $.map( lis.filter( \".ui-state-disabled\" ), function( tab ) {\n\t\t\treturn lis.index( tab );\n\t\t});\n\n\t\tthis._processTabs();\n\n\t\t// was collapsed or no tabs\n\t\tif ( options.active === false || !this.anchors.length ) {\n\t\t\toptions.active = false;\n\t\t\tthis.active = $();\n\t\t// was active, but active tab is gone\n\t\t} else if ( this.active.length && !$.contains( this.tablist[ 0 ], this.active[ 0 ] ) ) {\n\t\t\t// all remaining tabs are disabled\n\t\t\tif ( this.tabs.length === options.disabled.length ) {\n\t\t\t\toptions.active = false;\n\t\t\t\tthis.active = $();\n\t\t\t// activate previous tab\n\t\t\t} else {\n\t\t\t\tthis._activate( this._findNextTab( Math.max( 0, options.active - 1 ), false ) );\n\t\t\t}\n\t\t// was active, active tab still exists\n\t\t} else {\n\t\t\t// make sure active index is correct\n\t\t\toptions.active = this.tabs.index( this.active );\n\t\t}\n\n\t\tthis._refresh();\n\t},\n\n\t_refresh: function() {\n\t\tthis._setupDisabled( this.options.disabled );\n\t\tthis._setupEvents( this.options.event );\n\t\tthis._setupHeightStyle( this.options.heightStyle );\n\n\t\tthis.tabs.not( this.active ).attr({\n\t\t\t\"aria-selected\": \"false\",\n\t\t\t\"aria-expanded\": \"false\",\n\t\t\ttabIndex: -1\n\t\t});\n\t\tthis.panels.not( this._getPanelForTab( this.active ) )\n\t\t\t.hide()\n\t\t\t.attr({\n\t\t\t\t\"aria-hidden\": \"true\"\n\t\t\t});\n\n\t\t// Make sure one tab is in the tab order\n\t\tif ( !this.active.length ) {\n\t\t\tthis.tabs.eq( 0 ).attr( \"tabIndex\", 0 );\n\t\t} else {\n\t\t\tthis.active\n\t\t\t\t.addClass( \"ui-tabs-active ui-state-active\" )\n\t\t\t\t.attr({\n\t\t\t\t\t\"aria-selected\": \"true\",\n\t\t\t\t\t\"aria-expanded\": \"true\",\n\t\t\t\t\ttabIndex: 0\n\t\t\t\t});\n\t\t\tthis._getPanelForTab( this.active )\n\t\t\t\t.show()\n\t\t\t\t.attr({\n\t\t\t\t\t\"aria-hidden\": \"false\"\n\t\t\t\t});\n\t\t}\n\t},\n\n\t_processTabs: function() {\n\t\tvar that = this,\n\t\t\tprevTabs = this.tabs,\n\t\t\tprevAnchors = this.anchors,\n\t\t\tprevPanels = this.panels;\n\n\t\tthis.tablist = this._getList()\n\t\t\t.addClass( \"ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all\" )\n\t\t\t.attr( \"role\", \"tablist\" )\n\n\t\t\t// Prevent users from focusing disabled tabs via click\n\t\t\t.delegate( \"> li\", \"mousedown\" + this.eventNamespace, function( event ) {\n\t\t\t\tif ( $( this ).is( \".ui-state-disabled\" ) ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t})\n\n\t\t\t// support: IE <9\n\t\t\t// Preventing the default action in mousedown doesn't prevent IE\n\t\t\t// from focusing the element, so if the anchor gets focused, blur.\n\t\t\t// We don't have to worry about focusing the previously focused\n\t\t\t// element since clicking on a non-focusable element should focus\n\t\t\t// the body anyway.\n\t\t\t.delegate( \".ui-tabs-anchor\", \"focus\" + this.eventNamespace, function() {\n\t\t\t\tif ( $( this ).closest( \"li\" ).is( \".ui-state-disabled\" ) ) {\n\t\t\t\t\tthis.blur();\n\t\t\t\t}\n\t\t\t});\n\n\t\tthis.tabs = this.tablist.find( \"> li:has(a[href])\" )\n\t\t\t.addClass( \"ui-state-default ui-corner-top\" )\n\t\t\t.attr({\n\t\t\t\trole: \"tab\",\n\t\t\t\ttabIndex: -1\n\t\t\t});\n\n\t\tthis.anchors = this.tabs.map(function() {\n\t\t\t\treturn $( \"a\", this )[ 0 ];\n\t\t\t})\n\t\t\t.addClass( \"ui-tabs-anchor\" )\n\t\t\t.attr({\n\t\t\t\trole: \"presentation\",\n\t\t\t\ttabIndex: -1\n\t\t\t});\n\n\t\tthis.panels = $();\n\n\t\tthis.anchors.each(function( i, anchor ) {\n\t\t\tvar selector, panel, panelId,\n\t\t\t\tanchorId = $( anchor ).uniqueId().attr( \"id\" ),\n\t\t\t\ttab = $( anchor ).closest( \"li\" ),\n\t\t\t\toriginalAriaControls = tab.attr( \"aria-controls\" );\n\n\t\t\t// inline tab\n\t\t\tif ( that._isLocal( anchor ) ) {\n\t\t\t\tselector = anchor.hash;\n\t\t\t\tpanelId = selector.substring( 1 );\n\t\t\t\tpanel = that.element.find( that._sanitizeSelector( selector ) );\n\t\t\t// remote tab\n\t\t\t} else {\n\t\t\t\t// If the tab doesn't already have aria-controls,\n\t\t\t\t// generate an id by using a throw-away element\n\t\t\t\tpanelId = tab.attr( \"aria-controls\" ) || $( {} ).uniqueId()[ 0 ].id;\n\t\t\t\tselector = \"#\" + panelId;\n\t\t\t\tpanel = that.element.find( selector );\n\t\t\t\tif ( !panel.length ) {\n\t\t\t\t\tpanel = that._createPanel( panelId );\n\t\t\t\t\tpanel.insertAfter( that.panels[ i - 1 ] || that.tablist );\n\t\t\t\t}\n\t\t\t\tpanel.attr( \"aria-live\", \"polite\" );\n\t\t\t}\n\n\t\t\tif ( panel.length) {\n\t\t\t\tthat.panels = that.panels.add( panel );\n\t\t\t}\n\t\t\tif ( originalAriaControls ) {\n\t\t\t\ttab.data( \"ui-tabs-aria-controls\", originalAriaControls );\n\t\t\t}\n\t\t\ttab.attr({\n\t\t\t\t\"aria-controls\": panelId,\n\t\t\t\t\"aria-labelledby\": anchorId\n\t\t\t});\n\t\t\tpanel.attr( \"aria-labelledby\", anchorId );\n\t\t});\n\n\t\tthis.panels\n\t\t\t.addClass( \"ui-tabs-panel ui-widget-content ui-corner-bottom\" )\n\t\t\t.attr( \"role\", \"tabpanel\" );\n\n\t\t// Avoid memory leaks (#10056)\n\t\tif ( prevTabs ) {\n\t\t\tthis._off( prevTabs.not( this.tabs ) );\n\t\t\tthis._off( prevAnchors.not( this.anchors ) );\n\t\t\tthis._off( prevPanels.not( this.panels ) );\n\t\t}\n\t},\n\n\t// allow overriding how to find the list for rare usage scenarios (#7715)\n\t_getList: function() {\n\t\treturn this.tablist || this.element.find( \"ol,ul\" ).eq( 0 );\n\t},\n\n\t_createPanel: function( id ) {\n\t\treturn $( \"<div>\" )\n\t\t\t.attr( \"id\", id )\n\t\t\t.addClass( \"ui-tabs-panel ui-widget-content ui-corner-bottom\" )\n\t\t\t.data( \"ui-tabs-destroy\", true );\n\t},\n\n\t_setupDisabled: function( disabled ) {\n\t\tif ( $.isArray( disabled ) ) {\n\t\t\tif ( !disabled.length ) {\n\t\t\t\tdisabled = false;\n\t\t\t} else if ( disabled.length === this.anchors.length ) {\n\t\t\t\tdisabled = true;\n\t\t\t}\n\t\t}\n\n\t\t// disable tabs\n\t\tfor ( var i = 0, li; ( li = this.tabs[ i ] ); i++ ) {\n\t\t\tif ( disabled === true || $.inArray( i, disabled ) !== -1 ) {\n\t\t\t\t$( li )\n\t\t\t\t\t.addClass( \"ui-state-disabled\" )\n\t\t\t\t\t.attr( \"aria-disabled\", \"true\" );\n\t\t\t} else {\n\t\t\t\t$( li )\n\t\t\t\t\t.removeClass( \"ui-state-disabled\" )\n\t\t\t\t\t.removeAttr( \"aria-disabled\" );\n\t\t\t}\n\t\t}\n\n\t\tthis.options.disabled = disabled;\n\t},\n\n\t_setupEvents: function( event ) {\n\t\tvar events = {};\n\t\tif ( event ) {\n\t\t\t$.each( event.split(\" \"), function( index, eventName ) {\n\t\t\t\tevents[ eventName ] = \"_eventHandler\";\n\t\t\t});\n\t\t}\n\n\t\tthis._off( this.anchors.add( this.tabs ).add( this.panels ) );\n\t\t// Always prevent the default action, even when disabled\n\t\tthis._on( true, this.anchors, {\n\t\t\tclick: function( event ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t});\n\t\tthis._on( this.anchors, events );\n\t\tthis._on( this.tabs, { keydown: \"_tabKeydown\" } );\n\t\tthis._on( this.panels, { keydown: \"_panelKeydown\" } );\n\n\t\tthis._focusable( this.tabs );\n\t\tthis._hoverable( this.tabs );\n\t},\n\n\t_setupHeightStyle: function( heightStyle ) {\n\t\tvar maxHeight,\n\t\t\tparent = this.element.parent();\n\n\t\tif ( heightStyle === \"fill\" ) {\n\t\t\tmaxHeight = parent.height();\n\t\t\tmaxHeight -= this.element.outerHeight() - this.element.height();\n\n\t\t\tthis.element.siblings( \":visible\" ).each(function() {\n\t\t\t\tvar elem = $( this ),\n\t\t\t\t\tposition = elem.css( \"position\" );\n\n\t\t\t\tif ( position === \"absolute\" || position === \"fixed\" ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tmaxHeight -= elem.outerHeight( true );\n\t\t\t});\n\n\t\t\tthis.element.children().not( this.panels ).each(function() {\n\t\t\t\tmaxHeight -= $( this ).outerHeight( true );\n\t\t\t});\n\n\t\t\tthis.panels.each(function() {\n\t\t\t\t$( this ).height( Math.max( 0, maxHeight -\n\t\t\t\t\t$( this ).innerHeight() + $( this ).height() ) );\n\t\t\t})\n\t\t\t.css( \"overflow\", \"auto\" );\n\t\t} else if ( heightStyle === \"auto\" ) {\n\t\t\tmaxHeight = 0;\n\t\t\tthis.panels.each(function() {\n\t\t\t\tmaxHeight = Math.max( maxHeight, $( this ).height( \"\" ).height() );\n\t\t\t}).height( maxHeight );\n\t\t}\n\t},\n\n\t_eventHandler: function( event ) {\n\t\tvar options = this.options,\n\t\t\tactive = this.active,\n\t\t\tanchor = $( event.currentTarget ),\n\t\t\ttab = anchor.closest( \"li\" ),\n\t\t\tclickedIsActive = tab[ 0 ] === active[ 0 ],\n\t\t\tcollapsing = clickedIsActive && options.collapsible,\n\t\t\ttoShow = collapsing ? $() : this._getPanelForTab( tab ),\n\t\t\ttoHide = !active.length ? $() : this._getPanelForTab( active ),\n\t\t\teventData = {\n\t\t\t\toldTab: active,\n\t\t\t\toldPanel: toHide,\n\t\t\t\tnewTab: collapsing ? $() : tab,\n\t\t\t\tnewPanel: toShow\n\t\t\t};\n\n\t\tevent.preventDefault();\n\n\t\tif ( tab.hasClass( \"ui-state-disabled\" ) ||\n\t\t\t\t// tab is already loading\n\t\t\t\ttab.hasClass( \"ui-tabs-loading\" ) ||\n\t\t\t\t// can't switch durning an animation\n\t\t\t\tthis.running ||\n\t\t\t\t// click on active header, but not collapsible\n\t\t\t\t( clickedIsActive && !options.collapsible ) ||\n\t\t\t\t// allow canceling activation\n\t\t\t\t( this._trigger( \"beforeActivate\", event, eventData ) === false ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\toptions.active = collapsing ? false : this.tabs.index( tab );\n\n\t\tthis.active = clickedIsActive ? $() : tab;\n\t\tif ( this.xhr ) {\n\t\t\tthis.xhr.abort();\n\t\t}\n\n\t\tif ( !toHide.length && !toShow.length ) {\n\t\t\t$.error( \"jQuery UI Tabs: Mismatching fragment identifier.\" );\n\t\t}\n\n\t\tif ( toShow.length ) {\n\t\t\tthis.load( this.tabs.index( tab ), event );\n\t\t}\n\t\tthis._toggle( event, eventData );\n\t},\n\n\t// handles show/hide for selecting tabs\n\t_toggle: function( event, eventData ) {\n\t\tvar that = this,\n\t\t\ttoShow = eventData.newPanel,\n\t\t\ttoHide = eventData.oldPanel;\n\n\t\tthis.running = true;\n\n\t\tfunction complete() {\n\t\t\tthat.running = false;\n\t\t\tthat._trigger( \"activate\", event, eventData );\n\t\t}\n\n\t\tfunction show() {\n\t\t\teventData.newTab.closest( \"li\" ).addClass( \"ui-tabs-active ui-state-active\" );\n\n\t\t\tif ( toShow.length && that.options.show ) {\n\t\t\t\tthat._show( toShow, that.options.show, complete );\n\t\t\t} else {\n\t\t\t\ttoShow.show();\n\t\t\t\tcomplete();\n\t\t\t}\n\t\t}\n\n\t\t// start out by hiding, then showing, then completing\n\t\tif ( toHide.length && this.options.hide ) {\n\t\t\tthis._hide( toHide, this.options.hide, function() {\n\t\t\t\teventData.oldTab.closest( \"li\" ).removeClass( \"ui-tabs-active ui-state-active\" );\n\t\t\t\tshow();\n\t\t\t});\n\t\t} else {\n\t\t\teventData.oldTab.closest( \"li\" ).removeClass( \"ui-tabs-active ui-state-active\" );\n\t\t\ttoHide.hide();\n\t\t\tshow();\n\t\t}\n\n\t\ttoHide.attr( \"aria-hidden\", \"true\" );\n\t\teventData.oldTab.attr({\n\t\t\t\"aria-selected\": \"false\",\n\t\t\t\"aria-expanded\": \"false\"\n\t\t});\n\t\t// If we're switching tabs, remove the old tab from the tab order.\n\t\t// If we're opening from collapsed state, remove the previous tab from the tab order.\n\t\t// If we're collapsing, then keep the collapsing tab in the tab order.\n\t\tif ( toShow.length && toHide.length ) {\n\t\t\teventData.oldTab.attr( \"tabIndex\", -1 );\n\t\t} else if ( toShow.length ) {\n\t\t\tthis.tabs.filter(function() {\n\t\t\t\treturn $( this ).attr( \"tabIndex\" ) === 0;\n\t\t\t})\n\t\t\t.attr( \"tabIndex\", -1 );\n\t\t}\n\n\t\ttoShow.attr( \"aria-hidden\", \"false\" );\n\t\teventData.newTab.attr({\n\t\t\t\"aria-selected\": \"true\",\n\t\t\t\"aria-expanded\": \"true\",\n\t\t\ttabIndex: 0\n\t\t});\n\t},\n\n\t_activate: function( index ) {\n\t\tvar anchor,\n\t\t\tactive = this._findActive( index );\n\n\t\t// trying to activate the already active panel\n\t\tif ( active[ 0 ] === this.active[ 0 ] ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// trying to collapse, simulate a click on the current active header\n\t\tif ( !active.length ) {\n\t\t\tactive = this.active;\n\t\t}\n\n\t\tanchor = active.find( \".ui-tabs-anchor\" )[ 0 ];\n\t\tthis._eventHandler({\n\t\t\ttarget: anchor,\n\t\t\tcurrentTarget: anchor,\n\t\t\tpreventDefault: $.noop\n\t\t});\n\t},\n\n\t_findActive: function( index ) {\n\t\treturn index === false ? $() : this.tabs.eq( index );\n\t},\n\n\t_getIndex: function( index ) {\n\t\t// meta-function to give users option to provide a href string instead of a numerical index.\n\t\tif ( typeof index === \"string\" ) {\n\t\t\tindex = this.anchors.index( this.anchors.filter( \"[href$='\" + index + \"']\" ) );\n\t\t}\n\n\t\treturn index;\n\t},\n\n\t_destroy: function() {\n\t\tif ( this.xhr ) {\n\t\t\tthis.xhr.abort();\n\t\t}\n\n\t\tthis.element.removeClass( \"ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible\" );\n\n\t\tthis.tablist\n\t\t\t.removeClass( \"ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all\" )\n\t\t\t.removeAttr( \"role\" );\n\n\t\tthis.anchors\n\t\t\t.removeClass( \"ui-tabs-anchor\" )\n\t\t\t.removeAttr( \"role\" )\n\t\t\t.removeAttr( \"tabIndex\" )\n\t\t\t.removeUniqueId();\n\n\t\tthis.tablist.unbind( this.eventNamespace );\n\n\t\tthis.tabs.add( this.panels ).each(function() {\n\t\t\tif ( $.data( this, \"ui-tabs-destroy\" ) ) {\n\t\t\t\t$( this ).remove();\n\t\t\t} else {\n\t\t\t\t$( this )\n\t\t\t\t\t.removeClass( \"ui-state-default ui-state-active ui-state-disabled \" +\n\t\t\t\t\t\t\"ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel\" )\n\t\t\t\t\t.removeAttr( \"tabIndex\" )\n\t\t\t\t\t.removeAttr( \"aria-live\" )\n\t\t\t\t\t.removeAttr( \"aria-busy\" )\n\t\t\t\t\t.removeAttr( \"aria-selected\" )\n\t\t\t\t\t.removeAttr( \"aria-labelledby\" )\n\t\t\t\t\t.removeAttr( \"aria-hidden\" )\n\t\t\t\t\t.removeAttr( \"aria-expanded\" )\n\t\t\t\t\t.removeAttr( \"role\" );\n\t\t\t}\n\t\t});\n\n\t\tthis.tabs.each(function() {\n\t\t\tvar li = $( this ),\n\t\t\t\tprev = li.data( \"ui-tabs-aria-controls\" );\n\t\t\tif ( prev ) {\n\t\t\t\tli\n\t\t\t\t\t.attr( \"aria-controls\", prev )\n\t\t\t\t\t.removeData( \"ui-tabs-aria-controls\" );\n\t\t\t} else {\n\t\t\t\tli.removeAttr( \"aria-controls\" );\n\t\t\t}\n\t\t});\n\n\t\tthis.panels.show();\n\n\t\tif ( this.options.heightStyle !== \"content\" ) {\n\t\t\tthis.panels.css( \"height\", \"\" );\n\t\t}\n\t},\n\n\tenable: function( index ) {\n\t\tvar disabled = this.options.disabled;\n\t\tif ( disabled === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( index === undefined ) {\n\t\t\tdisabled = false;\n\t\t} else {\n\t\t\tindex = this._getIndex( index );\n\t\t\tif ( $.isArray( disabled ) ) {\n\t\t\t\tdisabled = $.map( disabled, function( num ) {\n\t\t\t\t\treturn num !== index ? num : null;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tdisabled = $.map( this.tabs, function( li, num ) {\n\t\t\t\t\treturn num !== index ? num : null;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tthis._setupDisabled( disabled );\n\t},\n\n\tdisable: function( index ) {\n\t\tvar disabled = this.options.disabled;\n\t\tif ( disabled === true ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( index === undefined ) {\n\t\t\tdisabled = true;\n\t\t} else {\n\t\t\tindex = this._getIndex( index );\n\t\t\tif ( $.inArray( index, disabled ) !== -1 ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ( $.isArray( disabled ) ) {\n\t\t\t\tdisabled = $.merge( [ index ], disabled ).sort();\n\t\t\t} else {\n\t\t\t\tdisabled = [ index ];\n\t\t\t}\n\t\t}\n\t\tthis._setupDisabled( disabled );\n\t},\n\n\tload: function( index, event ) {\n\t\tindex = this._getIndex( index );\n\t\tvar that = this,\n\t\t\ttab = this.tabs.eq( index ),\n\t\t\tanchor = tab.find( \".ui-tabs-anchor\" ),\n\t\t\tpanel = this._getPanelForTab( tab ),\n\t\t\teventData = {\n\t\t\t\ttab: tab,\n\t\t\t\tpanel: panel\n\t\t\t},\n\t\t\tcomplete = function( jqXHR, status ) {\n\t\t\t\tif ( status === \"abort\" ) {\n\t\t\t\t\tthat.panels.stop( false, true );\n\t\t\t\t}\n\n\t\t\t\ttab.removeClass( \"ui-tabs-loading\" );\n\t\t\t\tpanel.removeAttr( \"aria-busy\" );\n\n\t\t\t\tif ( jqXHR === that.xhr ) {\n\t\t\t\t\tdelete that.xhr;\n\t\t\t\t}\n\t\t\t};\n\n\t\t// not remote\n\t\tif ( this._isLocal( anchor[ 0 ] ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.xhr = $.ajax( this._ajaxSettings( anchor, event, eventData ) );\n\n\t\t// support: jQuery <1.8\n\t\t// jQuery <1.8 returns false if the request is canceled in beforeSend,\n\t\t// but as of 1.8, $.ajax() always returns a jqXHR object.\n\t\tif ( this.xhr && this.xhr.statusText !== \"canceled\" ) {\n\t\t\ttab.addClass( \"ui-tabs-loading\" );\n\t\t\tpanel.attr( \"aria-busy\", \"true\" );\n\n\t\t\tthis.xhr\n\t\t\t\t.done(function( response, status, jqXHR ) {\n\t\t\t\t\t// support: jQuery <1.8\n\t\t\t\t\t// http://bugs.jquery.com/ticket/11778\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tpanel.html( response );\n\t\t\t\t\t\tthat._trigger( \"load\", event, eventData );\n\n\t\t\t\t\t\tcomplete( jqXHR, status );\n\t\t\t\t\t}, 1 );\n\t\t\t\t})\n\t\t\t\t.fail(function( jqXHR, status ) {\n\t\t\t\t\t// support: jQuery <1.8\n\t\t\t\t\t// http://bugs.jquery.com/ticket/11778\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tcomplete( jqXHR, status );\n\t\t\t\t\t}, 1 );\n\t\t\t\t});\n\t\t}\n\t},\n\n\t_ajaxSettings: function( anchor, event, eventData ) {\n\t\tvar that = this;\n\t\treturn {\n\t\t\turl: anchor.attr( \"href\" ),\n\t\t\tbeforeSend: function( jqXHR, settings ) {\n\t\t\t\treturn that._trigger( \"beforeLoad\", event,\n\t\t\t\t\t$.extend( { jqXHR: jqXHR, ajaxSettings: settings }, eventData ) );\n\t\t\t}\n\t\t};\n\t},\n\n\t_getPanelForTab: function( tab ) {\n\t\tvar id = $( tab ).attr( \"aria-controls\" );\n\t\treturn this.element.find( this._sanitizeSelector( \"#\" + id ) );\n\t}\n});\n\n\n/*!\n * jQuery UI Tooltip 1.11.4\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/tooltip/\n */\n\n\nvar tooltip = $.widget( \"ui.tooltip\", {\n\tversion: \"1.11.4\",\n\toptions: {\n\t\tcontent: function() {\n\t\t\t// support: IE<9, Opera in jQuery <1.7\n\t\t\t// .text() can't accept undefined, so coerce to a string\n\t\t\tvar title = $( this ).attr( \"title\" ) || \"\";\n\t\t\t// Escape title, since we're going from an attribute to raw HTML\n\t\t\treturn $( \"<a>\" ).text( title ).html();\n\t\t},\n\t\thide: true,\n\t\t// Disabled elements have inconsistent behavior across browsers (#8661)\n\t\titems: \"[title]:not([disabled])\",\n\t\tposition: {\n\t\t\tmy: \"left top+15\",\n\t\t\tat: \"left bottom\",\n\t\t\tcollision: \"flipfit flip\"\n\t\t},\n\t\tshow: true,\n\t\ttooltipClass: null,\n\t\ttrack: false,\n\n\t\t// callbacks\n\t\tclose: null,\n\t\topen: null\n\t},\n\n\t_addDescribedBy: function( elem, id ) {\n\t\tvar describedby = (elem.attr( \"aria-describedby\" ) || \"\").split( /\\s+/ );\n\t\tdescribedby.push( id );\n\t\telem\n\t\t\t.data( \"ui-tooltip-id\", id )\n\t\t\t.attr( \"aria-describedby\", $.trim( describedby.join( \" \" ) ) );\n\t},\n\n\t_removeDescribedBy: function( elem ) {\n\t\tvar id = elem.data( \"ui-tooltip-id\" ),\n\t\t\tdescribedby = (elem.attr( \"aria-describedby\" ) || \"\").split( /\\s+/ ),\n\t\t\tindex = $.inArray( id, describedby );\n\n\t\tif ( index !== -1 ) {\n\t\t\tdescribedby.splice( index, 1 );\n\t\t}\n\n\t\telem.removeData( \"ui-tooltip-id\" );\n\t\tdescribedby = $.trim( describedby.join( \" \" ) );\n\t\tif ( describedby ) {\n\t\t\telem.attr( \"aria-describedby\", describedby );\n\t\t} else {\n\t\t\telem.removeAttr( \"aria-describedby\" );\n\t\t}\n\t},\n\n\t_create: function() {\n\t\tthis._on({\n\t\t\tmouseover: \"open\",\n\t\t\tfocusin: \"open\"\n\t\t});\n\n\t\t// IDs of generated tooltips, needed for destroy\n\t\tthis.tooltips = {};\n\n\t\t// IDs of parent tooltips where we removed the title attribute\n\t\tthis.parents = {};\n\n\t\tif ( this.options.disabled ) {\n\t\t\tthis._disable();\n\t\t}\n\n\t\t// Append the aria-live region so tooltips announce correctly\n\t\tthis.liveRegion = $( \"<div>\" )\n\t\t\t.attr({\n\t\t\t\trole: \"log\",\n\t\t\t\t\"aria-live\": \"assertive\",\n\t\t\t\t\"aria-relevant\": \"additions\"\n\t\t\t})\n\t\t\t.addClass( \"ui-helper-hidden-accessible\" )\n\t\t\t.appendTo( this.document[ 0 ].body );\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tvar that = this;\n\n\t\tif ( key === \"disabled\" ) {\n\t\t\tthis[ value ? \"_disable\" : \"_enable\" ]();\n\t\t\tthis.options[ key ] = value;\n\t\t\t// disable element style changes\n\t\t\treturn;\n\t\t}\n\n\t\tthis._super( key, value );\n\n\t\tif ( key === \"content\" ) {\n\t\t\t$.each( this.tooltips, function( id, tooltipData ) {\n\t\t\t\tthat._updateContent( tooltipData.element );\n\t\t\t});\n\t\t}\n\t},\n\n\t_disable: function() {\n\t\tvar that = this;\n\n\t\t// close open tooltips\n\t\t$.each( this.tooltips, function( id, tooltipData ) {\n\t\t\tvar event = $.Event( \"blur\" );\n\t\t\tevent.target = event.currentTarget = tooltipData.element[ 0 ];\n\t\t\tthat.close( event, true );\n\t\t});\n\n\t\t// remove title attributes to prevent native tooltips\n\t\tthis.element.find( this.options.items ).addBack().each(function() {\n\t\t\tvar element = $( this );\n\t\t\tif ( element.is( \"[title]\" ) ) {\n\t\t\t\telement\n\t\t\t\t\t.data( \"ui-tooltip-title\", element.attr( \"title\" ) )\n\t\t\t\t\t.removeAttr( \"title\" );\n\t\t\t}\n\t\t});\n\t},\n\n\t_enable: function() {\n\t\t// restore title attributes\n\t\tthis.element.find( this.options.items ).addBack().each(function() {\n\t\t\tvar element = $( this );\n\t\t\tif ( element.data( \"ui-tooltip-title\" ) ) {\n\t\t\t\telement.attr( \"title\", element.data( \"ui-tooltip-title\" ) );\n\t\t\t}\n\t\t});\n\t},\n\n\topen: function( event ) {\n\t\tvar that = this,\n\t\t\ttarget = $( event ? event.target : this.element )\n\t\t\t\t// we need closest here due to mouseover bubbling,\n\t\t\t\t// but always pointing at the same event target\n\t\t\t\t.closest( this.options.items );\n\n\t\t// No element to show a tooltip for or the tooltip is already open\n\t\tif ( !target.length || target.data( \"ui-tooltip-id\" ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( target.attr( \"title\" ) ) {\n\t\t\ttarget.data( \"ui-tooltip-title\", target.attr( \"title\" ) );\n\t\t}\n\n\t\ttarget.data( \"ui-tooltip-open\", true );\n\n\t\t// kill parent tooltips, custom or native, for hover\n\t\tif ( event && event.type === \"mouseover\" ) {\n\t\t\ttarget.parents().each(function() {\n\t\t\t\tvar parent = $( this ),\n\t\t\t\t\tblurEvent;\n\t\t\t\tif ( parent.data( \"ui-tooltip-open\" ) ) {\n\t\t\t\t\tblurEvent = $.Event( \"blur\" );\n\t\t\t\t\tblurEvent.target = blurEvent.currentTarget = this;\n\t\t\t\t\tthat.close( blurEvent, true );\n\t\t\t\t}\n\t\t\t\tif ( parent.attr( \"title\" ) ) {\n\t\t\t\t\tparent.uniqueId();\n\t\t\t\t\tthat.parents[ this.id ] = {\n\t\t\t\t\t\telement: this,\n\t\t\t\t\t\ttitle: parent.attr( \"title\" )\n\t\t\t\t\t};\n\t\t\t\t\tparent.attr( \"title\", \"\" );\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis._registerCloseHandlers( event, target );\n\t\tthis._updateContent( target, event );\n\t},\n\n\t_updateContent: function( target, event ) {\n\t\tvar content,\n\t\t\tcontentOption = this.options.content,\n\t\t\tthat = this,\n\t\t\teventType = event ? event.type : null;\n\n\t\tif ( typeof contentOption === \"string\" ) {\n\t\t\treturn this._open( event, target, contentOption );\n\t\t}\n\n\t\tcontent = contentOption.call( target[0], function( response ) {\n\n\t\t\t// IE may instantly serve a cached response for ajax requests\n\t\t\t// delay this call to _open so the other call to _open runs first\n\t\t\tthat._delay(function() {\n\n\t\t\t\t// Ignore async response if tooltip was closed already\n\t\t\t\tif ( !target.data( \"ui-tooltip-open\" ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// jQuery creates a special event for focusin when it doesn't\n\t\t\t\t// exist natively. To improve performance, the native event\n\t\t\t\t// object is reused and the type is changed. Therefore, we can't\n\t\t\t\t// rely on the type being correct after the event finished\n\t\t\t\t// bubbling, so we set it back to the previous value. (#8740)\n\t\t\t\tif ( event ) {\n\t\t\t\t\tevent.type = eventType;\n\t\t\t\t}\n\t\t\t\tthis._open( event, target, response );\n\t\t\t});\n\t\t});\n\t\tif ( content ) {\n\t\t\tthis._open( event, target, content );\n\t\t}\n\t},\n\n\t_open: function( event, target, content ) {\n\t\tvar tooltipData, tooltip, delayedShow, a11yContent,\n\t\t\tpositionOption = $.extend( {}, this.options.position );\n\n\t\tif ( !content ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Content can be updated multiple times. If the tooltip already\n\t\t// exists, then just update the content and bail.\n\t\ttooltipData = this._find( target );\n\t\tif ( tooltipData ) {\n\t\t\ttooltipData.tooltip.find( \".ui-tooltip-content\" ).html( content );\n\t\t\treturn;\n\t\t}\n\n\t\t// if we have a title, clear it to prevent the native tooltip\n\t\t// we have to check first to avoid defining a title if none exists\n\t\t// (we don't want to cause an element to start matching [title])\n\t\t//\n\t\t// We use removeAttr only for key events, to allow IE to export the correct\n\t\t// accessible attributes. For mouse events, set to empty string to avoid\n\t\t// native tooltip showing up (happens only when removing inside mouseover).\n\t\tif ( target.is( \"[title]\" ) ) {\n\t\t\tif ( event && event.type === \"mouseover\" ) {\n\t\t\t\ttarget.attr( \"title\", \"\" );\n\t\t\t} else {\n\t\t\t\ttarget.removeAttr( \"title\" );\n\t\t\t}\n\t\t}\n\n\t\ttooltipData = this._tooltip( target );\n\t\ttooltip = tooltipData.tooltip;\n\t\tthis._addDescribedBy( target, tooltip.attr( \"id\" ) );\n\t\ttooltip.find( \".ui-tooltip-content\" ).html( content );\n\n\t\t// Support: Voiceover on OS X, JAWS on IE <= 9\n\t\t// JAWS announces deletions even when aria-relevant=\"additions\"\n\t\t// Voiceover will sometimes re-read the entire log region's contents from the beginning\n\t\tthis.liveRegion.children().hide();\n\t\tif ( content.clone ) {\n\t\t\ta11yContent = content.clone();\n\t\t\ta11yContent.removeAttr( \"id\" ).find( \"[id]\" ).removeAttr( \"id\" );\n\t\t} else {\n\t\t\ta11yContent = content;\n\t\t}\n\t\t$( \"<div>\" ).html( a11yContent ).appendTo( this.liveRegion );\n\n\t\tfunction position( event ) {\n\t\t\tpositionOption.of = event;\n\t\t\tif ( tooltip.is( \":hidden\" ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttooltip.position( positionOption );\n\t\t}\n\t\tif ( this.options.track && event && /^mouse/.test( event.type ) ) {\n\t\t\tthis._on( this.document, {\n\t\t\t\tmousemove: position\n\t\t\t});\n\t\t\t// trigger once to override element-relative positioning\n\t\t\tposition( event );\n\t\t} else {\n\t\t\ttooltip.position( $.extend({\n\t\t\t\tof: target\n\t\t\t}, this.options.position ) );\n\t\t}\n\n\t\ttooltip.hide();\n\n\t\tthis._show( tooltip, this.options.show );\n\t\t// Handle tracking tooltips that are shown with a delay (#8644). As soon\n\t\t// as the tooltip is visible, position the tooltip using the most recent\n\t\t// event.\n\t\tif ( this.options.show && this.options.show.delay ) {\n\t\t\tdelayedShow = this.delayedShow = setInterval(function() {\n\t\t\t\tif ( tooltip.is( \":visible\" ) ) {\n\t\t\t\t\tposition( positionOption.of );\n\t\t\t\t\tclearInterval( delayedShow );\n\t\t\t\t}\n\t\t\t}, $.fx.interval );\n\t\t}\n\n\t\tthis._trigger( \"open\", event, { tooltip: tooltip } );\n\t},\n\n\t_registerCloseHandlers: function( event, target ) {\n\t\tvar events = {\n\t\t\tkeyup: function( event ) {\n\t\t\t\tif ( event.keyCode === $.ui.keyCode.ESCAPE ) {\n\t\t\t\t\tvar fakeEvent = $.Event(event);\n\t\t\t\t\tfakeEvent.currentTarget = target[0];\n\t\t\t\t\tthis.close( fakeEvent, true );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// Only bind remove handler for delegated targets. Non-delegated\n\t\t// tooltips will handle this in destroy.\n\t\tif ( target[ 0 ] !== this.element[ 0 ] ) {\n\t\t\tevents.remove = function() {\n\t\t\t\tthis._removeTooltip( this._find( target ).tooltip );\n\t\t\t};\n\t\t}\n\n\t\tif ( !event || event.type === \"mouseover\" ) {\n\t\t\tevents.mouseleave = \"close\";\n\t\t}\n\t\tif ( !event || event.type === \"focusin\" ) {\n\t\t\tevents.focusout = \"close\";\n\t\t}\n\t\tthis._on( true, target, events );\n\t},\n\n\tclose: function( event ) {\n\t\tvar tooltip,\n\t\t\tthat = this,\n\t\t\ttarget = $( event ? event.currentTarget : this.element ),\n\t\t\ttooltipData = this._find( target );\n\n\t\t// The tooltip may already be closed\n\t\tif ( !tooltipData ) {\n\n\t\t\t// We set ui-tooltip-open immediately upon open (in open()), but only set the\n\t\t\t// additional data once there's actually content to show (in _open()). So even if the\n\t\t\t// tooltip doesn't have full data, we always remove ui-tooltip-open in case we're in\n\t\t\t// the period between open() and _open().\n\t\t\ttarget.removeData( \"ui-tooltip-open\" );\n\t\t\treturn;\n\t\t}\n\n\t\ttooltip = tooltipData.tooltip;\n\n\t\t// disabling closes the tooltip, so we need to track when we're closing\n\t\t// to avoid an infinite loop in case the tooltip becomes disabled on close\n\t\tif ( tooltipData.closing ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Clear the interval for delayed tracking tooltips\n\t\tclearInterval( this.delayedShow );\n\n\t\t// only set title if we had one before (see comment in _open())\n\t\t// If the title attribute has changed since open(), don't restore\n\t\tif ( target.data( \"ui-tooltip-title\" ) && !target.attr( \"title\" ) ) {\n\t\t\ttarget.attr( \"title\", target.data( \"ui-tooltip-title\" ) );\n\t\t}\n\n\t\tthis._removeDescribedBy( target );\n\n\t\ttooltipData.hiding = true;\n\t\ttooltip.stop( true );\n\t\tthis._hide( tooltip, this.options.hide, function() {\n\t\t\tthat._removeTooltip( $( this ) );\n\t\t});\n\n\t\ttarget.removeData( \"ui-tooltip-open\" );\n\t\tthis._off( target, \"mouseleave focusout keyup\" );\n\n\t\t// Remove 'remove' binding only on delegated targets\n\t\tif ( target[ 0 ] !== this.element[ 0 ] ) {\n\t\t\tthis._off( target, \"remove\" );\n\t\t}\n\t\tthis._off( this.document, \"mousemove\" );\n\n\t\tif ( event && event.type === \"mouseleave\" ) {\n\t\t\t$.each( this.parents, function( id, parent ) {\n\t\t\t\t$( parent.element ).attr( \"title\", parent.title );\n\t\t\t\tdelete that.parents[ id ];\n\t\t\t});\n\t\t}\n\n\t\ttooltipData.closing = true;\n\t\tthis._trigger( \"close\", event, { tooltip: tooltip } );\n\t\tif ( !tooltipData.hiding ) {\n\t\t\ttooltipData.closing = false;\n\t\t}\n\t},\n\n\t_tooltip: function( element ) {\n\t\tvar tooltip = $( \"<div>\" )\n\t\t\t\t.attr( \"role\", \"tooltip\" )\n\t\t\t\t.addClass( \"ui-tooltip ui-widget ui-corner-all ui-widget-content \" +\n\t\t\t\t\t( this.options.tooltipClass || \"\" ) ),\n\t\t\tid = tooltip.uniqueId().attr( \"id\" );\n\n\t\t$( \"<div>\" )\n\t\t\t.addClass( \"ui-tooltip-content\" )\n\t\t\t.appendTo( tooltip );\n\n\t\ttooltip.appendTo( this.document[0].body );\n\n\t\treturn this.tooltips[ id ] = {\n\t\t\telement: element,\n\t\t\ttooltip: tooltip\n\t\t};\n\t},\n\n\t_find: function( target ) {\n\t\tvar id = target.data( \"ui-tooltip-id\" );\n\t\treturn id ? this.tooltips[ id ] : null;\n\t},\n\n\t_removeTooltip: function( tooltip ) {\n\t\ttooltip.remove();\n\t\tdelete this.tooltips[ tooltip.attr( \"id\" ) ];\n\t},\n\n\t_destroy: function() {\n\t\tvar that = this;\n\n\t\t// close open tooltips\n\t\t$.each( this.tooltips, function( id, tooltipData ) {\n\t\t\t// Delegate to close method to handle common cleanup\n\t\t\tvar event = $.Event( \"blur\" ),\n\t\t\t\telement = tooltipData.element;\n\t\t\tevent.target = event.currentTarget = element[ 0 ];\n\t\t\tthat.close( event, true );\n\n\t\t\t// Remove immediately; destroying an open tooltip doesn't use the\n\t\t\t// hide animation\n\t\t\t$( \"#\" + id ).remove();\n\n\t\t\t// Restore the title\n\t\t\tif ( element.data( \"ui-tooltip-title\" ) ) {\n\t\t\t\t// If the title attribute has changed since open(), don't restore\n\t\t\t\tif ( !element.attr( \"title\" ) ) {\n\t\t\t\t\telement.attr( \"title\", element.data( \"ui-tooltip-title\" ) );\n\t\t\t\t}\n\t\t\t\telement.removeData( \"ui-tooltip-title\" );\n\t\t\t}\n\t\t});\n\t\tthis.liveRegion.remove();\n\t}\n});\n\n\n\n}));","/**\r\n *\r\n * Date picker\r\n * Author: Stefan Petre www.eyecon.ro\r\n * \r\n * Dual licensed under the MIT and GPL licenses\r\n * \r\n */\r\n(function ($) {\r\n\tvar DatePicker = function () {\r\n\t\tvar\tids = {},\r\n\t\t\tviews = {\r\n\t\t\t\tyears: 'datepickerViewYears',\r\n\t\t\t\tmoths: 'datepickerViewMonths',\r\n\t\t\t\tdays: 'datepickerViewDays'\r\n\t\t\t},\r\n\t\t\ttpl = {\r\n\t\t\t\twrapper: '<div class=\"datepicker\"><div class=\"datepickerBorderT\" /><div class=\"datepickerBorderB\" /><div class=\"datepickerBorderL\" /><div class=\"datepickerBorderR\" /><div class=\"datepickerBorderTL\" /><div class=\"datepickerBorderTR\" /><div class=\"datepickerBorderBL\" /><div class=\"datepickerBorderBR\" /><div class=\"datepickerContainer\"><table cellspacing=\"0\" cellpadding=\"0\"><tbody><tr></tr></tbody></table></div></div>',\r\n\t\t\t\thead: [\r\n\t\t\t\t\t'<td>',\r\n\t\t\t\t\t'<table cellspacing=\"0\" cellpadding=\"0\">',\r\n\t\t\t\t\t\t'<thead>',\r\n\t\t\t\t\t\t\t'<tr>',\r\n\t\t\t\t\t\t\t\t'<th class=\"datepickerGoPrev\"><a href=\"#\"><span><%=prev%></span></a></th>',\r\n\t\t\t\t\t\t\t\t'<th colspan=\"5\" class=\"datepickerMonth\"><a href=\"#\"><span></span></a></th>',\r\n\t\t\t\t\t\t\t\t'<th class=\"datepickerGoNext\"><a href=\"#\"><span><%=next%></span></a></th>',\r\n\t\t\t\t\t\t\t'</tr>',\r\n\t\t\t\t\t\t\t'<tr class=\"datepickerDoW\">',\r\n\t\t\t\t\t\t\t\t'<th><span><%=week%></span></th>',\r\n\t\t\t\t\t\t\t\t'<th><span><%=day1%></span></th>',\r\n\t\t\t\t\t\t\t\t'<th><span><%=day2%></span></th>',\r\n\t\t\t\t\t\t\t\t'<th><span><%=day3%></span></th>',\r\n\t\t\t\t\t\t\t\t'<th><span><%=day4%></span></th>',\r\n\t\t\t\t\t\t\t\t'<th><span><%=day5%></span></th>',\r\n\t\t\t\t\t\t\t\t'<th><span><%=day6%></span></th>',\r\n\t\t\t\t\t\t\t\t'<th><span><%=day7%></span></th>',\r\n\t\t\t\t\t\t\t'</tr>',\r\n\t\t\t\t\t\t'</thead>',\r\n\t\t\t\t\t'</table></td>'\r\n\t\t\t\t],\r\n\t\t\t\tspace : '<td class=\"datepickerSpace\"><div></div></td>',\r\n\t\t\t\tdays: [\r\n\t\t\t\t\t'<tbody class=\"datepickerDays\">',\r\n\t\t\t\t\t\t'<tr>',\r\n\t\t\t\t\t\t\t'<th class=\"datepickerWeek\"><a href=\"#\"><span><%=weeks[0].week%></span></a></th>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[0].days[0].classname%>\"><a href=\"#\"><span><%=weeks[0].days[0].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[0].days[1].classname%>\"><a href=\"#\"><span><%=weeks[0].days[1].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[0].days[2].classname%>\"><a href=\"#\"><span><%=weeks[0].days[2].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[0].days[3].classname%>\"><a href=\"#\"><span><%=weeks[0].days[3].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[0].days[4].classname%>\"><a href=\"#\"><span><%=weeks[0].days[4].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[0].days[5].classname%>\"><a href=\"#\"><span><%=weeks[0].days[5].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[0].days[6].classname%>\"><a href=\"#\"><span><%=weeks[0].days[6].text%></span></a></td>',\r\n\t\t\t\t\t\t'</tr>',\r\n\t\t\t\t\t\t'<tr>',\r\n\t\t\t\t\t\t\t'<th class=\"datepickerWeek\"><a href=\"#\"><span><%=weeks[1].week%></span></a></th>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[1].days[0].classname%>\"><a href=\"#\"><span><%=weeks[1].days[0].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[1].days[1].classname%>\"><a href=\"#\"><span><%=weeks[1].days[1].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[1].days[2].classname%>\"><a href=\"#\"><span><%=weeks[1].days[2].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[1].days[3].classname%>\"><a href=\"#\"><span><%=weeks[1].days[3].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[1].days[4].classname%>\"><a href=\"#\"><span><%=weeks[1].days[4].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[1].days[5].classname%>\"><a href=\"#\"><span><%=weeks[1].days[5].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[1].days[6].classname%>\"><a href=\"#\"><span><%=weeks[1].days[6].text%></span></a></td>',\r\n\t\t\t\t\t\t'</tr>',\r\n\t\t\t\t\t\t'<tr>',\r\n\t\t\t\t\t\t\t'<th class=\"datepickerWeek\"><a href=\"#\"><span><%=weeks[2].week%></span></a></th>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[2].days[0].classname%>\"><a href=\"#\"><span><%=weeks[2].days[0].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[2].days[1].classname%>\"><a href=\"#\"><span><%=weeks[2].days[1].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[2].days[2].classname%>\"><a href=\"#\"><span><%=weeks[2].days[2].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[2].days[3].classname%>\"><a href=\"#\"><span><%=weeks[2].days[3].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[2].days[4].classname%>\"><a href=\"#\"><span><%=weeks[2].days[4].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[2].days[5].classname%>\"><a href=\"#\"><span><%=weeks[2].days[5].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[2].days[6].classname%>\"><a href=\"#\"><span><%=weeks[2].days[6].text%></span></a></td>',\r\n\t\t\t\t\t\t'</tr>',\r\n\t\t\t\t\t\t'<tr>',\r\n\t\t\t\t\t\t\t'<th class=\"datepickerWeek\"><a href=\"#\"><span><%=weeks[3].week%></span></a></th>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[3].days[0].classname%>\"><a href=\"#\"><span><%=weeks[3].days[0].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[3].days[1].classname%>\"><a href=\"#\"><span><%=weeks[3].days[1].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[3].days[2].classname%>\"><a href=\"#\"><span><%=weeks[3].days[2].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[3].days[3].classname%>\"><a href=\"#\"><span><%=weeks[3].days[3].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[3].days[4].classname%>\"><a href=\"#\"><span><%=weeks[3].days[4].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[3].days[5].classname%>\"><a href=\"#\"><span><%=weeks[3].days[5].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[3].days[6].classname%>\"><a href=\"#\"><span><%=weeks[3].days[6].text%></span></a></td>',\r\n\t\t\t\t\t\t'</tr>',\r\n\t\t\t\t\t\t'<tr>',\r\n\t\t\t\t\t\t\t'<th class=\"datepickerWeek\"><a href=\"#\"><span><%=weeks[4].week%></span></a></th>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[4].days[0].classname%>\"><a href=\"#\"><span><%=weeks[4].days[0].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[4].days[1].classname%>\"><a href=\"#\"><span><%=weeks[4].days[1].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[4].days[2].classname%>\"><a href=\"#\"><span><%=weeks[4].days[2].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[4].days[3].classname%>\"><a href=\"#\"><span><%=weeks[4].days[3].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[4].days[4].classname%>\"><a href=\"#\"><span><%=weeks[4].days[4].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[4].days[5].classname%>\"><a href=\"#\"><span><%=weeks[4].days[5].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[4].days[6].classname%>\"><a href=\"#\"><span><%=weeks[4].days[6].text%></span></a></td>',\r\n\t\t\t\t\t\t'</tr>',\r\n\t\t\t\t\t\t'<tr>',\r\n\t\t\t\t\t\t\t'<th class=\"datepickerWeek\"><a href=\"#\"><span><%=weeks[5].week%></span></a></th>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[5].days[0].classname%>\"><a href=\"#\"><span><%=weeks[5].days[0].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[5].days[1].classname%>\"><a href=\"#\"><span><%=weeks[5].days[1].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[5].days[2].classname%>\"><a href=\"#\"><span><%=weeks[5].days[2].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[5].days[3].classname%>\"><a href=\"#\"><span><%=weeks[5].days[3].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[5].days[4].classname%>\"><a href=\"#\"><span><%=weeks[5].days[4].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[5].days[5].classname%>\"><a href=\"#\"><span><%=weeks[5].days[5].text%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td class=\"<%=weeks[5].days[6].classname%>\"><a href=\"#\"><span><%=weeks[5].days[6].text%></span></a></td>',\r\n\t\t\t\t\t\t'</tr>',\r\n\t\t\t\t\t'</tbody>'\r\n\t\t\t\t],\r\n\t\t\t\tmonths: [\r\n\t\t\t\t\t'<tbody class=\"<%=className%>\">',\r\n\t\t\t\t\t\t'<tr>',\r\n\t\t\t\t\t\t\t'<td colspan=\"2\"><a href=\"#\"><span><%=data[0]%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td colspan=\"2\"><a href=\"#\"><span><%=data[1]%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td colspan=\"2\"><a href=\"#\"><span><%=data[2]%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td colspan=\"2\"><a href=\"#\"><span><%=data[3]%></span></a></td>',\r\n\t\t\t\t\t\t'</tr>',\r\n\t\t\t\t\t\t'<tr>',\r\n\t\t\t\t\t\t\t'<td colspan=\"2\"><a href=\"#\"><span><%=data[4]%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td colspan=\"2\"><a href=\"#\"><span><%=data[5]%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td colspan=\"2\"><a href=\"#\"><span><%=data[6]%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td colspan=\"2\"><a href=\"#\"><span><%=data[7]%></span></a></td>',\r\n\t\t\t\t\t\t'</tr>',\r\n\t\t\t\t\t\t'<tr>',\r\n\t\t\t\t\t\t\t'<td colspan=\"2\"><a href=\"#\"><span><%=data[8]%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td colspan=\"2\"><a href=\"#\"><span><%=data[9]%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td colspan=\"2\"><a href=\"#\"><span><%=data[10]%></span></a></td>',\r\n\t\t\t\t\t\t\t'<td colspan=\"2\"><a href=\"#\"><span><%=data[11]%></span></a></td>',\r\n\t\t\t\t\t\t'</tr>',\r\n\t\t\t\t\t'</tbody>'\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\tdefaults = {\r\n\t\t\t\tflat: false,\r\n\t\t\t\tstarts: 1,\r\n\t\t\t\tprev: '&#9664;',\r\n\t\t\t\tnext: '&#9654;',\r\n\t\t\t\tlastSel: false,\r\n\t\t\t\tmode: 'single',\r\n\t\t\t\tview: 'days',\r\n\t\t\t\tcalendars: 1,\r\n\t\t\t\tformat: 'Y-m-d',\r\n\t\t\t\tposition: 'bottom',\r\n\t\t\t\teventName: 'click',\r\n\t\t\t\tonRender: function(){return {};},\r\n\t\t\t\tonChange: function(){return true;},\r\n\t\t\t\tonShow: function(){return true;},\r\n\t\t\t\tonBeforeShow: function(){return true;},\r\n\t\t\t\tonHide: function(){return true;},\r\n\t\t\t\tlocale: {\r\n\t\t\t\t\tdays: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"],\r\n\t\t\t\t\tdaysShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"],\r\n\t\t\t\t\tdaysMin: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\", \"Su\"],\r\n\t\t\t\t\tmonths: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\r\n\t\t\t\t\tmonthsShort: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\r\n\t\t\t\t\tweekMin: 'wk'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfill = function(el) {\r\n\t\t\t\tvar options = $(el).data('datepicker');\r\n\t\t\t\tvar cal = $(el);\r\n\t\t\t\tvar currentCal = Math.floor(options.calendars/2), date, data, dow, month, cnt = 0, week, days, indic, indic2, html, tblCal;\r\n\t\t\t\tcal.find('td>table tbody').remove();\r\n\t\t\t\tfor (var i = 0; i < options.calendars; i++) {\r\n\t\t\t\t\tdate = new Date(options.current);\r\n\t\t\t\t\tdate.addMonths(-currentCal + i);\r\n\t\t\t\t\ttblCal = cal.find('table').eq(i+1);\r\n\t\t\t\t\tswitch (tblCal[0].className) {\r\n\t\t\t\t\t\tcase 'datepickerViewDays':\r\n\t\t\t\t\t\t\tdow = formatDate(date, 'B, Y');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'datepickerViewMonths':\r\n\t\t\t\t\t\t\tdow = date.getFullYear();\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'datepickerViewYears':\r\n\t\t\t\t\t\t\tdow = (date.getFullYear()-6) + ' - ' + (date.getFullYear()+5);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t} \r\n\t\t\t\t\ttblCal.find('thead tr:first th:eq(1) span').text(dow);\r\n\t\t\t\t\tdow = date.getFullYear()-6;\r\n\t\t\t\t\tdata = {\r\n\t\t\t\t\t\tdata: [],\r\n\t\t\t\t\t\tclassName: 'datepickerYears'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor ( var j = 0; j < 12; j++) {\r\n\t\t\t\t\t\tdata.data.push(dow + j);\r\n\t\t\t\t\t}\r\n\t\t\t\t\thtml = tmpl(tpl.months.join(''), data);\r\n\t\t\t\t\tdate.setDate(1);\r\n\t\t\t\t\tdata = {weeks:[], test: 10};\r\n\t\t\t\t\tmonth = date.getMonth();\r\n\t\t\t\t\tvar dow = (date.getDay() - options.starts) % 7;\r\n\t\t\t\t\tdate.addDays(-(dow + (dow < 0 ? 7 : 0)));\r\n\t\t\t\t\tweek = -1;\r\n\t\t\t\t\tcnt = 0;\r\n\t\t\t\t\twhile (cnt < 42) {\r\n\t\t\t\t\t\tindic = parseInt(cnt/7,10);\r\n\t\t\t\t\t\tindic2 = cnt%7;\r\n\t\t\t\t\t\tif (!data.weeks[indic]) {\r\n\t\t\t\t\t\t\tweek = date.getWeekNumber();\r\n\t\t\t\t\t\t\tdata.weeks[indic] = {\r\n\t\t\t\t\t\t\t\tweek: week,\r\n\t\t\t\t\t\t\t\tdays: []\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdata.weeks[indic].days[indic2] = {\r\n\t\t\t\t\t\t\ttext: date.getDate(),\r\n\t\t\t\t\t\t\tclassname: []\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tif (month != date.getMonth()) {\r\n\t\t\t\t\t\t\tdata.weeks[indic].days[indic2].classname.push('datepickerNotInMonth');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (date.getDay() == 0) {\r\n\t\t\t\t\t\t\tdata.weeks[indic].days[indic2].classname.push('datepickerSunday');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (date.getDay() == 6) {\r\n\t\t\t\t\t\t\tdata.weeks[indic].days[indic2].classname.push('datepickerSaturday');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar fromUser = options.onRender(date);\r\n\t\t\t\t\t\tvar val = date.valueOf();\r\n\r\n\t\t\t\t\t\tif (val === options.date[0]) {\r\n\t\t\t\t\t\t\tdata.weeks[indic].days[indic2].classname.push('datepickerSelectedFirst');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ((val + 86399000) === options.date[1]) {\r\n\t\t\t\t\t\t\tdata.weeks[indic].days[indic2].classname.push('datepickerSelectedLast');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (fromUser.selected || options.date == val || $.inArray(val, options.date) > -1 || (options.mode == 'range' && val >= options.date[0] && val <= options.date[1])) {\r\n\t\t\t\t\t\t\tdata.weeks[indic].days[indic2].classname.push('datepickerSelected');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (fromUser.disabled) {\r\n\t\t\t\t\t\t\tdata.weeks[indic].days[indic2].classname.push('datepickerDisabled');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (fromUser.className) {\r\n\t\t\t\t\t\t\tdata.weeks[indic].days[indic2].classname.push(fromUser.className);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdata.weeks[indic].days[indic2].classname = data.weeks[indic].days[indic2].classname.join(' ');\r\n\t\t\t\t\t\tcnt++;\r\n\t\t\t\t\t\tdate.addDays(1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\thtml = tmpl(tpl.days.join(''), data) + html;\r\n\t\t\t\t\tdata = {\r\n\t\t\t\t\t\tdata: options.locale.monthsShort,\r\n\t\t\t\t\t\tclassName: 'datepickerMonths'\r\n\t\t\t\t\t};\r\n\t\t\t\t\thtml = tmpl(tpl.months.join(''), data) + html;\r\n\t\t\t\t\ttblCal.append(html);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tparseDate = function (date, format) {\r\n\t\t\t\tif (date.constructor == Date) {\r\n\t\t\t\t\treturn new Date(date);\r\n\t\t\t\t}\r\n\t\t\t\tvar parts = date.split(/\\W+/);\r\n\t\t\t\tvar against = format.split(/\\W+/), d, m, y, h, min, now = new Date();\r\n\t\t\t\tfor (var i = 0; i < parts.length; i++) {\r\n\t\t\t\t\tswitch (against[i]) {\r\n\t\t\t\t\t\tcase 'd':\r\n\t\t\t\t\t\tcase 'e':\r\n\t\t\t\t\t\t\td = parseInt(parts[i],10);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'm':\r\n\t\t\t\t\t\t\tm = parseInt(parts[i], 10)-1;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'Y':\r\n\t\t\t\t\t\tcase 'y':\r\n\t\t\t\t\t\t\ty = parseInt(parts[i], 10);\r\n\t\t\t\t\t\t\ty += y > 100 ? 0 : (y < 29 ? 2000 : 1900);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'H':\r\n\t\t\t\t\t\tcase 'I':\r\n\t\t\t\t\t\tcase 'k':\r\n\t\t\t\t\t\tcase 'l':\r\n\t\t\t\t\t\t\th = parseInt(parts[i], 10);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'P':\r\n\t\t\t\t\t\tcase 'p':\r\n\t\t\t\t\t\t\tif (/pm/i.test(parts[i]) && h < 12) {\r\n\t\t\t\t\t\t\t\th += 12;\r\n\t\t\t\t\t\t\t} else if (/am/i.test(parts[i]) && h >= 12) {\r\n\t\t\t\t\t\t\t\th -= 12;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'M':\r\n\t\t\t\t\t\t\tmin = parseInt(parts[i], 10);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn new Date(\r\n\t\t\t\t\ty === undefined ? now.getFullYear() : y,\r\n\t\t\t\t\tm === undefined ? now.getMonth() : m,\r\n\t\t\t\t\td === undefined ? now.getDate() : d,\r\n\t\t\t\t\th === undefined ? now.getHours() : h,\r\n\t\t\t\t\tmin === undefined ? now.getMinutes() : min,\r\n\t\t\t\t\t0\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tformatDate = function(date, format) {\r\n\t\t\t\tvar m = date.getMonth();\r\n\t\t\t\tvar d = date.getDate();\r\n\t\t\t\tvar y = date.getFullYear();\r\n\t\t\t\tvar wn = date.getWeekNumber();\r\n\t\t\t\tvar w = date.getDay();\r\n\t\t\t\tvar s = {};\r\n\t\t\t\tvar hr = date.getHours();\r\n\t\t\t\tvar pm = (hr >= 12);\r\n\t\t\t\tvar ir = (pm) ? (hr - 12) : hr;\r\n\t\t\t\tvar dy = date.getDayOfYear();\r\n\t\t\t\tif (ir == 0) {\r\n\t\t\t\t\tir = 12;\r\n\t\t\t\t}\r\n\t\t\t\tvar min = date.getMinutes();\r\n\t\t\t\tvar sec = date.getSeconds();\r\n\t\t\t\tvar parts = format.split(''), part;\r\n\t\t\t\tfor ( var i = 0; i < parts.length; i++ ) {\r\n\t\t\t\t\tpart = parts[i];\r\n\t\t\t\t\tswitch (parts[i]) {\r\n\t\t\t\t\t\tcase 'a':\r\n\t\t\t\t\t\t\tpart = date.getDayName();\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'A':\r\n\t\t\t\t\t\t\tpart = date.getDayName(true);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'b':\r\n\t\t\t\t\t\t\tpart = date.getMonthName();\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'B':\r\n\t\t\t\t\t\t\tpart = date.getMonthName(true);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'C':\r\n\t\t\t\t\t\t\tpart = 1 + Math.floor(y / 100);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'd':\r\n\t\t\t\t\t\t\tpart = (d < 10) ? (\"0\" + d) : d;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'e':\r\n\t\t\t\t\t\t\tpart = d;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'H':\r\n\t\t\t\t\t\t\tpart = (hr < 10) ? (\"0\" + hr) : hr;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'I':\r\n\t\t\t\t\t\t\tpart = (ir < 10) ? (\"0\" + ir) : ir;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'j':\r\n\t\t\t\t\t\t\tpart = (dy < 100) ? ((dy < 10) ? (\"00\" + dy) : (\"0\" + dy)) : dy;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'k':\r\n\t\t\t\t\t\t\tpart = hr;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'l':\r\n\t\t\t\t\t\t\tpart = ir;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'm':\r\n\t\t\t\t\t\t\tpart = (m < 9) ? (\"0\" + (1+m)) : (1+m);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'M':\r\n\t\t\t\t\t\t\tpart = (min < 10) ? (\"0\" + min) : min;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'p':\r\n\t\t\t\t\t\tcase 'P':\r\n\t\t\t\t\t\t\tpart = pm ? \"PM\" : \"AM\";\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 's':\r\n\t\t\t\t\t\t\tpart = Math.floor(date.getTime() / 1000);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'S':\r\n\t\t\t\t\t\t\tpart = (sec < 10) ? (\"0\" + sec) : sec;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'u':\r\n\t\t\t\t\t\t\tpart = w + 1;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'w':\r\n\t\t\t\t\t\t\tpart = w;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'y':\r\n\t\t\t\t\t\t\tpart = ('' + y).substr(2, 2);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'Y':\r\n\t\t\t\t\t\t\tpart = y;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tparts[i] = part;\r\n\t\t\t\t}\r\n\t\t\t\treturn parts.join('');\r\n\t\t\t},\r\n\t\t\textendDate = function(options) {\r\n\t\t\t\tif (Date.prototype.tempDate) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tDate.prototype.tempDate = null;\r\n\t\t\t\tDate.prototype.months = options.months;\r\n\t\t\t\tDate.prototype.monthsShort = options.monthsShort;\r\n\t\t\t\tDate.prototype.days = options.days;\r\n\t\t\t\tDate.prototype.daysShort = options.daysShort;\r\n\t\t\t\tDate.prototype.getMonthName = function(fullName) {\r\n\t\t\t\t\treturn this[fullName ? 'months' : 'monthsShort'][this.getMonth()];\r\n\t\t\t\t};\r\n\t\t\t\tDate.prototype.getDayName = function(fullName) {\r\n\t\t\t\t\treturn this[fullName ? 'days' : 'daysShort'][this.getDay()];\r\n\t\t\t\t};\r\n\t\t\t\tDate.prototype.addDays = function (n) {\r\n\t\t\t\t\tthis.setDate(this.getDate() + n);\r\n\t\t\t\t\tthis.tempDate = this.getDate();\r\n\t\t\t\t};\r\n\t\t\t\tDate.prototype.addMonths = function (n) {\r\n\t\t\t\t\tif (this.tempDate == null) {\r\n\t\t\t\t\t\tthis.tempDate = this.getDate();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.setDate(1);\r\n\t\t\t\t\tthis.setMonth(this.getMonth() + n);\r\n\t\t\t\t\tthis.setDate(Math.min(this.tempDate, this.getMaxDays()));\r\n\t\t\t\t};\r\n\t\t\t\tDate.prototype.addYears = function (n) {\r\n\t\t\t\t\tif (this.tempDate == null) {\r\n\t\t\t\t\t\tthis.tempDate = this.getDate();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.setDate(1);\r\n\t\t\t\t\tthis.setFullYear(this.getFullYear() + n);\r\n\t\t\t\t\tthis.setDate(Math.min(this.tempDate, this.getMaxDays()));\r\n\t\t\t\t};\r\n\t\t\t\tDate.prototype.getMaxDays = function() {\r\n\t\t\t\t\tvar tmpDate = new Date(Date.parse(this)),\r\n\t\t\t\t\t\td = 28, m;\r\n\t\t\t\t\tm = tmpDate.getMonth();\r\n\t\t\t\t\td = 28;\r\n\t\t\t\t\twhile (tmpDate.getMonth() == m) {\r\n\t\t\t\t\t\td ++;\r\n\t\t\t\t\t\ttmpDate.setDate(d);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn d - 1;\r\n\t\t\t\t};\r\n\t\t\t\tDate.prototype.getFirstDay = function() {\r\n\t\t\t\t\tvar tmpDate = new Date(Date.parse(this));\r\n\t\t\t\t\ttmpDate.setDate(1);\r\n\t\t\t\t\treturn tmpDate.getDay();\r\n\t\t\t\t};\r\n\t\t\t\tDate.prototype.getWeekNumber = function() {\r\n\t\t\t\t\tvar tempDate = new Date(this);\r\n\t\t\t\t\ttempDate.setDate(tempDate.getDate() - (tempDate.getDay() + 6) % 7 + 3);\r\n\t\t\t\t\tvar dms = tempDate.valueOf();\r\n\t\t\t\t\ttempDate.setMonth(0);\r\n\t\t\t\t\ttempDate.setDate(4);\r\n\t\t\t\t\treturn Math.round((dms - tempDate.valueOf()) / (604800000)) + 1;\r\n\t\t\t\t};\r\n\t\t\t\tDate.prototype.getDayOfYear = function() {\r\n\t\t\t\t\tvar now = new Date(this.getFullYear(), this.getMonth(), this.getDate(), 0, 0, 0);\r\n\t\t\t\t\tvar then = new Date(this.getFullYear(), 0, 0, 0, 0, 0);\r\n\t\t\t\t\tvar time = now - then;\r\n\t\t\t\t\treturn Math.floor(time / 24*60*60*1000);\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tlayout = function (el) {\r\n\t\t\t\tvar options = $(el).data('datepicker');\r\n\t\t\t\tvar cal = $('#' + options.id);\r\n\t\t\t\tif (!options.extraHeight) {\r\n\t\t\t\t\tvar divs = $(el).find('div');\r\n\t\t\t\t\toptions.extraHeight = divs.get(0).offsetHeight + divs.get(1).offsetHeight;\r\n\t\t\t\t\toptions.extraWidth = divs.get(2).offsetWidth + divs.get(3).offsetWidth;\r\n\t\t\t\t}\r\n\t\t\t\tvar tbl = cal.find('table:first').get(0);\r\n\t\t\t\tvar width = tbl.offsetWidth;\r\n\t\t\t\tvar height = tbl.offsetHeight;\r\n\t\t\t\tcal.css({\r\n\t\t\t\t\twidth: width + options.extraWidth + 'px',\r\n\t\t\t\t\theight: height + options.extraHeight + 'px'\r\n\t\t\t\t}).find('div.datepickerContainer').css({\r\n\t\t\t\t\twidth: width + 'px',\r\n\t\t\t\t\theight: height + 'px'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tclick = function(ev) {\r\n\t\t\t\tif ($(ev.target).is('span')) {\r\n\t\t\t\t\tev.target = ev.target.parentNode;\r\n\t\t\t\t}\r\n\t\t\t\tvar el = $(ev.target);\r\n\t\t\t\tif (el.is('a')) {\r\n\t\t\t\t\tev.target.blur();\r\n\t\t\t\t\tif (el.hasClass('datepickerDisabled')) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar options = $(this).data('datepicker');\r\n\t\t\t\t\tvar parentEl = el.parent();\r\n\t\t\t\t\tvar tblEl = parentEl.parent().parent().parent();\r\n\t\t\t\t\tvar tblIndex = $('table', this).index(tblEl.get(0)) - 1;\r\n\t\t\t\t\tvar tmp = new Date(options.current);\r\n\t\t\t\t\tvar changed = false;\r\n\t\t\t\t\tvar fillIt = false;\r\n\t\t\t\t\tif (parentEl.is('th')) {\r\n\t\t\t\t\t\tif (parentEl.hasClass('datepickerWeek') && options.mode == 'range' && !parentEl.next().hasClass('datepickerDisabled')) {\r\n\t\t\t\t\t\t\tvar val = parseInt(parentEl.next().text(), 10);\r\n\t\t\t\t\t\t\ttmp.addMonths(tblIndex - Math.floor(options.calendars/2));\r\n\t\t\t\t\t\t\tif (parentEl.next().hasClass('datepickerNotInMonth')) {\r\n\t\t\t\t\t\t\t\ttmp.addMonths(val > 15 ? -1 : 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttmp.setDate(val);\r\n\t\t\t\t\t\t\toptions.date[0] = (tmp.setHours(0,0,0,0)).valueOf();\r\n\t\t\t\t\t\t\ttmp.setHours(23,59,59,0);\r\n\t\t\t\t\t\t\ttmp.addDays(6);\r\n\t\t\t\t\t\t\toptions.date[1] = tmp.valueOf();\r\n\t\t\t\t\t\t\tfillIt = true;\r\n\t\t\t\t\t\t\tchanged = true;\r\n\t\t\t\t\t\t\toptions.lastSel = false;\r\n\t\t\t\t\t\t} else if (parentEl.hasClass('datepickerMonth')) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t// tmp.addMonths(tblIndex - Math.floor(options.calendars/2));\r\n\t\t\t\t\t\t\t// switch (tblEl.get(0).className) {\r\n\t\t\t\t\t\t\t// \tcase 'datepickerViewDays':\r\n\t\t\t\t\t\t\t// \t\ttblEl.get(0).className = 'datepickerViewMonths';\r\n\t\t\t\t\t\t\t// \t\tel.find('span').text(tmp.getFullYear());\r\n\t\t\t\t\t\t\t// \t\tbreak;\r\n\t\t\t\t\t\t\t// \tcase 'datepickerViewMonths':\r\n\t\t\t\t\t\t\t// \t\ttblEl.get(0).className = 'datepickerViewYears';\r\n\t\t\t\t\t\t\t// \t\tel.find('span').text((tmp.getFullYear()-6) + ' - ' + (tmp.getFullYear()+5));\r\n\t\t\t\t\t\t\t// \t\tbreak;\r\n\t\t\t\t\t\t\t// \tcase 'datepickerViewYears':\r\n\t\t\t\t\t\t\t// \t\ttblEl.get(0).className = 'datepickerViewDays';\r\n\t\t\t\t\t\t\t// \t\tel.find('span').text(formatDate(tmp, 'B, Y'));\r\n\t\t\t\t\t\t\t// \t\tbreak;\r\n\t\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t} else if (parentEl.parent().parent().is('thead')) {\r\n\t\t\t\t\t\t\tswitch (tblEl.get(0).className) {\r\n\t\t\t\t\t\t\t\tcase 'datepickerViewDays':\r\n\t\t\t\t\t\t\t\t\toptions.current.addMonths(parentEl.hasClass('datepickerGoPrev') ? -1 : 1);\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'datepickerViewMonths':\r\n\t\t\t\t\t\t\t\t\toptions.current.addYears(parentEl.hasClass('datepickerGoPrev') ? -1 : 1);\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'datepickerViewYears':\r\n\t\t\t\t\t\t\t\t\toptions.current.addYears(parentEl.hasClass('datepickerGoPrev') ? -12 : 12);\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tfillIt = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (parentEl.is('td') && !parentEl.hasClass('datepickerDisabled')) {\r\n\t\t\t\t\t\tswitch (tblEl.get(0).className) {\r\n\t\t\t\t\t\t\tcase 'datepickerViewMonths':\r\n\t\t\t\t\t\t\t\toptions.current.setMonth(tblEl.find('tbody.datepickerMonths td').index(parentEl));\r\n\t\t\t\t\t\t\t\toptions.current.setFullYear(parseInt(tblEl.find('thead th.datepickerMonth span').text(), 10));\r\n\t\t\t\t\t\t\t\toptions.current.addMonths(Math.floor(options.calendars/2) - tblIndex);\r\n\t\t\t\t\t\t\t\ttblEl.get(0).className = 'datepickerViewDays';\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'datepickerViewYears':\r\n\t\t\t\t\t\t\t\toptions.current.setFullYear(parseInt(el.text(), 10));\r\n\t\t\t\t\t\t\t\ttblEl.get(0).className = 'datepickerViewMonths';\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\tvar val = parseInt(el.text(), 10);\r\n\t\t\t\t\t\t\t\ttmp.addMonths(tblIndex - Math.floor(options.calendars/2));\r\n\t\t\t\t\t\t\t\tif (parentEl.hasClass('datepickerNotInMonth')) {\r\n\t\t\t\t\t\t\t\t\ttmp.addMonths(val > 15 ? -1 : 1);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttmp.setDate(val);\r\n\t\t\t\t\t\t\t\tswitch (options.mode) {\r\n\t\t\t\t\t\t\t\t\tcase 'multiple':\r\n\t\t\t\t\t\t\t\t\t\tval = (tmp.setHours(0,0,0,0)).valueOf();\r\n\t\t\t\t\t\t\t\t\t\tif ($.inArray(val, options.date) > -1) {\r\n\t\t\t\t\t\t\t\t\t\t\t$.each(options.date, function(nr, dat){\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (dat == val) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\toptions.date.splice(nr,1);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\toptions.date.push(val);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\tcase 'range':\r\n\t\t\t\t\t\t\t\t\t\tif (!options.lastSel) {\r\n\t\t\t\t\t\t\t\t\t\t\toptions.date[0] = (tmp.setHours(0,0,0,0)).valueOf();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tval = (tmp.setHours(23,59,59,0)).valueOf();\r\n\t\t\t\t\t\t\t\t\t\tif (val < options.date[0]) {\r\n\t\t\t\t\t\t\t\t\t\t\toptions.date[1] = options.date[0] + 86399000;\r\n\t\t\t\t\t\t\t\t\t\t\toptions.date[0] = val - 86399000;\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\toptions.date[1] = val;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\toptions.lastSel = !options.lastSel;\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\t\toptions.date = tmp.valueOf();\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfillIt = true;\r\n\t\t\t\t\t\tchanged = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (fillIt) {\r\n\t\t\t\t\t\tfill(this);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (changed) {\r\n\t\t\t\t\t\toptions.onChange.apply(this, prepareDate(options));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tprepareDate = function (options) {\r\n\t\t\t\tvar tmp;\r\n\t\t\t\tif (options.mode == 'single') {\r\n\t\t\t\t\ttmp = new Date(options.date);\r\n\t\t\t\t\treturn [formatDate(tmp, options.format), tmp, options.el];\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttmp = [[],[], options.el];\r\n\t\t\t\t\t$.each(options.date, function(nr, val){\r\n\t\t\t\t\t\tvar date = new Date(val);\r\n\t\t\t\t\t\ttmp[0].push(formatDate(date, options.format));\r\n\t\t\t\t\t\ttmp[1].push(date);\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn tmp;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetViewport = function () {\r\n\t\t\t\tvar m = document.compatMode == 'CSS1Compat';\r\n\t\t\t\treturn {\r\n\t\t\t\t\tl : window.pageXOffset || (m ? document.documentElement.scrollLeft : document.body.scrollLeft),\r\n\t\t\t\t\tt : window.pageYOffset || (m ? document.documentElement.scrollTop : document.body.scrollTop),\r\n\t\t\t\t\tw : window.innerWidth || (m ? document.documentElement.clientWidth : document.body.clientWidth),\r\n\t\t\t\t\th : window.innerHeight || (m ? document.documentElement.clientHeight : document.body.clientHeight)\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tisChildOf = function(parentEl, el, container) {\r\n\t\t\t\tif (parentEl == el) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\tif (parentEl.contains) {\r\n\t\t\t\t\treturn parentEl.contains(el);\r\n\t\t\t\t}\r\n\t\t\t\tif ( parentEl.compareDocumentPosition ) {\r\n\t\t\t\t\treturn !!(parentEl.compareDocumentPosition(el) & 16);\r\n\t\t\t\t}\r\n\t\t\t\tvar prEl = el.parentNode;\r\n\t\t\t\twhile(prEl && prEl != container) {\r\n\t\t\t\t\tif (prEl == parentEl)\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\tprEl = prEl.parentNode;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tshow = function (ev) {\r\n\t\t\t\tvar cal = $('#' + $(this).data('datepickerId'));\r\n\t\t\t\tif (!cal.is(':visible')) {\r\n\t\t\t\t\tvar calEl = cal.get(0);\r\n\t\t\t\t\tfill(calEl);\r\n\t\t\t\t\tvar options = cal.data('datepicker');\r\n\t\t\t\t\toptions.onBeforeShow.apply(this, [cal.get(0)]);\r\n\t\t\t\t\tvar pos = $(this).offset();\r\n\t\t\t\t\tvar viewPort = getViewport();\r\n\t\t\t\t\tvar top = pos.top;\r\n\t\t\t\t\tvar left = pos.left;\r\n\t\t\t\t\tvar oldDisplay = $.curCSS(calEl, 'display');\r\n\t\t\t\t\tcal.css({\r\n\t\t\t\t\t\tvisibility: 'hidden',\r\n\t\t\t\t\t\tdisplay: 'block'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlayout(calEl);\r\n\t\t\t\t\tswitch (options.position){\r\n\t\t\t\t\t\tcase 'top':\r\n\t\t\t\t\t\t\ttop -= calEl.offsetHeight;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'left':\r\n\t\t\t\t\t\t\tleft -= calEl.offsetWidth;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'right':\r\n\t\t\t\t\t\t\tleft += this.offsetWidth;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'bottom':\r\n\t\t\t\t\t\t\ttop += this.offsetHeight;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (top + calEl.offsetHeight > viewPort.t + viewPort.h) {\r\n\t\t\t\t\t\ttop = pos.top  - calEl.offsetHeight;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (top < viewPort.t) {\r\n\t\t\t\t\t\ttop = pos.top + this.offsetHeight + calEl.offsetHeight;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (left + calEl.offsetWidth > viewPort.l + viewPort.w) {\r\n\t\t\t\t\t\tleft = pos.left - calEl.offsetWidth;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (left < viewPort.l) {\r\n\t\t\t\t\t\tleft = pos.left + this.offsetWidth\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcal.css({\r\n\t\t\t\t\t\tvisibility: 'visible',\r\n\t\t\t\t\t\tdisplay: 'block',\r\n\t\t\t\t\t\ttop: top + 'px',\r\n\t\t\t\t\t\tleft: left + 'px'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (options.onShow.apply(this, [cal.get(0)]) != false) {\r\n\t\t\t\t\t\tcal.show();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$(document).bind('mousedown', {cal: cal, trigger: this}, hide);\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\thide = function (ev) {\r\n\t\t\t\tif (ev.target != ev.data.trigger && !isChildOf(ev.data.cal.get(0), ev.target, ev.data.cal.get(0))) {\r\n\t\t\t\t\tif (ev.data.cal.data('datepicker').onHide.apply(this, [ev.data.cal.get(0)]) != false) {\r\n\t\t\t\t\t\tev.data.cal.hide();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$(document).unbind('mousedown', hide);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\treturn {\r\n\t\t\tinit: function(options){\r\n\t\t\t\toptions = $.extend({}, defaults, options||{});\r\n\t\t\t\textendDate(options.locale);\r\n\t\t\t\toptions.calendars = Math.max(1, parseInt(options.calendars,10)||1);\r\n\t\t\t\toptions.mode = /single|multiple|range/.test(options.mode) ? options.mode : 'single';\r\n\t\t\t\treturn this.each(function(){\r\n\t\t\t\t\tif (!$(this).data('datepicker')) {\r\n\t\t\t\t\t\toptions.el = this;\r\n\t\t\t\t\t\tif (options.date.constructor == String) {\r\n\t\t\t\t\t\t\toptions.date = parseDate(options.date, options.format);\r\n\t\t\t\t\t\t\toptions.date.setHours(0,0,0,0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (options.mode != 'single') {\r\n\t\t\t\t\t\t\tif (options.date.constructor != Array) {\r\n\t\t\t\t\t\t\t\toptions.date = [options.date.valueOf()];\r\n\t\t\t\t\t\t\t\tif (options.mode == 'range') {\r\n\t\t\t\t\t\t\t\t\toptions.date.push(((new Date(options.date[0])).setHours(23,59,59,0)).valueOf());\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < options.date.length; i++) {\r\n\t\t\t\t\t\t\t\t\toptions.date[i] = (parseDate(options.date[i], options.format).setHours(0,0,0,0)).valueOf();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (options.mode == 'range') {\r\n\t\t\t\t\t\t\t\t\toptions.date[1] = ((new Date(options.date[1])).setHours(23,59,59,0)).valueOf();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\toptions.date = options.date.valueOf();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!options.current) {\r\n\t\t\t\t\t\t\toptions.current = new Date();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\toptions.current = parseDate(options.current, options.format);\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t\toptions.current.setDate(1);\r\n\t\t\t\t\t\toptions.current.setHours(0,0,0,0);\r\n\t\t\t\t\t\tvar id = 'datepicker_' + parseInt(Math.random() * 1000), cnt;\r\n\t\t\t\t\t\toptions.id = id;\r\n\t\t\t\t\t\t$(this).data('datepickerId', options.id);\r\n\t\t\t\t\t\tvar cal = $(tpl.wrapper).attr('id', id).bind('click', click).data('datepicker', options);\r\n\t\t\t\t\t\tif (options.className) {\r\n\t\t\t\t\t\t\tcal.addClass(options.className);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar html = '';\r\n\t\t\t\t\t\tfor (var i = 0; i < options.calendars; i++) {\r\n\t\t\t\t\t\t\tcnt = options.starts;\r\n\t\t\t\t\t\t\tif (i > 0) {\r\n\t\t\t\t\t\t\t\thtml += tpl.space;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\thtml += tmpl(tpl.head.join(''), {\r\n\t\t\t\t\t\t\t\t\tweek: options.locale.weekMin,\r\n\t\t\t\t\t\t\t\t\tprev: options.prev,\r\n\t\t\t\t\t\t\t\t\tnext: options.next,\r\n\t\t\t\t\t\t\t\t\tday1: options.locale.daysMin[(cnt++)%7],\r\n\t\t\t\t\t\t\t\t\tday2: options.locale.daysMin[(cnt++)%7],\r\n\t\t\t\t\t\t\t\t\tday3: options.locale.daysMin[(cnt++)%7],\r\n\t\t\t\t\t\t\t\t\tday4: options.locale.daysMin[(cnt++)%7],\r\n\t\t\t\t\t\t\t\t\tday5: options.locale.daysMin[(cnt++)%7],\r\n\t\t\t\t\t\t\t\t\tday6: options.locale.daysMin[(cnt++)%7],\r\n\t\t\t\t\t\t\t\t\tday7: options.locale.daysMin[(cnt++)%7]\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcal\r\n\t\t\t\t\t\t\t.find('tr:first').append(html)\r\n\t\t\t\t\t\t\t\t.find('table').addClass(views[options.view]);\r\n\t\t\t\t\t\tfill(cal.get(0));\r\n\t\t\t\t\t\tif (options.flat) {\r\n\t\t\t\t\t\t\tcal.appendTo(this).show().css('position', 'relative');\r\n\t\t\t\t\t\t\tlayout(cal.get(0));\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcal.appendTo(document.body);\r\n\t\t\t\t\t\t\t$(this).bind(options.eventName, show);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tshowPicker: function() {\r\n\t\t\t\treturn this.each( function () {\r\n\t\t\t\t\tif ($(this).data('datepickerId')) {\r\n\t\t\t\t\t\tshow.apply(this);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\thidePicker: function() {\r\n\t\t\t\treturn this.each( function () {\r\n\t\t\t\t\tif ($(this).data('datepickerId')) {\r\n\t\t\t\t\t\t$('#' + $(this).data('datepickerId')).hide();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsetDate: function(date, shiftTo){\r\n\t\t\t\treturn this.each(function(){\r\n\t\t\t\t\tif ($(this).data('datepickerId')) {\r\n\t\t\t\t\t\tvar cal = $('#' + $(this).data('datepickerId'));\r\n\t\t\t\t\t\tvar options = cal.data('datepicker');\r\n\t\t\t\t\t\toptions.date = date;\r\n\t\t\t\t\t\tif (options.date.constructor == String) {\r\n\t\t\t\t\t\t\toptions.date = parseDate(options.date, options.format);\r\n\t\t\t\t\t\t\toptions.date.setHours(0,0,0,0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (options.mode != 'single') {\r\n\t\t\t\t\t\t\tif (options.date.constructor != Array) {\r\n\t\t\t\t\t\t\t\toptions.date = [options.date.valueOf()];\r\n\t\t\t\t\t\t\t\tif (options.mode == 'range') {\r\n\t\t\t\t\t\t\t\t\toptions.date.push(((new Date(options.date[0])).setHours(23,59,59,0)).valueOf());\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < options.date.length; i++) {\r\n\t\t\t\t\t\t\t\t\toptions.date[i] = (parseDate(options.date[i], options.format).setHours(0,0,0,0)).valueOf();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (options.mode == 'range') {\r\n\t\t\t\t\t\t\t\t\toptions.date[1] = ((new Date(options.date[1])).setHours(23,59,59,0)).valueOf();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\toptions.date = options.date.valueOf();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (shiftTo) {\r\n\t\t\t\t\t\t\toptions.current = new Date (options.mode != 'single' ? options.date[0] : options.date);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfill(cal.get(0));\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgetDate: function(formated) {\r\n\t\t\t\tif (this.size() > 0) {\r\n\t\t\t\t\treturn prepareDate($('#' + $(this).data('datepickerId')).data('datepicker'))[formated ? 0 : 1];\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tclear: function(){\r\n\t\t\t\treturn this.each(function(){\r\n\t\t\t\t\tif ($(this).data('datepickerId')) {\r\n\t\t\t\t\t\tvar cal = $('#' + $(this).data('datepickerId'));\r\n\t\t\t\t\t\tvar options = cal.data('datepicker');\r\n\t\t\t\t\t\tif (options.mode != 'single') {\r\n\t\t\t\t\t\t\toptions.date = [];\r\n\t\t\t\t\t\t\tfill(cal.get(0));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tfixLayout: function(){\r\n\t\t\t\treturn this.each(function(){\r\n\t\t\t\t\tif ($(this).data('datepickerId')) {\r\n\t\t\t\t\t\tvar cal = $('#' + $(this).data('datepickerId'));\r\n\t\t\t\t\t\tvar options = cal.data('datepicker');\r\n\t\t\t\t\t\tif (options.flat) {\r\n\t\t\t\t\t\t\tlayout(cal.get(0));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t}();\r\n\t$.fn.extend({\r\n\t\tDatePicker: DatePicker.init,\r\n\t\tDatePickerHide: DatePicker.hidePicker,\r\n\t\tDatePickerShow: DatePicker.showPicker,\r\n\t\tDatePickerSetDate: DatePicker.setDate,\r\n\t\tDatePickerGetDate: DatePicker.getDate,\r\n\t\tDatePickerClear: DatePicker.clear,\r\n\t\tDatePickerLayout: DatePicker.fixLayout\r\n\t});\r\n})(jQuery);\r\n\r\n(function(){\r\n  var cache = {};\r\n \r\n  this.tmpl = function tmpl(str, data){\r\n    // Figure out if we're getting a template, or if we need to\r\n    // load the template - and be sure to cache the result.\r\n    var fn = !/\\W/.test(str) ?\r\n      cache[str] = cache[str] ||\r\n        tmpl(document.getElementById(str).innerHTML) :\r\n     \r\n      // Generate a reusable function that will serve as a template\r\n      // generator (and which will be cached).\r\n      new Function(\"obj\",\r\n        \"var p=[],print=function(){p.push.apply(p,arguments);};\" +\r\n       \r\n        // Introduce the data as local variables using with(){}\r\n        \"with(obj){p.push('\" +\r\n       \r\n        // Convert the template into pure JavaScript\r\n        str\r\n          .replace(/[\\r\\t\\n]/g, \" \")\r\n          .split(\"<%\").join(\"\\t\")\r\n          .replace(/((^|%>)[^\\t]*)'/g, \"$1\\r\")\r\n          .replace(/\\t=(.*?)%>/g, \"',$1,'\")\r\n          .split(\"\\t\").join(\"');\")\r\n          .split(\"%>\").join(\"p.push('\")\r\n          .split(\"\\r\").join(\"\\\\'\")\r\n      + \"');}return p.join('');\");\r\n   \r\n    // Provide some basic currying to the user\r\n    return data ? fn( data ) : fn;\r\n  };\r\n})();","\n(function() {\n  var Dragster,\n      __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  Dragster = (function() {\n    function Dragster(el) {\n      this.el = el;\n      this.dragleave = __bind(this.dragleave, this);\n      this.dragenter = __bind(this.dragenter, this);\n      this.first = false;\n      this.second = false;\n      this.el.addEventListener(\"dragenter\", this.dragenter, false);\n      this.el.addEventListener(\"dragleave\", this.dragleave, false);\n    }\n\n    Dragster.prototype.dragenter = function(event) {\n      if (this.first) {\n        return this.second = true;\n      } else {\n        this.first = true;\n        this.customEvent = document.createEvent(\"CustomEvent\");\n        this.customEvent.initCustomEvent(\"dragster:enter\", true, true, {\n          dataTransfer: event.dataTransfer,\n          sourceEvent: event\n        });\n        return this.el.dispatchEvent(this.customEvent);\n      }\n    };\n\n    Dragster.prototype.dragleave = function(event) {\n      if (this.second) {\n        this.second = false;\n      } else if (this.first) {\n        this.first = false;\n      }\n      if (!this.first && !this.second) {\n        this.customEvent = document.createEvent(\"CustomEvent\");\n        this.customEvent.initCustomEvent(\"dragster:leave\", true, true, {\n          dataTransfer: event.dataTransfer,\n          sourceEvent: event\n        });\n        return this.el.dispatchEvent(this.customEvent);\n      }\n    };\n\n    Dragster.prototype.removeListeners = function() {\n      this.el.removeEventListener(\"dragenter\", this.dragenter, false);\n      return this.el.removeEventListener(\"dragleave\", this.dragleave, false);\n    };\n\n    Dragster.prototype.reset = function() {\n      this.first = false;\n      return this.second = false;\n    };\n\n    return Dragster;\n\n  })();\n\n  window.Dragster = Dragster;\n\n}).call(this);\n","\n/*\n *\n * More info at [www.dropzonejs.com](http://www.dropzonejs.com)\n *\n * Copyright (c) 2012, Matias Meno\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n *\n */\n\n(function() {\n  var Dropzone, Emitter, camelize, contentLoaded, detectVerticalSquash, drawImageIOSFix, noop, without,\n    __slice = [].slice,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  noop = function() {};\n\n  Emitter = (function() {\n    function Emitter() {}\n\n    Emitter.prototype.addEventListener = Emitter.prototype.on;\n\n    Emitter.prototype.on = function(event, fn) {\n      this._callbacks = this._callbacks || {};\n      if (!this._callbacks[event]) {\n        this._callbacks[event] = [];\n      }\n      this._callbacks[event].push(fn);\n      return this;\n    };\n\n    Emitter.prototype.emit = function() {\n      var args, callback, callbacks, event, _i, _len;\n      event = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n      this._callbacks = this._callbacks || {};\n      callbacks = this._callbacks[event];\n      if (callbacks) {\n        for (_i = 0, _len = callbacks.length; _i < _len; _i++) {\n          callback = callbacks[_i];\n          callback.apply(this, args);\n        }\n      }\n      return this;\n    };\n\n    Emitter.prototype.removeListener = Emitter.prototype.off;\n\n    Emitter.prototype.removeAllListeners = Emitter.prototype.off;\n\n    Emitter.prototype.removeEventListener = Emitter.prototype.off;\n\n    Emitter.prototype.off = function(event, fn) {\n      var callback, callbacks, i, _i, _len;\n      if (!this._callbacks || arguments.length === 0) {\n        this._callbacks = {};\n        return this;\n      }\n      callbacks = this._callbacks[event];\n      if (!callbacks) {\n        return this;\n      }\n      if (arguments.length === 1) {\n        delete this._callbacks[event];\n        return this;\n      }\n      for (i = _i = 0, _len = callbacks.length; _i < _len; i = ++_i) {\n        callback = callbacks[i];\n        if (callback === fn) {\n          callbacks.splice(i, 1);\n          break;\n        }\n      }\n      return this;\n    };\n\n    return Emitter;\n\n  })();\n\n  Dropzone = (function(_super) {\n    var extend, resolveOption;\n\n    __extends(Dropzone, _super);\n\n    Dropzone.prototype.Emitter = Emitter;\n\n\n    /*\n    This is a list of all available events you can register on a dropzone object.\n    \n    You can register an event handler like this:\n    \n        dropzone.on(\"dragEnter\", function() { });\n     */\n\n    Dropzone.prototype.events = [\"drop\", \"dragstart\", \"dragend\", \"dragenter\", \"dragover\", \"dragleave\", \"addedfile\", \"removedfile\", \"thumbnail\", \"error\", \"errormultiple\", \"processing\", \"processingmultiple\", \"uploadprogress\", \"totaluploadprogress\", \"sending\", \"sendingmultiple\", \"success\", \"successmultiple\", \"canceled\", \"canceledmultiple\", \"complete\", \"completemultiple\", \"reset\", \"maxfilesexceeded\", \"maxfilesreached\", \"queuecomplete\"];\n\n    Dropzone.prototype.defaultOptions = {\n      url: null,\n      method: \"post\",\n      withCredentials: false,\n      parallelUploads: 2,\n      uploadMultiple: false,\n      maxFilesize: 256,\n      paramName: \"file\",\n      createImageThumbnails: true,\n      maxThumbnailFilesize: 10,\n      thumbnailWidth: 120,\n      thumbnailHeight: 120,\n      filesizeBase: 1000,\n      maxFiles: null,\n      filesizeBase: 1000,\n      params: {},\n      clickable: true,\n      ignoreHiddenFiles: true,\n      acceptedFiles: null,\n      acceptedMimeTypes: null,\n      autoProcessQueue: true,\n      autoQueue: true,\n      addRemoveLinks: false,\n      previewsContainer: null,\n      capture: null,\n      dictDefaultMessage: \"Drop files here to upload\",\n      dictFallbackMessage: \"Your browser does not support drag'n'drop file uploads.\",\n      dictFallbackText: \"Please use the fallback form below to upload your files like in the olden days.\",\n      dictFileTooBig: \"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.\",\n      dictInvalidFileType: \"You can't upload files of this type.\",\n      dictResponseError: \"Server responded with {{statusCode}} code.\",\n      dictCancelUpload: \"Cancel upload\",\n      dictCancelUploadConfirmation: \"Are you sure you want to cancel this upload?\",\n      dictRemoveFile: \"Remove file\",\n      dictRemoveFileConfirmation: null,\n      dictMaxFilesExceeded: \"You can not upload any more files.\",\n      accept: function(file, done) {\n        return done();\n      },\n      init: function() {\n        return noop;\n      },\n      forceFallback: false,\n      fallback: function() {\n        var child, messageElement, span, _i, _len, _ref;\n        this.element.className = \"\" + this.element.className + \" dz-browser-not-supported\";\n        _ref = this.element.getElementsByTagName(\"div\");\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          child = _ref[_i];\n          if (/(^| )dz-message($| )/.test(child.className)) {\n            messageElement = child;\n            child.className = \"dz-message\";\n            continue;\n          }\n        }\n        if (!messageElement) {\n          messageElement = Dropzone.createElement(\"<div class=\\\"dz-message\\\"><span></span></div>\");\n          this.element.appendChild(messageElement);\n        }\n        span = messageElement.getElementsByTagName(\"span\")[0];\n        if (span) {\n          span.textContent = this.options.dictFallbackMessage;\n        }\n        return this.element.appendChild(this.getFallbackForm());\n      },\n      resize: function(file) {\n        var info, srcRatio, trgRatio;\n        info = {\n          srcX: 0,\n          srcY: 0,\n          srcWidth: file.width,\n          srcHeight: file.height\n        };\n        srcRatio = file.width / file.height;\n        info.optWidth = this.options.thumbnailWidth;\n        info.optHeight = this.options.thumbnailHeight;\n        if ((info.optWidth == null) && (info.optHeight == null)) {\n          info.optWidth = info.srcWidth;\n          info.optHeight = info.srcHeight;\n        } else if (info.optWidth == null) {\n          info.optWidth = srcRatio * info.optHeight;\n        } else if (info.optHeight == null) {\n          info.optHeight = (1 / srcRatio) * info.optWidth;\n        }\n        trgRatio = info.optWidth / info.optHeight;\n        if (file.height < info.optHeight || file.width < info.optWidth) {\n          info.trgHeight = info.srcHeight;\n          info.trgWidth = info.srcWidth;\n        } else {\n          if (srcRatio > trgRatio) {\n            info.srcHeight = file.height;\n            info.srcWidth = info.srcHeight * trgRatio;\n          } else {\n            info.srcWidth = file.width;\n            info.srcHeight = info.srcWidth / trgRatio;\n          }\n        }\n        info.srcX = (file.width - info.srcWidth) / 2;\n        info.srcY = (file.height - info.srcHeight) / 2;\n        return info;\n      },\n\n      /*\n      Those functions register themselves to the events on init and handle all\n      the user interface specific stuff. Overwriting them won't break the upload\n      but can break the way it's displayed.\n      You can overwrite them if you don't like the default behavior. If you just\n      want to add an additional event handler, register it on the dropzone object\n      and don't overwrite those options.\n       */\n      drop: function(e) {\n        return this.element.classList.remove(\"dz-drag-hover\");\n      },\n      dragstart: noop,\n      dragend: function(e) {\n        return this.element.classList.remove(\"dz-drag-hover\");\n      },\n      dragenter: function(e) {\n        return this.element.classList.add(\"dz-drag-hover\");\n      },\n      dragover: function(e) {\n        return this.element.classList.add(\"dz-drag-hover\");\n      },\n      dragleave: function(e) {\n        return this.element.classList.remove(\"dz-drag-hover\");\n      },\n      paste: noop,\n      reset: function() {\n        return this.element.classList.remove(\"dz-started\");\n      },\n      addedfile: function(file) {\n        var node, removeFileEvent, removeLink, _i, _j, _k, _len, _len1, _len2, _ref, _ref1, _ref2, _results;\n        if (this.element === this.previewsContainer) {\n          this.element.classList.add(\"dz-started\");\n        }\n        if (this.previewsContainer) {\n          file.previewElement = Dropzone.createElement(this.options.previewTemplate.trim());\n          file.previewTemplate = file.previewElement;\n          this.previewsContainer.appendChild(file.previewElement);\n          _ref = file.previewElement.querySelectorAll(\"[data-dz-name]\");\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            node = _ref[_i];\n            node.textContent = file.name;\n          }\n          _ref1 = file.previewElement.querySelectorAll(\"[data-dz-size]\");\n          for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {\n            node = _ref1[_j];\n            node.innerHTML = this.filesize(file.size);\n          }\n          if (this.options.addRemoveLinks) {\n            file._removeLink = Dropzone.createElement(\"<a class=\\\"dz-remove\\\" href=\\\"javascript:undefined;\\\" data-dz-remove>\" + this.options.dictRemoveFile + \"</a>\");\n            file.previewElement.appendChild(file._removeLink);\n          }\n          removeFileEvent = (function(_this) {\n            return function(e) {\n              e.preventDefault();\n              e.stopPropagation();\n              if (file.status === Dropzone.UPLOADING) {\n                return Dropzone.confirm(_this.options.dictCancelUploadConfirmation, function() {\n                  return _this.removeFile(file);\n                });\n              } else {\n                if (_this.options.dictRemoveFileConfirmation) {\n                  return Dropzone.confirm(_this.options.dictRemoveFileConfirmation, function() {\n                    return _this.removeFile(file);\n                  });\n                } else {\n                  return _this.removeFile(file);\n                }\n              }\n            };\n          })(this);\n          _ref2 = file.previewElement.querySelectorAll(\"[data-dz-remove]\");\n          _results = [];\n          for (_k = 0, _len2 = _ref2.length; _k < _len2; _k++) {\n            removeLink = _ref2[_k];\n            _results.push(removeLink.addEventListener(\"click\", removeFileEvent));\n          }\n          return _results;\n        }\n      },\n      removedfile: function(file) {\n        var _ref;\n        if (file.previewElement) {\n          if ((_ref = file.previewElement) != null) {\n            _ref.parentNode.removeChild(file.previewElement);\n          }\n        }\n        return this._updateMaxFilesReachedClass();\n      },\n      thumbnail: function(file, dataUrl) {\n        var thumbnailElement, _i, _len, _ref;\n        if (file.previewElement) {\n          file.previewElement.classList.remove(\"dz-file-preview\");\n          _ref = file.previewElement.querySelectorAll(\"[data-dz-thumbnail]\");\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            thumbnailElement = _ref[_i];\n            thumbnailElement.alt = file.name;\n            thumbnailElement.src = dataUrl;\n          }\n          return setTimeout(((function(_this) {\n            return function() {\n              return file.previewElement.classList.add(\"dz-image-preview\");\n            };\n          })(this)), 1);\n        }\n      },\n      error: function(file, message) {\n        var node, _i, _len, _ref, _results;\n        if (file.previewElement) {\n          file.previewElement.classList.add(\"dz-error\");\n          if (typeof message !== \"String\" && message.error) {\n            message = message.error;\n          }\n          _ref = file.previewElement.querySelectorAll(\"[data-dz-errormessage]\");\n          _results = [];\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            node = _ref[_i];\n            _results.push(node.textContent = message);\n          }\n          return _results;\n        }\n      },\n      errormultiple: noop,\n      processing: function(file) {\n        if (file.previewElement) {\n          file.previewElement.classList.add(\"dz-processing\");\n          if (file._removeLink) {\n            return file._removeLink.textContent = this.options.dictCancelUpload;\n          }\n        }\n      },\n      processingmultiple: noop,\n      uploadprogress: function(file, progress, bytesSent) {\n        var node, _i, _len, _ref, _results;\n        if (file.previewElement) {\n          _ref = file.previewElement.querySelectorAll(\"[data-dz-uploadprogress]\");\n          _results = [];\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            node = _ref[_i];\n            if (node.nodeName === 'PROGRESS') {\n              _results.push(node.value = progress);\n            } else {\n              _results.push(node.style.width = \"\" + progress + \"%\");\n            }\n          }\n          return _results;\n        }\n      },\n      totaluploadprogress: noop,\n      sending: noop,\n      sendingmultiple: noop,\n      success: function(file) {\n        if (file.previewElement) {\n          return file.previewElement.classList.add(\"dz-success\");\n        }\n      },\n      successmultiple: noop,\n      canceled: function(file) {\n        return this.emit(\"error\", file, \"Upload canceled.\");\n      },\n      canceledmultiple: noop,\n      complete: function(file) {\n        if (file._removeLink) {\n          file._removeLink.textContent = this.options.dictRemoveFile;\n        }\n        if (file.previewElement) {\n          return file.previewElement.classList.add(\"dz-complete\");\n        }\n      },\n      completemultiple: noop,\n      maxfilesexceeded: noop,\n      maxfilesreached: noop,\n      queuecomplete: noop,\n      previewTemplate: \"<div class=\\\"dz-preview dz-file-preview\\\">\\n  <div class=\\\"dz-image\\\"><img data-dz-thumbnail /></div>\\n  <div class=\\\"dz-details\\\">\\n    <div class=\\\"dz-size\\\"><span data-dz-size></span></div>\\n    <div class=\\\"dz-filename\\\"><span data-dz-name></span></div>\\n  </div>\\n  <div class=\\\"dz-progress\\\"><span class=\\\"dz-upload\\\" data-dz-uploadprogress></span></div>\\n  <div class=\\\"dz-error-message\\\"><span data-dz-errormessage></span></div>\\n  <div class=\\\"dz-success-mark\\\">\\n    <svg width=\\\"54px\\\" height=\\\"54px\\\" viewBox=\\\"0 0 54 54\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" xmlns:sketch=\\\"http://www.bohemiancoding.com/sketch/ns\\\">\\n      <title>Check</title>\\n      <defs></defs>\\n      <g id=\\\"Page-1\\\" stroke=\\\"none\\\" stroke-width=\\\"1\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\" sketch:type=\\\"MSPage\\\">\\n        <path d=\\\"M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\\\" id=\\\"Oval-2\\\" stroke-opacity=\\\"0.198794158\\\" stroke=\\\"#747474\\\" fill-opacity=\\\"0.816519475\\\" fill=\\\"#FFFFFF\\\" sketch:type=\\\"MSShapeGroup\\\"></path>\\n      </g>\\n    </svg>\\n  </div>\\n  <div class=\\\"dz-error-mark\\\">\\n    <svg width=\\\"54px\\\" height=\\\"54px\\\" viewBox=\\\"0 0 54 54\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" xmlns:sketch=\\\"http://www.bohemiancoding.com/sketch/ns\\\">\\n      <title>Error</title>\\n      <defs></defs>\\n      <g id=\\\"Page-1\\\" stroke=\\\"none\\\" stroke-width=\\\"1\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\" sketch:type=\\\"MSPage\\\">\\n        <g id=\\\"Check-+-Oval-2\\\" sketch:type=\\\"MSLayerGroup\\\" stroke=\\\"#747474\\\" stroke-opacity=\\\"0.198794158\\\" fill=\\\"#FFFFFF\\\" fill-opacity=\\\"0.816519475\\\">\\n          <path d=\\\"M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\\\" id=\\\"Oval-2\\\" sketch:type=\\\"MSShapeGroup\\\"></path>\\n        </g>\\n      </g>\\n    </svg>\\n  </div>\\n</div>\"\n    };\n\n    extend = function() {\n      var key, object, objects, target, val, _i, _len;\n      target = arguments[0], objects = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n      for (_i = 0, _len = objects.length; _i < _len; _i++) {\n        object = objects[_i];\n        for (key in object) {\n          val = object[key];\n          target[key] = val;\n        }\n      }\n      return target;\n    };\n\n    function Dropzone(element, options) {\n      var elementOptions, fallback, _ref;\n      this.element = element;\n      this.version = Dropzone.version;\n      this.defaultOptions.previewTemplate = this.defaultOptions.previewTemplate.replace(/\\n*/g, \"\");\n      this.clickableElements = [];\n      this.listeners = [];\n      this.files = [];\n      if (typeof this.element === \"string\") {\n        this.element = document.querySelector(this.element);\n      }\n      if (!(this.element && (this.element.nodeType != null))) {\n        throw new Error(\"Invalid dropzone element.\");\n      }\n      if (this.element.dropzone) {\n        throw new Error(\"Dropzone already attached.\");\n      }\n      Dropzone.instances.push(this);\n      this.element.dropzone = this;\n      elementOptions = (_ref = Dropzone.optionsForElement(this.element)) != null ? _ref : {};\n      this.options = extend({}, this.defaultOptions, elementOptions, options != null ? options : {});\n      if (this.options.forceFallback || !Dropzone.isBrowserSupported()) {\n        return this.options.fallback.call(this);\n      }\n      if (this.options.url == null) {\n        this.options.url = this.element.getAttribute(\"action\");\n      }\n      if (!this.options.url) {\n        throw new Error(\"No URL provided.\");\n      }\n      if (this.options.acceptedFiles && this.options.acceptedMimeTypes) {\n        throw new Error(\"You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.\");\n      }\n      if (this.options.acceptedMimeTypes) {\n        this.options.acceptedFiles = this.options.acceptedMimeTypes;\n        delete this.options.acceptedMimeTypes;\n      }\n      this.options.method = this.options.method.toUpperCase();\n      if ((fallback = this.getExistingFallback()) && fallback.parentNode) {\n        fallback.parentNode.removeChild(fallback);\n      }\n      if (this.options.previewsContainer !== false) {\n        if (this.options.previewsContainer) {\n          this.previewsContainer = Dropzone.getElement(this.options.previewsContainer, \"previewsContainer\");\n        } else {\n          this.previewsContainer = this.element;\n        }\n      }\n      if (this.options.clickable) {\n        if (this.options.clickable === true) {\n          this.clickableElements = [this.element];\n        } else {\n          this.clickableElements = Dropzone.getElements(this.options.clickable, \"clickable\");\n        }\n      }\n      this.init();\n    }\n\n    Dropzone.prototype.getAcceptedFiles = function() {\n      var file, _i, _len, _ref, _results;\n      _ref = this.files;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        file = _ref[_i];\n        if (file.accepted) {\n          _results.push(file);\n        }\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.getRejectedFiles = function() {\n      var file, _i, _len, _ref, _results;\n      _ref = this.files;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        file = _ref[_i];\n        if (!file.accepted) {\n          _results.push(file);\n        }\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.getFilesWithStatus = function(status) {\n      var file, _i, _len, _ref, _results;\n      _ref = this.files;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        file = _ref[_i];\n        if (file.status === status) {\n          _results.push(file);\n        }\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.getQueuedFiles = function() {\n      return this.getFilesWithStatus(Dropzone.QUEUED);\n    };\n\n    Dropzone.prototype.getUploadingFiles = function() {\n      return this.getFilesWithStatus(Dropzone.UPLOADING);\n    };\n\n    Dropzone.prototype.getActiveFiles = function() {\n      var file, _i, _len, _ref, _results;\n      _ref = this.files;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        file = _ref[_i];\n        if (file.status === Dropzone.UPLOADING || file.status === Dropzone.QUEUED) {\n          _results.push(file);\n        }\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.init = function() {\n      var eventName, noPropagation, setupHiddenFileInput, _i, _len, _ref, _ref1;\n      if (this.element.tagName === \"form\") {\n        this.element.setAttribute(\"enctype\", \"multipart/form-data\");\n      }\n      if (this.element.classList.contains(\"dropzone\") && !this.element.querySelector(\".dz-message\")) {\n        this.element.appendChild(Dropzone.createElement(\"<div class=\\\"dz-default dz-message\\\"><span>\" + this.options.dictDefaultMessage + \"</span></div>\"));\n      }\n      if (this.clickableElements.length) {\n        setupHiddenFileInput = (function(_this) {\n          return function() {\n            if (_this.hiddenFileInput) {\n              document.body.removeChild(_this.hiddenFileInput);\n            }\n            _this.hiddenFileInput = document.createElement(\"input\");\n            _this.hiddenFileInput.setAttribute(\"type\", \"file\");\n            if ((_this.options.maxFiles == null) || _this.options.maxFiles > 1) {\n              _this.hiddenFileInput.setAttribute(\"multiple\", \"multiple\");\n            }\n            _this.hiddenFileInput.className = \"dz-hidden-input\";\n            if (_this.options.acceptedFiles != null) {\n              _this.hiddenFileInput.setAttribute(\"accept\", _this.options.acceptedFiles);\n            }\n            if (_this.options.capture != null) {\n              _this.hiddenFileInput.setAttribute(\"capture\", _this.options.capture);\n            }\n            _this.hiddenFileInput.style.visibility = \"hidden\";\n            _this.hiddenFileInput.style.position = \"absolute\";\n            _this.hiddenFileInput.style.top = \"0\";\n            _this.hiddenFileInput.style.left = \"0\";\n            _this.hiddenFileInput.style.height = \"0\";\n            _this.hiddenFileInput.style.width = \"0\";\n            document.body.appendChild(_this.hiddenFileInput);\n            return _this.hiddenFileInput.addEventListener(\"change\", function() {\n              var file, files, _i, _len;\n              files = _this.hiddenFileInput.files;\n              if (files.length) {\n                for (_i = 0, _len = files.length; _i < _len; _i++) {\n                  file = files[_i];\n                  _this.addFile(file);\n                }\n              }\n              return setupHiddenFileInput();\n            });\n          };\n        })(this);\n        setupHiddenFileInput();\n      }\n      this.URL = (_ref = window.URL) != null ? _ref : window.webkitURL;\n      _ref1 = this.events;\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        eventName = _ref1[_i];\n        this.on(eventName, this.options[eventName]);\n      }\n      this.on(\"uploadprogress\", (function(_this) {\n        return function() {\n          return _this.updateTotalUploadProgress();\n        };\n      })(this));\n      this.on(\"removedfile\", (function(_this) {\n        return function() {\n          return _this.updateTotalUploadProgress();\n        };\n      })(this));\n      this.on(\"canceled\", (function(_this) {\n        return function(file) {\n          return _this.emit(\"complete\", file);\n        };\n      })(this));\n      this.on(\"complete\", (function(_this) {\n        return function(file) {\n          if (_this.getUploadingFiles().length === 0 && _this.getQueuedFiles().length === 0) {\n            return setTimeout((function() {\n              return _this.emit(\"queuecomplete\");\n            }), 0);\n          }\n        };\n      })(this));\n      noPropagation = function(e) {\n        e.stopPropagation();\n        if (e.preventDefault) {\n          return e.preventDefault();\n        } else {\n          return e.returnValue = false;\n        }\n      };\n      this.listeners = [\n        {\n          element: this.element,\n          events: {\n            \"dragstart\": (function(_this) {\n              return function(e) {\n                return _this.emit(\"dragstart\", e);\n              };\n            })(this),\n            \"dragenter\": (function(_this) {\n              return function(e) {\n                noPropagation(e);\n                return _this.emit(\"dragenter\", e);\n              };\n            })(this),\n            \"dragover\": (function(_this) {\n              return function(e) {\n                var efct;\n                try {\n                  efct = e.dataTransfer.effectAllowed;\n                } catch (_error) {}\n                e.dataTransfer.dropEffect = 'move' === efct || 'linkMove' === efct ? 'move' : 'copy';\n                noPropagation(e);\n                return _this.emit(\"dragover\", e);\n              };\n            })(this),\n            \"dragleave\": (function(_this) {\n              return function(e) {\n                return _this.emit(\"dragleave\", e);\n              };\n            })(this),\n            \"drop\": (function(_this) {\n              return function(e) {\n                noPropagation(e);\n                return _this.drop(e);\n              };\n            })(this),\n            \"dragend\": (function(_this) {\n              return function(e) {\n                return _this.emit(\"dragend\", e);\n              };\n            })(this)\n          }\n        }\n      ];\n      this.clickableElements.forEach((function(_this) {\n        return function(clickableElement) {\n          return _this.listeners.push({\n            element: clickableElement,\n            events: {\n              \"click\": function(evt) {\n                if ((clickableElement !== _this.element) || (evt.target === _this.element || Dropzone.elementInside(evt.target, _this.element.querySelector(\".dz-message\")))) {\n                  return _this.hiddenFileInput.click();\n                }\n              }\n            }\n          });\n        };\n      })(this));\n      this.enable();\n      return this.options.init.call(this);\n    };\n\n    Dropzone.prototype.destroy = function() {\n      var _ref;\n      this.disable();\n      this.removeAllFiles(true);\n      if ((_ref = this.hiddenFileInput) != null ? _ref.parentNode : void 0) {\n        this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput);\n        this.hiddenFileInput = null;\n      }\n      delete this.element.dropzone;\n      return Dropzone.instances.splice(Dropzone.instances.indexOf(this), 1);\n    };\n\n    Dropzone.prototype.updateTotalUploadProgress = function() {\n      var activeFiles, file, totalBytes, totalBytesSent, totalUploadProgress, _i, _len, _ref;\n      totalBytesSent = 0;\n      totalBytes = 0;\n      activeFiles = this.getActiveFiles();\n      if (activeFiles.length) {\n        _ref = this.getActiveFiles();\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          file = _ref[_i];\n          totalBytesSent += file.upload.bytesSent;\n          totalBytes += file.upload.total;\n        }\n        totalUploadProgress = 100 * totalBytesSent / totalBytes;\n      } else {\n        totalUploadProgress = 100;\n      }\n      return this.emit(\"totaluploadprogress\", totalUploadProgress, totalBytes, totalBytesSent);\n    };\n\n    Dropzone.prototype._getParamName = function(n) {\n      if (typeof this.options.paramName === \"function\") {\n        return this.options.paramName(n);\n      } else {\n        return \"\" + this.options.paramName + (this.options.uploadMultiple ? \"[\" + n + \"]\" : \"\");\n      }\n    };\n\n    Dropzone.prototype.getFallbackForm = function() {\n      var existingFallback, fields, fieldsString, form;\n      if (existingFallback = this.getExistingFallback()) {\n        return existingFallback;\n      }\n      fieldsString = \"<div class=\\\"dz-fallback\\\">\";\n      if (this.options.dictFallbackText) {\n        fieldsString += \"<p>\" + this.options.dictFallbackText + \"</p>\";\n      }\n      fieldsString += \"<input type=\\\"file\\\" name=\\\"\" + (this._getParamName(0)) + \"\\\" \" + (this.options.uploadMultiple ? 'multiple=\"multiple\"' : void 0) + \" /><input type=\\\"submit\\\" value=\\\"Upload!\\\"></div>\";\n      fields = Dropzone.createElement(fieldsString);\n      if (this.element.tagName !== \"FORM\") {\n        form = Dropzone.createElement(\"<form action=\\\"\" + this.options.url + \"\\\" enctype=\\\"multipart/form-data\\\" method=\\\"\" + this.options.method + \"\\\"></form>\");\n        form.appendChild(fields);\n      } else {\n        this.element.setAttribute(\"enctype\", \"multipart/form-data\");\n        this.element.setAttribute(\"method\", this.options.method);\n      }\n      return form != null ? form : fields;\n    };\n\n    Dropzone.prototype.getExistingFallback = function() {\n      var fallback, getFallback, tagName, _i, _len, _ref;\n      getFallback = function(elements) {\n        var el, _i, _len;\n        for (_i = 0, _len = elements.length; _i < _len; _i++) {\n          el = elements[_i];\n          if (/(^| )fallback($| )/.test(el.className)) {\n            return el;\n          }\n        }\n      };\n      _ref = [\"div\", \"form\"];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        tagName = _ref[_i];\n        if (fallback = getFallback(this.element.getElementsByTagName(tagName))) {\n          return fallback;\n        }\n      }\n    };\n\n    Dropzone.prototype.setupEventListeners = function() {\n      var elementListeners, event, listener, _i, _len, _ref, _results;\n      _ref = this.listeners;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        elementListeners = _ref[_i];\n        _results.push((function() {\n          var _ref1, _results1;\n          _ref1 = elementListeners.events;\n          _results1 = [];\n          for (event in _ref1) {\n            listener = _ref1[event];\n            _results1.push(elementListeners.element.addEventListener(event, listener, false));\n          }\n          return _results1;\n        })());\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.removeEventListeners = function() {\n      var elementListeners, event, listener, _i, _len, _ref, _results;\n      _ref = this.listeners;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        elementListeners = _ref[_i];\n        _results.push((function() {\n          var _ref1, _results1;\n          _ref1 = elementListeners.events;\n          _results1 = [];\n          for (event in _ref1) {\n            listener = _ref1[event];\n            _results1.push(elementListeners.element.removeEventListener(event, listener, false));\n          }\n          return _results1;\n        })());\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.disable = function() {\n      var file, _i, _len, _ref, _results;\n      this.clickableElements.forEach(function(element) {\n        return element.classList.remove(\"dz-clickable\");\n      });\n      this.removeEventListeners();\n      _ref = this.files;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        file = _ref[_i];\n        _results.push(this.cancelUpload(file));\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.enable = function() {\n      this.clickableElements.forEach(function(element) {\n        return element.classList.add(\"dz-clickable\");\n      });\n      return this.setupEventListeners();\n    };\n\n    Dropzone.prototype.filesize = function(size) {\n      var cutoff, i, selectedSize, selectedUnit, unit, units, _i, _len;\n      units = ['TB', 'GB', 'MB', 'KB', 'b'];\n      selectedSize = selectedUnit = null;\n      for (i = _i = 0, _len = units.length; _i < _len; i = ++_i) {\n        unit = units[i];\n        cutoff = Math.pow(this.options.filesizeBase, 4 - i) / 10;\n        if (size >= cutoff) {\n          selectedSize = size / Math.pow(this.options.filesizeBase, 4 - i);\n          selectedUnit = unit;\n          break;\n        }\n      }\n      selectedSize = Math.round(10 * selectedSize) / 10;\n      return \"<strong>\" + selectedSize + \"</strong> \" + selectedUnit;\n    };\n\n    Dropzone.prototype._updateMaxFilesReachedClass = function() {\n      if ((this.options.maxFiles != null) && this.getAcceptedFiles().length >= this.options.maxFiles) {\n        if (this.getAcceptedFiles().length === this.options.maxFiles) {\n          this.emit('maxfilesreached', this.files);\n        }\n        return this.element.classList.add(\"dz-max-files-reached\");\n      } else {\n        return this.element.classList.remove(\"dz-max-files-reached\");\n      }\n    };\n\n    Dropzone.prototype.drop = function(e) {\n      var files, items;\n      if (!e.dataTransfer) {\n        return;\n      }\n      this.emit(\"drop\", e);\n      files = e.dataTransfer.files;\n      if (files.length) {\n        items = e.dataTransfer.items;\n        if (items && items.length && (items[0].webkitGetAsEntry != null)) {\n          this._addFilesFromItems(items);\n        } else {\n          this.handleFiles(files);\n        }\n      }\n    };\n\n    Dropzone.prototype.paste = function(e) {\n      var items, _ref;\n      if ((e != null ? (_ref = e.clipboardData) != null ? _ref.items : void 0 : void 0) == null) {\n        return;\n      }\n      this.emit(\"paste\", e);\n      items = e.clipboardData.items;\n      if (items.length) {\n        return this._addFilesFromItems(items);\n      }\n    };\n\n    Dropzone.prototype.handleFiles = function(files) {\n      var file, _i, _len, _results;\n      _results = [];\n      for (_i = 0, _len = files.length; _i < _len; _i++) {\n        file = files[_i];\n        _results.push(this.addFile(file));\n      }\n      return _results;\n    };\n\n    Dropzone.prototype._addFilesFromItems = function(items) {\n      var entry, item, _i, _len, _results;\n      _results = [];\n      for (_i = 0, _len = items.length; _i < _len; _i++) {\n        item = items[_i];\n        if ((item.webkitGetAsEntry != null) && (entry = item.webkitGetAsEntry())) {\n          if (entry.isFile) {\n            _results.push(this.addFile(item.getAsFile()));\n          } else if (entry.isDirectory) {\n            _results.push(this._addFilesFromDirectory(entry, entry.name));\n          } else {\n            _results.push(void 0);\n          }\n        } else if (item.getAsFile != null) {\n          if ((item.kind == null) || item.kind === \"file\") {\n            _results.push(this.addFile(item.getAsFile()));\n          } else {\n            _results.push(void 0);\n          }\n        } else {\n          _results.push(void 0);\n        }\n      }\n      return _results;\n    };\n\n    Dropzone.prototype._addFilesFromDirectory = function(directory, path) {\n      var dirReader, entriesReader;\n      dirReader = directory.createReader();\n      entriesReader = (function(_this) {\n        return function(entries) {\n          var entry, _i, _len;\n          for (_i = 0, _len = entries.length; _i < _len; _i++) {\n            entry = entries[_i];\n            if (entry.isFile) {\n              entry.file(function(file) {\n                if (_this.options.ignoreHiddenFiles && file.name.substring(0, 1) === '.') {\n                  return;\n                }\n                file.fullPath = \"\" + path + \"/\" + file.name;\n                return _this.addFile(file);\n              });\n            } else if (entry.isDirectory) {\n              _this._addFilesFromDirectory(entry, \"\" + path + \"/\" + entry.name);\n            }\n          }\n        };\n      })(this);\n      return dirReader.readEntries(entriesReader, function(error) {\n        return typeof console !== \"undefined\" && console !== null ? typeof console.log === \"function\" ? console.log(error) : void 0 : void 0;\n      });\n    };\n\n    Dropzone.prototype.accept = function(file, done) {\n      if (file.size > this.options.maxFilesize * 1024 * 1024) {\n        return done(this.options.dictFileTooBig.replace(\"{{filesize}}\", Math.round(file.size / 1024 / 10.24) / 100).replace(\"{{maxFilesize}}\", this.options.maxFilesize));\n      } else if (!Dropzone.isValidFile(file, this.options.acceptedFiles)) {\n        return done(this.options.dictInvalidFileType);\n      } else if ((this.options.maxFiles != null) && this.getAcceptedFiles().length >= this.options.maxFiles) {\n        done(this.options.dictMaxFilesExceeded.replace(\"{{maxFiles}}\", this.options.maxFiles));\n        return this.emit(\"maxfilesexceeded\", file);\n      } else {\n        return this.options.accept.call(this, file, done);\n      }\n    };\n\n    Dropzone.prototype.addFile = function(file) {\n      file.upload = {\n        progress: 0,\n        total: file.size,\n        bytesSent: 0\n      };\n      this.files.push(file);\n      file.status = Dropzone.ADDED;\n      this.emit(\"addedfile\", file);\n      this._enqueueThumbnail(file);\n      return this.accept(file, (function(_this) {\n        return function(error) {\n          if (error) {\n            file.accepted = false;\n            _this._errorProcessing([file], error);\n          } else {\n            file.accepted = true;\n            if (_this.options.autoQueue) {\n              _this.enqueueFile(file);\n            }\n          }\n          return _this._updateMaxFilesReachedClass();\n        };\n      })(this));\n    };\n\n    Dropzone.prototype.enqueueFiles = function(files) {\n      var file, _i, _len;\n      for (_i = 0, _len = files.length; _i < _len; _i++) {\n        file = files[_i];\n        this.enqueueFile(file);\n      }\n      return null;\n    };\n\n    Dropzone.prototype.enqueueFile = function(file) {\n      if (file.status === Dropzone.ADDED && file.accepted === true) {\n        file.status = Dropzone.QUEUED;\n        if (this.options.autoProcessQueue) {\n          return setTimeout(((function(_this) {\n            return function() {\n              return _this.processQueue();\n            };\n          })(this)), 0);\n        }\n      } else {\n        throw new Error(\"This file can't be queued because it has already been processed or was rejected.\");\n      }\n    };\n\n    Dropzone.prototype._thumbnailQueue = [];\n\n    Dropzone.prototype._processingThumbnail = false;\n\n    Dropzone.prototype._enqueueThumbnail = function(file) {\n      if (this.options.createImageThumbnails && file.type.match(/image.*/) && file.size <= this.options.maxThumbnailFilesize * 1024 * 1024) {\n        this._thumbnailQueue.push(file);\n        return setTimeout(((function(_this) {\n          return function() {\n            return _this._processThumbnailQueue();\n          };\n        })(this)), 0);\n      }\n    };\n\n    Dropzone.prototype._processThumbnailQueue = function() {\n      if (this._processingThumbnail || this._thumbnailQueue.length === 0) {\n        return;\n      }\n      this._processingThumbnail = true;\n      return this.createThumbnail(this._thumbnailQueue.shift(), (function(_this) {\n        return function() {\n          _this._processingThumbnail = false;\n          return _this._processThumbnailQueue();\n        };\n      })(this));\n    };\n\n    Dropzone.prototype.removeFile = function(file) {\n      if (file.status === Dropzone.UPLOADING) {\n        this.cancelUpload(file);\n      }\n      this.files = without(this.files, file);\n      this.emit(\"removedfile\", file);\n      if (this.files.length === 0) {\n        return this.emit(\"reset\");\n      }\n    };\n\n    Dropzone.prototype.removeAllFiles = function(cancelIfNecessary) {\n      var file, _i, _len, _ref;\n      if (cancelIfNecessary == null) {\n        cancelIfNecessary = false;\n      }\n      _ref = this.files.slice();\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        file = _ref[_i];\n        if (file.status !== Dropzone.UPLOADING || cancelIfNecessary) {\n          this.removeFile(file);\n        }\n      }\n      return null;\n    };\n\n    Dropzone.prototype.createThumbnail = function(file, callback) {\n      var fileReader;\n      fileReader = new FileReader;\n      fileReader.onload = (function(_this) {\n        return function() {\n          if (file.type === \"image/svg+xml\") {\n            _this.emit(\"thumbnail\", file, fileReader.result);\n            if (callback != null) {\n              callback();\n            }\n            return;\n          }\n          return _this.createThumbnailFromUrl(file, fileReader.result, callback);\n        };\n      })(this);\n      return fileReader.readAsDataURL(file);\n    };\n\n    Dropzone.prototype.createThumbnailFromUrl = function(file, imageUrl, callback) {\n      var img;\n      img = document.createElement(\"img\");\n      img.onload = (function(_this) {\n        return function() {\n          var canvas, ctx, resizeInfo, thumbnail, _ref, _ref1, _ref2, _ref3;\n          file.width = img.width;\n          file.height = img.height;\n          resizeInfo = _this.options.resize.call(_this, file);\n          if (resizeInfo.trgWidth == null) {\n            resizeInfo.trgWidth = resizeInfo.optWidth;\n          }\n          if (resizeInfo.trgHeight == null) {\n            resizeInfo.trgHeight = resizeInfo.optHeight;\n          }\n          canvas = document.createElement(\"canvas\");\n          ctx = canvas.getContext(\"2d\");\n          canvas.width = resizeInfo.trgWidth;\n          canvas.height = resizeInfo.trgHeight;\n          drawImageIOSFix(ctx, img, (_ref = resizeInfo.srcX) != null ? _ref : 0, (_ref1 = resizeInfo.srcY) != null ? _ref1 : 0, resizeInfo.srcWidth, resizeInfo.srcHeight, (_ref2 = resizeInfo.trgX) != null ? _ref2 : 0, (_ref3 = resizeInfo.trgY) != null ? _ref3 : 0, resizeInfo.trgWidth, resizeInfo.trgHeight);\n          thumbnail = canvas.toDataURL(\"image/png\");\n          _this.emit(\"thumbnail\", file, thumbnail);\n          if (callback != null) {\n            return callback();\n          }\n        };\n      })(this);\n      if (callback != null) {\n        img.onerror = callback;\n      }\n      return img.src = imageUrl;\n    };\n\n    Dropzone.prototype.processQueue = function() {\n      var i, parallelUploads, processingLength, queuedFiles;\n      parallelUploads = this.options.parallelUploads;\n      processingLength = this.getUploadingFiles().length;\n      i = processingLength;\n      if (processingLength >= parallelUploads) {\n        return;\n      }\n      queuedFiles = this.getQueuedFiles();\n      if (!(queuedFiles.length > 0)) {\n        return;\n      }\n      if (this.options.uploadMultiple) {\n        return this.processFiles(queuedFiles.slice(0, parallelUploads - processingLength));\n      } else {\n        while (i < parallelUploads) {\n          if (!queuedFiles.length) {\n            return;\n          }\n          this.processFile(queuedFiles.shift());\n          i++;\n        }\n      }\n    };\n\n    Dropzone.prototype.processFile = function(file) {\n      return this.processFiles([file]);\n    };\n\n    Dropzone.prototype.processFiles = function(files) {\n      var file, _i, _len;\n      for (_i = 0, _len = files.length; _i < _len; _i++) {\n        file = files[_i];\n        file.processing = true;\n        file.status = Dropzone.UPLOADING;\n        this.emit(\"processing\", file);\n      }\n      if (this.options.uploadMultiple) {\n        this.emit(\"processingmultiple\", files);\n      }\n      return this.uploadFiles(files);\n    };\n\n    Dropzone.prototype._getFilesWithXhr = function(xhr) {\n      var file, files;\n      return files = (function() {\n        var _i, _len, _ref, _results;\n        _ref = this.files;\n        _results = [];\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          file = _ref[_i];\n          if (file.xhr === xhr) {\n            _results.push(file);\n          }\n        }\n        return _results;\n      }).call(this);\n    };\n\n    Dropzone.prototype.cancelUpload = function(file) {\n      var groupedFile, groupedFiles, _i, _j, _len, _len1, _ref;\n      if (file.status === Dropzone.UPLOADING) {\n        groupedFiles = this._getFilesWithXhr(file.xhr);\n        for (_i = 0, _len = groupedFiles.length; _i < _len; _i++) {\n          groupedFile = groupedFiles[_i];\n          groupedFile.status = Dropzone.CANCELED;\n        }\n        file.xhr.abort();\n        for (_j = 0, _len1 = groupedFiles.length; _j < _len1; _j++) {\n          groupedFile = groupedFiles[_j];\n          this.emit(\"canceled\", groupedFile);\n        }\n        if (this.options.uploadMultiple) {\n          this.emit(\"canceledmultiple\", groupedFiles);\n        }\n      } else if ((_ref = file.status) === Dropzone.ADDED || _ref === Dropzone.QUEUED) {\n        file.status = Dropzone.CANCELED;\n        this.emit(\"canceled\", file);\n        if (this.options.uploadMultiple) {\n          this.emit(\"canceledmultiple\", [file]);\n        }\n      }\n      if (this.options.autoProcessQueue) {\n        return this.processQueue();\n      }\n    };\n\n    resolveOption = function() {\n      var args, option;\n      option = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n      if (typeof option === 'function') {\n        return option.apply(this, args);\n      }\n      return option;\n    };\n\n    Dropzone.prototype.uploadFile = function(file) {\n      return this.uploadFiles([file]);\n    };\n\n    Dropzone.prototype.uploadFiles = function(files) {\n      var file, formData, handleError, headerName, headerValue, headers, i, input, inputName, inputType, key, method, option, progressObj, response, updateProgress, url, value, xhr, _i, _j, _k, _l, _len, _len1, _len2, _len3, _m, _ref, _ref1, _ref2, _ref3, _ref4, _ref5;\n      xhr = new XMLHttpRequest();\n      for (_i = 0, _len = files.length; _i < _len; _i++) {\n        file = files[_i];\n        file.xhr = xhr;\n      }\n      method = resolveOption(this.options.method, files);\n      url = resolveOption(this.options.url, files);\n      xhr.open(method, url, true);\n      xhr.withCredentials = !!this.options.withCredentials;\n      response = null;\n      handleError = (function(_this) {\n        return function() {\n          var _j, _len1, _results;\n          _results = [];\n          for (_j = 0, _len1 = files.length; _j < _len1; _j++) {\n            file = files[_j];\n            _results.push(_this._errorProcessing(files, response || _this.options.dictResponseError.replace(\"{{statusCode}}\", xhr.status), xhr));\n          }\n          return _results;\n        };\n      })(this);\n      updateProgress = (function(_this) {\n        return function(e) {\n          var allFilesFinished, progress, _j, _k, _l, _len1, _len2, _len3, _results;\n          if (e != null) {\n            progress = 100 * e.loaded / e.total;\n            for (_j = 0, _len1 = files.length; _j < _len1; _j++) {\n              file = files[_j];\n              file.upload = {\n                progress: progress,\n                total: e.total,\n                bytesSent: e.loaded\n              };\n            }\n          } else {\n            allFilesFinished = true;\n            progress = 100;\n            for (_k = 0, _len2 = files.length; _k < _len2; _k++) {\n              file = files[_k];\n              if (!(file.upload.progress === 100 && file.upload.bytesSent === file.upload.total)) {\n                allFilesFinished = false;\n              }\n              file.upload.progress = progress;\n              file.upload.bytesSent = file.upload.total;\n            }\n            if (allFilesFinished) {\n              return;\n            }\n          }\n          _results = [];\n          for (_l = 0, _len3 = files.length; _l < _len3; _l++) {\n            file = files[_l];\n            _results.push(_this.emit(\"uploadprogress\", file, progress, file.upload.bytesSent));\n          }\n          return _results;\n        };\n      })(this);\n      xhr.onload = (function(_this) {\n        return function(e) {\n          var _ref;\n          if (files[0].status === Dropzone.CANCELED) {\n            return;\n          }\n          if (xhr.readyState !== 4) {\n            return;\n          }\n          response = xhr.responseText;\n          if (xhr.getResponseHeader(\"content-type\") && ~xhr.getResponseHeader(\"content-type\").indexOf(\"application/json\")) {\n            try {\n              response = JSON.parse(response);\n            } catch (_error) {\n              e = _error;\n              response = \"Invalid JSON response from server.\";\n            }\n          }\n          updateProgress();\n          if (!((200 <= (_ref = xhr.status) && _ref < 300))) {\n            return handleError();\n          } else {\n            return _this._finished(files, response, e);\n          }\n        };\n      })(this);\n      xhr.onerror = (function(_this) {\n        return function() {\n          if (files[0].status === Dropzone.CANCELED) {\n            return;\n          }\n          return handleError();\n        };\n      })(this);\n      progressObj = (_ref = xhr.upload) != null ? _ref : xhr;\n      progressObj.onprogress = updateProgress;\n      headers = {\n        \"Accept\": \"application/json\",\n        \"Cache-Control\": \"no-cache\",\n        \"X-Requested-With\": \"XMLHttpRequest\"\n      };\n      if (this.options.headers) {\n        extend(headers, this.options.headers);\n      }\n      for (headerName in headers) {\n        headerValue = headers[headerName];\n        xhr.setRequestHeader(headerName, headerValue);\n      }\n      formData = new FormData();\n      if (this.options.params) {\n        _ref1 = this.options.params;\n        for (key in _ref1) {\n          value = _ref1[key];\n          formData.append(key, value);\n        }\n      }\n      for (_j = 0, _len1 = files.length; _j < _len1; _j++) {\n        file = files[_j];\n        this.emit(\"sending\", file, xhr, formData);\n      }\n      if (this.options.uploadMultiple) {\n        this.emit(\"sendingmultiple\", files, xhr, formData);\n      }\n      if (this.element.tagName === \"FORM\") {\n        _ref2 = this.element.querySelectorAll(\"input, textarea, select, button\");\n        for (_k = 0, _len2 = _ref2.length; _k < _len2; _k++) {\n          input = _ref2[_k];\n          inputName = input.getAttribute(\"name\");\n          inputType = input.getAttribute(\"type\");\n          if (input.tagName === \"SELECT\" && input.hasAttribute(\"multiple\")) {\n            _ref3 = input.options;\n            for (_l = 0, _len3 = _ref3.length; _l < _len3; _l++) {\n              option = _ref3[_l];\n              if (option.selected) {\n                formData.append(inputName, option.value);\n              }\n            }\n          } else if (!inputType || ((_ref4 = inputType.toLowerCase()) !== \"checkbox\" && _ref4 !== \"radio\") || input.checked) {\n            formData.append(inputName, input.value);\n          }\n        }\n      }\n      for (i = _m = 0, _ref5 = files.length - 1; 0 <= _ref5 ? _m <= _ref5 : _m >= _ref5; i = 0 <= _ref5 ? ++_m : --_m) {\n        formData.append(this._getParamName(i), files[i], files[i].name);\n      }\n      return xhr.send(formData);\n    };\n\n    Dropzone.prototype._finished = function(files, responseText, e) {\n      var file, _i, _len;\n      for (_i = 0, _len = files.length; _i < _len; _i++) {\n        file = files[_i];\n        file.status = Dropzone.SUCCESS;\n        this.emit(\"success\", file, responseText, e);\n        this.emit(\"complete\", file);\n      }\n      if (this.options.uploadMultiple) {\n        this.emit(\"successmultiple\", files, responseText, e);\n        this.emit(\"completemultiple\", files);\n      }\n      if (this.options.autoProcessQueue) {\n        return this.processQueue();\n      }\n    };\n\n    Dropzone.prototype._errorProcessing = function(files, message, xhr) {\n      var file, _i, _len;\n      for (_i = 0, _len = files.length; _i < _len; _i++) {\n        file = files[_i];\n        file.status = Dropzone.ERROR;\n        this.emit(\"error\", file, message, xhr);\n        this.emit(\"complete\", file);\n      }\n      if (this.options.uploadMultiple) {\n        this.emit(\"errormultiple\", files, message, xhr);\n        this.emit(\"completemultiple\", files);\n      }\n      if (this.options.autoProcessQueue) {\n        return this.processQueue();\n      }\n    };\n\n    return Dropzone;\n\n  })(Emitter);\n\n  Dropzone.version = \"4.0.1\";\n\n  Dropzone.options = {};\n\n  Dropzone.optionsForElement = function(element) {\n    if (element.getAttribute(\"id\")) {\n      return Dropzone.options[camelize(element.getAttribute(\"id\"))];\n    } else {\n      return void 0;\n    }\n  };\n\n  Dropzone.instances = [];\n\n  Dropzone.forElement = function(element) {\n    if (typeof element === \"string\") {\n      element = document.querySelector(element);\n    }\n    if ((element != null ? element.dropzone : void 0) == null) {\n      throw new Error(\"No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.\");\n    }\n    return element.dropzone;\n  };\n\n  Dropzone.autoDiscover = true;\n\n  Dropzone.discover = function() {\n    var checkElements, dropzone, dropzones, _i, _len, _results;\n    if (document.querySelectorAll) {\n      dropzones = document.querySelectorAll(\".dropzone\");\n    } else {\n      dropzones = [];\n      checkElements = function(elements) {\n        var el, _i, _len, _results;\n        _results = [];\n        for (_i = 0, _len = elements.length; _i < _len; _i++) {\n          el = elements[_i];\n          if (/(^| )dropzone($| )/.test(el.className)) {\n            _results.push(dropzones.push(el));\n          } else {\n            _results.push(void 0);\n          }\n        }\n        return _results;\n      };\n      checkElements(document.getElementsByTagName(\"div\"));\n      checkElements(document.getElementsByTagName(\"form\"));\n    }\n    _results = [];\n    for (_i = 0, _len = dropzones.length; _i < _len; _i++) {\n      dropzone = dropzones[_i];\n      if (Dropzone.optionsForElement(dropzone) !== false) {\n        _results.push(new Dropzone(dropzone));\n      } else {\n        _results.push(void 0);\n      }\n    }\n    return _results;\n  };\n\n  Dropzone.blacklistedBrowsers = [/opera.*Macintosh.*version\\/12/i];\n\n  Dropzone.isBrowserSupported = function() {\n    var capableBrowser, regex, _i, _len, _ref;\n    capableBrowser = true;\n    if (window.File && window.FileReader && window.FileList && window.Blob && window.FormData && document.querySelector) {\n      if (!(\"classList\" in document.createElement(\"a\"))) {\n        capableBrowser = false;\n      } else {\n        _ref = Dropzone.blacklistedBrowsers;\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          regex = _ref[_i];\n          if (regex.test(navigator.userAgent)) {\n            capableBrowser = false;\n            continue;\n          }\n        }\n      }\n    } else {\n      capableBrowser = false;\n    }\n    return capableBrowser;\n  };\n\n  without = function(list, rejectedItem) {\n    var item, _i, _len, _results;\n    _results = [];\n    for (_i = 0, _len = list.length; _i < _len; _i++) {\n      item = list[_i];\n      if (item !== rejectedItem) {\n        _results.push(item);\n      }\n    }\n    return _results;\n  };\n\n  camelize = function(str) {\n    return str.replace(/[\\-_](\\w)/g, function(match) {\n      return match.charAt(1).toUpperCase();\n    });\n  };\n\n  Dropzone.createElement = function(string) {\n    var div;\n    div = document.createElement(\"div\");\n    div.innerHTML = string;\n    return div.childNodes[0];\n  };\n\n  Dropzone.elementInside = function(element, container) {\n    if (element === container) {\n      return true;\n    }\n    while (element = element.parentNode) {\n      if (element === container) {\n        return true;\n      }\n    }\n    return false;\n  };\n\n  Dropzone.getElement = function(el, name) {\n    var element;\n    if (typeof el === \"string\") {\n      element = document.querySelector(el);\n    } else if (el.nodeType != null) {\n      element = el;\n    }\n    if (element == null) {\n      throw new Error(\"Invalid `\" + name + \"` option provided. Please provide a CSS selector or a plain HTML element.\");\n    }\n    return element;\n  };\n\n  Dropzone.getElements = function(els, name) {\n    var e, el, elements, _i, _j, _len, _len1, _ref;\n    if (els instanceof Array) {\n      elements = [];\n      try {\n        for (_i = 0, _len = els.length; _i < _len; _i++) {\n          el = els[_i];\n          elements.push(this.getElement(el, name));\n        }\n      } catch (_error) {\n        e = _error;\n        elements = null;\n      }\n    } else if (typeof els === \"string\") {\n      elements = [];\n      _ref = document.querySelectorAll(els);\n      for (_j = 0, _len1 = _ref.length; _j < _len1; _j++) {\n        el = _ref[_j];\n        elements.push(el);\n      }\n    } else if (els.nodeType != null) {\n      elements = [els];\n    }\n    if (!((elements != null) && elements.length)) {\n      throw new Error(\"Invalid `\" + name + \"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.\");\n    }\n    return elements;\n  };\n\n  Dropzone.confirm = function(question, accepted, rejected) {\n    if (window.confirm(question)) {\n      return accepted();\n    } else if (rejected != null) {\n      return rejected();\n    }\n  };\n\n  Dropzone.isValidFile = function(file, acceptedFiles) {\n    var baseMimeType, mimeType, validType, _i, _len;\n    if (!acceptedFiles) {\n      return true;\n    }\n    acceptedFiles = acceptedFiles.split(\",\");\n    mimeType = file.type;\n    baseMimeType = mimeType.replace(/\\/.*$/, \"\");\n    for (_i = 0, _len = acceptedFiles.length; _i < _len; _i++) {\n      validType = acceptedFiles[_i];\n      validType = validType.trim();\n      if (validType.charAt(0) === \".\") {\n        if (file.name.toLowerCase().indexOf(validType.toLowerCase(), file.name.length - validType.length) !== -1) {\n          return true;\n        }\n      } else if (/\\/\\*$/.test(validType)) {\n        if (baseMimeType === validType.replace(/\\/.*$/, \"\")) {\n          return true;\n        }\n      } else {\n        if (mimeType === validType) {\n          return true;\n        }\n      }\n    }\n    return false;\n  };\n\n  if (typeof jQuery !== \"undefined\" && jQuery !== null) {\n    jQuery.fn.dropzone = function(options) {\n      return this.each(function() {\n        return new Dropzone(this, options);\n      });\n    };\n  }\n\n  if (typeof module !== \"undefined\" && module !== null) {\n    module.exports = Dropzone;\n  } else {\n    window.Dropzone = Dropzone;\n  }\n\n  Dropzone.ADDED = \"added\";\n\n  Dropzone.QUEUED = \"queued\";\n\n  Dropzone.ACCEPTED = Dropzone.QUEUED;\n\n  Dropzone.UPLOADING = \"uploading\";\n\n  Dropzone.PROCESSING = Dropzone.UPLOADING;\n\n  Dropzone.CANCELED = \"canceled\";\n\n  Dropzone.ERROR = \"error\";\n\n  Dropzone.SUCCESS = \"success\";\n\n\n  /*\n  \n  Bugfix for iOS 6 and 7\n  Source: http://stackoverflow.com/questions/11929099/html5-canvas-drawimage-ratio-bug-ios\n  based on the work of https://github.com/stomita/ios-imagefile-megapixel\n   */\n\n  detectVerticalSquash = function(img) {\n    var alpha, canvas, ctx, data, ey, ih, iw, py, ratio, sy;\n    iw = img.naturalWidth;\n    ih = img.naturalHeight;\n    canvas = document.createElement(\"canvas\");\n    canvas.width = 1;\n    canvas.height = ih;\n    ctx = canvas.getContext(\"2d\");\n    ctx.drawImage(img, 0, 0);\n    data = ctx.getImageData(0, 0, 1, ih).data;\n    sy = 0;\n    ey = ih;\n    py = ih;\n    while (py > sy) {\n      alpha = data[(py - 1) * 4 + 3];\n      if (alpha === 0) {\n        ey = py;\n      } else {\n        sy = py;\n      }\n      py = (ey + sy) >> 1;\n    }\n    ratio = py / ih;\n    if (ratio === 0) {\n      return 1;\n    } else {\n      return ratio;\n    }\n  };\n\n  drawImageIOSFix = function(ctx, img, sx, sy, sw, sh, dx, dy, dw, dh) {\n    var vertSquashRatio;\n    vertSquashRatio = detectVerticalSquash(img);\n    return ctx.drawImage(img, sx, sy, sw, sh, dx, dy, dw, dh / vertSquashRatio);\n  };\n\n\n  /*\n   * contentloaded.js\n   *\n   * Author: Diego Perini (diego.perini at gmail.com)\n   * Summary: cross-browser wrapper for DOMContentLoaded\n   * Updated: 20101020\n   * License: MIT\n   * Version: 1.2\n   *\n   * URL:\n   * http://javascript.nwbox.com/ContentLoaded/\n   * http://javascript.nwbox.com/ContentLoaded/MIT-LICENSE\n   */\n\n  contentLoaded = function(win, fn) {\n    var add, doc, done, init, poll, pre, rem, root, top;\n    done = false;\n    top = true;\n    doc = win.document;\n    root = doc.documentElement;\n    add = (doc.addEventListener ? \"addEventListener\" : \"attachEvent\");\n    rem = (doc.addEventListener ? \"removeEventListener\" : \"detachEvent\");\n    pre = (doc.addEventListener ? \"\" : \"on\");\n    init = function(e) {\n      if (e.type === \"readystatechange\" && doc.readyState !== \"complete\") {\n        return;\n      }\n      (e.type === \"load\" ? win : doc)[rem](pre + e.type, init, false);\n      if (!done && (done = true)) {\n        return fn.call(win, e.type || e);\n      }\n    };\n    poll = function() {\n      var e;\n      try {\n        root.doScroll(\"left\");\n      } catch (_error) {\n        e = _error;\n        setTimeout(poll, 50);\n        return;\n      }\n      return init(\"poll\");\n    };\n    if (doc.readyState !== \"complete\") {\n      if (doc.createEventObject && root.doScroll) {\n        try {\n          top = !win.frameElement;\n        } catch (_error) {}\n        if (top) {\n          poll();\n        }\n      }\n      doc[add](pre + \"DOMContentLoaded\", init, false);\n      doc[add](pre + \"readystatechange\", init, false);\n      return win[add](pre + \"load\", init, false);\n    }\n  };\n\n  Dropzone._autoDiscoverFunction = function() {\n    if (Dropzone.autoDiscover) {\n      return Dropzone.discover();\n    }\n  };\n\n  contentLoaded(window, Dropzone._autoDiscoverFunction);\n\n}).call(this);","/*\n * bootstrap-filestyle\n * doc: http://dev.tudosobreweb.com.br/bootstrap-filestyle/\n * github: https://github.com/markusslima/bootstrap-filestyle\n *\n * Copyright (c) 2014 Markus Vinicius da Silva Lima\n * Version 1.1.0\n * Licensed under the MIT license.\n */\n(function ($) {\n    \"use strict\";\n\n    var Filestyle = function (element, options) {\n        this.options = options;\n        this.$elementFilestyle = [];\n        this.$element = $(element);\n    };\n\n    Filestyle.prototype = {\n        clear: function () {\n            this.$element.val('');\n            this.$elementFilestyle.find(':text').val('');\n        },\n\n        destroy: function () {\n            this.$element\n                .removeAttr('style')\n                .removeData('filestyle')\n                .val('');\n            this.$elementFilestyle.remove();\n        },\n        \n        disabled: function (value) {\n          if (value === true) {\n            if (!this.options.disabled) {\n              this.$element\n                    .attr('disabled', 'true');\n                this.$elementFilestyle.find('label').attr('disabled', 'true');\n                this.options.disabled = true;\n            }\n          } else if (value === false) {\n            if (this.options.disabled) {\n                this.$element\n                    .removeAttr('disabled');\n                this.$elementFilestyle.find('label').removeAttr('disabled');\n                this.options.disabled = false;\n            }\n            } else {\n                return this.options.disabled;\n            }\n        },\n        \n        buttonBefore: function (value) {\n          if (value === true) {\n            if (!this.options.buttonBefore) {\n              this.options.buttonBefore = true;\n              if (this.options.input) {\n                this.$elementFilestyle.remove();\n                this.constructor();\n                this.pushNameFiles();\n              }\n            }\n          } else if (value === false) {\n            if (this.options.buttonBefore) {\n                this.options.buttonBefore = false;\n                if (this.options.input) {\n                this.$elementFilestyle.remove();\n                this.constructor();\n                this.pushNameFiles();\n              }\n            }\n            } else {\n                return this.options.buttonBefore;\n            }\n        },\n\n        icon: function (value) {\n            if (value === true) {\n                if (!this.options.icon) {\n                    this.options.icon = true;\n                    this.$elementFilestyle.find('label').prepend(this.htmlIcon());\n                }\n            } else if (value === false) {\n                if (this.options.icon) {\n                    this.options.icon = false;\n                    this.$elementFilestyle.find('.glyphicon').remove();\n                }\n            } else {\n                return this.options.icon;\n            }\n        },\n\n        input: function (value) {\n            if (value === true) {\n                if (!this.options.input) {\n                    this.options.input = true;\n                    \n                    if (this.options.buttonBefore) {\n                      this.$elementFilestyle.append(this.htmlInput());\n                    } else {\n                      this.$elementFilestyle.prepend(this.htmlInput());\n                    }\n                    \n                    this.$elementFilestyle.find('.badge').remove();\n\n                    var content = '',\n                        files = [];\n                    if (this.$element[0].files === undefined) {\n                        files[0] = {'name': this.$element[0].value};\n                    } else {\n                        files = this.$element[0].files;\n                    }\n\n                    for (var i = 0; i < files.length; i++) {\n                        content += files[i].name.split(\"\\\\\").pop() + ', ';\n                    }\n                    if (content !== '') {\n                        this.$elementFilestyle.find(':text').val(content.replace(/\\, $/g, ''));\n                    }\n                    \n                    this.$elementFilestyle.find('.group-span-filestyle').addClass('input-group-btn');\n                }\n            } else if (value === false) {\n                if (this.options.input) {\n                    this.options.input = false;\n                    this.$elementFilestyle.find(':text').remove();\n                    var files = [];\n                  if (this.$element[0].files === undefined) {\n                      files[0] = {'name': this.$element[0].value};\n                  } else {\n                      files = this.$element[0].files;\n                  }\n                  if (files.length > 0) {\n                    this.$elementFilestyle.find('label').append(' <span class=\"badge\">'+files.length+'</span>');\n                  }\n                  this.$elementFilestyle.find('.group-span-filestyle').removeClass('input-group-btn');\n                }\n            } else {\n                return this.options.input;\n            }\n        },\n        \n        size: function (value) {\n          if (value !== undefined) {\n                var btn = this.$elementFilestyle.find('label'),\n                    input = this.$elementFilestyle.find('input');\n                    \n                btn.removeClass('btn-lg btn-sm');\n                input.removeClass('input-lg input-sm');\n                if (value != 'nr') {\n                  btn.addClass('btn-'+value);\n                  input.addClass('input-'+value);\n                }\n            } else {\n                return this.options.size;\n            }\n        },\n\n        buttonText: function (value) {\n            if (value !== undefined) {\n                this.options.buttonText = value;\n                this.$elementFilestyle.find('label span').html(this.options.buttonText);\n            } else {\n                return this.options.buttonText;\n            }\n        },\n\n        buttonName: function (value) {\n            if (value !== undefined) {\n                this.options.buttonName = value;\n                this.$elementFilestyle.find('label').attr({'class': 'btn '+this.options.buttonName});\n            } else {\n                return this.options.buttonName;\n            }\n        },\n\n        iconName: function (value) {\n            if (value !== undefined) {\n                this.$elementFilestyle.find('.glyphicon').attr({'class': '.glyphicon ' + this.options.iconName});\n            } else {\n                return this.options.iconName;\n            }\n        },\n\n        htmlIcon: function () {\n            if (this.options.icon) {\n                return '<span class=\"glyphicon '+this.options.iconName+'\"></span> ';\n            } else {\n                return '';\n            }\n        },\n\n        htmlInput: function () {\n            if (this.options.input) {\n                return '<input type=\"text\" class=\"form-control '+(this.options.size=='nr'?'':'input-'+this.options.size)+'\" disabled> ';\n            } else {\n                return '';\n            }\n        },\n        \n        // puts the name of the input files\n        pushNameFiles: function () {\n          var content = '',\n              files = [];\n            if (this.$element[0].files === undefined) {\n                files[0] = {'name': this.$element.value};\n            } else {\n                files = this.$element[0].files;\n            }\n            \n            for (var i = 0; i < files.length; i++) {\n                content += files[i].name.split(\"\\\\\").pop() + ', ';\n            }\n\n            if (content !== '') {\n                this.$elementFilestyle.find(':text').val(content.replace(/\\, $/g, ''));\n            } else {\n              this.$elementFilestyle.find(':text').val('');\n            }\n        },\n\n        constructor: function () {\n            var _self = this,\n                html = '',\n                id = this.$element.attr('id'),\n                files = [],\n                btn = '',\n                $label,\n                $labelFocusableContainer;\n\n            if (id === '' || !id) {\n                id = 'filestyle-'+$('.bootstrap-filestyle').length;\n                this.$element.attr({'id': id});\n            }\n            \n            btn = '<span class=\"group-span-filestyle '+(this.options.input ? 'input-group-btn' : '') +'\">'+\n                  '<label for=\"'+id+'\" class=\"btn '+this.options.buttonName+' '+(this.options.size=='nr'?'':'btn-'+this.options.size)+'\" '+(this.options.disabled?'disabled=\"true\"':'')+'>'+\n                          this.htmlIcon()+this.options.buttonText+\n                      '</label>'+\n                  '</span>';\n\n            html = this.options.buttonBefore ? btn+this.htmlInput() : this.htmlInput()+btn;\n\n            this.$elementFilestyle = $('<div class=\"bootstrap-filestyle input-group\">'+html+'</div>');\n\n            $label = this.$elementFilestyle.find('label');\n            $labelFocusableContainer = $label.parent();\n\n            $labelFocusableContainer\n                .attr('tabindex', \"0\")\n                .keypress(function(e) {\n                    if (e.keyCode === 13 || e.charCode === 32) {\n                        $label.click();\n                    }\n                });\n\n            // hidding input file and add filestyle\n            this.$element\n                .css({'position':'absolute','clip':'rect(0,0,0,0)'})\n                .attr('tabindex', \"-1\")\n                .after(this.$elementFilestyle);\n                \n            if (this.options.disabled) {\n              this.$element.attr('disabled', 'true');\n            }\n\n            // Getting input file value\n            this.$element.change(function () {\n                var content = '';\n                if (this.files === undefined) {\n                    files[0] = {'name': this.value};\n                } else {\n                    files = this.files;\n                }\n\n                for (var i = 0; i < files.length; i++) {\n                    content += files[i].name.split(\"\\\\\").pop() + ', ';\n                }\n\n                if (content !== '') {\n                    _self.$elementFilestyle.find(':text').val(content.replace(/\\, $/g, ''));\n                } else {\n                  _self.$elementFilestyle.find(':text').val('');\n                }\n                \n                if (_self.options.input == false) {\n                  if (_self.$elementFilestyle.find('.badge').length == 0) {\n                    _self.$elementFilestyle.find('label').append(' <span class=\"badge\">'+files.length+'</span>');\n                  } else if (files.length == 0) {\n                    _self.$elementFilestyle.find('.badge').remove();\n                  } else {\n                    _self.$elementFilestyle.find('.badge').html(files.length);\n                  }\n                } else {\n                  _self.$elementFilestyle.find('.badge').remove();\n                }\n            });\n\n            // Check if browser is Firefox\n            if (window.navigator.userAgent.search(/firefox/i) > -1) {\n                // Simulating choose file for firefox\n                this.$elementFilestyle.find('label').click(function () {\n                    _self.$element.click();\n                    return false;\n                });\n            }\n        }\n    };\n\n    var old = $.fn.filestyle;\n\n    $.fn.filestyle = function (option, value) {\n        var get = '',\n            element = this.each(function () {\n                if ($(this).attr('type') === 'file') {\n                    var $this = $(this),\n                        data = $this.data('filestyle'),\n                        options = $.extend({}, $.fn.filestyle.defaults, option, typeof option === 'object' && option);\n\n                    if (!data) {\n                        $this.data('filestyle', (data = new Filestyle(this, options)));\n                        data.constructor();\n                    }\n\n                    if (typeof option === 'string') {\n                        get = data[option](value);\n                    }\n                }\n            });\n\n        if (typeof get !== undefined) {\n            return get;\n        } else {\n            return element;\n        }\n    };\n\n    $.fn.filestyle.defaults = {\n        'buttonText': 'Choose file',\n        'iconName': 'glyphicon-folder-open',\n        'buttonName': 'btn-default',\n        'size': 'nr',\n        'input': true,\n        'icon': true,\n        'buttonBefore': false,\n        'disabled': false\n    };\n\n    $.fn.filestyle.noConflict = function () {\n        $.fn.filestyle = old;\n        return this;\n    };\n\n    // Data attributes register\n    $(function() {\n        $('.filestyle').each(function () {\n            var $this = $(this),\n                options = {\n                    \n                    'input': $this.attr('data-input') === 'false' ? false : true,\n                    'icon': $this.attr('data-icon') === 'false' ? false : true,\n                    'buttonBefore': $this.attr('data-buttonBefore') === 'true' ? true : false,\n                    'disabled': $this.attr('data-disabled') === 'true' ? true : false,\n                    'size': $this.attr('data-size'),\n                    'buttonText': $this.attr('data-buttonText'),\n                    'buttonName': $this.attr('data-buttonName'),\n                    'iconName': $this.attr('data-iconName')\n                };\n    \n            $this.filestyle(options);\n        });\n    });\n})(window.jQuery);","// tipsy, facebook style tooltips for jquery with fancy fading\n// version 1.0.0a\n// (c) 2008-2010 jason frame [jason@onehackoranother.com] and modificated by Sergio Alvarez @saleiva\n// released under the MIT license\n//\n//  Changes:\n//  April 27 2016: fixed problem with element size.\n//  June 3 2013: Added the custom class before the calc of the position.\n\n(function($) {\n\n  var MOVE_OFFSET = 6;\n\n  function maybeCall(thing, ctx, argument) {\n    return (typeof thing == 'function') ? (thing.call(ctx, argument)) : thing;\n  };\n\n  function isElementInDOM(ele) {\n    while (ele = ele.parentNode) {\n      if (ele == document) return true;\n    }\n    return false;\n  };\n\n  function Tipsy(element, options) {\n    this.$element = $(element);\n    this.options = options;\n    this.enabled = true;\n    this.fixTitle();\n  };\n\n  Tipsy.prototype = {\n    show: function() {\n      var title = this.getTitle();\n      if (title && this.enabled) {\n        var $tip = this.tip();\n\n        $tip.find('.tipsy-inner')[this.options.html ? 'html' : 'text'](title);\n            $tip[0].className = 'tipsy'; // reset classname in case of dynamic gravity\n            $tip.remove().css({top: 0, left: 0, visibility: 'hidden', display: 'block'}).prependTo(document.body);\n\n            // Modified so we can use custom class names\n            if (this.options.className) {\n              $tip.addClass(maybeCall(this.options.className, this.$element[0]));\n            }\n\n            // Modified\n            var pos = $.extend({}, this.$element.offset(), {\n              width: this.$element[0].getBoundingClientRect().width,\n              height: this.$element[0].getBoundingClientRect().height\n            });\n\n            var actualWidth = $tip[0].offsetWidth,\n            actualHeight = $tip[0].offsetHeight,\n            gravity = maybeCall(this.options.gravity, this.$element[0], $tip[0]);\n\n            var tp;\n            switch (gravity.charAt(0)) {\n              case 'n':\n              tp = {top: pos.top + pos.height + this.options.offset, left: pos.left + pos.width / 2 - actualWidth / 2};\n              mo = {top: parseInt(pos.top + pos.height + this.options.offset + MOVE_OFFSET), opacity: this.options.opacity};\n              break;\n              case 's':\n              tp = {top: pos.top - actualHeight - this.options.offset, left: pos.left + pos.width / 2 - actualWidth / 2};\n              mo = {top: parseInt(pos.top - actualHeight - this.options.offset - MOVE_OFFSET), opacity: this.options.opacity};\n              break;\n              case 'e':\n              tp = {top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left - actualWidth - this.options.offset};\n              mo = {left: parseInt(pos.left - actualWidth - this.options.offset - MOVE_OFFSET), opacity: this.options.opacity};\n              break;\n              case 'w':\n              tp = {top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left + pos.width + this.options.offset};\n              mo = {left: parseInt(pos.left + pos.width + this.options.offset + MOVE_OFFSET), opacity: this.options.opacity};\n              break;\n            }\n\n            if (gravity.length == 2) {\n              if (gravity.charAt(1) == 'w') {\n                tp.left = pos.left + pos.width / 2 - 15;\n              } else {\n                tp.left = pos.left + pos.width / 2 - actualWidth + 15;\n              }\n            }\n\n            $tip.css(tp).addClass('tipsy-' + gravity);\n            $tip.find('.tipsy-arrow')[0].className = 'tipsy-arrow tipsy-arrow-' + gravity.charAt(0);\n\n            if (this.options.fade) {\n              $tip.stop().css({opacity: 0, display: 'block', visibility: 'visible'}).animate(mo, 200);\n            } else {\n              $tip.css({visibility: 'visible', opacity: this.options.opacity});\n            }\n          }\n        },\n\n        hide: function() {\n\n          gravity = maybeCall(this.options.gravity, this.$element[0]);\n\n          switch (gravity.charAt(0)) {\n            case 'n':\n            mo = {top: parseInt(this.tip().css(\"top\")) + MOVE_OFFSET, opacity: 0};\n            break;\n            case 's':\n            mo = {top: parseInt(this.tip().css(\"top\")) - MOVE_OFFSET, opacity: 0};\n            break;\n            case 'e':\n            mo = {left: parseInt(this.tip().css(\"left\")) - MOVE_OFFSET, opacity: 0};\n            break;\n            case 'w':\n            mo = {left: parseInt(this.tip().css(\"left\")) + MOVE_OFFSET, opacity: 0};\n            break;\n          }\n\n          if (this.options.fade) {\n            this.tip().stop().animate(mo, 200, function(){$(this).remove();});\n          } else {\n            this.tip().remove();\n          }\n        },\n\n        fixTitle: function() {\n          var $e = this.$element;\n          if ($e.attr('title') || typeof($e.attr('original-title')) != 'string') {\n            $e.attr('original-title', $e.attr('title') || '').removeAttr('title');\n          }\n        },\n\n        getTitle: function() {\n          var title, $e = this.$element, o = this.options;\n          this.fixTitle();\n          var title, o = this.options;\n          if (typeof o.title == 'string') {\n            title = $e.attr(o.title == 'title' ? 'original-title' : o.title);\n          } else if (typeof o.title == 'function') {\n            title = o.title.call($e[0]);\n          }\n          title = ('' + title).replace(/(^\\s*|\\s*$)/, \"\");\n          return title || o.fallback;\n        },\n\n        tip: function() {\n          if (!this.$tip) {\n            this.$tip = $('<div class=\"tipsy\"></div>').html('<div class=\"tipsy-arrow\"></div><div class=\"tipsy-inner\"></div>');\n            this.$tip.data('tipsy-pointee', this.$element[0]);\n          }\n          return this.$tip;\n        },\n\n        validate: function() {\n          if (!this.$element[0].parentNode) {\n            this.hide();\n            this.$element = null;\n            this.options = null;\n          }\n        },\n\n        remove: function() { this.enabled = false; this.$tip && this.$tip.remove(); },\n        enable: function() { this.enabled = true; },\n        disable: function() { this.enabled = false; },\n        toggleEnabled: function() { this.enabled = !this.enabled; }\n      };\n\n      $.fn.tipsy = function(options) {\n\n        if (options === true) {\n          return this.data('tipsy');\n        } else if (typeof options == 'string') {\n          var tipsy = this.data('tipsy');\n          if (tipsy) tipsy[options]();\n          return this;\n        }\n\n        options = $.extend({}, $.fn.tipsy.defaults, options);\n\n        function get(ele) {\n          var tipsy = $.data(ele, 'tipsy');\n          if (!tipsy) {\n            tipsy = new Tipsy(ele, $.fn.tipsy.elementOptions(ele, options));\n            $.data(ele, 'tipsy', tipsy);\n          }\n          return tipsy;\n        }\n\n        function enter() {\n          var tipsy = get(this);\n          tipsy.hoverState = 'in';\n          if (options.delayIn == 0) {\n            tipsy.show();\n          } else {\n            tipsy.fixTitle();\n            setTimeout(function() { if (tipsy.hoverState == 'in') tipsy.show(); }, options.delayIn);\n          }\n        };\n\n        function leave() {\n          var tipsy = get(this);\n          tipsy.hoverState = 'out';\n          if (options.delayOut == 0) {\n            tipsy.hide();\n          } else {\n            setTimeout(function() { if (tipsy.hoverState == 'out') tipsy.hide(); }, options.delayOut);\n          }\n        };\n\n        if (!options.live) this.each(function() { get(this); });\n\n        if (options.trigger != 'manual') {\n          var binder   = options.live ? 'live' : 'bind',\n          eventIn  = options.trigger == 'hover' ? 'mouseenter' : 'focus',\n          eventOut = options.trigger == 'hover' ? 'mouseleave' : 'blur';\n          this[binder](eventIn, enter)[binder](eventOut, leave);\n        }\n\n        return this;\n\n      };\n\n      $.fn.tipsy.defaults = {\n        className: null,\n        delayIn: 0,\n        delayOut: 0,\n        fade: false,\n        fallback: '',\n        gravity: 'n',\n        html: false,\n        live: false,\n        offset: 0,\n        opacity: 0.8,\n        title: 'title',\n        trigger: 'hover'\n      };\n\n      $.fn.tipsy.revalidate = function() {\n        $('.tipsy').each(function() {\n          var pointee = $.data(this, 'tipsy-pointee');\n          if (!pointee || !isElementInDOM(pointee)) {\n            $(this).remove();\n          }\n        });\n      };\n\n    // Overwrite this method to provide options on a per-element basis.\n    // For example, you could store the gravity in a 'tipsy-gravity' attribute:\n    // return $.extend({}, options, {gravity: $(ele).attr('tipsy-gravity') || 'n' });\n    // (remember - do not modify 'options' in place!)\n    $.fn.tipsy.elementOptions = function(ele, options) {\n      return $.metadata ? $.extend({}, options, $(ele).metadata()) : options;\n    };\n\n    $.fn.tipsy.autoNS = function() {\n      return $(this).offset().top > ($(document).scrollTop() + $(window).height() / 2) ? 's' : 'n';\n    };\n\n    $.fn.tipsy.autoWE = function() {\n      return $(this).offset().left > ($(document).scrollLeft() + $(window).width() / 2) ? 'e' : 'w';\n    };\n\n    /**\n     * yields a closure of the supplied parameters, producing a function that takes\n     * no arguments and is suitable for use as an autogravity function like so:\n     *\n     * @param margin (int) - distance from the viewable region edge that an\n     *        element should be before setting its tooltip's gravity to be away\n     *        from that edge.\n     * @param prefer (string, e.g. 'n', 'sw', 'w') - the direction to prefer\n     *        if there are no viewable region edges effecting the tooltip's\n     *        gravity. It will try to vary from this minimally, for example,\n     *        if 'sw' is preferred and an element is near the right viewable\n     *        region edge, but not the top edge, it will set the gravity for\n     *        that element's tooltip to be 'se', preserving the southern\n     *        component.\n     */\n     $.fn.tipsy.autoBounds = function(margin, prefer) {\n      return function() {\n       var dir = {ns: prefer[0], ew: (prefer.length > 1 ? prefer[1] : false)},\n       boundTop = $(document).scrollTop() + margin,\n       boundLeft = $(document).scrollLeft() + margin,\n       $this = $(this);\n\n       if ($this.offset().top < boundTop) dir.ns = 'n';\n       if ($this.offset().left < boundLeft) dir.ew = 'w';\n       if ($(window).width() + $(document).scrollLeft() - $this.offset().left < margin) dir.ew = 'e';\n       if ($(window).height() + $(document).scrollTop() - $this.offset().top < margin) dir.ns = 's';\n\n       return dir.ns + (dir.ew ? dir.ew : '');\n     }\n   };\n\n })(jQuery);\n","// Released under MIT license\n// Copyright (c) 2009-2010 Dominic Baggott\n// Copyright (c) 2009-2010 Ash Berlin\n// Copyright (c) 2011 Christoph Dorn <christoph@christophdorn.com> (http://www.christophdorn.com)\n\n/*jshint browser:true, devel:true */\n\n(function( expose ) {\n\n/**\n *  class Markdown\n *\n *  Markdown processing in Javascript done right. We have very particular views\n *  on what constitutes 'right' which include:\n *\n *  - produces well-formed HTML (this means that em and strong nesting is\n *    important)\n *\n *  - has an intermediate representation to allow processing of parsed data (We\n *    in fact have two, both as [JsonML]: a markdown tree and an HTML tree).\n *\n *  - is easily extensible to add new dialects without having to rewrite the\n *    entire parsing mechanics\n *\n *  - has a good test suite\n *\n *  This implementation fulfills all of these (except that the test suite could\n *  do with expanding to automatically run all the fixtures from other Markdown\n *  implementations.)\n *\n *  ##### Intermediate Representation\n *\n *  *TODO* Talk about this :) Its JsonML, but document the node names we use.\n *\n *  [JsonML]: http://jsonml.org/ \"JSON Markup Language\"\n **/\nvar Markdown = expose.Markdown = function(dialect) {\n  switch (typeof dialect) {\n    case \"undefined\":\n      this.dialect = Markdown.dialects.Gruber;\n      break;\n    case \"object\":\n      this.dialect = dialect;\n      break;\n    default:\n      if ( dialect in Markdown.dialects ) {\n        this.dialect = Markdown.dialects[dialect];\n      }\n      else {\n        throw new Error(\"Unknown Markdown dialect '\" + String(dialect) + \"'\");\n      }\n      break;\n  }\n  this.em_state = [];\n  this.strong_state = [];\n  this.debug_indent = \"\";\n};\n\n/**\n *  parse( markdown, [dialect] ) -> JsonML\n *  - markdown (String): markdown string to parse\n *  - dialect (String | Dialect): the dialect to use, defaults to gruber\n *\n *  Parse `markdown` and return a markdown document as a Markdown.JsonML tree.\n **/\nexpose.parse = function( source, dialect ) {\n  // dialect will default if undefined\n  var md = new Markdown( dialect );\n  return md.toTree( source );\n};\n\n/**\n *  toHTML( markdown, [dialect]  ) -> String\n *  toHTML( md_tree ) -> String\n *  - markdown (String): markdown string to parse\n *  - md_tree (Markdown.JsonML): parsed markdown tree\n *\n *  Take markdown (either as a string or as a JsonML tree) and run it through\n *  [[toHTMLTree]] then turn it into a well-formated HTML fragment.\n **/\nexpose.toHTML = function toHTML( source , dialect , options ) {\n  var input = expose.toHTMLTree( source , dialect , options );\n\n  return expose.renderJsonML( input );\n};\n\n/**\n *  toHTMLTree( markdown, [dialect] ) -> JsonML\n *  toHTMLTree( md_tree ) -> JsonML\n *  - markdown (String): markdown string to parse\n *  - dialect (String | Dialect): the dialect to use, defaults to gruber\n *  - md_tree (Markdown.JsonML): parsed markdown tree\n *\n *  Turn markdown into HTML, represented as a JsonML tree. If a string is given\n *  to this function, it is first parsed into a markdown tree by calling\n *  [[parse]].\n **/\nexpose.toHTMLTree = function toHTMLTree( input, dialect , options ) {\n  // convert string input to an MD tree\n  if ( typeof input ===\"string\" ) input = this.parse( input, dialect );\n\n  // Now convert the MD tree to an HTML tree\n\n  // remove references from the tree\n  var attrs = extract_attr( input ),\n      refs = {};\n\n  if ( attrs && attrs.references ) {\n    refs = attrs.references;\n  }\n\n  var html = convert_tree_to_html( input, refs , options );\n  merge_text_nodes( html );\n  return html;\n};\n\n// For Spidermonkey based engines\nfunction mk_block_toSource() {\n  return \"Markdown.mk_block( \" +\n          uneval(this.toString()) +\n          \", \" +\n          uneval(this.trailing) +\n          \", \" +\n          uneval(this.lineNumber) +\n          \" )\";\n}\n\n// node\nfunction mk_block_inspect() {\n  var util = require(\"util\");\n  return \"Markdown.mk_block( \" +\n          util.inspect(this.toString()) +\n          \", \" +\n          util.inspect(this.trailing) +\n          \", \" +\n          util.inspect(this.lineNumber) +\n          \" )\";\n\n}\n\nvar mk_block = Markdown.mk_block = function(block, trail, line) {\n  // Be helpful for default case in tests.\n  if ( arguments.length == 1 ) trail = \"\\n\\n\";\n\n  var s = new String(block);\n  s.trailing = trail;\n  // To make it clear its not just a string\n  s.inspect = mk_block_inspect;\n  s.toSource = mk_block_toSource;\n\n  if ( line != undefined )\n    s.lineNumber = line;\n\n  return s;\n};\n\nfunction count_lines( str ) {\n  var n = 0, i = -1;\n  while ( ( i = str.indexOf(\"\\n\", i + 1) ) !== -1 ) n++;\n  return n;\n}\n\n// Internal - split source into rough blocks\nMarkdown.prototype.split_blocks = function splitBlocks( input, startLine ) {\n  input = input.replace(/(\\r\\n|\\n|\\r)/g, \"\\n\");\n  // [\\s\\S] matches _anything_ (newline or space)\n  // [^] is equivalent but doesn't work in IEs.\n  var re = /([\\s\\S]+?)($|\\n#|\\n(?:\\s*\\n|$)+)/g,\n      blocks = [],\n      m;\n\n  var line_no = 1;\n\n  if ( ( m = /^(\\s*\\n)/.exec(input) ) != null ) {\n    // skip (but count) leading blank lines\n    line_no += count_lines( m[0] );\n    re.lastIndex = m[0].length;\n  }\n\n  while ( ( m = re.exec(input) ) !== null ) {\n    if (m[2] == \"\\n#\") {\n      m[2] = \"\\n\";\n      re.lastIndex--;\n    }\n    blocks.push( mk_block( m[1], m[2], line_no ) );\n    line_no += count_lines( m[0] );\n  }\n\n  return blocks;\n};\n\n/**\n *  Markdown#processBlock( block, next ) -> undefined | [ JsonML, ... ]\n *  - block (String): the block to process\n *  - next (Array): the following blocks\n *\n * Process `block` and return an array of JsonML nodes representing `block`.\n *\n * It does this by asking each block level function in the dialect to process\n * the block until one can. Succesful handling is indicated by returning an\n * array (with zero or more JsonML nodes), failure by a false value.\n *\n * Blocks handlers are responsible for calling [[Markdown#processInline]]\n * themselves as appropriate.\n *\n * If the blocks were split incorrectly or adjacent blocks need collapsing you\n * can adjust `next` in place using shift/splice etc.\n *\n * If any of this default behaviour is not right for the dialect, you can\n * define a `__call__` method on the dialect that will get invoked to handle\n * the block processing.\n */\nMarkdown.prototype.processBlock = function processBlock( block, next ) {\n  var cbs = this.dialect.block,\n      ord = cbs.__order__;\n\n  if ( \"__call__\" in cbs ) {\n    return cbs.__call__.call(this, block, next);\n  }\n\n  for ( var i = 0; i < ord.length; i++ ) {\n    //D:this.debug( \"Testing\", ord[i] );\n    var res = cbs[ ord[i] ].call( this, block, next );\n    if ( res ) {\n      //D:this.debug(\"  matched\");\n      if ( !isArray(res) || ( res.length > 0 && !( isArray(res[0]) ) ) )\n        this.debug(ord[i], \"didn't return a proper array\");\n      //D:this.debug( \"\" );\n      return res;\n    }\n  }\n\n  // Uhoh! no match! Should we throw an error?\n  return [];\n};\n\nMarkdown.prototype.processInline = function processInline( block ) {\n  return this.dialect.inline.__call__.call( this, String( block ) );\n};\n\n/**\n *  Markdown#toTree( source ) -> JsonML\n *  - source (String): markdown source to parse\n *\n *  Parse `source` into a JsonML tree representing the markdown document.\n **/\n// custom_tree means set this.tree to `custom_tree` and restore old value on return\nMarkdown.prototype.toTree = function toTree( source, custom_root ) {\n  var blocks = source instanceof Array ? source : this.split_blocks( source );\n\n  // Make tree a member variable so its easier to mess with in extensions\n  var old_tree = this.tree;\n  try {\n    this.tree = custom_root || this.tree || [ \"markdown\" ];\n\n    blocks:\n    while ( blocks.length ) {\n      var b = this.processBlock( blocks.shift(), blocks );\n\n      // Reference blocks and the like won't return any content\n      if ( !b.length ) continue blocks;\n\n      this.tree.push.apply( this.tree, b );\n    }\n    return this.tree;\n  }\n  finally {\n    if ( custom_root ) {\n      this.tree = old_tree;\n    }\n  }\n};\n\n// Noop by default\nMarkdown.prototype.debug = function () {\n  var args = Array.prototype.slice.call( arguments);\n  args.unshift(this.debug_indent);\n  if ( typeof print !== \"undefined\" )\n      print.apply( print, args );\n  if ( typeof console !== \"undefined\" && typeof console.log !== \"undefined\" )\n      console.log.apply( null, args );\n}\n\nMarkdown.prototype.loop_re_over_block = function( re, block, cb ) {\n  // Dont use /g regexps with this\n  var m,\n      b = block.valueOf();\n\n  while ( b.length && (m = re.exec(b) ) != null ) {\n    b = b.substr( m[0].length );\n    cb.call(this, m);\n  }\n  return b;\n};\n\n/**\n * Markdown.dialects\n *\n * Namespace of built-in dialects.\n **/\nMarkdown.dialects = {};\n\n/**\n * Markdown.dialects.Gruber\n *\n * The default dialect that follows the rules set out by John Gruber's\n * markdown.pl as closely as possible. Well actually we follow the behaviour of\n * that script which in some places is not exactly what the syntax web page\n * says.\n **/\nMarkdown.dialects.Gruber = {\n  block: {\n    atxHeader: function atxHeader( block, next ) {\n      var m = block.match( /^(#{1,6})\\s*(.*?)\\s*#*\\s*(?:\\n|$)/ );\n\n      if ( !m ) return undefined;\n\n      var header = [ \"header\", { level: m[ 1 ].length } ];\n      Array.prototype.push.apply(header, this.processInline(m[ 2 ]));\n\n      if ( m[0].length < block.length )\n        next.unshift( mk_block( block.substr( m[0].length ), block.trailing, block.lineNumber + 2 ) );\n\n      return [ header ];\n    },\n\n    setextHeader: function setextHeader( block, next ) {\n      var m = block.match( /^(.*)\\n([-=])\\2\\2+(?:\\n|$)/ );\n\n      if ( !m ) return undefined;\n\n      var level = ( m[ 2 ] === \"=\" ) ? 1 : 2;\n      var header = [ \"header\", { level : level }, m[ 1 ] ];\n\n      if ( m[0].length < block.length )\n        next.unshift( mk_block( block.substr( m[0].length ), block.trailing, block.lineNumber + 2 ) );\n\n      return [ header ];\n    },\n\n    code: function code( block, next ) {\n      // |    Foo\n      // |bar\n      // should be a code block followed by a paragraph. Fun\n      //\n      // There might also be adjacent code block to merge.\n\n      var ret = [],\n          re = /^(?: {0,3}\\t| {4})(.*)\\n?/,\n          lines;\n\n      // 4 spaces + content\n      if ( !block.match( re ) ) return undefined;\n\n      block_search:\n      do {\n        // Now pull out the rest of the lines\n        var b = this.loop_re_over_block(\n                  re, block.valueOf(), function( m ) { ret.push( m[1] ); } );\n\n        if ( b.length ) {\n          // Case alluded to in first comment. push it back on as a new block\n          next.unshift( mk_block(b, block.trailing) );\n          break block_search;\n        }\n        else if ( next.length ) {\n          // Check the next block - it might be code too\n          if ( !next[0].match( re ) ) break block_search;\n\n          // Pull how how many blanks lines follow - minus two to account for .join\n          ret.push ( block.trailing.replace(/[^\\n]/g, \"\").substring(2) );\n\n          block = next.shift();\n        }\n        else {\n          break block_search;\n        }\n      } while ( true );\n\n      return [ [ \"code_block\", ret.join(\"\\n\") ] ];\n    },\n\n    horizRule: function horizRule( block, next ) {\n      // this needs to find any hr in the block to handle abutting blocks\n      var m = block.match( /^(?:([\\s\\S]*?)\\n)?[ \\t]*([-_*])(?:[ \\t]*\\2){2,}[ \\t]*(?:\\n([\\s\\S]*))?$/ );\n\n      if ( !m ) {\n        return undefined;\n      }\n\n      var jsonml = [ [ \"hr\" ] ];\n\n      // if there's a leading abutting block, process it\n      if ( m[ 1 ] ) {\n        jsonml.unshift.apply( jsonml, this.processBlock( m[ 1 ], [] ) );\n      }\n\n      // if there's a trailing abutting block, stick it into next\n      if ( m[ 3 ] ) {\n        next.unshift( mk_block( m[ 3 ] ) );\n      }\n\n      return jsonml;\n    },\n\n    // There are two types of lists. Tight and loose. Tight lists have no whitespace\n    // between the items (and result in text just in the <li>) and loose lists,\n    // which have an empty line between list items, resulting in (one or more)\n    // paragraphs inside the <li>.\n    //\n    // There are all sorts weird edge cases about the original markdown.pl's\n    // handling of lists:\n    //\n    // * Nested lists are supposed to be indented by four chars per level. But\n    //   if they aren't, you can get a nested list by indenting by less than\n    //   four so long as the indent doesn't match an indent of an existing list\n    //   item in the 'nest stack'.\n    //\n    // * The type of the list (bullet or number) is controlled just by the\n    //    first item at the indent. Subsequent changes are ignored unless they\n    //    are for nested lists\n    //\n    lists: (function( ) {\n      // Use a closure to hide a few variables.\n      var any_list = \"[*+-]|\\\\d+\\\\.\",\n          bullet_list = /[*+-]/,\n          number_list = /\\d+\\./,\n          // Capture leading indent as it matters for determining nested lists.\n          is_list_re = new RegExp( \"^( {0,3})(\" + any_list + \")[ \\t]+\" ),\n          indent_re = \"(?: {0,3}\\\\t| {4})\";\n\n      // TODO: Cache this regexp for certain depths.\n      // Create a regexp suitable for matching an li for a given stack depth\n      function regex_for_depth( depth ) {\n\n        return new RegExp(\n          // m[1] = indent, m[2] = list_type\n          \"(?:^(\" + indent_re + \"{0,\" + depth + \"} {0,3})(\" + any_list + \")\\\\s+)|\" +\n          // m[3] = cont\n          \"(^\" + indent_re + \"{0,\" + (depth-1) + \"}[ ]{0,4})\"\n        );\n      }\n      function expand_tab( input ) {\n        return input.replace( / {0,3}\\t/g, \"    \" );\n      }\n\n      // Add inline content `inline` to `li`. inline comes from processInline\n      // so is an array of content\n      function add(li, loose, inline, nl) {\n        if ( loose ) {\n          li.push( [ \"para\" ].concat(inline) );\n          return;\n        }\n        // Hmmm, should this be any block level element or just paras?\n        var add_to = li[li.length -1] instanceof Array && li[li.length - 1][0] == \"para\"\n                   ? li[li.length -1]\n                   : li;\n\n        // If there is already some content in this list, add the new line in\n        if ( nl && li.length > 1 ) inline.unshift(nl);\n\n        for ( var i = 0; i < inline.length; i++ ) {\n          var what = inline[i],\n              is_str = typeof what == \"string\";\n          if ( is_str && add_to.length > 1 && typeof add_to[add_to.length-1] == \"string\" ) {\n            add_to[ add_to.length-1 ] += what;\n          }\n          else {\n            add_to.push( what );\n          }\n        }\n      }\n\n      // contained means have an indent greater than the current one. On\n      // *every* line in the block\n      function get_contained_blocks( depth, blocks ) {\n\n        var re = new RegExp( \"^(\" + indent_re + \"{\" + depth + \"}.*?\\\\n?)*$\" ),\n            replace = new RegExp(\"^\" + indent_re + \"{\" + depth + \"}\", \"gm\"),\n            ret = [];\n\n        while ( blocks.length > 0 ) {\n          if ( re.exec( blocks[0] ) ) {\n            var b = blocks.shift(),\n                // Now remove that indent\n                x = b.replace( replace, \"\");\n\n            ret.push( mk_block( x, b.trailing, b.lineNumber ) );\n          }\n          else {\n            break;\n          }\n        }\n        return ret;\n      }\n\n      // passed to stack.forEach to turn list items up the stack into paras\n      function paragraphify(s, i, stack) {\n        var list = s.list;\n        var last_li = list[list.length-1];\n\n        if ( last_li[1] instanceof Array && last_li[1][0] == \"para\" ) {\n          return;\n        }\n        if ( i + 1 == stack.length ) {\n          // Last stack frame\n          // Keep the same array, but replace the contents\n          last_li.push( [\"para\"].concat( last_li.splice(1, last_li.length - 1) ) );\n        }\n        else {\n          var sublist = last_li.pop();\n          last_li.push( [\"para\"].concat( last_li.splice(1, last_li.length - 1) ), sublist );\n        }\n      }\n\n      // The matcher function\n      return function( block, next ) {\n        var m = block.match( is_list_re );\n        if ( !m ) return undefined;\n\n        function make_list( m ) {\n          var list = bullet_list.exec( m[2] )\n                   ? [\"bulletlist\"]\n                   : [\"numberlist\"];\n\n          stack.push( { list: list, indent: m[1] } );\n          return list;\n        }\n\n\n        var stack = [], // Stack of lists for nesting.\n            list = make_list( m ),\n            last_li,\n            loose = false,\n            ret = [ stack[0].list ],\n            i;\n\n        // Loop to search over block looking for inner block elements and loose lists\n        loose_search:\n        while ( true ) {\n          // Split into lines preserving new lines at end of line\n          var lines = block.split( /(?=\\n)/ );\n\n          // We have to grab all lines for a li and call processInline on them\n          // once as there are some inline things that can span lines.\n          var li_accumulate = \"\";\n\n          // Loop over the lines in this block looking for tight lists.\n          tight_search:\n          for ( var line_no = 0; line_no < lines.length; line_no++ ) {\n            var nl = \"\",\n                l = lines[line_no].replace(/^\\n/, function(n) { nl = n; return \"\"; });\n\n            // TODO: really should cache this\n            var line_re = regex_for_depth( stack.length );\n\n            m = l.match( line_re );\n            //print( \"line:\", uneval(l), \"\\nline match:\", uneval(m) );\n\n            // We have a list item\n            if ( m[1] !== undefined ) {\n              // Process the previous list item, if any\n              if ( li_accumulate.length ) {\n                add( last_li, loose, this.processInline( li_accumulate ), nl );\n                // Loose mode will have been dealt with. Reset it\n                loose = false;\n                li_accumulate = \"\";\n              }\n\n              m[1] = expand_tab( m[1] );\n              var wanted_depth = Math.floor(m[1].length/4)+1;\n              //print( \"want:\", wanted_depth, \"stack:\", stack.length);\n              if ( wanted_depth > stack.length ) {\n                // Deep enough for a nested list outright\n                //print ( \"new nested list\" );\n                list = make_list( m );\n                last_li.push( list );\n                last_li = list[1] = [ \"listitem\" ];\n              }\n              else {\n                // We aren't deep enough to be strictly a new level. This is\n                // where Md.pl goes nuts. If the indent matches a level in the\n                // stack, put it there, else put it one deeper then the\n                // wanted_depth deserves.\n                var found = false;\n                for ( i = 0; i < stack.length; i++ ) {\n                  if ( stack[ i ].indent != m[1] ) continue;\n                  list = stack[ i ].list;\n                  stack.splice( i+1, stack.length - (i+1) );\n                  found = true;\n                  break;\n                }\n\n                if (!found) {\n                  //print(\"not found. l:\", uneval(l));\n                  wanted_depth++;\n                  if ( wanted_depth <= stack.length ) {\n                    stack.splice(wanted_depth, stack.length - wanted_depth);\n                    //print(\"Desired depth now\", wanted_depth, \"stack:\", stack.length);\n                    list = stack[wanted_depth-1].list;\n                    //print(\"list:\", uneval(list) );\n                  }\n                  else {\n                    //print (\"made new stack for messy indent\");\n                    list = make_list(m);\n                    last_li.push(list);\n                  }\n                }\n\n                //print( uneval(list), \"last\", list === stack[stack.length-1].list );\n                last_li = [ \"listitem\" ];\n                list.push(last_li);\n              } // end depth of shenegains\n              nl = \"\";\n            }\n\n            // Add content\n            if ( l.length > m[0].length ) {\n              li_accumulate += nl + l.substr( m[0].length );\n            }\n          } // tight_search\n\n          if ( li_accumulate.length ) {\n            add( last_li, loose, this.processInline( li_accumulate ), nl );\n            // Loose mode will have been dealt with. Reset it\n            loose = false;\n            li_accumulate = \"\";\n          }\n\n          // Look at the next block - we might have a loose list. Or an extra\n          // paragraph for the current li\n          var contained = get_contained_blocks( stack.length, next );\n\n          // Deal with code blocks or properly nested lists\n          if ( contained.length > 0 ) {\n            // Make sure all listitems up the stack are paragraphs\n            forEach( stack, paragraphify, this);\n\n            last_li.push.apply( last_li, this.toTree( contained, [] ) );\n          }\n\n          var next_block = next[0] && next[0].valueOf() || \"\";\n\n          if ( next_block.match(is_list_re) || next_block.match( /^ / ) ) {\n            block = next.shift();\n\n            // Check for an HR following a list: features/lists/hr_abutting\n            var hr = this.dialect.block.horizRule( block, next );\n\n            if ( hr ) {\n              ret.push.apply(ret, hr);\n              break;\n            }\n\n            // Make sure all listitems up the stack are paragraphs\n            forEach( stack, paragraphify, this);\n\n            loose = true;\n            continue loose_search;\n          }\n          break;\n        } // loose_search\n\n        return ret;\n      };\n    })(),\n\n    blockquote: function blockquote( block, next ) {\n      if ( !block.match( /^>/m ) )\n        return undefined;\n\n      var jsonml = [];\n\n      // separate out the leading abutting block, if any. I.e. in this case:\n      //\n      //  a\n      //  > b\n      //\n      if ( block[ 0 ] != \">\" ) {\n        var lines = block.split( /\\n/ ),\n            prev = [],\n            line_no = block.lineNumber;\n\n        // keep shifting lines until you find a crotchet\n        while ( lines.length && lines[ 0 ][ 0 ] != \">\" ) {\n            prev.push( lines.shift() );\n            line_no++;\n        }\n\n        var abutting = mk_block( prev.join( \"\\n\" ), \"\\n\", block.lineNumber );\n        jsonml.push.apply( jsonml, this.processBlock( abutting, [] ) );\n        // reassemble new block of just block quotes!\n        block = mk_block( lines.join( \"\\n\" ), block.trailing, line_no );\n      }\n\n\n      // if the next block is also a blockquote merge it in\n      while ( next.length && next[ 0 ][ 0 ] == \">\" ) {\n        var b = next.shift();\n        block = mk_block( block + block.trailing + b, b.trailing, block.lineNumber );\n      }\n\n      // Strip off the leading \"> \" and re-process as a block.\n      var input = block.replace( /^> ?/gm, \"\" ),\n          old_tree = this.tree,\n          processedBlock = this.toTree( input, [ \"blockquote\" ] ),\n          attr = extract_attr( processedBlock );\n\n      // If any link references were found get rid of them\n      if ( attr && attr.references ) {\n        delete attr.references;\n        // And then remove the attribute object if it's empty\n        if ( isEmpty( attr ) ) {\n          processedBlock.splice( 1, 1 );\n        }\n      }\n\n      jsonml.push( processedBlock );\n      return jsonml;\n    },\n\n    referenceDefn: function referenceDefn( block, next) {\n      var re = /^\\s*\\[(.*?)\\]:\\s*(\\S+)(?:\\s+(?:(['\"])(.*?)\\3|\\((.*?)\\)))?\\n?/;\n      // interesting matches are [ , ref_id, url, , title, title ]\n\n      if ( !block.match(re) )\n        return undefined;\n\n      // make an attribute node if it doesn't exist\n      if ( !extract_attr( this.tree ) ) {\n        this.tree.splice( 1, 0, {} );\n      }\n\n      var attrs = extract_attr( this.tree );\n\n      // make a references hash if it doesn't exist\n      if ( attrs.references === undefined ) {\n        attrs.references = {};\n      }\n\n      var b = this.loop_re_over_block(re, block, function( m ) {\n\n        if ( m[2] && m[2][0] == \"<\" && m[2][m[2].length-1] == \">\" )\n          m[2] = m[2].substring( 1, m[2].length - 1 );\n\n        var ref = attrs.references[ m[1].toLowerCase() ] = {\n          href: m[2]\n        };\n\n        if ( m[4] !== undefined )\n          ref.title = m[4];\n        else if ( m[5] !== undefined )\n          ref.title = m[5];\n\n      } );\n\n      if ( b.length )\n        next.unshift( mk_block( b, block.trailing ) );\n\n      return [];\n    },\n\n    para: function para( block, next ) {\n      // everything's a para!\n      return [ [\"para\"].concat( this.processInline( block ) ) ];\n    }\n  }\n};\n\nMarkdown.dialects.Gruber.inline = {\n\n    __oneElement__: function oneElement( text, patterns_or_re, previous_nodes ) {\n      var m,\n          res,\n          lastIndex = 0;\n\n      patterns_or_re = patterns_or_re || this.dialect.inline.__patterns__;\n      var re = new RegExp( \"([\\\\s\\\\S]*?)(\" + (patterns_or_re.source || patterns_or_re) + \")\" );\n\n      m = re.exec( text );\n      if (!m) {\n        // Just boring text\n        return [ text.length, text ];\n      }\n      else if ( m[1] ) {\n        // Some un-interesting text matched. Return that first\n        return [ m[1].length, m[1] ];\n      }\n\n      var res;\n      if ( m[2] in this.dialect.inline ) {\n        res = this.dialect.inline[ m[2] ].call(\n                  this,\n                  text.substr( m.index ), m, previous_nodes || [] );\n      }\n      // Default for now to make dev easier. just slurp special and output it.\n      res = res || [ m[2].length, m[2] ];\n      return res;\n    },\n\n    __call__: function inline( text, patterns ) {\n\n      var out = [],\n          res;\n\n      function add(x) {\n        //D:self.debug(\"  adding output\", uneval(x));\n        if ( typeof x == \"string\" && typeof out[out.length-1] == \"string\" )\n          out[ out.length-1 ] += x;\n        else\n          out.push(x);\n      }\n\n      while ( text.length > 0 ) {\n        res = this.dialect.inline.__oneElement__.call(this, text, patterns, out );\n        text = text.substr( res.shift() );\n        forEach(res, add )\n      }\n\n      return out;\n    },\n\n    // These characters are intersting elsewhere, so have rules for them so that\n    // chunks of plain text blocks don't include them\n    \"]\": function () {},\n    \"}\": function () {},\n\n    __escape__ : /^\\\\[\\\\`\\*_{}\\[\\]()#\\+.!\\-]/,\n\n    \"\\\\\": function escaped( text ) {\n      // [ length of input processed, node/children to add... ]\n      // Only esacape: \\ ` * _ { } [ ] ( ) # * + - . !\n      if ( this.dialect.inline.__escape__.exec( text ) )\n        return [ 2, text.charAt( 1 ) ];\n      else\n        // Not an esacpe\n        return [ 1, \"\\\\\" ];\n    },\n\n    \"![\": function image( text ) {\n\n      // Unlike images, alt text is plain text only. no other elements are\n      // allowed in there\n\n      // ![Alt text](/path/to/img.jpg \"Optional title\")\n      //      1          2            3       4         <--- captures\n      var m = text.match( /^!\\[(.*?)\\][ \\t]*\\([ \\t]*([^\")]*?)(?:[ \\t]+([\"'])(.*?)\\3)?[ \\t]*\\)/ );\n\n      if ( m ) {\n        if ( m[2] && m[2][0] == \"<\" && m[2][m[2].length-1] == \">\" )\n          m[2] = m[2].substring( 1, m[2].length - 1 );\n\n        m[2] = this.dialect.inline.__call__.call( this, m[2], /\\\\/ )[0];\n\n        var attrs = { alt: m[1], href: m[2] || \"\" };\n        if ( m[4] !== undefined)\n          attrs.title = m[4];\n\n        return [ m[0].length, [ \"img\", attrs ] ];\n      }\n\n      // ![Alt text][id]\n      m = text.match( /^!\\[(.*?)\\][ \\t]*\\[(.*?)\\]/ );\n\n      if ( m ) {\n        // We can't check if the reference is known here as it likely wont be\n        // found till after. Check it in md tree->hmtl tree conversion\n        return [ m[0].length, [ \"img_ref\", { alt: m[1], ref: m[2].toLowerCase(), original: m[0] } ] ];\n      }\n\n      // Just consume the '!['\n      return [ 2, \"![\" ];\n    },\n\n    \"[\": function link( text ) {\n\n      var orig = String(text);\n      // Inline content is possible inside `link text`\n      var res = Markdown.DialectHelpers.inline_until_char.call( this, text.substr(1), \"]\" );\n\n      // No closing ']' found. Just consume the [\n      if ( !res ) return [ 1, \"[\" ];\n\n      var consumed = 1 + res[ 0 ],\n          children = res[ 1 ],\n          link,\n          attrs;\n\n      // At this point the first [...] has been parsed. See what follows to find\n      // out which kind of link we are (reference or direct url)\n      text = text.substr( consumed );\n\n      // [link text](/path/to/img.jpg \"Optional title\")\n      //                 1            2       3         <--- captures\n      // This will capture up to the last paren in the block. We then pull\n      // back based on if there a matching ones in the url\n      //    ([here](/url/(test))\n      // The parens have to be balanced\n      var m = text.match( /^\\s*\\([ \\t]*([^\"']*)(?:[ \\t]+([\"'])(.*?)\\2)?[ \\t]*\\)/ );\n      if ( m ) {\n        var url = m[1];\n        consumed += m[0].length;\n\n        if ( url && url[0] == \"<\" && url[url.length-1] == \">\" )\n          url = url.substring( 1, url.length - 1 );\n\n        // If there is a title we don't have to worry about parens in the url\n        if ( !m[3] ) {\n          var open_parens = 1; // One open that isn't in the capture\n          for ( var len = 0; len < url.length; len++ ) {\n            switch ( url[len] ) {\n            case \"(\":\n              open_parens++;\n              break;\n            case \")\":\n              if ( --open_parens == 0) {\n                consumed -= url.length - len;\n                url = url.substring(0, len);\n              }\n              break;\n            }\n          }\n        }\n\n        // Process escapes only\n        url = this.dialect.inline.__call__.call( this, url, /\\\\/ )[0];\n\n        attrs = { href: url || \"\" };\n        if ( m[3] !== undefined)\n          attrs.title = m[3];\n\n        link = [ \"link\", attrs ].concat( children );\n        return [ consumed, link ];\n      }\n\n      // [Alt text][id]\n      // [Alt text] [id]\n      m = text.match( /^\\s*\\[(.*?)\\]/ );\n\n      if ( m ) {\n\n        consumed += m[ 0 ].length;\n\n        // [links][] uses links as its reference\n        attrs = { ref: ( m[ 1 ] || String(children) ).toLowerCase(),  original: orig.substr( 0, consumed ) };\n\n        link = [ \"link_ref\", attrs ].concat( children );\n\n        // We can't check if the reference is known here as it likely wont be\n        // found till after. Check it in md tree->hmtl tree conversion.\n        // Store the original so that conversion can revert if the ref isn't found.\n        return [ consumed, link ];\n      }\n\n      // [id]\n      // Only if id is plain (no formatting.)\n      if ( children.length == 1 && typeof children[0] == \"string\" ) {\n\n        attrs = { ref: children[0].toLowerCase(),  original: orig.substr( 0, consumed ) };\n        link = [ \"link_ref\", attrs, children[0] ];\n        return [ consumed, link ];\n      }\n\n      // Just consume the \"[\"\n      return [ 1, \"[\" ];\n    },\n\n\n    \"<\": function autoLink( text ) {\n      var m;\n\n      if ( ( m = text.match( /^<(?:((https?|ftp|mailto):[^>]+)|(.*?@.*?\\.[a-zA-Z]+))>/ ) ) != null ) {\n        if ( m[3] ) {\n          return [ m[0].length, [ \"link\", { href: \"mailto:\" + m[3] }, m[3] ] ];\n\n        }\n        else if ( m[2] == \"mailto\" ) {\n          return [ m[0].length, [ \"link\", { href: m[1] }, m[1].substr(\"mailto:\".length ) ] ];\n        }\n        else\n          return [ m[0].length, [ \"link\", { href: m[1] }, m[1] ] ];\n      }\n\n      return [ 1, \"<\" ];\n    },\n\n    \"`\": function inlineCode( text ) {\n      // Inline code block. as many backticks as you like to start it\n      // Always skip over the opening ticks.\n      var m = text.match( /(`+)(([\\s\\S]*?)\\1)/ );\n\n      if ( m && m[2] )\n        return [ m[1].length + m[2].length, [ \"inlinecode\", m[3] ] ];\n      else {\n        // TODO: No matching end code found - warn!\n        return [ 1, \"`\" ];\n      }\n    },\n\n    \"  \\n\": function lineBreak( text ) {\n      return [ 3, [ \"linebreak\" ] ];\n    }\n\n};\n\n// Meta Helper/generator method for em and strong handling\nfunction strong_em( tag, md ) {\n\n  var state_slot = tag + \"_state\",\n      other_slot = tag == \"strong\" ? \"em_state\" : \"strong_state\";\n\n  function CloseTag(len) {\n    this.len_after = len;\n    this.name = \"close_\" + md;\n  }\n\n  return function ( text, orig_match ) {\n\n    if ( this[state_slot][0] == md ) {\n      // Most recent em is of this type\n      //D:this.debug(\"closing\", md);\n      this[state_slot].shift();\n\n      // \"Consume\" everything to go back to the recrusion in the else-block below\n      return[ text.length, new CloseTag(text.length-md.length) ];\n    }\n    else {\n      // Store a clone of the em/strong states\n      var other = this[other_slot].slice(),\n          state = this[state_slot].slice();\n\n      this[state_slot].unshift(md);\n\n      //D:this.debug_indent += \"  \";\n\n      // Recurse\n      var res = this.processInline( text.substr( md.length ) );\n      //D:this.debug_indent = this.debug_indent.substr(2);\n\n      var last = res[res.length - 1];\n\n      //D:this.debug(\"processInline from\", tag + \": \", uneval( res ) );\n\n      var check = this[state_slot].shift();\n      if ( last instanceof CloseTag ) {\n        res.pop();\n        // We matched! Huzzah.\n        var consumed = text.length - last.len_after;\n        return [ consumed, [ tag ].concat(res) ];\n      }\n      else {\n        // Restore the state of the other kind. We might have mistakenly closed it.\n        this[other_slot] = other;\n        this[state_slot] = state;\n\n        // We can't reuse the processed result as it could have wrong parsing contexts in it.\n        return [ md.length, md ];\n      }\n    }\n  }; // End returned function\n}\n\nMarkdown.dialects.Gruber.inline[\"**\"] = strong_em(\"strong\", \"**\");\nMarkdown.dialects.Gruber.inline[\"__\"] = strong_em(\"strong\", \"__\");\nMarkdown.dialects.Gruber.inline[\"*\"]  = strong_em(\"em\", \"*\");\nMarkdown.dialects.Gruber.inline[\"_\"]  = strong_em(\"em\", \"_\");\n\n\n// Build default order from insertion order.\nMarkdown.buildBlockOrder = function(d) {\n  var ord = [];\n  for ( var i in d ) {\n    if ( i == \"__order__\" || i == \"__call__\" ) continue;\n    ord.push( i );\n  }\n  d.__order__ = ord;\n};\n\n// Build patterns for inline matcher\nMarkdown.buildInlinePatterns = function(d) {\n  var patterns = [];\n\n  for ( var i in d ) {\n    // __foo__ is reserved and not a pattern\n    if ( i.match( /^__.*__$/) ) continue;\n    var l = i.replace( /([\\\\.*+?|()\\[\\]{}])/g, \"\\\\$1\" )\n             .replace( /\\n/, \"\\\\n\" );\n    patterns.push( i.length == 1 ? l : \"(?:\" + l + \")\" );\n  }\n\n  patterns = patterns.join(\"|\");\n  d.__patterns__ = patterns;\n  //print(\"patterns:\", uneval( patterns ) );\n\n  var fn = d.__call__;\n  d.__call__ = function(text, pattern) {\n    if ( pattern != undefined ) {\n      return fn.call(this, text, pattern);\n    }\n    else\n    {\n      return fn.call(this, text, patterns);\n    }\n  };\n};\n\nMarkdown.DialectHelpers = {};\nMarkdown.DialectHelpers.inline_until_char = function( text, want ) {\n  var consumed = 0,\n      nodes = [];\n\n  while ( true ) {\n    if ( text.charAt( consumed ) == want ) {\n      // Found the character we were looking for\n      consumed++;\n      return [ consumed, nodes ];\n    }\n\n    if ( consumed >= text.length ) {\n      // No closing char found. Abort.\n      return null;\n    }\n\n    var res = this.dialect.inline.__oneElement__.call(this, text.substr( consumed ) );\n    consumed += res[ 0 ];\n    // Add any returned nodes.\n    nodes.push.apply( nodes, res.slice( 1 ) );\n  }\n}\n\n// Helper function to make sub-classing a dialect easier\nMarkdown.subclassDialect = function( d ) {\n  function Block() {}\n  Block.prototype = d.block;\n  function Inline() {}\n  Inline.prototype = d.inline;\n\n  return { block: new Block(), inline: new Inline() };\n};\n\nMarkdown.buildBlockOrder ( Markdown.dialects.Gruber.block );\nMarkdown.buildInlinePatterns( Markdown.dialects.Gruber.inline );\n\nMarkdown.dialects.Maruku = Markdown.subclassDialect( Markdown.dialects.Gruber );\n\nMarkdown.dialects.Maruku.processMetaHash = function processMetaHash( meta_string ) {\n  var meta = split_meta_hash( meta_string ),\n      attr = {};\n\n  for ( var i = 0; i < meta.length; ++i ) {\n    // id: #foo\n    if ( /^#/.test( meta[ i ] ) ) {\n      attr.id = meta[ i ].substring( 1 );\n    }\n    // class: .foo\n    else if ( /^\\./.test( meta[ i ] ) ) {\n      // if class already exists, append the new one\n      if ( attr[\"class\"] ) {\n        attr[\"class\"] = attr[\"class\"] + meta[ i ].replace( /./, \" \" );\n      }\n      else {\n        attr[\"class\"] = meta[ i ].substring( 1 );\n      }\n    }\n    // attribute: foo=bar\n    else if ( /\\=/.test( meta[ i ] ) ) {\n      var s = meta[ i ].split( /\\=/ );\n      attr[ s[ 0 ] ] = s[ 1 ];\n    }\n  }\n\n  return attr;\n}\n\nfunction split_meta_hash( meta_string ) {\n  var meta = meta_string.split( \"\" ),\n      parts = [ \"\" ],\n      in_quotes = false;\n\n  while ( meta.length ) {\n    var letter = meta.shift();\n    switch ( letter ) {\n      case \" \" :\n        // if we're in a quoted section, keep it\n        if ( in_quotes ) {\n          parts[ parts.length - 1 ] += letter;\n        }\n        // otherwise make a new part\n        else {\n          parts.push( \"\" );\n        }\n        break;\n      case \"'\" :\n      case '\"' :\n        // reverse the quotes and move straight on\n        in_quotes = !in_quotes;\n        break;\n      case \"\\\\\" :\n        // shift off the next letter to be used straight away.\n        // it was escaped so we'll keep it whatever it is\n        letter = meta.shift();\n      default :\n        parts[ parts.length - 1 ] += letter;\n        break;\n    }\n  }\n\n  return parts;\n}\n\nMarkdown.dialects.Maruku.block.document_meta = function document_meta( block, next ) {\n  // we're only interested in the first block\n  if ( block.lineNumber > 1 ) return undefined;\n\n  // document_meta blocks consist of one or more lines of `Key: Value\\n`\n  if ( ! block.match( /^(?:\\w+:.*\\n)*\\w+:.*$/ ) ) return undefined;\n\n  // make an attribute node if it doesn't exist\n  if ( !extract_attr( this.tree ) ) {\n    this.tree.splice( 1, 0, {} );\n  }\n\n  var pairs = block.split( /\\n/ );\n  for ( p in pairs ) {\n    var m = pairs[ p ].match( /(\\w+):\\s*(.*)$/ ),\n        key = m[ 1 ].toLowerCase(),\n        value = m[ 2 ];\n\n    this.tree[ 1 ][ key ] = value;\n  }\n\n  // document_meta produces no content!\n  return [];\n};\n\nMarkdown.dialects.Maruku.block.block_meta = function block_meta( block, next ) {\n  // check if the last line of the block is an meta hash\n  var m = block.match( /(^|\\n) {0,3}\\{:\\s*((?:\\\\\\}|[^\\}])*)\\s*\\}$/ );\n  if ( !m ) return undefined;\n\n  // process the meta hash\n  var attr = this.dialect.processMetaHash( m[ 2 ] );\n\n  var hash;\n\n  // if we matched ^ then we need to apply meta to the previous block\n  if ( m[ 1 ] === \"\" ) {\n    var node = this.tree[ this.tree.length - 1 ];\n    hash = extract_attr( node );\n\n    // if the node is a string (rather than JsonML), bail\n    if ( typeof node === \"string\" ) return undefined;\n\n    // create the attribute hash if it doesn't exist\n    if ( !hash ) {\n      hash = {};\n      node.splice( 1, 0, hash );\n    }\n\n    // add the attributes in\n    for ( a in attr ) {\n      hash[ a ] = attr[ a ];\n    }\n\n    // return nothing so the meta hash is removed\n    return [];\n  }\n\n  // pull the meta hash off the block and process what's left\n  var b = block.replace( /\\n.*$/, \"\" ),\n      result = this.processBlock( b, [] );\n\n  // get or make the attributes hash\n  hash = extract_attr( result[ 0 ] );\n  if ( !hash ) {\n    hash = {};\n    result[ 0 ].splice( 1, 0, hash );\n  }\n\n  // attach the attributes to the block\n  for ( a in attr ) {\n    hash[ a ] = attr[ a ];\n  }\n\n  return result;\n};\n\nMarkdown.dialects.Maruku.block.definition_list = function definition_list( block, next ) {\n  // one or more terms followed by one or more definitions, in a single block\n  var tight = /^((?:[^\\s:].*\\n)+):\\s+([\\s\\S]+)$/,\n      list = [ \"dl\" ],\n      i, m;\n\n  // see if we're dealing with a tight or loose block\n  if ( ( m = block.match( tight ) ) ) {\n    // pull subsequent tight DL blocks out of `next`\n    var blocks = [ block ];\n    while ( next.length && tight.exec( next[ 0 ] ) ) {\n      blocks.push( next.shift() );\n    }\n\n    for ( var b = 0; b < blocks.length; ++b ) {\n      var m = blocks[ b ].match( tight ),\n          terms = m[ 1 ].replace( /\\n$/, \"\" ).split( /\\n/ ),\n          defns = m[ 2 ].split( /\\n:\\s+/ );\n\n      // print( uneval( m ) );\n\n      for ( i = 0; i < terms.length; ++i ) {\n        list.push( [ \"dt\", terms[ i ] ] );\n      }\n\n      for ( i = 0; i < defns.length; ++i ) {\n        // run inline processing over the definition\n        list.push( [ \"dd\" ].concat( this.processInline( defns[ i ].replace( /(\\n)\\s+/, \"$1\" ) ) ) );\n      }\n    }\n  }\n  else {\n    return undefined;\n  }\n\n  return [ list ];\n};\n\n// splits on unescaped instances of @ch. If @ch is not a character the result\n// can be unpredictable\n\nMarkdown.dialects.Maruku.block.table = function table (block, next) {\n\n    var _split_on_unescaped = function(s, ch) {\n        ch = ch || '\\\\s';\n        if (ch.match(/^[\\\\|\\[\\]{}?*.+^$]$/)) { ch = '\\\\' + ch; }\n        var res = [ ],\n            r = new RegExp('^((?:\\\\\\\\.|[^\\\\\\\\' + ch + '])*)' + ch + '(.*)'),\n            m;\n        while(m = s.match(r)) {\n            res.push(m[1]);\n            s = m[2];\n        }\n        res.push(s);\n        return res;\n    }\n\n    var leading_pipe = /^ {0,3}\\|(.+)\\n {0,3}\\|\\s*([\\-:]+[\\-| :]*)\\n((?:\\s*\\|.*(?:\\n|$))*)(?=\\n|$)/,\n        // find at least an unescaped pipe in each line\n        no_leading_pipe = /^ {0,3}(\\S(?:\\\\.|[^\\\\|])*\\|.*)\\n {0,3}([\\-:]+\\s*\\|[\\-| :]*)\\n((?:(?:\\\\.|[^\\\\|])*\\|.*(?:\\n|$))*)(?=\\n|$)/,\n        i, m;\n    if (m = block.match(leading_pipe)) {\n        // remove leading pipes in contents\n        // (header and horizontal rule already have the leading pipe left out)\n        m[3] = m[3].replace(/^\\s*\\|/gm, '');\n    } else if (! ( m = block.match(no_leading_pipe))) {\n        return undefined;\n    }\n\n    var table = [ \"table\", [ \"thead\", [ \"tr\" ] ], [ \"tbody\" ] ];\n\n    // remove trailing pipes, then split on pipes\n    // (no escaped pipes are allowed in horizontal rule)\n    m[2] = m[2].replace(/\\|\\s*$/, '').split('|');\n\n    // process alignment\n    var html_attrs = [ ];\n    forEach (m[2], function (s) {\n        if (s.match(/^\\s*-+:\\s*$/))       html_attrs.push({align: \"right\"});\n        else if (s.match(/^\\s*:-+\\s*$/))  html_attrs.push({align: \"left\"});\n        else if (s.match(/^\\s*:-+:\\s*$/)) html_attrs.push({align: \"center\"});\n        else                              html_attrs.push({});\n    });\n\n    // now for the header, avoid escaped pipes\n    m[1] = _split_on_unescaped(m[1].replace(/\\|\\s*$/, ''), '|');\n    for (i = 0; i < m[1].length; i++) {\n        table[1][1].push(['th', html_attrs[i] || {}].concat(\n            this.processInline(m[1][i].trim())));\n    }\n\n    // now for body contents\n    forEach (m[3].replace(/\\|\\s*$/mg, '').split('\\n'), function (row) {\n        var html_row = ['tr'];\n        row = _split_on_unescaped(row, '|');\n        for (i = 0; i < row.length; i++) {\n            html_row.push(['td', html_attrs[i] || {}].concat(this.processInline(row[i].trim())));\n        }\n        table[2].push(html_row);\n    }, this);\n\n    return [table];\n}\n\nMarkdown.dialects.Maruku.inline[ \"{:\" ] = function inline_meta( text, matches, out ) {\n  if ( !out.length ) {\n    return [ 2, \"{:\" ];\n  }\n\n  // get the preceeding element\n  var before = out[ out.length - 1 ];\n\n  if ( typeof before === \"string\" ) {\n    return [ 2, \"{:\" ];\n  }\n\n  // match a meta hash\n  var m = text.match( /^\\{:\\s*((?:\\\\\\}|[^\\}])*)\\s*\\}/ );\n\n  // no match, false alarm\n  if ( !m ) {\n    return [ 2, \"{:\" ];\n  }\n\n  // attach the attributes to the preceeding element\n  var meta = this.dialect.processMetaHash( m[ 1 ] ),\n      attr = extract_attr( before );\n\n  if ( !attr ) {\n    attr = {};\n    before.splice( 1, 0, attr );\n  }\n\n  for ( var k in meta ) {\n    attr[ k ] = meta[ k ];\n  }\n\n  // cut out the string and replace it with nothing\n  return [ m[ 0 ].length, \"\" ];\n};\n\nMarkdown.dialects.Maruku.inline.__escape__ = /^\\\\[\\\\`\\*_{}\\[\\]()#\\+.!\\-|:]/;\n\nMarkdown.buildBlockOrder ( Markdown.dialects.Maruku.block );\nMarkdown.buildInlinePatterns( Markdown.dialects.Maruku.inline );\n\nvar isArray = Array.isArray || function(obj) {\n  return Object.prototype.toString.call(obj) == \"[object Array]\";\n};\n\nvar forEach;\n// Don't mess with Array.prototype. Its not friendly\nif ( Array.prototype.forEach ) {\n  forEach = function( arr, cb, thisp ) {\n    return arr.forEach( cb, thisp );\n  };\n}\nelse {\n  forEach = function(arr, cb, thisp) {\n    for (var i = 0; i < arr.length; i++) {\n      cb.call(thisp || arr, arr[i], i, arr);\n    }\n  }\n}\n\nvar isEmpty = function( obj ) {\n  for ( var key in obj ) {\n    if ( hasOwnProperty.call( obj, key ) ) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction extract_attr( jsonml ) {\n  return isArray(jsonml)\n      && jsonml.length > 1\n      && typeof jsonml[ 1 ] === \"object\"\n      && !( isArray(jsonml[ 1 ]) )\n      ? jsonml[ 1 ]\n      : undefined;\n}\n\n\n\n/**\n *  renderJsonML( jsonml[, options] ) -> String\n *  - jsonml (Array): JsonML array to render to XML\n *  - options (Object): options\n *\n *  Converts the given JsonML into well-formed XML.\n *\n *  The options currently understood are:\n *\n *  - root (Boolean): wether or not the root node should be included in the\n *    output, or just its children. The default `false` is to not include the\n *    root itself.\n */\nexpose.renderJsonML = function( jsonml, options ) {\n  options = options || {};\n  // include the root element in the rendered output?\n  options.root = options.root || false;\n\n  var content = [];\n\n  if ( options.root ) {\n    content.push( render_tree( jsonml ) );\n  }\n  else {\n    jsonml.shift(); // get rid of the tag\n    if ( jsonml.length && typeof jsonml[ 0 ] === \"object\" && !( jsonml[ 0 ] instanceof Array ) ) {\n      jsonml.shift(); // get rid of the attributes\n    }\n\n    while ( jsonml.length ) {\n      content.push( render_tree( jsonml.shift() ) );\n    }\n  }\n\n  return content.join( \"\\n\\n\" );\n};\n\nfunction escapeHTML( text ) {\n  return text.replace( /&/g, \"&amp;\" )\n             .replace( /</g, \"&lt;\" )\n             .replace( />/g, \"&gt;\" )\n             .replace( /\"/g, \"&quot;\" )\n             .replace( /'/g, \"&#39;\" );\n}\n\nfunction render_tree( jsonml ) {\n  // basic case\n  if ( typeof jsonml === \"string\" ) {\n    return escapeHTML( jsonml );\n  }\n\n  var tag = jsonml.shift(),\n      attributes = {},\n      content = [];\n\n  if ( jsonml.length && typeof jsonml[ 0 ] === \"object\" && !( jsonml[ 0 ] instanceof Array ) ) {\n    attributes = jsonml.shift();\n  }\n\n  while ( jsonml.length ) {\n    content.push( render_tree( jsonml.shift() ) );\n  }\n\n  var tag_attrs = \"\";\n  for ( var a in attributes ) {\n    tag_attrs += \" \" + a + '=\"' + escapeHTML( attributes[ a ] ) + '\"';\n  }\n\n  // be careful about adding whitespace here for inline elements\n  if ( tag == \"img\" || tag == \"br\" || tag == \"hr\" ) {\n    return \"<\"+ tag + tag_attrs + \"/>\";\n  }\n  else {\n    return \"<\"+ tag + tag_attrs + \">\" + content.join( \"\" ) + \"</\" + tag + \">\";\n  }\n}\n\nfunction convert_tree_to_html( tree, references, options ) {\n  var i;\n  options = options || {};\n\n  // shallow clone\n  var jsonml = tree.slice( 0 );\n\n  if ( typeof options.preprocessTreeNode === \"function\" ) {\n      jsonml = options.preprocessTreeNode(jsonml, references);\n  }\n\n  // Clone attributes if they exist\n  var attrs = extract_attr( jsonml );\n  if ( attrs ) {\n    jsonml[ 1 ] = {};\n    for ( i in attrs ) {\n      jsonml[ 1 ][ i ] = attrs[ i ];\n    }\n    attrs = jsonml[ 1 ];\n  }\n\n  // basic case\n  if ( typeof jsonml === \"string\" ) {\n    return jsonml;\n  }\n\n  // convert this node\n  switch ( jsonml[ 0 ] ) {\n    case \"header\":\n      jsonml[ 0 ] = \"h\" + jsonml[ 1 ].level;\n      delete jsonml[ 1 ].level;\n      break;\n    case \"bulletlist\":\n      jsonml[ 0 ] = \"ul\";\n      break;\n    case \"numberlist\":\n      jsonml[ 0 ] = \"ol\";\n      break;\n    case \"listitem\":\n      jsonml[ 0 ] = \"li\";\n      break;\n    case \"para\":\n      jsonml[ 0 ] = \"p\";\n      break;\n    case \"markdown\":\n      jsonml[ 0 ] = \"html\";\n      if ( attrs ) delete attrs.references;\n      break;\n    case \"code_block\":\n      jsonml[ 0 ] = \"pre\";\n      i = attrs ? 2 : 1;\n      var code = [ \"code\" ];\n      code.push.apply( code, jsonml.splice( i, jsonml.length - i ) );\n      jsonml[ i ] = code;\n      break;\n    case \"inlinecode\":\n      jsonml[ 0 ] = \"code\";\n      break;\n    case \"img\":\n      jsonml[ 1 ].src = jsonml[ 1 ].href;\n      delete jsonml[ 1 ].href;\n      break;\n    case \"linebreak\":\n      jsonml[ 0 ] = \"br\";\n    break;\n    case \"link\":\n      jsonml[ 0 ] = \"a\";\n      break;\n    case \"link_ref\":\n      jsonml[ 0 ] = \"a\";\n\n      // grab this ref and clean up the attribute node\n      var ref = references[ attrs.ref ];\n\n      // if the reference exists, make the link\n      if ( ref ) {\n        delete attrs.ref;\n\n        // add in the href and title, if present\n        attrs.href = ref.href;\n        if ( ref.title ) {\n          attrs.title = ref.title;\n        }\n\n        // get rid of the unneeded original text\n        delete attrs.original;\n      }\n      // the reference doesn't exist, so revert to plain text\n      else {\n        return attrs.original;\n      }\n      break;\n    case \"img_ref\":\n      jsonml[ 0 ] = \"img\";\n\n      // grab this ref and clean up the attribute node\n      var ref = references[ attrs.ref ];\n\n      // if the reference exists, make the link\n      if ( ref ) {\n        delete attrs.ref;\n\n        // add in the href and title, if present\n        attrs.src = ref.href;\n        if ( ref.title ) {\n          attrs.title = ref.title;\n        }\n\n        // get rid of the unneeded original text\n        delete attrs.original;\n      }\n      // the reference doesn't exist, so revert to plain text\n      else {\n        return attrs.original;\n      }\n      break;\n  }\n\n  // convert all the children\n  i = 1;\n\n  // deal with the attribute node, if it exists\n  if ( attrs ) {\n    // if there are keys, skip over it\n    for ( var key in jsonml[ 1 ] ) {\n        i = 2;\n        break;\n    }\n    // if there aren't, remove it\n    if ( i === 1 ) {\n      jsonml.splice( i, 1 );\n    }\n  }\n\n  for ( ; i < jsonml.length; ++i ) {\n    jsonml[ i ] = convert_tree_to_html( jsonml[ i ], references, options );\n  }\n\n  return jsonml;\n}\n\n\n// merges adjacent text nodes into a single node\nfunction merge_text_nodes( jsonml ) {\n  // skip the tag name and attribute hash\n  var i = extract_attr( jsonml ) ? 2 : 1;\n\n  while ( i < jsonml.length ) {\n    // if it's a string check the next item too\n    if ( typeof jsonml[ i ] === \"string\" ) {\n      if ( i + 1 < jsonml.length && typeof jsonml[ i + 1 ] === \"string\" ) {\n        // merge the second string into the first and remove it\n        jsonml[ i ] += jsonml.splice( i + 1, 1 )[ 0 ];\n      }\n      else {\n        ++i;\n      }\n    }\n    // if it's not a string recurse\n    else {\n      merge_text_nodes( jsonml[ i ] );\n      ++i;\n    }\n  }\n}\n\n} )( (function() {\n  if ( typeof exports === \"undefined\" ) {\n    window.markdown = {};\n    return window.markdown;\n  }\n  else {\n    return exports;\n  }\n} )() );\n","/*\n* jQuery UI Tag-it!\n*\n* @version v2.0 (06/2011)\n*\n* Copyright 2011, Levy Carneiro Jr.\n* Released under the MIT license.\n* http://aehlke.github.com/tag-it/LICENSE\n*\n* Homepage:\n*   http://aehlke.github.com/tag-it/\n*\n* Authors:\n*   Levy Carneiro Jr.\n*   Martin Rehfeld\n*   Tobias Schmidt\n*   Skylar Challand\n*   Alex Ehlke\n*\n* Maintainer:\n*   Alex Ehlke - Twitter: @aehlke\n*\n* Dependencies:\n*   jQuery v1.4+\n*   jQuery UI v1.8+\n*/\n(function($) {\n\n    $.widget('ui.tagit', {\n        options: {\n            allowDuplicates   : false,\n            caseSensitive     : true,\n            fieldName         : 'tags',\n            placeholderText   : null,   // Sets `placeholder` attr on input field.\n            readOnly          : false,  // Disables editing.\n            removeConfirmation: false,  // Require confirmation to remove tags.\n            tagLimit          : null,   // Max number of tags allowed (null for unlimited).\n\n            // Used for autocomplete, unless you override `autocomplete.source`.\n            availableTags     : [],\n\n            // Use to override or add any options to the autocomplete widget.\n            //\n            // By default, autocomplete.source will map to availableTags,\n            // unless overridden.\n            autocomplete: {},\n\n            // Shows autocomplete before the user even types anything.\n            showAutocompleteOnFocus: false,\n\n            // When enabled, quotes are unneccesary for inputting multi-word tags.\n            allowSpaces: false,\n\n            // The below options are for using a single field instead of several\n            // for our form values.\n            //\n            // When enabled, will use a single hidden field for the form,\n            // rather than one per tag. It will delimit tags in the field\n            // with singleFieldDelimiter.\n            //\n            // The easiest way to use singleField is to just instantiate tag-it\n            // on an INPUT element, in which case singleField is automatically\n            // set to true, and singleFieldNode is set to that element. This\n            // way, you don't need to fiddle with these options.\n            singleField: false,\n\n            // This is just used when preloading data from the field, and for\n            // populating the field with delimited tags as the user adds them.\n            singleFieldDelimiter: ',',\n\n            // Set this to an input DOM node to use an existing form field.\n            // Any text in it will be erased on init. But it will be\n            // populated with the text of tags as they are created,\n            // delimited by singleFieldDelimiter.\n            //\n            // If this is not set, we create an input node for it,\n            // with the name given in settings.fieldName.\n            singleFieldNode: null,\n\n            // Whether to animate tag removals or not.\n            animate: true,\n\n            // Optionally set a tabindex attribute on the input that gets\n            // created for tag-it.\n            tabIndex: null,\n\n            // Event callbacks.\n            beforeTagAdded      : null,\n            afterTagAdded       : null,\n\n            beforeTagRemoved    : null,\n            afterTagRemoved     : null,\n\n            onTagClicked        : null,\n            onTagLimitExceeded  : null,\n\n\n            // DEPRECATED:\n            //\n            // /!\\ These event callbacks are deprecated and WILL BE REMOVED at some\n            // point in the future. They're here for backwards-compatibility.\n            // Use the above before/after event callbacks instead.\n            onTagAdded  : null,\n            onTagRemoved: null,\n            // `autocomplete.source` is the replacement for tagSource.\n            tagSource: null,\n            onSubmitTags: null,\n            onFocus: null,\n            onBlur: null\n            // Do not use the above deprecated options.\n        },\n\n        _create: function() {\n            // for handling static scoping inside callbacks\n            var that = this;\n\n            // There are 2 kinds of DOM nodes this widget can be instantiated on:\n            //     1. UL, OL, or some element containing either of these.\n            //     2. INPUT, in which case 'singleField' is overridden to true,\n            //        a UL is created and the INPUT is hidden.\n            if (this.element.is('input')) {\n                this.tagList = $('<ul></ul>').insertAfter(this.element);\n                this.options.singleField = true;\n                this.options.singleFieldNode = this.element;\n                this.element.addClass('tagit-hidden-field');\n            } else {\n                this.tagList = this.element.find('ul, ol').andSelf().last();\n            }\n\n            this.tagInput = $('<input type=\"text\" />').addClass('ui-widget-content');\n\n            if (this.options.readOnly) this.tagInput.attr('disabled', 'disabled');\n\n            if (this.options.tabIndex) {\n                this.tagInput.attr('tabindex', this.options.tabIndex);\n            }\n\n            if (this.options.placeholderText) {\n                this.tagInput.attr('placeholder', this.options.placeholderText);\n            }\n\n            if (!this.options.autocomplete.source) {\n                this.options.autocomplete.source = function(search, showChoices) {\n                    var filter = search.term.toLowerCase();\n                    var choices = $.grep(this.options.availableTags, function(element) {\n                        // Only match autocomplete options that begin with the search term.\n                        // (Case insensitive.)\n                        return (element.toLowerCase().indexOf(filter) === 0);\n                    });\n                    if (!this.options.allowDuplicates) {\n                        choices = this._subtractArray(choices, this.assignedTags());\n                    }\n                    showChoices(choices);\n                };\n            }\n\n            if (this.options.showAutocompleteOnFocus) {\n                this.tagInput.focus(function(event, ui) {\n                    that._showAutocomplete();\n                });\n\n                if (typeof this.options.autocomplete.minLength === 'undefined') {\n                    this.options.autocomplete.minLength = 0;\n                }\n            }\n\n            // Bind autocomplete.source callback functions to this context.\n            if ($.isFunction(this.options.autocomplete.source)) {\n                this.options.autocomplete.source = $.proxy(this.options.autocomplete.source, this);\n            }\n\n            // DEPRECATED.\n            if ($.isFunction(this.options.tagSource)) {\n                this.options.tagSource = $.proxy(this.options.tagSource, this);\n            }\n\n            this.tagList\n                .addClass('tagit')\n                .addClass('ui-widget ui-widget-content ui-corner-all')\n                // Create the input field.\n                .append($('<li class=\"tagit-new\"></li>').append(this.tagInput))\n                .click(function(e) {\n                    var target = $(e.target);\n                    if (target.hasClass('tagit-label')) {\n                        var tag = target.closest('.tagit-choice');\n                        if (!tag.hasClass('removed')) {\n                            that._trigger('onTagClicked', e, {tag: tag, tagLabel: that.tagLabel(tag)});\n                        }\n                    } else {\n                        // Sets the focus() to the input field, if the user\n                        // clicks anywhere inside the UL. This is needed\n                        // because the input field needs to be of a small size.\n                        that.tagInput.focus();\n                    }\n                });\n\n            // Single field support.\n            var addedExistingFromSingleFieldNode = false;\n            if (this.options.singleField) {\n                if (this.options.singleFieldNode) {\n                    // Add existing tags from the input field.\n                    var node = $(this.options.singleFieldNode);\n                    var tags = node.val().split(this.options.singleFieldDelimiter);\n                    node.val('');\n                    $.each(tags, function(index, tag) {\n                        that.createTag(tag, null, true);\n                        addedExistingFromSingleFieldNode = true;\n                    });\n                } else {\n                    // Create our single field input after our list.\n                    this.options.singleFieldNode = $('<input type=\"hidden\" style=\"display:none;\" value=\"\" name=\"' + this.options.fieldName + '\" />');\n                    this.tagList.after(this.options.singleFieldNode);\n                }\n            }\n\n            // Add existing tags from the list, if any.\n            if (!addedExistingFromSingleFieldNode) {\n                this.tagList.children('li').each(function() {\n                    if (!$(this).hasClass('tagit-new')) {\n                        that.createTag($(this).text(), $(this).attr('class'), true);\n                        $(this).remove();\n                    }\n                });\n            }\n\n            // Events.\n            this.tagInput\n                .keydown(function(event) {\n                    // Backspace is not detected within a keypress, so it must use keydown.\n                    if (event.which == $.ui.keyCode.BACKSPACE && that.tagInput.val() === '') {\n                        var tag = that._lastTag();\n                        if (!that.options.removeConfirmation || tag.hasClass('remove')) {\n                            // When backspace is pressed, the last tag is deleted.\n                            that.removeTag(tag);\n                        } else if (that.options.removeConfirmation) {\n                            tag.addClass('remove ui-state-highlight');\n                        }\n                    } else if (that.options.removeConfirmation) {\n                        that._lastTag().removeClass('remove ui-state-highlight');\n                    } else if (event.which == $.ui.keyCode.ENTER && that.tagInput.val() === \"\") {\n                        that._trigger('onSubmitTags', null, that.tagList);\n                    }\n\n                    // Comma/Space/Enter are all valid delimiters for new tags,\n                    // except when there is an open quote or if setting allowSpaces = true.\n                    // Tab will also create a tag, unless the tag input is empty,\n                    // in which case it isn't caught.\n                    if (\n                        (event.which === $.ui.keyCode.COMMA && event.shiftKey === false) ||\n                        event.which === $.ui.keyCode.ENTER ||\n                        (\n                            event.which == $.ui.keyCode.TAB &&\n                            that.tagInput.val() !== ''\n                        ) ||\n                        (\n                            event.which == $.ui.keyCode.SPACE &&\n                            that.options.allowSpaces !== true &&\n                            (\n                                $.trim(that.tagInput.val()).replace( /^s*/, '' ).charAt(0) != '\"' ||\n                                (\n                                    $.trim(that.tagInput.val()).charAt(0) == '\"' &&\n                                    $.trim(that.tagInput.val()).charAt($.trim(that.tagInput.val()).length - 1) == '\"' &&\n                                    $.trim(that.tagInput.val()).length - 1 !== 0\n                                )\n                            )\n                        )\n                    ) {\n                        // Enter submits the form if there's no text in the input.\n                        if (!(event.which === $.ui.keyCode.ENTER && that.tagInput.val() === '')) {\n                            event.preventDefault();\n                        }\n\n                        // Autocomplete will create its own tag from a selection and close automatically.\n                        if (!(that.options.autocomplete.autoFocus && that.tagInput.data('autocomplete-open'))) {\n                            that.tagInput.autocomplete('close');\n                            that.createTag(that._cleanedInput());\n                        }\n                    }\n                }).blur(function(e){\n                    that._trigger('onBlur', null, null);\n                    // Create a tag when the element loses focus.\n                    // If autocomplete is enabled and suggestion was clicked, don't add it.\n                    if (!that.tagInput.data('autocomplete-open')) {\n                        that.createTag(that._cleanedInput());\n                    }\n                }).focus(function(e) {\n                    that._trigger('onFocus', null, null);\n                })\n\n            // Autocomplete.\n            if (this.options.availableTags || this.options.tagSource || this.options.autocomplete.source) {\n                var autocompleteOptions = {\n                    select: function(event, ui) {\n                        that.createTag(ui.item.value);\n                        // Preventing the tag input to be updated with the chosen value.\n                        return false;\n                    }\n                };\n                $.extend(autocompleteOptions, this.options.autocomplete);\n\n                // tagSource is deprecated, but takes precedence here since autocomplete.source is set by default,\n                // while tagSource is left null by default.\n                autocompleteOptions.source = this.options.tagSource || autocompleteOptions.source;\n\n                this.tagInput.autocomplete(autocompleteOptions).bind('autocompleteopen.tagit', function(event, ui) {\n                    that.tagInput.data('autocomplete-open', true);\n                }).bind('autocompleteclose.tagit', function(event, ui) {\n                    that.tagInput.data('autocomplete-open', false);\n                });\n\n                this.tagInput.autocomplete('widget').addClass('tagit-autocomplete');\n            }\n        },\n\n        destroy: function() {\n            $.Widget.prototype.destroy.call(this);\n\n            this.element.unbind('.tagit');\n            this.tagList.unbind('.tagit');\n\n            this.tagInput.removeData('autocomplete-open');\n\n            this.tagList.removeClass([\n                'tagit',\n                'ui-widget',\n                'ui-widget-content',\n                'ui-corner-all',\n                'tagit-hidden-field'\n            ].join(' '));\n\n            if (this.element.is('input')) {\n                this.element.removeClass('tagit-hidden-field');\n                this.tagList.remove();\n            } else {\n                this.element.children('li').each(function() {\n                    if ($(this).hasClass('tagit-new')) {\n                        $(this).remove();\n                    } else {\n                        $(this).removeClass([\n                            'tagit-choice',\n                            'ui-widget-content',\n                            'ui-state-default',\n                            'ui-state-highlight',\n                            'ui-corner-all',\n                            'remove',\n                            'tagit-choice-editable',\n                            'tagit-choice-read-only'\n                        ].join(' '));\n\n                        $(this).text($(this).children('.tagit-label').text());\n                    }\n                });\n\n                if (this.singleFieldNode) {\n                    this.singleFieldNode.remove();\n                }\n            }\n\n            return this;\n        },\n\n        _cleanedInput: function() {\n            // Returns the contents of the tag input, cleaned and ready to be passed to createTag\n            return $.trim(this.tagInput.val().replace(/^\"(.*)\"$/, '$1'));\n        },\n\n        _lastTag: function() {\n            return this.tagList.find('.tagit-choice:last:not(.removed)');\n        },\n\n        _tags: function() {\n            return this.tagList.find('.tagit-choice:not(.removed)');\n        },\n\n        assignedTags: function() {\n            // Returns an array of tag string values\n            var that = this;\n            var tags = [];\n            if (this.options.singleField) {\n                tags = $(this.options.singleFieldNode).val().split(this.options.singleFieldDelimiter);\n                if (tags[0] === '') {\n                    tags = [];\n                }\n            } else {\n                this._tags().each(function() {\n                    tags.push(that.tagLabel(this));\n                });\n            }\n            return tags;\n        },\n\n        _updateSingleTagsField: function(tags) {\n            // Takes a list of tag string values, updates this.options.singleFieldNode.val to the tags delimited by this.options.singleFieldDelimiter\n            $(this.options.singleFieldNode).val(tags.join(this.options.singleFieldDelimiter)).trigger('change');\n        },\n\n        _subtractArray: function(a1, a2) {\n            var result = [];\n            for (var i = 0; i < a1.length; i++) {\n                if ($.inArray(a1[i], a2) == -1) {\n                    result.push(a1[i]);\n                }\n            }\n            return result;\n        },\n\n        tagLabel: function(tag) {\n            // Returns the tag's string label.\n            if (this.options.singleField) {\n                return $(tag).find('.tagit-label:first').text();\n            } else {\n                return $(tag).find('input:first').val();\n            }\n        },\n\n        _showAutocomplete: function() {\n            this.tagInput.autocomplete('search', '');\n        },\n\n        _findTagByLabel: function(name) {\n            var that = this;\n            var tag = null;\n            this._tags().each(function(i) {\n                if (that._formatStr(name) == that._formatStr(that.tagLabel(this))) {\n                    tag = $(this);\n                    return false;\n                }\n            });\n            return tag;\n        },\n\n        _isNew: function(name) {\n            return !this._findTagByLabel(name);\n        },\n\n        _formatStr: function(str) {\n            if (this.options.caseSensitive) {\n                return str;\n            }\n            return $.trim(str.toLowerCase());\n        },\n\n        _effectExists: function(name) {\n            return Boolean($.effects && ($.effects[name] || ($.effects.effect && $.effects.effect[name])));\n        },\n\n        createTag: function(value, additionalClass, duringInitialization) {\n            var that = this;\n\n            value = $.trim(value);\n\n            if(this.options.preprocessTag) {\n                value = this.options.preprocessTag(value);\n            }\n\n            if (value === '') {\n                return false;\n            }\n\n            if (!this.options.allowDuplicates && !this._isNew(value)) {\n                var existingTag = this._findTagByLabel(value);\n                if (this._trigger('onTagExists', null, {\n                    existingTag: existingTag,\n                    duringInitialization: duringInitialization\n                }) !== false) {\n                    if (this._effectExists('highlight')) {\n                        existingTag.effect('highlight');\n                    }\n                }\n                return false;\n            }\n\n            if (this.options.tagLimit && this._tags().length >= this.options.tagLimit) {\n                this._trigger('onTagLimitExceeded', null, {duringInitialization: duringInitialization});\n                return false;\n            }\n\n            var label = $(this.options.onTagClicked ? '<a class=\"tagit-label\"></a>' : '<span class=\"tagit-label\"></span>').text(value);\n\n            // Create tag.\n            var tag = $('<li></li>')\n                .addClass('tagit-choice ui-widget-content ui-state-default ui-corner-all')\n                .addClass(additionalClass)\n                .append(label);\n\n            if (this.options.readOnly){\n                tag.addClass('tagit-choice-read-only');\n            } else {\n                tag.addClass('tagit-choice-editable');\n                // Button for removing the tag.\n                var removeTagIcon = $('<span></span>')\n                    .addClass('ui-icon ui-icon-close');\n                var removeTag = $('<a><span class=\"text-icon\">\\xd7</span></a>') // \\xd7 is an X\n                    .addClass('tagit-close')\n                    .append(removeTagIcon)\n                    .click(function(e) {\n                        // Removes a tag when the little 'x' is clicked.\n                        that.removeTag(tag);\n                    });\n                tag.append(removeTag);\n            }\n\n            // Unless options.singleField is set, each tag has a hidden input field inline.\n            if (!this.options.singleField) {\n                var escapedValue = label.html();\n                tag.append('<input type=\"hidden\" value=\"' + escapedValue + '\" name=\"' + this.options.fieldName + '\" class=\"tagit-hidden-field\" />');\n            }\n\n            if (this._trigger('beforeTagAdded', null, {\n                tag: tag,\n                tagLabel: this.tagLabel(tag),\n                duringInitialization: duringInitialization\n            }) === false) {\n                return;\n            }\n\n            if (this.options.singleField) {\n                var tags = this.assignedTags();\n                tags.push(value);\n                this._updateSingleTagsField(tags);\n            }\n\n            // DEPRECATED.\n            this._trigger('onTagAdded', null, tag);\n\n            this.tagInput.val('');\n\n            // Insert tag.\n            this.tagInput.parent().before(tag);\n\n            this._trigger('afterTagAdded', null, {\n                tag: tag,\n                tagLabel: this.tagLabel(tag),\n                duringInitialization: duringInitialization\n            });\n\n            if (this.options.showAutocompleteOnFocus && !duringInitialization) {\n                setTimeout(function () { that._showAutocomplete(); }, 0);\n            }\n        },\n\n        removeTag: function(tag, animate) {\n            animate = typeof animate === 'undefined' ? this.options.animate : animate;\n\n            tag = $(tag);\n\n            // DEPRECATED.\n            this._trigger('onTagRemoved', null, tag);\n\n            if (this._trigger('beforeTagRemoved', null, {tag: tag, tagLabel: this.tagLabel(tag)}) === false) {\n                return;\n            }\n\n            if (this.options.singleField) {\n                var tags = this.assignedTags();\n                var removedTagLabel = this.tagLabel(tag);\n                tags = $.grep(tags, function(el){\n                    return el != removedTagLabel;\n                });\n                this._updateSingleTagsField(tags);\n            }\n\n            if (animate) {\n                tag.addClass('removed'); // Excludes this tag from _tags.\n                var hide_args = this._effectExists('blind') ? ['blind', {direction: 'horizontal'}, 'fast'] : ['fast'];\n\n                var thisTag = this;\n                hide_args.push(function() {\n                    tag.remove();\n                    thisTag._trigger('afterTagRemoved', null, {tag: tag, tagLabel: thisTag.tagLabel(tag)});\n                });\n\n                tag.fadeOut('fast').hide.apply(tag, hide_args).dequeue();\n            } else {\n                tag.remove();\n                this._trigger('afterTagRemoved', null, {tag: tag, tagLabel: this.tagLabel(tag)});\n            }\n\n        },\n\n        removeTagByLabel: function(tagLabel, animate) {\n            var toRemove = this._findTagByLabel(tagLabel);\n            if (!toRemove) {\n                throw \"No such tag exists with the name '\" + tagLabel + \"'\";\n            }\n            this.removeTag(toRemove, animate);\n        },\n\n        removeAll: function() {\n            // Removes all tags.\n            var that = this;\n            this._tags().each(function(index, tag) {\n                that.removeTag(tag, false);\n            });\n        }\n\n    });\n})(jQuery);\n"],"sourceRoot":""}